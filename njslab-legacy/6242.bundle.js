"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6242],{6242:(t,e,i)=>{i.r(e),i.d(e,{Demo250AppTetrisGame:()=>M});var s,h,n=function(t){var e=t.length||0,i=t[0]instanceof Array?t[0].length:0;if(0===i||0===e)return[];var s,h=0,n=[];for(s=0;s<i;s++)for(n[s]=[],h=0;h<e;h++)n[s][h]=t[h][s];return n},o=i(906),r=function(){function t(t,e,i,s,h){this.pixels=[],this.widthPixel=1,this.heightPixel=1,this.tetrisGame=t,this.vec=new o.h9(s,h),this.colorFill=o.mK.GetRandomColor(),this.colorStroke="rgba(0,0,0,0.5)",this.widthMap=e,this.heightMap=i,this.InitBlock()}return t.prototype.InitBlock=function(){this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1])},t.prototype.UpdateMove=function(t){return t.Update(this)?(this.vec.y+=1,!0):!(this.vec.y+3>this.heightMap)},t.prototype.GetMat=function(){return this.pixels},t.prototype.UpdatePos=function(t,e){if(!this.CheckValidatedGround(e))if(t){if(1+this.vec.x<=this.widthMap-this.pixels.length){if(this.UpdateCheckWithMap(t,e))return;this.vec.x++}}else if(-1+this.vec.x>-1){if(this.UpdateCheckWithMap(t,e))return;this.vec.x--}},t.prototype.UpdateCheckWithMap=function(t,e){var i=this.GetMat();if(t){for(var s=0;s<i.length;++s)for(var h=0;h<i[s].length;++h)if(1===i[s][h]){var n=this.vec.x+h+1,o=this.vec.y+s;if(n<this.tetrisGame.heightNum&&(r=e.pixels[o][n])&&r.isFill)return!0}}else for(s=0;s<i.length;++s)for(h=0;h<i[s].length;++h){var r;if(1===i[s][h])if(n=this.vec.x+h-1,o=this.vec.y+s,(r=e.pixels[o][n])&&r.isFill)return!0}return!1},t.prototype.UpdateRot=function(t){return!1},t.prototype.CheckValidatedGround=function(t){for(var e=this.GetMat(),i=0;i<e.length;++i)for(var s=0;s<e[i].length;++s)if(1===e[i][s]){var h=this.vec.y+3;if(!(h<this.tetrisGame.heightNum))return!1;var n=t.pixels[h][this.vec.x];if(this.vec.y+1>h&&n&&n.isFill)return!0}return!1},t.prototype.Render=function(t){for(var e=0;e<this.pixels.length;++e)for(var i=0;i<this.pixels[e].length;++i){var s=this.vec.Clone();s.x+=i,s.y+=e,this.RenderPixel(t,s)}},t.prototype.RenderPixel=function(t,e){t.beginPath(),t.rect(e.x*this.tetrisGame.scaleForRender,e.y*this.tetrisGame.scaleForRender,this.widthPixel*this.tetrisGame.scaleForRender,this.heightPixel*this.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()},t}(),a=(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},s(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=function(t){function e(e,i,s,h,n){var o=t.call(this,e,i,s,h,n)||this;return o.widthPixel=1,o.heightPixel=1,o}return a(e,t),e.prototype.InitBlock=function(){this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1])},e.prototype.UpdateMove=function(t){return t.Update(this)?(this.vec.y+=1,!0):!(this.vec.y+3>this.heightMap)},e.prototype.GetMat=function(){return this.pixels},e.prototype.UpdatePos=function(t,e){if(!this.CheckValidatedGround(e))if(t){if(1+this.vec.x<=this.widthMap-this.pixels[0].length){if(this.UpdateCheckWithMap(t,e))return;this.vec.x++}}else if(-1+this.vec.x>-1){if(this.UpdateCheckWithMap(t,e))return;this.vec.x--}},e.prototype.ShiftMatrix=function(t){},e.prototype.UpdateCheckWithMap=function(t,e){var i=this.GetMat();if(t){for(var s=0;s<i.length;++s)for(var h=0;h<i[s].length;++h)if(1===i[s][h]){var n=this.vec.x+h+1,o=this.vec.y+s;if(n<this.tetrisGame.heightNum&&(r=e.pixels[o][n])&&r.isFill)return!0}}else for(s=0;s<i.length;++s)for(h=0;h<i[s].length;++h){var r;if(1===i[s][h])if(n=this.vec.x+h-1,o=this.vec.y+s,(r=e.pixels[o][n])&&r.isFill)return!0}return!1},e.prototype.UpdateRot=function(t){var e=n(this.pixels);if(console.log(e),e[0].length>3&&t.width-4<this.vec.x)this.vec.x-=3;else if(this.vec.y>t.width){for(var i=!0,s=0;s<e.length;++s)t.pixels[this.vec.y+s][this.vec.x].isFill&&(i=!1);if(!i)return!1}return this.pixels=e,!1},e.prototype.CheckValidatedGround=function(t){for(var e=this.GetMat(),i=0;i<e.length;++i)for(var s=0;s<e[i].length;++s)if(1===e[i][s]){var h=this.vec.y+3;if(!(h<this.tetrisGame.heightNum))return!1;var n=t.pixels[h][this.vec.x];if(this.vec.y+1>h&&n&&n.isFill)return!0}return!1},e.prototype.Render=function(t){for(var e=0;e<this.pixels.length;++e)for(var i=0;i<this.pixels[e].length;++i){var s=this.vec.Clone();s.x+=i,s.y+=e,this.RenderPixel(t,s)}},e.prototype.RenderPixel=function(t,e){t.beginPath(),t.rect(e.x*this.tetrisGame.scaleForRender,e.y*this.tetrisGame.scaleForRender,this.widthPixel*this.tetrisGame.scaleForRender,this.heightPixel*this.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()},e}(r),p=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),c=function(t){function e(e,i,s,h,n){var o=t.call(this,e,i,s,h,n)||this;return o.widthPixel=1,o.heightPixel=1,o}return p(e,t),e.prototype.InitBlock=function(){this.pixels.push([1,1]),this.pixels.push([1,1])},e.prototype.UpdateMove=function(t){return t.Update(this)?(this.vec.y+=1,!0):!(this.vec.y+3>this.heightMap)},e.prototype.GetMat=function(){return this.pixels},e.prototype.UpdatePos=function(t,e){if(!this.CheckValidatedGround(e))if(t){if(1+this.vec.x<=this.widthMap-this.pixels[0].length){if(this.UpdateCheckWithMap(t,e))return;this.vec.x++}}else if(-1+this.vec.x>-1){if(this.UpdateCheckWithMap(t,e))return;this.vec.x--}},e.prototype.ShiftMatrix=function(t){},e.prototype.UpdateCheckWithMap=function(t,e){var i=this.GetMat();if(t){for(var s=0;s<i.length;++s)for(var h=0;h<i[s].length;++h)if(1===i[s][h]){var n=this.vec.x+h+1,o=this.vec.y+s;if(n<this.tetrisGame.heightNum&&(r=e.pixels[o][n])&&r.isFill)return!0}}else for(s=0;s<i.length;++s)for(h=0;h<i[s].length;++h){var r;if(1===i[s][h])if(n=this.vec.x+h-1,o=this.vec.y+s,(r=e.pixels[o][n])&&r.isFill)return!0}return!1},e.prototype.UpdateRot=function(t){var e=n(this.pixels);if(console.log(e),e[0].length>3&&t.width-4<this.vec.x)this.vec.x-=3;else if(this.vec.y>t.width){for(var i=!0,s=0;s<e.length;++s)t.pixels[this.vec.y+s][this.vec.x].isFill&&(i=!1);if(!i)return!1}return this.pixels=e,!1},e.prototype.CheckValidatedGround=function(t){for(var e=this.GetMat(),i=0;i<e.length;++i)for(var s=0;s<e[i].length;++s)if(1===e[i][s]){var h=this.vec.y+3;if(!(h<this.tetrisGame.heightNum))return!1;var n=t.pixels[h][this.vec.x];if(this.vec.y+1>h&&n&&n.isFill)return!0}return!1},e.prototype.Render=function(t){for(var e=0;e<this.pixels.length;++e)for(var i=0;i<this.pixels[e].length;++i){var s=this.vec.Clone();s.x+=i,s.y+=e,this.RenderPixel(t,s)}},e.prototype.RenderPixel=function(t,e){t.beginPath(),t.rect(e.x*this.tetrisGame.scaleForRender,e.y*this.tetrisGame.scaleForRender,this.widthPixel*this.tetrisGame.scaleForRender,this.heightPixel*this.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()},e}(r),u=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),d=function(t){function e(e,i,s,h,n){var o=t.call(this,e,i,s,h,n)||this;return o.widthPixel=1,o.heightPixel=1,o}return u(e,t),e.prototype.InitBlock=function(){this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1])},e.prototype.UpdateMove=function(t){return t.Update(this)?(this.vec.y+=1,!0):!(this.vec.y+3>this.heightMap)},e.prototype.GetMat=function(){return this.pixels},e.prototype.UpdatePos=function(t,e){if(!this.CheckValidatedGround(e))if(t){if(1+this.vec.x<=this.widthMap-this.pixels[0].length){if(this.UpdateCheckWithMap(t,e))return;this.vec.x++}}else if(-1+this.vec.x>-1){if(this.UpdateCheckWithMap(t,e))return;this.vec.x--}},e.prototype.ShiftMatrix=function(t){},e.prototype.UpdateCheckWithMap=function(t,e){var i=this.GetMat();if(t){for(var s=0;s<i.length;++s)for(var h=0;h<i[s].length;++h)if(1===i[s][h]){var n=this.vec.x+h+1,o=this.vec.y+s;if(n<this.tetrisGame.heightNum&&(r=e.pixels[o][n])&&r.isFill)return!0}}else for(s=0;s<i.length;++s)for(h=0;h<i[s].length;++h){var r;if(1===i[s][h])if(n=this.vec.x+h-1,o=this.vec.y+s,(r=e.pixels[o][n])&&r.isFill)return!0}return!1},e.prototype.UpdateRot=function(t){var e=n(this.pixels);if(console.log(e),e[0].length>3&&t.width-4<this.vec.x)this.vec.x-=3;else if(this.vec.y>t.width){for(var i=!0,s=0;s<e.length;++s)t.pixels[this.vec.y+s][this.vec.x].isFill&&(i=!1);if(!i)return!1}return this.pixels=e,!1},e.prototype.CheckValidatedGround=function(t){for(var e=this.GetMat(),i=0;i<e.length;++i)for(var s=0;s<e[i].length;++s)if(1===e[i][s]){var h=this.vec.y+3;if(!(h<this.tetrisGame.heightNum))return!1;var n=t.pixels[h][this.vec.x];if(this.vec.y+1>h&&n&&n.isFill)return!0}return!1},e.prototype.Render=function(t){for(var e=0;e<this.pixels.length;++e)for(var i=0;i<this.pixels[e].length;++i){var s=this.vec.Clone();s.x+=i,s.y+=e,this.RenderPixel(t,s)}},e.prototype.RenderPixel=function(t,e){t.beginPath(),t.rect(e.x*this.tetrisGame.scaleForRender,e.y*this.tetrisGame.scaleForRender,this.widthPixel*this.tetrisGame.scaleForRender,this.heightPixel*this.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()},e}(r),f=function(){function t(t,e,i){this.pixels=[],this.numLineMax=-1,this.tetrisGame=t,this.numLineMax=i,this.width=e,this.height=i,this.Init()}return t.prototype.Init=function(){for(var t=0;t<this.height;++t){for(var e=[],i=0;i<this.width;++i)e.push(new v(this,"rgba(0,0,0,0)","rgba(0,0,0,0.15)"));this.pixels.push(e)}},t.prototype.Update=function(t){return!this.CheckCollision(t)||(this.tetrisGame.InitBlock(),!1)},t.prototype.isDone=function(){return 0===this.numLineMax},t.prototype.AddEmptyLine=function(){for(var t=[],e=[],i=0;i<this.width;++i)e.push(new v(this,"rgba(0,0,0,0)","rgba(0,0,0,0.15)"));t.push(e),t.concat(this.pixels),console.log(t),this.pixels=t},t.prototype.RemoveLine=function(){var t=this.CheckLines();if(0===t.length)return!1;for(var e=0,i=[],s=0;s<t.length;++s){for(var h=[],n=0;n<this.width;++n)h.push(new v(this,"rgba(0,0,0,0)","rgba(0,0,0,0.15)"));i.push(h),this.tetrisGame.UpdateUINumofLine()}for(s=0;s<this.pixels.length;++s)t[e]===s?e++:i.push(this.pixels[s]);return this.pixels=i,!0},t.prototype.IsOver=function(){},t.prototype.CheckLines=function(){for(var t=[],e=0;e<this.pixels.length;++e){for(var i=!0,s=0;s<this.pixels[e].length;++s)this.pixels[e][s].isFill||(i=!1);i&&t.push(e)}return t},t.prototype.CheckCollision=function(t){if(0!==this.pixels.length){for(var e=t.GetMat(),i=!1,s=0;s<e.length;++s)for(var h=0;h<e[s].length;++h)if(1===e[s][h]){var n=t.vec.x+h;((o=t.vec.y+s+1)>this.height-1||this.pixels[o][n]&&this.pixels[o][n].isFill)&&(i=!0)}if(i){for(s=0;s<e.length;++s)for(h=0;h<e[s].length;++h)if(1===e[s][h]){n=t.vec.x+h;var o=t.vec.y+s+1;console.log(o,n),console.log(this.pixels),o<this.height+1&&(this.pixels[o-1][n].isFill=!0,this.pixels[o-1][n].colorFill=t.colorFill)}return!0}return!1}},t.prototype.ClonePixels=function(){for(var t=[],e=0;e<this.pixels.length;++e){for(var i=[],s=0;s<this.pixels[e].length;++s)i.push(this.pixels[e][s].DeepCopy());t.push(i)}return t},t.prototype.Render=function(t){for(var e=!0,i=0;i<this.pixels.length;++i)for(var s=0;s<this.pixels[i].length;++s)this.pixels[i][s].isFill&&e&&(this.numLineMax=i,e=!1),this.pixels[i][s].Render(t,s,i)},t}(),v=function(){function t(t,e,i){this.isFill=!1,this.width=1,this.height=1,this.pixelMap=t,this.colorFill=e,this.colorStroke=i}return t.prototype.DeepCopy=function(){var e=new t(this.pixelMap,this.colorFill,this.colorStroke);return e.isFill=this.isFill,e},t.prototype.Render=function(t,e,i){t.beginPath(),t.rect(e*this.pixelMap.tetrisGame.scaleForRender,i*this.pixelMap.tetrisGame.scaleForRender,this.width*this.pixelMap.tetrisGame.scaleForRender,this.height*this.pixelMap.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()},t}();!function(t){t.left="left",t.right="right",t.rotate="rotate",t.down="down"}(h||(h={}));var y=function(){function t(t){this.actions=[],this.tetrisGame=t}return t.prototype.AddAction=function(t){this.actions.push(t)},t.prototype.GetActionuQueue=function(){return this.actions.shift()},t.prototype.Update=function(t){var e=t.GetMat(),i=this.tetrisGame.pixelMap.pixels,s=this.tetrisGame.pixelMap.numLineMax-3<0?0:this.tetrisGame.pixelMap.numLineMax-3;console.log("startLine",s);for(var h=0,n=s;n<i.length-3;++n)for(var o=0;o<i[n].length-2;++o){for(var r=!0,a=0;a<e.length;++a)for(var l=0;l<e[a].length;++l){var p=o+l,c=i[n+a][p];1===e[a][l]&&c.isFill&&(r=!1)}r&&(console.log(o,n),h++)}console.log("startLine",s,"possbilities",h),this.UpdateAction()},t.prototype.Cost=function(t,e,i){},t.prototype.UpdateAction=function(){if(Math.random()<.9){var t=Math.random();t<.3?this.AddAction(h.left):.3<t&&t<.6?this.AddAction(h.right):.6<t&&t<.9?this.AddAction(h.rotate):this.AddAction(h.down)}},t}(),x=function(){function t(t,e,i,s,h){var n=this;this.dx=2,this.dy=-2,this.paddleHeight=10,this.paddleWidth=75,this.paddleX=10,this.rightPressed=!1,this.leftPressed=!1,this.timer=0,this.scaleForRender=10,this.speed=10,this.hasKeyboardInput=!1,this.numOfBlock=0,this.numOfLine=0,this.pause=!1,this.tetrisSystem=t,this.scaleForRender=s,this.widthNum=e,this.heightNum=i,this.canvas=this.tetrisSystem.CanvasCore.canvas,this.paddleX=(this.canvas.width-this.paddleWidth)/2,this.speed=h,document.onkeydown=function(t){return n.keyDownHandler(t)},document.onkeyup=function(t){return n.keyUpHandler(t)},this.Init()}return t.prototype.keyDownHandler=function(t){this.hasKeyboardInput=!0,this.pause||("Right"===t.key||"ArrowRight"===t.key?(this.rightPressed=!0,this.blockbase.UpdatePos(!0,this.pixelMap)):"Left"===t.key||"ArrowLeft"===t.key?(this.leftPressed=!0,this.blockbase.UpdatePos(!1,this.pixelMap)):"Up"===t.key||"ArrowUp"===t.key?(this.leftPressed=!0,this.blockbase.UpdateRot(this.pixelMap)):"Down"!==t.key&&"ArrowDown"!==t.key||(this.leftPressed=!0,this.blockbase.UpdateMove(this.pixelMap)))},t.prototype.keyUpHandler=function(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!1)},t.prototype.UpdateUINumofBlock=function(){this.numOfBlock++,this.tetrisSystem.CanvasCore.p0.innerText="Blocks: "+this.numOfBlock},t.prototype.UpdateUINumofLine=function(){this.numOfLine++,this.tetrisSystem.CanvasCore.p1.innerText="Lines removed: "+this.numOfLine},t.prototype.Init=function(){this.pause=!1,this.pixelMap=new f(this,this.widthNum,this.heightNum),this.player=new y(this),this.InitBlock(),this.InitUI()},t.prototype.InitUI=function(){this.numOfBlock=0,this.numOfLine=0,this.tetrisSystem.CanvasCore.p0.innerText="Blocks: "+this.numOfBlock,this.tetrisSystem.CanvasCore.p1.innerText="Lines removed: "+this.numOfLine},t.prototype.InitBlock=function(){if(this.pixelMap.RemoveLine(),this.pixelMap.isDone())console.log("done!!!!!");else{var t=Math.random();t<.3?this.blockbase=new l(this,this.widthNum,this.heightNum,Math.floor(.5*this.widthNum),0):.3<t&&t<.6?this.blockbase=new c(this,this.widthNum,this.heightNum,Math.floor(.5*this.widthNum),0):.6<t&&(this.blockbase=new d(this,this.widthNum,this.heightNum,Math.floor(.5*this.widthNum),0)),this.UpdateUINumofBlock()}},t.prototype.Render=function(t){if(this.pixelMap.Render(t),this.blockbase.Render(t),!this.hasKeyboardInput&&this.timer%2==0){var e=this.player.GetActionuQueue();if(e)switch(e){case h.left:this.blockbase.UpdatePos(!1,this.pixelMap);break;case h.right:this.blockbase.UpdatePos(!0,this.pixelMap);break;case h.rotate:this.blockbase.UpdateRot(this.pixelMap);break;case h.down:this.blockbase.UpdateMove(this.pixelMap)}}this.timer%100==0&&this.player.Update(this.blockbase),this.pause||this.timer%this.speed!=0||this.blockbase.UpdateMove(this.pixelMap)||this.Init(),this.timer++},t}(),m=function(){function t(t,e,i,s){void 0===e&&(e=150),void 0===i&&(i=300),void 0===s&&(s="You"),this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.TetrisSystem=t,this.width=e,this.height=i,this.name=s;var h=document.getElementById(t.id);h&&(this.host=h,this.InitCanvas())}return t.prototype.InitCanvas=function(){var t=document.createElement("div");if(t){this.divLocalMain=t,this.divLocalMain.style.display="inline-grid",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);var e=document.createElement("div");if(e){this.divCanvas=e,this.divLocalMain.append(e);var i=document.createElement("canvas");if(i){this.canvas=i,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#dddddd";var s=this.canvas.getContext("2d");s&&(this.ctx=s,this.InitUI(),this.Init())}}}},t.prototype.InitUI=function(){var t=this,e=document.createElement("div");if(e){this.divUI=e,this.divLocalMain.append(e),this.divUI.style.width="100%",this.divUI.style.display="grid";var i=document.createElement("button");i.textContent="reset",i.onclick=function(){t.TetrisSystem.InitGame()},this.divUI.append(i),this.pName=document.createElement("p"),this.pName&&(this.divUI.append(this.pName),this.pName.style.width="max-content",this.pName.innerHTML="Player: "+this.name,this.p0=document.createElement("p"),this.p0&&(this.divUI.append(this.p0),this.p0.style.width="max-content",this.p0.innerHTML="Blocks",this.p1=document.createElement("p"),this.p1&&(this.divUI.append(this.p1),this.p1.style.width="Lines removed: ",this.p1.innerHTML="",this.p2=document.createElement("p"),this.p2&&(this.divUI.append(this.p2),this.p2.style.width="max-content",this.p2.innerHTML=""))))}},t.prototype.Init=function(){this.ctx.scale(1,1),this.EventBind(),this.Loop()},t.prototype.EventBind=function(){var t=this;this.canvas.onclick=function(e){t.prevent=!1,t.timer=setTimeout((function(){if(!t.prevent){if(!t.click)return;t.MouseClick(e)}t.prevent=!1}),t.delay)},this.canvas.ondblclick=function(e){clearTimeout(t.timer),t.prevent=!0,t.MouseDoubleClick(e)},this.canvas.addEventListener("wheel",(function(e){return t.MouseWheel(e,e.deltaY)})),this.canvas.onmousedown=function(e){t.click=!0,t.pressed=!0,t.MouseDown(e)},this.canvas.onmouseup=function(e){t.pressed=!1,t.MouseUp(e)},this.canvas.onmousemove=function(e){t.pressed&&(t.click=!1,t.MouseDrag(e)),t.MouseMove(e)},window.onresize=function(e){return t.Resize(e)}},t.prototype.Resize=function(t){},t.prototype.Loop=function(){var t=this;requestAnimationFrame((function(){t.Loop()})),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)},t.prototype.Render=function(t){},t.prototype.MouseClick=function(t){},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){},t.prototype.MouseDrag=function(t){},t.prototype.MouseWheel=function(t,e){},t}(),g=function(){function t(t,e,i,s,h,n){void 0===i&&(i=10),void 0===s&&(s=10),void 0===h&&(h=10),void 0===n&&(n=30),this.t=.9,this.scale=10,this.width=15,this.height=30,this.speed=30,this.m=new o.h9(0,0,0),this.id=t,this.scale=h,this.width=i,this.height=s,this.speed=n,this.CanvasCore=new m(this,this.width*this.scale,this.height*this.scale,e),this.Init(),this.InitGame()}return t.prototype.Init=function(){var t=this;this.CanvasCore.Render=function(e){return t.Render(e)},this.CanvasCore.MouseDown=function(e){return t.MouseDown(e)},this.CanvasCore.MouseClick=function(e){return t.MouseClick(e)},this.CanvasCore.MouseDoubleClick=function(e){return t.MouseDoubleClick(e)},this.CanvasCore.MouseUp=function(e){return t.MouseUp(e)},this.CanvasCore.MouseMove=function(e){return t.MouseMove(e)},this.CanvasCore.MouseDrag=function(e){return t.MouseDrag(e)}},t.prototype.InitGame=function(){this.tetrisGame=new x(this,this.width,this.height,this.scale,this.speed)},t.prototype.Render=function(t){this.tetrisGame&&this.tetrisGame.Render(t)},t.prototype.MouseDown=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height)},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){},t.prototype.MouseDrag=function(t){},t.prototype.MouseClick=function(t){},t.prototype.MouseDoubleClick=function(t){},t}(),w=function(t){var e={name:"NJ",width:6,height:10,scale:40,speed:12};new g(t,e.name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"Kuan",width:15,height:10,scale:40,speed:5}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"NJ",width:6,height:10,scale:40,speed:9}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"Kuan",width:15,height:10,scale:40,speed:6}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"Kuan",width:15,height:10,scale:40,speed:5}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"NJ",width:6,height:10,scale:40,speed:9}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"Kuan",width:15,height:10,scale:40,speed:6}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"Kuan",width:15,height:10,scale:40,speed:5}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"NJ",width:6,height:10,scale:40,speed:9}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"Kuan",width:15,height:10,scale:40,speed:6}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"Kuan",width:15,height:10,scale:40,speed:5}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"NJ",width:6,height:10,scale:40,speed:9}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"Kuan",width:15,height:10,scale:40,speed:6}).name,e.width,e.height,e.scale,e.speed),new g(t,(e={name:"You",width:50,height:20,scale:40,speed:5}).name,e.width,e.height,e.scale,e.speed)},M=function(){function t(t){void 0===t&&(t="SandBox");var e=document.getElementById(t);e&&(this.host=e,this.host.style.overflow="auto"),this.implementation=new w(t)}return t.Init=function(e){new t(e).Dummy()},t.prototype.Dummy=function(){},t}()}}]);
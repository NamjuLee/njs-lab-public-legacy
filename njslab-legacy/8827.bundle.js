"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8827],{8827:(t,o,e)=>{e.r(o),e.d(o,{AppMatterEnv:()=>A});var i,n=e(906),s=function(){function t(t,o){this.isActive=!1,this.zoom=1,this.translation=[0,0],this.translationZoom=[0,0],this.isViewChanging=!1,this.loopNum=0,this.needRenderloop=!0,this.ablePan=!0,this.pause=!1,this.core=t,this.div=o,this.Init(),this.LoopInit()}return t.prototype.Init=function(){var t=document.createElement("canvas");if(t){this.canvas=t,this.canvas.width=this.div.clientWidth,this.canvas.height=this.div.clientHeight,this.div.append(this.canvas);var o=this.canvas.getContext("2d");o&&(this.ctx=o,this.isActive=!0)}},t.prototype.LoopInit=function(){this.translation[0]=.5*this.ctx.canvas.width,this.translation[1]=.5*this.ctx.canvas.height,this.deltaTime=new n.gk,this.canvasLoopController=new n.NI(60),this.SetLevel4(),this.Loop()},t.prototype.Loop=function(){var t=this,o=performance.now();if(this.deltaTime.UpdateFPS(),this.canvasLoopController.level>3){if(6===this.canvasLoopController.level)requestAnimationFrame((function(){t.Loop()})),this.RenderPre(this.ctx);else if(5===this.canvasLoopController.level)this.isViewChanging,requestAnimationFrame((function(){t.Loop()})),this.RenderPre(this.ctx);else if(4===this.canvasLoopController.level){if(this.isViewChanging,requestAnimationFrame((function(){t.Loop()})),this.canvasLoopController.stop)return;this.RenderPre(this.ctx),this.canvasLoopController.TimerForStop()}}else 1===this.canvasLoopController.level&&this.isViewChanging||this.RenderPre(this.ctx);var e=performance.now();this.log="level:  "+this.canvasLoopController.level+", total frames: "+this.loopNum+++" (FPS: "+this.deltaTime.frameRate.toFixed(0)+"), a loop took: "+(e-o).toFixed(2)+" ms to execute."},t.prototype.SetLevel1=function(){this.canvasLoopController.level=1,this.Loop()},t.prototype.SetLevel2=function(){this.canvasLoopController.level=2,this.Loop()},t.prototype.SetLevel3=function(){this.canvasLoopController.level=3,this.Loop()},t.prototype.RenderSetLevel4=function(){this.canvasLoopController.stop=!0},t.prototype.SetLevel4=function(){var t=this;this.canvasLoopController.Reset(),setTimeout((function(){t.canvasLoopController.level=4,t.Loop()}),500)},t.prototype.SetLevel5=function(){var t=this;this.canvasLoopController.Reset(),setTimeout((function(){t.canvasLoopController.level=5,t.Loop()}),500)},t.prototype.SetLevel6=function(){var t=this;this.canvasLoopController.Reset(),setTimeout((function(){t.canvasLoopController.level=6,t.Loop()}),500)},t.prototype.Clear=function(t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},t.prototype.Zoom=function(t){t.wheel<0?this.zoom+=.09*this.zoom:(console.log("out",this.zoom),this.zoom-=.09*this.zoom)},t.prototype.RemapByZoom=function(t){return t.x=(t.xs-this.translation[0])/this.zoom,t.y=(t.ys-this.translation[1])/this.zoom,t},t.prototype.Pan=function(t){if(this.ablePan){var o=t.xs-t.preXs,e=t.ys-t.preYs;this.translation[0]+=o,this.translation[1]+=e}},t.prototype.RenderForce=function(){this.canvasLoopController.stop=!1},t.prototype.RenderPre=function(t){this.isActive&&(this.Clear(this.ctx),this.ctx.save(),this.ctx.translate(this.translation[0],this.translation[1]),this.ctx.scale(this.zoom,this.zoom),this.Render(t),this.ctx.restore())},t.prototype.Render=function(t){},t}();!function(t){t.LEFT="LEFT",t.MIDDLE="MIDDLE",t.RIGHT="RIGHT",t.WHEEL="WHEEL",t.DRAG="DRAG",t.DRAG_LEFT="DRAG_LEFT",t.DRAG_MIDDLE="DRAG_MIDDLE",t.DRAG_RIGHT="DRAG_RIGHT",t.MOVE="MOVE",t.DOUBLE="DOUBLE",t.UP="UP",t.DOWN="DOWN",t.DOWN_MIDDLE="DOWN_MIDDLE",t.DOWN_RIGHT="DOWN_RIGHT"}(i||(i={})),function(){function t(){}t.prototype.MouseEventController=function(t){},t.prototype.KeyboardEventController=function(t){},t.prototype.TouchEventController=function(t){},t.prototype.GestureEventController=function(t){},t.prototype.mouseLeftClick=function(t){},t.prototype.mouseMiddleClick=function(t){},t.prototype.mouseRightClick=function(t){},t.prototype.mouseDoubleClick=function(t){},t.prototype.mouseMove=function(t){},t.prototype.mouseDrag=function(t){},t.prototype.mouseDown=function(t){},t.prototype.mouseUp=function(t){},t.prototype.keydown=function(t){},t.prototype.keyUp=function(t){}}();var r,h,c=function(){function t(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.xs=-1,this.ys=-1,this.preXs=-1,this.preYs=-1,this.CLICK_TYPE=i.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.wheel=0,this.preWheel=0,this.isActive=!0}return t.prototype.DeepCopy=function(){var o=new t;return o.x=this.x,o.y=this.y,o.z=this.z,o.preX=this.preX,o.preY=this.preY,o.preZ=this.preZ,o.xs=this.x,o.ys=this.y,o.preXs=this.preXs,o.preYs=this.preYs,o.pressedAlt=this.pressedAlt,o.pressedShift=this.pressedShift,o.pressedCtrl=this.pressedCtrl,o.isDoubleClick=this.isDoubleClick,o.isDown=this.isDown,o.isMove=this.isMove,o.wheel=this.wheel,o.preWheel=this.preWheel,o.yGLPicking=this.yGLPicking,o.CLICK_TYPE=this.CLICK_TYPE,o.command=this.command,o.native=this.native,o},t}(),u=(function(){function t(){}t.LineByVecs=function(t,o,e,i,n){void 0===i&&(i=1),void 0===n&&(n="#ff0000"),t.strokeStyle=n,t.lineWidth=i,t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(e.x,e.y),t.closePath(),t.stroke()},t.Line=function(t,o,e,i,n,s,r){void 0===s&&(s=1),void 0===r&&(r="#ff0000"),t.strokeStyle=r,t.lineWidth=s,t.beginPath(),t.moveTo(o,e),t.lineTo(i,n),t.closePath(),t.stroke()},t.Point=function(t,o,e,i,n){void 0===i&&(i=5),void 0===n&&(n="#ff0000"),t.fillStyle=n,t.beginPath(),t.arc(o,e,i,0,2*Math.PI),t.closePath(),t.fill()},t.PointByNVec=function(t,o,e,i){void 0===e&&(e=5),void 0===i&&(i="#ff0000"),t.fillStyle=i,t.beginPath(),t.arc(o.x,o.y,e,0,2*Math.PI),t.closePath(),t.fill()},t.GridLineOrigin=function(t,o,e,i,n){void 0===o&&(o=10),void 0===e&&(e=10),void 0===i&&(i=20),void 0===n&&(n=20);var s=-o*i*.5,r=-e*n*.5;t.lineWidth=.1;for(var h=0;h<=e;++h)t.beginPath(),t.moveTo(s,r+n*h),t.lineTo(o*i*.5,r+n*h),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(s+i*h,r),t.lineTo(r+n*h,e*n*.5),t.closePath(),t.stroke()},t.GridPointOrigin=function(t,o,e,i,n){void 0===o&&(o=10),void 0===e&&(e=10),void 0===i&&(i=20),void 0===n&&(n=20);var s=-o*i*.5,r=-e*n*.5;t.lineWidth=.1;for(var h=0;h<=e;++h)for(var c=0;c<=o;++c)t.beginPath(),t.arc(s+i*c,r+n*h,1,0,2*Math.PI),t.closePath(),t.fill()}}(),function(){function t(t){this.mouseEventDataPre=new c,this.isEnable=!0,this.clickCount=0,this.click=!1,this.prevent=!1,this.delay=250,this.down=!1,this._stopPropagation=!1,this.ioWrapper=t}return t.prototype.InitNativeMouseEvent=function(t){var o=this;t.onclick=function(t){o.prevent=!1,o.timer=setTimeout((function(){o.prevent||o.MouseClick(t),o.prevent=!1}),o.delay)},t.ondblclick=function(t){clearTimeout(o.timer),o.prevent=!0,o.MouseDoubleClick(t)},t.onmousedown=function(t){o.MouseDown(t)},t.onmouseup=function(t){o.MouseUp(t)},t.onmousemove=function(t){o.MouseMove(t)},t.addEventListener("contextmenu",(function(t){t.preventDefault()})),t.addEventListener("wheel",(function(t){return o.MouseWheel(t,t.deltaY)}))},t.prototype.MouseDown=function(t){this.click=!0,this.down=!0;var o=this.CommonEventBuilder(t);o.CLICK_TYPE=i.DOWN,o.isDown=!0,this.MouseEvenEmitting(o)},t.prototype.MouseClick=function(t){if(this.click){var o=this.CommonEventBuilder(t);0===t.button?o.CLICK_TYPE=i.LEFT:1===t.button?o.CLICK_TYPE=i.MIDDLE:2===t.button&&(o.CLICK_TYPE=i.RIGHT),this.MouseEvenEmitting(o)}},t.prototype.MouseDoubleClick=function(t){var o=this.CommonEventBuilder(t);o.CLICK_TYPE=i.DOUBLE,this.MouseEvenEmitting(o)},t.prototype.MouseDrag=function(t){this.click=!1,this.prevent=!0;var o=this.CommonEventBuilder(t);o.CLICK_TYPE=i.DRAG,o.isDown=!0,1===t.buttons?o.CLICK_TYPE=i.DRAG:4===t.buttons?o.CLICK_TYPE=i.DRAG_MIDDLE:2===t.buttons&&(o.CLICK_TYPE=i.DRAG_RIGHT),this.MouseEvenEmitting(o)},t.prototype.MouseMove=function(t){if(this.down)this.MouseDrag(t);else{var o=this.CommonEventBuilder(t);o.CLICK_TYPE=i.MOVE,o.isDown=!0,this.prevent=!0,this.MouseEvenEmitting(o)}},t.prototype.MouseUp=function(t){this.down=!1,this.click=!0;var o=this.CommonEventBuilder(t);o.CLICK_TYPE=i.UP,o.isDown=!1,this.MouseEvenEmitting(o)},t.prototype.MouseWheel=function(t,o){var e=this.CommonEventBuilder(t);e.wheel=o,e.CLICK_TYPE=i.WHEEL,this.MouseEvenEmitting(e)},t.prototype.CommonEventBuilder=function(t){var o=new c;return o.preXs=this.mouseEventDataPre.xs,o.preYs=this.mouseEventDataPre.ys,o.preX=this.mouseEventDataPre.x,o.preY=this.mouseEventDataPre.y,o.pressedShift=t.shiftKey,o.pressedAlt=t.altKey,o.pressedCtrl=t.ctrlKey,o.xs=t.offsetX,o.ys=t.offsetY,o.preWheel=this.mouseEventDataPre.wheel,o.wheel=0,o.native=t,o=this.ioWrapper.core.canvas.RemapByZoom(o),this.mouseEventDataPre=o,this.e=o,o},Object.defineProperty(t.prototype,"stopPropagation",{get:function(){return this._stopPropagation},set:function(t){var o=this;t?this._stopPropagation=t:setTimeout((function(){o._stopPropagation=t}),500)},enumerable:!1,configurable:!0}),t.prototype.MouseEvenEmitting=function(t){this.MouseEventEmittingForViewController(t),this._stopPropagation||this.MouseEventEmittingForModel(t)},t.prototype.MouseEventEmittingForViewController=function(t){this.mouseInteractionUI&&this.mouseInteractionUI.MouseInteractionMenu(t)},t.prototype.MouseEventEmittingForModel=function(t){this.ioWrapper.core.activeCommandController.MouseEventController(t)},t}()),p=function(){function t(t){this.core=t,this.mouseInteraction=new u(this)}return t.prototype.InitEventListener=function(t){this.mouseInteraction.InitNativeMouseEvent(t),this.Resize()},t.prototype.Resize=function(){var t=this;window.addEventListener("resize",(function(o){return t.ReSizeWindow(o)}))},t.prototype.ReSizeWindow=function(t){},t}(),l=function(){function t(t){this.mouse=new n.h9(0,0),this.core=t}return t.prototype.MouseEventController=function(t){var o=t.DeepCopy();o.x=t.xs,o.y=t.ys,this.core.nUI.MouseInteractionMenu(o),this.core.nUI.stopPropagation||(this.core.canvas.RenderForce(),this.core.app.implmentations.MouseEventController(t),t.CLICK_TYPE!==n.uh.LEFT?t.CLICK_TYPE!==n.uh.MIDDLE?t.CLICK_TYPE!==n.uh.DOWN_RIGHT?t.CLICK_TYPE!==n.uh.DOUBLE?t.CLICK_TYPE!==n.uh.MOVE?t.CLICK_TYPE!==n.uh.DRAG?t.CLICK_TYPE!==n.uh.DOWN?t.CLICK_TYPE!==n.uh.DRAG_RIGHT?t.CLICK_TYPE!==n.uh.WHEEL?t.CLICK_TYPE!==n.uh.UP||this.MouseUpPre(t):this.MouseWheelPre(t):this.MouseDragRightPre(t):this.MouseDownPre(t):this.MouseDragPre(t):this.MouseMovePre(t):this.MouseDoubleClickPre(t):this.MouseRightClickPre(t):this.MouseMiddleClickPre(t):this.MouseLeftClickPre(t))},t.prototype.MouseDown=function(t){},t.prototype.MouseDownPre=function(t){this.MouseDown(t)},t.prototype.MouseLeftClick=function(t){},t.prototype.MouseLeftClickPre=function(t){this.MouseLeftClick(t)},t.prototype.MouseMiddleClick=function(t){},t.prototype.MouseMiddleClickPre=function(t){this.MouseMiddleClick(t)},t.prototype.MouseRightClick=function(t){},t.prototype.MouseRightClickPre=function(t){this.MouseRightClick(t)},t.prototype.MouseUp=function(t){},t.prototype.MouseUpPre=function(t){this.MouseUp(t)},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDoubleClickPre=function(t){this.MouseDoubleClick(t)},t.prototype.MouseMove=function(t){},t.prototype.MouseMovePre=function(t){this.MouseMove(t)},t.prototype.MouseDrag=function(t){},t.prototype.MouseDragPre=function(t){this.mouse.x=t.x,this.mouse.y=t.y,this.MouseDrag(t)},t.prototype.MouseDragRight=function(t){},t.prototype.MouseDragRightPre=function(t){this.mouse.x=t.x,this.mouse.y=t.y,this.core.canvas.Pan(t),this.MouseDragRight(t)},t.prototype.MouseWheel=function(t){},t.prototype.MouseWheelPre=function(t){this.core.canvas.Zoom(t),this.MouseWheel(t)},t.prototype.pushActionFromPulldown=function(t){t.split("@")[0]},t}(),a=function(){function t(t,o){this.app=t,this.InitPulldown(),this.InitCanvas(o),this.activeCommandController=new l(this),this.ioWrapper=new p(this)}return t.prototype.InitCanvas=function(t){this.canvas=new s(this,t)},t.prototype.InitPulldown=function(){this.nUI=new n.Fc(this.app.div),this.BindingActiveCommandController()},t.prototype.InitPost=function(){this.ioWrapper.InitEventListener(this.app.div)},t.prototype.BindingActiveCommandController=function(){var t=this;this.nUI.BindingActiveCommandController("NDrawingBlock",(function(o){return t.Commander(o)}))},t.prototype.Resize=function(t,o){this.nUI.Resize(t,o)},t.prototype.Commander=function(t){this.activeCommandController.pushActionFromPulldown(t)},t}(),f=function(){function t(t){this.implementation=t,this.activeCommandController=this.implementation.activeCommandController}return t.prototype.OnRender=function(t){this.Update(t),this.Render(t)},t.prototype.Update=function(t){},t.prototype.Render=function(t){n.gi.GridLineOrigin(t,10,10,75,75);for(var o=0;o<this.implementation.scene.MBoxes.length;++o)this.implementation.scene.MBoxes[o].Render(t);for(o=0;o<this.implementation.scene.listBlocks.length;++o)this.implementation.scene.listBlocks[o].Render(t);t.fillStyle="#00ff00",t.beginPath(),t.arc(this.activeCommandController.mouse.x,this.activeCommandController.mouse.y,2,0,2*Math.PI),t.closePath(),t.fill()},t}(),d=function(){function t(t){this.implementation=t}return t.prototype.Pick=function(t){for(var o=0;o<this.implementation.scene.listBlocks.length;++o)if(this.implementation.scene.listBlocks[o].IsInside(t))return this.implementation.scene.listBlocks[o]},t}(),m=e(2886),v=function(){function t(t){this.fillColor="#000000",this.strokeColor="#ffffff",this.scene=t}return t.prototype.Render=function(t){},t}(),C=(r=function(t,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])},r(t,o)},function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),y=function(t){function o(o,e,i,s,r,h){void 0===h&&(h=!1);var c=t.call(this,o)||this;return c.width=s,c.height=r,c.fillColor=n.mK.GetRandomColor(),c.strokeColor=n.mK.GetRandomColor(),c.body=m.Bodies.rectangle(e,i,s,r,{isStatic:h,restitution:.5,friction:.5}),c.Init(),c}return C(o,t),o.prototype.Init=function(){m.World.add(this.scene.world,this.body),this.scene.MBoxes.push(this)},o.prototype.Render=function(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawRectByCen(t,this.position.x,this.position.y,this.width,this.height,this.angle)},o.prototype.DrawRectByCen=function(t,o,e,i,n,s){var r=.5*i,h=.5*n;t.save(),t.translate(this.position.x,this.position.y),t.rotate(s),t.lineWidth=1,t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.rect(-r,-h,this.width,this.height),t.fill(),t.stroke(),t.restore()},o}(v),M=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])},t(o,e)};return function(o,e){function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),P=function(t){function o(o,e,i,s,r){void 0===r&&(r=!1);var h=t.call(this,o)||this;return h.radius=s,h.fillColor=n.mK.GetRandomColor(),h.strokeColor=n.mK.GetRandomColor(),h.body=m.Bodies.circle(e,i,h.radius,{isStatic:r,restitution:.5,friction:.5}),h.Init(),h}return M(o,t),o.prototype.Init=function(){m.World.add(this.scene.world,this.body),this.scene.MBoxes.push(this)},o.prototype.Render=function(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawCircle(t,this.position.x,this.position.y,this.radius,this.angle)},o.prototype.DrawCircle=function(t,o,e,i,n){t.save(),t.translate(o,e),t.rotate(n),t.lineWidth=1,t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI),t.fill(),t.stroke(),t.restore()},o}(v),E=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])},t(o,e)};return function(o,e){function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),L=function(t){function o(o,e,i,s,r,h){void 0===h&&(h=!1);var c=t.call(this,o)||this;return c.side=s,c.fillColor=n.mK.GetRandomColor(),c.strokeColor=n.mK.GetRandomColor(),c.radius=r,c.body=m.Bodies.polygon(e,i,3,c.radius,{isStatic:h,restitution:.5,friction:.5}),c.Init(),c}return E(o,t),o.prototype.Init=function(){m.World.add(this.scene.world,this.body),this.scene.MBoxes.push(this)},o.prototype.Render=function(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawCircle(t,this.position.x,this.position.y,this.radius,this.angle)},o.prototype.DrawCircle=function(t,o,e,i,n){t.lineWidth=1,t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.moveTo(this.body.vertices[0].x,this.body.vertices[0].y);for(var s=1;s<this.body.vertices.length;++s)t.lineTo(this.body.vertices[s].x,this.body.vertices[s].y);t.closePath(),t.fill(),t.stroke()},o}(v),I=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])},t(o,e)};return function(o,e){function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),g=function(t){function o(o,e,i,s,r,h){void 0===h&&(h=!1);var c=t.call(this,o)||this;return c.width=s,c.height=r,c.fillColor=n.mK.GetRandomColor(),c.strokeColor=n.mK.GetRandomColor(),c.body=m.Bodies.fromVertices(e,i,[[{x:0,y:0},{x:50,y:25},{x:100,y:0},{x:50,y:50}]],{isStatic:h,restitution:.5,friction:.5}),c.Init(),c}return I(o,t),o.prototype.Init=function(){m.World.add(this.scene.world,this.body),this.scene.MBoxes.push(this)},o.prototype.Render=function(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawRectByCen(t,this.position.x,this.position.y,this.width,this.height,this.angle)},o.prototype.DrawRectByCen=function(t,o,e,i,n,s){var r=.5*i,h=.5*n;t.save(),t.translate(this.position.x,this.position.y),t.rotate(s),t.lineWidth=1,t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.rect(-r,-h,this.width,this.height),t.fill(),t.stroke(),t.restore()},o}(v),D=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])},t(o,e)};return function(o,e){function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),w=function(){function t(t){this.ac=t}return t.prototype.MouseEventController=function(t){this.ac.mouse.x=t.x,this.ac.mouse.y=t.y,t.CLICK_TYPE!==i.LEFT?t.CLICK_TYPE!==i.MIDDLE?t.CLICK_TYPE!==i.DOWN_RIGHT?t.CLICK_TYPE!==i.DOUBLE?t.CLICK_TYPE!==i.MOVE?t.CLICK_TYPE!==i.DRAG?t.CLICK_TYPE!==i.DOWN?t.CLICK_TYPE!==i.WHEEL?t.CLICK_TYPE!==i.UP||this.MouseUpPre(t):this.MouseWheelPre(t):this.MouseDownPre(t):this.MouseDragPre(t):this.MouseMovePre(t):this.MouseDoubleClickPre(t):this.MouseRightClickPre(t):this.MouseMiddleClickPre(t):this.MouseLeftClickPre(t)},t.prototype.MouseDown=function(t){},t.prototype.MouseDownPre=function(t){var o=this.ac.implementation.geometryCommon.Pick(this.ac.mouse);o&&(this.ac.ablePan=!1,this.ac.capture=o),this.MouseDown(t)},t.prototype.MouseLeftClick=function(t){},t.prototype.MouseLeftClickPre=function(t){this.MouseLeftClick(t)},t.prototype.MouseMiddleClick=function(t){},t.prototype.MouseMiddleClickPre=function(t){this.MouseMiddleClick(t)},t.prototype.MouseRightClick=function(t){},t.prototype.MouseRightClickPre=function(t){this.MouseRightClick(t)},t.prototype.MouseUp=function(t){},t.prototype.MouseUpPre=function(t){this.ac.ablePan=!0,this.ac.capture=void 0,this.MouseUp(t)},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDoubleClickPre=function(t){this.MouseDoubleClick(t)},t.prototype.MouseMove=function(t){},t.prototype.MouseMovePre=function(t){this.MouseMove(t)},t.prototype.MouseDrag=function(t){},t.prototype.MouseDragPre=function(t){this.ac.capture&&this.ac.capture.Translation(t),this.MouseDrag(t)},t.prototype.MouseWheel=function(t){},t.prototype.MouseWheelPre=function(t){this.MouseWheel(t)},t}(),R=function(t){function o(o){return t.call(this,o)||this}return D(o,t),o}(w),k=function(t){function o(o){return t.call(this,o)||this}return D(o,t),o.prototype.MouseLeftClick=function(t){new y(this.ac.implementation.scene,t.x,t.y,50*Math.random(),50*Math.random())},o}(w),_=function(t){function o(o){return t.call(this,o)||this}return D(o,t),o.prototype.MouseLeftClick=function(t){new P(this.ac.implementation.scene,t.x,t.y,50*Math.random())},o}(w),b=function(t){function o(o){return t.call(this,o)||this}return D(o,t),o.prototype.MouseLeftClick=function(t){new L(this.ac.implementation.scene,t.x,t.y,3,50*Math.random())},o}(w),T=function(t){function o(o){return t.call(this,o)||this}return D(o,t),o.prototype.MouseLeftClick=function(t){new g(this.ac.implementation.scene,t.x,t.y,3,50*Math.random())},o}(w);!function(t){t.SELECT="SELECT",t.REMOVE="REMOVE",t.RECT="RECT",t.CIRCLE="CIRCLE",t.TRIGON="TRIGON",t.CROSS="CROSS",t.DRAWING_BLOCK="DRAWING_BLOCK"}(h||(h={}));var x=function(){function t(t){this.mouse=new n.h9(0,0),this.capture=void 0,this._ablePan=!1,this.implementation=t,this.commands={SELECT:new R(this),RECT:new k(this),CIRCLE:new _(this),TRIGON:new b(this),CROSS:new T(this)},this.SetActiveCommand(h.CIRCLE)}return t.prototype.SetActiveCommand=function(t){this.activeCommand=this.commands[t]},Object.defineProperty(t.prototype,"ablePan",{get:function(){return this._ablePan},set:function(t){this.implementation.implmentations.app.core.canvas.ablePan=t,this._ablePan=t},enumerable:!1,configurable:!0}),t}(),O=function(){function t(t){this.implementation=t,this.divHost=t.implmentations.app.hostDiv;var o=document.createElement("div");o&&(this.div=o,this.divHost.insertBefore(this.div,t.implmentations.app.div),t.implmentations.app.div.style.height="90%",this.Init())}return t.prototype.Init=function(){var t=this,o=document.createElement("button");o.type="button",o.innerText="select",o.onclick=function(){t.implementation.activeCommandController.SetActiveCommand(h.SELECT)},this.div.append(o),(o=document.createElement("button")).type="button",o.innerText="rect",o.onclick=function(){t.implementation.activeCommandController.SetActiveCommand(h.RECT)},this.div.append(o),(o=document.createElement("button")).type="button",o.innerText="cir",o.onclick=function(){t.implementation.activeCommandController.SetActiveCommand(h.CIRCLE)},this.div.append(o),(o=document.createElement("button")).type="button",o.innerText="Tri",o.onclick=function(){t.implementation.activeCommandController.SetActiveCommand(h.TRIGON)},this.div.append(o),(o=document.createElement("button")).type="button",o.innerText="CRO",o.onclick=function(){t.implementation.activeCommandController.SetActiveCommand(h.CROSS)},this.div.append(o)},t}(),S=function(){function t(t){this.listBlocks=[],this.MBoxes=[],this.implementation=t,this.InitMatter()}return t.prototype.InitMatter=function(){this.engine=m.Engine.create(),this.world=this.engine.world,m.Engine.run(this.engine)},t.prototype.Add=function(t){},t.prototype.InitPost=function(){var t=this;this.MBoxes.push(new y(this,0,400,500,50,!0)),this.MBoxes.push(new y(this,100,100,50,50)),setInterval((function(){t.MBoxes.push(new y(t,100+10*(Math.random()-.5),0,50,50))}),1e3)},t}(),B=function(){function t(t){this.implmentations=t,this.Init()}return t.prototype.Init=function(){this.activeCommandController=new x(this),this.geometryCommon=new d(this),this.scene=new S(this),this.renderer=new f(this),this.view=new O(this),this.InitPost()},t.prototype.InitPost=function(){this.scene.InitPost(),this.implmentations.app.core.canvas.SetLevel6()},t.prototype.MouseEventController=function(t){this.activeCommandController.activeCommand.MouseEventController(t)},t.prototype.Render=function(t){this.renderer.OnRender(t)},t}(),W=function(){function t(t){this.app=t,this.implementation=new B(this)}return t.prototype.MouseEventController=function(t){this.implementation&&this.implementation.MouseEventController(t)},t.prototype.Render=function(t){this.implementation&&this.implementation.Render(t)},t}(),K=function(){function t(t){void 0===t&&(t="SandBox"),this.id=t,this.Init(),this.InitPost()}return t.Init=function(o){void 0===o&&(o="SandBox"),new t(o)},t.prototype.Init=function(){var t=document.getElementById(this.id);if(t){this.hostDiv=t;var o=document.createElement("div");o&&(this.div=o,this.div.style.width="100%",this.div.style.height="100%",this.hostDiv.append(this.div)),this.core=new a(this,o),this.implmentations=new W(this)}},t.prototype.InitPost=function(){var t=this;this.core.InitPost(),this.core.canvas.Render=function(o){return t.implmentations.Render(o)}},t}(),A=function(){function t(t,o){void 0===t&&(t="SandBox"),void 0===o&&(o=1),this.version=1,this.id=t,this.version=o,this.Init()}return t.Init=function(o){void 0===o&&(o="SandBox"),new t(o,1)},t.prototype.Init=function(){1===this.version&&(this.appV1=new K(this.id))},t}()}}]);
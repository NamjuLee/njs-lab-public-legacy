"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1052],{1052:(t,i,e)=>{e.r(i),e.d(i,{AppCanvasRectOptimizer:()=>z});var s=e(906),n=function(){function t(){this.Init()}return t.prototype.Init=function(){o.list=[],o.listSorted=[];for(var t=0;t<15;++t){var i=new o(200+20*Math.random(),200+20*Math.random());i.height+=20*Math.random(),Math.random()<.3&&(i.fixed=!0)}o.Init()},t.prototype.Update=function(){o.Update()},t.prototype.Render=function(t){o.Render(t)},t}(),o=function(){function t(i,e,n,o){void 0===n&&(n=50),void 0===o&&(o=25),this.fixed=!1,this.colorFill="#ff0000",this.colorStrok="#00ff00",this.m=10,this.targetLength=1e3,this.targetLengthPre=1e3,this.boundaryVec=[],this.x=i,this.y=e,this.width=n,this.height=o,this.cVec=new s.h9(i+.5*this.width,e+.5*this.height),this.f=s.h9.Origin(),this.u=new s.h9(0,1),t.list.push(this)}return t.Init=function(){for(var t=[],i=0;i<this.list.length;++i)t.push([this.list[i].cVec.y,i]);var e=this.SortSelectionAscending(t);for(i=0;i<e.length;++i){var s=e[i][1];this.listSorted.push(this.list[s])}for(i=0;i<this.listSorted.length-1;++i){var n=this.listSorted[i],o=this.listSorted[i+1];n.targetLength=n.height+o.height+10}var h=this.listSorted[this.listSorted.length-1],a=this.listSorted[this.listSorted.length-2];h.targetLength=h.height+a.height+10},t.Render=function(t){for(var i=0;i<this.list.length;++i)this.list[i].Render(t)},t.Update=function(){for(var t=0;t<this.list.length;++t)this.list[t].Update()},t.Distance=function(t,i,e,s){return Math.sqrt((t-e)*(t-e)+(i-s)*(i-s))},t.SortSelectionAscending=function(t){for(var i=0,e=[0,0],s=t.length,n=0;n<s;++n){for(var o=Number.MAX_SAFE_INTEGER,h=n;h<s;++h)t[h][0]<o&&(o=t[h][0],i=h);e=t[n],t[n]=t[i],t[i]=e}return t},t.prototype.UpdateBoundaryVec=function(){this.boundaryVec=[new s.h9(this.x,this.y),new s.h9(this.x+this.width,this.y),new s.h9(this.x+this.width,this.y+this.height),new s.h9(this.x,this.y+this.height)]},t.prototype.Update=function(){var t=this.FindCloseRect();t&&(this.ApplySpringForce(t),this.Move(),this.UpdatePos())},t.prototype.ApplySpringForce=function(i){var e=new s.h9(i.cVec.x-this.cVec.x,i.cVec.y-this.cVec.y,i.cVec.z-this.cVec.z),n=e.Length();e.Unitize(),this.f.x+=e.x*(n-this.targetLength)*t.SpringConstant,this.f.y+=e.y*(n-this.targetLength)*t.SpringConstant,this.f.z+=e.z*(n-this.targetLength)*t.SpringConstant,i.f.x-=e.x*(n-this.targetLength)*t.SpringConstant,i.f.y-=e.y*(n-this.targetLength)*t.SpringConstant,i.f.z-=e.z*(n-this.targetLength)*t.SpringConstant},t.prototype.Move=function(t,i){void 0===t&&(t=.03),void 0===i&&(i=.8),this.fixed||(this.u.x*=i,this.u.y*=i,this.u.z*=i,this.u.x+=this.f.x*(t/this.m),this.u.y+=this.f.y*(t/this.m),this.u.z+=this.f.z*(t/this.m),this.cVec.x+=this.u.x*t,this.cVec.y+=this.u.y*t,this.cVec.z+=this.u.z*t)},t.prototype.IsHover=function(){this.UpdateBoundaryVec();for(var i=0;i<t.list.length;++i)if(t.list[i]!==this&&(t.list[i].UpdateBoundaryVec(),this.IsInsideOfVecsWtihVecs(this.boundaryVec,t.list[i].boundaryVec)))return!0;return!1},t.prototype.UpdatePos=function(){this.x=this.cVec.x-.5*this.width,this.y=this.cVec.y-.5*this.height},t.prototype.FindCloseRect=function(){for(var i=this.targetLength,e=-1,s=0;s<t.list.length;++s)if(t.list[s]!==this){var n=t.Distance(this.cVec.x,this.cVec.y,t.list[s].cVec.x,t.list[s].cVec.y);n<i&&(i=n,e=s)}if(-1!==e)return t.list[e]},t.prototype.Render=function(t){this.fixed?(t.strokeStyle="#333333",t.fillStyle="#333333"):(t.strokeStyle=this.colorStrok,t.fillStyle=this.colorFill),t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.closePath(),t.fill(),t.lineWidth=1,t.stroke()},t.prototype.IsInsideOfVecsWtihVecs=function(t,i){for(var e=0;e<t.length;e++)if(!s.h9.IsInsideOfVecs(t[e],i))return!1;return!0},t.prototype.IsInsideOfVecs=function(t,i){for(var e=t.x,s=t.y,n=!1,o=0,h=i.length-1;o<i.length;h=o++){var a=i[o].x,r=i[o].y,c=i[h].x,p=i[h].y;r>s!=p>s&&e<(c-a)*(s-r)/(p-r)+a&&(n=!n)}return n},t.list=[],t.listSorted=[],t.SpringConstant=.9,t}(),h=function(){function t(t,i,e){void 0===i&&(i=600),void 0===e&&(e=400),this.t=0,this.optimizerRectPosSystem=t,this.width=i,this.height=e,this.InitCanvas(t.id)}return t.prototype.InitCanvas=function(t){var i=document.createElement("canvas"),e=document.createElement("div"),s=document.getElementById(t);if(s&&e&&(this.div=e,this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.margin="10px",this.div.style.padding="10px",e.appendChild(i),this.host=s,this.host.append(this.div)),i){this.canvas=i,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";var n=this.canvas.getContext("2d");n&&(this.ctx=n,this.InitUI(),this.Init())}},t.prototype.InitUI=function(){var t=this,i=document.createElement("button");i.textContent="reset",i.onclick=function(){t.optimizerRectPosSystem.optimizer.Init()},this.div.append(i)},t.prototype.Init=function(){this.EventBind(),this.Loop()},t.prototype.EventBind=function(){var t=this;this.canvas.onmousedown=function(i){return t.MouseDown(i)},this.canvas.onmouseup=function(i){return t.MouseUp(i)},this.canvas.onmousemove=function(i){return t.MouseMove(i)},window.onresize=function(i){return t.Resize(i)}},t.prototype.Resize=function(t){},t.prototype.Loop=function(){var t=this;requestAnimationFrame((function(){t.Loop()})),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)},t.prototype.Render=function(t){},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){},t}(),a=function(){function t(t){this.t=.9,this.m=new s.h9(0,0,0),this.id=t,this.CanvasCore=new h(this,600,300),this.optimizer=new n,this.Init()}return t.prototype.Init=function(){var t=this;this.CanvasCore.Render=function(i){return t.Render(i)},this.CanvasCore.MouseDown=function(i){return t.MouseDown(i)},this.CanvasCore.MouseUp=function(i){return t.MouseUp(i)},this.CanvasCore.MouseMove=function(i){return t.MouseMove(i)}},t.prototype.Render=function(t){this.optimizer.Update(),this.optimizer.Render(t)},t.prototype.Grid=function(t){for(var i=-10;i<10;++i)for(var e=-10;e<10;++e)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(i,e,.05,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){this.m.x=t.x-this.CanvasCore.canvas.offsetLeft,this.m.y=t.y-this.CanvasCore.canvas.offsetTop},t}(),r=function(){function t(){this.Init()}return t.prototype.Init=function(){c.list=[],c.listSorted=[];for(var t=0;t<15;++t){var i=new c(200+20*Math.random(),200+20*Math.random());i.height+=20*Math.random(),Math.random()<.3&&(i.fixed=!0)}var e=new c(60,120);e.fixed=!0,e.height+=20*Math.random(),(e=new c(120,100)).fixed=!0,e.height+=20*Math.random(),(e=new c(300,100)).fixed=!0,e.height+=20*Math.random(),c.Init()},t.prototype.Update=function(){c.Update()},t.prototype.Render=function(t){c.Render(t)},t}(),c=function(){function t(i,e,n,o){void 0===n&&(n=50),void 0===o&&(o=25),this.fixed=!1,this.colorFill="#ff0000",this.colorStrok="#00ff00",this.m=10,this.targetLength=1e3,this.targetLengthPre=1e3,this.boundaryVec=[],this.x=i,this.y=e,this.width=n,this.height=o,this.cVec=new s.h9(i+.5*this.width,e+.5*this.height),this.f=s.h9.Origin(),this.u=new s.h9(0,1),t.list.push(this)}return t.Init=function(){for(var t=[],i=0;i<this.list.length;++i)t.push([this.list[i].cVec.y,i]);var e=this.SortSelectionAscending(t);for(i=0;i<e.length;++i){var s=e[i][1];this.listSorted.push(this.list[s])}for(i=0;i<this.listSorted.length-1;++i){var n=this.listSorted[i],o=this.listSorted[i+1];n.targetLength=n.height+o.height+10}var h=this.listSorted[this.listSorted.length-1],a=this.listSorted[this.listSorted.length-2];h.targetLength=h.height+a.height+10},t.Render=function(t){for(var i=0;i<this.list.length;++i)this.list[i].Render(t)},t.Update=function(){for(var t=0;t<this.list.length;++t)this.list[t].Update()},t.Distance=function(t,i,e,s){return Math.sqrt((t-e)*(t-e)+(i-s)*(i-s))},t.SortSelectionAscending=function(t){for(var i=0,e=[0,0],s=t.length,n=0;n<s;++n){for(var o=Number.MAX_SAFE_INTEGER,h=n;h<s;++h)t[h][0]<o&&(o=t[h][0],i=h);e=t[n],t[n]=t[i],t[i]=e}return t},t.prototype.UpdateBoundaryVec=function(){this.boundaryVec=[new s.h9(this.x,this.y),new s.h9(this.x+this.width,this.y),new s.h9(this.x+this.width,this.y+this.height),new s.h9(this.x,this.y+this.height)]},t.prototype.Update=function(){var t=this.FindCloseRect();t&&(this.ApplySpringForce(t),this.Move(),this.UpdatePos())},t.prototype.ApplySpringForce=function(i){var e=new s.h9(i.cVec.x-this.cVec.x,i.cVec.y-this.cVec.y,i.cVec.z-this.cVec.z),n=e.Length();e.Unitize(),this.f.x+=e.x*(n-this.targetLength)*t.SpringConstant,this.f.y+=e.y*(n-this.targetLength)*t.SpringConstant,this.f.z+=e.z*(n-this.targetLength)*t.SpringConstant,i.f.x-=e.x*(n-this.targetLength)*t.SpringConstant,i.f.y-=e.y*(n-this.targetLength)*t.SpringConstant,i.f.z-=e.z*(n-this.targetLength)*t.SpringConstant},t.prototype.Move=function(t,i){void 0===t&&(t=.03),void 0===i&&(i=.8),this.fixed||(this.u.x*=i,this.u.y*=i,this.u.z*=i,this.u.x+=this.f.x*(t/this.m),this.u.y+=this.f.y*(t/this.m),this.u.z+=this.f.z*(t/this.m),this.cVec.x+=this.u.x*t,this.cVec.y+=this.u.y*t,this.cVec.z+=this.u.z*t)},t.prototype.IsHover=function(){this.UpdateBoundaryVec();for(var i=0;i<t.list.length;++i)if(t.list[i]!==this&&(t.list[i].UpdateBoundaryVec(),this.IsInsideOfVecsWtihVecs(this.boundaryVec,t.list[i].boundaryVec)))return!0;return!1},t.prototype.UpdatePos=function(){this.x=this.cVec.x-.5*this.width,this.y=this.cVec.y-.5*this.height},t.prototype.FindCloseRect=function(){for(var i=this.targetLength,e=-1,s=0;s<t.list.length;++s)if(t.list[s]!==this){var n=t.Distance(this.cVec.x,this.cVec.y,t.list[s].cVec.x,t.list[s].cVec.y);n<i&&(i=n,e=s)}if(-1!==e)return t.list[e]},t.prototype.Render=function(t){this.fixed?(t.strokeStyle="#333333",t.fillStyle="#333333"):(t.strokeStyle=this.colorStrok,t.fillStyle=this.colorFill),t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.closePath(),t.fill(),t.lineWidth=1,t.stroke()},t.prototype.IsInsideOfVecsWtihVecs=function(t,i){for(var e=0;e<t.length;e++)if(!s.h9.IsInsideOfVecs(t[e],i))return!1;return!0},t.prototype.IsInsideOfVecs=function(t,i){for(var e=t.x,s=t.y,n=!1,o=0,h=i.length-1;o<i.length;h=o++){var a=i[o].x,r=i[o].y,c=i[h].x,p=i[h].y;r>s!=p>s&&e<(c-a)*(s-r)/(p-r)+a&&(n=!n)}return n},t.list=[],t.listSorted=[],t.SpringConstant=.9,t}(),p=function(){function t(t,i,e){void 0===i&&(i=600),void 0===e&&(e=400),this.t=0,this.optimizerRectPosSystem=t,this.width=i,this.height=e,this.InitCanvas(t.id)}return t.prototype.InitCanvas=function(t){var i=document.createElement("canvas"),e=document.createElement("div"),s=document.getElementById(t);if(s&&e&&(this.div=e,this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.margin="10px",this.div.style.padding="10px",e.appendChild(i),this.host=s,this.host.append(e)),i){this.canvas=i,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";var n=this.canvas.getContext("2d");n&&(this.ctx=n,this.InitUI(),this.Init())}},t.prototype.InitUI=function(){var t=this,i=document.createElement("button");i.textContent="reset",i.onclick=function(){t.optimizerRectPosSystem.optimizer.Init()},this.div.append(i)},t.prototype.Init=function(){this.EventBind(),this.Loop()},t.prototype.EventBind=function(){var t=this;this.canvas.onmousedown=function(i){return t.MouseDown(i)},this.canvas.onmouseup=function(i){return t.MouseUp(i)},this.canvas.onmousemove=function(i){return t.MouseMove(i)},window.onresize=function(i){return t.Resize(i)}},t.prototype.Resize=function(t){},t.prototype.Loop=function(){var t=this;requestAnimationFrame((function(){t.Loop()})),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)},t.prototype.Render=function(t){},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){},t}(),l=function(){function t(t){this.t=.9,this.m=new s.h9(0,0,0),this.id=t,this.CanvasCore=new p(this,600,300),this.optimizer=new r,this.Init()}return t.prototype.Init=function(){var t=this;this.CanvasCore.Render=function(i){return t.Render(i)},this.CanvasCore.MouseDown=function(i){return t.MouseDown(i)},this.CanvasCore.MouseUp=function(i){return t.MouseUp(i)},this.CanvasCore.MouseMove=function(i){return t.MouseMove(i)}},t.prototype.Render=function(t){this.optimizer.Update(),this.optimizer.Render(t)},t.prototype.Grid=function(t){for(var i=-10;i<10;++i)for(var e=-10;e<10;++e)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(i,e,.05,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){this.m.x=t.x-this.CanvasCore.canvas.offsetLeft,this.m.y=t.y-this.CanvasCore.canvas.offsetTop},t}(),u=function(){function t(){this.Init()}return t.prototype.Init=function(){d.list=[],d.listSorted=[];for(var t=0;t<15;++t){var i=new d(200+20*Math.random(),200+20*Math.random());i.height+=20*Math.random(),Math.random()<.3&&(i.fixed=!0)}var e=new d(60,120);e.fixed=!0,e.height+=20*Math.random(),(e=new d(120,100)).fixed=!0,e.height+=20*Math.random(),(e=new d(300,100)).fixed=!0,e.height+=20*Math.random(),d.Init()},t.prototype.Update=function(){d.Update()},t.prototype.Render=function(t){d.Render(t)},t}(),d=function(){function t(i,e,n,o){void 0===n&&(n=50),void 0===o&&(o=25),this.fixed=!1,this.colorFill="#ff0000",this.colorStrok="#00ff00",this.m=10,this.targetLength=1e3,this.targetLengthPre=1e3,this.boundaryVec=[],this.x=i,this.y=e,this.width=n,this.height=o,this.cVec=new s.h9(i+.5*this.width,e+.5*this.height),this.f=s.h9.Origin(),this.u=new s.h9(0,1),t.list.push(this)}return t.Init=function(){for(var t=[],i=0;i<this.list.length;++i)t.push([this.list[i].cVec.y,i]);var e=this.SortSelectionAscending(t);for(i=0;i<e.length;++i){var s=e[i][1];this.listSorted.push(this.list[s])}for(i=0;i<this.listSorted.length-1;++i){var n=this.listSorted[i],o=this.listSorted[i+1];n.targetLength=n.height+o.height+-15}var h=this.listSorted[this.listSorted.length-1],a=this.listSorted[this.listSorted.length-2];h.targetLength=h.height+a.height+-15},t.Render=function(t){for(var i=0;i<this.list.length;++i)this.list[i].Render(t);for(t.lineWidth=1,t.moveTo(this.list[0].cVec.x,this.list[0].cVec.y),i=1;i<this.list.length;++i)t.lineTo(this.list[i].cVec.x,this.list[i].cVec.y);t.stroke()},t.Update=function(){for(var t=0;t<this.list.length;++t)this.list[t].Update()},t.Distance=function(t,i,e,s){return Math.sqrt((t-e)*(t-e)+(i-s)*(i-s))},t.SortSelectionAscending=function(t){for(var i=0,e=[0,0],s=t.length,n=0;n<s;++n){for(var o=Number.MAX_SAFE_INTEGER,h=n;h<s;++h)t[h][0]<o&&(o=t[h][0],i=h);e=t[n],t[n]=t[i],t[i]=e}return t},t.prototype.UpdateBoundaryVec=function(){this.boundaryVec=[new s.h9(this.x,this.y),new s.h9(this.x+this.width,this.y),new s.h9(this.x+this.width,this.y+this.height),new s.h9(this.x,this.y+this.height)]},t.prototype.Update=function(){var t=this.FindCloseRect();t&&(this.ApplySpringForce(t),this.Move(),this.UpdatePos())},t.prototype.ApplySpringForce=function(i){var e=new s.h9(i.cVec.x-this.cVec.x,i.cVec.y-this.cVec.y,i.cVec.z-this.cVec.z),n=e.Length();e.Unitize(),this.f.x+=e.x*(n-this.targetLength)*t.SpringConstant,this.f.y+=e.y*(n-this.targetLength)*t.SpringConstant,this.f.z+=e.z*(n-this.targetLength)*t.SpringConstant,i.f.x-=e.x*(n-this.targetLength)*t.SpringConstant,i.f.y-=e.y*(n-this.targetLength)*t.SpringConstant,i.f.z-=e.z*(n-this.targetLength)*t.SpringConstant},t.prototype.Move=function(t,i){void 0===t&&(t=.03),void 0===i&&(i=.8),this.fixed||(this.u.x*=i,this.u.y*=i,this.u.z*=i,this.u.x+=this.f.x*(t/this.m),this.u.y+=this.f.y*(t/this.m),this.u.z+=this.f.z*(t/this.m),this.cVec.x+=this.u.x*t,this.cVec.y+=this.u.y*t,this.cVec.z+=this.u.z*t)},t.prototype.IsHover=function(){this.UpdateBoundaryVec();for(var i=!1,e=0;e<t.list.length;++e)t.list[e]!==this&&(t.list[e].UpdateBoundaryVec(),this.IsInsideOfVecsWtihVecs(this.boundaryVec,t.list[e].boundaryVec)&&(i=!0));return i},t.prototype.UpdatePos=function(){this.x=this.cVec.x-.5*this.width,this.y=this.cVec.y-.5*this.height},t.prototype.FindCloseRect=function(){for(var i=this.targetLength,e=-1,s=0;s<t.list.length;++s)if(t.list[s]!==this){var n=t.Distance(this.cVec.x,this.cVec.y,t.list[s].cVec.x,t.list[s].cVec.y);n<i&&(i=n,e=s)}if(-1!==e)return t.list[e]},t.prototype.Render=function(t){this.fixed?(t.strokeStyle="#333333",t.fillStyle="#333333"):(t.strokeStyle=this.colorStrok,t.fillStyle=this.colorFill),t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.closePath(),t.fill(),t.lineWidth=1,t.stroke()},t.prototype.IsInsideOfVecsWtihVecs=function(t,i){for(var e=0;e<t.length;e++)if(!this.IsInsideOfVecs(t[e],i))return!1;return!0},t.prototype.IsInsideOfVecs=function(t,i){for(var e=t.x,s=t.y,n=!1,o=0,h=i.length-1;o<i.length;h=o++){var a=i[o].x,r=i[o].y,c=i[h].x,p=i[h].y;r>s!=p>s&&e<(c-a)*(s-r)/(p-r)+a&&(n=!n)}return n},t.list=[],t.listSorted=[],t.SpringConstant=.9,t}(),v=function(){function t(t,i,e){void 0===i&&(i=600),void 0===e&&(e=400),this.t=0,this.optimizerRectPosSystem=t,this.width=i,this.height=e,this.InitCanvas(t.id)}return t.prototype.InitCanvas=function(t){var i=document.createElement("canvas"),e=document.createElement("div"),s=document.getElementById(t);if(s&&e&&(this.div=e,this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.margin="10px",this.div.style.padding="10px",e.appendChild(i),this.host=s,this.host.append(e)),i){this.canvas=i,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";var n=this.canvas.getContext("2d");n&&(this.ctx=n,this.InitUI(),this.Init())}},t.prototype.InitUI=function(){var t=this,i=document.createElement("button");i.textContent="reset",i.onclick=function(){t.optimizerRectPosSystem.optimizer.Init()},this.div.append(i);var e=document.createElement("p");e&&(this.div.append(e),e.style.width="max-content",e.innerHTML="Graph and agent-based Optimization.<br>")},t.prototype.Init=function(){this.EventBind(),this.Loop()},t.prototype.EventBind=function(){var t=this;this.canvas.onmousedown=function(i){return t.MouseDown(i)},this.canvas.onmouseup=function(i){return t.MouseUp(i)},this.canvas.onmousemove=function(i){return t.MouseMove(i)},window.onresize=function(i){return t.Resize(i)}},t.prototype.Resize=function(t){},t.prototype.Loop=function(){var t=this;requestAnimationFrame((function(){t.Loop()})),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)},t.prototype.Render=function(t){},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){},t}(),f=function(){function t(t){this.t=.9,this.m=new s.h9(0,0,0),this.id=t,this.CanvasCore=new v(this,600,450),this.optimizer=new u,this.Init()}return t.prototype.Init=function(){var t=this;this.CanvasCore.Render=function(i){return t.Render(i)},this.CanvasCore.MouseDown=function(i){return t.MouseDown(i)},this.CanvasCore.MouseUp=function(i){return t.MouseUp(i)},this.CanvasCore.MouseMove=function(i){return t.MouseMove(i)}},t.prototype.Render=function(t){this.optimizer.Update(),this.optimizer.Render(t)},t.prototype.Grid=function(t){for(var i=-10;i<10;++i)for(var e=-10;e<10;++e)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(i,e,.05,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){this.m.x=t.x-this.CanvasCore.canvas.offsetLeft,this.m.y=t.y-this.CanvasCore.canvas.offsetTop},t}(),y=function(){function t(t,i,e){this.m=5,this.r=17,this.colorFill="#0099ff",this.MAX_VELOCITY=5.5,this.listCollision=[],this.isCaptured=!1,this.graph=t,this.pos=new s.h9(i,e)}return t.prototype.Update=function(t){this.isCaptured||this.UpdatePos(t)},t.prototype.UpdatePos=function(t){var i=s.h9.Sub(this.pos,t),e=s.h9.Normalize(i),n=s.h9.CalculateFalloff(this.pos,t,1,.01);this.velocity=s.h9.Scale(e,n),this.UpdateCollision(),this.velocity.y+=1.1,this.pos=s.h9.Add(this.pos,this.velocity),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx)},t.prototype.UpdateCollision=function(){for(var t=0;t<this.listCollision.length;++t){var i=s.h9.Sub(this.pos,this.listCollision[t].pos),e=s.h9.Normalize(i),n=s.h9.CalculateFalloff(this.pos,this.listCollision[t].pos,1,.01);this.velocity=s.h9.Scale(e,n),this.pos=s.h9.Add(this.pos,this.velocity)}},t.prototype.IsMouseHover=function(t,i){return s.h9.Distance(this.pos,new s.h9(t,i))<this.r},t.prototype.Render=function(t){t.lineWidth=1,t.strokeStyle="#000000",this.isCaptured?t.fillStyle="#ff0000":t.fillStyle=this.colorFill,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()},t.prototype.UpdatePosInScreen=function(t){var i=10;this.pos.y>.5*t.canvas.height-i&&(this.pos.y=.5*t.canvas.height-i),this.pos.x<.5*-t.canvas.width+i&&(this.pos.x=.5*-t.canvas.width+i),this.pos.x>.5*t.canvas.width-i&&(this.pos.x=.5*t.canvas.width-i)},t}(),g=function(){function t(t,i,e,n){this.listCollision=[],this.fixed=!1,this.hover=!1,this.graph=t,this.vec=new s.h9(i.x,i.y),this.width=e,this.height=n}return t.AABBvsAABB=function(t,i,e){return void 0===e&&(e=1.5),!(t.vec.x+e+.5*t.width<i.vec.x-e-.5*i.width||t.vec.x-e-.5*t.width>i.vec.x+e+.5*i.width||t.vec.y+e+.5*t.height<i.vec.y-e-.5*i.height||t.vec.y-e-.5*t.height>i.vec.y+e+.5*i.height)},t.prototype.Overlaps=function(i){return t.AABBvsAABB(this,i)},t.prototype.Update=function(){this.fixed||this.UpdatePos()},t.prototype.UpdatePos=function(){for(var t=0;t<this.listCollision.length;++t){var i=s.h9.Sub(this.vec,this.listCollision[t].vec),e=s.h9.Normalize(i);this.velocity=s.h9.Scale(e,.3+Math.random()),this.vec=s.h9.Add(this.vec,this.velocity)}},t.prototype.Render=function(t){this.hover?t.fillStyle="#0ff000":t.fillStyle="#ff0000",this.fixed&&(t.fillStyle="#000000"),t.strokeStyle="#000000",t.beginPath(),t.rect(this.vec.x-.5*this.width,this.vec.y-.5*this.height,this.width,this.height),t.closePath(),t.fill(),t.lineWidth=1,t.stroke()},t}(),C=function(){function t(t){this.particles=[],this.listRect=[],this.offset=1,this.t=1,this.num=50,this.capture=void 0,this.graphSystem=t,this.Init()}return t.prototype.Init=function(){this.m=new s.h9(0,0),this.particles=[],this.listRect=[];for(var t=0;t<this.num;++t)this.listRect.push(new g(this,new s.h9(-.5+Math.random(),-.5+Math.random()),20+20*Math.random(),5+10*Math.random()))},t.prototype.UpdateNumber=function(t){this.num=t,this.Init(),console.log(t,"num")},t.prototype.UpdateOffset=function(t){this.offset=t,console.log(t,"off")},t.prototype.MouseDown=function(t,i){for(var e=0;e<this.particles.length;++e)this.particles[e].IsMouseHover(t,i)&&(this.capture=this.particles[e],this.capture.isCaptured=!0)},t.prototype.MouseUp=function(){this.capture&&(this.capture.isCaptured=!1),this.capture=void 0},t.prototype.MouseLeftClick=function(t,i){this.particles.push(new y(this,t,i))},t.prototype.MouseMove=function(t,i){this.m.x=t,this.m.y=i},t.prototype.MouseDrag=function(t,i){this.capture&&(this.capture.pos.x=t,this.capture.pos.y=i)},t.prototype.Render=function(t){this.UpdateCollisionRect(),this.UpdateCollision();for(var i=0;i<this.listRect.length;++i)this.listRect[i].Update();for(i=0;i<this.listRect.length;++i)this.listRect[i].Render(t);0==(5&this.t)&&this.particles.length<10&&this.particles.push(new y(this,0,0)),this.t+=1},t.prototype.UpdateCollisionRect=function(){for(var t=0;t<this.listRect.length;++t){var i=this.listRect[t];i.listCollision=[];for(var e=!1,s=0;s<this.listRect.length;++s){var n=this.listRect[s];i!==n&&g.AABBvsAABB(i,n,this.offset)&&(i.listCollision.push(n),e=!0)}i.hover=e}},t.prototype.UpdateCollision=function(){for(var t=0;t<this.particles.length;++t){var i=this.particles[t];i.listCollision=[];for(var e=0;e<this.particles.length;++e){var s=this.particles[e];i!==s&&i.pos.Distance(s.pos)<i.r+s.r&&i.listCollision.push(s)}}},t}(),m=function(){function t(t,i,e){void 0===i&&(i=400),void 0===e&&(e=300),this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.graphSystem=t,this.width=i,this.height=e;var s=document.getElementById(t.id);s&&(this.host=s,this.InitCanvas())}return t.prototype.InitCanvas=function(){var t=document.createElement("div");if(t){this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);var i=document.createElement("div");if(i){this.divCanvas=i,this.divLocalMain.append(i);var e=document.createElement("canvas");if(e){this.canvas=e,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";var s=this.canvas.getContext("2d");s&&(this.ctx=s,this.InitUI(),this.Init())}}}},t.prototype.InitUI=function(){var t=this,i=document.createElement("div");if(i){this.divUI=i,this.divLocalMain.append(i),this.divUI.style.marginLeft="10px",this.divUI.style.width="100%";var e=document.createElement("button");e.textContent="reset",e.onclick=function(){t.graphSystem.InitGraph()},this.divUI.append(e);var s=document.createElement("input");s.oninput=function(){var i=+s.value;t.graphSystem.graph.UpdateNumber(i)},s.type="range",s.min="10",s.max="200.0",s.value="50",this.divUI.append(s);var n=document.createElement("input");n.oninput=function(){var i=+n.value;t.graphSystem.graph.UpdateOffset(i)},n.type="range",n.min="1",n.max="10.0",n.value="4",this.divUI.append(n);var o=document.createElement("p");o&&(this.divUI.append(o),o.style.width="max-content",o.innerHTML="1. clikc to reset! <br> ",o.innerHTML+="2. first slider for num of Nodes! <br> ",o.innerHTML+="3. second slider for offset! <br> ")}},t.prototype.Init=function(){this.ctx.translate(.5*this.ctx.canvas.width,.5*this.ctx.canvas.height),this.ctx.scale(1,1),this.EventBind(),this.Loop()},t.prototype.EventBind=function(){var t=this;this.canvas.onclick=function(i){t.prevent=!1,t.timer=setTimeout((function(){if(!t.prevent){if(!t.click)return;t.MouseClick(i)}t.prevent=!1}),t.delay)},this.canvas.ondblclick=function(i){clearTimeout(t.timer),t.prevent=!0,t.MouseDoubleClick(i)},this.canvas.addEventListener("wheel",(function(i){return t.MouseWheel(i,i.deltaY)})),this.canvas.onmousedown=function(i){t.click=!0,t.pressed=!0,t.MouseDown(i)},this.canvas.onmouseup=function(i){t.pressed=!1,t.MouseUp(i)},this.canvas.onmousemove=function(i){t.pressed&&(t.click=!1,t.MouseDrag(i)),t.MouseMove(i)},window.onresize=function(i){return t.Resize(i)}},t.prototype.Resize=function(t){},t.prototype.Loop=function(){var t=this;requestAnimationFrame((function(){t.Loop()})),this.ctx.clearRect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)},t.prototype.Render=function(t){},t.prototype.MouseClick=function(t){},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){},t.prototype.MouseDrag=function(t){},t.prototype.MouseWheel=function(t,i){},t}(),x=function(){function t(t){this.t=.9,this.m=new s.h9(0,0,0),this.id=t,this.CanvasCore=new m(this),this.Init(),this.InitGraph()}return t.prototype.Init=function(){var t=this;this.CanvasCore.Render=function(i){return t.Render(i)},this.CanvasCore.MouseDown=function(i){return t.MouseDown(i)},this.CanvasCore.MouseClick=function(i){return t.MouseClick(i)},this.CanvasCore.MouseDoubleClick=function(i){return t.MouseDoubleClick(i)},this.CanvasCore.MouseUp=function(i){return t.MouseUp(i)},this.CanvasCore.MouseMove=function(i){return t.MouseMove(i)},this.CanvasCore.MouseDrag=function(i){return t.MouseDrag(i)}},t.prototype.InitGraph=function(){this.graph=new C(this)},t.prototype.Render=function(t){this.graph.Render(t),t.fillStyle="rgba(255, 0, 0, 0.9)",t.beginPath(),t.arc(this.m.x,this.m.y,2.5,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.Grid=function(t){for(var i=-10;i<10;++i)for(var e=-10;e<10;++e)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(i,e,.05,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.MouseDown=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseDown(this.m.x,this.m.y)},t.prototype.MouseUp=function(t){this.graph.MouseUp()},t.prototype.MouseMove=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseMove(this.m.x,this.m.y)},t.prototype.MouseDrag=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseDrag(this.m.x,this.m.y)},t.prototype.MouseClick=function(t){console.log("click"),this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseLeftClick(this.m.x,this.m.y)},t.prototype.MouseDoubleClick=function(t){console.log("d click")},t}(),M=function(){function t(t,i,e){this.m=5,this.r=17,this.colorFill="#0099ff",this.MAX_VELOCITY=5.5,this.listCollision=[],this.isCaptured=!1,this.graph=t,this.pos=new s.h9(i,e)}return t.prototype.Update=function(t){this.isCaptured||this.UpdatePos(t)},t.prototype.UpdatePos=function(t){var i=s.h9.Sub(this.pos,t),e=s.h9.Normalize(i),n=s.h9.CalculateFalloff(this.pos,t,1,.01);this.velocity=s.h9.Scale(e,n),this.UpdateCollision(),this.velocity.y+=1.1,this.pos=s.h9.Add(this.pos,this.velocity),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx)},t.prototype.UpdateCollision=function(){for(var t=0;t<this.listCollision.length;++t){var i=s.h9.Sub(this.pos,this.listCollision[t].pos),e=s.h9.Normalize(i),n=s.h9.CalculateFalloff(this.pos,this.listCollision[t].pos,1,.01);this.velocity=s.h9.Scale(e,n),this.pos=s.h9.Add(this.pos,this.velocity)}},t.prototype.IsMouseHover=function(t,i){return s.h9.Distance(this.pos,new s.h9(t,i))<this.r},t.prototype.Render=function(t){t.lineWidth=1,t.strokeStyle="#000000",this.isCaptured?t.fillStyle="#ff0000":t.fillStyle=this.colorFill,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()},t.prototype.UpdatePosInScreen=function(t){var i=10;this.pos.y>.5*t.canvas.height-i&&(this.pos.y=.5*t.canvas.height-i),this.pos.x<.5*-t.canvas.width+i&&(this.pos.x=.5*-t.canvas.width+i),this.pos.x>.5*t.canvas.width-i&&(this.pos.x=.5*t.canvas.width-i)},t}(),w=function(){function t(t,i,e,n){this.listCollision=[],this.fixed=!1,this.hover=!1,this.graph=t,this.vec=new s.h9(i.x,i.y),this.width=e,this.height=n}return t.AABBvsAABB=function(t,i,e){return void 0===e&&(e=1.5),!(t.vec.x+e+.5*t.width<i.vec.x-e-.5*i.width||t.vec.x-e-.5*t.width>i.vec.x+e+.5*i.width||t.vec.y+e+.5*t.height<i.vec.y-e-.5*i.height||t.vec.y-e-.5*t.height>i.vec.y+e+.5*i.height)},t.prototype.Overlaps=function(i){return t.AABBvsAABB(this,i)},t.prototype.Update=function(){this.fixed||(this.UpdatePos(),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx))},t.prototype.UpdatePos=function(){for(var t=0;t<this.listCollision.length;++t){var i=s.h9.Sub(this.vec,this.listCollision[t].vec),e=s.h9.Normalize(i);this.velocity=s.h9.Scale(e,Math.random()*this.graph.optiLevel),this.vec=s.h9.Add(this.vec,this.velocity)}},t.prototype.Render=function(t){this.hover?t.fillStyle="#0ff000":t.fillStyle="#ff0000",this.fixed&&(t.fillStyle="#000000"),t.strokeStyle="#000000",t.beginPath(),t.rect(this.vec.x-.5*this.width,this.vec.y-.5*this.height,this.width,this.height),t.closePath(),t.fill(),t.lineWidth=1,t.stroke()},t.prototype.UpdatePosInScreen=function(t){var i=10;this.vec.y>.5*t.canvas.height-i&&(this.vec.y=.5*t.canvas.height-i),this.vec.x-.5*this.width-i<.5*-t.canvas.width+i&&(this.vec.x=.5*-t.canvas.width+i+.5*this.width+i),this.vec.x+.5*this.width+i>.5*t.canvas.width-i&&(this.vec.x=.5*t.canvas.width-i-.5*this.width-i)},t}(),S=function(){function t(t){this.particles=[],this.listRect=[],this.offset=1,this.optiLevel=3,this.t=1,this.num=50,this.capture=void 0,this.graphSystem=t,this.Init()}return t.prototype.Init=function(){this.m=new s.h9(0,0),this.particles=[],this.listRect=[];for(var t=0;t<this.num;++t)this.listRect.push(new w(this,new s.h9(-.5+Math.random(),-.5+Math.random()),20+20*Math.random(),5+10*Math.random()));var i=new w(this,new s.h9(-50,-50),50,50);i.fixed=!0,this.listRect.push(i),(i=new w(this,new s.h9(50,20),40,20)).fixed=!0,this.listRect.push(i)},t.prototype.UpdateNumber=function(t){this.num=t,this.Init(),console.log(t,"num")},t.prototype.UpdateOffset=function(t){this.offset=t,console.log(t,"off")},t.prototype.UpdateOptiLevel=function(t){this.optiLevel=t,this.Init(),console.log(t,"opti")},t.prototype.MouseDown=function(t,i){for(var e=0;e<this.particles.length;++e)this.particles[e].IsMouseHover(t,i)&&(this.capture=this.particles[e],this.capture.isCaptured=!0)},t.prototype.MouseUp=function(){this.capture&&(this.capture.isCaptured=!1),this.capture=void 0},t.prototype.MouseLeftClick=function(t,i){this.particles.push(new M(this,t,i))},t.prototype.MouseMove=function(t,i){this.m.x=t,this.m.y=i},t.prototype.MouseDrag=function(t,i){this.capture&&(this.capture.pos.x=t,this.capture.pos.y=i)},t.prototype.Render=function(t){this.UpdateCollisionRect(),this.UpdateCollision();for(var i=0;i<this.listRect.length;++i)this.listRect[i].Update();for(i=0;i<this.listRect.length;++i)this.listRect[i].Render(t);0==(5&this.t)&&this.particles.length<10&&this.particles.push(new M(this,0,0)),this.t+=1},t.prototype.UpdateCollisionRect=function(){for(var t=0;t<this.listRect.length;++t){var i=this.listRect[t];i.listCollision=[];for(var e=!1,s=0;s<this.listRect.length;++s){var n=this.listRect[s];i!==n&&w.AABBvsAABB(i,n,this.offset)&&(i.listCollision.push(n),e=!0)}i.hover=e}},t.prototype.UpdateCollision=function(){for(var t=0;t<this.particles.length;++t){var i=this.particles[t];i.listCollision=[];for(var e=0;e<this.particles.length;++e){var s=this.particles[e];i!==s&&i.pos.Distance(s.pos)<i.r+s.r&&i.listCollision.push(s)}}},t}(),I=function(){function t(t,i,e){void 0===i&&(i=400),void 0===e&&(e=300),this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.graphSystem=t,this.width=i,this.height=e;var s=document.getElementById(t.id);s&&(this.host=s,this.InitCanvas())}return t.prototype.InitCanvas=function(){var t=document.createElement("div");if(t){this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);var i=document.createElement("div");if(i){this.divCanvas=i,this.divLocalMain.append(i);var e=document.createElement("canvas");if(e){this.canvas=e,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";var s=this.canvas.getContext("2d");s&&(this.ctx=s,this.InitUI(),this.Init())}}}},t.prototype.InitUI=function(){var t=this,i=document.createElement("div");if(i){this.divUI=i,this.divLocalMain.append(i),this.divUI.style.marginLeft="10px",this.divUI.style.width="100%";var e=document.createElement("button");e.textContent="reset",e.onclick=function(){t.graphSystem.InitGraph()},this.divUI.append(e);var s=document.createElement("input");s.oninput=function(){var i=+s.value;t.graphSystem.graph.UpdateNumber(i)},s.type="range",s.min="10",s.max="200.0",s.value="50",this.divUI.append(s);var n=document.createElement("input");n.oninput=function(){var i=+n.value;t.graphSystem.graph.UpdateOffset(i)},n.type="range",n.min="1",n.max="10.0",n.value="4",this.divUI.append(n);var o=document.createElement("input");o.oninput=function(){var i=+o.value;t.graphSystem.graph.UpdateOptiLevel(i)},o.type="range",o.min="1",o.max="8",o.value="4",this.divUI.append(o);var h=document.createElement("p");h&&(this.divUI.append(h),h.style.width="max-content",h.innerHTML="1. clikc to reset! <br> ",h.innerHTML+="2. first slider for num of Nodes! <br> ",h.innerHTML+="3. second slider for offset! <br> ",h.innerHTML+="4. third slider for Opti level! <br> ")}},t.prototype.Init=function(){this.ctx.translate(.5*this.ctx.canvas.width,.5*this.ctx.canvas.height),this.ctx.scale(1,1),this.EventBind(),this.Loop()},t.prototype.EventBind=function(){var t=this;this.canvas.onclick=function(i){t.prevent=!1,t.timer=setTimeout((function(){if(!t.prevent){if(!t.click)return;t.MouseClick(i)}t.prevent=!1}),t.delay)},this.canvas.ondblclick=function(i){clearTimeout(t.timer),t.prevent=!0,t.MouseDoubleClick(i)},this.canvas.addEventListener("wheel",(function(i){return t.MouseWheel(i,i.deltaY)})),this.canvas.onmousedown=function(i){t.click=!0,t.pressed=!0,t.MouseDown(i)},this.canvas.onmouseup=function(i){t.pressed=!1,t.MouseUp(i)},this.canvas.onmousemove=function(i){t.pressed&&(t.click=!1,t.MouseDrag(i)),t.MouseMove(i)},window.onresize=function(i){return t.Resize(i)}},t.prototype.Resize=function(t){},t.prototype.Loop=function(){var t=this;requestAnimationFrame((function(){t.Loop()})),this.ctx.clearRect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)},t.prototype.Render=function(t){},t.prototype.MouseClick=function(t){},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){},t.prototype.MouseDrag=function(t){},t.prototype.MouseWheel=function(t,i){},t}(),U=function(){function t(t){this.t=.9,this.m=new s.h9(0,0,0),this.id=t,this.CanvasCore=new I(this),this.Init(),this.InitGraph()}return t.prototype.Init=function(){var t=this;this.CanvasCore.Render=function(i){return t.Render(i)},this.CanvasCore.MouseDown=function(i){return t.MouseDown(i)},this.CanvasCore.MouseClick=function(i){return t.MouseClick(i)},this.CanvasCore.MouseDoubleClick=function(i){return t.MouseDoubleClick(i)},this.CanvasCore.MouseUp=function(i){return t.MouseUp(i)},this.CanvasCore.MouseMove=function(i){return t.MouseMove(i)},this.CanvasCore.MouseDrag=function(i){return t.MouseDrag(i)}},t.prototype.InitGraph=function(){this.graph=new S(this)},t.prototype.Render=function(t){this.graph.Render(t),t.fillStyle="rgba(255, 0, 0, 0.9)",t.beginPath(),t.arc(this.m.x,this.m.y,2.5,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.Grid=function(t){for(var i=-10;i<10;++i)for(var e=-10;e<10;++e)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(i,e,.05,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.MouseDown=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseDown(this.m.x,this.m.y)},t.prototype.MouseUp=function(t){this.graph.MouseUp()},t.prototype.MouseMove=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseMove(this.m.x,this.m.y)},t.prototype.MouseDrag=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseDrag(this.m.x,this.m.y)},t.prototype.MouseClick=function(t){console.log("click"),this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseLeftClick(this.m.x,this.m.y)},t.prototype.MouseDoubleClick=function(t){console.log("d click")},t}(),R=function(){function t(t,i,e){this.m=5,this.r=17,this.colorFill="#0099ff",this.MAX_VELOCITY=5.5,this.listCollision=[],this.isCaptured=!1,this.graph=t,this.pos=new s.h9(i,e)}return t.prototype.Update=function(t){this.isCaptured||this.UpdatePos(t)},t.prototype.UpdatePos=function(t){var i=s.h9.Sub(this.pos,t),e=s.h9.Normalize(i),n=s.h9.CalculateFalloff(this.pos,t,1,.01);this.velocity=s.h9.Scale(e,n),this.UpdateCollision(),this.velocity.y+=1.1,this.pos=s.h9.Add(this.pos,this.velocity),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx)},t.prototype.UpdateCollision=function(){for(var t=0;t<this.listCollision.length;++t){var i=s.h9.Sub(this.pos,this.listCollision[t].pos),e=s.h9.Normalize(i),n=s.h9.CalculateFalloff(this.pos,this.listCollision[t].pos,1,.01);this.velocity=s.h9.Scale(e,n),this.pos=s.h9.Add(this.pos,this.velocity)}},t.prototype.IsMouseHover=function(t,i){return s.h9.Distance(this.pos,new s.h9(t,i))<this.r},t.prototype.Render=function(t){t.lineWidth=1,t.strokeStyle="#000000",this.isCaptured?t.fillStyle="#ff0000":t.fillStyle=this.colorFill,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()},t.prototype.UpdatePosInScreen=function(t){var i=10;this.pos.y>.5*t.canvas.height-i&&(this.pos.y=.5*t.canvas.height-i),this.pos.x<.5*-t.canvas.width+i&&(this.pos.x=.5*-t.canvas.width+i),this.pos.x>.5*t.canvas.width-i&&(this.pos.x=.5*t.canvas.width-i)},t}(),L=function(){function t(t,i,e,n){this.listCollision=[],this.fixed=!1,this.hover=!1,this.graph=t,this.vec=new s.h9(i.x,i.y),this.width=e,this.height=n}return t.AABBvsAABB=function(t,i,e){return void 0===e&&(e=1.5),!(t.vec.x+e+.5*t.width<i.vec.x-e-.5*i.width||t.vec.x-e-.5*t.width>i.vec.x+e+.5*i.width||t.vec.y+e+.5*t.height<i.vec.y-e-.5*i.height||t.vec.y-e-.5*t.height>i.vec.y+e+.5*i.height)},t.prototype.Overlaps=function(i){return t.AABBvsAABB(this,i)},t.prototype.Update=function(){this.fixed||(this.UpdatePosExpel(),this.UpdatePosContract(),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx))},t.prototype.UpdatePosExpel=function(){for(var t=0;t<this.listCollision.length;++t){var i=s.h9.Sub(this.vec,this.listCollision[t].vec),e=s.h9.Normalize(i);this.velocity=s.h9.Scale(e,Math.random()*this.graph.optiLevel),this.vec=s.h9.Add(this.vec,this.velocity)}},t.prototype.UpdatePosContract=function(){if(this.RectCloset){var t=s.h9.Sub(this.RectCloset.vec,this.vec),i=s.h9.Normalize(t);this.velocity=s.h9.Scale(i,.2*Math.random()),this.vec=s.h9.Add(this.vec,this.velocity)}},t.prototype.Render=function(t){this.hover?t.fillStyle="#0ff000":t.fillStyle="#ff0000",0===this.listCollision.length&&(t.fillStyle="#ff0000"),this.fixed&&(t.fillStyle="#000000"),t.strokeStyle="#000000",t.beginPath(),t.rect(this.vec.x-.5*this.width,this.vec.y-.5*this.height,this.width,this.height),t.closePath(),t.fill(),t.lineWidth=1,t.stroke()},t.prototype.UpdatePosInScreen=function(t){var i=10;this.vec.y>.5*t.canvas.height-i&&(this.vec.y=.5*t.canvas.height-i),this.vec.x-.5*this.width-i<.5*-t.canvas.width+i&&(this.vec.x=.5*-t.canvas.width+i+.5*this.width+i),this.vec.x+.5*this.width+i>.5*t.canvas.width-i&&(this.vec.x=.5*t.canvas.width-i-.5*this.width-i)},t}(),b=function(){function t(t){this.particles=[],this.listRect=[],this.offset=1,this.optiLevel=3,this.t=1,this.num=50,this.capture=void 0,this.graphSystem=t,this.Init()}return t.prototype.Init=function(){this.m=new s.h9(0,0),this.particles=[],this.listRect=[];for(var t=0;t<2;++t)this.listRect.push(new L(this,new s.h9(-.5+Math.random(),-.5+Math.random()),20+20*Math.random(),5+10*Math.random()));var i=new L(this,new s.h9(-50,-50),50,50);i.fixed=!0,this.listRect.push(i),(i=new L(this,new s.h9(50,20),40,20)).fixed=!0,this.listRect.push(i),(i=new L(this,new s.h9(-30,30),20,30)).fixed=!0,this.listRect.push(i)},t.prototype.UpdateNumber=function(t){this.num=t,this.Init(),console.log(t,"num")},t.prototype.UpdateOffset=function(t){this.offset=t,console.log(t,"off")},t.prototype.UpdateOptiLevel=function(t){this.optiLevel=t,this.Init(),console.log(t,"opti")},t.prototype.MouseDown=function(t,i){for(var e=0;e<this.particles.length;++e)this.particles[e].IsMouseHover(t,i)&&(this.capture=this.particles[e],this.capture.isCaptured=!0)},t.prototype.MouseUp=function(){this.capture&&(this.capture.isCaptured=!1),this.capture=void 0},t.prototype.MouseLeftClick=function(t,i){this.particles.push(new R(this,t,i))},t.prototype.MouseMove=function(t,i){this.m.x=t,this.m.y=i},t.prototype.MouseDrag=function(t,i){this.capture&&(this.capture.pos.x=t,this.capture.pos.y=i)},t.prototype.Render=function(t){this.UpdateCollisionRect(),this.UpdateAtt(),this.UpdateCollision();for(var i=0;i<this.listRect.length;++i)this.listRect[i].Update();for(i=0;i<this.listRect.length;++i)this.listRect[i].Render(t);0==(5&this.t)&&this.particles.length<10&&this.particles.push(new R(this,0,0)),this.t%10==0&&this.listRect.length<this.num&&(this.listRect.push(new L(this,new s.h9(-.5+Math.random(),-.5+Math.random()),20+20*Math.random(),5+10*Math.random())),this.graphSystem.CanvasCore.divConsole.innerHTML="1. clikc to reset! <br> ",this.graphSystem.CanvasCore.divConsole.innerHTML+="2. first slider for num of Nodes! <br> ",this.graphSystem.CanvasCore.divConsole.innerHTML+="3. second slider for offset! <br> ",this.graphSystem.CanvasCore.divConsole.innerHTML+="4. third slider for Opti level! <br> ",this.graphSystem.CanvasCore.divConsole.innerHTML+="* num of node: "+this.listRect.length),this.t+=1},t.prototype.UpdateAtt=function(){for(var t=0;t<this.listRect.length;++t){var i=this.listRect[t];i.RectCloset=void 0;for(var e=0;e<this.listRect.length;++e){var n=this.listRect[e],o=Number.MAX_SAFE_INTEGER,h=-1;if(i!==n){var a=s.h9.Distance(i.vec,n.vec);a<o&&(o=a,h=e)}h>0&&(i.RectCloset=this.listRect[h])}}},t.prototype.UpdateCollisionRect=function(){for(var t=0;t<this.listRect.length;++t){var i=this.listRect[t];i.listCollision=[];for(var e=!1,s=0;s<this.listRect.length;++s){var n=this.listRect[s];i!==n&&L.AABBvsAABB(i,n,this.offset)&&(i.listCollision.push(n),e=!0)}i.hover=e}},t.prototype.UpdateCollision=function(){for(var t=0;t<this.particles.length;++t){var i=this.particles[t];i.listCollision=[];for(var e=0;e<this.particles.length;++e){var s=this.particles[e];i!==s&&i.pos.Distance(s.pos)<i.r+s.r&&i.listCollision.push(s)}}},t}(),k=function(){function t(t,i,e){void 0===i&&(i=400),void 0===e&&(e=300),this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.graphSystem=t,this.width=i,this.height=e;var s=document.getElementById(t.id);s&&(this.host=s,this.InitCanvas())}return t.prototype.InitCanvas=function(){var t=document.createElement("div");if(t){this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);var i=document.createElement("div");if(i){this.divCanvas=i,this.divLocalMain.append(i);var e=document.createElement("canvas");if(e){this.canvas=e,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";var s=this.canvas.getContext("2d");s&&(this.ctx=s,this.InitUI(),this.Init())}}}},t.prototype.InitUI=function(){var t=this,i=document.createElement("div");if(i){this.divUI=i,this.divLocalMain.append(i),this.divUI.style.marginLeft="10px",this.divUI.style.width="100%";var e=document.createElement("button");e.textContent="reset",e.onclick=function(){t.graphSystem.InitGraph()},this.divUI.append(e);var s=document.createElement("input");s.oninput=function(){var i=+s.value;t.graphSystem.graph.UpdateNumber(i)},s.type="range",s.min="10",s.max="200.0",s.value="50",this.divUI.append(s);var n=document.createElement("input");n.oninput=function(){var i=+n.value;t.graphSystem.graph.UpdateOffset(i)},n.type="range",n.min="1",n.max="10.0",n.value="4",this.divUI.append(n);var o=document.createElement("input");o.oninput=function(){var i=+o.value;t.graphSystem.graph.UpdateOptiLevel(i)},o.type="range",o.min="1",o.max="8",o.value="4",this.divUI.append(o),this.divConsole=document.createElement("p"),this.divConsole&&(this.divUI.append(this.divConsole),this.divConsole.style.width="max-content",this.divConsole.innerHTML="1. clikc to reset! <br> ",this.divConsole.innerHTML+="2. first slider for num of Nodes! <br> ",this.divConsole.innerHTML+="3. second slider for offset! <br> ",this.divConsole.innerHTML+="4. third slider for Opti level! <br> ",this.divConsole.innerHTML+="* num of node: ")}},t.prototype.Init=function(){this.ctx.translate(.5*this.ctx.canvas.width,.5*this.ctx.canvas.height),this.ctx.scale(1,1),this.EventBind(),this.Loop()},t.prototype.EventBind=function(){var t=this;this.canvas.onclick=function(i){t.prevent=!1,t.timer=setTimeout((function(){if(!t.prevent){if(!t.click)return;t.MouseClick(i)}t.prevent=!1}),t.delay)},this.canvas.ondblclick=function(i){clearTimeout(t.timer),t.prevent=!0,t.MouseDoubleClick(i)},this.canvas.addEventListener("wheel",(function(i){return t.MouseWheel(i,i.deltaY)})),this.canvas.onmousedown=function(i){t.click=!0,t.pressed=!0,t.MouseDown(i)},this.canvas.onmouseup=function(i){t.pressed=!1,t.MouseUp(i)},this.canvas.onmousemove=function(i){t.pressed&&(t.click=!1,t.MouseDrag(i)),t.MouseMove(i)},window.onresize=function(i){return t.Resize(i)}},t.prototype.Resize=function(t){},t.prototype.Loop=function(){var t=this;requestAnimationFrame((function(){t.Loop()})),this.ctx.clearRect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)},t.prototype.Render=function(t){},t.prototype.MouseClick=function(t){},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDown=function(t){},t.prototype.MouseUp=function(t){},t.prototype.MouseMove=function(t){},t.prototype.MouseDrag=function(t){},t.prototype.MouseWheel=function(t,i){},t}(),P=function(){function t(t){this.t=.9,this.m=new s.h9(0,0,0),this.id=t,this.CanvasCore=new k(this),this.Init(),this.InitGraph()}return t.prototype.Init=function(){var t=this;this.CanvasCore.Render=function(i){return t.Render(i)},this.CanvasCore.MouseDown=function(i){return t.MouseDown(i)},this.CanvasCore.MouseClick=function(i){return t.MouseClick(i)},this.CanvasCore.MouseDoubleClick=function(i){return t.MouseDoubleClick(i)},this.CanvasCore.MouseUp=function(i){return t.MouseUp(i)},this.CanvasCore.MouseMove=function(i){return t.MouseMove(i)},this.CanvasCore.MouseDrag=function(i){return t.MouseDrag(i)}},t.prototype.InitGraph=function(){this.graph=new b(this)},t.prototype.Render=function(t){this.graph.Render(t),t.fillStyle="rgba(255, 0, 0, 0.9)",t.beginPath(),t.arc(this.m.x,this.m.y,2.5,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.Grid=function(t){for(var i=-10;i<10;++i)for(var e=-10;e<10;++e)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(i,e,.05,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.MouseDown=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseDown(this.m.x,this.m.y)},t.prototype.MouseUp=function(t){this.graph.MouseUp()},t.prototype.MouseMove=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseMove(this.m.x,this.m.y)},t.prototype.MouseDrag=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseDrag(this.m.x,this.m.y)},t.prototype.MouseClick=function(t){console.log("click"),this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.graph.MouseLeftClick(this.m.x,this.m.y)},t.prototype.MouseDoubleClick=function(t){console.log("d click")},t}(),V=function(t){this.OptimizerRectPosAgentSystemA=new x(t),this.OptimizerRectPosAgentSystemB=new U(t),this.OptimizerRectPosAgentSystemC=new P(t),this.OptimizerRectPosSystemA=new a(t),this.OptimizerRectPosSystemB=new l(t),this.OptimizerRectPosSystemC=new f(t),document.body.style.overflow="auto"},z=function(){function t(t){void 0===t&&(t="SandBox"),this.implementation=new V(t)}return t.Init=function(i){new t(i).Dummy()},t.prototype.Dummy=function(){},t}()}}]);
(self.webpackChunk=self.webpackChunk||[]).push([[9211],{1865:(t,e,i)=>{"use strict";i.r(e),i.d(e,{TFProject:()=>ct});var n,o=i(2775),s=function(){function t(t){this.scene=t}return t.prototype.MouseEventController=function(t){t.CLICK_TYPE!==o.uh.LEFT?t.CLICK_TYPE!==o.uh.MIDDLE?t.CLICK_TYPE!==o.uh.DOWN_RIGHT?t.CLICK_TYPE!==o.uh.DOUBLE?t.CLICK_TYPE!==o.uh.MOVE?t.CLICK_TYPE!==o.uh.DRAG?t.CLICK_TYPE!==o.uh.DOWN?t.CLICK_TYPE!==o.uh.WHEEL?t.CLICK_TYPE!==o.uh.UP||this.MouseUpPre(t):this.MouseWheelPre(t):this.MouseDownPre(t):this.MouseDragPre(t):this.MouseMovePre(t):this.MouseDoubleClickPre(t):this.MouseRightClickPre(t):this.MouseMiddleClickPre(t):this.MouseLeftClickPre(t)},t.prototype.MouseDown=function(t){},t.prototype.MouseDownPre=function(t){this.scene.MouseDown(t.x,t.y),this.MouseDown(t)},t.prototype.MouseLeftClick=function(t){},t.prototype.MouseLeftClickPre=function(t){this.scene.MouseLeftClick(t.x,t.y),this.MouseLeftClick(t)},t.prototype.MouseMiddleClick=function(t){},t.prototype.MouseMiddleClickPre=function(t){this.scene.MouseMiddleClick(t.x,t.y),this.MouseMiddleClick(t)},t.prototype.MouseRightClick=function(t){},t.prototype.MouseRightClickPre=function(t){this.scene.MouseRightClick(t.x,t.y),this.MouseRightClick(t)},t.prototype.MouseUp=function(t){},t.prototype.MouseUpPre=function(t){this.scene.MouseUp(t.x,t.y),this.MouseUp(t)},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDoubleClickPre=function(t){this.scene.MouseDoubleClick(t.x,t.y),this.MouseDoubleClick(t)},t.prototype.MouseMove=function(t){},t.prototype.MouseMovePre=function(t){this.scene.MouseMove(t.x,t.y),this.MouseMove(t)},t.prototype.MouseDrag=function(t){},t.prototype.MouseDragPre=function(t){this.scene.MouseDrag(t.x,t.y),this.MouseDrag(t)},t.prototype.MouseWheel=function(t){},t.prototype.MouseWheelPre=function(t){this.scene.MouseWheel(t.x,t.y,t.wheel),this.MouseWheel(t)},t}(),r=i(555),a=function(){function t(t,e,i){void 0===e&&(e=650),void 0===i&&(i=350),this.mOffX=-12,this.mOffY=-12,this.scene=t,this.scene.definitions.push(this),this.InitIndeCanvas(e,i)}return t.prototype.InitIndeCanvas=function(t,e){var i=this;void 0===t&&(t=650),void 0===e&&(e=350),this.scene.implementation.app.needUI?this.indeCanvas=new r.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,50,50,t,e,!0):this.indeCanvas=new r.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,1,-25,t,e,!0),this.indeCanvas.title="TF Env",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=function(t){return i.RenderIndependentCanvas(t)}},Object.defineProperty(t.prototype,"width",{get:function(){return this.indeCanvas.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.indeCanvas.canvas.height},enumerable:!1,configurable:!0}),t.prototype.Init=function(t){},t.prototype.RenderIndependentCanvas=function(t){},t.prototype.MouseMove=function(t,e){},t.prototype.MouseMovePre=function(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseMove(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)},t.prototype.MouseDown=function(t,e){},t.prototype.MouseDownPre=function(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDown(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)},t.prototype.MouseUp=function(t,e){},t.prototype.MouseUpPre=function(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseUp(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)},t.prototype.MouseDrag=function(t,e){},t.prototype.MouseDragPre=function(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDrag(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)},t.prototype.MouseLeftClick=function(t,e){},t.prototype.MouseLeftClickPre=function(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseLeftClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)},t.prototype.MouseMiddleClick=function(t,e){},t.prototype.MouseMiddleClickPre=function(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseMiddleClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)},t.prototype.MouseRightClick=function(t,e){},t.prototype.MouseRightClickPre=function(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseRightClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)},t.prototype.MouseDoubleClick=function(t,e){},t.prototype.MouseDoubleClickPre=function(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDoubleClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)},t.prototype.MouseWheel=function(t,e,i){},t.prototype.MouseWheelPre=function(t,e,i){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseWheel(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,i)},t}(),h=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),p=function(t){function e(e){var i=t.call(this,e)||this;return i.xpos=100,i.ypos=100,i.xspeed=10,i.yspeed=10,i.xdirection=1,i.ydirection=1,i.rad=50,i.vs=[],i.a=1,i.bias=0,i.indeCanvas.title="LinearRegression",i.Init(),i}return h(e,t),e.prototype.Init=function(){},e.prototype.MouseDown=function(t,e){this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,0,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,0)},e.prototype.RenderIndependentCanvas=function(t){t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.LinearRegression(),this.RenderLine(t),t.fillStyle="#00ff00";for(var e=0;e<this.vs.length;++e)t.beginPath(),t.arc(o.$H.Remap(this.vs[e].x,0,1,0,this.width),o.$H.Remap(this.vs[e].y,0,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill()},e.prototype.RenderLine=function(t){var e=0*this.a+this.bias,i=1*this.a+this.bias;t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(o.$H.Remap(0,0,1,0,this.width),o.$H.Remap(e,0,1,this.height,0)),t.lineTo(o.$H.Remap(1,0,1,0,this.width),o.$H.Remap(i,0,1,this.height,0)),t.stroke()},e.prototype.LinearRegression=function(){for(var t=0,e=0,i=0;i<this.vs.length;++i)t+=this.vs[i].x,e+=this.vs[i].y;var n=t/this.vs.length,o=e/this.vs.length,s=0,r=0;for(i=0;i<this.vs.length;++i)s+=(this.vs[i].x-n)*(this.vs[i].y-o),r+=(this.vs[i].x-n)*(this.vs[i].x-n);this.a=s/r,this.bias=o-this.a*n},e}(a),u=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l=function(t){function e(e){var i=t.call(this,e)||this;return i.xpos=100,i.ypos=100,i.xspeed=10,i.yspeed=10,i.xdirection=1,i.ydirection=1,i.rad=50,i.vs=[],i.weight=1,i.bias=0,i.indeCanvas.title="LinearRegression",i.Init(),i}return u(e,t),e.prototype.Init=function(){},e.prototype.MouseDown=function(t,e){this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,0,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,0)},e.prototype.RenderIndependentCanvas=function(t){t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GradientDescent(),this.vs.length>1&&this.RenderLine(t),t.fillStyle="#00ff00";for(var e=0;e<this.vs.length;++e)t.beginPath(),t.arc(o.$H.Remap(this.vs[e].x,0,1,0,this.width),o.$H.Remap(this.vs[e].y,0,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill()},e.prototype.RenderLine=function(t){var e=0*this.weight+this.bias,i=1*this.weight+this.bias;t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(o.$H.Remap(0,0,1,0,this.width),o.$H.Remap(e,0,1,this.height,0)),t.lineTo(o.$H.Remap(1,0,1,0,this.width),o.$H.Remap(i,0,1,this.height,0)),t.stroke()},e.prototype.GradientDescent=function(){for(var t=0;t<this.vs.length;++t){var e=this.vs[t].x,i=this.vs[t].y-(this.weight*e+this.bias);this.weight=this.weight+i*e*.1,this.bias=this.bias+.1*i}},e}(a),c=i(3290),d=function(){function t(){}return t.Playground=function(){console.log("Playground")},t.ExeScalar=function(){var t=c.iD$(10);console.log("scalar....."),console.log(t),t.print(),t.print(!0);var e=c.XeE([1,2,3]);e.print(),e.print(!0);var i=c.RRF([1,2,3]);i.print(),i.print(!0),c.XeE([[1,2],[3,4]]).print(),c.odF([[1,2],[3,4]]).print(),c.odF([1,2,3,4,5,6],[2,3]).print();for(var n=new Float32Array(30),o=0;o<30;++o)n[o]=o;c.odF(n,[10,3]).print();var s=new Float32Array(18);for(o=0;o<18;++o)s[o]=o;c.wOQ(s,[2,3,3]).print()},t.ExeAdd=function(){var t=c.iD$(5);c.XeE([1,2,3]).mul(t).print();var e=c.XeE([1,2,3,4,5,6],[2,3]);e.print(),e.mul(t).print(),e.add(t).print(),e.div(3).print();for(var i=new Float32Array(30),n=0;n<30;++n)i[n]=n;var o=c.odF(i,[10,3]);o.print();var s=o;s.print(),s.add(o).print(),s.sub(t).print()},t.ExeOperation=function(){c.lub((function(){var t=c.XeE([1,2,3,4,5,6],[2,3],"float32");t.print();var e=c.XeE([1,2,3,4,5,6],[3,2],"float32");e.print(),t.matMul(e).print();var i=e.matMul(t);i.print();var n=c.iD$(.5);i.mul(n).print();var o=c.RRF([80,90,100,80]),s=c.RRF([70,70,70,70]);o.add(s).div(2).print(),o.add(s).div(2).abs().print()})),console.log(c.sq6().numTensors)},t.Tensor01=function(){var t=c.XeE([0,1,2,3],[2,2]);t.print(),(t=c.XeE([0,1,2,3,4,5,6,7])).print(),(t=c.XeE([0,1,2,3,4,5,6,7],[2,2,2])).print()},t.Tensor02=function(){for(var t=[],e=0;e<15;++e)t.push(Math.random());var i=[3,5],n=c.XeE(t,i);for(n.print(),t=[],e=0;e<30;++e)t.push(100*Math.random());i=[2,3,5],(n=c.XeE(t,i,"int32")).print(),(n=c.wOQ(t,[2,3,5],"int32")).print()},t.Tensor03=function(){for(var t=[],e=0;e<15e4;++e)t.push(Math.random());c.XeE(t,[300,500]).print(),console.log(c.sq6().numTensors)},t}(),f=(i(6600),function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}))}),v=function(){function t(){}return t.getData=function(){return f(this,void 0,void 0,(function(){return function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(t){switch(t.label){case 0:return[4,fetch("https://storage.googleapis.com/tfjs-tutorials/carsData.json")];case 1:return[4,t.sent().json()];case 2:return[2,t.sent().map((function(t){return{mpg:t.Miles_per_Gallon,horsepower:t.Horsepower}})).filter((function(t){return null!=t.mpg&&null!=t.horsepower}))]}}))}))},t.Get_XY_OneHot_TensorFromCSV=function(t){return c.lub((function(){for(var e=[],i=[],n=-1,o=0,s=t;o<s.length;o++){var r=s[o],a=r.slice(0,r.length-1),h=r[r.length-1];e.push(a),i.push(h),n<h&&(n=h)}return[c.odF(e,[e.length,e[0].length]),c.lfX(c.RRF(i).toInt(),n+1)]}))},t.Get_XY_TensorFromCSV=function(t){return c.lub((function(){for(var e=[],i=[],n=-1,o=0,s=t;o<s.length;o++){var r=s[o],a=r.slice(0,r.length-1),h=r[r.length-1];e.push(a),i.push(h),n<h&&(n=h)}return[c.odF(e,[e.length,e[0].length]),c.RRF(i)]}))},t.SplitTensorFromXY=function(t,e,i){void 0===i&&(i=.5);var n=Math.round(t.shape[0]*i),o=t.shape[0]-n,s=t.slice([0,0],[o,t.shape[1]]),r=t.slice([o,0],[n,t.shape[1]]);return[s,e.slice([0,0],[o,e.shape[1]]),r,e.slice([o,0],[n,e.shape[1]])]},t.ConvertToTensors=function(t,e,i){console.log("++"),console.log(t),console.log(e),console.log(i);var n=t.length;if(n!==e.length)throw new Error("data and split have different numbers of examples");var o=Math.round(n*i),s=n-o,r=t[0].length,a=c.odF(t,[n,r]),h=c.lfX(c.RRF(e).toInt(),4),p=a.slice([0,0],[s,r]),u=a.slice([s,0],[o,r]);return[p,h.slice([0,0],[s,4]),u,h.slice([0,0],[o,4])]},t.GetRandomNormal=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=.55),c.nGf([t],e,i)},t.GetRandomNormalTensors=function(t){void 0===t&&(t=1e3)},t.Shuffle=function(t){for(var e,i,n=t.length;0!==n;)i=Math.floor(Math.random()*n),e=t[n-=1],t[n]=t[i],t[i]=e;return t},t.GetSyntheticDataTensor=function(t,e,i,n,o,s,r){return void 0===t&&(t=200),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=.2),void 0===r&&(r=!1),c.lub((function(){var a=t,h=c.iD$(e),p=c.iD$(i),u=c.iD$(n),l=c.iD$(o),d=c.LGj([a],-1,1),f=h.mul(d.pow(c.iD$(3))).add(p.mul(d.square())).add(u.mul(d)).add(l).add(c.nGf([a],0,s));if(r){var v=f.min(),y=f.max().sub(v);return{x:d,yNomalized:f.sub(v).div(y)}}return[d,f]}))},t.GetSyntheticData=function(t,e,i,n,o,s,r){var a=this;return void 0===t&&(t=200),void 0===e&&(e=-.2),void 0===i&&(i=-.66),void 0===n&&(n=-.1),void 0===o&&(o=2.8),void 0===s&&(s=.2),void 0===r&&(r=!1),c.lub((function(){var h=a.GetSyntheticDataTensor(t,e,i,n,o,s,r);return{xx:h[0].dataSync(),yy:h[1].dataSync()}}))},t.GetIrisData=function(){return[[5.1,3.5,1.4,.2,0],[4.9,3,1.4,.2,0],[4.7,3.2,1.3,.2,0],[4.6,3.1,1.5,.2,0],[5,3.6,1.4,.2,0],[5.4,3.9,1.7,.4,0],[4.6,3.4,1.4,.3,0],[5,3.4,1.5,.2,0],[4.4,2.9,1.4,.2,0],[4.9,3.1,1.5,.1,0],[5.4,3.7,1.5,.2,0],[4.8,3.4,1.6,.2,0],[4.8,3,1.4,.1,0],[4.3,3,1.1,.1,0],[5.8,4,1.2,.2,0],[5.7,4.4,1.5,.4,0],[5.4,3.9,1.3,.4,0],[5.1,3.5,1.4,.3,0],[5.7,3.8,1.7,.3,0],[5.1,3.8,1.5,.3,0],[5.4,3.4,1.7,.2,0],[5.1,3.7,1.5,.4,0],[4.6,3.6,1,.2,0],[5.1,3.3,1.7,.5,0],[4.8,3.4,1.9,.2,0],[5,3,1.6,.2,0],[5,3.4,1.6,.4,0],[5.2,3.5,1.5,.2,0],[5.2,3.4,1.4,.2,0],[4.7,3.2,1.6,.2,0],[4.8,3.1,1.6,.2,0],[5.4,3.4,1.5,.4,0],[5.2,4.1,1.5,.1,0],[5.5,4.2,1.4,.2,0],[4.9,3.1,1.5,.1,0],[5,3.2,1.2,.2,0],[5.5,3.5,1.3,.2,0],[4.9,3.1,1.5,.1,0],[4.4,3,1.3,.2,0],[5.1,3.4,1.5,.2,0],[5,3.5,1.3,.3,0],[4.5,2.3,1.3,.3,0],[4.4,3.2,1.3,.2,0],[5,3.5,1.6,.6,0],[5.1,3.8,1.9,.4,0],[4.8,3,1.4,.3,0],[5.1,3.8,1.6,.2,0],[4.6,3.2,1.4,.2,0],[5.3,3.7,1.5,.2,0],[5,3.3,1.4,.2,0],[7,3.2,4.7,1.4,1],[6.4,3.2,4.5,1.5,1],[6.9,3.1,4.9,1.5,1],[5.5,2.3,4,1.3,1],[6.5,2.8,4.6,1.5,1],[5.7,2.8,4.5,1.3,1],[6.3,3.3,4.7,1.6,1],[4.9,2.4,3.3,1,1],[6.6,2.9,4.6,1.3,1],[5.2,2.7,3.9,1.4,1],[5,2,3.5,1,1],[5.9,3,4.2,1.5,1],[6,2.2,4,1,1],[6.1,2.9,4.7,1.4,1],[5.6,2.9,3.6,1.3,1],[6.7,3.1,4.4,1.4,1],[5.6,3,4.5,1.5,1],[5.8,2.7,4.1,1,1],[6.2,2.2,4.5,1.5,1],[5.6,2.5,3.9,1.1,1],[5.9,3.2,4.8,1.8,1],[6.1,2.8,4,1.3,1],[6.3,2.5,4.9,1.5,1],[6.1,2.8,4.7,1.2,1],[6.4,2.9,4.3,1.3,1],[6.6,3,4.4,1.4,1],[6.8,2.8,4.8,1.4,1],[6.7,3,5,1.7,1],[6,2.9,4.5,1.5,1],[5.7,2.6,3.5,1,1],[5.5,2.4,3.8,1.1,1],[5.5,2.4,3.7,1,1],[5.8,2.7,3.9,1.2,1],[6,2.7,5.1,1.6,1],[5.4,3,4.5,1.5,1],[6,3.4,4.5,1.6,1],[6.7,3.1,4.7,1.5,1],[6.3,2.3,4.4,1.3,1],[5.6,3,4.1,1.3,1],[5.5,2.5,4,1.3,1],[5.5,2.6,4.4,1.2,1],[6.1,3,4.6,1.4,1],[5.8,2.6,4,1.2,1],[5,2.3,3.3,1,1],[5.6,2.7,4.2,1.3,1],[5.7,3,4.2,1.2,1],[5.7,2.9,4.2,1.3,1],[6.2,2.9,4.3,1.3,1],[5.1,2.5,3,1.1,1],[5.7,2.8,4.1,1.3,1],[6.3,3.3,6,2.5,2],[5.8,2.7,5.1,1.9,2],[7.1,3,5.9,2.1,2],[6.3,2.9,5.6,1.8,2],[6.5,3,5.8,2.2,2],[7.6,3,6.6,2.1,2],[4.9,2.5,4.5,1.7,2],[7.3,2.9,6.3,1.8,2],[6.7,2.5,5.8,1.8,2],[7.2,3.6,6.1,2.5,2],[6.5,3.2,5.1,2,2],[6.4,2.7,5.3,1.9,2],[6.8,3,5.5,2.1,2],[5.7,2.5,5,2,2],[5.8,2.8,5.1,2.4,2],[6.4,3.2,5.3,2.3,2],[6.5,3,5.5,1.8,2],[7.7,3.8,6.7,2.2,2],[7.7,2.6,6.9,2.3,2],[6,2.2,5,1.5,2],[6.9,3.2,5.7,2.3,2],[5.6,2.8,4.9,2,2],[7.7,2.8,6.7,2,2],[6.3,2.7,4.9,1.8,2],[6.7,3.3,5.7,2.1,2],[7.2,3.2,6,1.8,2],[6.2,2.8,4.8,1.8,2],[6.1,3,4.9,1.8,2],[6.4,2.8,5.6,2.1,2],[7.2,3,5.8,1.6,2],[7.4,2.8,6.1,1.9,2],[7.9,3.8,6.4,2,2],[6.4,2.8,5.6,2.2,2],[6.3,2.8,5.1,1.5,2],[6.1,2.6,5.6,1.4,2],[7.7,3,6.1,2.3,2],[6.3,3.4,5.6,2.4,2],[6.4,3.1,5.5,1.8,2],[6,3,4.8,1.8,2],[6.9,3.1,5.4,2.1,2],[6.7,3.1,5.6,2.4,2],[6.9,3.1,5.1,2.3,2],[5.8,2.7,5.1,1.9,2],[6.8,3.2,5.9,2.3,2],[6.7,3.3,5.7,2.5,2],[6.7,3,5.2,2.3,2],[6.3,2.5,5,1.9,2],[6.5,3,5.2,2,2],[6.2,3.4,5.4,2.3,2],[5.9,3,5.1,1.8,2]]},t}(),y=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}))},m=function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},g=(function(){function t(){}t.ImportCSVFromPublic=function(t){return y(this,void 0,void 0,(function(){return m(this,(function(e){return[2,fetch("njslabSandboxStatic/"+t).then((function(t){return t.text()})).then((function(t){for(var e=t.split(/\r\n|\n/),i=[],n=0;n<e.length;++n){for(var o=e[n].split(","),s=[],r=0;r<o.length;++r)s.push(+o[r]);i.push(s)}return i})).catch((function(t){console.log(t)}))]}))}))},t.ImportCSV=function(t){return y(this,void 0,void 0,(function(){return m(this,(function(e){return[2,fetch("njslabSandboxStatic/ML/"+t).then((function(t){return t.text()})).then((function(t){for(var e=t.split(/\r\n|\n/),i=[],n=0;n<e.length;++n){for(var o=e[n].split(","),s=[],r=0;r<o.length;++r)s.push(+o[r]);i.push(s)}return i})).catch((function(t){console.log(t)}))]}))}))},t.OpenJsonTrainData=function(t,e){return y(this,void 0,void 0,(function(){var i;return m(this,(function(n){switch(n.label){case 0:return[4,fetch("njslabSandboxStatic/ML/"+t+"/"+e)];case 1:return[4,n.sent().text()];case 2:return i=n.sent(),[2,this.CSVParse(i)]}}))}))},t.CSVParse=function(t){for(var e=[],i=t.split("\n"),n=0;n<i.length;++n){for(var o=[],s=i[n].split(","),r=0;r<s.length;++r)o.push(+s[r]);e.push(o)}return e},t.LoadModelFromPath=function(t){return y(this,void 0,void 0,(function(){var e;return m(this,(function(i){switch(i.label){case 0:return e="njslabSandboxStatic/"+t,[4,c.FBF(e)];case 1:return[2,i.sent()]}}))}))},t.LoadModelFromLocalStorage=function(t){return y(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,c.FBF("localstorage://"+t)];case 1:return[2,e.sent()]}}))}))},t.SaveModelFromPath=function(t){return y(this,void 0,void 0,(function(){var e;return m(this,(function(i){switch(i.label){case 0:return e="njslabSandboxStatic/"+t,[4,c.FBF(e)];case 1:return[2,i.sent()]}}))}))},t.SaveModelFromLocalStorage=function(t,e){return y(this,void 0,void 0,(function(){var i;return m(this,(function(n){switch(n.label){case 0:return[4,t.save("localstorage://"+e)];case 1:return i=n.sent(),console.log(i),[2]}}))}))},t.RemoveModel=function(t){return y(this,void 0,void 0,(function(){return m(this,(function(e){try{c.io.removeModel("localstorage://"+t),console.log("model removed")}catch(t){console.error(t)}return[2]}))}))}}(),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),w=function(t){function e(e){var i=t.call(this,e)||this;return i.xpos=100,i.ypos=100,i.xspeed=10,i.yspeed=10,i.xdirection=1,i.ydirection=1,i.rad=50,i.vs=[],i.a=1,i.bias=0,i.indeCanvas.title="TF Playground",i.Init(),i}return g(e,t),e.prototype.Init=function(){d.Playground()},e.prototype.MouseDown=function(t,e){},e.prototype.RenderIndependentCanvas=function(t){t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill()},e}(a),b=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),M=function(t){function e(e){var i=t.call(this,e)||this;return i.xpos=100,i.ypos=100,i.xspeed=10,i.yspeed=10,i.xdirection=1,i.ydirection=1,i.rad=50,i.vs=[],i.vsTemp=[],i.t=0,i.indeCanvas.title="TF LinearRegression GradientDescent 01",i.Init(),i}return b(e,t),e.prototype.Init=function(){this.tfLinearRegression=new R,this.InitData(),this.InitUI()},e.prototype.InitUI=function(){var t=document.createElement("div");t.style.position="absolute",t.style.left="400px",t.style.color="#ffffff";var e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e);var i=document.getElementById("indePanel");i&&i.append(t)},e.prototype.InitData=function(){var t=this;v.getData().then((function(e){var i=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;e.map((function(t){var e=t.horsepower;e>n&&(n=e),e<i&&(i=e);var o=t.mpg;o>r&&(r=o),o<s&&(s=o)}));for(var a=0,h=e;a<h.length;a++){var p=h[a],u=p.horsepower,l=p.mpg;t.vsTemp.push(new o.h9(o.$H.Remap(u,i,n,.1,.9),o.$H.Remap(l,s,r,.1,.9)))}}))},e.prototype.MouseDown=function(t,e){this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,0,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,0)},e.prototype.RenderIndependentCanvas=function(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),0==(2&this.t)){var e=this.vsTemp.pop();e&&this.vs.push(e)}if(this.vs.length>1){for(var i=[],n=[],s=0;s<this.vs.length;++s)i.push(this.vs[s].x),n.push(this.vs[s].y);this.tfLinearRegression.train(i,n),this.RenderLine(t)}for(t.fillStyle="#00ff00",s=0;s<this.vs.length;++s)t.beginPath(),t.arc(o.$H.Remap(this.vs[s].x,0,1,0,this.width),o.$H.Remap(this.vs[s].y,0,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.t+=.3},e.prototype.RenderLine=function(t){var e=this,i=[0,1],n=c.lub((function(){return e.tfLinearRegression.predict(c.RRF(i))})),s=n.dataSync();n.dispose();var r=s[0],a=s[1];t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(o.$H.Remap(0,0,1,0,this.width),o.$H.Remap(r,0,1,this.height,0)),t.lineTo(o.$H.Remap(1,0,1,0,this.width),o.$H.Remap(a,0,1,this.height,0)),t.stroke()},e}(a),R=function(){function t(){this.leraningRate=.5,this.weight=c.VD$(c.iD$(Math.random())),this.bias=c.VD$(c.iD$(Math.random())),this.optimizer=c.p_j.sgd(this.leraningRate)}return t.prototype.predict=function(t){return t.mul(this.weight).add(this.bias)},t.prototype.loss=function(t,e){return t.sub(e).square().mean()},t.prototype.train=function(t,e){var i=this;c.lub((function(){var n=c.RRF(t),o=c.RRF(e);i.optimizer.minimize((function(){return i.loss(i.predict(n),o)}))}))},t}(),x=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),P=function(t){function e(e){var i=t.call(this,e)||this;return i.xpos=100,i.ypos=100,i.xspeed=10,i.yspeed=10,i.xdirection=1,i.ydirection=1,i.rad=50,i.vs=[],i.vsTemp=[],i.selVec=void 0,i.t=0,i.indeCanvas.title="TF LinearRegression GradientDescent 01",i.Init(),i.InitData(),i.InitUI(),i}return x(e,t),e.prototype.InitUI=function(){var t=this,e=document.createElement("div");e.style.position="absolute",e.style.left="400px",e.style.color="#ffffff";var i=document.createElement("p");i.textContent="click on this screen to add data",e.append(i);var n=document.getElementById("indePanel");if(n){n.append(e);var o=document.createElement("button");o.textContent="run",o.style.position="absolute",o.style.left="650px",o.onclick=function(){console.log(t)},this.scene.implementation.app.model.modelViewCoreWrapper.viewWrapper.div.append(o)}},e.prototype.InitData=function(){var t=this;v.getData().then((function(e){var i=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;e.map((function(t){var e=t.horsepower;e>n&&(n=e),e<i&&(i=e);var o=t.mpg;o>r&&(r=o),o<s&&(s=o)}));for(var a=0,h=e;a<h.length;a++){var p=h[a],u=p.horsepower,l=p.mpg;t.vsTemp.push(new o.h9(o.$H.Remap(u,i,n,-.9,.9),o.$H.Remap(l,s,r,-.9,.9)))}}))},e.prototype.Init=function(){console.log(c.i83),this.tfLinearRegression=new C},e.prototype.MouseDown=function(t,e){this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MouseDoubleClick=function(){},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,-1,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,-1)},e.prototype.Grid=function(t){},e.prototype.RenderIndependentCanvas=function(t){if(this.Grid(t),t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),0==(2&this.t)){var e=this.vsTemp.pop();e&&this.vs.push(e)}if(this.vs.length>1){for(var i=[],n=[],s=0;s<this.vs.length;++s)i.push(this.vs[s].x),n.push(this.vs[s].y);this.tfLinearRegression.train(i,n),this.RenderLine(t)}for(t.fillStyle="#00ff00",s=0;s<this.vs.length;++s)t.beginPath(),t.arc(o.$H.Remap(this.vs[s].x,-1,1,0,this.width),o.$H.Remap(this.vs[s].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.t+=.3},e.prototype.RenderLine=function(t){for(var e=this,i=[],n=-1;n<=1;n+=.05)i.push(n);var s=c.lub((function(){return e.tfLinearRegression.predict2d(c.RRF(i))})),r=s.dataSync();s.dispose(),t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(o.$H.Remap(i[0],-1,1,0,this.width),o.$H.Remap(r[0],-1,1,this.height,0));for(var a=1;a<i.length;++a)t.lineTo(o.$H.Remap(i[a],-1,1,0,this.width),o.$H.Remap(r[a],-1,1,this.height,0));t.stroke()},e}(a),C=function(){function t(){this.weights=[],this.dim=1,this.leraningRate=.2;for(var t=0;t<5;++t){var e=c.VD$(c.iD$(2*Math.random()-1));e.print(),this.weights.push(e)}this.bias=c.VD$(c.iD$(2*Math.random()-1)),this.optimizer=c.p_j.adam(this.leraningRate)}return t.prototype.predict1d=function(t){return t.mul(this.weights[0]).add(this.bias)},t.prototype.predict2d=function(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict3d=function(t){return t.pow(c.iD$(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict4d=function(t){return t.pow(c.iD$(4)).mul(this.weights[3]).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict5d=function(t){return t.pow(c.iD$(5)).mul(this.weights[4]).add(t.pow(c.iD$(4)).mul(this.weights[3])).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict=function(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):this.predict1d(t)},t.prototype.loss=function(t,e){return t.sub(e).square().mean()},t.prototype.train=function(t,e){var i=this;c.lub((function(){var n=c.RRF(t),o=c.RRF(e);i.optimizer.minimize((function(){return i.loss(i.predict(n),o)}))})),console.log(c.sq6().numTensors)},t}(),D=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),I=function(t){function e(e,i,n){void 0===i&&(i=650),void 0===n&&(n=350);var o=t.call(this,e,i,n)||this;return o.xpos=100,o.ypos=100,o.xspeed=10,o.yspeed=10,o.xdirection=1,o.ydirection=1,o.rad=50,o.vs=[],o.selVec=void 0,o.indeCanvas.title="TF LinearRegression GradientDescent 01",o.Init(),o}return D(e,t),e.prototype.Init=function(){this.tfLinearRegression=new T,this.indeCanvas.canvas.style.zIndex="-1",v.getData().then((function(t){}))},e.prototype.MouseDown=function(t,e){for(var i=new o.h9(this.MapX(t),this.MapY(e)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MouseDoubleClick=function(){},e.prototype.MouseMove=function(t,e){for(var i=void 0,n=new o.h9(this.MapX(t),this.MapY(e)),s=0;s<this.vs.length;++s)o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s]);this.selVec=i||void 0},e.prototype.MouseDrag=function(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))},e.prototype.MouseUp=function(){this.selVec=void 0},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,-1,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,-1)},e.prototype.GridLine=function(t){t.strokeStyle="#555555";for(var e=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){t.lineWidth=10===n?3:1;var o=e*n,s=0,r=o,a=this.height;t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke(),o=0,s=i*n,r=this.width,a=s,t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke()}},e.prototype.RenderIndependentCanvas=function(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){for(var e=[],i=[],n=0;n<this.vs.length;++n)e.push(this.vs[n].x),i.push(this.vs[n].y);this.tfLinearRegression.train(e,i),this.RenderLine(t)}for(t.fillStyle="#00ff00",n=0;n<this.vs.length;++n)t.beginPath(),t.arc(o.$H.Remap(this.vs[n].x,-1,1,0,this.width),o.$H.Remap(this.vs[n].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:"+this.selVec.x.toFixed(3)+", y"+this.selVec.y.toFixed(3),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))},e.prototype.RenderLine=function(t){for(var e=this,i=[],n=-1;n<=1;n+=.05)i.push(n);var s=c.lub((function(){return e.tfLinearRegression.predict(c.RRF(i))})),r=s.dataSync();s.dispose(),t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(o.$H.Remap(i[0],-1,1,0,this.width),o.$H.Remap(r[0],-1,1,this.height,0));for(var a=1;a<i.length;++a)t.lineTo(o.$H.Remap(i[a],-1,1,0,this.width),o.$H.Remap(r[a],-1,1,this.height,0));t.stroke()},e}(a),T=function(){function t(){this.weights=[],this.dim=3,this.leraningRate=.2;for(var t=0;t<5;++t){var e=c.VD$(c.iD$(2*Math.random()-1));e.print(),this.weights.push(e)}this.bias=c.VD$(c.iD$(2*Math.random()-1)),this.optimizer=c.p_j.adam(this.leraningRate)}return t.prototype.predict1d=function(t){return t.mul(this.weights[0]).add(this.bias)},t.prototype.predict2d=function(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict3d=function(t){return t.pow(c.iD$(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict4d=function(t){return t.pow(c.iD$(4)).mul(this.weights[3]).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict5d=function(t){return t.pow(c.iD$(5)).mul(this.weights[4]).add(t.pow(c.iD$(4)).mul(this.weights[3])).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict=function(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):this.predict1d(t)},t.prototype.loss=function(t,e){return t.sub(e).square().mean()},t.prototype.train=function(t,e){var i=this;c.lub((function(){var n=c.RRF(t),o=c.RRF(e);i.optimizer.minimize((function(){return i.loss(i.predict(n),o)}))}))},t}(),_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$=function(t){function e(e,i,n){void 0===i&&(i=650),void 0===n&&(n=350);var o=t.call(this,e,i,n)||this;return o.xpos=100,o.ypos=100,o.xspeed=10,o.yspeed=10,o.xdirection=1,o.ydirection=1,o.rad=50,o.vs=[],o.selVec=void 0,o.indeCanvas.title="TF Horsepower and Miles Per Gallon",o.Init(),o}return _(e,t),e.prototype.Init=function(){var t=this;this.tfLinearRegression=new H,this.indeCanvas.canvas.style.zIndex="-1",v.getData().then((function(e){var i=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;e.map((function(t){var e=t.horsepower;e>n&&(n=e),e<i&&(i=e);var o=t.mpg;o>r&&(r=o),o<s&&(s=o)}));for(var a=0,h=e;a<h.length;a++){var p=h[a],u=p.horsepower,l=p.mpg;t.vs.push(new o.h9(o.$H.Remap(u,i,n,-.9,.9),o.$H.Remap(l,s,r,-.9,.9)))}}))},e.prototype.MouseDown=function(t,e){for(var i=new o.h9(this.MapX(t),this.MapY(e)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MouseDoubleClick=function(){},e.prototype.MouseMove=function(t,e){for(var i=void 0,n=new o.h9(this.MapX(t),this.MapY(e)),s=0;s<this.vs.length;++s)o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s]);this.selVec=i||void 0},e.prototype.MouseDrag=function(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))},e.prototype.MouseUp=function(){this.selVec=void 0},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,-1,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,-1)},e.prototype.GridLine=function(t){t.strokeStyle="#555555";for(var e=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){t.lineWidth=10===n?3:1;var o=e*n,s=0,r=o,a=this.height;t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke(),o=0,s=i*n,r=this.width,a=s,t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke()}},e.prototype.RenderIndependentCanvas=function(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){for(var e=[],i=[],n=0;n<this.vs.length;++n)e.push(this.vs[n].x),i.push(this.vs[n].y);this.tfLinearRegression.train(e,i),this.RenderLine(t)}for(t.fillStyle="#00ff00",n=0;n<this.vs.length;++n)t.beginPath(),t.arc(o.$H.Remap(this.vs[n].x,-1,1,0,this.width),o.$H.Remap(this.vs[n].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:"+this.selVec.x.toFixed(3)+", y"+this.selVec.y.toFixed(3),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))},e.prototype.RenderLine=function(t){for(var e=this,i=[],n=-1;n<=1;n+=.05)i.push(n);var s=c.lub((function(){return e.tfLinearRegression.predict(c.RRF(i))})),r=s.dataSync();s.dispose(),t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(o.$H.Remap(i[0],-1,1,0,this.width),o.$H.Remap(r[0],-1,1,this.height,0));for(var a=1;a<i.length;++a)t.lineTo(o.$H.Remap(i[a],-1,1,0,this.width),o.$H.Remap(r[a],-1,1,this.height,0));t.stroke()},e}(a),H=function(){function t(){this.weights=[],this.dim=3,this.leraningRate=.2;for(var t=0;t<5;++t){var e=c.VD$(c.iD$(2*Math.random()-1));e.print(),this.weights.push(e)}this.bias=c.VD$(c.iD$(2*Math.random()-1)),this.optimizer=c.p_j.adam(this.leraningRate)}return t.prototype.predict1d=function(t){return t.mul(this.weights[0]).add(this.bias)},t.prototype.predict2d=function(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict3d=function(t){return t.pow(c.iD$(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict4d=function(t){return t.pow(c.iD$(4)).mul(this.weights[3]).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict5d=function(t){return t.pow(c.iD$(5)).mul(this.weights[4]).add(t.pow(c.iD$(4)).mul(this.weights[3])).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict=function(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):this.predict1d(t)},t.prototype.loss=function(t,e){return t.sub(e).square().mean()},t.prototype.train=function(t,e){var i=this;c.lub((function(){var n=c.RRF(t),o=c.RRF(e);i.optimizer.minimize((function(){return i.loss(i.predict(n),o)}))}))},t}(),S=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),F=function(t){function e(e,i,n){void 0===i&&(i=650),void 0===n&&(n=350);var o=t.call(this,e,i,n)||this;return o.xpos=100,o.ypos=100,o.xspeed=10,o.yspeed=10,o.xdirection=1,o.ydirection=1,o.rad=50,o.vs=[],o.selVec=void 0,o.indeCanvas.title="TF Horsepower and Miles Per Gallon",o.Init(),o}return S(e,t),e.prototype.Init=function(){this.tfModel=new L},e.prototype.MouseDown=function(t,e){for(var i=new o.h9(this.MapX(t),this.MapY(e)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MouseMove=function(t,e){for(var i=void 0,n=new o.h9(this.MapX(t),this.MapY(e)),s=0;s<this.vs.length;++s)o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s]);this.selVec=i||void 0},e.prototype.MouseDrag=function(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))},e.prototype.MouseUp=function(){this.selVec=void 0},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,-1,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,-1)},e.prototype.GridLine=function(t){t.strokeStyle="#555555";for(var e=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){t.lineWidth=10===n?3:1;var o=e*n,s=0,r=o,a=this.height;t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke(),o=0,s=i*n,r=this.width,a=s,t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke()}},e.prototype.RenderIndependentCanvas=function(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){for(var e=[],i=[],n=0;n<this.vs.length;++n)e.push(this.vs[n].x),i.push(this.vs[n].y);this.RenderLine(t)}for(t.fillStyle="#00ff00",n=0;n<this.vs.length;++n)t.beginPath(),t.arc(o.$H.Remap(this.vs[n].x,-1,1,0,this.width),o.$H.Remap(this.vs[n].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:"+this.selVec.x.toFixed(3)+", y"+this.selVec.y.toFixed(3),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))},e.prototype.RenderLine=function(t){},e}(a),L=function(){function t(){var t=this;this.model=c.Pel();var e=c.ugM.dense({inputShape:[2],units:4,activation:"sigmoid"}),i=c.ugM.dense({units:1,activation:"sigmoid"});this.model.add(e),this.model.add(i);var n={optimizer:c.p_j.sgd(.1),loss:c.MB5.meanSquaredError};this.model.compile(n),this.train1().then((function(){var e=c.odF([[0,0],[.5,.5],[1,1]]);t.model.predict(e).print()}))}return t.prototype.train0=function(){var t=c.odF([[0,0],[.5,.5],[1,1]]),e=c.odF([[1],[.5],[0]]);this.model.fit(t,e,{epochs:10}).then((function(t){return console.log(t.history)})),this.model.predict(t).print()},t.prototype.train1=function(){return t=this,e=void 0,n=function(){var t,e,i,n;return function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(o){switch(o.label){case 0:t=c.odF([[0,0],[.5,.5],[1,1]]),e=c.odF([[1],[.5],[0]]),i={epochs:10,shuffle:!0},n=0,o.label=1;case 1:return n<500?[4,this.model.fit(t,e,i)]:[3,4];case 2:o.sent(),o.label=3;case 3:return++n,[3,1];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}));var t,e,i,n},t}(),k=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=function(t){function e(e,i,n){void 0===i&&(i=650),void 0===n&&(n=350);var o=t.call(this,e,i,n)||this;return o.xpos=100,o.ypos=100,o.xspeed=10,o.yspeed=10,o.xdirection=1,o.ydirection=1,o.rad=50,o.vs=[],o.selVec=void 0,o.inputs=[],o.indeCanvas.title="TF XOR",o.Init(),o.InitUI(),o}return k(e,t),e.prototype.InitUI=function(){var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.color="#ffffff";var e=document.createElement("p");e.textContent="ref: Coding Challenge #106: XOR Problem with TensorFlow.js by The Cording Train",e.style.fontSize="11px",t.append(e);var i=document.getElementById("indePanel");i&&i.append(t)},e.prototype.Init=function(){this.tfModel=new E;for(var t=[],e=0;e<=10;++e)for(var i=0;i<=10;++i)t.push([.1*i,.1*e]);this.xPredict=c.odF(t)},e.prototype.MouseDown=function(t,e){for(var i=new o.h9(this.MapX(t),this.MapY(e)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MouseMove=function(t,e){for(var i=void 0,n=new o.h9(this.MapX(t),this.MapY(e)),s=0;s<this.vs.length;++s)o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s]);this.selVec=i||void 0},e.prototype.MouseDrag=function(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))},e.prototype.MouseUp=function(){this.selVec=void 0},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,-1,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,-1)},e.prototype.RenderIndependentCanvas=function(t){var e=this;c.lub((function(){var i=e.tfModel.model.predict(e.xPredict).dataSync();t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill();for(var n=0,o=0;o<=10;o++)for(var s=0;s<=10;s++){e.inputs.push(o);var r=42*o,a=42*s,h=i[n];t.fillStyle="rgba("+255*h+",0,0,1)",t.beginPath(),t.rect(r,a,42,42),t.closePath(),t.fill(),n++}}))},e}(a),E=function(){function t(){this.xTrain=c.odF([[0,0],[1,0],[0,1],[1,1]]),this.yTrain=c.odF([[0],[1],[1],[0]]),this.model=c.Pel();var t=c.ugM.dense({inputShape:[2],units:16,activation:"sigmoid"}),e=c.ugM.dense({units:1,activation:"sigmoid"});this.model.add(t),this.model.add(e),this.model.compile({optimizer:c.p_j.adam(.05),loss:c.MB5.meanSquaredError}),this.trainLoop()}return t.prototype.trainLoop=function(){var t=this;this.train().then((function(e){setTimeout((function(){return t.trainLoop()}),1)}))},t.prototype.train=function(){return t=this,e=void 0,n=function(){return function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(t){switch(t.label){case 0:return[4,this.model.fit(this.xTrain,this.yTrain,{epochs:10,shuffle:!0})];case 1:return[2,t.sent()]}}))},new((i=void 0)||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}));var t,e,i,n},t}(),V=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),A=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}))},X=function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},j=function(t){function e(e,i,n){void 0===i&&(i=650),void 0===n&&(n=350);var o=t.call(this,e,i,n)||this;return o.xpos=100,o.ypos=100,o.xspeed=10,o.yspeed=10,o.xdirection=1,o.ydirection=1,o.rad=50,o.inputs=[],o.indeCanvas.title="TF Horsepower and Miles Per Gallon",o.Init(),o}return V(e,t),e.prototype.Init=function(){this.tfModel=new W},e.prototype.RenderIndependentCanvas=function(t){c.lub((function(){}))},e}(a),W=function(){function t(){var t=v.GetIrisData();c.D5U.shuffle(t);for(var e=[],i=0;i<t.length;++i){for(var n=[],o=0;o<t[i].length-1;++o)n.push(t[i][o]);e.push(n)}var s=[];for(i=0;i<t.length;++i)0===t[i][t[i].length-1]?s.push([1,0,0]):1===t[i][t[i].length-1]?s.push([0,1,0]):2===t[i][t[i].length-1]&&s.push([0,0,1]);this.inputsTensor=c.odF(e),this.labelsTensor=c.odF(s),this.inputsTensor.print(),this.labelsTensor.print(),this.model=c.Pel();var r=c.ugM.dense({inputShape:[this.inputsTensor.shape[1]],units:10,activation:"sigmoid"}),a=c.ugM.dense({units:3,activation:"softmax"});this.model.add(r),this.model.add(a),this.model.compile({optimizer:c.p_j.adam(),loss:c.MB5.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}return t.prototype.trainLoop=function(){return A(this,void 0,void 0,(function(){var t,e=this;return X(this,(function(i){switch(i.label){case 0:return[4,this.model.save("downloads://my-model")];case 1:return i.sent(),[4,this.model.save("localstorage://ml/my-model-1")];case 2:return t=i.sent(),console.log(t),this.train().then((function(t){console.log(t.history.loss[0]),setTimeout((function(){return e.trainLoop()}),1)})),[2]}}))}))},t.prototype.train=function(){return A(this,void 0,void 0,(function(){return X(this,(function(t){switch(t.label){case 0:return[4,this.model.fit(this.inputsTensor,this.labelsTensor,{epochs:50,shuffle:!0,validationData:[this.inputsTensor,this.labelsTensor]})];case 1:return[2,t.sent()]}}))}))},t}(),N=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),G=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}))},U=function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},Y=function(t){function e(e,i,n){void 0===i&&(i=650),void 0===n&&(n=350);var o=t.call(this,e,i,n)||this;return o.xpos=100,o.ypos=100,o.xspeed=10,o.yspeed=10,o.xdirection=1,o.ydirection=1,o.rad=50,o.inputs=[],o.indeCanvas.title="TF Horsepower and Miles Per Gallon",o.Init(),o}return N(e,t),e.prototype.Init=function(){return G(this,void 0,void 0,(function(){var t,e=this;return U(this,(function(i){switch(i.label){case 0:return[4,(t=new z).Init().then((function(){e.tfModel=new B("model1",t.inputsTensor,t.labelsTensor),e.tfModel.CreateModel01(),e.tfModel=new B("model2",t.inputsTensor,t.labelsTensor),e.tfModel.CreateModel02()}))];case 1:return i.sent(),[2]}}))}))},e.prototype.RenderIndependentCanvas=function(t){c.lub((function(){}))},e}(a),z=function(){function t(){}return t.prototype.Init=function(){return G(this,void 0,void 0,(function(){var t,e,i,n,o,s,r,a,h,p;return U(this,(function(u){switch(u.label){case 0:return[4,this.OpenCSV()];case 1:if(t=u.sent()){for(this.raw=this.processData(t),c.D5U.shuffle(this.raw),e=[],i=[],a=0;a<this.raw.length;++a){for(n=[],p=0;p<this.raw[a].length-1;++p)n.push(this.raw[a][p]);e.push(n),i.push(this.raw[a][this.raw[a].length-1])}for(console.log(e),console.log(i),o=c.Fp7(i),s=o.dataSync(),r=[],a=0;a<i.length;++a){for(h=[],p=0;p<=s[0];++p)p===i[a]?h.push(1):h.push(0);r.push(h)}console.log(r),this.inputsTensor=c.odF(e),this.labelsTensor=c.odF(r),this.inputsTensor.print(),this.labelsTensor.print()}return[2]}}))}))},t.prototype.processData=function(t){for(var e=t.split(/\r\n|\n/),i=e[0].split(","),n=[],o=1;o<e.length;o++){var s=e[o].split(",");if(s.length===i.length){for(var r=[],a=0;a<i.length;a++){var h=+s[a];isNaN(h)?r.push(s[a]):r.push(h)}n.push(r)}}return n},t.prototype.OpenCSV=function(){return G(this,void 0,void 0,(function(){return U(this,(function(t){return[2,fetch("njslabSandboxStatic/ML/SmartDrawing/smartDrawingTrainData.csv").then((function(t){return console.log(t),t.text()})).catch((function(t){console.log(t)}))]}))}))},t}(),B=function(){function t(t,e,i){this.name=t,this.inputsTensor=e,this.labelsTensor=i}return t.prototype.CreateModel01=function(){this.model=c.Pel();var t=c.ugM.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),e=c.ugM.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(t),this.model.add(e),this.Compile()},t.prototype.CreateModel02=function(){this.model=c.Pel();var t=c.ugM.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),e=c.ugM.dense({units:15,activation:"sigmoid"}),i=c.ugM.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(t),this.model.add(e),this.model.add(i),this.Compile()},t.prototype.Compile=function(){this.model.compile({optimizer:c.p_j.adam(),loss:c.MB5.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()},t.prototype.trainLoop=function(){return G(this,void 0,void 0,(function(){var t=this;return U(this,(function(e){switch(e.label){case 0:return this.t0=performance.now(),[4,this.model.save("downloads://my-model")];case 1:return e.sent(),this.train().then((function(e){t.t1=performance.now(),console.log(t.name+": "+e.history.loss[0]+", "+(t.t1-t.t0)+" "),setTimeout((function(){return t.trainLoop()}),1)})),[2]}}))}))},t.prototype.train=function(){return G(this,void 0,void 0,(function(){return U(this,(function(t){return[2]}))}))},t}(),q=i(5302),K=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),J=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}))},Q=function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},Z=function(t){function e(e,i,n){void 0===i&&(i=650),void 0===n&&(n=350);var o=t.call(this,e,i,n)||this;return o.xpos=100,o.ypos=100,o.xspeed=10,o.yspeed=10,o.xdirection=1,o.ydirection=1,o.rad=50,o.vs=[],o.selVec=void 0,o.indeCanvas.title="TF Horsepower and Miles Per Gallon",o.Init(),o}return K(e,t),e.prototype.Init=function(){var t=this;v.getData().then((function(e){t.train(e)}))},e.prototype.train=function(t){return J(this,void 0,void 0,(function(){var e,i,n,o;return Q(this,(function(s){switch(s.label){case 0:return e=it(t),i=e.inputs,n=e.labels,o=et(),q.show.modelSummary({name:"Model Summary"},o),[4,tt(o,i,n)];case 1:return s.sent(),function(t,e,i){var n=i.inputMax,o=i.inputMin,s=i.labelMin,r=i.labelMax,a=c.lub((function(){var e=c.SX3(0,1,100),i=t.predict(e.reshape([100,1])),a=e.mul(n.sub(o)).add(o),h=i.mul(r.sub(s)).add(s);return[a.dataSync(),h.dataSync()]})),h=a[0],p=a[1],u=Array.from(h).map((function(t,e){return{x:t,y:p[e]}})),l=e.map((function(t){return{x:t.horsepower,y:t.mpg}}));q.render.scatterplot({name:"Model Predictions vs Original Data"},{values:[l,u],series:["original","predicted"]},{xLabel:"Horsepower",yLabel:"MPG",height:300})}(o,t,e),[2]}}))}))},e.prototype.MouseDown=function(t,e){for(var i=new o.h9(this.MapX(t),this.MapY(e)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MouseDoubleClick=function(){},e.prototype.MouseMove=function(t,e){for(var i=void 0,n=new o.h9(this.MapX(t),this.MapY(e)),s=0;s<this.vs.length;++s)o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s]);this.selVec=i||void 0},e.prototype.MouseDrag=function(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))},e.prototype.MouseUp=function(){this.selVec=void 0},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,-1,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,-1)},e.prototype.GridLine=function(t){t.strokeStyle="#555555";for(var e=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){t.lineWidth=10===n?3:1;var o=e*n,s=0,r=o,a=this.height;t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke(),o=0,s=i*n,r=this.width,a=s,t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke()}},e.prototype.RenderIndependentCanvas=function(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){for(var e=[],i=[],n=0;n<this.vs.length;++n)e.push(this.vs[n].x),i.push(this.vs[n].y);this.RenderLine(t)}for(t.fillStyle="#00ff00",n=0;n<this.vs.length;++n)t.beginPath(),t.arc(o.$H.Remap(this.vs[n].x,-1,1,0,this.width),o.$H.Remap(this.vs[n].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:"+this.selVec.x.toFixed(3)+", y"+this.selVec.y.toFixed(3),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))},e.prototype.RenderLine=function(t){for(var e=[],i=-1;i<=1;i+=.05)e.push(i)},e}(a);function tt(t,e,i){return J(this,void 0,void 0,(function(){return Q(this,(function(n){switch(n.label){case 0:return t.compile({optimizer:c.p_j.adam(),loss:c.MB5.meanSquaredError,metrics:["mse"]}),[4,t.fit(e,i,{batchSize:32,epochs:50,shuffle:!0,callbacks:q.show.fitCallbacks({name:"Training Performance"},["loss","mse"],{height:200,callbacks:["onEpochEnd"]})})];case 1:return[2,n.sent()]}}))}))}var et=function(){var t=c.Pel();return t.add(c.ugM.dense({inputShape:[1],units:16,useBias:!0})),t.add(c.ugM.dense({units:1,useBias:!0})),t},it=function(t){return c.lub((function(){c.D5U.shuffle(t);var e=t.map((function(t){return t.horsepower})),i=t.map((function(t){return t.mpg})),n=c.odF(e,[e.length,1]),o=c.odF(i,[i.length,1]),s=n.max(),r=n.min(),a=o.max(),h=o.min();return{inputs:n.sub(r).div(s.sub(r)),labels:o.sub(h).div(a.sub(h)),inputMax:s,inputMin:r,labelMax:a,labelMin:h}}))},nt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ot=function(t){function e(e,i,n){void 0===i&&(i=650),void 0===n&&(n=350);var o=t.call(this,e,i,n)||this;return o.xpos=100,o.ypos=100,o.xspeed=10,o.yspeed=10,o.xdirection=1,o.ydirection=1,o.rad=50,o.vs=[],o.selVec=void 0,o.col=["#ff0000","#00ff00","#0000ff","#00fff0","#ff0000","#fff000","#0fff00"],o.tfLinearRegression=[],o.indeCanvas.title="TF Regression ",o.Init(),o.InitUI(),o}return nt(e,t),e.prototype.Init=function(){this.tfLinearRegression.push(new st(1)),this.tfLinearRegression.push(new st(2)),this.tfLinearRegression.push(new st(3)),this.tfLinearRegression.push(new st(4)),this.indeCanvas.canvas.style.zIndex="-1",v.getData().then((function(t){}))},e.prototype.InitUI=function(){var t=document.createElement("div");t.style.position="absolute",t.style.left="40px",t.style.color="#ffffff";var e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e),(e=document.createElement("p")).textContent="LinearRegression",e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[0],t.append(e),(e=document.createElement("p")).style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[1],e.textContent="Degree of polynomial - 2",t.append(e),(e=document.createElement("p")).style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[2],e.textContent="Degree of polynomial - 3",t.append(e),(e=document.createElement("p")).style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[3],e.textContent="Degree of polynomial - 4",t.append(e);var i=document.getElementById("indePanel");i&&i.append(t)},e.prototype.MouseDown=function(t,e){for(var i=new o.h9(this.MapX(t),this.MapY(e)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MouseDoubleClick=function(){},e.prototype.MouseMove=function(t,e){for(var i=void 0,n=new o.h9(this.MapX(t),this.MapY(e)),s=0;s<this.vs.length;++s)o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s]);this.selVec=i||void 0},e.prototype.MouseDrag=function(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))},e.prototype.MouseUp=function(){this.selVec=void 0},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,-1,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,-1)},e.prototype.GridLine=function(t){t.strokeStyle="#555555";for(var e=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){t.lineWidth=10===n?3:1;var o=e*n,s=0,r=o,a=this.height;t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke(),o=0,s=i*n,r=this.width,a=s,t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke()}},e.prototype.RenderIndependentCanvas=function(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1)for(var e=0;e<this.tfLinearRegression.length;++e){for(var i=[],n=[],s=0;s<this.vs.length;++s)i.push(this.vs[s].x),n.push(this.vs[s].y);this.tfLinearRegression[e].train(i,n),this.RenderLine(t)}for(t.fillStyle="#00ff00",s=0;s<this.vs.length;++s)t.beginPath(),t.arc(o.$H.Remap(this.vs[s].x,-1,1,0,this.width),o.$H.Remap(this.vs[s].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:"+this.selVec.x.toFixed(3)+", y"+this.selVec.y.toFixed(3),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))},e.prototype.RenderLine=function(t){for(var e=this,i=function(i){for(var s=[],r=-1;r<=1;r+=.08)s.push(r);var a=c.lub((function(){return e.tfLinearRegression[i].predict(c.RRF(s))})),h=a.dataSync();a.dispose(),t.lineWidth=1,t.strokeStyle=n.col[i],t.beginPath(),t.moveTo(o.$H.Remap(s[0],-1,1,0,n.width),o.$H.Remap(h[0],-1,1,n.height,0));for(var p=1;p<s.length;++p)t.lineTo(o.$H.Remap(s[p],-1,1,0,n.width),o.$H.Remap(h[p],-1,1,n.height,0));t.stroke()},n=this,s=0;s<this.tfLinearRegression.length;++s)i(s)},e}(a),st=function(){function t(t){void 0===t&&(t=0),this.weights=[],this.dim=3,this.leraningRate=.2,this.dim=t;for(var e=0;e<5;++e){var i=c.VD$(c.iD$(2*Math.random()-1));i.print(),this.weights.push(i)}this.bias=c.VD$(c.iD$(2*Math.random()-1)),this.optimizer=c.p_j.adam(this.leraningRate)}return t.prototype.predict1d=function(t){return t.mul(this.weights[0]).add(this.bias)},t.prototype.predict2d=function(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict3d=function(t){return t.pow(c.iD$(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict4d=function(t){return t.pow(c.iD$(4)).mul(this.weights[3]).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict5d=function(t){return t.pow(c.iD$(5)).mul(this.weights[4]).add(t.pow(c.iD$(4)).mul(this.weights[3])).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict=function(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):(this.dim,this.predict1d(t))},t.prototype.loss=function(t,e){return t.sub(e).square().mean()},t.prototype.train=function(t,e){var i=this;c.lub((function(){var n=c.RRF(t),o=c.RRF(e);i.optimizer.minimize((function(){return i.loss(i.predict(n),o)}))}))},t}(),rt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),at=function(t){function e(e,i,n){void 0===i&&(i=650),void 0===n&&(n=350);var o=t.call(this,e,i,n)||this;return o.xpos=100,o.ypos=100,o.xspeed=10,o.yspeed=10,o.xdirection=1,o.ydirection=1,o.rad=50,o.vs=[],o.selVec=void 0,o.col=["#ff0000","#00ff00","#0000ff","#00fff0","#ff0000","#fff000","#0fff00"],o.tfLinearRegression=[],o.indeCanvas.title="TF MNist ",o.Init(),o.InitUI(),o}return rt(e,t),e.prototype.Init=function(){this.tfLinearRegression.push(new ht(1)),this.tfLinearRegression.push(new ht(2)),this.tfLinearRegression.push(new ht(3)),this.tfLinearRegression.push(new ht(4)),this.indeCanvas.canvas.style.zIndex="-1",v.getData().then((function(t){}));var t=new pt;console.log(t.getTrainData())},e.prototype.InitUI=function(){var t=document.createElement("div");t.style.position="absolute",t.style.left="40px",t.style.color="#ffffff";var e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e),(e=document.createElement("p")).textContent="LinearRegression",e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[0],t.append(e),(e=document.createElement("p")).style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[1],e.textContent="Degree of polynomial - 2",t.append(e),(e=document.createElement("p")).style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[2],e.textContent="Degree of polynomial - 3",t.append(e),(e=document.createElement("p")).style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[3],e.textContent="Degree of polynomial - 4",t.append(e);var i=document.getElementById("indePanel");i&&i.append(t)},e.prototype.MouseDown=function(t,e){for(var i=new o.h9(this.MapX(t),this.MapY(e)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(t),this.MapY(e)))},e.prototype.MouseDoubleClick=function(){},e.prototype.MouseMove=function(t,e){for(var i=void 0,n=new o.h9(this.MapX(t),this.MapY(e)),s=0;s<this.vs.length;++s)o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s]);this.selVec=i||void 0},e.prototype.MouseDrag=function(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))},e.prototype.MouseUp=function(){this.selVec=void 0},e.prototype.MapX=function(t){return o.$H.Remap(t,0,this.width,-1,1)},e.prototype.MapY=function(t){return o.$H.Remap(t,0,this.height,1,-1)},e.prototype.GridLine=function(t){t.strokeStyle="#555555";for(var e=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){t.lineWidth=10===n?3:1;var o=e*n,s=0,r=o,a=this.height;t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke(),o=0,s=i*n,r=this.width,a=s,t.beginPath(),t.moveTo(o,s),t.lineTo(r,a),t.stroke()}},e.prototype.RenderIndependentCanvas=function(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1)for(var e=0;e<this.tfLinearRegression.length;++e){for(var i=[],n=[],s=0;s<this.vs.length;++s)i.push(this.vs[s].x),n.push(this.vs[s].y);this.tfLinearRegression[e].train(i,n),this.RenderLine(t)}for(t.fillStyle="#00ff00",s=0;s<this.vs.length;++s)t.beginPath(),t.arc(o.$H.Remap(this.vs[s].x,-1,1,0,this.width),o.$H.Remap(this.vs[s].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:"+this.selVec.x.toFixed(3)+", y"+this.selVec.y.toFixed(3),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))},e.prototype.RenderLine=function(t){for(var e=this,i=function(i){for(var s=[],r=-1;r<=1;r+=.08)s.push(r);var a=c.lub((function(){return e.tfLinearRegression[i].predict(c.RRF(s))})),h=a.dataSync();a.dispose(),t.lineWidth=1,t.strokeStyle=n.col[i],t.beginPath(),t.moveTo(o.$H.Remap(s[0],-1,1,0,n.width),o.$H.Remap(h[0],-1,1,n.height,0));for(var p=1;p<s.length;++p)t.lineTo(o.$H.Remap(s[p],-1,1,0,n.width),o.$H.Remap(h[p],-1,1,n.height,0));t.stroke()},n=this,s=0;s<this.tfLinearRegression.length;++s)i(s)},e}(a),ht=function(){function t(t){void 0===t&&(t=0),this.weights=[],this.dim=3,this.leraningRate=.2,this.dim=t;for(var e=0;e<5;++e){var i=c.VD$(c.iD$(2*Math.random()-1));i.print(),this.weights.push(i)}this.bias=c.VD$(c.iD$(2*Math.random()-1)),this.optimizer=c.p_j.adam(this.leraningRate)}return t.prototype.predict1d=function(t){return t.mul(this.weights[0]).add(this.bias)},t.prototype.predict2d=function(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict3d=function(t){return t.pow(c.iD$(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict4d=function(t){return t.pow(c.iD$(4)).mul(this.weights[3]).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict5d=function(t){return t.pow(c.iD$(5)).mul(this.weights[4]).add(t.pow(c.iD$(4)).mul(this.weights[3])).add(t.pow(c.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)},t.prototype.predict=function(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):(this.dim,this.predict1d(t))},t.prototype.loss=function(t,e){return t.sub(e).square().mean()},t.prototype.train=function(t,e){var i=this;c.lub((function(){var n=c.RRF(t),o=c.RRF(e);i.optimizer.minimize((function(){return i.loss(i.predict(n),o)}))}))},t}(),pt=function(){function t(){}return t.prototype.load=function(){return t=this,e=void 0,n=function(){var t,e,i,n,o,s,r,a,h,p=this;return function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(u){switch(u.label){case 0:return t=new Image,e=document.createElement("canvas"),i=e.getContext("2d"),n=new Promise((function(n,o){t.crossOrigin="",t.onload=function(){t.width=t.naturalWidth,t.height=t.naturalHeight;var o=new ArrayBuffer(20384e4),s=5e3;e.width=t.width,e.height=s;for(var r=0;r<13;r++){var a=new Float32Array(o,784*r*s*4,392e4);i.drawImage(t,0,r*s,t.width,s,0,0,t.width,s);for(var h=i.getImageData(0,0,e.width,e.height),u=0;u<h.data.length/4;u++)a[u]=h.data[4*u]/255}p.datasetImages=new Float32Array(o),n()},t.src="https://storage.googleapis.com/learnjs-data/model-builder/mnist_images.png"})),o=fetch("https://storage.googleapis.com/learnjs-data/model-builder/mnist_labels_uint8"),[4,Promise.all([n,o])];case 1:return s=u.sent(),r=s[1],a=this,h=Uint8Array.bind,[4,r.arrayBuffer()];case 2:return a.datasetLabels=new(h.apply(Uint8Array,[void 0,u.sent()])),this.trainImages=this.datasetImages.slice(0,4312e4),this.testImages=this.datasetImages.slice(4312e4),this.trainLabels=this.datasetLabels.slice(0,55e4),this.testLabels=this.datasetLabels.slice(55e4),[2]}}))},new((i=void 0)||(i=Promise))((function(o,s){function r(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((n=n.apply(t,e||[])).next())}));var t,e,i,n},t.prototype.getTrainData=function(){return{xs:c.yXz(this.trainImages,[this.trainImages.length/784,28,28,1]),labels:c.odF(this.trainLabels,[this.trainLabels.length/10,10])}},t.prototype.getTestData=function(t){var e=c.yXz(this.testImages,[this.testImages.length/784,28,28,1]),i=c.odF(this.testLabels,[this.testLabels.length/10,10]);return null!=t&&(e=e.slice([0,0,0,0],[t,28,28,1]),i=i.slice([0,0],[t,10])),{xs:e,labels:i}},t}(),ut=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lt=function(t){function e(e){var i=t.call(this,e)||this;return i.p=[0,0],i.Init(),i}return ut(e,t),e.prototype.Init=function(){console.log(c.i83)},e.prototype.RenderIndependentCanvas=function(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()},e.prototype.MouseDown=function(t,e){this.p=[t,e]},e.prototype.MouseMove=function(t,e){this.p=[t,e]},e}(a),ct=function(){function t(t){this.definitions=[],this.implementation=t,this.canvas=t.app.model.graphicsCoreWrapper.canvasWrapper.canvas,this.activeCommandController=new s(this),this.Init(),this.InitDefinition(),this.InitDefault(),this.InitPullDown()}return t.prototype.Init=function(){this.definitions=[]},Object.defineProperty(t.prototype,"width",{get:function(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.height},enumerable:!1,configurable:!0}),t.prototype.InitDefinition=function(){for(var t=0,e=this.definitions;t<e.length;t++)e[t].Init(this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.ctx)},t.prototype.Render=function(t){},t.prototype.MouseMove=function(t,e){for(var i=0,n=this.definitions;i<n.length;i++)n[i].MouseMovePre(t,e)},t.prototype.MouseLeftClick=function(t,e){for(var i=0,n=this.definitions;i<n.length;i++)n[i].MouseLeftClickPre(t,e)},t.prototype.MouseDown=function(t,e){for(var i=0,n=this.definitions;i<n.length;i++)n[i].MouseDownPre(t,e)},t.prototype.MouseUp=function(t,e){for(var i=0,n=this.definitions;i<n.length;i++)n[i].MouseUpPre(t,e)},t.prototype.MouseDrag=function(t,e){for(var i=0,n=this.definitions;i<n.length;i++)n[i].MouseDragPre(t,e)},t.prototype.MouseMiddleClick=function(t,e){for(var i=0,n=this.definitions;i<n.length;i++)n[i].MouseMiddleClickPre(t,e)},t.prototype.MouseRightClick=function(t,e){for(var i=0,n=this.definitions;i<n.length;i++)n[i].MouseRightClickPre(t,e)},t.prototype.MouseDoubleClick=function(t,e){for(var i=0,n=this.definitions;i<n.length;i++)n[i].MouseDoubleClickPre(t,e)},t.prototype.MouseWheel=function(t,e,i){for(var n=0,o=this.definitions;n<o.length;n++)o[n].MouseWheelPre(t,e,i)},t.prototype.Dispose=function(){this.definitions=[]},t.prototype.InitDefault=function(){},t.prototype.LoadDefinition=function(t){"blank"===t&&new lt(this),"TFPlayground01"===t&&new w(this),"TFModel02XOR"===t&&new O(this,480,500),"TFModel03Iris"===t&&new j(this,480,500),"TFModel03SmartDrawing"===t&&new Y(this,480,500),"TFModel01HorsepowerAndMilesPerGallon"===t&&new Z(this,500,500),"TFModel01"===t&&new F(this,500,500),"JSLinearRegression"===t&&new p(this),"JSLinearRegressionGD"===t&&new l(this),"TFLinearRegressionGD"===t&&new M(this),"TFPolynomialRegression GD"===t&&new P(this),"TFPolyRegress Interaction"===t&&new I(this,500,500),"TFPolyRegress Miles/Gallon"===t&&new $(this,500,500),"TF Regression"===t&&new ot(this,500,500),"TFMnist"===t&&new at(this,500,500),console.log(t)},t.prototype.InitPullDown=function(){this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel01"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel02XOR"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel03Iris"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@--"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel03SmartDrawing"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel01HorsepowerAndMilesPerGallon"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPlayground01"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@JSLinearRegression"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@JSLinearRegressionGD"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFLinearRegressionGD"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@--"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPolynomialRegression GD"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPolyRegress Interaction"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPolyRegress Miles/Gallon"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@--"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TF Regression")},t}()},555:(t,e,i)=>{"use strict";i.d(e,{D:()=>v});var n,o=i(906),s=i(8206),r=i(4830),a=i(5407),h=i(2243),p=i(1234),u=i(5123),l=i(8246),c=i(9755),d=i(5155),f=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),v=function(t){function e(e,i,n,o,s,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=300),void 0===s&&(s=170),void 0===r&&(r=!1);var a=t.call(this,e)||this;return a.subs=[],a.isActive=!0,a.independentPanelWrapper=e,a.title="njslabSandbox V3",a.width=o,a.height=s,0===i&&0===n?(a.vec.x=.5*e.width-.5*a.width,a.vec.y=.5*e.height-.5*a.height):(a.vec.x=i,a.vec.y=n),a.filletR=7,a.InitTop(),r&&(a.bodyDiv=new c.k(a,a.vec.x,a.vec.y+a.HeadHeight,a.width,a.height-a.HeadHeight)),a.InitCanvas(a.bodyDiv.div),a}return f(e,t),Object.defineProperty(e.prototype,"IsMinimized",{get:function(){return this.isMinimized},set:function(t){this.isMinimized=t,this.btnResize.isHidden=t,this.bodyDiv&&this.bodyDiv.Hide(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Width",{get:function(){return this.width},set:function(t){var e=t-this.width;this.width=t,this.btnHam.vec.x+=e,this.subMenu.vec.x+=e,this.bodyDiv&&(this.bodyDiv.Width=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return this.height},set:function(t){this.height=t,this.bodyDiv&&(this.bodyDiv.Height=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this.bodyDiv&&(this.bodyDiv.content=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HasSubMenu",{get:function(){return this.hasSubMenu},set:function(t){this.hasSubMenu=t,this.subMenu.IsHidden=!t},enumerable:!1,configurable:!0}),e.prototype.InitTop=function(){this.btnClose=new h.E(this,this.vec.x,this.vec.y),this.btnMini=new p.$(this,this.vec.x+25,this.vec.y),this.btnHam=new u.g(this,this.vec.x-25+this.width,this.vec.y),this.btnResize=new l.C(this,this.vec.x+this.width-10,this.vec.y+this.height-10,10,10),this.subMenu=new d.q(this),this.subs.push(this.btnClose,this.btnMini,this.btnHam)},e.prototype.Translate=function(t){if(this.isMoveable){var e=t.x-t.preX,i=t.y-t.preY;this.vec.x+=e,this.vec.y+=i;for(var n=0;n<this.boundarVecs.length;++n)this.boundarVecs[n].x+=e,this.boundarVecs[n].y+=i;for(n=0;n<this.subs.length;++n)this.subs[n].Translate(t);this.btnResize.vec.x+=e,this.btnResize.vec.y+=i,this.subMenu.Translate(e,i),this.bodyDiv&&this.bodyDiv.Translate(e,i)}},e.prototype.Remove=function(){this.RemovePost();for(var t=0;t<this.subs.length;++t)this.subs[t].Remove();this.bodyDiv&&this.bodyDiv.Remove(),this.btnResize.Remove(),this.independentPanelWrapper.indePanelRender.Remove(this)},e.prototype.RenderPost=function(t){var e;this.ComputeBoundary(),e=s.mK.HexToCanvasColor(r.X.theme.mainMenuNormal,this.transparent),this.isMinimized||r.X.RoundedRectFillWithColorMainMenu(t,this.title,this.boundarVecs,this.filletR,0,this.isOver,this.isSelected,e),r.X.TopRoundedRectFill(t,this.title,o.h9.GetBoundaryByVecWidthHeight(this.vec,this.width,this.HeadHeight),this.filletR,0,this.isOver,this.isSelected,this.theme.colSelectedBG,!1),this.RenderHeadTitle(t),this.isMinimized||this.RenderBodyContent(t),this.hasSubMenu&&this.subMenu.RenderPost(t),this.RenderBtnHorizontal(t)},e.prototype.RenderBtnHorizontal=function(t){},e.prototype.RenderHeadTitle=function(t){t.save(),t.fillStyle="#ffffff",t.textBaseline="top",t.textAlign="center",t.font="100 12px Arial",t.shadowBlur=0,t.shadowOffsetY=0,t.shadowOffsetX=0,t.fillText(this.title,this.vec.x+.5*this.width,this.vec.y+.5*this.HeadHeight-7),t.restore()},e.prototype.RenderBodyContent=function(t){},e.prototype.RemovePost=function(){this.isActive=!1},e.prototype.InitCanvas=function(t){var e=this;this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.zIndex="0",t.appendChild(this.canvas),this.canvas.id="NCanvasRenderer",this.canvas.className="njslab-web-core-canvas-renderer",this.canvas.style.pointerEvents="none",this.ctx=this.canvas.getContext("2d"),this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight,this.btnResize.ResizePropagation=function(t,i){e.canvas.width=t,e.canvas.height=i},this.LoopIndependentCanvas(this.ctx)},e.prototype.LoopIndependentCanvas=function(t){var e=this;this.isActive&&(t.clearRect(0,0,this.canvas.width,this.canvas.height),requestAnimationFrame((function(){e.LoopIndependentCanvas(t)})),this.RenderIndependentCanvas(t))},e.prototype.RenderIndependentCanvas=function(t){console.log("implementation needed")},e.prototype.ResizeCanvas=function(t,e){this.canvas.width=t,this.canvas.height=e},e}(a.J)},613:()=>{},4240:()=>{},6227:()=>{},8072:()=>{},8090:()=>{},3706:()=>{}}]);
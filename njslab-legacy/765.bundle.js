"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[765],{765:(t,e,i)=>{i.r(e),i.d(e,{LandBox:()=>I});var s,o=function(){},n=function(t){this.app=t},r=i(7435),h=i(8903),a=i(906);!function(t){t.PERSPECTIVE="PERSPECTIVE",t.ORTHOGRAPHIC="ORTHOGRAPHIC",t.STEREO="STEREO"}(s||(s={}));var p=function(){function t(t,e,i,o){void 0===o&&(o=s.PERSPECTIVE),this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.rotateRate=150,this.panRate=50,this.zoomRate=200,this.zoomFactor=1,this.frustumSize=.001,this.cameraShift=0,this.ableToMove=!0,this.canvas=t,this.type=o,this.width=e,this.height=i,this.type===s.PERSPECTIVE?this.GetPerspective(0,10,50):this.type===s.ORTHOGRAPHIC?this.GetOrthographic():this.type===s.STEREO&&this.GetStereo(),this.stereoCamera=new r.u37}return t.prototype.GetStereo=function(){},Object.defineProperty(t.prototype,"aspect",{get:function(){return this.width/this.height},set:function(t){this.type===s.PERSPECTIVE?this.cameraP.aspect=t:(this.type,s.ORTHOGRAPHIC)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this.type===s.PERSPECTIVE?this.cameraP:this.type===s.ORTHOGRAPHIC?this.cameraO:this.cameraP},enumerable:!1,configurable:!0}),t.prototype.GetPerspective=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=2),void 0===i&&(i=2),this.cameraP=new r.cPb(45,this.width/this.height,.01,1e4),this.cameraP.position.set(t,e,i),this.InitOrbitController()},t.prototype.GetOrthographic=function(){this.cameraO=new r.iKG(this.frustumSize*this.aspect/-2,this.frustumSize*this.aspect/2,this.frustumSize/2,this.frustumSize/-2,.01,5e4),this.cameraO.position.set(0,1,0),this.InitOrbitController()},t.prototype.InitOrbitController=function(){this.type===s.PERSPECTIVE?this.controls=new h.OrbitControls(this.cameraP,this.canvas.renderer.domElement):this.type===s.ORTHOGRAPHIC&&(this.controls=new h.OrbitControls(this.cameraO,this.canvas.renderer.domElement)),this.controls.minDistance=.01,this.controls.maxDistance=500,this.controls.enablePan=!0,this.controls.enableZoom=!0,this.yRotRate=this.rotateRate/this.width*Math.PI/90,this.xRotRate=this.rotateRate/this.height*Math.PI/180,this.xPanRate=this.panRate/this.width*this.zoomFactor,this.yPanRate=this.panRate/this.height*this.zoomFactor,this.zPanRate=this.zoomRate/this.height},t.prototype.EnableDamping=function(t,e){void 0===e&&(e=.35),this.controls.enableDamping=t,this.controls.dampingFactor=e},t.prototype.MouseDown=function(t,e){this.initX=this.prevX=t,this.initY=this.prevY=e},t.prototype.MouseMove=function(t,e,i){if(void 0===i&&(i=!1),this.ableToMove){var s=t-this.prevX,o=e-this.prevY;i?(this.controls.panLeft(s*this.xPanRate,this.cameraP.matrix),this.controls.panUp(o*this.yPanRate,this.cameraP.matrix)):(this.controls.rotateLeft(s*this.xRotRate),this.controls.rotateUp(o*this.yRotRate)),this.prevX=t,this.prevY=e}},t.prototype.MouseWheel=function(t){this.controls.enableZoom=!0,t*=.1;var e=100*this.cameraP.position.length();this.zoomFactor=e,t>0?(this.cameraP.position.x*=.9,this.cameraP.position.y*=.9,this.cameraP.position.z*=.9):(this.cameraP.position.x*=1.1,this.cameraP.position.y*=1.1,this.cameraP.position.z*=1.1)},t.prototype.ShiftCamera=function(){this.cameraShift++,2===this.cameraShift&&(this.cameraShift=0),0===this.cameraShift?this.GetPerspective():1===this.cameraShift&&this.GetOrthographic()},t.prototype.MouseEventController=function(t){t.CLICK_TYPE===a.uh.DOWN&&this.MouseDown(t.x,t.y),t.CLICK_TYPE===a.uh.DRAG&&this.MouseMove(t.x,t.y,t.pressedShift),t.CLICK_TYPE===a.uh.WHEEL&&this.MouseWheel(t.wheel)},t}(),c=function(){function t(t,e){this.bg=0,this.isActive=!0,this.canvasWrapper=t,this.hostDiv=e,this.Init()}return t.prototype.Init=function(){var t=this.hostDiv.clientWidth,e=this.hostDiv.clientHeight;this.renderer=new r.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(t/e),this.camera=new p(this,t,e),this.scene=new r.xsS,this.renderer.domElement.id="dynamic-spring",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.pointerEvents="none",this.renderer.setSize(t,e),this.hostDiv.appendChild(this.renderer.domElement),this.RenderLoop(this)},t.prototype.RenderLoop=function(t){var e=this;this.isActive&&(requestAnimationFrame((function(){e.RenderLoop(e)})),this.UpdateBinding(),this.camera.controls.update(),this.renderer.render(this.scene,this.camera.camera))},t.prototype.UpdateBinding=function(){console.log("implementation needed")},t.prototype.ResizeCanvas=function(t,e){this.camera.aspect=t/e,this.camera.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)},t.prototype.ResizeEffect=function(t,e){},t.prototype.Remove=function(){for(;this.scene.children.length;)this.scene.remove(this.scene.children[0])},t}(),u=function(t){this.graphicsCoreWrapper=t,this.canvasThree=new c(this,this.graphicsCoreWrapper.app.divHost)},l=function(){function t(t){this.app=t,this.canvasWrapper=new u(this)}return t.prototype.Resize=function(t,e){this.canvasWrapper.canvasThree.ResizeCanvas(t,e)},t.prototype.Dispose=function(){this.canvasWrapper.canvasThree.isActive=!1},t}(),d=function(){function t(t){this.scene=t}return t.prototype.MouseEventController=function(t){this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.MouseEventController(t),t.CLICK_TYPE!==a.uh.LEFT?t.CLICK_TYPE!==a.uh.MIDDLE?t.CLICK_TYPE!==a.uh.DOWN_RIGHT?t.CLICK_TYPE!==a.uh.DOUBLE?t.CLICK_TYPE!==a.uh.MOVE?t.CLICK_TYPE!==a.uh.DRAG?t.CLICK_TYPE!==a.uh.DOWN?t.CLICK_TYPE!==a.uh.UP||this.MouseUpPre(t):this.MouseDownPre(t):this.MouseDragPre(t):this.MouseMovePre(t):this.MouseDoubleClickPre(t):this.MouseRightClickPre(t):this.MouseMiddleClickPre(t):this.MouseLeftClickPre(t)},t.prototype.MouseDown=function(t){},t.prototype.MouseDownPre=function(t){this.scene.MouseDown(t.x,t.y),this.MouseDown(t)},t.prototype.MouseLeftClick=function(t){},t.prototype.MouseLeftClickPre=function(t){this.MouseLeftClick(t)},t.prototype.MouseMiddleClick=function(t){},t.prototype.MouseMiddleClickPre=function(t){this.MouseMiddleClick(t)},t.prototype.MouseRightClick=function(t){},t.prototype.MouseRightClickPre=function(t){this.MouseRightClick(t)},t.prototype.MouseUp=function(t){},t.prototype.MouseUpPre=function(t){this.scene.MouseUp(t.x,t.y),this.MouseUp(t)},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDoubleClickPre=function(t){this.MouseDoubleClick(t)},t.prototype.MouseMove=function(t){},t.prototype.MouseMovePre=function(t){this.scene.MouseMove(t.x,t.y),this.MouseMove(t)},t.prototype.MouseDrag=function(t){},t.prototype.MouseDragPre=function(t){this.scene.MouseDrag(t.x,t.y),this.MouseDrag(t)},t}(),f=function(){function t(t){this.listMesh=[],this.raycaster=new r.iMs,this.m=new r.FM8(0,0),this.scene=t,this.raycaster.params.Points={threshold:.1}}return t.prototype.Raycast=function(t,e,i){this.m.x=t/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth*2-1,this.m.y=-e/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(this.m,this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);var s=this.raycaster.intersectObjects(i);if(s.length>0){var o=s[0];console.log(o.point)}},t.prototype.RaycastPoint=function(t,e,i){this.raycaster.params.Points={threshold:5},this.m.x=t/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth*2-1,this.m.y=-e/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(this.m,this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);var s=this.raycaster.intersectObjects(i);if(s.length>0){var o=s[0];return[o.point.x,o.point.y,o.point.z]}return null},t}(),v=function(){function t(t){this.sceneWrapper=t,this.Init()}return t.prototype.Init=function(){this.hemiLight=new r.vmT(16777215,16777215,.6),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.sceneWrapper.scene.add(this.hemiLight),this.dirLight=new r.Ox3(16777215,1),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(-1,1.75,1),this.dirLight.position.multiplyScalar(30),this.dirLight.castShadow=!0,this.dirLight.shadow.mapSize.width=4096,this.dirLight.shadow.mapSize.height=4096,this.dirLight.shadow.camera.left=-50,this.dirLight.shadow.camera.right=50,this.dirLight.shadow.camera.top=50,this.dirLight.shadow.camera.bottom=-50,this.dirLight.shadow.bias=-1e-4,this.dirLight.shadow.camera.near=.001,this.dirLight.shadow.camera.far=350,this.sceneWrapper.scene.add(this.dirLight)},t.prototype.Dispose=function(){this.dirLight.visible=!1,this.hemiLight.visible=!1,this.sceneWrapper.scene.remove(this.dirLight),this.sceneWrapper.scene.remove(this.hemiLight)},t}(),m=function(){function t(){this.forestdensity=0,this.cost=Number.MAX_VALUE,this.p=a.h9.origin,this.grad=a.h9.origin,this.cn=[]}return t.prototype.CalcGradient=function(){var t,e;t=null==this.cn[0]?this.cn[1].cost-this.cost:null==this.cn[1]?this.cost-this.cn[0].cost:this.cn[1].cost-this.cn[0].cost,e=null==this.cn[2]?this.cn[3].cost-this.cost:null==this.cn[3]?this.cost-this.cn[2].cost:this.cn[3].cost-this.cn[2].cost,this.grad=new a.h9(t,e,0)},t.prototype.Propagate=function(t,e,i,s,o,n,r){for(var h=0;h<8;++h)if(null!=this.cn[h]){var p=a.h9.Distance(this.p,this.cn[h].p),c=this.p.x-this.cn[h].p.x,u=this.p.y-this.cn[h].p.y,l=Math.sqrt(c*c+u*u),d=(this.p.z-this.cn[h].p.z)/l,f=p+(d=d*d*i)*i,v=this.cn[h].forestdensity*e;this.cn[h].p.z<o&&(v+=s),v+=this.cn[h].p.z*r;var m=this.cost+f+v;this.cn[h].cost<=m||(this.cn[h].cost=m,t.push(this.cn[h]))}},t.prototype.GetMesh=function(){var e=[];return e.push(new a.h9(this.p.x-t.pixelWidth,this.p.y-t.pixelWidth,0)),e.push(new a.h9(this.p.x+t.pixelWidth,this.p.y-t.pixelWidth,0)),e.push(new a.h9(this.p.x+t.pixelWidth,this.p.y+t.pixelWidth,0)),e.push(new a.h9(this.p.x-t.pixelWidth,this.p.y+t.pixelWidth,0)),e},t.prototype.getCenterPoint=function(){return this.p},t.pixelWidth=0,t}(),y=function(){function t(t,e,i,s,o,n,r,h,p,c,u){this.lineGradient=[],this.lineTrees=[],this.polylinePath=[],this.landPixels=[],this.rx=0,this.ry=0,this.width=0,this.height=0,this.isColormesh=!0,this.landImage=t,this.rx=t.canvas.width,this.ry=t.canvas.height,this.width=e,this.height=i,m.pixelWidth=this.width/(this.rx-1),this.landPixels=[];var l,d,f=0;for(d=0;d<this.ry;++d){var v=[];for(l=0;l<this.rx;++l){var y=new m,g=this.landImage.getImageData(l,d,1,1);y.p=new a.h9(l*m.pixelWidth,d*m.pixelWidth,.01*g.data[0]),y.forestdensity=.5,v.push(y)}this.landPixels.push(v)}var P=this.NearestPixelAt(s.x,s.y,this.rx,this.ry),C=this.NearestPixelAt(o.x,o.y,this.rx,this.ry);for(d=0;d<this.ry;++d)for(l=0;l<this.rx;++l)l>0&&(this.landPixels[l][d].cn[0]=this.landPixels[l-1][d],d>0&&(this.landPixels[l][d].cn[4]=this.landPixels[l-1][d-1]),d<this.ry-1&&(this.landPixels[l][d].cn[6]=this.landPixels[l-1][d+1])),l<this.rx-1&&(this.landPixels[l][d].cn[1]=this.landPixels[l+1][d],d>0&&(this.landPixels[l][d].cn[5]=this.landPixels[l+1][d-1]),d<this.ry-1&&(this.landPixels[l][d].cn[7]=this.landPixels[l+1][d+1])),d>0&&(this.landPixels[l][d].cn[2]=this.landPixels[l][d-1]),d<this.ry-1&&(this.landPixels[l][d].cn[3]=this.landPixels[l][d+1]);var M=[];M.push(P),P.cost=0;for(var x=4e4;x>0&&0!==M.length;){var E=M.pop();if(!E)break;E.Propagate(M,n,r,h,p,c,u),x--}for(var w=[],I=0;I<this.landPixels.length;++I)for(var D=0;D<this.landPixels[I].length;++D){(z=this.landPixels[I][D]).CalcGradient();var L=new a.h9(z.grad.x,z.grad.y,z.grad.z);a.h9.Normalize(L);var W=new a.h9(z.p.x+.5*L.x,z.p.y+.5*L.y,z.p.z+.5*L.z);w.push([z.p,W])}this.lineGradient=w;var R=[],b=.4*m.pixelWidth,T=C.p;for(f=0;f<5e3;++f){var z;if(R.push(T),(z=this.PixelAt(T.x,T.y,this.rx,this.ry))===P||void 0===z)break;var O=z.grad;O.Unitize(),T.x-=O.x*b,T.y-=O.y*b,T.z=z.p.z}R.length>1&&(this.polylinePath=R)}return t.prototype.getQuadMeshes=function(){for(var t=[],e=0;e<this.landPixels.length;++e){for(var i=[],s=0;s<this.landPixels[e].length;++s){var o=this.landPixels[e][s];i.push(o.GetMesh())}t.push(i)}return t},t.prototype.getCenterPoints=function(){for(var t=[],e=0;e<this.landPixels.length;++e){for(var i=[],s=0;s<this.landPixels[e].length;++s){var o=this.landPixels[e][s];i.push(o.getCenterPoint())}t.push(i)}return t},t.prototype.PixelAt=function(t,e,i,s){var o=Math.floor(t/m.pixelWidth),n=Math.floor(e/m.pixelWidth);if(!(o<0||o>=i||n<0||n>=s))return this.landPixels[o][n]},t.prototype.NearestPixelAt=function(t,e,i,s){var o=Math.floor(t/m.pixelWidth),n=Math.floor(e/m.pixelWidth);return o<0?o=0:o>=i&&(o=i-1),n<0?n=0:n>=s&&(n=s-1),this.landPixels[o][n]},t}(),g=function(){function t(t){this.landboxByImage=t,this.Init()}return t.prototype.Init=function(){var t=new a.h9(-100,-100,0),e=new a.h9(100,100,0);this.landMap=new y(this.landboxByImage.ctx,10,10,t,e,.5,.5,.5,.5,.5,.5),console.log(this.landMap)},t.prototype.getQuadMesh=function(){return this.landMap.getQuadMeshes()},t.prototype.getCenterPoints=function(){return this.landMap.getCenterPoints()},t.prototype.Update=function(){},t}(),P=function(){function t(t,e){this.definition=t,this.img=e;var i=document.createElement("canvas");if(i){this.canvas=i,this.canvas.width=100,this.canvas.height=100,this.canvas.style.background="red",this.canvas.onmousemove=function(t){console.log(t),t.stopPropagation()},this.canvas.onmousedown=function(t){console.log(t),t.stopPropagation()};var s=this.canvas.getContext("2d");if(s){this.ctx=s,this.ctx.drawImage(e,0,0);var o=document.getElementById("main");o&&o.appendChild(this.canvas)}}this.Init()}return t.prototype.Init=function(){this.landboxCore=new g(this),this.visQuadMesh()},t.prototype.visQuadMesh=function(){for(var t=this.landboxCore.getCenterPoints(),e=0;e<t.length;++e)for(var i=0;i<t.length;++i){var s=t[e][i],o=new r._12(m.pixelWidth,m.pixelWidth,1,1);o.rotateX(.5*-Math.PI);var n=new r.Ilk("rgb( "+Math.floor(100*s.z)+" , 50, "+Math.floor(100*s.z)+" )"),h=new r.vBJ({color:n,side:r.ehD}),a=new r.Kj0(o,h);a.position.x=s.x-5,a.position.y=s.z,a.position.z=s.y-5,this.definition.scene.add(a)}},t.prototype.visPoint=function(){for(var t=this.landboxCore.getCenterPoints(),e=new r.ZXM,i=0;i<t.length;++i)for(var s=0;s<t.length;++s){var o=t[i][s],n=new r.Pa4;n.set(o.x-5,o.z,o.y-5),e.vertices.push(n)}this.definition.scene.add(new r.woe(e,new r.UY4({size:1.75*m.pixelWidth,color:44975})))},t.prototype.Update=function(){this.landboxCore&&this.landboxCore.Update()},t}(),C=function(){function t(t){this.damping=.96,this.gravity=-.032,this.timeStep=.316,this.groundZ=-9.26,this.m=new a.h9(0,0,0),this.scene=t;var e=new r.VLJ(10,10);this.scene.add(e),this.Init()}return t.prototype.Init=function(){var t=this,e=new Image;e.src="https://upload.wikimedia.org/wikipedia/commons/5/57/Heightmap.png",e.crossOrigin="Anonymous",e.onload=function(){t.landboxByImage=new P(t,e),console.log("LandboxByImage")}},Object.defineProperty(t.prototype,"capture",{get:function(){return this._capture},set:function(t){},enumerable:!1,configurable:!0}),t.prototype.GetPointForRaycast=function(){},t.prototype.Update=function(){this.landboxByImage&&this.landboxByImage.Update()},t.prototype.MouseMove=function(t,e,i){this.capture&&console.log(this.capture)},t.prototype.MouseDrag=function(t,e){this.capture&&(console.log(t,e),console.log(this.capture))},t.prototype.MouseDown=function(t,e,i){},t.prototype.MouseUp=function(){this.capture=void 0},t.prototype.Dispose=function(){},t}(),M=function(){function t(t){var e=this;this.app=t,this.activeCommandController=new d(this),this.scene=this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.scene,this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.UpdateBinding=function(){e.Update()},this.lightingController=new v(this),this.geometryCommon=new f(this),this.Init()}return t.prototype.Init=function(){this.definition=new C(this.scene)},t.prototype.Update=function(){this.definition.Update()},t.prototype.MouseMove=function(t,e){},t.prototype.MouseDown=function(t,e){},t.prototype.MouseUp=function(t,e){this.definition.MouseUp(),this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.ableToMove=!0},t.prototype.MouseDrag=function(t,e){},t.prototype.Dispose=function(){this.definition.Dispose()},t}(),x=function(){function t(t){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.CLICK_TYPE=a.uh.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.isActive=!0,null!=t&&(this.app=t)}return t.prototype.DeepCopy=function(){var e=new t(this.app);return e.x=this.x,e.y=this.y,e.z=this.z,e.preX=this.preX,e.preY=this.preY,e.preZ=this.preZ,e.pressedAlt=this.pressedAlt,e.pressedShift=this.pressedShift,e.pressedCtrl=this.pressedCtrl,e.isDoubleClick=this.isDoubleClick,e.isDown=this.isDown,e.isMove=this.isMove,e.lat=this.lat,e.long=this.long,e.wheel=this.wheel,e.preWheel=this.preWheel,e.yGLPicking=this.yGLPicking,e.CLICK_TYPE=this.CLICK_TYPE,e.native=this.native,e},t}(),E=function(){function t(t){this.mouseEventDataPre=new x,this.isEnable=!0,this.clickCount=0,this.click=!1,this.prevent=!1,this.delay=250,this.down=!1,this._stopPropagation=!1,this.app=t}return t.prototype.InitNativeMouseEvent=function(t){var e=this;t.onclick=function(t){e.prevent=!1,e.timer=setTimeout((function(){e.prevent||(e.MouseClick(t),t.stopPropagation()),e.prevent=!1}),e.delay)},t.ondblclick=function(t){clearTimeout(e.timer),e.prevent=!0,e.MouseDoubleClick(t)},t.onmousedown=function(t){e.MouseDown(t),t.stopPropagation()},t.onmouseup=function(t){e.MouseUp(t),t.stopPropagation()},t.onmousemove=function(t){e.MouseMove(t),t.stopPropagation()},t.addEventListener("wheel",(function(t){e.MouseWheel(t,t.deltaY),t.stopPropagation()}))},t.prototype.MouseDown=function(t){this.click=!0,this.down=!0;var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.DOWN,e.isDown=!0,this.MouseEvenEmitting(e)},t.prototype.MouseClick=function(t){if(this.click){var e=this.CommonEventBuilder(t);0===t.button?e.CLICK_TYPE=a.uh.LEFT:1===t.button?e.CLICK_TYPE=a.uh.MIDDLE:2===t.button&&(e.CLICK_TYPE=a.uh.RIGHT),this.MouseEvenEmitting(e)}},t.prototype.MouseDoubleClick=function(t){var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.DOUBLE,this.MouseEvenEmitting(e)},t.prototype.MouseDrag=function(t){this.click=!1,this.prevent=!0;var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.DRAG,e.isDown=!0,1===t.buttons?e.CLICK_TYPE=a.uh.DRAG:4===t.buttons?e.CLICK_TYPE=a.uh.DRAG_MIDDLE:2===t.buttons&&(e.CLICK_TYPE=a.uh.DRAG_RIGHT),this.MouseEvenEmitting(e)},t.prototype.MouseMove=function(t){if(this.down)this.MouseDrag(t);else{var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.MOVE,e.isDown=!0,this.prevent=!0,this.MouseEvenEmitting(e)}},t.prototype.MouseUp=function(t){this.down=!1,this.click=!0;var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.UP,e.isDown=!1,this.MouseEvenEmitting(e)},t.prototype.MouseWheel=function(t,e){var i=this.CommonEventBuilder(t);i.wheel=e,i.CLICK_TYPE=a.uh.WHEEL,this.MouseEvenEmitting(i)},t.prototype.CommonEventBuilder=function(t){var e=new x(this.app);return e.preX=this.mouseEventDataPre.x,e.preY=this.mouseEventDataPre.y,e.pressedShift=t.shiftKey,e.pressedAlt=t.altKey,e.pressedCtrl=t.ctrlKey,e.x=t.offsetX,e.y=t.offsetY,e.preWheel=this.mouseEventDataPre.wheel,e.wheel=0,e.native=t,this.mouseEventDataPre=e,this.e=e,e},Object.defineProperty(t.prototype,"stopPropagation",{get:function(){return this._stopPropagation},set:function(t){var e=this;t?this._stopPropagation=t:setTimeout((function(){e._stopPropagation=t}),500)},enumerable:!1,configurable:!0}),t.prototype.MouseEvenEmitting=function(t){this.app.MouseEventController(t)},t}(),w=function(t){this.app=t,this.mouseInteraction=new E(this.app),this.mouseInteraction.InitNativeMouseEvent(this.app.divHost)},I=function(){function t(t){var e=document.getElementById(t);e&&(this.divHost=e),this.asset=new o,this.viewWrapper=new n(this),this.graphicsCoreWrapper=new l(this),this.sceneWrapper=new M(this),this.io=new w(this)}return t.Init=function(e){new t(e)},t.prototype.MouseEventController=function(t){this.sceneWrapper.activeCommandController.MouseEventController(t)},t.prototype.Resize=function(t,e){this.graphicsCoreWrapper.Resize(t,e)},t.prototype.Dispose=function(){this.graphicsCoreWrapper.Dispose(),this.sceneWrapper.Dispose()},t.prototype.Dummy=function(){},t}()}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6717],{9923:(t,e,i)=>{i.d(e,{$b:()=>r.$,CU:()=>n.CU,Ds:()=>d.D,EW:()=>n.EW,Hq:()=>g.Hq,KF:()=>m.KF,Nl:()=>p.Nl,R4:()=>m.R4,Ry:()=>l.Ry,TE:()=>h.TE,UU:()=>c.U,Ux:()=>h.Ux,VT:()=>m.VT,Wf:()=>l.Wf,XL:()=>g.XL,Yr:()=>h.Yr,__:()=>p.__,ew:()=>s.e,g9:()=>l.g9,hL:()=>o.hL,i$:()=>u.i,iC:()=>g.iC,kC:()=>h.kC,lJ:()=>l.lJ,nP:()=>m.nP,oU:()=>p.oU,qA:()=>p.qA,rW:()=>g.rW,sR:()=>m.sR,wX:()=>g.wX,zq:()=>a.zq});var n=i(3160),o=i(3185),r=i(1374),a=i(5190),s=i(744),p=i(4199),l=i(2173),c=i(6649),u=(i(1123),i(6898)),h=i(4415),d=i(8415),g=i(6180),m=i(9533)},6717:(t,e,i)=>{i.r(e),i.d(e,{ImageAnnoApp:()=>_}),i(1374);var n=i(3160),o=(i(1123),i(6180)),r=i(8415),a=(i(9923),i(4199)),s=i(3185),p=i(4722),l=i(5190),c=(i(6649),i(9533)),u=function(){function t(t){this.app=t}return t.prototype.undo=function(t){t===a.y0.Editing||t===a.y0.Effecting?this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickUndo():t===a.y0.Drawing&&this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickUndo()},t.prototype.redo=function(t){t===a.y0.Editing||t===a.y0.Effecting?this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickRedo():t===a.y0.Drawing&&this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickRedo()},t.prototype.rotateCropping=function(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onRotateCropping(t)},t.prototype.zoomCropping=function(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onZoomLevel(t)},t.prototype.setScaleGraphics=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.app.implementation.imageWrapper.tools.drawingTool.app.api.setScaleGraphics(t,e,i)},t.prototype.scaleUpGraphics=function(){this.app.implementation.imageWrapper.tools.drawingTool.app.api.setScaleGraphics(.1,!1)},t.prototype.scaleDownGraphics=function(){this.app.implementation.imageWrapper.tools.drawingTool.app.api.setScaleGraphics(-.1,!1)},t.prototype.activateEffectEnv=function(t){void 0===t&&(t=a.y0.Editing),this.app.implementation.imageWrapper.tools.editingTool.app.api.activateEffectEnv(t)},t.prototype.deactivateEffectEnv=function(){this.app.implementation.imageWrapper.tools.editingTool.app.api.deactivateEffectEnv()},t.prototype.setColor=function(t,e,i){void 0===i&&(i=!0),t===a.y0.Drawing&&this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickSetColor(e,i)},t.prototype.setDrawingMode=function(t){this.app.implementation.imageWrapper.tools.drawingTool.app&&this.app.implementation.imageWrapper.tools.drawingTool.app.pushAction(t)},t.prototype.revertToOriginal=function(t){t===a.y0.Drawing?this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickRevertToOriginal():this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickRevertToOriginal()},t.prototype.shiftShape=function(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickShiftShape(t)},t.prototype.shiftShapeRatio=function(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickShiftShapeRatio(t)},t.prototype.shiftFilterPreset=function(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.shiftFilterPreset(t)},t.prototype.reset=function(){},t.prototype.resizeByWindow=function(){this.app.implementation.imageWrapper.resizeByWindow()},t.prototype.destroy=function(){this.app.implementation.imageWrapper.destroy(),this.app.modelController.destroy();try{this.app.modelController.divHost.removeChild(this.app.modelController.div)}catch(t){}},t.prototype.destroyEditing=function(){this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickPlace(),this.app.implementation.imageWrapper.tools.editingTool.app.destroy()},t.prototype.destroyDrawing=function(){this.app.implementation.imageWrapper.dataSet.paramDrawing.updateDrawingData(this.app.implementation.imageWrapper.tools.drawingTool.app.api.getDataGeometry()),this.app.implementation.imageWrapper.dataSet.paramDrawing.scale=this.app.implementation.imageWrapper.tools.drawingTool.app.api.getScaleFactor(),this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickPlace(),this.app.implementation.imageWrapper.tools.drawingTool.app.destroy()},t.prototype.getData=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.app.implementation.imageWrapper.getData(t,e)},t.prototype.resizeDiv=function(t){t<.3?this.app.implementation.imageWrapper.updateSizeDiv(25):t>.6?this.app.implementation.imageWrapper.updateSizeDiv(90):this.app.implementation.imageWrapper.updateSizeDiv(50)},t.prototype.onClickImportImgByURL=function(t,e){void 0===e&&(e=!1),this.app.implementation.imageWrapper.importImgByURL(t,e)},t.prototype.onClickAppendApp=function(t){this.app.implementation.imageWrapper.appendApp(t)},t.prototype.onClickDownload=function(){this.app.implementation.commonProcess.downloadImage()},t.prototype.onToggleInteractionMode=function(){this.app.implementation.commonProcess.toggleInteractionMode()},t}(),h=function(){function t(t){this.widthOrigin=0,this.heightOrigin=0,this.imageWrapper=t}return t.prototype.updateSizeDiv=function(t){this.imageWrapper.implementation.app.modelController.processorType===a.XN.Img&&(this.divImg.style.width=t+"%")},t.prototype.resetImageSize=function(){this.imgOrigin.width=this.widthOrigin,this.imgOrigin.height=this.heightOrigin},t.prototype.initDivForImgModified=function(t){this.widthOrigin=t.width,this.heightOrigin=t.height,this.imgOrigin.style.maxWidth="100%",this.imgOrigin.style.maxHeight="100%";var e=document.createElement("div");e.style.textAlign="center",e.style.display="flex",e.style.justifyContent="center",this.imageWrapper.implementation.app.modelController.div.append(e);var i=document.createElement("div");i.id="divImg",i.style.width="50%",i.style.display="flex",i.style.justifyContent="center",i.append(this.imgOrigin),this.divImg=i,e.append(this.divImg)},Object.defineProperty(t.prototype,"img",{get:function(){return this._img},set:function(t){this._img=t},enumerable:!1,configurable:!0}),t.prototype.initDivForCSS=function(t){this.widthOrigin=t.width,this.heightOrigin=t.height,this.img.style.objectFit="none";var e=document.createElement("div");e.style.textAlign="center",e.append(t),this.imageWrapper.implementation.app.modelController.div.append(e)},t.prototype.updateImage=function(t){this.divImg.removeChild(this.img),this.img=t,this.img.style.width="100%",this.img.style.height="100%",this.divImg.append(this.img)},t.prototype.clear=function(){this.clearData(),this.clearImgElement()},t.prototype.clearData=function(){this.imageWrapper.dataSet.clearData()},t.prototype.clearImgElement=function(){if(this.img&&this.divImg)try{this.divImg.removeChild(this.img),this.imageWrapper.tools.exImageViewer.destroy()}catch(t){console.debug("fail to remove img and img div")}},t}(),d=function(){function t(){this.x=0,this.y=0,this.width=10,this.height=10,this.scale=1,this.rotation=0,this.isCropGraphics=!0,this.shape=a.oU.Rectangle,this.aspectRatio=a.Nl.Original}return t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,scale:this.scale,rotation:this.rotation,shape:this.shape,aspectRatio:this.aspectRatio,isCropGraphics:this.isCropGraphics}},t.prototype.toString=function(){return JSON.stringify(this.toJSON())},t.prototype.update=function(t,e,i,n,o,r,a,s){this.x=t,this.y=e,this.width=i,this.height=n,this.scale=o,this.rotation=r,this.shape=a,this.aspectRatio=s},t}(),g=function(){function t(){this.scale=1}return t.prototype.updateDrawingData=function(t){this.data=t},t.prototype.toJSON=function(){return{scale:this.scale,geometry:this.data}},t.prototype.updateDrawingCanvas=function(t){this.canvas=t},t.prototype.getDrawingCanvas=function(){return this.canvas},t}(),m=function(){function t(){this.data={typePreset:"normal",filters:[["blur",0],["sepia",0],["contrast",1],["brightness",1],["saturate",1],["hue-rotate",0]],tints:[],inter:1}}return t.prototype.update=function(t){this.data.typePreset=t.typePreset,this.data.filters=t.filters,this.data.tints=t.tints},t.prototype.toJSON=function(){return{typePreset:this.data.typePreset,filters:this.data.filters,tints:this.data.tints,inter:1}},t}(),f=i(4415),y=function(){return y=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},y.apply(this,arguments)},v=function(){function t(t){this.typeImageCompression=a.__.Png,this.init=!0,this.imageWrapper=t,this.typeImageCompression=this.imageWrapper.implementation.app.typeImageCompression,this.initData()}return t.prototype.initData=function(){if(this.paramCropping=new d,this.paramEffecting=new m,this.paramDrawing=new g,this.imageWrapper.implementation.app.param.data&&this.imageWrapper.implementation.app.param.data.drawing){var t=this.imageWrapper.implementation.app.param.data.drawing.geometry.map((function(t){return t.id?t:y(y({},t),{id:(0,f.Fs)()})}));this.paramDrawing.updateDrawingData(t),this.paramDrawing.scale=this.imageWrapper.implementation.app.param.data.drawing.scale}if(this.imageWrapper.implementation.app.param.data&&this.imageWrapper.implementation.app.param.data.effecting){var e=this.imageWrapper.implementation.app.param.data.effecting;this.paramEffecting.update(e)}},t.prototype.resetData=function(){this.paramCropping.width=this.imageWrapper.view.widthOrigin,this.paramCropping.height=this.imageWrapper.view.heightOrigin},t.prototype.updateParamCrop=function(t,e,i,n,o,r,a,s){this.paramCropping.update(t,e,i,n,o,r,a,s)},t.prototype.updateEffecting=function(t){this.paramEffecting.update(t)},t.prototype.updateDrawingData=function(t){this.paramDrawing.updateDrawingData(t)},t.prototype.updateDrawingCanvas=function(t){this.paramDrawing.updateDrawingCanvas(t)},t.prototype.getDrawingCanvas=function(){return this.paramDrawing.getDrawingCanvas()},t.prototype.clearData=function(){this.initData()},t.prototype.updateData=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.dataSync(t,e),{ctx:this.ctx,ctxFiltered:this.ctxFiltered,editing:this.paramCropping.toJSON(),drawing:this.paramDrawing.toJSON(),effecting:this.paramEffecting.toJSON()}},t.prototype.dataSync=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.init&&(this.imageWrapper.implementation.app.modelController.io.emitAction("done-dataSyn@"),this.init=!1);var i=!1;e&&this.imageWrapper.tools.activeApp===a.y0.Drawing&&(i=this.imageWrapper.tools.drawingTool.app.api.needRevertBaseImage());var o=this.imageWrapper.tools.editingTool.app.getData(i);if(this.checkUpdateDrawingData(),t){this.ctx=o.ctx,this.ctxFiltered=o.ctxFiltered;var r=this.imageWrapper.implementation.app.param.environment===a.qA.AGSM?(0,c.VT)():(0,c.KF)(),p=(0,c.nP)();this.ctx=(0,s.eg)(this.ctx,this.paramDrawing.toJSON(),this.paramDrawing.scale,o.params.x,o.params.y,this.imageWrapper.implementation.app.param.environment,r.path2D,p.path2D),this.ctxFiltered=(0,s.eg)(this.ctxFiltered,this.paramDrawing.toJSON(),this.paramDrawing.scale,o.params.x,o.params.y,this.imageWrapper.implementation.app.param.environment,r.path2D,p.path2D),this.paramCropping.isCropGraphics&&(this.ctx=(0,n.EW)(this.ctx,o.params.shape,0,0,o.params.width,o.params.height,!1),this.ctxFiltered=(0,n.EW)(this.ctxFiltered,o.params.shape,0,0,o.params.width,o.params.height,!1))}this.paramCropping.update(o.params.x,o.params.y,o.params.width,o.params.height,o.params.scale,o.params.rotationRadian,o.params.shape,o.params.aspectRatio)},t.prototype.checkUpdateDrawingData=function(){if(this.imageWrapper.tools.activeApp===a.y0.Editing&&0===this.imageWrapper.tools.editingTool.app.api.getGeometryLength());else{var t=this.imageWrapper.tools.drawingTool.app.api.getDataGeometry();t&&(this.updateDrawingData(t),this.paramDrawing.scale=this.imageWrapper.tools.drawingTool.app.api.getScaleFactor())}},t}(),E=function(){function t(t){this.revertToOriginal=!1,this.tools=t}return t.prototype.append=function(){return t=this,e=void 0,o=function(){var t=this;return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(e){return[2,i.e(1149).then(i.bind(i,1149)).then((function(e){var i=e.AppImageDrawing,n=e.InteractionMode;t.tools.divUpdatePre();var o={id:t.tools.imageWrapper.implementation.app.modelController.divHost.id,UI:t.tools.imageWrapper.implementation.app.param.ui,interactionMode:n.Drawing,config:{BASE_URL:""},environment:t.tools.imageWrapper.implementation.app.param.environment,themeUI:t.tools.imageWrapper.implementation.app.modelController.theme.themeData};t.revertToOriginal&&(t.tools.imageWrapper.dataSet.paramDrawing.updateDrawingData([]),t.revertToOriginal=!1);var r=t.tools.imageWrapper.dataSet.paramDrawing.toJSON();t.app=new i(o,r),t.app.updateEffecting(t.tools.imageWrapper.dataSet.paramEffecting.toJSON()),t.app.emitAction=function(e){t.from(e)},t.app.initImageByImg(t.tools.imageWrapper.implementation.imageWrapper.view.img,t.tools.imageWrapper.implementation.imageWrapper.dataSet.paramCropping.toString(),t.tools.imageWrapper.implementation.imageWrapper.view.imgOrigin,t.tools.imageWrapper.implementation.app.param.colorCover)})).catch((function(t){throw console.debug("Stop loading Image Editing App."),console.debug(t),t}))]}))},new((n=void 0)||(n=Promise))((function(i,r){function a(t){try{p(o.next(t))}catch(t){r(t)}}function s(t){try{p(o.throw(t))}catch(t){r(t)}}function p(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}p((o=o.apply(t,e||[])).next())}));var t,e,n,o},t.prototype.from=function(t){var e,i=t.indexOf(this.tools.delimiter),n=i<0?[t]:[t.substring(0,i),t.substring(i+1,t.length)];switch(n[0]){case"set-drawing-mode":case"update-container-size":case"ready":case"select-shapes":case"history":this.tools.imageWrapper.implementation.app.modelController.io.emitAction(t);break;case"destroy":return void this.tools.appDestroy();case"update":this.tools.imageWrapper.dataSet.updateDrawingData(JSON.parse(n[1]));break;case"remove":case"add":case"transform":this.updateGeomData();break;case"update-cropping":e=JSON.parse(n[1]),this.updateCropping(e);break;case"update-effecting":e=JSON.parse(n[1]),this.tools.imageWrapper.dataSet.updateEffecting(e)}},t.prototype.updateCropping=function(t){this.tools.imageWrapper.dataSet.updateParamCrop(t.x,t.y,t.width,t.height,t.scale,t.rotation,t.shape,t.aspectRatio),this.tools.editingTool.app.api.updateFrameParam(t.x,t.y,t.width,t.height,t.scale,t.rotation,t.shape,t.aspectRatio),this.tools.imageWrapper.implementation.app.modelController.io.emitAction("ready@update-div-size")},t.prototype.updateGeomData=function(){var t=this.app.api.getAllGeometries(),e=this.app.api.getScaleFactor();this.tools.imageWrapper.dataSet.paramDrawing.updateDrawingData(t),this.tools.imageWrapper.dataSet.paramDrawing.scale=e,this.tools.imageWrapper.dataSet.updateDrawingCanvas(this.app.api.getCanvas())},t}(),C=function(){function t(t){this.tools=t}return t.prototype.append=function(t){return void 0===t&&(t=a.y0.Editing),e=this,n=void 0,r=function(){var e=this;return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(n){return[2,i.e(2104).then(i.bind(i,2104)).then((function(i){var n=i.AppImageEditing;e.tools.divUpdatePre();var o={id:e.tools.imageWrapper.implementation.app.modelController.divHost.id,UI:e.tools.imageWrapper.implementation.app.param.ui,theme:e.tools.imageWrapper.implementation.app.param.ui?e.tools.imageWrapper.implementation.app.modelController.theme.themeData:void 0,environment:e.tools.imageWrapper.implementation.app.param.environment};e.app=new n(o),e.tools.imageWrapper.implementation.app.param.colorCover&&(e.app.coverColor=e.tools.imageWrapper.implementation.app.param.colorCover),e.app.api.setTypeImageCompression=e.tools.imageWrapper.implementation.app.typeImageCompression,e.app.emitAction=function(t){e.from(t)},t===a.y0.Effecting&&e.app.api.activateEffectEnv("markup");var r=e.tools.imageWrapper.implementation.imageWrapper.dataSet.paramDrawing.toJSON();r.geometry&&(e.app.pushDrawingData(r.geometry),e.app.setScaleGlobal(r.scale)),e.app.initImageByImg(e.tools.imageWrapper.implementation.imageWrapper.view.imgOrigin),e.app.api.initEffect(e.tools.imageWrapper.implementation.imageWrapper.dataSet.paramEffecting.toJSON());var s=e.tools.imageWrapper.implementation.imageWrapper.getParamCrop();e.app.api.initFrame(s.x,s.y,s.width,s.height,s.scale,s.rotation,s.shape,s.aspectRatio)})).catch((function(t){throw console.debug("Stop loading Image Editing App."),console.debug(t),t}))]}))},new((o=void 0)||(o=Promise))((function(t,i){function a(t){try{p(r.next(t))}catch(t){i(t)}}function s(t){try{p(r.throw(t))}catch(t){i(t)}}function p(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(t){t(i)}))).then(a,s)}p((r=r.apply(e,n||[])).next())}));var e,n,o,r},t.prototype.from=function(t){var e,i=t.indexOf(this.tools.delimiter),n=i<0?[t]:[t.substring(0,i),t.substring(i+1,t.length)];switch(n[0]){case"destroy":this.tools.appDestroy();break;case"update-container-size":case"ready":this.tools.imageWrapper.implementation.app.modelController.io.emitAction(t);break;case"post-update":this.tools.imageWrapper.implementation.app.modelController.io.emitAction("post-update@");break;case"filter":e=JSON.parse(n[1]),this.tools.imageWrapper.dataSet.paramEffecting.update(e),this.tools.imageWrapper.implementation.app.modelController.io.emitAction("filter@"+e.typePreset);break;case"history":this.tools.imageWrapper.implementation.app.modelController.io.emitAction(t),this.tools.imageWrapper.dataSet.paramDrawing.updateDrawingData(this.app.api.getDrawing());break;case"update":e=JSON.parse(n[1]),this.update(e);break;case"update-geometry":this.tools.imageWrapper.dataSet.updateDrawingData(JSON.parse(n[1]))}},t.prototype.update=function(t){this.tools.imageWrapper.dataSet.updateEffecting(t.filter);var e=t.crop;if(this.tools.imageWrapper.implementation.app.modelController.processorType===a.XN.Css)this.tools.imageWrapper.implementation.imageWrapper.updateImgCropByCSS(e.x,e.y,e.width,e.height,e.scale,e.rotation,e.shape,e.aspectRatio);else{var i=this.tools.editingTool.app.getImage();this.tools.imageWrapper.implementation.imageWrapper.updateImgCropByImg(i,e.x,e.y,e.width,e.height,e.scale,e.rotation,e.shape,e.aspectRatio)}this.tools.exImageViewer.updateCanvasSize(200,200),this.tools.imageWrapper.updateDrawing()},t}(),w=function(){function t(t){this.app=void 0,this.renderScale=1,this.tools=t}return t.prototype.append=function(t,e,n){return o=this,r=void 0,s=function(){var o=this;return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(r){return[2,i.e(5760).then(i.bind(i,5760)).then((function(i){var r=i.ExpressImageViewer;o.app=new r(t,e,n)})).catch((function(t){throw console.debug("Stop loading Image Effecting App."),console.debug(t),t}))]}))},new((a=void 0)||(a=Promise))((function(t,e){function i(t){try{p(s.next(t))}catch(t){e(t)}}function n(t){try{p(s.throw(t))}catch(t){e(t)}}function p(e){var o;e.done?t(e.value):(o=e.value,o instanceof a?o:new a((function(t){t(o)}))).then(i,n)}p((s=s.apply(o,r||[])).next())}));var o,r,a,s},t.prototype.from=function(t){var e=t.indexOf(this.tools.delimiter),i=e<0?[t]:[t.substring(0,e),t.substring(e+1,t.length)];console.log(e,i)},t.prototype.updateCanvasSize=function(t,e){this.app.updateCanvasSize(t,e)},t.prototype.updateDrawing=function(){this.app},t.prototype.destroy=function(){this.app.destroy()},t}(),b=function(){function t(t){this.delimiter="@",this.activeApp=a.y0.Editing,this.imageWrapper=t,this.drawingTool=new E(this),this.editingTool=new C(this),this.exImageViewer=new w(this)}return t.prototype.appDestroy=function(){this.divUpdatePost()},t.prototype.divUpdatePre=function(){this.imageWrapper.implementation.app.modelController.div.style.display="none"},t.prototype.divUpdatePost=function(){this.imageWrapper.implementation.app.environment===a.qA.Standalone&&(this.imageWrapper.implementation.app.modelController.div.style.display="block"),this.imageWrapper.resizeByWindow()},t.prototype.appendApp=function(t){switch(t.toLowerCase()){case a.y0.Effecting:this.editingTool.append(a.y0.Effecting),this.activeApp=a.y0.Editing;break;case a.y0.Editing:this.editingTool.append(),this.activeApp=a.y0.Editing;break;case a.y0.Drawing:this.drawingTool.append(),this.activeApp=a.y0.Drawing;break;case a.y0.Viewer:this.exImageViewer.append(this.imageWrapper.view.divImg,this.imageWrapper.view.imgOrigin.clientWidth,this.imageWrapper.view.imgOrigin.clientHeight)}},t.prototype.updateEnvironment=function(t){void 0!==this.editingTool.app&&this.editingTool.app.api.shiftEnvironment(t),void 0!==this.drawingTool.app&&this.drawingTool.app.api.shiftEnvironment(t)},t}(),N=function(){function t(t){this.implementation=t,this.tools=new b(this),this.view=new h(this),this.dataSet=new v(this)}return t.prototype.importImgByURL=function(t,e){return void 0===t&&(t="https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg"),void 0===e&&(e=!1),i=this,n=void 0,s=function(){var i,n;return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(r){switch(r.label){case 0:return this.view.clear(),[4,(0,o.oK)(t)];case 1:if(i=r.sent(),this.view.imgOrigin=i,this.view.img=i,this.implementation.app.modelController.processorType===a.XN.Css)this.view.initDivForCSS(this.view.imgOrigin);else{try{this.view.initDivForImgModified(this.view.imgOrigin)}catch(t){return console.log("importImgByURL->initDivForImgModified",t),[2]}this.tools.appendApp(a.y0.Viewer)}return this.dataSet.resetData(),e&&this.tools.editingTool.append(),this.implementation.app.param.data&&this.implementation.app.param.data.editing&&(n=this.implementation.app.param.data.editing,this.dataSet.updateParamCrop(n.x,n.y,n.width,n.height,n.scale,n.rotation,n.shape,n.aspectRatio)),[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function o(t){try{p(s.next(t))}catch(t){e(t)}}function a(t){try{p(s.throw(t))}catch(t){e(t)}}function p(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(o,a)}p((s=s.apply(i,n||[])).next())}));var i,n,r,s},t.prototype.getData=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.tools.imageWrapper.dataSet.updateData(t,e)},t.prototype.getParamCrop=function(){return this.dataSet.paramCropping},t.prototype.updateImgCropByImg=function(t,e,i,n,o,r,a,s,p){this.dataSet.updateParamCrop(e,i,n,o,r,a,s,p),this.view.updateImage(t)},t.prototype.updateImgCropByCSS=function(t,e,i,n,o,r,a,s){this.dataSet.updateParamCrop(t,e,i,n,o,r,a,s),this.view.img.style.objectPosition=-this.dataSet.paramCropping.x+"px "+-this.dataSet.paramCropping.y+"px ";var p="scale("+o+") rotate("+180*r/Math.PI+"deg)";this.view.img.style.transform=p,this.view.img.width=this.dataSet.paramCropping.width,this.view.img.height=this.dataSet.paramCropping.height},t.prototype.updateImgCrop=function(t,e,i,n,o,r,a,s){this.dataSet.updateParamCrop(t,e,i,n,o,r,a,s)},t.prototype.updateEnvironment=function(t){this.tools.updateEnvironment(t)},t.prototype.toJSON=function(){return JSON.stringify(this.dataSet.paramCropping)},t.prototype.resizeByWindow=function(){this.updateDrawing()},t.prototype.updateSizeDiv=function(t){this.view.updateSizeDiv(t),this.tools.exImageViewer.renderScale=t<30?.5:t>80?1.2:1,this.updateDrawing()},t.prototype.updateDrawing=function(){this.tools.exImageViewer.updateDrawing()},t.prototype.appendApp=function(t){this.tools.appendApp(t)},t.prototype.updateViewMode=function(t){void 0===t&&(t=p.An.Drawing),this.tools.exImageViewer.app.updateMode(t)},t.prototype.destroy=function(){this.tools.drawingTool.app.destroy(),this.tools.editingTool.app.destroy()},t}(),D=function(){function t(t){this.implementation=t}return t.prototype.downloadImage=function(){var t=this.implementation.imageWrapper.tools.exImageViewer.app.getCanvas(),e=this.implementation.imageWrapper.tools.editingTool.app.getImage();if(t){var i=new Image;i=e,e=(0,n.z5)(i,t,i.width,i.height)}(0,n.GN)(e)},t.prototype.toggleInteractionMode=function(){this.implementation.imageWrapper.tools.exImageViewer.app&&(this.implementation.imageWrapper.tools.exImageViewer.app.renderer.mode===p.An.InteractiveViewer?this.implementation.imageWrapper.tools.exImageViewer.app.renderer.mode=p.An.ObserveViewer:this.implementation.imageWrapper.tools.exImageViewer.app.renderer.mode=p.An.InteractiveViewer)},t}(),A=function(t){this.app=t,this.commonProcess=new D(this),this.imageWrapper=new N(this)},O=function(){function t(t){this.io=t}return t.prototype.pushAction=function(t){var e=t.indexOf("@"),i=e<0?[t]:[t.substring(0,e),t.substring(e+1,t.length)],n=i[1];switch(i[0]){case"style":break;case"activateApp":this.io.controller.app.api.onClickAppendApp(n);break;case"destroyApp":this.destroyApp(n);break;case p.Us.SetDrawingMode:var o=i[0]+"@";this.setDrawingMode(n,o)}},t.prototype.destroyApp=function(t){switch(t){case a.y0.Drawing:this.io.controller.app.api.destroyDrawing();break;case a.y0.Editing:this.io.controller.app.api.destroyEditing()}},t.prototype.setDrawingMode=function(t,e){switch(t){case l.uA.SELECT:this.io.controller.app.api.setDrawingMode(e+l.uA.SELECT);break;case l.uA.POINT_REGULAR:this.io.controller.app.api.setDrawingMode(e+l.uA.POINT_REGULAR);break;case l.uA.POINT_NUMBERED:this.io.controller.app.api.setDrawingMode(e+l.uA.POINT_NUMBERED);break;case l.uA.POLYLINE_BENDING:this.io.controller.app.api.setDrawingMode(e+l.uA.POLYLINE_BENDING);break;case l.uA.FREEHAND_POLYLINE_BENDING:this.io.controller.app.api.setDrawingMode(e+l.uA.FREEHAND_POLYLINE_BENDING);break;case l.uA.POLYGON:this.io.controller.app.api.setDrawingMode(e+l.uA.POLYGON);break;case l.uA.FREEHAND_POLYGON:this.io.controller.app.api.setDrawingMode(e+l.uA.FREEHAND_POLYGON);break;case l.uA.RECTANGLE:this.io.controller.app.api.setDrawingMode(e+l.uA.RECTANGLE);break;case l.uA.CIRCLE:this.io.controller.app.api.setDrawingMode(e+l.uA.CIRCLE);break;case l.uA.ARROW_SINGLE:this.io.controller.app.api.setDrawingMode(e+l.uA.ARROW_SINGLE);break;case l.uA.ARROW_DOUBLE:this.io.controller.app.api.setDrawingMode(e+l.uA.ARROW_DOUBLE);break;case l.uA.TEXT_LEADERLINE:this.io.controller.app.api.setDrawingMode(e+l.uA.TEXT_LEADERLINE)}},t}(),R=function(){function t(t){this.init=!0,this.controller=t,this.stateProcessing=new O(this)}return t.prototype.emitAction=function(t){this.init&&"post-update"===t.split("@")[0]&&(this.init=!1,this.controller.app.postUpdate(),this.controller.app.param.appDefault===a.y0.Editing?this.controller.app.emitAction("update-container-size@original"):this.controller.app.emitAction("update-container-size@")),this.controller.app.emitAction(t)},t.prototype.pushAction=function(t,e,i){console.log("========================="),console.log("pushAction",t,e,i),this.switchEnvironment(t,i),"markup"===t&&"set-drawing-mode"===e&&this.stateProcessing.pushAction(p.Us.SetDrawingMode+"@"+i),"markup"===t&&e&&this.pushActionMarkup(e,i),"crop"!==t&&"filter"!==t||!e||this.pushActionCropFilter(e,i)},t.prototype.switchEnvironment=function(t,e){("crop"===t&&"markup"===e||"filter"===t&&"markup"===e)&&(0===this.controller.app.implementation.imageWrapper.tools.editingTool.app.api.getGeometryLength()&&(this.controller.app.implementation.imageWrapper.tools.drawingTool.revertToOriginal=!0),this.stateProcessing.pushAction("destroyApp@"+a.y0.Editing),this.stateProcessing.pushAction("activateApp@"+a.y0.Drawing)),"markup"===t&&"crop"===e?(this.stateProcessing.pushAction("destroyApp@"+a.y0.Drawing),this.stateProcessing.pushAction("activateApp@"+a.y0.Editing)):"filter"===t&&"crop"===e&&this.stateProcessing.io.controller.app.api.deactivateEffectEnv(),"filter"===e&&("crop"===t?this.stateProcessing.io.controller.app.api.activateEffectEnv():"markup"===t&&(this.stateProcessing.pushAction("destroyApp@"+a.y0.Drawing),this.stateProcessing.pushAction("activateApp@"+a.y0.Effecting)))},t.prototype.pushActionCropFilter=function(t,e){switch(t){case"undo":this.controller.app.api.undo(a.y0.Editing);break;case"redo":this.controller.app.api.redo(a.y0.Editing);break;case"shape":this.controller.app.api.shiftShape(e);break;case"aspect-ratio":this.controller.app.api.shiftShapeRatio(e);break;case"revert-to-original":this.controller.app.api.revertToOriginal(a.y0.Editing);break;case"set-filter-preset":this.controller.app.api.shiftFilterPreset(e)}},t.prototype.pushActionMarkup=function(t,e){switch(t){case"init-scale":this.controller.app.api.setScaleGraphics(+e,!0,!1);break;case"set-scale":this.controller.app.api.setScaleGraphics(+e);break;case"offset-scale":this.controller.app.api.setScaleGraphics(+e,!1);break;case"undo":this.controller.app.api.undo(a.y0.Drawing);break;case"redo":this.controller.app.api.redo(a.y0.Drawing);break;case"init-color":this.controller.app.api.setColor(a.y0.Drawing,e,!1);break;case"set-color":this.controller.app.api.setColor(a.y0.Drawing,e);break;case"revert-to-original":this.controller.app.api.revertToOriginal(a.y0.Drawing)}},t}(),I=function(t){this.themeData={background:"radial-gradient(rgb(235, 235, 235), rgba(200, 200, 200, 1))",top:{iconFill:"rgb(255, 255, 255)",background:"rgb(34, 34, 34)",marginBottom:"100px",padding:"25px",height:"90px"},bottom:{background:"radial-gradient(rgb(235, 235, 235), rgba(200, 200, 200, 1))"}},this.modelController=t},T=function(){function t(t){this.modelController=t,this.init()}return t.prototype.init=function(){var t=this,e=document.createElement("div");e.id="expree-image-ui",this.modelController.div.append(e);var i=document.createElement("input");i.style.color="#ffffff",i.style.background="rgba(255, 255, 255,0.1)",i.style.border="0px",i.style.margin="2px",i.setAttribute("type","text"),i.setAttribute("value","https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png"),e.append(i),i.addEventListener("keyup",(function(e){13===e.keyCode&&(t.modelController.app.environment===a.qA.Standalone&&e.preventDefault(),t.modelController.app.api.onClickImportImgByURL(i.value))}));var n="#ffffff",o=document.createElement("div");o.textContent="XGraphics Express Image App",o.style.fontSize="14px",o.style.fontWeight="400",o.style.color="#000000",o.style.padding="10px",e.append(o);var s=document.createElement("div");s.textContent="Editing",s.style.fontSize="12px",s.style.fontWeight="400",s.style.color=n,s.style.width="220px",s.style.padding="5px",s.style.marginBottom="10px",s.onclick=function(){t.modelController.app.api.onClickAppendApp("editing")},s.onmouseenter=function(){s.style.background="#333333"},s.onmouseleave=function(){s.style.background="rgba(0, 0, 0, 0)"},e.append(s);var p=document.createElement("div");p.textContent="Effecting",p.style.fontSize="12px",p.style.fontWeight="400",p.style.color=n,p.style.width="220px",p.style.padding="5px",p.style.marginBottom="10px",p.onclick=function(){t.modelController.app.api.onClickAppendApp("effecting")},p.onmouseenter=function(){p.style.background="#333333"},p.onmouseleave=function(){p.style.background="rgba(0, 0, 0, 0)"},e.append(p);var l=document.createElement("div");l.textContent="Drawing",l.style.fontSize="12px",l.style.fontWeight="400",l.style.color=n,l.style.width="220px",l.style.padding="5px",l.style.marginBottom="10px",l.onclick=function(){t.modelController.app.api.onClickAppendApp("drawing")},l.onmouseenter=function(){l.style.background="#333333"},l.onmouseleave=function(){l.style.background="rgba(0, 0, 0, 0)"},e.append(l);var c=document.createElement("input");c.type="range",c.min="0.1",c.max="1.0",c.step="0.01",c.value="0.5",c.oninput=function(){t.modelController.app.api.resizeDiv(+c.value)},e.append(c);var u=this.modelController.theme.themeData.top.iconFill,h=(0,r.s)((function(){t.modelController.app.api.onToggleInteractionMode()}),'\n            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="'+u+'" viewBox="0 0 12 32">\n            <path fill-rule="evenodd" d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5z"/>\n            </svg>\n            ');h.style.display="block",h.style.marginTop="15px",h.style.transform="scale(2)";var d=h.firstElementChild;d.onmouseenter=function(){d.style.fill="#333333"},d.onmouseleave=function(){d.style.fill="rgba(255, 255, 255, 1)"},e.append(h);var g=(0,r.s)((function(){t.modelController.app.api.onClickDownload()}),'\n            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="'+u+'" viewBox="0 0 12 32">\n            <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 6.854-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5a.5.5 0 0 1 1 0v3.793l1.146-1.147a.5.5 0 0 1 .708.708z"/>\n            </svg>\n            ');g.style.display="block",g.style.marginTop="15px",g.style.transform="scale(2)";var m=g.firstElementChild;m.onmouseenter=function(){m.style.fill="#333333"},m.onmouseleave=function(){m.style.fill="rgba(255, 255, 255, 1)"},e.append(g)},t}(),S=function(){function t(t){this.processorType=a.XN.Img,this.app=t,this.theme=new I(this);var e=document.getElementById(this.app.param.id),i=document.createElement("div");e&&i&&(this.divHost=e,this.div=i,this.div.id="express-image-wrapper",this.app.environment===a.qA.Standalone&&(this.div.style.position="relative",this.div.style.width="100vw",this.div.style.height="100vh"),this.divHost.append(this.div)),this.init()}return t.prototype.init=function(){this.io=new R(this),this.app.param.ui&&(this.ui=new T(this))},t.prototype.destroy=function(){},t}(),x=function(){function t(t){this.debugMode=!0,this._environment=a.qA.SMX,console.log("init....."),console.log(t),(0,c.jY)(),this.param=t,this.typeImageCompression=t.typeImageCompression||a.__.Jpeg,t.emitAction&&this.bindActionEmitting(t.emitAction),this.initApp()}return t.prototype.initApp=function(){var t=this;this.api=new u(this),this.param.environment&&(this.environment=this.param.environment),this.modelController=new S(this),this.implementation=new A(this),this.param.url&&this.importImgByURL(this.param.url),document.body.addEventListener("keydown",(function(e){e.shiftKey&&"KeyD"===e.key||(e.shiftKey&&"{"===e.key?t.api.undo(""):e.shiftKey&&"}"===e.key?t.api.redo(""):e.shiftKey&&"+"===e.key?t.api.rotateCropping(-10):e.shiftKey&&"_"===e.key?t.api.rotateCropping(10):e.shiftKey&&")"===e.key?t.api.zoomCropping(-.13):e.shiftKey&&"("===e.key?t.api.zoomCropping(.13):e.shiftKey&&"!"===e.key?t.api.scaleDownGraphics():e.shiftKey&&"@"===e.key&&t.api.scaleUpGraphics()),"s"===e.key&&(t.environment=t.environment===a.qA.AGSM?a.qA.SMX:a.qA.AGSM)}))},Object.defineProperty(t.prototype,"environment",{get:function(){return this._environment},set:function(t){this._environment=t,this.param.environment=t,this.implementation.imageWrapper.updateEnvironment(t)},enumerable:!1,configurable:!0}),t.prototype.postUpdate=function(){console.log("post update...",this.param.appDefault),this.param.appDefault===a.y0.Effecting?this.pushAction("crop","tab-change","filter"):this.param.appDefault===a.y0.Drawing?this.pushAction("crop","tab-change","markup"):(this.param.appDefault,a.y0.Editing)},t.prototype.pushAction=function(t,e,i){this.modelController.io.pushAction(t,e,i)},t.prototype.bindActionEmitting=function(t){this.emitAction=t},t.prototype.getData=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.api.getData(t,e)},t.prototype.destroy=function(){this.api.destroy()},t.prototype.importImgByURL=function(t,e){return void 0===t&&(t="https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg"),void 0===e&&(e=!1),i=this,n=void 0,r=function(){return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(i){switch(i.label){case 0:return[4,this.api.onClickImportImgByURL(t,e)];case 1:return[2,i.sent()]}}))},new((o=void 0)||(o=Promise))((function(t,e){function a(t){try{p(r.next(t))}catch(t){e(t)}}function s(t){try{p(r.throw(t))}catch(t){e(t)}}function p(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(t){t(i)}))).then(a,s)}p((r=r.apply(i,n||[])).next())}));var i,n,o,r},t}(),L=i(906),P=function(){function t(t,e){this.imageAnnoApp=t,this.hostDiv=e,this.main=document.createElement("div"),this.main.id="imageMain",this.main.style.zIndex="10",this.main.style.backgroundColor="#777",this.main.style.width="100%",this.main.style.height="100%",this.main.style.position="absolute",this.hostDiv.appendChild(this.main),this.divContainer=document.createElement("div"),this.divContainer.id="ng",this.main.appendChild(this.divContainer),this.divTop=document.createElement("div"),this.divTop.id="ui",this.divTop.style.zIndex="10",this.divTop.style.backgroundColor="#000",this.divTop.style.width="100%",this.divTop.style.height="100px",this.divTop.style.position="absolute",this.main.appendChild(this.divTop),this.appendButton()}return t.prototype.appendButton=function(){var t=this,e=document.createElement("div");e.textContent="RPoint",e.style.fontSize="12px",e.style.fontWeight="400",e.style.color="#fff",e.style.width="220px",e.style.padding="5px",e.style.marginBottom="10px",e.onclick=function(){t.imageAnnoApp.app.pushAction("markup","set-drawing-mode",L.AG.POINT_REGULAR)},this.divTop.appendChild(e),(e=document.createElement("div")).textContent="Rect",e.style.fontSize="12px",e.style.fontWeight="400",e.style.color="#fff",e.style.width="220px",e.style.padding="5px",e.style.marginBottom="10px",e.onclick=function(){t.imageAnnoApp.app.pushAction("markup","set-drawing-mode",L.AG.RECTANGLE)},this.divTop.appendChild(e)},t}(),_=function(){function t(t){this.emit=function(t){console.log(t)},this.host=document.getElementById(t),this.host.style.backgroundColor="#999",this.imageUI=new P(this,this.host),this.init(this.imageUI.divContainer.id)}return t.init=function(e){new t(e)},t.prototype.init=function(t){this.app=new x({id:t,ui:!1,appDefault:a.y0.Editing,data:{},emitAction:this.emit}),this.app.importImgByURL("https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram.jpg",!0)},t}()},6898:(t,e,i)=>{i.d(e,{i:()=>n});var n=function(){function t(){this.history=[],this.currentIndex=-1}return t.prototype.reset=function(){this.history=[],this.currentIndex=-1},t.prototype.push=function(t){this.currentIndex<this.history.length-1&&this.history.splice(this.currentIndex+1,this.history.length),this.history.push(t),this.currentIndex=this.history.length-1},t.prototype.undo=function(){if(0!==this.currentIndex)return this.currentIndex--,this.history[this.currentIndex]},t.prototype.redo=function(){return this.currentIndex++,this.currentIndex=this.currentIndex<this.history.length?this.currentIndex:this.history.length-1,this.history[this.currentIndex]},t.prototype.getIndexCurrent=function(){return this.currentIndex},t.prototype.getLengthHistory=function(){return this.history.length},t.prototype.getCurrentState=function(){return{currentIndex:this.getIndexCurrent(),historyNum:this.getLengthHistory()}},t}()},6180:(t,e,i)=>{i.d(e,{AJ:()=>h,Hq:()=>u,Sm:()=>o,Wo:()=>a,XL:()=>l,Z3:()=>s,iC:()=>r,kt:()=>n,oK:()=>d,rW:()=>p,wX:()=>c});var n=function(){return"rgb("+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random())+")"},o=function(t,e,i,n,o,r){return Math.sqrt((t-n)*(t-n)+(e-o)*(e-o)+(i-r)*(i-r))},r=function(t,e,i){return"#"+[Math.round(t),Math.round(e),Math.round(i)].map((function(t){var e=t.toString(16);return 1===e.length?"0"+e:e})).join("")},a=function(t,e,i){var n;void 0===e&&(e=0),void 0===i&&(i=!1),e=e||"1.0",t=t.replace("#","");var o=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16);if(i){var s=.58*o+.17*r+.8*a;n="rgba("+s+","+s+","+s+","+e+")"}else n="rgba("+o+","+r+","+a+","+e+")";return n},s=function(t,e){var i=t.split(",");return i[0]+","+i[1]+","+i[2]+","+e+")"},p=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1),t=t.replace("#","");var n=parseInt(t.substring(0,2),16),o=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16);if(i){var a=.58*n+.17*o+.8*r;return[a,a,a,e]}return[n,o,r,e]},l=function(t,e,i){t/=255,e/=255,i/=255;var n=Math.max(t,e,i),o=Math.min(t,e,i),r=(n+o)/2,a=(n+o)/2,s=(n+o)/2;if(n===o)r=a=0;else{var p=n-o;switch(a=s>.5?p/(2-n-o):p/(n+o),n){case t:r=(e-i)/p+(e<i?6:0);break;case e:r=(i-t)/p+2;break;case i:r=(t-e)/p+4}r/=6}return[r,a,s]},c=function(t,e,i){var n,o,r;if(0===e)n=o=r=i;else{var a=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},s=i<.5?i*(1+e):i+e-i*e,p=2*i-s;n=a(p,s,t+1/3),o=a(p,s,t),r=a(p,s,t-1/3)}return[Math.max(0,Math.min(Math.round(255*n),255)),Math.max(0,Math.min(Math.round(255*o),255)),Math.max(0,Math.min(Math.round(255*r),255))]},u=function(t,e,i){void 0===i&&(i=.5);for(var n=[],o=0;o<t.length;++o){var r=t[o]+(e[o]-t[o])*i;n.push(r)}return n},h=function(t,e,i,n){var o=l(t[0],t[1],t[2]);o[0]+=e,o[1]+=i,o[1]<0&&(o[1]=0),o[2]+=n;var r=c(o[0],o[1],o[2]);return[r[0],r[1],r[2],t[3]]},d=function(t){return e=void 0,i=void 0,o=function(){return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(e){return[2,new Promise((function(e,i){var n=new Image;n.crossOrigin="anonymous",n.addEventListener("load",(function(){return e(n)})),n.addEventListener("error",(function(t){return i(t)})),n.src=t}))]}))},new((n=void 0)||(n=Promise))((function(t,r){function a(t){try{p(o.next(t))}catch(t){r(t)}}function s(t){try{p(o.throw(t))}catch(t){r(t)}}function p(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(a,s)}p((o=o.apply(e,i||[])).next())}));var e,i,n,o}},1123:(t,e,i)=>{!function(){function t(t,e,i){void 0===e&&(e=3),void 0===i&&(i=1),this.ncols=t,i<1&&(i=1),this.k=e,this.minDiff=i,this.init()}t.prototype.init=function(){for(var t=r(10),e=[],i=[];e.length<this.k;){for(var o=Math.floor(t()*this.ncols.length),a=!1,s=0;s<i.length;s++)if(o===i[s]){a=!0;break}if(!a){i.push(o);var p=new n(this.ncols[o]);p.push(this.ncols[o]),e.push(p)}}for(var l=0;;){if(l++>1e4){console.debug("break");break}var c=[];for(s=0;s<this.k;s++)c.push([]);for(var u=0;u<this.ncols.length;u++){var h=this.ncols[u],d=Number.MAX_VALUE;for(o=0,s=0;s<this.k;s++){var g=this.euclidean(h,e[s].key);g<d&&(d=g,o=s)}c[o].push(h)}var m=0;for(s=0;s<this.k;s++){var f=e[s].key,y=this.calculateCenter(c[s],3),v=new n(y);v.values=c[s];var E=this.euclidean(f,y);isNaN(E)||(e[s]=v,m=m>E?m:E)}if(m<this.minDiff)break}this.clusters=e},t.prototype.euclidean=function(t,e){var i=Math.pow(t.r-e.r,2)+Math.pow(t.g-e.g,2)+Math.pow(t.b-e.b,2);return Math.sqrt(i)},t.prototype.calculateCenter=function(t,e){for(var i=new o(0,0,0),n=0;n<t.length;n++)i.r+=t[n].r,i.g+=t[n].g,i.b+=t[n].b;return i.r/=t.length,i.g/=t.length,i.b/=t.length,i}}();var n=function(){function t(t){this.values=[],this.key=t}return t.prototype.push=function(t){this.values.push(t)},t.prototype.getKey=function(){return[this.key.r,this.key.g,this.key.b]},t}(),o=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.r=0,this.g=0,this.b=0,this.r=t,this.g=e,this.b=i},r=function(t){return void 0===t&&(t=performance.now()),function(){return(t=(9301*t+49297)%233280)/233280}}},6649:(t,e,i)=>{i.d(e,{U:()=>n});var n={normal:{filters:[["blur",0],["sepia",0],["contrast",1],["brightness",1],["saturate",1],["hue-rotate",0]],tints:[]},film1:{filters:[["contrast",.8],["saturate",1.3],["hue-rotate",-10]],tints:[{bg0:[204,163,76,.15],mode:"soft-light"},{bg0:[68,126,90,.2],mode:"color-dodge"}]},film2:{filters:[["contrast",1.05],["brightness",1],["saturate",1.2],["hue-rotate",-12]],tints:[{bg0:[228,133,111,.25],mode:"screen"},{bg0:[0,95,102,.25],mode:"color-dodge"}]},film3:{filters:[["sepia",.1],["contrast",.95],["brightness",1.15],["saturate",1.1],["hue-rotate",-5]],tints:[{bg0:[1,68,93,.35],mode:"lighten"},{bg0:[161,159,80,.2],mode:"darken"}]},film4:{filters:[["sepia",.1],["brightness",1.1],["saturate",1.25],["hue-rotate",-2]],tints:[{bg0:[0,60,170,.3],mode:"screen"},{bg0:[104,125,200,.25],mode:"overlay"}]},highSaturation:{filters:[["sepia",.1],["contrast",.9],["brightness",1.15],["saturate",1.5]],tints:[{in:.7,out:1,bg0:[0,0,0,0],bg1:[0,0,0,.15],mode:"multiply"}]},bw1:{filters:[["contrast",1.1],["brightness",1.05],["saturate",0]],tints:[{bg0:[40,154,191,.12],mode:"color"}]},bw2:{filters:[["contrast",1.1],["brightness",1.05],["saturate",0]],tints:[{bg0:[55,88,180,.15],mode:"color"}]},sepia:{filters:[["contrast",1.1],["brightness",1.05],["saturate",0]],tints:[{bg0:[255,191,66,.5],mode:"soft-light"},{bg0:[196,100,236,.1],mode:"hard-light"}]}}},2173:(t,e,i)=>{i.d(e,{Ry:()=>h,Wf:()=>l,g9:()=>u,lJ:()=>a});var n=i(6649),o=i(4415),r=i(4199),a=function(t,e,i,n){return void 0===n&&(n=1),void 0===i||(t.filter=s(i,n),t.drawImage(e,0,0),t.filter="none"),t},s=function(t,e){void 0===e&&(e=1);for(var i="",n=0;n<t.length;++n)i+=p(t[n][0],t[n][1],e);return i},p=function(t,e,i){switch(void 0===i&&(i=1),t){case r.x$.blur:return"blur("+(0,o.m1)(0,e,i)+"px)";case r.x$.sepia:return"sepia("+(0,o.m1)(0,e,i)+")";case r.x$.contrast:return"contrast("+(0,o.m1)(1,e,i)+")";case r.x$.brightness:return"brightness("+(0,o.m1)(1,e,i)+")";case r.x$.saturate:return"saturate("+(0,o.m1)(1,e,i)+")";case r.x$.hueRotate:return"hue-rotate("+(0,o.m1)(0,e,i)+"deg)";default:return""}},l=function(t,e,i,n,o,r){if(void 0===i&&(i=.5),void 0===n&&(n=.5),void 0===o&&(o=1),void 0===r&&(r=1),void 0!==e)for(var a=0;a<e.length;++a){var s=e[a];s&&(s.bg1?c(t,s.mode,!0,s.bg0,r,s.bg1,s.in,s.out,i,n,o):c(t,s.mode,!1,s.bg0,r))}},c=function(t,e,i,n,r,a,s,p,l,c,u){void 0===e&&(e="normal"),void 0===i&&(i=!0),void 0===n&&(n=[]),void 0===r&&(r=1),void 0===a&&(a=[]),void 0===s&&(s=0),void 0===p&&(p=1),void 0===l&&(l=.5),void 0===c&&(c=.5),void 0===u&&(u=1),t.globalCompositeOperation=e,t.setTransform(t.canvas.width,0,0,t.canvas.height,0,0);var h=.65*u;if(i){var d=t.createRadialGradient(l,c,s*h,l,c,p*h);d.addColorStop(0,"rgba("+n[0]+","+n[1]+","+n[2]+","+(0,o.m1)(0,n[3],r)+")"),d.addColorStop(1,"rgba("+a[0]+","+a[1]+","+a[2]+","+(0,o.m1)(0,a[3],r)+")"),t.fillStyle=d}else t.fillStyle="rgba("+n[0]+","+n[1]+","+n[2]+","+(0,o.m1)(0,n[3],r)+")";return t.fillRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation="source-over",t},u=function(t){var e=[];for(var i in n.U)e.push(i);var o=1/e.length;return e[Math.floor(t/o)]},h=function(t){void 0===t&&(t="normal");var e={filters:[["blur",0],["sepia",0],["contrast",1],["brightness",1],["saturate",1],["hue-rotate",0]]};if("normal"===t)return e;var i=n.U[t];if(void 0!==i&&void 0!==i.filters)for(var o=0;o<i.filters.length;++o)for(var r=i.filters[o][0],a=0;a<e.filters.length;++a)if(e.filters[a][0]===r){e.filters[a][1]=i.filters[o][1];break}return e.tints=i.tints,e}},744:(t,e,i)=>{var n,o;i.d(e,{$:()=>n,e:()=>o}),function(t){t.Black="#000000",t.White="#ffffff",t.Aqua="#00ffff",t.Azure="#f0ffff",t.Beige="#f5f5dc",t.Blue="#0000ff",t.Brown="#a52a2a",t.Cyan="#00ffff",t.DarkBlue="#00008b",t.DarkCyan="#008b8b",t.DarkGrey="#a9a9a9",t.DarkGreen="#006400",t.DarKhaki="#bdb76b",t.DarkMagenta="#8b008b",t.DarkOliveGreen="#556b2f",t.DarkOrange="#ff8c00",t.DarkOrchid="#9932cc",t.DarkRed="#8b0000",t.DarkSalmon="#e9967a",t.DarkViolet="#9400d3",t.Fuchsia="#ff00ff",t.Gold="#ffd700",t.Green="#008000",t.Indigo="#4b0082",t.Khaki="#f0e68c",t.LightBlue="#add8e6",t.LightCyan="#e0ffff",t.LightGreen="#90ee90",t.LightGrey="#d3d3d3",t.LightPink="#ffb6c1",t.LightYellow="#ffffe0",t.Lime="#00ff00",t.Magenta="#ff00ff",t.Maroon="#800000",t.Navy="#000080",t.Olive="#808000",t.Orange="#ffa500",t.Pink="#ffc0cb",t.Purple="#800080",t.Red="#ff0000",t.Silver="#c0c0c0",t.Yellow="#ffff00"}(n||(n={})),function(t){t.SourceOver="source-over",t.SourceIn="source-in",t.SourceOut="source-out",t.SourceAtop="source-atop",t.Copy="copy",t.DestinationOver="destination-over",t.DestinationIn="destination-in",t.DestinationOut="destination-out",t.DestinationAtop="destination-atop",t.Lighter="lighter",t.Multiply="multiply",t.Screen="screen",t.Overlay="overlay",t.Darken="darken",t.Lighten="lighten",t.ColorDodge="color-dodge",t.ColorBurn="color-burn",t.HardLight="hard-light",t.SoftLight="soft-light",t.Difference="difference",t.Exclusion="exclusion",t.Hue="hue",t.Saturation="saturation",t.Color="color",t.Luminosity="luminosity"}(o||(o={}))},4722:(t,e,i)=>{var n,o,r,a,s,p,l,c,u,h,d,g,m,f,y,v,E,C,w,b,N;i.d(e,{An:()=>m,Aq:()=>f,BQ:()=>n,CF:()=>r,Nq:()=>C,Nv:()=>u,PH:()=>N,Us:()=>a,cg:()=>s,ct:()=>g,g:()=>c,g4:()=>l,hO:()=>p,iu:()=>w,oW:()=>d,rO:()=>y,uD:()=>v,wn:()=>E,xX:()=>h}),function(t){t.GuidedTour="guidedTour",t.AnnotationMap="annotationMap",t.ExpressMapping="expressMapping",t.ExpressCharting="expressCharting",t.ExpressDrawing="expressDrawing",t.AnnotationGlobe="annotationGlobe",t.AnnotationTerrain="annotationTerrain",t.VisualizationBin="visualizationBin",t.Visualization="visualization",t.VisualizationMapping="visualizationMapping",t.VisualizationCharting="visualizationCharting",t.ImageEditor="imageEditor",t.Viewer3D="viewer3D",t.AnnotationScene="annotationScene",t.WallPaper2D="wallPaper2D",t.Annotation3D="annotation3D",t.WallPaper3D="wallPaper3D",t.DrawingTool2D="drawingTool2D",t.DrawingTool3D="drawingTool3D"}(n||(n={})),function(t){t.Mercator="mercator",t.SphericalProjection="sphericalProjection",t.Orthographic="orthographic",t.ConicEqualArea="conicEqualArea",t.ConicEqualDistance="conicEqualDistance",t.EqualEarth="equalEarth",t.EquiRectangular="equiRectangular",t.Gnomonic="gnomonic",t.ConicConformal="conicConformal",t.StereoGraphics="stereoGraphics",t.AlbersUSA="albersUSA"}(o||(o={})),function(t){t.Default="default",t.Auto="auto",t.Crosshair="crosshair",t.Move="move",t.Pointer="pointer",t.Text="text",t.Wait="wait",t.Help="help",t.Progress="progress",t.NWSEresize="nwse-resize",t.NESWresize="nesw-resize",t.NSresize="ns-resize",t.EWresize="ew-resize"}(r||(r={})),function(t){t.Select="select",t.Undo="undo",t.Redo="redo",t.Deselect="deselect",t.PointerOut="pointerOut",t.SetDrawingMode="setDrawingMode",t.ToggleMapfilter="toggleMapfilter",t.ToggleQuickActions="toggleQuickActions",t.ChangeTheme="changeTheme",t.ToggleDrawingTooltips="toggleDrawingTooltips",t.ToggleGrid="toggleGrid",t.ToggleMeasure="toggleMeasure",t.ShiftUnit="shiftUnit",t.DumpIconsBase64s="dumpIconsBase64s",t.AddIconBase64="addIconBase64",t.SelectIconBase64="selectIconBase64",t.ActiveColorId="activeColorId",t.InclusiveSelect="inclusiveSelect",t.InclusiveDeselect="inclusiveDeselect",t.ExclusiveSelect="exclusiveSelect",t.ExclusiveDeselect="exclusiveDeselect",t.ReorderNumberedPoints="reorderNumberedPoints",t.ReorderNumberedTourPoints="reorderNumberedTourPoints",t.Remove="remove",t.RemoveSelected="removeSelected",t.Update="update",t.Unhighlight="unhighlight",t.Hover="hover",t.Unhover="unhover",t.Enter="enter",t.Leave="leave",t.Show="show",t.Hide="hide",t.HidePopup="hidePopup",t.ShowPopup="showPopup",t.Dump="dump",t.InitGhost="initGhost",t.EnterGhost="enterGhost",t.LeaveGhost="leaveGhost",t.ShowGhostPopup="showGhostPopup",t.HideGhostPopup="hideGhostPopup",t.AddGhost="addGhost",t.Add="add",t.Transform="transform",t.RemoveGhost="removeGhost",t.ShowText="showText",t.HideText="hideText",t.StartEditingText="startEditingText",t.EndEditingText="endEditingText",t.PolylineConstraintLength="polylineConstraintLength",t.PolylineConstraintLengthPercentage="polylineConstraintLengthPercentage",t.DisableExcept="disableExcept",t.Highlight="highlight",t.Style="style",t.ClusteringPoint="clusteringPoint",t.TEMPLoadImage="loadImage"}(a||(a={})),function(t){t.Round="round",t.Butt="butt",t.Square="square"}(s||(s={})),function(t){t.None="none",t.DeepLearning="deepLearning"}(p||(p={})),function(t){t.Svg="svg",t.Canvas="canvas",t.Three="three",t.webgl="webgl",t.Webgl2="webgl2",t.WebGPU="webGPU"}(l||(l={})),function(t){t.Regular="regular",t.DouglasPeucker="douglasPeucker"}(c||(c={})),function(t){t.None="none",t.Zoom="zoom",t.Collision="collision",t.Agent="agent"}(u||(u={})),function(t){t.None="none",t.Zoom="zoom",t.Collision="collision",t.Agent="agent",t.Grid="grid"}(h||(h={})),function(t){t.RpointA="rPointA",t.RpointB="rPointB",t.Image="image"}(d||(d={})),function(t){t.Production="production",t.Development="development",t.Local="local"}(g||(g={})),function(t){t.Drawing="drawing",t.InteractiveViewer="interactiveViewer",t.ObserveViewer="observeViewer"}(m||(m={})),function(t){t.Opera="opera",t.Chrome="chrome",t.Safari="safari",t.Firefox="firefox",t.Ie="ie",t.Edge="edge",t.Unknown="unknown"}(f||(f={})),function(t){t.Up="up",t.Down="down"}(y||(y={})),function(t){t.Left="left",t.Middle="middle",t.Right="right",t.Wheel="wheel",t.Drag="drag",t.DragLeft="dragLeft",t.DragMiddle="dragMiddle",t.DragRight="dragRight",t.Move="move",t.Double="double",t.Up="up",t.Down="down",t.DownMiddle="downMiddle",t.DownRight="downRight"}(v||(v={})),function(t){t.Start="start",t.End="end",t.Move="move",t.Cancel="cancel"}(E||(E={})),function(t){t.Native="native",t.JSAPI4X="JSAPI4X"}(C||(C={})),function(t){t.Curve="curve",t.CurveClosed="curveClosed",t.Line="line",t.Polyline="polyline",t.PolylineBending="polylineBending",t.Polygon="polygon",t.PolygonGraph="polygonGraph",t.PolylineGon="polylineGon",t.Smooth="smooth",t.SmartDrawing="smartDrawing"}(w||(w={})),function(t){t.Wrap="Wrap",t.LineBreak="lineBreak",t.Normal="normal"}(b||(b={})),function(t){t.Start="start",t.End="end",t.Left="left",t.Center="center",t.Right="right"}(N||(N={}))},4199:(t,e,i)=>{var n,o,r,a,s,p,l;i.d(e,{Nl:()=>l,XN:()=>s,__:()=>a,oU:()=>p,qA:()=>n,x$:()=>o,y0:()=>r}),function(t){t.AGSM="agsm",t.SMX="smx",t.Standalone="standalone"}(n||(n={})),function(t){t.blur="blur",t.sepia="sepia",t.contrast="contrast",t.brightness="brightness",t.saturate="saturate",t.hueRotate="hue-rotate",t.none="none"}(o||(o={})),function(t){t.Editing="editing",t.Effecting="effecting",t.Drawing="drawing",t.Viewer="viewer"}(r||(r={})),function(t){t.Jpeg="jpeg",t.Png="png"}(a||(a={})),function(t){t.Css="css",t.Img="img"}(s||(s={})),function(t){t.Circle="circle",t.Rectangle="rectangle",t.RectangleRounded="rectangleRounded",t.Star="star",t.Diamond="diamond"}(p||(p={})),function(t){t.Freeform="freeform",t.Original="original",t.Square="square",t.Portrait="portrait",t.Landscape="landscape",t.Fixed_3_2="3 x 2",t.Fixed_4_3="4 x 3",t.Fixed_16_9="16 x 9"}(l||(l={}))},5190:(t,e,i)=>{var n,o,r,a;i.d(e,{$u:()=>r,uA:()=>n,zq:()=>o}),function(t){t.NONE="NONE",t.SELECT="SELECT",t.REMOVE="REMOVE",t.SELECT_RECT="SELECT_RECT",t.SELECT_LASSO="SELECT_LASSO",t.MOVE_EASING="MOVE_EASING",t.UNDO="UNDO",t.REDO="REDO",t.POINT_REGULAR="POINT_REGULAR",t.POINT_NUMBERED="POINT_NUMBERED",t.POLYLINE="POLYLINE",t.FREEHAND_POLYLINE_BENDING="FREEHAND_POLYLINE_BENDING",t.POLYLINE_CONSTRAINT="POLYLINE_CONSTRAINT",t.POLYGON="POLYGON",t.POLYGON_GRAPH="POLYGON_GRAPH",t.POLYGON_MULTIPLE="POLYGON_MULTIPLE",t.POLYGON_CONSTRAINT="POLYGON_CONSTRAINT",t.POLYLINE_BENDING="POLYLINE_BENDING",t.LINE_GRAPH="LINE_GRAPH",t.CIRCLE="CIRCLE",t.CIRCLE_CONSTRAINT_AREA="CIRCLE_CONSTRAINT_AREA",t.CIRCLE_CONSTRAINT_CIRCUMFERENCE="CIRCLE_CONSTRAINT_CIRCUMFERENCE",t.RECTANGLE="RECTANGLE",t.POINT_ICON="POINT_ICON",t.TEXT="TEXT",t.TEXT_LEADERLINE="TEXT_LEADERLINE",t.STAR="STAR",t.ARROW_SINGLE="ARROW_SINGLE",t.ARROW_DOUBLE="ARROW_DOUBLE",t.CURVE="CURVE",t.CURVE_OPEN="CURVE_OPEN",t.CURVE_CLOSE="CURVE_CLOSE",t.FREEHAND_POLYLINE="FREEHAND_POLYLINE",t.FREEHAND_POLYGON="FREEHAND_POLYGON",t.FREEHAND_POLYGON_GRAPH="FREEHAND_POLYGON_GRAPH",t.FREEHAND_CURVE="FREEHAND_CURVE",t.FREEHAND_CURVE_CLOSED="FREEHAND_CURVE_CLOSED",t.SMARTDRAWING="SMARTDRAWING",t.SMARTDRAWING_DEEPLEARNING="SMARTDRAWING_DEEPLEARNING",t.LINE="LINE",t.APOINT="APOINT",t.CPOINT_REGULAR="CPOINT_REGULAR",t.CPOINT_NUMBERED="CPOINT_NUMBERED",t.CLINE="CLINE",t.CPOLYLINE="CPOLYLINE",t.CPOLYGON="CPOLYGON",t.CLINE_TOOGLE="CLINE_TOOGLE",t.CARC="CARC",t.CCIRCLE="CCIRCLE",t.CRECTANGLE="CRECTANGLE",t.CNGON="CNGON",t.CSTAR="CSTAR",t.CCURVE="CCURVE",t.CCURVE_CLOSE="CCURVE_CLOSE",t.CFREEHAND_POLYLINE="CFREEHAND_POLYLINE",t.CFREEHAND_CURVE="CFREEHAND_CURVE",t.CFREEHAND_LINE="CFREEHAND_LINE",t.CFREEHAND_SMARTDRAWING="CFREEHAND_SMARTDRAWING",t.CFREEHAND_SMOOTH="CFREEHAND_SMOOTH",t.CRECTANGLE_CROP="CRECTANGLE_CROP",t.CPOINT="CPOINT",t.CNODE="CNODE",t.CEDGE="CEDGE",t.SVG_TOUR_POINT="SVG_TOUR_POINT",t.SVG_TOUR_LINE="SVG_TOUR_LINE",t.LINE_SPIKE="LINE_SPIKE",t.CIRCLE_TRAJECTORY="CIRCLE_TRAJECTORY",t.ARC_SPIKE="ARC_SPIKE",t.POINT_REGULAR_TOUR="POINT_REGULAR_TOUR",t.POINT_NUMBERED_TOUR="POINT_NUMBERED_TOUR"}(n||(n={})),function(t){t.POINT_REGULAR="POINT_REGULAR",t.POINT_NUMBERED="POINT_NUMBERED",t.POINT_ICON="POINT_ICON",t.POINT_REGULAR_TOUR="POINT_REGULAR_TOUR",t.POINT_NUMBERED_TOUR="POINT_NUMBERED_TOUR",t.POLYLINE="POLYLINE",t.POLYLINE_BENDING="POLYLINE_BENDING",t.POLYGON="POLYGON",t.POLYGON_DEPRECATED="POLYGON_DEPRECATED",t.POLYGON_GRAPH="POLYGON_GRAPH",t.POLYGON_MULTIPLE="POLYGON_MULTIPLE",t.CIRCLE="CIRCLE",t.RECTANGLE="RECTANGLE",t.AN_GON="AN_GON",t.ARROW_SINGLE="ARROW_SINGLE",t.ARROW_DOUBLE="ARROW_DOUBLE",t.TEXT="TEXT",t.CATEXT="CATEXT",t.TEXT_LEADERLINE="TEXT_LEADERLINE",t.APOINT="APOINT",t.AMIDPOINT="AMIDPOINT",t.ANODE="ANODE",t.APOINT_PATH="APOINT_PATH",t.ANODE_RECT="ANODE_RECT",t.ANODE_CIRCLE="ANODE_CIRCLE",t.ANODE_NGON="ANODE_NGON",t.ANODE_TEXT="ANODE_TEXT",t.AMIDPOINT_ALINE="AMIDPOINT_ALINE",t.CURVE="CURVE",t.CURVE_OPEN="CURVE_OPEN",t.CURVE_CLOSE="CURVE_CLOSE",t.FREEHAND_POLYLINE="FREEHAND_POLYLINE",t.FREEHAND_CURVE="FREEHAND_CURVE",t.SMARTDRAWING="SMARTDRAWING",t.ALINE="ALINE",t.CPOINT="CPOINT",t.CMIDPOINT="CMIDPOINT",t.CNODE="CNODE",t.CNODE_RECT="CNODE_RECT",t.CNODE_CIRCLE="CNODE_CIRCLE",t.CNODE_NGON="CNODE_NGON",t.CNODE_TEXT="CNODE_TEXT",t.CPOINT_REGULAR="CPOINT_REGULAR",t.CPOINT_NUMBERED="CPOINT_NUMBERED",t.CLINE="CLINE",t.CEDGE="CEDGE",t.CPOLYLINE="CPOLYLINE",t.CPOLYGON="CPOLYGON",t.CRECTANGLE="CRECTANGLE",t.CN_GON="CN_GON",t.CN_STAR="CN_STAR",t.CARC="CARC",t.CCIRCLE="CCIRCLE",t.CCURVE="CCURVE",t.CCURVE_OPEN="CCURVE_OPEN",t.CCURVE_CLOSED="CCURVE_CLOSED",t.CBLACKHOLE="CBLACKHOLE",t.CFREEHAND="CFREEHAND",t.COTHERS="COTHERS"}(o||(o={})),function(t){t.SMALL="SMALL",t.MEDIUM="MEDIUM",t.LARGE="LARGE"}(r||(r={})),function(t){t.Canvas="Canvas",t.WebGL2="WebGL2",t.WebGPU="WebGPU",t.WebAssembly="WebAssembly"}(a||(a={}))},6027:(t,e,i)=>{var n;i.d(e,{f:()=>n}),function(t){t.Meter="meter",t.Kilometer="kilometer",t.Centimeter="centimeter",t.Millimeter="millimeter",t.Micrometer="micrometer",t.Nanometer="nanometer",t.Mile="mile",t.Yard="yard",t.Foot="foot",t.Inch="inch"}(n||(n={}))},4904:(t,e,i)=>{i.d(e,{h:()=>n});var n=function(){function t(t,e,i){void 0===i&&(i=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}return t.prototype.mult=function(e){return this.x*=e,this.y*=e,this.z*=e,new t(this.x,this.y,this.z)},t.prototype.divByVal=function(e){return this.x/=e,this.y/=e,this.z/=e,new t(this.x,this.y,this.z)},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,new t(this.x,this.y,this.z)},t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,new t(this.x,this.y,this.z)},t.prototype.unitize=function(){return this.normalize()},t.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-4||(this.x=this.x/t,this.y=this.y/t,this.z=this.z/t),this},t}()},3160:(t,e,i)=>{i.d(e,{CU:()=>o,EW:()=>r,GN:()=>p,JY:()=>a,z5:()=>s});var n=i(4199),o=(i(2173),function(t,e,i,o,r,a,s,p){switch(void 0===s&&(s=!0),void 0===p&&(p=!1),s||(i=0,o=0),t.beginPath(),p||t.rect(-1,-1,t.canvas.width+2,t.canvas.height+2),e){case n.oU.RectangleRounded:var l=.5*(r+a)*.05;l=(l=l>.5*r?.5*r-10:l)>.5*a?.5*a-10:l,t.moveTo(i,o),t.arc(i+r-l,o+l,l,4.71,6.28,!1),t.arc(i+r-l,o+a-l,l,0,1.57,!1),t.arc(i+l,o+a-l,l,1.57,3.14,!1),t.arc(i+l,o+l,l,3.14,4.71,!1);break;case n.oU.Circle:var c=.5*r,u=.5*a;t.ellipse(i+c,o+u,c,u,0,0,2*Math.PI);break;default:t.rect(i,o,r,a)}t.closePath(),t.fill("evenodd")}),r=function(t,e,i,n,r,a,s,p){return void 0===s&&(s=!0),void 0===p&&(p=!1),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(255, 255, 255, 1)",o(t,e,i,n,r,a,s,p),t.globalCompositeOperation="source-over",t},a=function(t,e,i,n,o,a,s){return void 0===s&&(s=!0),r(t,e,i,n,o,a,s,!0)},s=function(t,e,i,n){var o=document.createElement("canvas");o.width=i,o.height=n;var r=o.getContext("2d");r.drawImage(t,0,0,i,n),r.drawImage(e,0,0,i,n);var a=new Image;return a.src=o.toDataURL(),a},p=function(t,e){void 0===e&&(e="myImage");var i=document.createElement("a");i.download=e+".png",i.href=t.src,i.click()}},1374:(t,e,i)=>{i.d(e,{$:()=>o});var n=i(4722),o=function(){function t(t){this.div=t}return t.prototype.default=function(){this.div?this.div.style.cursor!==n.CF.Default&&(this.div.style.cursor=n.CF.Default):document.body.style.cursor!==n.CF.Default&&(document.body.style.cursor=n.CF.Default)},t.prototype.auto=function(){this.div?this.div.style.cursor!==n.CF.Auto&&(this.div.style.cursor=n.CF.Auto):document.body.style.cursor!==n.CF.Auto&&(document.body.style.cursor=n.CF.Auto)},t.prototype.creating=function(){this.div?this.div.style.cursor!==n.CF.Crosshair&&(this.div.style.cursor=n.CF.Crosshair):document.body.style.cursor!==n.CF.Crosshair&&(document.body.style.cursor=n.CF.Crosshair)},t.prototype.dragging=function(){this.div?this.div.style.cursor!==n.CF.Move&&(this.div.style.cursor=n.CF.Move):document.body.style.cursor!==n.CF.Move&&(document.body.style.cursor=n.CF.Move)},t.prototype.hovering=function(){this.div?this.div.style.cursor!==n.CF.Pointer&&(this.div.style.cursor=n.CF.Pointer):document.body.style.cursor!==n.CF.Pointer&&(document.body.style.cursor=n.CF.Pointer)},t.prototype.texting=function(){this.div?this.div.style.cursor!==n.CF.Text&&(this.div.style.cursor=n.CF.Text):document.body.style.cursor!==n.CF.Text&&(document.body.style.cursor=n.CF.Text)},t.prototype.set_nwse_resize=function(){this.div?this.div.style.cursor!==n.CF.NWSEresize&&(this.div.style.cursor=n.CF.NWSEresize):document.body.style.cursor!==n.CF.NWSEresize&&(document.body.style.cursor=n.CF.NWSEresize)},t.prototype.set_nesw_resize=function(){this.div?this.div.style.cursor!==n.CF.NESWresize&&(this.div.style.cursor=n.CF.NESWresize):document.body.style.cursor!==n.CF.NESWresize&&(document.body.style.cursor=n.CF.NESWresize)},t.prototype.set_ns_resize=function(){this.div?this.div.style.cursor!==n.CF.NSresize&&(this.div.style.cursor=n.CF.NSresize):document.body.style.cursor!==n.CF.NSresize&&(document.body.style.cursor=n.CF.NSresize)},t.prototype.set_ew_resize=function(){this.div?this.div.style.cursor!==n.CF.EWresize&&(this.div.style.cursor=n.CF.EWresize):document.body.style.cursor!==n.CF.EWresize&&(document.body.style.cursor=n.CF.EWresize)},t}()},3185:(t,e,i)=>{i.d(e,{Bm:()=>u,JV:()=>g,Kz:()=>h,_y:()=>l,aK:()=>v,eg:()=>s,hL:()=>p,ld:()=>c,nq:()=>y,wq:()=>f,xG:()=>m});var n=i(4199),o=i(4904),r=i(5190),a=i(8184),s=function(t,e,i,o,a,s,p,l){var d=document.createElement("canvas");d.width=t.canvas.width,d.height=t.canvas.height;var E=d.getContext("2d");E.imageSmoothingQuality="high",E.drawImage(t.canvas,0,0,t.canvas.width,t.canvas.height);var C=e.geometry,w=[o,a];if(C)for(var b=C.length;b--;){var N=C[b],D=N.styles.width*i*N.styles.scale;switch(N.type){case r.zq.POINT_REGULAR:c(E,N.nodes,p,N.styles.colorRgba,w,i*N.styles.scale,-9,-28);break;case r.zq.POINT_NUMBERED:s===n.qA.AGSM?u(E,N.nodes,N.styles.colorRgba,N.styles.number,w,i*N.styles.scale,0,0):h(E,N.nodes,l,N.styles.colorRgba,N.styles.number,w,i*N.styles.scale,-13.14,-28);break;case r.zq.POLYLINE_BENDING:N.nodes.length>1&&g(E,N.nodes,N.styles.colorRgba,w,D);break;case r.zq.POLYGON_GRAPH:case r.zq.RECTANGLE:m(E,N.nodes,N.styles.colorRgba,w,D);break;case r.zq.CIRCLE:f(E,N.nodes,N.styles.colorRgba,w,D);break;case r.zq.ARROW_SINGLE:y(E,N.nodes,N.styles.colorRgba,w,D);break;case r.zq.ARROW_DOUBLE:v(E,N.nodes,N.styles.colorRgba,w,D)}}return E},p=function(t,e,i,n,o,r){void 0===r&&(r=.5),t.beginPath(),t.arc(e+n-r,i-o+r,r,4.71,6.28,!1),t.arc(e+n-r,i+o-r,r,0,1.57,!1),t.arc(e-n+r,i+o-r,r,1.57,3.14,!1),t.arc(e-n+r,i-o+r,r,3.14,4.71,!1),t.closePath(),t.strokeStyle="#000000",t.fillStyle="#ffffff",t.fill(),t.stroke()},l=function(t,e,i,n,o,r,a,s){void 0===o&&(o=[0,0]),void 0===r&&(r=1),void 0===a&&(a=-8),void 0===s&&(s=-32),t.fillStyle="rgba("+n[0]+", "+n[1]+", "+n[2]+", 1)",t.save(),t.translate(e[0].sx+a*r-o[0],e[0].sy+s*r-o[1]),t.scale(r,r),t.fill(i),t.restore()},c=function(t,e,i,n,o,r,a,s){void 0===o&&(o=[0,0]),void 0===r&&(r=1),void 0===a&&(a=-8),void 0===s&&(s=-32),t.fillStyle="rgba("+n[0]+", "+n[1]+", "+n[2]+", 1)",t.save(),t.translate(e[0].sx+a*r-o[0],e[0].sy+s*r-o[1]),t.scale(r,r),t.fill(i),t.restore()},u=function(t,e,i,n,o,r,a,s){void 0===o&&(o=[0,0]),void 0===r&&(r=1),void 0===a&&(a=-8),void 0===s&&(s=-32);var p=26+r,l="rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")";t.fillStyle=l,t.save(),t.translate(e[0].sx+a*r-o[0],e[0].sy+s*r-o[1]),t.scale(r,r),t.beginPath(),t.arc(0,0-.5*p,.5*p,0,2*Math.PI),t.closePath(),t.fill(),t.restore(),d(t,e,l,n,o,r,20)},h=function(t,e,i,n,o,r,a,s,p){void 0===r&&(r=[0,0]),void 0===a&&(a=1),void 0===s&&(s=-8),void 0===p&&(p=-32);var l="rgba("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")";t.fillStyle=l,t.save(),t.translate(e[0].sx+s*a-r[0],e[0].sy+p*a-r[1]),t.scale(a,a),t.fill(i),t.restore(),d(t,e,l,o,r,a)},d=function(t,e,i,n,o,r,s){void 0===r&&(r=1),void 0===s&&(s=28);var p=10*r+"px Avenir Next";t.textAlign="center",t.fillStyle=(0,a.XV)(i),t.font=p,t.fillText(n.toString(),e[0].sx-o[0],e[0].sy-o[1]-s*r*.5)},g=function(t,e,i,n,o){void 0===n&&(n=[0,0]),void 0===o&&(o=1),t.strokeStyle="rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")",t.lineWidth=o,t.beginPath(),t.moveTo(e[0].sx-n[0],e[0].sy-n[1]);for(var r=1;r<e.length;++r)t.lineTo(e[r].sx-n[0],e[r].sy-n[1]);t.lineCap="round",t.stroke(),t.lineCap="butt"},m=function(t,e,i,n,o){void 0===n&&(n=[0,0]),void 0===o&&(o=1),t.fillStyle="rgba(8, 127, 155, 0.3)",t.strokeStyle="rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")",t.lineWidth=o,t.beginPath(),t.moveTo(e[0].sx-n[0],e[0].sy-n[1]);for(var r=1;r<e.length;++r)t.lineTo(e[r].sx-n[0],e[r].sy-n[1]);t.closePath(),t.stroke()},f=function(t,e,i,n,o){void 0===n&&(n=[0,0]),void 0===o&&(o=1);var r="rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")";t.strokeStyle=r,t.lineWidth=o;var a=.5*(e[2].sx-e[0].sx),s=.5*(e[2].sy-e[0].sy),p=e[0].sx+a-n[0],l=e[0].sy+s-n[1];t.beginPath(),t.ellipse(p,l,a,s,0,0,2*Math.PI),t.closePath(),t.stroke()},y=function(t,e,i,n,o){void 0===n&&(n=[0,0]),void 0===o&&(o=1);var r="rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")";t.strokeStyle=r,t.fillStyle=r,t.lineWidth=o,E(t,e,n,o,!1)},v=function(t,e,i,n,o){void 0===n&&(n=[0,0]),void 0===o&&(o=1);var r="rgba("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")";t.strokeStyle=r,t.fillStyle=r,t.lineWidth=o,E(t,e,n,o,!0)},E=function(t,e,i,n,o){void 0===i&&(i=[0,0]),void 0===n&&(n=1),void 0===o&&(o=!1);for(var r=[e[0].sx-i[0],e[0].sy-i[1],e[1].sx-i[0],e[1].sy-i[1],e[2].sx-i[0],e[2].sy-i[1]],a=[],s=0;s<e.length;++s)a.push(.5);for(var p=[],l=0,c=r;l<c.length;l++){var u=c[l];p.push(u)}var h=[];for(s=0;s<p.length-4;s+=2)h=h.concat(C(p[s],p[s+1],p[s+2],p[s+3],p[s+4],p[s+5],a[s]));w(t,r,h,n,o)},C=function(t,e,i,n,o,r,a){var s=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),p=a*s/(s+Math.sqrt(Math.pow(o-i,2)+Math.pow(r-n,2))),l=a-p;return[i+p*(t-o),n+p*(e-r),i-l*(t-o),n-l*(e-r)]},w=function(t,e,i,n,r){void 0===n&&(n=1),void 0===r&&(r=!0);var a=e,s=i,p=a.length;b(t,a[0],a[1],s[0],s[1],a[2],a[3]),b(t,a[p-2],a[p-1],s[2*p-10],s[2*p-9],a[p-4],a[p-3]),N(t,new o.h(a[4],a[5]),new o.h(s[2],s[3]),a[4],a[5],n),r&&N(t,new o.h(a[0],a[1]),new o.h(s[0],s[1]),a[0],a[1],n)},b=function(t,e,i,n,o,r,a){t.beginPath(),t.moveTo(r,a),t.quadraticCurveTo(n,o,e,i),t.stroke(),t.setLineDash([])},N=function(t,e,i,n,o,r){void 0===r&&(r=1);var a=D(e,i);t.save(),t.translate(n,o),t.rotate(-a*Math.PI/180),t.beginPath(),t.moveTo(0,0),t.lineTo(6*r,-3.75*r),t.lineTo(6*r,3.75*r),t.closePath(),t.stroke(),t.fill(),t.restore()},D=function(t,e){var i=e.sub(t),n=new o.h(1,0,0);return i.y>0?-1*A(n,i):A(n,i)},A=function(t,e){return 180*O(t,e)/Math.PI},O=function(t,e){return Math.acos(R(t,e))},R=function(t,e){return I(T(t),T(e))},I=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},T=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return e<1e-4?new o.h(t.x,t.y,t.z):new o.h(t.x/e,t.y/e,t.z/e)}},8415:(t,e,i)=>{i.d(e,{D:()=>o,s:()=>n});var n=function(t,e,i){void 0===i&&(i=1);var n=document.createElement("button");return n.style.background="transparent",n.style.border="none",n.innerHTML=e,n.onclick=function(){return t()},n.style.transform="scale("+i+")",n},o=function(t,e){var i;return void 0===e&&(e=300),function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];clearTimeout(i),i=setTimeout((function(){t.apply(i,n)}),e)}}},4415:(t,e,i)=>{i.d(e,{AR:()=>s,Cv:()=>h,Fs:()=>l,TE:()=>n,Ux:()=>a,Yr:()=>p,kC:()=>r,m1:()=>c,sI:()=>g,vI:()=>u,yH:()=>o,yP:()=>d}),i(6027),Math.PI,Math.PI;var n=function(t,e,i,n){return Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))},o=function(t,e,i){return[t*(i/e),i]},r=function(t,e,i){return[i,e*(i/t)]},a=function(t,e,i){return[t*(i/e),i]},s=function(t){for(var e=0;e<t.length;++e)if(t[e]<0)return!0;return!1},p=function(t){return t*(Math.PI/180)},l=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)}))},c=function(t,e,i){return t+(e-t)*i},u=function(t,e){var i=new Array,n=(t.length-1)/(e-1);i[0]=t[0];for(var o=1;o<e-1;o++){var r=o*n,a=+Math.floor(r).toFixed(),s=+Math.ceil(r).toFixed(),p=r-a;i[o]=c(t[a],t[s],p)}return i[e-1]=t[t.length-1],i},h=function(t){for(var e=1,i=0;e<t.length;)t[e]>t[i]||(i=e),e+=1;return i},d=function(t){return Math.sqrt(t/Math.PI)},g=function(t){return t/Math.PI*.5}},2325:(t,e,i)=>{i.d(e,{Ql:()=>a,X4:()=>r,ee:()=>s});var n=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{p(n.next(t))}catch(t){r(t)}}function s(t){try{p(n.throw(t))}catch(t){r(t)}}function p(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((n=n.apply(t,e||[])).next())}))},o=function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},r=function(t){var e=9===t.nodeType?t.documentElement:t,i={name:e.nodeName};return i.content=Array.from(e.childNodes||[]).filter((function(t){return 3===t.nodeType})).map((function(t){return t.textContent})).join("").trim(),i.attributes=Array.from(e.attributes||[]).filter((function(t){return t})).reduce((function(t,e){return t[e.name]=e.value,t}),{}),i.children=Array.from(e.childNodes||[]).filter((function(t){return 1===t.nodeType})).map((function(t){return i[t.nodeName]=r(t)})),i},a=function(t){return n(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,fetch(t,{mode:"no-cors"}).then((function(t){return t.text()})).catch((function(t){console.log(t)}))]}))}))},s=function(t){return n(void 0,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:return[4,(new DOMParser).parseFromString(t,"text/xml")];case 1:return e=i.sent(),[2,p(e)]}}))}))},p=function(t){var e=new Object;if(1===t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var i=0;i<t.attributes.length;i++){var n=t.attributes.item(i);e["@attributes"][n.nodeName]=n.nodeValue}}}else 3===t.nodeType&&t.nodeValue&&(e=t.nodeValue);if(t.hasChildNodes())for(var o=0;o<t.childNodes.length;o++){var r=t.childNodes.item(o),a=r.nodeName;if(void 0===e[a])e[a]=p(r);else{if(void 0===e[a].push){var s=e[a];e[a]=[],e[a].push(s)}e[a].push(p(r))}}return e}},9533:(t,e,i)=>{i.d(e,{KF:()=>u,R4:()=>a,VT:()=>c,dX:()=>o,jY:()=>d,nP:()=>h,sR:()=>r});var n=i(2325),o=function(t){t=JSON.parse(JSON.stringify(t));for(var e=[],i=t.svg.g.g.path["@attributes"].d.split(" "),n=0,o=0;o<i.length;++o)if("M"!==i[o][0])if("C"!==i[o][0])if("L"!==i[o][0]){if("0"===i[o][0]||Number(i[o][0])){var r=i[o].split(",").map(Number);e[n+" C"].push(r[0],r[1])}}else e[(n=o)+" L"]=i[o].slice(1).split(",").map(Number);else e[(n=o)+" C"]=i[o].slice(1).split(",").map(Number);else e[o+" M"]=i[o].slice(1).split(",").map(Number);var a=new Path2D;return Object.keys(e).map((function(t){var i=e[t];if(i){var n=t.split(" ")[1];"M"===n?a.moveTo(i[0],i[1]):"C"===n?a.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]):"L"===n&&a.lineTo(i[0],i[1])}})),a.closePath(),{type:"path",height:parseInt(t.svg["@attributes"].height,10),width:parseInt(t.svg["@attributes"].width,10),path:e,path2D:new Path2D("M9 0a9.022 9.022 0 00-9 9.041c0 4.992 5 11.761 9 19.421 4-7.659 9-14.428 9-19.42A9.022 9.022 0 009 .001V0zm0 12.652a3.85 3.85 0 113.833-3.85A3.841 3.841 0 019 12.652z")}},r=function(t,e,i){void 0===i&&(i=1);var n=document.createElement("button");return n.style.background="transparent",n.style.border="none",n.innerHTML=e,n.onclick=function(){return t()},n.style.transform="scale("+i+")",n},a=function(t,e,i,n,o,r){void 0===t&&(t=8),void 0===e&&(e=8),void 0===i&&(i=2),void 0===n&&(n="#ffffff"),void 0===o&&(o=1),void 0===r&&(r="#CBDAE2");var a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("x","1"),a.setAttribute("y","1"),a.setAttribute("width",""+t),a.setAttribute("height",""+e),a.setAttribute("stroke-width",""+o),a.setAttribute("rx",""+i),a.setAttribute("fill",""+n),a.setAttribute("stroke",""+r);var s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.appendChild(a),s.setAttribute("width",""+(t+2*o)),s.setAttribute("height",""+(e+2*o)),s.style.position="absolute",s},s={width:10,height:10,path2D:void 0,path:function(t){return"njslabSandboxStatic/pointSVG/point.svg"}},p={width:10,height:10,path2D:void 0,path:function(t){return"njslabSandboxStatic/pointSVG/point.svg"}},l={width:10,height:10,path2D:void 0,path:function(t){return"njslabSandboxStatic/pointSVG/unnumbered-pin.svg"}},c=function(){return s},u=function(){return p},h=function(){return l},d=function(t){return void 0===t&&(t=""),e=void 0,i=void 0,r=function(){var e,i,o,r,a,c,u;return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(h){switch(h.label){case 0:e=[s,p,l],i=new DOMParser,h.label=1;case 1:h.trys.push([1,6,,7]),o=0,h.label=2;case 2:return o<e.length?[4,(0,n.Ql)(e[o].path(t))]:[3,5];case 3:(r=h.sent())&&(a=i.parseFromString(r,"text/xml"),c=(0,n.X4)(a),e[o].width=c.attributes.height,e[o].height=c.attributes.width,e[o].path2D=new Path2D(c.children[0].attributes.d)),h.label=4;case 4:return++o,[3,2];case 5:return[2,!0];case 6:return u=h.sent(),console.debug(u),[2,!1];case 7:return[2]}}))},new((o=void 0)||(o=Promise))((function(t,n){function a(t){try{p(r.next(t))}catch(t){n(t)}}function s(t){try{p(r.throw(t))}catch(t){n(t)}}function p(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(t){t(i)}))).then(a,s)}p((r=r.apply(e,i||[])).next())}));var e,i,o,r}}}]);
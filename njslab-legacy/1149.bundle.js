"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1149],{8423:(t,e,i)=>{i.d(e,{R:()=>o,_:()=>n});var n="@",o=function(){function t(t){this.ioWrapper=t}return t.prototype.emitAction=function(t){this.ioWrapper.model.app.emitAction&&this.ioWrapper.model.app.emitAction(t)},t.prototype.getNumLayers=function(){this.ioWrapper.model.app.getNumLayers&&this.ioWrapper.model.app.getNumLayers()},t.prototype.localizedString=function(t){this.ioWrapper.model.app.localizedString&&this.ioWrapper.model.app.localizedString(t)},t}()},1149:(t,e,i)=>{i.r(e),i.d(e,{AppImageDrawing:()=>U,CONFIG:()=>B,InteractionMode:()=>o.An});var n,o=i(770),r=function(){function t(t,e){this.model=t,this.appProperties=new o.gj,this.appProperties.isStandalone=!0,this.appControllerStatus=new o.jp(e),this.browserUtility=new o.R7}return t.prototype.initPost=function(){},t}(),a=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function p(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,p)}s((n=n.apply(t,e||[])).next())}))},p=function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function p(r){return function(p){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,p])}}},s=function(){function t(t){this.model=t,this.importAssets()}return t.prototype.importAssets=function(){return a(this,void 0,void 0,(function(){return p(this,(function(t){return[2]}))}))},t.prototype.importAsset=function(t){return a(this,void 0,void 0,(function(){var e;return p(this,(function(i){switch(i.label){case 0:return[4,(0,o.ee)(t)];case 1:return e=i.sent(),[2,(0,o.dX)(e)]}}))}))},t}(),h=function(){function t(t){this.model=t}return t.prototype.mouseEventController=function(t){this.model.app.implementations&&this.model.app.implementations.mouseEventController(t),this.model.app.addon},t.prototype.keyboardEventController=function(t){this.model.app.implementations&&this.model.app.implementations.keyboardEventController(t),this.model.app.addon},t.prototype.keyboardEventControllerFromDocument=function(t){this.model.app.implementations&&this.model.app.implementations.keyboardEventControllerFromDocument(t)},t.prototype.touchEventController=function(t){this.model.app.implementations&&this.model.app.implementations.touchEventController(t)},t}(),u=i(8423),c=i(45),l=function(){function t(t,e){void 0===e&&(e=o.Nq.JSAPI4X),this.keyDown=this.keyDown.bind(this),this.keyUp=this.keyUp.bind(this),this.model=t,this.type=e,this.isUp=!1,this.init(),this.MouseEventDataPre=new c.O}return t.prototype.init=function(){"undefined"!=typeof document&&(document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp))},t.prototype.destroy=function(){"undefined"!=typeof document&&(document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp))},t.prototype.keyDown=function(t){var e=this.commonEventBuilder(t);e.PRESS_TYPE=o.rO.Down,this.keyEventFromDocument(e)},t.prototype.keyUp=function(t){var e=this.commonEventBuilder(t);e.PRESS_TYPE=o.rO.Up,e.hasShiftKey&&e.hasCtrlKey||this.keyEventFromDocument(e)},t.prototype.commonEventBuilder=function(t){var e=new c.O;return e.preEvent=this.MouseEventDataPre,e.key=t.key,e.keyCode=t.keyCode,e.code=t.code,e.hasCtrlKey=t.ctrlKey,e.hasShiftKey=t.shiftKey,e.hasAltKey=t.altKey,e.hasMetaCommand=t.metaKey,this.MouseEventDataPre=e,e},t.prototype.keyEvent=function(t){this.model.controllerWrapper.keyboardEventController(t)},t.prototype.keyEventFromDocument=function(t){this.model.controllerWrapper.keyboardEventControllerFromDocument(t)},t}(),m=i(2536),d=function(){function t(t){this.frame=0,this.frameSkip=2,this.mouseInteraction=t}return t.prototype.removeEvent=function(){},t.prototype.appendEvent=function(){},t}(),f=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),v=function(t){function e(e){var i=t.call(this,e)||this;return i.clickable=!0,i.disableMoveEvent=!1,i.mouseClick=function(t){i.clickable?i.mouseInteraction.mouseClick(t):i.clickable=!0},i.mouseDoubleClick=function(t){i.mouseInteraction.mouseDoubleClick(t)},i.mouseDown=function(t){i.clickable=!0,i.mouseInteraction.mouseDown(t)},i.mouseUp=function(t){i.disableMoveEvent=!0,i.mouseInteraction.mouseUp(t)},i.mouseMove=function(t){i.clickable=!1,i.disableMoveEvent?i.disableMoveEvent=!1:i.mouseInteraction.mouseMove(t)},i.appendEvent(),i}return f(e,t),e.prototype.appendEvent=function(){var t=this.mouseInteraction.model.modelViewWrapper.div;t.style.pointerEvents="auto",t.addEventListener("click",this.mouseClick),t.addEventListener("dblclick",this.mouseDoubleClick),t.addEventListener("mousedown",this.mouseDown),t.addEventListener("mouseup",this.mouseUp),t.addEventListener("mousemove",this.mouseMove)},e.prototype.removeEvent=function(){var t=this.mouseInteraction.model.modelViewWrapper.div;t.removeEventListener("click",this.mouseClick),t.removeEventListener("dblclick",this.mouseDoubleClick),t.removeEventListener("mousedown",this.mouseDown),t.removeEventListener("mouseup",this.mouseUp),t.removeEventListener("mousemove",this.mouseMove)},e}(d),g=function(){function t(t){this.isEnable=!0,this.isEnableZoomByDoubleClickValue=!0,this.click=!1,this.prevent=!1,this.delay=100,this.down=!1,this._stopPropagation=!1,this.model=t,this.mouseEventDataPre=new m.$,this.mouseEvent=new v(this),this.initNativeMouseWheelEvent(this.model.modelViewWrapper.div)}return t.prototype.initNativeMouseWheelEvent=function(t){var e=this;t.onwheel=function(t){e.mouseWheel(t,t.deltaY)}},t.prototype.mouseDown=function(t){if(this.isInsideCropShape(t)){this.click=!0,this.down=!0;var e=this.commonEventBuilder(t);e.CLICK_TYPE=o.uD.Down,e.isDown=!0,this.mouseEvenEmitting(e)}},t.prototype.mouseClick=function(t){if(this.isInsideCropShape(t)){var e=this.commonEventBuilder(t);0===t.button?e.CLICK_TYPE=o.uD.Left:1===t.button?e.CLICK_TYPE=o.uD.Middle:2===t.button&&(e.CLICK_TYPE=o.uD.Right),this.mouseEvenEmitting(e)}},t.prototype.mouseDoubleClick=function(t){if(this.isInsideCropShape(t)){var e=this.commonEventBuilder(t);e.CLICK_TYPE=o.uD.Double,this.mouseEvenEmitting(e)}},t.prototype.mouseDrag=function(t){this.click=!1;var e=this.commonEventBuilder(t);e.CLICK_TYPE=o.uD.Drag,e.isDown=!0,1===t.buttons?e.CLICK_TYPE=o.uD.Drag:4===t.buttons?e.CLICK_TYPE=o.uD.DragMiddle:2===t.buttons&&(e.CLICK_TYPE=o.uD.DragRight),this.mouseEvenEmitting(e)},t.prototype.mouseMove=function(t){if(this.isInsideCropShape(t))if(this.down)this.mouseDrag(t);else{var e=this.commonEventBuilder(t);e.CLICK_TYPE=o.uD.Move,e.isDown=!1,this.mouseEvenEmitting(e)}},t.prototype.mouseUp=function(t){this.down=!1;var e=this.commonEventBuilder(t);e.CLICK_TYPE=o.uD.Up,e.isDown=!1,this.mouseEvenEmitting(e)},t.prototype.mouseWheel=function(t,e){if(this.isInsideCropShape(t)){var i=this.commonEventBuilder(t);i.wheel=e,i.CLICK_TYPE=o.uD.Wheel,this.mouseEvenEmitting(i)}},t.prototype.appendDownEvent=function(t){},t.prototype.appendUpEvent=function(){var t=this;document.onmouseup=function(e){var i=t.commonEventBuilder(e);0===e.button?i.CLICK_TYPE=o.uD.Left:1===e.button?i.CLICK_TYPE=o.uD.Middle:2===e.button&&(i.CLICK_TYPE=o.uD.Right),i.isDown=!1,i.CLICK_TYPE=o.uD.Up,t.mouseEvenEmitting(i)}},Object.defineProperty(t.prototype,"isEnableZoomByDoubleClick",{get:function(){return this.isEnableZoomByDoubleClickValue},set:function(t){var e=this;t?this.timer=setTimeout((function(){e.isEnableZoomByDoubleClickValue=t}),1e3):this.isEnableZoomByDoubleClickValue=t},enumerable:!1,configurable:!0}),t.prototype.commonEventBuilder=function(t){var e=new m.$;return e.preX=this.mouseEventDataPre.x,e.preY=this.mouseEventDataPre.y,e.pressedShift=t.shiftKey,e.pressedAlt=t.altKey,e.pressedCtrl=t.ctrlKey,e.x=t.offsetX,e.y=t.offsetY,e.preWheel=this.mouseEventDataPre.wheel,e.wheel=0,e.native=t,this.mouseEventDataPre=e,this.e=e,e},Object.defineProperty(t.prototype,"stopPropagation",{get:function(){return this._stopPropagation},set:function(t){this._stopPropagation=t},enumerable:!1,configurable:!0}),t.prototype.mouseEvenEmitting=function(t){this.model.appCoreWrapper.appControllerStatus.mode!==o.An.ObserveViewer&&(this.mouseEventEmittingForViewController(t),this._stopPropagation||this.mouseEventEmittingForModel(t))},t.prototype.mouseEventEmittingForViewController=function(t){this.mouseInteractionUI&&this.mouseInteractionUI.mouseInteractionMenu(t)},t.prototype.mouseEventEmittingForModel=function(t){this.model.controllerWrapper.mouseEventController(t)},t.prototype.destroy=function(){this.mouseEvent.removeEvent()},t.prototype.isInsideCropShape=function(t){return!!this.model.app.implementations.imageAnnoApp.scene.paramsEditing.isInsideCropShape(t.offsetX,t.offsetY)||(t.stopPropagation(),!1)},t}(),y=i(5462),w=function(){function t(t){this.touchInteraction=t}return t.prototype.appendEvent=function(){},t}(),A=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),C=function(t){function e(e){var i=t.call(this,e)||this;return i.appendEvent(),i}return A(e,t),e.prototype.appendEvent=function(){var t=this;this.touchInteraction.model.modelViewWrapper.div.ontouchstart=function(e){t.touchInteraction.model.app.implementations.imageAnnoApp;var i=t.touchInteraction.commonEventBuilder(e,o.wn.Start);t.touchInteraction.mouseEvent(i)},this.touchInteraction.model.modelViewWrapper.div.ontouchend=function(e){t.touchInteraction.model.app.implementations.imageAnnoApp;var i=t.touchInteraction.commonEventBuilder(e,o.wn.End);t.touchInteraction.mouseEvent(i)},this.touchInteraction.model.modelViewWrapper.div.ontouchmove=function(e){t.touchInteraction.model.app.implementations.imageAnnoApp;var i=t.touchInteraction.commonEventBuilder(e,o.wn.Move);t.touchInteraction.mouseEvent(i)},this.touchInteraction.model.modelViewWrapper.div.ontouchcancel=function(e){t.touchInteraction.model.app.implementations.imageAnnoApp;var i=t.touchInteraction.commonEventBuilder(e,o.wn.Cancel);t.touchInteraction.mouseEvent(i)}},e}(w),E=function(){function t(e){this.isEnable=!0,this.click=!1,this.prevent=!1,this.delay=100,this.down=!1,this.model=e,t.model=e,this.touchEvent=new C(this)}return t.prototype.commonEventBuilder=function(t,e){var i=new y.f;return i.TOUCH_TYPE=e,i.build(t,e),this.touchEventDataPre=i,i},t.prototype.mouseEvent=function(t){this.model.controllerWrapper.touchEventController(t)},t}(),b=function(){function t(t){this.ioWrapper=t,this.mouseInteraction=new g(this.ioWrapper.model),this.keyboardInteraction=new l(this.ioWrapper.model),this.touchInteraction=new E(this.ioWrapper.model)}return Object.defineProperty(t.prototype,"isEnableZoomByDoubleClick",{get:function(){return this.mouseInteraction.isEnableZoomByDoubleClick},set:function(t){this.mouseInteraction.isEnableZoomByDoubleClick=t},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.mouseInteraction.destroy()},t}(),x=function(){function t(t){this.model=t}return t.prototype.pushAction=function(t){this.model.app.implementations.pushAction(t)},t}(),I=function(){function t(t){this.model=t,this.emitAction=new u.R(this),this.stateProcessing=new x(this.model)}return t.prototype.initPost=function(){this.initEventInteraction()},t.prototype.initEventInteraction=function(){this.eventInteraction=new b(this)},t.prototype.download=function(){},t.prototype.destroy=function(){this.eventInteraction.keyboardInteraction.destroy(),this.eventInteraction.mouseInteraction.destroy()},t.prototype.open=function(){},t}(),P=function(){function t(t,e){this.model=t,this.init(e),this.model.appCoreWrapper.appProperties.compileMode,o.ct.Production}return t.prototype.init=function(t){var e=document.createElement("div");this.divNGraphicsHost=e,e.id="ExpressImageDrawing",e.style.width="100%",e.style.height="100%",this.divWrapper=document.createElement("div"),this.divWrapper.id="Annotation-image-wrapper"+this.model.app.CONFIG.VERSION_APP,this.divWrapper.style.width="100%",this.divWrapper.style.height="100%",this.divWrapper.style.pointerEvents="none",this.div=document.createElement("div"),this.div.id="Annotation-image-"+this.model.app.CONFIG.VERSION_APP,this.div.style.userSelect="none",this.div.style.width="100%",this.div.style.height="100%",this.div.style.zIndex="1",this.div.style.position="relative",this.divWrapper.appendChild(this.div),e.appendChild(this.divWrapper);var i=document.getElementById(t);i&&(this.divHost=i,this.divHost.parentNode&&this.divHost.appendChild(e))},t.prototype.removeDivImg=function(){this.model.modelViewWrapper.div.removeChild(this.model.modelViewWrapper.div.childNodes[2])},t.prototype.removeDiv=function(){try{this.model.modelViewWrapper.divNGraphicsHost.parentNode.removeChild(this.model.modelViewWrapper.divNGraphicsHost)}catch(t){console.debug(t)}},t.prototype.initPost=function(){},t}(),k=function(){function t(t){this.dataFilter="",this.imgString="",this.imgOriginalString="",this.useModifiedImage=!0,this.croppingDataTemp=void 0,this.model=t}return t.prototype.projectionToImageSpace=function(t,e){return[t*(this.img.width/this.imgAppended.width),e*(this.img.height/this.imgAppended.height)]},t.prototype.updateEffecting=function(t){this.dataFilter=t},t.prototype.initImageByImg=function(t,e,i,n){void 0===n&&(n="#1D2730"),this.img=t,this.imgString=t.src,this.imgOriginal=i,this.imgOriginalString=i.src,this.imgCroppingParam=JSON.parse(e),this.croppingDataTemp=this.imgCroppingParam,this.model.app.param.colorCover=n,this.model.app.isLoaded&&(this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.croppingDataTemp),this.updateImg(t,n))},t.prototype.updateImg=function(t,e){var i=this;void 0===e&&(e="#1D2730"),this.imgAppended=new Image,this.imgAppended.src=t.src,this.imgAppended.style.pointerEvents="none",this.imgAppended.style.width="100%",this.imgAppended.style.height="100%",this.imgAppended.onload=function(){i.updateMaskForCroppingShape(t,e),i.model.modelViewWrapper.div.append(i.imgAppended);var n=.5*(t.width/i.imgAppended.width+t.height/i.imgAppended.height);i.model.app.implementations.imageAnnoApp&&(i.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.scaleScreenByRatioImageSize=n<1?1:n),i.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(t.width,t.height),i.model.app.implementations.imageAnnoApp&&(i.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.isActive=!0),i.model.ioWrapper.emitAction.emitAction("ready@markup"),i.imgAppended.onload=function(){}}},t.prototype.toCroppedImg=function(){this.useModifiedImage=!0,this.imgAppended.src=this.imgString,this.toModifiedImgCroppingParam(),this.model.ioWrapper.emitAction.emitAction("update-cropping@"+JSON.stringify(this.imgCroppingParam)),this.model.ioWrapper.emitAction.emitAction("update-effecting@"+JSON.stringify(this.dataFilter)),this.model.ioWrapper.emitAction.emitAction("update-container-size@")},t.prototype.toOriginalImg=function(){this.useModifiedImage=!1,this.imgAppended.src=this.imgOriginalString,this.toOriginalImgCroppingParam(),this.model.ioWrapper.emitAction.emitAction("update-cropping@"+JSON.stringify(this.imgOriginalCroppingParam)),this.model.ioWrapper.emitAction.emitAction("update-effecting@"+JSON.stringify({typePreset:"normal",filter:{interpolation:1,blur:0,sepia:0,contrast:1,brightness:1,saturate:1,hueRotate:0},tint:{}})),this.model.ioWrapper.emitAction.emitAction("update-container-size@original")},t.prototype.toOriginalImgCroppingParam=function(){this.imgOriginalCroppingParam={aspectRatio:"original",x:0,y:0,width:this.imgOriginal.width,height:this.imgOriginal.height,rotation:0,scale:1,shape:"rectangle"},this.img.width=this.imgOriginalCroppingParam.width,this.img.height=this.imgOriginalCroppingParam.height,this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.imgOriginalCroppingParam),this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(this.imgOriginal.width,this.imgOriginal.height)),this.croppingDataTemp=this.imgOriginalCroppingParam},t.prototype.toModifiedImgCroppingParam=function(){this.img.width=this.imgCroppingParam.width,this.img.height=this.imgCroppingParam.height,this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.imgCroppingParam),this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(this.imgCroppingParam.width,this.imgCroppingParam.height)),this.croppingDataTemp=this.imgCroppingParam},t.prototype.updateMaskForCroppingShape=function(t,e){var i=document.createElement("canvas");i.style.width="100%",i.style.height="100%",i.width=t.width,i.height=t.height,i.style.position="absolute",this.model.modelViewWrapper.div.append(i);var n=i.getContext("2d");n.fillStyle=e,n.beginPath(),n.rect(0,0,i.width,i.height),n.closePath(),n.fill(),(0,o.JY)(n,this.croppingDataTemp.shape,0,0,this.croppingDataTemp.width,this.croppingDataTemp.height,!1)},t}(),z=function(){function t(t){this.model=t;var e=document.createElement("div");this.divUIWrapper=e,this.divUIWrapper.id="ExpressUI",this.divUIWrapper.style.zIndex="3",this.divUIWrapper.style.position="relative",this.divUIWrapper.style.width="100%",this.divUIWrapper.style.padding=this.model.app.param.themeUI.top.padding,this.divUIWrapper.style.height=this.model.app.param.themeUI.top.height,this.divUIWrapper.style.background=this.model.app.param.themeUI.top.background,this.divUIWrapper.style.marginBottom=this.model.app.param.themeUI.top.marginBottom,this.model.modelViewWrapper.divNGraphicsHost.prepend(this.divUIWrapper);var i=document.createElement("p");i.textContent="Image Annotation App V1",i.style.fontSize="12px;",i.style.color="#afafaf",i.style.pointerEvents="none",i.style.top="0px",i.style.left="20px",this.divUIWrapper.append(i),this.Layer0(),this.Layer1()}return t.prototype.destroy=function(){this.model.modelViewWrapper.divNGraphicsHost.removeChild(this.divUIWrapper)},t.prototype.updateStyle=function(t,e,i){this.divSizeFrameBG.style.backgroundColor="rgb("+t+","+i+","+e+")"},t.prototype.Layer0=function(){var t=this,e=this.model.app.param.themeUI.top.iconFill,i=document.createElement("div");i.style.margin="5px",i.style.marginBottom="20px",this.divUIWrapper.append(i);var n=(0,o.sR)((function(){t.model.app.api.onClickPlace()}),'\n            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'+e+'" viewBox="0 0 20 20">\n            <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z"/>\n            </svg>\n            ');n.style.transform="scale(1.7)",n.style.paddingRight="10px",i.append(n),i.append((0,o.sR)((function(){t.model.app.api.onClickCancel()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'+e+'" viewBox="0 0 20 20">\n                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>\n                </svg>\n                ',1.4)),i.append((0,o.sR)((function(){t.model.app.api.onClickBlackhole()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'+e+'" viewBox="0 0 20 20">\n                <path d="M4.146.146A.5.5 0 0 1 4.5 0h7a.5.5 0 0 1 .5.5c0 .68-.342 1.174-.646 1.479-.126.125-.25.224-.354.298v4.431l.078.048c.203.127.476.314.751.555C12.36 7.775 13 8.527 13 9.5a.5.5 0 0 1-.5.5h-4v4.5c0 .276-.224 1.5-.5 1.5s-.5-1.224-.5-1.5V10h-4a.5.5 0 0 1-.5-.5c0-.973.64-1.725 1.17-2.189A5.921 5.921 0 0 1 5 6.708V2.277a2.77 2.77 0 0 1-.354-.298C4.342 1.674 4 1.179 4 .5a.5.5 0 0 1 .146-.354z"/>\n                </svg>\n                ',1.4)),i.append((0,o.sR)((function(){}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'+e+'" viewBox="0 0 20 20">\n                <path fill-rule="evenodd" d="M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103zM10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8v12.98zm-6-.8V1.11l-4 .8v12.98l4-.8z"/>\n                </svg>\n                ',1.4)),i.append((0,o.sR)((function(){t.model.app.api.onClickCropper()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'+e+'" viewBox="0 0 20 20">\n                <path d="M3.5.5A.5.5 0 0 1 4 1v13h13a.5.5 0 0 1 0 1h-2v2a.5.5 0 0 1-1 0v-2H3.5a.5.5 0 0 1-.5-.5V4H1a.5.5 0 0 1 0-1h2V1a.5.5 0 0 1 .5-.5zm2.5 3a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4H6.5a.5.5 0 0 1-.5-.5z"/>\n                </svg>\n                ',1.4))},t.prototype.Layer1=function(){var t=this,e=document.createElement("div");this.divUIWrapper.append(e),e.append((0,o.sR)((function(){t.model.app.api.onclickActiveCommand(o.uA.SELECT)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onClickUndo()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onClickRedo()}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onclickActiveCommand(o.uA.POINT_REGULAR)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onclickActiveCommand(o.uA.POINT_NUMBERED)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <circle cx="8" cy="8" r="8"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onclickActiveCommand(o.uA.POLYLINE_BENDING)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onclickActiveCommand(o.uA.POLYGON_GRAPH)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M8.5.134a1 1 0 0 0-1 0l-6 3.577a1 1 0 0 0-.5.866v6.846a1 1 0 0 0 .5.866l6 3.577a1 1 0 0 0 1 0l6-3.577a1 1 0 0 0 .5-.866V4.577a1 1 0 0 0-.5-.866L8.5.134z"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onclickActiveCommand(o.uA.CIRCLE)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onclickActiveCommand(o.uA.RECTANGLE)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onclickActiveCommand(o.uA.ARROW_SINGLE)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M14 2.5a.5.5 0 0 0-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0v-6z"/>\n                </svg>\n                ')),e.append((0,o.sR)((function(){t.model.app.api.onclickActiveCommand(o.uA.ARROW_DOUBLE)}),'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707z"/>\n                </svg>\n                '))},t.prototype.initPost=function(){this.divSizeFrameBG=document.createElement("div"),this.divSizeFrameBG.style.textAlign="center",this.divSizeFrameBG.style.padding="10px",this.divSizeFrameBG.textContent="Size ",this.divWidth=document.createElement("input"),this.divWidth.style.width="50px",this.divWidth.setAttribute("type","text"),this.divWidth.setAttribute("min","100"),this.divSizeFrameBG.append(this.divWidth),this.divWidth.oninput=function(){},this.divHeight=document.createElement("input"),this.divHeight.style.width="50px",this.divHeight.setAttribute("type","text"),this.divHeight.setAttribute("min","100"),this.divSizeFrameBG.append(this.divHeight),this.divHeight.oninput=function(){},this.divUIWrapper.append(this.divSizeFrameBG)},t}(),D=function(){function t(t,e,i){void 0===i&&(i=o.An.Drawing),this.app=t,this.app.model=this,this.assets=new s(this),this.ioWrapper=new I(this),this.appCoreWrapper=new r(this,i),this.modelViewWrapper=new P(this,e),this.imageWrapper=new k(this),this.controllerWrapper=new h(this),this.app.param.UI&&(this.ui=new z(this)),this.init()}return t.prototype.resize=function(t,e){this.modelViewWrapper.div.style.width=t+"px",this.modelViewWrapper.div.style.height=e+"px"},t.prototype.initPost=function(){this.modelViewWrapper.initPost(),this.appCoreWrapper.initPost(),this.ioWrapper.initPost()},t.prototype.restart=function(){},t.prototype.destroy=function(){this.ui&&this.ui.destroy(),this.ioWrapper.destroy(),this.modelViewWrapper.removeDiv()},t.prototype.pushAction=function(t){this.ioWrapper.stateProcessing.pushAction(t)},t.prototype.pushTheme=function(t){this.app.implementations.pushTheme(t)},t.prototype.init=function(){},t}(),M=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function p(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,p)}s((n=n.apply(t,e||[])).next())}))},S=function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function p(r){return function(p){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,p])}}},O=function(){function t(t){this.addon=t}return t.prototype.initCropping=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2,i.e(2104).then(i.bind(i,2104)).then((function(t){t.AppImageEditing})).catch((function(t){throw console.debug("Stop loading Mapticon Addon."),console.debug(t),t}))]}))}))},t.prototype.initMapticon=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2]}))}))},t.prototype.initVisualizationJSAPI=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2]}))}))},t.prototype.initVisualizationExternalGLJSAPI=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2]}))}))},t.prototype.initDrawingBlock=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2]}))}))},t.prototype.initMapfilter=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2]}))}))},t.prototype.initQuickCommander=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2]}))}))},t.prototype.initSmartCommander=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2]}))}))},t.prototype.initSmartDrawing=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2]}))}))},t.prototype.initVoiceController=function(){return M(this,void 0,void 0,(function(){return S(this,(function(t){return[2]}))}))},t}(),W=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function p(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,p)}s((n=n.apply(t,e||[])).next())}))},L=function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function p(r){return function(p){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,p])}}},_=function(){function t(t){this._stopPropagation=!1,this._enablePan=!0,this.app=t,this.dynamicImport=new O(this)}return Object.defineProperty(t.prototype,"enablePan",{get:function(){return this.mapticon&&(this._enablePan=this.mapticon.enablePan),this._enablePan},set:function(t){this._enablePan=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stopPropagation",{get:function(){return this._stopPropagation},set:function(t){this._stopPropagation=t},enumerable:!1,configurable:!0}),t.prototype.MouseEventController=function(t){this.stopPropagation||(this.mapticon&&this.mapticon.MouseEventController(t),this.tourTool&&this.tourTool.MouseEventController(t))},t.prototype.KeyboardEventController=function(t){},t.prototype.TouchEventController=function(t){},t.prototype.Resize=function(t,e){this.mapfilter&&this.mapfilter.Resize(t,e)},t.prototype.InitMapticon=function(){return W(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.dynamicImport.initMapticon()]}))}))},t.prototype.InitVisualizationJSAPI=function(){return W(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.dynamicImport.initVisualizationJSAPI()]}))}))},t.prototype.InitVisualizationExternalGLJSAPI=function(){return W(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.dynamicImport.initVisualizationExternalGLJSAPI()]}))}))},t.prototype.InitDrawingBlock=function(){return W(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.dynamicImport.initDrawingBlock()]}))}))},t.prototype.InitMapfilter=function(){return W(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.dynamicImport.initMapfilter()]}))}))},t.prototype.InitQuickCommander=function(){return W(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.dynamicImport.initQuickCommander()]}))}))},t.prototype.InitSmartCommander=function(){return W(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.dynamicImport.initSmartCommander()]}))}))},t.prototype.InitSmartDrawing=function(){return W(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.dynamicImport.initSmartDrawing()]}))}))},t.prototype.InitVoiceController=function(){return W(this,void 0,void 0,(function(){return L(this,(function(t){return[2,this.dynamicImport.initVoiceController()]}))}))},t}(),N=function(){function t(t){this.app=t}return t.prototype.needRevertBaseImage=function(){return!this.app.model.imageWrapper.useModifiedImage},t.prototype.onclickActiveCommand=function(t){this.app.implementations.imageAnnoApp&&this.app.implementations.imageAnnoApp.activeCommandController.setActiveCommand(t)},t.prototype.onClickDestroy=function(){this.app.destroy()},t.prototype.onClickPlace=function(){this.emitDataToExpressImageData(),this.onClickDestroy()},t.prototype.getAllGeometries=function(){return this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()},t.prototype.shiftEnvironment=function(t){this.app.param.environment=t,this.app.implementations.imageAnnoApp.customization.themeRenderStyle.shiftEnvironment(t),this.app.implementations.imageAnnoApp.geometryCommon.gcmdSupporting.renderForce()},t.prototype.updateRPointPath=function(t){return this.app.implementations.imageAnnoApp.customization.themeRenderStyle.updateRPointPath(t),this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()},t.prototype.emitDataToExpressImageData=function(){this.app.implementations.imageAnnoApp.io.emitAction("update@"+JSON.stringify(this.getAllGeometries()))},t.prototype.onClickCancel=function(){this.onClickDestroy()},t.prototype.onClickBlackhole=function(){this.app.implementations.imageAnnoApp.apiWrapper.environment.shiftBlackholePos()},t.prototype.onClickReset=function(){},t.prototype.onClickUndo=function(){this.app.implementations.imageAnnoApp.scene.undo()},t.prototype.onClickRedo=function(){this.app.implementations.imageAnnoApp.scene.redo()},t.prototype.onClickDownload=function(){},t.prototype.onClickCapture=function(){},t.prototype.onClickSetColor=function(t,e){void 0===e&&(e=!0),this.app.implementations.imageAnnoApp.activeCommandController.activeColorController.setActiveColor(t,e)},t.prototype.setScaleGraphics=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.app.implementations.imageAnnoApp.activeCommandController.setScaleGraphics(t,e,i)},t.prototype.updateEffecting=function(t){this.app.model.imageWrapper.updateEffecting(t)},t.prototype.getCanvas=function(){return this.app.implementations.imageAnnoApp.geometryCommon.gcmdAProcessing.getCanvas()},t.prototype.getDataGeometry=function(){return this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()},t.prototype.getScaleFactor=function(){return this.app.implementations.imageAnnoApp.activeCommandController.scaleGlobal},t.prototype.onClickCropper=function(){},t.prototype.onClickRevertToOriginal=function(){this.app.implementations.imageAnnoApp&&(this.app.implementations.imageAnnoApp.geometryCommon.gcmdProcessing.resetGeometryList(),this.emitDataToExpressImageData(),this.app.model.imageWrapper.toOriginalImgCroppingParam(),this.app.model.imageWrapper.toOriginalImg(),this.app.implementations.imageAnnoApp.scene.captureScene(),this.app.implementations.imageAnnoApp.io.emitAction("markup@resizeDiv"))},t}(),T=function(){return T=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},T.apply(this,arguments)},R=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function p(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,p)}s((n=n.apply(t,e||[])).next())}))},V=function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function p(r){return function(p){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,p])}}},B={config:{BASE_URL:""},PATH_ADDON:"../../../../Addon",VERSION_APP:"2",HAS_ANIMATION:!1,LAB:!1},U=function(){function t(e,i,n){var r=this;void 0===n&&(n=o.BQ.AnnotationMap),this.CONFIG=B,this.PRODUCTION=!0,this.INSPECTION=!1,this.isLoaded=!1,this.APP=n,this.param=e,this.INSPECTION&&(this.PRODUCTION=!1),this.CONFIG.config=e.config;var a=e.UI;e.features&&e.features.hasAnimation&&(this.CONFIG.HAS_ANIMATION=e.features.hasAnimation),e.isLab&&(this.CONFIG.LAB=e.isLab,this.CONFIG.HAS_ANIMATION=!1),this.instanceID=t.id,this.api=new N(this),this.model=new D(this,this.param.id,this.param.interactionMode),void 0===this.param.rendererActive||!0===this.param.rendererActive?this.param.rendererActive=!0:this.param.rendererActive=!1,this.addon=new _(this),this.initImplementations().then((function(){r.param.renderer===o.g4.Svg?r.implementations.initAnnotationSVGInstance(r.CONFIG.HAS_ANIMATION,r.param.rendererActive,r.param.theme):(r.implementations.initAnnotationCanvasInstance(r.CONFIG.HAS_ANIMATION,r.param.rendererActive,r.param.theme),r.implementations.imageAnnoApp&&(r.implementations.imageAnnoApp.activeCommandController.acProperties.isActivateSnapping=!0)),a&&r.initViewController(),r.param.features&&r.param.features.mapFilter,r.initPost(),r.CONFIG.LAB&&r.initLab(),i.geometry&&i.geometry.length>0&&(r.implementations.imageAnnoApp&&(r.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.isActive=!1,r.implementations.imageAnnoApp.geometryCommon.gcmdProcessing.DumpByIGeometriesFromImageDataModel(i.geometry)),r.api.setScaleGraphics(i.scale,!0,!1)),r.implementations.imageAnnoApp&&r.implementations.imageAnnoApp.scene.captureScene()}))}return Object.defineProperty(t,"id",{get:function(){return this._id++},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setEnvironment",{set:function(t){this.param.environment=t},enumerable:!1,configurable:!0}),t.prototype.initImplementations=function(){return R(this,void 0,void 0,(function(){var t=this;return V(this,(function(e){return[2,i.e(8952).then(i.bind(i,8952)).then((function(e){var i=e.Implementations;t.implementations||(t.implementations=new i(t,t.model.modelViewWrapper.divNGraphicsHost))})).catch((function(t){throw console.debug("Stop loading mapticon."),console.debug(t),t}))]}))}))},t.prototype.initLab=function(){this.implementations.imageAnnoApp},t.prototype.initPost=function(){this.model.initPost(),this.implementations.initPost(),this.implementations.imageAnnoApp,this.param.renderer===o.g4.Svg&&(this.model.modelViewWrapper.divNGraphicsHost.style.pointerEvents="none"),this.model.imageWrapper.croppingDataTemp&&this.implementations.imageAnnoApp&&this.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.model.imageWrapper.croppingDataTemp),this.model.imageWrapper.img&&(this.param.colorCover?this.model.imageWrapper.updateImg(this.model.imageWrapper.img,this.param.colorCover):this.model.imageWrapper.updateImg(this.model.imageWrapper.img)),this.isLoaded=!0,this.initPostAppEnv()},t.prototype.initPostAppEnv=function(){this.implementations.imageAnnoApp&&(this.implementations.imageAnnoApp.activeCommandController.acProperties.isScaleDynamicRender=!0,this.implementations.imageAnnoApp.activeCommandController.acProperties.optimizerTextleaderline=o.Nv.Collision,this.param.features&&this.param.features.clustering&&this.implementations.imageAnnoApp.apiWrapper.environment.toggleClusteringPoint(this.param.features.clustering))},t.prototype.restart=function(){},t.prototype.toJson=function(){if(this.implementations.imageAnnoApp){var t=this.implementations.imageAnnoApp.renderer.saveDrawingGeometries();return Array.from(t).reduce((function(t,e){var i=e[1],n=i.id,o=i.type,r=i.nodes,a=i.data,p=i.styles;return t[n]=T(T({id:n,type:o,nodes:r},p&&Object.keys(p).length&&{styles:p}),a&&Object.keys(a).length&&{data:a}),t}),{})}return{}},t.prototype.pause=function(t){void 0===t&&(t=0),this.implementations.Pause(t)},t.prototype.resume=function(){this.implementations.resume()},t.prototype.destroy=function(){this.implementations&&this.implementations.destroy(),this.model&&this.model.destroy()},t.prototype.pushAction=function(t){t&&this.model.pushAction(t)},t.prototype.pushTheme=function(t){this.model.pushTheme(t)},t.prototype.bindActionEmitting=function(t){this.emitAction=t},t.prototype.resize=function(t,e){this.model.resize(t,e),this.implementations.resize(t,e)},t.prototype.initViewController=function(){return R(this,void 0,void 0,(function(){return V(this,(function(t){return[2]}))}))},t.prototype.open=function(){this.model.ioWrapper.open()},t.prototype.initImageByImg=function(t,e,i,n){this.model.imageWrapper.initImageByImg(t,e,i,n)},t.prototype.updateEffecting=function(t){this.api.updateEffecting(t)},t.prototype.initCropping=function(){this.addon.dynamicImport.initCropping()},t._id=0,t}()},4527:(t,e,i)=>{i.d(e,{$E:()=>n.$}),i(45);var n=i(2536);i(5462)},770:(t,e,i)=>{i.d(e,{Y4:()=>A,Us:()=>o.Us,uA:()=>a.uA,$b:()=>u.$,jp:()=>g,gj:()=>d,BQ:()=>o.BQ,Aq:()=>o.Aq,R7:()=>y,uD:()=>o.uD,ew:()=>p.e,$C:()=>p.$,ct:()=>o.ct,CF:()=>o.CF,mL:()=>st,QH:()=>ct,qA:()=>s.qA,Nq:()=>o.Nq,iu:()=>o.iu,oU:()=>s.oU,zq:()=>a.zq,An:()=>o.An,cg:()=>o.cg,hO:()=>o.hO,h9:()=>pt,aX:()=>ut,g:()=>o.g,xX:()=>o.xX,Nv:()=>o.Nv,oW:()=>o.oW,rO:()=>o.rO,g4:()=>o.g4,i$:()=>f.i,$u:()=>a.$u,PH:()=>o.PH,wn:()=>o.wn,fb:()=>h.f,c8:()=>Q,$5:()=>k,Lg:()=>U,$z:()=>G,ir:()=>_,EW:()=>r.EW,Ds:()=>c.D,p$:()=>C,xs:()=>Y,Cv:()=>l.Cv,$$:()=>R,Cj:()=>V,HP:()=>q,F$:()=>K,sR:()=>c.s,dX:()=>lt.dX,mI:()=>rt,Sm:()=>m.Sm,Sp:()=>M,Th:()=>W,CV:()=>O,iV:()=>S,fi:()=>N,nI:()=>L,$4:()=>D,aj:()=>l.vI,rv:()=>j,nP:()=>lt.nP,ee:()=>mt.ee,yP:()=>l.yP,sI:()=>l.sI,kt:()=>m.kt,Ux:()=>l.Ux,kC:()=>l.kC,yH:()=>l.yH,VT:()=>lt.VT,KF:()=>lt.KF,vQ:()=>B,Fs:()=>l.Fs,Qi:()=>w,lh:()=>F,Wo:()=>m.Wo,rW:()=>m.rW,AR:()=>l.AR,xt:()=>at,mp:()=>$,X0:()=>J,vD:()=>Z,Hq:()=>m.Hq,JY:()=>r.JY,zQ:()=>P,Vt:()=>et,Fv:()=>z,hW:()=>b,PD:()=>x,z1:()=>X,iC:()=>m.iC,Z3:()=>m.Z3,AJ:()=>m.AJ,DM:()=>nt,bA:()=>I,lu:()=>E});var n,o=i(4722),r=i(3160),a=i(5190),p=i(744),s=i(4199);!function(t){t.POINT_REGULAR="POINT_REGULAR",t.POINT_NUMBERED="POINT_NUMBERED",t.POINT_ICON="POINT_ICON",t.ARROW_SINGLE="ARROW_SINGLE",t.ARROW_DOUBLE="ARROW_DOUBLE",t.POLYLINE="POLYLINE",t.POLYGON="POLYGON",t.CIRCLE="CIRCLE",t.RECTANGLE="RECTANGLE",t.TEXT="TEXT"}(n||(n={}));var h=i(6027),u=(i(4527),i(1374)),c=i(8415),l=i(4415),m=i(6180),d=function(){this.isStandalone=!1,this.compileMode=o.ct.Development},f=i(6898),v=function(){this.clickLeft=!0,this.clickMiddle=!0,this.clickRight=!0,this.clickDouble=!0,this.mouseDown=!0,this.mouseMove=!0,this.mouseDrag=!0,this.keyDown=!0},g=function(){function t(t){this.currentControllerStatus=new v,this.drawing=new v,this.interactiveViewer=new v,this.viewer=new v,this.interactiveViewer.clickLeft=!0,this.interactiveViewer.clickMiddle=!1,this.interactiveViewer.clickRight=!1,this.interactiveViewer.clickDouble=!1,this.interactiveViewer.mouseDown=!0,this.interactiveViewer.mouseMove=!0,this.interactiveViewer.mouseDrag=!1,this.interactiveViewer.keyDown=!1,this.viewer.clickLeft=!1,this.viewer.clickMiddle=!1,this.viewer.clickRight=!1,this.viewer.clickDouble=!1,this.viewer.mouseDown=!1,this.viewer.mouseMove=!1,this.viewer.mouseDrag=!1,this.viewer.keyDown=!1,this.mode=t}return Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t,t===o.An.Drawing&&(this.currentControllerStatus=this.drawing),t===o.An.InteractiveViewer&&(this.currentControllerStatus=this.interactiveViewer),t===o.An.ObserveViewer&&(this.currentControllerStatus=this.viewer)},enumerable:!1,configurable:!0}),t.prototype.setAccessibility=function(t,e){t===o.An.Drawing&&(this.drawing.clickLeft=e.clickLeft,this.drawing.clickMiddle=e.clickMiddle,this.drawing.clickRight=e.clickRight,this.drawing.clickDouble=e.clickDouble,this.drawing.mouseDown=e.mouseDown,this.drawing.mouseMove=e.mouseMove,this.drawing.mouseDrag=e.mouseDrag),t===o.An.InteractiveViewer&&(this.currentControllerStatus=this.interactiveViewer),t===o.An.ObserveViewer&&(this.currentControllerStatus=this.viewer)},t}(),y=function(){function t(){this.detectBrowser(),this.detectIsMoile()}return t.prototype.detectBrowser=function(){-1===navigator.userAgent.indexOf("Edge")?(-1!==(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))&&(this._type=o.Aq.Opera),-1===navigator.userAgent.indexOf("Chrome")?-1===navigator.userAgent.indexOf("Safari")?-1===navigator.userAgent.indexOf("Firefox")?(-1!==navigator.userAgent.indexOf("MSIE")&&(this._type=o.Aq.Ie),this._type=o.Aq.Unknown):this._type=o.Aq.Firefox:this._type=o.Aq.Safari:this._type=o.Aq.Chrome):this._type=o.Aq.Edge},t.prototype.detectIsMoile=function(){this._isMobile=!1,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(this._isMobile=!0)},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile},enumerable:!1,configurable:!0}),t}(),w=function(t,e,i,n,o,r,a,p){return new pt(t,e,0)},A=function(t,e){var i=t[0].x,n=t[1].x,o=e[0].x,r=e[1].x,a=t[0].y,p=t[1].y,s=e[0].y,h=e[1].y;return i<=r&&n>=o&&a<=h&&p>=s},C=function(t){var e=new pt(t.x,t.y,t.z);return e.alt=t.alt,e.d=t.d,e.isModified=t.isModified,e.parent=t.parent,e.w=t.w,e},E=function(t,e){return new pt(t.x-e.x,t.y-e.y,t.z-e.z)},b=function(){return new pt(0,0,0)},x=function(t,e){return new pt(t.x+e.x,t.y+e.y,t.z+e.z)},I=function(t,e){return new pt(t.x*e,t.y*e,t.z*e)},P=function(t,e){return new pt(t.x+.5*(e.x-t.x),t.y+.5*(e.y-t.y),t.z+.5*(e.z-t.z))},k=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z},z=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return e<1e-4?new pt(t.x,t.y,t.z):new pt(t.x/e,t.y/e,t.z/e)},D=function(t){for(var e=0,i=0;i<t.length-1;i++)e+=(t[i].x-t[i+1].x)*(t[i].y+t[i+1].y);return e*=.5,Math.abs(e)},M=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))},S=function(t,e,i,n){return Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))},O=function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2]))},W=function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z)},L=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},_=function(t,e){return new pt(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},N=function(t,e,i){void 0===i&&(i=5);for(var n=[],o=(e.x-t.x)/i,r=(e.y-t.y)/i,a=(e.z-t.z)/i,p=0;p<i;++p){var s=t.x+o*p,h=t.y+r*p,u=t.z+a*p;n.push(new pt(s,h,u))}return n},T=function(t,e){var i=e.y*Math.PI/180-t.y*Math.PI/180,n=e.x*Math.PI/180-t.x*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t.y*Math.PI/180)*Math.cos(e.y*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6378.137},R=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);for(var i=new pt(t,e,0),n=0,o=0;o<1e4;++o){var r=T(i,new pt(i.x+n,i.y,i.z));if(1<r&&r<1.001)return i.x+n;n+=1e-5}return-1}(t,e),n=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);for(var i=new pt(t,e,0),n=0,o=0;o<1e4;++o){var r=T(i,new pt(i.x,i.y+n,i.z));if(1<r&&r<1.001)return i.y+n;n+=1e-5}return-1}(t,e);return new pt(i,n,0)},V=function(t,e){return 180*function(t,e){return Math.acos(function(t,e){return L(z(t),z(e))}(t,e))}(t,e)/Math.PI},B=function(t,e){var i=e.Sub(t),n=new pt(1,0,0);return i.y>0?-1*V(n,i):V(n,i)},U=function(t){for(var e=[],i=0;i<t.length;++i)if(i<t.length-1){var n=new pt(t[i].x,t[i].y,t[i].z);(r=new pt(t[i+1].x,t[i+1].y,t[i+1].z)).x-=n.x,r.y-=n.y,r.z-=n.z;var o=L(new pt(1,0,0),z(r));e.push(o)}else{var r;n=new pt(t[i].x,t[i].y,t[i].z),(r=new pt(t[0].x,t[0].y,t[0].z)).x-=n.x,r.y-=n.y,r.z-=n.z;var a=L(new pt(1,0,0),z(r));e.push(a)}return e},G=function(t){for(var e=rt(t),i=[],n=0;n<t.length;++n){var o=void 0,r=void 0;n<t.length-1?(o=new pt(t[n].x-e.x,t[n].y-e.y,t[n].z-e.z),r=new pt(t[n+1].x-e.x,t[n+1].y-e.y,t[n+1].z-e.z)):(o=new pt(t[n].x-e.x,t[n].y-e.y,t[n].z-e.z),r=new pt(t[0].x-e.x,t[0].y-e.y,t[0].z-e.z));var a=L(z(o),z(r));i.push(a)}return i},F=function(t){for(var e=rt(t),i=0,n=0,o=t.length,r=0;r<o;++r)i+=Math.abs(t[r].x-e.x),n+=Math.abs(t[r].y-e.y);return[i/(o+=2),n/o]},Y=function(t,e,i){e.x+=1e-5,e.y+=1e-5;var n=K(e,i),o=H(e,i,t.x,t.y,n,!0);return M(t,o)},H=function(t,e,i,n,o,r){void 0===r&&(r=!0);var a=new pt(t.x,t.y,t.z),p=new pt(e.x,e.y,e.z).Sub(a),s=new pt(i,n,0).Sub(a);p.unitize();var h=a.Add(p.Mult(L(s,p)));return r?J(h,o)?h:M(t,h)<M(e,h)?new pt(t.x,t.y,t.z):new pt(e.x,e.y,e.z):h},K=function(t,e){var i=[],n=0,o=0,r=0;n=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,r=t.z<e.z?t.z:e.z;var a=new pt(n,o,r);n=t.x>e.x?t.x:e.x,o=t.y>e.y?t.y:e.y,r=t.z>e.z?t.z:e.z;var p=new pt(n,o,r);return i.push(new pt(a.x,a.y,a.z)),i.push(new pt(p.x,a.y,a.z)),i.push(new pt(p.x,p.y,a.z)),i.push(new pt(a.x,p.y,a.z)),i},q=function(t){for(var e=[],i=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER,s=0;s<t.length;++s)i>t[s].x&&(i=t[s].x),n>t[s].y&&(n=t[s].y),o>t[s].z&&(o=t[s].z),r<t[s].x&&(r=t[s].x),a<t[s].y&&(a=t[s].y),p<t[s].z&&(p=t[s].z);return e.push(new pt(i,n,o)),e.push(new pt(r,a,p)),e},j=function(t){for(var e=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,r=Number.MIN_VALUE,a=Number.MIN_VALUE,p=0,s=t;p<s.length;p++){var h=s[p];e>h.x&&(e=h.x),i>h.y&&(i=h.y),n>h.z&&(n=h.z),o<h.x&&(o=h.x),r<h.y&&(r=h.y),a<h.z&&(a=h.z)}return[new pt(e,i,n),new pt(o,r,a)]},X=function(t,e){void 0===e&&(e=10);for(var i=[],n=0;n<t.length-1;++n){var o=t[n];if(!1!==o.d)for(var r=n+1;r<t.length;++r)M(o,t[r])<e&&(t[r].d=!1)}for(n=0;n<t.length;++n)!0===t[n].d&&i.push(t[n]);return i},J=function(t,e){for(var i=t.x,n=t.y,o=!1,r=0,a=e.length-1;r<e.length;a=r++){var p=e[r].x,s=e[r].y,h=e[a].x,u=e[a].y;s>n!=u>n&&i<(h-p)*(n-s)/(u-s)+p&&(o=!o)}return o},$=function(t,e,i){var n=t.x,o=t.y;return e.x<n&&n<i.x&&e.y<o&&o<i.y},Z=function(t,e,i,n){return!!(J(new pt(t.x-.5*e,t.y-.5*i),n)||J(new pt(t.x+.5*e,t.y-.5*i),n)||J(new pt(t.x+.5*e,t.y+.5*i),n)||J(new pt(t.x-.5*e,t.y+.5*i),n))},Q=function(t,e,i){for(var n=0;n<t.length-1;++n)if(tt(t[n],t[n+1],e,i))return!0;return!1},tt=function(t,e,i,n){var o,r,a,p=0,s=0,h=!1,u=!1;o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);var c=new pt(0,0,0);if(0!==o)return p=t.y-i.y,s=t.x-i.x,r=(n.x-i.x)*p-(n.y-i.y)*s,a=(e.x-t.x)*p-(e.y-t.y)*s,p=r/o,s=a/o,c.x=t.x+p*(e.x-t.x),c.y=t.y+p*(e.y-t.y),p>0&&p<1&&(h=!0),s>0&&s<1&&(u=!0),h&&u?c:void 0},et=function(t,e){for(var i=[],n=0;n<t.length;++n)i.push(it(t[n],e));return i},it=function(t,e){return new pt(t.x+e.x,t.y+e.y,t.z+e.z)},nt=function(t,e){for(var i=[],n=0;n<t.length;++n)i.push(ot(t[n],e));return i},ot=function(t,e){var i=Math.cos(.017453292519943278*e),n=Math.sin(.017453292519943278*e),o=t.x*i-t.y*n,r=t.x*n+t.y*i;return new pt(o,r,t.z)},rt=function(t){for(var e=new pt(0,0,0),i=0,n=t.length;i<n;++i)e.Add(t[i]);return e.Mult(1/t.length),e},at=function(t,e,i,n,o){return void 0===o&&(o=5),Math.pow(e.x-t.x,2)/Math.pow(o+i,2)+Math.pow(e.y-t.y,2)/Math.pow(o+n,2)<=1},pt=function(){function t(t,e,i){void 0===i&&(i=0),this.x=0,this.y=0,this.z=0,this.w=0,this.alt=0,this.d=!0,this.isModified=!1,this.x=t,this.y=e,this.z=i}return t.prototype.Mult=function(e){return this.x*=e,this.y*=e,this.z*=e,new t(this.x,this.y,this.z)},t.prototype.divByVal=function(e){return this.x/=e,this.y/=e,this.z/=e,new t(this.x,this.y,this.z)},t.prototype.Add=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,new t(this.x,this.y,this.z)},t.prototype.Sub=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,new t(this.x,this.y,this.z)},t.prototype.unitize=function(){return this.normalize()},t.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-4||(this.x=this.x/t,this.y=this.y/t,this.z=this.z/t),this},t}(),st=function(){function t(){}return t.simplifyPath=function(t,e){var i=this.computeDouglasPeucker(t,e);return i.push(t[t.length-1]),i},t.computeDouglasPeucker=function(t,e){if(t.length<=2)return[t[0]];for(var i,n=[],o=new ht(t[0],t[t.length-1]),r=0,a=0,p=1;p<=t.length-2;p++){var s=o.distanceToPoint(t[p]);s>r&&(r=s,a=p)}return r>=e?(i=t[a],o.distanceToPoint(i),n=(n=n.concat(this.computeDouglasPeucker(t.slice(0,a+1),e))).concat(this.computeDouglasPeucker(t.slice(a,t.length),e))):(i=t[a],o.distanceToPoint(i),n=[t[0]]),n},t.prototype.computeDouglasPeucker=function(t,e){if(t.length<=2)return[t[0]];for(var i,n=[],o=new ht(t[0],t[t.length-1]),r=0,a=0,p=1;p<=t.length-2;p++){var s=o.distanceToPoint(t[p]);s>r&&(r=s,a=p)}return r>=e?(i=t[a],o.distanceToPoint(i),n=(n=n.concat(this.computeDouglasPeucker(t.slice(0,a+1),e))).concat(this.computeDouglasPeucker(t.slice(a,t.length),e))):(i=t[a],o.distanceToPoint(i),n=[t[0]]),n},t}(),ht=function(){function t(t,e){this.p0=t,this.p1=e}return t.prototype.distanceToPoint=function(t){var e=(this.p1.y-this.p0.y)/(this.p1.x-this.p0.x),i=this.p0.y-e*this.p0.x,n=[];return n.push(Math.abs(t.y-e*t.x-i)/Math.sqrt(Math.pow(e,2)+1)),n.push(Math.sqrt(Math.pow(t.x-this.p0.x,2)+Math.pow(t.y-this.p0.y,2))),n.push(Math.sqrt(Math.pow(t.x-this.p1.x,2)+Math.pow(t.y-this.p1.y,2))),n.sort((function(t,e){return t-e}))[0]},t}(),ut=function(){function t(){this.t=0}return t.prototype.scale=function(t){return.2*(Math.sin(this.t)+5)*t},t.prototype.easeInElastic=function(t){return(.04-.04/t)*Math.sin(25*t)+1},t.prototype.easeOutElastic2=function(t){return Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1},t}(),ct=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){if("undefined"!=typeof document){var i=this.encode(JSON.stringify(t,null,4)),n=new Blob([i],{type:"esri/drawingTool"}),o=URL.createObjectURL(n),r=document.createElement("a");r.setAttribute("href",o),r.setAttribute("download",e);var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(a)}},t.prototype.encode=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t.charCodeAt(i));return new Uint8Array(e)},t.prototype.dummy=function(){},t}(),lt=i(9533),mt=i(2325)},45:(t,e,i)=>{i.d(e,{O:()=>n});var n=function(){}},2536:(t,e,i)=>{i.d(e,{$:()=>o});var n=i(4722),o=function(){function t(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.CLICK_TYPE=n.uD.Move,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.isActive=!0}return t.prototype.deepCopy=function(){var e=new t;return e.x=this.x,e.y=this.y,e.z=this.z,e.preX=this.preX,e.preY=this.preY,e.preZ=this.preZ,e.pressedAlt=this.pressedAlt,e.pressedShift=this.pressedShift,e.pressedCtrl=this.pressedCtrl,e.isDoubleClick=this.isDoubleClick,e.isDown=this.isDown,e.isMove=this.isMove,e.lat=this.lat,e.long=this.long,e.wheel=this.wheel,e.preWheel=this.preWheel,e.yGLPicking=this.yGLPicking,e.CLICK_TYPE=this.CLICK_TYPE,e.native=this.native,e},t}()},5462:(t,e,i)=>{i.d(e,{f:()=>o});var n=i(4722),o=function(){function t(){this.TOUCH_TYPE=n.wn.Move,this.eventList=[]}return t.prototype.build=function(t,e){for(var i=0;i<t.touches.length;++i){var n=new r;n.identifier=t.touches[i].identifier,n.TOUCH_TYPE=e,n.radiusX=t.touches[i].radiusX,n.radiusY=t.touches[i].radiusY,n.rotationAngle=t.touches[i].rotationAngle,n.x=t.touches[i].clientX,n.y=t.touches[i].clientY,n.force=t.touches[i].force,n.color=this.colorForTouch(t.touches[i]),this.eventList.push(n)}},t.prototype.deepCopy=function(){},t.prototype.colorForTouch=function(t){var e=t.identifier%16,i=Math.floor(t.identifier/3)%16,n=Math.floor(t.identifier/7)%16;return"#"+e.toString(16)+i.toString(16)+n.toString(16)},t}(),r=function(){function t(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.TOUCH_TYPE=n.wn.Move}return t.prototype.deepCopy=function(){var e=new t;return e.x=this.x,e.y=this.y,e.z=this.z,e.preX=this.preX,e.preY=this.preY,e.preZ=this.preZ,e.yGLPicking=this.yGLPicking,e.TOUCH_TYPE=this.TOUCH_TYPE,e},t}()}}]);
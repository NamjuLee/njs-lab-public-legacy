"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8516],{8516:(t,o,i)=>{i.r(o),i.d(o,{AppCanvasTemplate:()=>d});var e=i(906),n=function(){function t(t,o,i,n){void 0===n&&(n=0),this.r=5,this.fillColor="",this.v=new e.h9(o,i,n),this.render=t,this.render.pointList.push(this),this.fillColor="rgb("+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.random()+")"}return t.GetPoint=function(o,i,e,n){return void 0===n&&(n=0),new t(o,i,e,n)},t.prototype.Render=function(t){t.fillStyle=this.fillColor,t.beginPath(),t.arc(this.v.x,this.v.y,this.r,0,2*Math.PI),t.closePath(),t.fill()},t}(),s=function(){function t(t,o,i){this.width=5,this.strokeColor="",this.p0=o,this.p1=i,this.render=t,this.render.lineList.push(this),this.strokeColor="rgb("+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.random()+")"}return t.GetLine=function(o,i,e){return new t(o,i,e)},t.prototype.Render=function(t){this.p0&&this.p1&&(t.strokeStyle=this.strokeColor,t.beginPath(),t.moveTo(this.p0.v.x,this.p0.v.y),t.lineTo(this.p1.v.x,this.p1.v.y),t.closePath(),t.stroke())},t.prototype.ToJson=function(){var t=this.p0,o=this.p1;return{p0:{x:t.v.x,y:t.v.y},p1:{x:o.v.x,y:o.v.y}}},t}(),r=function(){function t(t,o,i){this.radius=5,this.width=5,this.strokeColor="",this.fillColor="",this.cv=o,this.radius=i,this.render=t,this.render.circleList.push(this),this.strokeColor="rgb("+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+255*Math.random()+","+Math.random()+")",this.fillColor="rgb("+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+255*Math.random()+","+Math.random()+")"}return t.GetCircle=function(o,i,e){return new t(o,i,e)},t.prototype.Render=function(t){t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.arc(this.cv.x,this.cv.y,this.radius,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()},t}(),h=function(){function t(t){this.mouse=new e.h9(0,0),this.capture=void 0,this.appCore=t,this.render=this.appCore.render,this.commander=new a(this)}return t.prototype.MouseMove=function(t,o){this.mouse.x=t,this.mouse.y=o},t.prototype.MouseDClick=function(t,o){this.mouse.x=t,this.mouse.y=o,this.commander.ToggleAutoPopulation()},t.prototype.MouseDown=function(t,o){this.mouse.x=t,this.mouse.y=o,this.appCore.io.GetGraph(this.render.lineList)},t.prototype.MouseLeftClick=function(t,o){var i=n.GetPoint(this.render,t,o);if(this.render.pointList.length>1){var e=this.commander.FindPoint(t,o);if(e){var r=s.GetLine(this.render,i,e);this.commander.GetCircleByLine(r)}}},t.prototype.MouseUp=function(t,o){this.mouse.x=t,this.mouse.y=o},t.prototype.MouseDrag=function(t,o){this.mouse.x=t,this.mouse.y=o},t}(),a=function(){function t(t){this.autoPopulation=!1,this.controller=t}return t.prototype.ToggleAutoPopulation=function(){this.autoPopulation=!this.autoPopulation},t.prototype.FindPoint=function(t,o){for(var i=this.controller.render,n=Number.MAX_SAFE_INTEGER,s=void 0,r=new e.h9(t,o),h=0,a=i.pointList;h<a.length;h++){var c=a[h],u=r.Distance(c.v);u>.1&&u<n&&(n=u,s=c)}return s||void 0},t.prototype.GetCircleByLine=function(t){var o=e.h9.MidVec(t.p0.v,t.p1.v),i=e.h9.Distance(t.p0.v,t.p1.v);r.GetCircle(this.controller.render,o,.5*i)},t}(),c=function(){function t(t){this.pointList=[],this.lineList=[],this.circleList=[],this.dt=0,this.appCore=t}return t.prototype.RenderPre=function(t){this.Render(t)},t.prototype.Render=function(t){for(var o=0;o<this.circleList.length;++o)this.circleList[o].Render(t);for(o=0;o<this.lineList.length;++o)this.lineList[o].Render(t);for(o=0;o<this.pointList.length;++o)this.pointList[o].Render(t);this.dt+=.1},t.prototype.RenderPost=function(t){},t}(),u=function(){function t(t){this.appCore=t}return t.prototype.GetGraph=function(t){console.log("get Graph",t);var o={},i=0;t.forEach((function(t){o[i]=t.ToJson(),i++})),console.log(o)},t}(),p=function(){function t(t,o,i){this.frame=0,this.DynamicGrid=t,this.Init(o-100,i-100)}return t.prototype.Init=function(t,o){this.io=new u(this),this.render=new c(this),this.controller=new h(this)},t.prototype.MouseMove=function(t,o){this.controller.MouseMove(t,o)},t.prototype.MouseDClick=function(t,o){this.controller.MouseDClick(t,o)},t.prototype.MouseDown=function(t,o){this.controller.MouseDown(t,o)},t.prototype.MouseLeftClick=function(t,o){this.controller.MouseLeftClick(t,o)},t.prototype.MouseUp=function(t,o){this.controller.MouseUp(t,o)},t.prototype.MouseDrag=function(t,o){this.controller.MouseDrag(t,o)},t.prototype.Render=function(t){if(this.render.RenderPre(t),this.controller.commander.autoPopulation){var o=this.DynamicGrid.CanvasCore.canvas.width,i=this.DynamicGrid.CanvasCore.canvas.height,e=Math.random()*o-.5*o+10,n=Math.random()*i-.5*i+10;this.MouseLeftClick(e,n)}},t}(),l=function(){function t(t,o,i){void 0===o&&(o=600),void 0===i&&(i=400),this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.app=t,this.width=o,this.height=i;var e=document.getElementById(t.id);e&&(this.host=e,this.InitCanvas())}return t.prototype.InitCanvas=function(){var t=document.createElement("div");if(t){this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);var o=document.createElement("div");if(o){this.divCanvas=o,this.divLocalMain.append(o);var i=document.createElement("canvas");if(i){this.canvas=i,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";var e=this.canvas.getContext("2d");e&&(this.ctx=e,this.Init())}}}},t.prototype.Init=function(){this.ctx.translate(.5*this.ctx.canvas.width,.5*this.ctx.canvas.height),this.ctx.scale(1,1),this.EventBind(),this.Loop()},t.prototype.EventBind=function(){var t=this;this.divCanvas.onclick=function(o){t.prevent=!1,t.timer=setTimeout((function(){if(!t.prevent){if(!t.click)return;t.MouseClickPre(o)}t.prevent=!1}),t.delay)},this.divCanvas.ondblclick=function(o){clearTimeout(t.timer),t.prevent=!0,t.MouseDoubleClickPre(o)},this.divCanvas.addEventListener("wheel",(function(o){return t.MouseWheel(o,o.deltaY)})),this.canvas.onmousedown=function(o){t.click=!0,t.pressed=!0,t.MouseDownPre(o)},this.canvas.onmouseup=function(o){t.pressed=!1,t.MouseUpPre(o)},this.canvas.onmousemove=function(o){t.pressed&&(t.click=!1,t.MouseDragPre(o)),t.MouseMovePre(o)},window.onresize=function(o){return t.Resize(o)}},t.prototype.Resize=function(t){},t.prototype.Loop=function(){var t=this;requestAnimationFrame((function(){t.Loop()})),this.ctx.clearRect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.Grid(this.ctx),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)},t.prototype.Grid=function(t){for(var o=-10;o<10;++o)for(var i=-10;i<10;++i)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(o,i,.05,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.Render=function(t){},t.prototype.MouseClickPre=function(t){this.MouseClick(t)},t.prototype.MouseClick=function(t){},t.prototype.MouseDoubleClickPre=function(t){this.MouseDoubleClick(t)},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDownPre=function(t){this.MouseDown(t)},t.prototype.MouseDown=function(t){},t.prototype.MouseUpPre=function(t){this.MouseUp(t)},t.prototype.MouseUp=function(t){},t.prototype.MouseMovePre=function(t){this.MouseMove(t)},t.prototype.MouseMove=function(t){},t.prototype.MouseDragPre=function(t){this.MouseDrag(t)},t.prototype.MouseDrag=function(t){},t.prototype.MouseWheel=function(t,o){},t}(),v=function(){function t(t){this.t=.9,this.m=new e.h9(0,0,0),this.id=t,this.CanvasCore=new l(this),this.Init(),this.InitApp()}return t.prototype.InitApp=function(){this.appCore=new p(this,this.CanvasCore.canvas.width,this.CanvasCore.canvas.height)},t.prototype.Init=function(){var t=this;this.CanvasCore.Render=function(o){return t.Render(o)},this.CanvasCore.MouseDown=function(o){return t.MouseDown(o)},this.CanvasCore.MouseClick=function(o){return t.MouseClick(o)},this.CanvasCore.MouseDoubleClick=function(o){return t.MouseDoubleClick(o)},this.CanvasCore.MouseUp=function(o){return t.MouseUp(o)},this.CanvasCore.MouseMove=function(o){return t.MouseMove(o)},this.CanvasCore.MouseDrag=function(o){return t.MouseDrag(o)}},t.prototype.Render=function(t){this.appCore.Render(t),t.fillStyle="rgba(255, 0, 0, 0.9)",t.beginPath(),t.arc(this.m.x,this.m.y,2.5,0,2*Math.PI),t.closePath(),t.fill()},t.prototype.Grid=function(t){},t.prototype.MouseDown=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseDown(this.m.x,this.m.y)},t.prototype.MouseUp=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseUp(this.m.x,this.m.y)},t.prototype.MouseMove=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseMove(this.m.x,this.m.y)},t.prototype.MouseDrag=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseDrag(this.m.x,this.m.y)},t.prototype.MouseClick=function(t){console.log("click"),this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseLeftClick(this.m.x,this.m.y)},t.prototype.MouseDoubleClick=function(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseDClick(this.m.x,this.m.y)},t}(),f=function(t){this.DynamicGridA=new v(t)},d=function(){function t(t){void 0===t&&(t="SandBox"),this.implementation=new f(t),console.log("AppCanvasTemplate 1000")}return t.Init=function(o){new t(o).Dummy()},t.prototype.Dummy=function(){},t}()}}]);
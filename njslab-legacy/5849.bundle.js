"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5849],{5849:(t,e,i)=>{i.r(e),i.d(e,{Demo200GridOptimizer:()=>b});var s,o=function(){},n=function(t){this.app=t},r=i(7435),h=i(8903),a=i(906);!function(t){t.PERSPECTIVE="PERSPECTIVE",t.ORTHOGRAPHIC="ORTHOGRAPHIC",t.STEREO="STEREO"}(s||(s={}));var p=function(){function t(t,e,i,o){void 0===o&&(o=s.PERSPECTIVE),this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.rotateRate=150,this.panRate=50,this.zoomRate=200,this.zoomFactor=1,this.frustumSize=.001,this.cameraShift=0,this.ableToMove=!0,this.canvas=t,this.type=o,this.width=e,this.height=i,this.type===s.PERSPECTIVE?this.GetPerspective(0,10,50):this.type===s.ORTHOGRAPHIC?this.GetOrthographic():this.type===s.STEREO&&this.GetStereo(),this.stereoCamera=new r.u37}return t.prototype.GetStereo=function(){},Object.defineProperty(t.prototype,"aspect",{get:function(){return this.width/this.height},set:function(t){this.type===s.PERSPECTIVE?this.cameraP.aspect=t:(this.type,s.ORTHOGRAPHIC)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this.type===s.PERSPECTIVE?this.cameraP:this.type===s.ORTHOGRAPHIC?this.cameraO:this.cameraP},enumerable:!1,configurable:!0}),t.prototype.GetPerspective=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=2),void 0===i&&(i=2),this.cameraP=new r.cPb(45,this.width/this.height,.01,1e4),this.cameraP.position.set(t,e,i),this.InitOrbitController()},t.prototype.GetOrthographic=function(){this.cameraO=new r.iKG(this.frustumSize*this.aspect/-2,this.frustumSize*this.aspect/2,this.frustumSize/2,this.frustumSize/-2,.01,5e4),this.cameraO.position.set(0,1,0),this.InitOrbitController()},t.prototype.InitOrbitController=function(){this.type===s.PERSPECTIVE?this.controls=new h.OrbitControls(this.cameraP,this.canvas.renderer.domElement):this.type===s.ORTHOGRAPHIC&&(this.controls=new h.OrbitControls(this.cameraO,this.canvas.renderer.domElement)),this.controls.minDistance=.01,this.controls.maxDistance=500,this.controls.enablePan=!0,this.controls.enableZoom=!0,this.yRotRate=this.rotateRate/this.width*Math.PI/90,this.xRotRate=this.rotateRate/this.height*Math.PI/180,this.xPanRate=this.panRate/this.width*this.zoomFactor,this.yPanRate=this.panRate/this.height*this.zoomFactor,this.zPanRate=this.zoomRate/this.height},t.prototype.EnableDamping=function(t,e){void 0===e&&(e=.35),this.controls.enableDamping=t,this.controls.dampingFactor=e},t.prototype.MouseDown=function(t,e){this.initX=this.prevX=t,this.initY=this.prevY=e},t.prototype.MouseMove=function(t,e,i){void 0===i&&(i=!1);var s=t-this.prevX,o=e-this.prevY;i?(this.controls.panLeft(s*this.xPanRate,this.cameraP.matrix),this.controls.panUp(o*this.yPanRate,this.cameraP.matrix)):(this.controls.rotateLeft(s*this.xRotRate),this.controls.rotateUp(o*this.yRotRate)),this.prevX=t,this.prevY=e},t.prototype.MouseWheel=function(t){this.controls.enableZoom=!0,t*=.1;var e=100*this.cameraP.position.length();this.zoomFactor=e,t>0?(this.cameraP.position.x*=.9,this.cameraP.position.y*=.9,this.cameraP.position.z*=.9):(this.cameraP.position.x*=1.1,this.cameraP.position.y*=1.1,this.cameraP.position.z*=1.1)},t.prototype.ShiftCamera=function(){this.cameraShift++,2===this.cameraShift&&(this.cameraShift=0),0===this.cameraShift?this.GetPerspective():1===this.cameraShift&&this.GetOrthographic()},t.prototype.MouseEventController=function(t){t.CLICK_TYPE===a.uh.DOWN&&this.MouseDown(t.x,t.y),t.CLICK_TYPE===a.uh.DRAG&&this.MouseMove(t.x,t.y,t.pressedShift),t.CLICK_TYPE===a.uh.WHEEL&&this.MouseWheel(t.wheel)},t}(),c=function(){function t(t,e){this.bg=0,this.isActive=!0,this.canvasWrapper=t,this.hostDiv=e,this.Init()}return t.prototype.Init=function(){var t=this.hostDiv.clientWidth,e=this.hostDiv.clientHeight;this.renderer=new r.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(t/e),this.camera=new p(this,t,e),this.scene=new r.xsS,this.renderer.domElement.id="dynamic-spring",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.pointerEvents="none",this.renderer.setSize(t,e),this.hostDiv.appendChild(this.renderer.domElement),this.RenderLoop(this)},t.prototype.RenderLoop=function(t){var e=this;this.isActive&&(requestAnimationFrame((function(){e.RenderLoop(e)})),this.UpdateBinding(),this.camera.controls.update(),this.renderer.render(this.scene,this.camera.camera))},t.prototype.UpdateBinding=function(){console.log("implementation needed")},t.prototype.ResizeCanvas=function(t,e){this.camera.aspect=t/e,this.camera.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)},t.prototype.ResizeEffect=function(t,e){},t.prototype.Remove=function(){for(;this.scene.children.length;)this.scene.remove(this.scene.children[0])},t}(),u=function(t){this.graphicsCoreWrapper=t,this.canvasThree=new c(this,this.graphicsCoreWrapper.app.divHost)},l=function(){function t(t){this.app=t,this.canvasWrapper=new u(this)}return t.prototype.Resize=function(t,e){this.canvasWrapper.canvasThree.ResizeCanvas(t,e)},t.prototype.Dispose=function(){this.canvasWrapper.canvasThree.isActive=!1},t}(),d=function(){function t(t){this.scene=t}return t.prototype.MouseEventController=function(t){this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.MouseEventController(t),t.CLICK_TYPE!==a.uh.LEFT?t.CLICK_TYPE!==a.uh.MIDDLE?t.CLICK_TYPE!==a.uh.DOWN_RIGHT?t.CLICK_TYPE!==a.uh.DOUBLE?t.CLICK_TYPE!==a.uh.MOVE?t.CLICK_TYPE!==a.uh.DRAG?t.CLICK_TYPE!==a.uh.DOWN?t.CLICK_TYPE!==a.uh.UP||this.MouseUpPre(t):this.MouseDownPre(t):this.MouseDragPre(t):this.MouseMovePre(t):this.MouseDoubleClickPre(t):this.MouseRightClickPre(t):this.MouseMiddleClickPre(t):this.MouseLeftClickPre(t)},t.prototype.MouseDown=function(t){},t.prototype.MouseDownPre=function(t){this.scene.MouseDown(t.x,t.y),this.MouseDown(t)},t.prototype.MouseLeftClick=function(t){},t.prototype.MouseLeftClickPre=function(t){this.MouseLeftClick(t)},t.prototype.MouseMiddleClick=function(t){},t.prototype.MouseMiddleClickPre=function(t){this.MouseMiddleClick(t)},t.prototype.MouseRightClick=function(t){},t.prototype.MouseRightClickPre=function(t){this.MouseRightClick(t)},t.prototype.MouseUp=function(t){},t.prototype.MouseUpPre=function(t){this.scene.MouseUp(t.x,t.y),this.MouseUp(t)},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDoubleClickPre=function(t){this.MouseDoubleClick(t)},t.prototype.MouseMove=function(t){},t.prototype.MouseMovePre=function(t){this.scene.MouseMove(t.x,t.y),this.MouseMove(t)},t.prototype.MouseDrag=function(t){},t.prototype.MouseDragPre=function(t){this.scene.MouseDrag(t.x,t.y),this.MouseDrag(t)},t}(),f=function(){function t(t){this.listMesh=[],this.raycaster=new r.iMs,this.m=new r.FM8(0,0),this.scene=t,this.raycaster.params.Points={threshold:.1}}return t.prototype.Raycast=function(t,e,i){this.m.x=t/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth*2-1,this.m.y=-e/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(this.m,this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);var s=this.raycaster.intersectObjects(i);if(s.length>0){var o=s[0];console.log(o.point)}},t.prototype.RaycastPoint=function(t,e,i){this.raycaster.params.Points={threshold:5},this.m.x=t/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth*2-1,this.m.y=-e/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(this.m,this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);var s=this.raycaster.intersectObjects(i);if(s.length>0){var o=s[0];return[o.point.x,o.point.y,o.point.z]}return null},t}(),v=function(){function t(t){this.sceneWrapper=t,this.Init()}return t.prototype.Init=function(){this.hemiLight=new r.vmT(16777215,16777215,.6),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.sceneWrapper.scene.add(this.hemiLight),this.dirLight=new r.Ox3(16777215,1),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(-1,1.75,1),this.dirLight.position.multiplyScalar(30),this.dirLight.castShadow=!0,this.dirLight.shadow.mapSize.width=4096,this.dirLight.shadow.mapSize.height=4096,this.dirLight.shadow.camera.left=-50,this.dirLight.shadow.camera.right=50,this.dirLight.shadow.camera.top=50,this.dirLight.shadow.camera.bottom=-50,this.dirLight.shadow.bias=-1e-4,this.dirLight.shadow.camera.near=.001,this.dirLight.shadow.camera.far=350,this.sceneWrapper.scene.add(this.dirLight)},t.prototype.Dispose=function(){this.dirLight.visible=!1,this.hemiLight.visible=!1,this.sceneWrapper.scene.remove(this.dirLight),this.sceneWrapper.scene.remove(this.hemiLight)},t}(),m=function(){function t(t){this.definition=t}return t.prototype.AddPolyline=function(t,e){void 0===e&&(e="red");var i=new r.ZXM;t.forEach((function(t){i.vertices.push(new r.Pa4(t[0],t[1],t[2]))}));var s=new r.nls({color:e,linewidth:1,transparent:!0,opacity:.55}),o=new r.x12(i,s);this.definition.scene.add(o)},t.prototype.AddRect=function(t,e){void 0===e&&(e="red");var i=new r.ZXM;console.log(t.length);for(var s=0;s<t.length;++s)i.vertices.push(new r.Pa4(t[s][0],t[s][1],t[s][2]));var o=new r.nls({color:e,linewidth:5}),n=new r.x12(i,o);this.definition.scene.add(n)},t.prototype.AddRectMash=function(t,e){void 0===e&&(e="red");var i=new r.ZXM;console.log(t.length);for(var s=0;s<t.length;++s)i.vertices.push(new r.Pa4(t[s][0],t[s][1],t[s][2]));i.faces.push(new r.G_f(0,1,2)),i.faces.push(new r.G_f(0,2,3));var o=new r.vBJ({color:16776960,side:r.ehD}),n=new r.Kj0(i,o);this.definition.scene.add(n)},t.prototype.AddPoint=function(t,e){void 0===e&&(e="#00afaf");var i=new r.ZXM;i.vertices.push(new r.Pa4(t[0],t[1],t[2]));var s=new r.UY4({size:4,sizeAttenuation:!1,color:e}),o=new r.woe(i,s);this.definition.scene.add(o)},t}(),y=function(){function t(){this.min=new a.h9(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.max=new a.h9(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER)}return t.prototype.Update=function(t){this.min=new a.h9(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.max=new a.h9(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(var e=0;e<t.length;++e)t[e].x<this.min.x&&(this.min.x=t[e].x),t[e].y<this.min.y&&(this.min.y=t[e].y),t[e].z<this.min.z&&(this.min.z=t[e].z),t[e].x>this.max.x&&(this.max.x=t[e].x),t[e].y>this.max.y&&(this.max.y=t[e].y),t[e].z>this.max.z&&(this.max.z=t[e].z)},t}(),E=function(){function t(){this.vertices=[],this.boundingBox=new y}return t.GetPolylineTemp=function(){var e=new t;return e.Add(10,10),e.Add(-5,8),e.Add(-7,-10),e.Add(-1,-8),e.Add(10,10),e},t.prototype.Add=function(t,e,i){void 0===i&&(i=0),this.vertices.push(new a.h9(t,e,i)),this.boundingBox.Update(this.vertices)},t.prototype.GetVerticesForThree=function(){var t=[];return this.vertices.forEach((function(e){t.push([e.x,e.z,e.y])})),t},t.prototype.GetCenterVec=function(){for(var t=new a.h9(0,0,0),e=0;e<this.vertices.length-1;++e)t.x+=this.vertices[e].x,t.y+=this.vertices[e].y,t.z+=this.vertices[e].z;return t.x/=this.vertices.length-1,t.y/=this.vertices.length-1,t.z/=this.vertices.length-1,t},t}(),g=function(t,e){var i=Math.cos(.017453292519943278*e),s=Math.sin(.017453292519943278*e);t.x=t.x*i-t.y*s,t.y=t.x*s+t.y*i},C=function(){function t(t,e,i,s){this.vertices=[],this.color="green",this.vertices=[t,e,i,s]}return t.prototype.GetVerticesForThree=function(){return[[this.vertices[0].x,this.vertices[0].z,this.vertices[0].y],[this.vertices[1].x,this.vertices[1].z,this.vertices[1].y],[this.vertices[2].x,this.vertices[2].z,this.vertices[2].y],[this.vertices[3].x,this.vertices[3].z,this.vertices[3].y],[this.vertices[0].x,this.vertices[0].z,this.vertices[0].y]]},t}(),P=function(){function t(t,e,i,s,o,n){this.isInside=!0,this.grid=t,this.i=e,this.j=i,this.v=s,this.width=o,this.height=n,this.rect=new C(new a.h9(this.v.x-.5*this.width,this.v.y-.5*this.height),new a.h9(this.v.x+.5*this.width,this.v.y-.5*this.height),new a.h9(this.v.x+.5*this.width,this.v.y+.5*this.height),new a.h9(this.v.x-.5*this.width,this.v.y+.5*this.height))}return t.prototype.GetVerticesForThree=function(){return this.rect.GetVerticesForThree()},t.prototype.Rotate=function(t){!function(t,e){for(var i=0;i<t.length;++i)g(t[i],e)}(function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var s=Array(t),o=0;for(e=0;e<i;e++)for(var n=arguments[e],r=0,h=n.length;r<h;r++,o++)s[o]=n[r];return s}([this.v],this.rect.vertices),t)},Object.defineProperty(t.prototype,"color",{get:function(){return this.rect.color},enumerable:!1,configurable:!0}),t}(),M=function(){function t(t,e,i){this.pts=[],this.cells=[],this.optimizer=t,this.min=e,this.max=i}return t.prototype.Init=function(t,e){this.rx=t,this.ry=e,this.intervalX=(this.max.x-this.min.x)/(this.rx-1),this.intervalY=(this.max.y-this.min.y)/(this.ry-1),this.cells=[],this.InitCell(),this.Rotate(),this.UpdateInside()},t.prototype.InitCell=function(){for(var t=0;t<this.ry;++t){for(var e=this.min.y+t*this.intervalY,i=[],s=0;s<this.rx;++s){var o=this.min.x+s*this.intervalX,n=new a.h9(o,e);this.pts.push(n),i.push(new P(this,s,t,n,this.intervalX,this.intervalY))}this.cells.push(i)}},t.prototype.Rotate=function(){for(var t=0;t<this.ry;++t)for(var e=0;e<this.rx;++e)this.cells[t][e].Rotate(15)},t.prototype.UpdateInside=function(){for(var t=0;t<this.ry;++t)for(var e=0;e<this.rx;++e){var i=this.cells[t][e];a.h9.IsInsideOfVecsWtihVecs(i.rect.vertices,this.optimizer.polyline.vertices)?(i.rect.color="black",i.v.color="black",i.isInside=!0):(i.rect.color="#efefef",i.v.color="efefef",i.isInside=!1,i.rect.vertices.forEach((function(t){t.x-=.1})))}},t}(),w=function(){function t(t,e,i){this.gridOptimizerApp=t,this.rx=e,this.ry=i,this.InitPolyline(),this.InitGridSyste()}return t.prototype.InitPolyline=function(){this.polyline=E.GetPolylineTemp()},t.prototype.InitGridSyste=function(){this.gridSystem=new M(this,this.polyline.boundingBox.min,this.polyline.boundingBox.max),this.gridSystem.Init(this.rx,this.ry)},t}(),I=function(){function t(t){this.definition=t,this.optimizer=new w(this,15,8),this.AddPolyline(),this.AddPoints(),this.AddRects()}return t.prototype.AddPolyline=function(){this.definition.renderer.AddPolyline(this.optimizer.polyline.GetVerticesForThree())},t.prototype.AddPoints=function(){var t=this;this.optimizer.gridSystem.pts.forEach((function(e){t.definition.renderer.AddPoint([e.x,e.z,e.y],e.color)}))},t.prototype.AddRects=function(){for(var t=0;t<this.optimizer.gridSystem.cells.length;++t)for(var e=0;e<this.optimizer.gridSystem.cells[t].length;++e){var i=this.optimizer.gridSystem.cells[t][e].GetVerticesForThree();i&&this.definition.renderer.AddRect(i,this.optimizer.gridSystem.cells[t][e].color)}},t}(),R=function(){function t(t){this.m=new a.h9(0,0,0),this.scene=t,this.renderer=new m(this),this.init(),console.log("grid optimizer")}return t.prototype.init=function(){this.gridOptimizerApp=new I(this)},t.prototype.update=function(){},t.prototype.mouseMove=function(t,e,i){},t.prototype.mouseDrag=function(t,e){},t.prototype.mouseDown=function(t,e,i){},t.prototype.mouseUp=function(){},t.prototype.dispose=function(){},t}(),T=function(){function t(t){var e=this;this.app=t,this.activeCommandController=new d(this),this.scene=this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.scene,this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.UpdateBinding=function(){e.Update()},this.lightingController=new v(this),this.geometryCommon=new f(this),this.Init()}return t.prototype.Init=function(){this.definition=new R(this.scene);var t=new r.VLJ(10,10,13421772,15658734);this.scene.add(t)},t.prototype.Update=function(){this.definition.update()},t.prototype.MouseMove=function(t,e){this.definition.mouseMove(t,e,0)},t.prototype.MouseDown=function(t,e){this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.ableToMove=!1,this.definition.mouseDown(t,e,0)},t.prototype.MouseUp=function(t,e){this.definition.mouseUp(),this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.ableToMove=!0},t.prototype.MouseDrag=function(t,e){this.definition.mouseDrag(t,e)},t.prototype.Dispose=function(){this.definition.dispose()},t}(),x=function(){function t(t){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.CLICK_TYPE=a.uh.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.isActive=!0,null!=t&&(this.app=t)}return t.prototype.DeepCopy=function(){var e=new t(this.app);return e.x=this.x,e.y=this.y,e.z=this.z,e.preX=this.preX,e.preY=this.preY,e.preZ=this.preZ,e.pressedAlt=this.pressedAlt,e.pressedShift=this.pressedShift,e.pressedCtrl=this.pressedCtrl,e.isDoubleClick=this.isDoubleClick,e.isDown=this.isDown,e.isMove=this.isMove,e.lat=this.lat,e.long=this.long,e.wheel=this.wheel,e.preWheel=this.preWheel,e.yGLPicking=this.yGLPicking,e.CLICK_TYPE=this.CLICK_TYPE,e.native=this.native,e},t}(),D=function(){function t(t){this.mouseEventDataPre=new x,this.isEnable=!0,this.clickCount=0,this.click=!1,this.prevent=!1,this.delay=250,this.down=!1,this._stopPropagation=!1,this.app=t}return t.prototype.InitNativeMouseEvent=function(t){var e=this;t.onclick=function(t){e.prevent=!1,e.timer=setTimeout((function(){e.prevent||(e.MouseClick(t),t.stopPropagation()),e.prevent=!1}),e.delay)},t.ondblclick=function(t){clearTimeout(e.timer),e.prevent=!0,e.MouseDoubleClick(t)},t.onmousedown=function(t){e.MouseDown(t),t.stopPropagation()},t.onmouseup=function(t){e.MouseUp(t),t.stopPropagation()},t.onmousemove=function(t){e.MouseMove(t),t.stopPropagation()},t.addEventListener("wheel",(function(t){e.MouseWheel(t,t.deltaY),t.stopPropagation()}))},t.prototype.MouseDown=function(t){this.click=!0,this.down=!0;var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.DOWN,e.isDown=!0,this.MouseEvenEmitting(e)},t.prototype.MouseClick=function(t){if(this.click){var e=this.CommonEventBuilder(t);0===t.button?e.CLICK_TYPE=a.uh.LEFT:1===t.button?e.CLICK_TYPE=a.uh.MIDDLE:2===t.button&&(e.CLICK_TYPE=a.uh.RIGHT),this.MouseEvenEmitting(e)}},t.prototype.MouseDoubleClick=function(t){var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.DOUBLE,this.MouseEvenEmitting(e)},t.prototype.MouseDrag=function(t){this.click=!1,this.prevent=!0;var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.DRAG,e.isDown=!0,1===t.buttons?e.CLICK_TYPE=a.uh.DRAG:4===t.buttons?e.CLICK_TYPE=a.uh.DRAG_MIDDLE:2===t.buttons&&(e.CLICK_TYPE=a.uh.DRAG_RIGHT),this.MouseEvenEmitting(e)},t.prototype.MouseMove=function(t){if(this.down)this.MouseDrag(t);else{var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.MOVE,e.isDown=!0,this.prevent=!0,this.MouseEvenEmitting(e)}},t.prototype.MouseUp=function(t){this.down=!1,this.click=!0;var e=this.CommonEventBuilder(t);e.CLICK_TYPE=a.uh.UP,e.isDown=!1,this.MouseEvenEmitting(e)},t.prototype.MouseWheel=function(t,e){var i=this.CommonEventBuilder(t);i.wheel=e,i.CLICK_TYPE=a.uh.WHEEL,this.MouseEvenEmitting(i)},t.prototype.CommonEventBuilder=function(t){var e=new x(this.app);return e.preX=this.mouseEventDataPre.x,e.preY=this.mouseEventDataPre.y,e.pressedShift=t.shiftKey,e.pressedAlt=t.altKey,e.pressedCtrl=t.ctrlKey,e.x=t.offsetX,e.y=t.offsetY,e.preWheel=this.mouseEventDataPre.wheel,e.wheel=0,e.native=t,this.mouseEventDataPre=e,this.e=e,e},Object.defineProperty(t.prototype,"stopPropagation",{get:function(){return this._stopPropagation},set:function(t){var e=this;t?this._stopPropagation=t:setTimeout((function(){e._stopPropagation=t}),500)},enumerable:!1,configurable:!0}),t.prototype.MouseEvenEmitting=function(t){this.app.MouseEventController(t)},t}(),L=function(t){this.app=t,this.mouseInteraction=new D(this.app),this.mouseInteraction.InitNativeMouseEvent(this.app.divHost)},b=function(){function t(t){var e=document.getElementById(t);e&&(this.divHost=e),this.asset=new o,this.viewWrapper=new n(this),this.graphicsCoreWrapper=new l(this),this.sceneWrapper=new T(this),this.io=new L(this)}return t.Init=function(e){new t(e)},t.prototype.MouseEventController=function(t){this.sceneWrapper.activeCommandController.MouseEventController(t)},t.prototype.Resize=function(t,e){this.graphicsCoreWrapper.Resize(t,e)},t.prototype.Dispose=function(){this.graphicsCoreWrapper.Dispose(),this.sceneWrapper.Dispose()},t.prototype.Dummy=function(){},t}()}}]);
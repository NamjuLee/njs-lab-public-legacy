"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5805],{5805:(e,t,i)=>{i.r(t),i.d(t,{AppAlgorithmEnv:()=>_});var o=i(7708),n=function(){function e(e){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.CLICK_TYPE=o.uh.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.isActive=!0,null!=e&&(this.model=e)}return e.prototype.DeepCopy=function(){var t=new e(this.model);return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.pressedAlt=this.pressedAlt,t.pressedShift=this.pressedShift,t.pressedCtrl=this.pressedCtrl,t.isDoubleClick=this.isDoubleClick,t.isDown=this.isDown,t.isMove=this.isMove,t.lat=this.lat,t.long=this.long,t.wheel=this.wheel,t.preWheel=this.preWheel,t.yGLPicking=this.yGLPicking,t.CLICK_TYPE=this.CLICK_TYPE,t.command=this.command,t.native=this.native,t},e}(),r=function(){function e(e){this.mouseEventDataPre=new n,this.isEnable=!0,this.clickCount=0,this.click=!1,this.prevent=!1,this.delay=250,this.down=!1,this._stopPropagation=!1,this.model=e}return e.prototype.InitNativeMouseEvent=function(e){var t=this;e.onclick=function(e){t.prevent=!1,t.timer=setTimeout((function(){t.prevent||t.MouseClick(e),t.prevent=!1}),t.delay)},e.ondblclick=function(e){clearTimeout(t.timer),t.prevent=!0,t.MouseDoubleClick(e)},e.onmousedown=function(e){t.MouseDown(e)},e.onmouseup=function(e){t.MouseUp(e)},e.onmousemove=function(e){t.MouseMove(e)},e.addEventListener("wheel",(function(e){return t.MouseWheel(e,e.deltaY)}))},e.prototype.MouseDown=function(e){this.click=!0,this.down=!0;var t=this.CommonEventBuilder(e);t.CLICK_TYPE=o.uh.DOWN,t.isDown=!0,this.MouseEvenEmitting(t)},e.prototype.MouseClick=function(e){if(this.click){var t=this.CommonEventBuilder(e);0===e.button?t.CLICK_TYPE=o.uh.LEFT:1===e.button?t.CLICK_TYPE=o.uh.MIDDLE:2===e.button&&(t.CLICK_TYPE=o.uh.RIGHT),this.MouseEvenEmitting(t)}},e.prototype.MouseDoubleClick=function(e){var t=this.CommonEventBuilder(e);t.CLICK_TYPE=o.uh.DOUBLE,this.MouseEvenEmitting(t)},e.prototype.MouseDrag=function(e){this.click=!1,this.prevent=!0;var t=this.CommonEventBuilder(e);t.CLICK_TYPE=o.uh.DRAG,t.isDown=!0,1===e.buttons?t.CLICK_TYPE=o.uh.DRAG:4===e.buttons?t.CLICK_TYPE=o.uh.DRAG_MIDDLE:2===e.buttons&&(t.CLICK_TYPE=o.uh.DRAG_RIGHT),this.MouseEvenEmitting(t)},e.prototype.MouseMove=function(e){if(this.down)this.MouseDrag(e);else{var t=this.CommonEventBuilder(e);t.CLICK_TYPE=o.uh.MOVE,t.isDown=!0,this.prevent=!0,this.MouseEvenEmitting(t)}},e.prototype.MouseUp=function(e){this.down=!1,this.click=!0;var t=this.CommonEventBuilder(e);t.CLICK_TYPE=o.uh.UP,t.isDown=!1,this.MouseEvenEmitting(t)},e.prototype.MouseWheel=function(e,t){var i=this.CommonEventBuilder(e);i.wheel=t,i.CLICK_TYPE=o.uh.WHEEL,this.MouseEvenEmitting(i)},e.prototype.CommonEventBuilder=function(e){var t=new n(this.model);return t.preX=this.mouseEventDataPre.x,t.preY=this.mouseEventDataPre.y,t.pressedShift=e.shiftKey,t.pressedAlt=e.altKey,t.pressedCtrl=e.ctrlKey,t.x=e.offsetX,t.y=e.offsetY,t.preWheel=this.mouseEventDataPre.wheel,t.wheel=0,t.native=e,this.mouseEventDataPre=t,this.e=t,t},Object.defineProperty(e.prototype,"stopPropagation",{get:function(){return this._stopPropagation},set:function(e){var t=this;e?this._stopPropagation=e:setTimeout((function(){t._stopPropagation=e}),500)},enumerable:!1,configurable:!0}),e.prototype.MouseEvenEmitting=function(e){this.MouseEventEmittingForViewController(e),this._stopPropagation||this.MouseEventEmittingForModel(e)},e.prototype.MouseEventEmittingForViewController=function(e){this.mouseInteractionUI&&this.mouseInteractionUI.MouseInteractionMenu(e)},e.prototype.MouseEventEmittingForModel=function(e){e.model.controllerCoreWrapper.activeCommandController.MouseEventController(e)},e}(),s=function(){function e(e){this.appCoreWrapper=e,this.mouseInteraction=new r(this.appCoreWrapper.model)}return e.prototype.InitEventListener=function(e){this.mouseInteraction.InitNativeMouseEvent(e),this.Resize()},e.prototype.Resize=function(){var e=this;window.addEventListener("resize",(function(t){return e.ReSizeWindow(t)}))},e.prototype.ReSizeWindow=function(e){var t=this.appCoreWrapper.model.modelViewCoreWrapper.viewWrapper.divHost;this.appCoreWrapper.model.graphicsCoreWrapper.canvasWrapper.canvas.ResizeCanvas(t.clientWidth,t.clientHeight)},e}(),p=function(e,t){this.model=e,this.appProperties=new o.gj,this.browserUtility=new o.R7,this.ioWrapper=new s(this)},h=function(){function e(e){this.controllerCoreWrapper=e}return e.prototype.MouseEventController=function(e){this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.MouseEventController(e),e.CLICK_TYPE!==o.uh.LEFT?e.CLICK_TYPE!==o.uh.MIDDLE?e.CLICK_TYPE!==o.uh.DOWN_RIGHT?e.CLICK_TYPE!==o.uh.DOUBLE?e.CLICK_TYPE!==o.uh.MOVE?e.CLICK_TYPE!==o.uh.DRAG?e.CLICK_TYPE!==o.uh.DOWN?e.CLICK_TYPE!==o.uh.WHEEL?e.CLICK_TYPE!==o.uh.UP||this.MouseUpPre(e):this.MouseWheelPre(e):this.MouseDownPre(e):this.MouseDragPre(e):this.MouseMovePre(e):this.MouseDoubleClickPre(e):this.MouseRightClickPre(e):this.MouseMiddleClickPre(e):this.MouseLeftClickPre(e)},e.prototype.MouseDown=function(e){},e.prototype.MouseDownPre=function(e){this.MouseDown(e)},e.prototype.MouseLeftClick=function(e){},e.prototype.MouseLeftClickPre=function(e){this.MouseLeftClick(e)},e.prototype.MouseMiddleClick=function(e){},e.prototype.MouseMiddleClickPre=function(e){this.MouseMiddleClick(e)},e.prototype.MouseRightClick=function(e){},e.prototype.MouseRightClickPre=function(e){this.MouseRightClick(e)},e.prototype.MouseUp=function(e){},e.prototype.MouseUpPre=function(e){this.MouseUp(e)},e.prototype.MouseDoubleClick=function(e){},e.prototype.MouseDoubleClickPre=function(e){this.MouseDoubleClick(e)},e.prototype.MouseMove=function(e){},e.prototype.MouseMovePre=function(e){this.MouseMove(e)},e.prototype.MouseDrag=function(e){},e.prototype.MouseDragPre=function(e){this.MouseDrag(e)},e.prototype.MouseWheel=function(e){},e.prototype.MouseWheelPre=function(e){this.MouseWheel(e)},e.prototype.ShfitScene=function(e){this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.ShiftScene(e),console.log(this)},e.prototype.RemoveScene=function(){this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.RemoveAllScene()},e.prototype.LoadDefinition=function(e,t){this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.LoadDefinition(e,t)},e.prototype.Test=function(){console.log("working"),console.log("working"),console.log(this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.ShiftScene)},e}(),a=function(){function e(e){this.model=e,this.activeCommandController=new h(this)}return e.prototype.SetActiveCommand=function(e){},e}(),l=function(){function e(e,t){this.canvasWrapper=e,this.hostDiv=t,this.InitCanvas(this.hostDiv)}return e.prototype.InitCanvas=function(e){this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.zIndex="0",this.hostDiv=e,this.hostDiv.appendChild(this.canvas),this.canvas.id="CanvasRenderer",this.canvas.className="njslab-web-core-canvas-renderer",this.canvas.style.pointerEvents="none",this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.hostDiv.clientWidth,this.canvas.height=this.hostDiv.clientHeight},e.prototype.ResizeCanvas=function(e,t){this.canvas.width=e,this.canvas.height=t},e}(),c=function(e){this.graphicsCoreWrapper=e,this.canvas=new l(this,this.graphicsCoreWrapper.model.modelViewCoreWrapper.viewWrapper.div)},u=function(e){this.graphicsCoreWrapper=e},v=function(){function e(e){this.isActive=!0,this.msLastFrame=0,this.msFpsLimit=30,this.rendererWrapper=e,this.Init()}return e.prototype.Init=function(){this.ctx=this.rendererWrapper.graphicsCoreWrapper.canvasWrapper.canvas.ctx,this.deltatime=new o.gk,this.Loop()},e.prototype.Loop=function(){var e=this;this.isActive&&(requestAnimationFrame((function(){e.Loop()})),this.OnRender())},e.prototype.OnRender=function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.deltatime.UpdateFPS(),this.sceneWrapper&&this.sceneWrapper.Render(this.ctx)},e.prototype.Stop=function(){this.isActive=!1},e}(),m=function(e){this.graphicsCoreWrapper=e,this.renderer=new v(this)},d=function(e){this.graphicsCoreWrapper=e},C=function(){function e(e){this.graphicsCoreWrapper=e,this.graphicsCoreWrapper.rendererWrapper.renderer.sceneWrapper=this}return e.prototype.MouseEventController=function(e){this.graphicsCoreWrapper.model.app.implementation.MouseEventController(e)},e.prototype.Render=function(e){this.graphicsCoreWrapper.model.app.implementation.Render(e)},e.prototype.RemoveAllScene=function(){this.graphicsCoreWrapper.model.app.implementation.RemoveAllScene()},e.prototype.ShiftScene=function(e){this.graphicsCoreWrapper.model.app.implementation.ShiftScene(e)},e.prototype.LoadDefinition=function(e,t){this.graphicsCoreWrapper.model.app.implementation.LoadDefinition(e,t)},e}(),f=function(e){this.model=e,this.canvasWrapper=new c(this),this.geometryCoreWrapper=new u(this),this.rendererWrapper=new m(this),this.themeWrapper=new d(this),this.sceneWrapper=new C(this)},w=function(e){this.modelViewCoreWrapper=e},y=function(e){this.modelViewCoreWrapper=e},W=function(){function e(e,t,i,o){void 0===i&&(i=100),void 0===o&&(o=100),this.modelViewCoreWrapper=e,this.InitDiv(t,i,o),this.AppendEvent()}return e.prototype.InitDiv=function(e,t,i){var o=document.createElement("div");o.style.position="absolute",this.div=document.createElement("div"),o.appendChild(this.div);var n=document.getElementById(e);n&&(this.divHost=n,this.divHost.parentNode&&this.divHost.appendChild(o)),this.div.id="NCanvas",this.div.style.width=this.divHost.clientWidth+"px",this.div.style.height=this.divHost.clientHeight+"px",this.div.style.zIndex="1"},e.prototype.AppendEvent=function(){var e=this;window.addEventListener("resize",(function(){e.div.style.width=e.divHost.clientWidth+"px",e.div.style.height=e.divHost.clientHeight+"px"}),!0)},e}(),g=function(e,t,i,o){void 0===i&&(i=100),void 0===o&&(o=100),this.model=e,this.logWrapper=new w(this),this.uiWrapper=new y(this),this.viewWrapper=new W(this,t,i,o)},I=function(){function e(e,t){this.app=e,this.appCoreWrapper=new p(this,t),this.modelViewCoreWrapper=new g(this,t),this.controllerCoreWrapper=new a(this),this.graphicsCoreWrapper=new f(this),this.Init()}return e.prototype.Init=function(){this.appCoreWrapper.ioWrapper.InitEventListener(this.modelViewCoreWrapper.viewWrapper.div)},e.prototype.Restart=function(){console.log("re start!!")},e.prototype.Destroy=function(){this.graphicsCoreWrapper.rendererWrapper.renderer.isActive=!1},e.prototype.Resize=function(e,t){this.graphicsCoreWrapper.canvasWrapper.canvas.ResizeCanvas(e,t),this.modelViewCoreWrapper.viewWrapper.div.style.width=e+"px",this.modelViewCoreWrapper.viewWrapper.div.style.height=t+"px"},e}(),E=function(){function e(e){this.app=e,this.InitAlgorithmImplementation()}return e.prototype.InitPost=function(){},e.prototype.InitAlgorithmImplementation=function(){return e=this,t=void 0,n=function(){var e=this;return function(e,t){var i,o,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function p(r){return function(p){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break}if(6===r[0]&&s.label<n[1]){s.label=n[1],n=r;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break}n[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,p])}}}(this,(function(t){return[2,i.e(5256).then(i.bind(i,5256)).then((function(t){var i=t.AlgorithmImplementation;e.AlgorithmImplementation=new i(e),e.AlgorithmImplementation.InitPost()})).catch((function(e){console.log("Stop loading NCanvas implementation, AlgorithmImplementation."),console.log(e)}))]}))},new((o=void 0)||(o=Promise))((function(i,r){function s(e){try{h(n.next(e))}catch(e){r(e)}}function p(e){try{h(n.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,p)}h((n=n.apply(e,t||[])).next())}));var e,t,o,n},e.prototype.AddMenu=function(e,t,i,o){this.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.AddMenu(e,t,i,o)},e.prototype.MouseEventController=function(e){this.AlgorithmImplementation&&this.AlgorithmImplementation.activeCommandController.MouseEventController(e)},e.prototype.Render=function(e){this.AlgorithmImplementation&&this.AlgorithmImplementation.Render(e)},e.prototype.RemoveAllScene=function(){this.AlgorithmImplementation&&this.AlgorithmImplementation.Dispose(),this.AlgorithmImplementation=void 0},e.prototype.ShiftScene=function(e){this.RemoveAllScene(),this.InitAlgorithmImplementation()},e.prototype.LoadDefinition=function(e,t){},e}(),M=function(){function e(e){this._propagation=!1,this.viewIO=e,this.viewIO.viewAppCoreWrapper.viewController.app.model.appCoreWrapper.ioWrapper.mouseInteraction.mouseInteractionUI=this}return e.prototype.MouseInteractionMenu=function(e){this.viewIO.viewAppCoreWrapper.viewController.NUIWrapper.NUI.MouseInteractionMenu(e)},Object.defineProperty(e.prototype,"stopPropagation",{get:function(){return this._propagation},set:function(e){this.viewIO.viewAppCoreWrapper.viewController.app.model.appCoreWrapper.ioWrapper.mouseInteraction.stopPropagation=e,this._propagation=e},enumerable:!1,configurable:!0}),e}(),D=function(e){this.viewAppCoreWrapper=e,this.eventInteraction=new M(this)},P=function(e){this.viewController=e,this.viewIOWrapper=new D(this)},A=function(e){this.viewController=e},L=function(){function e(e){this.viewControllerWrapper=e}return e.prototype.Resize=function(e,t){this.viewControllerWrapper.viewController.NUIWrapper.Resize(e,t)},e}(),b=function(e){this.viewController=e,this.viewActiveCommandController=new L(this)},k=function(){function e(e,t){this.viewController=e,this.NUI=new o.Fc(this.viewController.app.model.modelViewCoreWrapper.viewWrapper.div,t),this.BindingActiveCommandController()}return e.prototype.BindingActiveCommandController=function(){this.NUI.BindingActiveCommandController("AlgorithmEnv",this.viewController.app.model.controllerCoreWrapper.activeCommandController)},e.prototype.Resize=function(e,t){this.NUI.Resize(e,t)},e.prototype.Destroy=function(){this.NUI.Destroy()},e}(),R=function(){function e(e,t){this.app=e,this.viewAssetWrapper=new A(this),this.viewAppCoreWrapper=new P(this),this.viewControllerWrapper=new b(this),this.NUIWrapper=new k(this,t)}return e.prototype.Resize=function(e,t){this.viewControllerWrapper.viewActiveCommandController.Resize(e,t)},e.prototype.Destroy=function(){this.NUIWrapper.Destroy()},e}(),_=function(){function e(e,t){void 0===t&&(t=!0),this.needUI=!1,this.needUI=t;var i=document.getElementById(e);i&&(this.divHost=i),this.model=new I(this,e),this.implementation=new E(this),this.viewController=new R(this,t),this.implementation.InitPost()}return e.InitSubApp=function(t,i){var o=new e(t,!1);o.implementation.InitAlgorithmImplementation().then((function(){o.implementation.AlgorithmImplementation.LoadDefinition(i)}))},e.Init=function(t){new e(t)},e}()},7708:(e,t,i)=>{i.d(t,{gj:()=>o.gj,R7:()=>o.R7,uh:()=>o.uh,gk:()=>o.gk,Fc:()=>o.Fc});var o=i(906)}}]);
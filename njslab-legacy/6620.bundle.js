"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6620],{6620:(t,i,e)=>{e.r(i),e.d(i,{Demo60ImageProcessor:()=>g});var o,s=e(906),n=function(){function t(t,i){this.isActive=!1,this.scale=.5,this.translation=[0,0],this.translationZoom=[0,0],this.isViewChanging=!1,this.loopNum=0,this.needRenderloop=!0,this.ablePan=!0,this.pause=!1,this.renderer=t,this.div=i,this.Init()}return t.prototype.Init=function(){var t=document.createElement("canvas");if(t){this.canvas=t,this.canvas.width=this.div.clientWidth,this.canvas.height=this.div.clientHeight,this.div.append(this.canvas);var i=this.canvas.getContext("2d");i&&(this.ctx=i,this.isActive=!0)}this.deltaTime=new s.gk,this.canvasLoopController=new s.NI(60)},t.prototype.LoopInit=function(){this.translation[0]=.5*this.ctx.canvas.width,this.translation[1]=.5*this.ctx.canvas.height,this.SetLevel4(),this.initBinder(this.ctx),this.Loop()},t.prototype.Loop=function(){var t=this,i=performance.now();if(this.deltaTime.UpdateFPS(),this.canvasLoopController.level>3){if(6===this.canvasLoopController.level)requestAnimationFrame((function(){t.Loop()})),this.RenderPre(this.ctx);else if(5===this.canvasLoopController.level)this.isViewChanging,requestAnimationFrame((function(){t.Loop()})),this.RenderPre(this.ctx);else if(4===this.canvasLoopController.level){if(this.isViewChanging,requestAnimationFrame((function(){t.Loop()})),this.canvasLoopController.stop)return;this.RenderPre(this.ctx),this.canvasLoopController.TimerForStop()}}else 1===this.canvasLoopController.level&&this.isViewChanging||this.RenderPre(this.ctx);var e=performance.now();this.log="level:  "+this.canvasLoopController.level+", total frames: "+this.loopNum+++" (FPS: "+this.deltaTime.frameRate.toFixed(0)+"), a loop took: "+(e-i).toFixed(2)+" ms to execute."},t.prototype.SetLevel1=function(){this.canvasLoopController.level=1,this.Loop()},t.prototype.SetLevel2=function(){this.canvasLoopController.level=2,this.Loop()},t.prototype.SetLevel3=function(){this.canvasLoopController.level=3,this.Loop()},t.prototype.RenderSetLevel4=function(){this.canvasLoopController.stop=!0},t.prototype.SetLevel4=function(){var t=this;this.canvasLoopController.Reset(),setTimeout((function(){t.canvasLoopController.level=4,t.Loop()}),500)},t.prototype.SetLevel5=function(){var t=this;this.canvasLoopController.Reset(),setTimeout((function(){t.canvasLoopController.level=5,t.Loop()}),500)},t.prototype.SetLevel6=function(){var t=this;this.canvasLoopController.stop=!1,this.canvasLoopController.Reset(),setTimeout((function(){t.canvasLoopController.level=6,console.log("ddddddddddddddddddddddd"),t.Loop()}),500)},t.prototype.Clear=function(t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},t.prototype.Zoom=function(t){t.wheel<0?this.scale+=.09*this.scale:this.scale-=.09*this.scale},t.prototype.RemapByZoom=function(t){return t.x=(t.xs-this.translation[0])/this.scale,t.y=(t.ys-this.translation[1])/this.scale,t},t.prototype.Pan=function(t){if(this.ablePan){var i=t.xs-t.preXs,e=t.ys-t.preYs;this.translation[0]+=i,this.translation[1]+=e}},t.prototype.RenderForce=function(){this.canvasLoopController.stop=!1},t.prototype.RenderPre=function(t){if(this.isActive){this.Clear(this.ctx),this.ctx.save(),this.ctx.translate(this.translation[0],this.translation[1]),this.ctx.scale(this.scale,this.scale);for(var i=-10;i<10;++i)for(var e=-10;e<10;++e)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(10*i,10*e,2,0,2*Math.PI),t.closePath(),t.fill();this.RenderBinder(t),this.ctx.restore()}},t.prototype.initBinder=function(t){},t.prototype.RenderBinder=function(t){},t}();!function(){function t(){}t.prototype.MouseEventController=function(t){},t.prototype.KeyboardEventController=function(t){},t.prototype.TouchEventController=function(t){},t.prototype.GestureEventController=function(t){},t.prototype.mouseLeftClick=function(t){},t.prototype.mouseMiddleClick=function(t){},t.prototype.mouseRightClick=function(t){},t.prototype.mouseDoubleClick=function(t){},t.prototype.mouseMove=function(t){},t.prototype.mouseDrag=function(t){},t.prototype.mouseDown=function(t){},t.prototype.mouseUp=function(t){},t.prototype.keydown=function(t){},t.prototype.keyUp=function(t){}}(),function(t){t.LEFT="LEFT",t.MIDDLE="MIDDLE",t.RIGHT="RIGHT",t.WHEEL="WHEEL",t.DRAG="DRAG",t.DRAG_LEFT="DRAG_LEFT",t.DRAG_MIDDLE="DRAG_MIDDLE",t.DRAG_RIGHT="DRAG_RIGHT",t.MOVE="MOVE",t.DOUBLE="DOUBLE",t.UP="UP",t.DOWN="DOWN",t.DOWN_MIDDLE="DOWN_MIDDLE",t.DOWN_RIGHT="DOWN_RIGHT"}(o||(o={}));var h,r=function(){function t(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.xs=-1,this.ys=-1,this.preXs=-1,this.preYs=-1,this.CLICK_TYPE=o.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.wheel=0,this.preWheel=0,this.isActive=!0}return t.prototype.DeepCopy=function(){var i=new t;return i.x=this.x,i.y=this.y,i.z=this.z,i.preX=this.preX,i.preY=this.preY,i.preZ=this.preZ,i.xs=this.x,i.ys=this.y,i.preXs=this.preXs,i.preYs=this.preYs,i.pressedAlt=this.pressedAlt,i.pressedShift=this.pressedShift,i.pressedCtrl=this.pressedCtrl,i.isDoubleClick=this.isDoubleClick,i.isDown=this.isDown,i.isMove=this.isMove,i.wheel=this.wheel,i.preWheel=this.preWheel,i.yGLPicking=this.yGLPicking,i.CLICK_TYPE=this.CLICK_TYPE,i.command=this.command,i.native=this.native,i},t}(),a=function(){function t(){this.mouseEventDataPre=new r,this.isEnable=!0,this.clickCount=0,this.click=!1,this.prevent=!1,this.delay=250,this.down=!1,this._stopPropagation=!1}return t.prototype.InitNativeMouseEvent=function(t){var i=this;t.onclick=function(t){i.prevent=!1,i.timer=setTimeout((function(){i.prevent||i.MouseClick(t),i.prevent=!1}),i.delay)},t.ondblclick=function(t){clearTimeout(i.timer),i.prevent=!0,i.MouseDoubleClick(t)},t.onmousedown=function(t){i.MouseDown(t)},t.onmouseup=function(t){i.MouseUp(t)},t.onmousemove=function(t){i.MouseMove(t)},t.addEventListener("wheel",(function(t){return i.MouseWheel(t,t.deltaY)}))},t.prototype.MouseDown=function(t){this.click=!0,this.down=!0;var i=this.CommonEventBuilder(t);i.CLICK_TYPE=o.DOWN,i.isDown=!0,this.MouseEvenEmitting(i)},t.prototype.MouseClick=function(t){if(this.click){var i=this.CommonEventBuilder(t);0===t.button?i.CLICK_TYPE=o.LEFT:1===t.button?i.CLICK_TYPE=o.MIDDLE:2===t.button&&(i.CLICK_TYPE=o.RIGHT),this.MouseEvenEmitting(i)}},t.prototype.MouseDoubleClick=function(t){var i=this.CommonEventBuilder(t);i.CLICK_TYPE=o.DOUBLE,this.MouseEvenEmitting(i)},t.prototype.MouseDrag=function(t){this.click=!1,this.prevent=!0;var i=this.CommonEventBuilder(t);i.CLICK_TYPE=o.DRAG,i.isDown=!0,1===t.buttons?i.CLICK_TYPE=o.DRAG:4===t.buttons?i.CLICK_TYPE=o.DRAG_MIDDLE:2===t.buttons&&(i.CLICK_TYPE=o.DRAG_RIGHT),this.MouseEvenEmitting(i)},t.prototype.MouseMove=function(t){if(this.down)this.MouseDrag(t);else{var i=this.CommonEventBuilder(t);i.CLICK_TYPE=o.MOVE,i.isDown=!0,this.prevent=!0,this.MouseEvenEmitting(i)}},t.prototype.MouseUp=function(t){this.down=!1,this.click=!0;var i=this.CommonEventBuilder(t);i.CLICK_TYPE=o.UP,i.isDown=!1,this.MouseEvenEmitting(i)},t.prototype.MouseWheel=function(t,i){var e=this.CommonEventBuilder(t);e.wheel=i,e.CLICK_TYPE=o.WHEEL,this.MouseEvenEmitting(e)},t.prototype.CommonEventBuilder=function(t){var i=new r;return i.preXs=this.mouseEventDataPre.xs,i.preYs=this.mouseEventDataPre.ys,i.preX=this.mouseEventDataPre.x,i.preY=this.mouseEventDataPre.y,i.pressedShift=t.shiftKey,i.pressedAlt=t.altKey,i.pressedCtrl=t.ctrlKey,i.xs=t.offsetX,i.ys=t.offsetY,i.preWheel=this.mouseEventDataPre.wheel,i.wheel=0,i.native=t,this.mouseEventDataPre=i,this.e=i,i},Object.defineProperty(t.prototype,"stopPropagation",{get:function(){return this._stopPropagation},set:function(t){var i=this;t?this._stopPropagation=t:setTimeout((function(){i._stopPropagation=t}),500)},enumerable:!1,configurable:!0}),t.prototype.MouseEvenEmitting=function(t){this.MouseEventEmittingForViewController(t),this._stopPropagation||this.MouseEventEmittingBinder(t)},t.prototype.MouseEventEmittingForViewController=function(t){this.mouseInteractionUI&&this.mouseInteractionUI.MouseInteractionMenu(t)},t.prototype.MouseEventEmittingBinder=function(t){},t}(),l=function(){function t(t){this.mouse=new s.h9(0,0),this.renderer=t}return t.prototype.MouseEventController=function(t){var i=t.DeepCopy();i.x=t.xs,i.y=t.ys,this.renderer.canvas.RenderForce(),t.CLICK_TYPE!==s.uh.LEFT?t.CLICK_TYPE!==s.uh.MIDDLE?t.CLICK_TYPE!==s.uh.DOWN_RIGHT?t.CLICK_TYPE!==s.uh.DOUBLE?t.CLICK_TYPE!==s.uh.MOVE?t.CLICK_TYPE!==s.uh.DRAG?t.CLICK_TYPE!==s.uh.DOWN?t.CLICK_TYPE!==s.uh.WHEEL?t.CLICK_TYPE!==s.uh.UP||this.MouseUpPre(t):this.MouseWheelPre(t):this.MouseDownPre(t):this.MouseDragPre(t):this.MouseMovePre(t):this.MouseDoubleClickPre(t):this.MouseRightClickPre(t):this.MouseMiddleClickPre(t):this.MouseLeftClickPre(t)},t.prototype.MouseDown=function(t){},t.prototype.MouseDownPre=function(t){this.MouseDown(t)},t.prototype.MouseLeftClick=function(t){},t.prototype.MouseLeftClickPre=function(t){this.MouseLeftClick(t)},t.prototype.MouseMiddleClick=function(t){},t.prototype.MouseMiddleClickPre=function(t){this.MouseMiddleClick(t)},t.prototype.MouseRightClick=function(t){},t.prototype.MouseRightClickPre=function(t){this.MouseRightClick(t)},t.prototype.MouseUp=function(t){},t.prototype.MouseUpPre=function(t){this.MouseUp(t)},t.prototype.MouseDoubleClick=function(t){},t.prototype.MouseDoubleClickPre=function(t){this.MouseDoubleClick(t)},t.prototype.MouseMove=function(t){},t.prototype.MouseMovePre=function(t){this.MouseMove(t)},t.prototype.MouseDrag=function(t){},t.prototype.MouseDragPre=function(t){this.mouse.x=t.x,this.mouse.y=t.y,this.renderer.canvas.Pan(t),this.MouseDrag(t)},t.prototype.MouseWheel=function(t){},t.prototype.MouseWheelPre=function(t){this.renderer.canvas.Zoom(t),this.MouseWheel(t)},t.prototype.pushActionFromPulldown=function(t){t.split("@")[0]},t}();!function(t){t.NORMAL="NORMAL",t.GAUSSIAN_BLUR_1="GAUSSIAN_BLUR_1",t.GAUSSIAN_BLUR_2="GAUSSIAN_BLUR_2",t.GAUSSIAN_BLUR_3="GAUSSIAN_BLUR_3",t.BOX_BLUR="BOX_BLUR",t.TRIANGLE_BLUR="TRIANGLE_BLUR",t.EMBOSS="EMBOSS",t.UNSHARPEN="UNSHARPEN",t.SHARPENESS="SHARPENESS",t.SHARPEN="SHARPEN",t.EDGE_DETECTION_1="EDGE_DETECTION_1",t.EDGE_DETECTION_2="EDGE_DETECTION_2",t.EDGE_DETECTION_3="EDGE_DETECTION_3",t.EDGE_DETECTION_4="EDGE_DETECTION_4",t.EDGE_DETECTION_5="EDGE_DETECTION_5",t.EDGE_DETECTION_6="EDGE_DETECTION_6",t.SOBEL_HORIZONTAL="SOBEL_HORIZONTAL",t.SOBEL_VERTICAL="SOBEL_VERTICAL",t.PREVIT_HORIZONTAL="PREVIT_HORIZONTAL",t.PREVIT_VERTICAL="PREVIT_VERTICAL"}(h||(h={}));var p={NORMAL:[0,0,0,0,1,0,0,0,0],GAUSSIAN_BLUR_1:[.045,.122,.045,.122,.332,.122,.045,.122,.045],GAUSSIAN_BLUR_2:[1,2,1,2,4,2,1,2,1],GAUSSIAN_BLUR_3:[0,1,0,1,1,1,0,1,0],BOX_BLUR:[.111,.111,.111,.111,.111,.111,.111,.111,.111],TRIANGLE_BLUR:[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625],EMBOSS:[-2,-1,0,-1,1,1,0,1,2],UNSHARPEN:[-1,-1,-1,-1,9,-1,-1,-1,-1],SHARPENESS:[0,-1,0,-1,5,-1,0,-1,0],SHARPEN:[-1,-1,-1,-1,16,-1,-1,-1,-1],EDGE_DETECTION_1:[-.125,-.125,-.125,-.125,1,-.125,-.125,-.125,-.125],EDGE_DETECTION_2:[-1,-1,-1,-1,8,-1,-1,-1,-1],EDGE_DETECTION_3:[-5,0,0,0,0,0,0,0,5],EDGE_DETECTION_4:[-1,-1,-1,0,0,0,1,1,1],EDGE_DETECTION_5:[-1,-1,-1,2,2,2,-1,-1,-1],EDGE_DETECTION_6:[-5,-5,-5,-5,39,-5,-5,-5,-5],SOBEL_HORIZONTAL:[1,2,3,0,0,0,-1,-2,-1],SOBEL_VERTICAL:[1,0,-1,2,0,-2,1,0,-1],PREVIT_HORIZONTAL:[1,1,1,0,0,0,-1,-1,-1],PREVIT_VERTICAL:[1,0,-1,1,0,-1,1,0,-1]},u=function(){function t(t,i){void 0===i&&(i=!1),this.height=-1,this.width=-1,this.isGray=!1,this.isGray=i,this.bitmap=t,this.pixels=[],this.height=t.height,this.width=t.width;var e=0,o=-1,n=0;if(this.isGray)for(var h=0;h<this.bitmap.data.length;h+=4){n++%this.bitmap.width==0?(e=0,o++):e++;var r=new d(this.bitmap.data[h+0],this.bitmap.data[h+1],this.bitmap.data[h+2],this.bitmap.data[h+3]),a=s.mK.RGBtoGray(r.R,r.G,r.B),l=d.FromArgb(255,Math.floor(a),Math.floor(a),Math.floor(a)),p=new c(this,e,this.height-o-1,l);this.pixels.push(p)}else for(h=0;h<this.bitmap.data.length;h+=4)h%this.bitmap.width==0?(e=0,o++):e++,r=new d(this.bitmap.data[h+0],this.bitmap.data[h+1],this.bitmap.data[h+2],this.bitmap.data[h+3]),p=new c(this,e,this.height-o-1,r),this.pixels.push(p);this.InitGridNeighbor()}return t.prototype.InitGridNeighbor=function(){for(var t=0;t<this.height;++t)for(var i=0;i<this.width;++i){var e=t*this.width+i,o=this.pixels[e];i>0&&t<this.height-1&&(o.npix.push(this.pixels[e+this.width-1]),o.UP_LEFT=this.pixels[e+this.width-1]),t<this.height-1&&(o.npix.push(this.pixels[e+this.width]),o.UP_MIDDLE=this.pixels[e+this.width]),i<this.width-1&&t<this.height-1&&(o.npix.push(this.pixels[e+this.width+1]),o.UP_RIGHT=this.pixels[e+this.width+1]),i>0&&(o.npix.push(this.pixels[e-1]),o.MIDDLE_LEFT=this.pixels[e-1]),i<this.width-1&&(o.npix.push(this.pixels[e+1]),o.MIDDLE_RIGHT=this.pixels[e+1]),i>0&&t>0&&(o.npix.push(this.pixels[e-this.width-1]),o.DOWN_LEFT=this.pixels[e-this.width-1]),t>0&&(o.npix.push(this.pixels[e-this.width]),o.DOWN_MIDDLE=this.pixels[e-this.width]),i<this.width-1&&t>0&&(o.npix.push(this.pixels[e-this.width+1]),o.DOWN_RIGHT=this.pixels[e-this.width+1])}},t.prototype.update=function(t){this.bitmap=t;for(var i=0,e=0;e<this.bitmap.data.length;e+=4)this.pixels[i].color.R=this.bitmap.data[e+0],this.pixels[i].color.G=this.bitmap.data[e+1],this.pixels[i].color.B=this.bitmap.data[e+2],this.pixels[i].color.A=this.bitmap.data[e+3],i++},t.prototype.computeConvolution=function(t){console.log(t);for(var i=0,e=this.pixels;i<e.length;i++)e[i].ComputeByKernelList(t)},t.prototype.getBitmap=function(){this.bitmapResult=new ImageData(this.bitmap.width,this.bitmap.height);for(var t=0,i=0;i<this.bitmapResult.data.length;i+=4){var e=this.pixels[t].colNew;this.bitmapResult.data[i+0]=e.R,this.bitmapResult.data[i+1]=e.G,this.bitmapResult.data[i+2]=e.B,this.bitmapResult.data[i+3]=e.A,t++}return this.bitmapResult},t}(),c=function(){function t(t,i,e,o){this.width=.5,this.height=.5,this.temp=0,this.val=0,this.npix=[],this.pm=t,this.color=d.FromArgb(255,o.R,o.G,o.B),this.colNew=d.FromArgb(255,o.R,o.G,o.B),this.p=new s.h9(i,e,0)}return t.prototype.ComputeByKernelList=function(t){var i=0,e=0,o=0,s=0;void 0!==this.UP_LEFT&&(e+=this.UP_LEFT.color.R*t[0],o+=this.UP_LEFT.color.G*t[0],s+=this.UP_LEFT.color.B*t[0],i+=t[0]),void 0!==this.UP_MIDDLE&&(e+=this.UP_MIDDLE.color.R*t[1],o+=this.UP_MIDDLE.color.G*t[1],s+=this.UP_MIDDLE.color.B*t[1],i+=t[1]),void 0!==this.UP_RIGHT&&(e+=this.UP_RIGHT.color.R*t[2],o+=this.UP_RIGHT.color.G*t[2],s+=this.UP_RIGHT.color.B*t[2],i+=t[2]),void 0!==this.MIDDLE_LEFT&&(e+=this.MIDDLE_LEFT.color.R*t[3],o+=this.MIDDLE_LEFT.color.G*t[3],s+=this.MIDDLE_LEFT.color.B*t[3],i+=t[3]),e+=this.color.R*t[4],o+=this.color.G*t[4],s+=this.color.B*t[4],i+=t[4],void 0!==this.MIDDLE_RIGHT&&(e+=this.MIDDLE_RIGHT.color.R*t[5],o+=this.MIDDLE_RIGHT.color.G*t[5],s+=this.MIDDLE_RIGHT.color.B*t[5],i+=t[5]),void 0!==this.DOWN_LEFT&&(e+=this.DOWN_LEFT.color.R*t[6],o+=this.DOWN_LEFT.color.G*t[6],s+=this.DOWN_LEFT.color.B*t[6],i+=t[6]),void 0!==this.DOWN_MIDDLE&&(e+=this.DOWN_MIDDLE.color.R*t[7],o+=this.DOWN_MIDDLE.color.G*t[7],s+=this.DOWN_MIDDLE.color.B*t[7],i+=t[7]),void 0!==this.DOWN_RIGHT&&(e+=this.DOWN_RIGHT.color.R*t[8],o+=this.DOWN_RIGHT.color.G*t[8],s+=this.DOWN_RIGHT.color.B*t[8],i+=t[8]),i<=0&&(i=1),this.colNew=d.FromArgb(255,this.CutColorValue(e/i),this.CutColorValue(o/i),this.CutColorValue(s/i))},t.prototype.ComputeKernelWeight=function(t){for(var i=0,e=0,o=t;e<o.length;e++)i+=o[e];return i<=0?1:i},t.prototype.CutColorValue=function(t){return t<0?0:255<t?255:Math.floor(t)},t}(),d=function(){function t(t,i,e,o){this.R=t,this.G=i,this.B=e,this.A=o}return t.FromArgb=function(i,e,o,s){return new t(e,o,s,i)},t}(),E=function(){function t(t){this.canvasRanderer=t,this.divLocalMain=this.canvasRanderer.hostDiv,this.initUI()}return t.prototype.initUI=function(){var t=this,i=document.createElement("div");if(i){this.divUI=i,this.divLocalMain.append(i),this.divUI.style.marginLeft="10px",this.divUI.style.width="100%";var e=document.createElement("button");e.textContent="toggle",e.onclick=function(){t.canvasRanderer.implmentation.toggle()},this.divUI.append(e);var o=document.createElement("input");o.oninput=function(){var i=+o.value;console.log(i);var e=h.NORMAL;0===i?e=h.NORMAL:1===i?e=h.BOX_BLUR:2===i?e=h.EDGE_DETECTION_1:3===i?e=h.EDGE_DETECTION_2:4===i?e=h.EDGE_DETECTION_3:5===i?e=h.EDGE_DETECTION_4:6===i?e=h.EDGE_DETECTION_5:7===i?e=h.EDGE_DETECTION_6:8===i?e=h.EMBOSS:9===i?e=h.GAUSSIAN_BLUR_1:10===i?e=h.GAUSSIAN_BLUR_2:11===i?e=h.GAUSSIAN_BLUR_3:12===i?e=h.PREVIT_HORIZONTAL:13===i?e=h.PREVIT_VERTICAL:14===i?e=h.SHARPEN:15===i?e=h.SHARPENESS:16===i?e=h.SOBEL_HORIZONTAL:17===i?e=h.SOBEL_VERTICAL:18===i?e=h.TRIANGLE_BLUR:19===i&&(e=h.UNSHARPEN),t.divConsole.innerHTML="Convolutional filter: "+e,t.canvasRanderer.implmentation.setFilter(e)},o.type="range",o.min="0",o.max="19.0",o.step="1.0",o.value="0",this.divUI.append(o);var s=document.createElement("input");s.oninput=function(){var t=+s.value;console.log(t)},s.type="range",s.min="1",s.max="10.0",s.value="4",this.divUI.append(s),this.divConsole=document.createElement("p"),this.divConsole&&(this.divUI.append(this.divConsole),this.divConsole.style.width="max-content",this.divConsole.innerHTML="Convolutional filter: Normal")}},t}(),v=function(){function t(t,i){this.implmentation=t,this.img=i,this.canvas=document.createElement("canvas"),this.canvas.width=this.img.width,this.canvas.height=this.img.height,this.ctx=this.canvas.getContext("2d"),this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height),console.log("this.img.width, this.img.height",this.img.width,this.img.height),this.imgDataOrigin=this.ctx.getImageData(0,0,this.img.width,this.img.height)}return t.prototype.setFilter=function(t){this.pixelMapFilter=new u(this.imgDataOrigin),this.pixelMapFilter.computeConvolution(p[t]);var i=this.pixelMapFilter.getBitmap();this.ctx.putImageData(i,0,0,0,0,this.img.width,this.img.height)},t.prototype.render=function(t){t.drawImage(this.canvas,.5*-this.img.width,.5*-this.img.height,this.img.width,this.img.height)},t}(),m=function(){function t(t,i){this.width=200,this.height=200,this.kernel=p.NORMAL,this.implmentation=t,this.img=new Image;this.width=300,this.height=300,this.canvas=document.createElement("canvas"),this.canvas.width=300,this.canvas.height=300,this.ctx=this.canvas.getContext("2d");var e=document.createElement("video");e.id=this.implmentation.hostDiv.id+"camera",e.setAttribute("playsinline",""),e.setAttribute("autoplay",""),e.setAttribute("muted",""),e.setAttribute("width","300px"),e.setAttribute("height","300px"),e.style.width="300px",e.style.height="300px",navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){e.srcObject=t})).catch((function(t){console.debug("something went wrong...",t)})),this.video=e,e&&i&&i.appendChild(e),this.pixelMapFilter=new u(this.ctx.getImageData(0,0,this.width,this.height))}return t.prototype.setFilter=function(t){this.kernel=p[t]},t.prototype.render=function(t){this.video&&(this.ctx.drawImage(this.video,0,0,this.video.width,this.video.height),this.pixelMapFilter.update(this.ctx.getImageData(0,0,this.video.width,this.video.height)),this.pixelMapFilter.computeConvolution(this.kernel),this.imgDataOrigin=this.pixelMapFilter.getBitmap(),this.ctx.putImageData(this.imgDataOrigin,0,0),t.drawImage(this.canvas,.5*-this.video.width,.5*-this.video.height,this.video.width,this.video.height))},t}(),f=function(t,i,e,o){return new(e||(e=Promise))((function(s,n){function h(t){try{a(o.next(t))}catch(t){n(t)}}function r(t){try{a(o.throw(t))}catch(t){n(t)}}function a(t){var i;t.done?s(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(h,r)}a((o=o.apply(t,i||[])).next())}))},D=function(t,i){var e,o,s,n,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function r(n){return function(r){return function(n){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,o&&(s=2&n[0]?o.return:n[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,o=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(!((s=(s=h.trys).length>0&&s[s.length-1])||6!==n[0]&&2!==n[0])){h=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){h.label=n[1];break}if(6===n[0]&&h.label<s[1]){h.label=s[1],s=n;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(n);break}s[2]&&h.ops.pop(),h.trys.pop();continue}n=i.call(t,h)}catch(t){n=[6,t],o=0}finally{e=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,r])}}},L=function(){function t(t){this.num=0,this.hostDiv=t}return t.prototype.init=function(t){return f(this,void 0,void 0,(function(){var t,i;return D(this,(function(e){switch(e.label){case 0:return[4,(void 0===o&&(o="https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg"),f(void 0,void 0,void 0,(function(){return D(this,(function(t){return[2,new Promise((function(t,i){var e=new Image;e.src=o,e.crossOrigin="Anonymous",e.onload=function(){return t(e)},e.onerror=function(){return i(new Error("cannot loade the img by url..."))}}))]}))})))];case 1:return t=e.sent(),i=t,this.imageProcessor=new v(this,i),this.videoProcessor=new m(this,this.hostDiv),[2]}var o}))}))},t.prototype.toggle=function(){this.num++},t.prototype.setFilter=function(t){this.num%2==0?this.videoProcessor.setFilter(t):this.imageProcessor.setFilter(t)},t.prototype.render=function(t){this.num%2==0?this.videoProcessor&&this.videoProcessor.render(t):this.imageProcessor&&this.imageProcessor.render(t)},t}(),I=function(){function t(t){void 0===t&&(t="SandBox"),this.id=t,this.Init(),window.app=this}return t.Init=function(i){void 0===i&&(i="SandBox"),new t(i)},t.prototype.Init=function(){var t=this,i=document.getElementById(this.id);if(i){this.hostDiv=i;var e=document.createElement("div");e&&(this.div=e,this.div.style.width="400px",this.div.style.height="300px",this.div.style.background="#dddddd",this.hostDiv.append(this.div)),this.implmentation=new L(this.hostDiv),this.canvas=new n(this,e),this.canvas.initBinder=function(i){return t.InitRender(i)},this.canvas.RenderBinder=function(i){return t.Render(i)},this.activeCommandController=new l(this),this.mouseInteraction=new a,this.InitEventListener(e),this.view=new E(this),this.canvas.LoopInit(),this.canvas.SetLevel6()}},t.prototype.InitEventListener=function(t){var i=this;this.mouseInteraction.InitNativeMouseEvent(t),this.mouseInteraction.MouseEventEmittingBinder=function(t){i.activeCommandController.MouseEventController(t)},window.addEventListener("resize",(function(t){i.Resize(t,i.hostDiv.clientWidth,i.hostDiv.clientHeight)}))},t.prototype.Resize=function(t,i,e){},t.prototype.InitRender=function(t){this.implmentation.init(t)},t.prototype.Render=function(t){this.implmentation.render(t)},t}(),C=function(){function t(t,i){void 0===t&&(t="SandBox"),void 0===i&&(i=1),this.version=1,this.id=t,this.version=i,this.Init()}return t.Init=function(i){void 0===i&&(i="SandBox"),new t(i,1)},t.prototype.Init=function(){1===this.version&&(this.renderer=new I(this.id))},t}(),g=function(){function t(t){void 0===t&&(t="SandBox"),new C(t)}return t.Init=function(i){new t(i).Dummy()},t.prototype.Dummy=function(){console.log("working")},t}()}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33362],{76465:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(78628);n(37180);var i=n(35313),s=n(80521);class o{constructor(e=9,t){this._compareMinX=d,this._compareMinY=c,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),p.prune(),x.prune(),I.prune(),b.prune()}all(e){l(this._data,e)}search(e,t){let n=this._data,r=this._toBBox;if(y(e,n))for(p.clear();n;){for(let i=0,s=n.children.length;i<s;i++){let s=n.children[i],o=n.leaf?r(s):s;y(e,o)&&(n.leaf?t(s):g(e,o)?l(s,t):p.push(s))}n=p.pop()}}collides(e){let t=this._data,n=this._toBBox;if(!y(e,t))return!1;for(p.clear();t;){for(let r=0,i=t.children.length;r<i;r++){let i=t.children[r],s=t.leaf?n(i):i;if(y(e,s)){if(t.leaf||g(e,s))return!0;p.push(i)}}t=p.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length){if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){let e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new w([]),this}remove(e){if(!e)return this;let t,n=this._data,i=null,s=0,o=!1,l=this._toBBox(e);for(I.clear(),b.clear();n||I.length>0;){if(n||(n=I.pop(),i=I.data[I.length-1],s=b.pop()??0,o=!0),n.leaf&&-1!==(t=(0,r.cq)(n.children,e,n.children.length,n.indexHint)))return n.children.splice(t,1),I.push(n),this._condense(I),this;o||n.leaf||!g(n,l)?i?(s++,n=i.children[s],o=!1):n=null:(I.push(n),b.push(s),s=0,i=n,n=n.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_build(e,t,n,r){let i=n-t+1,s=this._maxEntries;if(i<=s){let r=new w(e.slice(t,n+1));return h(r,this._toBBox),r}r||(r=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/s**(r-1)));let o=new Z([]);o.height=r;let l=Math.ceil(i/s),u=l*Math.ceil(Math.sqrt(s));_(e,t,n,u,this._compareMinX);for(let i=t;i<=n;i+=u){let t=Math.min(i+u-1,n);_(e,i,t,l,this._compareMinY);for(let n=i;n<=t;n+=l){let i=Math.min(n+l-1,t);o.children.push(this._build(e,n,i,r-1))}}return h(o,this._toBBox),o}_insert(e,t,n){let r=this._toBBox,i=n?e:r(e);I.clear();let s=function(e,t,n,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==n;){let n,r=1/0,i=1/0;for(let s=0,o=t.children.length;s<o;s++){let o=t.children[s],l=f(o),h=(Math.max(o.maxX,e.maxX)-Math.min(o.minX,e.minX))*(Math.max(o.maxY,e.maxY)-Math.min(o.minY,e.minY))-l;h<i?(i=h,r=l<r?l:r,n=o):h===i&&l<r&&(r=l,n=o)}t=n||t.children[0]}return t}(i,this._data,t,I);for(s.children.push(e),a(s,i);t>=0&&I.data[t].children.length>this._maxEntries;)this._split(I,t),t--;!function(e,t,n){for(let r=n;r>=0;r--)a(t.data[r],e)}(i,I,t)}_split(e,t){let n=e.data[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);let s=this._chooseSplitIndex(n,i,r);if(!s)return;let o=n.children.splice(s,n.children.length-s),l=n.leaf?new w(o):new Z(o);l.height=n.height,h(n,this._toBBox),h(l,this._toBBox),t?e.data[t-1].children.push(l):this._splitRoot(n,l)}_splitRoot(e,t){this._data=new Z([e,t]),this._data.height=e.height+1,h(this._data,this._toBBox)}_chooseSplitIndex(e,t,n){let r,i,s;r=i=1/0;for(let o=t;o<=n-t;o++){let t=u(e,0,o,this._toBBox),l=u(e,o,n,this._toBBox),h=function(e,t){let n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-n)*Math.max(0,Math.min(e.maxY,t.maxY)-r)}(t,l),a=f(t)+f(l);h<r?(r=h,s=o,i=a<i?a:i):h===r&&a<i&&(i=a,s=o)}return s}_chooseSplitAxis(e,t,n){let r=e.leaf?this._compareMinX:d,i=e.leaf?this._compareMinY:c;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);let i=this._toBBox,s=u(e,0,t,i),o=u(e,n-t,n,i),l=m(s)+m(o);for(let r=t;r<n-t;r++){let t=e.children[r];a(s,e.leaf?i(t):t),l+=m(s)}for(let r=n-t-1;r>=t;r--){let t=e.children[r];a(o,e.leaf?i(t):t),l+=m(o)}return l}_condense(e){for(let t=e.length-1;t>=0;t--){let n=e.data[t];if(0===n.children.length){if(t>0){let i=e.data[t-1],s=i.children;s.splice((0,r.cq)(s,n,s.length,i.indexHint),1)}else this.clear()}else h(n,this._toBBox)}}_initFormat(e){let t=["return a"," - b",";"];this._compareMinX=Function("a","b",t.join(e[0])),this._compareMinY=Function("a","b",t.join(e[1])),this._toBBox=Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){let n=e;for(x.clear();n;){if(!0===n.leaf)for(let e of n.children)t(e);else x.pushArray(n.children);n=x.pop()??null}}function h(e,t){u(e,0,e.children.length,t,e)}function u(e,t,n,r,i){i||(i=new w([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s,o=t;o<n;o++)s=e.children[o],a(i,e.leaf?r(s):s);return i}function a(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function d(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function f(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function m(e){return e.maxX-e.minX+(e.maxY-e.minY)}function g(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function y(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function _(e,t,n,r,i){let o=[t,n];for(;o.length;){let t=o.pop(),n=o.pop();if(t-n<=r)continue;let l=n+Math.ceil((t-n)/r/2)*r;(0,s.q)(e,l,n,t,i),o.push(n,l,l,t)}}let p=new i.Z,x=new i.Z,I=new i.Z,b=new i.Z({deallocator:void 0});class B{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class M extends B{constructor(){super(...arguments),this.height=1,this.indexHint=new r.SO}}class w extends M{constructor(e){super(),this.children=e,this.leaf=!0}}class Z extends M{constructor(e){super(),this.children=e,this.leaf=!1}}},53787:function(e,t,n){n.d(t,{S6:function(){return s},u_:function(){return i}});var r=n(73503);class i{constructor(e=null,t={},n,r){this.geometry=e,this.attributes=t,this.centroid=n,this.objectId=r,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(e,t){let n=e.geometry?r.Z.fromJSON(e.geometry):null,s=e.centroid?r.Z.fromJSON(e.centroid):null,o=e.attributes[t];return new i(n,e.attributes,s,o)}weakClone(){let e=new i(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}clone(){let e=new i(this.geometry?.clone(),{...this.attributes},this.centroid?.clone(),this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}function s(e){return!!e.geometry?.coords?.length}},52645:function(e,t,n){n.d(t,{Z:function(){return r}});class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){let e=new r;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},73503:function(e,t,n){n.d(t,{Z:function(){return r}});class r{constructor(e=[],t=[],n=!1){this.lengths=e??[],this.coords=t??[],this.hasIndeterminateRingOrder=n}static fromJSON(e){return new r(e.lengths,e.coords,e.hasIndeterminateRingOrder)}static fromRect(e){let[t,n,i,s]=e,o=i-t,l=s-n;return new r([5],[t,n,o,0,0,l,-o,0,0,-l])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,t)=>e+t)}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){let r=this.lengths[n];for(let n=0;n<r;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=r}}deltaDecode(){let e=this.clone(),{coords:t,lengths:n}=e,r=0;for(let e of n){for(let n=1;n<e;n++)t[2*(r+n)]+=t[2*(r+n)-2],t[2*(r+n)+1]+=t[2*(r+n)-1];r+=e}return e}clone(e){if(0===this.lengths.length)return new r([],[this.coords[0],this.coords[1]]);let t=(0===this.lengths.length?1:this.lengths.reduce((e,t)=>e+t))*2,n=this.coords.slice(0,t);return e?(e.set(n),new r(this.lengths,e,this.hasIndeterminateRingOrder)):new r(Array.from(this.lengths),Array.from(n),this.hasIndeterminateRingOrder)}}},70788:function(e,t,n){n.d(t,{H:function(){return l}});var r=n(37180),i=n(76465),s=n(20795);let o={minX:0,minY:0,maxX:0,maxY:0};class l{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.Q(9,(0,r.Z)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){let e=Array(this._idByBounds.size),t=0;this._idByBounds.forEach((n,r)=>{e[t++]=r}),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(e=>this._idByBounds.has(e))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;let e=(0,s.cS)();for(let t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){let t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){var n,r;this._loadIndex(),n=this._index,r=e=>t(this._idByBounds.get(e)),o.minX=e[0],o.minY=e[1],o.maxX=e[2],o.maxY=e[3],n.search(o,r)}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){let t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},33362:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(78628),i=n(94605),s=n(60163),o=n(65223),l=n(54053),h=n(20795),u=n(83339),a=n(70788),d=n(68144),c=n(61718);let f=(0,l.Ue)();class m{constructor(e){this.geometryInfo=e,this._boundsStore=new a.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new s.Z,this.featureAdapter=c.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;let[t,n,r,i]=this.fullBounds;return{xmin:t,ymin:n,xmax:r,ymax:i,spatialReference:(0,d.S2)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(let t of e)this._add(t);this._emitChanged()}upsertMany(e){let t=e.map(e=>this._upsert(e));return this._emitChanged(),t.filter(r.pC)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){let t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){for(let t of(this._boundsStore.invalidateIndex(),e)){let e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(let n of e){let e=this._boundsStore.get(n.objectId);e&&t((0,l.JR)(f,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach(t=>e(t))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,e=>{t(this._featuresById.get(e))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach((t,n)=>{this._markedIds.has(n)||(e=!0,this._remove(t))}),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(e){let t;if(!e)return;let n=e.objectId;if(null==n)return void o.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.Z("featurestore:invalid-feature","feature id is missing",{feature:e}));let r=this._featuresById.get(n);if(this._markedIds.add(n),r?(e.displayId=r.displayId,t=this._boundsStore.get(n),this._boundsStore.delete(n)):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(n,null),void this._featuresById.set(n,e);null!=(t=(0,u.$)(null!=t?t:(0,h.Ue)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM))&&this._boundsStore.set(n,t),this._featuresById.set(n,e)}_upsert(e){let t=e?.objectId;if(null==t)return o.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.Z("featurestore:invalid-feature","feature id is missing",{feature:e})),null;let n=this._featuresById.get(t);if(!n)return this._add(e),e;this._markedIds.add(t);let{geometry:r,attributes:s}=e;for(let e in s)n.attributes[e]=s[e];return r&&(n.geometry=r,this._boundsStore.set(t,(0,u.$)((0,h.Ue)(),r,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),n}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);let t=e.objectId;return this._markedIds.delete(t),this._boundsStore.delete(t),this._featuresById.delete(t),e}}},83339:function(e,t,n){n.d(t,{$:function(){return ee},$g:function(){return et},EI:function(){return A},GH:function(){return U},IN:function(){return b},Iv:function(){return G},J6:function(){return k},Jd:function(){return I},Nh:function(){return W},RZ:function(){return Q},Uy:function(){return L},XA:function(){return z},Yn:function(){return O},cn:function(){return H},dd:function(){return S},di:function(){return J},eG:function(){return j},fQ:function(){return B},hY:function(){return en},h_:function(){return V},ks:function(){return R},lM:function(){return D},lz:function(){return er},zj:function(){return K}});var r=n(94605),i=n(65223),s=n(36152),o=n(54053),l=n(20795),h=n(5005),u=n(53787),a=n(52645),d=n(73503);function c(e,t){return e?t?4:3:t?3:2}let f=()=>i.Z.getLogger("esri.layers.graphics.featureConversionUtils"),m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},g=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s},y=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s,e[n+2]=t[r+2]},_=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s,e[n+2]=t[r+3]},p=(e,t,n,r,i,s)=>{e[n]=i,e[n+1]=s,e[n+2]=t[r+2],e[n+3]=t[r+3]};function x(e,t,n,r){if(e){if(n)return t&&r?p:y;if(t&&r)return _}else if(t&&r)return y;return g}function I({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function b({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function B(e,t,n){return e?t?n?F(e):Z(e):n?Y(e):M(e):null}function M(e){let t=e.coords;return{x:t[0],y:t[1]}}function w(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function Z(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function v(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function Y(e){let t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function X(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function F(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function N(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function T(e,t){return e&&t?N:e?v:t?X:w}function S(e,t,n=T(null!=t.z,null!=t.m)){return n(e,t)}function G(e,t,n){if(null==e)return null;let r=c(t,n),i=[];for(let t=0;t<e.coords.length;t+=r){let n=[];for(let i=0;i<r;i++)n.push(e.coords[t+i]);i.push(n)}return t?n?{points:i,hasZ:t,hasM:n}:{points:i,hasZ:t}:n?{points:i,hasM:n}:{points:i}}function E(e,t,n=c(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;let r=e.coords,i=0;for(let e of t.points)for(let t=0;t<n;t++)r[i++]=e[t];return e}function k(e,t,n){if(!e)return null;let r=c(t,n),{coords:i,lengths:s}=e,o=[],l=0;for(let e of s){let t=[];for(let n=0;n<e;n++){let e=[];for(let t=0;t<r;t++)e.push(i[l++]);t.push(e)}o.push(t)}return t?n?{paths:o,hasZ:t,hasM:n}:{paths:o,hasZ:t}:n?{paths:o,hasM:n}:{paths:o}}function P(e,t,n=c(t.hasZ,t.hasM)){let{lengths:r,coords:i}=e,s=0;for(let e of t.paths){for(let t of e)for(let e=0;e<n;e++)i[s++]=t[e];r.push(e.length)}return e}function j(e,t,n){if(!e)return null;let r=c(t,n),{coords:i,lengths:s}=e,o=[],l=0;for(let e of s){let t=[];for(let n=0;n<e;n++){let e=[];for(let t=0;t<r;t++)e.push(i[l++]);t.push(e)}o.push(t)}return t?n?{rings:o,hasZ:t,hasM:n}:{rings:o,hasZ:t}:n?{rings:o,hasM:n}:{rings:o}}function L(e,t,n=t.hasZ,r=t.hasM){return R(e,t.rings,n,r)}function R(e,t,n,r){let i=c(n,r),{lengths:s,coords:o}=e,l=0;for(let n of(ei(e),t)){for(let e of n)for(let t=0;t<i;t++)o[l++]=e[t];s.push(n.length)}return e}let q=[],C=[];function z(e,t,n,r,i){q[0]=e;let[s]=O(C,q,t,n,r,i);return es(q),es(C),s}function O(e,t,n,i,s,o){if(es(e),!n){for(let n of t){let t=o?n.attributes[o]:void 0;e.push(new u.u_(null,n.attributes,null,t))}return e}switch(n){case"esriGeometryPoint":return function(e,t,n,r,i){let s=T(n,r);for(let{geometry:n,attributes:r}of t){let t=null!=n?s(new d.Z,n):null;e.push(new u.u_(t,r,null,i?r[i]:void 0))}return e}(e,t,i,s,o);case"esriGeometryMultipoint":return function(e,t,n,r,i){let s=c(n,r);for(let{geometry:n,attributes:r}of t){let t=null!=n?E(new d.Z,n,s):null;e.push(new u.u_(t,r,null,i?r[i]:void 0))}return e}(e,t,i,s,o);case"esriGeometryPolyline":return function(e,t,n,r,i){let s=c(n,r);for(let{geometry:n,attributes:r,centroid:o}of t){let t=null!=n?P(new d.Z,n,s):null,l=null!=o?S(new d.Z,o):null;e.push(new u.u_(t,r,l,i?r[i]:void 0))}return e}(e,t,i,s,o);case"esriGeometryPolygon":return function(e,t,n,r,i){for(let{geometry:s,centroid:o,attributes:l}of t){let t=null!=s?L(new d.Z,s,n,r):null,h=i?l[i]:void 0;null!=o?e.push(new u.u_(t,l,w(new d.Z,o),h)):e.push(new u.u_(t,l,null,h))}return e}(e,t,i,s,o);default:f().error("convertToFeatureSet:unknown-geometry",new r.Z(`Unable to parse unknown geometry type '${n}'`)),es(e)}return e}function A(e,t,n,r){C[0]=e,$(q,C,t,n,r);let i=q[0];return es(q),es(C),i}function U(e,t,n){if(null==e)return null;let i=new d.Z;return("hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),(0,h.wp)(e))?T(null!=t?t:null!=e.z,null!=n?n:null!=e.m)(i,e):(0,h.oU)(e)?L(i,e,t,n):(0,h.l9)(e)?P(i,e,c(t,n)):(0,h.aW)(e)?E(i,e,c(t,n)):void f().error("convertFromGeometry:unknown-geometry",new r.Z(`Unable to parse unknown geometry type '${e}'`))}function J(e,t,n,i){let s=e&&("coords"in e?e:e.geometry);if(null==s)return null;switch(t){case"esriGeometryPoint":{let e=M;return n&&i?e=F:n?e=Z:i&&(e=Y),e(s)}case"esriGeometryMultipoint":return G(s,n,i);case"esriGeometryPolyline":return k(s,n,i);case"esriGeometryPolygon":return j(s,n,i);default:return f().error("convertToGeometry:unknown-geometry",new r.Z(`Unable to parse unknown geometry type '${t}'`)),null}}function $(e,t,n,i,s){if(es(e),null==n)return function(e,t){for(let n of t)e.push({attributes:n.attributes});return e}(e,t);switch(n){case"esriGeometryPoint":return function(e,t,n,r){let i=M;for(let s of(n&&r?i=F:n?i=Z:r&&(i=Y),t)){let{geometry:t,attributes:n}=s,r=null!=t?i(t):null;e.push({attributes:n,geometry:r})}return e}(e,t,i,s);case"esriGeometryMultipoint":return function(e,t,n,r){for(let{geometry:i,attributes:s}of t)e.push({attributes:s,geometry:null!=i?G(i,n,r):null});return e}(e,t,i,s);case"esriGeometryPolyline":return function(e,t,n,r){for(let{geometry:i,attributes:s}of t)e.push({attributes:s,geometry:null!=i?k(i,n,r):null});return e}(e,t,i,s);case"esriGeometryPolygon":return function(e,t,n,r){for(let{geometry:i,attributes:s,centroid:o}of t){let t=null!=i?j(i,n,r):null;if(null!=o){let n=M(o);e.push({attributes:s,centroid:n,geometry:t})}else e.push({attributes:s,geometry:t})}return e}(e,t,i,s);default:f().error("convertToFeatureSet:unknown-geometry",new r.Z(`Unable to parse unknown geometry type '${n}'`))}return e}function H(e){let{objectIdFieldName:t,spatialReference:n,transform:r,fields:i,hasM:s,hasZ:o,features:l,geometryType:h,exceededTransferLimit:u,uniqueIdField:a,queryGeometry:d,queryGeometryType:c}=e,f={features:$([],l,h,o,s),fields:i,geometryType:h,objectIdFieldName:t,spatialReference:n,uniqueIdField:a,queryGeometry:J(d,c,!1,!1)};return r&&(f.transform=r),u&&(f.exceededTransferLimit=u),s&&(f.hasM=s),o&&(f.hasZ=o),f}function V(e,t){let n=new a.Z,{hasM:i,hasZ:s,features:o,objectIdFieldName:l,spatialReference:h,geometryType:u,exceededTransferLimit:d,transform:c,fields:m}=e;return m&&(n.fields=m),n.geometryType=u??null,n.objectIdFieldName=l??t??null,n.spatialReference=h??null,n.objectIdFieldName?(o&&O(n.features,o,u,s,i,n.objectIdFieldName),d&&(n.exceededTransferLimit=d),i&&(n.hasM=i),s&&(n.hasZ=s),c&&(n.transform=c)):f().error(new r.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n}function D(e){let{transform:t,features:n,hasM:r,hasZ:i}=e;if(!t)return e;for(let e of n)null!=e.geometry&&et(e.geometry,e.geometry,r,i,t),null!=e.centroid&&et(e.centroid,e.centroid,r,i,t);return e.transform=null,e}function Q(e,t){let{geometryType:n,features:r,hasM:i,hasZ:s}=t;if(!e)return t;for(let t=0;t<r.length;t++){let o=r[t],l=o.weakClone();l.geometry=new d.Z,W(l.geometry,o.geometry,i,s,n,e),o.centroid&&(l.centroid=new d.Z,W(l.centroid,o.centroid,i,s,"esriGeometryPoint",e)),r[t]=l}return t.transform=e,t}function W(e,t,n,r,i,s,o=n,l=r){if(ei(e),!t?.coords.length)return null;let h=m[i],{coords:u,lengths:a}=t,d=c(n,r),f=c(n&&o,r&&l),g=x(n,r,o,l);if(!a.length)return g(e.coords,u,0,0,I(s,u[0]),b(s,u[1])),ei(e,d,0),e;let y,_,p,B,M=0,w=0,Z=0;for(let t of a){if(t<h)continue;let n=0;w=Z,p=y=I(s,u[M]),B=_=b(s,u[M+1]),g(e.coords,u,w,M,p,B),n++,M+=d,w+=f;for(let r=1;r<t;r++,M+=d)p=I(s,u[M]),B=b(s,u[M+1]),p===y&&B===_||(g(e.coords,u,w,M,p-y,B-_),w+=f,n++,y=p,_=B);n>=h&&(e.lengths.push(n),Z=w)}return es(e.coords,Z),e.coords.length?e:null}function K(e,t,n,r,i,s,o=n,l=r){if(ei(e),!t?.coords.length)return null;let h=m[i],{coords:u,lengths:a}=t,d=c(n,r),f=c(n&&o,r&&l),g=x(n,r,o,l);if(!a.length)return g(e.coords,u,0,0,u[0],u[1]),ei(e,d,0),e;let y=0,_=s*s;for(let t of a){if(t<h){y+=t*d;continue}let n=e.coords.length/f,r=y,i=y+(t-1)*d;g(e.coords,u,e.coords.length,r,u[r],u[r+1]),function e(t,n,r,i,s,o,l){let h,u=i,a=0;for(let e=o+r;e<l;e+=r)(h=function(e,t,n,r){let i=e[t],s=e[t+1],o=e[n],l=e[n+1],h=e[r],u=e[r+1],a=o,d=l,c=h-a,f=u-d;if(0!==c||0!==f){let e=((i-a)*c+(s-d)*f)/(c*c+f*f);e>1?(a=h,d=u):e>0&&(a+=c*e,d+=f*e)}return(c=i-a)*c+(f=s-d)*f}(n,e,o,l))>u&&(a=e,u=h);u>i&&(a-o>r&&e(t,n,r,i,s,o,a),s(t,n,t.length,a,n[a],n[a+1]),l-a>r&&e(t,n,r,i,s,a,l))}(e.coords,u,d,_,g,r,i),g(e.coords,u,e.coords.length,i,u[i],u[i+1]);let s=e.coords.length/f-n;s>=h?e.lengths.push(s):es(e.coords,n*f),y+=t*d}return e.coords.length?e:null}function ee(e,t,n,r){if(!t?.coords?.length)return null;let i=c(n,r),s=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(t&&t.coords){let e=t.coords;for(let t=0;t<e.length;t+=i){let n=e[t],r=e[t+1];s=Math.min(s,n),u=Math.max(u,n),h=Math.min(h,r),a=Math.max(a,r)}}return(0,o.is)(e)?(0,o.bZ)(e,s,h,u,a):(0,l.al)(s,h,u,a,e),e}function et(e,t,n,r,i){let{coords:o,lengths:l}=t,h=c(n,r);if(!o.length)return e!==t&&ei(e),e;(0,s.O3)(i);let{originPosition:u,scale:a,translate:d}=i;eo.originPosition=u;let f=eo.scale;f[0]=a[0]??1,f[1]=-(a[1]??1),f[2]=a[2]??1,f[3]=a[3]??1;let m=eo.translate;if(m[0]=d[0]??0,m[1]=d[1]??0,m[2]=d[2]??0,m[3]=d[3]??0,!l.length){for(let t=0;t<h;++t)e.coords[t]=function({scale:e,translate:t},n,r){return n*e[r]+t[r]}(eo,o[t],t);return e!==t&&ei(e,h,0),e}let g=0;for(let t=0;t<l.length;t++){let n=l[t];e.lengths[t]=n;for(let t=0;t<h;++t)e.coords[g+t]=function({scale:e,translate:t},n,r){return n*e[r]+t[r]}(eo,o[g+t],t);let r=e.coords[g],i=e.coords[g+1];g+=h;for(let t=1;t<n;t++,g+=h){r+=o[g]*f[0],i+=o[g+1]*f[1],e.coords[g]=r,e.coords[g+1]=i;for(let t=2;t<h;++t)e.coords[g+t]=function({scale:e,translate:t},n,r){return n*e[r]+t[r]}(eo,o[g+t],t)}}return e!==t&&ei(e,o.length,l.length),e}function en(e,t,n,r,i,s){if(ei(e),e.lengths.push(...t.lengths),n===i&&r===s)for(let n=0;n<t.coords.length;n++)e.coords.push(t.coords[n]);else{let o=c(n,r),l=x(n,r,i,s),h=t.coords;for(let t=0;t<h.length;t+=o)l(e.coords,h,e.coords.length,t,h[t],h[t+1])}return e}function er(e,t){let{coords:n,lengths:r}=e,i=0,s=0;for(let e=0;e<r.length;e++){let o=r[e];s+=function(e,t,n,r){let i=0,s=e[r*t],o=e[r*(t+1)];for(let l=1;l<n;l++){let n=s+e[r*(t+l)],h=o+e[r*(t+l)+1],u=(n-s)*(h+o);s=n,o=h,i+=u}return .5*i}(n,i,o,t),i+=o}return Math.abs(s)}function ei(e,t=0,n=0){es(e.lengths,n),es(e.coords,t)}function es(e,t=0){e.length!==t&&(e.length=t)}let eo={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}}}]);
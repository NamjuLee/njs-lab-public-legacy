"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35495],{35495:function(t,e,i){i.r(e),i.d(e,{Edge:function(){return n},Graph:function(){return h},Node:function(){return o}});var s=i(8483);class h{Init(t,e){this.InitGridR(t,e),this.nodes[0].fixed=!0,this.nodes[9].fixed=!0,this.nodes[this.nodes.length-1].fixed=!0,this.nodes[this.nodes.length-1-9].fixed=!0}updateOptionA(t){this.damping=.1*t,console.log(this.damping,"damping")}updateOptionB(t){this.timeStep=.05*t,console.log(this.timeStep,"timeStep")}updateOptionC(t){}shrinkage(t,e){this.nodes[t].fixed=!0;for(let i=0;i<this.nodes[t].edge.length;++i)this.nodes[t].edge[i].targetLengthShrinkage(e)}InitGridR(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=t/i+1,o=e/h+1,d=this.nodes.length;for(let d=0;d<h;++d)for(let h=0;h<i;++h){let i=0+n*h-.5*t,r=0+o*d-.5*e;this.AddNode(i,0,r,s.h9.Zero(),1)}for(let t=0;t<h;++t)for(let e=0;e<i;++e){let s=t*i+e;0!==e&&this.AddEdge(this.nodes[d+s-1],this.nodes[d+s]),0!==t&&this.AddEdge(this.nodes[d+s-i],this.nodes[d+s])}}Clear(){this.nodes=[],this.edges=[]}AddNode(t,e,i){let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new s.h9(0,0,0),n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,d=new o(new s.h9(t,e,i),h,n);return this.nodes.push(d),d.id=this.nodes.length-1,d}AddEdge(t,e){let i=new n(t,e);return t.edge.push(i),e.edge.push(i),this.edges.push(i),i}MouseMove(t,e){this.mouse.x=t,this.mouse.y=e}MouseDClick(t,e){this.mouse.x=t,this.mouse.y=e;let i=this.FindNode(this.mouse);i&&(i.fixed=!i.fixed)}MouseDown(t,e){this.mouse.x=t,this.mouse.y=e,this.capture=this.FindNode(this.mouse),this.capture&&(this.capture.fixed=!0,this.capture.isCapture=!0),console.log("down",t,e,this.capture)}MouseLeftClick(t,e){console.log("click",t,e,this.capture)}MouseUp(t,e){this.mouse.x=t,this.mouse.y=e,this.capture&&(this.capture.isCapture=!1,this.capture=void 0),console.log("up",t,e)}MouseDrag(t,e){this.mouse.x=t,this.mouse.y=e,this.capture&&(this.capture.v.x=t,this.capture.v.y=e),console.log("drag",t,e)}Render(t){this.dt+=.1,this.Move(this.mouse.x,this.mouse.y,this.mouse.z,this.damping,0,this.timeStep,this.groundZ,1)}FindNode(t){for(let e of this.nodes)if(e.v.Distance(t)<e.m+3)return e}Move(t,e,i,h){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.01,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-10,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=new s.h9(t,e,i);for(let t=0;t<r;++t){for(let t of this.nodes){let e=s.h9.Sub(l,t.v),i=e.Length();e.Unitize(),t.f=s.h9.Add(s.h9.Scale(e,.1*Math.exp(-.1*i*i)),s.h9.Scale(s.h9.YAxis(),n))}for(let t of this.edges)t.ApplySpringForce();for(let t of this.nodes)t.Move(o,h,d)}}constructor(){this.nodes=[],this.edges=[],this.dt=0,this.mouse=new s.h9(0,0),this.damping=.96,this.gravity=-.032,this.timeStep=.16,this.groundZ=-9.26,this.capture=void 0}}class n{Render(t){t.strokeStyle="#ff0000",s.h9.Distance(this.n0.v,this.n1.v)<2*this.targetLength&&(t.strokeStyle="#0000ff"),t.beginPath(),t.moveTo(this.n0.v.x,this.n0.v.y),t.lineTo(this.n1.v.x,this.n1.v.y),t.closePath(),t.stroke()}targetLengthShrinkage(t){this.isModified||(this.isModified=!0,this.targetLength*=t)}ApplySpringForce(){let t=s.h9.Sub(this.n1.v,this.n0.v),e=t.Length();t.Unitize();let i=s.h9.Scale(t,(e-this.targetLength)*this.springConstant);this.n0.f=s.h9.Add(this.n0.f,i),this.n1.f=s.h9.Sub(this.n1.f,i)}constructor(t,e){this.targetLength=0,this.isModified=!1,this.springConstant=.8,this._targetLengthOriginal=0,this.n0=t,this.n1=e,this.targetLength=.95*this.n0.v.Distance(this.n1.v),this._targetLengthOriginal=this.targetLength}}class o{Move(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],this.fixed||this.isCapture)return;this.u.Mult(e),this.u.Add(s.h9.Scale(this.f,t/this.m));let i=s.h9.Scale(this.u,t);this.v.x+=i.x,this.v.y+=i.y}Render(t,e){t.beginPath(),e.Distance(this.v)<this.m+3?(t.fillStyle="#000000",t.arc(this.v.x,this.v.y,this.m+6,0,2*Math.PI)):(t.fillStyle="#f90000",t.arc(this.v.x,this.v.y,this.m+3,0,2*Math.PI)),this.fixed&&(t.fillStyle="#000000",t.arc(this.v.x,this.v.y,this.m+7.5,0,2*Math.PI)),t.closePath(),t.fill()}constructor(t,e,i){this.id=-1,this.edge=[],this.nNodes=[],this.v=s.h9.Origin(),this.f=s.h9.Origin(),this.u=s.h9.Origin(),this.m=0,this.fixed=!1,this.isCapture=!1,this.v=new s.h9(t.x,t.y,t.z),this.u=new s.h9(e.x,e.y,e.z),this.m=i}}}}]);
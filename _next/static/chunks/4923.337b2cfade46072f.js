"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4923],{63810:function(t,e,i){i.d(e,{$b:function(){return r.$},CU:function(){return a.CU},Ds:function(){return g.D},EW:function(){return a.EW},Hq:function(){return m.Hq},KF:function(){return u.KF},Nl:function(){return p.Nl},R4:function(){return u.R4},Ry:function(){return l.Ry},TE:function(){return d.TE},UU:function(){return h.U},Ux:function(){return d.Ux},VT:function(){return u.VT},Wf:function(){return l.Wf},XL:function(){return m.XL},Yr:function(){return d.Yr},__:function(){return p.__},ew:function(){return s.e},g9:function(){return l.g9},hL:function(){return n.hL},i$:function(){return c.i},iC:function(){return m.iC},kC:function(){return d.kC},lJ:function(){return l.lJ},nP:function(){return u.nP},oU:function(){return p.oU},qA:function(){return p.qA},rW:function(){return m.rW},sR:function(){return u.sR},wX:function(){return m.wX},zq:function(){return o.zq}});var a=i(23176),n=i(56891),r=i(92491),o=i(44147),s=i(59965),p=i(3584),l=i(13367),h=i(83656),c=i(91588),d=i(68045),g=i(86376),m=i(40597),u=i(91300)},4923:function(t,e,i){i.r(e),i.d(e,{ImageAnnoApp:function(){return x},Solution:function(){return _}}),i(92491);var a=i(23176),n=i(40597),r=i(86376);i(63810);var o=i(3584),s=i(56891),p=i(12494),l=i(44147);i(83656);var h=i(91300);class c{undo(t){t===o.y0.Editing||t===o.y0.Effecting?this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickUndo():t===o.y0.Drawing&&this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickUndo()}redo(t){t===o.y0.Editing||t===o.y0.Effecting?this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickRedo():t===o.y0.Drawing&&this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickRedo()}rotateCropping(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onRotateCropping(t)}zoomCropping(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onZoomLevel(t)}setScaleGraphics(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];this.app.implementation.imageWrapper.tools.drawingTool.app.api.setScaleGraphics(t,e,i)}scaleUpGraphics(){this.app.implementation.imageWrapper.tools.drawingTool.app.api.setScaleGraphics(.1,!1)}scaleDownGraphics(){this.app.implementation.imageWrapper.tools.drawingTool.app.api.setScaleGraphics(-.1,!1)}activateEffectEnv(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.y0.Editing;this.app.implementation.imageWrapper.tools.editingTool.app.api.activateEffectEnv(t)}deactivateEffectEnv(){this.app.implementation.imageWrapper.tools.editingTool.app.api.deactivateEffectEnv()}setColor(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];t===o.y0.Drawing&&this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickSetColor(e,i)}setDrawingMode(t){this.app.implementation.imageWrapper.tools.drawingTool.app&&this.app.implementation.imageWrapper.tools.drawingTool.app.pushAction(t)}revertToOriginal(t){t===o.y0.Drawing?this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickRevertToOriginal():this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickRevertToOriginal()}shiftShape(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickShiftShape(t)}shiftShapeRatio(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickShiftShapeRatio(t)}shiftFilterPreset(t){this.app.implementation.imageWrapper.tools.editingTool.app.api.shiftFilterPreset(t)}reset(){}resizeByWindow(){this.app.implementation.imageWrapper.resizeByWindow()}destroy(){this.app.implementation.imageWrapper.destroy(),this.app.modelController.destroy();try{this.app.modelController.divHost.removeChild(this.app.modelController.div)}catch(t){}}destroyEditing(){this.app.implementation.imageWrapper.tools.editingTool.app.api.onClickPlace(),this.app.implementation.imageWrapper.tools.editingTool.app.destroy()}destroyDrawing(){this.app.implementation.imageWrapper.dataSet.paramDrawing.updateDrawingData(this.app.implementation.imageWrapper.tools.drawingTool.app.api.getDataGeometry()),this.app.implementation.imageWrapper.dataSet.paramDrawing.scale=this.app.implementation.imageWrapper.tools.drawingTool.app.api.getScaleFactor(),this.app.implementation.imageWrapper.tools.drawingTool.app.api.onClickPlace(),this.app.implementation.imageWrapper.tools.drawingTool.app.destroy()}getData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.app.implementation.imageWrapper.getData(t,e)}resizeDiv(t){t<.3?this.app.implementation.imageWrapper.updateSizeDiv(25):t>.6?this.app.implementation.imageWrapper.updateSizeDiv(90):this.app.implementation.imageWrapper.updateSizeDiv(50)}onClickImportImgByURL(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.app.implementation.imageWrapper.importImgByURL(t,e)}onClickAppendApp(t){this.app.implementation.imageWrapper.appendApp(t)}onClickDownload(){this.app.implementation.commonProcess.downloadImage()}onToggleInteractionMode(){this.app.implementation.commonProcess.toggleInteractionMode()}constructor(t){this.app=t}}class d{updateSizeDiv(t){this.imageWrapper.implementation.app.modelController.processorType===o.XN.Img&&(this.divImg.style.width="".concat(t,"%"))}resetImageSize(){this.imgOrigin.width=this.widthOrigin,this.imgOrigin.height=this.heightOrigin}initDivForImgModified(t){this.widthOrigin=t.width,this.heightOrigin=t.height,this.imgOrigin.style.maxWidth="100%",this.imgOrigin.style.maxHeight="100%";let e=document.createElement("div");e.style.textAlign="center",e.style.display="flex",e.style.justifyContent="center",this.imageWrapper.implementation.app.modelController.div.append(e);let i=document.createElement("div");i.id="divImg",i.style.width="50%",i.style.display="flex",i.style.justifyContent="center",i.append(this.imgOrigin),this.divImg=i,e.append(this.divImg)}get img(){return this._img}set img(t){this._img=t}initDivForCSS(t){this.widthOrigin=t.width,this.heightOrigin=t.height,this.img.style.objectFit="none";let e=document.createElement("div");e.style.textAlign="center",e.append(t),this.imageWrapper.implementation.app.modelController.div.append(e)}updateImage(t){this.divImg.removeChild(this.img),this.img=t,this.img.style.width="100%",this.img.style.height="100%",this.divImg.append(this.img)}clear(){this.clearData(),this.clearImgElement()}clearData(){this.imageWrapper.dataSet.clearData()}clearImgElement(){if(this.img&&this.divImg)try{this.divImg.removeChild(this.img),this.imageWrapper.tools.exImageViewer.destroy()}catch(t){console.debug("fail to remove img and img div")}}constructor(t){this.widthOrigin=0,this.heightOrigin=0,this.imageWrapper=t}}class g{toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height,scale:this.scale,rotation:this.rotation,shape:this.shape,aspectRatio:this.aspectRatio,isCropGraphics:this.isCropGraphics}}toString(){return JSON.stringify(this.toJSON())}update(t,e,i,a,n,r,o,s){this.x=t,this.y=e,this.width=i,this.height=a,this.scale=n,this.rotation=r,this.shape=o,this.aspectRatio=s}constructor(){this.x=0,this.y=0,this.width=10,this.height=10,this.scale=1,this.rotation=0,this.isCropGraphics=!0,this.shape=o.oU.Rectangle,this.aspectRatio=o.Nl.Original}}class m{updateDrawingData(t){this.data=t}toJSON(){return{scale:this.scale,geometry:this.data}}updateDrawingCanvas(t){this.canvas=t}getDrawingCanvas(){return this.canvas}constructor(){this.scale=1}}class u{update(t){this.data.typePreset=t.typePreset,this.data.filters=t.filters,this.data.tints=t.tints}toJSON(){return{typePreset:this.data.typePreset,filters:this.data.filters,tints:this.data.tints,inter:1}}constructor(){this.data={typePreset:"normal",filters:[["blur",0],["sepia",0],["contrast",1],["brightness",1],["saturate",1],["hue-rotate",0]],tints:[],inter:1}}}var f=i(68045);class E{initData(){if(this.paramCropping=new g,this.paramEffecting=new u,this.paramDrawing=new m,this.imageWrapper.implementation.app.param.data&&this.imageWrapper.implementation.app.param.data.drawing){let{geometry:t}=this.imageWrapper.implementation.app.param.data.drawing,e=t.map(t=>t.id?t:{...t,id:(0,f.Fs)()});this.paramDrawing.updateDrawingData(e),this.paramDrawing.scale=this.imageWrapper.implementation.app.param.data.drawing.scale}if(this.imageWrapper.implementation.app.param.data&&this.imageWrapper.implementation.app.param.data.effecting){let t=this.imageWrapper.implementation.app.param.data.effecting;this.paramEffecting.update(t)}}resetData(){this.paramCropping.width=this.imageWrapper.view.widthOrigin,this.paramCropping.height=this.imageWrapper.view.heightOrigin}updateParamCrop(t,e,i,a,n,r,o,s){this.paramCropping.update(t,e,i,a,n,r,o,s)}updateEffecting(t){this.paramEffecting.update(t)}updateDrawingData(t){this.paramDrawing.updateDrawingData(t)}updateDrawingCanvas(t){this.paramDrawing.updateDrawingCanvas(t)}getDrawingCanvas(){return this.paramDrawing.getDrawingCanvas()}clearData(){this.initData()}updateData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dataSync(t,e),{ctx:this.ctx,ctxFiltered:this.ctxFiltered,editing:this.paramCropping.toJSON(),drawing:this.paramDrawing.toJSON(),effecting:this.paramEffecting.toJSON()}}dataSync(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.init&&(this.imageWrapper.implementation.app.modelController.io.emitAction("done-dataSyn@"),this.init=!1);let i=!1;e&&this.imageWrapper.tools.activeApp===o.y0.Drawing&&(i=this.imageWrapper.tools.drawingTool.app.api.needRevertBaseImage());let n=this.imageWrapper.tools.editingTool.app.getData(i);if(this.checkUpdateDrawingData(),t){this.ctx=n.ctx,this.ctxFiltered=n.ctxFiltered;let t=this.imageWrapper.implementation.app.param.environment===o.qA.AGSM?(0,h.VT)():(0,h.KF)(),e=(0,h.nP)();this.ctx=(0,s.eg)(this.ctx,this.paramDrawing.toJSON(),this.paramDrawing.scale,n.params.x,n.params.y,this.imageWrapper.implementation.app.param.environment,t.path2D,e.path2D),this.ctxFiltered=(0,s.eg)(this.ctxFiltered,this.paramDrawing.toJSON(),this.paramDrawing.scale,n.params.x,n.params.y,this.imageWrapper.implementation.app.param.environment,t.path2D,e.path2D),this.paramCropping.isCropGraphics&&(this.ctx=(0,a.EW)(this.ctx,n.params.shape,0,0,n.params.width,n.params.height,!1),this.ctxFiltered=(0,a.EW)(this.ctxFiltered,n.params.shape,0,0,n.params.width,n.params.height,!1))}this.paramCropping.update(n.params.x,n.params.y,n.params.width,n.params.height,n.params.scale,n.params.rotationRadian,n.params.shape,n.params.aspectRatio)}checkUpdateDrawingData(){if(this.imageWrapper.tools.activeApp===o.y0.Editing&&0===this.imageWrapper.tools.editingTool.app.api.getGeometryLength());else{let t=this.imageWrapper.tools.drawingTool.app.api.getDataGeometry();t&&(this.updateDrawingData(t),this.paramDrawing.scale=this.imageWrapper.tools.drawingTool.app.api.getScaleFactor())}}constructor(t){this.typeImageCompression=o.__.Png,this.init=!0,this.imageWrapper=t,this.typeImageCompression=this.imageWrapper.implementation.app.typeImageCompression,this.initData()}}class C{async append(){return i.e(65830).then(i.bind(i,65830)).then(t=>{let{AppImageDrawing:e,InteractionMode:i}=t;this.tools.divUpdatePre();let a={id:this.tools.imageWrapper.implementation.app.modelController.divHost.id,UI:this.tools.imageWrapper.implementation.app.param.ui,interactionMode:i.Drawing,config:{BASE_URL:""},environment:this.tools.imageWrapper.implementation.app.param.environment,themeUI:this.tools.imageWrapper.implementation.app.modelController.theme.themeData};this.revertToOriginal&&(this.tools.imageWrapper.dataSet.paramDrawing.updateDrawingData([]),this.revertToOriginal=!1);let n=this.tools.imageWrapper.dataSet.paramDrawing.toJSON();this.app=new e(a,n),this.app.updateEffecting(this.tools.imageWrapper.dataSet.paramEffecting.toJSON()),this.app.emitAction=t=>{this.from(t)},this.app.initImageByImg(this.tools.imageWrapper.implementation.imageWrapper.view.img,this.tools.imageWrapper.implementation.imageWrapper.dataSet.paramCropping.toString(),this.tools.imageWrapper.implementation.imageWrapper.view.imgOrigin,this.tools.imageWrapper.implementation.app.param.colorCover)}).catch(t=>{throw console.debug("Stop loading Image Editing App."),console.debug(t),t})}from(t){let e;let i=t.indexOf(this.tools.delimiter),a=i<0?[t]:[t.substring(0,i),t.substring(i+1,t.length)];switch(a[0]){case"set-drawing-mode":case"update-container-size":case"ready":case"select-shapes":case"history":this.tools.imageWrapper.implementation.app.modelController.io.emitAction(t);break;case"destroy":this.tools.appDestroy();return;case"update":this.tools.imageWrapper.dataSet.updateDrawingData(JSON.parse(a[1]));break;case"remove":case"add":case"transform":this.updateGeomData();break;case"update-cropping":e=JSON.parse(a[1]),this.updateCropping(e);break;case"update-effecting":e=JSON.parse(a[1]),this.tools.imageWrapper.dataSet.updateEffecting(e)}}updateCropping(t){this.tools.imageWrapper.dataSet.updateParamCrop(t.x,t.y,t.width,t.height,t.scale,t.rotation,t.shape,t.aspectRatio),this.tools.editingTool.app.api.updateFrameParam(t.x,t.y,t.width,t.height,t.scale,t.rotation,t.shape,t.aspectRatio),this.tools.imageWrapper.implementation.app.modelController.io.emitAction("ready@update-div-size")}updateGeomData(){let t=this.app.api.getAllGeometries(),e=this.app.api.getScaleFactor();this.tools.imageWrapper.dataSet.paramDrawing.updateDrawingData(t),this.tools.imageWrapper.dataSet.paramDrawing.scale=e,this.tools.imageWrapper.dataSet.updateDrawingCanvas(this.app.api.getCanvas())}constructor(t){this.revertToOriginal=!1,this.tools=t}}class y{async append(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.y0.Editing;return i.e(7375).then(i.bind(i,7375)).then(e=>{let{AppImageEditing:i}=e;this.tools.divUpdatePre();let a={id:this.tools.imageWrapper.implementation.app.modelController.divHost.id,UI:this.tools.imageWrapper.implementation.app.param.ui,theme:this.tools.imageWrapper.implementation.app.param.ui?this.tools.imageWrapper.implementation.app.modelController.theme.themeData:void 0,environment:this.tools.imageWrapper.implementation.app.param.environment};this.app=new i(a),this.tools.imageWrapper.implementation.app.param.colorCover&&(this.app.coverColor=this.tools.imageWrapper.implementation.app.param.colorCover),this.app.api.setTypeImageCompression=this.tools.imageWrapper.implementation.app.typeImageCompression,this.app.emitAction=t=>{this.from(t)},t===o.y0.Effecting&&this.app.api.activateEffectEnv("markup");let n=this.tools.imageWrapper.implementation.imageWrapper.dataSet.paramDrawing.toJSON();n.geometry&&(this.app.pushDrawingData(n.geometry),this.app.setScaleGlobal(n.scale)),this.app.initImageByImg(this.tools.imageWrapper.implementation.imageWrapper.view.imgOrigin),this.app.api.initEffect(this.tools.imageWrapper.implementation.imageWrapper.dataSet.paramEffecting.toJSON());let r=this.tools.imageWrapper.implementation.imageWrapper.getParamCrop();this.app.api.initFrame(r.x,r.y,r.width,r.height,r.scale,r.rotation,r.shape,r.aspectRatio)}).catch(t=>{throw console.debug("Stop loading Image Editing App."),console.debug(t),t})}from(t){let e;let i=t.indexOf(this.tools.delimiter),a=i<0?[t]:[t.substring(0,i),t.substring(i+1,t.length)];switch(a[0]){case"destroy":this.tools.appDestroy();break;case"update-container-size":case"ready":this.tools.imageWrapper.implementation.app.modelController.io.emitAction(t);break;case"post-update":this.tools.imageWrapper.implementation.app.modelController.io.emitAction("post-update@");break;case"filter":e=JSON.parse(a[1]),this.tools.imageWrapper.dataSet.paramEffecting.update(e),this.tools.imageWrapper.implementation.app.modelController.io.emitAction("filter@".concat(e.typePreset));break;case"history":this.tools.imageWrapper.implementation.app.modelController.io.emitAction(t),this.tools.imageWrapper.dataSet.paramDrawing.updateDrawingData(this.app.api.getDrawing());break;case"update":e=JSON.parse(a[1]),this.update(e);break;case"update-geometry":this.tools.imageWrapper.dataSet.updateDrawingData(JSON.parse(a[1]))}}update(t){this.tools.imageWrapper.dataSet.updateEffecting(t.filter);let e=t.crop;if(this.tools.imageWrapper.implementation.app.modelController.processorType===o.XN.Css)this.tools.imageWrapper.implementation.imageWrapper.updateImgCropByCSS(e.x,e.y,e.width,e.height,e.scale,e.rotation,e.shape,e.aspectRatio);else{let t=this.tools.editingTool.app.getImage();this.tools.imageWrapper.implementation.imageWrapper.updateImgCropByImg(t,e.x,e.y,e.width,e.height,e.scale,e.rotation,e.shape,e.aspectRatio)}this.tools.exImageViewer.updateCanvasSize(200,200),this.tools.imageWrapper.updateDrawing()}constructor(t){this.tools=t}}class v{async append(t,e,a){return i.e(36417).then(i.bind(i,36417)).then(i=>{let{ExpressImageViewer:n}=i;this.app=new n(t,e,a)}).catch(t=>{throw console.debug("Stop loading Image Effecting App."),console.debug(t),t})}from(t){let e=t.indexOf(this.tools.delimiter),i=e<0?[t]:[t.substring(0,e),t.substring(e+1,t.length)];console.log(e,i)}updateCanvasSize(t,e){this.app.updateCanvasSize(t,e)}updateDrawing(){if(!this.app)return}destroy(){this.app.destroy()}constructor(t){this.app=void 0,this.renderScale=1,this.tools=t}}class N{appDestroy(){this.divUpdatePost()}divUpdatePre(){this.imageWrapper.implementation.app.modelController.div.style.display="none"}divUpdatePost(){this.imageWrapper.implementation.app.environment===o.qA.Standalone&&(this.imageWrapper.implementation.app.modelController.div.style.display="block"),this.imageWrapper.resizeByWindow()}appendApp(t){switch(t.toLowerCase()){case o.y0.Effecting:this.editingTool.append(o.y0.Effecting),this.activeApp=o.y0.Editing;break;case o.y0.Editing:this.editingTool.append(),this.activeApp=o.y0.Editing;break;case o.y0.Drawing:this.drawingTool.append(),this.activeApp=o.y0.Drawing;break;case o.y0.Viewer:this.exImageViewer.append(this.imageWrapper.view.divImg,this.imageWrapper.view.imgOrigin.clientWidth,this.imageWrapper.view.imgOrigin.clientHeight)}}updateEnvironment(t){void 0!==this.editingTool.app&&this.editingTool.app.api.shiftEnvironment(t),void 0!==this.drawingTool.app&&this.drawingTool.app.api.shiftEnvironment(t)}constructor(t){this.delimiter="@",this.activeApp=o.y0.Editing,this.imageWrapper=t,this.drawingTool=new C(this),this.editingTool=new y(this),this.exImageViewer=new v(this)}}class w{async importImgByURL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.view.clear();let i=await (0,n.oK)(t);if(this.view.imgOrigin=i,this.view.img=i,this.implementation.app.modelController.processorType===o.XN.Css)this.view.initDivForCSS(this.view.imgOrigin);else{try{this.view.initDivForImgModified(this.view.imgOrigin)}catch(t){console.log("importImgByURL->initDivForImgModified",t);return}this.tools.appendApp(o.y0.Viewer)}if(this.dataSet.resetData(),e&&this.tools.editingTool.append(),this.implementation.app.param.data&&this.implementation.app.param.data.editing){let t=this.implementation.app.param.data.editing;this.dataSet.updateParamCrop(t.x,t.y,t.width,t.height,t.scale,t.rotation,t.shape,t.aspectRatio)}}getData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.tools.imageWrapper.dataSet.updateData(t,e)}getParamCrop(){return this.dataSet.paramCropping}updateImgCropByImg(t,e,i,a,n,r,o,s,p){this.dataSet.updateParamCrop(e,i,a,n,r,o,s,p),this.view.updateImage(t)}updateImgCropByCSS(t,e,i,a,n,r,o,s){this.dataSet.updateParamCrop(t,e,i,a,n,r,o,s),this.view.img.style.objectPosition="".concat(-this.dataSet.paramCropping.x,"px ").concat(-this.dataSet.paramCropping.y,"px ");let p="scale(".concat(n,") rotate(").concat(180*r/Math.PI,"deg)");this.view.img.style.transform=p,this.view.img.width=this.dataSet.paramCropping.width,this.view.img.height=this.dataSet.paramCropping.height}updateImgCrop(t,e,i,a,n,r,o,s){this.dataSet.updateParamCrop(t,e,i,a,n,r,o,s)}updateEnvironment(t){this.tools.updateEnvironment(t)}toJSON(){return JSON.stringify(this.dataSet.paramCropping)}resizeByWindow(){this.updateDrawing()}updateSizeDiv(t){this.view.updateSizeDiv(t),t<30?this.tools.exImageViewer.renderScale=.5:t>80?this.tools.exImageViewer.renderScale=1.2:this.tools.exImageViewer.renderScale=1,this.updateDrawing()}updateDrawing(){this.tools.exImageViewer.updateDrawing()}appendApp(t){this.tools.appendApp(t)}updateViewMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.An.Drawing;this.tools.exImageViewer.app.updateMode(t)}destroy(){this.tools.drawingTool.app.destroy(),this.tools.editingTool.app.destroy()}constructor(t){this.implementation=t,this.tools=new N(this),this.view=new d(this),this.dataSet=new E(this)}}class D{downloadImage(){let t=this.implementation.imageWrapper.tools.exImageViewer.app.getCanvas(),e=this.implementation.imageWrapper.tools.editingTool.app.getImage();if(t){let i=new Image;i=e,e=(0,a.z5)(i,t,i.width,i.height)}(0,a.GN)(e)}toggleInteractionMode(){this.implementation.imageWrapper.tools.exImageViewer.app&&(this.implementation.imageWrapper.tools.exImageViewer.app.renderer.mode===p.An.InteractiveViewer?this.implementation.imageWrapper.tools.exImageViewer.app.renderer.mode=p.An.ObserveViewer:this.implementation.imageWrapper.tools.exImageViewer.app.renderer.mode=p.An.InteractiveViewer)}constructor(t){this.implementation=t}}class A{constructor(t){this.app=t,this.commonProcess=new D(this),this.imageWrapper=new w(this)}}class R{pushAction(t){let e=t.indexOf("@"),i=e<0?[t]:[t.substring(0,e),t.substring(e+1,t.length)],a=i[1];switch(i[0]){case"style":break;case"activateApp":this.io.controller.app.api.onClickAppendApp(a);break;case"destroyApp":this.destroyApp(a);break;case p.Us.SetDrawingMode:let n=i[0]+"@";this.setDrawingMode(a,n)}}destroyApp(t){switch(t){case o.y0.Drawing:this.io.controller.app.api.destroyDrawing();break;case o.y0.Editing:this.io.controller.app.api.destroyEditing()}}setDrawingMode(t,e){switch(t){case l.uA.SELECT:this.io.controller.app.api.setDrawingMode(e+l.uA.SELECT);break;case l.uA.POINT_REGULAR:this.io.controller.app.api.setDrawingMode(e+l.uA.POINT_REGULAR);break;case l.uA.POINT_NUMBERED:this.io.controller.app.api.setDrawingMode(e+l.uA.POINT_NUMBERED);break;case l.uA.POLYLINE_BENDING:this.io.controller.app.api.setDrawingMode(e+l.uA.POLYLINE_BENDING);break;case l.uA.FREEHAND_POLYLINE_BENDING:this.io.controller.app.api.setDrawingMode(e+l.uA.FREEHAND_POLYLINE_BENDING);break;case l.uA.POLYGON:this.io.controller.app.api.setDrawingMode(e+l.uA.POLYGON);break;case l.uA.FREEHAND_POLYGON:this.io.controller.app.api.setDrawingMode(e+l.uA.FREEHAND_POLYGON);break;case l.uA.RECTANGLE:this.io.controller.app.api.setDrawingMode(e+l.uA.RECTANGLE);break;case l.uA.CIRCLE:this.io.controller.app.api.setDrawingMode(e+l.uA.CIRCLE);break;case l.uA.ARROW_SINGLE:this.io.controller.app.api.setDrawingMode(e+l.uA.ARROW_SINGLE);break;case l.uA.ARROW_DOUBLE:this.io.controller.app.api.setDrawingMode(e+l.uA.ARROW_DOUBLE);break;case l.uA.TEXT_LEADERLINE:this.io.controller.app.api.setDrawingMode(e+l.uA.TEXT_LEADERLINE)}}constructor(t){this.io=t}}class O{emitAction(t){this.init&&"post-update"===t.split("@")[0]&&(this.init=!1,this.controller.app.postUpdate(),this.controller.app.param.appDefault===o.y0.Editing?this.controller.app.emitAction("update-container-size@original"):this.controller.app.emitAction("update-container-size@")),this.controller.app.emitAction(t)}pushAction(t,e,i){this.switchEnvironment(t,i),"markup"===t&&"set-drawing-mode"===e&&this.stateProcessing.pushAction(p.Us.SetDrawingMode+"@"+i),"markup"===t&&e&&this.pushActionMarkup(e,i),("crop"===t||"filter"===t)&&e&&this.pushActionCropFilter(e,i)}switchEnvironment(t,e){("crop"===t&&"markup"===e||"filter"===t&&"markup"===e)&&(0===this.controller.app.implementation.imageWrapper.tools.editingTool.app.api.getGeometryLength()&&(this.controller.app.implementation.imageWrapper.tools.drawingTool.revertToOriginal=!0),this.stateProcessing.pushAction("destroyApp@"+o.y0.Editing),this.stateProcessing.pushAction("activateApp@"+o.y0.Drawing)),"markup"===t&&"crop"===e?(this.stateProcessing.pushAction("destroyApp@"+o.y0.Drawing),this.stateProcessing.pushAction("activateApp@"+o.y0.Editing)):"filter"===t&&"crop"===e&&this.stateProcessing.io.controller.app.api.deactivateEffectEnv(),"filter"===e&&("crop"===t?this.stateProcessing.io.controller.app.api.activateEffectEnv():"markup"===t&&(this.stateProcessing.pushAction("destroyApp@"+o.y0.Drawing),this.stateProcessing.pushAction("activateApp@"+o.y0.Effecting)))}pushActionCropFilter(t,e){switch(t){case"undo":this.controller.app.api.undo(o.y0.Editing);break;case"redo":this.controller.app.api.redo(o.y0.Editing);break;case"shape":this.controller.app.api.shiftShape(e);break;case"aspect-ratio":this.controller.app.api.shiftShapeRatio(e);break;case"revert-to-original":this.controller.app.api.revertToOriginal(o.y0.Editing);break;case"set-filter-preset":this.controller.app.api.shiftFilterPreset(e)}}pushActionMarkup(t,e){switch(t){case"init-scale":this.controller.app.api.setScaleGraphics(+e,!0,!1);break;case"set-scale":this.controller.app.api.setScaleGraphics(+e);break;case"offset-scale":this.controller.app.api.setScaleGraphics(+e,!1);break;case"undo":this.controller.app.api.undo(o.y0.Drawing);break;case"redo":this.controller.app.api.redo(o.y0.Drawing);break;case"init-color":this.controller.app.api.setColor(o.y0.Drawing,e,!1);break;case"set-color":this.controller.app.api.setColor(o.y0.Drawing,e);break;case"revert-to-original":this.controller.app.api.revertToOriginal(o.y0.Drawing)}}constructor(t){this.init=!0,this.controller=t,this.stateProcessing=new R(this)}}class I{constructor(t){this.themeData={background:"radial-gradient(rgb(235, 235, 235), rgba(200, 200, 200, 1))",top:{iconFill:"rgb(255, 255, 255)",background:"rgb(34, 34, 34)",marginBottom:"100px",padding:"25px",height:"90px"},bottom:{background:"radial-gradient(rgb(235, 235, 235), rgba(200, 200, 200, 1))"}},this.modelController=t}}class b{init(){let t=document.createElement("div");t.id="expree-image-ui",this.modelController.div.append(t);let e=document.createElement("input");e.style.color="#ffffff",e.style.background="rgba(255, 255, 255,0.1)",e.style.border="0px",e.style.margin="2px",e.setAttribute("type","text"),e.setAttribute("value","https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png"),t.append(e),e.addEventListener("keyup",t=>{13===t.keyCode&&(this.modelController.app.environment===o.qA.Standalone&&t.preventDefault(),this.modelController.app.api.onClickImportImgByURL(e.value))});let i="#ffffff",a=document.createElement("div");a.textContent="XGraphics Express Image App",a.style.fontSize="14px",a.style.fontWeight="400",a.style.color="#000000",a.style.padding="10px",t.append(a);let n=document.createElement("div");n.textContent="Editing",n.style.fontSize="12px",n.style.fontWeight="400",n.style.color=i,n.style.width="220px",n.style.padding="5px",n.style.marginBottom="10px",n.onclick=()=>{this.modelController.app.api.onClickAppendApp("editing")},n.onmouseenter=()=>{n.style.background="#333333"},n.onmouseleave=()=>{n.style.background="rgba(0, 0, 0, 0)"},t.append(n);let s=document.createElement("div");s.textContent="Effecting",s.style.fontSize="12px",s.style.fontWeight="400",s.style.color=i,s.style.width="220px",s.style.padding="5px",s.style.marginBottom="10px",s.onclick=()=>{this.modelController.app.api.onClickAppendApp("effecting")},s.onmouseenter=()=>{s.style.background="#333333"},s.onmouseleave=()=>{s.style.background="rgba(0, 0, 0, 0)"},t.append(s);let p=document.createElement("div");p.textContent="Drawing",p.style.fontSize="12px",p.style.fontWeight="400",p.style.color=i,p.style.width="220px",p.style.padding="5px",p.style.marginBottom="10px",p.onclick=()=>{this.modelController.app.api.onClickAppendApp("drawing")},p.onmouseenter=()=>{p.style.background="#333333"},p.onmouseleave=()=>{p.style.background="rgba(0, 0, 0, 0)"},t.append(p);let l=document.createElement("input");l.type="range",l.min="0.1",l.max="1.0",l.step="0.01",l.value="0.5",l.oninput=()=>{this.modelController.app.api.resizeDiv(+l.value)},t.append(l);let h=this.modelController.theme.themeData.top.iconFill,c=(0,r.s)(()=>{this.modelController.app.api.onToggleInteractionMode()},'\n            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="'.concat(h,'" viewBox="0 0 12 32">\n            <path fill-rule="evenodd" d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5z"/>\n            </svg>\n            '));c.style.display="block",c.style.marginTop="15px",c.style.transform="scale(2)";let d=c.firstElementChild;d.onmouseenter=()=>{d.style.fill="#333333"},d.onmouseleave=()=>{d.style.fill="rgba(255, 255, 255, 1)"},t.append(c);let g=(0,r.s)(()=>{this.modelController.app.api.onClickDownload()},'\n            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="'.concat(h,'" viewBox="0 0 12 32">\n            <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 6.854-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5a.5.5 0 0 1 1 0v3.793l1.146-1.147a.5.5 0 0 1 .708.708z"/>\n            </svg>\n            '));g.style.display="block",g.style.marginTop="15px",g.style.transform="scale(2)";let m=g.firstElementChild;m.onmouseenter=()=>{m.style.fill="#333333"},m.onmouseleave=()=>{m.style.fill="rgba(255, 255, 255, 1)"},t.append(g)}constructor(t){this.modelController=t,this.init()}}class T{init(){this.io=new O(this),this.app.param.ui&&(this.ui=new b(this))}destroy(){}constructor(t){this.processorType=o.XN.Img,this.app=t,this.theme=new I(this);let e=document.getElementById(this.app.param.id),i=document.createElement("div");e&&i&&(this.divHost=e,this.div=i,this.div.id="express-image-wrapper",this.app.environment===o.qA.Standalone&&(this.div.style.position="relative",this.div.style.width="100vw",this.div.style.height="100vh"),this.divHost.append(this.div)),this.init()}}class S{initApp(){this.api=new c(this),this.param.environment&&(this.environment=this.param.environment),this.modelController=new T(this),this.implementation=new A(this),this.param.url&&this.importImgByURL(this.param.url),document.body.addEventListener("keydown",t=>{t.shiftKey&&"KeyD"===t.key||(t.shiftKey&&"{"===t.key?this.api.undo(""):t.shiftKey&&"}"===t.key?this.api.redo(""):t.shiftKey&&"+"===t.key?this.api.rotateCropping(-10):t.shiftKey&&"_"===t.key?this.api.rotateCropping(10):t.shiftKey&&")"===t.key?this.api.zoomCropping(-.13):t.shiftKey&&"("===t.key?this.api.zoomCropping(.13):t.shiftKey&&"!"===t.key?this.api.scaleDownGraphics():t.shiftKey&&"@"===t.key&&this.api.scaleUpGraphics()),"s"===t.key&&(this.environment=this.environment===o.qA.AGSM?o.qA.SMX:o.qA.AGSM)})}get environment(){return this._environment}set environment(t){this._environment=t,this.param.environment=t,this.implementation.imageWrapper.updateEnvironment(t)}postUpdate(){console.log("post update...",this.param.appDefault),this.param.appDefault===o.y0.Effecting?this.pushAction("crop","tab-change","filter"):this.param.appDefault===o.y0.Drawing?this.pushAction("crop","tab-change","markup"):(this.param.appDefault,o.y0.Editing)}pushAction(t,e,i){this.modelController.io.pushAction(t,e,i)}bindActionEmitting(t){this.emitAction=t}getData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.api.getData(t,e)}destroy(){this.api.destroy()}async importImgByURL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return await this.api.onClickImportImgByURL(t,e)}constructor(t){this.debugMode=!0,this._environment=o.qA.SMX,console.log("init....."),console.log(t),(0,h.jY)(),this.param=t,this.typeImageCompression=t.typeImageCompression||o.__.Jpeg,t.emitAction&&this.bindActionEmitting(t.emitAction),this.initApp()}}var L=i(8483);class P{appendButton(){let t=document.createElement("div");t.textContent="RPoint",t.style.fontSize="12px",t.style.fontWeight="400",t.style.color="#fff",t.style.width="220px",t.style.padding="5px",t.style.marginBottom="10px",t.onclick=()=>{this.imageAnnoApp.app.pushAction("markup","set-drawing-mode",L.AG.POINT_REGULAR)},this.divTop.appendChild(t),(t=document.createElement("div")).textContent="Rect",t.style.fontSize="12px",t.style.fontWeight="400",t.style.color="#fff",t.style.width="220px",t.style.padding="5px",t.style.marginBottom="10px",t.onclick=()=>{this.imageAnnoApp.app.pushAction("markup","set-drawing-mode",L.AG.RECTANGLE)},this.divTop.appendChild(t)}constructor(t,e){this.imageAnnoApp=t,this.hostDiv=e,this.main=document.createElement("div"),this.main.id="imageMain",this.main.style.zIndex="10",this.main.style.backgroundColor="#777",this.main.style.width="100%",this.main.style.height="100%",this.main.style.position="absolute",this.hostDiv.appendChild(this.main),this.divContainer=document.createElement("div"),this.divContainer.id="ng",this.main.appendChild(this.divContainer),this.divTop=document.createElement("div"),this.divTop.id="ui",this.divTop.style.zIndex="10",this.divTop.style.backgroundColor="#000",this.divTop.style.width="100%",this.divTop.style.height="100px",this.divTop.style.position="absolute",this.main.appendChild(this.divTop),this.appendButton()}}class x{static init(t){new x(t)}init(t){this.app=new S({id:t,ui:!1,appDefault:o.y0.Editing,data:{},emitAction:this.emit}),this.app.importImgByURL("https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram.jpg",!0)}constructor(t){this.emit=t=>{},this.host=document.getElementById(t),this.host.style.backgroundColor="#999",this.imageUI=new P(this,this.host),this.init(this.imageUI.divContainer.id)}}class _{destroy(){if(this.divHost)try{for(;this.divHost.firstChild;)this.divHost.removeChild(this.divHost.firstChild)}catch(t){console.error("Error in destroy method:",t)}else console.warn("divHost is undefined in destroy method")}constructor(t){this.divHost=document.getElementById(t),x.init(t)}}},91588:function(t,e,i){i.d(e,{i:function(){return a}});class a{reset(){this.history=[],this.currentIndex=-1}push(t){this.currentIndex<this.history.length-1&&this.history.splice(this.currentIndex+1,this.history.length),this.history.push(t),this.currentIndex=this.history.length-1}undo(){if(0!==this.currentIndex)return this.currentIndex--,this.history[this.currentIndex]}redo(){return this.currentIndex++,this.currentIndex=this.currentIndex<this.history.length?this.currentIndex:this.history.length-1,this.history[this.currentIndex]}getIndexCurrent(){return this.currentIndex}getLengthHistory(){return this.history.length}getCurrentState(){return{currentIndex:this.getIndexCurrent(),historyNum:this.getLengthHistory()}}constructor(){this.history=[],this.currentIndex=-1}}},40597:function(t,e,i){i.d(e,{AJ:function(){return d},Hq:function(){return c},Sm:function(){return n},Wo:function(){return o},XL:function(){return l},Z3:function(){return s},iC:function(){return r},kt:function(){return a},oK:function(){return g},rW:function(){return p},wX:function(){return h}});let a=()=>"rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),")"),n=(t,e,i,a,n,r)=>Math.sqrt((t-a)*(t-a)+(e-n)*(e-n)+(i-r)*(i-r)),r=(t,e,i)=>"#"+[Math.round(t),Math.round(e),Math.round(i)].map(t=>{let e=t.toString(16);return 1===e.length?"0"+e:e}).join(""),o=function(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i=i||"1.0";let n=parseInt((t=t.replace("#","")).substring(0,2),16),r=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);if(a){let t=.58*n+.17*r+.8*o;e="rgba("+t+","+t+","+t+","+i+")"}else e="rgba("+n+","+r+","+o+","+i+")";return e},s=(t,e)=>{let i=t.split(",");return i[0]+","+i[1]+","+i[2]+","+e+")"},p=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=parseInt((t=t.replace("#","")).substring(0,2),16),n=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16);if(!i)return[a,n,r,e];{let t=.58*a+.17*n+.8*r;return[t,t,t,e]}},l=(t,e,i)=>{let a=Math.max(t/=255,e/=255,i/=255),n=Math.min(t,e,i),r=(a+n)/2,o=(a+n)/2,s=(a+n)/2;if(a===n)r=o=0;else{let p=a-n;switch(o=s>.5?p/(2-a-n):p/(a+n),a){case t:r=(e-i)/p+(e<i?6:0);break;case e:r=(i-t)/p+2;break;case i:r=(t-e)/p+4}r/=6}return[r,o,s]},h=(t,e,i)=>{let a,n,r;if(0===e)a=n=r=i;else{let o=(t,e,i)=>(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?t+(e-t)*6*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t,s=i<.5?i*(1+e):i+e-i*e,p=2*i-s;a=o(p,s,t+1/3),n=o(p,s,t),r=o(p,s,t-1/3)}return[Math.max(0,Math.min(Math.round(255*a),255)),Math.max(0,Math.min(Math.round(255*n),255)),Math.max(0,Math.min(Math.round(255*r),255))]},c=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,a=[];for(let n=0;n<t.length;++n){let r=t[n]+(e[n]-t[n])*i;a.push(r)}return a},d=(t,e,i,a)=>{let n=l(t[0],t[1],t[2]);n[0]+=e,n[1]+=i,n[1]<0&&(n[1]=0),n[2]+=a;let r=h(n[0],n[1],n[2]);return[r[0],r[1],r[2],t[3]]},g=async t=>new Promise((e,i)=>{let a=new Image;a.crossOrigin="anonymous",a.addEventListener("load",()=>e(a)),a.addEventListener("error",t=>i(t)),a.src=t})},83656:function(t,e,i){i.d(e,{U:function(){return a}});let a={normal:{filters:[["blur",0],["sepia",0],["contrast",1],["brightness",1],["saturate",1],["hue-rotate",0]],tints:[]},film1:{filters:[["contrast",.8],["saturate",1.3],["hue-rotate",-10]],tints:[{bg0:[204,163,76,.15],mode:"soft-light"},{bg0:[68,126,90,.2],mode:"color-dodge"}]},film2:{filters:[["contrast",1.05],["brightness",1],["saturate",1.2],["hue-rotate",-12]],tints:[{bg0:[228,133,111,.25],mode:"screen"},{bg0:[0,95,102,.25],mode:"color-dodge"}]},film3:{filters:[["sepia",.1],["contrast",.95],["brightness",1.15],["saturate",1.1],["hue-rotate",-5]],tints:[{bg0:[1,68,93,.35],mode:"lighten"},{bg0:[161,159,80,.2],mode:"darken"}]},film4:{filters:[["sepia",.1],["brightness",1.1],["saturate",1.25],["hue-rotate",-2]],tints:[{bg0:[0,60,170,.3],mode:"screen"},{bg0:[104,125,200,.25],mode:"overlay"}]},highSaturation:{filters:[["sepia",.1],["contrast",.9],["brightness",1.15],["saturate",1.5]],tints:[{in:.7,out:1,bg0:[0,0,0,0],bg1:[0,0,0,.15],mode:"multiply"}]},bw1:{filters:[["contrast",1.1],["brightness",1.05],["saturate",0]],tints:[{bg0:[40,154,191,.12],mode:"color"}]},bw2:{filters:[["contrast",1.1],["brightness",1.05],["saturate",0]],tints:[{bg0:[55,88,180,.15],mode:"color"}]},sepia:{filters:[["contrast",1.1],["brightness",1.05],["saturate",0]],tints:[{bg0:[255,191,66,.5],mode:"soft-light"},{bg0:[196,100,236,.1],mode:"hard-light"}]}}},13367:function(t,e,i){i.d(e,{Ry:function(){return d},Wf:function(){return l},g9:function(){return c},lJ:function(){return o}});var a=i(83656),n=i(68045),r=i(3584);let o=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return void 0===i||(t.filter=s(i,a),t.drawImage(e,0,0),t.filter="none"),t},s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i="";for(let a=0;a<t.length;++a)i+=p(t[a][0],t[a][1],e);return i},p=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;switch(t){case r.x$.blur:return"blur(".concat((0,n.m1)(0,e,i),"px)");case r.x$.sepia:return"sepia(".concat((0,n.m1)(0,e,i),")");case r.x$.contrast:return"contrast(".concat((0,n.m1)(1,e,i),")");case r.x$.brightness:return"brightness(".concat((0,n.m1)(1,e,i),")");case r.x$.saturate:return"saturate(".concat((0,n.m1)(1,e,i),")");case r.x$.hueRotate:return"hue-rotate(".concat((0,n.m1)(0,e,i),"deg)");default:return""}},l=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(void 0!==e)for(let o=0;o<e.length;++o){let s=e[o];s&&(s.bg1?h(t,s.mode,!0,s.bg0,r,s.bg1,s.in,s.out,i,a,n):h(t,s.mode,!1,s.bg0,r))}},h=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:.5,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:.5,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;t.globalCompositeOperation=e,t.setTransform(t.canvas.width,0,0,t.canvas.height,0,0);let d=.65*c;if(i){let e=t.createRadialGradient(l,h,s*d,l,h,p*d);e.addColorStop(0,"rgba(".concat(a[0],",").concat(a[1],",").concat(a[2],",").concat((0,n.m1)(0,a[3],r),")")),e.addColorStop(1,"rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",").concat((0,n.m1)(0,o[3],r),")")),t.fillStyle=e}else t.fillStyle="rgba(".concat(a[0],",").concat(a[1],",").concat(a[2],",").concat((0,n.m1)(0,a[3],r),")");return t.fillRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation="source-over",t},c=t=>{let e=[];for(let t in a.U)e.push(t);let i=1/e.length;return e[Math.floor(t/i)]},d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",e={filters:[["blur",0],["sepia",0],["contrast",1],["brightness",1],["saturate",1],["hue-rotate",0]]};if("normal"===t)return e;let i=a.U[t];if(void 0!==i&&void 0!==i.filters)for(let t=0;t<i.filters.length;++t){let a=i.filters[t][0];for(let n=0;n<e.filters.length;++n)if(e.filters[n][0]===a){e.filters[n][1]=i.filters[t][1];break}}return e.tints=i.tints,e}},59965:function(t,e,i){var a,n,r,o;i.d(e,{$:function(){return a},e:function(){return n}}),(r=a||(a={})).Black="#000000",r.White="#ffffff",r.Aqua="#00ffff",r.Azure="#f0ffff",r.Beige="#f5f5dc",r.Blue="#0000ff",r.Brown="#a52a2a",r.Cyan="#00ffff",r.DarkBlue="#00008b",r.DarkCyan="#008b8b",r.DarkGrey="#a9a9a9",r.DarkGreen="#006400",r.DarKhaki="#bdb76b",r.DarkMagenta="#8b008b",r.DarkOliveGreen="#556b2f",r.DarkOrange="#ff8c00",r.DarkOrchid="#9932cc",r.DarkRed="#8b0000",r.DarkSalmon="#e9967a",r.DarkViolet="#9400d3",r.Fuchsia="#ff00ff",r.Gold="#ffd700",r.Green="#008000",r.Indigo="#4b0082",r.Khaki="#f0e68c",r.LightBlue="#add8e6",r.LightCyan="#e0ffff",r.LightGreen="#90ee90",r.LightGrey="#d3d3d3",r.LightPink="#ffb6c1",r.LightYellow="#ffffe0",r.Lime="#00ff00",r.Magenta="#ff00ff",r.Maroon="#800000",r.Navy="#000080",r.Olive="#808000",r.Orange="#ffa500",r.Pink="#ffc0cb",r.Purple="#800080",r.Red="#ff0000",r.Silver="#c0c0c0",r.Yellow="#ffff00",(o=n||(n={})).SourceOver="source-over",o.SourceIn="source-in",o.SourceOut="source-out",o.SourceAtop="source-atop",o.Copy="copy",o.DestinationOver="destination-over",o.DestinationIn="destination-in",o.DestinationOut="destination-out",o.DestinationAtop="destination-atop",o.Lighter="lighter",o.Multiply="multiply",o.Screen="screen",o.Overlay="overlay",o.Darken="darken",o.Lighten="lighten",o.ColorDodge="color-dodge",o.ColorBurn="color-burn",o.HardLight="hard-light",o.SoftLight="soft-light",o.Difference="difference",o.Exclusion="exclusion",o.Hue="hue",o.Saturation="saturation",o.Color="color",o.Luminosity="luminosity"},12494:function(t,e,i){var a,n,r,o,s,p,l,h,c,d,g,m,u,f,E,C,y,v,N,w,D,A,R,O,I,b,T,S,L,P,x,_,W,G,k,M,U,z,F,B,V,H;i.d(e,{An:function(){return u},Aq:function(){return f},BQ:function(){return a},CF:function(){return r},Nq:function(){return v},Nv:function(){return c},PH:function(){return D},Us:function(){return o},cg:function(){return s},ct:function(){return m},g:function(){return h},g4:function(){return l},hO:function(){return p},iu:function(){return N},oW:function(){return g},rO:function(){return E},uD:function(){return C},wn:function(){return y},xX:function(){return d}}),(A=a||(a={})).GuidedTour="guidedTour",A.AnnotationMap="annotationMap",A.ExpressMapping="expressMapping",A.ExpressCharting="expressCharting",A.ExpressDrawing="expressDrawing",A.AnnotationGlobe="annotationGlobe",A.AnnotationTerrain="annotationTerrain",A.VisualizationBin="visualizationBin",A.Visualization="visualization",A.VisualizationMapping="visualizationMapping",A.VisualizationCharting="visualizationCharting",A.ImageEditor="imageEditor",A.Viewer3D="viewer3D",A.AnnotationScene="annotationScene",A.WallPaper2D="wallPaper2D",A.Annotation3D="annotation3D",A.WallPaper3D="wallPaper3D",A.DrawingTool2D="drawingTool2D",A.DrawingTool3D="drawingTool3D",(R=n||(n={})).Mercator="mercator",R.SphericalProjection="sphericalProjection",R.Orthographic="orthographic",R.ConicEqualArea="conicEqualArea",R.ConicEqualDistance="conicEqualDistance",R.EqualEarth="equalEarth",R.EquiRectangular="equiRectangular",R.Gnomonic="gnomonic",R.ConicConformal="conicConformal",R.StereoGraphics="stereoGraphics",R.AlbersUSA="albersUSA",(O=r||(r={})).Default="default",O.Auto="auto",O.Crosshair="crosshair",O.Move="move",O.Pointer="pointer",O.Text="text",O.Wait="wait",O.Help="help",O.Progress="progress",O.NWSEresize="nwse-resize",O.NESWresize="nesw-resize",O.NSresize="ns-resize",O.EWresize="ew-resize",(I=o||(o={})).Select="select",I.Undo="undo",I.Redo="redo",I.Deselect="deselect",I.PointerOut="pointerOut",I.SetDrawingMode="setDrawingMode",I.ToggleMapfilter="toggleMapfilter",I.ToggleQuickActions="toggleQuickActions",I.ChangeTheme="changeTheme",I.ToggleDrawingTooltips="toggleDrawingTooltips",I.ToggleGrid="toggleGrid",I.ToggleMeasure="toggleMeasure",I.ShiftUnit="shiftUnit",I.DumpIconsBase64s="dumpIconsBase64s",I.AddIconBase64="addIconBase64",I.SelectIconBase64="selectIconBase64",I.ActiveColorId="activeColorId",I.InclusiveSelect="inclusiveSelect",I.InclusiveDeselect="inclusiveDeselect",I.ExclusiveSelect="exclusiveSelect",I.ExclusiveDeselect="exclusiveDeselect",I.ReorderNumberedPoints="reorderNumberedPoints",I.ReorderNumberedTourPoints="reorderNumberedTourPoints",I.Remove="remove",I.RemoveSelected="removeSelected",I.Update="update",I.Unhighlight="unhighlight",I.Hover="hover",I.Unhover="unhover",I.Enter="enter",I.Leave="leave",I.Show="show",I.Hide="hide",I.HidePopup="hidePopup",I.ShowPopup="showPopup",I.Dump="dump",I.InitGhost="initGhost",I.EnterGhost="enterGhost",I.LeaveGhost="leaveGhost",I.ShowGhostPopup="showGhostPopup",I.HideGhostPopup="hideGhostPopup",I.AddGhost="addGhost",I.Add="add",I.Transform="transform",I.RemoveGhost="removeGhost",I.ShowText="showText",I.HideText="hideText",I.StartEditingText="startEditingText",I.EndEditingText="endEditingText",I.PolylineConstraintLength="polylineConstraintLength",I.PolylineConstraintLengthPercentage="polylineConstraintLengthPercentage",I.DisableExcept="disableExcept",I.Highlight="highlight",I.Style="style",I.ClusteringPoint="clusteringPoint",I.TEMPLoadImage="loadImage",(b=s||(s={})).Round="round",b.Butt="butt",b.Square="square",(T=p||(p={})).None="none",T.DeepLearning="deepLearning",(S=l||(l={})).Svg="svg",S.Canvas="canvas",S.Three="three",S.webgl="webgl",S.Webgl2="webgl2",S.WebGPU="webGPU",(L=h||(h={})).Regular="regular",L.DouglasPeucker="douglasPeucker",(P=c||(c={})).None="none",P.Zoom="zoom",P.Collision="collision",P.Agent="agent",(x=d||(d={})).None="none",x.Zoom="zoom",x.Collision="collision",x.Agent="agent",x.Grid="grid",(_=g||(g={})).RpointA="rPointA",_.RpointB="rPointB",_.Image="image",(W=m||(m={})).Production="production",W.Development="development",W.Local="local",(G=u||(u={})).Drawing="drawing",G.InteractiveViewer="interactiveViewer",G.ObserveViewer="observeViewer",(k=f||(f={})).Opera="opera",k.Chrome="chrome",k.Safari="safari",k.Firefox="firefox",k.Ie="ie",k.Edge="edge",k.Unknown="unknown",(M=E||(E={})).Up="up",M.Down="down",(U=C||(C={})).Left="left",U.Middle="middle",U.Right="right",U.Wheel="wheel",U.Drag="drag",U.DragLeft="dragLeft",U.DragMiddle="dragMiddle",U.DragRight="dragRight",U.Move="move",U.Double="double",U.Up="up",U.Down="down",U.DownMiddle="downMiddle",U.DownRight="downRight",(z=y||(y={})).Start="start",z.End="end",z.Move="move",z.Cancel="cancel",(F=v||(v={})).Native="native",F.JSAPI4X="JSAPI4X",(B=N||(N={})).Curve="curve",B.CurveClosed="curveClosed",B.Line="line",B.Polyline="polyline",B.PolylineBending="polylineBending",B.Polygon="polygon",B.PolygonGraph="polygonGraph",B.PolylineGon="polylineGon",B.Smooth="smooth",B.SmartDrawing="smartDrawing",(V=w||(w={})).Wrap="Wrap",V.LineBreak="lineBreak",V.Normal="normal",(H=D||(D={})).Start="start",H.End="end",H.Left="left",H.Center="center",H.Right="right"},3584:function(t,e,i){var a,n,r,o,s,p,l,h,c,d,g,m,u,f;i.d(e,{Nl:function(){return l},XN:function(){return s},__:function(){return o},oU:function(){return p},qA:function(){return a},x$:function(){return n},y0:function(){return r}}),(h=a||(a={})).AGSM="agsm",h.SMX="smx",h.Standalone="standalone",(c=n||(n={})).blur="blur",c.sepia="sepia",c.contrast="contrast",c.brightness="brightness",c.saturate="saturate",c.hueRotate="hue-rotate",c.none="none",(d=r||(r={})).Editing="editing",d.Effecting="effecting",d.Drawing="drawing",d.Viewer="viewer",(g=o||(o={})).Jpeg="jpeg",g.Png="png",(m=s||(s={})).Css="css",m.Img="img",(u=p||(p={})).Circle="circle",u.Rectangle="rectangle",u.RectangleRounded="rectangleRounded",u.Star="star",u.Diamond="diamond",(f=l||(l={})).Freeform="freeform",f.Original="original",f.Square="square",f.Portrait="portrait",f.Landscape="landscape",f.Fixed_3_2="3 x 2",f.Fixed_4_3="4 x 3",f.Fixed_16_9="16 x 9"},44147:function(t,e,i){var a,n,r,o,s,p,l,h;i.d(e,{$u:function(){return r},uA:function(){return a},zq:function(){return n}}),(s=a||(a={})).NONE="NONE",s.SELECT="SELECT",s.REMOVE="REMOVE",s.SELECT_RECT="SELECT_RECT",s.SELECT_LASSO="SELECT_LASSO",s.MOVE_EASING="MOVE_EASING",s.UNDO="UNDO",s.REDO="REDO",s.POINT_REGULAR="POINT_REGULAR",s.POINT_NUMBERED="POINT_NUMBERED",s.POLYLINE="POLYLINE",s.FREEHAND_POLYLINE_BENDING="FREEHAND_POLYLINE_BENDING",s.POLYLINE_CONSTRAINT="POLYLINE_CONSTRAINT",s.POLYGON="POLYGON",s.POLYGON_GRAPH="POLYGON_GRAPH",s.POLYGON_MULTIPLE="POLYGON_MULTIPLE",s.POLYGON_CONSTRAINT="POLYGON_CONSTRAINT",s.POLYLINE_BENDING="POLYLINE_BENDING",s.LINE_GRAPH="LINE_GRAPH",s.CIRCLE="CIRCLE",s.CIRCLE_CONSTRAINT_AREA="CIRCLE_CONSTRAINT_AREA",s.CIRCLE_CONSTRAINT_CIRCUMFERENCE="CIRCLE_CONSTRAINT_CIRCUMFERENCE",s.RECTANGLE="RECTANGLE",s.POINT_ICON="POINT_ICON",s.TEXT="TEXT",s.TEXT_LEADERLINE="TEXT_LEADERLINE",s.STAR="STAR",s.ARROW_SINGLE="ARROW_SINGLE",s.ARROW_DOUBLE="ARROW_DOUBLE",s.CURVE="CURVE",s.CURVE_OPEN="CURVE_OPEN",s.CURVE_CLOSE="CURVE_CLOSE",s.FREEHAND_POLYLINE="FREEHAND_POLYLINE",s.FREEHAND_POLYGON="FREEHAND_POLYGON",s.FREEHAND_POLYGON_GRAPH="FREEHAND_POLYGON_GRAPH",s.FREEHAND_CURVE="FREEHAND_CURVE",s.FREEHAND_CURVE_CLOSED="FREEHAND_CURVE_CLOSED",s.SMARTDRAWING="SMARTDRAWING",s.SMARTDRAWING_DEEPLEARNING="SMARTDRAWING_DEEPLEARNING",s.LINE="LINE",s.APOINT="APOINT",s.CPOINT_REGULAR="CPOINT_REGULAR",s.CPOINT_NUMBERED="CPOINT_NUMBERED",s.CLINE="CLINE",s.CPOLYLINE="CPOLYLINE",s.CPOLYGON="CPOLYGON",s.CLINE_TOOGLE="CLINE_TOOGLE",s.CARC="CARC",s.CCIRCLE="CCIRCLE",s.CRECTANGLE="CRECTANGLE",s.CNGON="CNGON",s.CSTAR="CSTAR",s.CCURVE="CCURVE",s.CCURVE_CLOSE="CCURVE_CLOSE",s.CFREEHAND_POLYLINE="CFREEHAND_POLYLINE",s.CFREEHAND_CURVE="CFREEHAND_CURVE",s.CFREEHAND_LINE="CFREEHAND_LINE",s.CFREEHAND_SMARTDRAWING="CFREEHAND_SMARTDRAWING",s.CFREEHAND_SMOOTH="CFREEHAND_SMOOTH",s.CRECTANGLE_CROP="CRECTANGLE_CROP",s.CPOINT="CPOINT",s.CNODE="CNODE",s.CEDGE="CEDGE",s.SVG_TOUR_POINT="SVG_TOUR_POINT",s.SVG_TOUR_LINE="SVG_TOUR_LINE",s.LINE_SPIKE="LINE_SPIKE",s.CIRCLE_TRAJECTORY="CIRCLE_TRAJECTORY",s.ARC_SPIKE="ARC_SPIKE",s.POINT_REGULAR_TOUR="POINT_REGULAR_TOUR",s.POINT_NUMBERED_TOUR="POINT_NUMBERED_TOUR",(p=n||(n={})).POINT_REGULAR="POINT_REGULAR",p.POINT_NUMBERED="POINT_NUMBERED",p.POINT_ICON="POINT_ICON",p.POINT_REGULAR_TOUR="POINT_REGULAR_TOUR",p.POINT_NUMBERED_TOUR="POINT_NUMBERED_TOUR",p.POLYLINE="POLYLINE",p.POLYLINE_BENDING="POLYLINE_BENDING",p.POLYGON="POLYGON",p.POLYGON_DEPRECATED="POLYGON_DEPRECATED",p.POLYGON_GRAPH="POLYGON_GRAPH",p.POLYGON_MULTIPLE="POLYGON_MULTIPLE",p.CIRCLE="CIRCLE",p.RECTANGLE="RECTANGLE",p.AN_GON="AN_GON",p.ARROW_SINGLE="ARROW_SINGLE",p.ARROW_DOUBLE="ARROW_DOUBLE",p.TEXT="TEXT",p.CATEXT="CATEXT",p.TEXT_LEADERLINE="TEXT_LEADERLINE",p.APOINT="APOINT",p.AMIDPOINT="AMIDPOINT",p.ANODE="ANODE",p.APOINT_PATH="APOINT_PATH",p.ANODE_RECT="ANODE_RECT",p.ANODE_CIRCLE="ANODE_CIRCLE",p.ANODE_NGON="ANODE_NGON",p.ANODE_TEXT="ANODE_TEXT",p.AMIDPOINT_ALINE="AMIDPOINT_ALINE",p.CURVE="CURVE",p.CURVE_OPEN="CURVE_OPEN",p.CURVE_CLOSE="CURVE_CLOSE",p.FREEHAND_POLYLINE="FREEHAND_POLYLINE",p.FREEHAND_CURVE="FREEHAND_CURVE",p.SMARTDRAWING="SMARTDRAWING",p.ALINE="ALINE",p.CPOINT="CPOINT",p.CMIDPOINT="CMIDPOINT",p.CNODE="CNODE",p.CNODE_RECT="CNODE_RECT",p.CNODE_CIRCLE="CNODE_CIRCLE",p.CNODE_NGON="CNODE_NGON",p.CNODE_TEXT="CNODE_TEXT",p.CPOINT_REGULAR="CPOINT_REGULAR",p.CPOINT_NUMBERED="CPOINT_NUMBERED",p.CLINE="CLINE",p.CEDGE="CEDGE",p.CPOLYLINE="CPOLYLINE",p.CPOLYGON="CPOLYGON",p.CRECTANGLE="CRECTANGLE",p.CN_GON="CN_GON",p.CN_STAR="CN_STAR",p.CARC="CARC",p.CCIRCLE="CCIRCLE",p.CCURVE="CCURVE",p.CCURVE_OPEN="CCURVE_OPEN",p.CCURVE_CLOSED="CCURVE_CLOSED",p.CBLACKHOLE="CBLACKHOLE",p.CFREEHAND="CFREEHAND",p.COTHERS="COTHERS",(l=r||(r={})).SMALL="SMALL",l.MEDIUM="MEDIUM",l.LARGE="LARGE",(h=o||(o={})).Canvas="Canvas",h.WebGL2="WebGL2",h.WebGPU="WebGPU",h.WebAssembly="WebAssembly"},29026:function(t,e,i){var a,n;i.d(e,{f:function(){return a}}),(n=a||(a={})).Meter="meter",n.Kilometer="kilometer",n.Centimeter="centimeter",n.Millimeter="millimeter",n.Micrometer="micrometer",n.Nanometer="nanometer",n.Mile="mile",n.Yard="yard",n.Foot="foot",n.Inch="inch"},23176:function(t,e,i){i.d(e,{CU:function(){return n},EW:function(){return r},GN:function(){return p},JY:function(){return o},z5:function(){return s}});var a=i(3584);i(13367);let n=function(t,e,i,n,r,o){let s=!(arguments.length>6)||void 0===arguments[6]||arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7];switch(s||(i=0,n=0),t.beginPath(),p||t.rect(-1,-1,t.canvas.width+2,t.canvas.height+2),e){case a.oU.RectangleRounded:let l=(r+o)*.025;l=(l=l>.5*r?.5*r-10:l)>.5*o?.5*o-10:l,t.moveTo(i,n),t.arc(i+r-l,n+l,l,4.71,6.28,!1),t.arc(i+r-l,n+o-l,l,0,1.57,!1),t.arc(i+l,n+o-l,l,1.57,3.14,!1),t.arc(i+l,n+l,l,3.14,4.71,!1);break;case a.oU.Circle:let h=.5*r,c=.5*o;t.ellipse(i+h,n+c,h,c,0,0,2*Math.PI);break;default:t.rect(i,n,r,o)}t.closePath(),t.fill("evenodd")},r=function(t,e,i,a,r,o){let s=!(arguments.length>6)||void 0===arguments[6]||arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return t.globalCompositeOperation="destination-out",t.fillStyle="rgba(255, 255, 255, 1)",n(t,e,i,a,r,o,s,p),t.globalCompositeOperation="source-over",t},o=function(t,e,i,a,n,o){let s=!(arguments.length>6)||void 0===arguments[6]||arguments[6];return r(t,e,i,a,n,o,s,!0)},s=(t,e,i,a)=>{let n=document.createElement("canvas");n.width=i,n.height=a;let r=n.getContext("2d");r.drawImage(t,0,0,i,a),r.drawImage(e,0,0,i,a);let o=new Image;return o.src=n.toDataURL(),o},p=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"myImage",i=document.createElement("a");i.download="".concat(e,".png"),i.href=t.src,i.click()}},92491:function(t,e,i){i.d(e,{$:function(){return n}});var a=i(12494);class n{default(){this.div?this.div.style.cursor!==a.CF.Default&&(this.div.style.cursor=a.CF.Default):document.body.style.cursor!==a.CF.Default&&(document.body.style.cursor=a.CF.Default)}auto(){this.div?this.div.style.cursor!==a.CF.Auto&&(this.div.style.cursor=a.CF.Auto):document.body.style.cursor!==a.CF.Auto&&(document.body.style.cursor=a.CF.Auto)}creating(){this.div?this.div.style.cursor!==a.CF.Crosshair&&(this.div.style.cursor=a.CF.Crosshair):document.body.style.cursor!==a.CF.Crosshair&&(document.body.style.cursor=a.CF.Crosshair)}dragging(){this.div?this.div.style.cursor!==a.CF.Move&&(this.div.style.cursor=a.CF.Move):document.body.style.cursor!==a.CF.Move&&(document.body.style.cursor=a.CF.Move)}hovering(){this.div?this.div.style.cursor!==a.CF.Pointer&&(this.div.style.cursor=a.CF.Pointer):document.body.style.cursor!==a.CF.Pointer&&(document.body.style.cursor=a.CF.Pointer)}texting(){this.div?this.div.style.cursor!==a.CF.Text&&(this.div.style.cursor=a.CF.Text):document.body.style.cursor!==a.CF.Text&&(document.body.style.cursor=a.CF.Text)}set_nwse_resize(){this.div?this.div.style.cursor!==a.CF.NWSEresize&&(this.div.style.cursor=a.CF.NWSEresize):document.body.style.cursor!==a.CF.NWSEresize&&(document.body.style.cursor=a.CF.NWSEresize)}set_nesw_resize(){this.div?this.div.style.cursor!==a.CF.NESWresize&&(this.div.style.cursor=a.CF.NESWresize):document.body.style.cursor!==a.CF.NESWresize&&(document.body.style.cursor=a.CF.NESWresize)}set_ns_resize(){this.div?this.div.style.cursor!==a.CF.NSresize&&(this.div.style.cursor=a.CF.NSresize):document.body.style.cursor!==a.CF.NSresize&&(document.body.style.cursor=a.CF.NSresize)}set_ew_resize(){this.div?this.div.style.cursor!==a.CF.EWresize&&(this.div.style.cursor=a.CF.EWresize):document.body.style.cursor!==a.CF.EWresize&&(document.body.style.cursor=a.CF.EWresize)}constructor(t){this.div=t}}},56891:function(t,e,i){i.d(e,{eg:function(){return s},aK:function(){return C},nq:function(){return E},wq:function(){return f},Kz:function(){return d},Bm:function(){return c},xG:function(){return u},JV:function(){return m},ld:function(){return h},_y:function(){return l},hL:function(){return p}});var a=i(3584);class n{mult(t){return this.x*=t,this.y*=t,this.z*=t,new n(this.x,this.y,this.z)}divByVal(t){return this.x/=t,this.y/=t,this.z/=t,new n(this.x,this.y,this.z)}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,new n(this.x,this.y,this.z)}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,new n(this.x,this.y,this.z)}unitize(){return this.normalize()}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-4||(this.x=this.x/t,this.y=this.y/t,this.z=this.z/t),this}constructor(t,e,i=0){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}}var r=i(44147),o=i(59321);let s=(t,e,i,n,o,s,p,l)=>{let g=document.createElement("canvas");g.width=t.canvas.width,g.height=t.canvas.height;let y=g.getContext("2d");y.imageSmoothingQuality="high",y.drawImage(t.canvas,0,0,t.canvas.width,t.canvas.height);let v=e.geometry,N=[n,o];if(v){let t=v.length;for(;t--;){let e=v[t],n=e.styles.width*i*e.styles.scale;switch(e.type){case r.zq.POINT_REGULAR:h(y,e.nodes,p,e.styles.colorRgba,N,i*e.styles.scale,-9,-28);break;case r.zq.POINT_NUMBERED:s===a.qA.AGSM?c(y,e.nodes,e.styles.colorRgba,e.styles.number,N,i*e.styles.scale,0,0):d(y,e.nodes,l,e.styles.colorRgba,e.styles.number,N,i*e.styles.scale,-13.14,-28);break;case r.zq.POLYLINE_BENDING:e.nodes.length>1&&m(y,e.nodes,e.styles.colorRgba,N,n);break;case r.zq.POLYGON_GRAPH:case r.zq.RECTANGLE:u(y,e.nodes,e.styles.colorRgba,N,n);break;case r.zq.CIRCLE:f(y,e.nodes,e.styles.colorRgba,N,n);break;case r.zq.ARROW_SINGLE:E(y,e.nodes,e.styles.colorRgba,N,n);break;case r.zq.ARROW_DOUBLE:C(y,e.nodes,e.styles.colorRgba,N,n)}}}return y},p=function(t,e,i,a,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.5;t.beginPath(),t.arc(e+a-r,i-n+r,r,4.71,6.28,!1),t.arc(e+a-r,i+n-r,r,0,1.57,!1),t.arc(e-a+r,i+n-r,r,1.57,3.14,!1),t.arc(e-a+r,i-n+r,r,3.14,4.71,!1),t.closePath(),t.strokeStyle="#000000",t.fillStyle="#ffffff",t.fill(),t.stroke()},l=function(t,e,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-8,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-32;t.fillStyle="rgba(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", 1)"),t.save(),t.translate(e[0].sx+o*r-n[0],e[0].sy+s*r-n[1]),t.scale(r,r),t.fill(i),t.restore()},h=function(t,e,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-8,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-32;t.fillStyle="rgba(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", 1)"),t.save(),t.translate(e[0].sx+o*r-n[0],e[0].sy+s*r-n[1]),t.scale(r,r),t.fill(i),t.restore()},c=function(t,e,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-8,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-32,p=26+r,l="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")");t.fillStyle=l,t.save(),t.translate(e[0].sx+o*r-n[0],e[0].sy+s*r-n[1]),t.scale(r,r),t.beginPath(),t.arc(0,0-.5*p,.5*p,0,2*Math.PI),t.closePath(),t.fill(),t.restore(),g(t,e,l,a,n,r,20)},d=function(t,e,i,a,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-8,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-32,l="rgba(".concat(a[0],", ").concat(a[1],", ").concat(a[2],", ").concat(a[3],")");t.fillStyle=l,t.save(),t.translate(e[0].sx+s*o-r[0],e[0].sy+p*o-r[1]),t.scale(o,o),t.fill(i),t.restore(),g(t,e,l,n,r,o)},g=function(t,e,i,a,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:28,p="".concat(10*r,"px ").concat("Avenir Next");t.textAlign="center",t.fillStyle=(0,o.XV)(i),t.font=p,t.fillText(a.toString(),e[0].sx-n[0],e[0].sy-n[1]-s*r*.5)},m=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t.strokeStyle="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")"),t.lineWidth=n,t.beginPath(),t.moveTo(e[0].sx-a[0],e[0].sy-a[1]);for(let i=1;i<e.length;++i)t.lineTo(e[i].sx-a[0],e[i].sy-a[1]);t.lineCap="round",t.stroke(),t.lineCap="butt"},u=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t.fillStyle="rgba(8, 127, 155, 0.3)",t.strokeStyle="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")"),t.lineWidth=n,t.beginPath(),t.moveTo(e[0].sx-a[0],e[0].sy-a[1]);for(let i=1;i<e.length;++i)t.lineTo(e[i].sx-a[0],e[i].sy-a[1]);t.closePath(),t.stroke()},f=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")");t.strokeStyle=r,t.lineWidth=n;let o=(e[2].sx-e[0].sx)*.5,s=(e[2].sy-e[0].sy)*.5,p=e[0].sx+o-a[0],l=e[0].sy+s-a[1];t.beginPath(),t.ellipse(p,l,o,s,0,0,2*Math.PI),t.closePath(),t.stroke()},E=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")");t.strokeStyle=r,t.fillStyle=r,t.lineWidth=n,y(t,e,a,n,!1)},C=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3],")");t.strokeStyle=r,t.fillStyle=r,t.lineWidth=n,y(t,e,a,n,!0)},y=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=[e[0].sx-i[0],e[0].sy-i[1],e[1].sx-i[0],e[1].sy-i[1],e[2].sx-i[0],e[2].sy-i[1]],o=[];for(let t=0;t<e.length;++t)o.push(.5);let s=[];for(let t of r)s.push(t);let p=[];for(let t=0;t<s.length-4;t+=2)p=p.concat(v(s[t],s[t+1],s[t+2],s[t+3],s[t+4],s[t+5],o[t]));N(t,r,p,a,n)},v=(t,e,i,a,n,r,o)=>{let s=Math.sqrt(Math.pow(i-t,2)+Math.pow(a-e,2)),p=o*s/(s+Math.sqrt(Math.pow(n-i,2)+Math.pow(r-a,2))),l=o-p;return[i+p*(t-n),a+p*(e-r),i-l*(t-n),a-l*(e-r)]},N=function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],o=e.length;w(t,e[0],e[1],i[0],i[1],e[2],e[3]),w(t,e[o-2],e[o-1],i[2*o-10],i[2*o-9],e[o-4],e[o-3]),D(t,new n(e[4],e[5]),new n(i[2],i[3]),e[4],e[5],a),r&&D(t,new n(e[0],e[1]),new n(i[0],i[1]),e[0],e[1],a)},w=(t,e,i,a,n,r,o)=>{t.beginPath(),t.moveTo(r,o),t.quadraticCurveTo(a,n,e,i),t.stroke(),t.setLineDash([])},D=function(t,e,i,a,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=A(e,i);t.save(),t.translate(a,n),t.rotate(-(o*Math.PI/180)),t.beginPath(),t.moveTo(0,0),t.lineTo(-(-6*r),-3.75*r),t.lineTo(-(-6*r),3.75*r),t.closePath(),t.stroke(),t.fill(),t.restore()},A=(t,e)=>{let i=e.sub(t),a=new n(1,0,0);return i.y>0?-1*R(a,i):R(a,i)},R=(t,e)=>180*O(t,e)/Math.PI,O=(t,e)=>Math.acos(I(t,e)),I=(t,e)=>b(T(t),T(e)),b=(t,e)=>t.x*e.x+t.y*e.y+t.z*e.z,T=t=>{let e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return e<1e-4?new n(t.x,t.y,t.z):new n(t.x/e,t.y/e,t.z/e)}},86376:function(t,e,i){i.d(e,{D:function(){return n},s:function(){return a}});let a=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=document.createElement("button");return a.style.background="transparent",a.style.border="none",a.innerHTML=e,a.onclick=()=>t(),a.style.transform="scale(".concat(i,")"),a},n=function(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];clearTimeout(e),e=setTimeout(()=>{t.apply(e,n)},i)}}},68045:function(t,e,i){i.d(e,{AR:function(){return s},Cv:function(){return d},Fs:function(){return l},TE:function(){return a},Ux:function(){return o},Yr:function(){return p},kC:function(){return r},m1:function(){return h},sI:function(){return m},vI:function(){return c},yH:function(){return n},yP:function(){return g}}),i(29026);let a=(t,e,i,a)=>Math.sqrt((t-i)*(t-i)+(e-a)*(e-a)),n=(t,e,i)=>[i/e*t,i],r=(t,e,i)=>[i,i/t*e],o=(t,e,i)=>[i/e*t,i],s=t=>{for(let e=0;e<t.length;++e)if(t[e]<0)return!0;return!1},p=t=>Math.PI/180*t,l=()=>{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)})},h=(t,e,i)=>t+(e-t)*i,c=(t,e)=>{let i=[],a=(t.length-1)/(e-1);i[0]=t[0];for(let n=1;n<e-1;n++){let e=n*a,r=+Math.floor(e).toFixed(),o=+Math.ceil(e).toFixed(),s=e-r;i[n]=h(t[r],t[o],s)}return i[e-1]=t[t.length-1],i},d=t=>{let e=1,i=0;for(;e<t.length;)t[e]>t[i]||(i=e),e+=1;return i},g=t=>Math.sqrt(t/Math.PI),m=t=>t/Math.PI*.5},55320:function(t,e,i){i.d(e,{Ql:function(){return n},X4:function(){return a},ee:function(){return r}});let a=t=>{let e=9===t.nodeType?t.documentElement:t,i={name:e.nodeName};return i.content=Array.from(e.childNodes||[]).filter(t=>3===t.nodeType).map(t=>t.textContent).join("").trim(),i.attributes=Array.from(e.attributes||[]).filter(t=>t).reduce((t,e)=>(t[e.name]=e.value,t),{}),i.children=Array.from(e.childNodes||[]).filter(t=>1===t.nodeType).map(t=>i[t.nodeName]=a(t)),i},n=async t=>fetch(t,{mode:"no-cors"}).then(t=>t.text()).catch(t=>{console.log(t)}),r=async t=>{let e=new DOMParser;return o(await e.parseFromString(t,"text/xml"))},o=t=>{let e={};if(1===t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(let i=0;i<t.attributes.length;i++){let a=t.attributes.item(i);e["@attributes"][a.nodeName]=a.nodeValue}}}else 3===t.nodeType&&t.nodeValue&&(e=t.nodeValue);if(t.hasChildNodes())for(let i=0;i<t.childNodes.length;i++){let a=t.childNodes.item(i),n=a.nodeName;if(void 0===e[n])e[n]=o(a);else{if(void 0===e[n].push){let t=e[n];e[n]=[],e[n].push(t)}e[n].push(o(a))}}return e}},91300:function(t,e,i){i.d(e,{KF:function(){return c},R4:function(){return o},VT:function(){return h},dX:function(){return n},jY:function(){return g},nP:function(){return d},sR:function(){return r}});var a=i(55320);let n=t=>{t=JSON.parse(JSON.stringify(t));let e=[],i=t.svg.g.g.path["@attributes"].d.split(" "),a=0;for(let t=0;t<i.length;++t){if("M"===i[t][0]){e[t+" M"]=i[t].slice(1).split(",").map(Number);continue}if("C"===i[t][0]){e[(a=t)+" C"]=i[t].slice(1).split(",").map(Number);continue}if("L"===i[t][0]){e[(a=t)+" L"]=i[t].slice(1).split(",").map(Number);continue}if("0"===i[t][0]||Number(i[t][0])){let n=i[t].split(",").map(Number);e[a+" C"].push(n[0],n[1])}}let n=new Path2D;return Object.keys(e).map(t=>{let i=e[t];if(i){let e=t.split(" ")[1];"M"===e?n.moveTo(i[0],i[1]):"C"===e?n.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]):"L"===e&&n.lineTo(i[0],i[1])}return 0}),n.closePath(),{type:"path",height:parseInt(t.svg["@attributes"].height,10),width:parseInt(t.svg["@attributes"].width,10),path:e,path2D:new Path2D("M9 0a9.022 9.022 0 00-9 9.041c0 4.992 5 11.761 9 19.421 4-7.659 9-14.428 9-19.42A9.022 9.022 0 009 .001V0zm0 12.652a3.85 3.85 0 113.833-3.85A3.841 3.841 0 019 12.652z")}},r=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=document.createElement("button");return a.style.background="transparent",a.style.border="none",a.innerHTML=e,a.onclick=()=>t(),a.style.transform="scale(".concat(i,")"),a},o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#ffffff",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#CBDAE2",o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x","1"),o.setAttribute("y","1"),o.setAttribute("width","".concat(t)),o.setAttribute("height","".concat(e)),o.setAttribute("stroke-width","".concat(n)),o.setAttribute("rx","".concat(i)),o.setAttribute("fill","".concat(a)),o.setAttribute("stroke","".concat(r));let s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.appendChild(o),s.setAttribute("width","".concat(t+2*n)),s.setAttribute("height","".concat(e+2*n)),s.style.position="absolute",s},s={width:10,height:10,path2D:void 0,path:t=>"njslabSandboxStatic/pointSVG/point.svg"},p={width:10,height:10,path2D:void 0,path:t=>"njslabSandboxStatic/pointSVG/point.svg"},l={width:10,height:10,path2D:void 0,path:t=>"njslabSandboxStatic/pointSVG/unnumbered-pin.svg"},h=()=>s,c=()=>p,d=()=>l,g=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=[s,p,l],i=new DOMParser;try{for(let n=0;n<e.length;++n){let r=await (0,a.Ql)(e[n].path(t));if(r){let t=i.parseFromString(r,"text/xml"),o=(0,a.X4)(t);e[n].width=o.attributes.height,e[n].height=o.attributes.width,e[n].path2D=new Path2D(o.children[0].attributes.d)}}return!0}catch(t){return console.debug(t),!1}}}}]);
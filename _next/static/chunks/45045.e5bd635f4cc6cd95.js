(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45045],{15510:function(t){function e(t){return Promise.resolve().then(function(){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=function(){return[]},e.resolve=e,e.id=15510,t.exports=e},75410:function(){},48628:function(){},31601:function(){},67792:function(){},34977:function(){},75042:function(){},55879:function(t,e,a){"use strict";a.r(e),a.d(e,{NFaceCam:function(){return o}});var n=a(88405),i=a(14962),s=a(45169),h=a(50374);class o{async init(t,e){await c(t,e,this.mobile,this.imgMask)}constructor(t){this.mobile=!1,this.mobile=(0,h.isMobile)(),this.host=document.getElementById(t),(0,s.getImgFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/img/smile.png").then(t=>{t&&(this.imgMask=t,(0,s.getImgFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/img/person/Haram_small.jpg").then(t=>{if(!t)return;let e=document.createElement("div");e.style.padding="5px",e.style.display="flex",this.host.append(e);let a=document.createElement("canvas");e.append(a);let n=a.getContext("2d"),i=document.createElement("canvas");e.append(i),i.id="canvas-out";let s=i.getContext("2d");t.onload=()=>{t.style.width="50%",a.width=t.width,a.height=t.height,i.width=t.width,i.height=t.height,n.drawImage(t,0,0),this.init(s,t)}}),(0,s.getImgFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram_01_small.jpg").then(t=>{if(!t)return;let e=document.createElement("div");e.style.display="flex",e.style.padding="5px",this.host.append(e);let a=document.createElement("canvas");e.append(a);let n=a.getContext("2d"),i=document.createElement("canvas");e.append(i),i.id="canvas-out";let s=i.getContext("2d");t.onload=()=>{t.style.width="50%",a.width=t.width,a.height=t.height,i.width=t.width,i.height=t.height,n.drawImage(t,0,0),this.init(s,t)}}))})}}let c=async(t,e,a,s)=>{await n.setBackend("webgl"),d(await i.z({maxFaces:200}),t,e,s)},d=async(t,e,a,n)=>{let i=await t.estimateFaces(a,!1);i[0]&&(e.drawImage(a,0,0,a.width,a.height,0,0,e.canvas.width,e.canvas.height),i.length>0&&i.forEach(t=>{let a=t.scaledMesh;e.fillStyle="#ff0000";let i=a[159][0],s=a[145][1]+(a[159][1]-a[145][1])*.5,h=a[386][0],o=a[374][1]+(a[386][1]-a[374][1])*.5,c=a[13][0],d=a[13][1]+(a[14][1]-a[13][1])*.5,l=r(i,s,h,o);e.save(),e.translate(c,d-(d-o)*.6),e.rotate(-l-.5*Math.PI),e.scale((h-i)/130,(s-d)/130),void 0!==n&&e.drawImage(n,-150,-150),e.lineWidth=1,e.beginPath(),e.rect(-150,-150,300,300),e.closePath(),e.beginPath(),e.arc(0,0,100,0,2*Math.PI),e.restore()}))},r=(t,e,a,n)=>Math.atan2(a-t,n-e)}}]);
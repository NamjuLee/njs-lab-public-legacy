"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95800,85353,54072,13915,385,16446,51297,73161,55226,58999],{85353:function(t,r,e){e.r(r),e.d(r,{GeometryBase:function(){return i}});class i{render(t){}constructor(t){this.scene=t,this.scene.add(this)}}},95800:function(t,r,e){e.r(r),e.d(r,{PointWorld:function(){return h}});var i=e(58999),a=e(55770),n=e(85353),s=e(73161);class o extends s.Shader{set(t,r){return this.gl.uniform1f(this.uniformLoc.uAngle,r),this.gl.uniform1f(this.uniformLoc.uPointSize,t),this}constructor(t,r,e,i){super(t,r,e),this.program&&(this.setPerspective(i),t.useProgram(this.program),this.uniformLoc.uAngle=t.getUniformLocation(this.program,"uAngle"),this.uniformLoc.uPointSize=t.getUniformLocation(this.program,"uPointSize"),t.useProgram(null))}}class h extends n.GeometryBase{initShader(t){this.shader=new o(t,this.v,this.f,this.app.camera.projectionMatrix),this.mesh=i.VAO.createMeshVAO(t,"dots",[0,0,0,.1,.1,0,.1,-.1,0,-.1,-.1,0,-.1,.1,0]),this.mesh.drawMode=t.POINTS,this.modal=new a.Modal(this.mesh)}render(t){this.size+=.01;let r=10*Math.sin(this.size)+20;this.rotation+=.03,this.shader.activate(),this.shader.set(r,this.rotation),this.shader.setCameraMatrix(this.app.camera.viewMatrix),this.shader.renderModal(this.modal.preRender())}constructor(t){super(t.scene),this.v="#version 300 es\n\n        in vec3 a_position;\n\n        uniform mat4 uPMatrix;\n        uniform mat4 uMVMatrix;\n        uniform mat4 uCameraMatrix;\n\n        uniform mediump float uPointSize;\n        uniform float uAngle;\n\n        void main(void) {\n            gl_PointSize = uPointSize;\n            gl_Position = uPMatrix * uCameraMatrix * uMVMatrix * vec4(cos(uAngle) * 0.8 + a_position.x, sin(uAngle) * 0.8 + a_position.y, a_position.z, 1.0);\n        }\n    ",this.f="#version 300 es\n        precision mediump float;\n\n        uniform float uPointSize;\n\n        out vec4 finalColor;\n\n        void main(void) {\n            float c =  uPointSize / 20.;\n            finalColor = vec4(0, c, c, 1.0);\n        }\n    ",this.size=20.5,this.rotation=0,this.app=t,this.gl=t.canvas.gl,this.initShader(this.gl)}}},54072:function(t,r,e){e.r(r),e.d(r,{GLShaderCommon:function(){return i}});class i{static getShaderProgram(t,r,e){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],n=i.createShader(t,t.VERTEX_SHADER,r),s=i.createShader(t,t.FRAGMENT_SHADER,e);return n&&s&&i.createProgram(t,n,s,a)||(console.error("vertex fragment shader error"),null)}static getShader(t,r,e){let i=t.createShader(r);return null===i?null:(t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))?i:(console.log("An error occurred compiling the shaders:"+t.getShaderInfoLog(i)),t.deleteShader(i),null)}static createProgram(t,r,e){let i=!(arguments.length>3)||void 0===arguments[3]||arguments[3],a=t.createProgram();return null===a?null:(t.attachShader(a,r),t.attachShader(a,e),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))?i&&(t.validateProgram(a),!t.getProgramParameter(a,t.VALIDATE_STATUS))?(console.error("Failed to validate program",t.getProgramInfoLog(a)),t.deleteProgram(a),t.deleteShader(e),t.deleteShader(r),null):(t.deleteShader(e),t.deleteShader(r),a):(console.log("Failed to link program: "+t.getProgramInfoLog(a)),t.deleteProgram(a),t.deleteShader(e),t.deleteShader(r),null)}static createShader(t,r,e){let i=t.createShader(r);return null===i?null:(t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))?i:(console.log(t.getShaderInfoLog(i)),t.deleteShader(i),null)}static createShaderFromPath(t,r,e){let a=t.createShader(r);return null===a?null:(t.shaderSource(a,i.getSourceSynch(e)),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS))?a:(console.log(t.getShaderInfoLog(a)),t.deleteShader(a),null)}static getSourceSynch(t){let r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),200===r.status?r.responseText:null}static loadImage(t,r){let e=new Image;e.onload=function(){r(null,e)},e.src=t}}},13915:function(t,r,e){e.r(r),e.d(r,{Matrix4:function(){return i}});class i{static identity(){let t=new Float32Array(16);return t[0]=t[5]=t[10]=t[15]=1,t}static perspective(t,r,e,i,a){let n=1/Math.tan(r/2),s=1/(i-a);t[0]=n/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*i*s,t[15]=0}static ortho(t,r,e,i,a,n,s){let o=1/(r-e),h=1/(i-a),u=1/(n-s);t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(r+e)*o,t[13]=(a+i)*h,t[14]=(s+n)*u,t[15]=1}static transpose(t,r){if(t===r){let e=r[1],i=r[2],a=r[3],n=r[6],s=r[7],o=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=e,t[6]=r[9],t[7]=r[13],t[8]=i,t[9]=n,t[11]=r[14],t[12]=a,t[13]=s,t[14]=o}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}static normalMat3(t,r){let e=r[0],i=r[1],a=r[2],n=r[3],s=r[4],o=r[5],h=r[6],u=r[7],l=r[8],c=r[9],m=r[10],d=r[11],f=r[12],A=r[13],g=r[14],T=r[15],R=e*o-i*s,M=e*h-a*s,x=e*u-n*s,_=i*h-a*o,S=i*u-n*o,p=a*u-n*h,w=l*A-c*f,L=l*g-m*f,v=l*T-d*f,P=c*g-m*A,V=c*T-d*A,O=m*T-d*g,y=R*O-M*V+x*P+_*v-S*L+p*w;return y?(y=1/y,t[0]=(o*O-h*V+u*P)*y,t[1]=(h*v-s*O-u*L)*y,t[2]=(s*V-o*v+u*w)*y,t[3]=(a*V-i*O-n*P)*y,t[4]=(e*O-a*v+n*L)*y,t[5]=(i*v-e*V-n*w)*y,t[6]=(A*p-g*S+T*_)*y,t[7]=(g*x-f*p-T*M)*y,t[8]=(f*S-A*x+T*R)*y,t):null}static multiplyVector(t,r){let e=r[0],i=r[1],a=r[2],n=r[3],s=t[0],o=t[1],h=t[2],u=t[3],l=t[4],c=t[5],m=t[6],d=t[7],f=t[8],A=t[9],g=t[10],T=t[11];return[e*s+i*l+a*f+n*t[12],e*o+i*c+a*A+n*t[13],e*h+i*m+a*g+n*t[14],e*u+i*d+a*T+n*t[15]]}static transformVec4(t,r,e){return t[0]=e[0]*r[0]+e[4]*r[1]+e[8]*r[2]+e[12]*r[3],t[1]=e[1]*r[0]+e[5]*r[1]+e[9]*r[2]+e[13]*r[3],t[2]=e[2]*r[0]+e[6]*r[1]+e[10]*r[2]+e[14]*r[3],t[3]=e[3]*r[0]+e[7]*r[1]+e[11]*r[2]+e[15]*r[3],t}static mult(t,r,e){let i=r[0],a=r[1],n=r[2],s=r[3],o=r[4],h=r[5],u=r[6],l=r[7],c=r[8],m=r[9],d=r[10],f=r[11],A=r[12],g=r[13],T=r[14],R=r[15],M=e[0],x=e[1],_=e[2],S=e[3];return t[0]=M*i+x*o+_*c+S*A,t[1]=M*a+x*h+_*m+S*g,t[2]=M*n+x*u+_*d+S*T,t[3]=M*s+x*l+_*f+S*R,M=e[4],x=e[5],_=e[6],S=e[7],t[4]=M*i+x*o+_*c+S*A,t[5]=M*a+x*h+_*m+S*g,t[6]=M*n+x*u+_*d+S*T,t[7]=M*s+x*l+_*f+S*R,M=e[8],x=e[9],_=e[10],S=e[11],t[8]=M*i+x*o+_*c+S*A,t[9]=M*a+x*h+_*m+S*g,t[10]=M*n+x*u+_*d+S*T,t[11]=M*s+x*l+_*f+S*R,M=e[12],x=e[13],_=e[14],S=e[15],t[12]=M*i+x*o+_*c+S*A,t[13]=M*a+x*h+_*m+S*g,t[14]=M*n+x*u+_*d+S*T,t[15]=M*s+x*l+_*f+S*R,t}static scale(t,r,e,i){return t[0]*=r,t[1]*=r,t[2]*=r,t[3]*=r,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=i,t[9]*=i,t[10]*=i,t[11]*=i,t}static rotateY(t,r){let e=Math.sin(r),i=Math.cos(r),a=t[0],n=t[1],s=t[2],o=t[3],h=t[8],u=t[9],l=t[10],c=t[11];return t[0]=a*i-h*e,t[1]=n*i-u*e,t[2]=s*i-l*e,t[3]=o*i-c*e,t[8]=a*e+h*i,t[9]=n*e+u*i,t[10]=s*e+l*i,t[11]=o*e+c*i,t}static rotateX(t,r){let e=Math.sin(r),i=Math.cos(r),a=t[4],n=t[5],s=t[6],o=t[7],h=t[8],u=t[9],l=t[10],c=t[11];return t[4]=a*i+h*e,t[5]=n*i+u*e,t[6]=s*i+l*e,t[7]=o*i+c*e,t[8]=h*i-a*e,t[9]=u*i-n*e,t[10]=l*i-s*e,t[11]=c*i-o*e,t}static rotateZ(t,r){let e=Math.sin(r),i=Math.cos(r),a=t[0],n=t[1],s=t[2],o=t[3],h=t[4],u=t[5],l=t[6],c=t[7];return t[0]=a*i+h*e,t[1]=n*i+u*e,t[2]=s*i+l*e,t[3]=o*i+c*e,t[4]=h*i-a*e,t[5]=u*i-n*e,t[6]=l*i-s*e,t[7]=c*i-o*e,t}static rotate(t,r,e){let i=e[0],a=e[1],n=e[2],s=Math.sqrt(i*i+a*a+n*n),o,h,u,l,c,m,d,f,A,g,T,R,M,x,_,S,p,w,L,v,P,V,O,y;return 1e-6>Math.abs(s)?null:(i*=s=1/s,a*=s,n*=s,o=Math.sin(r),u=1-(h=Math.cos(r)),l=t[0],c=t[1],m=t[2],d=t[3],f=t[4],A=t[5],g=t[6],T=t[7],R=t[8],M=t[9],x=t[10],_=t[11],S=i*i*u+h,p=a*i*u+n*o,w=n*i*u-a*o,L=i*a*u-n*o,v=a*a*u+h,P=n*a*u+i*o,V=i*n*u+a*o,O=a*n*u-i*o,y=n*n*u+h,t[0]=l*S+f*p+R*w,t[1]=c*S+A*p+M*w,t[2]=m*S+g*p+x*w,t[3]=d*S+T*p+_*w,t[4]=l*L+f*v+R*P,t[5]=c*L+A*v+M*P,t[6]=m*L+g*v+x*P,t[7]=d*L+T*v+_*P,t[8]=l*V+f*O+R*y,t[9]=c*V+A*O+M*y,t[10]=m*V+g*O+x*y,t[11]=d*V+T*O+_*y,t)}static invert(t,r){void 0===r&&(r=t);let e=r[0],i=r[1],a=r[2],n=r[3],s=r[4],o=r[5],h=r[6],u=r[7],l=r[8],c=r[9],m=r[10],d=r[11],f=r[12],A=r[13],g=r[14],T=r[15],R=e*o-i*s,M=e*h-a*s,x=e*u-n*s,_=i*h-a*o,S=i*u-n*o,p=a*u-n*h,w=l*A-c*f,L=l*g-m*f,v=l*T-d*f,P=c*g-m*A,V=c*T-d*A,O=m*T-d*g,y=R*O-M*V+x*P+_*v-S*L+p*w;return!!y&&(y=1/y,t[0]=(o*O-h*V+u*P)*y,t[1]=(a*V-i*O-n*P)*y,t[2]=(A*p-g*S+T*_)*y,t[3]=(m*S-c*p-d*_)*y,t[4]=(h*v-s*O-u*L)*y,t[5]=(e*O-a*v+n*L)*y,t[6]=(g*x-f*p-T*M)*y,t[7]=(l*p-m*x+d*M)*y,t[8]=(s*V-o*v+u*w)*y,t[9]=(i*v-e*V-n*w)*y,t[10]=(f*S-A*x+T*R)*y,t[11]=(c*x-l*S-d*R)*y,t[12]=(o*L-s*P-h*w)*y,t[13]=(e*P-i*L+a*w)*y,t[14]=(A*M-f*_-g*R)*y,t[15]=(l*_-c*M+m*R)*y,!0)}static translate(t,r,e,i){t[12]=t[0]*r+t[4]*e+t[8]*i+t[12],t[13]=t[1]*r+t[5]*e+t[9]*i+t[13],t[14]=t[2]*r+t[6]*e+t[10]*i+t[14],t[15]=t[3]*r+t[7]*e+t[11]*i+t[15]}vtranslate(t){return i.translate(this.raw,t.x,t.y,t.z),this}translate(t,r,e){return i.translate(this.raw,t,r,e),this}rotateY(t){return i.rotateY(this.raw,t),this}rotateX(t){return i.rotateX(this.raw,t),this}rotateZ(t){return i.rotateZ(this.raw,t),this}vscale(t){return i.scale(this.raw,t.x,t.y,t.z),this}scale(t,r,e){return i.scale(this.raw,t,r,e),this}invert(){return i.invert(this.raw),this}resetRotation(){for(let t=0;t<this.raw.length;t++)t>=12&&t<=14||(this.raw[t]=t%5==0?1:0);return this}reset(){for(let t=0;t<this.raw.length;t++)this.raw[t]=t%5==0?1:0;return this}constructor(){this.raw=i.identity()}}},86155:function(t,r,e){e.r(r),e.d(r,{Vector3:function(){return i}});class i{magnitude(t){if(void 0===t)return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);let r=t.x-this.x,e=t.y-this.y,i=t.y-this.z;return Math.sqrt(r*r+e*e+i*i)}normalize(){let t=this.magnitude();return this.x/=t,this.y/=t,this.z/=t,this}set(t,r,e){return this.x=t,this.y=r,this.z=e,this}multiScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}getArray(){return[this.x,this.y,this.z]}getFloatArray(){return new Float32Array([this.x,this.y,this.z])}clone(){return new i(this.x,this.y,this.z)}constructor(t=0,r=0,e=0){this.x=t,this.y=r,this.z=e}}},16446:function(t,r,e){var i,a;e.r(r),e.d(r,{ATTR:function(){return i},AttribLocations:function(){return n},UniformLocations:function(){return s}}),(a=i||(i={})).ATTR_POSITION_NAME="a_position",a[a.ATTR_POSITION_LOC=0]="ATTR_POSITION_LOC",a.ATTR_NORMAL_NAME="a_norm",a[a.ATTR_NORMAL_LOC=1]="ATTR_NORMAL_LOC",a.ATTR_UV_NAME="a_uv",a[a.ATTR_UV_LOC=2]="ATTR_UV_LOC",a[a.ATTR_COLOR_LOC=4]="ATTR_COLOR_LOC",a.ATTR_COLOR_NAME="a_color";class n{constructor(t,r){this.position=t.getAttribLocation(r,"a_norm"),this.normal=t.getAttribLocation(r,"a_norm"),this.uv=t.getAttribLocation(r,"a_uv")}}class s{constructor(t,r){this.perspective=t.getUniformLocation(r,"uPMatrix"),this.modalMatrix=t.getUniformLocation(r,"uMVMatrix"),this.cameraMatrix=t.getUniformLocation(r,"uCameraMatrix"),this.mainTexture=t.getUniformLocation(r,"uMainTex")}}},55770:function(t,r,e){e.r(r),e.d(r,{Modal:function(){return a}});var i=e(55226);class a{setScale(t,r,e){return this.transform.scale.set(t,r,e),this}setPosition(t,r,e){return this.transform.position.set(t,r,e),this}setRotation(t,r,e){return this.transform.rotation.set(t,r,e),this}addScale(t,r,e){return this.transform.scale.x+=t,this.transform.scale.y+=r,this.transform.scale.y+=r,this}addPosition(t,r,e){return this.transform.position.x+=t,this.transform.position.y+=r,this.transform.position.z+=e,this}addRotation(t,r,e){return this.transform.rotation.x+=t,this.transform.rotation.y+=r,this.transform.rotation.z+=e,this}preRender(){return this.transform.updateMatrix(),this}constructor(t){this.transform=new i.Transform,this.mesh=t}}},73161:function(t,r,e){e.r(r),e.d(r,{Shader:function(){return n}});var i=e(54072),a=e(16446);class n{activate(){return this.gl.useProgram(this.program),this}deactivate(){return this.gl.useProgram(null),this}dispose(){this.gl.getParameter(this.gl.CURRENT_PROGRAM)===this.program&&this.gl.useProgram(null),this.gl.deleteProgram(this.program)}setPerspective(t){return this.gl.uniformMatrix4fv(this.uniformLoc.perspective,!1,t),this}setModalMatrix(t){return this.gl.uniformMatrix4fv(this.uniformLoc.modalMatrix,!1,t),this}setCameraMatrix(t){return this.gl.uniformMatrix4fv(this.uniformLoc.cameraMatrix,!1,t),this}preRender(){}renderModal(t){return this.setModalMatrix(t.transform.getViewMatrix()),this.gl.bindVertexArray(t.mesh.vao),t.mesh.indexCount?this.gl.drawElements(t.mesh.drawMode,t.mesh.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(t.mesh.drawMode,0,t.mesh.vertexCount),this.gl.bindVertexArray(null),this}constructor(t,r,e){this.gl=t,this.program=i.GLShaderCommon.getShaderProgram(t,r,e,!0),null!==this.program&&(t.useProgram(this.program),this.attribLoc=new a.AttribLocations(t,this.program),this.uniformLoc=new a.UniformLocations(t,this.program))}}},55226:function(t,r,e){e.r(r),e.d(r,{Transform:function(){return n}});var i=e(86155),a=e(13915);class n{updateMatrix(){return this.matView.reset().vtranslate(this.position).rotateX(this.rotation.x*n.deg2Rad).rotateZ(this.rotation.z*n.deg2Rad).rotateY(this.rotation.y*n.deg2Rad).vscale(this.scale),a.Matrix4.normalMat3(this.matNormal,this.matView.raw),a.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),a.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),a.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this.matView.raw}updateDirection(){return a.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),a.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),a.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this}getViewMatrix(){return this.matView.raw}getNormalMatrix(){return this.matNormal}reset(){this.position.set(0,0,0),this.scale.set(1,1,1),this.rotation.set(0,0,0)}constructor(){this.position=new i.Vector3(0,0,0),this.scale=new i.Vector3(1,1,1),this.rotation=new i.Vector3(0,0,0),this.matView=new a.Matrix4,this.matNormal=new Float32Array(9),this.forward=new Float32Array(4),this.up=new Float32Array(4),this.right=new Float32Array(4)}}n.deg2Rad=Math.PI/180},58999:function(t,r,e){e.r(r),e.d(r,{DRAW_MODE:function(){return i},RTN:function(){return n},VAO:function(){return s}});var i,a=e(16446);i||(i={});class n{constructor(){}}class s{static createMeshVAO(t,r,e,i,s,o){let h=new n;return h.name=r,h.drawMode=t.TRIANGLES,h.vao=t.createVertexArray(),t.bindVertexArray(h.vao),void 0!==e&&null!=e&&(h.bufVertices=t.createBuffer(),h.vertexComponentLen=3,h.vertexCount=e.length/h.vertexComponentLen,t.bindBuffer(t.ARRAY_BUFFER,h.bufVertices),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(a.ATTR.ATTR_POSITION_LOC),t.vertexAttribPointer(a.ATTR.ATTR_POSITION_LOC,3,t.FLOAT,!1,0,0)),void 0!==s&&null!=s&&(h.bufNormals=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,h.bufNormals),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),t.enableVertexAttribArray(a.ATTR.ATTR_NORMAL_LOC),t.vertexAttribPointer(a.ATTR.ATTR_NORMAL_LOC,3,t.FLOAT,!1,0,0)),void 0!==o&&null!=o&&(h.bufUV=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,h.bufUV),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),t.enableVertexAttribArray(a.ATTR.ATTR_UV_LOC),t.vertexAttribPointer(a.ATTR.ATTR_UV_LOC,2,t.FLOAT,!1,0,0)),void 0!==i&&null!=i&&(h.bufIndex=t.createBuffer(),h.indexCount=i.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h.bufIndex),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),t.bindVertexArray(null),t.bindBuffer(t.ARRAY_BUFFER,null),h}constructor(){}}}}]);
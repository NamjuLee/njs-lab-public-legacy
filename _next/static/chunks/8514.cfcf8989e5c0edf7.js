"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8514],{8514:function(t,s,i){i.r(s),i.d(s,{Solution:function(){return x}});var e=i(8483);class h{Update(t){this.isCaptured||this.UpdatePos(t)}UpdatePos(t){let s=e.h9.Sub(this.pos,t),i=e.h9.Normalize(s),h=e.h9.CalculateFalloff(this.pos,t,1,.01);this.velocity=e.h9.Scale(i,h),this.UpdateCollision(),this.velocity.y+=1.1,this.pos=e.h9.Add(this.pos,this.velocity),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx)}UpdateCollision(){for(let t=0;t<this.listCollision.length;++t){let s=e.h9.Sub(this.pos,this.listCollision[t].pos),i=e.h9.Normalize(s),h=e.h9.CalculateFalloff(this.pos,this.listCollision[t].pos,1,.01);this.velocity=e.h9.Scale(i,h),this.pos=e.h9.Add(this.pos,this.velocity)}}IsMouseHover(t,s){return e.h9.Distance(this.pos,new e.h9(t,s))<this.r}Render(t){t.lineWidth=1,t.strokeStyle="#000000",this.isCaptured?t.fillStyle="#ff0000":t.fillStyle=this.colorFill,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()}UpdatePosInScreen(t){this.pos.y>.5*t.canvas.height-10&&(this.pos.y=.5*t.canvas.height-10),this.pos.x<-(.5*t.canvas.width)+10&&(this.pos.x=-(.5*t.canvas.width)+10),this.pos.x>.5*t.canvas.width-10&&(this.pos.x=.5*t.canvas.width-10)}constructor(t,s,i){this.m=5,this.r=17,this.colorFill="#0099ff",this.MAX_VELOCITY=5.5,this.listCollision=[],this.isCaptured=!1,this.graph=t,this.pos=new e.h9(s,i)}}class a{static AABBvsAABB(t,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5;return!(t.vec.x+i+.5*t.width<s.vec.x-i-.5*s.width)&&!(t.vec.x-i-.5*t.width>s.vec.x+i+.5*s.width)&&!(t.vec.y+i+.5*t.height<s.vec.y-i-.5*s.height)&&!(t.vec.y-i-.5*t.height>s.vec.y+i+.5*s.height)}Overlaps(t){return a.AABBvsAABB(this,t)}Update(){this.fixed||this.UpdatePos()}UpdatePos(){for(let t=0;t<this.listCollision.length;++t){let s=e.h9.Sub(this.vec,this.listCollision[t].vec),i=e.h9.Normalize(s);this.velocity=e.h9.Scale(i,.3+Math.random()),this.vec=e.h9.Add(this.vec,this.velocity)}}Render(t){this.hover?t.fillStyle="#0ff000":t.fillStyle="#ff0000",this.fixed&&(t.fillStyle="#000000"),t.strokeStyle="#000000",t.beginPath(),t.rect(this.vec.x-.5*this.width,this.vec.y-.5*this.height,this.width,this.height),t.closePath(),t.fill(),t.lineWidth=1,t.stroke()}constructor(t,s,i,h){this.listCollision=[],this.fixed=!1,this.hover=!1,this.graph=t,this.vec=new e.h9(s.x,s.y),this.width=i,this.height=h}}class o{Init(){this.m=new e.h9(0,0),this.particles=[],this.listRect=[];for(let t=0;t<this.num;++t)this.listRect.push(new a(this,new e.h9(-.5+Math.random(),-.5+Math.random()),20+20*Math.random(),5+10*Math.random()))}UpdateNumber(t){this.num=t,this.Init(),console.log(t,"num")}UpdateOffset(t){this.offset=t,console.log(t,"off")}MouseDown(t,s){for(let i=0;i<this.particles.length;++i)this.particles[i].IsMouseHover(t,s)&&(this.capture=this.particles[i],this.capture.isCaptured=!0)}MouseUp(){this.capture&&(this.capture.isCaptured=!1),this.capture=void 0}MouseLeftClick(t,s){this.particles.push(new h(this,t,s))}MouseMove(t,s){this.m.x=t,this.m.y=s}MouseDrag(t,s){this.capture&&(this.capture.pos.x=t,this.capture.pos.y=s)}Render(t){this.UpdateCollisionRect(),this.UpdateCollision();for(let t=0;t<this.listRect.length;++t)this.listRect[t].Update();for(let s=0;s<this.listRect.length;++s)this.listRect[s].Render(t);(5&this.t)==0&&this.particles.length<10&&this.particles.push(new h(this,0,0)),this.t+=1}UpdateCollisionRect(){for(let t=0;t<this.listRect.length;++t){let s=this.listRect[t];s.listCollision=[];let i=!1;for(let t=0;t<this.listRect.length;++t){let e=this.listRect[t];s!==e&&a.AABBvsAABB(s,e,this.offset)&&(s.listCollision.push(e),i=!0)}s.hover=i}}UpdateCollision(){for(let t=0;t<this.particles.length;++t){let s=this.particles[t];s.listCollision=[];for(let t=0;t<this.particles.length;++t){let i=this.particles[t];s!==i&&s.pos.Distance(i.pos)<s.r+i.r&&s.listCollision.push(i)}}}constructor(t){this.particles=[],this.listRect=[],this.offset=1,this.t=1,this.num=50,this.capture=void 0,this.graphSystem=t,this.Init()}}class l{InitCanvas(){let t=document.createElement("div");if(!t)return;this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);let s=document.createElement("div");if(!s)return;this.divCanvas=s,this.divLocalMain.append(s);let i=document.createElement("canvas");if(i){this.canvas=i,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";let t=this.canvas.getContext("2d");t&&(this.ctx=t,this.InitUI(),this.Init())}}InitUI(){let t=document.createElement("div");if(!t)return;this.divUI=t,this.divLocalMain.append(t),this.divUI.style.marginLeft="10px",this.divUI.style.width="100%";let s=document.createElement("button");s.textContent="reset",s.onclick=()=>{this.graphSystem.InitGraph()},this.divUI.append(s);let i=document.createElement("input");i.oninput=()=>{let t=+i.value;this.graphSystem.graph.UpdateNumber(t)},i.type="range",i.min="10",i.max="200.0",i.value="50",this.divUI.append(i);let e=document.createElement("input");e.oninput=()=>{let t=+e.value;this.graphSystem.graph.UpdateOffset(t)},e.type="range",e.min="1",e.max="10.0",e.value="4",this.divUI.append(e);let h=document.createElement("p");h&&(this.divUI.append(h),h.style.width="max-content",h.innerHTML="1. clikc to reset! <br> ",h.innerHTML+="2. first slider for num of Nodes! <br> ",h.innerHTML+="3. second slider for offset! <br> ")}Init(){this.ctx.translate(.5*this.ctx.canvas.width,.5*this.ctx.canvas.height),this.ctx.scale(1,1),this.EventBind(),this.Loop()}EventBind(){this.canvas.onclick=t=>{this.prevent=!1,this.timer=setTimeout(()=>{if(!this.prevent){if(!this.click)return;this.MouseClick(t)}this.prevent=!1},this.delay)},this.canvas.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},this.canvas.addEventListener("wheel",t=>this.MouseWheel(t,t.deltaY)),this.canvas.onmousedown=t=>{this.click=!0,this.pressed=!0,this.MouseDown(t)},this.canvas.onmouseup=t=>{this.pressed=!1,this.MouseUp(t)},this.canvas.onmousemove=t=>{this.pressed&&(this.click=!1,this.MouseDrag(t)),this.MouseMove(t)},window.onresize=t=>this.Resize(t)}Resize(t){}Loop(){requestAnimationFrame(()=>{this.Loop()}),this.ctx.clearRect(-(.5*this.ctx.canvas.width),-(.5*this.ctx.canvas.height),this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(-(.5*this.ctx.canvas.width),-(.5*this.ctx.canvas.height),this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)}Render(t){}MouseClick(t){}MouseDoubleClick(t){}MouseDown(t){}MouseUp(t){}MouseMove(t){}MouseDrag(t){}MouseWheel(t,s){}constructor(t,s=400,i=250){this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.graphSystem=t,this.width=s,this.height=i;let e=document.getElementById(t.id);if(!e)return;this.host=e,this.InitCanvas()}}class n{Init(){this.CanvasCore.Render=t=>this.Render(t),this.CanvasCore.MouseDown=t=>this.MouseDown(t),this.CanvasCore.MouseClick=t=>this.MouseClick(t),this.CanvasCore.MouseDoubleClick=t=>this.MouseDoubleClick(t),this.CanvasCore.MouseUp=t=>this.MouseUp(t),this.CanvasCore.MouseMove=t=>this.MouseMove(t),this.CanvasCore.MouseDrag=t=>this.MouseDrag(t)}InitGraph(){this.graph=new o(this)}Render(t){this.graph.Render(t),t.fillStyle="rgba(255, 0, 0, 0.9)",t.beginPath(),t.arc(this.m.x,this.m.y,2.5,0,2*Math.PI),t.closePath(),t.fill()}Grid(t){for(let s=-10;s<10;++s)for(let i=-10;i<10;++i)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(s,i,.05,0,2*Math.PI),t.closePath(),t.fill()}mouseRemap(t){this.m.x=t.offsetX-.5*this.CanvasCore.canvas.width,this.m.y=t.offsetY-.5*this.CanvasCore.canvas.height}MouseDown(t){this.mouseRemap(t),this.graph.MouseDown(this.m.x,this.m.y)}MouseUp(t){this.mouseRemap(t),this.graph.MouseUp()}MouseMove(t){this.mouseRemap(t),this.graph.MouseMove(this.m.x,this.m.y)}MouseDrag(t){this.mouseRemap(t),this.graph.MouseDrag(this.m.x,this.m.y)}MouseClick(t){this.mouseRemap(t),this.graph.MouseLeftClick(this.m.x,this.m.y)}MouseDoubleClick(t){this.mouseRemap(t)}constructor(t){this.t=.9,this.m=new e.h9(0,0,0),this.id=t,this.CanvasCore=new l(this),this.Init(),this.InitGraph()}}class c{Update(t){this.isCaptured||this.UpdatePos(t)}UpdatePos(t){let s=e.h9.Sub(this.pos,t),i=e.h9.Normalize(s),h=e.h9.CalculateFalloff(this.pos,t,1,.01);this.velocity=e.h9.Scale(i,h),this.UpdateCollision(),this.velocity.y+=1.1,this.pos=e.h9.Add(this.pos,this.velocity),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx)}UpdateCollision(){for(let t=0;t<this.listCollision.length;++t){let s=e.h9.Sub(this.pos,this.listCollision[t].pos),i=e.h9.Normalize(s),h=e.h9.CalculateFalloff(this.pos,this.listCollision[t].pos,1,.01);this.velocity=e.h9.Scale(i,h),this.pos=e.h9.Add(this.pos,this.velocity)}}IsMouseHover(t,s){return e.h9.Distance(this.pos,new e.h9(t,s))<this.r}Render(t){t.lineWidth=1,t.strokeStyle="#000000",this.isCaptured?t.fillStyle="#ff0000":t.fillStyle=this.colorFill,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()}UpdatePosInScreen(t){this.pos.y>.5*t.canvas.height-10&&(this.pos.y=.5*t.canvas.height-10),this.pos.x<-(.5*t.canvas.width)+10&&(this.pos.x=-(.5*t.canvas.width)+10),this.pos.x>.5*t.canvas.width-10&&(this.pos.x=.5*t.canvas.width-10)}constructor(t,s,i){this.m=5,this.r=17,this.colorFill="#0099ff",this.MAX_VELOCITY=5.5,this.listCollision=[],this.isCaptured=!1,this.graph=t,this.pos=new e.h9(s,i)}}class r{static AABBvsAABB(t,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5;return!(t.vec.x+i+.5*t.width<s.vec.x-i-.5*s.width)&&!(t.vec.x-i-.5*t.width>s.vec.x+i+.5*s.width)&&!(t.vec.y+i+.5*t.height<s.vec.y-i-.5*s.height)&&!(t.vec.y-i-.5*t.height>s.vec.y+i+.5*s.height)}Overlaps(t){return r.AABBvsAABB(this,t)}Update(){this.fixed||(this.UpdatePos(),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx))}UpdatePos(){for(let t=0;t<this.listCollision.length;++t){let s=e.h9.Sub(this.vec,this.listCollision[t].vec),i=e.h9.Normalize(s);this.velocity=e.h9.Scale(i,Math.random()*this.graph.optiLevel),this.vec=e.h9.Add(this.vec,this.velocity)}}Render(t){this.hover?t.fillStyle="#0ff000":t.fillStyle="#ff0000",this.fixed&&(t.fillStyle="#000000"),t.strokeStyle="#000000",t.beginPath(),t.rect(this.vec.x-.5*this.width,this.vec.y-.5*this.height,this.width,this.height),t.closePath(),t.fill(),t.lineWidth=1,t.stroke()}UpdatePosInScreen(t){this.vec.y>.5*t.canvas.height-10&&(this.vec.y=.5*t.canvas.height-10),this.vec.x-.5*this.width-10<-(.5*t.canvas.width)+10&&(this.vec.x=-(.5*t.canvas.width)+10+.5*this.width+10),this.vec.x+.5*this.width+10>.5*t.canvas.width-10&&(this.vec.x=.5*t.canvas.width-10-.5*this.width-10)}constructor(t,s,i,h){this.listCollision=[],this.fixed=!1,this.hover=!1,this.graph=t,this.vec=new e.h9(s.x,s.y),this.width=i,this.height=h}}class d{Init(){this.m=new e.h9(0,0),this.particles=[],this.listRect=[];for(let t=0;t<this.num;++t)this.listRect.push(new r(this,new e.h9(-.5+Math.random(),-.5+Math.random()),20+20*Math.random(),5+10*Math.random()));let t=new r(this,new e.h9(-50,-50),50,50);t.fixed=!0,this.listRect.push(t),(t=new r(this,new e.h9(50,20),40,20)).fixed=!0,this.listRect.push(t)}UpdateNumber(t){this.num=t,this.Init(),console.log(t,"num")}UpdateOffset(t){this.offset=t,console.log(t,"off")}UpdateOptiLevel(t){this.optiLevel=t,this.Init(),console.log(t,"opti")}MouseDown(t,s){for(let i=0;i<this.particles.length;++i)this.particles[i].IsMouseHover(t,s)&&(this.capture=this.particles[i],this.capture.isCaptured=!0)}MouseUp(){this.capture&&(this.capture.isCaptured=!1),this.capture=void 0}MouseLeftClick(t,s){this.particles.push(new c(this,t,s))}MouseMove(t,s){this.m.x=t,this.m.y=s}MouseDrag(t,s){this.capture&&(this.capture.pos.x=t,this.capture.pos.y=s)}Render(t){this.UpdateCollisionRect(),this.UpdateCollision();for(let t=0;t<this.listRect.length;++t)this.listRect[t].Update();for(let s=0;s<this.listRect.length;++s)this.listRect[s].Render(t);(5&this.t)==0&&this.particles.length<10&&this.particles.push(new c(this,0,0)),this.t+=1}UpdateCollisionRect(){for(let t=0;t<this.listRect.length;++t){let s=this.listRect[t];s.listCollision=[];let i=!1;for(let t=0;t<this.listRect.length;++t){let e=this.listRect[t];s!==e&&r.AABBvsAABB(s,e,this.offset)&&(s.listCollision.push(e),i=!0)}s.hover=i}}UpdateCollision(){for(let t=0;t<this.particles.length;++t){let s=this.particles[t];s.listCollision=[];for(let t=0;t<this.particles.length;++t){let i=this.particles[t];s!==i&&s.pos.Distance(i.pos)<s.r+i.r&&s.listCollision.push(i)}}}constructor(t){this.particles=[],this.listRect=[],this.offset=1,this.optiLevel=3,this.t=1,this.num=50,this.capture=void 0,this.graphSystem=t,this.Init()}}class p{InitCanvas(){let t=document.createElement("div");if(!t)return;this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);let s=document.createElement("div");if(!s)return;this.divCanvas=s,this.divLocalMain.append(s);let i=document.createElement("canvas");if(i){this.canvas=i,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";let t=this.canvas.getContext("2d");t&&(this.ctx=t,this.InitUI(),this.Init())}}InitUI(){let t=document.createElement("div");if(!t)return;this.divUI=t,this.divLocalMain.append(t),this.divUI.style.marginLeft="10px",this.divUI.style.width="100%";let s=document.createElement("button");s.textContent="reset",s.onclick=()=>{this.graphSystem.InitGraph()},this.divUI.append(s);let i=document.createElement("input");i.oninput=()=>{let t=+i.value;this.graphSystem.graph.UpdateNumber(t)},i.type="range",i.min="10",i.max="200.0",i.value="50",this.divUI.append(i);let e=document.createElement("input");e.oninput=()=>{let t=+e.value;this.graphSystem.graph.UpdateOffset(t)},e.type="range",e.min="1",e.max="10.0",e.value="4",this.divUI.append(e);let h=document.createElement("input");h.oninput=()=>{let t=+h.value;this.graphSystem.graph.UpdateOptiLevel(t)},h.type="range",h.min="1",h.max="8",h.value="4",this.divUI.append(h);let a=document.createElement("p");a&&(this.divUI.append(a),a.style.width="max-content",a.innerHTML="1. clikc to reset! <br> ",a.innerHTML+="2. first slider for num of Nodes! <br> ",a.innerHTML+="3. second slider for offset! <br> ",a.innerHTML+="4. third slider for Opti level! <br> ")}Init(){this.ctx.translate(.5*this.ctx.canvas.width,.5*this.ctx.canvas.height),this.ctx.scale(1,1),this.EventBind(),this.Loop()}EventBind(){this.canvas.onclick=t=>{this.prevent=!1,this.timer=setTimeout(()=>{if(!this.prevent){if(!this.click)return;this.MouseClick(t)}this.prevent=!1},this.delay)},this.canvas.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},this.canvas.addEventListener("wheel",t=>this.MouseWheel(t,t.deltaY)),this.canvas.onmousedown=t=>{this.click=!0,this.pressed=!0,this.MouseDown(t)},this.canvas.onmouseup=t=>{this.pressed=!1,this.MouseUp(t)},this.canvas.onmousemove=t=>{this.pressed&&(this.click=!1,this.MouseDrag(t)),this.MouseMove(t)},window.onresize=t=>this.Resize(t)}Resize(t){}Loop(){requestAnimationFrame(()=>{this.Loop()}),this.ctx.clearRect(-(.5*this.ctx.canvas.width),-(.5*this.ctx.canvas.height),this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(-(.5*this.ctx.canvas.width),-(.5*this.ctx.canvas.height),this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)}Render(t){}MouseClick(t){}MouseDoubleClick(t){}MouseDown(t){}MouseUp(t){}MouseMove(t){}MouseDrag(t){}MouseWheel(t,s){}constructor(t,s=400,i=250){this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.graphSystem=t,this.width=s,this.height=i;let e=document.getElementById(t.id);if(!e)return;this.host=e,this.InitCanvas()}}class v{Init(){this.CanvasCore.Render=t=>this.Render(t),this.CanvasCore.MouseDown=t=>this.MouseDown(t),this.CanvasCore.MouseClick=t=>this.MouseClick(t),this.CanvasCore.MouseDoubleClick=t=>this.MouseDoubleClick(t),this.CanvasCore.MouseUp=t=>this.MouseUp(t),this.CanvasCore.MouseMove=t=>this.MouseMove(t),this.CanvasCore.MouseDrag=t=>this.MouseDrag(t)}InitGraph(){this.graph=new d(this)}Render(t){this.graph.Render(t),t.fillStyle="rgba(255, 0, 0, 0.9)",t.beginPath(),t.arc(this.m.x,this.m.y,2.5,0,2*Math.PI),t.closePath(),t.fill()}Grid(t){for(let s=-10;s<10;++s)for(let i=-10;i<10;++i)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(s,i,.05,0,2*Math.PI),t.closePath(),t.fill()}mouseRemap(t){this.m.x=t.offsetX-.5*this.CanvasCore.canvas.width,this.m.y=t.offsetY-.5*this.CanvasCore.canvas.height}MouseDown(t){this.mouseRemap(t),this.graph.MouseDown(this.m.x,this.m.y)}MouseUp(t){this.graph.MouseUp()}MouseMove(t){this.mouseRemap(t),this.graph.MouseMove(this.m.x,this.m.y)}MouseDrag(t){this.mouseRemap(t),this.graph.MouseDrag(this.m.x,this.m.y)}MouseClick(t){this.mouseRemap(t),this.graph.MouseLeftClick(this.m.x,this.m.y)}MouseDoubleClick(t){this.mouseRemap(t),console.log("d click")}constructor(t){this.t=.9,this.m=new e.h9(0,0,0),this.id=t,this.CanvasCore=new p(this),this.Init(),this.InitGraph()}}class u{Update(t){this.isCaptured||this.UpdatePos(t)}UpdatePos(t){let s=e.h9.Sub(this.pos,t),i=e.h9.Normalize(s),h=e.h9.CalculateFalloff(this.pos,t,1,.01);this.velocity=e.h9.Scale(i,h),this.UpdateCollision(),this.velocity.y+=1.1,this.pos=e.h9.Add(this.pos,this.velocity),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx)}UpdateCollision(){for(let t=0;t<this.listCollision.length;++t){let s=e.h9.Sub(this.pos,this.listCollision[t].pos),i=e.h9.Normalize(s),h=e.h9.CalculateFalloff(this.pos,this.listCollision[t].pos,1,.01);this.velocity=e.h9.Scale(i,h),this.pos=e.h9.Add(this.pos,this.velocity)}}IsMouseHover(t,s){return e.h9.Distance(this.pos,new e.h9(t,s))<this.r}Render(t){t.lineWidth=1,t.strokeStyle="#000000",this.isCaptured?t.fillStyle="#ff0000":t.fillStyle=this.colorFill,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()}UpdatePosInScreen(t){this.pos.y>.5*t.canvas.height-10&&(this.pos.y=.5*t.canvas.height-10),this.pos.x<-(.5*t.canvas.width)+10&&(this.pos.x=-(.5*t.canvas.width)+10),this.pos.x>.5*t.canvas.width-10&&(this.pos.x=.5*t.canvas.width-10)}constructor(t,s,i){this.m=5,this.r=17,this.colorFill="#0099ff",this.MAX_VELOCITY=5.5,this.listCollision=[],this.isCaptured=!1,this.graph=t,this.pos=new e.h9(s,i)}}class m{static AABBvsAABB(t,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5;return!(t.vec.x+i+.5*t.width<s.vec.x-i-.5*s.width)&&!(t.vec.x-i-.5*t.width>s.vec.x+i+.5*s.width)&&!(t.vec.y+i+.5*t.height<s.vec.y-i-.5*s.height)&&!(t.vec.y-i-.5*t.height>s.vec.y+i+.5*s.height)}Overlaps(t){return m.AABBvsAABB(this,t)}Update(){this.fixed||(this.UpdatePosExpel(),this.UpdatePosContract(),this.UpdatePosInScreen(this.graph.graphSystem.CanvasCore.ctx))}UpdatePosExpel(){for(let t=0;t<this.listCollision.length;++t){let s=e.h9.Sub(this.vec,this.listCollision[t].vec),i=e.h9.Normalize(s);this.velocity=e.h9.Scale(i,Math.random()*this.graph.optiLevel),this.vec=e.h9.Add(this.vec,this.velocity)}}UpdatePosContract(){if(this.RectCloset){let t=e.h9.Sub(this.RectCloset.vec,this.vec),s=e.h9.Normalize(t);this.velocity=e.h9.Scale(s,.2*Math.random()),this.vec=e.h9.Add(this.vec,this.velocity)}}Render(t){this.hover?t.fillStyle="#0ff000":t.fillStyle="#ff0000",0===this.listCollision.length&&(t.fillStyle="#ff0000"),this.fixed&&(t.fillStyle="#000000"),t.strokeStyle="#000000",t.beginPath(),t.rect(this.vec.x-.5*this.width,this.vec.y-.5*this.height,this.width,this.height),t.closePath(),t.fill(),t.lineWidth=1,t.stroke()}UpdatePosInScreen(t){this.vec.y>.5*t.canvas.height-10&&(this.vec.y=.5*t.canvas.height-10),this.vec.x-.5*this.width-10<-(.5*t.canvas.width)+10&&(this.vec.x=-(.5*t.canvas.width)+10+.5*this.width+10),this.vec.x+.5*this.width+10>.5*t.canvas.width-10&&(this.vec.x=.5*t.canvas.width-10-.5*this.width-10)}constructor(t,s,i,h){this.listCollision=[],this.fixed=!1,this.hover=!1,this.graph=t,this.vec=new e.h9(s.x,s.y),this.width=i,this.height=h}}class g{Init(){this.m=new e.h9(0,0),this.particles=[],this.listRect=[];for(let t=0;t<2;++t)this.listRect.push(new m(this,new e.h9(-.5+Math.random(),-.5+Math.random()),20+20*Math.random(),5+10*Math.random()));let t=new m(this,new e.h9(-50,-50),50,50);t.fixed=!0,this.listRect.push(t),(t=new m(this,new e.h9(50,20),40,20)).fixed=!0,this.listRect.push(t),(t=new m(this,new e.h9(-30,30),20,30)).fixed=!0,this.listRect.push(t)}UpdateNumber(t){this.num=t,this.Init(),console.log(t,"num")}UpdateOffset(t){this.offset=t,console.log(t,"off")}UpdateOptiLevel(t){this.optiLevel=t,this.Init(),console.log(t,"opti")}MouseDown(t,s){for(let i=0;i<this.particles.length;++i)this.particles[i].IsMouseHover(t,s)&&(this.capture=this.particles[i],this.capture.isCaptured=!0)}MouseUp(){this.capture&&(this.capture.isCaptured=!1),this.capture=void 0}MouseLeftClick(t,s){this.particles.push(new u(this,t,s))}MouseMove(t,s){this.m.x=t,this.m.y=s}MouseDrag(t,s){this.capture&&(this.capture.pos.x=t,this.capture.pos.y=s)}Render(t){this.UpdateCollisionRect(),this.UpdateAtt(),this.UpdateCollision();for(let t=0;t<this.listRect.length;++t)this.listRect[t].Update();for(let s=0;s<this.listRect.length;++s)this.listRect[s].Render(t);(5&this.t)==0&&this.particles.length<10&&this.particles.push(new u(this,0,0)),this.t%10==0&&this.listRect.length<this.num&&(this.listRect.push(new m(this,new e.h9(-.5+Math.random(),-.5+Math.random()),20+20*Math.random(),5+10*Math.random())),this.graphSystem.CanvasCore.divConsole.innerHTML="1. clikc to reset! <br> ",this.graphSystem.CanvasCore.divConsole.innerHTML+="2. first slider for num of Nodes! <br> ",this.graphSystem.CanvasCore.divConsole.innerHTML+="3. second slider for offset! <br> ",this.graphSystem.CanvasCore.divConsole.innerHTML+="4. third slider for Opti level! <br> ",this.graphSystem.CanvasCore.divConsole.innerHTML+="* num of node: "+this.listRect.length),this.t+=1}UpdateAtt(){for(let t=0;t<this.listRect.length;++t){let s=this.listRect[t];s.RectCloset=void 0;for(let t=0;t<this.listRect.length;++t){let i=this.listRect[t],h=Number.MAX_SAFE_INTEGER,a=-1;if(s!==i){let o=e.h9.Distance(s.vec,i.vec);o<h&&(h=o,a=t)}a>0&&(s.RectCloset=this.listRect[a])}}}UpdateCollisionRect(){for(let t=0;t<this.listRect.length;++t){let s=this.listRect[t];s.listCollision=[];let i=!1;for(let t=0;t<this.listRect.length;++t){let e=this.listRect[t];s!==e&&m.AABBvsAABB(s,e,this.offset)&&(s.listCollision.push(e),i=!0)}s.hover=i}}UpdateCollision(){for(let t=0;t<this.particles.length;++t){let s=this.particles[t];s.listCollision=[];for(let t=0;t<this.particles.length;++t){let i=this.particles[t];s!==i&&s.pos.Distance(i.pos)<s.r+i.r&&s.listCollision.push(i)}}}constructor(t){this.particles=[],this.listRect=[],this.offset=1,this.optiLevel=3,this.t=1,this.num=50,this.capture=void 0,this.graphSystem=t,this.Init()}}class f{InitCanvas(){let t=document.createElement("div");if(!t)return;this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);let s=document.createElement("div");if(!s)return;this.divCanvas=s,this.divLocalMain.append(s);let i=document.createElement("canvas");if(i){this.canvas=i,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";let t=this.canvas.getContext("2d");t&&(this.ctx=t,this.InitUI(),this.Init())}}InitUI(){let t=document.createElement("div");if(!t)return;this.divUI=t,this.divLocalMain.append(t),this.divUI.style.marginLeft="10px",this.divUI.style.width="100%";let s=document.createElement("button");s.textContent="reset",s.onclick=()=>{this.graphSystem.InitGraph()},this.divUI.append(s);let i=document.createElement("input");i.oninput=()=>{let t=+i.value;this.graphSystem.graph.UpdateNumber(t)},i.type="range",i.min="10",i.max="200.0",i.value="50",this.divUI.append(i);let e=document.createElement("input");e.oninput=()=>{let t=+e.value;this.graphSystem.graph.UpdateOffset(t)},e.type="range",e.min="1",e.max="10.0",e.value="4",this.divUI.append(e);let h=document.createElement("input");h.oninput=()=>{let t=+h.value;this.graphSystem.graph.UpdateOptiLevel(t)},h.type="range",h.min="1",h.max="8",h.value="4",this.divUI.append(h),this.divConsole=document.createElement("p"),this.divConsole&&(this.divUI.append(this.divConsole),this.divConsole.style.width="max-content",this.divConsole.innerHTML="1. clikc to reset! <br> ",this.divConsole.innerHTML+="2. first slider for num of Nodes! <br> ",this.divConsole.innerHTML+="3. second slider for offset! <br> ",this.divConsole.innerHTML+="4. third slider for Opti level! <br> ",this.divConsole.innerHTML+="* num of node: ")}Init(){this.ctx.translate(.5*this.ctx.canvas.width,.5*this.ctx.canvas.height),this.ctx.scale(1,1),this.EventBind(),this.Loop()}EventBind(){this.canvas.onclick=t=>{this.prevent=!1,this.timer=setTimeout(()=>{if(!this.prevent){if(!this.click)return;this.MouseClick(t)}this.prevent=!1},this.delay)},this.canvas.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},this.canvas.addEventListener("wheel",t=>this.MouseWheel(t,t.deltaY)),this.canvas.onmousedown=t=>{this.click=!0,this.pressed=!0,this.MouseDown(t)},this.canvas.onmouseup=t=>{this.pressed=!1,this.MouseUp(t)},this.canvas.onmousemove=t=>{this.pressed&&(this.click=!1,this.MouseDrag(t)),this.MouseMove(t)},window.onresize=t=>this.Resize(t)}Resize(t){}Loop(){requestAnimationFrame(()=>{this.Loop()}),this.ctx.clearRect(-(.5*this.ctx.canvas.width),-(.5*this.ctx.canvas.height),this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(-(.5*this.ctx.canvas.width),-(.5*this.ctx.canvas.height),this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)}Render(t){}MouseClick(t){}MouseDoubleClick(t){}MouseDown(t){}MouseUp(t){}MouseMove(t){}MouseDrag(t){}MouseWheel(t,s){}constructor(t,s=400,i=250){this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.graphSystem=t,this.width=s,this.height=i;let e=document.getElementById(t.id);if(!e)return;this.host=e,this.InitCanvas()}}class C{Init(){this.CanvasCore.Render=t=>this.Render(t),this.CanvasCore.MouseDown=t=>this.MouseDown(t),this.CanvasCore.MouseClick=t=>this.MouseClick(t),this.CanvasCore.MouseDoubleClick=t=>this.MouseDoubleClick(t),this.CanvasCore.MouseUp=t=>this.MouseUp(t),this.CanvasCore.MouseMove=t=>this.MouseMove(t),this.CanvasCore.MouseDrag=t=>this.MouseDrag(t)}InitGraph(){this.graph=new g(this)}Render(t){this.graph.Render(t),t.fillStyle="rgba(255, 0, 0, 0.9)",t.beginPath(),t.arc(this.m.x,this.m.y,2.5,0,2*Math.PI),t.closePath(),t.fill()}Grid(t){for(let s=-10;s<10;++s)for(let i=-10;i<10;++i)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(s,i,.05,0,2*Math.PI),t.closePath(),t.fill()}mouseRemap(t){this.m.x=t.offsetX-.5*this.CanvasCore.canvas.width,this.m.y=t.offsetY-.5*this.CanvasCore.canvas.height}MouseDown(t){this.mouseRemap(t),this.graph.MouseDown(this.m.x,this.m.y)}MouseUp(t){this.mouseRemap(t),this.graph.MouseUp()}MouseMove(t){this.mouseRemap(t),this.graph.MouseMove(this.m.x,this.m.y)}MouseDrag(t){this.mouseRemap(t),this.graph.MouseDrag(this.m.x,this.m.y)}MouseClick(t){this.mouseRemap(t),this.graph.MouseLeftClick(this.m.x,this.m.y)}MouseDoubleClick(t){this.mouseRemap(t)}constructor(t){this.t=.9,this.m=new e.h9(0,0,0),this.id=t,this.CanvasCore=new f(this),this.Init(),this.InitGraph()}}class M{constructor(t){this.OptimizerRectPosAgentSystemA=new n(t),this.OptimizerRectPosAgentSystemB=new v(t),this.OptimizerRectPosAgentSystemC=new C(t),document.body.style.overflow="auto"}}class y{static Init(t){new y(t).Dummy()}Dummy(){}constructor(t="SandBox"){this.implementation=new M(t)}}class x{destroy(){try{for(;this.divHost&&this.divHost.lastElementChild;){let t=this.divHost.lastElementChild;this.divHost.removeChild(t)}}catch(t){console.error("Error removing child elements:",t)}}constructor(t,s=0){this.divHost=document.getElementById(t);let i=document.createElement("div");i.id="ngl3d",i.style.width="100%",i.style.height="100%",this.divHost.appendChild(i),y.Init(i.id)}}}}]);
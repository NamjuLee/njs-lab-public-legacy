"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40423,25704,86584,31376,79158,56122,20279,8738,36499,15904,78142,4636,48197,85945,10424,80626,22564,28673,93817,47379,89025,51104,72888,73893,29948,91223,36522,50513,99473],{25704:function(e,t,r){r.r(t),r.d(t,{Implementation:function(){return i}});class i{async InitProjects(){return Promise.all([r.e(98938),r.e(46498),r.e(58566),r.e(27425),r.e(76636),r.e(28663),r.e(66399),r.e(53591),r.e(45540),r.e(77720),r.e(26044),r.e(1616),r.e(56847),r.e(35507),r.e(52251)]).then(r.bind(r,52251)).then(e=>{let{TFProject:t}=e;this.tfProject=new t(this)}).catch(e=>{console.log("Stop loading NCanvas implementation, TFProject."),console.log(e)})}MouseEventController(e){this.tfProject&&this.tfProject.activeCommandController.MouseEventController(e)}Render(e){this.tfProject&&this.tfProject.Render(e)}RemoveAllScene(){this.tfProject&&this.tfProject.Dispose(),this.tfProject=void 0}ShiftScene(e){}LoadDefinition(e){this.tfProject&&this.tfProject.LoadDefinition(e)}constructor(e){this.app=e,this.InitProjects()}}},56122:function(e,t,r){r.r(t),r.d(t,{MouseEventData:function(){return o},MouseInteraction:function(){return n}});var i=r(99473);class o{DeepCopy(){let e=new o(this.model);return e.x=this.x,e.y=this.y,e.z=this.z,e.preX=this.preX,e.preY=this.preY,e.preZ=this.preZ,e.pressedAlt=this.pressedAlt,e.pressedShift=this.pressedShift,e.pressedCtrl=this.pressedCtrl,e.isDoubleClick=this.isDoubleClick,e.isDown=this.isDown,e.isMove=this.isMove,e.lat=this.lat,e.long=this.long,e.wheel=this.wheel,e.preWheel=this.preWheel,e.yGLPicking=this.yGLPicking,e.CLICK_TYPE=this.CLICK_TYPE,e.command=this.command,e.native=this.native,e}constructor(e){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.CLICK_TYPE=i.CLICK_TYPE.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.isActive=!0,null!=e&&(this.model=e)}}class n{InitNativeMouseEvent(e){e.onclick=e=>{this.prevent=!1,this.timer=setTimeout(()=>{this.prevent||this.MouseClick(e),this.prevent=!1},this.delay)},e.ondblclick=e=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(e)},e.onmousedown=e=>{this.MouseDown(e)},e.onmouseup=e=>{this.MouseUp(e)},e.onmousemove=e=>{this.MouseMove(e)},e.addEventListener("wheel",e=>this.MouseWheel(e,e.deltaY))}MouseDown(e){this.click=!0,this.down=!0;let t=this.CommonEventBuilder(e);t.CLICK_TYPE=i.CLICK_TYPE.DOWN,t.isDown=!0,this.MouseEvenEmitting(t)}MouseClick(e){if(!this.click)return;let t=this.CommonEventBuilder(e);0===e.button?t.CLICK_TYPE=i.CLICK_TYPE.LEFT:1===e.button?t.CLICK_TYPE=i.CLICK_TYPE.MIDDLE:2===e.button&&(t.CLICK_TYPE=i.CLICK_TYPE.RIGHT),this.MouseEvenEmitting(t)}MouseDoubleClick(e){let t=this.CommonEventBuilder(e);t.CLICK_TYPE=i.CLICK_TYPE.DOUBLE,this.MouseEvenEmitting(t)}MouseDrag(e){this.click=!1,this.prevent=!0;let t=this.CommonEventBuilder(e);t.CLICK_TYPE=i.CLICK_TYPE.DRAG,t.isDown=!0,1===e.buttons?t.CLICK_TYPE=i.CLICK_TYPE.DRAG:4===e.buttons?t.CLICK_TYPE=i.CLICK_TYPE.DRAG_MIDDLE:2===e.buttons&&(t.CLICK_TYPE=i.CLICK_TYPE.DRAG_RIGHT),this.MouseEvenEmitting(t)}MouseMove(e){if(this.down){this.MouseDrag(e);return}let t=this.CommonEventBuilder(e);t.CLICK_TYPE=i.CLICK_TYPE.MOVE,t.isDown=!0,this.prevent=!0,this.MouseEvenEmitting(t)}MouseUp(e){this.down=!1,this.click=!0;let t=this.CommonEventBuilder(e);t.CLICK_TYPE=i.CLICK_TYPE.UP,t.isDown=!1,this.MouseEvenEmitting(t)}MouseWheel(e,t){let r=this.CommonEventBuilder(e);r.wheel=t,r.CLICK_TYPE=i.CLICK_TYPE.WHEEL,this.MouseEvenEmitting(r)}CommonEventBuilder(e){let t=new o(this.model);return t.preX=this.mouseEventDataPre.x,t.preY=this.mouseEventDataPre.y,t.pressedShift=e.shiftKey,t.pressedAlt=e.altKey,t.pressedCtrl=e.ctrlKey,t.x=e.offsetX,t.y=e.offsetY,t.preWheel=this.mouseEventDataPre.wheel,t.wheel=0,t.native=e,this.mouseEventDataPre=t,this.e=t,t}get stopPropagation(){return this._stopPropagation}set stopPropagation(e){e?this._stopPropagation=e:setTimeout(()=>{this._stopPropagation=e},500)}MouseEvenEmitting(e){this.MouseEventEmittingForViewController(e),this._stopPropagation||this.MouseEventEmittingForModel(e)}MouseEventEmittingForViewController(e){this.mouseInteractionUI&&this.mouseInteractionUI.MouseInteractionMenu(e)}MouseEventEmittingForModel(e){e.model.controllerCoreWrapper.activeCommandController.MouseEventController(e)}constructor(e){this.mouseEventDataPre=new o,this.isEnable=!0,this.clickCount=0,this.click=!1,this.prevent=!1,this.delay=250,this.down=!1,this._stopPropagation=!1,this.model=e}}},79158:function(e,t,r){r.r(t),r.d(t,{IOWrapper:function(){return o}});var i=r(56122);class o{InitEventListener(e){this.mouseInteraction.InitNativeMouseEvent(e),this.Resize()}Resize(){window.addEventListener("resize",e=>this.ReSizeWindow(e))}ReSizeWindow(e){let t=this.appCoreWrapper.model.modelViewCoreWrapper.viewWrapper.divHost;this.appCoreWrapper.model.graphicsCoreWrapper.canvasWrapper.canvas.ResizeCanvas(t.clientWidth,t.clientHeight)}constructor(e){this.appCoreWrapper=e,this.mouseInteraction=new i.MouseInteraction(this.appCoreWrapper.model)}}},31376:function(e,t,r){r.r(t),r.d(t,{AppCoreWrapper:function(){return n}});var i=r(99473),o=r(79158);class n{constructor(e,t){this.model=e,this.appProperties=new i.AppProperties,this.browserUtility=new i.BrowserUtility,this.ioWrapper=new o.IOWrapper(this)}}},8738:function(e,t,r){r.r(t),r.d(t,{ActiveCommandController:function(){return o}});var i=r(99473);class o{MouseEventController(e){if(this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.MouseEventController(e),e.CLICK_TYPE===i.CLICK_TYPE.LEFT){this.MouseLeftClickPre(e);return}if(e.CLICK_TYPE===i.CLICK_TYPE.MIDDLE){this.MouseMiddleClickPre(e);return}if(e.CLICK_TYPE===i.CLICK_TYPE.DOWN_RIGHT){this.MouseRightClickPre(e);return}if(e.CLICK_TYPE===i.CLICK_TYPE.DOUBLE){this.MouseDoubleClickPre(e);return}if(e.CLICK_TYPE===i.CLICK_TYPE.MOVE){this.MouseMovePre(e);return}if(e.CLICK_TYPE===i.CLICK_TYPE.DRAG){this.MouseDragPre(e);return}if(e.CLICK_TYPE===i.CLICK_TYPE.DOWN){this.MouseDownPre(e);return}else if(e.CLICK_TYPE===i.CLICK_TYPE.WHEEL){this.MouseWheelPre(e);return}else if(e.CLICK_TYPE===i.CLICK_TYPE.UP){this.MouseUpPre(e);return}}MouseDown(e){}MouseDownPre(e){this.MouseDown(e)}MouseLeftClick(e){}MouseLeftClickPre(e){this.MouseLeftClick(e)}MouseMiddleClick(e){}MouseMiddleClickPre(e){this.MouseMiddleClick(e)}MouseRightClick(e){}MouseRightClickPre(e){this.MouseRightClick(e)}MouseUp(e){}MouseUpPre(e){this.MouseUp(e)}MouseDoubleClick(e){}MouseDoubleClickPre(e){this.MouseDoubleClick(e)}MouseMove(e){}MouseMovePre(e){this.MouseMove(e)}MouseDrag(e){}MouseDragPre(e){this.MouseDrag(e)}MouseWheel(e){}MouseWheelPre(e){this.MouseWheel(e)}ShfitScene(e){this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.ShiftScene(e),console.log(this)}RemoveScene(){this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.RemoveAllScene()}LoadDefinition(e){this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.LoadDefinition(e)}Test(){console.log(this.controllerCoreWrapper.model.graphicsCoreWrapper.sceneWrapper.ShiftScene)}constructor(e){this.controllerCoreWrapper=e}}},20279:function(e,t,r){r.r(t),r.d(t,{ControllerCoreWrapper:function(){return o}});var i=r(8738);class o{SetActiveCommand(e){}constructor(e){this.model=e,this.activeCommandController=new i.ActiveCommandController(this)}}},78142:function(e,t,r){r.r(t),r.d(t,{Canvas:function(){return i}});class i{InitCanvas(e){this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.zIndex="0",this.hostDiv=e,this.hostDiv.appendChild(this.canvas),this.canvas.id="CanvasRenderer",this.canvas.className="njslab-web-core-canvas-renderer",this.canvas.style.pointerEvents="none",this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.hostDiv.clientWidth,this.canvas.height=this.hostDiv.clientHeight}ResizeCanvas(e,t){this.canvas.width=e,this.canvas.height=t}constructor(e,t){this.canvasWrapper=e,this.hostDiv=t,this.InitCanvas(this.hostDiv)}}},15904:function(e,t,r){r.r(t),r.d(t,{CanvasWrapper:function(){return o}});var i=r(78142);class o{constructor(e){this.graphicsCoreWrapper=e,this.canvas=new i.Canvas(this,this.graphicsCoreWrapper.model.modelViewCoreWrapper.viewWrapper.div)}}},4636:function(e,t,r){r.r(t),r.d(t,{GeometryCoreWrapper:function(){return i}});class i{constructor(e){this.graphicsCoreWrapper=e}}},85945:function(e,t,r){r.r(t),r.d(t,{Renderer:function(){return o}});var i=r(99473);class o{Init(){this.ctx=this.rendererWrapper.graphicsCoreWrapper.canvasWrapper.canvas.ctx,this.deltatime=new i.Deltatime,this.Loop()}Loop(){this.isActive&&(requestAnimationFrame(()=>{this.Loop()}),this.OnRender())}OnRender(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.deltatime.UpdateFPS(),this.sceneWrapper&&this.sceneWrapper.Render(this.ctx)}Stop(){this.isActive=!1}constructor(e){this.isActive=!0,this.msLastFrame=0,this.msFpsLimit=30,this.rendererWrapper=e,this.Init()}}},48197:function(e,t,r){r.r(t),r.d(t,{RendererWrapper:function(){return o}});var i=r(85945);class o{constructor(e){this.graphicsCoreWrapper=e,this.renderer=new i.Renderer(this)}}},10424:function(e,t,r){r.r(t),r.d(t,{SceneWrapper:function(){return i}});class i{MouseEventController(e){this.graphicsCoreWrapper.model.app.implementation.MouseEventController(e)}Render(e){this.graphicsCoreWrapper.model.app.implementation.Render(e)}RemoveAllScene(){this.graphicsCoreWrapper.model.app.implementation.RemoveAllScene()}ShiftScene(e){this.graphicsCoreWrapper.model.app.implementation.ShiftScene(e)}LoadDefinition(e){this.graphicsCoreWrapper.model.app.implementation.LoadDefinition(e)}constructor(e){this.graphicsCoreWrapper=e,this.graphicsCoreWrapper.rendererWrapper.renderer.sceneWrapper=this}}},80626:function(e,t,r){r.r(t),r.d(t,{ThemeWrapper:function(){return i}});class i{constructor(e){this.graphicsCoreWrapper=e}}},36499:function(e,t,r){r.r(t),r.d(t,{GraphicsCoreWrapper:function(){return a}});var i=r(15904),o=r(4636),n=r(48197),s=r(80626),p=r(10424);class a{constructor(e){this.model=e,this.canvasWrapper=new i.CanvasWrapper(this),this.geometryCoreWrapper=new o.GeometryCoreWrapper(this),this.rendererWrapper=new n.RendererWrapper(this),this.themeWrapper=new s.ThemeWrapper(this),this.sceneWrapper=new p.SceneWrapper(this)}}},28673:function(e,t,r){r.r(t),r.d(t,{LogWrapper:function(){return i}});class i{constructor(e){this.modelViewCoreWrapper=e}}},93817:function(e,t,r){r.r(t),r.d(t,{UIWrapper:function(){return i}});class i{constructor(e){this.modelViewCoreWrapper=e}}},47379:function(e,t,r){r.r(t),r.d(t,{ViewWrapper:function(){return i}});class i{InitDiv(e,t,r){let i=document.createElement("div");i.style.position="absolute",this.div=document.createElement("div"),i.appendChild(this.div);let o=document.getElementById(e);o&&(this.divHost=o,this.divHost.parentNode&&this.divHost.appendChild(i)),this.div.id="NCanvas",this.div.style.width=this.divHost.clientWidth+"px",this.div.style.height=this.divHost.clientHeight+"px",this.div.style.zIndex="1"}AppendEvent(){window.addEventListener("resize",()=>{this.div.style.width=this.divHost.clientWidth+"px",this.div.style.height=this.divHost.clientHeight+"px"},!0)}constructor(e,t,r=100,i=100){this.modelViewCoreWrapper=e,this.InitDiv(t,r,i),this.AppendEvent()}}},22564:function(e,t,r){r.r(t),r.d(t,{ModelViewCoreWrapper:function(){return s}});var i=r(28673),o=r(93817),n=r(47379);class s{constructor(e,t,r=100,s=100){this.model=e,this.logWrapper=new i.LogWrapper(this),this.uiWrapper=new o.UIWrapper(this),this.viewWrapper=new n.ViewWrapper(this,t,r,s)}}},86584:function(e,t,r){r.r(t),r.d(t,{Model:function(){return p}});var i=r(31376),o=r(20279),n=r(36499),s=r(22564);class p{Init(){this.appCoreWrapper.ioWrapper.InitEventListener(this.modelViewCoreWrapper.viewWrapper.div)}Restart(){console.log("re start!!")}Destroy(){this.graphicsCoreWrapper.rendererWrapper.renderer.isActive=!1}Resize(e,t){this.graphicsCoreWrapper.canvasWrapper.canvas.ResizeCanvas(e,t),this.modelViewCoreWrapper.viewWrapper.div.style.width=e+"px",this.modelViewCoreWrapper.viewWrapper.div.style.height=t+"px"}constructor(e,t){this.app=e,this.appCoreWrapper=new i.AppCoreWrapper(this,t),this.modelViewCoreWrapper=new s.ModelViewCoreWrapper(this,t),this.controllerCoreWrapper=new o.ControllerCoreWrapper(this),this.graphicsCoreWrapper=new n.GraphicsCoreWrapper(this),this.Init()}}},51104:function(e,t,r){r.r(t),r.d(t,{NUIWrapper:function(){return o}});var i=r(99473);class o{BindingActiveCommandController(){this.NUI.BindingActiveCommandController("NTF",this.viewController.app.model.controllerCoreWrapper.activeCommandController)}Resize(e,t){this.NUI.Resize(e,t)}Destroy(){this.NUI.Destroy()}constructor(e,t){this.viewController=e,console.log("NUIWrapper"),this.NUI=new i.NUI(this.viewController.app.model.modelViewCoreWrapper.viewWrapper.div,t),console.log(this.NUI),this.BindingActiveCommandController(),console.log("done bind")}}},29948:function(e,t,r){r.r(t),r.d(t,{EventInteraction:function(){return i}});class i{MouseInteractionMenu(e){this.viewIO.viewAppCoreWrapper.viewController.NUIWrapper.NUI.MouseInteractionMenu(e)}set stopPropagation(e){this.viewIO.viewAppCoreWrapper.viewController.app.model.appCoreWrapper.ioWrapper.mouseInteraction.stopPropagation=e,this._propagation=e}get stopPropagation(){return this._propagation}constructor(e){this._propagation=!1,this.viewIO=e,this.viewIO.viewAppCoreWrapper.viewController.app.model.appCoreWrapper.ioWrapper.mouseInteraction.mouseInteractionUI=this}}},73893:function(e,t,r){r.r(t),r.d(t,{ViewIOWrapper:function(){return o}});var i=r(29948);class o{constructor(e){this.viewAppCoreWrapper=e,this.eventInteraction=new i.EventInteraction(this)}}},16679:function(e,t,r){r.r(t),r.d(t,{ViewAppCoreWrapper:function(){return o}});var i=r(73893);class o{constructor(e){this.viewController=e,this.viewIOWrapper=new i.ViewIOWrapper(this)}}},91223:function(e,t,r){r.r(t),r.d(t,{ViewAssetWrapper:function(){return i}});class i{constructor(e){this.viewController=e}}},50513:function(e,t,r){r.r(t),r.d(t,{ViewActiveCommand:function(){return i}});class i{Resize(e,t){this.viewControllerWrapper.viewController.NUIWrapper.Resize(e,t)}constructor(e){this.viewControllerWrapper=e}}},36522:function(e,t,r){r.r(t),r.d(t,{ViewControllerWrapper:function(){return o}});var i=r(50513);class o{constructor(e){this.viewController=e,this.viewActiveCommandController=new i.ViewActiveCommand(this)}}},89025:function(e,t,r){r.r(t),r.d(t,{ViewController:function(){return p}});var i=r(16679),o=r(91223),n=r(36522),s=r(51104);class p{Resize(e,t){this.viewControllerWrapper.viewActiveCommandController.Resize(e,t)}Destroy(){this.NUIWrapper.Destroy()}constructor(e,t){this.app=e,this.viewAssetWrapper=new o.ViewAssetWrapper(this),this.viewAppCoreWrapper=new i.ViewAppCoreWrapper(this),this.viewControllerWrapper=new n.ViewControllerWrapper(this),console.log("00"),this.NUIWrapper=new s.NUIWrapper(this,t),console.log("10")}}},40423:function(e,t,r){r.r(t),r.d(t,{AppTFEnv:function(){return s},Solution:function(){return p}});var i=r(86584),o=r(25704),n=r(89025);class s{static InitSubApp(e,t){let r=new s(e,!1);console.log("done!!"),r.implementation.InitProjects().then(()=>{r.implementation.tfProject.LoadDefinition(t)})}static Init(e){new s(e)}constructor(e,t=!0){this.needUI=!1,this.needUI=t;let r=document.getElementById(e);r&&(this.divHost=r),this.model=new i.Model(this,e),console.log("1!!"),this.implementation=new o.Implementation(this),console.log("2!!"),this.viewController=new n.ViewController(this,t),console.log("3!!")}}class p{destroy(){try{for(;this.divHost&&this.divHost.lastElementChild;){let e=this.divHost.lastElementChild;this.divHost.removeChild(e)}}catch(e){console.debug(e)}}constructor(e,t=""){this.divHost=document.getElementById(e);let r=document.createElement("div");r.id="tf-ground",r.style.width="100%",r.style.height="100%",this.divHost.appendChild(r),t.length>0?s.InitSubApp(r.id,t):s.Init(r.id)}}},99473:function(e,t,r){r.r(t),r.d(t,{ACTION_TYPE:function(){return i.KW},ACTIVECOMMAND_MODE:function(){return i.AG},ActiveCommandBase:function(){return i.wm},AppAccessibility:function(){return i.Wv},AppProperties:function(){return i.gj},ArrayUtility:function(){return i.R3},BrowserUtility:function(){return i.R7},CLICK_TYPE:function(){return i.uh},CLOGTYPE:function(){return i.g6},COMPILE_MODE:function(){return i.Iq},ColorUtility:function(){return i.mK},Deltatime:function(){return i.gk},EVENT_LISTENER_TYPE:function(){return i.GZ},FHTYPE:function(){return i.OH},GTYPE:function(){return i.OB},GeometryBase:function(){return i.bx},INTERACTION_MODE:function(){return i.WU},LINECAP:function(){return i.EQ},MathUtility:function(){return i.$H},NDataUtility:function(){return i.eu},NUI:function(){return i.Fc},NVector3:function(){return i.h9},NumericalMotion:function(){return i.aX},OPTIMIZER:function(){return i.sg},PRESS_TYPE:function(){return i.dc},TEXTALIGN:function(){return i.mH},TEXTBOX:function(){return i.SE},TOUCH_TYPE:function(){return i.KV},UNIT:function(){return i.iI}});var i=r(8483)}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97592],{97592:function(t,r,e){var a,i;e.r(r),e.d(r,{ATTR:function(){return a},AttribLocations:function(){return o},Shader:function(){return s},UniformLocations:function(){return n}}),(i=a||(a={})).ATTR_POSITION_NAME="a_position",i[i.ATTR_POSITION_LOC=0]="ATTR_POSITION_LOC",i.ATTR_NORMAL_NAME="a_norm",i[i.ATTR_NORMAL_LOC=1]="ATTR_NORMAL_LOC",i.ATTR_UV_NAME="a_uv",i[i.ATTR_UV_LOC=2]="ATTR_UV_LOC",i.ATTR_COLOR_NAME="a_color",i[i.ATTR_COLOR_LOC=4]="ATTR_COLOR_LOC";class o{constructor(t,r){this.position=t.getAttribLocation(r,"a_position"),this.norm=t.getAttribLocation(r,"a_norm"),this.uv=t.getAttribLocation(r,"a_uv")}}class n{constructor(t,r){this.perspective=t.getUniformLocation(r,"uPMatrix"),this.modelMatrix=t.getUniformLocation(r,"uMVMatrix"),this.cameraMatrix=t.getUniformLocation(r,"uCameraMatrix"),this.mainTexture=t.getUniformLocation(r,"uMainTex")}}class s{activate(){return this.gl.useProgram(this.program),this}deactivate(){return this.gl.useProgram(null),this}dispose(){this.gl.getParameter(this.gl.CURRENT_PROGRAM)===this.program&&this.gl.useProgram(null),this.gl.deleteProgram(this.program)}setPerspective(t){return this.gl.uniformMatrix4fv(this.uniformLoc.perspective,!1,t),this}setModelMatrix(t){return this.gl.uniformMatrix4fv(this.uniformLoc.modelMatrix,!1,t),this}setCameraMatrix(t){return this.gl.uniformMatrix4fv(this.uniformLoc.cameraMatrix,!1,t),this}preRender(){}renderModel(t){return this.setModelMatrix(t.transform.getViewMatrix()),this.gl.bindVertexArray(t.vao.vao),t.vao.noCulling&&this.gl.disable(this.gl.CULL_FACE),t.vao.doBlending&&this.gl.enable(this.gl.BLEND),t.vao.indexCount?this.gl.drawElements(t.vao.drawMode,t.vao.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(t.vao.drawMode,0,t.vao.vertexCount),this.gl.bindVertexArray(null),t.vao.noCulling&&this.gl.enable(this.gl.CULL_FACE),t.vao.doBlending&&this.gl.disable(this.gl.BLEND),this}constructor(t,r,e,a=!0){if(this.gl=t,this.vShader=l.CreateShader(t,t.VERTEX_SHADER,r),this.fShader=l.CreateShader(t,t.FRAGMENT_SHADER,e),this.vShader&&this.fShader){let r=l.CreateProgram(t,this.vShader,this.fShader,a);if(r){this.program=r,t.useProgram(this.program),this.attribLoc=new o(t,this.program),this.uniformLoc=new n(t,this.program);return}}}}class l{static CreateProgram(t,r,e){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=t.createProgram();return null===i?null:(t.attachShader(i,r),t.attachShader(i,e),t.bindAttribLocation(i,0,"a_position"),t.bindAttribLocation(i,1,"a_norm"),t.bindAttribLocation(i,2,"a_uv"),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))?a&&(t.validateProgram(i),!t.getProgramParameter(i,t.VALIDATE_STATUS))?(console.error("Failed to validate program",t.getProgramInfoLog(i)),t.deleteProgram(i),t.deleteShader(e),t.deleteShader(r),null):(t.deleteShader(e),t.deleteShader(r),i):(console.log("Failed to link program: "+t.getProgramInfoLog(i)),t.deleteProgram(i),t.deleteShader(e),t.deleteShader(r),null)}static CreateShader(t,r,e){let a=t.createShader(r);return null===a?null:(t.shaderSource(a,e),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS))?a:(console.log(t.getShaderInfoLog(a)),t.deleteShader(a),null)}}}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10528],{42110:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var n=r(86641),i=r(54748),s=r(94605),o=r(65223),a=r(13507),l=r(28541),u=r(31124),p=r(89312);r(37180),r(3457);var f=r(64186),c=r(60964),m=r(82955),d=r(4658),y=r(9377),h=r(36502),x=r(40011),v=r(37109),g=r(7548),_=r(53002),b=r(12261),E=r(59727),S=r(15346),w=r(89973),I=r(78298),j=r(1326);let C=class extends(0,_.Y)((0,E.q)((0,S.I)((0,w.M)((0,l.R)((0,b.N)((0,g.V)(v.Z))))))){constructor(e){super(e),this.operationalLayerType="IntegratedMesh3DTilesLayer",this.spatialReference=new h.Z({wkid:4326,vcsWkid:115700}),this.fullExtent=new y.Z(-180,-90,180,90,this.spatialReference),this.url=null,this.type="integrated-mesh-3dtiles",this.path=null,this.minScale=0,this.maxScale=0}set elevationInfo(e){this._set("elevationInfo",e),this._validateElevationInfo()}_verifyArray(e,t){if(!Array.isArray(e)||e.length<t)return!1;for(let t of e)if("number"!=typeof t)return!1;return!0}_initFullExtent(e){let t=e.root?.boundingVolume;if(!t)return;if(t.box){let e=t?.box;if(e[3]>7972671&&e[7]>7972671&&e[11]>7945940)return}let r=e.root?.transform,n=(0,m.Ue)();if(t.region&&this._verifyArray(t.region,6)){let e=t.region,r=(0,a.BV)(e[0]),n=(0,a.BV)(e[1]),i=e[4],s=(0,a.BV)(e[2]),o=(0,a.BV)(e[3]),l=e[5];this.fullExtent=new y.Z({xmin:r,ymin:n,zmin:i,xmax:s,ymax:o,zmax:l,spatialReference:this.spatialReference})}else if(t.sphere&&this._verifyArray(t.sphere,4)){let e=t.sphere,i=(0,m.al)(e[0],e[1],e[2]),s=e[3]/Math.sqrt(3),o=(0,m.Ue)();(0,c.f)(o,i,(0,m.al)(s,s,s));let a=(0,m.Ue)();(0,c.g)(a,i,(0,m.al)(s,s,s)),r&&this._verifyArray(r,16)&&((0,c.h)(n,o,r),(0,c.c)(o,n),(0,c.h)(n,a,r),(0,c.c)(a,n)),(0,x.projectBuffer)(o,d.pn,0,o,h.Z.WGS84,0,1),(0,x.projectBuffer)(a,d.pn,0,a,h.Z.WGS84,0,1);let l=(0,m.Ue)(),u=(0,m.Ue)();(0,c.y)(l,o,a),(0,c.C)(u,o,a),this.fullExtent=new y.Z({xmin:l[0],ymin:l[1],zmin:l[2],xmax:u[0],ymax:u[1],zmax:u[2],spatialReference:this.spatialReference})}else if(t.box&&this._verifyArray(t.box,12)){let e=t.box,n=(0,m.al)(e[0],e[1],e[2]),i=(0,m.al)(e[3],e[4],e[5]),s=(0,m.al)(e[6],e[7],e[8]),o=(0,m.al)(e[9],e[10],e[11]),a=[];for(let e=0;e<8;++e)a.push((0,m.Ue)());if((0,c.g)(a[0],n,i),(0,c.g)(a[0],a[0],s),(0,c.g)(a[0],a[0],o),(0,c.z)(a[1],n,i),(0,c.g)(a[1],a[1],s),(0,c.g)(a[1],a[1],o),(0,c.g)(a[2],n,i),(0,c.z)(a[2],a[2],s),(0,c.g)(a[2],a[2],o),(0,c.z)(a[3],n,i),(0,c.z)(a[3],a[3],s),(0,c.g)(a[3],a[3],o),(0,c.g)(a[4],n,i),(0,c.g)(a[4],a[4],s),(0,c.z)(a[4],a[4],o),(0,c.z)(a[5],n,i),(0,c.g)(a[5],a[5],s),(0,c.z)(a[5],a[5],o),(0,c.g)(a[6],n,i),(0,c.z)(a[6],a[6],s),(0,c.z)(a[6],a[6],o),(0,c.z)(a[7],n,i),(0,c.z)(a[7],a[7],s),(0,c.z)(a[7],a[7],o),r&&this._verifyArray(r,16))for(let e=0;e<8;++e)(0,c.h)(a[e],a[e],r);let l=(0,m.al)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),u=(0,m.al)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let e=0;e<8;++e)(0,x.projectBuffer)(a[e],d.pn,0,a[e],h.Z.WGS84,0,1),(0,c.y)(u,u,a[e]),(0,c.C)(l,l,a[e]);this.fullExtent=new y.Z({xmin:u[0],ymin:u[1],zmin:u[2],xmax:l[0],ymax:l[1],zmax:l[2],spatialReference:this.spatialReference})}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){let t=null!=e?e.signal:null;try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:e=>{if(e.typeKeywords?.includes("IntegratedMesh"))return!0;throw new s.Z("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},e)}catch(e){(0,u.r9)(e)}if(this.url){let e=(0,i.Z)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{this._initFullExtent(e.data)},e=>{(0,u.r9)(e)});await e}}async fetchAttributionData(){return this.load().then(()=>({}))}_validateElevationInfo(){let e=this.elevationInfo,t="Integrated mesh 3d tiles layers";(0,j.LR)(o.Z.getLogger(this),(0,j.Uy)(t,"absolute-height",e)),(0,j.LR)(o.Z.getLogger(this),(0,j.kf)(t,e))}};(0,n._)([(0,p.Cb)({type:["IntegratedMesh3DTilesLayer"]})],C.prototype,"operationalLayerType",void 0),(0,n._)([(0,p.Cb)({type:h.Z})],C.prototype,"spatialReference",void 0),(0,n._)([(0,p.Cb)({type:y.Z})],C.prototype,"fullExtent",void 0),(0,n._)([(0,p.Cb)(I.PV)],C.prototype,"elevationInfo",null),(0,n._)([(0,p.Cb)({type:["show","hide"]})],C.prototype,"listMode",void 0),(0,n._)([(0,p.Cb)(I.HQ)],C.prototype,"url",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],C.prototype,"type",void 0),(0,n._)([(0,p.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],C.prototype,"path",void 0),(0,n._)([(0,p.Cb)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],C.prototype,"minScale",void 0),(0,n._)([(0,p.Cb)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],C.prototype,"maxScale",void 0);let A=C=(0,n._)([(0,f.j)("esri.layers.IntegratedMesh3DTilesLayer")],C)},7548:function(e,t,r){r.d(t,{V:function(){return o}});var n=r(86641),i=r(89312);r(37180),r(65223),r(3457);var s=r(64186);let o=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,n._)([(0,i.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,n._)([(0,s.j)("esri.layers.mixins.APIKeyMixin")],t)}},12261:function(e,t,r){r.d(t,{N:function(){return o}});var n=r(86641),i=r(89312);r(37180),r(65223),r(3457);var s=r(64186);let o=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,n._)([(0,i.Cb)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,n._)([(0,s.j)("esri.layers.mixins.CustomParametersMixin")],t)}},89973:function(e,t,r){r.d(t,{M:function(){return o}});var n=r(86641),i=r(89312);r(37180),r(65223),r(3457);var s=r(64186);let o=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){var e;let t={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&(e=r.effectiveScaleRange,t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale);let n=this._get("effectiveScaleRange");return n&&n.minScale===t.minScale&&n.maxScale===t.maxScale?n:t}};return(0,n._)([(0,i.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,n._)([(0,i.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,n._)([(0,i.Cb)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,n._)([(0,s.j)("esri.layers.mixins.ScaleRangeLayer")],t)}},49078:function(e,t,r){r.d(t,{a:function(){return s}});var n=r(9266),i=r(9397);let s={unknown:1,inches:(0,n.En)(1,"meters","inches"),feet:(0,n.En)(1,"meters","feet"),"us-feet":(0,n.En)(1,"meters","us-feet"),yards:(0,n.En)(1,"meters","yards"),miles:(0,n.En)(1,"meters","miles"),"nautical-miles":(0,n.En)(1,"meters","nautical-miles"),millimeters:(0,n.En)(1,"meters","millimeters"),centimeters:(0,n.En)(1,"meters","centimeters"),decimeters:(0,n.En)(1,"meters","decimeters"),meters:(0,n.En)(1,"meters","meters"),kilometers:(0,n.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,n.ty)(1,"meters",i.sv.radius)}},1326:function(e,t,r){r.d(t,{LR:function(){return l},Uy:function(){return s},VW:function(){return i},Wb:function(){return o},fm:function(){return u},kf:function(){return a}}),r(9266);var n=r(65321);function i(e,t){var r;return r=null!=e&&e.hasZ,t?.mode?t.mode:(r?p:f).mode}function s(e,t,r){return r&&r.mode!==t?`${e} only support ${t} elevation mode`:null}function o(e,t,r){return r?.mode===t?`${e} do not support ${t} elevation mode`:null}function a(e,t){return null!=t?.featureExpressionInfo&&"0"!==t.featureExpressionInfo.expression?`${e} do not support featureExpressionInfo`:null}function l(e,t){t&&e.warn(".elevationInfo=",t)}function u(e){return(e?.offset??0)*(0,n.Z7)(e?.unit)}let p={mode:"absolute-height"},f={mode:"on-the-ground"}},81961:function(e,t,r){r.d(t,{Z:function(){return _}});var n,i,s=r(86641),o=r(740),a=r(689),l=r(36152),u=r(89312);r(37180),r(65223),r(3457);var p=r(37647),f=r(64186),c=r(50713),m=r(67009);let d=n=class extends a.wq{constructor(e){super(e)}async collectRequiredFields(e,t){return(0,m.io)(e,t,this.expression)}clone(){return new n({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],d.prototype,"expression",void 0),(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],d.prototype,"title",void 0);let y=d=n=(0,s._)([(0,f.j)("esri.symbols.support.FeatureExpressionInfo")],d);var h=r(65321);let x=(0,o.w)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),v=new o.X({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),g=i=class extends a.wq{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,r,n){t[r]=e.write({},n),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){let{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):null!=e||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new i({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&(0,l._W)(this.featureExpressionInfo,e.featureExpressionInfo)}};(0,s._)([(0,u.Cb)({type:y,json:{write:!0}})],g.prototype,"featureExpressionInfo",void 0),(0,s._)([(0,p.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],g.prototype,"readFeatureExpressionInfo",null),(0,s._)([(0,c.c)("featureExpressionInfo",{featureExpressionInfo:{type:y},"featureExpression.value":{type:[0]}})],g.prototype,"writeFeatureExpressionInfo",null),(0,s._)([(0,u.Cb)({type:x.apiValues,nonNullable:!0,json:{type:x.jsonValues,read:x.read,write:{writer:x.write,isRequired:!0}}})],g.prototype,"mode",null),(0,s._)([(0,u.Cb)({type:Number,json:{write:!0}})],g.prototype,"offset",void 0),(0,s._)([(0,u.Cb)({type:h.f9,json:{type:String,read:v.read,write:v.write}})],g.prototype,"unit",null);let _=g=i=(0,s._)([(0,f.j)("esri.symbols.support.ElevationInfo")],g)},65321:function(e,t,r){r.d(t,{Z7:function(){return i},f9:function(){return s}});var n=r(49078);function i(e){return 1/(n.a[e]||1)}let s=function(){let e=Object.keys(n.a);return e.sort(),e}()}}]);
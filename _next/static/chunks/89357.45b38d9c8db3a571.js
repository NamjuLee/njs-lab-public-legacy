"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89357],{26052:function(t,e,i){i.d(e,{Z:function(){return r}});class r{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){let e=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,e}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;let t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}peekLast(){return 0===this.size?null:this._buffer[(this._start+(this.size-1))%this.maxSize]}find(t){if(0===this.size)return null;for(let e of this._buffer)if(null!=e&&t(e))return e;return null}clear(t){let e=this.dequeue();for(;null!=e;)t&&t(e),e=this.dequeue()}}},97177:function(t,e,i){i.d(e,{Z:function(){return u}});var r,s,n=i(37180),o=i(5574);(r=s||(s={}))[r.varint=0]="varint",r[r.fixed64=1]="fixed64",r[r.delimited=2]="delimited",r[r.fixed32=5]="fixed32",r[r.unknown=99]="unknown";let a=new TextDecoder("utf-8"),l=(0,n.Z)("safari")||(0,n.Z)("ios")?6:(0,n.Z)("ff")?12:32;class u{constructor(t,e,i=0,r=t?t.byteLength:0){this._tag=0,this._dataType=s.unknown,this._init(t,e,i,r)}_init(t,e,i,r){this._data=t,this._dataView=e,this._pos=i,this._end=r}asUnsafe(){return this}clone(){return new u(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;let e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;let t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return t;throw Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){let t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){let t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){let t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+4294967296*t.getUint32(e+4,!0);return this._skip(8),i}getSFixed64(){let t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+4294967296*t.getInt32(e+4,!0);return this._skip(8),i}getDouble(){let t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){let t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){let t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){let t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){let t=this._getLength(),e=this._pos,i=this._toString(this._data,e,e+t);return this._skip(t),i}getBytes(){let t=this._getLength(),e=this._pos,i=this._toBytes(this._data,e,e+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,i,r){let s=this.getMessage(),n=t(s,e,i,r);return s.release(),n}processMessage(t){let e=this.getMessage(),i=t(e);return e.release(),i}getMessage(){let t=this._getLength(),e=u.pool.acquire();return e._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){u.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case s.varint:this._decodeVarint();break;case s.fixed64:this._skip(8);break;case s.delimited:this._skip(this._getLength());break;case s.fixed32:this._skip(4);break;default:throw Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){let t=this._data,e=this._pos,i=0,r=0;if(this._end-e>=10)do{if(i|=127&(r=t[e++]),!(128&r)||(i|=(127&(r=t[e++]))<<7,!(128&r))||(i|=(127&(r=t[e++]))<<14,!(128&r))||(i|=(127&(r=t[e++]))<<21,!(128&r))||(i+=268435456*(127&(r=t[e++])),!(128&r))||(i+=34359738368*(127&(r=t[e++])),!(128&r))||(i+=4398046511104*(127&(r=t[e++])),!(128&r))||(i+=562949953421312*(127&(r=t[e++])),!(128&r))||(i+=72057594037927940*(127&(r=t[e++])),!(128&r))||(i+=0x7fffffffffffffff*(127&(r=t[e++])),!(128&r)))break;throw Error("Varint too long!")}while(0);else{let s=1;for(;e!==this._end&&128&(r=t[e]);)++e,i+=(127&r)*s,s*=128;if(e===this._end)throw Error("Varint overrun!");++e,i+=r*s}return this._pos=e,i}_decodeSVarint(){let t=this._data,e,i=0,r=0,s=1&t[this._pos];if(i|=127&(r=t[this._pos++]),!(128&r)||(i|=(127&(r=t[this._pos++]))<<7,!(128&r))||(i|=(127&(r=t[this._pos++]))<<14,!(128&r))||(i|=(127&(r=t[this._pos++]))<<21,!(128&r))||(i+=268435456*(127&(r=t[this._pos++])),!(128&r))||(i+=34359738368*(127&(r=t[this._pos++])),!(128&r))||(i+=4398046511104*(127&(r=t[this._pos++])),!(128&r)))return s?-(i+1)/2:i/2;if(e=BigInt(i)+562949953421312n*BigInt(127&(r=t[this._pos++])),!(128&r)||(e+=0x100000000000000n*BigInt(127&(r=t[this._pos++])),!(128&r))||(e+=0x8000000000000000n*BigInt(127&(r=t[this._pos++])),!(128&r)))return Number(s?-(e+1n)/2n:e/2n);throw Error("Varint too long!")}_getLength(){if(this._dataType!==s.delimited)throw Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,i){if((i=Math.min(this._end,i))-e>l){let r=t.subarray(e,i);return a.decode(r)}let r="",s="";for(let n=e;n<i;++n){let e=t[n];128&e?s+="%"+e.toString(16):(r+=decodeURIComponent(s)+String.fromCharCode(e),s="")}return s.length&&(r+=decodeURIComponent(s)),r}_toBytes(t,e,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,e,i-e)}}u.pool=new o.Z(u,void 0,t=>{t._data=null,t._dataView=null})},51e3:function(t,e,i){i.d(e,{b:function(){return u},j:function(){return a}});var r=i(99547),s=i(37180);let n=null,o=null;async function a(){return n||(n=l()),n}async function l(){let t=(0,s.Z)("esri-csp-restrictions")?await Promise.all([i.e(21372),i.e(2155)]).then(i.bind(i,21372)).then(t=>t.l):await i.e(59815).then(i.bind(i,59815)).then(t=>t.l);o=await t.default({locateFile:t=>(0,r.V)(`esri/core/libs/libtess/${t}`)})}function u(t,e){let i=Math.max(t.length,128e3);return o.triangulate(t,e,i)}},67374:function(t,e,i){i.d(e,{j:function(){return u}});var r=i(60612),s=i(22166),n=i(63353),o=i(87919),a=i(43335);let l=96/72;class u{static executeEffects(t,e,i,r){let s=(0,a.Tg)(t),u=new n.z(e);for(let e of t){let t=(0,o.h)(e);t&&(u=t.execute(u,e,l,i,r,s))}return u}static applyEffects(t,e,i){if(!t)return e;let l=(0,a.Tg)(t),u,c=new n.z(r.z.fromJSONCIM(e));for(let e of t){let t=(0,o.h)(e);t&&(c=t.execute(c,e,1,null,i,l))}let h=[],p=null;for(;u=c.next();)h.push(...(0,s.M)(u)),p=u.geometryType;return 0===h.length||null===p?null:"esriGeometryPolygon"===p?{rings:h}:{paths:h}}}},85356:function(t,e,i){i.d(e,{i:function(){return s}});var r=i(87919);class s{static getPlacement(t,e,i,s,n,o){let a=(0,r.W)(i);return a?(-1===e&&t.invertY(),a.execute(t,i,s,n,o)):null}}},2244:function(t,e,i){i.d(e,{z:function(){return f}});var r=i(50758),s=i(36091);function n(t,e){return t.x===e.x&&t.y===e.y}function o(t,e){return t.x=e.y,t.y=-e.x,t}function a(t,e){return t.x=-e.y,t.y=e.x,t}function l(t,e){return t.x=e.x,t.y=e.y,t}function u(t,e){return t.x=-e.x,t.y=-e.y,t}function c(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function h(t,e){return t.x*e.x+t.y*e.y}function p(t,e,i,r){return t.x=e.x*i+e.y*r,t.y=e.x*r-e.y*i,t}class f{constructor(t,e,i){this._writeVertex=t,this._writeTriangle=e,this._canUseThinTessellation=i,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(t,e,i=this._canUseThinTessellation){(function(t){if(!t)return;let e=t.length;if(e<=1)return;let i=0;for(let r=1;r<e;r++)n(t[r],t[i])||++i===r||(t[i]=t[r]);t.length=i+1})(t),i&&e.halfWidth<s.do&&!e.offset?this._tessellateThin(t,e):this._tessellate(t,e)}_tessellateThin(t,e){if(t.length<2)return;let i=e.wrapDistance||65535,r=e.initialDistance||0,s=!1,n=t[0].x,o=t[0].y,a=t.length;for(let e=1;e<a;++e){s&&(s=!1,r=0);let a=t[e].x,l=t[e].y,u=a-n,c=l-o,h=Math.sqrt(u*u+c*c);if(u/=h,c/=h,r+h>i){s=!0;let t=(i-r)/h;h=i-r,a=(1-t)*n+t*a,l=(1-t)*o+t*l,--e}let p=this._writeVertex(n,o,0,0,u,c,c,-u,0,-1,r),f=this._writeVertex(n,o,0,0,u,c,-c,u,0,1,r);r+=h;let d=this._writeVertex(a,l,0,0,u,c,c,-u,0,-1,r),x=this._writeVertex(a,l,0,0,u,c,-c,u,0,1,r);this._writeTriangle(p,f,d),this._writeTriangle(f,d,x),n=a,o=l}}_tessellate(t,e){let i,s;let f=t[0],d=t[t.length-1],x=n(f,d);if(t.length<(x?3:2))return;let _=e.pixelCoordRatio,y=null!=e.capType?e.capType:r.RL.BUTT,m=null!=e.joinType?e.joinType:r.AH.MITER,g=null!=e.miterLimit?Math.min(e.miterLimit,4):2,k=null!=e.roundLimit?Math.min(e.roundLimit,1.05):1.05,v=null!=e.halfWidth?e.halfWidth:2,w=!!e.textured,b,T,S,P=null,E=this._prevNormal,M=this._nextNormal,N=-1,F=-1,I=this._joinNormal,A=this._textureNormalLeft,z=this._textureNormalRight,L=this._textureNormal,B=-1,R=-1,D=e.wrapDistance||65535,G=e.initialDistance||0,V=this._writeVertex,U=this._writeTriangle,Y=(t,e,r,n,o,a)=>{let l=V(T,S,i,s,r,n,t,e,o,a,G);return B>=0&&R>=0&&l>=0&&U(B,R,l),B=R,R=l,l};x&&(b=t[t.length-2],M.x=d.x-b.x,M.y=d.y-b.y,F=c(M),M.x/=F,M.y/=F);let W=!1;for(let e=0;e<t.length;++e){if(W&&(W=!1,G=0),b&&(E.x=-M.x,E.y=-M.y,G+(N=F)>D&&(W=!0)),W){let i=(D-G)/N;N=D-G,b={x:(1-i)*b.x+i*t[e].x,y:(1-i)*b.y+i*t[e].y},--e}else b=t[e];T=b.x,S=b.y;let n=e<=0&&!W,f=e===t.length-1;if(n||(G+=N),(P=f?x?t[1]:null:t[e+1])?(M.x=P.x-T,M.y=P.y-S,F=c(M),M.x/=F,M.y/=F):(M.x=void 0,M.y=void 0),!x){if(n){a(I,M),i=I.x,s=I.y,y===r.RL.SQUARE&&(Y(-M.y-M.x,M.x-M.y,M.x,M.y,0,-1),Y(M.y-M.x,-M.x-M.y,M.x,M.y,0,1)),y===r.RL.ROUND&&(Y(-M.y-M.x,M.x-M.y,M.x,M.y,-1,-1),Y(M.y-M.x,-M.x-M.y,M.x,M.y,-1,1)),y!==r.RL.ROUND&&y!==r.RL.BUTT||(Y(-M.y,M.x,M.x,M.y,0,-1),Y(M.y,-M.x,M.x,M.y,0,1));continue}if(f){o(I,E),i=I.x,s=I.y,y!==r.RL.ROUND&&y!==r.RL.BUTT||(Y(E.y,-E.x,-E.x,-E.y,0,-1),Y(-E.y,E.x,-E.x,-E.y,0,1)),y===r.RL.SQUARE&&(Y(E.y-E.x,-E.x-E.y,-E.x,-E.y,0,-1),Y(-E.y-E.x,E.x-E.y,-E.x,-E.y,0,1)),y===r.RL.ROUND&&(Y(E.y-E.x,-E.x-E.y,-E.x,-E.y,1,-1),Y(-E.y-E.x,E.x-E.y,-E.x,-E.y,1,1));continue}}let d,V,U=-(E.x*M.y-E.y*M.x);if(.01>Math.abs(U))h(E,M)>0?(I.x=E.x,I.y=E.y,U=1,d=Number.MAX_VALUE,V=!0):(a(I,M),U=1,d=1,V=!1);else{I.x=(E.x+M.x)/U,I.y=(E.y+M.y)/U;let t=((d=c(I))-1)*v*_;V=d>4||t>N&&t>F}i=I.x,s=I.y;let O=m;switch(m){case r.AH.BEVEL:d<1.05&&(O=r.AH.MITER);break;case r.AH.ROUND:d<k&&(O=r.AH.MITER);break;case r.AH.MITER:d>g&&(O=r.AH.BEVEL)}switch(O){case r.AH.MITER:if(Y(I.x,I.y,-E.x,-E.y,0,-1),Y(-I.x,-I.y,-E.x,-E.y,0,1),f)break;if(w){let t=W?0:G;B=this._writeVertex(T,S,i,s,M.x,M.y,I.x,I.y,0,-1,t),R=this._writeVertex(T,S,i,s,M.x,M.y,-I.x,-I.y,0,1,t)}break;case r.AH.BEVEL:{let t,e,r,n;let c=U<0;if(c){let i=B;B=R,R=i,t=A,e=z}else t=z,e=A;if(V)r=c?a(this._innerPrev,E):o(this._innerPrev,E),n=c?o(this._innerNext,M):a(this._innerNext,M);else{let t=c?u(this._inner,I):l(this._inner,I);r=t,n=t}let h=c?o(this._bevelStart,E):a(this._bevelStart,E);Y(r.x,r.y,-E.x,-E.y,t.x,t.y);let d=Y(h.x,h.y,-E.x,-E.y,e.x,e.y);if(f)break;let x=c?a(this._bevelEnd,M):o(this._bevelEnd,M);if(V){let r=this._writeVertex(T,S,i,s,-E.x,-E.y,0,0,0,0,G);B=this._writeVertex(T,S,i,s,M.x,M.y,n.x,n.y,t.x,t.y,G),R=this._writeVertex(T,S,i,s,M.x,M.y,x.x,x.y,e.x,e.y,G),this._writeTriangle(d,r,R)}else{if(w){let e=this._bevelMiddle;e.x=(h.x+x.x)/2,e.y=(h.y+x.y)/2,p(L,e,-E.x,-E.y),Y(e.x,e.y,-E.x,-E.y,L.x,L.y),p(L,e,M.x,M.y),B=this._writeVertex(T,S,i,s,M.x,M.y,e.x,e.y,L.x,L.y,G),R=this._writeVertex(T,S,i,s,M.x,M.y,n.x,n.y,t.x,t.y,G)}else{let t=B;B=R,R=t}Y(x.x,x.y,M.x,M.y,e.x,e.y)}if(c){let t=B;B=R,R=t}break}case r.AH.ROUND:{let t,e,r,n,c,x;let _=U<0;if(_){let i=B;B=R,R=i,t=A,e=z}else t=z,e=A;let y=_?u(this._inner,I):l(this._inner,I);V?(r=_?a(this._innerPrev,E):o(this._innerPrev,E),n=_?o(this._innerNext,M):a(this._innerNext,M)):(r=y,n=y);let m=_?o(this._roundStart,E):a(this._roundStart,E),g=_?a(this._roundEnd,M):o(this._roundEnd,M),k=Y(r.x,r.y,-E.x,-E.y,t.x,t.y),v=Y(m.x,m.y,-E.x,-E.y,e.x,e.y);if(f)break;let b=this._writeVertex(T,S,i,s,-E.x,-E.y,0,0,0,0,G);V||this._writeTriangle(B,R,b);let P=u(this._outer,y),N=this._writeVertex(T,S,i,s,M.x,M.y,g.x,g.y,e.x,e.y,G),F=d>2;if(F){let t;d!==Number.MAX_VALUE?(P.x/=d,P.y/=d,t=(d*((t=h(E,P))*t-1)+1)/t):t=-1,c=_?o(this._startBreak,E):a(this._startBreak,E),c.x+=E.x*t,c.y+=E.y*t,x=_?a(this._endBreak,M):o(this._endBreak,M),x.x+=M.x*t,x.y+=M.y*t}p(L,P,-E.x,-E.y);let D=this._writeVertex(T,S,i,s,-E.x,-E.y,P.x,P.y,L.x,L.y,G);p(L,P,M.x,M.y);let W=w?this._writeVertex(T,S,i,s,M.x,M.y,P.x,P.y,L.x,L.y,G):D,O=w?this._writeVertex(T,S,i,s,M.x,M.y,0,0,0,0,G):b,C=-1,H=-1;if(F&&(p(L,c,-E.x,-E.y),C=this._writeVertex(T,S,i,s,-E.x,-E.y,c.x,c.y,L.x,L.y,G),p(L,x,M.x,M.y),H=this._writeVertex(T,S,i,s,M.x,M.y,x.x,x.y,L.x,L.y,G)),w?F?(this._writeTriangle(b,v,C),this._writeTriangle(b,C,D),this._writeTriangle(O,W,H),this._writeTriangle(O,H,N)):(this._writeTriangle(b,v,D),this._writeTriangle(O,W,N)):F?(this._writeTriangle(b,v,C),this._writeTriangle(b,C,H),this._writeTriangle(b,H,N)):(this._writeTriangle(b,v,D),this._writeTriangle(b,W,N)),V?B=this._writeVertex(T,S,i,s,M.x,M.y,n.x,n.y,t.x,t.y,G):(B=w?this._writeVertex(T,S,i,s,M.x,M.y,n.x,n.y,t.x,t.y,G):k,this._writeTriangle(B,O,N)),R=N,_){let t=B;B=R,R=t}}}}}}},71031:function(t,e,i){i.d(e,{dx:function(){return M},tZ:function(){return E},bT:function(){return S},so:function(){return P}}),i(27719);var r=i(51e3),s=i(83536),n=i(73503),o=i(36091);function a(t,e,i,r,s,n,o){let a;if(o===function(t,e,i,r,s,n){let o=0;for(let i=r,a=s-n;i<s;i+=n)o+=(t[a+e*n]-t[i+e*n])*(t[i+1+e*n]+t[a+1+e*n]),a=i;return o}(t,e,0,r,s,n)>0)for(let i=r;i<s;i+=n)a=u(i+e*n,t[i+e*n],t[i+1+e*n],a);else for(let i=s-n;i>=r;i-=n)a=u(i+e*n,t[i+e*n],t[i+1+e*n],a);return a&&_(a,a.next)&&(c(a),a=a.next),a}function l(t,e=t){if(!t)return t;let i,r=t;do if(i=!1,r.steiner||!_(r,r.next)&&0!==h(r.prev,r,r.next))r=r.next;else{if(c(r),(r=e=r.prev)===r.next)break;i=!0}while(i||r!==e);return e}function u(t,e,i,r){let s=g.create(t,e,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function c(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function h(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function p(t,e,i,r){return!!(_(t,e)&&_(i,r)||_(t,r)&&_(i,e))||h(t,e,i)>0!=h(t,e,r)>0&&h(i,r,t)>0!=h(i,r,e)>0}function f(t,e,i,r,s,n,o,a){return(s-o)*(e-a)-(t-o)*(n-a)>=0&&(t-o)*(r-a)-(i-o)*(e-a)>=0&&(i-o)*(n-a)-(s-o)*(r-a)>=0}function d(t,e){return 0>h(t.prev,t,t.next)?h(t,e,t.next)>=0&&h(t,t.prev,e)>=0:0>h(t,e,t.prev)||0>h(t,t.next,e)}function x(t,e,i,r,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*s)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function _(t,e){return t.x===e.x&&t.y===e.y}function y(t,e){return t.x-e.x}function m(t,e){let i=g.create(t.index,t.x,t.y),r=g.create(e.index,e.x,e.y),s=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=s,s.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}class g{constructor(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}static create(t,e,i){let r=v<k.length?k[v++]:new g;return r.index=t,r.x=e,r.y=i,r.prev=null,r.next=null,r.z=null,r.prevZ=null,r.nextZ=null,r.steiner=!1,r}}let k=[],v=0;for(let t=0;t<8096;t++)k.push(new g);let w=new s.bN(0,0,0,1,0),b=new s.bN(0,0,0,1,0);function T(t,e,i){let r=0;for(let s=1;s<i;s++){let i=t[2*(e+s-1)],n=t[2*(e+s-1)+1];r+=(t[2*(e+s)]-i)*(t[2*(e+s)+1]+n)}return r}function S(t,e){let{coords:i,lengths:r,hasIndeterminateRingOrder:s}=e;if(s)return!1;let n=0;for(let e=0;e<r.length;){let s=e,o=r[e],u=T(i,n,o),g=[];for(;++s<r.length;){let t=r[s],e=T(i,n+o,t);if(!(e>0))break;u+=e,g.push(n+o),o+=t}let k=t.length;!function(t,e,i,r,s,n,o){v=0;let u=(r-i)*2,g=s&&s.length,k=g?(s[0]-i)*2:u,w,b,T,S,P,E=a(e,i,r,0,k,2,!0);if(E&&E.next!==E.prev){if(g&&(E=function(t,e,i,r,s,n){let o=[];for(let s=0,l=r.length;s<l;s++){let u=a(t,e,i,r[s]*n,s<l-1?r[s+1]*n:i*n,n,!1);u===u.next&&(u.steiner=!0),o.push(function(t){let e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t);return i}(u))}for(let t of(o.sort(y),o))s=function(t,e){let i=function(t,e){let i=e,r=t.x,s=t.y,n,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){let t=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=r&&t>o){if(o=t,t===r){if(s===i.y)return i;if(s===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n.prev;let a=n,l=n.x,u=n.y,c,h=1/0;for(i=n.next;i!==a;)r>=i.x&&i.x>=l&&r!==i.x&&f(s<u?r:o,s,l,u,s<u?o:r,s,i.x,i.y)&&((c=Math.abs(s-i.y)/(r-i.x))<h||c===h&&i.x>n.x)&&d(i,t)&&(n=i,h=c),i=i.next;return n}(t,e);if(!i)return e;let r=m(i,t);return l(r,r.next),l(i,i.next)}(t,s);return s}(e,i,r,s,E,n)),u>80*n){w=T=e[0+i*n],b=S=e[1+i*n];for(let t=n;t<k;t+=n){let r=e[t+i*n],s=e[t+1+i*n];w=Math.min(w,r),b=Math.min(b,s),T=Math.max(T,r),S=Math.max(S,s)}P=0!==(P=Math.max(T-w,S-b))?1/P:0}!function t(e,i,r,s,n,o,a,u){if(!e)return;!u&&o&&(e=function t(e,i,r,s){let n;for(;n!==e;n=n.next){if(null===(n=n||e).z&&(n.z=x(n.x,n.y,i,r,s)),n.prev.next!==n||n.next.prev!==n)return n.prev.next=n,n.next.prev=n,t(e,i,r,s);n.prevZ=n.prev,n.nextZ=n.next}return e.prevZ.nextZ=null,e.prevZ=null,function(t){let e,i=1;for(;;){let r,s=t;t=null,e=null;let n=0;for(;s;){n++,r=s;let o=0;for(;o<i&&r;o++)r=r.nextZ;let a=i;for(;o>0||a>0&&r;){let i;0===o?(i=r,r=r.nextZ,a--):0!==a&&r?s.z<=r.z?(i=s,s=s.nextZ,o--):(i=r,r=r.nextZ,a--):(i=s,s=s.nextZ,o--),e?e.nextZ=i:t=i,i.prevZ=e,e=i}s=r}if(e.nextZ=null,i*=2,n<2)return t}}(e)}(e,s,n,o));let y=e;for(;e.prev!==e.next;){let g=e.prev,k=e.next;if(o?function(t,e,i,r){let s=t.prev,n=t.next;if(h(s,t,n)>=0)return!1;let o=s.x<t.x?s.x<n.x?s.x:n.x:t.x<n.x?t.x:n.x,a=s.y<t.y?s.y<n.y?s.y:n.y:t.y<n.y?t.y:n.y,l=s.x>t.x?s.x>n.x?s.x:n.x:t.x>n.x?t.x:n.x,u=s.y>t.y?s.y>n.y?s.y:n.y:t.y>n.y?t.y:n.y,c=x(o,a,e,i,r),p=x(l,u,e,i,r),d=t.prevZ,_=t.nextZ;for(;d&&d.z>=c&&_&&_.z<=p;){if(d!==t.prev&&d!==t.next&&f(s.x,s.y,t.x,t.y,n.x,n.y,d.x,d.y)&&h(d.prev,d,d.next)>=0||(d=d.prevZ,_!==t.prev&&_!==t.next&&f(s.x,s.y,t.x,t.y,n.x,n.y,_.x,_.y)&&h(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&f(s.x,s.y,t.x,t.y,n.x,n.y,d.x,d.y)&&h(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;_&&_.z<=p;){if(_!==t.prev&&_!==t.next&&f(s.x,s.y,t.x,t.y,n.x,n.y,_.x,_.y)&&h(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}(e,s,n,o):function(t){let e=t.prev,i=t.next;if(h(e,t,i)>=0)return!1;let r=t.next.next,s=r,n=0;for(;r!==t.prev&&(0===n||r!==s);){if(n++,f(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&h(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}(e))i.push(g.index/r+a),i.push(e.index/r+a),i.push(k.index/r+a),c(e),e=k.next,y=k.next;else if((e=k)===y){u?1===u?t(e=function(t,e,i,r){let s=t;do{let n=s.prev,o=s.next.next;!_(n,o)&&p(n,s,s.next,o)&&d(n,o)&&d(o,n)&&(e.push(n.index/i+r),e.push(s.index/i+r),e.push(o.index/i+r),c(s),c(s.next),s=t=o),s=s.next}while(s!==t);return s}(e,i,r,a),i,r,s,n,o,a,2):2===u&&function(e,i,r,s,n,o,a){let u=e;do{let e=u.next.next;for(;e!==u.prev;){var c,h;if(u.index!==e.index&&(c=u,h=e,c.next.index!==h.index&&c.prev.index!==h.index&&!function(t,e){let i=t;do{if(i.index!==t.index&&i.next.index!==t.index&&i.index!==e.index&&i.next.index!==e.index&&p(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(c,h)&&d(c,h)&&d(h,c)&&function(t,e){let i=t,r=!1,s=(t.x+e.x)/2,n=(t.y+e.y)/2;do i.y>n!=i.next.y>n&&i.next.y!==i.y&&s<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==t);return r}(c,h))){let c=m(u,e);return u=l(u,u.next),c=l(c,c.next),t(u,i,r,s,n,o,a,0),void t(c,i,r,s,n,o,a,0)}e=e.next}u=u.next}while(u!==e)}(e,i,r,s,n,o,a):t(l(e),i,r,s,n,o,a,1);break}}}(E,t,n,w,b,P,0,0)}}(t,i,n,n+o,g,2,0);let w=function(t,e,i,r,s){let n=0;for(let s=i;s<r;s+=3){let i=(t[s]-0)*2,r=(t[s+1]-0)*2,o=(t[s+2]-0)*2;n+=Math.abs((e[i]-e[o])*(e[r+1]-e[i+1])-(e[i]-e[r])*(e[o+1]-e[i+1]))}return n}(t,i,k,t.length,0),b=Math.abs(u);if(Math.abs((w-b)/Math.max(1e-7,b))>1e-5)return t.length=0,!1;e=s,n+=o}return!0}function P(t){let{coords:e,lengths:i}=t,{buffer:s}=(0,r.b)(e,i);return s}function E(t,e){if(null==t)return null;if(!function(t,e,i){let r=0;for(let e=0;e<t.lengths.length;e++){let s=t.lengths[e];for(let e=0;e<s;e++){let s=t.coords[2*(e+r)],n=t.coords[2*(e+r)+1];if(s<-128||s>i||n<-128||n>i)return!0}r+=s}return!1}(t,0,o.i9+128))return t;w.setPixelMargin(e),w.reset(s.Vl.Polygon);let i=0;for(let e=0;e<t.lengths.length;e++){let r=t.lengths[e],s=t.coords[2*(0+i)],n=t.coords[2*(0+i)+1];w.moveTo(s,n);for(let e=1;e<r;e++)s=t.coords[2*(e+i)],n=t.coords[2*(e+i)+1],w.lineTo(s,n);w.close(),i+=r}let r=w.result(!1);if(!r)return null;let a=[],l=[];for(let t of r){let e=0;for(let i of t)l.push(i.x),l.push(i.y),e++;a.push(e)}return new n.Z(a,l)}function M(t,e){b.setPixelMargin(e);let i=-e,r=o.i9+e,n=[],a=!1;if(!t.nextPath())return null;let l=!0;for(;l;){t.seekPathStart();let e=[];if(!t.pathSize)return null;b.reset(s.Vl.LineString),t.nextPoint();let o=t.x,u=t.y;if(a)b.moveTo(o,u);else{if(o<i||o>r||u<i||u>r){a=!0;continue}e.push({x:o,y:u})}let c=!1;for(;t.nextPoint();)if(o=t.x,u=t.y,a)b.lineTo(o,u);else{if(o<i||o>r||u<i||u>r){c=!0;break}e.push({x:o,y:u})}if(c)a=!0;else{if(a){let t=b.resultWithStarts();if(t)for(let e of t)n.push(e)}else n.push({line:e,start:0});l=t.nextPath(),a=!1}}return 0===(n=n.filter(t=>t.line.length>1)).length?null:n}w.setExtent(o.i9),b.setExtent(o.i9)},97398:function(t,e,i){i.d(e,{Z:function(){return o}});var r=i(82029),s=i(71193);let n={createComputedParams:t=>t,optionalAttributes:{},attributes:{id:{type:s.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:s.g.UNSIGNED_BYTE,count:1},pos:{type:s.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},inverseArea:{type:s.g.FLOAT,count:1,packTessellation:({inverseArea:t})=>t}}};class o extends r.r{constructor(){super(...arguments),this.vertexSpec=n}createTesselationParams(t){return{inverseArea:1/t.readGeometryArea()}}}},82029:function(t,e,i){i.d(e,{r:function(){return l}});var r=i(37180),s=i(51e3),n=i(71031),o=i(18716);let a=(0,r.Z)("featurelayer-fast-triangulation-enabled");class l extends o.c{async loadDependencies(){await Promise.all([super.loadDependencies(),(0,s.j)()])}_write(t,e,i){let r=i?.asOptimized()??e.readGeometryForDisplay(),s=this._clip(r);s&&(t.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(t,e,s),t.recordEnd())}_clip(t){if(!t)return null;let e=this.hasEffects;return(0,n.tZ)(t,e?256:8)}_writeGeometry(t,e,i){let r=i.maxLength>100,s=[],o=this.createTesselationParams(e);if(!r&&a&&(0,n.bT)(s,i))return void(s.length&&this._writeVertices(t,e,i.coords,o,s));let l=(0,n.so)(i);this._writeVertices(t,e,l,o)}_writeVertices(t,e,i,r,s){let n=e.getDisplayId(),o=t.vertexCount(),a=this.hasEffects,l=0;if(s)for(let e of s){let s=i[2*e],o=i[2*e+1];a&&t.recordBounds(s,o,0,0),this._writeVertex(t,n,s,o,r),l++}else for(let e=0;e<i.length;e+=2){let s=Math.round(i[e]),o=Math.round(i[e+1]);a&&t.recordBounds(s,o,0,0),this._writeVertex(t,n,s,o,r),l++}t.indexEnsureSize(l);for(let e=0;e<l;e++)t.indexWrite(e+o)}}},52776:function(t,e,i){i.d(e,{MG:function(){return c},MW:function(){return u},Mb:function(){return h},h5:function(){return p}});var r=i(4392),s=i(78610),n=i(85837),o=i(60186),a=i(62415),l=i(71193);function u(t){let{sprite:e,aspectRatio:i,scaleProportionally:s}=t,n=(0,r.F2)(t.height),o=n>0?n:e.height,a=n*i;return a<=0?a=e.width:s&&(a*=e.width/e.height),{width:a,height:o}}function c(t){let{applyRandomOffset:e,sampleAlphaOnly:i}=t;return(0,n.u)([[a.Ux,e],[a.GS,i]])}let h={createComputedParams:t=>t,optionalAttributes:o.w.optionalAttributes,attributes:{...o.w.attributes,bitset:{count:1,type:l.g.UNSIGNED_BYTE,pack:c},width:{count:1,type:l.g.HALF_FLOAT,pack:t=>u(t).width},height:{count:1,type:l.g.HALF_FLOAT,pack:t=>u(t).height},offset:{count:2,type:l.g.HALF_FLOAT,pack:({offsetX:t,offsetY:e})=>[(0,r.F2)(t),-(0,r.F2)(e)]},scale:{count:2,type:l.g.UNSIGNED_BYTE,packPrecisionFactor:16,pack:({scaleX:t,scaleY:e})=>[t,e]},angle:{count:1,type:l.g.UNSIGNED_BYTE,pack:({angle:t})=>(0,s.s5)(t)}}};class p extends o.H{constructor(){super(...arguments),this.vertexSpec=h}}},30375:function(t,e,i){i.d(e,{f:function(){return _}});var r=i(4392),s=i(60612),n=i(52776),o=i(85837),a=i(52165),l=i(13788),u=i(62415),c=i(71193);let h=n.Mb,p=a.OQ,f={createComputedParams:t=>t,optionalAttributes:h.optionalAttributes,attributes:{...h.attributes,bitset:{type:c.g.UNSIGNED_BYTE,count:1,pack:t=>(0,n.MG)(t)},aux1:{count:1,type:c.g.HALF_FLOAT,pack:t=>(0,n.MW)(t).width},aux2:{count:1,type:c.g.HALF_FLOAT,pack:t=>(0,n.MW)(t).height},aux3:{count:2,type:c.g.HALF_FLOAT,pack:({offsetX:t,offsetY:e})=>[(0,r.F2)(t),(0,r.F2)(e)]},aux4:{count:2,type:c.g.UNSIGNED_BYTE,pack:({scaleX:t,scaleY:e})=>[t*l.$1,e*l.$1]}}},d={createComputedParams:t=>t,optionalAttributes:h.optionalAttributes,attributes:{...h.attributes,color:p.attributes.color,bitset:{type:c.g.UNSIGNED_BYTE,count:1,pack:t=>(0,o.u)([[u.WD,!0]])},aux1:{count:1,type:c.g.HALF_FLOAT,pack:t=>(0,r.F2)(.5*t.width)},aux2:{count:1,type:c.g.HALF_FLOAT,pack:t=>(0,r.F2)(.5*t.referenceWidth)},aux3:{count:2,type:c.g.HALF_FLOAT,packTessellation:({extrusionOffsetX:t,extrusionOffsetY:e})=>[t,e]},aux4:{count:2,type:c.g.UNSIGNED_BYTE,packTessellation:({normalX:t,normalY:e})=>[t*l.$1+l.NS,e*l.$1+l.NS]}}};class x extends a.B2{constructor(){super(...arguments),this.vertexSpec=d}}class _ extends a.nT{constructor(){super(...arguments),this.vertexSpec=f}_createOutlineWriter(t,e,i,r){return new x(t,e,i,r)}_write(t,e,i){let r=i?.asOptimized()??e.readGeometryForDisplay(),n=this._clip(r);if(!n)return;let o=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,o),this._writeGeometry(t,e,n),this._lineMeshWriter.writeLineVertices(t,s.z.fromOptimizedCIM(n,"esriGeometryPolyline"),e),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},14888:function(t,e,i){i.d(e,{Q:function(){return l},a:function(){return a}});var r=i(36091),s=i(82029),n=i(85837),o=i(71193);let a={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:o.g.SHORT,count:2,packPrecisionFactor:r.JS,pack:({scaleInfo:t},{tileInfo:e})=>(0,n._f)(t,e)}},attributes:{id:{type:o.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:o.g.UNSIGNED_BYTE,count:1},pos:{type:o.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},color:{type:o.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,n.G7)(t)}}};class l extends s.r{constructor(){super(...arguments),this.vertexSpec=a}createTesselationParams(t){return null}}},52165:function(t,e,i){i.d(e,{B2:function(){return f},OQ:function(){return p},nT:function(){return d},s9:function(){return h}});var r=i(60612),s=i(71031),n=i(14888),o=i(85837),a=i(35619),l=i(8186),u=i(62415),c=i(71193);let h={createComputedParams:t=>t,optionalAttributes:a.bT.optionalAttributes,attributes:{...a.bT.attributes,bitset:{type:c.g.UNSIGNED_BYTE,count:1,pack:t=>0},color:{type:c.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,o.G7)(t)}}},p={createComputedParams:t=>t,optionalAttributes:a.bT.optionalAttributes,attributes:{...a.bT.attributes,bitset:{type:c.g.UNSIGNED_BYTE,count:1,pack:t=>(0,o.u)([[u.WD,!0]])},color:{type:c.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:t})=>(0,o.G7)(t)}}};class f extends a.ti{constructor(){super(...arguments),this.vertexSpec=p}}class d extends n.Q{constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=h,this._lineMeshWriter=this._createOutlineWriter(t,e,i,r)}_createOutlineWriter(t,e,i,r){return new f(t,e,i,r)}_write(t,e,i){let s=i?.asOptimized()??e.readGeometryForDisplay(),n=this._clip(s);n&&(t.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(t,e,n),this._lineMeshWriter.writeLineVertices(t,r.z.fromOptimizedCIM(n,"esriGeometryPolyline"),e),t.recordEnd())}_clip(t){return t?(0,s.tZ)(t,(0,l.b8)(this.evaluatedMeshParams)):null}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},60186:function(t,e,i){i.d(e,{H:function(){return a},w:function(){return o}});var r=i(36091),s=i(14888),n=i(71193);let o={createComputedParams:t=>t,optionalAttributes:s.a.optionalAttributes,attributes:{...s.a.attributes,tlbr:{count:4,type:n.g.UNSIGNED_SHORT,pack:({sprite:t})=>{let{rect:e,width:i,height:s}=t,n=e.x+r.s4,o=e.y+r.s4;return[n,o,n+i,o+s]}},inverseRasterizationScale:{count:1,type:n.g.BYTE,packPrecisionFactor:16,pack:({sprite:t})=>1/t.rasterizationScale}}};class a extends s.Q{constructor(){super(...arguments),this.vertexSpec=o}_write(t,e,i){let r=i?.asOptimized()??e.readGeometryForDisplay(),s=this._clip(r);if(!s)return;let n=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,n),this._writeGeometry(t,e,s),t.recordEnd()}}},89767:function(t,e,i){i.d(e,{i:function(){return u}});var r=i(60612),s=i(52165),n=i(60186);let o={optionalAttributes:n.w.optionalAttributes,createComputedParams:t=>t,attributes:{...n.w.attributes,...s.s9.attributes}},a={optionalAttributes:n.w.optionalAttributes,createComputedParams:t=>t,attributes:{...n.w.attributes,...s.OQ.attributes}};class l extends s.B2{constructor(){super(...arguments),this.vertexSpec=a}}class u extends s.nT{constructor(){super(...arguments),this.vertexSpec=o}_createOutlineWriter(t,e,i,r){return new l(t,e,i,r)}_write(t,e,i){let s=i?.asOptimized()??e.readGeometryForDisplay(),n=this._clip(s);if(!n)return;let o=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,o),this._writeGeometry(t,e,n),this._lineMeshWriter.writeLineVertices(t,r.z.fromOptimizedCIM(n,"esriGeometryPolyline"),e),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},85837:function(t,e,i){i.d(e,{G7:function(){return h},L:function(){return p},Lq:function(){return f},NF:function(){return u},QS:function(){return d},_f:function(){return l},kU:function(){return x},u:function(){return c}});var r=i(87585),s=i(94605),n=i(65223),o=i(50758);let a=()=>n.Z.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.meshWriterUtils");function l(t,e){return[!!t?.minScale&&e.scaleToZoom(t.minScale)||0,!!t?.maxScale&&e.scaleToZoom(t.maxScale)||100]}function u(t){return 1<<t}function c(t){let e=0;for(let[i,r]of t)r&&(e|=1<<i);return e}function h(t){let e;if(!t)return[0,0,0,0];if("string"==typeof t){let i=r.Z.fromString(t);if(!i)return a().errorOnce(new s.Z("mapview:mesh-processing","Unable to parse string into color",{color:t})),[0,0,0,0];e=i.toArray()}else e=t;let[i,n,o,l]=e;return[l/255*i,l/255*n,l/255*o,l]}function p(t){switch(t){case"butt":case o.kP.Butt:return o.RL.BUTT;case"round":case o.kP.Round:return o.RL.ROUND;case"square":case o.kP.Square:return o.RL.SQUARE}}function f(t){switch(t){case"bevel":case o.r4.Bevel:return o.AH.BEVEL;case"miter":case o.r4.Miter:return o.AH.MITER;case"round":case o.r4.Round:return o.AH.ROUND}}function d(t,e){return Math.round(Math.min(Math.sqrt(t*e),255))}function x(t,e){return Math.round(t*e)/e}},14162:function(t,e,i){i.d(e,{E:function(){return o}});var r=i(18716),s=i(71193);let n={createComputedParams:t=>t,optionalAttributes:{},attributes:{pos:{type:s.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:s.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:s.g.UNSIGNED_BYTE,count:1},offset:{type:s.g.BYTE,count:2,packAlternating:{count:4,pack:()=>[[-1,-1],[1,-1],[-1,1],[1,1]]}}}};class o extends r.c{constructor(){super(...arguments),this.vertexSpec=n}_write(t,e){t.recordStart(this.instanceId,this.attributeLayout);let i=e.getDisplayId();if("esriGeometryPoint"===e.geometryType){let r=e.readXForDisplay(),s=e.readYForDisplay();this._writeQuad(t,i,r,s)}else if("esriGeometryMultipoint"===e.geometryType){let r=e.readGeometryForDisplay();r?.forEachVertex((e,r)=>{e>=0&&e<=512&&r>=0&&r<=512&&this._writeQuad(t,i,e,r)})}t.recordEnd()}_writeQuad(t,e,i,r){let s=t.vertexCount();this._writeVertex(t,e,i,r),t.indexWrite(s+0),t.indexWrite(s+1),t.indexWrite(s+2),t.indexWrite(s+1),t.indexWrite(s+3),t.indexWrite(s+2)}}},35619:function(t,e,i){i.d(e,{bT:function(){return f},ti:function(){return x}});var r=i(4392),s=i(60612),n=i(36091),o=i(2244),a=i(71031),l=i(85837),u=i(18716),c=i(8186),h=i(71193);class p{constructor(){this.extrusionOffsetX=0,this.extrusionOffsetY=0,this.normalX=0,this.normalY=0,this.directionX=0,this.directionY=0,this.distance=0}}let f={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:h.g.SHORT,count:2,packPrecisionFactor:n.JS,pack:({scaleInfo:t},{tileInfo:e})=>(0,l._f)(t,e)}},attributes:{id:{type:h.g.UNSIGNED_BYTE,count:3,pack:"id"},pos:{type:h.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},bitset:{type:h.g.UNSIGNED_BYTE,count:1},color:{type:h.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,l.G7)(t)},offset:{type:h.g.BYTE,count:2,packPrecisionFactor:16,packTessellation:({extrusionOffsetX:t,extrusionOffsetY:e})=>[(0,l.kU)(t,16),(0,l.kU)(e,16)]},normal:{type:h.g.BYTE,count:2,packPrecisionFactor:16,packTessellation:({normalX:t,normalY:e})=>[(0,l.kU)(t,16),(0,l.kU)(e,16)]},halfWidth:{type:h.g.HALF_FLOAT,count:1,pack:({width:t})=>(0,r.F2)(.5*t)},referenceHalfWidth:{type:h.g.HALF_FLOAT,count:1,pack:({referenceWidth:t})=>(0,r.F2)(.5*t)}}};class d{constructor(){this.id=0,this.bitset=0,this.indexCount=0,this.vertexCount=0,this.vertexFrom=0,this.vertexBounds=0}}class x extends u.c{constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=f,this._currentWrite=new d,this._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0,wrapDistance:65535,textured:!1},this._tessParams=new p,this._initializeTessellator()}writeLineVertices(t,e,i){let r=this._getLines(e);null!=r&&this._writeVertices(t,i,r)}_initializeTessellator(){this._lineTessellator=new o.z(this._writeTesselatedVertex.bind(this),this._writeTriangle.bind(this),!0)}_write(t,e,i){let r=i??s.z.fromFeatureSetReaderCIM(e);r&&this._writeGeometry(t,e,r)}_writeGeometry(t,e,i,r){t.recordStart(this.instanceId,this.attributeLayout,r),this.writeLineVertices(t,i,e),t.recordEnd()}_getLines(t){return(0,a.dx)(t,(0,c.b8)(this.evaluatedMeshParams))}_writeVertices(t,e,i){let{_currentWrite:s,_tessellationOptions:o,evaluatedMeshParams:a}=this,{width:u,capType:c,joinType:h,miterLimit:p,hasSizeVV:f}=a,d=(0,r.F2)(.5*u);o.halfWidth=d,o.capType=(0,l.L)(c),o.joinType=(0,l.Lq)(h),o.miterLimit=p;let x=!f;for(let{line:r,start:a}of(s.out=t,s.id=e.getDisplayId(),s.vertexCount=0,s.indexCount=0,s.vertexFrom=t.vertexCount(),s.vertexBounds=x&&d<n.do?0:1,i))o.initialDistance=a%65535,this._lineTessellator.tessellate(r,o,x)}_writeTesselatedVertex(t,e,i,r,s,n,o,a,l,u,c){let{out:h,id:p,vertexBounds:f}=this._currentWrite;return this.hasEffects&&h.recordBounds(t,e,f,f),this._tessParams.extrusionOffsetX=o,this._tessParams.extrusionOffsetY=a,this._tessParams.normalX=l,this._tessParams.normalY=u,this._tessParams.directionX=s,this._tessParams.directionY=n,this._tessParams.distance=c,this._writeVertex(h,p,t,e,this._tessParams),this._currentWrite.vertexFrom+this._currentWrite.vertexCount++}_writeTriangle(t,e,i){let{out:r}=this._currentWrite;r.indexEnsureSize(3),r.indexWrite(t),r.indexWrite(e),r.indexWrite(i),this._currentWrite.indexCount+=3}}},88125:function(t,e,i){i.d(e,{I:function(){return c}});var r=i(60612),s=i(36091),n=i(85837),o=i(35619),a=i(62415),l=i(71193);let u={createComputedParams:t=>t,optionalAttributes:o.bT.optionalAttributes,attributes:{...o.bT.attributes,bitset:{type:l.g.UNSIGNED_BYTE,count:1,pack:({shouldSampleAlphaOnly:t,shouldScaleDash:e,isSDF:i})=>(0,n.u)([[a.GS,t],[a.Wq,e],[a.B7,i]])},tlbr:{type:l.g.UNSIGNED_SHORT,count:4,pack:({sprite:t})=>{let{rect:e,width:i,height:r}=t,n=e.x+s.s4,o=e.y+s.s4;return[n,o,n+i,o+r]}},accumulatedDistance:{type:l.g.UNSIGNED_SHORT,count:1,packTessellation:({distance:t})=>t},segmentDirection:{type:l.g.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:t,directionY:e})=>[t,e]}}};class c extends o.ti{constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=u,this._tessellationOptions.textured=!0}_write(t,e,i){let s=i??r.z.fromFeatureSetReaderCIM(e);if(!s)return;let{sprite:n}=this.evaluatedMeshParams;this._writeGeometry(t,e,s,n?.textureBinding)}}},6013:function(t,e,i){i.d(e,{A:function(){return w}});var r=i(4392),s=i(49978),n=i(89668),o=i(76827),a=i(60612),l=i(9736),u=i(50758),c=i(85356),h=i(36091),p=i(85837),f=i(88421);class d{static from(t){return"width"in t?this.fromSimpleMeshParams(t):this.fromComplexMeshParams(t)}static fromSimpleMeshParams(t){let e=new d(t.sprite,t.color,t.outlineColor,t.minPixelBuffer,t.placement,t.scaleInfo,t.effects),{type:i,width:s,height:n,angle:o,alignment:a,outlineSize:l,referenceSize:u,sprite:c,overrideOutlineColor:h}=t;return e.rawWidth=(0,r.F2)(s),e.rawHeight=(0,r.F2)(n),e.angle=o,e.alignment=a,e.outlineSize=(0,r.F2)(l),e.referenceSize=(0,r.F2)(u),e.overrideOutlineColor=h,e.offsetX=(0,r.F2)(t.offsetX),e.offsetY=(0,r.F2)(t.offsetY),"simple"!==i||c.sdf||(e.rawWidth=c.width,e.rawHeight=c.height),e.sizeRatio=c.sdf?2:1,e._computeSize(t,!1),e}static fromComplexMeshParams(t){let e=new d(t.sprite,t.color,t.outlineColor,t.minPixelBuffer,t.placement,t.scaleInfo,t.effects),{alignment:i,transforms:s,size:n,scaleX:o,anchorX:a,anchorY:l,angle:u,colorLocked:c,frameHeight:h,widthRatio:p,offsetX:x,offsetY:_,outlineSize:y,referenceSize:m,scaleFactor:g,sizeRatio:k,isAbsoluteAnchorPoint:v,rotateClockwise:w,scaleSymbolsProportionally:b,sprite:T}=t;if(s&&s.infos.length>0){let t=(0,f.yl)(n,u,w,x,_,s);n=t.size,u=t.rotation,x=t.offsetX,_=t.offsetY,w=!1}g&&(n*=g,x*=g,_*=g);let S=T.width/T.height*o;e.alignment=i,e.rawHeight=(0,r.F2)(n),e.rawWidth=e.rawHeight*S,e.referenceSize=(0,r.F2)(m),e.sizeRatio=k,e.angle=u,e.rotateClockwise=w,e.anchorX=a,e.anchorY=l,e.offsetX=(0,r.F2)(x),e.offsetY=(0,r.F2)(_),v&&n&&(T.sdf?e.anchorX=a/(n*p):e.anchorX=a/(n*S),e.anchorY=l/n);let P=b&&h?n/h:1;return e.outlineSize=0===y||isNaN(y)?0:(0,r.F2)(y)*P,e.scaleSymbolsProportionally=b,e.colorLocked=c,e._computeSize(t,!0),e}constructor(t,e,i,r,s,n,o){this.sprite=t,this.color=e,this.outlineColor=i,this.minPixelBuffer=r,this.placement=s,this.scaleInfo=n,this.effects=o,this.rawWidth=0,this.rawHeight=0,this.angle=0,this.outlineSize=0,this.referenceSize=0,this.sizeRatio=1,this.alignment=u.v2.SCREEN,this.scaleSymbolsProportionally=!1,this.overrideOutlineColor=!1,this.colorLocked=!1,this.anchorX=0,this.anchorY=0,this.computedWidth=0,this.computedHeight=0,this.texXmin=0,this.texYmin=0,this.texXmax=0,this.texYmax=0,this.offsetX=0,this.offsetY=0,this.rotateClockwise=!0}get boundsInfo(){return{size:Math.max(this.computedHeight,this.computedWidth),offsetX:this.offsetX,offsetY:this.offsetY}}_computeSize(t,e){let{sprite:i,hasSizeVV:r}=t,s=!!i.sdf,{rawWidth:n,rawHeight:o,sizeRatio:a,outlineSize:l}=this,u=n*a,c=o*a;if(s&&!r){let t=l+2;this.computedWidth=Math.min((e&&n>o?u:n)+t,u),this.computedHeight=Math.min(o+t,c)}else this.computedWidth=u,this.computedHeight=c;let p=s?Math.max(i.width,i.height)/Math.max(u,c):1,f=.5*(u-this.computedWidth)*p,d=.5*(c-this.computedHeight)*p,x=i.rect.x+h.s4+f,_=i.rect.y+h.s4+d,y=x+i.width-2*f,m=_+i.height-2*d;this.texXmin=Math.floor(x),this.texYmin=Math.floor(_),this.texXmax=Math.ceil(y),this.texYmax=Math.ceil(m),this.computedWidth*=(this.texXmax-this.texXmin)/(y-x),this.computedHeight*=(this.texYmax-this.texYmin)/(m-_),this.anchorX*=u/this.computedWidth,this.anchorY*=c/this.computedHeight}}var x=i(89119),_=i(64283),y=i(18716),m=i(71193);let g=3.14159265359/180,k=128/Math.PI,v={createComputedParams:t=>d.from(t),optionalAttributes:{zoomRange:{type:m.g.SHORT,count:2,packPrecisionFactor:h.JS,pack:({scaleInfo:t},{tileInfo:e})=>(0,p._f)(t,e)}},attributes:{pos:{type:m.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:m.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:m.g.UNSIGNED_BYTE,count:1,pack:({sprite:t,alignment:e,scaleSymbolsProportionally:i,overrideOutlineColor:r,colorLocked:s})=>{let n=0;return t.sdf&&(n|=(0,p.NF)(x.m.bitset.isSDF)),e===u.v2.MAP&&(n|=(0,p.NF)(x.m.bitset.isMapAligned)),i&&(n|=(0,p.NF)(x.m.bitset.scaleSymbolsProportionally)),r&&(n|=(0,p.NF)(x.m.bitset.overrideOutlineColor)),s&&(n|=(0,p.NF)(x.m.bitset.colorLocked)),n}},offset:{type:m.g.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:({angle:t,computedWidth:e,computedHeight:i,anchorX:r,anchorY:a,offsetX:l,offsetY:u,rotateClockwise:c})=>{let h=function(t,e,i,r,o=!1){let a=(0,n.Ue)();return(0,s.yR)(a),(e||i)&&(0,s.Iu)(a,a,[e,-i]),r&&(0,s.U1)(a,a,-((o?1:-1)*g*r)),a}(0,l,u,-t,c),p=-(.5+r)*e,f=-(.5-a)*i,d=[p,f],x=[p+e,f],_=[p,f+i],y=[p+e,f+i];return(0,o.iu)(d,d,h),(0,o.iu)(x,x,h),(0,o.iu)(_,_,h),(0,o.iu)(y,y,h),[d,x,_,y]}}},textureUV:{type:m.g.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:({texXmax:t,texXmin:e,texYmax:i,texYmin:r})=>[[e,r],[t,r],[e,i],[t,i]]}},color:{type:m.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,p.G7)(t)},outlineColor:{type:m.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:t})=>(0,p.G7)(t)},sizing:{type:m.g.UNSIGNED_BYTE,count:4,pack:({rawWidth:t,rawHeight:e,outlineSize:i,referenceSize:r})=>[(0,p.QS)(Math.max(t,e),128),(0,p.QS)(i,128),(0,p.QS)(r,128),0]},placementAngle:{type:m.g.UNSIGNED_BYTE,count:1,packTessellation:({placementAngle:t})=>{var e;return Math.abs((e=t*k%256)>=0?e:e+256)}},sizeRatio:{type:m.g.UNSIGNED_SHORT,count:1,packPrecisionFactor:64,pack:({sizeRatio:t})=>t}}};class w extends y.c{constructor(){super(...arguments),this.vertexSpec=v}getBoundsInfo(){return this.evaluatedMeshParams.boundsInfo}_write(t,e,i){let r=this.evaluatedMeshParams.sprite?.textureBinding,s=e.getDisplayId();t.recordStart(this.instanceId,this.attributeLayout,r);let n=this.evaluatedMeshParams.minPixelBuffer,o=Math.max(this.evaluatedMeshParams.computedWidth,n),a=Math.max(this.evaluatedMeshParams.computedHeight,n),u=this.evaluatedMeshParams.offsetX,c=-this.evaluatedMeshParams.offsetY;if(null!=this.evaluatedMeshParams.placement)this._writePlacedMarkers(t,e,i,o,a);else if(i?.nextPath()){i.nextPoint();let e=i.x,r=i.y;t.recordBounds(e+u,r+c,o,a),this._writeQuad(t,s,e,r)}else if("esriGeometryPolygon"===e.geometryType){let i=e.readCentroidForDisplay();if(!i)return;let[r,n]=i.coords;t.recordBounds(r+u,n+c,o,a),this._writeQuad(t,s,r,n)}else if("esriGeometryPoint"===e.geometryType){let i=e.readXForDisplay(),r=e.readYForDisplay();t.recordBounds(i+u,r+c,o,a),this._writeQuad(t,s,i,r)}else{let i=e.readGeometryForDisplay();i?.forEachVertex((e,i)=>{t.recordBounds(e+u,i+c,o,a),Math.abs(e)>l.L||Math.abs(i)>l.L||this._writeQuad(t,s,e,i)})}t.recordEnd()}_writePlacedMarkers(t,e,i,s,n){let o=i??a.z.fromFeatureSetReaderCIM(e)?.clone();if(!o)return;let u=c.i.getPlacement(o,-1,this.evaluatedMeshParams.placement,(0,r.F2)(1),t.id,(0,_.n)());if(!u)return;let h=e.getDisplayId(),p=u.next(),f=this.evaluatedMeshParams.offsetX,d=-this.evaluatedMeshParams.offsetY;for(;null!=p;){let e=p.tx,i=-p.ty;if(Math.abs(e)>l.L||Math.abs(i)>l.L){p=u.next();continue}let r=-p.getAngle();t.recordBounds(e+f,i+d,s,n),this._writeQuad(t,h,e,i,r),p=u.next()}}_writeQuad(t,e,i,r,s){let n=t.vertexCount();this._writeVertex(t,e,i,r,null==s?null:{placementAngle:s}),t.indexWrite(n+0),t.indexWrite(n+1),t.indexWrite(n+2),t.indexWrite(n+1),t.indexWrite(n+3),t.indexWrite(n+2)}}},18716:function(t,e,i){i.d(e,{c:function(){return f}});var r=i(60612),s=i(67374),n=i(64283),o=i(5747);i(37180);var a=i(8186),l=i(71193);function u(t){switch(t){case l.g.BYTE:case l.g.UNSIGNED_BYTE:return 1;case l.g.SHORT:case l.g.UNSIGNED_SHORT:case l.g.HALF_FLOAT:return 2;case l.g.FLOAT:case l.g.INT:case l.g.UNSIGNED_INT:return 4}}class c{static fromVertexSpec(t,e){let i,r,s;let{attributes:n,optionalAttributes:o}=t,a=[];for(let t in n){let e=n[t];"position"===e.pack?i={...e,name:t,offset:0}:"id"===e.pack?r={...e,name:t,offset:4}:"bitset"===t?s={...e,name:t,offset:7}:a.push({...e,name:t})}for(let t in o)if(!0===e[t]){let e=o[t];a.push({...e,name:t})}let l=function(t){let e=[],i=[],r=[];for(let s of t){let t=u(s.type)*s.count;switch(t%2||t%4||4){case 4:e.push(s);continue;case 2:i.push(s);continue;case 1:r.push(s);continue;default:throw Error("Found unexpected dataType byte count")}}return e.push(...i),e.push(...r),e}(a),h=[],p=8,f=1;for(let t of l)h.push({...t,offset:p}),p+=u(t.type)*t.count,t.packAlternating&&(f=Math.max(t.packAlternating.count,f));let d=Uint32Array.BYTES_PER_ELEMENT,x=p%d;return new c(i,r,s,h,p+(x?d-x:0),f)}constructor(t,e,i,r,s,n){this.position=t,this.id=e,this.bitset=i,this.standardAttributes=r,this.stride=s,this.packVertexCount=n,r.push(i),this._attributes=[t,e,i,...r]}get attributeLayout(){if(!this._attributeLayout){let t=(0,a.ig)(this._attributes),e=this._attributes.map(t=>({name:t.name,count:t.count,offset:t.offset,type:t.type,packPrecisionFactor:t.packPrecisionFactor,normalized:t.normalized??!1}));this._attributeLayout={attributes:e,hash:t,stride:this.stride}}return this._attributeLayout}}var h=i(40152);class p{static fromVertexSpec(t,e){return new p(c.fromVertexSpec(t,e))}constructor(t){this._spec=t,this._packed=new Uint8Array(this._spec.stride*this._spec.packVertexCount),this._packedU32View=new Uint32Array(this._packed.buffer),this._dataView=new DataView(this._packed.buffer)}get attributeLayout(){return this._spec.attributeLayout}get stride(){return this._spec.stride}writeVertex(t,e,i,r,s,n){for(let t=0;t<this._spec.packVertexCount;t++){let o=t*this._spec.stride;this._packPosition(i,r,o),this._packId(e,o);let a=this._spec.bitset;if(n){if(a.packTessellation){let t=a.packTessellation(n,s);this._pack(t,a,o)}for(let t of this._spec.standardAttributes)if(null!=t.packTessellation){let e=t.packTessellation(n,s);this._pack(e,t,o)}else if(t.packAlternating?.packTessellation){let e=t.packAlternating.packTessellation(n,s);for(let i=0;i<this._spec.packVertexCount;i++){let r=e[i];this._pack(r,t,i*this._spec.stride)}}}}t.vertexWriteRegion(this._packedU32View)}pack(t,e){for(let i of this._spec.standardAttributes)if(i.pack&&"string"!=typeof i.pack){let r=i.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++)this._pack(r,i,t*this._spec.stride)}else if(i.packAlternating?.pack){let r=i.packAlternating.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++){let e=r[t];this._pack(e,i,t*this._spec.stride)}}}_packPosition(t,e,i){let{offset:r}=this._spec.position,s=this._spec.position.packPrecisionFactor??1,n=(0,o.UJ)(t*s,e*s);this._dataView.setUint32(i+r,n,!0)}_packId(t,e){let i=t*(this._spec.id.packPrecisionFactor??1),r=4278190080&this._dataView.getUint32(e+this._spec.id.offset,!0);this._dataView.setUint32(e+this._spec.id.offset,i|r,!0)}_pack(t,e,i){(0,h.G)(this._dataView,t,e,i)}}class f{constructor(t,e,i,r){this._instanceId=t,this._evaluator=e,this._enabledOptionalAttributes=i,this._viewParams=r,this._evaluator.evaluator=t=>this.vertexSpec.createComputedParams(t)}get _vertexPack(){if(!this._cachedVertexPack){let t=p.fromVertexSpec(this.vertexSpec,this._enabledOptionalAttributes);this._evaluator.hasDynamicProperties||t.pack(this._evaluator.evaluatedMeshParams,this._viewParams),this._cachedVertexPack=t}return this._cachedVertexPack}get evaluatedMeshParams(){return this._evaluator.evaluatedMeshParams}get hasEffects(){return!!this.evaluatedMeshParams.effects}get instanceId(){return this._instanceId}get attributeLayout(){return this._vertexPack.attributeLayout}setReferences(t){this._references=t}getBoundsInfo(){return null}getTileInfo(){return this._viewParams.tileInfo}async loadDependencies(){(function(t){if(!t)return!1;for(let e of t)switch(e.effect.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1})(this._evaluator.inputMeshParams.effects?.effectInfos)&&await (0,n.A)()}enqueueRequest(t,e,i){this._evaluator.hasDynamicProperties&&this._evaluator.enqueueRequest(t,e,i)}write(t,e,i,o,a){let l;this.ensurePacked(e,i,o);let u=this.evaluatedMeshParams.effects;if(!u||0===u.length)return void this._write(t,i,void 0,a);let c=i.readGeometryForDisplay()?.clone();if(!c)return;let h=r.z.fromOptimizedCIM(c,i.geometryType),p=(0,n.n)();h.invertY();let f=t.id||"",d=s.j.executeEffects(u,h,f,p);for(;l=d.next();)l.invertY(),this._write(t,i,l,a)}ensurePacked(t,e,i){if(!this._evaluator.hasDynamicProperties)return;let r=this._evaluator.evaluateMeshParams(t,e,i);this._vertexPack.pack(r,this._viewParams)}_writeVertex(t,e,i,r,s){let n=this.evaluatedMeshParams;this._vertexPack.writeVertex(t,e,i,r,n,s)}}},64283:function(t,e,i){i.d(e,{A:function(){return n},n:function(){return s}});let r=null;function s(){return r}async function n(){r=await Promise.all([i.e(58379),i.e(9042)]).then(i.bind(i,56362))}},12702:function(t,e,i){i.d(e,{q:function(){return l}});var r=i(4392),s=i(85837),n=i(18716),o=i(71193);let a={createComputedParams:t=>t,optionalAttributes:{},attributes:{pos:{type:o.g.SHORT,count:2,packPrecisionFactor:10,pack:"position"},id:{type:o.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:o.g.UNSIGNED_BYTE,count:1,pack:t=>0},offset:{type:o.g.SHORT,count:2,packPrecisionFactor:16,packAlternating:{count:4,pack:({size:t})=>{let e=(0,r.F2)(t),i=-e/2,s=-e/2;return[[i,s],[i+e,s],[i,s+e],[i+e,s+e]]}}},texCoords:{type:o.g.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:()=>[[0,1],[1,1],[0,0],[1,0]]}},size:{type:o.g.UNSIGNED_BYTE,count:2,pack:({size:t})=>[t,t]},referenceSize:{type:o.g.UNSIGNED_BYTE,count:1,pack:({size:t})=>(0,r.F2)(t)},zoomRange:{type:o.g.UNSIGNED_BYTE,count:2,pack:({scaleInfo:t},{tileInfo:e})=>(0,s._f)(t,e)}}};class l extends n.c{constructor(){super(...arguments),this.vertexSpec=a}_write(t,e){let i,s;let n=e.getDisplayId(),o=this.evaluatedMeshParams.minPixelBuffer,a=Math.max((0,r.F2)(this.evaluatedMeshParams.size),o);if("esriGeometryPoint"===e.geometryType)i=e.readXForDisplay(),s=e.readYForDisplay();else{let t=e.readCentroidForDisplay();if(!t)return;i=t?.coords[0],s=t?.coords[1]}t.recordStart(this.instanceId,this.attributeLayout),t.recordBounds(i,s,a,a);let l=t.vertexCount();this._writeVertex(t,n,i,s),t.indexWrite(l+0),t.indexWrite(l+1),t.indexWrite(l+2),t.indexWrite(l+1),t.indexWrite(l+3),t.indexWrite(l+2),t.recordEnd()}}},23040:function(t,e,i){i.d(e,{lW:function(){return F},PW:function(){return y}});var r=i(13507),s=i(4392),n=i(60612),o=i(85356),a=i(66494),l=i(36091),u=i(58087),c=i(85837),h=i(64283),p=i(18716),f=i(62415),d=i(88421);class x{constructor(t){let{offsetX:e,offsetY:i,postAngle:r,fontSize:s,scaleFactor:n,transforms:o}=t;if(this.offsetX=e,this.offsetY=i,this.postAngle=r,this.fontSize=Math.min(s,96),this.transforms=o,o&&o.infos.length>1){let t=(0,d.yl)(s,r,!1,e,i,o);this.fontSize=Math.min(t.size,96),this.postAngle=t.rotation,this.offsetX=t.offsetX,this.offsetY=t.offsetY}n&&(this.fontSize*=n,this.offsetX*=n,this.offsetY*=n)}}var _=i(71193);let y=28,m=[4,4],g=[16,4],k={topLeft:g,topRight:g,bottomLeft:g,bottomRight:g},v=[4,2],w=[4,6],b={topLeft:v,topRight:v,bottomLeft:w,bottomRight:w},T={topLeft:v,topRight:w,bottomLeft:v,bottomRight:w},S={topLeft:w,topRight:w,bottomLeft:m,bottomRight:m},P={topLeft:m,topRight:m,bottomLeft:w,bottomRight:w},E={topLeft:w,topRight:m,bottomLeft:w,bottomRight:m},M={topLeft:m,topRight:w,bottomLeft:m,bottomRight:w},N={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:_.g.UNSIGNED_SHORT,count:2,packPrecisionFactor:l.JS,packTessellation:({minZoom:t,maxZoom:e})=>[t||0,e||y]},clipAngle:{type:_.g.UNSIGNED_BYTE,count:1,packTessellation:({clipAngle:t})=>I(t||0)},referenceSymbol:{type:_.g.BYTE,count:4,packPrecisionFactor:1,packTessellation:(t,e)=>{if(!t.referenceBounds)return[0,0,0,0];let i=(0,a.g)(e.horizontalAlignment),r=(0,a.tf)(e.verticalAlignment),{offsetX:n,offsetY:o,size:l}=t.referenceBounds;return[(0,s.F2)(n),-(0,s.F2)(o),(0,s.F2)(l),i+1<<2|r+1]}}},attributes:{pos:{type:_.g.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:_.g.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:_.g.UNSIGNED_BYTE,count:1,packTessellation:({isBackground:t,mapAligned:e})=>(0,c.u)([[f.mL,t],[f.$r,!!e]])},offset:{type:_.g.SHORT,count:2,packPrecisionFactor:8,packAlternating:{count:4,packTessellation:({offsets:t})=>{let{bottomLeft:e,bottomRight:i,topLeft:r,topRight:s}=t;return[r,s,e,i]}}},textureUV:{type:_.g.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,packTessellation:({texcoords:t})=>{let{bottomLeft:e,bottomRight:i,topLeft:r,topRight:s}=t;return[r,s,e,i]}}},color:{type:_.g.UNSIGNED_BYTE,count:4,normalized:!0,packTessellation:({color:t})=>t},fontSize:{type:_.g.UNSIGNED_SHORT,count:1,packPrecisionFactor:4,packTessellation:({fontSize:t})=>(0,s.F2)(t)},referenceSize:{type:_.g.UNSIGNED_BYTE,count:1,packPrecisionFactor:4,packTessellation:({fontSize:t},{referenceSize:e})=>(0,s.F2)(e??t)},haloColor:{type:_.g.UNSIGNED_BYTE,count:4,normalized:!0,pack:({haloColor:t})=>(0,c.G7)(t)},haloFontSize:{type:_.g.UNSIGNED_SHORT,count:1,packPrecisionFactor:4,pack:({haloFontSize:t})=>(0,s.F2)(t)}}};class F extends p.c{constructor(){super(...arguments),this.vertexSpec=N,this._textMeshParamsPropsInitialized=!1}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._textMeshParamsPropsInitialized&&!this._evaluator.hasDynamicProperties||(this._textMeshTransformProps=new x(this.evaluatedMeshParams),this._textMeshParamsPropsInitialized=!0)}_write(t,e,i){let r=this._getShaping();if(!r)return;let s=e.getDisplayId();if(null!=this.evaluatedMeshParams.placement)return this._writePlacedTextMarkers(t,e,r,i);if(i?.nextPath())return i.nextPoint(),this._writeGlyphs(t,s,i.x,i.y,r,0);if("esriGeometryPolygon"===e.geometryType){let i=e.readCentroidForDisplay();if(!i)return;let[n,o]=i.coords;return this._writeGlyphs(t,s,n,o,r,0)}if("esriGeometryMultipoint"===e.geometryType){let i=e.readGeometryForDisplay();return void i?.forEachVertex((e,i)=>this._writeGlyphs(t,s,e,i,r,0))}let n=e.readXForDisplay(),o=e.readYForDisplay();return this._writeGlyphs(t,s,n,o,r,0)}_writePlacedTextMarkers(t,e,i,r){let a=r??n.z.fromFeatureSetReaderCIM(e);if(!a)return;let l=o.i.getPlacement(a,-1,this.evaluatedMeshParams.placement,(0,s.F2)(1),t.id,(0,h.n)());if(!l)return;let u=e.getDisplayId(),c=l.next();for(;null!=c;){let e=c.tx,r=-c.ty,s=-c.getAngle();this._writeGlyphs(t,u,e,r,i,s),c=l.next()}}_getShaping(t){let e=this._textMeshTransformProps,i=this.evaluatedMeshParams;if(!i.glyphs?.glyphs.length)return null;let n=Math.round((0,s.F2)(e.fontSize)),o=(0,s.F2)(e.offsetX),a=(0,s.F2)(e.offsetY),c=(0,r.uZ)((0,s.F2)(i.lineWidth),l.A5,l.NT),h=l.uk*(0,r.uZ)(i.lineHeightRatio,.25,4);return(0,u.Nr)(i.glyphs,{scale:n/l.iD,angle:e.postAngle,xOffset:o,yOffset:a,horizontalAlignment:i.horizontalAlignment,verticalAlignment:t||i.verticalAlignment,maxLineWidth:c,lineHeight:h,decoration:i.decoration,borderLineSizePx:(0,s.F2)(i.boxBorderLineSize),hasBackground:!!i.boxBackgroundColor,useCIMAngleBehavior:i.useCIMAngleBehavior})}_writeGlyphs(t,e,i,r,n,o,a,l){let u=this.evaluatedMeshParams,h=this._textMeshTransformProps,p=h.fontSize,f=(0,s.F2)(h.offsetX),d=(0,s.F2)(h.offsetY),[x,_]=(0,c._f)(u.scaleInfo,this.getTileInfo());0!==o&&n.setRotation(o);let y=n.bounds,m=i+y.x+f,g=r+y.y-d,k=2*(u.minPixelBuffer?u.minPixelBuffer/p:1),v=Math.max(y.width,y.height)*k;for(let s of(n.textBox&&(t.recordStart(this.instanceId,this.attributeLayout,n.glyphs[0].textureBinding),t.recordBounds(m,g,v,v),this._writeTextBox(t,e,i,r,n.textBox,a,l),t.recordEnd()),n.glyphs)){t.recordStart(this.instanceId,this.attributeLayout,s.textureBinding),t.recordBounds(m,g,v,v);let{texcoords:n,offsets:o}=s;this._writeQuad(t,e,i,r,{texcoords:n,offsets:o,fontSize:p,color:(0,c.G7)(u.color),isBackground:!1,referenceBounds:a,minZoom:x,maxZoom:_,...l}),t.recordEnd()}0!==o&&n.setRotation(-o)}_writeTextBox(t,e,i,r,s,n,o){let a=this.evaluatedMeshParams,{fontSize:l}=this._textMeshTransformProps,{boxBackgroundColor:u,boxBorderLineColor:h}=a,p={isBackground:!0,fontSize:l,referenceBounds:n,...o};u&&(this._writeQuad(t,e,i,r,{texcoords:k,offsets:s.main,color:(0,c.G7)(u),...p}),h||(this._writeQuad(t,e,i,r,{texcoords:S,offsets:s.top,color:(0,c.G7)(u),...p}),this._writeQuad(t,e,i,r,{texcoords:P,offsets:s.bot,color:(0,c.G7)(u),...p}),this._writeQuad(t,e,i,r,{texcoords:E,offsets:s.left,color:(0,c.G7)(u),...p}),this._writeQuad(t,e,i,r,{texcoords:M,offsets:s.right,color:(0,c.G7)(u),...p}))),h&&(this._writeQuad(t,e,i,r,{texcoords:b,offsets:s.top,color:(0,c.G7)(h),...p}),this._writeQuad(t,e,i,r,{texcoords:b,offsets:s.bot,color:(0,c.G7)(h),...p}),this._writeQuad(t,e,i,r,{texcoords:T,offsets:s.left,color:(0,c.G7)(h),...p}),this._writeQuad(t,e,i,r,{texcoords:T,offsets:s.right,color:(0,c.G7)(h),...p}))}_writeQuad(t,e,i,r,s){let n=t.vertexCount();this._writeVertex(t,e,i,r,s),t.indexWrite(n+0),t.indexWrite(n+1),t.indexWrite(n+2),t.indexWrite(n+1),t.indexWrite(n+3),t.indexWrite(n+2)}}let I=t=>Math.round(254/360*t)}}]);
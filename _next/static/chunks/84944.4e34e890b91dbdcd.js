"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84944,63332],{28541:function(e,t,i){i.d(t,{R:function(){return v},w:function(){return x}});var r=i(86641),n=i(94761),o=i(36399),s=i(61764),l=i(39553);class a{constructor(){this._propertyOriginMap=new Map,this._originStores=Array(l.v8),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){let t=new a,i=this._originStores[l.s3.DEFAULTS];i&&i.forEach((e,i)=>{t.set(i,(0,s.d9)(e),l.s3.DEFAULTS)});for(let i=l.s3.SERVICE;i<l.v8;i++){let r=this._originStores[i];r&&r.forEach((r,n)=>{e&&e.has(n)||t.set(n,(0,s.d9)(r),i)})}return t}get(e,t){let i=void 0===t?this._values:this._originStores[t];return i?i.get(e):void 0}keys(e){let t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,i=l.s3.USER){let r=this._originStores[i];if(r||(r=new Map,this._originStores[i]=r),r.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=i){let r=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,i),r!==t}return!1}delete(e,t=l.s3.USER){let i=this._originStores[t];if(!i)return;let r=i.get(e);if(i.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let i=t-1;i>=0;i--){let t=this._originStores[i];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,i);break}}}return r}has(e,t){let i=void 0===t?this._values:this._originStores[t];return!!i&&i.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;let i=this._originStores[t],r=i?.get(e),n=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),n!==r}originOf(e){return this._propertyOriginMap.get(e)||l.s3.DEFAULTS}forEach(e){this._values.forEach(e)}}var u=i(22819),c=i(56529),h=i(64186);let p=e=>{let t=class extends e{constructor(...e){super(...e);let t=(0,c.vw)(this),i=t.store,r=new a;t.store=r,(0,o.M)(t,i,r)}read(e,t){(0,u.i)(this,e,t)}getAtOrigin(e,t){let i=d(this),r=(0,l.M9)(t);if("string"==typeof e)return i.get(e,r);let n={};return e.forEach(e=>{n[e]=i.get(e,r)}),n}originOf(e){return(0,l.x3)(this.originIdOf(e))}originIdOf(e){return d(this).originOf(e)}revert(e,t){let i=d(this),r=(0,l.M9)(t),n=(0,c.vw)(this);("string"==typeof e?"*"===e?i.keys(r):[e]:e).forEach(e=>{n.invalidate(e),i.revert(e,r),n.commit(e)})}};return(0,r._)([(0,h.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],t)};function d(e){return(0,c.vw)(e).store}let m=class extends p(n.Z){};m=(0,r._)([(0,h.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],m);var y=i(15458),f=i(72491);let g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return _(this).delete(e,(0,l.M9)(t))}write(e,t){return(0,f.c)(this,e=e||{},t),e}setAtOrigin(e,t,i){(0,c.vw)(this).setAtOrigin(e,t,(0,l.M9)(i))}removeOrigin(e){let t=_(this),i=(0,l.M9)(e);for(let e of t.keys(i))t.originOf(e)===i&&t.set(e,t.get(e,i),l.s3.USER)}updateOrigin(e,t){let i=_(this),r=(0,l.M9)(t),n=(0,y.U2)(this,e);for(let t=r+1;t<l.v8;++t)i.delete(e,t);i.set(e,n,r)}toJSON(e){return this.write({},e)}};return(t=(0,r._)([(0,h.j)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t};function _(e){return(0,c.vw)(e).store}let v=e=>{let t=class extends g(p(e)){constructor(...e){super(...e)}};return(0,r._)([(0,h.j)("esri.core.MultiOriginJSONSupport")],t)},x=class extends v(n.Z){};x=(0,r._)([(0,h.j)("esri.core.MultiOriginJSONSupport")],x)},57111:function(e,t,i){i.d(t,{C:function(){return r}});let r=["operational-layers","basemap","ground"]},25607:function(e,t,i){function r(){return[1,0,0,0,1,0,0,0,1]}function n(e,t,i,r,n,o,s,l,a){return[e,t,i,r,n,o,s,l,a]}i.d(t,{Ue:function(){return r},Wd:function(){return o},al:function(){return n}});let o=r();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:r,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:n},Symbol.toStringTag,{value:"Module"}))},76465:function(e,t,i){i.d(t,{Q:function(){return s}});var r=i(78628);i(37180);var n=i(35313),o=i(80521);class s{constructor(e=9,t){this._compareMinX=h,this._compareMinY=p,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),_.prune(),v.prune(),x.prune(),w.prune()}all(e){l(this._data,e)}search(e,t){let i=this._data,r=this._toBBox;if(f(e,i))for(_.clear();i;){for(let n=0,o=i.children.length;n<o;n++){let o=i.children[n],s=i.leaf?r(o):o;f(e,s)&&(i.leaf?t(o):y(e,s)?l(o,t):_.push(o))}i=_.pop()}}collides(e){let t=this._data,i=this._toBBox;if(!f(e,t))return!1;for(_.clear();t;){for(let r=0,n=t.children.length;r<n;r++){let n=t.children[r],o=t.leaf?i(n):n;if(f(e,o)){if(t.leaf||y(e,o))return!0;_.push(n)}}t=_.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length){if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){let e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new I([]),this}remove(e){if(!e)return this;let t,i=this._data,n=null,o=0,s=!1,l=this._toBBox(e);for(x.clear(),w.clear();i||x.length>0;){if(i||(i=x.pop(),n=x.data[x.length-1],o=w.pop()??0,s=!0),i.leaf&&-1!==(t=(0,r.cq)(i.children,e,i.children.length,i.indexHint)))return i.children.splice(t,1),x.push(i),this._condense(x),this;s||i.leaf||!y(i,l)?n?(o++,i=n.children[o],s=!1):i=null:(x.push(i),w.push(o),o=0,n=i,i=i.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_build(e,t,i,r){let n=i-t+1,o=this._maxEntries;if(n<=o){let r=new I(e.slice(t,i+1));return a(r,this._toBBox),r}r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/o**(r-1)));let s=new P([]);s.height=r;let l=Math.ceil(n/o),u=l*Math.ceil(Math.sqrt(o));g(e,t,i,u,this._compareMinX);for(let n=t;n<=i;n+=u){let t=Math.min(n+u-1,i);g(e,n,t,l,this._compareMinY);for(let i=n;i<=t;i+=l){let n=Math.min(i+l-1,t);s.children.push(this._build(e,i,n,r-1))}}return a(s,this._toBBox),s}_insert(e,t,i){let r=this._toBBox,n=i?e:r(e);x.clear();let o=function(e,t,i,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==i;){let i,r=1/0,n=1/0;for(let o=0,s=t.children.length;o<s;o++){let s=t.children[o],l=d(s),a=(Math.max(s.maxX,e.maxX)-Math.min(s.minX,e.minX))*(Math.max(s.maxY,e.maxY)-Math.min(s.minY,e.minY))-l;a<n?(n=a,r=l<r?l:r,i=s):a===n&&l<r&&(r=l,i=s)}t=i||t.children[0]}return t}(n,this._data,t,x);for(o.children.push(e),c(o,n);t>=0&&x.data[t].children.length>this._maxEntries;)this._split(x,t),t--;!function(e,t,i){for(let r=i;r>=0;r--)c(t.data[r],e)}(n,x,t)}_split(e,t){let i=e.data[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);let o=this._chooseSplitIndex(i,n,r);if(!o)return;let s=i.children.splice(o,i.children.length-o),l=i.leaf?new I(s):new P(s);l.height=i.height,a(i,this._toBBox),a(l,this._toBBox),t?e.data[t-1].children.push(l):this._splitRoot(i,l)}_splitRoot(e,t){this._data=new P([e,t]),this._data.height=e.height+1,a(this._data,this._toBBox)}_chooseSplitIndex(e,t,i){let r,n,o;r=n=1/0;for(let s=t;s<=i-t;s++){let t=u(e,0,s,this._toBBox),l=u(e,s,i,this._toBBox),a=function(e,t){let i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-i)*Math.max(0,Math.min(e.maxY,t.maxY)-r)}(t,l),c=d(t)+d(l);a<r?(r=a,o=s,n=c<n?c:n):a===r&&c<n&&(n=c,o=s)}return o}_chooseSplitAxis(e,t,i){let r=e.leaf?this._compareMinX:h,n=e.leaf?this._compareMinY:p;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);let n=this._toBBox,o=u(e,0,t,n),s=u(e,i-t,i,n),l=m(o)+m(s);for(let r=t;r<i-t;r++){let t=e.children[r];c(o,e.leaf?n(t):t),l+=m(o)}for(let r=i-t-1;r>=t;r--){let t=e.children[r];c(s,e.leaf?n(t):t),l+=m(s)}return l}_condense(e){for(let t=e.length-1;t>=0;t--){let i=e.data[t];if(0===i.children.length){if(t>0){let n=e.data[t-1],o=n.children;o.splice((0,r.cq)(o,i,o.length,n.indexHint),1)}else this.clear()}else a(i,this._toBBox)}}_initFormat(e){let t=["return a"," - b",";"];this._compareMinX=Function("a","b",t.join(e[0])),this._compareMinY=Function("a","b",t.join(e[1])),this._toBBox=Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){let i=e;for(v.clear();i;){if(!0===i.leaf)for(let e of i.children)t(e);else v.pushArray(i.children);i=v.pop()??null}}function a(e,t){u(e,0,e.children.length,t,e)}function u(e,t,i,r,n){n||(n=new I([])),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let o,s=t;s<i;s++)o=e.children[s],c(n,e.leaf?r(o):o);return n}function c(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function h(e,t){return e.minX-t.minX}function p(e,t){return e.minY-t.minY}function d(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function m(e){return e.maxX-e.minX+(e.maxY-e.minY)}function y(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function g(e,t,i,r,n){let s=[t,i];for(;s.length;){let t=s.pop(),i=s.pop();if(t-i<=r)continue;let l=i+Math.ceil((t-i)/r/2)*r;(0,o.q)(e,l,i,t,n),s.push(i,l,l,t)}}let _=new n.Z,v=new n.Z,x=new n.Z,w=new n.Z({deallocator:void 0});class b{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class S extends b{constructor(){super(...arguments),this.height=1,this.indexHint=new r.SO}}class I extends S{constructor(e){super(),this.children=e,this.leaf=!0}}class P extends S{constructor(e){super(),this.children=e,this.leaf=!1}}},67346:function(e,t,i){i.d(t,{E:function(){return p},H:function(){return h}});var r=i(15514),n=i(25607),o=i(76827),s=i(60964);let l=(0,i(82955).Ue)(),a=(0,n.Ue)(),u=(0,n.Ue)(),c=(0,n.Ue)();function h(e,t,i){return(0,s.s)(l,t[0],t[1],1),(0,s.t)(l,l,(0,r.p4)(a,i)),0===l[2]?(0,o.t8)(e,l[0],l[1]):(0,o.t8)(e,l[0]/l[2],l[1]/l[2])}function p(e,t,i){return d(u,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),d(c,i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]),(0,r.Jp)(e,(0,r.uj)(u,u),c),0!==e[8]&&(e[0]/=e[8],e[1]/=e[8],e[2]/=e[8],e[3]/=e[8],e[4]/=e[8],e[5]/=e[8],e[6]/=e[8],e[7]/=e[8],e[8]/=e[8]),e}function d(e,t,i,n,o,u,c,h,p){(0,r.t8)(e,t,n,u,i,o,c,1,1,1),(0,s.s)(l,h,p,1),(0,r.uj)(a,e);let[d,m,y]=(0,s.t)(l,l,(0,r.p4)(a,a));return(0,r.t8)(a,d,0,0,0,m,0,0,0,y),(0,r.Jp)(e,a,e)}},79578:function(e,t,i){i.d(t,{SR:function(){return h},Ui:function(){return c}});var r=i(689),n=i(20795),o=i(87394),s=i(20058),l=i(5005),a=i(12206),u=i(62329);function c(e){return p(e,!0)}function h(e){return p(e,!1)}function p(e,t){if(null==e)return null;let i=e.spatialReference,n=(0,u.C5)(i),s=(0,r.AK)(e)?e.toJSON():e;if(!n)return s;let c=(0,u.sS)(i)?102100:4326,h=a.UZ[c].maxX,p=a.UZ[c].minX;if((0,l.wp)(s))return d(s,h,p);if((0,l.aW)(s))return s.points=s.points.map(e=>d(e,h,p)),s;if((0,l.YX)(s))return function(e,t){if(!t)return e;let i=(function(e,t){let i=[],{ymin:r,ymax:n,xmin:o,xmax:s}=e,l=e.xmax-e.xmin,[a,u]=t.valid,{x:c,frameId:h}=m(e.xmin,t),{x:p,frameId:d}=m(e.xmax,t),f=c===p&&l>0;if(l>2*u){let e={xmin:o<s?c:p,ymin:r,xmax:u,ymax:n},t={xmin:a,ymin:r,xmax:o<s?p:c,ymax:n},l={xmin:0,ymin:r,xmax:u,ymax:n},m={xmin:a,ymin:r,xmax:0,ymax:n},f=[],g=[];y(e,l)&&f.push(h),y(e,m)&&g.push(h),y(t,l)&&f.push(d),y(t,m)&&g.push(d);for(let e=h+1;e<d;e++)f.push(e),g.push(e);i.push(new _(e,[h]),new _(t,[d]),new _(l,f),new _(m,g))}else c>p||f?i.push(new _({xmin:c,ymin:r,xmax:u,ymax:n},[h]),new _({xmin:a,ymin:r,xmax:p,ymax:n},[d])):i.push(new _({xmin:c,ymin:r,xmax:p,ymax:n},[h]));return i})(e,t).map(e=>e.extent);return i.length<2?i[0]||e:i.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:i.map(e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]])}}(s,n);if((0,l.oU)(s)||(0,l.l9)(s)){let e=(0,o.$P)(v,s),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]},r=(0,a.XZ)(i.xmin,p)*(2*h),n=0===r?s:(0,a.Sy)(s,r);return i.xmin+=r,i.xmax+=r,i.xmax>h?g(n,h,t):i.xmin<p?g(n,p,t):n}return s}function d(e,t,i){if(Array.isArray(e)){let r=e[0];if(r>t){let i=(0,a.XZ)(r,t);e[0]=r+-2*t*i}else if(r<i){let t=(0,a.XZ)(r,i);e[0]=r+-2*i*t}}else{let r=e.x;if(r>t){let i=(0,a.XZ)(r,t);e.x+=-2*t*i}else if(r<i){let t=(0,a.XZ)(r,i);e.x+=-2*i*t}}return e}function m(e,t){let[i,r]=t.valid,n=2*r,o,s=0;return e>r?(o=Math.ceil(Math.abs(e-r)/n),e-=o*n,s=o):e<i&&(o=Math.ceil(Math.abs(e-i)/n),e+=o*n,s=-o),{x:e,frameId:s}}function y(e,t){let{xmin:i,ymin:r,xmax:n,ymax:o}=t;return f(e,i,r)&&f(e,i,o)&&f(e,n,o)&&f(e,n,r)}function f(e,t,i){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax}function g(e,t,i=!0){let r=!(0,l.l9)(e);if(r&&(0,s.Zy)(e),i)return(new x).cut(e,t);let n=r?e.rings:e.paths,o=r?4:2,a=n.length,u=-2*t;for(let e=0;e<a;e++){let t=n[e];if(t&&t.length>=o){let e=[];for(let i of t)e.push([i[0]+u,i[1]]);n.push(e)}}return r?e.rings=n:e.paths=n,e}class _{constructor(e,t){this.extent=e,this.frameIds=t}}let v=(0,n.Ue)();class x{constructor(){this._linesIn=[],this._linesOut=[]}cut(e,t){let i;if(this._xCut=t,e.rings)this._closed=!0,i=e.rings,this._minPts=4;else{if(!e.paths)return null;this._closed=!1,i=e.paths,this._minPts=2}for(let e of i){if(!e||e.length<this._minPts)continue;let t=!0;for(let i of e)t?(this.moveTo(i),t=!1):this.lineTo(i);this._closed&&this.close()}for(let e of(this._pushLineIn(),this._pushLineOut(),i=[],this._linesIn))e&&e.length>=this._minPts&&i.push(e);let r=-2*this._xCut;for(let e of this._linesOut)if(e&&e.length>=this._minPts){for(let t of e)t[0]+=r;i.push(e)}return this._closed?e.rings=i:e.paths=i,e}moveTo(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}lineTo(e){let t=this._side(e[0]);if(t*this._prevSide==-1){let i=this._intersect(this._prevPt,e);this._lineTo(this._xCut,i,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}close(){let e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(e,t,i){this._closed?(this._lineIn.push([i<=0?e:this._xCut,t]),this._lineOut.push([i>=0?e:this._xCut,t])):(i<=0&&this._lineIn.push([e,t]),i>=0&&this._lineOut.push([e,t]))}_lineTo(e,t,i){this._closed?(w(this._lineIn,i<=0?e:this._xCut,t),w(this._lineOut,i>=0?e:this._xCut,t)):i<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([e,t])):i>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([e,t])):this._prevSide<0?(this._lineIn.push([e,t]),this._lineOut.push([e,t])):this._prevSide>0&&(this._lineOut.push([e,t]),this._lineIn.push([e,t]))}_checkClosingPt(e){let t=e.length;t>3&&e[0][0]===this._xCut&&e[t-2][0]===this._xCut&&e[1][0]===this._xCut&&(e[0][1]=e[t-2][1],e.pop())}_side(e){return e<this._xCut?-1:e>this._xCut?1:0}_intersect(e,t){let i=(this._xCut-e[0])/(t[0]-e[0]);return e[1]+i*(t[1]-e[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}function w(e,t,i){let r=e.length;r>1&&e[r-1][0]===t&&e[r-2][0]===t?e[r-1][1]=i:e.push([t,i])}},84944:function(e,t,i){i.r(t),i.d(t,{default:function(){return eD}});var r=i(86641),n=i(50973),o=i(94605),s=i(65223),l=i(28541),a=i(31124),u=i(89312),c=i(1275);i(3457),i(37180);var h=i(37647),p=i(64186),d=i(50713),m=i(39553),y=i(37109),f=i(14066),g=i(59727),_=i(15346),v=i(89973),x=i(23427),w=i(689),b=i(67346),S=i(4392),I=i(15514),P=i(25607),L=i(76827),M=i(24168),C=i(33876),O=i(54001),E=i(20928),T=i(36502);let R=class extends x.j{projectOrWarn(e,t){if(null==e)return e;let{geometry:i,pending:r}=(0,E.projectOrLoad)(e,t);return r?null:r||i?i:(s.Z.getLogger(this).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:e,sourceSpatialReference:e.spatialReference,targetSpatialReference:t}),null)}},A=R=(0,r._)([(0,p.j)("esri.layers.support.GeoreferenceBase")],R),j=(0,P.Ue)(),B=(0,M.Ue)(),Z=class extends w.wq{};(0,r._)([(0,u.Cb)({type:Number,json:{write:!0}})],Z.prototype,"x",void 0),(0,r._)([(0,u.Cb)({type:Number,json:{write:!0}})],Z.prototype,"y",void 0),Z=(0,r._)([(0,p.j)("esri.layers.support.ControlPointsGeoreference.ControlPointJSONType")],Z);let G=class extends x.j{constructor(){super(...arguments),this.sourcePoint=null,this.mapPoint=null}};(0,r._)([(0,u.Cb)()],G.prototype,"sourcePoint",void 0),(0,r._)([(0,u.Cb)({type:C.Z})],G.prototype,"mapPoint",void 0),G=(0,r._)([(0,p.j)("esri.layers.support.ControlPointsGeoreference.ControlPoint")],G);let U=class extends(0,w.eC)(A){constructor(e){super(e),this.controlPoints=null,this.height=0,this.type="control-points",this.width=0}readControlPoints(e,t){let i=T.Z.fromJSON(t.spatialReference),r=(0,P.al)(...t.coefficients,1);return e.map(e=>((0,L.t8)(B,e.x,e.y),(0,b.H)(B,B,r),{sourcePoint:e,mapPoint:new C.Z({x:B[0],y:B[1],spatialReference:i})}))}writeControlPoints(e,t,i,r){if(null!=this.transform)null!=e&&H(e[0])&&(t.controlPoints=e.map(e=>{let t=e.sourcePoint;return{x:t.x,y:t.y}}),t.spatialReference=e[0].mapPoint.spatialReference.toJSON(),t.coefficients=this.transform.slice(0,8));else{let e=new o.Z("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration.",{layer:r?.layer,georeference:this});r?.messages?r.messages.push(e):s.Z.getLogger(this).error(e.name,e.message)}}get coords(){if(null==this.controlPoints)return null;let e=this._updateTransform(j);if(null==e||!H(this.controlPoints[0]))return null;let t=this.controlPoints[0].mapPoint.spatialReference;return function(e,t,i,r){let n=(0,M.al)(0,i),o=(0,M.al)(0,0),s=(0,M.al)(t,0),l=(0,M.al)(t,i);return(0,b.H)(n,n,e),(0,b.H)(o,o,e),(0,b.H)(s,s,e),(0,b.H)(l,l,e),new O.Z({rings:[[n,o,s,l,n]],spatialReference:r})}(e,this.width,this.height,t)}set coords(e){if(null==this.controlPoints||!H(this.controlPoints[0]))return;let t=this.controlPoints[0].mapPoint.spatialReference;if(null==(e=this.projectOrWarn(e,t)))return;let{width:i,height:r}=this,{rings:[[n,o,s,l]]}=e,a={sourcePoint:(0,S.vW)(0,r),mapPoint:new C.Z({x:n[0],y:n[1],spatialReference:t})},u={sourcePoint:(0,S.vW)(0,0),mapPoint:new C.Z({x:o[0],y:o[1],spatialReference:t})},c={sourcePoint:(0,S.vW)(i,0),mapPoint:new C.Z({x:s[0],y:s[1],spatialReference:t})},h={sourcePoint:(0,S.vW)(i,r),mapPoint:new C.Z({x:l[0],y:l[1],spatialReference:t})};H(a)&&H(u)&&H(c)&&H(h)&&(k(j,a,u,c,h),this.controlPoints=this.controlPoints.map(({sourcePoint:e})=>((0,L.t8)(B,e.x,e.y),(0,b.H)(B,B,j),{sourcePoint:e,mapPoint:new C.Z({x:B[0],y:B[1],spatialReference:t})})))}get inverseTransform(){return null==this.transform?null:(0,I.U_)((0,P.Ue)(),this.transform)}get transform(){return this._updateTransform()}toMap(e){if(null==e||null==this.transform||null==this.controlPoints||!H(this.controlPoints[0]))return null;(0,L.t8)(B,e.x,e.y);let t=this.controlPoints[0].mapPoint.spatialReference;return(0,b.H)(B,B,this.transform),new C.Z({x:B[0],y:B[1],spatialReference:t})}toSource(e){if(null==e||null==this.inverseTransform||null==this.controlPoints||!H(this.controlPoints[0]))return null;let t=this.controlPoints[0].mapPoint.spatialReference;return e=e.normalize(),null==(e=(0,E.projectOrLoad)(e,t).geometry)?null:((0,L.t8)(B,e.x,e.y),(0,b.H)(B,B,this.inverseTransform),(0,S.vW)(B[0],B[1]))}toSourceNormalized(e){let t=this.toSource(e);return null!=t&&(t.x/=this.width,t.y/=this.height),t}_updateTransform(e){var t,i,r,n,o;let{controlPoints:s,width:l,height:a}=this;if(!(null!=s&&l>0&&a>0))return null;let[u,c,h,p]=s;if(!H(u))return null;let d=u.mapPoint.spatialReference,m=this._projectControlPoint(c,d),y=this._projectControlPoint(h,d),f=this._projectControlPoint(p,d);if(!m.valid||!y.valid||!f.valid||!H(m.controlPoint))return null;null==e&&(e=(0,P.Ue)());let g=null;return(g=H(y.controlPoint)&&H(f.controlPoint)?k(e,u,m.controlPoint,y.controlPoint,f.controlPoint):H(y.controlPoint)?(t=e,i=m.controlPoint,r=y.controlPoint,$(N,D,u),$(Y,V,i),$(X,F,r),(0,L.t7)(W,N,Y,.5),(0,L.U1)(W,X,W,Math.PI),(0,L.t7)(z,D,V,.5),(0,L.U1)(z,F,z,Math.PI),ee(t,N,Y,X,W,D,V,F,z)):(n=e,o=m.controlPoint,$(N,D,u),$(Y,V,o),(0,L.U1)(X,Y,N,J),(0,L.U1)(W,N,Y,J),(0,L.U1)(F,V,D,-J),(0,L.U1)(z,D,V,-J),ee(n,N,Y,X,W,D,V,F,z))).every(e=>0===e)?null:g}_projectControlPoint(e,t){if(!H(e))return{valid:!0,controlPoint:e};let{sourcePoint:i,mapPoint:r}=e,{geometry:n,pending:o}=(0,E.projectOrLoad)(r,t);return o?{valid:!1,controlPoint:null}:o||n?{valid:!0,controlPoint:{sourcePoint:i,mapPoint:n}}:(s.Z.getLogger(this).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:e,sourceSpatialReference:r.spatialReference,targetSpatialReference:t}),{valid:!1,controlPoint:null})}};function H(e){return null!=e?.sourcePoint&&null!=e.mapPoint}(0,r._)([(0,u.Cb)({type:[G],json:{write:{allowNull:!1,isRequired:!0,target:{controlPoints:{type:[Z]},coefficients:{type:[Number]},spatialReference:{type:T.Z}}}}})],U.prototype,"controlPoints",void 0),(0,r._)([(0,h.r)("controlPoints")],U.prototype,"readControlPoints",null),(0,r._)([(0,d.c)("controlPoints")],U.prototype,"writeControlPoints",null),(0,r._)([(0,u.Cb)({clonable:!1})],U.prototype,"coords",null),(0,r._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],U.prototype,"height",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],U.prototype,"inverseTransform",null),(0,r._)([(0,u.Cb)({readOnly:!0})],U.prototype,"transform",null),(0,r._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],U.prototype,"width",void 0),U=(0,r._)([(0,p.j)("esri.layers.support.ControlPointsGeoreference")],U);let N=(0,M.Ue)(),Y=(0,M.Ue)(),X=(0,M.Ue)(),W=(0,M.Ue)(),D=(0,M.Ue)(),V=(0,M.Ue)(),F=(0,M.Ue)(),z=(0,M.Ue)(),J=Math.PI/2;function $(e,t,i){(0,L.t8)(e,i.sourcePoint.x,i.sourcePoint.y),(0,L.t8)(t,i.mapPoint.x,i.mapPoint.y)}function k(e,t,i,r,n){return $(N,D,t),$(Y,V,i),$(X,F,r),$(W,z,n),ee(e,N,Y,X,W,D,V,F,z)}let q=Array(8).fill(0),K=Array(8).fill(0);function Q(e,t,i,r,n){return e[0]=t[0],e[1]=t[1],e[2]=i[0],e[3]=i[1],e[4]=r[0],e[5]=r[1],e[6]=n[0],e[7]=n[1],e}function ee(e,t,i,r,n,o,s,l,a){return(0,b.E)(e,Q(q,t,i,r,n),Q(K,o,s,l,a))}let et=U;var ei=i(54748),er=i(9245),en=i(72659),eo=i(85222),es=i(2090),el=i(21962);let ea=(0,M.Ue)(),eu=class extends A{constructor(e){super(e),this.bottomLeft=null,this.bottomRight=null,this.topLeft=null,this.topRight=null,this.type="corners"}get coords(){let{topLeft:e,topRight:t,bottomLeft:i,bottomRight:r}=this;if(null==e||null==t||null==i||null==r)return null;let n=e.spatialReference;return t=this.projectOrWarn(t,n),i=this.projectOrWarn(i,n),r=this.projectOrWarn(r,n),null==t||null==i||null==r?null:new O.Z({rings:[[[i.x,i.y],[e.x,e.y],[t.x,t.y],[r.x,r.y],[i.x,i.y]]],spatialReference:n})}set coords(e){let{topLeft:t}=this;if(null==t)return;let i=t.spatialReference;if(null==(e=this.projectOrWarn(e,i)))return;let{rings:[[r,n,o,s]]}=e;this.bottomLeft=new C.Z({x:r[0],y:r[1],spatialReference:i}),this.topLeft=new C.Z({x:n[0],y:n[1],spatialReference:i}),this.topRight=new C.Z({x:o[0],y:o[1],spatialReference:i}),this.bottomRight=new C.Z({x:s[0],y:s[1],spatialReference:i})}toSourceNormalized(e){let{topLeft:t,topRight:i,bottomRight:r,bottomLeft:n}=this;if(null==e||null==t||null==i||null==r||null==n)return null;let o=t.spatialReference;e=e.normalize();let s=(0,E.projectOrLoad)(e,o).geometry;if(null==s)return null;(0,L.t8)(ea,s.x,s.y);let l=(0,b.E)((0,P.Ue)(),[t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y],[0,0,0,1,1,0,1,1]);return(0,b.H)(ea,ea,l),(0,S.vW)(ea[0],ea[1])}};(0,r._)([(0,u.Cb)({clonable:!1})],eu.prototype,"coords",null),(0,r._)([(0,u.Cb)({type:C.Z})],eu.prototype,"bottomLeft",void 0),(0,r._)([(0,u.Cb)({type:C.Z})],eu.prototype,"bottomRight",void 0),(0,r._)([(0,u.Cb)({type:C.Z})],eu.prototype,"topLeft",void 0),(0,r._)([(0,u.Cb)({type:C.Z})],eu.prototype,"topRight",void 0);let ec=eu=(0,r._)([(0,p.j)("esri.layers.support.CornersGeoreference")],eu);var eh=i(13507),ep=i(77584),ed=i(9377);let em=class extends A{constructor(e){super(e),this.extent=null,this.rotation=0,this.type="extent-and-rotation"}get coords(){let e;if(null==this.extent)return null;let{xmin:t,ymin:i,xmax:r,ymax:n,spatialReference:o}=this.extent;if(this.rotation){let{x:o,y:s}=this.extent.center,l=ey(o,s,this.rotation);(e=[l(t,i),l(t,n),l(r,n),l(r,i)]).push(e[0])}else e=[[t,i],[t,n],[r,n],[r,i],[t,i]];return new O.Z({rings:[e],spatialReference:o})}set coords(e){if(null==e||null==this.extent)return;let t=this.extent.spatialReference;if(e=this.projectOrWarn(e,t),null==e?.extent)return;let{rings:[[i,r,n]],extent:{center:{x:o,y:s}}}=e,l=(0,eh.BV)(Math.PI/2-Math.atan2(r[1]-i[1],r[0]-i[0])),a=ey(o,s,-l),[u,c]=a(i[0],i[1]),[h,p]=a(n[0],n[1]);this.extent=new ed.Z({xmin:u,ymin:c,xmax:h,ymax:p,spatialReference:t}),this.rotation=l}toSourceNormalized(e){let{extent:t,rotation:i}=this;if(null==e||null==t)return null;let{xmin:r,ymin:n,xmax:o,ymax:s,center:l,spatialReference:a}=t;e=e.normalize();let u=(0,E.projectOrLoad)(e,a).geometry;if(null==u)return null;let c=u.x,h=u.y;return i&&([c,h]=ey(l.x,l.y,-i)(c,h)),(0,S.vW)((0,eh.bA)(c,r,o,0,1),(0,eh.bA)(h,s,n,0,1))}};function ey(e,t,i){let r=(0,ep.c$)(i),n=Math.cos(r),o=Math.sin(r);return(i,r)=>[n*(i-e)+o*(r-t)+e,n*(r-t)-o*(i-e)+t]}(0,r._)([(0,u.Cb)({clonable:!1})],em.prototype,"coords",null),(0,r._)([(0,u.Cb)({type:ed.Z})],em.prototype,"extent",void 0),(0,r._)([(0,u.Cb)({type:Number})],em.prototype,"rotation",void 0);let ef=em=(0,r._)([(0,p.j)("esri.layers.support.ExtentAndRotationGeoreference")],em);i(55066);var eg=i(62329);function e_(e,t){let i=(0,m.M9)(t);return"media"===e?.type&&!!e.portalItem&&null!=i&&i>m.s3.PORTAL_ITEM}let ev=class extends(0,es.iv)((0,l.R)(el.Z)){constructor(e){super(e),this.georeference=null,this.opacity=1}readGeoreference(e){return et.fromJSON(e)}writeGeoreference(e,t,i,r){let n=r?.resources?.pendingOperations,l=()=>{let n=function(e,t,i){if(!e||"control-points"===e.type)return e;let{coords:r}=e;if(5!==r?.rings[0]?.length)return null;let[n,o,s,l]=r.rings[0],{spatialReference:a}=r;return new et({controlPoints:[{mapPoint:new C.Z({x:n[0],y:n[1],spatialReference:a}),sourcePoint:(0,S.vW)(0,i)},{mapPoint:new C.Z({x:o[0],y:o[1],spatialReference:a}),sourcePoint:(0,S.vW)(0,0)},{mapPoint:new C.Z({x:s[0],y:s[1],spatialReference:a}),sourcePoint:(0,S.vW)(t,0)},{mapPoint:new C.Z({x:l[0],y:l[1],spatialReference:a}),sourcePoint:(0,S.vW)(t,i)}],width:t,height:i})}(this.georeference,this.contentWidth,this.contentHeight);if(n){if("control-points"!==e.type&&s.Z.getLogger(this).warn(`only georeference of type 'control-points' may be persisted. The georeference of type '${e.type}' has been automatically converted.`),4!==n.controlPoints?.length&&r?.messages)return void r.messages.push(new o.Z("property:unsupported","only 'control-points' georeference with 4 control points may be persisted."));t[i]=n.write({},r)}};if("control-points"!==e.type&&!this.loaded&&n)return t[i]={},void n.push(this.load().then(l));l()}get contentWidth(){return 0}get contentHeight(){return 0}toSource(e){let{georeference:t,contentWidth:i,contentHeight:r}=this;if(null==e||null==t||0===i||0===r)return null;let n=t.toSourceNormalized(e);return null==n?null:(n.x*=i,n.y*=r,n)}};(0,r._)([(0,u.Cb)({types:{key:"type",base:A,typeMap:{"control-points":et,corners:ec,"extent-and-rotation":ef}},json:{write:!0,types:{key:"type",base:A,typeMap:{"control-points":et}}}})],ev.prototype,"georeference",void 0),(0,r._)([(0,h.r)("georeference")],ev.prototype,"readGeoreference",null),(0,r._)([(0,d.c)("georeference")],ev.prototype,"writeGeoreference",null),(0,r._)([(0,u.Cb)({json:{read:!1,write:!1}})],ev.prototype,"opacity",void 0);let ex=ev=(0,r._)([(0,p.j)("esri.layers.support.MediaElementBase")],ev);var ew=i(59959),eb=i(37144);let eS=class extends ex{constructor(e){super(e),this.animationOptions=null,this.content=null,this.image=null,this.type="image",this.image=null}load(){let e=this.image;if("string"==typeof e){let t=(0,er.n$)(e).then(e=>{this._set("content",e)});this.addResolvingPromise(t)}else if(e instanceof HTMLImageElement){let t=e.decode().then(()=>{this._set("content",e)});this.addResolvingPromise(t)}else e?this._set("content",e):this.addResolvingPromise(Promise.reject(new o.Z("image-element:invalid-image-type","Invalid image type",{image:e})));return Promise.resolve(this)}get contentWidth(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalWidth:this.content.width}get contentHeight(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalHeight:this.content.height}readImage(e,t,i){return(0,eb.f)(t.url,i)}writeImage(e,t,i,r){if(null==e)return;let n=r?.portalItem,o=r?.resources;if(!n||!o)return void("string"==typeof e&&(t[i]=(0,eb.t)(e,r)));let s="string"!=typeof e||(0,en.HK)(e)||(0,en.jc)(e)?null:e;if(s){if(null==(0,eb.i)(s))return void(t[i]=s);let e=(0,eb.t)(s,{...r,verifyItemRelativeUrls:r?.verifyItemRelativeUrls?{writtenUrls:r.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},eb.M.NO);if(n&&e&&!(0,en.YP)(e))return o.toKeep.push({resource:n.resourceFromPath(e),compress:!1}),void(t[i]=e)}t[i]="<pending>",o.pendingOperations.push(eP(e).then(e=>{let r=function(e,t){let i=(0,eo.DO)(),r=`${(0,en.v_)("media",i)}.${(0,ew.B)({type:"blob",blob:e})}`;return t.resourceFromPath(r)}(e,n);t[i]=r.itemRelativeUrl,o.toAdd.push({resource:r,content:{type:"blob",blob:e},compress:!1,finish:e=>{this.image=e.url}})}))}write(e,t){let i=super.write(e,t);return"mediaType"in i&&!i.url&&delete i.mediaType,i}};(0,r._)([(0,u.Cb)()],eS.prototype,"animationOptions",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],eS.prototype,"content",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],eS.prototype,"contentWidth",null),(0,r._)([(0,u.Cb)({readOnly:!0})],eS.prototype,"contentHeight",null),(0,r._)([(0,u.Cb)({json:{name:"url",type:String,write:{overridePolicy:(e,t,i)=>({enabled:!e_(i?.layer,i?.origin)})}}})],eS.prototype,"image",void 0),(0,r._)([(0,h.r)("image",["url"])],eS.prototype,"readImage",null),(0,r._)([(0,d.c)("image")],eS.prototype,"writeImage",null),(0,r._)([(0,u.Cb)({readOnly:!0,json:{read:!1,write:{target:"mediaType",ignoreOrigin:!0}}})],eS.prototype,"type",void 0);let eI=eS=(0,r._)([(0,p.j)("esri.layers.support.ImageElement")],eS);async function eP(e){return"string"==typeof e?(0,en.HK)(e)?(0,en.fw)(e):(await (0,ei.Z)(e,{responseType:"blob"})).data:new Promise(t=>(function(e){if(e instanceof HTMLCanvasElement)return e;let t=e instanceof HTMLImageElement?e.naturalWidth:e.width,i=e instanceof HTMLImageElement?e.naturalHeight:e.height,r=document.createElement("canvas"),n=r.getContext("2d");return r.width=t,r.height=i,e instanceof HTMLImageElement?n.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&n.putImageData(e,0,0),r})(e).toBlob(t))}var eL=i(4514),eM=i(60163),eC=i(31534),eO=i(20128),eE=i(20795),eT=i(66515),eR=i(70788),eA=i(70817),ej=i(75969);let eB=class extends ex{constructor(e){super(e),this.autoplay=!0,this.content=null,this.type="video"}load(){let e=this.video;if("string"==typeof e){let t=document.createElement("video");t.src=e,t.crossOrigin="anonymous",t.autoplay=!0,t.muted=!0,t.loop=!0,t.playsInline=!0,this.addResolvingPromise(this._loadVideo(t).then(()=>{this._set("content",t)}))}else e instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(e).then(()=>{this._set("content",e)})):this.addResolvingPromise(Promise.reject(new o.Z("video-element:invalid-video-type","Invalid video type",{video:e})));return Promise.resolve(this)}get contentWidth(){return this.content?.videoWidth??0}get contentHeight(){return this.content?.videoHeight??0}set video(e){"not-loaded"===this.loadStatus?this._set("video",e):s.Z.getLogger(this).error("#video","video cannot be changed after the element is loaded.")}_loadVideo(e){return new Promise((t,i)=>{let r=(0,ej.IH)(e,"canplay",()=>{this.removeHandles("canplay"),this.autoplay?e.play().then(t,i):t()});this.addHandles(r,"canplay"),"anonymous"!==e.crossOrigin&&(e.crossOrigin="anonymous",e.src?.includes("blob:")||(e.src=e.src))})}};(0,r._)([(0,u.Cb)()],eB.prototype,"autoplay",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],eB.prototype,"content",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],eB.prototype,"contentWidth",null),(0,r._)([(0,u.Cb)({readOnly:!0})],eB.prototype,"contentHeight",null),(0,r._)([(0,u.Cb)()],eB.prototype,"video",null);let eZ=eB=(0,r._)([(0,p.j)("esri.layers.support.VideoElement")],eB),eG=n.Z.ofType({key:"type",defaultKeyValue:"image",base:ex,typeMap:{image:eI,video:eZ}}),eU=class extends el.Z.LoadableMixin((0,eC.v)(eM.Z.EventedAccessor)){constructor(e){super(e),this._index=new eR.H,this._elementViewsMap=new Map,this._elementsIndexes=new Map,this._elementsChangedHandler=e=>{for(let t of e.removed){let e=this._elementViewsMap.get(t);this._elementViewsMap.delete(t),this._index.delete(e),this.removeHandles(e),e.destroy(),this.notifyChange("fullExtent")}let{spatialReference:t}=this;for(let i of e.added){if(this._elementViewsMap.get(i))continue;let e=new eA.L({spatialReference:t,element:i});this._elementViewsMap.set(i,e);let r=(0,eO.YP)(()=>e.coords,()=>this._updateIndexForElement(e,!1));this._updateIndexForElement(e,!0),this.addHandles(r,e)}this._elementsIndexes.clear(),this.elements.forEach((e,t)=>this._elementsIndexes.set(e,t)),this.emit("refresh")},this.elements=new eG}async load(e){if((0,a.k_)(e),!this.spatialReference){let e=this.elements.find(e=>null!=e.georeference?.coords);this._set("spatialReference",e?e.georeference.coords.spatialReference:T.Z.WGS84)}return this._elementsChangedHandler({added:this.elements.items,removed:[]}),this.addHandles(this.elements.on("change",this._elementsChangedHandler)),this}destroy(){this._index.clear(),this._elementViewsMap.clear(),this._elementsIndexes.clear()}set elements(e){this._set("elements",(0,eL.Z)(e,this._get("elements"),eG))}get fullExtent(){if("not-loaded"===this.loadStatus)return null;let e=this._index.fullBounds;return null==e?null:new ed.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:this.spatialReference})}set spatialReference(e){"not-loaded"===this.loadStatus?this._set("spatialReference",e):s.Z.getLogger(this).error("#spatialReference","spatialReference cannot be changed after the source is loaded.")}async queryElements(e,t){await this.load(),await (0,E.initializeProjection)(e.spatialReference,this.spatialReference,null,t);let i=(0,eg.fS)(e.spatialReference,this.spatialReference)?e:(0,E.project)(e,this.spatialReference);if(!i)return[];let r=i.normalize(),n=[];for(let e of r)this._index.forEachInBounds((0,eE.oJ)(e),({normalizedCoords:t,element:i})=>{null!=t&&(0,eT.Nl)(e,t)&&n.push(i)});return n.sort((e,t)=>this._elementsIndexes.get(e)-this._elementsIndexes.get(t)),n}hasElement(e){return this.elements.includes(e)}_updateIndexForElement(e,t){let i=e.normalizedBounds,r=this._index.has(e),n=null!=i;this._index.delete(e),n&&this._index.set(e,i),this.notifyChange("fullExtent"),t||(r!==n?this.emit("refresh"):this.emit("change",{element:e.element}))}};(0,r._)([(0,u.Cb)()],eU.prototype,"elements",null),(0,r._)([(0,u.Cb)({readOnly:!0})],eU.prototype,"fullExtent",null),(0,r._)([(0,u.Cb)()],eU.prototype,"spatialReference",null);let eH=eU=(0,r._)([(0,p.j)("esri.layers.support.LocalMediaElementSource")],eU);var eN=i(86264);function eY(e){return"object"==typeof e&&null!=e&&"type"in e}function eX(e){return eY(e)&&"image"===e.type}let eW=class extends(0,f.h7)((0,v.M)((0,g.q)((0,_.I)((0,l.R)(y.Z))))){constructor(e){super(e),this.effectiveSource=null,this.georeference=null,this.copyright=null,this.operationalLayerType="MediaLayer",this.spatialReference=null,this.type="media",this._debouncedSaveOperations=(0,a.Ds)(async(e,t,r)=>{let{save:n,saveAs:o}=await i.e(96110).then(i.bind(i,99963));switch(e){case eN.x.SAVE:return n(this,t);case eN.x.SAVE_AS:return o(this,r,t)}}),this.source=new eH}load(e){return this.addResolvingPromise(this._doLoad(e)),Promise.resolve(this)}async _doLoad(e){await this.loadFromPortal({supportedTypes:["Media Layer"]},e);let t=this.source;if(!t)throw new o.Z("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer.");let i=this._getSourceOverride(t,this.georeference);i&&(this.setAtOrigin("source",i,"web-map"),this.setAtOrigin("source",i,"web-scene"),t=i);let r=eY(t)?new eH({elements:new n.Z([t])}):t;this._set("effectiveSource",r),this.spatialReference&&(r.spatialReference=this.spatialReference),await r.load(e),this.spatialReference=r.spatialReference}destroy(){this.effectiveSource?.destroy(),this.effectiveSource!==this.source&&this.source?.destroy()}readGeoreference(e,t){return e&&"itemId"in t&&t.itemId?e:void 0}get fullExtent(){return this.loaded?this.effectiveSource.fullExtent:null}set source(e){"loaded"!==this.loadStatus&&"failed"!==this.loadStatus?this._set("source",e):s.Z.getLogger(this).error("#source","source cannot be changed after the layer is loaded.")}castSource(e){return e?Array.isArray(e)?new eH({elements:new n.Z(e)}):e instanceof n.Z?new eH({elements:e}):e:null}readSource(e,t,i){if("itemId"in t&&t.itemId)return;let r=this._createSource(t);return r?.read(t,i),r}writeSource(e,t,i,r){if(e&&e instanceof eH){let t=e.elements.length;if(1!==t)return void(r?.messages&&r.messages.push(new o.Z("media-layer:unsupported-source",`local media element source can only be persisted if it contains exactly one ImageElement, but it has ${t}.`)));e=e.elements.at(0)}eX(e)?e.write(t,r):r?.messages&&(e?r.messages.push(new o.Z("media-layer:unsupported-source","only media elements of type 'ImageElement' can be persisted")):r.messages.push(new o.Z("media-layer:unsupported-source","the media layer is missing a source")))}async save(e){return this._debouncedSaveOperations(eN.x.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(eN.x.SAVE_AS,t,e)}_createSource(e){if("mediaType"in e)switch(e.mediaType){case"image":return new eI;case"video":return new eZ}return null}_getSourceOverride(e,t){if(eY(e)&&this.originIdOf("source")===m.s3.PORTAL_ITEM&&t&&(this.originIdOf("georeference")===m.s3.WEB_MAP||this.originIdOf("georeference")===m.s3.WEB_SCENE)){let i=e.toJSON(),r=this._createSource(i);return r.read({...i},{origin:"portal-item"}),r.read({georeference:t},{origin:"web-map"}),r.read({georeference:t},{origin:"web-scene"}),r}return null}};(0,r._)([(0,u.Cb)({readOnly:!0})],eW.prototype,"effectiveSource",void 0),(0,r._)([(0,u.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!0}}}})],eW.prototype,"georeference",void 0),(0,r._)([(0,h.r)("web-document","georeference")],eW.prototype,"readGeoreference",null),(0,r._)([(0,u.Cb)({type:String})],eW.prototype,"copyright",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],eW.prototype,"fullExtent",null),(0,r._)([(0,u.Cb)({type:["MediaLayer"]})],eW.prototype,"operationalLayerType",void 0),(0,r._)([(0,u.Cb)({type:["show","hide"]})],eW.prototype,"listMode",void 0),(0,r._)([(0,u.Cb)({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1,target:{url:{type:String},mediaType:{type:["image"]},georeference:{type:et}},overridePolicy(e,t,i){return{enabled:!0,allowNull:!1,ignoreOrigin:e_(this,i?.origin)&&eX(e)&&!!e.georeference&&e.originIdOf("georeference")>m.s3.PORTAL_ITEM}}}}})],eW.prototype,"source",null),(0,r._)([(0,c.p)("source")],eW.prototype,"castSource",null),(0,r._)([(0,h.r)("source",["url"])],eW.prototype,"readSource",null),(0,r._)([(0,d.c)("source")],eW.prototype,"writeSource",null),(0,r._)([(0,u.Cb)()],eW.prototype,"spatialReference",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],eW.prototype,"type",void 0);let eD=eW=(0,r._)([(0,p.j)("esri.layers.MediaLayer")],eW)},70788:function(e,t,i){i.d(t,{H:function(){return l}});var r=i(37180),n=i(76465),o=i(20795);let s={minX:0,minY:0,maxX:0,maxY:0};class l{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new n.Q(9,(0,r.Z)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){let e=Array(this._idByBounds.size),t=0;this._idByBounds.forEach((i,r)=>{e[t++]=r}),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(e=>this._idByBounds.has(e))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;let e=(0,o.cS)();for(let t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){let t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){var i,r;this._loadIndex(),i=this._index,r=e=>t(this._idByBounds.get(e)),s.minX=e[0],s.minY=e[1],s.maxX=e[2],s.maxY=e[3],i.search(s,r)}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){let t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},59727:function(e,t,i){i.d(t,{q:function(){return x}});var r=i(86641),n=i(14627),o=i(94605),s=i(72659),l=i(89312),a=i(61733);i(3457),i(37180);var u=i(37647),c=i(64186),h=i(50713),p=i(57111),d=i(22819),m=i(72491);let y={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},f={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},g={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},_={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":y,"web-map/basemap":f,"web-map/tables":g,"link-chart/operational-layers":{...y,LinkChartLayer:!0},"link-chart/basemap":f,"link-chart/tables":g,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};var v=i(78298);let x=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,i){return"Group Layer"===i?.portalItem?.type?void 0:e}writeListMode(e,t,i,r){(r&&"ground"===r.layerContainerType||e&&(0,m.d)(this,i,{},r))&&(t[i]=e)}writeOperationalLayerType(e,t,i,r){e&&"tables"!==r?.layerContainerType&&(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}readTimeExtent(e){return e?n.Z.fromArray(e):null}writeTimeExtent(e,t,i,r){e&&"tables"!==r.layerContainerType&&(e.isEmpty?r?.messages&&r.messages.push(new o.Z("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[i]=e.toArray())}read(e,t){t&&(t.layer=this),(0,d.$)(this,e,t=>super.read(e,t),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){let e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,i=_[e],r=!!i?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(r=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(r=!1),!r)return t.messages?.push(new o.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}let i=super.write(e,{...t,layer:this}),r=!!t&&!!t.messages&&!!t.messages.filter(e=>e instanceof o.Z&&"web-document-write:property-required"===e.name).length;return(0,s.jc)(i?.url)?(t?.messages?.push(new o.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&r?null:i}beforeSave(){}};return(0,r._)([(0,l.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,r._)([(0,u.r)("id",["id"])],t.prototype,"readId",null),(0,r._)([(0,l.Cb)(v.rT)],t.prototype,"listMode",void 0),(0,r._)([(0,h.c)("listMode")],t.prototype,"writeListMode",null),(0,r._)([(0,l.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:p.C}}}}})],t.prototype,"operationalLayerType",void 0),(0,r._)([(0,h.c)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,r._)([(0,l.Cb)(v.Oh)],t.prototype,"opacity",void 0),(0,r._)([(0,l.Cb)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,r._)([(0,h.c)("title"),(0,h.c)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,r._)([(0,l.Cb)({type:n.Z,json:{origins:{"web-scene":{write:{layerContainerTypes:p.C}}}}})],t.prototype,"visibilityTimeExtent",void 0),(0,r._)([(0,u.r)("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),(0,r._)([(0,h.c)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[a.z8,a.p2]]}})],t.prototype,"writeTimeExtent",null),(0,r._)([(0,l.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:p.C}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=(0,r._)([(0,c.j)("esri.layers.mixins.OperationalLayer")],t)}},15346:function(e,t,i){i.d(t,{I:function(){return b}});var r=i(86641),n=i(39301),o=i(94596),s=i(54748),l=i(27817),a=i(94605),u=i(65223),c=i(36152),h=i(31124),p=i(72659),d=i(89312);i(37180),i(3457);var m=i(37647),y=i(64186),f=i(50713),g=i(24243),_=i(81449),v=i(20550),x=i(86541),w=i(63332);let b=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,c.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new v.default({id:t.itemId,portal:i?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{let{load:r}=await Promise.all([i.e(22065),i.e(86487)]).then(i.bind(i,86487));return(0,h.k_)(t),await r({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(e){throw(0,h.D_)(e)||u.Z.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch(e=>((0,h.r9)(e),!0)))}async setUserPrivileges(e,t){if(!n.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{let{features:{edit:i,fullEdit:r},content:{updateItem:n}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",r),this._set("userHasUpdateItemPrivileges",n)}catch(e){(0,h.r9)(e)}}async _fetchUserPrivileges(e,t){let i,r,n=this.portalItem;if(!e||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(t);let s=e===n.id;if(s&&n.portal.user)return(0,w.Ss)(n);if(s)i=n.portal.url;else try{i=await (0,g.oP)(this.url,t)}catch(e){(0,h.r9)(e)}if(!i||!(0,p.Zo)(i,n.portal.url))return this._fetchFallbackUserPrivileges(t);try{let e=null!=t?t.signal:null;r=await o.id?.getCredential(`${i}/sharing`,{prompt:!1,signal:e})}catch(e){(0,h.r9)(e)}if(!r)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(s?await n.reload():(n=new v.default({id:e,portal:{url:i}}),await n.load(t)),n.portal.user)return(0,w.Ss)(n)}catch(e){(0,h.r9)(e)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,h.r9)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){let t=this.url?o.id?.findCredential(this.url):null;if(!t)return!0;let i=S.credential===t?S.user:await this._fetchEditingUser(e);return S.credential=t,S.user=i,null==i?.privileges||i.privileges.includes("features:user:edit")}async _fetchEditingUser(e){let t=this.portalItem?.portal?.user;if(t)return t;let i=o.id?.findServerInfo(this.url??"");if(!i?.owningSystemUrl)return null;let r=`${i.owningSystemUrl}/sharing/rest`,n=_.Z.getDefault();if(n&&n.loaded&&(0,p.Fv)(n.restUrl)===(0,p.Fv)(r))return n.user;let a=`${r}/community/self`,u=null!=e?e.signal:null,c=await (0,l.q6)((0,s.Z)(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?x.Z.fromJSON(c.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){let i=t?.portal,r=this.portalItem?.id&&(this.portalItem.portal||_.Z.getDefault());return i&&r&&!(0,p.tm)(r.restUrl,i.restUrl)?(t.messages&&t.messages.push(new a.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,r._)([(0,d.Cb)({type:v.default})],t.prototype,"portalItem",null),(0,r._)([(0,m.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,r._)([(0,f.c)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,r._)([(0,d.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,r._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,r._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,r._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,r._)([(0,y.j)("esri.layers.mixins.PortalLayer")],t)},S={credential:null,user:null}},70817:function(e,t,i){i.d(t,{L:function(){return h}});var r=i(86641),n=i(94761),o=i(89312);i(37180),i(65223),i(3457);var s=i(64186),l=i(54001),a=i(20928),u=i(20795),c=i(79578);let h=class extends n.Z{constructor(e){super(e)}get bounds(){let e=this.coords;return null==e?.extent?null:(0,u.oJ)(e.extent)}get coords(){let e=this.element.georeference?.coords;return(0,a.projectOrLoad)(e,this.spatialReference).geometry}get normalizedCoords(){return l.Z.fromJSON((0,c.Ui)(this.coords))}get normalizedBounds(){let e=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=e?(0,u.oJ)(e):null}};(0,r._)([(0,o.Cb)()],h.prototype,"spatialReference",void 0),(0,r._)([(0,o.Cb)()],h.prototype,"element",void 0),(0,r._)([(0,o.Cb)()],h.prototype,"bounds",null),(0,r._)([(0,o.Cb)()],h.prototype,"coords",null),(0,r._)([(0,o.Cb)()],h.prototype,"normalizedCoords",null),(0,r._)([(0,o.Cb)()],h.prototype,"normalizedBounds",null),h=(0,r._)([(0,s.j)("esri.layers.support.MediaElementView")],h)},78298:function(e,t,i){i.d(t,{C_:function(){return c},HQ:function(){return p},Lx:function(){return y},Oh:function(){return g},PV:function(){return m},YI:function(){return u},bT:function(){return _},iR:function(){return h},id:function(){return x},rO:function(){return w},rT:function(){return S},rn:function(){return d},u1:function(){return b},vg:function(){return v}});var r=i(57111),n=i(9377),o=i(36502),s=i(37144),l=i(81961),a=i(60536);let u={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:r.C}}},c={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},h={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:r.C}}},p={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:s.w}}},d={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:r.C}}},m={value:null,type:l.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:r.C}}};function y(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}let f={write:{enabled:!0,layerContainerTypes:r.C},read:!0},g={type:Number,json:{origins:{"web-document":f,"portal-item":{write:!0}}}},_={...g,json:{...g.json,origins:{"web-document":{...f,write:{enabled:!0,layerContainerTypes:r.C,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&"service"!==i.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,a.b)(t.layerDefinition.drawingInfo.transparency):void 0:(0,a.b)(t.drawingInfo.transparency)}}},v={type:n.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{let i=n.Z.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(i.spatialReference=o.Z.fromJSON(t.spatialReference)),i}}}},read:!1}},x={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},w={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:r.C}}},name:"layerDefinition.minScale",write:!0}},b={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:r.C}}},name:"layerDefinition.maxScale",write:!0}},S={json:{write:{ignoreOrigin:!0,layerContainerTypes:r.C},origins:{"web-map":{read:!1,write:!1}}}}},63332:function(e,t,i){i.d(t,{$o:function(){return h},Fj:function(){return u},Ss:function(){return d},_$:function(){return a},ck:function(){return c},hz:function(){return p},qj:function(){return l}});var r=i(20928),n=i(36502),o=i(56132);async function s(e){let t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,o.Sx)(e);let i=n.Z.WGS84;return await (0,r.initializeProjection)(t,i),(0,r.project)(e,i)}function l(e,t){if(!a(e,t)){let i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords?.includes(t)}function u(e){return a(e,p.HOSTED_SERVICE)}function c(e,t){let i=e.typeKeywords;if(i){let e=i.indexOf(t);e>-1&&i.splice(e,1)}}async function h(e){let t;let i=e.clone().normalize();if(i.length>1)for(let e of i)t?e.width>t.width&&(t=e):t=e;else t=i[0];return s(t)}let p={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function d(e){let{portal:t,isOrgItem:i,itemControl:r}=e,n=t.user?.privileges,o=!n||n.includes("features:user:edit"),s=!!i&&!!n?.includes("features:user:fullEdit"),l="update"===r||"admin"===r;return l?s=o=!0:s&&(o=!0),{features:{edit:o,fullEdit:s},content:{updateItem:l}}}},59959:function(e,t,i){i.d(t,{B:function(){return n}});var r=i(72659);function n(e){var t;return o["json"===e.type?"application/json":"blob"===e.type?e.blob.type:(t=e.url,a[(0,r.Ml)(t)]||s)]||l}let o={},s="text/plain",l=o[s],a={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(let e in a)o[a[e]]=e},86264:function(e,t,i){var r,n;i.d(t,{x:function(){return r}}),(n=r||(r={}))[n.SAVE=0]="SAVE",n[n.SAVE_AS=1]="SAVE_AS"}}]);
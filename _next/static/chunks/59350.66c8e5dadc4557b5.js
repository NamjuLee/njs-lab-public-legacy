"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59350],{59350:function(e,t,r){r.r(t),r.d(t,{registerFunctions:function(){return C}});var n=r(39301);r(55066);var o=r(87346),i=r(52901),a=r(43633),s=r(43029),l=r(37660),u=r(90389),p=r(20928),c=r(56132),f=r(81449),d=r(20550),h=r(41390),y=r(18240),m=r(17904),w=r(34083),g=r(40480),v=r(69038),b=r(37501),S=r(36502);let Z=null;async function _(e){let t=n.default.geometryServiceUrl??"";if(!t){for(let t of((0,p.isLoaded)()||await (0,p.load)(),e))t.container[t.indexer]=(0,p.project)(t.container[t.indexer],S.Z.WGS84);return}let r=e.map(e=>e.container[e.indexer]),o=new b.Z({geometries:r,outSpatialReference:S.Z.WGS84}),i=await (0,h.i)(t,o);for(let t=0;t<i.length;t++){let r=e[t];r.container[r.indexer]=i[t]}}async function j(e,t){let n=new d.default({portal:e,id:t});return await n.load(),null===Z&&(Z=await r.e(26822).then(r.bind(r,26822))),await Z.fetchKnowledgeGraph(n.url)}function R(e,t){if(!e)return null;let r={};for(let n in e)r[n]=G(e[n],t);return r}function G(e,t){return null===e?null:(0,s.o)(e)?e.map(e=>G(e,t)):e instanceof y.Z?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:R(e.properties,t)}:e instanceof w.Z?{graphType:"object",properties:R(e.properties,t)}:e instanceof v.Z?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:e.originId??null,destinationId:e.destinationId??null,properties:R(e.properties,t)}:e instanceof g.Z?{graphType:"path",path:e.path?e.path.map(e=>G(e,t)):null}:(0,s.p)(e)?function(e,t){if(!e)return e;if(e.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,c.$)(e);if(e.spatialReference.equals(t.spatialReference))return e;throw new a.aV(t,a.rH.WrongSpatialReference,null)}(e,t):(0,s.c)(e)||(0,s.b)(e)||(0,s.a5)(e)?e:null}function C(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(t,r){return e.standardFunctionAsync(t,r,(e,n,i)=>{if((0,s.H)(i,2,2,t,r),null===i[0])throw new a.aV(t,a.rH.PortalRequired,r);if(i[0]instanceof o.Z){let e;let r=(0,s.j)(i[1]);return e=t.services?.portal?t.services.portal:f.Z.getDefault(),j((0,l._)(i[0],e),r)}if(!1===(0,s.c)(i[0]))throw new a.aV(t,a.rH.InvalidParameter,r);let u=(0,s.j)(i[0]);return j(t.services?.portal??f.Z.getDefault(),u)})},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(t,n){return e.standardFunctionAsync(t,n,async(e,o,l)=>{(0,s.H)(l,2,4,t,n);let p=l[0];if(!(0,s.w)(p))throw new a.aV(t,a.rH.InvalidParameter,n);let f=l[1];if(!(0,s.c)(f))throw new a.aV(t,a.rH.InvalidParameter,n);null===Z&&(Z=await r.e(26822).then(r.bind(r,26822)));let d=null,h=(0,s.K)(l[2],null);if(!(h instanceof i.Z||null===h))throw new a.aV(t,a.rH.InvalidParameter,n);if(h){let e=[];d=function e(t,r,n,o,i){if(null===t)return null;if((0,s.c)(t)||(0,s.b)(t))return t;if((0,s.k)(t)||(0,s.k)(t))return t.toJSDate();if((0,s.m)(t))return t.toStorageFormat();if((0,s.n)(t))return t.toStorageString();if((0,s.v)(t)){let a={};for(let s of t.keys())a[s]=e(t.field(s),r,n,o,i),a[s]instanceof u.Z&&i.push({container:a,indexer:s});return a}if((0,s.o)(t)){let a=t.map(t=>e(t,r,n,o,i));for(let e=0;e<a.length;e++)a[e]instanceof u.Z&&i.push({container:a,indexer:e});return a}return(0,s.p)(t)?t.spatialReference.isWGS84?t:t.spatialReference.isWebMercator&&r?(0,c.Sx)(t):t:void 0}(h,!0,!1,t,e),(e=e.filter(e=>!e.container[e.indexer].spatialReference.isWGS84)).length>0&&await _(e)}let y=new m.Z({openCypherQuery:f,bindParameters:d});(p?.serviceDefinition?.currentVersion??11.3)>11.2&&(y.outputSpatialReference=t.spatialReference);let w=(await Z.executeQueryStreaming(p,y)).resultRowsStream.getReader(),g=[];try{for(;;){let{done:e,value:r}=await w.read();if(e)break;if((0,s.o)(r))for(let e of r)g.push(G(e,t));else{let e=[];for(let n of r)e.push(G(r[n],t));g.push(e)}}}catch(e){throw e}return i.Z.convertJsonToArcade(g,(0,s.N)(t),!1,!0)})},e.signatures.push({name:"querygraph",min:2,max:4}))}},37660:function(e,t,r){r.d(t,{_:function(){return o}});var n=r(81449);function o(e,t){return null===e?t:new n.Z({url:e.field("url")})}},41390:function(e,t,r){r.d(t,{i:function(){return p}});var n=r(54748),o=r(61733),i=r(5005),a=r(30563),s=r(88789),l=r(37501);let u=(0,o.se)(l.Z);async function p(e,t,r){t=u(t);let o=(0,a.en)(e),l={...o.query,f:"json",...t.toJSON()},p=t.outSpatialReference,c=(0,i.Ji)(t.geometries[0]),f=(0,a.lA)(l,r);return(0,n.Z)(o.path+"/project",f).then(({data:{geometries:e}})=>(0,s.o)(e,c,p))}},18240:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(86641);r(55066);var o=r(89312);r(37180),r(65223),r(3457);var i=r(64186),a=r(52019),s=r(33876);let l=class extends a.Z{constructor(e){super(e),this.layoutGeometry=null}};(0,n._)([(0,o.Cb)({type:s.Z,json:{write:!0}})],l.prototype,"layoutGeometry",void 0);let u=l=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.Entity")],l)},52019:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(86641),o=r(89312);r(37180),r(65223),r(3457);var i=r(64186),a=r(19847);let s=class extends a.Z{constructor(e){super(e),this.typeName=null,this.id=null}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],s.prototype,"typeName",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],s.prototype,"id",void 0);let l=s=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.GraphNamedObject")],s)},19847:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(86641),o=r(689),i=r(89312);r(37180),r(65223),r(3457);var a=r(64186);let s=class extends o.wq{constructor(e){super(e),this.properties=null}};(0,n._)([(0,i.Cb)({json:{write:!0}})],s.prototype,"properties",void 0);let l=s=(0,n._)([(0,a.j)("esri.rest.knowledgeGraph.GraphObject")],s)},17904:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(86641),o=r(89312);r(37180),r(65223),r(3457);var i=r(64186),a=r(94761);let s=class extends a.Z{constructor(e){super(e),this.openCypherQuery=""}};(0,n._)([(0,o.Cb)()],s.prototype,"openCypherQuery",void 0);let l=s=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.GraphQuery")],s),u=class extends l{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,n._)([(0,o.Cb)()],u.prototype,"bindParameters",void 0),(0,n._)([(0,o.Cb)()],u.prototype,"bindGeometryQuantizationParameters",void 0),(0,n._)([(0,o.Cb)()],u.prototype,"outputQuantizationParameters",void 0),(0,n._)([(0,o.Cb)()],u.prototype,"outputSpatialReference",void 0),(0,n._)([(0,o.Cb)()],u.prototype,"provenanceBehavior",void 0);let p=u=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.GraphQueryStreaming")],u)},34083:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(86641);r(65223),r(37180),r(3457),r(94605);var o=r(64186),i=r(19847);let a=class extends i.Z{constructor(e){super(e)}},s=a=(0,n._)([(0,o.j)("esri.rest.knowledgeGraph.ObjectValue")],a)},40480:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(86641),o=r(689),i=r(89312);r(37180),r(65223),r(3457);var a=r(64186),s=r(19847);let l=class extends o.wq{constructor(e){super(e),this.path=null}};(0,n._)([(0,i.Cb)({type:[s.Z],json:{write:!0}})],l.prototype,"path",void 0);let u=l=(0,n._)([(0,a.j)("esri.rest.knowledgeGraph.Path")],l)},69038:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(86641);r(55066);var o=r(89312);r(37180),r(65223),r(3457);var i=r(64186),a=r(52019),s=r(58144);let l=class extends a.Z{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"originId",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"destinationId",void 0),(0,n._)([(0,o.Cb)({type:s.Z,json:{write:!0}})],l.prototype,"layoutGeometry",void 0);let u=l=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.Relationship")],l)},37501:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(86641),o=r(689),i=r(89312);r(37180),r(65223),r(3457);var a=r(64186),s=r(5005),l=r(62329);let u=class extends o.wq{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){let e=this.geometries.map(e=>e.toJSON()),t=this.geometries[0],r={};return r.outSR=(0,l.B9)(this.outSpatialReference),r.inSR=(0,l.B9)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,s.Ji)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,n._)([(0,i.Cb)()],u.prototype,"geometries",void 0),(0,n._)([(0,i.Cb)({json:{read:{source:"outSR"}}})],u.prototype,"outSpatialReference",void 0),(0,n._)([(0,i.Cb)()],u.prototype,"transformation",void 0),(0,n._)([(0,i.Cb)()],u.prototype,"transformForward",void 0);let p=u=(0,n._)([(0,a.j)("esri.rest.support.ProjectParameters")],u)}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66072],{91351:function(e,t,i){i.d(t,{Z:function(){return eL}});var r,o,n,s,l,p,d,a,u,y,c,h,m,b,f,v,_,x,w=i(86641),g=i(689),C=i(61764),j=i(51898),F=i(89312),I=i(1275),E=i(37647),S=i(64186),M=i(50713);i(37180),i(65223),i(3457);let T=r=class extends g.wq{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new r({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],T.prototype,"expression",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],T.prototype,"name",void 0),(0,w._)([(0,F.Cb)({type:["boolean","date","number","string"],json:{write:!0}})],T.prototype,"returnType",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],T.prototype,"title",void 0);let O=T=r=(0,w._)([(0,S.j)("esri.form.ExpressionInfo")],T),V=class extends g.wq{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],V.prototype,"description",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],V.prototype,"label",void 0),(0,w._)([(0,F.Cb)()],V.prototype,"type",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],V.prototype,"visibilityExpression",void 0);let R=V=(0,w._)([(0,S.j)("esri.form.elements.Element")],V);var k=i(61733);let D=o=class extends g.wq{constructor(e){super(e),this.type=null}clone(){return new o({type:this.type})}};(0,w._)([(0,F.Cb)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],D.prototype,"type",void 0);let U=D=o=(0,w._)([(0,S.j)("esri.form.elements.inputs.AttachmentInput")],D),B=n=class extends R{constructor(e){super(e),this.attachmentKeyword=null,this.editableExpression=null,this.input=null,this.type="attachment"}clone(){return new n({attachmentKeyword:this.attachmentKeyword,description:this.description,editableExpression:this.editableExpression,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],B.prototype,"attachmentKeyword",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],B.prototype,"editableExpression",void 0),(0,w._)([(0,F.Cb)({type:U,json:{read:{source:"inputType"},write:{target:"inputType"}}})],B.prototype,"input",void 0),(0,w._)([(0,F.Cb)({type:["attachment"],json:{read:!1,write:!0}})],B.prototype,"type",void 0);let A=B=n=(0,w._)([(0,S.j)("esri.form.elements.AttachmentElement")],B),L=class extends g.wq{constructor(e){super(e),this.type=null}};(0,w._)([(0,F.Cb)()],L.prototype,"type",void 0);let N=L=(0,w._)([(0,S.j)("esri.form.elements.inputs.Input")],L),Z=class extends N{constructor(e){super(e),this.maxLength=null,this.minLength=0}};(0,w._)([(0,F.Cb)({type:Number,json:{write:!0}})],Z.prototype,"maxLength",void 0),(0,w._)([(0,F.Cb)({type:Number,json:{write:!0}})],Z.prototype,"minLength",void 0);let G=Z=(0,w._)([(0,S.j)("esri.form.elements.inputs.TextInput")],Z),H=s=class extends G{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new s({maxLength:this.maxLength,minLength:this.minLength})}};(0,w._)([(0,F.Cb)({type:["barcode-scanner"],json:{read:!1,write:!0}})],H.prototype,"type",void 0);let q=H=s=(0,w._)([(0,S.j)("esri.form.elements.inputs.BarcodeScannerInput")],H),P=l=class extends N{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new l({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],P.prototype,"noValueOptionLabel",void 0),(0,w._)([(0,F.Cb)({type:Boolean,json:{write:!0}})],P.prototype,"showNoValueOption",void 0),(0,w._)([(0,F.Cb)({type:["combo-box"],json:{read:!1,write:!0}})],P.prototype,"type",void 0);let Q=P=l=(0,w._)([(0,S.j)("esri.form.elements.inputs.ComboBoxInput")],P);function W(e){return null!=e?e:null}function J(e){return null!=e?e:null}let z=p=class extends N{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return W(t.max)}writeMax(e,t){t.max=J(e)}readMin(e,t){return W(t.min)}writeMin(e,t){t.min=J(e)}clone(){return new p({max:this.max,min:this.min})}};(0,w._)([(0,F.Cb)({type:String,json:{type:String,write:!0}})],z.prototype,"max",void 0),(0,w._)([(0,E.r)("max")],z.prototype,"readMax",null),(0,w._)([(0,M.c)("max")],z.prototype,"writeMax",null),(0,w._)([(0,F.Cb)({type:String,json:{type:String,write:!0}})],z.prototype,"min",void 0),(0,w._)([(0,E.r)("min")],z.prototype,"readMin",null),(0,w._)([(0,M.c)("min")],z.prototype,"writeMin",null),(0,w._)([(0,F.Cb)({type:["date-picker"],json:{read:!1,write:!0}})],z.prototype,"type",void 0);let $=z=p=(0,w._)([(0,S.j)("esri.form.elements.inputs.DatePickerInput")],z);function K(e){return null!=e?e:null}function X(e){return null!=e?e:null}let Y=d=class extends N{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return K(t.max)}writeMax(e,t){t.max=X(e)}readMin(e,t){return K(t.min)}writeMin(e,t){t.min=X(e)}readTimeResolution(e,t){return K(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=X(e)}clone(){return new d({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};(0,w._)([(0,F.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"includeTimeOffset",void 0),(0,w._)([(0,F.Cb)({type:String,json:{type:String,write:!0}})],Y.prototype,"max",void 0),(0,w._)([(0,E.r)("max")],Y.prototype,"readMax",null),(0,w._)([(0,M.c)("max")],Y.prototype,"writeMax",null),(0,w._)([(0,F.Cb)({type:String,json:{type:String,write:!0}})],Y.prototype,"min",void 0),(0,w._)([(0,E.r)("min")],Y.prototype,"readMin",null),(0,w._)([(0,M.c)("min")],Y.prototype,"writeMin",null),(0,w._)([(0,F.Cb)({type:String,json:{type:String,write:!0}})],Y.prototype,"timeResolution",void 0),(0,w._)([(0,E.r)("timeResolution")],Y.prototype,"readTimeResolution",null),(0,w._)([(0,M.c)("timeResolution")],Y.prototype,"writeTimeResolution",null),(0,w._)([(0,F.Cb)({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Y.prototype,"type",void 0);let ee=Y=d=(0,w._)([(0,S.j)("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Y);function et(e){return null!=e?new Date(e):null}function ei(e){return e?e.getTime():null}let er=a=class extends N{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return et(t.max)}writeMax(e,t){t.max=ei(e)}readMin(e,t){return et(t.min)}writeMin(e,t){t.min=ei(e)}clone(){return new a({includeTime:this.includeTime,max:this.max,min:this.min})}};(0,w._)([(0,F.Cb)({type:Boolean,json:{write:!0}})],er.prototype,"includeTime",void 0),(0,w._)([(0,F.Cb)({type:Date,json:{type:Number,write:!0}})],er.prototype,"max",void 0),(0,w._)([(0,E.r)("max")],er.prototype,"readMax",null),(0,w._)([(0,M.c)("max")],er.prototype,"writeMax",null),(0,w._)([(0,F.Cb)({type:Date,json:{type:Number,write:!0}})],er.prototype,"min",void 0),(0,w._)([(0,E.r)("min")],er.prototype,"readMin",null),(0,w._)([(0,M.c)("min")],er.prototype,"writeMin",null),(0,w._)([(0,F.Cb)({type:["datetime-picker"],json:{read:!1,write:!0}})],er.prototype,"type",void 0);let eo=er=a=(0,w._)([(0,S.j)("esri.form.elements.inputs.DateTimePickerInput")],er),en=u=class extends N{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new u({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],en.prototype,"noValueOptionLabel",void 0),(0,w._)([(0,F.Cb)({type:Boolean,json:{write:!0}})],en.prototype,"showNoValueOption",void 0),(0,w._)([(0,F.Cb)({type:["radio-buttons"],json:{read:!1,write:!0}})],en.prototype,"type",void 0);let es=en=u=(0,w._)([(0,S.j)("esri.form.elements.inputs.RadioButtonsInput")],en),el=y=class extends N{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new y({offValue:this.offValue,onValue:this.onValue})}};(0,w._)([(0,F.Cb)({type:[String,Number],json:{write:!0}})],el.prototype,"offValue",void 0),(0,w._)([(0,F.Cb)({type:[String,Number],json:{write:!0}})],el.prototype,"onValue",void 0),(0,w._)([(0,F.Cb)({type:["switch"],json:{read:!1,write:!0}})],el.prototype,"type",void 0);let ep=el=y=(0,w._)([(0,S.j)("esri.form.elements.inputs.SwitchInput")],el),ed=c=class extends G{constructor(e){super(e),this.type="text-area"}clone(){return new c({maxLength:this.maxLength,minLength:this.minLength})}};(0,w._)([(0,F.Cb)({type:["text-area"],json:{read:!1,write:!0}})],ed.prototype,"type",void 0);let ea=ed=c=(0,w._)([(0,S.j)("esri.form.elements.inputs.TextAreaInput")],ed),eu=h=class extends G{constructor(e){super(e),this.type="text-box"}clone(){return new h({maxLength:this.maxLength,minLength:this.minLength})}};(0,w._)([(0,F.Cb)({type:["text-box"],json:{read:!1,write:!0}})],eu.prototype,"type",void 0);let ey=eu=h=(0,w._)([(0,S.j)("esri.form.elements.inputs.TextBoxInput")],eu);function ec(e){return null!=e?e:null}function eh(e){return null!=e?e:null}let em=m=class extends N{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return ec(t.max)}writeMax(e,t){t.max=eh(e)}readMin(e,t){return ec(t.min)}writeMin(e,t){t.min=eh(e)}readTimeResolution(e,t){return ec(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=eh(e)}clone(){return new m({max:this.max,min:this.min,timeResolution:this.timeResolution})}};(0,w._)([(0,F.Cb)({type:String,json:{type:String,write:!0}})],em.prototype,"max",void 0),(0,w._)([(0,E.r)("max")],em.prototype,"readMax",null),(0,w._)([(0,M.c)("max")],em.prototype,"writeMax",null),(0,w._)([(0,F.Cb)({type:String,json:{type:String,write:!0}})],em.prototype,"min",void 0),(0,w._)([(0,E.r)("min")],em.prototype,"readMin",null),(0,w._)([(0,M.c)("min")],em.prototype,"writeMin",null),(0,w._)([(0,F.Cb)({type:String,json:{type:String,write:!0}})],em.prototype,"timeResolution",void 0),(0,w._)([(0,E.r)("timeResolution")],em.prototype,"readTimeResolution",null),(0,w._)([(0,M.c)("timeResolution")],em.prototype,"writeTimeResolution",null),(0,w._)([(0,F.Cb)({type:["time-picker"],json:{read:!1,write:!0}})],em.prototype,"type",void 0);let eb=em=m=(0,w._)([(0,S.j)("esri.form.elements.inputs.TimePickerInput")],em);var ef=i(28654);let ev=b=class extends R{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return this._get("editable")??!0}set editable(e){this._set("editable",e)}clone(){return new b({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};(0,w._)([(0,F.Cb)({types:ef.V5,json:{read:{reader:ef.im},write:!0}})],ev.prototype,"domain",void 0),(0,w._)([(0,F.Cb)({type:Boolean,json:{write:!0}})],ev.prototype,"editable",null),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],ev.prototype,"editableExpression",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],ev.prototype,"fieldName",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],ev.prototype,"hint",void 0),(0,w._)([(0,F.Cb)({types:{base:N,key:"type",typeMap:{"barcode-scanner":q,"combo-box":Q,"date-picker":$,"datetime-picker":eo,"datetimeoffset-picker":ee,"radio-buttons":es,switch:ep,"text-area":ea,"text-box":ey,"time-picker":eb}},json:{read:{source:"inputType"},write:{target:"inputType"}}})],ev.prototype,"input",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],ev.prototype,"requiredExpression",void 0),(0,w._)([(0,F.Cb)({type:String,json:{read:!1,write:!0}})],ev.prototype,"type",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],ev.prototype,"valueExpression",void 0);let e_=ev=b=(0,w._)([(0,S.j)("esri.form.elements.FieldElement")],ev);var ex=i(20840);let ew=f=class extends R{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new f({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:(0,C.d9)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};(0,w._)([(0,F.Cb)({type:Number,json:{write:!0}})],ew.prototype,"displayCount",void 0),(0,w._)([(0,F.Cb)({type:["list"],json:{write:!0}})],ew.prototype,"displayType",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],ew.prototype,"editableExpression",void 0),(0,w._)([(0,F.Cb)({type:[ex.Z],json:{write:!0}})],ew.prototype,"orderByFields",void 0),(0,w._)([(0,F.Cb)({type:Number,json:{write:!0}})],ew.prototype,"relationshipId",void 0),(0,w._)([(0,F.Cb)({type:["relationship"],json:{read:!1,write:!0}})],ew.prototype,"type",void 0);let eg=ew=f=(0,w._)([(0,S.j)("esri.form.elements.RelationshipElement")],ew),eC=v=class extends R{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new v({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],eC.prototype,"text",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],eC.prototype,"textFormat",void 0),(0,w._)([(0,F.Cb)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],eC.prototype,"type",void 0);let ej=eC=v=(0,w._)([(0,S.j)("esri.form.elements.TextElement")],eC);function eF(e){return{typesWithGroup:{base:R,key:"type",typeMap:{attachment:A,field:e_,group:e,relationship:eg,text:ej}},typesWithoutGroup:{base:R,key:"type",typeMap:{attachment:A,field:e_,relationship:eg,text:ej}}}}function eI(e,t,i=!0){if(!e)return null;let r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(e=>r[e.type]).map(e=>r[e.type].fromJSON(e))}function eE(e,t,i=!0){if(!e)return null;let r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(e=>r[e.type]).map(e=>e.toJSON())}function eS(e,t,i=!0){return e?e.map(e=>(0,k.N7)(i?t.typesWithGroup:t.typesWithoutGroup,e)):null}let eM=_=class extends R{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return eS(e,eT,!1)}readElements(e,t){return eI(t.formElements,eT,!1)}writeElements(e,t){t.formElements=eE(e,eT,!1)}clone(){return new _({description:this.description,elements:(0,C.d9)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,w._)([(0,F.Cb)({json:{write:!0}})],eM.prototype,"elements",void 0),(0,w._)([(0,I.p)("elements")],eM.prototype,"castElements",null),(0,w._)([(0,E.r)("elements",["formElements"])],eM.prototype,"readElements",null),(0,w._)([(0,M.c)("elements")],eM.prototype,"writeElements",null),(0,w._)([(0,F.Cb)({type:["collapsed","expanded"],json:{write:!0}})],eM.prototype,"initialState",void 0),(0,w._)([(0,F.Cb)({type:String,json:{read:!1,write:!0}})],eM.prototype,"type",void 0);let eT=eF(eM=_=(0,w._)([(0,S.j)("esri.form.elements.GroupElement")],eM)),eO=eM,eV=e=>"field"===e.type,eR=e=>"group"===e.type,ek=e=>"text"===e.type;var eD=i(67009);let eU=eF(eO),eB=x=class extends g.wq{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return eS(e,eU)}readElements(e,t){return eI(t.formElements,eU)}writeElements(e,t){t.formElements=eE(e,eU)}clone(){return new x({description:this.description,expressionInfos:(0,C.d9)(this.expressionInfos),elements:(0,C.d9)(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){let i=new Set,{description:r,elements:o,expressionInfos:n,title:s}=this;if(eA(i,e,r),eA(i,e,s),!o)return[];let l=(function(e,t){if(!t||0===t.length)return[];let i=function e(t){let i=new Set;for(let r of t)if((0,j.cm)(i,r.visibilityExpression),!ek(r)){if(eR(r))(0,j.w6)(i,e(r.elements));else if((0,j.cm)(i,r.editableExpression),eV(r)){let{requiredExpression:e,valueExpression:t}=r;(0,j.w6)(i,[e,t])}}return i}(e),r=[];for(let e of t)i.has(e.name)&&r.push(e.expression);return r})(o,n).map(t=>(0,eD.io)(i,e,t));for(let r of(await Promise.all(l),o))!function e(t,i,r){let{fieldsIndex:o}=i;if(!o||o.fields.length!==t.size)switch(eA(t,o,r.label),eA(t,o,r.description),r.type){case"field":(0,eD.AB)(t,o,r.fieldName);break;case"group":r.elements.forEach(r=>e(t,i,r));break;case"relationship":if(i.relationships){let e=i.relationships.find(e=>e.id===r.relationshipId);e&&(0,eD.AB)(t,o,e.keyField)}(0,eD.gd)(t,o,r.orderByFields?.map(e=>e.field));break;case"text":eA(t,o,r.text)}}(i,{fieldsIndex:e,relationships:t},r);return Array.from(i).sort()}};function eA(e,t,i){(0,eD.gd)(e,t,(0,eD.ld)(i))}(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],eB.prototype,"description",void 0),(0,w._)([(0,F.Cb)({json:{write:!0}})],eB.prototype,"elements",void 0),(0,w._)([(0,I.p)("elements")],eB.prototype,"castElements",null),(0,w._)([(0,E.r)("elements",["formElements"])],eB.prototype,"readElements",null),(0,w._)([(0,M.c)("elements")],eB.prototype,"writeElements",null),(0,w._)([(0,F.Cb)({type:[O],json:{write:!0}})],eB.prototype,"expressionInfos",void 0),(0,w._)([(0,F.Cb)({type:Boolean,json:{default:!1,write:!0}})],eB.prototype,"preserveFieldValuesWhenHidden",void 0),(0,w._)([(0,F.Cb)({type:String,json:{write:!0}})],eB.prototype,"title",void 0);let eL=eB=x=(0,w._)([(0,S.j)("esri.form.FormTemplate")],eB)},12021:function(e,t,i){i.d(t,{jF:function(){return u},lQ:function(){return c},o1:function(){return b}});var r=i(86641),o=i(60163),n=i(61764),s=i(31124),l=i(89312);i(37180),i(65223);var p=i(64186),d=i(41207);let a=new o.Z.EventEmitter;function u(e,t,i=null,r=!1){let o=(0,s.hh)();return r=null==t||r,a.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:r,result:o.promise}),o}let y=Symbol();function c(e){return null!=e&&"object"==typeof e&&y in e}function h(e){return null!=e&&"object"==typeof e&&"gdbVersion"in e}function m(e,t,i){let r=new URL(e).host,o=d.Jp.get(r);return(!t||t===o)&&(!i||i===o)||t===i}let b=e=>{var t;let i=class extends e{constructor(...e){super(...e),this[t]=!0,this._applyEditsHandler=e=>{let{serviceUrl:t,layerId:i,gdbVersion:r,mayReceiveServiceEdits:o,result:s}=e,l=t===this.url,p=null!=i&&null!=this.layerId&&i===this.layerId,d=h(this),a=h(this)&&m(t,r,this.gdbVersion);if(!l||d&&!a||!p&&!o)return;let u=s.then(e=>{if(this.lastEditsEventDate=new Date,p&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",(0,n.d9)(e)),e;let i=e.editedFeatures?.find(({layerId:e})=>e===this.layerId);if(i){let{adds:t,updates:r,deletes:o}=i.editedFeatures,s={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:t?t.map(({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]})):[],deletedFeatures:o?o.map(({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]})):[],updatedFeatures:r?r.map(({current:{attributes:e}})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]})):[],editedFeatures:(0,n.d9)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,n.d9)(e.historicMoment)};return this.emit("edits",s),s}let o={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,n.d9)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,n.d9)(e.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(t,r,o.historicMoment)&&this.emit("edits",o),o}).then(e=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(t,r,e.historicMoment)&&(this.historicMoment=e.historicMoment),e));this.emit("apply-edits",{result:u})},this._updateMomentHandler=e=>{let{serviceUrl:t,gdbVersion:i,moment:r}=e,o=t===this.url,n=h(this),s=h(this)&&m(t,i,this.gdbVersion),l=h(this)&&!m(t,this.gdbVersion,null);o&&n&&s&&l&&"historicMoment"in this&&this.historicMoment!==r&&(this.historicMoment=r)},this.when().then(()=>{var e,t;this.addHandles((e=this._applyEditsHandler,a.on("apply-edits",new WeakRef(e)))),"historicMoment"in this&&this.addHandles((t=this._updateMomentHandler,a.on("update-moment",new WeakRef(t))))},()=>{})}_shouldUpdateHistoricMoment(e,t,i){return"historicMoment"in this&&this.historicMoment!==i&&(0,d.JV)(e,t)}};return t=y,(0,r._)([(0,l.Cb)()],i.prototype,"lastEditsEventDate",void 0),i=(0,r._)([(0,p.j)("esri.layers.mixins.EditBusLayer")],i)}},25325:function(e,t,i){i.d(t,{B:function(){return R}});var r=i(86641),o=i(50973),n=i(61764),s=i(65223),l=i(89312);i(37180);var p=i(37647),d=i(64186),a=i(50713),u=i(57111),y=i(9377),c=i(46341),h=i(36502),m=i(96922),b=i(78298),f=i(23427),v=i(689);i(3457);var _=i(46200);let x=class extends(0,f.J)(v.wq){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};(0,r._)([(0,l.Cb)()],x.prototype,"creatorField",void 0),(0,r._)([(0,l.Cb)()],x.prototype,"creationDateField",void 0),(0,r._)([(0,l.Cb)()],x.prototype,"editorField",void 0),(0,r._)([(0,l.Cb)()],x.prototype,"editDateField",void 0),(0,r._)([(0,l.Cb)()],x.prototype,"realm",void 0),(0,r._)([(0,l.Cb)((0,_.mi)("dateFieldsTimeReference",!0))],x.prototype,"timeZone",void 0);let w=x=(0,r._)([(0,d.j)("esri.layers.support.EditFieldsInfo")],x),g=class extends(0,f.J)(v.wq){constructor(e){super(e)}};(0,r._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],g.prototype,"name",void 0),(0,r._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],g.prototype,"fields",void 0),(0,r._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],g.prototype,"isAscending",void 0),(0,r._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],g.prototype,"indexType",void 0),(0,r._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],g.prototype,"isUnique",void 0),(0,r._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],g.prototype,"description",void 0),g=(0,r._)([(0,d.j)("esri.layers.support.FeatureIndex")],g);var C=i(10119),j=i(9266);let F=class extends(0,f.J)(v.wq){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};(0,r._)([(0,l.Cb)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],F.prototype,"shapeAreaField",void 0),(0,r._)([(0,l.Cb)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],F.prototype,"shapeLengthField",void 0),(0,r._)([(0,l.Cb)({type:String,json:{read:e=>j.gV.read(e)||j.Jo.read(e)}})],F.prototype,"units",void 0);let I=F=(0,r._)([(0,d.j)("esri.layers.support.GeometryFieldsInfo")],F);var E=i(34525),S=i(72714),M=i(86034),T=i(28654);let O=class extends(0,f.J)(v.wq){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;let t={};for(let i of Object.keys(e))t[i]=(0,T.im)(e[i]);return t}writeDomains(e,t){if(!e)return;let i={};for(let t of Object.keys(e))e[t]&&(i[t]=e[t]?.toJSON());t.domains=i}};(0,r._)([(0,l.Cb)({type:Number,json:{write:!0}})],O.prototype,"code",void 0),(0,r._)([(0,l.Cb)({type:Object,json:{write:!0}})],O.prototype,"defaultValues",void 0),(0,r._)([(0,l.Cb)({json:{write:!0}})],O.prototype,"domains",void 0),(0,r._)([(0,p.r)("domains")],O.prototype,"readDomains",null),(0,r._)([(0,a.c)("domains")],O.prototype,"writeDomains",null),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],O.prototype,"name",void 0);let V=O=(0,r._)([(0,d.j)("esri.layers.support.Subtype")],O),R=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(o.Z.ofType(g)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=h.Z.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;let{capabilities:e}=this;if(e){let{query:t,operations:i,editing:r}=e;if(!t.supportsQueryByOthers||!t.supportsQueryByAnonymous||i.supportsEditing&&!(r.supportsUpdateByOthers&&r.supportsUpdateByAnonymous&&r.supportsDeleteByOthers&&r.supportsDeleteByAnonymous))return"load"}if(this.userHasUpdateItemPrivileges){if((0,C.uA)(this))return"load";if(this.hasUpdateItemRestrictions)return e.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";let t=this.editFieldsInfo;return(t?.creatorField||t?.editorField)&&e?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(e,t){return(0,M.h)(t,this.url)}readEditingInfo(e,t){let{editingInfo:i}=t;return i?{lastEditDate:null!=i.lastEditDate?new Date(i.lastEditDate):null}:null}get effectiveCapabilities(){let e=this.capabilities;if(!e)return null;let t=(0,n.d9)(e),{operations:i,editing:r}=t;return(0,C.$F)(this)?this.userHasUpdateItemPrivileges&&(i.supportsQuery=!0):this.userHasUpdateItemPrivileges?i.supportsAdd=i.supportsDelete=i.supportsEditing=i.supportsQuery=i.supportsUpdate=r.supportsDeleteByOthers=r.supportsGeometryUpdate=r.supportsUpdateByOthers=!0:this.userHasFullEditingPrivileges&&i.supportsEditing&&(i.supportsAdd=i.supportsDelete=i.supportsUpdate=r.supportsGeometryUpdate=!0),t}readGlobalIdFieldFromService(e,t){return(0,C.rk)(t)}get hasFullEditingRestrictions(){let e=this.capabilities;if(!e||(0,C.$F)(this))return!1;let{operations:t,editing:i}=e;return t.supportsEditing&&!(t.supportsAdd&&t.supportsDelete&&t.supportsUpdate&&i.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){let e=this.capabilities;if(!e)return!1;let{operations:t,editing:i}=e;return(0,C.$F)(this)?!t.supportsQuery:!(t.supportsAdd&&t.supportsDelete&&t.supportsEditing&&t.supportsQuery&&t.supportsUpdate&&i.supportsDeleteByOthers&&i.supportsGeometryUpdate&&i.supportsUpdateByOthers)}readIsTableFromService(e,t){return"Table"===t.type}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readMinScale(e,t){return t.effectiveMinScale||e||0}readObjectIdFieldFromService(e,t){return(0,C.kZ)(t)}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}set url(e){if(null==e)return void this._set("url",e);let t=(0,m.XG)({layer:this,url:e,nonStandardUrlAllowed:!0,logger:s.Z.getLogger(this)});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,i,r){(0,m.wH)(this,e,null,t,r)}readVersion(e,t){return(0,C.JY)(t)}};return(0,r._)([(0,l.Cb)({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),(0,r._)([(0,l.Cb)({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),(0,r._)([(0,l.Cb)({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),(0,r._)([(0,p.r)("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),(0,r._)([(0,l.Cb)((0,_.mi)("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),(0,r._)([(0,l.Cb)({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),(0,r._)([(0,l.Cb)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),(0,r._)([(0,l.Cb)({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),(0,r._)([(0,l.Cb)({readOnly:!0,type:w})],t.prototype,"editFieldsInfo",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],t.prototype,"editingInfo",void 0),(0,r._)([(0,p.r)("editingInfo")],t.prototype,"readEditingInfo",null),(0,r._)([(0,l.Cb)({readOnly:!0})],t.prototype,"effectiveCapabilities",null),(0,r._)([(0,l.Cb)((()=>{let e=(0,n.d9)(b.PV),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],t.prototype,"elevationInfo",void 0),(0,r._)([(0,l.Cb)({type:E.Z,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:u.C}}}}})],t.prototype,"floorInfo",void 0),(0,r._)([(0,l.Cb)({type:y.Z,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),(0,r._)([(0,l.Cb)()],t.prototype,"gdbVersion",void 0),(0,r._)([(0,l.Cb)({readOnly:!0,type:I,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),(0,r._)([(0,l.Cb)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:C.Fr.read}}}})],t.prototype,"geometryType",void 0),(0,r._)([(0,l.Cb)({type:String})],t.prototype,"globalIdField",void 0),(0,r._)([(0,p.r)("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),(0,r._)([(0,l.Cb)({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),(0,r._)([(0,l.Cb)({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),(0,r._)([(0,l.Cb)({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),(0,r._)([(0,l.Cb)({readOnly:!0,type:c.Z})],t.prototype,"heightModelInfo",void 0),(0,r._)([(0,l.Cb)({type:Date})],t.prototype,"historicMoment",void 0),(0,r._)([(0,l.Cb)({type:o.Z.ofType(g),readOnly:!0})],t.prototype,"indexes",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],t.prototype,"isTable",void 0),(0,r._)([(0,p.r)("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),(0,r._)([(0,l.Cb)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),(0,r._)([(0,l.Cb)(b.u1)],t.prototype,"maxScale",void 0),(0,r._)([(0,p.r)("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),(0,r._)([(0,l.Cb)(b.rO)],t.prototype,"minScale",void 0),(0,r._)([(0,p.r)("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),(0,r._)([(0,l.Cb)({type:String})],t.prototype,"objectIdField",void 0),(0,r._)([(0,p.r)("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),(0,r._)([(0,l.Cb)((0,_.mi)("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),(0,r._)([(0,l.Cb)({type:[S.Z],readOnly:!0})],t.prototype,"relationships",void 0),(0,r._)([(0,l.Cb)({type:Boolean})],t.prototype,"returnM",void 0),(0,r._)([(0,l.Cb)({type:Boolean})],t.prototype,"returnZ",void 0),(0,r._)([(0,l.Cb)({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),(0,r._)([(0,p.r)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),(0,r._)([(0,l.Cb)({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),(0,r._)([(0,l.Cb)()],t.prototype,"sourceJSON",void 0),(0,r._)([(0,l.Cb)({type:h.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),(0,r._)([(0,l.Cb)({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),(0,r._)([(0,l.Cb)({type:[V],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),(0,r._)([(0,l.Cb)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),(0,r._)([(0,l.Cb)(b.HQ)],t.prototype,"url",null),(0,r._)([(0,a.c)("url")],t.prototype,"writeUrl",null),(0,r._)([(0,l.Cb)({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),(0,r._)([(0,p.r)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=(0,r._)([(0,d.j)("esri.layers.mixins.FeatureLayerBase")],t)}},16791:function(e,t,i){i.d(t,{D:function(){return n}});var r=i(96922);let o=[];function n(e,t){if((0,r.M8)(e.url??""))return!0;let{wkid:i}=t;for(let t of o){if((e.version??0)>=t[0])break;if("function"==typeof t[1]&&(t[1]=t[1]()),t[1].has(i))return!1}return!0}o.push([10.91,()=>{let e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),o.push([10.9,()=>{let e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),o.push([10.81,()=>{let e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),o.push([10.8,()=>{let e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),o.push([10.71,()=>{let e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}])},41207:function(e,t,i){i.d(t,{JV:function(){return d},Jp:function(){return n},Px:function(){return p},U8:function(){return o},r9:function(){return l}});var r=i(54748);let o=(0,i(85222).dG)(),n=new Map,s=new Map;async function l(e,t,i){if(!e||!i)return!1;if(!t)return!0;let o=new URL(e).host,s=n.get(o);if(!s){let t=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await (0,r.Z)(t,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function p(e,t,r=!1){if(!e||!t)return!0;let n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),l=s.get(n)?.entries();if(l){for(let[e,s]of l)if(s.name===t){let t=!s.stack?.hasForwardEdits();if(!t&&r){let[{deleteForwardEdits:t},{default:r}]=await Promise.all([i.e(20484).then(i.bind(i,20484)),i.e(73064).then(i.bind(i,73064))]),l=await t(n,e,new r({sessionId:o,moment:s.moment}));return l.success&&s.stack?.clearForwardEdits(),l.success}return t}}return!0}function d(e,t){if(!e)return!1;let i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=s.get(i)?.entries();if(r){for(let[e,i]of r)if(i.name===t)return"edit"===i.lockType}return!1}}}]);
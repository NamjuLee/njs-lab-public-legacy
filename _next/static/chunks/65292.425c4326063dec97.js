"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65292],{49644:function(t,e,i){i.d(e,{$X:function(){return o},Fv:function(){return u},IH:function(){return a},Ue:function(){return r},al:function(){return s},kC:function(){return f},od:function(){return h}});var n=i(59382);function r(){var t=new n.WT(3);return n.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function s(t,e,i){var r=new n.WT(3);return r[0]=t,r[1]=e,r[2]=i,r}function a(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function o(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function h(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function u(t,e){var i=e[0],n=e[1],r=e[2],s=i*i+n*n+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function f(t,e,i){var n=e[0],r=e[1],s=e[2],a=i[0],o=i[1],h=i[2];return t[0]=r*h-s*o,t[1]=s*a-n*h,t[2]=n*o-r*a,t}r()},46049:function(t,e,i){i.d(e,{h:function(){return s},z:function(){return r}});var n=i(81519);let r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],s=n.Ue(),a=n.Ue(),o=n.Ue(),h=n.Ue(),u=n.Ue();n.vc(h,e),n.aC(s,i[0]),n.gT(a,i[1]),n.QO(o,i[2]),n.xJ(u,r),n.Jp(t,s,u),n.Jp(t,a,t),n.Jp(t,o,t),n.Jp(t,h,t)},s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[2,2,4],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,1,0],s=n.Ue(),a=n.Ue(),o=n.Ue();return n.G3(a,2*Math.PI/5,t,.1,100),n.zB(s,e,i,r),n.Jp(o,a,s),{viewMatrix:s,projectionMatrix:a,viewProjectionMatrix:o,cameraOption:{eye:e,center:i,zoomMax:100,zoomSpeed:2}}}},65292:function(t,e,i){i.r(e),i.d(e,{Solution:function(){return A}});var n=i(49644);let r=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,n=t.createBuffer({size:e.byteLength,usage:i,mappedAtCreation:!0});return new Float32Array(n.getMappedRange()).set(e),n.unmap(),n},s=function(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0],s=Math.sin(e*Math.PI/180);return n.al(t*s*Math.cos(i*Math.PI/180)+r[0],t*Math.cos(e*Math.PI/180)+r[1],-t*s*Math.sin(i*Math.PI/180)+r[2])},a=function(t,e,i){let n,r,a,o,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];if(e<2||i<2)return;let u=[];for(let r=0;r<e;r++){let a=[];for(let o=0;o<i;o++)n=s(t,180*r/(e-1),360*o/(i-1),h),a.push(n);u.push(a)}let f=[];for(let t=0;t<e-1;t++)for(let e=0;e<i-1;e++)r=u[t][e],a=u[t+1][e],o=u[t][e+1],f.push([r[0],r[1],r[2],a[0],a[1],a[2],r[0],r[1],r[2],o[0],o[1],o[2]]);return new Float32Array(f.flat())},o=()=>({vertex:"\n        struct Uniforms {\n            mvpMatrix : mat4x4<f32>,\n        };\n        @binding(0) @group(0) var<uniform> uniforms : Uniforms;\n        \n        @vertex\n        fn main(@location(0) pos: vec4<f32>) ->  @builtin(position) vec4<f32> {\n            return uniforms.mvpMatrix * pos;     \n        }",fragment:"\n        @fragment\n        fn main() -> @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 1.0, 0.0, 1.0);            \n        }"}),h=()=>({shader:o(),vertex:a(1,20,20,[0,0,0])}),u=function(t,e,i,n){let r,s,a,o,h,u,c,l,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0];if(n<2||t>=e)return;let p=[],d=i/2;for(let i=0;i<n;i++)p.push([f(e,360*i/(n-1),d,v),f(e,360*i/(n-1),-d,v),f(t,360*i/(n-1),-d,v),f(t,360*i/(n-1),d,v)]);let m=[];for(let t=0;t<n-1;t++)r=p[t][0],s=p[t][1],a=p[t][2],o=p[t][3],h=p[t+1][0],u=p[t+1][1],c=p[t+1][2],l=p[t+1][3],m.push([r[0],r[1],r[2],o[0],o[1],o[2],o[0],o[1],o[2],l[0],l[1],l[2],h[0],h[1],h[2],r[0],r[1],r[2],s[0],s[1],s[2],a[0],a[1],a[2],a[0],a[1],a[2],c[0],c[1],c[2],u[0],u[1],u[2],s[0],s[1],s[2],r[0],r[1],r[2],s[0],s[1],s[2],o[0],o[1],o[2],a[0],a[1],a[2]]);return new Float32Array(m.flat())},f=function(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];return n.al(t*Math.cos(e*Math.PI/180)+r[0],i+r[1],-t*Math.sin(e*Math.PI/180)+r[2])},c=()=>({vertex:"\n        struct Uniforms {\n            mvpMatrix : mat4x4<f32>,\n        };\n        @binding(0) @group(0) var<uniform> uniforms : Uniforms;\n        \n        @vertex\n        fn main(@location(0) pos: vec4<f32>) ->  @builtin(position) vec4<f32> {\n            return uniforms.mvpMatrix * pos;     \n        }",fragment:"\n        @fragment\n        fn main() -> @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 1.0, 0.0, 1.0);            \n        }"}),l=()=>({shader:c(),vertex:u(1,2,2,20,[0,0,0])}),v=function(t,e,i,n){let r,s,a,o,h,u,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0];if(n<2)return;let c=[],l=i/2;for(let i=0;i<n+1;i++)c.push([p(t,360*i/(n-1),l,f),p(e,360*i/(n-1),-l,f),p(0,360*i/(n-1),-l,f),p(0,360*i/(n-1),l,f)]);let v=[];for(let t=0;t<n-1;t++)r=c[t][0],s=c[t][1],a=c[t][2],o=c[t][3],h=c[t+1][0],u=c[t+1][1],v.push([r[0],r[1],r[2],o[0],o[1],o[2],h[0],h[1],h[2],r[0],r[1],r[2],s[0],s[1],s[2],a[0],a[1],a[2],u[0],u[1],u[2],s[0],s[1],s[2],r[0],r[1],r[2],s[0],s[1],s[2]]);return new Float32Array(v.flat())},p=function(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];return n.al(t*Math.cos(e*Math.PI/180)+r[0],i+r[1],-t*Math.sin(e*Math.PI/180)+r[2])},d=()=>({vertex:"\n        struct Uniforms {\n            mvpMatrix : mat4x4<f32>,\n        };\n        @binding(0) @group(0) var<uniform> uniforms : Uniforms;\n        \n        @vertex\n        fn main(@location(0) pos: vec4<f32>) ->  @builtin(position) vec4<f32> {\n            return uniforms.mvpMatrix * pos;     \n        }",fragment:"\n        @fragment\n        fn main() -> @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 0.0, 0.0, 1.0);            \n        }"}),m=()=>({shader:d(),vertex:v(1,2,2,20,[0,0,0])}),g=function(t,e,i,n){let r,s,a,o,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0];if(n<2||i<2)return;let u=[];for(let s=0;s<i;s++){let a=[];for(let o=0;o<n;o++)r=M(t,e,360*s/(i-1),360*o/(n-1),h),a.push(r);u.push(a)}let f=[];for(let t=0;t<i-1;t++)for(let e=0;e<n-1;e++)s=u[t][e],a=u[t+1][e],u[t+1][e+1],o=u[t][e+1],f.push([s[0],s[1],s[2],a[0],a[1],a[2],o[0],o[1],o[2],s[0],s[1],s[2]]);return new Float32Array(f.flat())},M=function(t,e,i,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0],a=Math.cos(r*Math.PI/180);return n.al((t+e*a)*Math.cos(i*Math.PI/180)+s[0],e*Math.sin(r*Math.PI/180)+s[1],-(t+e*a)*Math.sin(i*Math.PI/180)+s[2])},x=()=>({vertex:"\n        struct Uniforms {\n            mvpMatrix : mat4x4<f32>,\n        };\n        @binding(0) @group(0) var<uniform> uniforms : Uniforms;\n        \n        @vertex\n        fn main(@location(0) pos: vec4<f32>) ->  @builtin(position) vec4<f32> {\n            return uniforms.mvpMatrix * pos;     \n        }",fragment:"\n        @fragment\n        fn main() -> @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 0.0, 0.0, 1.0);            \n        }"}),w=()=>({shader:x(),vertex:g(2,.75,50,20,[0,0,0])});var P=i(81519),U=i(46049);function b(t){return t*Math.PI/180}class B{update(){this.position[0]+=-.01,this.forwards=[Math.cos(b(this.eulers[2]))*Math.cos(b(this.eulers[1])),Math.sin(b(this.eulers[2]))*Math.cos(b(this.eulers[1])),Math.sin(b(this.eulers[1]))],n.kC(this.right,this.forwards,[0,1,0]),n.kC(this.up,this.right,this.forwards);var t=n.Ue();n.IH(t,this.position,this.forwards),this.view=P.Ue(),P.zB(this.view,this.position,t,this.up)}get_view(){return this.view}constructor(t,e,i){this.position=t,this.eulers=[0,i,e],this.forwards=n.Ue(),this.right=n.Ue(),this.up=n.Ue(),console.log(this.up)}}class y{update(){this.camera.update();let t=this.vp.projectionMatrix;this.vMatrix=this.camera.view,P.Jp(this.vpMatrix,t,this.vMatrix),(0,U.z)(this.modelMatrix,this.translation,this.rotation),P.Jp(this.mvpMatrix,this.vpMatrix,this.modelMatrix)}constructor(t){this.rotation=n.al(0,0,0),this.translation=n.al(0,0,0),this.solution=t,this.canvas=t.canvas,this.modelMatrix=P.Ue(),this.mvpMatrix=P.Ue(),this.vMatrix=P.Ue(),this.vpMatrix=P.Ue(),this.vp=(0,U.h)(this.canvas.width/this.canvas.height),this.vpMatrix=this.vp.viewProjectionMatrix,this.camera=new B([-5,0,0],1,1)}}class A{async initWebGPU(){if(!navigator.gpu)throw Error("Not Support WebGPU");let t=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!t)throw Error("No Adapter Found");let e=await t.requestDevice();this.ctx=this.canvas.getContext("webgpu");let i=navigator.gpu.getPreferredCanvasFormat?navigator.gpu.getPreferredCanvasFormat():this.ctx.getPreferredFormat(t);window.devicePixelRatio,this.canvas.width=this.divHost.clientWidth,this.canvas.height=this.divHost.clientHeight,this.ctx.configure({device:e,format:i,alphaMode:"opaque"}),this.size={width:this.canvas.width,height:this.canvas.height},this.device=e,this.format=i,this.camera=new y(this),this.initPipeline(this.device,this.format)}async initPipeline(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];let i=w();Math.random()>.8?i=h():.2>Math.random()?i=l():.5>Math.random()&&(i=m()),this.vertexBuffer=r(t,i.vertex),this.numberOfVertices=i.vertex.length/3;let n=i.shader;this.pipeline=t.createRenderPipeline({layout:"auto",vertex:{module:t.createShaderModule({code:n.vertex}),entryPoint:"main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,format:"float32x3",offset:0}]}]},fragment:{module:t.createShaderModule({code:n.fragment}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"line-list"}}),this.uniformBuffer=t.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.uniformBindGroup=t.createBindGroup({layout:this.pipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.uniformBuffer,offset:0,size:64}}]}),this.textureView=this.ctx.getCurrentTexture().createView(),this.renderPassDescription={colorAttachments:[{view:this.textureView,clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]},this.requestAni=requestAnimationFrame(this.loop)}drawing(){this.camera.update(),this.device.queue.writeBuffer(this.uniformBuffer,0,this.camera.mvpMatrix),this.textureView=this.ctx.getCurrentTexture().createView(),this.renderPassDescription.colorAttachments[0].view=this.textureView;let t=this.device.createCommandEncoder(),e=t.beginRenderPass(this.renderPassDescription);e.setPipeline(this.pipeline),e.setVertexBuffer(0,this.vertexBuffer),e.setBindGroup(0,this.uniformBindGroup),e.draw(this.numberOfVertices),e.end(),this.device.queue.submit([t.finish()])}destroy(){for(this.device.destroy(),cancelAnimationFrame(this.requestAni);this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}constructor(t){this.isAnimation=!0,this.rotation=n.al(0,0,0),this.loop=()=>{this.isAnimation?(this.rotation[0]+=.01,this.rotation[1]+=.01,this.rotation[2]+=.01):this.rotation=[0,0,0],this.drawing(),this.isAnimation&&(this.requestAni=requestAnimationFrame(this.loop))},this.divHost=document.getElementById(t),this.canvas=document.createElement("canvas"),this.divHost.appendChild(this.canvas),this.initWebGPU()}}}}]);
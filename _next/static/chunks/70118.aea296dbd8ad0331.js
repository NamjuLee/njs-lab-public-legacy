"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70118],{70118:function(t,e,i){i.r(e),i.d(e,{Solution:function(){return l}});var a=i(81519),s=i(49644),r=i(50023);class n{zoom(t){}update(){a.zB(this.viewMatrix,this.eye,this.center,this.up),a.Jp(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix)}constructor(t=100,e=100,i=[2,2,4],r=[0,0,0],n=[0,1,0],h=5){this.viewMatrix=a.Ue(),this.projectionMatrix=a.Ue(),this.viewProjectionMatrix=a.Ue(),this.zoomMax=100,this.zoomSpeed=2,this.near=.01,this.far=1e4,this.mvpMatrix=a.Ue(),this.eye=s.al(0,0,0),this.center=s.al(0,0,0),this.up=s.al(0,1,0),this.type="camera",this.angleXY=Math.PI,this.angleZ=.25*Math.PI,this.distance=1,this.distance=h,this.width=t,this.height=e,this.respectRatio=t/e,this.eye=i,this.center=r,this.up=n}}class h extends n{init(){a.G3(this.projectionMatrix,2*Math.PI/5,this.respectRatio,this.near,this.far),this.update()}zoom(t){this.distance+=.01*t}constructor(t=100,e=100,i=[2,2,4],a=[0,0,0],s=[0,1,0],r=3){super(t,e,i,a,s,r),this.type="CameraPerspective",this.init()}}class o extends n{init(){c(this.projectionMatrix,this.width,this.height,this.near,this.far,this.distance),this.angleXY=0,this.angleZ=0,this.update()}zoom(t){this.distance+=t+50/this.distance,this.distance<1e-6&&(this.distance=1e-6),this.distance>1e5&&(this.distance=1e5),c(this.projectionMatrix,this.width,this.height,this.near,this.far,this.distance)}constructor(t=100,e=100,i=[0,0,1],a=[0,0,0],s=[0,1,0],r=300.1){super(t,e,i,a,s,r),this.type="CameraOrth",this.init()}}let c=(t,e,i,a,s,r)=>(t[0]=2/e*r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2/i*r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=-2/(s-a),t[11]=0,t[12]=0,t[13]=0,t[14]=.1,t[15]=1,t);class m{update(){this.camera.update(),d(this.modelMatrix,this.translation,this.rotation),a.Jp(this.mvpMatrix,this.camera.viewProjectionMatrix,this.modelMatrix)}rotateZ(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;this.rotation[2]+=t,this.update()}translateX(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;this.translation[0]+=t,this.update()}get getMatrix(){return this.mvpMatrix}shiftCamera(){this.camera===this.cameraPerspective?this.camera=this.cameraOrth:this.camera=this.cameraPerspective,this.update()}moveCamera(t,e){this.camera===this.cameraPerspective?this.arcRotation(t,e):this.pan(t,e)}arcRotation(t,e){t*=-.01,e*=-.01,this.camera.angleXY+=t,this.camera.angleZ+=e,this.camera.eye[0]=this.camera.center[0]+Math.sin(this.camera.angleXY)*Math.cos(this.camera.angleZ)*this.camera.distance,this.camera.eye[1]=this.camera.center[1]+Math.cos(this.camera.angleXY)*Math.cos(this.camera.angleZ)*this.camera.distance,this.camera.eye[2]=this.camera.center[2]+Math.sin(this.camera.angleZ)*this.camera.distance,this.update()}zoomWheel(t){this.camera===this.cameraPerspective?(this.camera.zoom(t),this.arcRotation(0,0)):this.camera.zoom(t),this.update()}pan(t,e){this.camera.center[0]+=t/this.camera.distance,this.camera.center[1]-=e/this.camera.distance,this.camera.eye[0]+=t/this.camera.distance,this.camera.eye[1]-=e/this.camera.distance,this.update()}appendEvent(t){t.addEventListener("drag",t=>{},!1),t.addEventListener("click",t=>{},!1),t.addEventListener("dblclick",t=>{},!1),t.addEventListener("drag",t=>{},!0),t.addEventListener("mouseup",t=>{},!1),t.addEventListener("mousedown",t=>{this.isDown=!0,this.pos[0]=t.offsetX,this.pos[1]=t.offsetY},!1),t.addEventListener("mouseup",t=>{this.isDown=!1},!1),t.addEventListener("mousemove",e=>{if(this.isDown){let t=this.pos[0]-e.offsetX,i=this.pos[1]-e.offsetY;this.moveCamera(t,i),this.pos[0]=e.offsetX,this.pos[1]=e.offsetY}else t.getBoundingClientRect()},!1),t.addEventListener("wheel",t=>{this.zoomWheel(t.deltaY)},!1),window.addEventListener("keydown",t=>{"p"===t.key&&this.shiftCamera()},!1)}constructor(t){this.modelMatrix=a.Ue(),this.mvpMatrix=a.Ue(),this.rotation=s.al(0,0,0),this.translation=s.al(0,0,0),this.screen2=r.al(0,0),this.pos=[0,0],this.isDown=!1,this.solution=t,this.canvas=t.canvas;let e=s.al(2.6451475620269775,3.130298137664795,2.864337205886841),i=s.al(0,0,0),n=s.al(0,0,1);this.cameraPerspective=new h(this.canvas.width,this.canvas.height,e,i,n),this.camera=this.cameraPerspective,this.arcRotation(0,0),this.cameraOrth=new o(this.canvas.width,this.canvas.height),this.camera=this.cameraOrth,this.appendEvent(this.canvas),this.update()}}let d=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],r=a.Ue(),n=a.Ue(),h=a.Ue(),o=a.Ue(),c=a.Ue();a.vc(o,e),a.aC(r,i[0]),a.gT(n,i[1]),a.QO(h,i[2]),a.xJ(c,s),a.Jp(t,r,c),a.Jp(t,n,t),a.Jp(t,h,t),a.Jp(t,o,t)};class l{async init(){this.cameraController=new m(this);let t=this.canvas.getContext("webgl2"),e=t.createProgram(),i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,'export default "#version 300 es\\n#define GLSLIFY 1\\n#pragma vscode_glsllint_stage: vert\\n\\nuniform mat4 uModel;\\nuniform mat4 uView;\\nuniform mat4 uProjection;\\nuniform mat4 cameraProjection;\\n\\nlayout(location=0) in vec4 aPosition;\\nlayout(location=1) in vec4 aColor;\\n\\nout vec4 vColor;\\n\\nvoid main()\\n{\\n    vColor = aColor;\\n    gl_Position = cameraProjection * uModel * aPosition;\\n}";'),t.compileShader(i),t.attachShader(e,i);let s=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(s,'export default "#version 300 es\\n#pragma vscode_glsllint_stage: frag\\n\\nprecision mediump float;\\n#define GLSLIFY 1\\n\\nin vec4 vColor;\\n\\nout vec4 fragColor;\\n\\nvoid main()\\n{\\n    fragColor = vColor;\\n}";'),t.compileShader(s),t.attachShader(e,s),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS),t.useProgram(e),t.enable(t.DEPTH_TEST);let r=new Float32Array([-.5,-.5,-.5,0,1,1,-.5,.5,.5,0,1,1,-.5,.5,-.5,0,1,1,-.5,-.5,.5,0,1,1,-.5,.5,.5,0,1,1,-.5,-.5,-.5,0,1,1,.5,-.5,-.5,1,0,1,.5,.5,-.5,1,0,1,.5,.5,.5,1,0,1,.5,.5,.5,1,0,1,.5,-.5,.5,1,0,1,.5,-.5,-.5,1,0,1,-.5,-.5,-.5,0,1,0,.5,-.5,-.5,0,1,0,.5,-.5,.5,0,1,0,.5,-.5,.5,0,1,0,-.5,-.5,.5,0,1,0,-.5,-.5,-.5,0,1,0,-.5,.5,-.5,1,1,0,.5,.5,.5,1,1,0,.5,.5,-.5,1,1,0,-.5,.5,.5,1,1,0,.5,.5,.5,1,1,0,-.5,.5,-.5,1,1,0,.5,-.5,-.5,0,0,1,-.5,-.5,-.5,0,0,1,.5,.5,-.5,0,0,1,-.5,.5,-.5,0,0,1,.5,.5,-.5,0,0,1,-.5,-.5,-.5,0,0,1,-.5,-.5,.5,1,0,0,.5,-.5,.5,1,0,0,.5,.5,.5,1,0,0,.5,.5,.5,1,0,0,-.5,.5,.5,1,0,0,-.5,-.5,.5,1,0,0]),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),t.vertexAttribPointer(0,3,t.FLOAT,!1,24,0),t.vertexAttribPointer(1,3,t.FLOAT,!1,24,12),t.enableVertexAttribArray(0),t.enableVertexAttribArray(1);let h=t.getUniformLocation(e,"uModel"),o=t.getUniformLocation(e,"uView"),c=t.getUniformLocation(e,"uProjection"),d=t.getUniformLocation(e,"cameraProjection"),l=a.Ue(),v=a.Ue(),p=a.Ue();a.jI(l,l,0),a.bA(l,l,[.8,.8,.8]),a.zB(v,[1,1,0],[0,0,0],[0,1,0]),a.G3(p,Math.PI/1.5,t.canvas.width/t.canvas.height,.1,10),t.uniformMatrix4fv(o,!1,v),t.uniformMatrix4fv(c,!1,p);let u=()=>{requestAnimationFrame(u),this.cameraController.update(),a.U1(l,l,.01,[0,0,1]),t.uniformMatrix4fv(h,!1,l),t.uniformMatrix4fv(d,!1,this.cameraController.getMatrix),t.drawArrays(t.TRIANGLES,0,36)};u()}destroy(){this.divHost.removeChild(this.canvas)}constructor(t){this.divHost=document.getElementById(t),this.canvas=document.createElement("canvas"),this.divHost.appendChild(this.canvas),this.canvas.width=this.divHost.clientWidth,this.canvas.height=this.divHost.clientHeight,this.init()}}}}]);
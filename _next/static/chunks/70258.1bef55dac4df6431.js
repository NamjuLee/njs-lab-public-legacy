"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70258,63332],{91870:function(e,t,r){r.d(t,{a:function(){return v},b:function(){return p},c:function(){return o},e:function(){return w},f:function(){return s},g:function(){return m},i:function(){return d},j:function(){return f},l:function(){return g},n:function(){return h},s:function(){return n},t:function(){return b}});var i=r(77584);function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function n(e,t,r,i,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=o,e}function s(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function l(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function a(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function u(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function p(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function c(e,t){let r=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(r*r+i*i+o*o+n*n)}function y(e,t){let r=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2],n=t[3]-e[3];return r*r+i*i+o*o+n*n}function d(e){let t=e[0],r=e[1],i=e[2],o=e[3];return Math.sqrt(t*t+r*r+i*i+o*o)}function f(e){let t=e[0],r=e[1],i=e[2],o=e[3];return t*t+r*r+i*i+o*o}function h(e,t){let r=t[0],i=t[1],o=t[2],n=t[3],s=r*r+i*i+o*o+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=r*s,e[1]=i*s,e[2]=o*s,e[3]=n*s),e}function m(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function g(e,t,r,i){let o=t[0],n=t[1],s=t[2],l=t[3];return e[0]=o+i*(r[0]-o),e[1]=n+i*(r[1]-n),e[2]=s+i*(r[2]-s),e[3]=l+i*(r[3]-l),e}function b(e,t,r){let i=t[0],o=t[1],n=t[2],s=t[3];return e[0]=r[0]*i+r[4]*o+r[8]*n+r[12]*s,e[1]=r[1]*i+r[5]*o+r[9]*n+r[13]*s,e[2]=r[2]*i+r[6]*o+r[10]*n+r[14]*s,e[3]=r[3]*i+r[7]*o+r[11]*n+r[15]*s,e}function v(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function w(e,t){let r=e[0],o=e[1],n=e[2],s=e[3],l=t[0],a=t[1],u=t[2],p=t[3],c=(0,i.bn)();return Math.abs(r-l)<=c*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-a)<=c*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(n-u)<=c*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(s-p)<=c*Math.max(1,Math.abs(s),Math.abs(p))}Object.freeze(Object.defineProperty({__proto__:null,add:s,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:o,copyVec3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:c,distance:c,div:u,divide:u,dot:m,equals:w,exactEquals:v,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:d,length:d,lerp:g,max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},mul:a,multiply:a,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:h,random:function(e,t){let r,o,n,s,l,a;let u=i.FD;t=t||1;do l=(r=2*u()-1)*r+(o=2*u()-1)*o;while(l>=1);do a=(n=2*u()-1)*n+(s=2*u()-1)*s;while(a>=1);let p=Math.sqrt((1-l)/a);return e[0]=t*r,e[1]=t*o,e[2]=t*n*p,e[3]=t*s*p,e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:p,scaleAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e},set:n,sqrDist:y,sqrLen:f,squaredDistance:y,squaredLength:f,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:l,subtract:l,transformMat4:b,transformQuat:function(e,t,r){let i=t[0],o=t[1],n=t[2],s=r[0],l=r[1],a=r[2],u=r[3],p=u*i+l*n-a*o,c=u*o+a*i-s*n,y=u*n+s*o-l*i,d=-s*i-l*o-a*n;return e[0]=p*u+-(d*s)+-(c*a)- -(y*l),e[1]=c*u+-(d*l)+-(y*s)- -(p*a),e[2]=y*u+-(d*a)+-(p*l)- -(c*s),e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))},57812:function(e,t,r){r.d(t,{z:function(){return o}});var i=r(85515);class o{constructor(e,t){this._storage=new i.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},85515:function(e,t,r){r.d(t,{WJ:function(){return l},Xq:function(){return s}});var i,o,n=r(35313);(i=o||(o={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";class s{constructor(e,t,r){this.name=e,this._storage=t,this.id=a+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,r,i=0){this._storage.put(this,e,t,r,i)}pop(e){let t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){let t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t,r){this._storage.updateSize(this,e,t,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class l{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n.Z,this._users=new n.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(t=>t[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){let r=this._db.get(e.id+t);return r?.size??0}put(e,t,r,i,n){t=e.id+t;let s=this._db.get(t);return(s&&(this._size-=s.size,e.size-=s.size,this._db.delete(t),s.entry!==r&&this._notifyRemove(t,s.entry,s.size,o.ALL)),i>this._maxSize)?void this._notifyRemove(t,r,i,o.ALL):void 0===r?void console.warn("Refusing to cache undefined entry "):!i||i<0?(console.warn(`Refusing to cache entry with size ${i} for key ${t}`),void this._notifyRemove(t,r,0,o.ALL)):void(this._db.set(t,new u(r,i,1+Math.max(n,-4)- -3)),this._size+=i,e.size+=i,this._checkSize())}updateSize(e,t,r,i){t=e.id+t;let n=this._db.get(t);if(n&&n.entry===r){for(this._size-=n.size,e.size-=n.size;i>this._maxSize;){let e=this._notifyRemove(t,r,i,o.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);i=e}n.size=i,this._size+=i,e.size+=i,this._checkSize()}}pop(e,t){t=e.id+t;let r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(e,t){t=e.id+t;let r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}peek(e,t){let r=this._db.get(e.id+t);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){let e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=[];this._db.forEach((e,i)=>{let o=e.lifetime;r[o]=(r[o]||0)+e.size,this._users.forAll(r=>{let{id:o,name:n}=r;if(i.startsWith(o)){let r=t[n]||0;t[n]=r+e.size}})});let i={};this._users.forAll(e=>{let r=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){let o=t[r]||0;t[r]=o,i[r]=Math.round(100*e.hitRate)+"%"}else i[r]="0%"});let o=Object.keys(t);o.sort((e,r)=>t[r]-t[e]),o.forEach(r=>e[r]=Math.round(t[r]/1048576)+"MB / "+i[r]);for(let t=r.length-1;t>=0;--t){let i=r[t];i&&(e["Priority "+(t+-3-1)]=Math.round(i/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){let t=e.id;this._db.forEach((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,e.size,o.ALL))}),e.size=0}clearAll(){this._db.forEach((e,t)=>this._notifyRemove(t,e.entry,e.size,o.ALL)),this._users.forAll(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,r,i){let o;return this._removeFuncs.some(n=>{if(e.startsWith(n[0])){let e=n[1](t,i,r);return"number"==typeof e&&(o=e),!0}return!1}),o}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e)),this._checkSizeLimits()}_checkSizeLimits(e){let t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;let r=e?.id,i=!0;for(;i;)for(let[o,n]of(i=!1,this._db))if(0===n.lifetime&&(!r||o.startsWith(r))){if(this._purgeItem(o,n,e),t.size<=.9*t.maxSize)return;i||=this._db.has(o)}for(let[i,o]of this._db)if((!r||i.startsWith(r))&&(this._purgeItem(i,o,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,r=this._users.find(t=>e.startsWith(t.id))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);let i=this._notifyRemove(e,t.entry,t.size,o.SOME);null!=i&&i>0&&(this._size+=i,r&&(r.size+=i),t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}let a=0;class u{constructor(e,t,r){this.entry=e,this.size=t,this.lifetime=r,this.lives=r}}},28541:function(e,t,r){r.d(t,{R:function(){return v},w:function(){return w}});var i=r(86641),o=r(94761),n=r(36399),s=r(61764),l=r(39553);class a{constructor(){this._propertyOriginMap=new Map,this._originStores=Array(l.v8),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){let t=new a,r=this._originStores[l.s3.DEFAULTS];r&&r.forEach((e,r)=>{t.set(r,(0,s.d9)(e),l.s3.DEFAULTS)});for(let r=l.s3.SERVICE;r<l.v8;r++){let i=this._originStores[r];i&&i.forEach((i,o)=>{e&&e.has(o)||t.set(o,(0,s.d9)(i),r)})}return t}get(e,t){let r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){let t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=l.s3.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){let i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=l.s3.USER){let r=this._originStores[t];if(!r)return;let i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){let t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){let r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;let r=this._originStores[t],i=r?.get(e),o=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),o!==i}originOf(e){return this._propertyOriginMap.get(e)||l.s3.DEFAULTS}forEach(e){this._values.forEach(e)}}var u=r(22819),p=r(56529),c=r(64186);let y=e=>{let t=class extends e{constructor(...e){super(...e);let t=(0,p.vw)(this),r=t.store,i=new a;t.store=i,(0,n.M)(t,r,i)}read(e,t){(0,u.i)(this,e,t)}getAtOrigin(e,t){let r=d(this),i=(0,l.M9)(t);if("string"==typeof e)return r.get(e,i);let o={};return e.forEach(e=>{o[e]=r.get(e,i)}),o}originOf(e){return(0,l.x3)(this.originIdOf(e))}originIdOf(e){return d(this).originOf(e)}revert(e,t){let r=d(this),i=(0,l.M9)(t),o=(0,p.vw)(this);("string"==typeof e?"*"===e?r.keys(i):[e]:e).forEach(e=>{o.invalidate(e),r.revert(e,i),o.commit(e)})}};return(0,i._)([(0,c.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],t)};function d(e){return(0,p.vw)(e).store}let f=class extends y(o.Z){};f=(0,i._)([(0,c.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],f);var h=r(15458),m=r(72491);let g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return b(this).delete(e,(0,l.M9)(t))}write(e,t){return(0,m.c)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,p.vw)(this).setAtOrigin(e,t,(0,l.M9)(r))}removeOrigin(e){let t=b(this),r=(0,l.M9)(e);for(let e of t.keys(r))t.originOf(e)===r&&t.set(e,t.get(e,r),l.s3.USER)}updateOrigin(e,t){let r=b(this),i=(0,l.M9)(t),o=(0,h.U2)(this,e);for(let t=i+1;t<l.v8;++t)r.delete(e,t);r.set(e,o,i)}toJSON(e){return this.write({},e)}};return(t=(0,i._)([(0,c.j)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t};function b(e){return(0,p.vw)(e).store}let v=e=>{let t=class extends g(y(e)){constructor(...e){super(...e)}};return(0,i._)([(0,c.j)("esri.core.MultiOriginJSONSupport")],t)},w=class extends v(o.Z){};w=(0,i._)([(0,c.j)("esri.core.MultiOriginJSONSupport")],w)},97558:function(e,t,r){r.d(t,{$c:function(){return d},Hg:function(){return f},jW:function(){return c},uD:function(){return y}});var i=r(94761),o=r(50973),n=r(56529);let s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function l(e){return e instanceof i.Z}function a(e){return e instanceof o.Z?Object.keys(e.items):l(e)?(0,n.vw)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof o.Z?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function c(e,t){return y(e,t)}function y(e,t){if(null==e)return!1;let r=t.split("."),i=e;for(let e of r){if("complete"===i.type)break;if("partial"!==i.type)return!1;{let t=i.diff[e];if(!t)return!1;i=t}}return!0}function d(e,t){if(!e)return!1;if("partial"===e.type){let r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function f(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:function e(t,r){let i;let o=t.diff;if(o&&"function"==typeof o)return o(t,r);let n=a(t),c=a(r);if(0===n.length&&0===c.length)return;if(!n.length||!c.length||!(!Array.isArray(t)||!Array.isArray(r))&&t.length!==r.length)return{type:"complete",oldValue:t,newValue:r};let y=c.filter(e=>!n.includes(e)),d=n.filter(e=>!c.includes(e)),f=n.filter(e=>c.includes(e)&&u(t,e)!==u(r,e)).concat(y,d).sort(),h=p(t);if(h&&s.has(h)&&f.length)return{type:"complete",oldValue:t,newValue:r};let m=l(t)&&l(r);for(let n of f){let s;let l=u(t,n),a=u(r,n);if((m||"function"!=typeof l&&"function"!=typeof a)&&l!==a&&(null!=l||null!=a)){if(o&&o[n]&&"function"==typeof o[n])s=o[n]?.(l,a);else if(l instanceof Date&&a instanceof Date){if(l.getTime()===a.getTime())continue;s={type:"complete",oldValue:l,newValue:a}}else s="object"==typeof l&&"object"==typeof a&&p(l)===p(a)?e(l,a):{type:"complete",oldValue:l,newValue:a};null!=s&&(null!=i?i.diff[n]=s:i={type:"partial",diff:{[n]:s}})}}return i}(e,t)}},57111:function(e,t,r){r.d(t,{C:function(){return i}});let i=["operational-layers","basemap","ground"]},12840:function(e,t,r){r.d(t,{D:function(){return o}});var i=r(55110);function o(e){e?.writtenProperties&&e.writtenProperties.forEach(({target:e,propName:t,newOrigin:r})=>{(0,i.l)(e)&&r&&e.originOf(t)!==r&&e.updateOrigin(t,r)})}},40465:function(e,t,r){function i(){return[0,0,0,0]}function o(e,t,r,i){return[e,t,r,i]}function n(){return i()}function s(){return o(1,1,1,1)}function l(){return o(1,0,0,0)}function a(){return o(0,1,0,0)}function u(){return o(0,0,1,0)}function p(){return o(0,0,0,1)}r.d(t,{Ue:function(){return i},al:function(){return o}});let c=n(),y=s(),d=l(),f=a(),h=u();Object.freeze(Object.defineProperty({__proto__:null,ONES:y,UNIT_W:p(),UNIT_X:d,UNIT_Y:f,UNIT_Z:h,ZEROS:c,clone:function(e){return[e[0],e[1],e[2],e[3]]},create:i,createView:function(e,t){return new Float64Array(e,t,4)},fromArray:function(e,t=i()){let r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t},fromValues:o,ones:s,unitW:p,unitX:l,unitY:a,unitZ:u,zeros:n},Symbol.toStringTag,{value:"Module"}))},55110:function(e,t,r){r.d(t,{l:function(){return i}});function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}},22521:function(e,t,r){r.d(t,{A4:function(){return n},L9:function(){return s},yV:function(){return o}});var i=r(9450);class o{}function n(e){return e instanceof i.ld?e===o.instance:"unknown"===e?.toString().toLowerCase()}function s(e){return n(e)?o.instance:e}o.instance=new i.vF("Etc/UTC")},48932:function(e,t,r){function i(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function o(e){if("lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length)return e;let{originPosition:t,scale:r,translate:i}=e,o=r[0]??1,n=r[1]??1;return{originPosition:"lowerLeft",scale:[o,"lowerLeft"===t?n:-n,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function n({scale:e,translate:t},r){return r*e[0]+t[0]}function s({scale:e,translate:t},r){return r*e[1]+t[1]}function l({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function a({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function u(e,t){return e&&t?d:e&&!t?c:!e&&t?y:p}r.d(t,{G6:function(){return v},Ie:function(){return b},J9:function(){return m},RF:function(){return h},U1:function(){return g},vY:function(){return i}}),r(5005);let p=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let i=t[0],o=n(e,i[0]),l=s(e,i[1]);r[0]=[o,l];let{scale:a,originPosition:u}=e,p=a[0],c="lowerLeft"===u?a[1]:-a[1];for(let e=1;e<t.length;e++){let[i,n]=t[e];o+=p*i,l+=c*n,r[e]=[o,l]}return r},c=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let i=t[0],o=n(e,i[0]),a=s(e,i[1]);r[0]=[o,a,l(e,i[2])];let{scale:u,originPosition:p}=e,c=u[0],y="lowerLeft"===p?u[1]:-u[1];for(let i=1;i<t.length;i++){let[n,s,u]=t[i];o+=c*n,a+=y*s,r[i]=[o,a,l(e,u)]}return r},y=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let i=t[0],o=n(e,i[0]),l=s(e,i[1]);r[0]=[o,l,a(e,i[2])];let{scale:u,originPosition:p}=e,c=u[0],y="lowerLeft"===p?u[1]:-u[1];for(let i=1;i<t.length;i++){let[n,s,u]=t[i];o+=c*n,l+=y*s,r[i]=[o,l,a(e,u)]}return r},d=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let i=t[0],o=n(e,i[0]),u=s(e,i[1]);r[0]=[o,u,l(e,i[2]),a(e,i[3])];let{scale:p,originPosition:c}=e,y=p[0],d="lowerLeft"===c?p[1]:-p[1];for(let i=1;i<t.length;i++){let[n,s,p,c]=t[i];o+=y*n,u+=d*s,r[i]=[o,u,l(e,p),a(e,c)]}return r};function f(e,t,r){let i=Array(r.length);for(let o=0;o<r.length;o++)i[o]=t(e,r[o]);return i}function h(e,t,r){let i=o(e);return t.x=function({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}(i,r.x),t.y=function({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}(i,r.y),null!=r.z&&(t.z=function({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}(i,r.z)),null!=r.m&&(t.m=function({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}(i,r.m)),t}function m(e,t,r,i=r?.hasZ??!1,n=r?.hasM??!1){if(null!=r){let s=o(e);t.points=u(i,n)(s,r.points),t.hasZ=i,t.hasM=n}return t}function g(e,t,r,i=null!=r?.z,u=null!=r?.m){if(null==r)return t;let p=o(e);return t.x=n(p,r.x),t.y=s(p,r.y),i&&(t.z=l(p,r.z)),u&&(t.m=a(p,r.m)),t}function b(e,t,r,i=r?.hasZ??!1,n=r?.hasM??!1){if(null!=r){let s=o(e);t.rings=f(s,u(i,n),r.rings),t.hasZ=i,t.hasM=n}return t}function v(e,t,r,i=r?.hasZ??!1,n=r?.hasM??!1){if(null!=r){let s=o(e);t.paths=f(s,u(i,n),r.paths),t.hasZ=i,t.hasM=n}return t}},99927:function(e,t,r){r.r(t),r.d(t,{default:function(){return tu}});var i,o,n=r(86641),s=r(39301),l=r(55066),a=r(19637),u=r(23504);r(97278),r(79073),r(92494),r(57489),r(54844),r(21153),r(1406),r(94267);var p=r(90071),c=r(65223),y=r(50973),d=r(94605),f=r(28541),h=r(49119),m=r(31124),g=r(20128),b=r(9266),v=r(72659),w=r(89312);r(37180),r(3457);var S=r(37647),_=r(64186),C=r(50713),M=r(12840),I=r(9377),T=r(20928),L=r(62329),P=r(37109),N=r(14066),A=r(59727),O=r(15346),Z=r(89973),R=r(96922),B=r(21161),x=r(689),k=r(96938);let F=class extends x.wq{constructor(e){super(e),this.break=new k.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),this.first=new k.Z({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),this.unlocated=new k.Z({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),this.last=new k.Z({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),this.middle=new k.Z({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),this.waypoint=new k.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}})}};(0,n._)([(0,w.Cb)({types:B.jY})],F.prototype,"break",void 0),(0,n._)([(0,w.Cb)({types:B.jY})],F.prototype,"first",void 0),(0,n._)([(0,w.Cb)({types:B.jY})],F.prototype,"unlocated",void 0),(0,n._)([(0,w.Cb)({types:B.jY})],F.prototype,"last",void 0),(0,n._)([(0,w.Cb)({types:B.jY})],F.prototype,"middle",void 0),(0,n._)([(0,w.Cb)({types:B.jY})],F.prototype,"waypoint",void 0);let j=F=(0,n._)([(0,_.j)("esri.layers.support.RouteStopSymbols")],F);var E=r(94833),z=r(88565);let G=class extends x.wq{constructor(e){super(e),this.directionLines=new E.Z({color:[0,122,194],width:6}),this.directionPoints=new k.Z({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),this.pointBarriers=new k.Z({style:"x",size:10,outline:{color:[255,0,0],width:3}}),this.polygonBarriers=new z.Z({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),this.polylineBarriers=new E.Z({width:7.5,color:[255,85,0,.7]}),this.routeInfo=new E.Z({width:8,color:[20,89,127]}),this.stops=new j}};(0,n._)([(0,w.Cb)({types:B.tY})],G.prototype,"directionLines",void 0),(0,n._)([(0,w.Cb)({types:B.jY})],G.prototype,"directionPoints",void 0),(0,n._)([(0,w.Cb)({types:B.jY})],G.prototype,"pointBarriers",void 0),(0,n._)([(0,w.Cb)({types:B.CR})],G.prototype,"polygonBarriers",void 0),(0,n._)([(0,w.Cb)({types:B.tY})],G.prototype,"polylineBarriers",void 0),(0,n._)([(0,w.Cb)({types:B.tY})],G.prototype,"routeInfo",void 0),(0,n._)([(0,w.Cb)({type:j})],G.prototype,"stops",void 0);let D=G=(0,n._)([(0,_.j)("esri.layers.support.RouteSymbols")],G);var J=r(81449),U=r(20550),q=r(63332),V=r(54748),W=r(30563),H=r(28305),$=r(35979);let Y=class extends x.wq{constructor(e){super(e),this.dataType=null,this.name=null,this.parameterNames=null,this.restrictionUsageParameterName=null,this.timeNeutralAttributeName=null,this.trafficSupport=null,this.units=null,this.usageType=null}};(0,n._)([(0,w.Cb)({type:String})],Y.prototype,"dataType",void 0),(0,n._)([(0,H.J)($.Ul,{ignoreUnknown:!1})],Y.prototype,"name",void 0),(0,n._)([(0,w.Cb)({type:[String]})],Y.prototype,"parameterNames",void 0),(0,n._)([(0,w.Cb)({type:String})],Y.prototype,"restrictionUsageParameterName",void 0),(0,n._)([(0,H.J)($.ZI,{ignoreUnknown:!1})],Y.prototype,"timeNeutralAttributeName",void 0),(0,n._)([(0,w.Cb)({type:String})],Y.prototype,"trafficSupport",void 0),(0,n._)([(0,H.J)($.dg)],Y.prototype,"units",void 0),(0,n._)([(0,H.J)($.E2)],Y.prototype,"usageType",void 0);let K=Y=(0,n._)([(0,_.j)("esri.rest.support.NetworkAttribute")],Y),X=class extends x.wq{constructor(e){super(e),this.buildTime=null,this.name=null,this.networkAttributes=null,this.networkSources=null,this.state=null}};(0,n._)([(0,w.Cb)({type:Number})],X.prototype,"buildTime",void 0),(0,n._)([(0,w.Cb)({type:String})],X.prototype,"name",void 0),(0,n._)([(0,w.Cb)({type:[K]})],X.prototype,"networkAttributes",void 0),(0,n._)([(0,w.Cb)()],X.prototype,"networkSources",void 0),(0,n._)([(0,w.Cb)({type:String})],X.prototype,"state",void 0);let Q=X=(0,n._)([(0,_.j)("esri.rest.support.NetworkDataset")],X);var ee=r(52157);let et=class extends x.wq{constructor(e){super(e),this.accumulateAttributeNames=null,this.attributeParameterValues=null,this.currentVersion=null,this.defaultTravelMode=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsSupportedLanguages=null,this.directionsTimeAttribute=null,this.hasZ=null,this.impedance=null,this.networkDataset=null,this.supportedTravelModes=null}readAccumulateAttributes(e){return null==e?null:e.map(e=>$.Ul.fromJSON(e))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map(e=>$.Ul.toJSON(e)))}get capabilities(){return{supportsNow:(this.currentVersion??10)>=10.81}}readDefaultTravelMode(e,t){let r=t.supportedTravelModes?.find(({id:e})=>e===t.defaultTravelMode)??t.supportedTravelModes?.find(({itemId:e})=>e===t.defaultTravelMode);return r?ee.Z.fromJSON(r):null}};(0,n._)([(0,w.Cb)()],et.prototype,"accumulateAttributeNames",void 0),(0,n._)([(0,S.r)("accumulateAttributeNames")],et.prototype,"readAccumulateAttributes",null),(0,n._)([(0,C.c)("accumulateAttributeNames")],et.prototype,"writeAccumulateAttributes",null),(0,n._)([(0,w.Cb)()],et.prototype,"attributeParameterValues",void 0),(0,n._)([(0,w.Cb)()],et.prototype,"capabilities",null),(0,n._)([(0,w.Cb)()],et.prototype,"currentVersion",void 0),(0,n._)([(0,w.Cb)()],et.prototype,"defaultTravelMode",void 0),(0,n._)([(0,S.r)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],et.prototype,"readDefaultTravelMode",null),(0,n._)([(0,w.Cb)()],et.prototype,"directionsLanguage",void 0),(0,n._)([(0,H.J)($.GX)],et.prototype,"directionsLengthUnits",void 0),(0,n._)([(0,w.Cb)()],et.prototype,"directionsSupportedLanguages",void 0),(0,n._)([(0,H.J)($.ZI,{ignoreUnknown:!1})],et.prototype,"directionsTimeAttribute",void 0),(0,n._)([(0,w.Cb)()],et.prototype,"hasZ",void 0),(0,n._)([(0,H.J)($.Ul,{ignoreUnknown:!1})],et.prototype,"impedance",void 0),(0,n._)([(0,w.Cb)({type:Q})],et.prototype,"networkDataset",void 0),(0,n._)([(0,w.Cb)({type:[ee.Z]})],et.prototype,"supportedTravelModes",void 0);let er=et=(0,n._)([(0,_.j)("esri.rest.support.NetworkServiceDescription")],et),ei=()=>c.Z.getLogger("esri.rest.networkService");function eo(e,t,r,i){i[r]=[t.length,t.length+e.length],e.forEach(e=>{t.push(e.geometry)})}async function en(e,t,r){if(!e)throw new d.Z("network-service:missing-url","Url to Network service is missing");let i=(0,W.lA)({f:"json",token:t},r),{data:o}=await (0,V.Z)(e,i),n=o.currentVersion>=10.4?el(e,t,r):es(e,r),{defaultTravelMode:s,supportedTravelModes:l}=await n;return o.defaultTravelMode=s,o.supportedTravelModes=l,er.fromJSON(o)}async function es(e,t){let r=(0,W.lA)({f:"json"},t),{data:i}=await (0,V.Z)(e.replace(/\/rest\/.*$/i,"/info"),r);if(!i?.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};let{owningSystemUrl:o}=i,n=(0,v.Qj)(o)+"/sharing/rest/portals/self",{data:s}=await (0,V.Z)(n,r),l=(0,h.hS)("helperServices.routingUtilities.url",s);if(!l)return{supportedTravelModes:[],defaultTravelMode:null};let a=(0,W.en)(o),u=/\/solve$/i.test(a.path)?"Route":/\/solveclosestfacility$/i.test(a.path)?"ClosestFacility":"ServiceAreas",p=(0,W.lA)({f:"json",serviceName:u},t),c=(0,v.Qj)(l)+"/GetTravelModes/execute",y=await (0,V.Z)(c,p),d=[],f=null;if(y?.data?.results?.length)for(let e of y.data.results)if("supportedTravelModes"===e.paramName){if(e.value?.features){for(let{attributes:t}of e.value.features)if(t){let e=JSON.parse(t.TravelMode);d.push(e)}}}else"defaultTravelMode"===e.paramName&&(f=e.value);return{supportedTravelModes:d,defaultTravelMode:f}}async function el(e,t,r){try{let i=(0,W.lA)({f:"json",token:t},r),o=(0,v.Qj)(e)+"/retrieveTravelModes",{data:{supportedTravelModes:n,defaultTravelMode:s}}=await (0,V.Z)(o,i);return{supportedTravelModes:n,defaultTravelMode:s}}catch(e){throw new d.Z("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e})}}var ea=r(15458),eu=r(38028),ep=r(23676),ec=r(9158),ey=r(78628),ed=r(740);let ef=new ed.X({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),eh=class extends x.wq{constructor(e){super(e),this.description=null,this.type=null}};(0,n._)([(0,w.Cb)({type:String,json:{write:!0}})],eh.prototype,"description",void 0),(0,n._)([(0,w.Cb)({type:String,json:{read:ef.read,write:ef.write}})],eh.prototype,"type",void 0);let em=eh=(0,n._)([(0,_.j)("esri.rest.support.GPMessage")],eh),eg=new ed.X({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"}),eb=class extends em{constructor(e){super(e),this.type=null}};(0,n._)([(0,w.Cb)({type:String,json:{read:eg.read,write:eg.write}})],eb.prototype,"type",void 0);let ev=eb=(0,n._)([(0,_.j)("esri.rest.support.NAMessage")],eb),ew=class extends x.wq{constructor(e){super(e)}};(0,n._)([(0,w.Cb)({json:{read:{source:"string"}}})],ew.prototype,"text",void 0),(0,n._)([(0,H.J)($.Ks,{name:"stringType"})],ew.prototype,"type",void 0);let eS=ew=(0,n._)([(0,_.j)("esri.rest.support.DirectionsString")],ew);var e_=r(33876);let eC=class extends x.wq{constructor(e){super(e),this.arriveTime=null,this.arriveTimeOffset=null,this.geometry=null,this.strings=null}readArriveTimeOffset(e,t){return(0,ep.pQ)(t.ETA,t.arriveTimeUTC)}readGeometry(e,t){return e_.Z.fromJSON(t.point)}};(0,n._)([(0,w.Cb)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],eC.prototype,"arriveTime",void 0),(0,n._)([(0,w.Cb)()],eC.prototype,"arriveTimeOffset",void 0),(0,n._)([(0,S.r)("arriveTimeOffset",["arriveTimeUTC","ETA"])],eC.prototype,"readArriveTimeOffset",null),(0,n._)([(0,w.Cb)({type:e_.Z})],eC.prototype,"geometry",void 0),(0,n._)([(0,S.r)("geometry",["point"])],eC.prototype,"readGeometry",null),(0,n._)([(0,w.Cb)({type:[eS]})],eC.prototype,"strings",void 0);let eM=eC=(0,n._)([(0,_.j)("esri.rest.support.DirectionsEvent")],eC);var eI=r(58144);let eT=class extends a.Z{constructor(e){super(e),this.events=null,this.strings=null}readGeometry(e,t){let r=function(e){if(null==e||""===e)return null;let t=0,r=0,i=0,o=0,n=[],s,l,a,u,p,c,y,d,f=0,h=0,m=0;if((p=e.match(/((\+|-)[^+\-|]+|\|)/g))||(p=[]),0===parseInt(p[f],32)){let e=parseInt(p[f=2],32);c=parseInt(p[++f],32),f++,1&e&&(h=p.indexOf("|")+1,y=parseInt(p[h],32),h++),2&e&&(m=p.indexOf("|",h)+1,d=parseInt(p[m],32),m++)}else c=parseInt(p[f],32),f++;for(;f<p.length&&"|"!==p[f];){s=parseInt(p[f],32)+t,f++,t=s,l=parseInt(p[f],32)+r,f++,r=l;let e=[s/c,l/c];h&&(u=parseInt(p[h],32)+i,h++,i=u,e.push(u/y)),m&&(a=parseInt(p[m],32)+o,m++,o=a,e.push(a/d)),n.push(e)}return{paths:[n],hasZ:h>0,hasM:m>0}}(t.compressedGeometry);return null!=r?eI.Z.fromJSON(r):null}};(0,n._)([(0,w.Cb)({type:[eM]})],eT.prototype,"events",void 0),(0,n._)([(0,S.r)("geometry",["compressedGeometry"])],eT.prototype,"readGeometry",null),(0,n._)([(0,w.Cb)({type:[eS]})],eT.prototype,"strings",void 0);let eL=eT=(0,n._)([(0,_.j)("esri.rest.support.DirectionsFeature")],eT);var eP=r(36502);let eN=class extends ec.Z{constructor(e){super(e),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){if(!e)return[];let r=t.summary.envelope.spatialReference??t.spatialReference,i=r&&eP.Z.fromJSON(r);return e.map(e=>{let t=eL.fromJSON(e);if(null!=t.geometry&&(t.geometry.spatialReference=i),null!=t.events)for(let e of t.events)null!=e.geometry&&(e.geometry.spatialReference=i);return t})}get mergedGeometry(){return this.features?function(e,t){if(0===e.length)return new eI.Z({spatialReference:t});let r=[];for(let t of e)for(let e of t.paths)r.push(...e);let i=[];r.forEach((e,t)=>{0!==t&&e[0]===r[t-1][0]&&e[1]===r[t-1][1]||i.push(e)});let{hasM:o,hasZ:n}=e[0];return new eI.Z({hasM:o,hasZ:n,paths:[i],spatialReference:t})}(this.features.map(({geometry:e})=>e),this.extent.spatialReference):null}get strings(){return this.features.flatMap(({strings:e})=>e).filter(ey.pC)}};(0,n._)([(0,w.Cb)({type:I.Z,json:{read:{source:"summary.envelope"}}})],eN.prototype,"extent",void 0),(0,n._)([(0,w.Cb)({nonNullable:!0})],eN.prototype,"features",void 0),(0,n._)([(0,S.r)("features")],eN.prototype,"readFeatures",null),(0,n._)([(0,w.Cb)()],eN.prototype,"geometryType",void 0),(0,n._)([(0,w.Cb)({readOnly:!0})],eN.prototype,"mergedGeometry",null),(0,n._)([(0,w.Cb)()],eN.prototype,"routeId",void 0),(0,n._)([(0,w.Cb)()],eN.prototype,"routeName",void 0),(0,n._)([(0,w.Cb)({value:null,readOnly:!0})],eN.prototype,"strings",null),(0,n._)([(0,w.Cb)({json:{read:{source:"summary.totalDriveTime"}}})],eN.prototype,"totalDriveTime",void 0),(0,n._)([(0,w.Cb)({json:{read:{source:"summary.totalLength"}}})],eN.prototype,"totalLength",void 0),(0,n._)([(0,w.Cb)({json:{read:{source:"summary.totalTime"}}})],eN.prototype,"totalTime",void 0);let eA=eN=(0,n._)([(0,_.j)("esri.rest.support.DirectionsFeatureSet")],eN),eO=class extends x.wq{constructor(e){super(e),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null,this.traversedEdges=null,this.traversedJunctions=null,this.traversedTurns=null}};(0,n._)([(0,w.Cb)({type:ec.Z,json:{write:!0}})],eO.prototype,"directionLines",void 0),(0,n._)([(0,w.Cb)({type:ec.Z,json:{write:!0}})],eO.prototype,"directionPoints",void 0),(0,n._)([(0,w.Cb)({type:eA,json:{write:!0}})],eO.prototype,"directions",void 0),(0,n._)([(0,w.Cb)({type:a.Z,json:{write:!0}})],eO.prototype,"route",void 0),(0,n._)([(0,w.Cb)({type:String,json:{write:!0}})],eO.prototype,"routeName",void 0),(0,n._)([(0,w.Cb)({type:[a.Z],json:{write:!0}})],eO.prototype,"stops",void 0),(0,n._)([(0,w.Cb)({type:ec.Z,json:{write:!0}})],eO.prototype,"traversedEdges",void 0),(0,n._)([(0,w.Cb)({type:ec.Z,json:{write:!0}})],eO.prototype,"traversedJunctions",void 0),(0,n._)([(0,w.Cb)({type:ec.Z,json:{write:!0}})],eO.prototype,"traversedTurns",void 0);let eZ=eO=(0,n._)([(0,_.j)("esri.rest.support.RouteResult")],eO);function eR(e){return e?ec.Z.fromJSON(e).features.filter(ey.pC):[]}let eB=class extends x.wq{constructor(e){super(e),this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,t){return eR(t.barriers)}readPolylineBarriers(e){return eR(e)}readPolygonBarriers(e){return eR(e)}};(0,n._)([(0,w.Cb)({type:[ev]})],eB.prototype,"messages",void 0),(0,n._)([(0,w.Cb)({type:[a.Z]})],eB.prototype,"pointBarriers",void 0),(0,n._)([(0,S.r)("pointBarriers",["barriers"])],eB.prototype,"readPointBarriers",null),(0,n._)([(0,w.Cb)({type:[a.Z]})],eB.prototype,"polylineBarriers",void 0),(0,n._)([(0,S.r)("polylineBarriers")],eB.prototype,"readPolylineBarriers",null),(0,n._)([(0,w.Cb)({type:[a.Z]})],eB.prototype,"polygonBarriers",void 0),(0,n._)([(0,S.r)("polygonBarriers")],eB.prototype,"readPolygonBarriers",null),(0,n._)([(0,w.Cb)({type:[eZ]})],eB.prototype,"routeResults",void 0);let ex=eB=(0,n._)([(0,_.j)("esri.rest.support.RouteSolveResult")],eB);function ek(e){return e instanceof ec.Z}async function eF(e,t,r){let i=[],o=[],n={},s={},l=(0,W.en)(e),{path:a}=l;ek(t.stops)&&eo(t.stops.features,o,"stops.features",n),ek(t.pointBarriers)&&eo(t.pointBarriers.features,o,"pointBarriers.features",n),ek(t.polylineBarriers)&&eo(t.polylineBarriers.features,o,"polylineBarriers.features",n),ek(t.polygonBarriers)&&eo(t.polygonBarriers.features,o,"polygonBarriers.features",n);let u=await (0,eu.aX)(o);for(let e in n){let t=n[e];i.push(e),s[e]=u.slice(t[0],t[1])}if(function(e,t){for(let r=0;r<t.length;r++){let i=e[t[r]];if(i&&i.length){for(let e of i)if(null!=e&&e.hasZ)return!0}}return!1}(s,i)){let e=null;try{e=await en(a,t.apiKey,r)}catch{}e&&!e.hasZ&&function(e,t){for(let r=0;r<t.length;r++){let i=e[t[r]];if(i&&i.length)for(let e of i)e.z=void 0}ei().warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}(s,i)}for(let e in s)s[e].forEach((r,i)=>{(0,ea.U2)(t,e)[i].geometry=r});let p={...r,query:{...l.query,...(0,ep.Yc)(t),f:"json"}},c=a.endsWith("/solve")?a:`${a}/solve`,{data:y}=await (0,V.Z)(c,p);return function(e){let{barriers:t,directionLines:r,directionPoints:i,directions:o,messages:n,polygonBarriers:s,polylineBarriers:l,routes:a,stops:u,traversedEdges:p,traversedJunctions:c,traversedTurns:y}=e,d=e=>{let t=h.find(t=>t.routeName===e);if(null!=t)return t;let r={routeId:h.length+1,routeName:e};return h.push(r),r},f=e=>{let t=h.find(t=>t.routeId===e);if(null!=t)return t;let r={routeId:e,routeName:null};return h.push(r),r},h=[];a?.features.forEach((e,t)=>{e.geometry.spatialReference=a.spatialReference??void 0;let r=e.attributes.Name;h.push({routeId:t+1,routeName:r,route:e})}),o?.forEach(e=>{let{routeName:t}=e;d(t).directions=e});let m=u?.features.every(e=>null==e.attributes.RouteName)&&h.length>0?h[0].routeName:null;return u?.features.forEach(e=>{e.geometry&&(e.geometry.spatialReference??=u.spatialReference??void 0);let t=d(m??e.attributes.RouteName);t.stops??=[],t.stops.push(e)}),r?.features.forEach(e=>{let t=f(e.attributes.RouteID),{geometryType:i,spatialReference:o}=r;t.directionLines??={features:[],geometryType:i,spatialReference:o},t.directionLines.features.push(e)}),i?.features.forEach(e=>{let t=f(e.attributes.RouteID),{geometryType:r,spatialReference:o}=i;t.directionPoints??={features:[],geometryType:r,spatialReference:o},t.directionPoints.features.push(e)}),p?.features.forEach(e=>{let t=f(e.attributes.RouteID),{geometryType:r,spatialReference:i}=p;t.traversedEdges??={features:[],geometryType:r,spatialReference:i},t.traversedEdges.features.push(e)}),c?.features.forEach(e=>{let t=f(e.attributes.RouteID),{geometryType:r,spatialReference:i}=c;t.traversedJunctions??={features:[],geometryType:r,spatialReference:i},t.traversedJunctions.features.push(e)}),y?.features.forEach(e=>{let t=f(e.attributes.RouteID);t.traversedTurns??={features:[]},t.traversedTurns.features.push(e)}),ex.fromJSON({routeResults:h,barriers:t,polygonBarriers:s,polylineBarriers:l,messages:n})}(y)}var ej=r(22476),eE=r(47865),ez=r(7005),eG=r(63945),eD=r(29541),eJ=r(8371),eU=r(23427),eq=r(61733),eV=r(5005);let eW=class extends(0,eU.J)(x.wq){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.geometry=null,this.geometryType=null,this.name=null,this.spatialRelationship=null,this.type="layer",this.where=null}};(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eW.prototype,"doNotLocateOnRestrictedElements",void 0),(0,n._)([(0,w.Cb)({types:l.qM,json:{read:eV.im,write:!0}})],eW.prototype,"geometry",void 0),(0,n._)([(0,H.J)($.KA)],eW.prototype,"geometryType",void 0),(0,n._)([(0,w.Cb)({type:String,json:{name:"layerName",write:!0}})],eW.prototype,"name",void 0),(0,n._)([(0,H.J)($.S7,{name:"spatialRel"})],eW.prototype,"spatialRelationship",void 0),(0,n._)([(0,w.Cb)({type:String,json:{write:!0}})],eW.prototype,"type",void 0),(0,n._)([(0,w.Cb)({type:String,json:{write:!0}})],eW.prototype,"where",void 0);let eH=eW=(0,n._)([(0,_.j)("esri.rest.support.DataLayer")],eW),e$=i=class extends ec.Z{constructor(e){super(e),this.doNotLocateOnRestrictedElements=null}clone(){return new i({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements,...this.cloneProperties()})}};(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],e$.prototype,"doNotLocateOnRestrictedElements",void 0);let eY=e$=i=(0,n._)([(0,_.j)("esri.rest.support.NetworkFeatureSet")],e$),eK=class extends(0,eU.J)(x.wq){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.url=null}};(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eK.prototype,"doNotLocateOnRestrictedElements",void 0),(0,n._)([(0,w.Cb)({type:String,json:{write:!0}})],eK.prototype,"url",void 0);let eX=eK=(0,n._)([(0,_.j)("esri.rest.support.NetworkUrl")],eK),eQ=o=class extends(0,eU.J)(x.wq){constructor(e){super(e),this.accumulateAttributes=null,this.apiKey=null,this.attributeParameterValues=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsOutputType=null,this.directionsStyleName=null,this.directionsTimeAttribute=null,this.findBestSequence=null,this.geometryPrecision=null,this.geometryPrecisionM=null,this.geometryPrecisionZ=null,this.ignoreInvalidLocations=null,this.impedanceAttribute=null,this.outputGeometryPrecision=null,this.outputGeometryPrecisionUnits=null,this.outputLines="true-shape",this.outSpatialReference=null,this.overrides=null,this.pointBarriers=null,this.polygonBarriers=null,this.polylineBarriers=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.preserveObjectID=null,this.restrictionAttributes=null,this.restrictUTurns=null,this.returnBarriers=!1,this.returnDirections=!1,this.returnPolygonBarriers=!1,this.returnPolylineBarriers=!1,this.returnRoutes=!0,this.returnStops=!1,this.returnTraversedEdges=null,this.returnTraversedJunctions=null,this.returnTraversedTurns=null,this.returnZ=!0,this.startTime=null,this.startTimeIsUTC=!0,this.stops=null,this.timeWindowsAreUTC=null,this.travelMode=null,this.useHierarchy=null,this.useTimeWindows=null}static from(e){return(0,eq.TJ)(o,e)}readAccumulateAttributes(e){return null==e?null:e.map(e=>$.Ul.fromJSON(e))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map(e=>$.Ul.toJSON(e)))}writePointBarriers(e,t,r){e1(e,t,r)}writePolygonBarrier(e,t,r){e1(e,t,r)}writePolylineBarrier(e,t,r){e1(e,t,r)}readRestrictionAttributes(e){return null==e?null:e.map(e=>$.kL.fromJSON(e))}writeRestrictionAttributes(e,t,r){e?.length&&(t[r]=e.map(e=>$.kL.toJSON(e)))}readStartTime(e,t){let{startTime:r}=t;return null==r?null:"now"===r?"now":new Date(r)}writeStartTime(e,t){null!=e&&(t.startTime="now"===e?"now":e.getTime())}readStops(e,t){var r;return(r=t.stops)&&"type"in r?eH.fromJSON(r):r&&"url"in r?eX.fromJSON(r):r&&"features"in r&&"doNotLocateOnRestrictedElements"in r?eY.fromJSON(r):r&&"features"in r?ec.Z.fromJSON(r):null}writeStops(e,t,r){e1(e,t,r)}};(0,n._)([(0,w.Cb)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],eQ.prototype,"accumulateAttributes",void 0),(0,n._)([(0,S.r)("accumulateAttributes")],eQ.prototype,"readAccumulateAttributes",null),(0,n._)([(0,C.c)("accumulateAttributes")],eQ.prototype,"writeAccumulateAttributes",null),(0,n._)([(0,w.Cb)({type:String,json:{read:{source:"token"},write:{target:"token"}}})],eQ.prototype,"apiKey",void 0),(0,n._)([(0,w.Cb)({json:{write:!0}})],eQ.prototype,"attributeParameterValues",void 0),(0,n._)([(0,w.Cb)({type:String,json:{write:!0}})],eQ.prototype,"directionsLanguage",void 0),(0,n._)([(0,H.J)($.GX)],eQ.prototype,"directionsLengthUnits",void 0),(0,n._)([(0,H.J)($.$7)],eQ.prototype,"directionsOutputType",void 0),(0,n._)([(0,H.J)($.WP)],eQ.prototype,"directionsStyleName",void 0),(0,n._)([(0,H.J)($.ZI,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],eQ.prototype,"directionsTimeAttribute",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"findBestSequence",void 0),(0,n._)([(0,w.Cb)({type:Number,json:{write:!0}})],eQ.prototype,"geometryPrecision",void 0),(0,n._)([(0,w.Cb)({type:Number,json:{write:!0}})],eQ.prototype,"geometryPrecisionM",void 0),(0,n._)([(0,w.Cb)({type:Number,json:{write:!0}})],eQ.prototype,"geometryPrecisionZ",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"ignoreInvalidLocations",void 0),(0,n._)([(0,H.J)($.Ul,{name:"impedanceAttributeName",ignoreUnknown:!1})],eQ.prototype,"impedanceAttribute",void 0),(0,n._)([(0,w.Cb)({type:Number,json:{write:!0}})],eQ.prototype,"outputGeometryPrecision",void 0),(0,n._)([(0,H.J)($.q$)],eQ.prototype,"outputGeometryPrecisionUnits",void 0),(0,n._)([(0,H.J)($.no)],eQ.prototype,"outputLines",void 0),(0,n._)([(0,w.Cb)({type:eP.Z,json:{name:"outSR",write:!0}})],eQ.prototype,"outSpatialReference",void 0),(0,n._)([(0,w.Cb)({json:{write:!0}})],eQ.prototype,"overrides",void 0),(0,n._)([(0,w.Cb)({json:{name:"barriers",write:!0}})],eQ.prototype,"pointBarriers",void 0),(0,n._)([(0,C.c)("pointBarriers")],eQ.prototype,"writePointBarriers",null),(0,n._)([(0,w.Cb)({json:{write:!0}})],eQ.prototype,"polygonBarriers",void 0),(0,n._)([(0,C.c)("polygonBarriers")],eQ.prototype,"writePolygonBarrier",null),(0,n._)([(0,w.Cb)({json:{write:!0}})],eQ.prototype,"polylineBarriers",void 0),(0,n._)([(0,C.c)("polylineBarriers")],eQ.prototype,"writePolylineBarrier",null),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"preserveFirstStop",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"preserveLastStop",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"preserveObjectID",void 0),(0,n._)([(0,w.Cb)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],eQ.prototype,"restrictionAttributes",void 0),(0,n._)([(0,S.r)("restrictionAttributes")],eQ.prototype,"readRestrictionAttributes",null),(0,n._)([(0,C.c)("restrictionAttributes")],eQ.prototype,"writeRestrictionAttributes",null),(0,n._)([(0,H.J)($.ip)],eQ.prototype,"restrictUTurns",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnBarriers",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnDirections",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnPolygonBarriers",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnPolylineBarriers",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnRoutes",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnStops",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnTraversedEdges",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnTraversedJunctions",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnTraversedTurns",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"returnZ",void 0),(0,n._)([(0,w.Cb)({json:{write:!0}})],eQ.prototype,"startTime",void 0),(0,n._)([(0,S.r)("startTime")],eQ.prototype,"readStartTime",null),(0,n._)([(0,C.c)("startTime")],eQ.prototype,"writeStartTime",null),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"startTimeIsUTC",void 0),(0,n._)([(0,w.Cb)({json:{write:!0}})],eQ.prototype,"stops",void 0),(0,n._)([(0,S.r)("stops")],eQ.prototype,"readStops",null),(0,n._)([(0,C.c)("stops")],eQ.prototype,"writeStops",null),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"timeWindowsAreUTC",void 0),(0,n._)([(0,w.Cb)({type:ee.Z,json:{write:!0}})],eQ.prototype,"travelMode",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"useHierarchy",void 0),(0,n._)([(0,w.Cb)({type:Boolean,json:{write:!0}})],eQ.prototype,"useTimeWindows",void 0);let e0=eQ=o=(0,n._)([(0,_.j)("esri.rest.support.RouteParameters")],eQ);function e1(e,t,r){null!=e&&(t[r]=y.Z.isCollection(e)?{features:e.toArray().map(e=>e.toJSON())}:e.toJSON())}var e2=r(87036),e5=r(48773),e3=r(18736);function e4(e){return e.length?e:null}function e6(e){return"layers"in e}async function e8(e){let t=eP.Z.WGS84;return await (0,T.initializeProjection)(e.spatialReference,t),(0,T.project)(e,t)}function e9(e,t){switch(t){case"seconds":return e/60;case"hours":return 60*e;case"days":return 60*e*24;default:return e}}function e7(e,t){return"decimal-degrees"===t||"points"===t||"unknown"===t?e:(0,b.En)(e,t,"meters")}let te=y.Z.ofType(ej.Z),tt=y.Z.ofType(eE.Z),tr=y.Z.ofType(ez.Z),ti=y.Z.ofType(eG.Z),to=y.Z.ofType(eD.Z),tn=y.Z.ofType(e5.Z),ts="esri.layers.RouteLayer",tl=()=>c.Z.getLogger(ts),ta=class extends(0,N.h7)((0,Z.M)((0,A.q)((0,O.I)((0,f.R)(P.Z))))){constructor(e){super(e),this._cachedServiceDescription=null,this._featureCollection=null,this._type="Feature Collection",this.defaultSymbols=new D,this.directionLines=null,this.directionPoints=null,this.featureCollectionType="route",this.legendEnabled=!1,this.maxScale=0,this.minScale=0,this.pointBarriers=new tr,this.polygonBarriers=new ti,this.polylineBarriers=new to,this.routeInfo=null,this.spatialReference=eP.Z.WGS84,this.stops=new tn,this.type="route";let t=()=>{this._setStopSymbol(this.stops)};this.addHandles((0,g.on)(()=>this.stops,"change",t,{sync:!0,onListenerAdd:t}))}writeFeatureCollectionWebmap(e,t,r,i){let o=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter(e=>!!e),n=o.map((e,t)=>t),s="web-map"===i.origin?"featureCollection.layers":"layers";(0,h.RB)(s,o,t),t.opacity=this.opacity,t.visibility=this.visible,t.visibleLayers=n}readDirectionLines(e,t){return this._getNetworkFeatures(t,"DirectionLines",e=>ej.Z.fromGraphic(e))}readDirectionPoints(e,t){return this._getNetworkFeatures(t,"DirectionPoints",e=>eE.Z.fromGraphic(e))}get fullExtent(){let e=new I.Z({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:eP.Z.WGS84});if(null!=this.routeInfo?.geometry)return this.routeInfo.geometry.extent??e;if(null==this.stops)return e;let t=this.stops.filter(e=>null!=e.geometry);if(t.length<2)return e;let{spatialReference:r}=t.at(0).geometry;if(null==r)return e;let i=t.toArray().map(e=>{let t=e.geometry;return[t.x,t.y]});return new e3.Z({points:i,spatialReference:r}).extent}readMaxScale(e,t){let r=e6(t)?t.layers:t.featureCollection?.layers,i=r?.find(e=>null!=e.layerDefinition.maxScale);return i?.layerDefinition.maxScale??0}readMinScale(e,t){let r=e6(t)?t.layers:t.featureCollection?.layers,i=r?.find(e=>null!=e.layerDefinition.minScale);return i?.layerDefinition.minScale??0}readPointBarriers(e,t){return this._getNetworkFeatures(t,"Barriers",e=>ez.Z.fromGraphic(e))}readPolygonBarriers(e,t){return this._getNetworkFeatures(t,"PolygonBarriers",e=>eG.Z.fromGraphic(e))}readPolylineBarriers(e,t){return this._getNetworkFeatures(t,"PolylineBarriers",e=>eD.Z.fromGraphic(e))}readRouteInfo(e,t){return this._getNetworkFeatures(t,"RouteInfo",e=>eJ.Z.fromGraphic(e)).at(0)??null}readSpatialReference(e,t){let r=e6(t)?t.layers:t.featureCollection?.layers;if(!r?.length)return eP.Z.WGS84;let{layerDefinition:i,featureSet:o}=r[0],n=o.features[0],s=n?.geometry?.spatialReference??o.spatialReference??i.spatialReference??i.extent.spatialReference??L.YU;return eP.Z.fromJSON(s)}readStops(e,t){return this._getNetworkFeatures(t,"Stops",e=>e5.Z.fromGraphic(e),e=>this._setStopSymbol(e))}get title(){return this.routeInfo?.name??"Route"}set title(e){this._overrideIfSome("title",e)}get url(){return s.default.routeServiceUrl}set url(e){null!=e?this._set("url",(0,R.Nm)(e,tl())):this._set("url",s.default.routeServiceUrl)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}removeAll(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}removeResult(){null!=this.directionLines&&(this.directionLines.removeAll(),this._set("directionLines",null)),null!=this.directionPoints&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),null!=this.routeInfo&&this._set("routeInfo",null)}async save(){await this.load();let{fullExtent:e,portalItem:t}=this;if(!t)throw new d.Z("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");if(!t.id)throw new d.Z("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");if("Feature Collection"!==t.type)throw new d.Z("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');if(null==this.routeInfo)throw new d.Z("routelayer:route-unsolved","save() requires a solved route");let{portal:r}=t;await r.signIn(),r.user||await t.reload();let{itemUrl:i,itemControl:o}=t;if("admin"!==o&&"update"!==o)throw new d.Z("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");let n={messages:[],origin:"portal-item",portal:r,url:i?(0,v.mN)(i):void 0,writtenProperties:[]},s=this.write(void 0,n);return t.extent=await e8(e),t.title=this.title,await t.update({data:s}),t}async saveAs(e,t={}){if(await this.load(),null==this.routeInfo)throw new d.Z("routelayer:route-unsolved","saveAs() requires a solved route");let r=U.default.from(e).clone();r.extent??=await e8(this.fullExtent),r.id=null,r.portal??=J.Z.getDefault(),r.title??=this.title,r.type="Feature Collection",r.typeKeywords=["Data","Feature Collection",q.hz.MULTI_LAYER,"Route Layer"];let{portal:i}=r,o={messages:[],origin:"portal-item",portal:i,url:null,writtenProperties:[]};await i.signIn();let n=t?.folder,s=this.write(void 0,o);return await i.user?.addItem({item:r,folder:n,data:s}),this.portalItem=r,(0,M.D)(o),o.portalItem=r,r}async solve(e,t){let r;let i=e?.stops??this.stops,o=e?.pointBarriers??e4(this.pointBarriers),n=e?.polylineBarriers??e4(this.polylineBarriers),s=e?.polygonBarriers??e4(this.polygonBarriers);if(null==i)throw new d.Z("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");if(("esri.rest.support.FeatureSet"===i.declaredClass||"esri.rest.support.NetworkFeatureSet"===i.declaredClass)&&i.features.length<2||y.Z.isCollection(i)&&i.length<2)throw new d.Z("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");if(y.Z.isCollection(i))for(let e of i)e.routeName=null;let l=e?.apiKey,a=this.url,u=await this._getServiceDescription(a,l,t),p=e?.travelMode??u.defaultTravelMode,c=e?.accumulateAttributes??[];null!=p&&(c.push(p.distanceAttributeName),p.timeAttributeName&&c.push(p.timeAttributeName));let f=e0.from(e??{});f.set({accumulateAttributes:c,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:o,polylineBarriers:n,polygonBarriers:s,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!o,returnDirections:!0,returnPolygonBarriers:!!s,returnPolylineBarriers:!!n,returnRoutes:!0,returnStops:!0,stops:i});try{r=await eF(a,f,t)}catch(e){throw(0,m.D_)(e)?e:new d.Z("routelayer:failed-route-request","the routing request failed",{error:e})}let h=this._toRouteLayerSolution(r);return this._isOverridden("title")||(this.title=h.routeInfo.name??"Route"),function(e,t,r){let i=t.networkDataset?.networkAttributes,o=i?.filter(({usageType:e})=>"cost"===e)??[],n=r.travelMode??t.defaultTravelMode;if(null==n)return void tl().warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.");let{timeAttributeName:s,distanceAttributeName:l}=n,a=o.find(({name:e})=>e===s),u=o.find(({name:e})=>e===l),p=r.travelMode?.impedanceAttributeName??r.impedanceAttribute??t.impedance,c=a?.units,y=u?.units;if(!c||!y)throw new d.Z("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");let f=r.directionsLanguage??t.directionsLanguage,h=r.accumulateAttributes??t.accumulateAttributeNames??[],m=new Set(o.filter(({name:e})=>e===s||e===l||e===p||null!=e&&h.includes(e)).map(({name:e})=>e)),g=e=>{for(let t in e)m.has(t)||delete e[t]};for(let t of e.pointBarriers)null!=t.costs&&(t.addedCost=t.costs[p]??0,g(t.costs));for(let t of e.polygonBarriers)null!=t.costs&&(t.scaleFactor=t.costs[p]??1,g(t.costs));for(let t of e.polylineBarriers)null!=t.costs&&(t.scaleFactor=t.costs[p]??1,g(t.costs));let{routeInfo:b}=e,{findBestSequence:v,preserveFirstStop:w,preserveLastStop:S,startTimeIsUTC:_,timeWindowsAreUTC:C}=r;for(let t of(b.analysisSettings=new e2.Z({accumulateAttributes:h,directionsLanguage:f,findBestSequence:v,preserveFirstStop:w,preserveLastStop:S,startTimeIsUTC:_,timeWindowsAreUTC:C,travelMode:n}),b.totalDuration=e9(b.totalCosts?.[s]??0,c),b.totalDistance=e7(b.totalCosts?.[l]??0,y),b.totalLateDuration=e9(b.totalViolations?.[s]??0,c),b.totalWaitDuration=e9(b.totalWait?.[s]??0,c),null!=b.totalCosts&&g(b.totalCosts),null!=b.totalViolations&&g(b.totalViolations),null!=b.totalWait&&g(b.totalWait),e.stops))null!=t.serviceCosts&&(t.serviceDuration=e9(t.serviceCosts[s]??0,c),t.serviceDistance=e7(t.serviceCosts[l]??0,y),g(t.serviceCosts)),null!=t.cumulativeCosts&&(t.cumulativeDuration=e9(t.cumulativeCosts[s]??0,c),t.cumulativeDistance=e7(t.cumulativeCosts[l]??0,y),g(t.cumulativeCosts)),null!=t.violations&&(t.lateDuration=e9(t.violations[s]??0,c),g(t.violations)),null!=t.wait&&(t.waitDuration=e9(t.wait[s]??0,c),g(t.wait))}(h,u,f),h}update(e){let{stops:t,directionLines:r,directionPoints:i,pointBarriers:o,polylineBarriers:n,polygonBarriers:s,routeInfo:l}=e;this.set({stops:t,pointBarriers:o,polylineBarriers:n,polygonBarriers:s}),this._set("directionLines",r),this._set("directionPoints",i),this._set("routeInfo",l),null!=l.geometry&&(this.spatialReference=l.geometry.spatialReference)}_getNetworkFeatures(e,t,r,i){let o=e6(e)?e.layers:e.featureCollection?.layers,n=o?.find(e=>e.layerDefinition.name===t);if(null==n)return new y.Z;let{layerDefinition:s,popupInfo:l,featureSet:c}=n,d=s.drawingInfo.renderer,{features:f}=c,h=c.spatialReference??s.spatialReference??s.extent.spatialReference??L.YU,m=d&&(0,p.a)(d),g=eP.Z.fromJSON(h),b=f.map(e=>{let i=a.Z.fromJSON(e);null!=i.geometry&&null!=e.geometry&&null==e.geometry.spatialReference&&(i.geometry.spatialReference=g);let o=r(i);return o.symbol??=m?.getSymbol(i)??this._getNetworkSymbol(t),o.popupTemplate??=l&&u.Z.fromJSON(l),o});return i&&b.some(({symbol:e})=>!e)&&i(b),new y.Z(b)}_getNetworkSymbol(e){switch(e){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}async _getServiceDescription(e,t,r){if(null!=this._cachedServiceDescription&&this._cachedServiceDescription.url===e)return this._cachedServiceDescription.serviceDescription;let i=await en(e,t,r);return this._cachedServiceDescription={serviceDescription:i,url:e},i}_setStopSymbol(e){if(!e||0===e.length||null==this.defaultSymbols.stops||e.every(({symbol:e})=>null!=e))return;let{first:t,last:r,middle:i,unlocated:o,waypoint:n,break:s}=this.defaultSymbols.stops;if(null==this.routeInfo||1===e.length)return void e.forEach((o,n)=>{switch(n){case 0:o.symbol=t;break;case e.length-1:o.symbol=r;break;default:o.symbol=i}});let l=e.map(({sequence:e})=>e).filter(e=>null!=e),a=Math.min(...l),u=Math.max(...l);for(let l of e)l.sequence!==a?l.sequence!==u?"ok"===l.status||"not-located-on-closest"===l.status?"waypoint"!==l.locationType?"break"!==l.locationType?l.symbol=i:l.symbol=s:l.symbol=n:l.symbol=o:l.symbol=r:l.symbol=t}_toRouteLayerSolution(e){let t=e.routeResults[0].stops?.map(e=>e5.Z.fromJSON(e.toJSON()));this._setStopSymbol(t);let r=new tn(t),i=new ti(e.polygonBarriers?.map(e=>{let t=eG.Z.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polygonBarriers,t})),o=new to(e.polylineBarriers?.map(e=>{let t=eD.Z.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polylineBarriers,t})),n=new tr(e.pointBarriers?.map(e=>{let t=ez.Z.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.pointBarriers,t})),s=e.routeResults[0].route?.toJSON(),l=eJ.Z.fromJSON(s);l.symbol=this.defaultSymbols.routeInfo;let a=new tt(e.routeResults[0].directionPoints?.features.map(e=>{let t=eE.Z.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionPoints,t}));return{directionLines:new te(e.routeResults[0].directionLines?.features.map(e=>{let t=ej.Z.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionLines,t})),directionPoints:a,pointBarriers:n,polygonBarriers:i,polylineBarriers:o,routeInfo:l,stops:r}}_writeDirectionLines(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",ej.Z.fields,"DirectionLines","Direction Lines")}_writeDirectionPoints(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",eE.Z.fields,"DirectionPoints","Direction Points")}_writeNetworkFeatures(e,t,r,i,o,n){if(!e?.length)return null;let s=this.spatialReference.toJSON(),{fullExtent:l,maxScale:a,minScale:u}=this;return{featureSet:{features:e.toArray().map(e=>(function(e){let{attributes:t,geometry:r,popupTemplate:i,symbol:o}=e.toGraphic().toJSON();return{attributes:t,geometry:r,popupInfo:i,symbol:o}})(e)),geometryType:r,spatialReference:s},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:null!=t?t.toJSON():function e(t){switch(t){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:e("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:e("esriGeometryPolyline")}}}(r)}},extent:l.toJSON(),fields:i,geometryType:r,hasM:!1,hasZ:!1,maxScale:a,minScale:u,name:o,objectIdField:"ObjectID",spatialReference:s,title:n,type:"Feature Layer",typeIdField:""}}}_writePointBarriers(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",ez.Z.fields,"Barriers","Point Barriers")}_writePolygonBarriers(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",eG.Z.fields,"PolygonBarriers","Polygon Barriers")}_writePolylineBarriers(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",eD.Z.fields,"PolylineBarriers","Line Barriers")}_writeRouteInfo(){return this._writeNetworkFeatures(null!=this.routeInfo?new y.Z([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",eJ.Z.fields,"RouteInfo","Route Details")}_writeStops(){let e=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",e5.Z.fields,"Stops","Stops");if(null==e)return null;let{stops:t}=this.defaultSymbols,r=t?.first?.toJSON(),i=t?.middle?.toJSON(),o=t?.last?.toJSON();return e.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:i,uniqueValueInfos:[{value:"1",symbol:r,label:"First Stop"},{value:`${this.stops.length}`,symbol:o,label:"Last Stop"}]},e}};(0,n._)([(0,w.Cb)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],ta.prototype,"_featureCollection",void 0),(0,n._)([(0,C.c)(["web-map","portal-item"],"_featureCollection")],ta.prototype,"writeFeatureCollectionWebmap",null),(0,n._)([(0,w.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],ta.prototype,"_type",void 0),(0,n._)([(0,w.Cb)({nonNullable:!0,type:D})],ta.prototype,"defaultSymbols",void 0),(0,n._)([(0,w.Cb)({readOnly:!0})],ta.prototype,"directionLines",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],ta.prototype,"readDirectionLines",null),(0,n._)([(0,w.Cb)({readOnly:!0})],ta.prototype,"directionPoints",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],ta.prototype,"readDirectionPoints",null),(0,n._)([(0,w.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],ta.prototype,"featureCollectionType",void 0),(0,n._)([(0,w.Cb)({readOnly:!0})],ta.prototype,"fullExtent",null),(0,n._)([(0,w.Cb)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],ta.prototype,"legendEnabled",void 0),(0,n._)([(0,w.Cb)({type:["show","hide"]})],ta.prototype,"listMode",void 0),(0,n._)([(0,w.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],ta.prototype,"maxScale",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],ta.prototype,"readMaxScale",null),(0,n._)([(0,w.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],ta.prototype,"minScale",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],ta.prototype,"readMinScale",null),(0,n._)([(0,w.Cb)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],ta.prototype,"operationalLayerType",void 0),(0,n._)([(0,w.Cb)({nonNullable:!0,type:y.Z.ofType(ez.Z)})],ta.prototype,"pointBarriers",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],ta.prototype,"readPointBarriers",null),(0,n._)([(0,w.Cb)({nonNullable:!0,type:y.Z.ofType(eG.Z)})],ta.prototype,"polygonBarriers",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],ta.prototype,"readPolygonBarriers",null),(0,n._)([(0,w.Cb)({nonNullable:!0,type:y.Z.ofType(eD.Z)})],ta.prototype,"polylineBarriers",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],ta.prototype,"readPolylineBarriers",null),(0,n._)([(0,w.Cb)({readOnly:!0})],ta.prototype,"routeInfo",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],ta.prototype,"readRouteInfo",null),(0,n._)([(0,w.Cb)({type:eP.Z})],ta.prototype,"spatialReference",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],ta.prototype,"readSpatialReference",null),(0,n._)([(0,w.Cb)({nonNullable:!0,type:y.Z.ofType(e5.Z)})],ta.prototype,"stops",void 0),(0,n._)([(0,S.r)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],ta.prototype,"readStops",null),(0,n._)([(0,w.Cb)()],ta.prototype,"title",null),(0,n._)([(0,w.Cb)({readOnly:!0,json:{read:!1}})],ta.prototype,"type",void 0),(0,n._)([(0,w.Cb)()],ta.prototype,"url",null);let tu=ta=(0,n._)([(0,_.j)(ts)],ta)},59727:function(e,t,r){r.d(t,{q:function(){return w}});var i=r(86641),o=r(14627),n=r(94605),s=r(72659),l=r(89312),a=r(61733);r(3457),r(37180);var u=r(37647),p=r(64186),c=r(50713),y=r(57111),d=r(22819),f=r(72491);let h={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},m={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},g={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},b={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":h,"web-map/basemap":m,"web-map/tables":g,"link-chart/operational-layers":{...h,LinkChartLayer:!0},"link-chart/basemap":m,"link-chart/tables":g,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};var v=r(78298);let w=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,r){return"Group Layer"===r?.portalItem?.type?void 0:e}writeListMode(e,t,r,i){(i&&"ground"===i.layerContainerType||e&&(0,f.d)(this,r,{},i))&&(t[r]=e)}writeOperationalLayerType(e,t,r,i){e&&"tables"!==i?.layerContainerType&&(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}readTimeExtent(e){return e?o.Z.fromArray(e):null}writeTimeExtent(e,t,r,i){e&&"tables"!==i.layerContainerType&&(e.isEmpty?i?.messages&&i.messages.push(new n.Z("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[r]=e.toArray())}read(e,t){t&&(t.layer=this),(0,d.$)(this,e,t=>super.read(e,t),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){let e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=b[e],i=!!r?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(i=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(i=!1),!i)return t.messages?.push(new n.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}let r=super.write(e,{...t,layer:this}),i=!!t&&!!t.messages&&!!t.messages.filter(e=>e instanceof n.Z&&"web-document-write:property-required"===e.name).length;return(0,s.jc)(r?.url)?(t?.messages?.push(new n.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&i?null:r}beforeSave(){}};return(0,i._)([(0,l.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,i._)([(0,u.r)("id",["id"])],t.prototype,"readId",null),(0,i._)([(0,l.Cb)(v.rT)],t.prototype,"listMode",void 0),(0,i._)([(0,c.c)("listMode")],t.prototype,"writeListMode",null),(0,i._)([(0,l.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:y.C}}}}})],t.prototype,"operationalLayerType",void 0),(0,i._)([(0,c.c)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,i._)([(0,l.Cb)(v.Oh)],t.prototype,"opacity",void 0),(0,i._)([(0,l.Cb)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,i._)([(0,c.c)("title"),(0,c.c)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,i._)([(0,l.Cb)({type:o.Z,json:{origins:{"web-scene":{write:{layerContainerTypes:y.C}}}}})],t.prototype,"visibilityTimeExtent",void 0),(0,i._)([(0,u.r)("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),(0,i._)([(0,c.c)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[a.z8,a.p2]]}})],t.prototype,"writeTimeExtent",null),(0,i._)([(0,l.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:y.C}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=(0,i._)([(0,p.j)("esri.layers.mixins.OperationalLayer")],t)}},15346:function(e,t,r){r.d(t,{I:function(){return _}});var i=r(86641),o=r(39301),n=r(94596),s=r(54748),l=r(27817),a=r(94605),u=r(65223),p=r(36152),c=r(31124),y=r(72659),d=r(89312);r(37180),r(3457);var f=r(37647),h=r(64186),m=r(50713),g=r(24243),b=r(81449),v=r(20550),w=r(86541),S=r(63332);let _=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,p.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new v.default({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{let{load:i}=await Promise.all([r.e(22065),r.e(86487)]).then(r.bind(r,86487));return(0,c.k_)(t),await i({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(e){throw(0,c.D_)(e)||u.Z.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch(e=>((0,c.r9)(e),!0)))}async setUserPrivileges(e,t){if(!o.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{let{features:{edit:r,fullEdit:i},content:{updateItem:o}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",i),this._set("userHasUpdateItemPrivileges",o)}catch(e){(0,c.r9)(e)}}async _fetchUserPrivileges(e,t){let r,i,o=this.portalItem;if(!e||!o||!o.loaded||o.sourceUrl)return this._fetchFallbackUserPrivileges(t);let s=e===o.id;if(s&&o.portal.user)return(0,S.Ss)(o);if(s)r=o.portal.url;else try{r=await (0,g.oP)(this.url,t)}catch(e){(0,c.r9)(e)}if(!r||!(0,y.Zo)(r,o.portal.url))return this._fetchFallbackUserPrivileges(t);try{let e=null!=t?t.signal:null;i=await n.id?.getCredential(`${r}/sharing`,{prompt:!1,signal:e})}catch(e){(0,c.r9)(e)}if(!i)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(s?await o.reload():(o=new v.default({id:e,portal:{url:r}}),await o.load(t)),o.portal.user)return(0,S.Ss)(o)}catch(e){(0,c.r9)(e)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,c.r9)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){let t=this.url?n.id?.findCredential(this.url):null;if(!t)return!0;let r=C.credential===t?C.user:await this._fetchEditingUser(e);return C.credential=t,C.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){let t=this.portalItem?.portal?.user;if(t)return t;let r=n.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;let i=`${r.owningSystemUrl}/sharing/rest`,o=b.Z.getDefault();if(o&&o.loaded&&(0,y.Fv)(o.restUrl)===(0,y.Fv)(i))return o.user;let a=`${i}/community/self`,u=null!=e?e.signal:null,p=await (0,l.q6)((0,s.Z)(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return p.ok?w.Z.fromJSON(p.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){let r=t?.portal,i=this.portalItem?.id&&(this.portalItem.portal||b.Z.getDefault());return r&&i&&!(0,y.tm)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new a.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i._)([(0,d.Cb)({type:v.default})],t.prototype,"portalItem",null),(0,i._)([(0,f.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,i._)([(0,m.c)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,i._)([(0,d.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,i._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,i._)([(0,h.j)("esri.layers.mixins.PortalLayer")],t)},C={credential:null,user:null}},32370:function(e,t,r){r.d(t,{Z:function(){return y}});var i=r(94605),o=r(689),n=r(65223),s=r(59528),l=r(22521),a=r(67009),u=r(46200),p=r(9450);let c=new Map;class y{static fromJSON(e){return new y(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new y(e.fields??[],m(e))}static fromLayerJSON(e){return new y(e.fields??[],m(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;let r=[];for(let e of this.fields){let t=e?.name,i=f(t);if(t&&i){let o=d(t);this._fieldsMap.set(t,e),this._fieldsMap.set(o,e),this._normalizedFieldsMap.set(i,e),r.push(`${o}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,a.y2)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,a.H7)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,a.Dl)(e)||(0,a.Se)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields)for(let e of(this._requiredFields=[],this.fields))(0,a.Dl)(e)||(0,a.Se)(e)||e.nullable||void 0!==(0,a.os)(e)||this._requiredFields.push(e);return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||((t=this._fieldsMap.get(d(e))??this._normalizedFieldsMap.get(f(e)))&&this._fieldsMap.set(e,t),t)}getTimeZone(e){let t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(n.Z.getLogger("esri.layers.support.FieldsIndex").error(new i.Z("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.pt):h.has(t.type)?u._4:null:null}getLuxonTimeZone(e){let t=this.getTimeZone(e);return t?t===u._4?l.yV.instance:t===u.pt?p.Qf.utcInstance:(0,s.s1)(c,t,()=>p.vF.create(t)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,a.sX)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>(0,o.AK)(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function d(e){return e.trim().toLowerCase()}function f(e){return a.q6(e)?.toLowerCase()??""}let h=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function m(e){let t=new Map;if(!e.fields)return t;let r=!0===e.datesInUnknownTimezone,{timeInfo:i,editFieldsInfo:o}=e,n=(i?"startField"in i?i.startField:i.startTimeField:"")??"",s=(i?"endField"in i?i.endField:i.endTimeField:"")??"",l="dateFieldsTimeZone"in e?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,u.Jv)(e.dateFieldsTimeReference):null,a=o?"timeZone"in o?o.timeZone??l:o.dateFieldsTimeReference?(0,u.Jv)(o.dateFieldsTimeReference):l??u.pt:null,p=i?"timeZone"in i?i.timeZone??l:i.timeReference?(0,u.Jv)(i.timeReference):l:null,c=new Map([[d(o?.creationDateField??""),a],[d(o?.editDateField??""),a],[d(n),p],[d(s),p]]);for(let{name:i,type:o}of e.fields)if(h.has(o))t.set(i,u._4);else if("date"!==o&&"esriFieldTypeDate"!==o)t.set(i,null);else if(r)t.set(i,u._4);else{let e=c.get(d(i??""))??l;t.set(i,e)}return t}},78298:function(e,t,r){r.d(t,{C_:function(){return p},HQ:function(){return y},Lx:function(){return h},Oh:function(){return g},PV:function(){return f},YI:function(){return u},bT:function(){return b},iR:function(){return c},id:function(){return w},rO:function(){return S},rT:function(){return C},rn:function(){return d},u1:function(){return _},vg:function(){return v}});var i=r(57111),o=r(9377),n=r(36502),s=r(37144),l=r(81961),a=r(60536);let u={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:i.C}}},p={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},c={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:i.C}}},y={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:s.w}}},d={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:i.C}}},f={value:null,type:l.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:i.C}}};function h(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}let m={write:{enabled:!0,layerContainerTypes:i.C},read:!0},g={type:Number,json:{origins:{"web-document":m,"portal-item":{write:!0}}}},b={...g,json:{...g.json,origins:{"web-document":{...m,write:{enabled:!0,layerContainerTypes:i.C,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,a.b)(t.layerDefinition.drawingInfo.transparency):void 0:(0,a.b)(t.drawingInfo.transparency)}}},v={type:o.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{let r=o.Z.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=n.Z.fromJSON(t.spatialReference)),r}}}},read:!1}},w={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},S={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:i.C}}},name:"layerDefinition.minScale",write:!0}},_={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:i.C}}},name:"layerDefinition.maxScale",write:!0}},C={json:{write:{ignoreOrigin:!0,layerContainerTypes:i.C},origins:{"web-map":{read:!1,write:!1}}}}},63332:function(e,t,r){r.d(t,{$o:function(){return c},Fj:function(){return u},Ss:function(){return d},_$:function(){return a},ck:function(){return p},hz:function(){return y},qj:function(){return l}});var i=r(20928),o=r(36502),n=r(56132);async function s(e){let t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,n.Sx)(e);let r=o.Z.WGS84;return await (0,i.initializeProjection)(t,r),(0,i.project)(e,r)}function l(e,t){if(!a(e,t)){let r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords?.includes(t)}function u(e){return a(e,y.HOSTED_SERVICE)}function p(e,t){let r=e.typeKeywords;if(r){let e=r.indexOf(t);e>-1&&r.splice(e,1)}}async function c(e){let t;let r=e.clone().normalize();if(r.length>1)for(let e of r)t?e.width>t.width&&(t=e):t=e;else t=r[0];return s(t)}let y={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function d(e){let{portal:t,isOrgItem:r,itemControl:i}=e,o=t.user?.privileges,n=!o||o.includes("features:user:edit"),s=!!r&&!!o?.includes("features:user:fullEdit"),l="update"===i||"admin"===i;return l?s=n=!0:s&&(n=!0),{features:{edit:n,fullEdit:s},content:{updateItem:l}}}},95015:function(e,t,r){r.d(t,{AJ:function(){return u},If:function(){return c},k0:function(){return a},uI:function(){return p},ul:function(){return l},wx:function(){return y}});var i=r(13507),o=r(4392),n=r(91870),s=r(40465);let l=2.4;function a(e){return(0,o.Wz)(e*l)}function u(e){return(0,o.F2)(e)/l}function p(e){let t=new Uint8ClampedArray(2048);if((e=e.filter(({ratio:e})=>e>=0&&e<=1).sort((e,t)=>e.ratio-t.ratio).map(({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))).length<1)return t;let r=e[0],o=e[0],l=1,a=(0,s.Ue)();for(let s=0;s<512;s++){let u=(s+.5)/512;for(;u>o.ratio&&l<e.length;)r=o,o=e[l++];(function(e,t,r,o){let{color:s,ratio:l}=t,{color:a,ratio:u}=r;u===l&&(1===u?l-=1e-6:u+=1e-6);let p=(0,i.uZ)((o-l)/(u-l),0,1);(0,n.l)(e,s.toArray(),a.toArray(),p)})(a,r,o,u),t.set(a,4*s)}return t}function c(e,t,r){let i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function y(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},9158:function(e,t,r){r.d(t,{Z:function(){return v}});var i,o=r(86641),n=r(55066),s=r(19637),l=r(740),a=r(689),u=r(61764),p=r(89312);r(37180),r(65223);var c=r(37647),y=r(64186),d=r(50713),f=r(36502),h=r(5005),m=r(40041);let g=new l.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),b=i=class extends a.wq{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){let r=f.Z.fromJSON(t.spatialReference),i=[];for(let t=0;t<e.length;t++){let o=e[t],n=s.Z.fromJSON(o),l=o.geometry?.spatialReference;null==n.geometry||l||(n.geometry.spatialReference=r);let a=o.aggregateGeometries,u=n.aggregateGeometries;if(a&&null!=u)for(let e in u){let t=u[e],i=a[e],o=i?.spatialReference;null==t||o||(t.spatialReference=r)}i.push(n)}return i}writeGeometryType(e,t,r,i){if(e)return void g.write(e,t,r,i);let{features:o}=this;if(o){for(let e of o)if(null!=e?.geometry)return void g.write(e.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;let r=!!e.spatialReference,i=(0,h.im)(e);return i&&!r&&t.spatialReference&&(i.spatialReference=f.Z.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());let{features:r}=this;if(r){for(let e of r)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}}clone(){return new i(this.cloneProperties())}cloneProperties(){return(0,u.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){let t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){let i=t.features[r];if(i.geometry){let t=e?.[r];i.geometry=t?.toJSON()||i.geometry}}return t}quantize(e){let{scale:[t,r],translate:[i,o]}=e,n=this.features,s=this._getQuantizationFunction(this.geometryType,e=>Math.round((e-i)/t),e=>Math.round((o-e)/r));for(let e=0,t=n.length;e<t;e++)s?.(n[e].geometry)||(n.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){let{geometryType:e,features:t,transform:r}=this;if(!r)return this;let{translate:[i,o],scale:[n,s]}=r,l=null,a=null;if(this.hasZ&&null!=r?.scale?.[2]){let{translate:[,,e],scale:[,,t]}=r;l=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){let{translate:[,,,e],scale:[,,,t]}=r;a=r=>null==r?r:r*t+e}let u=this._getHydrationFunction(e,e=>e*n+i,e=>o-e*s,l,a);for(let{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}_quantizePoints(e,t,r){let i,o;let n=[];for(let s=0,l=e.length;s<l;s++){let l=e[s];if(s>0){let e=t(l[0]),s=r(l[1]);e===i&&s===o||(n.push([e-i,s-o]),i=e,o=s)}else i=t(l[0]),o=r(l[1]),n.push([i,o])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{let i=(0,h.oU)(e)?e.rings:e.paths,o=[];for(let e=0,n=i.length;e<n;e++){let n=i[e],s=this._quantizePoints(n,t,r);s&&o.push(s)}return o.length>0?((0,h.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?e=>{let i=this._quantizePoints(e.points,t,r);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,i,o){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),i&&(e.z=i(e.z))}:"polyline"===e||"polygon"===e?e=>{let n,s;let l=(0,h.oU)(e)?e.rings:e.paths;for(let e=0,i=l.length;e<i;e++){let i=l[e];for(let e=0,o=i.length;e<o;e++){let o=i[e];e>0?(n+=o[0],s+=o[1]):(n=o[0],s=o[1]),o[0]=t(n),o[1]=r(s)}}if(i&&o)for(let e=0,t=l.length;e<t;e++){let t=l[e];for(let e=0,r=t.length;e<r;e++){let r=t[e];r[2]=i(r[2]),r[3]=o(r[3])}}else if(i)for(let e=0,t=l.length;e<t;e++){let t=l[e];for(let e=0,r=t.length;e<r;e++){let r=t[e];r[2]=i(r[2])}}else if(o)for(let e=0,t=l.length;e<t;e++){let t=l[e];for(let e=0,r=t.length;e<r;e++){let r=t[e];r[2]=o(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),i&&null!=e.zmax&&null!=e.zmin&&(e.zmax=i(e.zmax),e.zmin=i(e.zmin)),o&&null!=e.mmax&&null!=e.mmin&&(e.mmax=o(e.mmax),e.mmin=o(e.mmin))}:"multipoint"===e?e=>{let n,s;let l=e.points;for(let e=0,i=l.length;e<i;e++){let i=l[e];e>0?(n+=i[0],s+=i[1]):(n=i[0],s=i[1]),i[0]=t(n),i[1]=r(s)}if(i&&o)for(let e=0,t=l.length;e<t;e++){let t=l[e];t[2]=i(t[2]),t[3]=o(t[3])}else if(i)for(let e=0,t=l.length;e<t;e++){let t=l[e];t[2]=i(t[2])}else if(o)for(let e=0,t=l.length;e<t;e++){let t=l[e];t[2]=o(t[2])}}:null}};(0,o._)([(0,p.Cb)({type:String,json:{write:!0}})],b.prototype,"displayFieldName",void 0),(0,o._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"exceededTransferLimit",void 0),(0,o._)([(0,p.Cb)({type:[s.Z],json:{write:!0}})],b.prototype,"features",void 0),(0,o._)([(0,c.r)("features")],b.prototype,"readFeatures",null),(0,o._)([(0,p.Cb)({type:[m.Z],json:{write:!0}})],b.prototype,"fields",void 0),(0,o._)([(0,p.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],b.prototype,"geometryType",void 0),(0,o._)([(0,d.c)("geometryType")],b.prototype,"writeGeometryType",null),(0,o._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasM",void 0),(0,o._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasZ",void 0),(0,o._)([(0,p.Cb)({types:n.qM,json:{write:!0}})],b.prototype,"queryGeometry",void 0),(0,o._)([(0,c.r)("queryGeometry")],b.prototype,"readQueryGeometry",null),(0,o._)([(0,p.Cb)({type:f.Z,json:{write:!0}})],b.prototype,"spatialReference",void 0),(0,o._)([(0,d.c)("spatialReference")],b.prototype,"writeSpatialReference",null),(0,o._)([(0,p.Cb)({json:{write:!0}})],b.prototype,"transform",void 0),(b=i=(0,o._)([(0,y.j)("esri.rest.support.FeatureSet")],b)).prototype.toJSON.isDefaultToJSON=!0;let v=b},68563:function(e,t,r){r.d(t,{E:function(){return o},m:function(){return i}});let i={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},o={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0}}},88421:function(e,t,r){r.d(t,{$Z:function(){return function e(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{let r=t.symbolLayers;if(r)for(let t of r){let r=e(t);if(null!=r)return r}break}case"CIMTextSymbol":return e(t.symbol);case"CIMSolidStroke":return t.color}}},BX:function(){return C},Cc:function(){return b},E_:function(){return l},F:function(){return function e(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(let r of t.symbolLayers){let t=e(r);if(void 0!==t)return t}break;case"CIMTextSymbol":return e(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}},FG:function(){return I},H1:function(){return s},J0:function(){return h},JW:function(){return P},Le:function(){return N},Mk:function(){return function e(t){if(null==t)return!1;if(Array.isArray(t))return t.every(t=>e(t));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}},Ml:function(){return k},On:function(){return S},Qf:function(){return T},RI:function(){return v},T2:function(){return Z},TB:function(){return L},TT:function(){return a},Ts:function(){return B},Ul:function(){return x},W7:function(){return function e(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(let r of t.symbolLayers){let t=e(r);if(null!=t)return t}break;case"CIMTextSymbol":return e(t.symbol);case"CIMSolidFill":return t.color}return null}},X_:function(){return M},ap:function(){return R},be:function(){return p},cO:function(){return g},dT:function(){return O},e0:function(){return function e(t){if(null==t)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{let r=t.symbolLayers;if(!r)return"Normal";for(let t of r)if("CIMVectorMarker"===t.type)return e(t)}break;case"CIMVectorMarker":{let r=t.markerGraphics;if(!r)return"Normal";for(let t of r)if(t.symbol)return e(t.symbol)}}return"Normal"}},gJ:function(){return f},k5:function(){return d},nn:function(){return o},oY:function(){return u},pJ:function(){return w},vn:function(){return m},wi:function(){return _},yL:function(){return y},yl:function(){return A},zL:function(){return c}});var i=r(68563);function o(e){return[e.r,e.g,e.b,e.a]}function n(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function s(e,t){let r=[],i=0,o=-1;do if((o=e.indexOf("[",i))>=i){if(o>i){let t=e.substr(i,o-i);r.push([t,null,n(t)])}if(i=o+1,(o=e.indexOf("]",i))>=i){if(o>i){let n=t[e.substr(i,o-i)];n&&r.push([null,n,!1])}i=o+1}}while(-1!==o);if(i<e.length-1){let t=e.substr(i);r.push([t,null,n(t)])}return r}function l(e,t,r,i){let o="",n=null;for(let i of t){let[t,s,l]=i;if(t)l?n=t:(n&&(o+=n,n=null),o+=t);else{let t=s;null!=r&&(t=B(s,r));let i=e.attributes[t];i&&(n&&(o+=n,n=null),o+=i)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(o,i)}function a(e,t,r,i,o,n,s=!0){let l=t/o,a=r/n,u=Math.ceil(l/2),p=Math.ceil(a/2);for(let r=0;r<n;r++)for(let c=0;c<o;c++){let y=4*(c+(s?n-r-1:r)*o),d=0,f=0,h=0,m=0,g=0,b=0,v=0,w=(r+.5)*a;for(let i=Math.floor(r*a);i<(r+1)*a;i++){let r=Math.abs(w-(i+.5))/p,o=(c+.5)*l,n=r*r;for(let r=Math.floor(c*l);r<(c+1)*l;r++){let s=Math.abs(o-(r+.5))/u,l=Math.sqrt(n+s*s);l>=-1&&l<=1&&(d=2*l*l*l-3*l*l+1)>0&&(v+=d*e[(s=4*(r+i*t))+3],h+=d,e[s+3]<255&&(d=d*e[s+3]/250),m+=d*e[s],g+=d*e[s+1],b+=d*e[s+2],f+=d)}}i[y]=m/f,i[y+1]=g/f,i[y+2]=b/f,i[y+3]=v/h}}function u(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function p(e){return e.data?.symbol??null}function c(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function y(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function d(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function f(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}let h=(e,t=0)=>null==e||isNaN(e)?t:e,m=(e,t)=>e??t,g=e=>e.tintColor?u(e.tintColor):[255,255,255,1],b=e=>{if(!e)return!1;for(let t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function v(){return Promise.all([r.e(58379),r.e(56362)]).then(r.bind(r,56362))}function w(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function S(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function _(e){let t="normal",r="normal";if(e){let i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function C(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function M(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function I(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function T(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}))}let L=e=>e.includes("data:image/svg+xml");function P(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function N(e){return e?e.charAt(0).toLowerCase()+e.substring(1):e}function A(e,t,r,i,o,n){var s,l;let{infos:a}=n,u=1,p=0,c=0,y=0;for(let{offsetX:e,offsetY:t,rotation:r,size:i,frameHeight:o,rotateClockWise:n}of a)c=j(e,t,p,u,c),y=F(e,t,p,u,y),o&&(u*=i/o),s=p,p=n?s-r:s+r;let d=j(i,o,p,u,c),f=F(i,o,p,u,y);return{size:e*u,rotation:(l=p,r?l-t:l+t),offsetX:d,offsetY:f}}function O(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...i.m[t]];let r=i.E[e];if(!r)throw Error(`InternalError: default value for type ${e}.`);return r[t]}function Z(e){return e?.dashTemplate&&"string"==typeof e.dashTemplate&&(e.dashTemplate=e.dashTemplate.split(" ").map(Number)),e}function R(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(let r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{let e=r.size??i.E.CIMVectorMarker.size;e>t&&(t=e)}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(let r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{let e=r.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&f(r.markerPlacement)){let e=r.size??i.E.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{let e=r.height;null!=e&&e>t&&(t=e)}}}return t}}}function B(e,t){if(null!==t){let r=t.get(e);return r?r.name:e}return e}function x(e){return e.map(e=>({...e,propertyName:N(e.propertyName)}))}function k(e){let t={};for(let r in e){let i=e[r];t[N(r)]=i}return t}function F(e,t,r,i,o){let n=r*Math.PI/180;return n?(Math.sin(n)*e+Math.cos(n)*t)*i+o:t*i+o}function j(e,t,r,i,o){let n=r*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*t)*i+o:e*i+o}},98499:function(e,t,r){r.d(t,{CJ:function(){return u},G:function(){return y},Rz:function(){return c},kD:function(){return f},mW:function(){return d},xA:function(){return a},z3:function(){return p}}),r(37180);var i=r(88565),o=r(94833),n=r(96938),s=r(47116),l=r(8739);let a=n.Z.fromJSON(l.I4),u=o.Z.fromJSON(l.ET),p=i.Z.fromJSON(l.lF),c=s.Z.fromJSON(l.qP),y=n.Z.fromJSON(l.eG),d=o.Z.fromJSON(l.wW),f=i.Z.fromJSON(l.lj)},8739:function(e,t,r){r.d(t,{ET:function(){return s},I4:function(){return n},SQ:function(){return i},X1:function(){return o},eG:function(){return u},lF:function(){return l},lj:function(){return c},qP:function(){return a},wW:function(){return p}});let i=[252,146,31,255],o=[153,153,153,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},l={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},p={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);
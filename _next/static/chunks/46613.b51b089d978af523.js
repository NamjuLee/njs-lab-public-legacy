"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46613,47425,96782,5247],{47425:function(t,i,s){s.r(i),s.d(i,{Canvas:function(){return e}});class e{loop(t){this.clear(t),requestAnimationFrame(()=>{this.loop(t)}),this.app.renderer.render(t)}clear(t){t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}constructor(t){this.app=t,this.canvas=document.createElement("canvas"),this.app.host&&(this.app.host.appendChild(this.canvas),this.canvas.width=this.app.host.clientWidth,this.canvas.height=this.app.host.clientHeight);let i=this.canvas.getContext("webgl2");null!==i&&(this.gl=i),this.loop(this.gl)}}},96782:function(t,i,s){s.r(i),s.d(i,{Renderer:function(){return e}});class e{render(t){this.app.camera&&this.app.camera.updateViewMatrix(),this.app.scene.geometries.forEach(i=>{i.render(t)})}constructor(t){this.app=t}}},5247:function(t,i,s){s.r(i),s.d(i,{Scene:function(){return e}});class e{add(t){this.geometries.push(t)}constructor(t){this.geometries=[],this.NGL3dApp=t}}},3476:function(t,i,s){s.r(i),s.d(i,{GridAxis:function(){return u}});var e=s(58999),n=s(55770),r=s(73161),o=s(85353),a=s(16446);class h extends r.Shader{set(t){return this.gl.uniform1f(this.uniformLoc.uAngle,t),this}renderModal(t){return this.setModalMatrix(t.transform.getViewMatrix()),this.gl.bindVertexArray(t.mesh.vao),t.mesh.indexCount?this.gl.drawElements(t.mesh.drawMode,t.mesh.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(t.mesh.drawMode,0,t.mesh.vertexCount),this.gl.bindVertexArray(null),this}constructor(t,i,s,e,n){if(super(t,i,s),this.program){this.setPerspective(n),t.useProgram(this.program),this.uniformLoc.uAngle=t.getUniformLocation(this.program,"uAngle");let i=t.getUniformLocation(this.program,"uColor");t.uniform3fv(i,e)}}}class u extends o.GeometryBase{GetVAO(){let t,i=!(arguments.length>0)||void 0===arguments[0]||arguments[0],s=[];for(let i=0;i<=10;i++)t=-.9+.18*i,s.push(t),s.push(0),s.push(.9),s.push(0),s.push(t),s.push(0),s.push(-.9),s.push(0),t=.9-.18*i,s.push(-.9),s.push(0),s.push(t),s.push(0),s.push(.9),s.push(0),s.push(t),s.push(0);i&&(s.push(-1.1),s.push(0),s.push(0),s.push(1),s.push(1.1),s.push(0),s.push(0),s.push(1),s.push(0),s.push(-1.1),s.push(0),s.push(2),s.push(0),s.push(1.1),s.push(0),s.push(2),s.push(0),s.push(0),s.push(-1.1),s.push(3),s.push(0),s.push(0),s.push(1.1),s.push(3)),this.mesh=new e.RTN,this.mesh.drawMode=this.gl.LINES,this.mesh.vao=this.gl.createVertexArray(),this.mesh.vertexComponentLen=4,this.mesh.vertexCount=s.length/this.mesh.vertexComponentLen;let n=Float32Array.BYTES_PER_ELEMENT*this.mesh.vertexComponentLen;return this.mesh.bufVertices=this.gl.createBuffer(),this.gl.bindVertexArray(this.mesh.vao),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.mesh.bufVertices),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(s),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(a.ATTR.ATTR_POSITION_LOC),this.gl.enableVertexAttribArray(a.ATTR.ATTR_COLOR_LOC),this.gl.vertexAttribPointer(a.ATTR.ATTR_POSITION_LOC,3,this.gl.FLOAT,!1,n,0),this.gl.vertexAttribPointer(a.ATTR.ATTR_COLOR_LOC,1,this.gl.FLOAT,!1,n,3*Float32Array.BYTES_PER_ELEMENT),this.gl.bindVertexArray(null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.mesh}initShader(t){this.shader=new h(t,this.v,this.f,[.8,.8,.8,1,0,0,0,1,0,0,0,1],this.app.camera.projectionMatrix),this.mesh=this.GetVAO(),this.modal=new n.Modal(this.mesh)}render(t){this.shader.activate().setCameraMatrix(this.app.camera.viewMatrix).renderModal(this.modal.preRender()),this.t=.01}constructor(t){super(t.scene),this.v="#version 300 es\n    in vec3 a_position;	//Standard position data.\n    layout(location=4) in float a_color;	//Will hold the 4th custom position of the custom position buffer.\n\n    uniform mat4 uPMatrix;\n    uniform mat4 uMVMatrix;\n    uniform mat4 uCameraMatrix;\n\n    uniform vec3 uColor[4];	//Color Array\n\n    out lowp vec4 color;	//Color to send to fragment shader.\n\n    void main(void) {\n        color = vec4(uColor[ int(a_color) ],1.0); //Using the 4th float as a color index.\n        gl_Position = uPMatrix * uCameraMatrix * uMVMatrix * vec4(a_position, 1.0);\n    }\n    ",this.f="#version 300 es\n    precision mediump float;\n\n    in vec4 color;\n    out vec4 finalColor;\n\n    void main(void) { finalColor = color; }\n    ",this.ro=0,this.t=0,this.app=t,this.gl=t.canvas.gl,this.initShader(this.gl)}}},32914:function(t,i,s){s.r(i),s.d(i,{PointScreen:function(){return h}});var e=s(58999),n=s(55770),r=s(85353),o=s(73161);class a extends o.Shader{set(t,i){return this.gl.uniform1f(this.uniformLoc.uPointSize,t),this.gl.uniform1f(this.uniformLoc.uAngle,i),this}constructor(t,i,s){super(t,i,s),this.program&&(this.uniformLoc.uPointSize=t.getUniformLocation(this.program,"uPointSize"),this.uniformLoc.uAngle=t.getUniformLocation(this.program,"uAngle")),t.useProgram(null)}}class h extends r.GeometryBase{initShader(t){this.shader=new a(t,this.v,this.f),this.mesh=e.VAO.createMeshVAO(t,"dots",[0,0,0,.1,.1,0,.1,-.1,0,-.1,-.1,0,-.1,.1,0]),this.mesh.drawMode=t.POINTS,this.modal=new n.Modal(this.mesh)}render(t){this.size+=.01;let i=10*Math.sin(this.size)+30;this.rotation+=.02,this.shader.activate(),this.shader.set(i,this.rotation),this.shader.renderModal(this.modal)}constructor(t){super(t.scene),this.vOld="#version 300 es\n        in vec3 a_position;\n\n        uniform float uPointSize;\n\n        void main(void) {\n            gl_PointSize = uPointSize;\n            gl_Position = vec4(a_position, 1.0);\n        }\n    ",this.fOld="#version 300 es\n        precision mediump float;\n\n        out vec4 finalColor;\n\n        void main(void) {\n            finalColor = vec4(1.0, 0.0, 0.0, 1.0);\n        }\n    ",this.v="#version 300 es\n\n        in vec3 a_position;\n\n        uniform mediump float uPointSize;\n        uniform float uAngle;\n\n        void main(void) {\n            gl_PointSize = uPointSize;\n            gl_Position = vec4(cos(uAngle) * 0.8 + a_position.x, sin(uAngle) * 0.8 + a_position.y, a_position.z, 1.0);\n        }\n    ",this.f="#version 300 es\n        precision mediump float;\n\n        uniform float uPointSize;\n\n        out vec4 finalColor;\n\n        void main(void) {\n            float c = (40. - uPointSize ) / 20.;\n            finalColor = vec4(c, c, c, 1.0);\n        }\n    ",this.size=2.5,this.rotation=0,this.app=t,this.gl=t.canvas.gl,this.initShader(this.gl)}}},47734:function(t,i,s){s.r(i),s.d(i,{CAMERA_MODE:function(){return n},Camera:function(){return a},CameraController:function(){return h}});var e,n,r=s(13915),o=s(55226);(e=n||(n={}))[e.FREE=0]="FREE",e[e.ORBIT=1]="ORBIT";class a{panX(t){1!==this.mode&&(this.updateViewMatrix(),this.transform.position.x+=this.transform.right[0]*t,this.transform.position.y+=this.transform.right[1]*t,this.transform.position.z+=this.transform.right[2]*t)}panY(t){this.updateViewMatrix(),this.transform.position.y+=this.transform.up[1]*t,1!==this.mode&&(this.transform.position.x+=this.transform.up[0]*t,this.transform.position.z+=this.transform.up[2]*t)}panZ(t){this.updateViewMatrix(),1===this.mode?this.transform.position.z+=t:(this.transform.position.x+=this.transform.forward[0]*t,this.transform.position.y+=this.transform.forward[1]*t,this.transform.position.z+=this.transform.forward[2]*t)}updateViewMatrix(){return 0===this.mode?this.transform.matView.reset().vtranslate(this.transform.position).rotateX(this.transform.rotation.x*o.Transform.deg2Rad).rotateY(this.transform.rotation.y*o.Transform.deg2Rad):this.transform.matView.reset().rotateX(this.transform.rotation.x*o.Transform.deg2Rad).rotateY(this.transform.rotation.y*o.Transform.deg2Rad).vtranslate(this.transform.position),this.transform.updateDirection(),r.Matrix4.invert(this.viewMatrix,this.transform.matView.raw),this.viewMatrix}constructor(t,i=45,s=.1,e=100){this.projectionMatrix=new Float32Array(16);var n=t.canvas.width/t.canvas.height;r.Matrix4.perspective(this.projectionMatrix,i||45,n,s||.1,e||100),this.transform=new o.Transform,this.viewMatrix=new Float32Array(16),this.mode=1}}class h{getMouseVec2(t){return{x:t.pageX-this.offsetX,y:t.pageY-this.offsetY}}onMouseDown(t){this.initX=this.prevX=t.pageX-this.offsetX,this.initY=this.prevY=t.pageY-this.offsetY,this.canvas.addEventListener("mouseup",this.onUpHandler),this.canvas.addEventListener("mousemove",this.onMoveHandler)}onMouseUp(t){this.canvas.removeEventListener("mouseup",this.onUpHandler),this.canvas.removeEventListener("mousemove",this.onMoveHandler)}onMouseWheel(t){var i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));this.camera.panZ(this.zoomRate/this.canvas.height*i)}onMouseMove(t){var i=t.pageX-this.offsetX,s=t.pageY-this.offsetY,e=i-this.prevX,n=s-this.prevY;t.shiftKey?(this.camera.panX(-(this.panRate/this.canvas.width*e)),this.camera.panY(this.panRate/this.canvas.height*n)):(this.camera.transform.rotation.y+=this.rotateRate/this.canvas.width*e,this.camera.transform.rotation.x+=this.rotateRate/this.canvas.height*n),this.prevX=i,this.prevY=s}constructor(t,i){this.canvas=t.canvas,this.camera=i,this.rotateRate=-300,this.panRate=5,this.zoomRate=200,this.offsetX=10,this.offsetY=10,this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.onUpHandler=t=>this.onMouseUp(t),this.onMoveHandler=t=>{this.onMouseMove(t)},this.canvas.addEventListener("mousedown",t=>{this.onMouseDown(t)}),this.canvas.addEventListener("mousewheel",t=>{this.onMouseWheel(t)})}}},46613:function(t,i,s){s.r(i),s.d(i,{NGL3dApp:function(){return l}});var e=s(47425),n=s(96782),r=s(5247),o=s(47734),a=s(3476),h=s(32914),u=s(95800);class l{constructor(t){console.log("id: "+t+", NGL3dApp 06 Init!!!!!");let i=document.getElementById(t);i&&(this.host=i),this.scene=new r.Scene(this),this.renderer=new n.Renderer(this),this.canvas=new e.Canvas(this),this.camera=new o.Camera(this.canvas.gl),this.camera.transform.position.set(0,1,3),this.cameraCtrl=new o.CameraController(this.canvas.gl,this.camera),new h.PointScreen(this),new u.PointWorld(this),new a.GridAxis(this)}}}}]);
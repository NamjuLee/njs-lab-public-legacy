"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37899],{37899:function(t,s,i){i.r(s),i.d(s,{AppCanvasTemplate:function(){return v},Solution:function(){return m}});var e=i(8483);class o{static GetPoint(t,s,i){let e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new o(t,s,i,e)}Render(t){t.fillStyle=this.fillColor,t.beginPath(),t.arc(this.v.x,this.v.y,this.r,0,2*Math.PI),t.closePath(),t.fill()}constructor(t,s,i,o=0){this.r=5,this.fillColor="",this.v=new e.h9(s,i,o),this.render=t,this.render.pointList.push(this),this.fillColor="rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.random(),")")}}class h{static GetLine(t,s,i){return new h(t,s,i)}Render(t){this.p0&&this.p1&&(t.strokeStyle=this.strokeColor,t.beginPath(),t.moveTo(this.p0.v.x,this.p0.v.y),t.lineTo(this.p1.v.x,this.p1.v.y),t.closePath(),t.stroke())}ToJson(){let t=this.p0,s=this.p1;return{p0:{x:t.v.x,y:t.v.y},p1:{x:s.v.x,y:s.v.y}}}constructor(t,s,i){this.width=5,this.strokeColor="",this.p0=s,this.p1=i,this.render=t,this.render.lineList.push(this),this.strokeColor="rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.random(),")")}}class n{static GetCircle(t,s,i){return new n(t,s,i)}Render(t){t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.arc(this.cv.x,this.cv.y,this.radius,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}constructor(t,s,i){this.radius=5,this.width=5,this.strokeColor="",this.fillColor="",this.cv=s,this.radius=i,this.render=t,this.render.circleList.push(this),this.strokeColor="rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(255*Math.random(),",").concat(Math.random(),")"),this.fillColor="rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(255*Math.random(),",").concat(Math.random(),")")}}class a{MouseMove(t,s){this.mouse.x=t,this.mouse.y=s}MouseDClick(t,s){this.mouse.x=t,this.mouse.y=s,this.commander.ToggleAutoPopulation()}MouseDown(t,s){this.mouse.x=t,this.mouse.y=s,this.appCore.io.GetGraph(this.render.lineList)}MouseLeftClick(t,s){let i=o.GetPoint(this.render,t,s);if(this.render.pointList.length>1){let e=this.commander.FindPoint(t,s);if(e){let t=h.GetLine(this.render,i,e);this.commander.GetCircleByLine(t)}}}MouseUp(t,s){this.mouse.x=t,this.mouse.y=s}MouseDrag(t,s){this.mouse.x=t,this.mouse.y=s}constructor(t){this.mouse=new e.h9(0,0),this.capture=void 0,this.appCore=t,this.render=this.appCore.render,this.commander=new r(this)}}class r{ToggleAutoPopulation(){this.autoPopulation=!this.autoPopulation}FindPoint(t,s){let i;let o=this.controller.render,h=Number.MAX_SAFE_INTEGER,n=new e.h9(t,s);for(let t of o.pointList){let s=n.Distance(t.v);s>.1&&s<h&&(h=s,i=t)}return i||void 0}GetCircleByLine(t){let s=e.h9.MidVec(t.p0.v,t.p1.v),i=e.h9.Distance(t.p0.v,t.p1.v);n.GetCircle(this.controller.render,s,.5*i)}constructor(t){this.autoPopulation=!1,this.controller=t}}class c{RenderPre(t){this.Render(t)}Render(t){for(let s=0;s<this.circleList.length;++s)this.circleList[s].Render(t);for(let s=0;s<this.lineList.length;++s)this.lineList[s].Render(t);for(let s=0;s<this.pointList.length;++s)this.pointList[s].Render(t);this.dt+=.1}RenderPost(t){}constructor(t){this.pointList=[],this.lineList=[],this.circleList=[],this.dt=0,this.appCore=t}}class l{GetGraph(t){console.log("get Graph",t);let s={},i=0;t.forEach(t=>{s[i]=t.ToJson(),i++}),console.log(s)}constructor(t){this.appCore=t}}class u{Init(t,s){this.io=new l(this),this.render=new c(this),this.controller=new a(this)}MouseMove(t,s){this.controller.MouseMove(t,s)}MouseDClick(t,s){this.controller.MouseDClick(t,s)}MouseDown(t,s){this.controller.MouseDown(t,s)}MouseLeftClick(t,s){this.controller.MouseLeftClick(t,s)}MouseUp(t,s){this.controller.MouseUp(t,s)}MouseDrag(t,s){this.controller.MouseDrag(t,s)}Render(t){if(this.render.RenderPre(t),this.controller.commander.autoPopulation){let t=this.DynamicGrid.CanvasCore.canvas.width,s=this.DynamicGrid.CanvasCore.canvas.height;this.MouseLeftClick(Math.random()*t-.5*t+10,Math.random()*s-.5*s+10)}}constructor(t,s,i){this.frame=0,this.DynamicGrid=t,this.Init(s-100,i-100)}}class d{InitCanvas(){let t=document.createElement("div");if(!t)return;this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);let s=document.createElement("div");if(!s)return;this.divCanvas=s,this.divLocalMain.append(s);let i=document.createElement("canvas");if(i){this.canvas=i,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";let t=this.canvas.getContext("2d");t&&(this.ctx=t,this.Init())}}Init(){this.ctx.translate(.5*this.ctx.canvas.width,.5*this.ctx.canvas.height),this.ctx.scale(1,1),this.EventBind(),this.Loop()}EventBind(){this.divCanvas.onclick=t=>{this.prevent=!1,this.timer=setTimeout(()=>{if(!this.prevent){if(!this.click)return;this.MouseClickPre(t)}this.prevent=!1},this.delay)},this.divCanvas.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClickPre(t)},this.divCanvas.addEventListener("wheel",t=>this.MouseWheel(t,t.deltaY)),this.canvas.onmousedown=t=>{this.click=!0,this.pressed=!0,this.MouseDownPre(t)},this.canvas.onmouseup=t=>{this.pressed=!1,this.MouseUpPre(t)},this.canvas.onmousemove=t=>{this.pressed&&(this.click=!1,this.MouseDragPre(t)),this.MouseMovePre(t)},window.onresize=t=>this.Resize(t)}Resize(t){}Loop(){requestAnimationFrame(()=>{this.Loop()}),this.ctx.clearRect(-(.5*this.ctx.canvas.width),-(.5*this.ctx.canvas.height),this.ctx.canvas.width,this.ctx.canvas.height),this.Grid(this.ctx),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(-(.5*this.ctx.canvas.width),-(.5*this.ctx.canvas.height),this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)}Grid(t){for(let s=-10;s<10;++s)for(let i=-10;i<10;++i)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(s,i,.05,0,2*Math.PI),t.closePath(),t.fill()}Render(t){}MouseClickPre(t){this.MouseClick(t)}MouseClick(t){}MouseDoubleClickPre(t){this.MouseDoubleClick(t)}MouseDoubleClick(t){}MouseDownPre(t){this.MouseDown(t)}MouseDown(t){}MouseUpPre(t){this.MouseUp(t)}MouseUp(t){}MouseMovePre(t){this.MouseMove(t)}MouseMove(t){}MouseDragPre(t){this.MouseDrag(t)}MouseDrag(t){}MouseWheel(t,s){}constructor(t,s=600,i=400){this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.app=t,this.width=s,this.height=i;let e=document.getElementById(t.id);if(!e)return;this.host=e,this.InitCanvas()}}class p{InitApp(){this.appCore=new u(this,this.CanvasCore.canvas.width,this.CanvasCore.canvas.height)}Init(){this.CanvasCore.Render=t=>this.Render(t),this.CanvasCore.MouseDown=t=>this.MouseDown(t),this.CanvasCore.MouseClick=t=>this.MouseClick(t),this.CanvasCore.MouseDoubleClick=t=>this.MouseDoubleClick(t),this.CanvasCore.MouseUp=t=>this.MouseUp(t),this.CanvasCore.MouseMove=t=>this.MouseMove(t),this.CanvasCore.MouseDrag=t=>this.MouseDrag(t)}Render(t){this.appCore.Render(t),t.fillStyle="rgba(255, 0, 0, 0.9)",t.beginPath(),t.arc(this.m.x,this.m.y,2.5,0,2*Math.PI),t.closePath(),t.fill()}Grid(t){}mouseRemap(t){let s=this.CanvasCore.ctx.canvas.getBoundingClientRect();this.m.x=t.x-s.left-.5*this.CanvasCore.canvas.width,this.m.y=t.y-s.top-.5*this.CanvasCore.canvas.height}MouseDown(t){this.mouseRemap(t),this.appCore.MouseDown(this.m.x,this.m.y)}MouseUp(t){this.mouseRemap(t),this.appCore.MouseUp(this.m.x,this.m.y)}MouseMove(t){this.mouseRemap(t),this.appCore.MouseMove(this.m.x,this.m.y)}MouseDrag(t){this.mouseRemap(t),this.appCore.MouseDrag(this.m.x,this.m.y)}MouseClick(t){this.mouseRemap(t),this.appCore.MouseLeftClick(this.m.x,this.m.y)}MouseDoubleClick(t){this.mouseRemap(t),this.appCore.MouseDClick(this.m.x,this.m.y)}constructor(t){this.t=.9,this.m=new e.h9(0,0,0),this.id=t,this.CanvasCore=new d(this),this.Init(),this.InitApp()}}class M{constructor(t){this.DynamicGridA=new p(t)}}class v{static Init(t){new v(t).Dummy()}Dummy(){}constructor(t="SandBox"){this.implementation=new M(t),console.log("AppCanvasTemplate 1000")}}class m{destroy(){if(this.divHost)try{for(;this.divHost.firstChild;)this.divHost.removeChild(this.divHost.firstChild)}catch(t){console.error("Error in destroy method:",t)}else console.warn("divHost is undefined in destroy method")}constructor(t){this.divHost=document.getElementById(t),v.Init(t)}}}}]);
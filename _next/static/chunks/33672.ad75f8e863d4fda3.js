(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33672],{15510:function(t){function e(t){return Promise.resolve().then(function(){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=function(){return[]},e.resolve=e,e.id=15510,t.exports=e},75410:function(){},48628:function(){},31601:function(){},67792:function(){},34977:function(){},75042:function(){},21322:function(t,e,i){"use strict";i.d(e,{P:function(){return n}});var s=i(88405);class n{predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(s.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(s.scalar(4)).mul(this.weights[3]).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(s.scalar(5)).mul(this.weights[4]).add(t.pow(s.scalar(4)).mul(this.weights[3])).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):(this.dim,this.predict1d(t))}loss(t,e){return t.sub(e).square().mean()}train(t,e){s.tidy(()=>{let i=s.tensor1d(t),n=s.tensor1d(e);this.optimizer.minimize(()=>this.loss(this.predict(i),n))})}constructor(t=0){this.weights=[],this.dim=3,this.leraningRate=.2,this.dim=t;for(let t=0;t<5;++t){let t=s.variable(s.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=s.variable(s.scalar(2*Math.random()-1)),this.optimizer=s.train.adam(this.leraningRate)}}},88876:function(t,e,i){"use strict";i.d(e,{NJSCORE:function(){return o},PolynomialRegression:function(){return r.P},RendererThree:function(){return s.T}});var s=i(14540),n=i(45169);i.o(n,"AStart")&&i.d(e,{AStart:function(){return n.AStart}}),i.o(n,"COLOR_BLENDING")&&i.d(e,{COLOR_BLENDING:function(){return n.COLOR_BLENDING}}),i.o(n,"Graph")&&i.d(e,{Graph:function(){return n.Graph}}),i.o(n,"KNN")&&i.d(e,{KNN:function(){return n.KNN}}),i.o(n,"LinearRegression")&&i.d(e,{LinearRegression:function(){return n.LinearRegression}}),i.o(n,"LinearRegressionGradientDescent")&&i.d(e,{LinearRegressionGradientDescent:function(){return n.LinearRegressionGradientDescent}}),i.o(n,"MercatorProjection")&&i.d(e,{MercatorProjection:function(){return n.MercatorProjection}}),i.o(n,"PolynomialRegression")&&i.d(e,{PolynomialRegression:function(){return n.PolynomialRegression}}),i.o(n,"RGBtoGray")&&i.d(e,{RGBtoGray:function(){return n.RGBtoGray}}),i.o(n,"RendererCanvas")&&i.d(e,{RendererCanvas:function(){return n.RendererCanvas}}),i.o(n,"RendererJSAPI")&&i.d(e,{RendererJSAPI:function(){return n.RendererJSAPI}}),i.o(n,"TypeDithering")&&i.d(e,{TypeDithering:function(){return n.TypeDithering}}),i.o(n,"Vector3")&&i.d(e,{Vector3:function(){return n.Vector3}}),i.o(n,"buildNetwork")&&i.d(e,{buildNetwork:function(){return n.buildNetwork}}),i.o(n,"crossProduct")&&i.d(e,{crossProduct:function(){return n.crossProduct}}),i.o(n,"deepCopy")&&i.d(e,{deepCopy:function(){return n.deepCopy}}),i.o(n,"distanceEuclidean")&&i.d(e,{distanceEuclidean:function(){return n.distanceEuclidean}}),i.o(n,"distanceTo")&&i.d(e,{distanceTo:function(){return n.distanceTo}}),i.o(n,"dithering4_4")&&i.d(e,{dithering4_4:function(){return n.dithering4_4}}),i.o(n,"ditheringFloydSteinberg")&&i.d(e,{ditheringFloydSteinberg:function(){return n.ditheringFloydSteinberg}}),i.o(n,"getArrayBinaryImgFromCtx")&&i.d(e,{getArrayBinaryImgFromCtx:function(){return n.getArrayBinaryImgFromCtx}}),i.o(n,"getCSVFromURL")&&i.d(e,{getCSVFromURL:function(){return n.getCSVFromURL}}),i.o(n,"getCheckBox")&&i.d(e,{getCheckBox:function(){return n.getCheckBox}}),i.o(n,"getImgFromURL")&&i.d(e,{getImgFromURL:function(){return n.getImgFromURL}}),i.o(n,"getJSONFromURL")&&i.d(e,{getJSONFromURL:function(){return n.getJSONFromURL}}),i.o(n,"getLineSeg")&&i.d(e,{getLineSeg:function(){return n.getLineSeg}}),i.o(n,"getRandomHex")&&i.d(e,{getRandomHex:function(){return n.getRandomHex}}),i.o(n,"getSlider")&&i.d(e,{getSlider:function(){return n.getSlider}}),i.o(n,"getUUID")&&i.d(e,{getUUID:function(){return n.getUUID}}),i.o(n,"hex2RGBA")&&i.d(e,{hex2RGBA:function(){return n.hex2RGBA}}),i.o(n,"isInsideOfVecs")&&i.d(e,{isInsideOfVecs:function(){return n.isInsideOfVecs}}),i.o(n,"normalize")&&i.d(e,{normalize:function(){return n.normalize}}),i.o(n,"reflect")&&i.d(e,{reflect:function(){return n.reflect}}),i.o(n,"remap")&&i.d(e,{remap:function(){return n.remap}}),i.o(n,"shuffleArray")&&i.d(e,{shuffleArray:function(){return n.shuffleArray}});var r=i(21322),o=i(8483)},14540:function(t,e,i){"use strict";i.d(e,{T:function(){return r}});var s=i(97776),n=i(78252);class r{initCanvas(){this.scene=new s.xsS,this.scene.background=new s.Ilk(0),this.scene.castShadow=!0,this.renderer=new s.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(this.hostDiv.clientWidth/this.hostDiv.clientHeight),this.renderer.domElement.id="Three",this.renderer.domElement.style.position="absolute",this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight),this.hostDiv.appendChild(this.renderer.domElement),this.camera=new s.cPb(30,this.hostDiv.clientWidth/this.hostDiv.clientHeight,1,5e3),this.controls=new n.OrbitControls(this.camera,this.renderer.domElement),this.camera.position.set(0,0,5),this.controls.update(),this.canvas=this.renderer.domElement,this.init()}init(){this.eventBind()}eventBind(){this.renderer.domElement.onmousedown=t=>this.mouseDown(t),this.renderer.domElement.onmouseup=t=>this.mouseUp(t),this.renderer.domElement.onmousemove=t=>this.mouseMove(t),this.renderer.domElement.addEventListener("click",t=>this.mouseClick(t)),window.addEventListener("resize",()=>this.onWindowResize())}onWindowResize(){this.camera.aspect=this.hostDiv.clientWidth/this.hostDiv.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight)}start(){this.loop()}mouseDown(t){}mouseUp(t){}mouseClick(t){}mouseDClick(t){}mouseMove(t){}mouseDrag(t){}update(t){}destroy(){for(window.removeEventListener("resize",()=>this.onWindowResize()),cancelAnimationFrame(this.requestFrame),this.requestFrame=void 0;this.hostDiv.lastChild;)this.hostDiv.removeChild(this.hostDiv.lastChild)}constructor(t){this.t=0,this.requestFrame=void 0,this.loop=()=>{this.requestFrame=requestAnimationFrame(this.loop),this.controls.update(),this.update(this.scene),this.renderer.render(this.scene,this.camera),this.t+=.01},this.hostDiv=document.getElementById(t),this.initCanvas()}}},380:function(t,e,i){"use strict";i.r(e),i.d(e,{Renderer:function(){return g},Solution:function(){return p}});let s=(t,e,i,s,r,o,h,l)=>{let d=r*s*(o-2)*(o-2);n(t,e,i,d,1+6*d,o,h,l)},n=(t,e,i,s,n,o,h,d)=>{let a=1/n;for(let n=0;n<h;n++){for(let t=1;t<o-1;t++)for(let n=1;n<o-1;n++)e[r(n,t,o)]=(i[r(n,t,o)]+s*(e[r(n+1,t,o)]+e[r(n-1,t,o)]+e[r(n,t+1,o)]+e[r(n,t-1,o)]))*a;l(t,e,o,d)}},r=(t,e,i)=>t+e*i,o=(t,e,i,s,o,h,d)=>{for(let n=1;n<o-1;n++)for(let h=1;h<o-1;h++)s[r(h,n,o)]=-.5*(t[r(h+1,n,o)]-t[r(h-1,n,o)]+e[r(h,n+1,o)]-e[r(h,n-1,o)])/o,i[r(h,n,o)]=0;l(0,s,o,d),l(0,i,o,d),n(0,i,s,1,6,o,h,d);for(let s=1;s<o-1;s++)for(let n=1;n<o-1;n++)t[r(n,s,o)]-=.5*(i[r(n+1,s,o)]-i[r(n-1,s,o)])*o,e[r(n,s,o)]-=.5*(i[r(n,s+1,o)]-i[r(n,s-1,o)])*o;l(1,t,o,d),l(2,e,o,d)},h=(t,e,i,s,n,o,h,d)=>{let a,u,c,m,f,p,g,y,v,C,w,x,E,N,L,S;let M=o*(h-2),R=o*(h-2),b=h-2;for(S=1,N=1;S<h-1;S++,N++)for(L=1,E=1;L<h-1;L++,E++)v=M*s[r(L,S,h)],C=R*n[r(L,S,h)],w=E-v,x=N-C,w<.5&&(w=.5),w>b+.5&&(w=b+.5),u=(a=Math.floor(w))+1,x<.5&&(x=.5),x>b+.5&&(x=b+.5),m=(c=Math.floor(x))+1,f=1-(p=w-a),g=1-(y=x-c),e[r(L,S,h)]=f*(g*i[r(a,c,h)]+y*i[r(a,m,h)])+p*(g*i[r(u,c,h)]+y*i[r(u,m,h)]);l(t,e,h,d)},l=(t,e,i,s)=>{for(let s=1;s<i-1;s++)e[r(s,0,i)]=2===t?-e[r(s,1,i)]:e[r(s,1,i)],e[r(s,i-1,i)]=2===t?-e[r(s,i-2,i)]:e[r(s,i-2,i)];for(let s=1;s<i-1;s++)e[r(0,s,i)]=1===t?-e[r(1,s,i)]:e[r(1,s,i)],e[r(i-1,s,i)]=1===t?-e[r(i-2,s,i)]:e[r(i-2,s,i)];e[r(0,0,i)]=.5*(e[r(1,0,i)]+e[r(0,1,i)]),e[r(0,i-1,i)]=.5*(e[r(1,i-1,i)]+e[r(0,i-2,i)]),e[r(i-1,0,i)]=.5*(e[r(i-2,0,i)]+e[r(i-1,1,i)]),e[r(i-1,i-1,i)]=.5*(e[r(i-2,i-1,i)]+e[r(i-1,i-2,i)]),e[r(Math.floor(.5*i),0,i)]=0,e[r(Math.floor(.5*i),1,i)]=0,e[r(Math.floor(.5*i),2,i)]=0,e[r(Math.floor(.5*i),3,i)]=0,e[r(Math.floor(.5*i),4,i)]=0,e[r(Math.floor(.5*i),5,i)]=0,e[r(Math.floor(.5*i),6,i)]=0,e[r(Math.floor(.5*i),7,i)]=0,e[r(Math.floor(.5*i),i-1,i)]=0,e[r(Math.floor(.5*i),i-2,i)]=0,e[r(Math.floor(.5*i),i-3,i)]=0,e[r(Math.floor(.5*i),i-4,i)]=0,e[r(Math.floor(.5*i),i-5,i)]=0,e[r(Math.floor(.5*i),i-6,i)]=0,e[r(Math.floor(.5*i),i-7,i)]=0,e[r(Math.floor(.5*i),i-8,i)]=0;for(let t=0;t<s.length;++t)e[r(s[t][0],s[t][1],i)]=0};var d=i(45169);class a{step(){let t=this.visc,e=this.diff,i=this.dt,n=this.Vx,r=this.Vy,l=this.Vx0,d=this.Vy0,a=this.s,u=this.density;s(1,l,n,t,i,this.N,this.iter,this.cellFixed),s(2,d,r,t,i,this.N,this.iter,this.cellFixed),o(l,d,n,r,this.N,this.iter,this.cellFixed),h(1,n,l,l,d,i,this.N,this.cellFixed),h(2,r,d,l,d,i,this.N,this.cellFixed),o(n,r,l,d,this.N,this.iter,this.cellFixed),s(0,a,u,e,i,this.N,this.iter,this.cellFixed),h(0,u,a,n,r,i,this.N,this.cellFixed)}addDensity(t,e,i){let s=r(t,e,this.N);this.density[s]+=i}addVelocity(t,e,i,s){let n=r(t,e,this.N);this.Vx[n]+=i,this.Vy[n]+=s}renderD(t){for(let e=0;e<this.N;e++)for(let i=0;i<this.N;i++){let s=e*this.SCALE,n=i*this.SCALE,o=this.density[r(e,i,this.N)];if(0===o)t.fillStyle="rgb(255, 255, 255)";else{let e=(0,d.getFalseColor)(o*this.visScale);t.fillStyle="rgb(".concat(e[0],", ").concat(e[1],",").concat(e[2],")")}t.beginPath(),t.rect(s,n,this.SCALE,this.SCALE),t.fill(),t.lineWidth=.2,t.strokeStyle="#ff0000"}}renderV(t){for(let e=0;e<this.N;e++)for(let i=0;i<this.N;i++){let s=e*this.SCALE,n=i*this.SCALE,o=this.Vx[r(e,i,this.N)],h=this.Vy[r(e,i,this.N)];.1>Math.abs(o)&&.1>=Math.abs(h)||(t.lineWidth=2,t.beginPath(),t.moveTo(s,n),t.lineTo(s+o*this.SCALE,n+h*this.SCALE),t.stroke())}}constructor(t,e,i){this.N=100,this.iter=16,this.SCALE=4,this.t=0,this.visScale=.01,this.cellFixed=[],this.dt=t,this.diff=e,this.visc=i,this.s=new Float32Array(this.N*this.N).fill(0),this.density=new Float32Array(this.N*this.N).fill(.01),this.Vx=new Float32Array(this.N*this.N).fill(0),this.Vx0=new Float32Array(this.N*this.N).fill(0),this.Vy=new Float32Array(this.N*this.N).fill(0),this.Vy0=new Float32Array(this.N*this.N).fill(0)}}let u=(t,e)=>{let i=document.createElement("div");i.style.position="absolute",t.appendChild(i);let s=document.createElement("button");s.textContent="Reset",s.style.width="60px",s.style.height="20px",s.onclick=()=>{e.init()},i.appendChild(s);let n=document.createElement("div"),r=document.createElement("input");r.value="https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.jpg",r.addEventListener("keydown",t=>{"Enter"===t.code&&e.importImg(r.value)}),n.appendChild(r),i.appendChild(n);let o=document.createElement("div");o.innerHTML="time",o.style.height="50px",o.style.width="100px",i.appendChild(o);let h=document.createElement("input");h.type="range",h.min="0.0001",h.max="0.7",h.step="0.0001",h.oninput=()=>{let t=+h.value;e.fluid.dt=t},o.appendChild(h);let l=document.createElement("div");l.innerHTML="Vis Scale",l.style.height="50px",l.style.width="100px",i.appendChild(l);let d=document.createElement("input");d.type="range",d.min="0.000001",d.max="0.8",d.step="0.00001",d.oninput=()=>{let t=+d.value;e.fluid.visScale=t},l.appendChild(d);let a=document.createElement("div");a.innerHTML="Viscosity",a.style.height="50px",a.style.width="100px",i.appendChild(a);let u=document.createElement("input");u.type="range",u.min="0.000000",u.max="0.0001",u.step="0.0000001",u.oninput=()=>{let t=+u.value;e.fluid.visc=t},a.appendChild(u);let c=document.createElement("div");c.innerHTML="rotation",c.style.height="50px",c.style.width="100px",i.appendChild(c);let m=document.createElement("input");m.type="range",m.min="0.000000",m.max="360",m.step="0.0000001",m.oninput=()=>{let t=+m.value;e.rotation(t)},c.appendChild(m);let f=document.createElement("div");f.innerHTML="rotation",f.style.height="50px",f.style.width="100px",e.divText=f,i.appendChild(f);let p=document.createElement("div");p.innerHTML="Show Vec",p.style.height="50px",p.style.width="100px",i.appendChild(p);let g=document.createElement("input");g.type="checkbox",g.onchange=()=>{e.showVec=!e.showVec},p.appendChild(g);let y=document.createElement("button");y.innerHTML="Json",y.style.height="20px",y.style.width="50px",y.onclick=()=>{e.toJson()},i.appendChild(y);let v=document.createElement("button");v.innerHTML="obj",v.style.height="20px",v.style.width="50px",v.onclick=()=>{e.toObj()},i.appendChild(v);let C=document.createElement("button");C.innerHTML="png",C.style.height="20px",C.style.width="50px",C.onclick=()=>{e.toPng()},i.appendChild(C);let w=document.createElement("div");w.innerHTML="Ref:<br>Fluid Simulation <br>By Daniel Shiffman",w.style.height="50px",w.style.width="300px",w.style.fontSize="14px",i.appendChild(w)};var c=i(88876);class m{importImg(t){this.url=t,(0,c.getImgFromURL)(t).then(t=>{t&&(this.img=t,t.onload=()=>{let t=document.createElement("canvas").getContext("2d");if(t){t.drawImage(this.img,0,0,this.fluid.N,this.fluid.N);let e=t.getImageData(0,0,this.fluid.N,this.fluid.N);if(e)for(let t=0;t<this.fluid.N;++t)for(let i=0;i<this.fluid.N;++i)e.data[(i+this.fluid.N*t)*4]<200&&this.fluid.cellFixed.push([i,t])}},this.init())})}initUI(t){u(t,this),this.emmiters.push([Math.floor(.5*this.fluid.N),Math.floor(.5*this.fluid.N)])}init(){this.fluid=new a(.02,0,1e-7),this.emmiters=[],this.emmiters.push([Math.floor(.5*this.fluid.N),Math.floor(.5*this.fluid.N)]),this.activated=!0}render(t){this.activated&&this.RenderIndependentCanvas(t)}RenderIndependentCanvas(t){for(let t=0;t<this.emmiters.length;++t){let e=this.emmiters[t][0],i=this.emmiters[t][1];for(let t=-1;t<=1;t++)for(let s=-1;s<=1;s++)this.fluid.addDensity(e+t,i+s,5*Math.random())}for(let t=0;t<this.emmiters.length;++t){let e=this.emmiters[t][0],i=this.emmiters[t][1];for(let t=0;t<2;t++)this.fluid.addVelocity(e,i,this.xx,this.yy)}this.fluid.step(),this.fluid.renderD(t),this.showVec&&this.fluid.renderV(t)}mouseClick(t,e){let i=Math.floor(t/this.fluid.SCALE),s=Math.floor(e/this.fluid.SCALE);this.emmiters.push([i,s])}mouseDrag(t,e){let i=Math.floor(t/this.fluid.SCALE),s=Math.floor(e/this.fluid.SCALE);this.fluid.cellFixed.push([i,s])}rotation(t){let e=t*Math.PI/180;this.xx=Math.cos(e),this.yy=Math.sin(e)}mouseMove(t,e){let i=Math.floor(t/this.fluid.SCALE),s=Math.floor(e/this.fluid.SCALE),n=this.fluid.density[i+s*this.fluid.N];n&&(this.divText.innerHTML="".concat(n))}toJson(){let t=[];for(let e=0;e<this.fluid.N;e++)for(let i=0;i<this.fluid.N;i++){let s=this.fluid.density[r(e,i,this.fluid.N)],n=e*this.fluid.SCALE,o=i*this.fluid.SCALE;t.push({x:n,y:o,density:s})}f(JSON.stringify(t))}toPng(){}toObj(){}constructor(t,e){let i;this.t=0,this.vecs=[],this.emmiters=[],this.xx=1,this.yy=1,this.activated=!1,this.showVec=!1,this.url="",this.init(),this.initUI(e),i="https://raw.githubusercontent.com/NamjuLee/data/master/img/Boston_02.jpg",this.importImg(i)}}let f=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"download",i=document.createElement("a");i.href="data:application/json;charset=utf-8,"+encodeURIComponent(t),i.download="".concat(e),i.click()};class p{destroy(){try{for(;this.divHost&&this.divHost.lastElementChild;){let t=this.divHost.lastElementChild;this.divHost.removeChild(t)}}catch(t){console.error("Error removing child elements:",t)}}constructor(t){this.divHost=document.getElementById(t),this.divHost.style.display="flex",this.divHost.style.alignItems="center";let e=document.createElement("div");e.style.marginLeft="auto",e.style.marginRight="auto",e.style.backgroundColor="rgba(0,0,0,0.1)",e.style.width="100%",e.style.height="600px",e.style.display="flex",this.divHost.appendChild(e);let i=document.createElement("div");i.style.marginLeft="auto",i.style.marginRight="auto",i.style.width="200px",i.style.height="600px",i.style.marginLeft="50px",e.appendChild(i);let s=document.createElement("div");s.style.marginLeft="auto",s.style.marginRight="auto",s.style.width="100%",s.style.height="600px",e.appendChild(s),this.renderer=new g(s,i)}}class g extends c.RendererCanvas{render(t){this.fluidSystem.render(t)}mouseClick(t,e){this.fluidSystem.mouseClick(t,e)}mouseDrag(t,e){this.fluidSystem.mouseDrag(t,e)}mouseMove(t,e){this.fluidSystem.mouseMove(t,e)}constructor(t,e){super(t),this.canvas.style.position="relative",this.canvas.style.width="100%",this.canvas.style.height="100%",this.fluidSystem=new m(t,e),this.start()}}}}]);
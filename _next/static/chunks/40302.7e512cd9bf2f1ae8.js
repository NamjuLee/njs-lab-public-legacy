"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40302,57112,80375,67429],{57112:function(t,s,r){r.r(s),r.d(s,{Matrix4:function(){return i}});class i{static identity(){let t=new Float32Array(16);return t[0]=t[5]=t[10]=t[15]=1,t}static perspective(t,s,r,i,a){let e=1/Math.tan(s/2),n=1/(i-a);t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+i)*n,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*i*n,t[15]=0}static ortho(t,s,r,i,a,e,n){let h=1/(s-r),o=1/(i-a),m=1/(e-n);t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*m,t[11]=0,t[12]=(s+r)*h,t[13]=(a+i)*o,t[14]=(n+e)*m,t[15]=1}static transpose(t,s){if(t===s){let r=s[1],i=s[2],a=s[3],e=s[6],n=s[7],h=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=r,t[6]=s[9],t[7]=s[13],t[8]=i,t[9]=e,t[11]=s[14],t[12]=a,t[13]=n,t[14]=h}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t}static normalMat3(t,s){let r=s[0],i=s[1],a=s[2],e=s[3],n=s[4],h=s[5],o=s[6],m=s[7],c=s[8],u=s[9],l=s[10],f=s[11],w=s[12],d=s[13],p=s[14],v=s[15],M=r*h-i*n,x=r*o-a*n,g=r*m-e*n,y=i*o-a*h,R=i*m-e*h,V=a*m-e*o,z=c*d-u*w,X=c*p-l*w,Y=c*v-f*w,E=u*p-l*d,A=u*v-f*d,F=l*v-f*p,T=M*F-x*A+g*E+y*Y-R*X+V*z;return T?(T=1/T,t[0]=(h*F-o*A+m*E)*T,t[1]=(o*Y-n*F-m*X)*T,t[2]=(n*A-h*Y+m*z)*T,t[3]=(a*A-i*F-e*E)*T,t[4]=(r*F-a*Y+e*X)*T,t[5]=(i*Y-r*A-e*z)*T,t[6]=(d*V-p*R+v*y)*T,t[7]=(p*g-w*V-v*x)*T,t[8]=(w*R-d*g+v*M)*T,t):null}static multiplyVector(t,s){let r=s[0],i=s[1],a=s[2],e=s[3],n=t[0],h=t[1],o=t[2],m=t[3],c=t[4],u=t[5],l=t[6],f=t[7],w=t[8],d=t[9],p=t[10],v=t[11];return[r*n+i*c+a*w+e*t[12],r*h+i*u+a*d+e*t[13],r*o+i*l+a*p+e*t[14],r*m+i*f+a*v+e*t[15]]}static transformVec4(t,s,r){return t[0]=r[0]*s[0]+r[4]*s[1]+r[8]*s[2]+r[12]*s[3],t[1]=r[1]*s[0]+r[5]*s[1]+r[9]*s[2]+r[13]*s[3],t[2]=r[2]*s[0]+r[6]*s[1]+r[10]*s[2]+r[14]*s[3],t[3]=r[3]*s[0]+r[7]*s[1]+r[11]*s[2]+r[15]*s[3],t}static mult(t,s,r){let i=s[0],a=s[1],e=s[2],n=s[3],h=s[4],o=s[5],m=s[6],c=s[7],u=s[8],l=s[9],f=s[10],w=s[11],d=s[12],p=s[13],v=s[14],M=s[15],x=r[0],g=r[1],y=r[2],R=r[3];return t[0]=x*i+g*h+y*u+R*d,t[1]=x*a+g*o+y*l+R*p,t[2]=x*e+g*m+y*f+R*v,t[3]=x*n+g*c+y*w+R*M,x=r[4],g=r[5],y=r[6],R=r[7],t[4]=x*i+g*h+y*u+R*d,t[5]=x*a+g*o+y*l+R*p,t[6]=x*e+g*m+y*f+R*v,t[7]=x*n+g*c+y*w+R*M,x=r[8],g=r[9],y=r[10],R=r[11],t[8]=x*i+g*h+y*u+R*d,t[9]=x*a+g*o+y*l+R*p,t[10]=x*e+g*m+y*f+R*v,t[11]=x*n+g*c+y*w+R*M,x=r[12],g=r[13],y=r[14],R=r[15],t[12]=x*i+g*h+y*u+R*d,t[13]=x*a+g*o+y*l+R*p,t[14]=x*e+g*m+y*f+R*v,t[15]=x*n+g*c+y*w+R*M,t}static scale(t,s,r,i){return t[0]*=s,t[1]*=s,t[2]*=s,t[3]*=s,t[4]*=r,t[5]*=r,t[6]*=r,t[7]*=r,t[8]*=i,t[9]*=i,t[10]*=i,t[11]*=i,t}static rotateY(t,s){let r=Math.sin(s),i=Math.cos(s),a=t[0],e=t[1],n=t[2],h=t[3],o=t[8],m=t[9],c=t[10],u=t[11];return t[0]=a*i-o*r,t[1]=e*i-m*r,t[2]=n*i-c*r,t[3]=h*i-u*r,t[8]=a*r+o*i,t[9]=e*r+m*i,t[10]=n*r+c*i,t[11]=h*r+u*i,t}static rotateX(t,s){let r=Math.sin(s),i=Math.cos(s),a=t[4],e=t[5],n=t[6],h=t[7],o=t[8],m=t[9],c=t[10],u=t[11];return t[4]=a*i+o*r,t[5]=e*i+m*r,t[6]=n*i+c*r,t[7]=h*i+u*r,t[8]=o*i-a*r,t[9]=m*i-e*r,t[10]=c*i-n*r,t[11]=u*i-h*r,t}static rotateZ(t,s){let r=Math.sin(s),i=Math.cos(s),a=t[0],e=t[1],n=t[2],h=t[3],o=t[4],m=t[5],c=t[6],u=t[7];return t[0]=a*i+o*r,t[1]=e*i+m*r,t[2]=n*i+c*r,t[3]=h*i+u*r,t[4]=o*i-a*r,t[5]=m*i-e*r,t[6]=c*i-n*r,t[7]=u*i-h*r,t}static rotate(t,s,r){let i=r[0],a=r[1],e=r[2],n=Math.sqrt(i*i+a*a+e*e),h,o,m,c,u,l,f,w,d,p,v,M,x,g,y,R,V,z,X,Y,E,A,F,T;return 1e-6>Math.abs(n)?null:(i*=n=1/n,a*=n,e*=n,h=Math.sin(s),m=1-(o=Math.cos(s)),c=t[0],u=t[1],l=t[2],f=t[3],w=t[4],d=t[5],p=t[6],v=t[7],M=t[8],x=t[9],g=t[10],y=t[11],R=i*i*m+o,V=a*i*m+e*h,z=e*i*m-a*h,X=i*a*m-e*h,Y=a*a*m+o,E=e*a*m+i*h,A=i*e*m+a*h,F=a*e*m-i*h,T=e*e*m+o,t[0]=c*R+w*V+M*z,t[1]=u*R+d*V+x*z,t[2]=l*R+p*V+g*z,t[3]=f*R+v*V+y*z,t[4]=c*X+w*Y+M*E,t[5]=u*X+d*Y+x*E,t[6]=l*X+p*Y+g*E,t[7]=f*X+v*Y+y*E,t[8]=c*A+w*F+M*T,t[9]=u*A+d*F+x*T,t[10]=l*A+p*F+g*T,t[11]=f*A+v*F+y*T,t)}static invert(t,s){void 0===s&&(s=t);let r=s[0],i=s[1],a=s[2],e=s[3],n=s[4],h=s[5],o=s[6],m=s[7],c=s[8],u=s[9],l=s[10],f=s[11],w=s[12],d=s[13],p=s[14],v=s[15],M=r*h-i*n,x=r*o-a*n,g=r*m-e*n,y=i*o-a*h,R=i*m-e*h,V=a*m-e*o,z=c*d-u*w,X=c*p-l*w,Y=c*v-f*w,E=u*p-l*d,A=u*v-f*d,F=l*v-f*p,T=M*F-x*A+g*E+y*Y-R*X+V*z;return!!T&&(T=1/T,t[0]=(h*F-o*A+m*E)*T,t[1]=(a*A-i*F-e*E)*T,t[2]=(d*V-p*R+v*y)*T,t[3]=(l*R-u*V-f*y)*T,t[4]=(o*Y-n*F-m*X)*T,t[5]=(r*F-a*Y+e*X)*T,t[6]=(p*g-w*V-v*x)*T,t[7]=(c*V-l*g+f*x)*T,t[8]=(n*A-h*Y+m*z)*T,t[9]=(i*Y-r*A-e*z)*T,t[10]=(w*R-d*g+v*M)*T,t[11]=(u*g-c*R-f*M)*T,t[12]=(h*X-n*E-o*z)*T,t[13]=(r*E-i*X+a*z)*T,t[14]=(d*x-w*y-p*M)*T,t[15]=(c*y-u*x+l*M)*T,!0)}static translate(t,s,r,i){t[12]=t[0]*s+t[4]*r+t[8]*i+t[12],t[13]=t[1]*s+t[5]*r+t[9]*i+t[13],t[14]=t[2]*s+t[6]*r+t[10]*i+t[14],t[15]=t[3]*s+t[7]*r+t[11]*i+t[15]}vtranslate(t){return i.translate(this.raw,t.x,t.y,t.z),this}translate(t,s,r){return i.translate(this.raw,t,s,r),this}rotateY(t){return i.rotateY(this.raw,t),this}rotateX(t){return i.rotateX(this.raw,t),this}rotateZ(t){return i.rotateZ(this.raw,t),this}vscale(t){return i.scale(this.raw,t.x,t.y,t.z),this}scale(t,s,r){return i.scale(this.raw,t,s,r),this}invert(){return i.invert(this.raw),this}resetRotation(){for(let t=0;t<this.raw.length;t++)t>=12&&t<=14||(this.raw[t]=t%5==0?1:0);return this}reset(){for(let t=0;t<this.raw.length;t++)this.raw[t]=t%5==0?1:0;return this}constructor(){this.raw=i.identity()}}},80375:function(t,s,r){r.r(s),r.d(s,{Vector3:function(){return i}});class i{magnitude(t){if(void 0===t)return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);let s=t.x-this.x,r=t.y-this.y,i=t.y-this.z;return Math.sqrt(s*s+r*r+i*i)}normalize(){let t=this.magnitude();return this.x/=t,this.y/=t,this.z/=t,this}set(t,s,r){return this.x=t,this.y=s,this.z=r,this}multiScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}getArray(){return[this.x,this.y,this.z]}getFloatArray(){return new Float32Array([this.x,this.y,this.z])}clone(){return new i(this.x,this.y,this.z)}constructor(t=0,s=0,r=0){this.x=t,this.y=s,this.z=r}}},40302:function(t,s,r){r.r(s),r.d(s,{CAMERA_MODE:function(){return a},Camera:function(){return h},CameraController:function(){return o}});var i,a,e=r(57112),n=r(67429);(i=a||(a={}))[i.FREE=0]="FREE",i[i.ORBIT=1]="ORBIT";class h{panX(t){1!==this.mode&&(this.updateViewMatrix(),this.transform.position.x+=this.transform.right[0]*t,this.transform.position.y+=this.transform.right[1]*t,this.transform.position.z+=this.transform.right[2]*t)}panY(t){this.updateViewMatrix(),this.transform.position.y+=this.transform.up[1]*t,1!==this.mode&&(this.transform.position.x+=this.transform.up[0]*t,this.transform.position.z+=this.transform.up[2]*t)}panZ(t){this.updateViewMatrix(),1===this.mode?this.transform.position.z+=t:(this.transform.position.x+=this.transform.forward[0]*t,this.transform.position.y+=this.transform.forward[1]*t,this.transform.position.z+=this.transform.forward[2]*t)}updateViewMatrix(){return 0===this.mode?this.transform.matView.reset().vtranslate(this.transform.position).rotateX(this.transform.rotation.x*n.Transform.deg2Rad).rotateY(this.transform.rotation.y*n.Transform.deg2Rad):this.transform.matView.reset().rotateX(this.transform.rotation.x*n.Transform.deg2Rad).rotateY(this.transform.rotation.y*n.Transform.deg2Rad).vtranslate(this.transform.position),this.transform.updateDirection(),e.Matrix4.invert(this.viewMatrix,this.transform.matView.raw),this.viewMatrix}GetTranslatelessMatrix(){let t=new Float32Array(this.viewMatrix);return t[12]=t[13]=t[14]=0,t}constructor(t,s=45,r=.1,i=100){this.projectionMatrix=new Float32Array(16);let a=t.canvas.width/t.canvas.height;e.Matrix4.perspective(this.projectionMatrix,s||45,a,r||.1,i||100),this.transform=new n.Transform,this.viewMatrix=new Float32Array(16),this.mode=1}}class o{getMouseVec2(t){return{x:t.pageX-this.offsetX,y:t.pageY-this.offsetY}}setEulerDegrees(t,s,r){return this.euler.set(t*n.Transform.deg2Rad,s*n.Transform.deg2Rad,r*n.Transform.deg2Rad),this}onMouseDown(t){this.initX=this.prevX=t.pageX-this.offsetX,this.initY=this.prevY=t.pageY-this.offsetY,this.canvas.addEventListener("mouseup",this.onUpHandler),this.canvas.addEventListener("mousemove",this.onMoveHandler)}onMouseUp(t){this.canvas.removeEventListener("mouseup",this.onUpHandler),this.canvas.removeEventListener("mousemove",this.onMoveHandler)}onMouseWheel(t){let s=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));this.camera.panZ(this.zoomRate/this.canvas.height*s)}onMouseMove(t){let s=t.pageX-this.offsetX,r=t.pageY-this.offsetY,i=s-this.prevX,a=r-this.prevY;t.shiftKey?(this.camera.panX(-(this.panRate/this.canvas.width*i)),this.camera.panY(this.panRate/this.canvas.height*a)):(this.camera.transform.rotation.y+=this.rotateRate/this.canvas.width*i,this.camera.transform.rotation.x+=this.rotateRate/this.canvas.height*a),this.prevX=s,this.prevY=r}constructor(t,s){this.canvas=t.canvas,this.camera=s,this.rotateRate=-300,this.panRate=5,this.zoomRate=200,this.yRotateRate=this.rotateRate/this.canvas.width*Math.PI/180,this.xRotateRate=this.rotateRate/this.canvas.height*Math.PI/180,this.xPanRate=this.panRate/this.canvas.width,this.yPanRate=this.panRate/this.canvas.height,this.zPanRate=this.zoomRate/this.canvas.height,this.offsetX=10,this.offsetY=10,this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.onUpHandler=t=>this.onMouseUp(t),this.onMoveHandler=t=>{this.onMouseMove(t)},this.canvas.addEventListener("mousedown",t=>{this.onMouseDown(t)}),this.canvas.addEventListener("mousewheel",t=>{this.onMouseWheel(t)})}}},67429:function(t,s,r){r.r(s),r.d(s,{Transform:function(){return e}});var i=r(80375),a=r(57112);class e{updateMatrix(){return this.matView.reset().vtranslate(this.position).rotateX(this.rotation.x*e.deg2Rad).rotateZ(this.rotation.z*e.deg2Rad).rotateY(this.rotation.y*e.deg2Rad).vscale(this.scale),a.Matrix4.normalMat3(this.matNormal,this.matView.raw),a.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),a.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),a.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this.matView.raw}updateDirection(){return a.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),a.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),a.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this}getViewMatrix(){return this.matView.raw}getNormalMatrix(){return this.matNormal}reset(){this.position.set(0,0,0),this.scale.set(1,1,1),this.rotation.set(0,0,0)}constructor(){this.position=new i.Vector3(0,0,0),this.scale=new i.Vector3(1,1,1),this.rotation=new i.Vector3(0,0,0),this.matView=new a.Matrix4,this.matNormal=new Float32Array(9),this.forward=new Float32Array(4),this.up=new Float32Array(4),this.right=new Float32Array(4)}}e.deg2Rad=Math.PI/180}}]);
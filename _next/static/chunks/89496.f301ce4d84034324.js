(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89496,53469,59980,41173],{75410:function(){},48628:function(){},31601:function(){},67792:function(){},34977:function(){},75042:function(){},56871:function(t,e,i){"use strict";i.d(e,{L:function(){return s}});class s{sendData(t){}constructor(t,e){this.firebaseConfig={apiKey:"AIzaSyA1yKg85WGZoshbk8xR23cXr3SwpqXVgIc",authDomain:"njs-data.firebaseapp.com",projectId:"njs-data",storageBucket:"njs-data.appspot.com",messagingSenderId:"635991152770",appId:"1:635991152770:web:722f5356e0d14cea50fc9b"},this.getData=t=>{let e=t.val();for(let t in e);},this.getError=t=>{console.error(t)}}}},53469:function(t,e,i){"use strict";i.r(e),i.d(e,{CanvasSD:function(){return s}});class s{InitEvent(){this.canvas.onmousedown=t=>{this.isDown=!0,this.vs=[]},this.canvas.onmouseup=t=>{this.isDown=!1;let e=this.app.implementation.smartDrawing.Predict(this.vs);this.div.innerHTML="class: "+e},this.canvas.onmousemove=t=>{this.isDown&&(this.vs.push([t.offsetX,t.offsetY]),this.Loop())}}Loop(){if(this.UpdateBG(),0!==this.vs.length){this.ctx.lineWidth=2,this.ctx.fillStyle="rgba(250, 50, 15, 0.2)",this.ctx.strokeStyle="rgba(250, 50, 15, 0.5)",this.ctx.beginPath(),this.ctx.moveTo(this.vs[0][0],this.vs[0][1]);for(let t=1;t<this.vs.length;++t)this.ctx.lineTo(this.vs[t][0],this.vs[t][1]);for(let t of(this.ctx.stroke(),this.vs))this.ctx.beginPath(),this.ctx.arc(t[0],t[1],this.radius,0,6.28),this.ctx.closePath(),this.ctx.fill()}}Clear(){this.vs=[],this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.UpdateBG()}UpdateBG(){this.ctx.beginPath(),this.ctx.rect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fillStyle="#ddaadd",this.ctx.fill()}constructor(t){this.vs=[],this.isDown=!1,this.radius=3,this.app=t;let e=document.getElementById("classText");e&&(this.div=e),this.canvas=document.createElement("canvas"),this.app.host&&(this.app.host.appendChild(this.canvas),this.canvas.width=300,this.canvas.height=300),this.canvas.style.background="#ffffff",this.canvas.style.margin="20px",this.canvas.style.zIndex="1";let i=this.canvas.getContext("2d");null!==i&&(this.ctx=i),this.app.Init(this.ctx),this.InitEvent(),this.Loop()}}},27042:function(t,e,i){"use strict";i.r(e),i.d(e,{SmartDrawing:function(){return a}});var s=i(88405),n=i(98594),o=i(56871);class a{callback(t){let e=t.val();for(let t in console.log("callback -------- get data",e),e)console.log(t,e[t])}AppendDiv(){let t=document.getElementById("main"),e=document.createElement("div");t&&e&&(this.divText=e,t.insertBefore(this.divText,null),this.divText.style.marginLeft="20px")}async LoadModelFromJsons(){}async LoadModelFromPublic(){let t="https://raw.githubusercontent.com/NamjuLee/data/master/smart-drawing/model/modelLogisticRegression0/model.json";this.modelLogisticRegression=await this.LoadModelFromPath(t),t="https://raw.githubusercontent.com/NamjuLee/data/master/smart-drawing/model/modelMultiClassification0/model.json",this.modelMultiClassification=await this.LoadModelFromPath(t)}async LoadModelFromPath(t){return await s.loadLayersModel(t)}PredictByLogisticRegression(t){if(void 0===this.modelLogisticRegression){console.error("no model loaded");return}return(0,s.tidy)(()=>{let e=(0,s.tensor2d)([t]),i=this.modelLogisticRegression.predict(e).dataSync();return this.PredictionPostProcessingLogisticRegression(i[0])})}PredictByMultiClassification(t){if(void 0===this.modelMultiClassification){console.error("no model loaded");return}return(0,s.tidy)(()=>{let e=s.tensor2d([t]),i=this.modelMultiClassification.predict(e);{let t=Array.from(i.dataSync()),e=this.GetIndexBySortDescending(t),s=[];for(let i of e){let e=t[i],n="class:"+a.CLASS_TYPE[i]+", probability:"+e.toFixed(5);console.log(n),s.push(n)}this.UpdateDivWithText(s)}let n=i.argMax(-1).dataSync()[0];return a.CLASS_TYPE[n]})}UpdateDivWithText(t){let e="<p>*** FROM DEEP LEARNING MODEL B *** </p>";for(let i=0;i<t.length;++i)e+="<p> ".concat(t[i],"</p>");this.divText.innerHTML=e}PredictionPostProcessingLogisticRegression(t){return a.CLASS_TYPE[Math.floor(t+.5)]}GetIndexBySortDescending(t){let e=t.length,i=Array(e);for(var s=0;s<e;++s)i[s]=s;return i.sort((e,i)=>t[e]>t[i]?-1:t[e]<t[i]?1:0),i}Remove(){}Predict(t){let e=[];for(let i of t)e.push(new n.NVector3(i[0],i[1],0));let i=n.NVector3.ComputeDotProducts(e),s=this.GetInterpolatedArray(i,501);console.log("*** FROM DEEP LEARNING MODELS ***");let o=this.PredictByMultiClassification(s);return console.debug("pridiction:%c ".concat(o," from MC model"),"background: #4e2c7e; color: white"),this.firebaseWrapper.sendData({class:o,vec:t}),o}LinearInterpolate(t,e,i){return t+(e-t)*i}GetInterpolatedArray(t,e){let i=[],s=(t.length-1)/(e-1);i[0]=t[0];for(let n=1;n<e-1;n++){let e=n*s,o=+Math.floor(e).toFixed(),a=+Math.ceil(e).toFixed(),r=e-o;i[n]=this.LinearInterpolate(t[o],t[a],r)}return i[e-1]=t[t.length-1],i}constructor(){this.AppendDiv(),this.LoadModelFromPublic(),console.log(s.version),this.firebaseWrapper=new o.L("smartDrawing",this.callback)}}a.CLASS_TYPE={0:"CIRCLE",1:"TRI-GON",2:"ARROW_SINGLE",3:"ARROW_DOUBLE",4:"RECTANGLE",5:"TEXT",6:"CURVE",7:"HEART",8:"CLOUD"}},69651:function(t,e,i){"use strict";i.r(e),i.d(e,{Implementation:function(){return n}});var s=i(27042);class n{constructor(t){this.app=t,this.smartDrawing=new s.SmartDrawing}}},93153:function(t,e,i){"use strict";i.r(e),i.d(e,{AppML:function(){return o},Solution:function(){return a}});var s=i(53469),n=i(69651);class o{static Init(t){new o(t)}InitHTML(){let t=document.createElement("button");t.style.width="100px",t.style.height="20px",t.style.marginLeft="20px",t.style.zIndex="5",t.name="Clear",t.innerText="Clear",t.value="Clear",t.onclick=()=>{console.log(this),this.canvasSD.Clear()},this.host.appendChild(t),this.divText=document.createElement("div"),this.divText.id="classText",this.divText.style.zIndex="5",this.divText.innerText="class: ",this.divText.style.marginLeft="20px",this.host.appendChild(this.divText)}Init(t){console.log("this is init...")}Clear(){this.canvasSD.Clear()}constructor(t="main"){console.log("id: "+t+", App Init!!!!!");let e=document.getElementById(t);e&&(this.host=e),this.InitHTML(),this.canvasSD=new s.CanvasSD(this),this.implementation=new n.Implementation(this)}}class a{destroy(){if(this.divHost)try{for(;this.divHost.firstChild;)this.divHost.removeChild(this.divHost.firstChild)}catch(t){console.error("Error in destroy method:",t)}else console.warn("divHost is undefined in destroy method")}constructor(t){this.divHost=document.getElementById(t),o.Init(t)}}}}]);
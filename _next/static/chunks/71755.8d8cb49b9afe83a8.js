"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71755],{20100:function(e,t,i){var o=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var n=i(84552),r=new Map,s=/^(rgba|hsla)\((\d+),\s*(\d+%?),\s*(\d+%?)(?:,\s*(\d+(?:\.\d+)?))?\)$/;t.parseColor=function(e){if(r.has(e))return r.get(e);var t=function(e){var t=s.exec(e);if(t){var i=o(t,6),n=(i[0],i[1]),r=i[2],a=i[3],l=i[4],c=i[5];return{colorString:n.replace("a","")+"("+r+","+a+","+l+")",opacity:parseFloat(c)}}return{colorString:e,opacity:1}}(e),i=t.colorString,a=t.opacity,l=new n.Color(i),c={r:l.r,g:l.g,b:l.b,opacity:a};return r.set(e,c),c}},19249:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RGB_NUM_ELEMENTS=3,t.RGBA_NUM_ELEMENTS=4,t.XYZ_NUM_ELEMENTS=3,t.UV_NUM_ELEMENTS=2,t.INDEX_NUM_ELEMENTS=1,t.SCATTER_PLOT_CUBE_LENGTH=2},63068:function(e,t){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o="Points must be an array of either 2 or 3 dimensional number arrays",n=function(){function e(e,t){void 0===t&&(t=[]),this.points=e,this.metadata=t;var n,r,s=e[0].length;if(!(2===s||3===s))throw Error(o);try{for(var a=i(e),l=a.next();!l.done;l=a.next()){var c=l.value;if(s!==c.length)throw Error(o)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}this.dimensions=s}return e.prototype.setSpriteMetadata=function(e){this.spriteMetadata=e},e}();t.Dataset=n},71755:function(e,t,i){var o=i(20327);t.cq=o.ScatterGL,i(63068).Dataset},64310:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,i){this.bound=e,this.cellWidth=t,this.cellHeight=i,this.numHorizCells=Math.ceil(this.boundWidth(e)/t),this.numVertCells=Math.ceil(this.boundHeight(e)/i),this.grid=Array(this.numHorizCells*this.numVertCells)}return e.prototype.boundWidth=function(e){return e.hiX-e.loX},e.prototype.boundHeight=function(e){return e.hiY-e.loY},e.prototype.boundsIntersect=function(e,t){return!(e.loX>t.hiX||e.loY>t.hiY||e.hiX<t.loX||e.hiY<t.loY)},e.prototype.insert=function(e,t){if(void 0===t&&(t=!1),e.hiX<this.bound.loX||e.loX>this.bound.hiX||e.hiY<this.bound.loY||e.loY>this.bound.hiY)return!1;for(var i=this.getCellX(e.loX),o=this.getCellX(e.hiX),n=this.getCellY(e.loY),r=this.getCellY(e.hiY),s=n*this.numHorizCells+i,a=s,l=n;l<=r;l++){for(var c=i;c<=o;c++){var h=this.grid[a++];if(h){for(var u=0;u<h.length;u++)if(this.boundsIntersect(e,h[u]))return!1}}a+=this.numHorizCells-(o-i+1)}if(t)return!0;a=s;for(var l=n;l<=r;l++){for(var c=i;c<=o;c++)this.grid[a]?this.grid[a].push(e):this.grid[a]=[e],a++;a+=this.numHorizCells-(o-i+1)}return!0},e.prototype.getCellX=function(e){return Math.floor((e-this.bound.loX)/this.cellWidth)},e.prototype.getCellY=function(e){return Math.floor((e-this.bound.loY)/this.cellHeight)},e}();t.CollisionGrid=i},30104:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.LabelRenderParams=function(e,t,i,o,n,r,s){this.pointIndices=e,this.labelStrings=t,this.scaleFactors=i,this.useSceneOpacityFlags=o,this.defaultFontSize=n,this.fillColors=r,this.strokeColors=s},(i=t.CameraType||(t.CameraType={}))[i.Perspective=0]="Perspective",i[i.Orthographic=1]="Orthographic",t.RenderContext=function(e,t,i,o,n,r,s,a,l,c,h,u,p,d){this.camera=e,this.cameraType=t,this.cameraTarget=i,this.screenWidth=o,this.screenHeight=n,this.nearestCameraSpacePointZ=r,this.farthestCameraSpacePointZ=s,this.backgroundColor=a,this.pointColors=l,this.pointScaleFactors=c,this.labels=h,this.polylineColors=u,this.polylineOpacities=p,this.polylineWidths=d}},20327:function(e,t,i){var o=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=i(81255),a=i(20100),l=i(63068),c=i(30104),h=i(68281),u=i(99622),p=i(19249),d=i(45934),f=i(13558),m=i(12230),y=i(75494),v=function(){function e(e,t){var i=this;void 0===t&&(t={}),this.pointColorer=null,this.sequences=[],this.renderMode="POINT",this.rotateOnStart=!0,this.selectEnabled=!0,this.showLabelsOnHover=!0,this.hoverPointIndex=null,this.selectedPointIndices=new Set,this.clickCallback=function(){},this.hoverCallback=function(){},this.selectCallback=function(){},this.cameraMoveCallback=function(){},this.onHover=function(e){i.hoverCallback(e),i.hoverPointIndex=e,i.updateScatterPlotAttributes(),i.renderScatterPlot()},this.onClick=function(e){i.clickCallback(e)},this.select=function(e){i.selectEnabled&&(i.selectedPointIndices=new Set(e),i.updateScatterPlotAttributes(),i.renderScatterPlot())},this.onSelect=function(e){i.selectEnabled&&(i.selectCallback(e),i.select(e))},this.containerElement=e,this.styles=h.makeStyles(t.styles),this.setParameters(t),this.scatterPlot=new s.ScatterPlot(e,{camera:t.camera,onClick:this.onClick,onHover:this.onHover,onSelect:this.onSelect,selectEnabled:this.selectEnabled,styles:this.styles,orbitControlParams:t.orbitControls}),this.scatterPlot.onCameraMove(this.cameraMoveCallback)}return e.prototype.setParameters=function(e){void 0!==e.onClick&&(this.clickCallback=e.onClick),void 0!==e.onHover&&(this.hoverCallback=e.onHover),void 0!==e.onSelect&&(this.selectCallback=e.onSelect),void 0!==e.onCameraMove&&(this.cameraMoveCallback=e.onCameraMove),void 0!==e.pointColorer&&(this.pointColorer=e.pointColorer),void 0!==e.renderMode&&(this.renderMode=e.renderMode),void 0!==e.rotateOnStart&&(this.rotateOnStart=e.rotateOnStart),void 0!==e.selectEnabled&&(this.selectEnabled=e.selectEnabled),void 0!==e.showLabelsOnHover&&(this.showLabelsOnHover=e.showLabelsOnHover)},e.prototype.render=function(e){this.updateDataset(e),this.clearVisualizers(),this.setVisualizers(),this.rotateOnStart&&this.scatterPlot.startOrbitAnimation()},e.prototype.clearVisualizers=function(){this.canvasLabelsVisualizer=void 0,this.labels3DVisualizer=void 0,this.pointVisualizer=void 0,this.polylineVisualizer=void 0,this.spritesheetVisualizer=void 0,this.scatterPlot.disposeAllVisualizers()},e.prototype.renderScatterPlot=function(){this.dataset&&this.scatterPlot.render()},e.prototype.resetZoom=function(){this.scatterPlot.resetZoom()},e.prototype.setRenderMode=function(e){this.renderMode=e,this.setVisualizers(),this.updateScatterPlotAttributes(),this.updateScatterPlotPositions()},e.prototype.setTextRenderMode=function(){this.setRenderMode("TEXT"),this.renderScatterPlot()},e.prototype.setPointRenderMode=function(){this.setRenderMode("POINT"),this.renderScatterPlot()},e.prototype.setSpriteRenderMode=function(){this.dataset&&this.dataset.spriteMetadata&&(this.setRenderMode("SPRITE"),this.renderScatterPlot())},e.prototype.setSequences=function(e){this.sequences=e,this.updatePolylineAttributes(),this.setVisualizers(),this.renderScatterPlot()},e.prototype.setPanMode=function(){this.scatterPlot.setInteractionMode("PAN")},e.prototype.setSelectMode=function(){this.scatterPlot.setInteractionMode("SELECT")},e.prototype.setDimensions=function(e){var t=e<2||e>3,i=this.dataset&&e>this.dataset.dimensions;if(t||i)throw RangeError("Setting invalid dimensionality");this.scatterPlot.setDimensions(e),this.renderScatterPlot()},e.prototype.setPointColorer=function(e){this.pointColorer=e,this.updateScatterPlotAttributes(),this.renderScatterPlot()},e.prototype.callPointColorer=function(e,t){return e(t,this.selectedPointIndices,this.hoverPointIndex)},e.prototype.setHoverPointIndex=function(e){this.hoverPointIndex=e,this.updateScatterPlotAttributes(),this.scatterPlot.orbitIsAnimating()||this.renderScatterPlot()},e.prototype.resize=function(){this.scatterPlot.resize()},e.prototype.updateDataset=function(e){this.setDataset(e),this.scatterPlot.setDimensions(e.dimensions),this.updateScatterPlotAttributes(),this.updateScatterPlotPositions(),this.renderScatterPlot()},e.prototype.isOrbiting=function(){return this.scatterPlot.orbitIsAnimating()},e.prototype.startOrbitAnimation=function(){this.scatterPlot.startOrbitAnimation()},e.prototype.stopOrbitAnimation=function(){this.scatterPlot.stopOrbitAnimation()},e.prototype.setDataset=function(e){this.dataset=e,this.labels3DVisualizer&&this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray())},e.prototype.updateScatterPlotPositions=function(){var e=this.dataset;if(e){var t=this.generatePointPositionArray(e);this.scatterPlot.setPointPositions(t)}},e.prototype.updateScatterPlotAttributes=function(){var e=this.dataset;if(e){var t=this.generatePointColorArray(e),i=this.generatePointScaleFactorArray(e),o=this.generateVisibleLabelRenderParams();this.scatterPlot.setPointColors(t),this.scatterPlot.setPointScaleFactors(i),this.scatterPlot.setLabels(o)}},e.prototype.updatePolylineAttributes=function(){var e=this.dataset;if(e){var t=this.generateLineSegmentColorMap(e),i=this.generateLineSegmentOpacityArray(e),o=this.generateLineSegmentWidthArray(e);this.scatterPlot.setPolylineColors(t),this.scatterPlot.setPolylineOpacities(i),this.scatterPlot.setPolylineWidths(o)}},e.prototype.generatePointPositionArray=function(e){var t=[0,0],i=[0,0],o=[0,0];t=u.extent(e.points.map(function(e){return e[0]})),i=u.extent(e.points.map(function(e){return e[1]})),3===e.dimensions&&(o=u.extent(e.points.map(function(e){return e[2]})));var n=function(e){return Math.abs(e[1]-e[0])},r=n(t),s=n(i),a=n(o),l=Math.max(r,s,a),c=p.SCATTER_PLOT_CUBE_LENGTH/2,h=function(e,t){return[-(e/l*t),e/l*t]},d=h(r,c),f=h(s,c),m=h(a,c),y=new Float32Array(3*e.points.length),v=0;return e.points.forEach(function(n,r){var s=e.points[r];y[v++]=u.scaleLinear(s[0],t,d),y[v++]=u.scaleLinear(s[1],i,f),3===e.dimensions?y[v++]=u.scaleLinear(s[2],o,m):y[v++]=0}),y},e.prototype.generateVisibleLabelRenderParams=function(){var e=this.hoverPointIndex,t=this.selectedPointIndices,i=this.styles,o=null!==e?1:0,r=new Uint32Array(o),s=new Float32Array(o),a=new Int8Array(o),l=new Uint8Array(3*o),h=new Uint8Array(3*o),p=[];s.fill(i.label.scaleDefault),a.fill(1);var d=0;if(null!==e){p.push(this.getLabelText(e)),r[d]=e,s[d]=i.label.scaleLarge,a[d]=0;var f=u.styleRgbFromHexColor(i.label.fillColorHover);u.packRgbIntoUint8Array(l,d,f[0],f[1],f[2]);var m=u.styleRgbFromHexColor(i.label.strokeColorHover);u.packRgbIntoUint8Array(h,d,m[0],m[1],m[1]),++d}var f=u.styleRgbFromHexColor(i.label.fillColorSelected),m=u.styleRgbFromHexColor(i.label.strokeColorSelected);if(1===t.size){var y=n(t)[0];p.push(this.getLabelText(y)),r[d]=y,s[d]=i.label.scaleLarge,a[d]=0,u.packRgbIntoUint8Array(l,d,f[0],f[1],f[2]),u.packRgbIntoUint8Array(h,d,m[0],m[1],m[2])}return new c.LabelRenderParams(new Float32Array(r),p,s,a,i.label.fontSize,l,h)},e.prototype.generatePointScaleFactorArray=function(e){var t,i,o=this.hoverPointIndex,n=this.selectedPointIndices,s=this.styles.point,a=s.scaleDefault,l=s.scaleSelected,c=s.scaleHover,h=new Float32Array(e.points.length);h.fill(a),n.size;try{for(var u=r(n.values()),p=u.next();!p.done;p=u.next())h[p.value]=l}catch(e){t={error:e}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}return null!=o&&(h[o]=c),h},e.prototype.generatePointColorArray=function(e){var t,i,o=this.hoverPointIndex,n=this.pointColorer,s=this.selectedPointIndices,l=this.styles.point,c=l.colorHover,h=l.colorNoSelection,u=l.colorSelected,d=l.colorUnselected,f=new Float32Array(e.points.length*p.RGBA_NUM_ELEMENTS),m=d,y=h;"TEXT"===this.renderMode&&(m=this.styles.label3D.colorUnselected,y=this.styles.label3D.colorNoSelection),"SPRITE"===this.renderMode&&(m=this.styles.sprites.colorUnselected,y=this.styles.sprites.colorNoSelection);var v=e.points.length,g=this.selectedPointIndices.size;if(n)for(var b=0,P=0;P<v;++P){var S=a.parseColor(this.callPointColorer(n,P)||y);f[b++]=S.r,f[b++]=S.g,f[b++]=S.b,f[b++]=S.opacity}else{for(var b=0,S=g>0?a.parseColor(m):a.parseColor(y),P=0;P<v;++P)f[b++]=S.r,f[b++]=S.g,f[b++]=S.b,f[b++]=S.opacity;S=a.parseColor(u);try{for(var C=r(s.values()),E=C.next();!E.done;E=C.next()){var w=E.value*p.RGBA_NUM_ELEMENTS;f[w++]=S.r,f[w++]=S.g,f[w++]=S.b,f[w++]=S.opacity}}catch(e){t={error:e}}finally{try{E&&!E.done&&(i=C.return)&&i.call(C)}finally{if(t)throw t.error}}if(null!=o){var M=a.parseColor(c),x=o*p.RGBA_NUM_ELEMENTS;f[x++]=M.r,f[x++]=M.g,f[x++]=M.b,f[x++]=M.opacity}}return f},e.prototype.generate3DLabelsArray=function(){var e=this.dataset;if(!e)return[];for(var t=[],i=e.points.length,o=0;o<i;++o)t.push(this.getLabelText(o));return t},e.prototype.generateLineSegmentColorMap=function(e){for(var t=this.pointColorer,i=this.styles,o={},n=0;n<this.sequences.length;n++){var r=this.sequences[n],s=new Float32Array(2*(r.indices.length-1)*3),l=0;if(t)for(var c=0;c<r.indices.length-1;c++){var h=a.parseColor(this.callPointColorer(t,r.indices[c])),p=a.parseColor(this.callPointColorer(t,r.indices[c+1]));s[l++]=h.r,s[l++]=h.g,s[l++]=h.b,s[l++]=p.r,s[l++]=p.g,s[l++]=p.b}else for(var c=0;c<r.indices.length-1;c++){var h=u.getDefaultPointInPolylineColor(c,r.indices.length,i.polyline.startHue,i.polyline.endHue,i.polyline.saturation,i.polyline.lightness),p=u.getDefaultPointInPolylineColor(c+1,r.indices.length,i.polyline.startHue,i.polyline.endHue,i.polyline.saturation,i.polyline.lightness);s[l++]=h.r,s[l++]=h.g,s[l++]=h.b,s[l++]=p.r,s[l++]=p.g,s[l++]=p.b}o[n]=s}return o},e.prototype.generateLineSegmentOpacityArray=function(e){var t=this.selectedPointIndices,i=this.styles,o=new Float32Array(this.sequences.length);if(t.size>0){o.fill(i.polyline.deselectedOpacity);var r=this.polylineVisualizer.getPointSequenceIndex(n(t)[0]);void 0!==r&&(o[r]=i.polyline.selectedOpacity)}else o.fill(i.polyline.defaultOpacity);return o},e.prototype.generateLineSegmentWidthArray=function(e){var t=this.selectedPointIndices,i=this.styles,o=new Float32Array(this.sequences.length);if(o.fill(i.polyline.defaultLineWidth),t.size>0){var r=this.polylineVisualizer.getPointSequenceIndex(n(t)[0]);void 0!==r&&(o[r]=i.polyline.selectedLineWidth)}return o},e.prototype.getLabelText=function(e){var t=this.dataset;if(!t)return"";var i=t.metadata[e];return i&&null!=i.label?""+i.label:""},e.prototype.initializeCanvasLabelsVisualizer=function(){return this.canvasLabelsVisualizer||(this.canvasLabelsVisualizer=new m.ScatterPlotVisualizerCanvasLabels(this.containerElement,this.styles)),this.canvasLabelsVisualizer},e.prototype.initialize3DLabelsVisualizer=function(){return this.labels3DVisualizer||(this.labels3DVisualizer=new d.ScatterPlotVisualizer3DLabels(this.styles)),this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray()),this.labels3DVisualizer},e.prototype.initializePointVisualizer=function(){return this.pointVisualizer||(this.pointVisualizer=new f.ScatterPlotVisualizerSprites(this.styles)),this.pointVisualizer},e.prototype.initializeSpritesheetVisualizer=function(){var e=this,t=this.styles,i=this.dataset,o=i.spriteMetadata;if(!this.spritesheetVisualizer&&o){if(!o.spriteImage||!o.singleSpriteSize)return;var n=i.points.length,r=void 0;if(o.spriteIndices)r=new Float32Array(o.spriteIndices);else{r=new Float32Array(n);for(var s=0;s<n;++s)r[s]=s}var a=new f.ScatterPlotVisualizerSprites(t,{spritesheetImage:o.spriteImage,spriteDimensions:o.singleSpriteSize,spriteIndices:r,onImageLoad:function(){return e.renderScatterPlot()}});a.id="SPRITE_SHEET_VISUALIZER",this.spritesheetVisualizer=a}return this.spritesheetVisualizer},e.prototype.initializePolylineVisualizer=function(){return this.polylineVisualizer||(this.polylineVisualizer=new y.ScatterPlotVisualizerPolylines),this.polylineVisualizer.setSequences(this.sequences),this.polylineVisualizer},e.prototype.setVisualizers=function(){var e=this.dataset,t=this.renderMode,i=[];if("TEXT"===t){var o=this.initialize3DLabelsVisualizer();i.push(o)}else if("POINT"===t){var o=this.initializePointVisualizer();i.push(o)}else if("SPRITE"===t&&e.spriteMetadata){var o=this.initializeSpritesheetVisualizer();o&&i.push(o)}if(this.sequences.length>0){var o=this.initializePolylineVisualizer();i.push(o)}if(("POINT"===t||"SPRITE"===t)&&this.showLabelsOnHover){var o=this.initializeCanvasLabelsVisualizer();i.push(o)}this.scatterPlot.setActiveVisualizers(i)},e.Dataset=l.Dataset,e}();t.ScatterGL=v},81255:function(e,t,i){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=i(84552),a=i(63453),l=i(30104),c=i(99622),h=i(40262),u="Shift",p="Control",d=new s.Vector3(.45,.9,1.6),f=new s.Vector3(0,0,0),m=new s.Vector3(0,0,4),y=new s.Vector3(0,0,0),v={mouseRotateSpeed:1,autoRotateSpeed:2,zoomSpeed:.125},g=function(){function e(e,t){var i=this;this.clickCallback=function(){},this.hoverCallback=function(){},this.selectCallback=function(){},this.selectEnabled=!0,this.visualizers=new Map,this.onCameraMoveListeners=[],this.height=0,this.width=0,this.dimensions=3,this.interactionMode="PAN",this.pickingTexture=new s.WebGLRenderTarget(0,0),this.orbitAnimationOnNextCameraCreation=!1,this.orbitAnimationId=null,this.worldSpacePointPositions=new Float32Array(0),this.pointColors=new Float32Array(0),this.pointScaleFactors=new Float32Array(0),this.polylineColors={},this.polylineOpacities=new Float32Array(0),this.polylineWidths=new Float32Array(0),this.selecting=!1,this.nearestPoint=null,this.mouseIsDown=!1,this.isDragSequence=!1,this.lastHovered=null,this.container=e,this.styles=t.styles,this.setParameters(t),this.computeLayoutValues(),this.scene=new s.Scene,this.renderer=new s.WebGLRenderer({alpha:!0,premultipliedAlpha:!1,antialias:!1}),this.renderer.setClearColor(this.styles.backgroundColor,1),this.container.appendChild(this.renderer.domElement),this.light=new s.PointLight(16772287,1,0),this.scene.add(this.light),this.orbitControlParams=o(o({},v),t.orbitControlParams),this.rectangleSelector=new h.ScatterPlotRectangleSelector(this.container,function(e){i.selectBoundingBox(e)},this.styles),this.addInteractionListeners(),this.setDimensions(3),this.makeCamera(t.camera),this.resize()}return e.prototype.setParameters=function(e){void 0!==e.onClick&&(this.clickCallback=e.onClick),void 0!==e.onHover&&(this.hoverCallback=e.onHover),void 0!==e.onSelect&&(this.selectCallback=e.onSelect),void 0!==e.selectEnabled&&(this.selectEnabled=e.selectEnabled)},e.prototype.addInteractionListeners=function(){this.container.addEventListener("pointermove",this.onMouseMove.bind(this)),this.container.addEventListener("pointerdown",this.onMouseDown.bind(this)),this.container.addEventListener("pointerup",this.onMouseUp.bind(this)),this.container.addEventListener("click",this.onClick.bind(this)),window.addEventListener("keydown",this.onKeyDown.bind(this),!1),window.addEventListener("keyup",this.onKeyUp.bind(this),!1)},e.prototype.addCameraControlsEventListeners=function(e){var t=this;e.addEventListener("start",function(){t.stopOrbitAnimation(),t.onCameraMoveListeners.forEach(function(i){return i(t.camera.position,e.target)})}),e.addEventListener("change",function(){t.render()}),e.addEventListener("end",function(){})},e.prototype.makeOrbitControls=function(e,t){null!=this.orbitCameraControls&&this.orbitCameraControls.dispose();var i=new a.OrbitControls(e,this.renderer.domElement);i.zoomSpeed=this.orbitControlParams.zoomSpeed,i.enableRotate=t,i.autoRotate=!1,i.enableKeys=!1,i.rotateSpeed=this.orbitControlParams.mouseRotateSpeed,t?(i.mouseButtons.LEFT=s.MOUSE.LEFT,i.mouseButtons.RIGHT=s.MOUSE.RIGHT):(i.mouseButtons.LEFT=s.MOUSE.RIGHT,i.mouseButtons.RIGHT=s.MOUSE.LEFT),i.reset(),this.camera=e,this.orbitCameraControls=i,this.addCameraControlsEventListeners(this.orbitCameraControls)},e.prototype.makeCamera=function(e){void 0===e&&(e={});var t=this.makeDefaultCameraDef(this.dimensions,e);this.recreateCamera(t),3===this.dimensions&&this.styles.axesVisible?this.add3dAxes():this.remove3dAxesFromScene()},e.prototype.makeCamera3D=function(e,t,i){(o=new s.PerspectiveCamera(70,t/i,.01,100)).position.set(e.position[0],e.position[1],e.position[2]);var o,n=new s.Vector3(e.target[0],e.target[1],e.target[2]);o.lookAt(n),o.zoom=e.zoom,o.updateProjectionMatrix(),this.camera=o,this.makeOrbitControls(o,!0)},e.prototype.makeCamera2D=function(e,t,i){var o,n=new s.Vector3(e.target[0],e.target[1],e.target[2]),r=t/i,a=-1.2,l=1.2,c=-1.2,h=1.2;r>1?(a*=r,l*=r):(h/=r,c/=r),(o=new s.OrthographicCamera(a,l,h,c,-1e3,1e3)).position.set(e.position[0],e.position[1],e.position[2]),o.up=new s.Vector3(0,0,1),o.lookAt(n),o.zoom=e.zoom,o.updateProjectionMatrix(),this.camera=o,this.makeOrbitControls(o,!1)},e.prototype.makeDefaultCameraDef=function(e,t){void 0===t&&(t={});var i=2===e,o=i?m:d,n=i?y:f,r={orthographic:i,zoom:1,position:[o.x,o.y,o.z],target:[n.x,n.y,n.z]};return t.zoom&&(r.zoom=t.zoom),t.position&&(r.position=t.position),t.target&&(r.target=t.target),r},e.prototype.recreateCamera=function(e){e.orthographic?this.makeCamera2D(e,this.width,this.height):this.makeCamera3D(e,this.width,this.height),this.orbitCameraControls.minDistance=.05,this.orbitCameraControls.maxDistance=10,this.orbitCameraControls.update(),this.orbitAnimationOnNextCameraCreation&&this.startOrbitAnimation()},e.prototype.setInteractionMode=function(e){this.interactionMode=e,"SELECT"===e?(this.selecting=!0,this.container.style.cursor="crosshair",this.orbitCameraControls.enabled=!1):(this.selecting=!1,this.container.style.cursor="default",this.orbitCameraControls.enabled=!0)},e.prototype.onClick=function(e,t){if(void 0===t&&(t=!0),!e||!this.selecting){if(!this.isDragSequence&&t){if(this.selectEnabled){var i=null!=this.nearestPoint?[this.nearestPoint]:[];this.selectCallback(i)}this.clickCallback(this.nearestPoint)}this.isDragSequence=!1,this.render()}},e.prototype.onMouseDown=function(e){this.isDragSequence=!1,this.mouseIsDown=!0,this.selecting?(this.rectangleSelector.onMouseDown(e.offsetX,e.offsetY),this.setNearestPointToMouse(e)):!e.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===s.MOUSE.RIGHT?(this.orbitCameraControls.mouseButtons.ORBIT=s.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=s.MOUSE.RIGHT):e.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===s.MOUSE.LEFT&&(this.orbitCameraControls.mouseButtons.ORBIT=s.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=s.MOUSE.LEFT)},e.prototype.onMouseUp=function(e){this.selecting&&(this.rectangleSelector.onMouseUp(),this.render()),this.mouseIsDown=!1},e.prototype.onMouseMove=function(e){this.isDragSequence=this.mouseIsDown,this.selecting&&this.mouseIsDown?(this.rectangleSelector.onMouseMove(e.offsetX,e.offsetY),this.render()):this.mouseIsDown||(this.setNearestPointToMouse(e),this.nearestPoint!=this.lastHovered&&(this.lastHovered=this.nearestPoint,this.hoverCallback(this.nearestPoint)))},e.prototype.onKeyDown=function(e){e.key===p&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=s.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=s.MOUSE.LEFT),e.key===u&&this.selectEnabled&&(this.selecting=!0,this.orbitCameraControls.enabled=!1,this.container.style.cursor="crosshair")},e.prototype.onKeyUp=function(e){e.key===p&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=s.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=s.MOUSE.RIGHT),e.key===u&&this.selectEnabled&&(this.selecting=!1,this.orbitCameraControls.enabled=!0,this.container.style.cursor="default",this.render())},e.prototype.getPointIndicesFromBoundingBox=function(e){if(null==this.worldSpacePointPositions)return[];this.camera.updateMatrixWorld();var t=window.devicePixelRatio||1,i=Math.floor(e.x*t),o=Math.floor(e.y*t),r=Math.max(Math.floor(e.width*t),1),a=Math.max(Math.floor(e.height*t),1);if(r<=2&&a<=2)return this.getPointIndicesFromBoundingBoxPickingTexture(e);for(var l=this.renderer.domElement,c=l.width,h=l.height,u=[],p=new s.Vector3,d=0;d<this.worldSpacePointPositions.length;d++){var f=3*d,m=n(this.worldSpacePointPositions.slice(f,f+3),3),y=m[0],v=m[1],g=m[2];p.x=y,p.y=v,p.z=g;var b=p.project(this.camera),P=(b.x+1)*c/2,S=-(b.y-1)*h/2;P>=i&&P<=i+r&&S<=o&&S>=o-a&&u.push(d)}return u},e.prototype.getPointIndicesFromBoundingBoxPickingTexture=function(e){if(null==this.worldSpacePointPositions)return[];var t=this.worldSpacePointPositions.length/3,i=window.devicePixelRatio||1,o=Math.floor(e.x*i),n=Math.floor(e.y*i),r=Math.max(Math.floor(e.width*i),1),s=Math.max(Math.floor(e.height*i),1),a=new Uint8Array(r*s*4);this.renderer.readRenderTargetPixels(this.pickingTexture,o,this.pickingTexture.height-n,r,s,a);for(var l=new Uint8Array(this.worldSpacePointPositions.length),c=0;c<r*s;c++){var h=a[4*c]<<16|a[4*c+1]<<8|a[4*c+2];16777215!==h&&h<t&&(l[h]=1)}for(var u=[],c=0;c<l.length;c++)1===l[c]&&u.push(c);return u},e.prototype.selectBoundingBox=function(e){var t=this.getPointIndicesFromBoundingBox(e);this.selectCallback(t)},e.prototype.setNearestPointToMouse=function(e){if(null==this.pickingTexture){this.nearestPoint=null;return}var t={x:e.offsetX,y:e.offsetY,width:1,height:1},i=this.getPointIndicesFromBoundingBoxPickingTexture(t);this.nearestPoint=i.length?i[0]:null},e.prototype.computeLayoutValues=function(){return this.width=this.container.offsetWidth,this.height=Math.max(1,this.container.offsetHeight),[this.width,this.height]},e.prototype.sceneIs3D=function(){return 3===this.dimensions},e.prototype.remove3dAxesFromScene=function(){var e=this.scene.getObjectByName("axes");return null!=e&&this.scene.remove(e),e},e.prototype.add3dAxes=function(){var e=new s.AxesHelper;e.name="axes",this.scene.add(e)},e.prototype.setDimensions=function(e){if(2!==e&&3!==e)throw RangeError("dimensions must be 2 or 3");this.dimensions!==e&&(this.dimensions=e,this.makeCamera())},e.prototype.getCameraPosition=function(){var e=this.camera.position;return[e.x,e.y,e.z]},e.prototype.getCameraTarget=function(){var e=this.orbitCameraControls.target;return[e.x,e.y,e.z]},e.prototype.setCameraPositionAndTarget=function(e,t){this.stopOrbitAnimation(),this.camera.position.set(e[0],e[1],e[2]),this.orbitCameraControls.target.set(t[0],t[1],t[2]),this.orbitCameraControls.update(),this.render()},e.prototype.startOrbitAnimation=function(){this.sceneIs3D()&&(null!=this.orbitAnimationId&&this.stopOrbitAnimation(),this.orbitCameraControls.autoRotate=!0,this.orbitCameraControls.autoRotateSpeed=this.orbitControlParams.autoRotateSpeed,this.updateOrbitAnimation())},e.prototype.orbitIsAnimating=function(){return null!=this.orbitAnimationId},e.prototype.updateOrbitAnimation=function(){var e=this;this.orbitCameraControls.update(),this.orbitAnimationId=requestAnimationFrame(function(){return e.updateOrbitAnimation()})},e.prototype.stopOrbitAnimation=function(){this.orbitCameraControls.autoRotate=!1,this.orbitCameraControls.rotateSpeed=this.orbitControlParams.mouseRotateSpeed,null!=this.orbitAnimationId&&(cancelAnimationFrame(this.orbitAnimationId),this.orbitAnimationId=null)},e.prototype.setActiveVisualizers=function(e){var t,i,o,n,s=new Set(e.map(function(e){return e.id}));try{for(var a=r(this.visualizers.values()),l=a.next();!l.done;l=a.next()){var c=l.value;s.has(c.id)||(c.dispose(),this.visualizers.delete(c.id))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}try{for(var h=r(e),u=h.next();!u.done;u=h.next()){var c=u.value;this.visualizers.set(c.id,c),c.setScene(this.scene),c.onResize(this.width,this.height),this.worldSpacePointPositions&&c.onPointPositionsChanged(this.worldSpacePointPositions)}}catch(e){o={error:e}}finally{try{u&&!u.done&&(n=h.return)&&n.call(h)}finally{if(o)throw o.error}}},e.prototype.disposeAllVisualizers=function(){this.visualizers.forEach(function(e){return e.dispose()}),this.visualizers.clear()},e.prototype.setPointPositions=function(e){this.worldSpacePointPositions=e,this.visualizers.forEach(function(t){return t.onPointPositionsChanged(e)})},e.prototype.render=function(){var e=this.camera.position.clone();e.x+=1,e.y+=1,this.light.position.set(e.x,e.y,e.z);var t=this.camera instanceof s.PerspectiveCamera?l.CameraType.Perspective:l.CameraType.Orthographic,i=[0,0];null!=this.worldSpacePointPositions&&(i=c.getNearFarPoints(this.worldSpacePointPositions,this.camera.position,this.orbitCameraControls.target));var o=new l.RenderContext(this.camera,t,this.orbitCameraControls.target,this.width,this.height,i[0],i[1],this.styles.backgroundColor,this.pointColors,this.pointScaleFactors,this.labels,this.polylineColors,this.polylineOpacities,this.polylineWidths);this.visualizers.forEach(function(e){return e.onPickingRender(o)});var n=this.remove3dAxesFromScene();this.renderer.setRenderTarget(this.pickingTexture),this.renderer.render(this.scene,this.camera),null!=n&&this.scene.add(n),this.visualizers.forEach(function(e){return e.onRender(o)}),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera)},e.prototype.setPointColors=function(e){this.pointColors=e},e.prototype.setPointScaleFactors=function(e){this.pointScaleFactors=e},e.prototype.setLabels=function(e){this.labels=e},e.prototype.setPolylineColors=function(e){this.polylineColors=e},e.prototype.setPolylineOpacities=function(e){this.polylineOpacities=e},e.prototype.setPolylineWidths=function(e){this.polylineWidths=e},e.prototype.resetZoom=function(){this.recreateCamera(this.makeDefaultCameraDef(this.dimensions)),this.render()},e.prototype.setDayNightMode=function(e){for(var t=this.container.querySelectorAll("canvas"),i=e?"invert(100%)":"",o=0;o<t.length;o++)t[o].style.filter=i},e.prototype.resize=function(e){void 0===e&&(e=!0);var t=n([this.width,this.height],2),i=t[0],o=t[1],r=n(this.computeLayoutValues(),2),a=r[0],l=r[1];if(3===this.dimensions){var c=this.camera;c.aspect=a/l,c.updateProjectionMatrix()}else{var c=this.camera,h=a/i,u=l/o,p=(c.right-c.left)*h/2,d=(c.top-c.bottom)*u/2;c.top=d,c.bottom=-d,c.left=-p,c.right=p,c.updateProjectionMatrix()}var f=window.devicePixelRatio||1;this.renderer.setPixelRatio(f),this.renderer.setSize(a,l);var m=new s.Vector2;this.renderer.getSize(m);var y=this.renderer.getPixelRatio();this.pickingTexture=new s.WebGLRenderTarget(m.width*y,m.height*y),this.pickingTexture.texture.minFilter=s.LinearFilter,this.visualizers.forEach(function(e){return e.onResize(a,l)}),e&&this.render()},e.prototype.onCameraMove=function(e){this.onCameraMoveListeners.push(e)},e.prototype.clickOnPoint=function(e){this.nearestPoint=e,this.onClick(null,!1)},e}();t.ScatterPlot=g},40262:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,i){this.startCoordinates=[0,0],this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.style.display="none",this.svgElement.style.height="100%",this.svgElement.style.width="100%",this.svgElement.style.position="absolute",e.insertAdjacentElement("afterbegin",this.svgElement),this.rectElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.rectElement.style.stroke=i.select.stroke,this.rectElement.style.strokeDasharray=i.select.strokeDashArray,this.rectElement.style.strokeWidth=""+i.select.strokeWidth,this.rectElement.style.fill=i.select.fill,this.rectElement.style.fillOpacity=""+i.select.fillOpacity,this.svgElement.appendChild(this.rectElement),this.selectionCallback=t,this.isMouseDown=!1}return e.prototype.onMouseDown=function(e,t){this.isMouseDown=!0,this.rectElement.style.display="block",this.svgElement.style.display="block",this.startCoordinates=[e,t],this.lastBoundingBox={x:this.startCoordinates[0],y:this.startCoordinates[1],width:1,height:1}},e.prototype.onMouseMove=function(e,t){this.isMouseDown&&(this.lastBoundingBox.x=Math.min(e,this.startCoordinates[0]),this.lastBoundingBox.y=Math.max(t,this.startCoordinates[1]),this.lastBoundingBox.width=Math.max(e,this.startCoordinates[0])-this.lastBoundingBox.x,this.lastBoundingBox.height=this.lastBoundingBox.y-Math.min(t,this.startCoordinates[1]),this.rectElement.setAttribute("x",""+this.lastBoundingBox.x),this.rectElement.setAttribute("y",""+(this.lastBoundingBox.y-this.lastBoundingBox.height)),this.rectElement.setAttribute("width",""+this.lastBoundingBox.width),this.rectElement.setAttribute("height",""+this.lastBoundingBox.height))},e.prototype.onMouseUp=function(){this.isMouseDown=!1,this.svgElement.style.display="none",this.rectElement.style.display="none",this.rectElement.setAttribute("width","0"),this.rectElement.setAttribute("height","0"),this.selectionCallback(this.lastBoundingBox)},e}();t.ScatterPlotRectangleSelector=i},45934:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(84552),n=i(99622),r=i(19249),s=function(){function e(e){this.styles=e,this.id="3D_LABELS",this.labelStrings=[],this.worldSpacePointPositions=new Float32Array(0),this.pickingColors=new Float32Array(0),this.renderColors=new Float32Array(0),this.uniforms={},this.totalVertexCount=0,this.labelVertexMap=[]}return e.prototype.createGlyphTexture=function(){var e=this.styles.label3D,t=e.fontSize,i=e.backgroundColor,o=e.color,r=document.createElement("canvas");r.width=8192,r.height=t;var s=r.getContext("2d");s.font="bold "+t+"px roboto",s.textBaseline="top",s.fillStyle=i,s.rect(0,0,r.width,r.height),s.fill(),s.fillStyle=o;for(var a=s.measureText(" ").width,l=new Float32Array(256),c=new Float32Array(256),h=0,u=0;u<256;u++){var p=" "+String.fromCharCode(u),d=s.measureText(p).width;l[u]=d-a,c[u]=h,s.fillText(p,h-a,0),h+=d}return{texture:n.createTextureFromCanvas(r),lengths:l,offsets:c}},e.prototype.processLabelVerts=function(e){var t=0;this.labelVertexMap=[];for(var i=0;i<e;i++){for(var o=this.labelStrings[i],n=[],r=0;r<o.length;r++){for(var s=0;s<6;s++)n.push(6*t+s);t++}this.labelVertexMap.push(n)}this.totalVertexCount=6*t},e.prototype.createColorBuffers=function(e){var t=this;this.pickingColors=new Float32Array(this.totalVertexCount*r.RGB_NUM_ELEMENTS),this.renderColors=new Float32Array(this.totalVertexCount*r.RGB_NUM_ELEMENTS);for(var i=this,n=0;n<e;n++)!function(e){var n=new o.Color(e);i.labelVertexMap[e].forEach(function(e){t.pickingColors[r.RGB_NUM_ELEMENTS*e]=n.r,t.pickingColors[r.RGB_NUM_ELEMENTS*e+1]=n.g,t.pickingColors[r.RGB_NUM_ELEMENTS*e+2]=n.b,t.renderColors[r.RGB_NUM_ELEMENTS*e]=1,t.renderColors[r.RGB_NUM_ELEMENTS*e+1]=1,t.renderColors[r.RGB_NUM_ELEMENTS*e+2]=1})}(n)},e.prototype.createLabels=function(){var e=this,t=this.styles.label3D,i=t.fontSize,s=t.scale;if(null!=this.labelStrings&&null!=this.worldSpacePointPositions){var a=this.worldSpacePointPositions.length/r.XYZ_NUM_ELEMENTS;if(a===this.labelStrings.length){this.glyphTexture=this.createGlyphTexture(),this.uniforms={glyphTexture:{value:null},picking:{value:!1}},this.material=new o.ShaderMaterial({uniforms:this.uniforms,transparent:!0,vertexShader:"\n      attribute vec2 posObj;\n      attribute vec4 color;\n      varying vec2 vUv;\n      varying vec4 vColor;\n\n      void main() {\n        vUv = uv;\n        vColor = color;\n\n        // Rotate label to face camera.\n\n        vec4 vRight = vec4(\n          modelViewMatrix[0][0], modelViewMatrix[1][0], modelViewMatrix[2][0], 0);\n\n        vec4 vUp = vec4(\n          modelViewMatrix[0][1], modelViewMatrix[1][1], modelViewMatrix[2][1], 0);\n\n        vec4 vAt = -vec4(\n          modelViewMatrix[0][2], modelViewMatrix[1][2], modelViewMatrix[2][2], 0);\n\n        mat4 pointToCamera = mat4(vRight, vUp, vAt, vec4(0, 0, 0, 1));\n\n        vec2 scaledPos = posObj * "+1/i+" * "+s+";\n\n        vec4 posRotated = pointToCamera * vec4(scaledPos, 0, 1);\n        vec4 mvPosition = modelViewMatrix * (vec4(position, 0) + posRotated);\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"\n      uniform sampler2D glyphTexture;\n      uniform bool picking;\n      varying vec2 vUv;\n      varying vec4 vColor;\n\n      void main() {\n        if (picking) {\n          gl_FragColor = vColor;\n        } else {\n          vec4 fromTexture = texture(glyphTexture, vUv);\n          gl_FragColor = vColor * fromTexture;\n        }\n      }"}),this.processLabelVerts(a),this.createColorBuffers(a);var l=new Float32Array(this.totalVertexCount*r.XYZ_NUM_ELEMENTS);this.positions=new o.BufferAttribute(l,r.XYZ_NUM_ELEMENTS);var c=new Float32Array(this.totalVertexCount*r.XYZ_NUM_ELEMENTS),h=new Float32Array(this.totalVertexCount*r.UV_NUM_ELEMENTS),u=new Float32Array(this.totalVertexCount*r.RGB_NUM_ELEMENTS),p=new o.BufferAttribute(c,2),d=new o.BufferAttribute(h,r.UV_NUM_ELEMENTS),f=new o.BufferAttribute(u,r.RGB_NUM_ELEMENTS);this.geometry=new o.BufferGeometry,this.geometry.setAttribute("posObj",p),this.geometry.setAttribute("position",this.positions),this.geometry.setAttribute("uv",d),this.geometry.setAttribute("color",f);for(var m=0,y=0;y<a;y++){for(var v=this.labelStrings[y],g=0,b=0;b<v.length;b++){var P=v.charCodeAt(b);g+=this.glyphTexture.lengths[P]}g/=-2;for(var b=0;b<v.length;b++){var P=v.charCodeAt(b),S=this.glyphTexture.lengths[P],C=(g+S)/i,E=g/i,w=i/i;p.setXY(6*m+0,E,0),p.setXY(6*m+1,C,0),p.setXY(6*m+2,E,w),p.setXY(6*m+3,E,w),p.setXY(6*m+4,C,0),p.setXY(6*m+5,C,w);var M=this.glyphTexture.offsets[P],x=this.glyphTexture.offsets[P]+S;M/=8192,x/=8192,d.setXY(6*m+0,M,1),d.setXY(6*m+1,x,1),d.setXY(6*m+2,M,0),d.setXY(6*m+3,M,0),d.setXY(6*m+4,x,1),d.setXY(6*m+5,x,0),m++,g+=S}}for(var T=this,y=0;y<a;y++)!function(t){var i=n.vector3FromPackedArray(T.worldSpacePointPositions,t);T.labelVertexMap[t].forEach(function(t){e.positions.setXYZ(t,i.x,i.y,i.z)})}(y);this.labelsMesh=new o.Mesh(this.geometry,this.material),this.labelsMesh.frustumCulled=!1,this.scene.add(this.labelsMesh)}}},e.prototype.colorLabels=function(e){if(null!=this.labelStrings&&null!=this.geometry&&null!=e){var t=this.geometry.getAttribute("color");t.array=this.renderColors;for(var i=e.length/r.RGBA_NUM_ELEMENTS,n=0,s=0;s<i;++s){for(var a=new o.Color(e[n],e[n+1],e[n+2]),l=this.labelVertexMap[s].length,c=0;c<l;++c)t.setXYZ(this.labelVertexMap[s][c],a.r,a.g,a.b);n+=r.RGBA_NUM_ELEMENTS}t.needsUpdate=!0}},e.prototype.setScene=function(e){this.scene=e},e.prototype.dispose=function(){this.labelsMesh&&(this.scene&&this.scene.remove(this.labelsMesh),this.labelsMesh=null),this.geometry&&(this.geometry.dispose(),this.geometry=null),null!=this.glyphTexture&&null!=this.glyphTexture.texture&&(this.glyphTexture.texture.dispose(),this.glyphTexture.texture=null)},e.prototype.onPickingRender=function(e){if(null==this.geometry){this.createLabels();return}this.material.uniforms.glyphTexture.value=this.glyphTexture.texture,this.material.uniforms.picking.value=!0;var t=this.geometry.getAttribute("color");t.array=this.pickingColors,t.needsUpdate=!0},e.prototype.onRender=function(e){if(null==this.geometry){this.createLabels();return}this.colorLabels(e.pointColors),this.material.uniforms.glyphTexture.value=this.glyphTexture.texture,this.material.uniforms.picking.value=!1;var t=this.geometry.getAttribute("color");t.array=this.renderColors,t.needsUpdate=!0},e.prototype.onPointPositionsChanged=function(e){this.worldSpacePointPositions=e,this.dispose()},e.prototype.setLabelStrings=function(e){this.labelStrings=e,this.dispose()},e.prototype.onResize=function(e,t){},e}();t.ScatterPlotVisualizer3DLabels=s},12230:function(e,t,i){var o=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var n=i(84552),r=i(30104),s=i(64310),a=i(99622),l=function(){function e(e,t){this.styles=t,this.id="CANVAS_LABELS",this.worldSpacePointPositions=new Float32Array(0),this.labelsActive=!0,this.canvas=document.createElement("canvas"),e.appendChild(this.canvas),this.gc=this.canvas.getContext("2d"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none"}return e.prototype.removeAllLabels=function(){var e=this.canvas.width*window.devicePixelRatio,t=this.canvas.height*window.devicePixelRatio;this.gc.clearRect(0,0,e,t)},e.prototype.makeLabels=function(e){if(null!=e.labels&&0!==e.labels.pointIndices.length&&null!=this.worldSpacePointPositions){var t,i=e.labels,l=e.cameraType===r.CameraType.Perspective,c=parseInt(this.gc.font,10),h=window.devicePixelRatio,u=this.canvas.width*h,p=this.canvas.height*h;t=new s.CollisionGrid({loX:0,hiX:u,loY:0,hiY:p},u/25,p/50);var d=[e.farthestCameraSpacePointZ,e.nearestCameraSpacePointZ],f=e.camera.position,m=f.clone().sub(e.cameraTarget),y=new n.Vector3;this.gc.textBaseline="middle",this.gc.miterLimit=2;for(var v=Math.min(1e4,i.pointIndices.length),g=0;g<v;++g){var b=void 0,P=i.pointIndices[g];if(b=a.vector3FromPackedArray(this.worldSpacePointPositions,P),y.copy(f).sub(b),!(0>m.dot(y))){var S=o(a.vector3DToScreenCoords(e.camera,e.screenWidth,e.screenHeight,b),2),C=S[0],E=S[1],w={loX:(C+=4)-2,hiX:C+1+2,loY:E-c/2-2,hiY:E+c/2+2};if(t.insert(w,!0)){var M=i.labelStrings[g],x=i.defaultFontSize*i.scaleFactors[g]*h;if(this.gc.font=x+"px roboto",w.hiX+=this.gc.measureText(M).width-1,t.insert(w)){var T,A=1;l&&1===i.useSceneOpacityFlags[g]&&(T=y.length(),A=a.scaleExponential(T,d,[.1,1])),this.gc.fillStyle=this.styleStringFromPackedRgba(i.fillColors,g,A),this.gc.strokeStyle=this.styleStringFromPackedRgba(i.strokeColors,g,A),this.gc.lineWidth=this.styles.label.strokeWidth,this.gc.strokeText(M,C,E),this.gc.lineWidth=this.styles.label.fillWidth,this.gc.fillText(M,C,E)}}}}}},e.prototype.styleStringFromPackedRgba=function(e,t,i){var o=3*t;return"rgba("+e[o]+","+e[o+1]+","+e[o+2]+","+i+")"},e.prototype.onResize=function(e,t){var i=window.devicePixelRatio;this.canvas.width=e*i,this.canvas.height=t*i,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"},e.prototype.dispose=function(){this.removeAllLabels()},e.prototype.onPointPositionsChanged=function(e){this.worldSpacePointPositions=e,this.removeAllLabels()},e.prototype.onRender=function(e){this.labelsActive&&(this.removeAllLabels(),this.makeLabels(e))},e.prototype.setScene=function(e){},e.prototype.onPickingRender=function(e){},e}();t.ScatterPlotVisualizerCanvasLabels=l},75494:function(e,t,i){var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var n=i(84552),r=i(99622),s=i(19249),a=function(){function e(){this.id="POLYLINES",this.sequences=[],this.polylines=[],this.polylinePositionBuffer={},this.polylineColorBuffer={},this.pointSequenceIndices=new Map}return e.prototype.getPointSequenceIndex=function(e){return this.pointSequenceIndices.get(e)},e.prototype.updateSequenceIndices=function(){for(var e=0;e<this.sequences.length;e++)for(var t=this.sequences[e],i=0;i<t.indices.length-1;i++){var o=t.indices[i];this.pointSequenceIndices.set(o,e),this.pointSequenceIndices.set(o+1,e)}},e.prototype.createPolylines=function(){var e,t;this.updateSequenceIndices();try{for(var i=o(this.polylines),r=i.next();!r.done;r=i.next()){var s=r.value;this.scene.remove(s),s.geometry.dispose()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.polylines=[];for(var a=0;a<this.sequences.length;a++){var l=new n.BufferGeometry;l.addAttribute("position",this.polylinePositionBuffer[a]),l.addAttribute("color",this.polylineColorBuffer[a]);var c=new n.LineBasicMaterial({linewidth:1,opacity:1,transparent:!0,vertexColors:!0}),s=new n.LineSegments(l,c);s.frustumCulled=!1,this.polylines.push(s),this.scene.add(s)}},e.prototype.dispose=function(){var e,t;try{for(var i=o(this.polylines),n=i.next();!n.done;n=i.next()){var r=n.value;this.scene.remove(r),r.geometry.dispose()}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.polylines=[],this.polylinePositionBuffer={},this.polylineColorBuffer={}},e.prototype.setScene=function(e){this.scene=e},e.prototype.setSequences=function(e){this.sequences=e},e.prototype.onPointPositionsChanged=function(e){if(null==e&&this.dispose(),null!=e&&0!==this.sequences.length){for(var t=0;t<this.sequences.length;t++){var i=this.sequences[t],o=2*(i.indices.length-1),a=new Float32Array(o*s.XYZ_NUM_ELEMENTS);this.polylinePositionBuffer[t]=new n.BufferAttribute(a,s.XYZ_NUM_ELEMENTS);var l=new Float32Array(o*s.RGBA_NUM_ELEMENTS);this.polylineColorBuffer[t]=new n.BufferAttribute(l,s.RGBA_NUM_ELEMENTS)}for(var t=0;t<this.sequences.length;t++){for(var i=this.sequences[t],c=0,h=0;h<i.indices.length-1;h++){var u=i.indices[h],p=i.indices[h+1],d=r.vector3FromPackedArray(e,u),f=r.vector3FromPackedArray(e,p);this.polylinePositionBuffer[t].setXYZ(c,d.x,d.y,d.z),this.polylinePositionBuffer[t].setXYZ(c+1,f.x,f.y,f.z),c+=2}this.polylinePositionBuffer[t].needsUpdate=!0}this.createPolylines()}},e.prototype.onRender=function(e){for(var t=0;t<this.polylines.length;t++){var i=this.polylines[t].material;i.opacity=e.polylineOpacities[t],i.linewidth=e.polylineWidths[t],this.polylineColorBuffer[t].array=e.polylineColors[t],this.polylineColorBuffer[t].needsUpdate=!0}},e.prototype.onPickingRender=function(e){},e.prototype.onResize=function(e,t){},e}();t.ScatterPlotVisualizerPolylines=a},13558:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(84552),n=i(30104),r=i(99622),s=i(19249),a=function(e){return"\n    // Index of the specific vertex (passed in as bufferAttribute), and the\n    // variable that will be used to pass it to the fragment shader.\n    attribute float spriteIndex;\n    attribute vec4 color;\n    attribute float scaleFactor;\n\n    varying vec2 xyIndex;\n    varying vec4 vColor;\n\n    uniform bool sizeAttenuation;\n    uniform float pointSize;\n    uniform float spritesPerRow;\n    uniform float spritesPerColumn;\n\n    varying float fogDepth;\n\n    void main() {\n      // Pass index and color values to fragment shader.\n      vColor = color;\n      xyIndex = vec2(mod(spriteIndex, spritesPerRow),\n                floor(spriteIndex / spritesPerColumn));\n\n      // Transform current vertex by modelViewMatrix (model world position and\n      // camera world position matrix).\n      vec4 cameraSpacePos = modelViewMatrix * vec4(position, 1.0);\n\n      // Project vertex in camera-space to screen coordinates using the camera's\n      // projection matrix.\n      gl_Position = projectionMatrix * cameraSpacePos;\n\n      // Create size attenuation (if we're in 3D mode) by making the size of\n      // each point inversly proportional to its distance to the camera.\n      float outputPointSize = pointSize;\n      if (sizeAttenuation) {\n        outputPointSize = -pointSize / cameraSpacePos.z;\n        fogDepth = pointSize / outputPointSize * 1.2;\n      } else {  // Create size attenuation (if we're in 2D mode)\n        const float PI = 3.1415926535897932384626433832795;\n        const float minScale = 0.1;  // minimum scaling factor\n        const float outSpeed = 2.0;  // shrink speed when zooming out\n        const float outNorm = (1. - minScale) / atan(outSpeed);\n        const float maxScale = 15.0;  // maximum scaling factor\n        const float inSpeed = 0.02;  // enlarge speed when zooming in\n        const float zoomOffset = 0.3;  // offset zoom pivot\n        float zoom = projectionMatrix[0][0] + zoomOffset;  // zoom pivot\n        float scale = zoom < 1. ? 1. + outNorm * atan(outSpeed * (zoom - 1.)) :\n                      1. + 2. / PI * (maxScale - 1.) * atan(inSpeed * (zoom - 1.));\n        outputPointSize = pointSize * scale;\n      }\n\n      gl_PointSize =\n        max(outputPointSize * scaleFactor, "+e.toFixed(1)+");\n    }"},l="\n    bool point_in_unit_circle(vec2 spriteCoord) {\n      vec2 centerToP = spriteCoord - vec2(0.5, 0.5);\n      return dot(centerToP, centerToP) < (0.5 * 0.5);\n    }\n\n    bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n      vec3 v0 = vec3(0, 1, 0);\n      vec3 v1 = vec3(0.5, 0, 0);\n      vec3 v2 = vec3(1, 1, 0);\n      vec3 p = vec3(spriteCoord, 0);\n      float p_in_v0_v1 = cross(v1 - v0, p - v0).z;\n      float p_in_v1_v2 = cross(v2 - v1, p - v1).z;\n      return (p_in_v0_v1 > 0.0) && (p_in_v1_v2 > 0.0);\n    }\n\n    bool point_in_unit_square(vec2 spriteCoord) {\n      return true;\n    }\n  ",c="\n    varying vec2 xyIndex;\n    varying vec4 vColor;\n\n    uniform sampler2D spriteTexture;\n    uniform float spritesPerRow;\n    uniform float spritesPerColumn;\n    uniform bool isImage;\n\n    "+o.ShaderChunk.common+"\n    "+l+"\n    uniform vec3 fogColor;\n    varying float fogDepth;\n		uniform float fogNear;\n    uniform float fogFar;\n\n    void main() {\n      if (isImage) {\n        // Coordinates of the vertex within the entire sprite image.\n        vec2 coords =\n          (gl_PointCoord + xyIndex) / vec2(spritesPerRow, spritesPerColumn);\n        gl_FragColor = vColor * texture(spriteTexture, coords);\n      } else {\n        bool inside = point_in_unit_circle(gl_PointCoord);\n        if (!inside) {\n          discard;\n        }\n        gl_FragColor = vColor;\n      }\n      float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n      gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n    }",h="\n    varying vec2 xyIndex;\n    varying vec4 vColor;\n    uniform bool isImage;\n\n    "+l+"\n\n    varying float fogDepth;\n\n    void main() {\n      xyIndex; // Silence 'unused variable' warning.\n      fogDepth; // Silence 'unused variable' warning.\n      if (isImage) {\n        gl_FragColor = vColor;\n      } else {\n        bool inside = point_in_unit_circle(gl_PointCoord);\n        if (!inside) {\n          discard;\n        }\n        gl_FragColor = vColor;\n      }\n    }",u=function(){function e(e,t){this.styles=e,this.id="SPRITES",this.isSpriteSheetMode=!1,this.spritesPerRow=0,this.spritesPerColumn=0,this.spriteDimensions=[0,0],this.worldSpacePointPositions=new Float32Array(0),this.pickingColors=new Float32Array(0),this.renderColors=new Float32Array(0),this.standinTextureForPoints=r.createTextureFromCanvas(document.createElement("canvas")),t&&(this.spriteSheetParams=t,this.setSpriteSheet(t),this.isSpriteSheetMode=!0),this.renderMaterial=this.createRenderMaterial(),this.pickingMaterial=this.createPickingMaterial()}return e.prototype.createUniforms=function(){return{spriteTexture:{type:"t"},spritesPerRow:{type:"f"},spritesPerColumn:{type:"f"},fogColor:{type:"c"},fogNear:{type:"f"},fogFar:{type:"f"},isImage:{type:"bool"},sizeAttenuation:{type:"bool"},pointSize:{type:"f"}}},e.prototype.createRenderMaterial=function(){this.isSpriteSheetMode;var e=this.createUniforms();return new o.ShaderMaterial({uniforms:e,vertexShader:a(this.styles.sprites.minPointSize),fragmentShader:c,transparent:!0,depthFunc:o.LessDepth,fog:this.styles.fog.enabled,blending:o.NormalBlending})},e.prototype.createPickingMaterial=function(){var e=this.createUniforms();return new o.ShaderMaterial({uniforms:e,vertexShader:a(this.styles.sprites.minPointSize),fragmentShader:h,transparent:!0,depthTest:!0,depthWrite:!0,fog:!1,blending:o.NormalBlending})},e.prototype.createPointSprites=function(e,t){var i=null!=t?t.length/s.XYZ_NUM_ELEMENTS:0,n=this.createGeometry(i);this.fog=new o.Fog(16777215),this.points=new o.Points(n,this.renderMaterial),this.points.frustumCulled=!1,null!=this.spriteIndexBufferAttribute&&this.points.geometry.setAttribute("spriteIndex",this.spriteIndexBufferAttribute),e.add(this.points)},e.prototype.calculatePointSize=function(e){var t=this.styles.sprites.imageSize;if(this.texture)return e?t:this.spriteDimensions[0];var i=200/Math.log(null!=this.worldSpacePointPositions?this.worldSpacePointPositions.length/s.XYZ_NUM_ELEMENTS:1)/Math.log(8);return e?i:i/1.5},e.prototype.createGeometry=function(e){this.pickingColors=new Float32Array(e*s.RGBA_NUM_ELEMENTS);for(var t=0,i=0;i<e;i++){var n=new o.Color(i);this.pickingColors[t++]=n.r,this.pickingColors[t++]=n.g,this.pickingColors[t++]=n.b,this.pickingColors[t++]=1}var r=new o.BufferGeometry;return r.setAttribute("position",new o.BufferAttribute(new Float32Array([]),s.XYZ_NUM_ELEMENTS)),r.setAttribute("color",new o.BufferAttribute(new Float32Array([]),s.RGBA_NUM_ELEMENTS)),r.setAttribute("scaleFactor",new o.BufferAttribute(new Float32Array([]),s.INDEX_NUM_ELEMENTS)),r.computeVertexNormals(),r},e.prototype.setFogDistances=function(e,t,i){var o=this.styles.fog,n=o.threshold,r=o.enabled;e&&r?(this.fog.near=t,this.fog.far=t-n*(t-i)):(this.fog.near=1/0,this.fog.far=1/0)},e.prototype.dispose=function(){this.disposeGeometry(),this.disposeSpriteSheet()},e.prototype.disposeGeometry=function(){null!=this.points&&(this.scene.remove(this.points),this.points.geometry.dispose(),this.points=null,this.worldSpacePointPositions=null)},e.prototype.disposeSpriteSheet=function(){this.texture&&this.texture.dispose(),this.texture=null,this.renderMaterial=null,this.pickingMaterial=null,this.spriteSheetImage=null},e.prototype.setScene=function(e){this.scene=e},e.prototype.setSpriteSheet=function(e){var t=this,i=e.spriteDimensions,o=e.onImageLoad,n=e.spritesheetImage;if("string"==typeof n){var s=n;(n=new Image).src=s}this.spriteSheetImage=n,this.texture=r.createTextureFromImage(this.spriteSheetImage,function(){t.spritesPerRow=t.spriteSheetImage.width/i[0],t.spritesPerColumn=t.spriteSheetImage.height/i[1],o()}),this.spriteDimensions=i,this.setSpriteIndexBuffer()},e.prototype.setSpriteIndexBuffer=function(){var e=this.spriteSheetParams.spriteIndices;this.spriteIndexBufferAttribute=new o.BufferAttribute(e,s.INDEX_NUM_ELEMENTS),null!=this.points&&this.points.geometry.setAttribute("spriteIndex",this.spriteIndexBufferAttribute)},e.prototype.onPointPositionsChanged=function(e){null!=this.points&&this.worldSpacePointPositions.length!==e.length&&this.disposeGeometry(),this.worldSpacePointPositions=e,null==this.points&&this.createPointSprites(this.scene,e),this.spriteSheetParams&&this.setSpriteIndexBuffer(),this.renderMaterial=this.createRenderMaterial(),this.pickingMaterial=this.createPickingMaterial();var t=this.points.geometry.getAttribute("position");t.array=e,t.count=e.length/s.XYZ_NUM_ELEMENTS,t.needsUpdate=!0},e.prototype.onPickingRender=function(e){var t=e.cameraType===n.CameraType.Perspective;this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerRow,this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerColumn,this.pickingMaterial.uniforms.sizeAttenuation.value=t,this.pickingMaterial.uniforms.pointSize.value=this.calculatePointSize(t),this.points.material=this.pickingMaterial;var i=this.points.geometry.getAttribute("color");i.array=this.pickingColors,i.count=this.pickingColors.length/s.RGBA_NUM_ELEMENTS,i.needsUpdate=!0;var o=this.points.geometry.getAttribute("scaleFactor");o.array=e.pointScaleFactors,o.count=e.pointScaleFactors.length,o.count=e.pointScaleFactors.length/s.INDEX_NUM_ELEMENTS,o.needsUpdate=!0},e.prototype.onRender=function(e){var t=e.camera instanceof o.PerspectiveCamera;this.setFogDistances(t,e.nearestCameraSpacePointZ,e.farthestCameraSpacePointZ),this.scene.fog=this.fog,this.scene.fog.color=new o.Color(e.backgroundColor),this.renderMaterial.uniforms.fogColor.value=this.scene.fog.color,this.renderMaterial.uniforms.fogNear.value=this.fog.near,this.renderMaterial.uniforms.fogFar.value=this.fog.far,this.renderMaterial.uniforms.spritesPerRow.value=this.spritesPerRow,this.renderMaterial.uniforms.spritesPerColumn.value=this.spritesPerColumn,this.renderMaterial.uniforms.isImage.value=null!=this.texture,this.renderMaterial.uniforms.spriteTexture.value=null!=this.texture?this.texture:this.standinTextureForPoints,this.renderMaterial.uniforms.sizeAttenuation.value=t,this.renderMaterial.uniforms.pointSize.value=this.calculatePointSize(t),this.points.material=this.renderMaterial;var i=this.points.geometry.getAttribute("color");this.renderColors=e.pointColors,i.array=this.renderColors,i.count=this.renderColors.length/s.RGBA_NUM_ELEMENTS,i.needsUpdate=!0;var n=this.points.geometry.getAttribute("scaleFactor");n.array=e.pointScaleFactors,n.count=e.pointScaleFactors.length/s.INDEX_NUM_ELEMENTS,n.needsUpdate=!0},e.prototype.onResize=function(e,t){},e}();t.ScatterPlotVisualizerSprites=u},68281:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeStyles=function(e){var t={backgroundColor:"#ffffff",axesVisible:!0,fog:{color:"#ffffff",enabled:!0,threshold:5e3},label:{fontSize:10,scaleDefault:1,scaleLarge:2,fillColorSelected:"#000000",fillColorHover:"#000000",strokeColorSelected:"#ffffff",strokeColorHover:"#ffffff",strokeWidth:3,fillWidth:6},label3D:{fontSize:80,scale:2.2,color:"black",backgroundColor:"#ffffff",colorUnselected:"#ffffff",colorNoSelection:"#ffffff"},point:{colorUnselected:"rgba(227, 227, 227, 0.7)",colorNoSelection:"rgba(117, 117, 217, 0.7)",colorSelected:"rgba(250, 102, 102, 0.7)",colorHover:"rgba(118, 11, 79, 0.7)",scaleDefault:1,scaleSelected:1.2,scaleHover:1.2},polyline:{startHue:60,endHue:360,saturation:1,lightness:.3,defaultOpacity:.2,defaultLineWidth:2,selectedOpacity:.9,selectedLineWidth:3,deselectedOpacity:.05},select:{fill:"#dddddd",fillOpacity:.2,stroke:"#aaaaaa",strokeWidth:2,strokeDashArray:"10 5"},sprites:{minPointSize:5,imageSize:30,colorUnselected:"#ffffff",colorNoSelection:"#ffffff"}};if(void 0===e)return t;for(var i in t)"object"==typeof t[i]&&"object"==typeof e[i]?t[i]=Object.assign(t[i],e[i]):void 0!==e[i]&&(t[i]=e[i]);return t}},99622:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(84552);function n(e,t){return void 0===t&&(t=!0),e.needsUpdate=t,e.minFilter=o.LinearFilter,e.generateMipmaps=!1,e.flipY=!1,e}t.vector3DToScreenCoords=function(e,t,i,n){var r=window.devicePixelRatio,s=new o.Vector3().copy(n).project(e);return[(s.x+1)/2*t*r,-((s.y-1)/2*i)*r]},t.vector3FromPackedArray=function(e,t){var i=3*t;return new o.Vector3(e[i],e[i+1],e[i+2])},t.getNearFarPoints=function(e,t,i){for(var n=1/0,r=0,s=new o.Vector3().copy(i).sub(t),a=new o.Vector3().copy(s).normalize(),l=e.length/3,c=0,h=new o.Vector3,u=new o.Vector3,p=0;p<l;p++){h.x=e[c],h.y=e[c+1],h.z=e[c+2],c+=3,u.copy(h).sub(t);var d=a.dot(u);d<0||(r=d>r?d:r,n=d<n?d:n)}return[n,r]},t.createTextureFromCanvas=function(e){return n(new o.Texture(e))},t.createTextureFromImage=function(e,t){var i=new o.Texture(e);return e.complete?(i.needsUpdate=!0,t()):e.onload=function(){i.needsUpdate=!0,t()},n(i,!1)},t.hasWebGLSupport=function(){try{var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return null!=t}catch(e){return!1}},t.extent=function(e){for(var t=1/0,i=-1/0,o=0;o<e.length;o++){var n=e[o];n<t&&(t=n),n>i&&(i=n)}return[t,i]},t.scaleLinear=function(e,t,i){var o=t[1]-t[0],n=i[1]-i[0];return(e-t[0])/o*n+i[0]},t.scaleExponential=function(e,t,i){var o=Math.pow(t[1],Math.E)-Math.pow(t[0],Math.E),n=i[1]-i[0];return(Math.pow(e,Math.E)-t[0])/o*n+i[0]},t.packRgbIntoUint8Array=function(e,t,i,o,n){e[3*t]=i,e[3*t+1]=o,e[3*t+2]=n},t.styleRgbFromHexColor=function(e){var t=new o.Color(e);return[255*t.r|0,255*t.g|0,255*t.b|0]};var r=function(e){return 100*e+"%"};t.getDefaultPointInPolylineColor=function(e,t,i,n,s,a){var l="hsl("+(i+(n-i)*e/t)+", "+r(s)+", "+r(a)+")";return new o.Color(l)}},63453:function(e,t,i){i.r(t),i.d(t,{MapControls:function(){return r},OrbitControls:function(){return n}});var o=i(84552),n=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new o.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.DOLLY,RIGHT:o.MOUSE.PAN},this.touches={ONE:o.TOUCH.ROTATE,TWO:o.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return b.phi},this.getAzimuthalAngle=function(){return b.theta},this.listenToKeyEvents=function(e){e.addEventListener("keydown",$),this._domElementKeyEvents=e},this.saveState=function(){p.target0.copy(p.target),p.position0.copy(p.object.position),p.zoom0=p.object.zoom},this.reset=function(){p.target.copy(p.target0),p.object.position.copy(p.position0),p.object.zoom=p.zoom0,p.object.updateProjectionMatrix(),p.dispatchEvent(d),p.update(),v=y.NONE},this.update=(i=new o.Vector3,r=(n=new o.Quaternion().setFromUnitVectors(e.up,new o.Vector3(0,1,0))).clone().invert(),s=new o.Vector3,a=new o.Quaternion,l=2*Math.PI,function(){var e=p.object.position;i.copy(e).sub(p.target),i.applyQuaternion(n),b.setFromVector3(i),p.autoRotate&&v===y.NONE&&N(2*Math.PI/60/60*p.autoRotateSpeed),p.enableDamping?(b.theta+=P.theta*p.dampingFactor,b.phi+=P.phi*p.dampingFactor):(b.theta+=P.theta,b.phi+=P.phi);var t=p.minAzimuthAngle,o=p.maxAzimuthAngle;return isFinite(t)&&isFinite(o)&&(t<-Math.PI?t+=l:t>Math.PI&&(t-=l),o<-Math.PI?o+=l:o>Math.PI&&(o-=l),t<=o?b.theta=Math.max(t,Math.min(o,b.theta)):b.theta=b.theta>(t+o)/2?Math.max(t,b.theta):Math.min(o,b.theta)),b.phi=Math.max(p.minPolarAngle,Math.min(p.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=S,b.radius=Math.max(p.minDistance,Math.min(p.maxDistance,b.radius)),!0===p.enableDamping?p.target.addScaledVector(C,p.dampingFactor):p.target.add(C),i.setFromSpherical(b),i.applyQuaternion(r),e.copy(p.target).add(i),p.object.lookAt(p.target),!0===p.enableDamping?(P.theta*=1-p.dampingFactor,P.phi*=1-p.dampingFactor,C.multiplyScalar(1-p.dampingFactor)):(P.set(0,0,0),C.set(0,0,0)),S=1,!!(E||s.distanceToSquared(p.object.position)>g||8*(1-a.dot(p.object.quaternion))>g)&&(p.dispatchEvent(d),s.copy(p.object.position),a.copy(p.object.quaternion),E=!1,!0)}),this.dispose=function(){p.domElement.removeEventListener("contextmenu",ei),p.domElement.removeEventListener("pointerdown",Z),p.domElement.removeEventListener("wheel",Q),p.domElement.removeEventListener("touchstart",J),p.domElement.removeEventListener("touchend",et),p.domElement.removeEventListener("touchmove",ee),p.domElement.ownerDocument.removeEventListener("pointermove",W),p.domElement.ownerDocument.removeEventListener("pointerup",K),null!==p._domElementKeyEvents&&p._domElementKeyEvents.removeEventListener("keydown",$)};var i,n,r,s,a,l,c,h,u,p=this,d={type:"change"},f={type:"start"},m={type:"end"},y={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},v=y.NONE,g=1e-6,b=new o.Spherical,P=new o.Spherical,S=1,C=new o.Vector3,E=!1,w=new o.Vector2,M=new o.Vector2,x=new o.Vector2,T=new o.Vector2,A=new o.Vector2,L=new o.Vector2,_=new o.Vector2,O=new o.Vector2,k=new o.Vector2;function z(){return Math.pow(.95,p.zoomSpeed)}function N(e){P.theta-=e}var R=(c=new o.Vector3,function(e,t){c.setFromMatrixColumn(t,0),c.multiplyScalar(-e),C.add(c)}),I=(h=new o.Vector3,function(e,t){!0===p.screenSpacePanning?h.setFromMatrixColumn(t,1):(h.setFromMatrixColumn(t,0),h.crossVectors(p.object.up,h)),h.multiplyScalar(e),C.add(h)}),D=(u=new o.Vector3,function(e,t){var i=p.domElement;if(p.object.isPerspectiveCamera){var o=p.object.position;u.copy(o).sub(p.target);var n=u.length();R(2*e*(n*=Math.tan(p.object.fov/2*Math.PI/180))/i.clientHeight,p.object.matrix),I(2*t*n/i.clientHeight,p.object.matrix)}else p.object.isOrthographicCamera?(R(e*(p.object.right-p.object.left)/p.object.zoom/i.clientWidth,p.object.matrix),I(t*(p.object.top-p.object.bottom)/p.object.zoom/i.clientHeight,p.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),p.enablePan=!1)});function F(e){p.object.isPerspectiveCamera?S/=e:p.object.isOrthographicCamera?(p.object.zoom=Math.max(p.minZoom,Math.min(p.maxZoom,p.object.zoom*e)),p.object.updateProjectionMatrix(),E=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),p.enableZoom=!1)}function V(e){p.object.isPerspectiveCamera?S*=e:p.object.isOrthographicCamera?(p.object.zoom=Math.max(p.minZoom,Math.min(p.maxZoom,p.object.zoom/e)),p.object.updateProjectionMatrix(),E=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),p.enableZoom=!1)}function U(e){w.set(e.clientX,e.clientY)}function B(e){T.set(e.clientX,e.clientY)}function H(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,i)}}function Y(e){if(1==e.touches.length)T.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);T.set(t,i)}}function j(e){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;_.set(0,Math.sqrt(t*t+i*i))}function X(e){if(1==e.touches.length)M.set(e.touches[0].pageX,e.touches[0].pageY);else{var t,i=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(i,o)}x.subVectors(M,w).multiplyScalar(p.rotateSpeed);var n=p.domElement;N(2*Math.PI*x.x/n.clientHeight),t=2*Math.PI*x.y/n.clientHeight,P.phi-=t,w.copy(M)}function G(e){if(1==e.touches.length)A.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(t,i)}L.subVectors(A,T).multiplyScalar(p.panSpeed),D(L.x,L.y),T.copy(A)}function q(e){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;O.set(0,Math.sqrt(t*t+i*i)),k.set(0,Math.pow(O.y/_.y,p.zoomSpeed)),F(k.y),_.copy(O)}function Z(e){if(!1!==p.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;switch(e.preventDefault(),p.domElement.focus?p.domElement.focus():window.focus(),e.button){case 0:t=p.mouseButtons.LEFT;break;case 1:t=p.mouseButtons.MIDDLE;break;case 2:t=p.mouseButtons.RIGHT;break;default:t=-1}switch(t){case o.MOUSE.DOLLY:if(!1===p.enableZoom)return;_.set(e.clientX,e.clientY),v=y.DOLLY;break;case o.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===p.enablePan)return;B(e),v=y.PAN}else{if(!1===p.enableRotate)return;U(e),v=y.ROTATE}break;case o.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===p.enableRotate)return;U(e),v=y.ROTATE}else{if(!1===p.enablePan)return;B(e),v=y.PAN}break;default:v=y.NONE}v!==y.NONE&&(p.domElement.ownerDocument.addEventListener("pointermove",W),p.domElement.ownerDocument.addEventListener("pointerup",K),p.dispatchEvent(f))}(e)}}function W(e){if(!1!==p.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t,i;if(!1!==p.enabled)switch(e.preventDefault(),v){case y.ROTATE:if(!1===p.enableRotate)return;M.set(e.clientX,e.clientY),x.subVectors(M,w).multiplyScalar(p.rotateSpeed),t=p.domElement,N(2*Math.PI*x.x/t.clientHeight),i=2*Math.PI*x.y/t.clientHeight,P.phi-=i,w.copy(M),p.update();break;case y.DOLLY:if(!1===p.enableZoom)return;O.set(e.clientX,e.clientY),k.subVectors(O,_),k.y>0?F(z()):k.y<0&&V(z()),_.copy(O),p.update();break;case y.PAN:if(!1===p.enablePan)return;A.set(e.clientX,e.clientY),L.subVectors(A,T).multiplyScalar(p.panSpeed),D(L.x,L.y),T.copy(A),p.update()}}(e)}}function K(e){switch(e.pointerType){case"mouse":case"pen":p.domElement.ownerDocument.removeEventListener("pointermove",W),p.domElement.ownerDocument.removeEventListener("pointerup",K),!1!==p.enabled&&(p.dispatchEvent(m),v=y.NONE)}}function Q(e){!1!==p.enabled&&!1!==p.enableZoom&&(v===y.NONE||v===y.ROTATE)&&(e.preventDefault(),e.stopPropagation(),p.dispatchEvent(f),e.deltaY<0?V(z()):e.deltaY>0&&F(z()),p.update(),p.dispatchEvent(m))}function $(e){!1!==p.enabled&&!1!==p.enablePan&&function(e){var t=!1;switch(e.keyCode){case p.keys.UP:D(0,p.keyPanSpeed),t=!0;break;case p.keys.BOTTOM:D(0,-p.keyPanSpeed),t=!0;break;case p.keys.LEFT:D(p.keyPanSpeed,0),t=!0;break;case p.keys.RIGHT:D(-p.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),p.update())}(e)}function J(e){if(!1!==p.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(p.touches.ONE){case o.TOUCH.ROTATE:if(!1===p.enableRotate)return;H(e),v=y.TOUCH_ROTATE;break;case o.TOUCH.PAN:if(!1===p.enablePan)return;Y(e),v=y.TOUCH_PAN;break;default:v=y.NONE}break;case 2:switch(p.touches.TWO){case o.TOUCH.DOLLY_PAN:if(!1===p.enableZoom&&!1===p.enablePan)return;p.enableZoom&&j(e),p.enablePan&&Y(e),v=y.TOUCH_DOLLY_PAN;break;case o.TOUCH.DOLLY_ROTATE:if(!1===p.enableZoom&&!1===p.enableRotate)return;p.enableZoom&&j(e),p.enableRotate&&H(e),v=y.TOUCH_DOLLY_ROTATE;break;default:v=y.NONE}break;default:v=y.NONE}v!==y.NONE&&p.dispatchEvent(f)}}function ee(e){if(!1!==p.enabled)switch(e.preventDefault(),e.stopPropagation(),v){case y.TOUCH_ROTATE:if(!1===p.enableRotate)return;X(e),p.update();break;case y.TOUCH_PAN:if(!1===p.enablePan)return;G(e),p.update();break;case y.TOUCH_DOLLY_PAN:if(!1===p.enableZoom&&!1===p.enablePan)return;p.enableZoom&&q(e),p.enablePan&&G(e),p.update();break;case y.TOUCH_DOLLY_ROTATE:if(!1===p.enableZoom&&!1===p.enableRotate)return;p.enableZoom&&q(e),p.enableRotate&&X(e),p.update();break;default:v=y.NONE}}function et(e){!1!==p.enabled&&(p.dispatchEvent(m),v=y.NONE)}function ei(e){!1!==p.enabled&&e.preventDefault()}p.domElement.addEventListener("contextmenu",ei),p.domElement.addEventListener("pointerdown",Z),p.domElement.addEventListener("wheel",Q),p.domElement.addEventListener("touchstart",J),p.domElement.addEventListener("touchend",et),p.domElement.addEventListener("touchmove",ee),this.update()};n.prototype=Object.create(o.EventDispatcher.prototype),n.prototype.constructor=n;var r=function(e,t){n.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=o.MOUSE.PAN,this.mouseButtons.RIGHT=o.MOUSE.ROTATE,this.touches.ONE=o.TOUCH.PAN,this.touches.TWO=o.TOUCH.DOLLY_ROTATE};r.prototype=Object.create(o.EventDispatcher.prototype),r.prototype.constructor=r}}]);
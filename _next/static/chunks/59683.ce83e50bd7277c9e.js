"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59683],{91870:function(e,t,n){n.d(t,{a:function(){return b},b:function(){return c},c:function(){return a},e:function(){return T},f:function(){return o},g:function(){return h},i:function(){return d},j:function(){return y},l:function(){return g},n:function(){return m},s:function(){return i},t:function(){return w}});var r=n(77584);function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function i(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e}function o(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function u(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function s(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function l(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function c(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function f(e,t){let n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+a*a+i*i)}function p(e,t){let n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+a*a+i*i}function d(e){let t=e[0],n=e[1],r=e[2],a=e[3];return Math.sqrt(t*t+n*n+r*r+a*a)}function y(e){let t=e[0],n=e[1],r=e[2],a=e[3];return t*t+n*n+r*r+a*a}function m(e,t){let n=t[0],r=t[1],a=t[2],i=t[3],o=n*n+r*r+a*a+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=a*o,e[3]=i*o),e}function h(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function g(e,t,n,r){let a=t[0],i=t[1],o=t[2],u=t[3];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e[3]=u+r*(n[3]-u),e}function w(e,t,n){let r=t[0],a=t[1],i=t[2],o=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,e[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,e[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,e[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,e}function b(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function T(e,t){let n=e[0],a=e[1],i=e[2],o=e[3],u=t[0],s=t[1],l=t[2],c=t[3],f=(0,r.bn)();return Math.abs(n-u)<=f*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=f*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-l)<=f*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-c)<=f*Math.max(1,Math.abs(o),Math.abs(c))}Object.freeze(Object.defineProperty({__proto__:null,add:o,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:a,copyVec3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:f,distance:f,div:l,divide:l,dot:h,equals:T,exactEquals:b,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:d,length:d,lerp:g,max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},mul:s,multiply:s,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:m,random:function(e,t){let n,a,i,o,u,s;let l=r.FD;t=t||1;do u=(n=2*l()-1)*n+(a=2*l()-1)*a;while(u>=1);do s=(i=2*l()-1)*i+(o=2*l()-1)*o;while(s>=1);let c=Math.sqrt((1-u)/s);return e[0]=t*n,e[1]=t*a,e[2]=t*i*c,e[3]=t*o*c,e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:c,scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},set:i,sqrDist:p,sqrLen:y,squaredDistance:p,squaredLength:y,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:u,subtract:u,transformMat4:w,transformQuat:function(e,t,n){let r=t[0],a=t[1],i=t[2],o=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*i-s*a,f=l*a+s*r-o*i,p=l*i+o*a-u*r,d=-o*r-u*a-s*i;return e[0]=c*l+-(d*o)+-(f*s)- -(p*u),e[1]=f*l+-(d*u)+-(p*o)- -(c*s),e[2]=p*l+-(d*s)+-(c*u)- -(f*o),e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))},37966:function(e,t,n){function r(e){return null!=u(e)||null!=o(e)}function a(e){return s.test(e)}function i(e){return u(e)??o(e)}function o(e){let t=new Date(e);return!function(e,t){if(Number.isNaN(e.getTime()))return!1;let n=!0;if(c&&/\d+\W*$/.test(t)){let e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,r=0;for(;!t&&r<=e.length;)t=!l.test(e[r]),r++;n=!t}}return n}(t,e)?null:Number.isNaN(t.getTime())?null:t.getTime()-6e4*t.getTimezoneOffset()}function u(e){let t;let n=s.exec(e);if(!n?.groups)return null;let r=n.groups,a=+r.year,i=+r.month-1,o=+r.day,u=+(r.hours??"0"),l=+(r.minutes??"0"),c=+(r.seconds??"0");if(u>23||l>59||c>59)return null;let f=r.ms??"0",p=f?+f.padEnd(3,"0").substring(0,3):0;if(r.isUTC||!r.offsetSign)t=Date.UTC(a,i,o,u,l,c,p);else{let e=+r.offsetHours,n=+r.offsetMinutes;t=6e4*("+"===r.offsetSign?-1:1)*(60*e+n)+Date.UTC(a,i,o,u,l,c,p)}return Number.isNaN(t)?null:t}n.d(t,{mu:function(){return a},of:function(){return r},sG:function(){return i}});let s=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,l=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,c=!Number.isNaN(new Date("technology 10").getTime())},40465:function(e,t,n){function r(){return[0,0,0,0]}function a(e,t,n,r){return[e,t,n,r]}function i(){return r()}function o(){return a(1,1,1,1)}function u(){return a(1,0,0,0)}function s(){return a(0,1,0,0)}function l(){return a(0,0,1,0)}function c(){return a(0,0,0,1)}n.d(t,{Ue:function(){return r},al:function(){return a}});let f=i(),p=o(),d=u(),y=s(),m=l();Object.freeze(Object.defineProperty({__proto__:null,ONES:p,UNIT_W:c(),UNIT_X:d,UNIT_Y:y,UNIT_Z:m,ZEROS:f,clone:function(e){return[e[0],e[1],e[2],e[3]]},create:r,createView:function(e,t){return new Float64Array(e,t,4)},fromArray:function(e,t=r()){let n=Math.min(4,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t},fromValues:a,ones:o,unitW:c,unitX:u,unitY:s,unitZ:l,zeros:i},Symbol.toStringTag,{value:"Module"}))},18164:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(27817),a=n(94605),i=n(65223),o=n(31124),u=n(9985),s=n(62329),l=n(83339),c=n(33362),f=n(26978),p=n(71416),d=n(85536),y=n(75977),m=n(76261),h=n(32370),g=n(46200);let w="esri.layers.WFSLayer";class b{constructor(){this._customParameters=null,this._queryEngine=null,this._supportsPagination=!0}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t={}){let{getFeatureUrl:n,getFeatureOutputFormat:r,fields:i,geometryType:u,featureType:s,maxRecordCount:l,maxTotalRecordCount:d,maxPageCount:y,objectIdField:w,customParameters:b}=e,{spatialReference:T,getFeatureSpatialReference:_}=(0,m.fU)(n,s,e.spatialReference);try{await (0,f._W)(_,T)}catch{throw new a.Z("unsupported-projection","Projection not supported",{inSpatialReference:_,outSpatialReference:T})}(0,o.k_)(t),this._customParameters=b,this._featureType=s,this._fieldsIndex=h.Z.fromLayerJSON({fields:i,dateFieldsTimeReference:i.some(e=>"esriFieldTypeDate"===e.type)?{timeZoneIANA:g.pt}:null}),this._geometryType=u,this._getFeatureUrl=n,this._getFeatureOutputFormat=r,this._getFeatureSpatialReference=_,this._maxRecordCount=l,this._maxTotalRecordCount=d,this._maxPageCount=y,this._objectIdField=w,this._spatialReference=T;let x=await this._snapshotFeatures(t);if(x.errors.length>0&&(this._supportsPagination=!1,(x=await this._snapshotFeatures(t)).errors.length>0))throw x.errors[0];return this._queryEngine=new p.q({fieldsIndex:this._fieldsIndex,geometryType:u,hasM:!1,hasZ:!1,objectIdField:w,spatialReference:T,timeInfo:null,featureStore:new c.Z({geometryType:u,hasM:!1,hasZ:!1})}),this._queryEngine.featureStore.addMany(x.features),{warnings:F(x),extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new a.Z("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(e){return this._customParameters=e.customParameters,this._maxRecordCount=e.maxRecordCount,this._maxTotalRecordCount=e.maxTotalRecordCount,this._maxPageCount=e.maxPageCount,this._snapshotTask?.abort(),this._snapshotTask=(0,r.vr)(e=>this._snapshotFeatures({signal:e})),this._snapshotTask.promise.then(e=>{for(let t of(this._queryEngine.featureStore.clear(),this._queryEngine.featureStore.addMany(e.features),F(e)))i.Z.getLogger(w).warn(new u.Z("wfs-layer:refresh-warning",t.message,t.details));e.errors?.length&&i.Z.getLogger(w).warn(new u.Z("wfs-layer:refresh-error","Refresh completed with errors",{errors:e.errors}))},()=>{this._queryEngine.featureStore.clear()}),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _snapshotFeatures(e){let t=e?.signal,n=this._maxTotalRecordCount,r=this._maxPageCount,a=this._supportsPagination?await (0,m.bx)(this._getFeatureUrl,this._featureType.typeName,{customParameters:this._customParameters,signal:t}):void 0,i=[],u=[];if(null==a)try{i=await this._singleQuery(t)}catch(e){(0,o.D_)(e)||u.push(e)}else{let e=function*(e,t,n){for(let r=0;r<t;r++)yield e._pageQuery(r,n)}(this,Math.max(1,Math.min(Math.ceil(Math.min(a,n)/this._maxRecordCount),r)),t);await Promise.allSettled(Array.from({length:10}).map(()=>T(e,i,u)))}return(0,o.k_)(t),{features:i,totalRecordCount:a,maxTotalRecordCount:n,maxPageCount:r,errors:u}}async _singleQuery(e){let t=await (0,m.Bm)(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,signal:e});return this._processGeoJSON(t,{signal:e})}async _pageQuery(e,t){let n=e*this._maxRecordCount,r=await (0,m.Bm)(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,startIndex:n,count:this._maxRecordCount,signal:t});return this._processGeoJSON(r,{startIndex:n,signal:t})}_processGeoJSON(e,t){(0,d.O3)(e,this._getFeatureSpatialReference.wkid);let{startIndex:n,signal:r}=t;(0,o.k_)(r);let a=(0,d.lG)(e,{geometryType:this._geometryType,hasZ:!1,objectIdField:this._objectIdField});if(!(0,s.fS)(this._spatialReference,this._getFeatureSpatialReference))for(let e of a)null!=e.geometry&&(e.geometry=(0,l.GH)((0,f.iV)((0,l.di)(e.geometry,this._geometryType,!1,!1),this._getFeatureSpatialReference,this._spatialReference)));let i=n??1;for(let e of a){let t={};(0,y.O0)(this._fieldsIndex,t,e.attributes,!0),e.attributes=t,null==t[this._objectIdField]&&(e.objectId=t[this._objectIdField]=i++)}return a}}async function T(e,t,n){let r=e.next();for(;!r.done;){try{let e=await r.value;t.push(...e)}catch(e){(0,o.D_)(e)||n.push(e)}r=e.next()}}function F(e){let t=[];return null!=e.totalRecordCount&&(e.features.length<e.totalRecordCount&&t.push({name:"wfs-layer:maxRecordCount-too-low",message:`Could only fetch ${e.features.length} of ${e.totalRecordCount} in ${e.maxPageCount} queries. Try increasing the value of WFSLayer.maxRecordCount.`,details:{recordCount:e.features.length,totalRecordCount:e.totalRecordCount}}),e.totalRecordCount>e.maxTotalRecordCount&&t.push({name:"wfs-layer:large-dataset",message:`The number of ${e.totalRecordCount} features exceeds the maximum allowed of ${e.maxTotalRecordCount}.`,details:{recordCount:e.features.length,totalRecordCount:e.totalRecordCount,maxTotalRecordCount:e.maxTotalRecordCount}})),t}},85536:function(e,t,n){n.d(t,{O3:function(){return b},lG:function(){return F},my:function(){return T},q9:function(){return c}});var r=n(37966),a=n(94605),i=n(62329),o=n(53787),u=n(73503),s=n(67009);let l={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function c(e){return l[e]}function*f(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(let t of e.features)t&&(yield t)}}function p(e){let t=0;for(let n=0;n<e.length;n++){let r=e[n],a=e[(n+1)%e.length];t+=r[0]*a[1]-a[0]*r[1]}return t<=0}function d(e){let t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function y(e,t,n){let r=d(t);p(r)?h(e,r,n):g(e,r,n)}function m(e,t,n){let r=d(t);p(r)?g(e,r,n):h(e,r,n)}function h(e,t,n){for(let r of t)w(e,r,n);e.lengths.push(t.length)}function g(e,t,n){for(let r=t.length-1;r>=0;r--)w(e,t[r],n);e.lengths.push(t.length)}function w(e,t,n){let[r,a,i]=t;e.coords.push(r,a),n.hasZ&&e.coords.push(i||0)}function b(e,t=4326){if(!e)throw new a.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new a.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});let{crs:n}=e;if(!n)return;let r="string"==typeof n?n:"name"===n.type?n.properties.name:"EPSG"===n.type?n.properties.code:null,o=(0,i.oR)({wkid:t})?RegExp(".*(CRS84H?|4326)$","i"):RegExp(`.*(${t})$`,"i");if(!r||!o.test(r))throw new a.Z("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:n})}function T(e,t={}){let n=[],a=new Set,i=new Set,o,u=!1,c=null,p=!1,{geometryType:d=null}=t,y=!1;for(let t of f(e)){let{geometry:e,properties:f,id:m}=t;if((!e||(d||(d=l[e.type]),l[e.type]===d))&&(u||(u=function(e){for(let t of e)if(t.length>2)return!0;return!1}(function*(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(let t of e.coordinates)yield*t;break;case"MultiPolygon":for(let t of e.coordinates)for(let e of t)yield*e}}(e))),p||(p=null!=m)&&(o=typeof m,f&&(c=Object.keys(f).filter(e=>f[e]===m))),f&&c&&p&&null!=m&&(c.length>1?c=c.filter(e=>f[e]===m):1===c.length&&(c=f[c[0]]===m?c:[])),!y&&f)){let e=!0;for(let t in f){if(a.has(t))continue;let o=f[t];if(null==o){e=!1,i.add(t);continue}let u=function(e){switch(typeof e){case"string":return(0,r.mu)(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}(o);if("unknown"===u){i.add(t);continue}i.delete(t),a.add(t);let l=(0,s.q6)(t);l&&n.push({name:l,alias:t,type:u})}y=e}}let m=(0,s.q6)(1===c?.length&&c[0]||null)??void 0;if(m){for(let e of n)if(e.name===m&&(0,s.H7)(e)){e.type="esriFieldTypeOID";break}}return{fields:n,geometryType:d,hasZ:u,objectIdFieldName:m,objectIdFieldType:o,unknownFields:Array.from(i)}}function F(e,t){return Array.from(function*(e,t={}){let{geometryType:n,objectIdField:r}=t;for(let a of e){let e;let{geometry:i,properties:s,id:c}=a;if(i&&l[i.type]!==n)continue;let f=s||{};r&&(e=f[r],null==c||e||(f[r]=e=c));let p=new o.u_(i?function(e,t,n){switch(t.type){case"LineString":case"MultiPoint":return h(e,t.coordinates,n),e;case"MultiLineString":return function(e,t,n){for(let r of t.coordinates)h(e,r,n);return e}(e,t,n);case"MultiPolygon":return function(e,t,n){for(let r of t.coordinates){y(e,r[0],n);for(let t=1;t<r.length;t++)m(e,r[t],n)}return e}(e,t,n);case"Point":return w(e,t.coordinates,n),e;case"Polygon":return function(e,t,n){let r=t.coordinates;y(e,r[0],n);for(let t=1;t<r.length;t++)m(e,r[t],n);return e}(e,t,n)}}(new u.Z,i,t):null,f,null,e??void 0);yield p}}(f(e),t))}},75977:function(e,t,n){let r;n.d(t,{O0:function(){return d},av:function(){return l},b:function(){return h},d1:function(){return f},og:function(){return y}});var a=n(37966),i=n(62329),o=n(67009);class u{constructor(){this.code=null,this.description=null}}class s{constructor(e){this.error=new u,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function l(e){return new s(e)}class c{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function f(e){return new c(e)}let p=new Set;function d(e,t,n,r=!1){for(let i in p.clear(),n){let u=e.get(i);if(!u)continue;let s=function(e,t){let n=t;return(0,o.H7)(e)&&"string"==typeof t?n=parseFloat(t):(0,o.qN)(e)&&null!=t&&"string"!=typeof t?n=String(t):(0,o.y2)(e)&&"string"==typeof t&&(n=(0,a.sG)(t)),(0,o.Pz)(n)}(u,n[i]);if(p.add(u.name),u&&(r||u.editable)){let e=(0,o.Qc)(u,s);if(e)return l((0,o.vP)(e,u,s));t[u.name]=s}}for(let t of e?.requiredFields??[])if(!p.has(t.name))return l(`missing required field "${t.name}"`);return null}function y(e,t){if(!e||!(0,i.JY)(t))return e;if("rings"in e||"paths"in e){if(null==r)throw TypeError("geometry engine not loaded");return r.simplify(t,e)}return e}async function m(){return null==r&&(r=await Promise.all([n.e(58379),n.e(56362)]).then(n.bind(n,56362))),r}async function h(e,t){(0,i.JY)(e)&&("esriGeometryPolygon"===t||"esriGeometryPolyline"===t)&&await m()}},76261:function(e,t,n){n.d(t,{Bm:function(){return j},FU:function(){return _},be:function(){return P},bx:function(){return G},eB:function(){return N},fU:function(){return U},ft:function(){return R},u2:function(){return b}}),n(55066);var r=n(54748),a=n(94605),i=n(60728),o=n(72659),u=n(20928),s=n(62329),l=n(67828),c=n(85536),f=n(72594),p=n(96922),d=n(40041),y=n(67009),m=n(9377),h=n(36502);let g="xlink:href",w="2.0.0",b="__esri_wfs_id__",T="wfs-layer:feature-type-not-found",F="wfs-layer:unknown-geometry-type";async function _(e,t){let n=function(e){let t=v(e);(function(e){let t=e.firstElementChild?.getAttribute("version");if(t&&t!==w)throw new a.Z("wfs-layer:unsupported-wfs-version",`Unsupported WFS version ${t}. Supported version: ${w}`)})(t),A(t);let n=t.firstElementChild,r=(0,i.Fs)((0,f.H)(n,{FeatureTypeList:{FeatureType:e=>{let t={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",defaultSpatialReference:4326,supportedSpatialReferences:[]},n=new Set;return(0,f.h)(e,{Name:e=>{let{name:n,prefix:r}=O(e.textContent);t.typeName=`${r}:${n}`,t.name=n,t.namespacePrefix=r,t.namespaceUri=e.lookupNamespaceURI(r)},Abstract:e=>{t.description=e.textContent},Title:e=>{t.title=e.textContent},WGS84BoundingBox:e=>{t.extent=m.Z.fromJSON(function(e){let t,n,r,a;for(let i of e.children)switch(i.localName){case"LowerCorner":[t,n]=i.textContent.split(" ").map(e=>Number.parseFloat(e));break;case"UpperCorner":[r,a]=i.textContent.split(" ").map(e=>Number.parseFloat(e))}return{xmin:t,ymin:n,xmax:r,ymax:a,spatialReference:s.YU}}(e))},DefaultCRS:e=>{let r=C(e);r&&(t.defaultSpatialReference=r,n.add(r))},OtherCRS:e=>{let t=C(e);t&&n.add(t)}}),t.title||(t.title=t.name),n.add(4326),t.supportedSpatialReferences.push(...n),t}}}));return{operations:function(e){let t=!1,n={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}},r=[],i=[];if((0,f.h)(e,{OperationsMetadata:{Parameter:e=>{if("outputFormat"===e.getAttribute("name"))return{AllowedValues:{Value:({textContent:e})=>{e&&r.push(e)}}}},Operation:e=>{switch(e.getAttribute("name")){case"GetCapabilities":return{DCP:{HTTP:{Get:e=>{n.GetCapabilities.url=e.getAttribute(g)}}}};case"DescribeFeatureType":return{DCP:{HTTP:{Get:e=>{n.DescribeFeatureType.url=e.getAttribute(g)}}}};case"GetFeature":return{DCP:{HTTP:{Get:e=>{n.GetFeature.url=e.getAttribute(g)}}},Parameter:e=>{if("outputFormat"===e.getAttribute("name"))return{AllowedValues:{Value:({textContent:e})=>{e&&i.push(e)}}}}}}},Constraint:e=>{switch(e.getAttribute("name")){case"KVPEncoding":return{DefaultValue:e=>{t="true"===e.textContent.toLowerCase()}};case"ImplementsResultPaging":return{DefaultValue:e=>{n.GetFeature.supportsPagination="true"===e.textContent.toLowerCase()}}}}}}),n.GetFeature.outputFormat=S(i)??S(r),!t)throw new a.Z("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(null==n.GetFeature.outputFormat)throw new a.Z("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return n}(n),get featureTypes(){return Array.from(r())},readFeatureTypes:r}}((await (0,r.Z)(e,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:w,...t?.customParameters},signal:t?.signal})).data);return(0,o.$U)(e)&&((0,o.D6)(e,n.operations.DescribeFeatureType.url,!0)&&(n.operations.DescribeFeatureType.url=(0,o.hO)(n.operations.DescribeFeatureType.url)),(0,o.D6)(e,n.operations.GetFeature.url,!0)&&(n.operations.GetFeature.url=(0,o.hO)(n.operations.GetFeature.url))),n}let x=["json","application/json","geojson","application/json; subtype=geojson","application/geo+json"];function S(e){for(let t of x){let n=e.findIndex(e=>e.toLowerCase()===t);if(n>=0)return e[n]}return null}function C(e){let t=parseInt(e.textContent?.match(/(?<wkid>\d+$)/i)?.groups?.wkid??"",10);if(!Number.isNaN(t))return t}function R(e,t,n){return(0,i.sE)(e,e=>n?e.name===t&&e.namespaceUri===n:e.typeName===t||e.name===t)}async function P(e,t,n,r={}){let{featureType:a,extent:i}=await M(e,t,n,r),{spatialReference:o}=U(e.operations.GetFeature.url,a,r.spatialReference),{fields:u,geometryType:s,swapXY:l,objectIdField:c,geometryField:f}=await E(e,a,o,r);return{url:e.operations.GetCapabilities.url,name:a.name,namespaceUri:a.namespaceUri,fields:u,geometryField:f,geometryType:s,objectIdField:c,spatialReference:r.spatialReference??new h.Z({wkid:a.defaultSpatialReference}),extent:i,swapXY:l,wfsCapabilities:e,customParameters:r.customParameters}}async function M(e,t,n,r={}){let i=e.readFeatureTypes(),o=t?R(i,t,n):i.next().value,{spatialReference:l=new h.Z({wkid:o?.defaultSpatialReference})}=r;if(null==o)throw t?new a.Z(T,`The type '${t}' could not be found in the service`):new a.Z("wfs-layer:empty-service","The service is empty");let c=o.extent;if(c&&!(0,s.fS)(c.spatialReference,l))try{await (0,u.initializeProjection)(c.spatialReference,l,void 0,r),c=(0,u.project)(c,l)}catch{throw new a.Z("wfs-layer:unsupported-spatial-reference","Projection not supported")}return{extent:c,spatialReference:l,featureType:o}}async function E(e,t,n,r={}){let{typeName:i}=t,[o,u]=await Promise.allSettled([Z(e.operations.DescribeFeatureType.url,i,r),k(e,i,n,r)]),s=e=>new a.Z("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${i}'`,{error:e});if("rejected"===o.status)throw s(o.reason);if("rejected"===u.status)throw s(u.reason);let{fields:l,errors:c}=o.value??{},f=o.value?.geometryType||u.value?.geometryType,p=u.value?.swapXY??!1;if(null==f)throw new a.Z(F,`The geometry type could not be determined for type '${i}`,{typeName:i,geometryType:f,fields:l,errors:c});return{...N(l??[]),geometryType:f,swapXY:p}}function N(e){let t=e.find(e=>"geometry"===e.type),n=e.find(e=>"oid"===e.type);return e=e.filter(e=>"geometry"!==e.type),n||(n=new d.Z({name:b,type:"oid",alias:b}),e.unshift(n)),{geometryField:t?.name??null,objectIdField:n.name,fields:e}}async function k(e,t,n,a={}){let i,o=!1,[u,s]=await Promise.all([j(e.operations.GetFeature.url,t,n,e.operations.GetFeature.outputFormat,{...a,count:1}),(0,r.Z)(e.operations.GetFeature.url,{responseType:"text",query:q(t,n,void 0,{...a,count:1}),signal:a?.signal})]),f="FeatureCollection"===u.type&&u.features[0]?.geometry;if(f){let e;switch(i=l.M.fromJSON((0,c.q9)(f.type)),f.type){case"Point":e=f.coordinates;break;case"LineString":case"MultiPoint":e=f.coordinates[0];break;case"MultiLineString":case"Polygon":e=f.coordinates[0][0];break;case"MultiPolygon":e=f.coordinates[0][0][0]}let t=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(s.data);if(t){let n=e[0].toFixed(3),r=e[1].toFixed(3),a=parseFloat(t[1]).toFixed(3);n===parseFloat(t[2]).toFixed(3)&&r===a&&(o=!0)}}return{geometryType:i,swapXY:o}}async function Z(e,t,n){return function(e,t){let{name:n}=O(e),r=v(t);A(r);let o=(0,i.sE)((0,f.H)(r.firstElementChild,{element:e=>e}),e=>e.getAttribute("name")===n);if(null!=o){let e=o.getAttribute("type"),t=e?(0,i.sE)((0,f.H)(r.firstElementChild,{complexType:e=>e}),t=>t.getAttribute("name")===O(e).name):(0,i.sE)((0,f.H)(o,{complexType:e=>e}),()=>!0);if(t)return function(e){let t;let n=[],r=[];for(let i of(0,f.H)(e,{complexContent:{extension:{sequence:{element:e=>e}}}})){let o,u;let s=i.getAttribute("name");if(!s||(i.hasAttribute("type")?o=O(i.getAttribute("type")).name:(0,f.h)(i,{simpleType:{restriction:e=>(o=O(e.getAttribute("base")).name,{maxLength:e=>{u=+e.getAttribute("value")}})}}),!o))continue;let l="true"===i.getAttribute("nillable"),c=!1;switch(o.toLowerCase()){case"integer":case"nonpositiveinteger":case"negativeinteger":case"long":case"int":case"short":case"byte":case"nonnegativeinteger":case"unsignedlong":case"unsignedint":case"unsignedshort":case"unsignedbyte":case"positiveinteger":r.push(new d.Z({name:s,alias:s,type:"integer",nullable:l,length:(0,y.ZR)("integer")}));break;case"float":case"double":case"decimal":r.push(new d.Z({name:s,alias:s,type:"double",nullable:l,length:(0,y.ZR)("double")}));break;case"boolean":case"string":case"gyearmonth":case"gyear":case"gmonthday":case"gday":case"gmonth":case"anyuri":case"qname":case"notation":case"normalizedstring":case"token":case"language":case"idrefs":case"entities":case"nmtoken":case"nmtokens":case"name":case"ncname":case"id":case"idref":case"entity":case"duration":case"time":r.push(new d.Z({name:s,alias:s,type:"string",nullable:l,length:u??(0,y.ZR)("string")}));break;case"datetime":case"date":r.push(new d.Z({name:s,alias:s,type:"date",nullable:l,length:u??(0,y.ZR)("date")}));break;case"pointpropertytype":t="point",c=!0;break;case"multipointpropertytype":t="multipoint",c=!0;break;case"curvepropertytype":case"multicurvepropertytype":case"multilinestringpropertytype":t="polyline",c=!0;break;case"surfacepropertytype":case"multisurfacepropertytype":case"multipolygonpropertytype":t="polygon",c=!0;break;case"geometrypropertytype":case"multigeometrypropertytype":c=!0,n.push(new a.Z(F,`geometry type '${o}' is not supported`,{type:(new XMLSerializer).serializeToString(e)}));break;default:n.push(new a.Z("wfs-layer:unknown-field-type",`Unknown field type '${o}'`,{type:(new XMLSerializer).serializeToString(e)}))}c&&r.push(new d.Z({name:s,alias:s,type:"geometry",nullable:l}))}for(let e of r)if("integer"===e.type&&!e.nullable&&I.has(e.name.toLowerCase())){e.type="oid";break}return{geometryType:t,fields:r,errors:n}}(t)}throw new a.Z(T,`Type '${e}' not found in document`,{document:(new XMLSerializer).serializeToString(r)})}(t,(await (0,r.Z)(e,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:w,TYPENAME:t,TYPENAMES:t,...n?.customParameters},signal:n?.signal})).data)}let I=new Set(["objectid","fid"]);async function j(e,t,n,i,o){let{data:u}=await (0,r.Z)(e,{responseType:"text",query:q(t,n,i,o),signal:o?.signal});u=u.replaceAll(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{return JSON.parse(u)}catch(e){throw new a.Z("wfs-layer:malformed-json","Error while parsing the\xa0response",{response:u,error:e})}}function q(e,t,n,r){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:w,TYPENAMES:e,OUTPUTFORMAT:n,SRSNAME:"EPSG:"+("number"==typeof t?t:t.wkid),STARTINDEX:r?.startIndex,COUNT:r?.count,...r?.customParameters}}async function G(e,t,n){let a=await (0,r.Z)(e,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:w,TYPENAMES:t,RESULTTYPE:"hits",...n?.customParameters},signal:n?.signal}),i=/numberMatched=["'](?<numberMatched>\d+)["']/gi.exec(a.data);if(i?.groups)return+i.groups.numberMatched}function v(e){return(new DOMParser).parseFromString(e.trim(),"text/xml")}function O(e){let[t,n]=e.split(":");return{prefix:n?t:"",name:n??t}}function A(e){let t="",n="";if((0,f.h)(e.firstElementChild,{Exception:e=>(t=e.getAttribute("exceptionCode"),{ExceptionText:e=>{n=e.textContent}})}),t)throw new a.Z(`wfs-layer:${t}`,n)}function U(e,t,n){let r={wkid:t.defaultSpatialReference},a=null!=n?.wkid?{wkid:n.wkid}:r;return{spatialReference:a,getFeatureSpatialReference:(0,p.B5)(e)||a.wkid&&t.supportedSpatialReferences.includes(a.wkid)?{wkid:a.wkid}:{wkid:t.defaultSpatialReference}}}},72594:function(e,t,n){n.d(t,{H:function(){return function* e(t,n){for(let r of t.children)if(r.localName in n){let t=n[r.localName];"function"==typeof t?yield t(r):yield*e(r,t)}}},h:function(){return function e(t,n){if(t&&n){for(let r of t.children)if(r.localName in n){let t=n[r.localName];if("function"==typeof t){let n=t(r);n&&e(r,n)}else e(r,t)}}}}})}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89616],{89616:function(t,e,i){i.r(e),i.d(e,{Solution:function(){return W}});var s,o,n,h,r=i(8483);class l{Init(){let t=document.createElement("canvas");if(t){this.canvas=t,this.canvas.width=this.div.clientWidth,this.canvas.height=this.div.clientHeight,this.div.append(this.canvas);let e=this.canvas.getContext("2d");e&&(this.ctx=e,this.isActive=!0)}}LoopInit(){this.translation[0]=.5*this.ctx.canvas.width,this.translation[1]=.5*this.ctx.canvas.height,this.deltaTime=new r.gk,this.canvasLoopController=new r.NI(60),this.SetLevel4(),this.Loop()}Loop(){let t=performance.now();if(this.deltaTime.UpdateFPS(),this.canvasLoopController.level>3){if(6===this.canvasLoopController.level)requestAnimationFrame(()=>{this.Loop()}),this.RenderPre(this.ctx);else if(5===this.canvasLoopController.level)this.isViewChanging,requestAnimationFrame(()=>{this.Loop()}),this.RenderPre(this.ctx);else if(4===this.canvasLoopController.level){if(this.isViewChanging,requestAnimationFrame(()=>{this.Loop()}),this.canvasLoopController.stop)return;this.RenderPre(this.ctx),this.canvasLoopController.TimerForStop()}}else 1===this.canvasLoopController.level&&this.isViewChanging||this.RenderPre(this.ctx);let e=performance.now();this.log="level:  ".concat(this.canvasLoopController.level,", total frames: ").concat(this.loopNum++," (FPS: ").concat(this.deltaTime.frameRate.toFixed(0),"), a loop took: ").concat((e-t).toFixed(2)," ms to execute.")}SetLevel1(){this.canvasLoopController.level=1,this.Loop()}SetLevel2(){this.canvasLoopController.level=2,this.Loop()}SetLevel3(){this.canvasLoopController.level=3,this.Loop()}RenderSetLevel4(){this.canvasLoopController.stop=!0}SetLevel4(){this.canvasLoopController.Reset(),setTimeout(()=>{this.canvasLoopController.level=4,this.Loop()},500)}SetLevel5(){this.canvasLoopController.Reset(),setTimeout(()=>{this.canvasLoopController.level=5,this.Loop()},500)}SetLevel6(){this.canvasLoopController.Reset(),setTimeout(()=>{this.canvasLoopController.level=6,this.Loop()},500)}Clear(t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}Zoom(t){t.wheel<0?this.zoom+=.09*this.zoom:(console.log("out",this.zoom),this.zoom-=.09*this.zoom)}RemapByZoom(t){return t.x=(t.xs-this.translation[0])/this.zoom,t.y=(t.ys-this.translation[1])/this.zoom,t}Pan(t){if(!this.ablePan)return;let e=t.xs-t.preXs,i=t.ys-t.preYs;this.translation[0]+=e,this.translation[1]+=i}RenderForce(){this.canvasLoopController.stop=!1}RenderPre(t){this.isActive&&(this.Clear(this.ctx),this.ctx.save(),this.ctx.translate(this.translation[0],this.translation[1]),this.ctx.scale(this.zoom,this.zoom),this.Render(t),this.ctx.restore())}Render(t){}constructor(t,e){this.isActive=!1,this.zoom=1,this.translation=[0,0],this.translationZoom=[0,0],this.isViewChanging=!1,this.loopNum=0,this.needRenderloop=!0,this.ablePan=!0,this.pause=!1,this.core=t,this.div=e,this.Init(),this.LoopInit()}}(s=n||(n={})).LEFT="LEFT",s.MIDDLE="MIDDLE",s.RIGHT="RIGHT",s.WHEEL="WHEEL",s.DRAG="DRAG",s.DRAG_LEFT="DRAG_LEFT",s.DRAG_MIDDLE="DRAG_MIDDLE",s.DRAG_RIGHT="DRAG_RIGHT",s.MOVE="MOVE",s.DOUBLE="DOUBLE",s.UP="UP",s.DOWN="DOWN",s.DOWN_MIDDLE="DOWN_MIDDLE",s.DOWN_RIGHT="DOWN_RIGHT";class a{DeepCopy(){let t=new a;return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.xs=this.x,t.ys=this.y,t.preXs=this.preXs,t.preYs=this.preYs,t.pressedAlt=this.pressedAlt,t.pressedShift=this.pressedShift,t.pressedCtrl=this.pressedCtrl,t.isDoubleClick=this.isDoubleClick,t.isDown=this.isDown,t.isMove=this.isMove,t.wheel=this.wheel,t.preWheel=this.preWheel,t.yGLPicking=this.yGLPicking,t.CLICK_TYPE=this.CLICK_TYPE,t.command=this.command,t.native=this.native,t}constructor(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.xs=-1,this.ys=-1,this.preXs=-1,this.preYs=-1,this.CLICK_TYPE="MOVE",this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.wheel=0,this.preWheel=0,this.isActive=!0}}class c{InitNativeMouseEvent(t){t.onclick=t=>{this.prevent=!1,this.timer=setTimeout(()=>{this.prevent||this.MouseClick(t),this.prevent=!1},this.delay)},t.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},t.onmousedown=t=>{this.MouseDown(t)},t.onmouseup=t=>{this.MouseUp(t)},t.onmousemove=t=>{this.MouseMove(t)},t.addEventListener("contextmenu",t=>{t.preventDefault()}),t.addEventListener("wheel",t=>this.MouseWheel(t,t.deltaY))}MouseDown(t){this.click=!0,this.down=!0;let e=this.CommonEventBuilder(t);e.CLICK_TYPE=n.DOWN,e.isDown=!0,this.MouseEvenEmitting(e)}MouseClick(t){if(!this.click)return;let e=this.CommonEventBuilder(t);0===t.button?e.CLICK_TYPE=n.LEFT:1===t.button?e.CLICK_TYPE=n.MIDDLE:2===t.button&&(e.CLICK_TYPE=n.RIGHT),this.MouseEvenEmitting(e)}MouseDoubleClick(t){let e=this.CommonEventBuilder(t);e.CLICK_TYPE=n.DOUBLE,this.MouseEvenEmitting(e)}MouseDrag(t){this.click=!1,this.prevent=!0;let e=this.CommonEventBuilder(t);e.CLICK_TYPE=n.DRAG,e.isDown=!0,1===t.buttons?e.CLICK_TYPE=n.DRAG:4===t.buttons?e.CLICK_TYPE=n.DRAG_MIDDLE:2===t.buttons&&(e.CLICK_TYPE=n.DRAG_RIGHT),this.MouseEvenEmitting(e)}MouseMove(t){if(this.down){this.MouseDrag(t);return}let e=this.CommonEventBuilder(t);e.CLICK_TYPE=n.MOVE,e.isDown=!0,this.prevent=!0,this.MouseEvenEmitting(e)}MouseUp(t){this.down=!1,this.click=!0;let e=this.CommonEventBuilder(t);e.CLICK_TYPE=n.UP,e.isDown=!1,this.MouseEvenEmitting(e)}MouseWheel(t,e){let i=this.CommonEventBuilder(t);i.wheel=e,i.CLICK_TYPE=n.WHEEL,this.MouseEvenEmitting(i)}CommonEventBuilder(t){let e=new a;return e.preXs=this.mouseEventDataPre.xs,e.preYs=this.mouseEventDataPre.ys,e.preX=this.mouseEventDataPre.x,e.preY=this.mouseEventDataPre.y,e.pressedShift=t.shiftKey,e.pressedAlt=t.altKey,e.pressedCtrl=t.ctrlKey,e.xs=t.offsetX,e.ys=t.offsetY,e.preWheel=this.mouseEventDataPre.wheel,e.wheel=0,e.native=t,e=this.ioWrapper.core.canvas.RemapByZoom(e),this.mouseEventDataPre=e,this.e=e,e}get stopPropagation(){return this._stopPropagation}set stopPropagation(t){t?this._stopPropagation=t:setTimeout(()=>{this._stopPropagation=t},500)}MouseEvenEmitting(t){this.MouseEventEmittingForViewController(t),this._stopPropagation||this.MouseEventEmittingForModel(t)}MouseEventEmittingForViewController(t){this.mouseInteractionUI&&this.mouseInteractionUI.MouseInteractionMenu(t)}MouseEventEmittingForModel(t){this.ioWrapper.core.activeCommandController.MouseEventController(t)}constructor(t){this.mouseEventDataPre=new a,this.isEnable=!0,this.clickCount=0,this.click=!1,this.prevent=!1,this.delay=250,this.down=!1,this._stopPropagation=!1,this.ioWrapper=t}}class u{InitEventListener(t){this.mouseInteraction.InitNativeMouseEvent(t),this.Resize()}Resize(){window.addEventListener("resize",t=>this.ReSizeWindow(t))}ReSizeWindow(t){}constructor(t){this.core=t,this.mouseInteraction=new c(this)}}class d{MouseEventController(t){let e=t.DeepCopy();if(e.x=t.xs,e.y=t.ys,this.core.nUI.MouseInteractionMenu(e),!this.core.nUI.stopPropagation){if(this.core.canvas.RenderForce(),this.core.app.implementations.MouseEventController(t),t.CLICK_TYPE===r.uh.LEFT){this.MouseLeftClickPre(t);return}if(t.CLICK_TYPE===r.uh.MIDDLE){this.MouseMiddleClickPre(t);return}if(t.CLICK_TYPE===r.uh.DOWN_RIGHT){this.MouseRightClickPre(t);return}if(t.CLICK_TYPE===r.uh.DOUBLE){this.MouseDoubleClickPre(t);return}if(t.CLICK_TYPE===r.uh.MOVE){this.MouseMovePre(t);return}else if(t.CLICK_TYPE===r.uh.DRAG){this.MouseDragPre(t);return}else if(t.CLICK_TYPE===r.uh.DOWN){this.MouseDownPre(t);return}else if(t.CLICK_TYPE===r.uh.DRAG_RIGHT){this.MouseDragRightPre(t);return}else if(t.CLICK_TYPE===r.uh.WHEEL){this.MouseWheelPre(t);return}else if(t.CLICK_TYPE===r.uh.UP){this.MouseUpPre(t);return}}}MouseDown(t){}MouseDownPre(t){this.MouseDown(t)}MouseLeftClick(t){}MouseLeftClickPre(t){this.MouseLeftClick(t)}MouseMiddleClick(t){}MouseMiddleClickPre(t){this.MouseMiddleClick(t)}MouseRightClick(t){}MouseRightClickPre(t){this.MouseRightClick(t)}MouseUp(t){}MouseUpPre(t){this.MouseUp(t)}MouseDoubleClick(t){}MouseDoubleClickPre(t){this.MouseDoubleClick(t)}MouseMove(t){}MouseMovePre(t){this.MouseMove(t)}MouseDrag(t){}MouseDragPre(t){this.mouse.x=t.x,this.mouse.y=t.y,this.MouseDrag(t)}MouseDragRight(t){}MouseDragRightPre(t){this.mouse.x=t.x,this.mouse.y=t.y,this.core.canvas.Pan(t),this.MouseDragRight(t)}MouseWheel(t){}MouseWheelPre(t){this.core.canvas.Zoom(t),this.MouseWheel(t)}pushActionFromPulldown(t){t.split("@")[0]}constructor(t){this.mouse=new r.h9(0,0),this.core=t}}class m{InitCanvas(t){this.canvas=new l(this,t)}InitPulldown(){this.nUI=new r.Fc(this.app.div),this.BindingActiveCommandController()}InitPost(){this.ioWrapper.InitEventListener(this.app.div)}BindingActiveCommandController(){this.nUI.BindingActiveCommandController("NDrawingBlock",t=>this.Commander(t))}Resize(t,e){this.nUI.Resize(t,e)}Commander(t){this.activeCommandController.pushActionFromPulldown(t)}constructor(t,e){this.app=t,this.InitPulldown(),this.InitCanvas(e),this.activeCommandController=new d(this),this.ioWrapper=new u(this)}}class C{OnRender(t){this.Update(t),this.Render(t)}Update(t){}Render(t){r.gi.GridLineOrigin(t,10,10,75,75);for(let e=0;e<this.implementation.scene.MBoxes.length;++e)this.implementation.scene.MBoxes[e].Render(t);for(let e=0;e<this.implementation.scene.listBlocks.length;++e)this.implementation.scene.listBlocks[e].Render(t);t.fillStyle="#00ff00",t.beginPath(),t.arc(this.activeCommandController.mouse.x,this.activeCommandController.mouse.y,2,0,2*Math.PI),t.closePath(),t.fill()}constructor(t){this.implementation=t,this.activeCommandController=this.implementation.activeCommandController}}class p{Pick(t){for(let e=0;e<this.implementation.scene.listBlocks.length;++e)if(this.implementation.scene.listBlocks[e].IsInside(t))return this.implementation.scene.listBlocks[e]}constructor(t){this.implementation=t}}var v=i(25785);class M{Render(t){}constructor(t){this.fillColor="#000000",this.strokeColor="#ffffff",this.scene=t}}class E extends M{Init(){v.World.add(this.scene.world,this.body),this.scene.MBoxes.push(this)}Render(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawRectByCen(t,this.position.x,this.position.y,this.width,this.height,this.angle)}DrawRectByCen(t,e,i,s,o,n){t.save(),t.translate(this.position.x,this.position.y),t.rotate(n),t.lineWidth=1,t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.rect(-(.5*s),-(.5*o),this.width,this.height),t.fill(),t.stroke(),t.restore()}constructor(t,e,i,s,o,n=!1){super(t),this.scene=t,this.width=s,this.height=o,this.fillColor=r.mK.GetRandomColor(),this.strokeColor=r.mK.GetRandomColor(),this.body=v.Bodies.rectangle(e,i,s,o,{isStatic:n,restitution:.5,friction:.5}),this.Init()}}class P extends M{Init(){v.World.add(this.scene.world,this.body),this.scene.MBoxes.push(this)}Render(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawCircle(t,this.position.x,this.position.y,this.radius,this.angle)}DrawCircle(t,e,i,s,o){t.save(),t.translate(e,i),t.rotate(o),t.lineWidth=1,t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI),t.fill(),t.stroke(),t.restore()}constructor(t,e,i,s,o=!1){super(t),this.radius=s,this.fillColor=r.mK.GetRandomColor(),this.strokeColor=r.mK.GetRandomColor(),this.body=v.Bodies.circle(e,i,this.radius,{isStatic:o,restitution:.5,friction:.5}),this.Init()}}class L extends M{Init(){v.World.add(this.scene.world,this.body),this.scene.MBoxes.push(this)}Render(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawCircle(t,this.position.x,this.position.y,this.radius,this.angle)}DrawCircle(t,e,i,s,o){t.lineWidth=1,t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.moveTo(this.body.vertices[0].x,this.body.vertices[0].y);for(let e=1;e<this.body.vertices.length;++e)t.lineTo(this.body.vertices[e].x,this.body.vertices[e].y);t.closePath(),t.fill(),t.stroke()}constructor(t,e,i,s,o,n=!1){super(t),this.side=s,this.fillColor=r.mK.GetRandomColor(),this.strokeColor=r.mK.GetRandomColor(),this.radius=o,this.body=v.Bodies.polygon(e,i,3,this.radius,{isStatic:n,restitution:.5,friction:.5}),this.Init()}}class I extends M{Init(){v.World.add(this.scene.world,this.body),this.scene.MBoxes.push(this)}Render(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawRectByCen(t,this.position.x,this.position.y,this.width,this.height,this.angle)}DrawRectByCen(t,e,i,s,o,n){t.save(),t.translate(this.position.x,this.position.y),t.rotate(n),t.lineWidth=1,t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.rect(-(.5*s),-(.5*o),this.width,this.height),t.fill(),t.stroke(),t.restore()}constructor(t,e,i,s,o,n=!1){super(t),this.width=s,this.height=o,this.fillColor=r.mK.GetRandomColor(),this.strokeColor=r.mK.GetRandomColor(),this.body=v.Bodies.fromVertices(e,i,[[{x:0,y:0},{x:50,y:25},{x:100,y:0},{x:50,y:50}]],{isStatic:n,restitution:.5,friction:.5}),this.Init()}}class g{MouseEventController(t){if(this.ac.mouse.x=t.x,this.ac.mouse.y=t.y,t.CLICK_TYPE===n.LEFT){this.MouseLeftClickPre(t);return}if(t.CLICK_TYPE===n.MIDDLE){this.MouseMiddleClickPre(t);return}if(t.CLICK_TYPE===n.DOWN_RIGHT){this.MouseRightClickPre(t);return}if(t.CLICK_TYPE===n.DOUBLE){this.MouseDoubleClickPre(t);return}if(t.CLICK_TYPE===n.MOVE){this.MouseMovePre(t);return}if(t.CLICK_TYPE===n.DRAG){this.MouseDragPre(t);return}if(t.CLICK_TYPE===n.DOWN){this.MouseDownPre(t);return}else if(t.CLICK_TYPE===n.WHEEL){this.MouseWheelPre(t);return}else if(t.CLICK_TYPE===n.UP){this.MouseUpPre(t);return}}MouseDown(t){}MouseDownPre(t){let e=this.ac.implementation.geometryCommon.Pick(this.ac.mouse);e&&(this.ac.ablePan=!1,this.ac.capture=e),this.MouseDown(t)}MouseLeftClick(t){}MouseLeftClickPre(t){this.MouseLeftClick(t)}MouseMiddleClick(t){}MouseMiddleClickPre(t){this.MouseMiddleClick(t)}MouseRightClick(t){}MouseRightClickPre(t){this.MouseRightClick(t)}MouseUp(t){}MouseUpPre(t){this.ac.ablePan=!0,this.ac.capture=void 0,this.MouseUp(t)}MouseDoubleClick(t){}MouseDoubleClickPre(t){this.MouseDoubleClick(t)}MouseMove(t){}MouseMovePre(t){this.MouseMove(t)}MouseDrag(t){}MouseDragPre(t){this.ac.capture&&this.ac.capture.Translation(t),this.MouseDrag(t)}MouseWheel(t){}MouseWheelPre(t){this.MouseWheel(t)}constructor(t){this.ac=t}}class D extends g{constructor(t){super(t)}}class R extends g{MouseLeftClick(t){new E(this.ac.implementation.scene,t.x,t.y,50*Math.random(),50*Math.random())}constructor(t){super(t)}}class w extends g{MouseLeftClick(t){new P(this.ac.implementation.scene,t.x,t.y,50*Math.random())}constructor(t){super(t)}}class f extends g{MouseLeftClick(t){new L(this.ac.implementation.scene,t.x,t.y,3,50*Math.random())}constructor(t){super(t)}}class y extends g{MouseLeftClick(t){new I(this.ac.implementation.scene,t.x,t.y,3,50*Math.random())}constructor(t){super(t)}}(o=h||(h={})).SELECT="SELECT",o.REMOVE="REMOVE",o.RECT="RECT",o.CIRCLE="CIRCLE",o.TRIGON="TRIGON",o.CROSS="CROSS",o.DRAWING_BLOCK="DRAWING_BLOCK";class k{SetActiveCommand(t){this.activeCommand=this.commands[t]}get ablePan(){return this._ablePan}set ablePan(t){this.implementation.implmentations.app.core.canvas.ablePan=t,this._ablePan=t}constructor(t){this.mouse=new r.h9(0,0),this.capture=void 0,this._ablePan=!1,this.implementation=t,this.commands={SELECT:new D(this),RECT:new R(this),CIRCLE:new w(this),TRIGON:new f(this),CROSS:new y(this)},this.SetActiveCommand("CIRCLE")}}class x{Init(){let t=document.createElement("button");t.type="button",t.innerText="select",t.onclick=()=>{this.implementation.activeCommandController.SetActiveCommand(h.SELECT)},this.div.append(t),(t=document.createElement("button")).type="button",t.innerText="rect",t.onclick=()=>{this.implementation.activeCommandController.SetActiveCommand(h.RECT)},this.div.append(t),(t=document.createElement("button")).type="button",t.innerText="cir",t.onclick=()=>{this.implementation.activeCommandController.SetActiveCommand(h.CIRCLE)},this.div.append(t),(t=document.createElement("button")).type="button",t.innerText="Tri",t.onclick=()=>{this.implementation.activeCommandController.SetActiveCommand(h.TRIGON)},this.div.append(t),(t=document.createElement("button")).type="button",t.innerText="CRO",t.onclick=()=>{this.implementation.activeCommandController.SetActiveCommand(h.CROSS)},this.div.append(t)}constructor(t){this.implementation=t,this.divHost=t.implmentations.app.hostDiv;let e=document.createElement("div");e&&(this.div=e,this.divHost.insertBefore(this.div,t.implmentations.app.div),t.implmentations.app.div.style.height="90%",this.Init())}}class T{InitMatter(){this.engine=v.Engine.create(),this.world=this.engine.world,console.log(this.world),v.Runner.run(this.engine)}InitMatterNew(){this.engine=v.Engine.create(),this.world=this.engine.world;var t=v.Render.create({engine:this.engine});v.Render.run(t);var e=v.Runner.create();v.Runner.run(e,this.engine)}Add(t){}InitPost(){this.MBoxes.push(new E(this,0,400,500,50,!0)),this.MBoxes.push(new E(this,100,100,50,50)),setInterval(()=>{this.MBoxes.push(new E(this,100+(Math.random()-.5)*10,0,50,50))},1e3)}constructor(t){this.listBlocks=[],this.MBoxes=[],this.implementation=t,this.InitMatterNew()}}class b{Init(){this.activeCommandController=new k(this),this.geometryCommon=new p(this),this.scene=new T(this),this.renderer=new C(this),this.view=new x(this),this.InitPost()}InitPost(){this.scene.InitPost(),this.implmentations.app.core.canvas.SetLevel6()}MouseEventController(t){this.activeCommandController.activeCommand.MouseEventController(t)}Render(t){this.renderer.OnRender(t)}constructor(t){this.implmentations=t,this.Init()}}class _{MouseEventController(t){this.implementation&&this.implementation.MouseEventController(t)}Render(t){this.implementation&&this.implementation.Render(t)}constructor(t){this.app=t,this.implementation=new b(this)}}class S{static Init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SandBox";new S(t)}Init(){let t=document.getElementById(this.id);if(!t)return;this.hostDiv=t;let e=document.createElement("div");e&&(this.div=e,this.div.style.width="100%",this.div.style.height="100%",this.hostDiv.append(this.div)),this.core=new m(this,e),this.implementations=new _(this)}InitPost(){this.core.InitPost(),this.core.canvas.Render=t=>this.implementations.Render(t)}constructor(t="SandBox"){this.id=t,this.Init(),this.InitPost()}}class B{static Init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SandBox";new B(t,1)}Init(){1===this.version&&(this.appV1=new S(this.id))}constructor(t="SandBox",e=1){this.version=1,this.id=t,this.version=e,this.Init()}}class W{destroy(){try{for(;void 0!==this.divHost&&void 0!==this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}catch(t){console.debug(t)}}constructor(t,e=0){this.divHost=document.getElementById(t);let i=document.createElement("div");i.id="ngl3d",i.style.width="100%",i.style.height="100%",this.divHost.appendChild(i),B.Init(i.id)}}}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17329],{11752:function(e,t,n){n.d(t,{a:function(){return m},b:function(){return b},c:function(){return p},f:function(){return U},g:function(){return v},j:function(){return E},n:function(){return R}}),n(37180),n(65223);var r=n(13507),o=n(94807),i=n(60964),u=n(82955),a=n(91870),c=n(40465),l=n(77584),s=n(37436),f=n(48350),d=n(14157),h=n(53524);let g=p();function p(){return(0,c.Ue)()}let y=a.e,w=a.e;function m(e,t){return(0,a.c)(t,e)}function b(e){return e[3]}function v(e){return e}function U(e,t,n,r){return(0,c.al)(e,t,n,r)}function C(e,t,n){if(null==t||!A(e,t,M))return!1;let{t0:r,t1:o}=M;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(n){let{origin:e,direction:o}=t;n[0]=e[0]+o[0]*r,n[1]=e[1]+o[1]*r,n[2]=e[2]+o[2]*r}return!0}let M={t0:0,t1:0};function A(e,t,n){let{origin:r,direction:o}=t;T[0]=r[0]-e[0],T[1]=r[1]-e[1],T[2]=r[2]-e[2];let i=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===i)return!1;let u=2*(o[0]*T[0]+o[1]*T[1]+o[2]*T[2]),a=u*u-4*i*(T[0]*T[0]+T[1]*T[1]+T[2]*T[2]-e[3]*e[3]);if(a<0)return!1;let c=Math.sqrt(a);return n.t0=(-u-c)/(2*i),n.t1=(-u+c)/(2*i),!0}let T=(0,u.Ue)();function E(e,t){return C(e,t,null)}function S(e,t,n){let r=h.WM.get(),u=h.MP.get();(0,i.b)(r,t.origin,t.direction);let a=b(e);(0,i.b)(n,r,t.origin),(0,i.j)(n,n,1/(0,i.l)(n)*a);let c=x(e,t.origin),l=(0,d.EU)(t.origin,n);return(0,o.Us)(u,l+c,r),(0,i.h)(n,n,u),n}function I(e,t,n){let r=(0,i.f)(h.WM.get(),t,v(e)),o=(0,i.j)(h.WM.get(),r,e[3]/(0,i.l)(r));return(0,i.g)(n,o,v(e))}function x(e,t){let n=(0,i.f)(h.WM.get(),t,v(e)),o=(0,i.l)(n),u=b(e);return(0,r.ZF)(u/(u+Math.abs(u-o)))}let P=(0,u.Ue)();function O(e,t,n,o){let u=(0,i.f)(P,t,v(e));switch(n){case s.R.X:{let e=(0,r.jE)(u,P)[2];return(0,i.s)(o,-Math.sin(e),Math.cos(e),0)}case s.R.Y:{let e=(0,r.jE)(u,P),t=e[1],n=e[2],a=Math.sin(t);return(0,i.s)(o,-a*Math.cos(n),-a*Math.sin(n),Math.cos(t))}case s.R.Z:return(0,i.n)(o,u);default:return}}function N(e,t){let n=(0,i.f)(Z,t,v(e));return(0,i.l)(n)-e[3]}function R(e,t){let n=(0,i.a)(v(e),t),r=b(e);return n<=r*r}let Z=(0,u.Ue)(),_=p();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:g,altitudeAt:N,angleToSilhouette:x,axisAt:O,clear:function(e){e[0]=e[1]=e[2]=e[3]=0},closestPoint:function(e,t,n){return C(e,t,n)?n:((0,f.JI)(t,v(e),n),I(e,n,n))},closestPointOnSilhouette:S,containsPoint:R,copy:m,create:p,distanceToSilhouette:function(e,t){let n=(0,i.f)(h.WM.get(),t,v(e));return Math.sqrt(Math.abs((0,i.q)(n)-e[3]*e[3]))},elevate:function(e,t,n){return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),n[3]=e[3]+t,n},equals:w,exactEquals:y,fromCenterAndRadius:function(e,t){return(0,c.al)(e[0],e[1],e[2],t)},fromRadius:function(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e},fromValues:U,getCenter:v,getRadius:b,intersectLine:function(e,t,n){let r=(0,f.zk)(t,n);if(!A(e,r,M))return[];let{origin:o,direction:a}=r,{t0:c,t1:s}=M,d=t=>{let n=(0,u.Ue)();return(0,i.r)(n,o,a,t),I(e,n,n)};return Math.abs(c-s)<(0,l.bn)()?[d(c)]:[d(c),d(s)]},intersectRay:C,intersectRayClosestSilhouette:function(e,t,n){if(C(e,t,n))return n;let r=S(e,t,h.WM.get());return(0,i.g)(n,t.origin,(0,i.j)(h.WM.get(),t.direction,(0,i.p)(t.origin,r)/(0,i.l)(t.direction))),n},intersectsRay:E,projectPoint:I,setAltitudeAt:function(e,t,n,r){let o=N(e,t),u=O(e,t,s.R.Z,Z),a=(0,i.j)(Z,u,n-o);return(0,i.g)(r,t,a)},setExtent:function(e,t,n){return e!==n&&m(e,n),n},tmpSphere:_,union:function(e,t,n=(0,c.Ue)()){let r=(0,i.p)(v(e),v(t)),o=e[3],u=t[3];return r+u<o?(0,a.c)(n,e):r+o<u?(0,a.c)(n,t):((0,i.o)(n,v(e),v(t),(r+u-o)/(2*r)),n[3]=(r+o+u)/2),n},wrap:function(e){return e}},Symbol.toStringTag,{value:"Module"}))},48632:function(e,t,n){n.d(t,{x:function(){return o}});var r=n(33975);class o{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.Y)(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){let e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*i);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,i));e++)this._items.push(this._allocator())}}let i=1024},44837:function(e,t,n){n.d(t,{I:function(){return o},v:function(){return i}});var r=n(13507);function o(e,t,n=0){let o=(0,r.uZ)(e,0,c);for(let e=0;e<4;e++){var i;t[n+e]=Math.floor(256*((i=o*u[e])-Math.floor(i)))}}function i(e,t=0){let n=0;for(let r=0;r<4;r++)n+=e[t+r]*a[r];return n}let u=[1,256,65536,16777216],a=[1/256,1/65536,1/16777216,1/4294967296],c=i(new Uint8ClampedArray([255,255,255,255]))},81387:function(e,t,n){n.d(t,{K:function(){return u}});var r=n(82955),o=n(20928),i=n(40011);function u(e,t,n,r){if((0,o.canProjectWithoutEngine)(e.spatialReference,n)){a[0]=e.x,a[1]=e.y;let o=e.z;return a[2]=o??r??0,(0,i.projectBuffer)(a,e.spatialReference,0,t,n,0,1)}let u=(0,o.tryProjectWithZConversion)(e,n);return!!u&&(t[0]=u?.x,t[1]=u?.y,t[2]=u?.z??r??0,!0)}let a=(0,r.Ue)()},48350:function(e,t,n){n.d(t,{JI:function(){return s},Ue:function(){return u},re:function(){return c},zk:function(){return l}}),n(78628);var r=n(48632),o=n(60964),i=n(82955);function u(e){return e?a((0,i.d9)(e.origin),(0,i.d9)(e.direction)):a((0,i.Ue)(),(0,i.Ue)())}function a(e,t){return{origin:e,direction:t}}function c(e,t){let n=f.get();return n.origin=e,n.direction=t,n}function l(e,t,n=u()){return(0,o.c)(n.origin,e),(0,o.f)(n.direction,t,e),n}function s(e,t,n){let r=(0,o.m)(e.direction,(0,o.f)(n,t,e.origin));return(0,o.g)(n,e.origin,(0,o.j)(n,e.direction,r)),n}n(53524);let f=new r.x(()=>u());(0,i.Ue)()},95931:function(e,t,n){n.d(t,{I_:function(){return f},W7:function(){return h},qM:function(){return p}});var r=n(94605),o=n(61764),i=n(65223),u=n(39015),a=n(20186);let c=()=>i.Z.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function l(e,t){let n={byteOffset:0,byteCount:0,fields:Object.create(null)},r=0;for(let o=0;o<t.length;o++){let i=t[o],u=i.valueType||i.type,a=w[u];n.fields[i.property]=a(e,r),r+=y[u].BYTES_PER_ELEMENT}return n.byteCount=r,n}function s(e,t,n){let o=[],i,u,a=0;for(u=0;u<e;u+=1){if((i=t[u])>0){if(o.push(function(e,t,n){let o="",i=0;for(;i<n;){let u=e[t+i];if(u<128)o+=String.fromCharCode(u),i++;else if(u>=192&&u<224){if(i+1>=n)throw new r.Z("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");o+=String.fromCharCode((31&u)<<6|63&e[t+i+1]),i+=2}else if(u>=224&&u<240){if(i+2>=n)throw new r.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");o+=String.fromCharCode((15&u)<<12|(63&e[t+i+1])<<6|63&e[t+i+2]),i+=3}else{if(!(u>=240&&u<248))throw new r.Z("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=n)throw new r.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");let a=(7&u)<<18|(63&e[t+i+1])<<12|(63&e[t+i+2])<<6|63&e[t+i+3];a>=65536?o+=String.fromCharCode(55296+(a-65536>>10),56320+(1023&a)):o+=String.fromCharCode(a),i+=4}}}return o}(n,a,i-1)),0!==n[a+i-1])throw new r.Z("string-array-error","Invalid string array: missing null termination.")}else o.push(null);a+=i}return o}function f(e,t){return new y[t.valueType](e,t.byteOffset,t.count*t.valuesPerElement)}function d(e,t,n){if(t!==e&&c().error(`Invalid ${n} buffer size
 expected: ${e}, actual: ${t})`),t<e)throw new r.Z("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function h(e,t){let n=l(e,t&&t.header),r=n.byteCount,o={isDraco:!1,header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:{}},i=n.fields,u=null!=i.vertexCount?i.vertexCount:i.count;for(let e of t.ordering){if(!t.vertexAttributes[e])continue;let n={...t.vertexAttributes[e],byteOffset:r,count:u},i=g[e]||"_"+e;o.vertexAttributes[i]=n,r+=b(n.valueType)*n.valuesPerElement*u}let a=i.faceCount;if(t.faces&&a)for(let e of(o.faces={},t.ordering)){if(!t.faces[e])continue;let n={...t.faces[e],byteOffset:r,count:a};o.faces[e]=n,r+=b(n.valueType)*n.valuesPerElement*a}let c=i.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&c)for(let e of(o.featureAttributes={},t.featureAttributeOrder)){if(!t.featureAttributes[e])continue;let n={...t.featureAttributes[e],byteOffset:r,count:c};o.featureAttributes[e]=n,r+=("UInt64"===n.valueType?8:b(n.valueType))*n.valuesPerElement*c}return d(r,e.byteLength,"geometry"),o.byteCount=r-o.byteOffset,o}let g={position:a.T.POSITION,normal:a.T.NORMAL,color:a.T.COLOR,uv0:a.T.UV0,region:a.T.UVREGION};function p(e,t,n){if("lepcc-rgb"===e.encoding)return(0,u.IT)(t);if("lepcc-intensity"===e.encoding)return(0,u.ti)(t);if(null!=e.encoding&&""!==e.encoding)throw new r.Z("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(c().warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(c().warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");let i=function(e,t,n){let i=null!=t.header?l(e,t.header):{byteOffset:0,byteCount:0,fields:{count:n}},u={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)},a=i.byteCount;for(let e=0;e<t.ordering.length;e++){let n=t.ordering[e],c=(0,o.d9)(t[n]);if(c.count=i.fields.count??0,"String"===c.valueType){if(c.byteOffset=a,c.byteCount=i.fields[n+"ByteCount"],"UTF-8"!==c.encoding)throw new r.Z("unsupported-encoding","Unsupported String encoding.",{encoding:c.encoding});if(c.timeEncoding&&"ECMA_ISO8601"!==c.timeEncoding)throw new r.Z("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:c.timeEncoding})}else{if(!m(c.valueType))throw new r.Z("unsupported-value-type","Unsupported binary valueType",{valueType:c.valueType});{let e=b(c.valueType);a+=a%e!=0?e-a%e:0,c.byteOffset=a,c.byteCount=e*c.valuesPerElement*c.count}}a+=c.byteCount??0,u.entries[n]=c}return u.byteCount=a-u.byteOffset,u}(t,e,n);d(i.byteOffset+i.byteCount,t.byteLength,"attribute");let a=i.entries.attributeValues||i.entries.objectIds;if(a){if("String"===a.valueType){let e=i.entries.attributeByteCounts,n=f(t,e),r=new Uint8Array(t,a.byteOffset,a.byteCount);return a.timeEncoding?s(e.count,n,r).map(e=>{let t=e?Date.parse(e):null;return null==t||Number.isNaN(t)?null:t}):s(e.count,n,r)}return f(t,a)}throw new r.Z("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}let y={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},w={Float32:(e,t)=>new DataView(e,0).getFloat32(t,!0),Float64:(e,t)=>new DataView(e,0).getFloat64(t,!0),UInt8:(e,t)=>new DataView(e,0).getUint8(t),Int8:(e,t)=>new DataView(e,0).getInt8(t),UInt16:(e,t)=>new DataView(e,0).getUint16(t,!0),Int16:(e,t)=>new DataView(e,0).getInt16(t,!0),UInt32:(e,t)=>new DataView(e,0).getUint32(t,!0),Int32:(e,t)=>new DataView(e,0).getInt32(t,!0)};function m(e){return y.hasOwnProperty(e)}function b(e){return m(e)?y[e].BYTES_PER_ELEMENT:0}},17329:function(e,t,n){n.d(t,{WD:function(){return A},xe:function(){return C}}),n(55066);var r,o,i,u,a,c,l,s,f,d,h=n(54748);n(78628),n(94605),n(37180);var g=n(13677);n(94807);var p=n(77244);n(60964);var y=n(82955);n(20928),n(10940);var w=n(36502);n(81387),w.Z.WGS84;var m=n(20795);n(11752),n(68468);var b=n(95931);n(4658),n(26150),n(87585);var v=n(40465);(r=c||(c={}))[r.INVISIBLE=0]="INVISIBLE",r[r.TRANSPARENT=1]="TRANSPARENT",r[r.OPAQUE=2]="OPAQUE",n(39928),n(44837),n(44698),n(11293),n(70136),n(32684),n(20002),n(1755),n(61565),n(20186),(o=l||(l={}))[o.Uniform=0]="Uniform",o[o.Varying=1]="Varying",o[o.COUNT=2]="COUNT",n(16270),n(27869),n(28459),n(55139),n(44525),n(21488),n(13990),n(3933),(i=s||(s={}))[i.Solid=0]="Solid",i[i.Sketch=1]="Sketch",i[i.Mixed=2]="Mixed",i[i.COUNT=3]="COUNT",(u=f||(f={}))[u.REGULAR=0]="REGULAR",u[u.SILHOUETTE=1]="SILHOUETTE",(0,v.al)(0,0,0,.2),c.OPAQUE,(0,v.al)(0,0,0,.2),c.OPAQUE,n(13977);var U=n(46068);async function C(e,t,n,r,o,i,u,a){let c=[];for(let r of t)if(r&&o.includes(r.name)){let t=`${e}/nodes/${n}/attributes/${r.key}/0`;c.push({url:t,storageInfo:r})}let l=await Promise.allSettled(c.map(e=>(0,h.Z)(e.url,{responseType:"array-buffer",query:{...u,token:i},signal:a?.signal}).then(t=>(0,b.qM)(e.storageInfo,t.data)))),s=[];for(let e of r){let t={};for(let n=0;n<l.length;n++){let r=l[n];if("fulfilled"===r.status){let o=r.value;t[c[n].storageInfo.name]=function(e,t){if(!e)return null;let n=e[t];return(0,g.z3)(e)?-32768===n?null:n:(0,g.Hx)(e)?n===M?null:n:n!=n?null:n}(o,e)}}s.push(t)}return s}(0,m.Ue)(),(a=d||(d={}))[a.OUTSIDE=0]="OUTSIDE",a[a.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",a[a.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",a[a.INSIDE=3]="INSIDE";let M=-2147483648;function A(e){null!=e&&(e[3]=-1)}s.Solid,(0,y.Ue)(),(0,y.Ue)(),(0,y.Ue)(),(0,y.Ue)(),(0,y.Ue)(),(0,y.Ue)(),(0,y.Ue)(),(0,y.Ue)(),(0,m.Ue)(),(0,m.Ue)(),new U.Oo,(0,y.Ue)(),(0,p.Ue)()},39015:function(e,t,n){n.d(t,{Gi:function(){return i},IT:function(){return c},ti:function(){return l}});var r=n(94605);function o(e,t,n){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,n+0,10)),version:t.getUint16(n+10,!0),checksum:t.getUint32(n+12,!0)}}function i(e){var t;let n=new DataView(e,0),i=0,{identifier:a,version:c}=o(e,n,0);if(i+=16,"LEPCC     "!==a)throw new r.Z("lepcc-decode-error","Bad identifier");if(c>1)throw new r.Z("lepcc-decode-error","Unknown version");let l=(t=i,{sizeLo:n.getUint32(t+0,!0),sizeHi:n.getUint32(t+4,!0),minX:n.getFloat64(t+8,!0),minY:n.getFloat64(t+16,!0),minZ:n.getFloat64(t+24,!0),maxX:n.getFloat64(t+32,!0),maxY:n.getFloat64(t+40,!0),maxZ:n.getFloat64(t+48,!0),errorX:n.getFloat64(t+56,!0),errorY:n.getFloat64(t+64,!0),errorZ:n.getFloat64(t+72,!0),count:n.getUint32(t+80,!0),reserved:n.getUint32(t+84,!0)});if(i+=88,4294967296*l.sizeHi+l.sizeLo!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");let s=new Float64Array(3*l.count),f=[],d=[],h=[],g=[];if(i=u(e,i,f),i=u(e,i,d),i=u(e,i,h),(i=u(e,i,g))!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad length");let p=0,y=0;for(let e=0;e<f.length;e++){y+=f[e];let t=0;for(let n=0;n<d[e];n++){t+=h[p];let e=g[p];s[3*p]=Math.min(l.maxX,l.minX+2*l.errorX*t),s[3*p+1]=Math.min(l.maxY,l.minY+2*l.errorY*y),s[3*p+2]=Math.min(l.maxZ,l.minZ+2*l.errorZ*e),p++}}return{errorX:l.errorX,errorY:l.errorY,errorZ:l.errorZ,result:s}}function u(e,t,n){let r=[];t=a(e,t,r);let o=[];for(let i=0;i<r.length;i++){o.length=0,t=a(e,t,o);for(let e=0;e<o.length;e++)n.push(o[e]+r[i])}return t}function a(e,t,n){let o=new DataView(e,t),i=o.getUint8(0),u=31&i,a=(192&i)>>6,c=0;if(0===a)c=o.getUint32(1,!0),t+=5;else if(1===a)c=o.getUint16(1,!0),t+=3;else{if(2!==a)throw new r.Z("lepcc-decode-error","Bad count type");c=o.getUint8(1),t+=2}if(32&i)throw new r.Z("lepcc-decode-error","LUT not implemented");let l=new Uint8Array(e,t,Math.ceil(c*u/8)),s=0,f=0,d=0,h=-1>>>32-u;for(let e=0;e<c;e++){for(;f<u;)s|=l[d]<<f,f+=8,d+=1;n[e]=s&h,s>>>=u,(f-=u)+u>32&&(s|=l[d-1]>>8-f)}return t+d}function c(e){var t;let n=new DataView(e,0),i=0,{identifier:u,version:a}=o(e,n,0);if(i+=16,"ClusterRGB"!==u)throw new r.Z("lepcc-decode-error","Bad identifier");if(a>1)throw new r.Z("lepcc-decode-error","Unknown version");let c=(t=i,{sizeLo:n.getUint32(t+0,!0),sizeHi:n.getUint32(t+4,!0),count:n.getUint32(t+8,!0),colorMapCount:n.getUint16(t+12,!0),lookupMethod:n.getUint8(t+14),compressionMethod:n.getUint8(t+15)});if(i+=16,4294967296*c.sizeHi+c.sizeLo!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");if((2===c.lookupMethod||1===c.lookupMethod)&&0===c.compressionMethod){if(3*c.colorMapCount+c.count+i!==e.byteLength||c.colorMapCount>256)throw new r.Z("lepcc-decode-error","Bad count");let t=new Uint8Array(e,i,3*c.colorMapCount),n=new Uint8Array(e,i+3*c.colorMapCount,c.count),o=new Uint8Array(3*c.count);for(let e=0;e<c.count;e++){let r=n[e];o[3*e]=t[3*r],o[3*e+1]=t[3*r+1],o[3*e+2]=t[3*r+2]}return o}if(0===c.lookupMethod&&0===c.compressionMethod){if(3*c.count+i!==e.byteLength||0!==c.colorMapCount)throw new r.Z("lepcc-decode-error","Bad count");return new Uint8Array(e,i).slice()}if(c.lookupMethod<=2&&1===c.compressionMethod){if(i+3!==e.byteLength||1!==c.colorMapCount)throw new r.Z("lepcc-decode-error","Bad count");let t=n.getUint8(i),o=n.getUint8(i+1),u=n.getUint8(i+2),a=new Uint8Array(3*c.count);for(let e=0;e<c.count;e++)a[3*e]=t,a[3*e+1]=o,a[3*e+2]=u;return a}throw new r.Z("lepcc-decode-error","Bad method "+c.lookupMethod+","+c.compressionMethod)}function l(e){var t;let n=new DataView(e,0),i=0,{identifier:u,version:c}=o(e,n,0);if(i+=16,"Intensity "!==u)throw new r.Z("lepcc-decode-error","Bad identifier");if(c>1)throw new r.Z("lepcc-decode-error","Unknown version");let l=(t=i,{sizeLo:n.getUint32(t+0,!0),sizeHi:n.getUint32(t+4,!0),count:n.getUint32(t+8,!0),scaleFactor:n.getUint16(t+12,!0),bitsPerPoint:n.getUint8(t+14),reserved:n.getUint8(t+15)});if(i+=16,4294967296*l.sizeHi+l.sizeLo!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");let s=new Uint16Array(l.count);if(8===l.bitsPerPoint){if(l.count+i!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");let t=new Uint8Array(e,i,l.count);for(let e=0;e<l.count;e++)s[e]=t[e]*l.scaleFactor}else if(16===l.bitsPerPoint){if(2*l.count+i!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");let t=new Uint16Array(e,i,l.count);for(let e=0;e<l.count;e++)s[e]=t[e]*l.scaleFactor}else{let t=[];if(a(e,i,t)!==e.byteLength)throw new r.Z("lepcc-decode-error","Bad size");for(let e=0;e<l.count;e++)s[e]=t[e]*l.scaleFactor}return s}},13977:function(e,t,n){var r,o;n.d(t,{a9:function(){return r}}),n(13507),(o=r||(r={}))[o.Multiply=1]="Multiply",o[o.Ignore=2]="Ignore",o[o.Replace=3]="Replace",o[o.Tint=4]="Tint"},44698:function(e,t,n){n.d(t,{A:function(){return i}});var r=n(13977),o=n(1755);function i(e){e.vertex.code.add((0,o.H)`
    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {
      float symbolAlpha = 0.0;

      const float maxTint = 85.0;
      const float maxReplace = 170.0;
      const float scaleAlpha = 3.0;

      if (symbolColor.a > maxReplace) {
        colorMixMode = ${o.H.int(r.a9.Multiply)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);
      } else if (symbolColor.a > maxTint) {
        colorMixMode = ${o.H.int(r.a9.Replace)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);
      } else if (symbolColor.a > 0.0) {
        colorMixMode = ${o.H.int(r.a9.Tint)};
        symbolAlpha = scaleAlpha * symbolColor.a;
      } else {
        colorMixMode = ${o.H.int(r.a9.Multiply)};
        symbolAlpha = 0.0;
      }

      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);
    }
  `)}},11293:function(e,t,n){var r,o;function i(e){return e===r.Shadow||e===r.ShadowHighlight||e===r.ShadowExcludeHighlight||e===r.ViewshedShadow}function u(e){var t;return e===r.Color||(t=e)===r.Highlight||t===r.ObjectAndLayerIdColor||e===r.Depth||e===r.Normal}n.d(t,{H_:function(){return r},Jb:function(){return u},Kr:function(){return i}}),(o=r||(r={}))[o.Color=0]="Color",o[o.Depth=1]="Depth",o[o.Normal=2]="Normal",o[o.Shadow=3]="Shadow",o[o.ShadowHighlight=4]="ShadowHighlight",o[o.ShadowExcludeHighlight=5]="ShadowExcludeHighlight",o[o.ViewshedShadow=6]="ViewshedShadow",o[o.Highlight=7]="Highlight",o[o.ObjectAndLayerIdColor=8]="ObjectAndLayerIdColor",o[o.COUNT=9]="COUNT"},16270:function(e,t,n){n.d(t,{O:function(){return c},r:function(){return o}});var r,o,i=n(39928),u=n(1755),a=n(20186);function c(e,t){switch(t.normalType){case o.Compressed:e.attributes.add(a.T.NORMALCOMPRESSED,"vec2"),e.vertex.code.add((0,u.H)`vec3 decompressNormal(vec2 normal) {
float z = 1.0 - abs(normal.x) - abs(normal.y);
return vec3(normal + sign(normal) * min(z, 0.0), z);
}
vec3 normalModel() {
return decompressNormal(normalCompressed);
}`);break;case o.Attribute:e.attributes.add(a.T.NORMAL,"vec3"),e.vertex.code.add((0,u.H)`vec3 normalModel() {
return normal;
}`);break;case o.ScreenDerivative:e.fragment.code.add((0,u.H)`vec3 screenDerivativeNormal(vec3 positionView) {
return normalize(cross(dFdx(positionView), dFdy(positionView)));
}`);break;default:(0,i.Bg)(t.normalType);case o.COUNT:case o.Ground:}}(r=o||(o={}))[r.Attribute=0]="Attribute",r[r.Compressed=1]="Compressed",r[r.Ground=2]="Ground",r[r.ScreenDerivative=3]="ScreenDerivative",r[r.COUNT=4]="COUNT"},27869:function(e,t,n){n.d(t,{$:function(){return o}});var r=n(1755);function o({code:e},t){t.doublePrecisionRequiresObfuscation?e.add((0,r.H)`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`):e.add((0,r.H)`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)}},70136:function(e,t,n){n(1755)},28459:function(e,t,n){n.d(t,{B:function(){return i}});var r=n(32684),o=n(20002);class i extends r.x{constructor(e,t){super(e,"vec3",o.P.Draw,(n,r,o,i)=>n.setUniform3fv(e,t(r,o,i)))}}},55139:function(e,t,n){n.d(t,{J:function(){return i}});var r=n(32684),o=n(20002);class i extends r.x{constructor(e,t){super(e,"vec3",o.P.Pass,(n,r,o)=>n.setUniform3fv(e,t(r,o)))}}},44525:function(e,t,n){n.d(t,{p:function(){return i}});var r=n(32684),o=n(20002);class i extends r.x{constructor(e,t){super(e,"float",o.P.Pass,(n,r,o)=>n.setUniform1f(e,t(r,o)))}}},21488:function(e,t,n){n.d(t,{j:function(){return i}});var r=n(32684),o=n(20002);class i extends r.x{constructor(e,t){super(e,"mat3",o.P.Draw,(n,r,o)=>n.setUniformMatrix3fv(e,t(r,o)))}}},13990:function(e,t,n){n.d(t,{c:function(){return i}});var r=n(32684),o=n(20002);class i extends r.x{constructor(e,t){super(e,"mat3",o.P.Pass,(n,r,o)=>n.setUniformMatrix3fv(e,t(r,o)))}}},3933:function(e,t,n){n.d(t,{g:function(){return i}});var r=n(32684),o=n(20002);class i extends r.x{constructor(e,t){super(e,"mat4",o.P.Pass,(n,r,o)=>n.setUniformMatrix4fv(e,t(r,o)))}}},61565:function(e,t,n){n.d(t,{R:function(){return i}});var r=n(32684),o=n(20002);class i extends r.x{constructor(e,t){super(e,"sampler2D",o.P.Draw,(n,r,o)=>n.bindTexture(e,t(r,o)))}}},32684:function(e,t,n){n.d(t,{x:function(){return o}});var r=n(20002);class o{constructor(e,t,n,o,i=null){if(this.name=e,this.type=t,this.arraySize=i,this.bind={[r.P.Pass]:null,[r.P.Draw]:null},o)switch(n){case r.P.Pass:this.bind[r.P.Pass]=o;break;case r.P.Draw:this.bind[r.P.Draw]=o}}equals(e){return this.type===e.type&&this.name===e.name&&this.arraySize===e.arraySize}}},1755:function(e,t,n){var r;n.d(t,{H:function(){return u},K:function(){return i}});class o{}let i=o;function u(e,...t){let n="";for(let r=0;r<t.length;r++)n+=e[r]+t[r];return n+e[e.length-1]}(r=u||(u={})).int=function(e){return Math.round(e).toString()},r.float=function(e){return e.toPrecision(8)}},20002:function(e,t,n){var r,o;n.d(t,{P:function(){return r}}),(o=r||(r={}))[o.Pass=0]="Pass",o[o.Draw=1]="Draw"}}]);
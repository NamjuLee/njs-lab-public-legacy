"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3654],{57812:function(e,t,i){i.d(t,{z:function(){return s}});var r=i(85515);class s{constructor(e,t){this._storage=new r.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,i=1){this._storage.put(this,e,t,i,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},85515:function(e,t,i){i.d(t,{WJ:function(){return l},Xq:function(){return o}});var r,s,n=i(35313);(r=s||(s={}))[r.ALL=0]="ALL",r[r.SOME=1]="SOME";class o{constructor(e,t,i){this.name=e,this._storage=t,this.id=u+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,i,r=0){this._storage.put(this,e,t,i,r)}pop(e){let t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){let t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t,i){this._storage.updateSize(this,e,t,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class l{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n.Z,this._users=new n.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(t=>t[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){let i=this._db.get(e.id+t);return i?.size??0}put(e,t,i,r,n){t=e.id+t;let o=this._db.get(t);return(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(t),o.entry!==i&&this._notifyRemove(t,o.entry,o.size,s.ALL)),r>this._maxSize)?void this._notifyRemove(t,i,r,s.ALL):void 0===i?void console.warn("Refusing to cache undefined entry "):!r||r<0?(console.warn(`Refusing to cache entry with size ${r} for key ${t}`),void this._notifyRemove(t,i,0,s.ALL)):void(this._db.set(t,new a(i,r,1+Math.max(n,-4)- -3)),this._size+=r,e.size+=r,this._checkSize())}updateSize(e,t,i,r){t=e.id+t;let n=this._db.get(t);if(n&&n.entry===i){for(this._size-=n.size,e.size-=n.size;r>this._maxSize;){let e=this._notifyRemove(t,i,r,s.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);r=e}n.size=r,this._size+=r,e.size+=r,this._checkSize()}}pop(e,t){t=e.id+t;let i=this._db.get(t);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(e,t){t=e.id+t;let i=this._db.get(t);if(void 0!==i)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}peek(e,t){let i=this._db.get(e.id+t);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){let e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=[];this._db.forEach((e,r)=>{let s=e.lifetime;i[s]=(i[s]||0)+e.size,this._users.forAll(i=>{let{id:s,name:n}=i;if(r.startsWith(s)){let i=t[n]||0;t[n]=i+e.size}})});let r={};this._users.forAll(e=>{let i=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){let s=t[i]||0;t[i]=s,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"});let s=Object.keys(t);s.sort((e,i)=>t[i]-t[e]),s.forEach(i=>e[i]=Math.round(t[i]/1048576)+"MB / "+r[i]);for(let t=i.length-1;t>=0;--t){let r=i[t];r&&(e["Priority "+(t+-3-1)]=Math.round(r/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){let t=e.id;this._db.forEach((e,i)=>{i.startsWith(t)&&(this._size-=e.size,this._db.delete(i),this._notifyRemove(i,e.entry,e.size,s.ALL))}),e.size=0}clearAll(){this._db.forEach((e,t)=>this._notifyRemove(t,e.entry,e.size,s.ALL)),this._users.forAll(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i,r){let s;return this._removeFuncs.some(n=>{if(e.startsWith(n[0])){let e=n[1](t,r,i);return"number"==typeof e&&(s=e),!0}return!1}),s}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e)),this._checkSizeLimits()}_checkSizeLimits(e){let t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;let i=e?.id,r=!0;for(;r;)for(let[s,n]of(r=!1,this._db))if(0===n.lifetime&&(!i||s.startsWith(i))){if(this._purgeItem(s,n,e),t.size<=.9*t.maxSize)return;r||=this._db.has(s)}for(let[r,s]of this._db)if((!i||r.startsWith(i))&&(this._purgeItem(r,s,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,i=this._users.find(t=>e.startsWith(t.id))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,i&&(i.size-=t.size);let r=this._notifyRemove(e,t.entry,t.size,s.SOME);null!=r&&r>0&&(this._size+=r,i&&(i.size+=r),t.lives=t.lifetime,t.size=r,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}let u=0;class a{constructor(e,t,i){this.entry=e,this.size=t,this.lifetime=i,this.lives=i}}},97558:function(e,t,i){i.d(t,{$c:function(){return h},Hg:function(){return f},jW:function(){return d},uD:function(){return c}});var r=i(94761),s=i(50973),n=i(56529);let o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function l(e){return e instanceof r.Z}function u(e){return e instanceof s.Z?Object.keys(e.items):l(e)?(0,n.vw)(e).keys():e?Object.keys(e):[]}function a(e,t){return e instanceof s.Z?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function d(e,t){return c(e,t)}function c(e,t){if(null==e)return!1;let i=t.split("."),r=e;for(let e of i){if("complete"===r.type)break;if("partial"!==r.type)return!1;{let t=r.diff[e];if(!t)return!1;r=t}}return!0}function h(e,t){if(!e)return!1;if("partial"===e.type){let i=Object.keys(e.diff);return 1===i.length&&i[0]===t}return!1}function f(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:function e(t,i){let r;let s=t.diff;if(s&&"function"==typeof s)return s(t,i);let n=u(t),d=u(i);if(0===n.length&&0===d.length)return;if(!n.length||!d.length||!(!Array.isArray(t)||!Array.isArray(i))&&t.length!==i.length)return{type:"complete",oldValue:t,newValue:i};let c=d.filter(e=>!n.includes(e)),h=n.filter(e=>!d.includes(e)),f=n.filter(e=>d.includes(e)&&a(t,e)!==a(i,e)).concat(c,h).sort(),y=p(t);if(y&&o.has(y)&&f.length)return{type:"complete",oldValue:t,newValue:i};let m=l(t)&&l(i);for(let n of f){let o;let l=a(t,n),u=a(i,n);if((m||"function"!=typeof l&&"function"!=typeof u)&&l!==u&&(null!=l||null!=u)){if(s&&s[n]&&"function"==typeof s[n])o=s[n]?.(l,u);else if(l instanceof Date&&u instanceof Date){if(l.getTime()===u.getTime())continue;o={type:"complete",oldValue:l,newValue:u}}else o="object"==typeof l&&"object"==typeof u&&p(l)===p(u)?e(l,u):{type:"complete",oldValue:l,newValue:u};null!=o&&(null!=r?r.diff[n]=o:r={type:"partial",diff:{[n]:o}})}}return r}(e,t)}},22521:function(e,t,i){i.d(t,{A4:function(){return n},L9:function(){return o},yV:function(){return s}});var r=i(9450);class s{}function n(e){return e instanceof r.ld?e===s.instance:"unknown"===e?.toString().toLowerCase()}function o(e){return n(e)?s.instance:e}s.instance=new r.vF("Etc/UTC")},48932:function(e,t,i){function r(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function s(e){if("lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length)return e;let{originPosition:t,scale:i,translate:r}=e,s=i[0]??1,n=i[1]??1;return{originPosition:"lowerLeft",scale:[s,"lowerLeft"===t?n:-n,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function n({scale:e,translate:t},i){return i*e[0]+t[0]}function o({scale:e,translate:t},i){return i*e[1]+t[1]}function l({scale:e,translate:t},i){return(i??0)*e[2]+t[2]}function u({scale:e,translate:t},i){return i?i*e[3]+t[3]:0}function a(e,t){return e&&t?h:e&&!t?d:!e&&t?c:p}i.d(t,{G6:function(){return v},Ie:function(){return g},J9:function(){return m},RF:function(){return y},U1:function(){return _},vY:function(){return r}}),i(5005);let p=(e,t)=>{let i=Array(t.length);if(!t.length)return i;let r=t[0],s=n(e,r[0]),l=o(e,r[1]);i[0]=[s,l];let{scale:u,originPosition:a}=e,p=u[0],d="lowerLeft"===a?u[1]:-u[1];for(let e=1;e<t.length;e++){let[r,n]=t[e];s+=p*r,l+=d*n,i[e]=[s,l]}return i},d=(e,t)=>{let i=Array(t.length);if(!t.length)return i;let r=t[0],s=n(e,r[0]),u=o(e,r[1]);i[0]=[s,u,l(e,r[2])];let{scale:a,originPosition:p}=e,d=a[0],c="lowerLeft"===p?a[1]:-a[1];for(let r=1;r<t.length;r++){let[n,o,a]=t[r];s+=d*n,u+=c*o,i[r]=[s,u,l(e,a)]}return i},c=(e,t)=>{let i=Array(t.length);if(!t.length)return i;let r=t[0],s=n(e,r[0]),l=o(e,r[1]);i[0]=[s,l,u(e,r[2])];let{scale:a,originPosition:p}=e,d=a[0],c="lowerLeft"===p?a[1]:-a[1];for(let r=1;r<t.length;r++){let[n,o,a]=t[r];s+=d*n,l+=c*o,i[r]=[s,l,u(e,a)]}return i},h=(e,t)=>{let i=Array(t.length);if(!t.length)return i;let r=t[0],s=n(e,r[0]),a=o(e,r[1]);i[0]=[s,a,l(e,r[2]),u(e,r[3])];let{scale:p,originPosition:d}=e,c=p[0],h="lowerLeft"===d?p[1]:-p[1];for(let r=1;r<t.length;r++){let[n,o,p,d]=t[r];s+=c*n,a+=h*o,i[r]=[s,a,l(e,p),u(e,d)]}return i};function f(e,t,i){let r=Array(i.length);for(let s=0;s<i.length;s++)r[s]=t(e,i[s]);return r}function y(e,t,i){let r=s(e);return t.x=function({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}(r,i.x),t.y=function({scale:e,translate:t},i){return Math.round((i-t[1])/e[1])}(r,i.y),null!=i.z&&(t.z=function({scale:e,translate:t},i){return Math.round(((i??0)-t[2])/e[2])}(r,i.z)),null!=i.m&&(t.m=function({scale:e,translate:t},i){return i?Math.round((i-t[3])/e[3]):0}(r,i.m)),t}function m(e,t,i,r=i?.hasZ??!1,n=i?.hasM??!1){if(null!=i){let o=s(e);t.points=a(r,n)(o,i.points),t.hasZ=r,t.hasM=n}return t}function _(e,t,i,r=null!=i?.z,a=null!=i?.m){if(null==i)return t;let p=s(e);return t.x=n(p,i.x),t.y=o(p,i.y),r&&(t.z=l(p,i.z)),a&&(t.m=u(p,i.m)),t}function g(e,t,i,r=i?.hasZ??!1,n=i?.hasM??!1){if(null!=i){let o=s(e);t.rings=f(o,a(r,n),i.rings),t.hasZ=r,t.hasM=n}return t}function v(e,t,i,r=i?.hasZ??!1,n=i?.hasM??!1){if(null!=i){let o=s(e);t.paths=f(o,a(r,n),i.paths),t.hasZ=r,t.hasM=n}return t}},32370:function(e,t,i){i.d(t,{Z:function(){return c}});var r=i(94605),s=i(689),n=i(65223),o=i(59528),l=i(22521),u=i(67009),a=i(46200),p=i(9450);let d=new Map;class c{static fromJSON(e){return new c(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new c(e.fields??[],m(e))}static fromLayerJSON(e){return new c(e.fields??[],m(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;let i=[];for(let e of this.fields){let t=e?.name,r=f(t);if(t&&r){let s=h(t);this._fieldsMap.set(t,e),this._fieldsMap.set(s,e),this._normalizedFieldsMap.set(r,e),i.push(`${s}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,u.y2)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,u.H7)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,u.Dl)(e)||(0,u.Se)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields)for(let e of(this._requiredFields=[],this.fields))(0,u.Dl)(e)||(0,u.Se)(e)||e.nullable||void 0!==(0,u.os)(e)||this._requiredFields.push(e);return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||((t=this._fieldsMap.get(h(e))??this._normalizedFieldsMap.get(f(e)))&&this._fieldsMap.set(e,t),t)}getTimeZone(e){let t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(n.Z.getLogger("esri.layers.support.FieldsIndex").error(new r.Z("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),a.pt):y.has(t.type)?a._4:null:null}getLuxonTimeZone(e){let t=this.getTimeZone(e);return t?t===a._4?l.yV.instance:t===a.pt?p.Qf.utcInstance:(0,o.s1)(d,t,()=>p.vF.create(t)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,u.sX)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>(0,s.AK)(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function h(e){return e.trim().toLowerCase()}function f(e){return u.q6(e)?.toLowerCase()??""}let y=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function m(e){let t=new Map;if(!e.fields)return t;let i=!0===e.datesInUnknownTimezone,{timeInfo:r,editFieldsInfo:s}=e,n=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",l="dateFieldsTimeZone"in e?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,a.Jv)(e.dateFieldsTimeReference):null,u=s?"timeZone"in s?s.timeZone??l:s.dateFieldsTimeReference?(0,a.Jv)(s.dateFieldsTimeReference):l??a.pt:null,p=r?"timeZone"in r?r.timeZone??l:r.timeReference?(0,a.Jv)(r.timeReference):l:null,d=new Map([[h(s?.creationDateField??""),u],[h(s?.editDateField??""),u],[h(n),p],[h(o),p]]);for(let{name:r,type:s}of e.fields)if(y.has(s))t.set(r,a._4);else if("date"!==s&&"esriFieldTypeDate"!==s)t.set(r,null);else if(i)t.set(r,a._4);else{let e=d.get(h(r??""))??l;t.set(r,e)}return t}},5055:function(e,t,i){i.d(t,{H3:function(){return _},QI:function(){return d},U4:function(){return u},Yh:function(){return h}});var r=i(86641),s=i(689),n=i(89312);i(37180),i(65223),i(3457);var o=i(28305),l=i(64186);let u=class extends s.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,r._)([(0,n.Cb)({type:Number})],u.prototype,"nodesPerPage",void 0),(0,r._)([(0,n.Cb)({type:Number})],u.prototype,"rootIndex",void 0),(0,r._)([(0,n.Cb)({type:String})],u.prototype,"lodSelectionMetricType",void 0),u=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3SNodePageDefinition")],u);let a=class extends s.wq{constructor(){super(...arguments),this.factor=1}};(0,r._)([(0,n.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],a.prototype,"id",void 0),(0,r._)([(0,n.Cb)({type:Number})],a.prototype,"factor",void 0),a=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3SMaterialTexture")],a);let p=class extends s.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,r._)([(0,n.Cb)({type:[Number]})],p.prototype,"baseColorFactor",void 0),(0,r._)([(0,n.Cb)({type:a})],p.prototype,"baseColorTexture",void 0),(0,r._)([(0,n.Cb)({type:a})],p.prototype,"metallicRoughnessTexture",void 0),(0,r._)([(0,n.Cb)({type:Number})],p.prototype,"metallicFactor",void 0),(0,r._)([(0,n.Cb)({type:Number})],p.prototype,"roughnessFactor",void 0),p=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3SMaterialPBRMetallicRoughness")],p);let d=class extends s.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,r._)([(0,o.J)({opaque:"opaque",mask:"mask",blend:"blend"})],d.prototype,"alphaMode",void 0),(0,r._)([(0,n.Cb)({type:Number})],d.prototype,"alphaCutoff",void 0),(0,r._)([(0,n.Cb)({type:Boolean})],d.prototype,"doubleSided",void 0),(0,r._)([(0,o.J)({none:"none",back:"back",front:"front"})],d.prototype,"cullFace",void 0),(0,r._)([(0,n.Cb)({type:a})],d.prototype,"normalTexture",void 0),(0,r._)([(0,n.Cb)({type:a})],d.prototype,"occlusionTexture",void 0),(0,r._)([(0,n.Cb)({type:a})],d.prototype,"emissiveTexture",void 0),(0,r._)([(0,n.Cb)({type:[Number]})],d.prototype,"emissiveFactor",void 0),(0,r._)([(0,n.Cb)({type:p})],d.prototype,"pbrMetallicRoughness",void 0),d=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3SMaterialDefinition")],d);let c=class extends s.wq{};(0,r._)([(0,n.Cb)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],c.prototype,"name",void 0),(0,r._)([(0,o.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],c.prototype,"format",void 0),c=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3STextureFormat")],c);let h=class extends s.wq{constructor(){super(...arguments),this.atlas=!1}};(0,r._)([(0,n.Cb)({type:[c]})],h.prototype,"formats",void 0),(0,r._)([(0,n.Cb)({type:Boolean})],h.prototype,"atlas",void 0),h=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3STextureSetDefinition")],h);let f=class extends s.wq{};(0,r._)([(0,o.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],f.prototype,"type",void 0),(0,r._)([(0,n.Cb)({type:Number})],f.prototype,"component",void 0),f=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3SGeometryAttribute")],f);let y=class extends s.wq{};(0,r._)([(0,o.J)({draco:"draco"})],y.prototype,"encoding",void 0),(0,r._)([(0,n.Cb)({type:[String]})],y.prototype,"attributes",void 0),y=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3SGeometryCompressedAttributes")],y);let m=class extends s.wq{constructor(){super(...arguments),this.offset=0}};(0,r._)([(0,n.Cb)({type:Number})],m.prototype,"offset",void 0),(0,r._)([(0,n.Cb)({type:f})],m.prototype,"position",void 0),(0,r._)([(0,n.Cb)({type:f})],m.prototype,"normal",void 0),(0,r._)([(0,n.Cb)({type:f})],m.prototype,"uv0",void 0),(0,r._)([(0,n.Cb)({type:f})],m.prototype,"color",void 0),(0,r._)([(0,n.Cb)({type:f})],m.prototype,"uvRegion",void 0),(0,r._)([(0,n.Cb)({type:f})],m.prototype,"featureId",void 0),(0,r._)([(0,n.Cb)({type:f})],m.prototype,"faceRange",void 0),(0,r._)([(0,n.Cb)({type:y})],m.prototype,"compressedAttributes",void 0),m=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3SGeometryBuffer")],m);let _=class extends s.wq{};(0,r._)([(0,o.J)({triangle:"triangle"})],_.prototype,"topology",void 0),(0,r._)([(0,n.Cb)()],_.prototype,"geometryBuffers",void 0),_=(0,r._)([(0,l.j)("esri.layers.support.I3SLayerDefinitions.I3SGeometryDefinition")],_)},34525:function(e,t,i){i.d(t,{Z:function(){return p}});var r,s=i(86641),n=i(50973),o=i(689),l=i(89312);i(37180),i(65223),i(3457);var u=i(64186);let a=r=class extends o.wq{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new n.Z}clone(){return new r({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,s._)([(0,l.Cb)({type:String,json:{write:!0}})],a.prototype,"floorField",void 0),(0,s._)([(0,l.Cb)({json:{read:!1,write:!1}})],a.prototype,"viewAllMode",void 0),(0,s._)([(0,l.Cb)({json:{read:!1,write:!1}})],a.prototype,"viewAllLevelIds",void 0);let p=a=r=(0,s._)([(0,u.j)("esri.layers.support.LayerFloorInfo")],a)},9744:function(e,t,i){i.d(t,{w:function(){return p}});var r=i(94596),s=i(54748),n=i(94605),o=i(31124),l=i(96922),u=i(81449),a=i(20550);async function p(e,t){let i=(0,l.Qc)(e);if(!i)throw new n.Z("invalid-url","Invalid scene service url");let r={...t,sceneServerUrl:i.url.path,layerId:i.sublayer??void 0};if(r.sceneLayerItem??=await d(r),null==r.sceneLayerItem)return f(r.sceneServerUrl.replace("/SceneServer","/FeatureServer"),r);let s=await y(r);if(!s?.url)throw new n.Z("related-service-not-found","Could not find feature service through portal item relationship");r.featureServiceItem=s;let o=await f(s.url,r);return o.portalItem=s,o}async function d(e){let t=(await c(e)).serviceItemId;if(!t)return null;let i=new a.default({id:t,apiKey:e.apiKey}),r=await h(e);null!=r&&(i.portal=new u.Z({url:r}));try{return i.load({signal:e.signal})}catch(e){return(0,o.r9)(e),null}}async function c(e){if(e.rootDocument)return e.rootDocument;let t={query:{f:"json",...e.customParameters,token:e.apiKey},responseType:"json",signal:e.signal};try{let i=await (0,s.Z)(e.sceneServerUrl,t);e.rootDocument=i.data}catch{e.rootDocument={}}return e.rootDocument}async function h(e){let t=r.id?.findServerInfo(e.sceneServerUrl);if(t?.owningSystemUrl)return t.owningSystemUrl;let i=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{let t=(await (0,s.Z)(i,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(t)return t}catch(e){(0,o.r9)(e)}return null}async function f(e,t){let i=(0,l.Qc)(e);if(!i)throw new n.Z("invalid-feature-service-url","Invalid feature service url");let r=i.url.path,o=t.layerId;if(null==o)return{serverUrl:r};let u=c(t),a=t.featureServiceItem?await t.featureServiceItem.fetchData("json"):null,p=(a?.layers?.[0]||a?.tables?.[0])?.customParameters,d=e=>{let i={query:{f:"json",...p},responseType:"json",authMode:e,signal:t.signal};return(0,s.Z)(r,i)},h=d("anonymous").catch(()=>d("no-prompt")),[f,y]=await Promise.all([h,u]),m=y?.layers,_=f.data&&f.data.layers;if(!Array.isArray(_))throw Error("expected layers array");if(Array.isArray(m)){for(let e=0;e<Math.min(m.length,_.length);e++)if(m[e].id===o)return{serverUrl:r,layerId:_[e].id}}else if(null!=o&&o<_.length)return{serverUrl:r,layerId:_[o].id};throw Error("could not find matching associated sublayer")}async function y({sceneLayerItem:e,signal:t}){if(!e)return null;try{let i=(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:t})).find(e=>"Feature Service"===e.type)||null;if(!i)return null;let r=new a.default({portal:i.portal,id:i.id});return await r.load(),r}catch(e){return(0,o.r9)(e),null}}},75040:function(e,t,i){i.d(t,{C:function(){return r}});let r={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},95015:function(e,t,i){i.d(t,{AJ:function(){return a},If:function(){return d},k0:function(){return u},uI:function(){return p},ul:function(){return l},wx:function(){return c}});var r=i(13507),s=i(4392),n=i(91870),o=i(40465);let l=2.4;function u(e){return(0,s.Wz)(e*l)}function a(e){return(0,s.F2)(e)/l}function p(e){let t=new Uint8ClampedArray(2048);if((e=e.filter(({ratio:e})=>e>=0&&e<=1).sort((e,t)=>e.ratio-t.ratio).map(({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))).length<1)return t;let i=e[0],s=e[0],l=1,u=(0,o.Ue)();for(let o=0;o<512;o++){let a=(o+.5)/512;for(;a>s.ratio&&l<e.length;)i=s,s=e[l++];(function(e,t,i,s){let{color:o,ratio:l}=t,{color:u,ratio:a}=i;a===l&&(1===a?l-=1e-6:a+=1e-6);let p=(0,r.uZ)((s-l)/(a-l),0,1);(0,n.l)(e,o.toArray(),u.toArray(),p)})(u,i,s,a),t.set(u,4*o)}return t}function d(e,t,i){let r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function c(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},1326:function(e,t,i){i.d(t,{LR:function(){return u},Uy:function(){return n},VW:function(){return s},Wb:function(){return o},fm:function(){return a},kf:function(){return l}}),i(9266);var r=i(65321);function s(e,t){var i;return i=null!=e&&e.hasZ,t?.mode?t.mode:(i?p:d).mode}function n(e,t,i){return i&&i.mode!==t?`${e} only support ${t} elevation mode`:null}function o(e,t,i){return i?.mode===t?`${e} do not support ${t} elevation mode`:null}function l(e,t){return null!=t?.featureExpressionInfo&&"0"!==t.featureExpressionInfo.expression?`${e} do not support featureExpressionInfo`:null}function u(e,t){t&&e.warn(".elevationInfo=",t)}function a(e){return(e?.offset??0)*(0,r.Z7)(e?.unit)}let p={mode:"absolute-height"},d={mode:"on-the-ground"}},30369:function(e,t,i){i.d(t,{V5:function(){return n},e7:function(){return s}});var r=i(67009);async function s(e,t=e.popupTemplate){if(null==t)return[];let i=await t.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:s}=t,{objectIdField:n,typeIdField:o,globalIdField:l,relationships:u}=e;if(i.includes("*"))return["*"];let a=s?(0,r.CH)(e):[],p=(0,r.Q0)(e.fieldsIndex,[...i,...a]);return o&&p.push(o),p&&n&&e.fieldsIndex?.has(n)&&!p.includes(n)&&p.push(n),p&&l&&e.fieldsIndex?.has(l)&&!p.includes(l)&&p.push(l),u&&u.forEach(t=>{let{keyField:i}=t;p&&i&&e.fieldsIndex?.has(i)&&!p.includes(i)&&p.push(i)}),p}function n(e,t){return e.popupTemplate?e.popupTemplate:null!=t&&t.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34907],{53787:function(e,t,r){r.d(t,{S6:function(){return s},u_:function(){return o}});var n=r(73503);class o{constructor(e=null,t={},r,n){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(e,t){let r=e.geometry?n.Z.fromJSON(e.geometry):null,s=e.centroid?n.Z.fromJSON(e.centroid):null,i=e.attributes[t];return new o(r,e.attributes,s,i)}weakClone(){let e=new o(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}clone(){let e=new o(this.geometry?.clone(),{...this.attributes},this.centroid?.clone(),this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}function s(e){return!!e.geometry?.coords?.length}},52645:function(e,t,r){r.d(t,{Z:function(){return n}});class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){let e=new n;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},73503:function(e,t,r){r.d(t,{Z:function(){return n}});class n{constructor(e=[],t=[],r=!1){this.lengths=e??[],this.coords=t??[],this.hasIndeterminateRingOrder=r}static fromJSON(e){return new n(e.lengths,e.coords,e.hasIndeterminateRingOrder)}static fromRect(e){let[t,r,o,s]=e,i=o-t,u=s-r;return new n([5],[t,r,i,0,0,u,-i,0,0,-u])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,t)=>e+t)}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){let n=this.lengths[r];for(let r=0;r<n;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=n}}deltaDecode(){let e=this.clone(),{coords:t,lengths:r}=e,n=0;for(let e of r){for(let r=1;r<e;r++)t[2*(n+r)]+=t[2*(n+r)-2],t[2*(n+r)+1]+=t[2*(n+r)-1];n+=e}return e}clone(e){if(0===this.lengths.length)return new n([],[this.coords[0],this.coords[1]]);let t=(0===this.lengths.length?1:this.lengths.reduce((e,t)=>e+t))*2,r=this.coords.slice(0,t);return e?(e.set(r),new n(this.lengths,e,this.hasIndeterminateRingOrder)):new n(Array.from(this.lengths),Array.from(r),this.hasIndeterminateRingOrder)}}},83339:function(e,t,r){r.d(t,{$:function(){return ee},$g:function(){return et},EI:function(){return Y},GH:function(){return E},IN:function(){return F},Iv:function(){return O},J6:function(){return D},Jd:function(){return w},Nh:function(){return W},RZ:function(){return $},Uy:function(){return k},XA:function(){return L},Yn:function(){return Q},cn:function(){return B},dd:function(){return M},di:function(){return J},eG:function(){return j},fQ:function(){return I},hY:function(){return er},h_:function(){return X},ks:function(){return V},lM:function(){return H},lz:function(){return en},zj:function(){return K}});var n=r(94605),o=r(65223),s=r(36152),i=r(54053),u=r(20795),l=r(5005),a=r(53787),c=r(52645),h=r(73503);function f(e,t){return e?t?4:3:t?3:2}let d=()=>o.Z.getLogger("esri.layers.graphics.featureConversionUtils"),m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},y=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s},p=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+2]},g=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+3]},b=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function _(e,t,r,n){if(e){if(r)return t&&n?b:p;if(t&&n)return g}else if(t&&n)return p;return y}function w({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function F({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function I(e,t,r){return e?t?r?N(e):S(e):r?G(e):x(e):null}function x(e){let t=e.coords;return{x:t[0],y:t[1]}}function Z(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function S(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function P(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function G(e){let t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function C(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function N(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function T(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function v(e,t){return e&&t?T:e?P:t?C:Z}function M(e,t,r=v(null!=t.z,null!=t.m)){return r(e,t)}function O(e,t,r){if(null==e)return null;let n=f(t,r),o=[];for(let t=0;t<e.coords.length;t+=n){let r=[];for(let o=0;o<n;o++)r.push(e.coords[t+o]);o.push(r)}return t?r?{points:o,hasZ:t,hasM:r}:{points:o,hasZ:t}:r?{points:o,hasM:r}:{points:o}}function R(e,t,r=f(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;let n=e.coords,o=0;for(let e of t.points)for(let t=0;t<r;t++)n[o++]=e[t];return e}function D(e,t,r){if(!e)return null;let n=f(t,r),{coords:o,lengths:s}=e,i=[],u=0;for(let e of s){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<n;t++)e.push(o[u++]);t.push(e)}i.push(t)}return t?r?{paths:i,hasZ:t,hasM:r}:{paths:i,hasZ:t}:r?{paths:i,hasM:r}:{paths:i}}function q(e,t,r=f(t.hasZ,t.hasM)){let{lengths:n,coords:o}=e,s=0;for(let e of t.paths){for(let t of e)for(let e=0;e<r;e++)o[s++]=t[e];n.push(e.length)}return e}function j(e,t,r){if(!e)return null;let n=f(t,r),{coords:o,lengths:s}=e,i=[],u=0;for(let e of s){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<n;t++)e.push(o[u++]);t.push(e)}i.push(t)}return t?r?{rings:i,hasZ:t,hasM:r}:{rings:i,hasZ:t}:r?{rings:i,hasM:r}:{rings:i}}function k(e,t,r=t.hasZ,n=t.hasM){return V(e,t.rings,r,n)}function V(e,t,r,n){let o=f(r,n),{lengths:s,coords:i}=e,u=0;for(let r of(eo(e),t)){for(let e of r)for(let t=0;t<o;t++)i[u++]=e[t];s.push(r.length)}return e}let z=[],A=[];function L(e,t,r,n,o){z[0]=e;let[s]=Q(A,z,t,r,n,o);return es(z),es(A),s}function Q(e,t,r,o,s,i){if(es(e),!r){for(let r of t){let t=i?r.attributes[i]:void 0;e.push(new a.u_(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":return function(e,t,r,n,o){let s=v(r,n);for(let{geometry:r,attributes:n}of t){let t=null!=r?s(new h.Z,r):null;e.push(new a.u_(t,n,null,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryMultipoint":return function(e,t,r,n,o){let s=f(r,n);for(let{geometry:r,attributes:n}of t){let t=null!=r?R(new h.Z,r,s):null;e.push(new a.u_(t,n,null,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryPolyline":return function(e,t,r,n,o){let s=f(r,n);for(let{geometry:r,attributes:n,centroid:i}of t){let t=null!=r?q(new h.Z,r,s):null,u=null!=i?M(new h.Z,i):null;e.push(new a.u_(t,n,u,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryPolygon":return function(e,t,r,n,o){for(let{geometry:s,centroid:i,attributes:u}of t){let t=null!=s?k(new h.Z,s,r,n):null,l=o?u[o]:void 0;null!=i?e.push(new a.u_(t,u,Z(new h.Z,i),l)):e.push(new a.u_(t,u,null,l))}return e}(e,t,o,s,i);default:d().error("convertToFeatureSet:unknown-geometry",new n.Z(`Unable to parse unknown geometry type '${r}'`)),es(e)}return e}function Y(e,t,r,n){A[0]=e,U(z,A,t,r,n);let o=z[0];return es(z),es(A),o}function E(e,t,r){if(null==e)return null;let o=new h.Z;return("hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,l.wp)(e))?v(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(o,e):(0,l.oU)(e)?k(o,e,t,r):(0,l.l9)(e)?q(o,e,f(t,r)):(0,l.aW)(e)?R(o,e,f(t,r)):void d().error("convertFromGeometry:unknown-geometry",new n.Z(`Unable to parse unknown geometry type '${e}'`))}function J(e,t,r,o){let s=e&&("coords"in e?e:e.geometry);if(null==s)return null;switch(t){case"esriGeometryPoint":{let e=x;return r&&o?e=N:r?e=S:o&&(e=G),e(s)}case"esriGeometryMultipoint":return O(s,r,o);case"esriGeometryPolyline":return D(s,r,o);case"esriGeometryPolygon":return j(s,r,o);default:return d().error("convertToGeometry:unknown-geometry",new n.Z(`Unable to parse unknown geometry type '${t}'`)),null}}function U(e,t,r,o,s){if(es(e),null==r)return function(e,t){for(let r of t)e.push({attributes:r.attributes});return e}(e,t);switch(r){case"esriGeometryPoint":return function(e,t,r,n){let o=x;for(let s of(r&&n?o=N:r?o=S:n&&(o=G),t)){let{geometry:t,attributes:r}=s,n=null!=t?o(t):null;e.push({attributes:r,geometry:n})}return e}(e,t,o,s);case"esriGeometryMultipoint":return function(e,t,r,n){for(let{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?O(o,r,n):null});return e}(e,t,o,s);case"esriGeometryPolyline":return function(e,t,r,n){for(let{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?D(o,r,n):null});return e}(e,t,o,s);case"esriGeometryPolygon":return function(e,t,r,n){for(let{geometry:o,attributes:s,centroid:i}of t){let t=null!=o?j(o,r,n):null;if(null!=i){let r=x(i);e.push({attributes:s,centroid:r,geometry:t})}else e.push({attributes:s,geometry:t})}return e}(e,t,o,s);default:d().error("convertToFeatureSet:unknown-geometry",new n.Z(`Unable to parse unknown geometry type '${r}'`))}return e}function B(e){let{objectIdFieldName:t,spatialReference:r,transform:n,fields:o,hasM:s,hasZ:i,features:u,geometryType:l,exceededTransferLimit:a,uniqueIdField:c,queryGeometry:h,queryGeometryType:f}=e,d={features:U([],u,l,i,s),fields:o,geometryType:l,objectIdFieldName:t,spatialReference:r,uniqueIdField:c,queryGeometry:J(h,f,!1,!1)};return n&&(d.transform=n),a&&(d.exceededTransferLimit=a),s&&(d.hasM=s),i&&(d.hasZ=i),d}function X(e,t){let r=new c.Z,{hasM:o,hasZ:s,features:i,objectIdFieldName:u,spatialReference:l,geometryType:a,exceededTransferLimit:h,transform:f,fields:m}=e;return m&&(r.fields=m),r.geometryType=a??null,r.objectIdFieldName=u??t??null,r.spatialReference=l??null,r.objectIdFieldName?(i&&Q(r.features,i,a,s,o,r.objectIdFieldName),h&&(r.exceededTransferLimit=h),o&&(r.hasM=o),s&&(r.hasZ=s),f&&(r.transform=f)):d().error(new n.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r}function H(e){let{transform:t,features:r,hasM:n,hasZ:o}=e;if(!t)return e;for(let e of r)null!=e.geometry&&et(e.geometry,e.geometry,n,o,t),null!=e.centroid&&et(e.centroid,e.centroid,n,o,t);return e.transform=null,e}function $(e,t){let{geometryType:r,features:n,hasM:o,hasZ:s}=t;if(!e)return t;for(let t=0;t<n.length;t++){let i=n[t],u=i.weakClone();u.geometry=new h.Z,W(u.geometry,i.geometry,o,s,r,e),i.centroid&&(u.centroid=new h.Z,W(u.centroid,i.centroid,o,s,"esriGeometryPoint",e)),n[t]=u}return t.transform=e,t}function W(e,t,r,n,o,s,i=r,u=n){if(eo(e),!t?.coords.length)return null;let l=m[o],{coords:a,lengths:c}=t,h=f(r,n),d=f(r&&i,n&&u),y=_(r,n,i,u);if(!c.length)return y(e.coords,a,0,0,w(s,a[0]),F(s,a[1])),eo(e,h,0),e;let p,g,b,I,x=0,Z=0,S=0;for(let t of c){if(t<l)continue;let r=0;Z=S,b=p=w(s,a[x]),I=g=F(s,a[x+1]),y(e.coords,a,Z,x,b,I),r++,x+=h,Z+=d;for(let n=1;n<t;n++,x+=h)b=w(s,a[x]),I=F(s,a[x+1]),b===p&&I===g||(y(e.coords,a,Z,x,b-p,I-g),Z+=d,r++,p=b,g=I);r>=l&&(e.lengths.push(r),S=Z)}return es(e.coords,S),e.coords.length?e:null}function K(e,t,r,n,o,s,i=r,u=n){if(eo(e),!t?.coords.length)return null;let l=m[o],{coords:a,lengths:c}=t,h=f(r,n),d=f(r&&i,n&&u),y=_(r,n,i,u);if(!c.length)return y(e.coords,a,0,0,a[0],a[1]),eo(e,h,0),e;let p=0,g=s*s;for(let t of c){if(t<l){p+=t*h;continue}let r=e.coords.length/d,n=p,o=p+(t-1)*h;y(e.coords,a,e.coords.length,n,a[n],a[n+1]),function e(t,r,n,o,s,i,u){let l,a=o,c=0;for(let e=i+n;e<u;e+=n)(l=function(e,t,r,n){let o=e[t],s=e[t+1],i=e[r],u=e[r+1],l=e[n],a=e[n+1],c=i,h=u,f=l-c,d=a-h;if(0!==f||0!==d){let e=((o-c)*f+(s-h)*d)/(f*f+d*d);e>1?(c=l,h=a):e>0&&(c+=f*e,h+=d*e)}return(f=o-c)*f+(d=s-h)*d}(r,e,i,u))>a&&(c=e,a=l);a>o&&(c-i>n&&e(t,r,n,o,s,i,c),s(t,r,t.length,c,r[c],r[c+1]),u-c>n&&e(t,r,n,o,s,c,u))}(e.coords,a,h,g,y,n,o),y(e.coords,a,e.coords.length,o,a[o],a[o+1]);let s=e.coords.length/d-r;s>=l?e.lengths.push(s):es(e.coords,r*d),p+=t*h}return e.coords.length?e:null}function ee(e,t,r,n){if(!t?.coords?.length)return null;let o=f(r,n),s=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(t&&t.coords){let e=t.coords;for(let t=0;t<e.length;t+=o){let r=e[t],n=e[t+1];s=Math.min(s,r),a=Math.max(a,r),l=Math.min(l,n),c=Math.max(c,n)}}return(0,i.is)(e)?(0,i.bZ)(e,s,l,a,c):(0,u.al)(s,l,a,c,e),e}function et(e,t,r,n,o){let{coords:i,lengths:u}=t,l=f(r,n);if(!i.length)return e!==t&&eo(e),e;(0,s.O3)(o);let{originPosition:a,scale:c,translate:h}=o;ei.originPosition=a;let d=ei.scale;d[0]=c[0]??1,d[1]=-(c[1]??1),d[2]=c[2]??1,d[3]=c[3]??1;let m=ei.translate;if(m[0]=h[0]??0,m[1]=h[1]??0,m[2]=h[2]??0,m[3]=h[3]??0,!u.length){for(let t=0;t<l;++t)e.coords[t]=function({scale:e,translate:t},r,n){return r*e[n]+t[n]}(ei,i[t],t);return e!==t&&eo(e,l,0),e}let y=0;for(let t=0;t<u.length;t++){let r=u[t];e.lengths[t]=r;for(let t=0;t<l;++t)e.coords[y+t]=function({scale:e,translate:t},r,n){return r*e[n]+t[n]}(ei,i[y+t],t);let n=e.coords[y],o=e.coords[y+1];y+=l;for(let t=1;t<r;t++,y+=l){n+=i[y]*d[0],o+=i[y+1]*d[1],e.coords[y]=n,e.coords[y+1]=o;for(let t=2;t<l;++t)e.coords[y+t]=function({scale:e,translate:t},r,n){return r*e[n]+t[n]}(ei,i[y+t],t)}}return e!==t&&eo(e,i.length,u.length),e}function er(e,t,r,n,o,s){if(eo(e),e.lengths.push(...t.lengths),r===o&&n===s)for(let r=0;r<t.coords.length;r++)e.coords.push(t.coords[r]);else{let i=f(r,n),u=_(r,n,o,s),l=t.coords;for(let t=0;t<l.length;t+=i)u(e.coords,l,e.coords.length,t,l[t],l[t+1])}return e}function en(e,t){let{coords:r,lengths:n}=e,o=0,s=0;for(let e=0;e<n.length;e++){let i=n[e];s+=function(e,t,r,n){let o=0,s=e[n*t],i=e[n*(t+1)];for(let u=1;u<r;u++){let r=s+e[n*(t+u)],l=i+e[n*(t+u)+1],a=(r-s)*(l+i);s=r,i=l,o+=a}return .5*o}(r,o,i,t),o+=i}return Math.abs(s)}function eo(e,t=0,r=0){es(e.lengths,r),es(e.coords,t)}function es(e,t=0){e.length!==t&&(e.length=t)}let ei={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},34907:function(e,t,r){r.d(t,{Z:function(){return S}});var n=r(86641),o=r(94761),s=r(94605),i=r(37180),u=r(31124),l=r(72659),a=r(89312);r(65223),r(3457);var c=r(64186),h=r(62329),f=r(4193),d=r(78),m=r(30563),y=r(90365);r(55066);var p=r(2511),g=r(68468),b=r(9377);async function _(e,t,r){let n=(0,m.en)(e),o=await (0,p.Vr)(n,g.Z.from(t),{...r}),s=o.data.extent;return!s||isNaN(s.xmin)||isNaN(s.ymin)||isNaN(s.xmax)||isNaN(s.ymax)?{count:o.data.count,extent:null}:{count:o.data.count,extent:b.Z.fromJSON(s)}}var w=r(10188),F=r(92544),I=r(87107),x=r(9158);let Z=class extends o.Z{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,l.mN)(this.url)}async execute(e,t){let r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){let r;let n=this._normalizeQuery(e),o=null!=e.outStatistics?.[0],s=(0,i.Z)("featurelayer-pbf-statistics"),u=!o||s;if(this.pbfSupported&&u)try{r=await (0,I.t)(this.url,n,t)}catch(e){if("query:parsing-pbf"!==e.name)throw e;this.pbfSupported=!1}return this.pbfSupported&&u||(r=await (0,F.F)(this.url,n,t)),this._normalizeFields(r.fields),r}async featureSetFromJSON(e,t,n){if(!this._queryIs3DObjectFormat(e)||null==this.infoFor3D||!t.features)return x.Z.fromJSON(t);let{meshFeatureSetFromJSON:o}=await (0,u.Hl)(Promise.all([r.e(50359),r.e(48816),r.e(61694)]).then(r.bind(r,76774)),n);return o(e,this.infoFor3D,t)}executeForCount(e,t){return(0,y.P)(this.url,this._normalizeQuery(e),t)}executeForExtent(e,t){return _(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return(0,w.G)(this.url,this._normalizeQuery(e),t)}async executeRelationshipQuery(e,t){let[{default:n},{executeRelationshipQuery:o}]=await (0,u.Hl)(Promise.all([Promise.resolve().then(r.bind(r,34015)),r.e(98127).then(r.bind(r,98127))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeRelationshipQueryForCount(e,t){let[{default:n},{executeRelationshipQueryForCount:o}]=await (0,u.Hl)(Promise.all([Promise.resolve().then(r.bind(r,34015)),r.e(98127).then(r.bind(r,98127))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeAttachmentQuery(e,t){let{executeAttachmentQuery:n,fetchAttachments:o,processAttachmentQueryResult:s}=await (0,u.Hl)(r.e(77827).then(r.bind(r,77827)),t),i=(0,m.en)(this.url);return s(i,await (this.queryAttachmentsSupported?n(i,e,t):o(i,e,t)))}async executeTopFeaturesQuery(e,t){let{executeTopFeaturesQuery:n}=await (0,u.Hl)(r.e(19115).then(r.bind(r,19115)),t);return n(this.parsedUrl,e,this.sourceSpatialReference,t)}async executeForTopIds(e,t){let{executeForTopIds:n}=await (0,u.Hl)(r.e(49701).then(r.bind(r,49701)),t);return n(this.parsedUrl,e,t)}async executeForTopExtents(e,t){let{executeForTopExtents:n}=await (0,u.Hl)(r.e(74383).then(r.bind(r,74383)),t);return n(this.parsedUrl,e,t)}async executeForTopCount(e,t){let{executeForTopCount:n}=await (0,u.Hl)(r.e(18730).then(r.bind(r,18730)),t);return n(this.parsedUrl,e,t)}_normalizeQuery(e){let t=g.Z.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&((t=t===e?t.clone():t).gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?d.n.from(e.dynamicDataSource):this.dynamicDataSource);let{infoFor3D:r}=this;if(null!=r&&this._queryIs3DObjectFormat(e)){(t=t===e?t.clone():t).formatOf3DObjects=null;let{supportedFormats:n,queryFormats:o}=r,i=(0,f.S0)("model/gltf-binary",n)??(0,f.Ow)("glb",n),u=(0,f.S0)("model/gltf+json",n)??(0,f.Ow)("gltf",n);for(let e of o){if(e===i){t.formatOf3DObjects=e;break}e!==u||t.formatOf3DObjects||(t.formatOf3DObjects=e)}if(!t.formatOf3DObjects)throw new s.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(t.outSpatialReference&&!(0,h.fS)(t.outSpatialReference,this.sourceSpatialReference))throw new s.Z("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==t.outFields||!t.outFields.includes("*")){null==(t=t===e?t.clone():t).outFields&&(t.outFields=[]);let{originX:n,originY:o,originZ:s,translationX:i,translationY:u,translationZ:l,scaleX:a,scaleY:c,scaleZ:h,rotationX:f,rotationY:d,rotationZ:m,rotationDeg:y}=r.transformFieldRoles;t.outFields.push(n,o,s,i,u,l,a,c,h,f,d,m,y)}}return t}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(let t of e){let e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};(0,n._)([(0,a.Cb)({type:d.n})],Z.prototype,"dynamicDataSource",void 0),(0,n._)([(0,a.Cb)()],Z.prototype,"fieldsIndex",void 0),(0,n._)([(0,a.Cb)()],Z.prototype,"gdbVersion",void 0),(0,n._)([(0,a.Cb)()],Z.prototype,"infoFor3D",void 0),(0,n._)([(0,a.Cb)({readOnly:!0})],Z.prototype,"parsedUrl",null),(0,n._)([(0,a.Cb)()],Z.prototype,"pbfSupported",void 0),(0,n._)([(0,a.Cb)()],Z.prototype,"queryAttachmentsSupported",void 0),(0,n._)([(0,a.Cb)()],Z.prototype,"sourceSpatialReference",void 0),(0,n._)([(0,a.Cb)({type:String})],Z.prototype,"url",void 0);let S=Z=(0,n._)([(0,c.j)("esri.layers.graphics.sources.support.QueryTask")],Z)},4193:function(e,t,r){r.d(t,{$6:function(){return d},$z:function(){return s},F7:function(){return o},Ow:function(){return u},S0:function(){return i},d1:function(){return l},dm:function(){return a}});let n=[["binary","application/octet-stream","bin",""]];function o(e,t){return null!=h(t.name,e?.supportedFormats??[])}function s(e,t){if(!e)return!1;let r=a(t,e.supportedFormats??[]);return null!=r&&e.editFormats.includes(r)}function i(e,t){var r;return r=function(e,t){let r=e.toLowerCase();return c(t).find(e=>f(e)===r)}(e,t),r?.[0]}function u(e,t){var r;return r=h(e,t),r?.[0]}function l(e,t){return f(c(t).find(t=>{var r;return r=t,r?.[0]===e}))}function a(e,t){return u(e.name,t)??i(e.type,t)}function c(e){return[...n,...e]}function h(e,t){let r=e.toLowerCase();return c(t).find(e=>(e?.[2].split(",").map(e=>e.toLowerCase())??[]).some(e=>r.endsWith(e)))}function f(e){return e?.[1].toLowerCase()}function d(e){return e.tables?.find(e=>"assetMaps"===e.role)}},87107:function(e,t,r){r.d(t,{t:function(){return p}});var n=r(30563),o=r(36152),s=r(6562),i=r(83339);function u(e,t){return t}function l(e,t,r,n){switch(r){case 0:return f(e,t+n,0);case 1:return"lowerLeft"===e.originPosition?f(e,t+n,1):function({translate:e,scale:t},r,n){return e[1]-r*t[1]}(e,t+n,1)}}function a(e,t,r,n){return 2===r?f(e,t,2):l(e,t,r,n)}function c(e,t,r,n){return 2===r?0===t?0:f(e,t,3):l(e,t,r,n)}function h(e,t,r,n){return 3===r?0===t?0:f(e,t,3):a(e,t,r,n)}function f({translate:e,scale:t},r,n){return e[n]+r*t[n]}class d{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=u,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;let t=(0,s.k)(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(let r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){let r=e.fields;(0,o.O3)(r),r.push(t);let n=r.map(e=>e.name);this._attributesConstructor=function(){for(let e of n)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){let{queryGeometry:r,queryGeometryType:n}=t,o=(0,i.$g)(r.clone(),r,!1,!1,this._transform),s=(0,i.di)(o,n,!1,!1);e.queryGeometryType=n,e.queryGeometry={...s}}createPointGeometry(e){let t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){let n=this._transform;switch(t=this._applyTransform(n,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);let n=this._transform;return null!==this._mValueOffset&&0===e&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(n,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);let n=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);let n=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){let{hasZ:t,hasM:r}=e;return t&&r?h:t?a:r?c:l}}var m=r(2511);r(9158);var y=r(68468);async function p(e,t,r){let o=(0,n.en)(e),s={...r},i=y.Z.from(t),u=!i.quantizationParameters,{data:l}=await (0,m.qp)(o,i,new d({sourceSpatialReference:i.sourceSpatialReference,applyTransform:u}),s);return l}}}]);
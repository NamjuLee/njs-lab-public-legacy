"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87903],{87903:function(t,e,i){i.r(e),i.d(e,{Solution:function(){return v}});let n=(t,e,i)=>{t.clearRect(0,0,t.canvas.width,t.canvas.height),t.save(),void 0!==i&&(t.translate(i.x,i.y),t.scale(i.z,i.z)),void 0!==e&&t.drawImage(e,0,0,e.width,e.height),t.restore()};class s{static add(t,e){return new s(t.x+e.x,t.y+e.y,t.z+e.z)}static subtract(t,e){return new s(t.x-e.x,t.y-e.y,t.z-e.z)}static distance(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}static deepCopy(t){return new s(t.x,t.y,t.z)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);this.x/=t,this.y/=t,this.z/=t}constructor(t,e,i){this.x=t,this.y=e,this.z=i}}let a=(t,e,i,n)=>{let{x:s,y:a}=i,r=1!==e,h=r?(s+Math.abs(n.x))/n.z:s,l=r?(a+Math.abs(n.y))/n.z:a;return{...d(t,e,{x:h-h*e+(s-h),y:l-l*e+(a-l)})}},d=(t,e,i)=>{let{x:n,y:s}=i;return{x:n,y:s}},r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram.jpg";return new Promise((e,i)=>{let n=new Image;n.onload=()=>{e(n),n.onload=null,n=null},n.onerror=t=>{i(t)},n.src=t})},h=void 0;class l{render(){requestAnimationFrame(()=>{this.render()}),this.needInterpolation&&(this.easingInterpolation?(this.statusRendering=u(this.statusRendering,this.statusTarget,this.speedInterpolation),1>s.distance(this.statusRendering,this.statusTarget)&&(this.statusRendering.x=this.statusTarget.x,this.statusRendering.y=this.statusTarget.y,this.statusRendering.z=this.statusTarget.z,this.needInterpolation=!1)):(this.statusRendering=o(this.statusRendering,this.statusTarget,this.speedInterpolation),s.distance(this.statusRendering,this.statusTarget)<150*this.speedInterpolation&&(this.statusRendering.x=this.statusTarget.x,this.statusRendering.y=this.statusTarget.y,this.statusRendering.z=this.statusTarget.z,this.needInterpolation=!1))),n(this.ctx,this.img,this.statusRendering)}constructor(t){this.statusTarget=new s(200,200,4),this.needInterpolation=!1,this.speedInterpolation=.1,this.easingInterpolation=!0,this.solution=t,this.canvas=document.createElement("canvas"),this.canvas.style.background="#111",this.canvas.width=1200,this.canvas.height=800,t.div.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.statusRendering=new s(0,0,1);let e=new s(0,0,1),i=new s(0,0,1),n=!1;this.canvas.addEventListener("mousedown",t=>{let{offsetX:e,offsetY:s}=t;i.x=e,i.y=s,i.z>2&&(n=!0)}),this.canvas.addEventListener("mouseup",t=>{if(!n)return;let{offsetX:s,offsetY:a}=t,d=s-i.x,r=a-i.y;e.x+=d,e.y+=r,n=!1}),this.canvas.addEventListener("wheel",t=>{let{offsetX:n,offsetY:s,deltaY:d}=t;i.z+=.2*(d<0?1:-1),i.z<.2?i.z=.2:i.z>5&&(i.z=5);let{x:r,y:h}=a(this.canvas,i.z,{x:n,y:s},e);e.x=r,e.y=h,e.z=i.z,this.statusRendering.x=r,this.statusRendering.y=h,this.statusRendering.z=i.z}),this.canvas.addEventListener("mousemove",t=>{if(!n)return;let{offsetX:s,offsetY:a}=t,r=e.x+(s-i.x),h=e.y+(a-i.y),{x:l,y:o}=d(this.canvas,e.z,{x:r,y:h});this.statusRendering.x=l,this.statusRendering.y=o,this.statusRendering.z=e.z}),console.log(null==h?void 0:h.url),(null==h?void 0:h.url)?(console.log(null==h?void 0:h.url),r(null==h?void 0:h.url).then(t=>{this.img=t})):r().then(t=>{this.img=t}),this.render()}}let o=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=s.subtract(e,t);return n.normalize(),new s(t.x+n.x*i*150,t.y+n.y*i*150,t.z+n.z*i*150)},u=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=s.subtract(e,t);return new s(t.x+n.x*i,t.y+n.y*i,t.z+n.z*i)};class c{updateFrameNumber(){for(;this.divFrameNum.lastElementChild;)this.divFrameNum.removeChild(this.divFrameNum.lastElementChild);for(let t=0;t<this.timeline.length;++t)this.currentIndex===t?this.divFrameNum.appendChild(m(t,"aqua")):this.divFrameNum.appendChild(m(t,"#999"))}updateTarget(){this.solution.canvasImage.statusTarget=new s(this.timeline[this.currentIndex].x,this.timeline[this.currentIndex].y,this.timeline[this.currentIndex].z),this.solution.canvasImage.needInterpolation=!0}constructor(t){this.currentIndex=-1,this.timeline=[],this.solution=t,this.div=document.createElement("div"),this.solution.div.appendChild(this.div);let e=document.createElement("div");e.style.display="flex",this.div.appendChild(e);let i=document.createElement("div");e.appendChild(i),i.textContent="Create Key",i.style.width="100px",i.style.color="aqua",i.onclick=()=>{this.timeline.push(s.deepCopy(t.canvasImage.statusRendering)),this.currentIndex=this.timeline.length-1,this.updateFrameNumber()};let n=document.createElement("div");e.appendChild(n),n.textContent="Update Key",n.style.width="100px",n.style.color="aqua",n.onclick=()=>{this.timeline[this.currentIndex]=s.deepCopy(t.canvasImage.statusRendering)};let a=document.createElement("div");e.appendChild(a),a.textContent="<<<",a.style.paddingRight="20px",a.style.color="aqua",a.onclick=()=>{this.currentIndex--,this.currentIndex<0&&(this.currentIndex=0),this.updateTarget(),this.updateFrameNumber()};let d=document.createElement("div");e.appendChild(d),d.textContent=">>>",d.style.color="aqua",d.onclick=()=>{this.currentIndex++,this.currentIndex>this.timeline.length-1&&(this.currentIndex=this.timeline.length-1),this.updateTarget(),this.updateFrameNumber()};let r=document.createElement("div");this.div.appendChild(r),r.textContent="Play",r.style.color="aqua",r.onclick=()=>{this.solution.canvasImage.needInterpolation=!this.solution.canvasImage.needInterpolation};let h=g("Easing Interpolation");this.div.append(h.div),h.checkBox.checked=!0,h.checkBox.onchange=()=>{!0===h.checkBox.checked?this.solution.canvasImage.easingInterpolation=!0:this.solution.canvasImage.easingInterpolation=!1};let l=p("Speed","0","100");l.text.textContent="Speed: ",this.div.append(l.div),l.slider.oninput=()=>{let t=+(.001*+l.slider.value+.03).toFixed(3);l.text.textContent="Speed: "+t,this.solution.canvasImage.speedInterpolation=t},this.divFrameNum=document.createElement("div"),this.divFrameNum.style.display="flex",this.div.appendChild(this.divFrameNum),this.updateFrameNumber();let o=document.createElement("p");o.textContent="https://raw.githubusercontent.com/NamjuLee/data/master/img/worldmap/worldMap_03.jpg",this.div.append(o)}}let m=(t,e)=>{let i=document.createElement("p");return i.textContent=" ".concat(t," "),i.style.paddingRight="10px",i.style.color=e,i},p=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2009",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2015",n=document.createElement("div");n.style.display="flex";let s=document.createElement("input");s.type="range",s.min=e,s.max=i;let a=document.createElement("div");return a.textContent=t,a.style.color="#aaa",n.appendChild(s),n.appendChild(a),{div:n,slider:s,text:a}},g=t=>{let e=document.createElement("div");e.style.display="flex";let i=document.createElement("input");i.type="checkbox",i.defaultChecked=!1;let n=document.createElement("div");return n.textContent=t,n.style.color="#aaa",e.appendChild(i),e.appendChild(n),{div:e,checkBox:i}};class v{destroy(){for(;this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}constructor(t){this.divHost=document.getElementById(t),this.divHost.style.display="flex",this.divHost.style.alignItems="center",this.div=document.createElement("div"),this.divHost.appendChild(this.div),this.div.style.marginLeft="auto",this.div.style.marginRight="auto",this.div.style.backgroundColor="#555",this.div.style.width="1000px",this.div.style.height="800px",this.canvasImage=new l(this),this.controller=new c(this)}}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93943],{15510:function(t){function e(t){return Promise.resolve().then(function(){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=function(){return[]},e.resolve=e,e.id=15510,t.exports=e},75410:function(){},48628:function(){},31601:function(){},67792:function(){},34977:function(){},75042:function(){},21322:function(t,e,i){"use strict";i.d(e,{P:function(){return r}});var s=i(88405);class r{predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(s.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(s.scalar(4)).mul(this.weights[3]).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(s.scalar(5)).mul(this.weights[4]).add(t.pow(s.scalar(4)).mul(this.weights[3])).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):(this.dim,this.predict1d(t))}loss(t,e){return t.sub(e).square().mean()}train(t,e){s.tidy(()=>{let i=s.tensor1d(t),r=s.tensor1d(e);this.optimizer.minimize(()=>this.loss(this.predict(i),r))})}constructor(t=0){this.weights=[],this.dim=3,this.leraningRate=.2,this.dim=t;for(let t=0;t<5;++t){let t=s.variable(s.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=s.variable(s.scalar(2*Math.random()-1)),this.optimizer=s.train.adam(this.leraningRate)}}},88876:function(t,e,i){"use strict";i.d(e,{NJSCORE:function(){return o},PolynomialRegression:function(){return n.P},RendererThree:function(){return s.T}});var s=i(14540),r=i(45169);i.o(r,"AStart")&&i.d(e,{AStart:function(){return r.AStart}}),i.o(r,"COLOR_BLENDING")&&i.d(e,{COLOR_BLENDING:function(){return r.COLOR_BLENDING}}),i.o(r,"Graph")&&i.d(e,{Graph:function(){return r.Graph}}),i.o(r,"KNN")&&i.d(e,{KNN:function(){return r.KNN}}),i.o(r,"LinearRegression")&&i.d(e,{LinearRegression:function(){return r.LinearRegression}}),i.o(r,"LinearRegressionGradientDescent")&&i.d(e,{LinearRegressionGradientDescent:function(){return r.LinearRegressionGradientDescent}}),i.o(r,"MercatorProjection")&&i.d(e,{MercatorProjection:function(){return r.MercatorProjection}}),i.o(r,"PolynomialRegression")&&i.d(e,{PolynomialRegression:function(){return r.PolynomialRegression}}),i.o(r,"RGBtoGray")&&i.d(e,{RGBtoGray:function(){return r.RGBtoGray}}),i.o(r,"RendererCanvas")&&i.d(e,{RendererCanvas:function(){return r.RendererCanvas}}),i.o(r,"RendererJSAPI")&&i.d(e,{RendererJSAPI:function(){return r.RendererJSAPI}}),i.o(r,"TypeDithering")&&i.d(e,{TypeDithering:function(){return r.TypeDithering}}),i.o(r,"Vector3")&&i.d(e,{Vector3:function(){return r.Vector3}}),i.o(r,"buildNetwork")&&i.d(e,{buildNetwork:function(){return r.buildNetwork}}),i.o(r,"crossProduct")&&i.d(e,{crossProduct:function(){return r.crossProduct}}),i.o(r,"deepCopy")&&i.d(e,{deepCopy:function(){return r.deepCopy}}),i.o(r,"distanceEuclidean")&&i.d(e,{distanceEuclidean:function(){return r.distanceEuclidean}}),i.o(r,"distanceTo")&&i.d(e,{distanceTo:function(){return r.distanceTo}}),i.o(r,"dithering4_4")&&i.d(e,{dithering4_4:function(){return r.dithering4_4}}),i.o(r,"ditheringFloydSteinberg")&&i.d(e,{ditheringFloydSteinberg:function(){return r.ditheringFloydSteinberg}}),i.o(r,"getArrayBinaryImgFromCtx")&&i.d(e,{getArrayBinaryImgFromCtx:function(){return r.getArrayBinaryImgFromCtx}}),i.o(r,"getCSVFromURL")&&i.d(e,{getCSVFromURL:function(){return r.getCSVFromURL}}),i.o(r,"getCheckBox")&&i.d(e,{getCheckBox:function(){return r.getCheckBox}}),i.o(r,"getImgFromURL")&&i.d(e,{getImgFromURL:function(){return r.getImgFromURL}}),i.o(r,"getJSONFromURL")&&i.d(e,{getJSONFromURL:function(){return r.getJSONFromURL}}),i.o(r,"getLineSeg")&&i.d(e,{getLineSeg:function(){return r.getLineSeg}}),i.o(r,"getRandomHex")&&i.d(e,{getRandomHex:function(){return r.getRandomHex}}),i.o(r,"getSlider")&&i.d(e,{getSlider:function(){return r.getSlider}}),i.o(r,"getUUID")&&i.d(e,{getUUID:function(){return r.getUUID}}),i.o(r,"hex2RGBA")&&i.d(e,{hex2RGBA:function(){return r.hex2RGBA}}),i.o(r,"isInsideOfVecs")&&i.d(e,{isInsideOfVecs:function(){return r.isInsideOfVecs}}),i.o(r,"normalize")&&i.d(e,{normalize:function(){return r.normalize}}),i.o(r,"reflect")&&i.d(e,{reflect:function(){return r.reflect}}),i.o(r,"remap")&&i.d(e,{remap:function(){return r.remap}}),i.o(r,"shuffleArray")&&i.d(e,{shuffleArray:function(){return r.shuffleArray}});var n=i(21322),o=i(8483)},14540:function(t,e,i){"use strict";i.d(e,{T:function(){return n}});var s=i(97776),r=i(78252);class n{initCanvas(){this.scene=new s.xsS,this.scene.background=new s.Ilk(0),this.scene.castShadow=!0,this.renderer=new s.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(this.hostDiv.clientWidth/this.hostDiv.clientHeight),this.renderer.domElement.id="Three",this.renderer.domElement.style.position="absolute",this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight),this.hostDiv.appendChild(this.renderer.domElement),this.camera=new s.cPb(30,this.hostDiv.clientWidth/this.hostDiv.clientHeight,1,5e3),this.controls=new r.OrbitControls(this.camera,this.renderer.domElement),this.camera.position.set(0,0,5),this.controls.update(),this.canvas=this.renderer.domElement,this.init()}init(){this.eventBind()}eventBind(){this.renderer.domElement.onmousedown=t=>this.mouseDown(t),this.renderer.domElement.onmouseup=t=>this.mouseUp(t),this.renderer.domElement.onmousemove=t=>this.mouseMove(t),this.renderer.domElement.addEventListener("click",t=>this.mouseClick(t)),window.addEventListener("resize",()=>this.onWindowResize())}onWindowResize(){this.camera.aspect=this.hostDiv.clientWidth/this.hostDiv.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight)}start(){this.loop()}mouseDown(t){}mouseUp(t){}mouseClick(t){}mouseDClick(t){}mouseMove(t){}mouseDrag(t){}update(t){}destroy(){for(window.removeEventListener("resize",()=>this.onWindowResize()),cancelAnimationFrame(this.requestFrame),this.requestFrame=void 0;this.hostDiv.lastChild;)this.hostDiv.removeChild(this.hostDiv.lastChild)}constructor(t){this.t=0,this.requestFrame=void 0,this.loop=()=>{this.requestFrame=requestAnimationFrame(this.loop),this.controls.update(),this.update(this.scene),this.renderer.render(this.scene,this.camera),this.t+=.01},this.hostDiv=document.getElementById(t),this.initCanvas()}}},65912:function(t,e,i){"use strict";i.r(e),i.d(e,{Renderer:function(){return d},Solution:function(){return h}});var s=i(88876),r=i(8483);class n{toggleTargetRendering(t){this._toggleTargetRendering=t}updateTargetDelay(t){for(let e=0;e<this.boids.length;++e)this.boids[e].targetDelay=t}updateMass(t){for(let e=0;e<this.boids.length;++e)this.boids[e].mass=t}updateVelocity(t){for(let e=0;e<this.boids.length;++e)this.boids[e].maxVelocity=t}AddAgent(t,e,i,r){let n=new o(this,new s.Vector3(t,e),new s.Vector3(0,0),new s.Vector3(i,r),this.boundary);this.boids.push(n)}Update(){for(let t of this.boids)t.Update()}GetPoint(){let t=[];for(let e of this.boids)e.isRenderable&&t.push(e.p);return t}Render(t){this.boids.forEach(e=>{e.Render(t)}),t.beginPath(),t.moveTo(this.boundary[0].x,this.boundary[0].y);for(let e=1;e<this.boundary.length;++e)t.lineTo(this.boundary[e].x,this.boundary[e].y);t.stroke()}constructor(){this.boids=[],this._toggleTargetRendering=!1,this.boids=[],this.boundary=[new s.Vector3(50,50,0),new s.Vector3(300,70,0),new s.Vector3(400,400,0),new s.Vector3(50,300,0),new s.Vector3(50,50,0)]}}class o{Update(){this.UpdateVec1()}UpdateTarget(){let t=this.getRandomVecInSide();if(void 0!==this.boundary)for(;!(0,s.isInsideOfVecs)(t,this.boundary);)t=this.getRandomVecInSide();this.target=t}getRandomVecInSide(){let t=r.$H.GetRandomInt(this.p0.x,this.p1.x),e=r.$H.GetRandomInt(this.p0.y,this.p1.y);return new s.Vector3(t,e)}UpdateVec1(){this.desiredVelocity=new s.Vector3(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x<this.maxForce?this.desiredVelocity.x-this.velocity.x:this.maxForce,e=this.desiredVelocity.y-this.velocity.y<this.maxForce?this.desiredVelocity.y-this.velocity.y:this.maxForce,i=this.desiredVelocity.z-this.velocity.z<this.maxForce?this.desiredVelocity.z-this.velocity.z:this.maxForce;this.steering=new s.Vector3(t/this.mass,e/this.mass,i/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.Queue(),this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z,this.t+=.01,this.t>this.targetDelay&&(this.t=0,this.UpdateTarget())}UpdateVec0(){this.steering=this.Wander(new s.Vector3(this.velocity.x,this.velocity.y,this.velocity.z)),this.steering.x=this.steering.x<this.maxForce?this.steering.x:this.maxForce,this.steering.y=this.steering.y<this.maxForce?this.steering.y:this.maxForce,this.steering.z=this.steering.z<this.maxForce?this.steering.z:this.maxForce,this.steering.x/=this.mass,this.steering.y/=this.mass,this.steering.z/=this.mass,this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x=this.velocity.x+this.steering.x:this.velocity.x=this.maxSpeed,this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y=this.velocity.y+this.steering.y:this.velocity.y=this.maxSpeed,this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z=this.velocity.z+this.steering.z:this.velocity.z=this.maxSpeed,this.Queue(),console.log(this.maxSpeed),this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z}Wander(t){let e=new s.Vector3(t.x,t.y,t.z);e.normalize(),e.scale(this.CIRCLE_DISTANCE);let i=new s.Vector3(0,-1);return i.scale(this.CIRCLE_RADIUS),i=this.setAngle(i,this.wanderAngle),this.wanderAngle+=Math.random()*this.ANGLE_CHANGE-.5*this.ANGLE_CHANGE,e.add(i)}setAngle(t,e){let i=t.length();return t.x=Math.cos(e)*i,t.y=Math.sin(e)*i,t}GetNeighborAhead(){var t=void 0,e=this.velocity.clone();e.normalize(),e.scale(this.MAX_QUEUE_AHEAD);let i=this.p.clone().add(e);for(let e=0;e<o.list.length;e++){let r=o.list[e],n=s.Vector3.distanceTo(i,r.p);if(r!==this&&n<=this.MAX_QUEUE_RADIUS){t=r;break}}return t}Queue(){return void 0!==this.GetNeighborAhead()&&this.velocity.scale(.3),new s.Vector3(0,0)}Render(t){this.RenderCircle(t)}RenderDesiredVelocity(t){}RenderCurrentVelocity(t){}RenderCircle(t){this.t+=.05,this.timerTrajectory+=1,this.timerTrajectory%5==0&&(this.trajectory.length>30&&this.trajectory.shift(),this.trajectory.push(new s.Vector3(this.p.x,this.p.y)),this.timerTrajectory=0);for(let e=0;e<this.trajectory.length;++e)t.fillStyle="rgba(100, 100, 100 ,0.1)",t.beginPath(),t.arc(this.trajectory[e].x,this.trajectory[e].y,.2*e,0,6.28),t.closePath(),t.fill();t.strokeStyle="#000000",t.lineWidth=.5,this.controller._toggleTargetRendering&&(t.beginPath(),t.moveTo(this.p.x,this.p.y),t.lineTo(this.target.x,this.target.y),t.stroke(),t.fillStyle="#000000",t.beginPath(),t.arc(this.target.x,this.target.y,2.5,0,6.28),t.closePath(),t.fill()),t.fillStyle="#000000",t.beginPath(),t.arc(this.p.x,this.p.y,2.5,0,6.28),t.closePath(),t.fill(),t.beginPath(),t.arc(this.p.x,this.p.y,10+5*Math.sin(this.t),0,6.28),t.closePath(),t.stroke(),t.lineWidth=.5,t.strokeStyle="rgba(".concat(255,", ",255,", ",0,", ").concat(1-.07*this.scaleBounding,")"),t.beginPath(),t.arc(this.p.x,this.p.y,this.scaleBounding,0,6.28),t.closePath(),t.stroke(),this.scaleBounding+=.2,1-.07*this.scaleBounding<0&&(this.scaleBounding=0)}constructor(t,e,i,r,n){this.maxForce=2,this.maxVelocity=2,this.maxSpeed=.9,this.mass=100.2,this.isRenderable=!0,this.targetID=0,this.col=!1,this.velocity=new s.Vector3(0,0,0),this.wanderAngle=0,this.CIRCLE_DISTANCE=50,this.CIRCLE_RADIUS=50,this.ANGLE_CHANGE=15,this.t=0,this.MAX_QUEUE_AHEAD=15,this.MAX_QUEUE_RADIUS=10,this.trajectory=[],this.timerTrajectory=0,this.scaleBounding=0,this.targetDelay=3,this.controller=t,o.list.push(this),this.p=e,this.p0=i,this.p1=r,n&&(this.boundary=n),this.UpdateTarget()}}o.list=[];class h{destroy(){for(this.renderer.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}constructor(t){this.divHost=document.getElementById(t);let e=document.createElement("div");e.style.marginLeft="auto",e.style.marginRight="auto",e.style.backgroundColor="#333",e.style.width="500px",e.style.height="500px",this.divHost.appendChild(e),this.renderer=new d(e);let i=document.createElement("div");e.append(i),i.textContent="Click or drag on canvas to populate agents";let r=document.createElement("div");e.append(r);let n=(0,s.getSlider)("Delay",1,10);e.appendChild(n.div),n.slider.defaultValue="3",n.slider.oninput=()=>{this.renderer.BoidContoller.updateTargetDelay(+n.slider.value)};let o=(0,s.getSlider)("Mass",1,500);e.appendChild(o.div),o.slider.defaultValue="3",o.slider.oninput=()=>{this.renderer.BoidContoller.updateMass(+o.slider.value)};let h=(0,s.getSlider)("Velocity",1,10);e.appendChild(h.div),h.slider.defaultValue="3",h.slider.oninput=()=>{this.renderer.BoidContoller.updateVelocity(+h.slider.value)};let a=(0,s.getCheckBox)("target");r.appendChild(a.div),a.checkBox.checked=!1,a.checkBox.onchange=()=>{!0===a.checkBox.checked?this.renderer.toggleTargetRendering(!0):this.renderer.toggleTargetRendering(!1)}}}class d extends s.RendererCanvas{toggleTargetRendering(t){this.BoidContoller.toggleTargetRendering(t)}mouseDown(t,e){}mouseUp(t,e){this.BoidContoller.AddAgent(t,e,this.canvas.width,this.canvas.height)}mouseDrag(t,e){this.dragTime>5&&(this.BoidContoller.AddAgent(t,e,this.canvas.width,this.canvas.height),this.dragTime=0),this.dragTime++}render(t){this.BoidContoller.Update(),this.BoidContoller.Render(t)}constructor(t){super(t),this.dragTime=0,this.canvas.style.position="relative",this.canvas.style.width="100%",this.canvas.style.height="100%",this.BoidContoller=new n,this.start()}}}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57045],{57812:function(e,t,i){i.d(t,{z:function(){return n}});var r=i(85515);class n{constructor(e,t){this._storage=new r.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,i=1){this._storage.put(this,e,t,i,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},85515:function(e,t,i){i.d(t,{WJ:function(){return a},Xq:function(){return l}});var r,n,s=i(35313);(r=n||(n={}))[r.ALL=0]="ALL",r[r.SOME=1]="SOME";class l{constructor(e,t,i){this.name=e,this._storage=t,this.id=o+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,i,r=0){this._storage.put(this,e,t,i,r)}pop(e){let t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){let t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t,i){this._storage.updateSize(this,e,t,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class a{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new s.Z,this._users=new s.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(t=>t[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){let i=this._db.get(e.id+t);return i?.size??0}put(e,t,i,r,s){t=e.id+t;let l=this._db.get(t);return(l&&(this._size-=l.size,e.size-=l.size,this._db.delete(t),l.entry!==i&&this._notifyRemove(t,l.entry,l.size,n.ALL)),r>this._maxSize)?void this._notifyRemove(t,i,r,n.ALL):void 0===i?void console.warn("Refusing to cache undefined entry "):!r||r<0?(console.warn(`Refusing to cache entry with size ${r} for key ${t}`),void this._notifyRemove(t,i,0,n.ALL)):void(this._db.set(t,new u(i,r,1+Math.max(s,-4)- -3)),this._size+=r,e.size+=r,this._checkSize())}updateSize(e,t,i,r){t=e.id+t;let s=this._db.get(t);if(s&&s.entry===i){for(this._size-=s.size,e.size-=s.size;r>this._maxSize;){let e=this._notifyRemove(t,i,r,n.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);r=e}s.size=r,this._size+=r,e.size+=r,this._checkSize()}}pop(e,t){t=e.id+t;let i=this._db.get(t);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(e,t){t=e.id+t;let i=this._db.get(t);if(void 0!==i)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}peek(e,t){let i=this._db.get(e.id+t);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){let e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=[];this._db.forEach((e,r)=>{let n=e.lifetime;i[n]=(i[n]||0)+e.size,this._users.forAll(i=>{let{id:n,name:s}=i;if(r.startsWith(n)){let i=t[s]||0;t[s]=i+e.size}})});let r={};this._users.forAll(e=>{let i=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){let n=t[i]||0;t[i]=n,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"});let n=Object.keys(t);n.sort((e,i)=>t[i]-t[e]),n.forEach(i=>e[i]=Math.round(t[i]/1048576)+"MB / "+r[i]);for(let t=i.length-1;t>=0;--t){let r=i[t];r&&(e["Priority "+(t+-3-1)]=Math.round(r/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){let t=e.id;this._db.forEach((e,i)=>{i.startsWith(t)&&(this._size-=e.size,this._db.delete(i),this._notifyRemove(i,e.entry,e.size,n.ALL))}),e.size=0}clearAll(){this._db.forEach((e,t)=>this._notifyRemove(t,e.entry,e.size,n.ALL)),this._users.forAll(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i,r){let n;return this._removeFuncs.some(s=>{if(e.startsWith(s[0])){let e=s[1](t,r,i);return"number"==typeof e&&(n=e),!0}return!1}),n}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e)),this._checkSizeLimits()}_checkSizeLimits(e){let t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;let i=e?.id,r=!0;for(;r;)for(let[n,s]of(r=!1,this._db))if(0===s.lifetime&&(!i||n.startsWith(i))){if(this._purgeItem(n,s,e),t.size<=.9*t.maxSize)return;r||=this._db.has(n)}for(let[r,n]of this._db)if((!i||r.startsWith(i))&&(this._purgeItem(r,n,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,i=this._users.find(t=>e.startsWith(t.id))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,i&&(i.size-=t.size);let r=this._notifyRemove(e,t.entry,t.size,n.SOME);null!=r&&r>0&&(this._size+=r,i&&(i.size+=r),t.lives=t.lifetime,t.size=r,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}let o=0;class u{constructor(e,t,i){this.entry=e,this.size=t,this.lifetime=i,this.lives=i}}},44837:function(e,t,i){i.d(t,{I:function(){return n},v:function(){return s}});var r=i(13507);function n(e,t,i=0){let n=(0,r.uZ)(e,0,o);for(let e=0;e<4;e++){var s;t[i+e]=Math.floor(256*((s=n*l[e])-Math.floor(s)))}}function s(e,t=0){let i=0;for(let r=0;r<4;r++)i+=e[t+r]*a[r];return i}let l=[1,256,65536,16777216],a=[1/256,1/65536,1/16777216,1/4294967296],o=s(new Uint8ClampedArray([255,255,255,255]))},1822:function(e,t,i){i.d(t,{CS:function(){return g},Cw:function(){return m},Yu:function(){return x},j5:function(){return _},lm:function(){return w}});var r=i(39301),n=i(94596),s=i(23504),l=i(54748),a=i(61764),o=i(72659),u=i(36502),h=i(54053),c=i(87394),p=i(90071),d=i(9158);let f={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function m(e){let t=e.folders||[],i=t.slice(),r=new Map,n=new Map,s=new Map,l=new Map,o=new Map,u={esriGeometryPoint:n,esriGeometryPolyline:s,esriGeometryPolygon:l};(e.featureCollection?.layers||[]).forEach(e=>{let t=(0,a.d9)(e);t.featureSet.features=[];let i=e.featureSet.geometryType;r.set(i,t);let o=e.layerDefinition.objectIdField;"esriGeometryPoint"===i?y(n,o,e.featureSet.features):"esriGeometryPolyline"===i?y(s,o,e.featureSet.features):"esriGeometryPolygon"===i&&y(l,o,e.featureSet.features)}),e.groundOverlays&&e.groundOverlays.forEach(e=>{o.set(e.id,e)}),t.forEach(t=>{t.networkLinkIds.forEach(r=>{let n=function(e,t,i){let r;let n=(i.some(t=>t.id===e&&(r=t,!0)),r);return n&&(n.parentFolderId=t,n.networkLink=n),n}(r,t.id,e.networkLinks);n&&i.push(n)})}),i.forEach(e=>{if(e.featureInfos){for(let t of(e.points=(0,a.d9)(r.get("esriGeometryPoint")),e.polylines=(0,a.d9)(r.get("esriGeometryPolyline")),e.polygons=(0,a.d9)(r.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos))switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{let i=u[t.type].get(t.id);i&&e[f[t.type]]?.featureSet.features.push(i);break}case"GroundOverlay":{let i=o.get(t.id);i&&e.mapImages.push(i)}}e.fullExtent=w([e])}});let h=w(i);return{folders:t,sublayers:i,extent:h}}function g(e,t,i,s){let a=n.id?.findCredential(e);e=(0,o.fl)(e,{token:a?.token});let u=r.default.kmlServiceUrl;return(0,l.Z)(u,{query:{url:e,model:"simple",folders:"",refresh:0!==i||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:s})}function _(e,t,i=null,r=[]){let n=[],s={},l=t.sublayers,a=new Set(t.folders.map(e=>e.id));return l.forEach(t=>{let l=new e;if(i?l.read(t,i):l.read(t),r.length&&a.has(l.id)&&(l.visible=r.includes(l.id)),s[t.id]=l,null!=t.parentFolderId&&-1!==t.parentFolderId){let e=s[t.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers?.unshift(l)}else n.unshift(l)}),n}function y(e,t,i){i.forEach(i=>{e.set(i.attributes[t],i)})}async function x(e){let t=d.Z.fromJSON(e.featureSet).features,i=e.layerDefinition,r=(0,p.i)(i.drawingInfo.renderer),n=s.Z.fromJSON(e.popupInfo),l=[];for(let e of t){let t=await r.getSymbolAsync(e);e.symbol=t,e.popupTemplate=n,e.visible=!0,l.push(e)}return l}function w(e){let t=(0,h.Ue)(h.G_),i=(0,h.Ue)(h.G_);for(let r of e){if(r.polygons?.featureSet?.features)for(let e of r.polygons.featureSet.features)(0,c.Yg)(t,e.geometry),(0,h.TC)(i,t);if(r.polylines?.featureSet?.features)for(let e of r.polylines.featureSet.features)(0,c.Yg)(t,e.geometry),(0,h.TC)(i,t);if(r.points?.featureSet?.features)for(let e of r.points.featureSet.features)(0,c.Yg)(t,e.geometry),(0,h.TC)(i,t);if(r.mapImages)for(let e of r.mapImages)(0,c.Yg)(t,e.extent),(0,h.TC)(i,t)}return(0,h.fS)(i,h.G_)?void 0:{xmin:i[0],ymin:i[1],zmin:i[2],xmax:i[3],ymax:i[4],zmax:i[5],spatialReference:u.Z.WGS84}}},40845:function(e,t,i){i.d(t,{Fi:function(){return U},Hq:function(){return L},Mk:function(){return m},P_:function(){return B},Qp:function(){return V},VO:function(){return S},Wt:function(){return k},_D:function(){return b},kr:function(){return W},lK:function(){return Z},nF:function(){return T},tB:function(){return A},ut:function(){return z},vF:function(){return j},zD:function(){return v}}),i(55066);var r,n,s=i(78628),l=i(94605),a=i(9266),o=i(12971),u=i(20928),h=i(62329),c=i(9377),p=i(33876),d=i(54001),f=i(36502);function m(e,t,i){return!(0,u.canProjectWithoutEngine)(e,t,i)}function g(e,t,i){let r=m(e,t,i);if(r&&!(0,u.isLoaded)())throw new l.Z("rasterprojectionhelper-project","projection engine is not loaded");return r}(r=n||(n={}))[r.None=0]="None",r[r.North=1]="North",r[r.South=2]="South",r[r.Both=3]="Both";let _=(e,t,i,r=0)=>{if(1===i[0])return[0,0];let n=1,s=-1,l=1,a=-1;for(let t=0;t<e.length;t+=2)isNaN(e[t])||(n=n>e[t]?e[t]:n,s=s>e[t]?s:e[t],l=l>e[t+1]?e[t+1]:l,a=a>e[t+1]?a:e[t+1]);let{cols:o,rows:u}=t,h=(s-n)/o/i[0],c=(a-l)/u/i[1],p=2*r,d=0,f=!1,m=[0,0];for(let t=0;t<o-3;t++){for(let i=0;i<u-3;i++){let r=t*u*2+2*i,n=(e[r]+e[r+4]+e[r+4*u]+e[r+4*u+4])/4,s=(e[r+1]+e[r+5]+e[r+4*u+1]+e[r+4*u+5])/4,l=Math.abs((n-e[r+2*u+2])/h),a=Math.abs((s-e[r+2*u+3])/c);if(l+a>d&&(d=l+a,m=[l,a]),p&&d>p){f=!0;break}}if(f)break}return m},y={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},x=new Map,w=new Map;async function v(){(0,u.isLoaded)()||await (0,u.load)()}function b(e,t,i){return g(e.spatialReference,t),i?(0,u.getTransformation)(t,e.spatialReference,e):(0,u.getTransformation)(e.spatialReference,t,e)}function S(e,t,i,r=null){let n;let s=e.spatialReference;if(s.equals(t))return e;g(s,t,r);let l=i.center,o=new c.Z({xmin:l.x-e.x/2,xmax:l.x+e.x/2,ymin:l.y-e.y/2,ymax:l.y+e.y/2,spatialReference:s}),h=(0,u.project)(o,t,r),p=z(t);if(null==h||null!=p&&h.width>=p){let i=(0,a.c9)(s)/(0,a.c9)(t);n={x:e.x*i,y:e.y*i}}else n={x:h.width,y:h.height};return n}function R(e,t=.01){return(0,a.c9)(e)?t/(0,a.c9)(e):0}function T(e,t,i=null,r=!0){let n=e.spatialReference;if(n.equals(t))return e;g(n,t,i);let s=(0,u.project)(e,t,i);return r&&s&&C([e],[s],n,t),s}function C(e,t,i,r){let n=G(i,!0),s=G(r,!0),l=R(i,500),a=R(r,500);if(l&&null!=n&&null!=s)for(let i=0;i<e.length;i++){let r=t[i];if(!r)continue;let{x:o}=e[i],{x:u}=r;u>=s[1]-a&&Math.abs(o-n[0])<l?r.x-=s[1]-s[0]:u<=s[0]+a&&Math.abs(o-n[1])<l&&(r.x+=s[1]-s[0])}}function E(e,t=!1){let i=e.wkid||e.wkt2||e.wkt;if(!i||e.isGeographic)return null;if(i=String(i),x.has(i)){let e=x.get(i);return t?e?.gcs:e?.pcs}let r=e.wkid?o.P.coordsys(e.wkid):o.P.fromString(e.isGeographic?o.a.PE_TYPE_GEOGCS:o.a.PE_TYPE_PROJCS,e.wkt2||e.wkt),n=M(r,R(e,1e-4)),s=M(r,0,!0);return x.set(i,{pcs:n,gcs:s}),t?s:n}function M(e,t=0,i=!1){let r=o.j.generate(e),n=i?e.horizonGcsGenerate():e.horizonPcsGenerate();if(!r||!n?.length)return null;let s=!1,l=n.find(e=>1===e.getInclusive()&&1===e.getKind());if(!l){if(!(l=n.find(e=>1===e.getInclusive()&&0===e.getKind())))return null;s=!0}let a=i?0:(2===r.getNorthPoleLocation()?1:0)|(2===r.getSouthPoleLocation()?2:0),u=r.isPannableRectangle(),h=l.getCoord();if(s)return{isEnvelope:s,isPannable:u,vertices:h,coef:null,bbox:[h[0][0]-t,h[0][1]-t,h[1][0]+t,h[1][1]+t],poleLocation:a};let c=0,p=[],[d,f]=h[0],[m,g]=h[0];for(let e=0,t=h.length;e<t;e++){++c===t&&(c=0);let[i,r]=h[e],[n,s]=h[c];if(s===r)p.push([i,n,r,s,2]);else{let e=(n-i)/(s-r||1e-4),t=i-e*r;r<s?p.push([e,t,r,s,0]):p.push([e,t,s,r,1])}d=d<i?d:i,f=f<r?f:r,m=m>i?m:i,g=g>r?g:r}return{isEnvelope:!1,isPannable:u,vertices:h,coef:p,bbox:[d,f,m,g],poleLocation:a}}function I(e,t){let i=[],{cols:r,rows:n,xres:s,yres:l,usePixelCenter:a}=e,{xmin:o,ymax:u}=e;if(a&&(o+=s/2,u-=l/2),null==t){for(let e=0;e<r;e++)for(let t=0;t<n;t++)i.push([o+s*e,u-l*t]);return{points:i}}let h=new Uint8Array(r*n);if(t.isEnvelope){let{bbox:[e,a,c,p]}=t;for(let d=0,f=0;d<r;d++){let r=o+s*d,m=t.isPannable||r>=e&&r<=c;for(let e=0;e<n;e++,f++){let t=u-l*e;m&&t>=a&&t<=p&&(i.push([r,t]),h[f]=1)}}return{points:i,mask:h}}let c=t.coef,p=[];for(let e=0;e<n;e++){let t=u-l*e,i=[],r=[];for(let e=0;e<c.length;e++){let[n,s,l,a,o]=c[e];if(t===l&&l===a)i.push(n),i.push(s),r.push(2),r.push(2);else if(t>=l&&t<=a){let e=n*t+s;i.push(e),r.push(o)}}let n=i;if(i.length>2){let e=2===r[0]?0:r[0],t=i[0];n=[];for(let s=1;s<r.length;s++)2===r[s]&&s!==r.length-1||(r[s]!==e&&(n.push(0===e?Math.min(t,i[s-1]):Math.max(t,i[s-1])),e=r[s],t=i[s]),s===r.length-1&&n.push(0===r[s]?Math.min(t,i[s]):Math.max(t,i[s])));n.sort((e,t)=>e-t)}else i[0]>i[1]&&(n=[i[1],i[0]]);p.push(n)}for(let e=0,t=0;e<r;e++){let r=o+s*e;for(let e=0;e<n;e++,t++){let n=u-l*e,s=p[e];if(2===s.length)r>=s[0]&&r<=s[1]&&(i.push([r,n]),h[t]=1);else if(s.length>2){let e=!1;for(let t=0;t<s.length;t+=2)if(r>=s[t]&&r<=s[t+1]){e=!0;break}e&&(i.push([r,n]),h[t]=1)}}}return{points:i,mask:h}}function P(e,t){let i=z(e[0].spatialReference);if(e.length<2||null==i||(t=t??R(e[0].spatialReference),1===(e=e.filter(e=>e.width>t)).length))return e[0];let{xmin:r,xmax:n,ymin:s,ymax:l}=e[0];for(let t=1;t<e.length;t++){let r=e[t];n=r.xmax+i*t,s=Math.min(s,r.ymin),l=Math.max(l,r.ymax)}return new c.Z({xmin:r,xmax:n,ymin:s,ymax:l,spatialReference:e[0].spatialReference})}function A(e,t,i=null,r=!0){let l=e.spatialReference;if(l.equals(t))return e;let a=L(e),o=z(l,!0),h=z(t);if(0===a||null==o||null==h){let s=O(e,t,i,r);if(null==o&&null!=h&&Math.abs(s.width-h)<R(t)&&(0,u.isLoaded)()){let i=E(l);if(null!=i&&i.poleLocation===n.None&&e.width<(i.bbox[2]-i.bbox[0])/2)return function(e,t){let i=z(t);if(null==i)return null;let{xmin:r,ymin:n,xmax:s,ymax:l}=e,a=e.spatialReference,o=new d.Z({spatialReference:a,rings:[[[r,n],[s,n],[s,l],[r,l],[r,n]]]}),h=(0,u.project)(o,t);if(2!==h.rings.length||!h.rings[0].length||!h.rings[1].length)return null;let{rings:p}=h,f=R(a),m=new c.Z({spatialReference:t});for(let e=0;e<2;e++){r=s=p[e][0][0],n=l=p[e][0][1];for(let t=0;t<p[e].length;t++)r=r>p[e][t][0]?p[e][t][0]:r,s=s<p[e][t][0]?p[e][t][0]:s,n=n>p[e][t][1]?p[e][t][1]:n,l=l<p[e][t][1]?p[e][t][1]:l;if(0===e)m.ymin=n,m.ymax=l,m.xmin=r,m.xmax=s;else if(m.ymin=Math.min(m.ymin,n),m.ymax=Math.max(m.ymax,l),Math.abs(s-i/2)<f)m.xmin=r,m.xmax=m.xmax+i;else{if(!(Math.abs(r+i/2)<f))return null;m.xmax=s+i}}return m}(e,t)||s}return s}let p=e.clone().normalize();if(1===p.length&&e.xmax<o&&e.xmax-o/2>R(l)){let{xmin:t,xmax:i}=e;for(let r=0;r<=a;r++){let n=0===r?t:-o/2,s=r===a?i-o*r:o/2;p[r]=new c.Z({xmin:n,xmax:s,ymin:e.ymin,ymax:e.ymax,spatialReference:l})}}return P(p.map(e=>O(e,t,i,r)).filter(s.pC))}function k(e,t,i){if("extent"===e.type){let{xmin:t,ymin:i,xmax:r,ymax:n,spatialReference:s}=e;e=new d.Z({rings:[[[t,n],[r,n],[r,i],[t,i],[t,n]]],spatialReference:s})}return e.spatialReference.equals(t)?e:(g(e.spatialReference,t,i),(0,u.project)(e,t,i))}function O(e,t,i=null,r=!0,n=!0){let s=e.spatialReference;if(s.equals(t)||!t)return e;g(s,t,i);let l=(0,u.project)(e,t,i);if(n&&t.isWebMercator&&l&&(l.ymax=Math.min(20037508.342787,l.ymax),l.ymin=Math.max(-20037508.342787,l.ymin),l.ymin>=l.ymax))return null;if(!r||!l)return l;let a=G(s,!0),o=G(t,!0);if(null==a||null==o)return l;let h=R(s,.001),c=R(s,500),d=R(t,.001);if(Math.abs(l.xmin-o[0])<d&&Math.abs(l.xmax-o[1])<d){let r=Math.abs(e.xmin-a[0]),n=Math.abs(a[1]-e.xmax);if(r<h&&n>c){l.xmin=o[0];let r=[];r.push(new p.Z(e.xmax,e.ymin,s)),r.push(new p.Z(e.xmax,(e.ymin+e.ymax)/2,s)),r.push(new p.Z(e.xmax,e.ymax,s));let n=r.map(e=>T(e,t,i)).filter(e=>!isNaN(e?.x)).map(e=>e.x);l.xmax=Math.max.apply(null,n)}if(n<h&&r>c){l.xmax=o[1];let r=[];r.push(new p.Z(e.xmin,e.ymin,s)),r.push(new p.Z(e.xmin,(e.ymin+e.ymax)/2,s)),r.push(new p.Z(e.xmin,e.ymax,s));let n=r.map(e=>T(e,t,i)).filter(e=>!isNaN(e?.x)).map(e=>e.x);l.xmin=Math.min.apply(null,n)}}else{let e=R(t,.001);Math.abs(l.xmin-o[0])<e&&(l.xmin=o[0]),Math.abs(l.xmax-o[1])<e&&(l.xmax=o[1])}return l}function z(e,t=!1){return e?e.isWebMercator?2*(t?20037508.342787:20037508.342788905):e.wkid&&e.isGeographic?360:2*y[e.wkid]||null:null}function G(e,t=!1){if(e.isGeographic)return[-180,180];let i=z(e,t);return null!=i?[-i/2,i/2]:null}function N(e,t,i,r){let n=(e-t)/i;return n-Math.floor(n)!=0?n=Math.floor(n):r&&(n-=1),n}function L(e,t=!1){let i=z(e.spatialReference);if(null==i)return 0;let r=t?0:-(i/2),n=R(e.spatialReference),s=!t&&Math.abs(e.xmax-i/2)<n?i/2:e.xmax,l=!t&&Math.abs(e.xmin+i/2)<n?-i/2:e.xmin;return N(s,r,i,!0)-N(l,r,i,!1)}function B(e){let t=e.storageInfo.origin.x,i=z(e.spatialReference,!0);if(null==i)return{originX:t,halfWorldWidth:null,pyramidsInfo:null};let r=i/2,{nativePixelSize:n,storageInfo:s,extent:l}=e,{maximumPyramidLevel:a,blockWidth:o,pyramidScalingFactor:u}=s,h=n.x,c=[],p=null!=e.transform&&"gcs-shift"===e.transform.type,d=t+(p?0:r),f=p?i-t:r-t;for(let e=0;e<=a;e++){let e=(l.xmax-t)/h/o,i=e-Math.floor(e)==0?e:Math.ceil(e),r=f/h/o,n=r-Math.floor(r)==0?r:Math.ceil(r),s=Math.floor(d/h/o),a=Math.round(d/h)%o,p=(o-Math.round(f/h)%o)%o;c.push({resolutionX:h,blockWidth:o,datasetColumnCount:i,worldColumnCountFromOrigin:n,leftMargin:a,rightPadding:p,originColumnOffset:s}),h*=u}return{originX:t,halfWorldWidth:r,pyramidsInfo:c,hasGCSSShiftTransform:p}}function V(e){let t=e.isAdaptive&&null==e.spacing,i=e.spacing||[32,32],r=D(e),n={cols:r.size[0]+1,rows:r.size[1]+1},s=r.outofBoundPointCount>0&&r.outofBoundPointCount<r.offsets.length/2,l=r.outofBoundPointCount===r.offsets.length/2||t&&s?[0,0]:_(r.offsets,n,i,4),a=(l[0]+l[1])/2,u=e.projectedExtent.spatialReference,h=e.srcBufferExtent.spatialReference;if(t&&(s||a>4)&&(m(u,h,e.datumTransformation)&&(u.isGeographic||E(u)),i=[4,4],n={cols:(r=D({...e,spacing:i})).size[0]+1,rows:r.size[1]+1},l=_(r.offsets,n,i,4)),r.error=l,i[0]>1&&(r.coefficients=F(r.offsets,n,s)),e.includeGCSGrid&&!u.isGeographic&&!u.isWebMercator){if(h.isGeographic)r.gcsGrid={offsets:r.offsets,coefficients:r.coefficients,spacing:i};else{let t=E(u);if(null!=t&&!t.isEnvelope){let t=function(e){let t;if(!e||e.isGeographic)return e;let i=String(e.wkid||e.wkt2||e.wkt);return w.has(i)?t=w.get(i):(t=(e.wkid?o.P.coordsys(e.wkid):o.P.fromString(o.a.PE_TYPE_PROJCS,e.wkt2||e.wkt)).getGeogcs().getCode(),w.set(i,t)),new f.Z({wkid:t})}(u),l=A(e.projectedExtent,t),{offsets:a}=D({...e,srcBufferExtent:l,spacing:i}),h=F(a,n,s);r.gcsGrid={offsets:a,coefficients:h,spacing:i}}}}return r}function D(e){let{projectedExtent:t,srcBufferExtent:i,pixelSize:r,datumTransformation:n,rasterTransform:s}=e,l=t.spatialReference,a=i.spatialReference,h=g(l,a),{xmin:c,ymin:d,xmax:f,ymax:m}=t,_=z(a),y=null!=_&&(e.hasWrapAround||"gcs-shift"===s?.type),x=e.spacing||[32,32],w=x[0]*r.x,v=x[1]*r.y,b=1===x[0],S=Math.ceil((f-c)/w-.1/x[0])+(b?0:1),T=Math.ceil((m-d)/v-.1/x[1])+(b?0:1),M=function(e){let{inSR:t,outSR:i,datumTransformation:r,preferPE:n}=e;if(t.equals(i)){let{points:t}=I(e,null);return t}return t.isWebMercator&&i.isWGS84||t.isWGS84&&i.isWebMercator?function(e){let{cols:t,rows:i,xres:r,yres:n,usePixelCenter:s,inSR:l,outSR:a}=e,{xmin:o,ymax:h}=e;s&&(o+=r/2,h-=n/2);let c=[],d=[],f=Math.max(t,i);for(let e=0;e<f;e++){let s=o+r*Math.min(t,e),f=h-n*Math.min(i,e),m=(0,u.project)(new p.Z({x:s,y:f,spatialReference:l}),a);e<=t&&c.push(m.x),e<=i&&d.push(m.y)}let m=[];for(let e=0;e<t;e++)for(let t=0;t<i;t++)m.push([c[e],d[t]]);return m}(e):g(t,i,r)&&n&&(t.isGeographic||null!=E(t))?function(e){let{inSR:t,outSR:i,datumTransformation:r}=e,{points:n,mask:s}=I(e,E(t));if(!t.isGeographic){let e=t.wkid?o.P.coordsys(t.wkid):o.P.fromString(t.isGeographic?o.a.PE_TYPE_GEOGCS:o.a.PE_TYPE_PROJCS,t.wkt2||t.wkt);o.g.projToGeog(e,n.length,n)}if(null!=r&&r.steps.length){let e;if(i.isGeographic&&(e=n.map(([e])=>e>179.9955?1:e<-179.9955?-1:0)),r.steps.forEach(e=>{let t=e.wkid?o.P.geogtran(e.wkid):o.P.fromString(o.a.PE_TYPE_GEOGTRAN,e.wkt);o.h.geogToGeog(t,n.length,n,null,e.isInverse?o.a.PE_TRANSFORM_2_TO_1:o.a.PE_TRANSFORM_1_TO_2)}),e)for(let t=0;t<n.length;t++){let i=e[t],r=n[t][0],s=r>179.9955?1:r<-179.9955?-1:0;i&&s&&i!==s&&(n[t][0]=i>0?r+360:r-360)}}if(!i.isGeographic){let e=E(i,!0);!function(e,t){let[i,r]=t;for(let t=0;t<e.length;t++){let n=e[t][1];(n<i||n>r)&&(e[t]=[NaN,NaN])}}(n,null!=e&&e.isEnvelope?[e.bbox[1],e.bbox[3]]:[-90,90]);let t=i.wkid?o.P.coordsys(i.wkid):o.P.fromString(i.isGeographic?o.a.PE_TYPE_GEOGCS:o.a.PE_TYPE_PROJCS,i.wkt2||i.wkt);o.g.geogToProj(t,n.length,n)}let l=n;if(s&&n.length!==s.length){l=[];for(let e=0,t=0;e<s.length;e++)s[e]?l.push(n[t++]):l.push([NaN,NaN])}return l}(e):function(e){let{points:t}=I(e,null),{inSR:i,outSR:r,datumTransformation:n}=e,s=t.map(e=>new p.Z(e[0],e[1],i)),l=(0,u.project)(s,r,n);return n&&C(s,l,i,r),l.map(e=>e?[e.x,e.y]:[NaN,NaN])}(e)}({cols:S,rows:T,xmin:c,ymax:m,xres:w,yres:v,inSR:l,outSR:a,datumTransformation:n,preferPE:x[0]<=4,usePixelCenter:b}),P=[],A,k=0,O=b?-1:NaN,{xmin:G,xmax:N,ymax:L,width:B,height:V}=i,D=R(a,500),F=null!=_&&G>0&&N>_/2,U=!1;if(h){let e=E(l);U=null!=e&&e.poleLocation>0}for(let e=0;e<S;e++){let t=[];for(let i=0;i<T;i++){let r=M[e*T+i];if(y&&r[0]>N&&r[0]>_/2-D?r[0]-=_:y&&0===e&&r[0]<0&&F&&!s&&(r[0]+=_),!r||isNaN(r[0])||isNaN(r[1]))P.push(O),P.push(O),t.push(null),k++;else{if(s){let e=s.inverseTransform(new p.Z({x:r[0],y:r[1],spatialReference:a}));r=[e.x,e.y]}t.push(r),e>0&&y&&A[i]&&r[0]<A[i][0]&&(r[0]+=_,U&&r[0]>N&&r[0]>_&&(r[0]-=_)),P.push((r[0]-G)/B),P.push((L-r[1])/V)}}A=t}return{offsets:P,error:null,coefficients:null,outofBoundPointCount:k,spacing:x,size:b?[S,T]:[S-1,T-1]}}function F(e,t,i){let{cols:r,rows:n}=t,s=new Float32Array((r-1)*(n-1)*12),l=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),a=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let t=0;t<r-1;t++){for(let i=0;i<n-1;i++){let o=t*n*2+2*i,u=e[o],h=e[o+1],c=e[o+2],p=e[o+3],d=e[o+=2*n],f=e[o+1],m=e[o+2],g=e[o+3],_=0,y=12*(i*(r-1)+t);for(let e=0;e<3;e++)s[y++]=l[_++]*u+l[_++]*c+l[_++]*m;_=0;for(let e=0;e<3;e++)s[y++]=l[_++]*h+l[_++]*p+l[_++]*g;_=0;for(let e=0;e<3;e++)s[y++]=a[_++]*u+a[_++]*d+a[_++]*m;_=0;for(let e=0;e<3;e++)s[y++]=a[_++]*h+a[_++]*f+a[_++]*g}if(i)for(let e=0;e<s.length;e++)isNaN(s[e])&&(s[e]=-1)}return s}function U(e){let{spatialReference:t}=e,i=(0,h.C5)(t);if(!i)return e;let[r,n]=i.valid,s=n-r,l=0;return e.xmin<r?l=Math.ceil((r-e.xmin)/s):e.xmin>n&&(l=-Math.ceil((e.xmin-n)/s)),new c.Z({spatialReference:e.spatialReference,xmin:e.xmin+l*s,ymin:e.ymin,xmax:e.xmax+l*s,ymax:e.ymax})}function W(e,t,i){let{storageInfo:r,pixelSize:n}=t,s=0,l=!1,{pyramidResolutions:o}=r,u="mixed"===r.tileInfo.format?.toLowerCase()?Math.max(1,Math.min(3,r.tileInfo.dpi/96)):1,h=(e.x+e.y)/2/u;if(null!=o&&o.length){let e=o[o.length-1],r=(e.x+e.y)/2,u=(n.x+n.y)/2;if(h<=u)s=0;else if(h>=r)s=o.length,l=h/r>8;else{let e,t=u;for(let r=1;r<=o.length;r++){if(h<=(e=(o[r-1].x+o[r-1].y)/2)){h===e?s=r:"down"===i?(s=r-1,l=h/t>8):s="up"===i||h-t>e-h||h/t>2?r:r-1;break}t=e}}let c=0===s?n:o[s-1];return l&&Math.min(c.x,c.y)*(0,a.c9)(t.spatialReference)>19567&&(l=!1),{pyramidLevel:s,pyramidResolution:new p.Z({x:c.x,y:c.y,spatialReference:t.spatialReference}),excessiveReading:l}}let c=Math.log(e.x/n.x)/Math.LN2,d=Math.log(e.y/n.y)/Math.LN2,f=t.storageInfo.maximumPyramidLevel||0;(s="down"===i?Math.floor(Math.min(c,d)):"up"===i?Math.ceil(Math.max(c,d)):Math.round((c+d)/2))<0?s=0:s>f&&(l=s>f+3,s=f);let m=2**s;return{pyramidLevel:s,pyramidResolution:new p.Z({x:m*t.nativePixelSize.x,y:m*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:l}}function Z(e,t){let{pixelSize:i,extent:r}=e,n=b(r,t,!1);return A(function(e,t){let i=e.clone().normalize();return 1===i.length?i[0]:P(i,t)}(r,(i.x+i.y)/16),t,n)}function j(e,t,i){let r=i?.tileSize??512,n=i?.alignGlobalDatasetWithAGOL??!0,s=!!i?.limitToSrcResolution,{extent:l,spatialReference:o,pixelSize:u}=e,h=S(new p.Z({x:u.x,y:u.y,spatialReference:o}),t,l);if(null==h)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};let c=(h.x+h.y)/2,d=(0,a.c9)(t),f=c*d*96*39.37,m=t.isGeographic?256/r*295828763.7958547:256/r*591657527.591555,g="vector-magdir"===e.dataType||"vector-uv"===e.dataType,_=Z(e,t),y=Math.min(Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2),Math.ceil(Math.log(m/2/f)/Math.LN2));if(!g&&n&&(t.isGeographic||t.isWebMercator)){let i=z(t);if(!(g=L(_)>0||null!=i&&_.width>i/4)&&null!=i){let t=-1;if(y<3)t=2**y*c*r;else if(e.storageInfo){let{maximumPyramidLevel:i=0,pyramidScalingFactor:n=2}=e.storageInfo;t=n**i*c*r}let n=Math.ceil(i/t);g=1===n||2===n&&i/2-_.xmax<t}}let x,w=f,v=Math.min(2,Math.max(1.414,e.storageInfo?.pyramidScalingFactor||2));if(g){w=m;let e=t.isGeographic?1341104507446289e-21:.29858214164761665,i=96*d*39.37*e,r=t.isGeographic?4326:3857;x=S(new p.Z({x:e,y:e,spatialReference:{wkid:r}}),o,_),x.x*=w/i,x.y*=w/i}else{x={x:u.x,y:u.y};let e=0;for(;w<.5005*m&&e<y;)e++,w*=v,x.x*=v,x.y*=v;Math.max(w,m)/Math.min(w,m)<=1.001&&(w=m)}let b=[w],R=[{x:x.x,y:x.y}],T=Math.min(70.5310735,f)/1.001;for(;w>=T;)w/=v,x.x/=v,x.y/=v,b.push(w),R.push({x:x.x,y:x.y});if(s){let e=.001*u.x,t=R.findIndex(t=>t.x>=u.x-e&&t.x<=u.x+e);t>-1?(R.length=t+1,b.length=t+1):(t=R.findIndex(t=>t.x<=u.x+e))>0&&(R.length=t,b.length=t)}return{projectedPixelSize:h,scales:b,srcResolutions:R,isCustomTilingScheme:!g}}},95015:function(e,t,i){i.d(t,{AJ:function(){return u},If:function(){return c},k0:function(){return o},uI:function(){return h},ul:function(){return a},wx:function(){return p}});var r=i(13507),n=i(4392),s=i(91870),l=i(40465);let a=2.4;function o(e){return(0,n.Wz)(e*a)}function u(e){return(0,n.F2)(e)/a}function h(e){let t=new Uint8ClampedArray(2048);if((e=e.filter(({ratio:e})=>e>=0&&e<=1).sort((e,t)=>e.ratio-t.ratio).map(({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))).length<1)return t;let i=e[0],n=e[0],a=1,o=(0,l.Ue)();for(let l=0;l<512;l++){let u=(l+.5)/512;for(;u>n.ratio&&a<e.length;)i=n,n=e[a++];(function(e,t,i,n){let{color:l,ratio:a}=t,{color:o,ratio:u}=i;u===a&&(1===u?a-=1e-6:u+=1e-6);let h=(0,r.uZ)((n-a)/(u-a),0,1);(0,s.l)(e,l.toArray(),o.toArray(),h)})(o,i,n,u),t.set(o,4*l)}return t}function c(e,t,i){let r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function p(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},49078:function(e,t,i){i.d(t,{a:function(){return s}});var r=i(9266),n=i(9397);let s={unknown:1,inches:(0,r.En)(1,"meters","inches"),feet:(0,r.En)(1,"meters","feet"),"us-feet":(0,r.En)(1,"meters","us-feet"),yards:(0,r.En)(1,"meters","yards"),miles:(0,r.En)(1,"meters","miles"),"nautical-miles":(0,r.En)(1,"meters","nautical-miles"),millimeters:(0,r.En)(1,"meters","millimeters"),centimeters:(0,r.En)(1,"meters","centimeters"),decimeters:(0,r.En)(1,"meters","decimeters"),meters:(0,r.En)(1,"meters","meters"),kilometers:(0,r.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,r.ty)(1,"meters",n.sv.radius)}},9158:function(e,t,i){i.d(t,{Z:function(){return x}});var r,n=i(86641),s=i(55066),l=i(19637),a=i(740),o=i(689),u=i(61764),h=i(89312);i(37180),i(65223);var c=i(37647),p=i(64186),d=i(50713),f=i(36502),m=i(5005),g=i(40041);let _=new a.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),y=r=class extends o.wq{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){let i=f.Z.fromJSON(t.spatialReference),r=[];for(let t=0;t<e.length;t++){let n=e[t],s=l.Z.fromJSON(n),a=n.geometry?.spatialReference;null==s.geometry||a||(s.geometry.spatialReference=i);let o=n.aggregateGeometries,u=s.aggregateGeometries;if(o&&null!=u)for(let e in u){let t=u[e],r=o[e],n=r?.spatialReference;null==t||n||(t.spatialReference=i)}r.push(s)}return r}writeGeometryType(e,t,i,r){if(e)return void _.write(e,t,i,r);let{features:n}=this;if(n){for(let e of n)if(null!=e?.geometry)return void _.write(e.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;let i=!!e.spatialReference,r=(0,m.im)(e);return r&&!i&&t.spatialReference&&(r.spatialReference=f.Z.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());let{features:i}=this;if(i){for(let e of i)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}}clone(){return new r(this.cloneProperties())}cloneProperties(){return(0,u.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){let t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){let r=t.features[i];if(r.geometry){let t=e?.[i];r.geometry=t?.toJSON()||r.geometry}}return t}quantize(e){let{scale:[t,i],translate:[r,n]}=e,s=this.features,l=this._getQuantizationFunction(this.geometryType,e=>Math.round((e-r)/t),e=>Math.round((n-e)/i));for(let e=0,t=s.length;e<t;e++)l?.(s[e].geometry)||(s.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){let{geometryType:e,features:t,transform:i}=this;if(!i)return this;let{translate:[r,n],scale:[s,l]}=i,a=null,o=null;if(this.hasZ&&null!=i?.scale?.[2]){let{translate:[,,e],scale:[,,t]}=i;a=i=>i*t+e}if(this.hasM&&null!=i?.scale?.[3]){let{translate:[,,,e],scale:[,,,t]}=i;o=i=>null==i?i:i*t+e}let u=this._getHydrationFunction(e,e=>e*s+r,e=>n-e*l,a,o);for(let{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}_quantizePoints(e,t,i){let r,n;let s=[];for(let l=0,a=e.length;l<a;l++){let a=e[l];if(l>0){let e=t(a[0]),l=i(a[1]);e===r&&l===n||(s.push([e-r,l-n]),r=e,n=l)}else r=t(a[0]),n=i(a[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,i){return"point"===e?e=>(e.x=t(e.x),e.y=i(e.y),e):"polyline"===e||"polygon"===e?e=>{let r=(0,m.oU)(e)?e.rings:e.paths,n=[];for(let e=0,s=r.length;e<s;e++){let s=r[e],l=this._quantizePoints(s,t,i);l&&n.push(l)}return n.length>0?((0,m.oU)(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?e=>{let r=this._quantizePoints(e.points,t,i);return r&&r.length>0?(e.points=r,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,i,r,n){return"point"===e?e=>{e.x=t(e.x),e.y=i(e.y),r&&(e.z=r(e.z))}:"polyline"===e||"polygon"===e?e=>{let s,l;let a=(0,m.oU)(e)?e.rings:e.paths;for(let e=0,r=a.length;e<r;e++){let r=a[e];for(let e=0,n=r.length;e<n;e++){let n=r[e];e>0?(s+=n[0],l+=n[1]):(s=n[0],l=n[1]),n[0]=t(s),n[1]=i(l)}}if(r&&n)for(let e=0,t=a.length;e<t;e++){let t=a[e];for(let e=0,i=t.length;e<i;e++){let i=t[e];i[2]=r(i[2]),i[3]=n(i[3])}}else if(r)for(let e=0,t=a.length;e<t;e++){let t=a[e];for(let e=0,i=t.length;e<i;e++){let i=t[e];i[2]=r(i[2])}}else if(n)for(let e=0,t=a.length;e<t;e++){let t=a[e];for(let e=0,i=t.length;e<i;e++){let i=t[e];i[2]=n(i[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=i(e.ymin),e.xmax=t(e.xmax),e.ymax=i(e.ymax),r&&null!=e.zmax&&null!=e.zmin&&(e.zmax=r(e.zmax),e.zmin=r(e.zmin)),n&&null!=e.mmax&&null!=e.mmin&&(e.mmax=n(e.mmax),e.mmin=n(e.mmin))}:"multipoint"===e?e=>{let s,l;let a=e.points;for(let e=0,r=a.length;e<r;e++){let r=a[e];e>0?(s+=r[0],l+=r[1]):(s=r[0],l=r[1]),r[0]=t(s),r[1]=i(l)}if(r&&n)for(let e=0,t=a.length;e<t;e++){let t=a[e];t[2]=r(t[2]),t[3]=n(t[3])}else if(r)for(let e=0,t=a.length;e<t;e++){let t=a[e];t[2]=r(t[2])}else if(n)for(let e=0,t=a.length;e<t;e++){let t=a[e];t[2]=n(t[2])}}:null}};(0,n._)([(0,h.Cb)({type:String,json:{write:!0}})],y.prototype,"displayFieldName",void 0),(0,n._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"exceededTransferLimit",void 0),(0,n._)([(0,h.Cb)({type:[l.Z],json:{write:!0}})],y.prototype,"features",void 0),(0,n._)([(0,c.r)("features")],y.prototype,"readFeatures",null),(0,n._)([(0,h.Cb)({type:[g.Z],json:{write:!0}})],y.prototype,"fields",void 0),(0,n._)([(0,h.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:_.read}}})],y.prototype,"geometryType",void 0),(0,n._)([(0,d.c)("geometryType")],y.prototype,"writeGeometryType",null),(0,n._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"hasM",void 0),(0,n._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"hasZ",void 0),(0,n._)([(0,h.Cb)({types:s.qM,json:{write:!0}})],y.prototype,"queryGeometry",void 0),(0,n._)([(0,c.r)("queryGeometry")],y.prototype,"readQueryGeometry",null),(0,n._)([(0,h.Cb)({type:f.Z,json:{write:!0}})],y.prototype,"spatialReference",void 0),(0,n._)([(0,d.c)("spatialReference")],y.prototype,"writeSpatialReference",null),(0,n._)([(0,h.Cb)({json:{write:!0}})],y.prototype,"transform",void 0),(y=r=(0,n._)([(0,p.j)("esri.rest.support.FeatureSet")],y)).prototype.toJSON.isDefaultToJSON=!0;let x=y},36779:function(e,t,i){i.d(t,{JZ:function(){return p},RL:function(){return d},eY:function(){return f}});var r=i(31124),n=i(15514),s=i(24971),l=i(6977),a=i(6396),o=i(95643),u=i(71193),h=i(15809),c=i(66897);function p(e){return e&&"render"in e}function d(e){let t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}class f extends a.s{constructor(e=null,t=!1){super(),this.blendFunction="standard",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=t,this.source=e,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){null==e&&null==this._source||(this._source=e,this.invalidateTexture(),this.requestRender())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e)}async setSourceAsync(e,t){null!=this._uploadStatus&&this._uploadStatus.controller.abort();let i=new AbortController,n=(0,r.hh)();return(0,r.$F)(t,()=>i.abort()),(0,r.$F)(i,e=>n.reject(e)),this._uploadStatus={controller:i,resolver:n},this.source=e,n.promise}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}updateTransitionProperties(e,t){e>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(e,t)}setTransform(e){let t=(0,n.yR)(this.transforms.displayViewScreenMat3),[i,r]=e.toScreenNoRotation([0,0],[this.x,this.y]),s=this.resolution/this.pixelRatio/e.resolution,a=s*this.width,o=s*this.height,u=Math.PI*this.rotation/180;(0,n.Iu)(t,t,(0,l.al)(i,r)),(0,n.Iu)(t,t,(0,l.al)(a/2,o/2)),(0,n.U1)(t,t,-u),(0,n.Iu)(t,t,(0,l.al)(-a/2,-o/2)),(0,n.ex)(t,t,(0,l.al)(a,o)),(0,n.Jp)(this.transforms.displayViewScreenMat3,e.displayViewMat3,t)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind(e,t){this._texture&&e.bindTexture(this._texture,t)}async updateTexture({context:e,painter:t}){var i;if(!this._textureInvalidated)return;if(this._textureInvalidated=!1,this._texture||(this._texture=this._createTexture(e)),!this.source)return void this._texture.setData(null);this._texture.resize(this._sourceWidth,this._sourceHeight);let n=p(i=this.source)?i instanceof o.Z?i.getRenderedRasterPixels()?.renderedRasterPixels:d(i):i;try{if(null!=this._uploadStatus){let{controller:e,resolver:i}=this._uploadStatus,r={signal:e.signal},{width:s,height:l}=this,a=this._texture,o=t.textureUploadManager;await o.enqueueTextureUpdate({data:n,texture:a,width:s,height:l},r),i.resolve(),this._uploadStatus=null}else this._texture.setData(n);this.ready()}catch(e){(0,r.H9)(e)}}onDetach(){this.destroy()}_createTransforms(){return{displayViewScreenMat3:(0,s.Ue)()}}_createTexture(e){let t=this.immutable,i=new c.X;return i.internalFormat=t?u.lP.RGBA8:u.VI.RGBA,i.wrapMode=u.e8.CLAMP_TO_EDGE,i.isImmutable=t,i.width=this._sourceWidth,i.height=this._sourceHeight,new h.x(e,i)}}},73018:function(e,t,i){i.d(t,{c:function(){return l}});var r=i(54897),n=i(80320),s=i(67236);class l extends s.Z{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(e){super.beforeRender(e),this._manageFade()}prepareRenderPasses(e){let t=e.registerRenderPass({name:"bitmap",brushes:[r.U.bitmap],target:()=>this.children,drawPhase:n.jx.MAP});return[...super.prepareRenderPasses(e),t]}_manageFade(){this.children.reduce((e,t)=>e+(t.inFadeTransition?1:0),0)>=2?(this.children.forEach(e=>e.blendFunction="additive"),this._hasCrossfade=!0):(this.children.forEach(e=>e.blendFunction="standard"),this._hasCrossfade=!1)}}},95643:function(e,t,i){i.d(t,{Z:function(){return r}});class r{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(e){let t=this.pixelBlock;if(null==t)return;let i=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??t});if(null==i.pixelBlock)return;i.pixelBlock.maskIsAlpha&&(i.pixelBlock.premultiplyAlpha=!0);let r=i.pixelBlock.getAsRGBA(),n=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);n.data.set(r),e.putImageData(n,0,0)}getRenderedRasterPixels(){let e=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==e.pixelBlock?null:(e.pixelBlock.maskIsAlpha&&(e.pixelBlock.premultiplyAlpha=!0),{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)})}}},77303:function(e,t,i){i.r(t),i.d(t,{default:function(){return B}});var r=i(86641),n=i(94596),s=i(50973),l=i(36152),a=i(20128),o=i(72659),u=i(89312);i(37180),i(65223),i(3457);var h=i(64186),c=i(9377),p=i(20928),d=i(36502),f=i(1822),m=i(30563),g=i(69418),_=i(36779),y=i(73018),x=i(50338),w=i(82843),v=i(80893),b=i(1003),S=i(54748),R=i(33876),T=i(40845),C=i(37349),E=i(93544),M=i(51552),I=i(71193),P=i(59546),A=i(43316),k=i(43721),O=i(15809),z=i(66897);class G{constructor(e){if(this._ownsRctx=!1,e)this._ownsRctx=!1,this._rctx=e;else{if(G._instance)return G._instanceRefCount++,G._instance;G._instanceRefCount=1,G._instance=this,this._ownsRctx=!0;let e=document.createElement("canvas"),t=(0,M.k)(e);t.getExtension("OES_texture_float"),this._rctx=new k.x(t,{})}let t=(0,E.s)("raster/reproject","raster/reproject",new Map([["a_position",0]]),{applyProjection:!0,bilinear:!1,bicubic:!1});this._program=this._rctx.programCache.acquire(t.shaders.vertexShader,t.shaders.fragmentShader,t.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f("u_opacity",1),this._program.setUniform1i("u_image",0),this._program.setUniform1i("u_flipY",0),this._program.setUniform1i("u_transformGrid",1),this._quad=new C.Z(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(e,t,i=!1){let r=(0,p.project)(e.extent,t),n=new R.Z({x:(e.extent.xmax-e.extent.xmin)/e.texture.descriptor.width,y:(e.extent.ymax-e.extent.ymin)/e.texture.descriptor.height,spatialReference:e.extent.spatialReference}),{x:s,y:l}=(0,T.VO)(n,t,e.extent),a=(s+l)/2,o=Math.round((r.xmax-r.xmin)/a),u=Math.round((r.ymax-r.ymin)/a);a=(r.width/o+r.height/u)/2;let h=new R.Z({x:a,y:a,spatialReference:r.spatialReference}),c=(0,T.Qp)({projectedExtent:r,srcBufferExtent:e.extent,pixelSize:h,hasWrapAround:!0,spacing:[16,16]}),d=(0,A.Br)(this._rctx,c),f=new z.X(o,u);f.wrapMode=I.e8.CLAMP_TO_EDGE;let m=new P.X(this._rctx,f);this._rctx.bindFramebuffer(m),this._rctx.setViewport(0,0,o,u),this._rctx.useProgram(this._program),this._rctx.bindTexture(e.texture,0),this._rctx.bindTexture(d,1),this._quad.bind();let{width:g=0,height:_=0}=e.texture.descriptor;if(this._program.setUniform2f("u_srcImageSize",g,_),this._program.setUniform2fv("u_transformSpacing",c.spacing),this._program.setUniform2fv("u_transformGridSize",c.size),this._program.setUniform2f("u_targetImageSize",o,u),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),d.dispose(),i){let{width:e,height:t}=m,i=new ImageData(e??0,t??0);m.readPixels(0,0,e??0,t??0,I.VI.RGBA,I.Br.UNSIGNED_BYTE,i.data);let n=m.detachColorTexture(I.VY.COLOR_ATTACHMENT0);return m.dispose(),{texture:n,extent:r,imageData:i}}let y=m.detachColorTexture(I.VY.COLOR_ATTACHMENT0);return m.dispose(),{texture:y,extent:r}}reprojectBitmapData(e,t){let i=(0,_.JZ)(e.bitmapData)?(0,_.RL)(e.bitmapData):e.bitmapData,r=new z.X;r.wrapMode=I.e8.CLAMP_TO_EDGE,r.width=e.bitmapData.width,r.height=e.bitmapData.height;let n=new O.x(this._rctx,r,i),s=this.reprojectTexture({texture:n,extent:e.extent},t,!0);s.texture.dispose();let l=document.createElement("canvas"),a=s.imageData;return l.width=a.width,l.height=a.height,l.getContext("2d").putImageData(a,0,0),{bitmapData:l,extent:s.extent}}async loadAndReprojectBitmapData(e,t,i){let r=(await (0,S.Z)(e,{responseType:"image"})).data,n=document.createElement("canvas");n.width=r.width,n.height=r.height;let s=n.getContext("2d");s.drawImage(r,0,0);let l=s.getImageData(0,0,n.width,n.height);if(t.spatialReference.equals(i))return{bitmapData:l,extent:t};let a=this.reprojectBitmapData({bitmapData:l,extent:t},i);return{bitmapData:a.bitmapData,extent:a.extent}}destroy(){this._ownsRctx?(G._instanceRefCount--,0===G._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),G._instance=null)):(this._quad.dispose(),this._program.dispose())}}G._instanceRefCount=0;class N{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let L=class extends(0,x.y)(b.Z){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new y.c,this._kmlVisualData=new N,this._fetchController=null,this.allVisiblePoints=new g.J,this.allVisiblePolylines=new g.J,this.allVisiblePolygons=new g.J,this.allVisibleMapImages=new s.Z}async hitTest(e,t){let i=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map(t=>(t.layer=i,t.sourceLayer=i,{type:"graphic",graphic:t,layer:i,mapPoint:e}))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new v.Z({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new w.Z(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new v.Z({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new w.Z(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new v.Z({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new w.Z(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.addAttachHandles([this.allVisibleMapImages.on("change",e=>{e.added.forEach(e=>this._addMapImage(e)),e.removed.forEach(e=>this._removeMapImage(e))}),(0,a.YP)(()=>this.layer.visibleSublayers,e=>{for(let[e,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(let t of e){let e=this._kmlVisualData.allSublayers.get(t.id);e&&(e.visibility=1)}this._refreshCollections()})]),this._updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new G}detach(){this._fetchController=(0,l.IM)(this._fetchController),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView=(0,l.SC)(this._polygonsView),this._polylinesView=(0,l.SC)(this._polylinesView),this._pointsView=(0,l.SC)(this._pointsView),this._imageReprojector=(0,l.SC)(this._imageReprojector)}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference?.isWGS84||this.view.spatialReference?.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,c.Z.fromJSON(e.extent),this.view.spatialReference).then(t=>{let i=new _.eY(t.bitmapData);i.x=t.extent.xmin,i.y=t.extent.ymax,i.resolution=t.extent.width/t.bitmapData.width,i.rotation=e.rotation,this._mapImageContainer.addChild(i),this._bitmapIndex.set(e,i)})}async _getViewDependentUrl(e,t){let{viewFormat:i,viewBoundScale:r,httpQuery:s}=e;if(null!=i){let l;if(null==t)throw Error("Loading this network link requires a view state.");if(await (0,p.load)(),null!=r&&1!==r){let e=new c.Z(t.extent);e.expand(r),l=e}else l=t.extent;l=(0,p.project)(l,d.Z.WGS84);let a=(0,p.project)(l,d.Z.WebMercator),u=l.xmin,h=l.xmax,f=l.ymin,g=l.ymax,_=t.size[0]*t.pixelRatio,y=t.size[1]*t.pixelRatio,x=Math.max(a.width,a.height),w={"[bboxWest]":u.toString(),"[bboxEast]":h.toString(),"[bboxSouth]":f.toString(),"[bboxNorth]":g.toString(),"[lookatLon]":l.center.x.toString(),"[lookatLat]":l.center.y.toString(),"[lookatRange]":x.toString(),"[lookatTilt]":"0","[lookatHeading]":t.rotation.toString(),"[lookatTerrainLon]":l.center.x.toString(),"[lookatTerrainLat]":l.center.y.toString(),"[lookatTerrainAlt]":"0","[cameraLon]":l.center.x.toString(),"[cameraLat]":l.center.y.toString(),"[cameraAlt]":x.toString(),"[horizFov]":"60","[vertFov]":"60","[horizPixels]":_.toString(),"[vertPixels]":y.toString(),"[terrainEnabled]":"0","[clientVersion]":n.i8,"[kmlVersion]":"2.2","[clientName]":"ArcGIS API for JavaScript","[language]":"en-US"},v=e=>{for(let t in e){let i;for(i in w)e[t]=e[t].replace(i,w[i])}},b=(0,o.u0)(i);v(b);let S={};null!=s&&v(S=(0,o.u0)(s));let R=(0,m.en)(e.href);return R.query={...R.query,...b,...S},`${R.path}?${(0,o.B7)(b)}`}return e.href}async _fetchService(e){let t=new N;await this._loadVisualData(this.layer.url,t,e),this._kmlVisualData=t,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter(e=>this._isSublayerVisible(e.sublayerId)).map(({item:e})=>e)),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter(e=>this._isSublayerVisible(e.sublayerId)).map(({item:e})=>e)),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter(e=>this._isSublayerVisible(e.sublayerId)).map(({item:e})=>e)),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter(e=>this._isSublayerVisible(e.sublayerId)).map(({item:e})=>e))}_isSublayerVisible(e){let t=this._kmlVisualData.allSublayers.get(e);return!!t?.visibility&&(-1===t.parentFolderId||this._isSublayerVisible(t.parentFolderId))}_loadVisualData(e,t,i){return this._fetchParsedKML(e,i).then(async e=>{for(let r of e.sublayers){t.allSublayers.set(r.id,r);let e=r.points?await (0,f.Yu)(r.points):[],n=r.polylines?await (0,f.Yu)(r.polylines):[],s=r.polygons?await (0,f.Yu)(r.polygons):[],l=r.mapImages||[];if(t.allPoints.push(...e.map(e=>({item:e,sublayerId:r.id}))),t.allPolylines.push(...n.map(e=>({item:e,sublayerId:r.id}))),t.allPolygons.push(...s.map(e=>({item:e,sublayerId:r.id}))),t.allMapImages.push(...l.map(e=>({item:e,sublayerId:r.id}))),r.networkLink){let e=await this._getViewDependentUrl(r.networkLink,this.view.state);await this._loadVisualData(e,t,i)}}})}_fetchParsedKML(e,t){return(0,f.CS)(e,this.layer.spatialReference,this.layer.refreshInterval,t).then(e=>(0,f.Cw)(e.data))}_removeMapImage(e){let t=this._bitmapIndex.get(e);t&&(this._mapImageContainer.removeChild(t),this._bitmapIndex.delete(e))}};(0,r._)([(0,u.Cb)()],L.prototype,"_pointsView",void 0),(0,r._)([(0,u.Cb)()],L.prototype,"_polylinesView",void 0),(0,r._)([(0,u.Cb)()],L.prototype,"_polygonsView",void 0),(0,r._)([(0,u.Cb)()],L.prototype,"updating",void 0);let B=L=(0,r._)([(0,h.j)("esri.views.2d.layers.KMLLayerView2D")],L)},50338:function(e,t,i){i.d(t,{y:function(){return v}});var r,n=i(86641),s=i(50973),l=i(4514),a=i(94605),o=i(20128),u=i(89312);i(37180),i(65223),i(3457);var h=i(64186),c=i(43390),p=i(25823),d=i(76457);let f=r=class extends d.Z{constructor(e){super(e),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new r({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,n._)([(0,u.Cb)({type:[Number,String],json:{write:!0}})],f.prototype,"left",void 0),(0,n._)([(0,u.Cb)({type:[Number,String],json:{write:!0}})],f.prototype,"right",void 0),(0,n._)([(0,u.Cb)({type:[Number,String],json:{write:!0}})],f.prototype,"top",void 0),(0,n._)([(0,u.Cb)({type:[Number,String],json:{write:!0}})],f.prototype,"bottom",void 0);let m=f=r=(0,n._)([(0,h.j)("esri.views.layers.support.ClipRect")],f);var g=i(55485);let _=class extends d.Z{constructor(e){super(e),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,n._)([(0,u.Cb)({type:[[[Number]]],json:{write:!0}})],_.prototype,"path",void 0);let y=_=(0,n._)([(0,h.j)("esri.views.layers.support.Path")],_);var x=i(37864);let w=s.Z.ofType({key:"type",base:null,typeMap:{rect:m,path:y,geometry:g.Z}}),v=e=>{let t=class extends e{constructor(){super(...arguments),this.attached=!1,this.clips=new w,this.highlightOptions=null,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this._visibleAtCurrentScale=!0}initialize(){let e=this.view?.spatialReferenceLocked??!0;this.view?.spatialReference&&e&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new a.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new c.W),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,o.YP)(()=>this.suspended,e=>{this.container&&(this.container.visible=!e)},o.tX),(0,o.YP)(()=>this.updateSuspended,e=>{this.view&&!e&&this.updateRequested&&this.view.requestUpdate()},o.tX),(0,o.YP)(()=>this.layer?.opacity??1,e=>{this.container&&(this.container.opacity=e)},o.tX),(0,o.YP)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",e=>{this.container&&(this.container.blendMode=e)},o.tX),(0,o.YP)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,e=>{this.container&&(this.container.effect=e)},o.tX),(0,o.YP)(()=>this.highlightOptions,e=>this.container.highlightOptions=e,o.tX),(0,o.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},o.tX),(0,o.YP)(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}),({scale:e,scaleRange:t})=>{let i=(0,x.GB)(t,e);i!==this._visibleAtCurrentScale&&(this._visibleAtCurrentScale=i)},o.tX)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(e=>{e===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){let e=this.view?.spatialReference;return null==e||this.supportsSpatialReference(e)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this._updatingHandles?.updating)}get visibleAtCurrentScale(){return this._visibleAtCurrentScale}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}hitTest(e,t){return Promise.resolve(null)}supportsSpatialReference(e){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){let e=super.getSuspendInfo(),t=!this.spatialReferenceSupported;return t&&(e.spatialReferenceNotSupported=t),e}addAttachHandles(e){this.addHandles(e,"attach")}};return(0,n._)([(0,u.Cb)()],t.prototype,"attached",void 0),(0,n._)([(0,u.Cb)({type:w,set(e){let t=(0,l.Z)(e,this._get("clips"),w);this._set("clips",t)}})],t.prototype,"clips",void 0),(0,n._)([(0,u.Cb)()],t.prototype,"container",void 0),(0,n._)([(0,u.Cb)({type:p.Z})],t.prototype,"highlightOptions",void 0),(0,n._)([(0,u.Cb)()],t.prototype,"moving",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],t.prototype,"spatialReferenceSupported",null),(0,n._)([(0,u.Cb)({readOnly:!0})],t.prototype,"updateParameters",void 0),(0,n._)([(0,u.Cb)()],t.prototype,"updateRequested",void 0),(0,n._)([(0,u.Cb)()],t.prototype,"updating",null),(0,n._)([(0,u.Cb)()],t.prototype,"view",void 0),(0,n._)([(0,u.Cb)()],t.prototype,"_visibleAtCurrentScale",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],t.prototype,"visibleAtCurrentScale",null),t=(0,n._)([(0,h.j)("esri.views.2d.layers.LayerView2D")],t)}},1755:function(e,t,i){var r;i.d(t,{H:function(){return l},K:function(){return s}});class n{}let s=n;function l(e,...t){let i="";for(let r=0;r<t.length;r++)i+=e[r]+t[r];return i+e[e.length-1]}(r=l||(l={})).int=function(e){return Math.round(e).toString()},r.float=function(e){return e.toPrecision(8)}},73295:function(e,t,i){var r,n,s,l,a,o,u,h,c,p,d,f,m,g,_,y,x,w;i.d(t,{Gv:function(){return n},Iq:function(){return h},JJ:function(){return u},Rw:function(){return l},Ti:function(){return c},V_:function(){return o},Vr:function(){return r},Xx:function(){return s},hU:function(){return a}}),(p=r||(r={}))[p.None=0]="None",p[p.Front=1]="Front",p[p.Back=2]="Back",p[p.COUNT=3]="COUNT",(d=n||(n={}))[d.Less=0]="Less",d[d.Lequal=1]="Lequal",d[d.COUNT=2]="COUNT",(f=s||(s={}))[f.BACKGROUND=0]="BACKGROUND",f[f.UPDATE=1]="UPDATE",(m=l||(l={}))[m.NOT_LOADED=0]="NOT_LOADED",m[m.LOADING=1]="LOADING",m[m.LOADED=2]="LOADED",(g=a||(a={}))[g.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",g[g.OutlineVisualElementMask=2]="OutlineVisualElementMask",(_=o||(o={}))[_.Highlight=0]="Highlight",_[_.MaskOccludee=1]="MaskOccludee",_[_.COUNT=2]="COUNT",(y=u||(u={}))[y.Blend=0]="Blend",y[y.Opaque=1]="Opaque",y[y.Mask=2]="Mask",y[y.MaskBlend=3]="MaskBlend",y[y.COUNT=4]="COUNT",(x=h||(h={}))[x.OFF=0]="OFF",x[x.ON=1]="ON",(w=c||(c={})).DDS_ENCODING="image/vnd-ms.dds",w.KTX2_ENCODING="image/ktx2",w.BASIS_ENCODING="image/x.basis"},1003:function(e,t,i){i.d(t,{Z:function(){return m}});var r=i(86641),n=i(94761),s=i(60163),l=i(2090),a=i(65223),o=i(36152),u=i(31534),h=i(89312);i(37180),i(3457);var c=i(64186),p=i(66789),d=i(37864);let f=class extends(0,l.IG)((0,u.v)(s.Z.EventedMixin(n.Z))){constructor(e){super(e),this._updatingHandles=new p.R,this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){let t=this.layer&&this.layer.id||"no id",i=this.layer?.title||"no title";a.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e)}})}destroy(){this._updatingHandles=(0,o.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){let e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){let e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&(0,d.Cy)(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){let e=this.parent?.suspended?this.parent.suspendInfo:{};this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);let t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,d.Cy)(t)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,r._)([(0,h.Cb)()],f.prototype,"view",void 0),(0,r._)([(0,h.Cb)()],f.prototype,"fullOpacity",null),(0,r._)([(0,h.Cb)()],f.prototype,"layer",void 0),(0,r._)([(0,h.Cb)()],f.prototype,"parent",void 0),(0,r._)([(0,h.Cb)({readOnly:!0})],f.prototype,"suspended",null),(0,r._)([(0,h.Cb)({readOnly:!0})],f.prototype,"suspendInfo",null),(0,r._)([(0,h.Cb)({readOnly:!0})],f.prototype,"legendEnabled",null),(0,r._)([(0,h.Cb)({type:Boolean,readOnly:!0})],f.prototype,"updating",null),(0,r._)([(0,h.Cb)({readOnly:!0})],f.prototype,"updatingProgress",null),(0,r._)([(0,h.Cb)()],f.prototype,"updateSuspended",null),(0,r._)([(0,h.Cb)()],f.prototype,"visible",null),(0,r._)([(0,h.Cb)({readOnly:!0})],f.prototype,"visibleAtCurrentScale",null),(0,r._)([(0,h.Cb)({readOnly:!0})],f.prototype,"visibleAtCurrentTimeExtent",null);let m=f=(0,r._)([(0,c.j)("esri.views.layers.LayerView")],f)},76457:function(e,t,i){i.d(t,{Z:function(){return o}});var r=i(86641),n=i(689),s=i(89312);i(37180),i(65223),i(3457);var l=i(64186);let a=class extends n.wq{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,r._)([(0,s.Cb)({readOnly:!0})],a.prototype,"version",null);let o=a=(0,r._)([(0,l.j)("esri.views.layers.support.ClipArea")],a)},55485:function(e,t,i){i.d(t,{Z:function(){return f}});var r,n=i(86641);i(55066);var s=i(89312);i(37180),i(65223),i(3457);var l=i(64186),a=i(90389),o=i(5005),u=i(76457),h=i(9377),c=i(54001);let p={base:a.Z,key:"type",typeMap:{extent:h.Z,polygon:c.Z}},d=r=class extends u.Z{constructor(e){super(e),this.type="geometry",this.geometry=null}clone(){return new r({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,n._)([(0,s.Cb)({types:p,json:{read:o.im,write:!0}})],d.prototype,"geometry",void 0);let f=d=r=(0,n._)([(0,l.j)("esri.views.layers.support.Geometry")],d)},37864:function(e,t,i){function r(e){return e&&"function"==typeof e.highlight}function n(e,t){if(t&&e){let{minScale:i,maxScale:r}=e;if(null!=i&&i>0||null!=r&&r>0)return null==t||t>=r&&(0===i||t<=i)}return!0}function s(e){return!e?.minScale||!e.maxScale||e.minScale>=e.maxScale}i.d(t,{Cy:function(){return s},GB:function(){return n},tl:function(){return r}})},89556:function(e,t,i){i.d(t,{G:function(){return n}});var r=i(36152);class n{constructor(){this._result=!1}dispose(){this._program=(0,r.M2)(this._program)}get result(){return null!=this._program&&(this._result=this._test(this._program),this.dispose()),this._result}}},23022:function(e,t,i){i.d(t,{mO:function(){return s}});class r{constructor(e,t,i,r,n,s,l,a,o){this.createQuery=e,this.deleteQuery=t,this.resultAvailable=i,this.getResult=r,this.disjoint=n,this.beginTimeElapsed=s,this.endTimeElapsed=l,this.createTimestamp=a,this.timestampBits=o}}let n=!1;function s(e,t){if(t.disjointTimerQuery)return null;let i=e.getExtension("EXT_disjoint_timer_query_webgl2");return i?new r(()=>e.createQuery(),t=>{e.deleteQuery(t),n=!1},t=>e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE),t=>e.getQueryParameter(t,e.QUERY_RESULT),()=>e.getParameter(i.GPU_DISJOINT_EXT),t=>{n||(n=!0,e.beginQuery(i.TIME_ELAPSED_EXT,t))},()=>{e.endQuery(i.TIME_ELAPSED_EXT),n=!1},e=>i.queryCounterEXT(e,i.TIMESTAMP_EXT),()=>e.getQuery(i.TIMESTAMP_EXT,i.QUERY_COUNTER_BITS_EXT)):(i=e.getExtension("EXT_disjoint_timer_query"))?new r(()=>i.createQueryEXT(),e=>{i.deleteQueryEXT(e),n=!1},e=>i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT),e=>i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT),()=>e.getParameter(i.GPU_DISJOINT_EXT),e=>{n||(n=!0,i.beginQueryEXT(i.TIME_ELAPSED_EXT,e))},()=>{i.endQueryEXT(i.TIME_ELAPSED_EXT),n=!1},e=>i.queryCounterEXT(e,i.TIMESTAMP_EXT),()=>i.getQueryEXT(i.TIMESTAMP_EXT,i.QUERY_COUNTER_BITS_EXT)):null}},43316:function(e,t,i){i.d(t,{Br:function(){return o},Fm:function(){return f},N9:function(){return g},RA:function(){return _},Tc:function(){return h},Ue:function(){return c},iC:function(){return u},s9:function(){return a},v:function(){return m},xW:function(){return d},zS:function(){return p}});var r=i(24168),n=i(71193),s=i(15809),l=i(66897);function a(e,t,i="nearest",r=!1){let a=!(r&&"u8"===t.pixelType),o=a?n.Br.FLOAT:n.Br.UNSIGNED_BYTE,u=null==t.pixels||0===t.pixels.length?null:a?t.getAsRGBAFloat():t.getAsRGBA(),h=e.capabilities.textureFloatLinear,c=new l.X;return c.width=t.width,c.height=t.height,c.internalFormat=a?n.lP.RGBA32F:n.VI.RGBA,c.samplingMode=h&&("bilinear"===i||"cubic"===i)?n.cw.LINEAR:n.cw.NEAREST,c.dataType=o,c.wrapMode=n.e8.CLAMP_TO_EDGE,new s.x(e,c,u)}function o(e,t){let{spacing:i,offsets:r,coefficients:a,size:[o,u]}=t,h=i[0]>1,c=new l.X;c.width=h?4*o:o,c.height=u,c.internalFormat=n.lP.RGBA32F,c.dataType=n.Br.FLOAT,c.samplingMode=n.cw.NEAREST,c.wrapMode=n.e8.CLAMP_TO_EDGE;let p=new Float32Array(h?o*u*16:2*r.length);if(h&&null!=a)for(let e=0,t=0;e<a.length;e++)p[t++]=a[e],e%3==2&&(p[t++]=1);else for(let e=0;e<u;e++)for(let t=0;t<o;t++){let i=4*(e*o+t),n=2*(t*u+e);p[i]=r[n],p[i+1]=r[n+1],p[i+3]=-1===r[n]?0:1}return new s.x(e,c,p)}function u(e,t){let i=new l.X;return i.internalFormat=n.VI.RGBA,i.width=t.length/4,i.height=1,i.samplingMode=n.cw.NEAREST,i.wrapMode=n.e8.CLAMP_TO_EDGE,new s.x(e,i,t)}function h(e,t,i,n=1,s=!0){return{u_flipY:s,u_applyTransform:!!e,u_opacity:n,u_transformSpacing:e?e.spacing:r.AG,u_transformGridSize:e?e.size:r.AG,u_targetImageSize:t,u_srcImageSize:i}}function c(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:0}}function p(e,t){return{u_scale:e,u_offset:t}}function d(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function f(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function m(e,t){let i;let r=e.gl,n=t.glName,s=new Map;if(null==n)return s;let l=r.getProgramParameter(n,r.ACTIVE_UNIFORMS);for(let e=0;e<l;e++)(i=r.getActiveUniform(n,e))&&s.set(i.name,{location:r.getUniformLocation(n,i.name),info:i});return s}function g(e,t,i){Object.keys(i).forEach(r=>{let s=t.get(r)||t.get(r+"[0]");s&&function(e,t,i,r){if(null===r||null==i)return;let{info:s}=r;switch(s.type){case n.Se.FLOAT:s.size>1?e.setUniform1fv(t,i):e.setUniform1f(t,i);break;case n.Se.FLOAT_VEC2:e.setUniform2fv(t,i);break;case n.Se.FLOAT_VEC3:e.setUniform3fv(t,i);break;case n.Se.FLOAT_VEC4:e.setUniform4fv(t,i);break;case n.Se.FLOAT_MAT3:e.setUniformMatrix3fv(t,i);break;case n.Se.FLOAT_MAT4:e.setUniformMatrix4fv(t,i);break;case n.Se.INT:s.size>1?e.setUniform1iv(t,i):e.setUniform1i(t,i);break;case n.Se.BOOL:e.setUniform1i(t,i?1:0);break;case n.Se.INT_VEC2:case n.Se.BOOL_VEC2:e.setUniform2iv(t,i);break;case n.Se.INT_VEC3:case n.Se.BOOL_VEC3:e.setUniform3iv(t,i);break;case n.Se.INT_VEC4:case n.Se.BOOL_VEC4:e.setUniform4iv(t,i);break;default:return}}(e,r,i[r],s)})}function _(e,t,i,r){i.length===r.length&&(r.some(e=>null==e)||i.some(e=>null==e)||i.forEach((i,n)=>{t.setUniform1i(i,n),e.bindTexture(r[n],n)}))}},44163:function(e,t,i){i.d(t,{BK:function(){return c},LZ:function(){return h},if:function(){return s},jp:function(){return z},sm:function(){return p},wK:function(){return l},zp:function(){return u}});var r=i(73295),n=i(71193);function s(e,t,i=n.db.ADD,r=[0,0,0,0]){return{srcRgb:e,srcAlpha:e,dstRgb:t,dstAlpha:t,opRgb:i,opAlpha:i,color:{r:r[0],g:r[1],b:r[2],a:r[3]}}}function l(e,t,i,r,s=n.db.ADD,l=n.db.ADD,a=[0,0,0,0]){return{srcRgb:e,srcAlpha:t,dstRgb:i,dstAlpha:r,opRgb:s,opAlpha:l,color:{r:a[0],g:a[1],b:a[2],a:a[3]}}}let a={face:n.LR.BACK,mode:n.Wf.CCW},o={face:n.LR.FRONT,mode:n.Wf.CCW},u=e=>e===r.Vr.Back?a:e===r.Vr.Front?o:null,h={zNear:0,zFar:1},c={r:!0,g:!0,b:!0,a:!0};function p(e){return O.intern(e)}class d{constructor(e,t){this._makeKey=e,this._makeRef=t,this._interns=new Map}intern(e){if(!e)return null;let t=this._makeKey(e),i=this._interns;return i.has(t)||i.set(t,this._makeRef(e)),i.get(t)??null}}function f(e){return"["+e.join(",")+"]"}let m=new d(g,e=>({__tag:"Blending",...e}));function g(e){return e?f([e.srcRgb,e.srcAlpha,e.dstRgb,e.dstAlpha,e.opRgb,e.opAlpha,e.color.r,e.color.g,e.color.b,e.color.a]):null}let _=new d(y,e=>({__tag:"Culling",...e}));function y(e){return e?f([e.face,e.mode]):null}let x=new d(w,e=>({__tag:"PolygonOffset",...e}));function w(e){return e?f([e.factor,e.units]):null}let v=new d(b,e=>({__tag:"DepthTest",...e}));function b(e){return e?f([e.func]):null}let S=new d(R,e=>({__tag:"StencilTest",...e}));function R(e){return e?f([e.function.func,e.function.ref,e.function.mask,e.operation.fail,e.operation.zFail,e.operation.zPass]):null}let T=new d(C,e=>({__tag:"DepthWrite",...e}));function C(e){return e?f([e.zNear,e.zFar]):null}let E=new d(M,e=>({__tag:"ColorWrite",...e}));function M(e){return e?f([e.r,e.g,e.b,e.a]):null}let I=new d(P,e=>({__tag:"StencilWrite",...e}));function P(e){return e?f([e.mask]):null}let A=new d(k,e=>({__tag:"DrawBuffers",...e}));function k(e){return e?f(e.buffers):null}let O=new d(function(e){return e?f([g(e.blending),y(e.culling),w(e.polygonOffset),b(e.depthTest),R(e.stencilTest),C(e.depthWrite),M(e.colorWrite),P(e.stencilWrite),k(e.drawBuffers)]):null},e=>{var t,i,r,n,s,l,a,o,u;return{blending:(t=e.blending,m.intern(t)),culling:(i=e.culling,_.intern(i)),polygonOffset:(r=e.polygonOffset,x.intern(r)),depthTest:(n=e.depthTest,v.intern(n)),stencilTest:(s=e.stencilTest,S.intern(s)),depthWrite:(l=e.depthWrite,T.intern(l)),colorWrite:(a=e.colorWrite,E.intern(a)),stencilWrite:(o=e.stencilWrite,I.intern(o)),drawBuffers:(u=e.drawBuffers,A.intern(u))}});class z{constructor(e){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=e}setPipeline(e){(this._pipelineInvalid||e!==this._pipeline)&&(this._setBlending(e.blending),this._setCulling(e.culling),this._setPolygonOffset(e.polygonOffset),this._setDepthTest(e.depthTest),this._setStencilTest(e.stencilTest),this._setDepthWrite(e.depthWrite),this._setColorWrite(e.colorWrite),this._setStencilWrite(e.stencilWrite),this._setDrawBuffers(e.drawBuffers),this._pipeline=e),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDrawBuffers(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}_setBlending(e){this._blending=this._setSubState(e,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(e){this._culling=this._setSubState(e,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(e){this._polygonOffset=this._setSubState(e,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(e){this._depthTest=this._setSubState(e,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(e){this._stencilTest=this._setSubState(e,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(e){this._depthWrite=this._setSubState(e,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(e){this._colorWrite=this._setSubState(e,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(e){this._stencilWrite=this._setSubState(e,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setDrawBuffers(e){this._drawBuffers=this._setSubState(e,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}_setSubState(e,t,i,r){return(i||e!==t)&&(r(e),this._pipelineInvalid=!0),e}}},61909:function(e,t,i){i.d(t,{d:function(){return c}});var r=i(68100),n=i(28859),s=i(71193),l=i(59546),a=i(15809),o=i(66897),u=i(98163),h=i(89556);class c extends h.G{constructor(e){super(),this._rctx=e,this._program=e.programCache.acquire("\n    precision highp float;\n\n    attribute vec2 a_pos;\n    varying vec2 v_uv;\n\n    void main() {\n      v_uv = a_pos;\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n    precision highp float;\n\n    varying vec2 v_uv;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n      gl_FragColor = texture2D(u_texture, v_uv);\n    }\n    ",new Map([["a_pos",0]]))}dispose(){super.dispose()}_test(e){let t=this._rctx;if(!t.gl)return e.dispose(),!0;let i=new o.X(1);i.wrapMode=s.e8.CLAMP_TO_EDGE,i.samplingMode=s.cw.NEAREST;let h=new l.X(t,i),c=n.f.createVertex(t,s.l1.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),d=new u.U(t,new Map([["a_pos",0]]),r.cD,{geometry:c}),f=new o.X;f.samplingMode=s.cw.LINEAR,f.wrapMode=s.e8.CLAMP_TO_EDGE;let m=new a.x(t,f,p);t.useProgram(e),t.bindTexture(m,0),e.setUniform1i("u_texture",0);let g=t.getBoundFramebufferObject(),{x:_,y:y,width:x,height:w}=t.getViewport();t.bindFramebuffer(h),t.setViewport(0,0,1,1),t.setClearColor(0,0,0,0),t.setBlendingEnabled(!1),t.clear(s.lk.COLOR_BUFFER_BIT),t.bindVAO(d),t.drawArrays(s.MX.TRIANGLE_STRIP,0,4);let v=new Uint8Array(4);return h.readPixels(0,0,1,1,s.VI.RGBA,s.Br.UNSIGNED_BYTE,v),d.dispose(),h.dispose(),m.dispose(),t.setViewport(_,y,x,w),t.bindFramebuffer(g),255!==v[0]}}let p=new Image;p.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",p.width=5,p.height=5,p.decode()}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26388],{26388:function(t,e,s){s.r(e),s.d(e,{TFProject:function(){return V}});var i=s(13341);class h{MouseEventController(t){if(t.CLICK_TYPE===i.uh.LEFT){this.MouseLeftClickPre(t);return}if(t.CLICK_TYPE===i.uh.MIDDLE){this.MouseMiddleClickPre(t);return}if(t.CLICK_TYPE===i.uh.DOWN_RIGHT){this.MouseRightClickPre(t);return}if(t.CLICK_TYPE===i.uh.DOUBLE){this.MouseDoubleClickPre(t);return}if(t.CLICK_TYPE===i.uh.MOVE){this.MouseMovePre(t);return}if(t.CLICK_TYPE===i.uh.DRAG){this.MouseDragPre(t);return}if(t.CLICK_TYPE===i.uh.DOWN){this.MouseDownPre(t);return}else if(t.CLICK_TYPE===i.uh.WHEEL){this.MouseWheelPre(t);return}else if(t.CLICK_TYPE===i.uh.UP){this.MouseUpPre(t);return}}MouseDown(t){}MouseDownPre(t){this.scene.MouseDown(t.x,t.y),this.MouseDown(t)}MouseLeftClick(t){}MouseLeftClickPre(t){this.scene.MouseLeftClick(t.x,t.y),this.MouseLeftClick(t)}MouseMiddleClick(t){}MouseMiddleClickPre(t){this.scene.MouseMiddleClick(t.x,t.y),this.MouseMiddleClick(t)}MouseRightClick(t){}MouseRightClickPre(t){this.scene.MouseRightClick(t.x,t.y),this.MouseRightClick(t)}MouseUp(t){}MouseUpPre(t){this.scene.MouseUp(t.x,t.y),this.MouseUp(t)}MouseDoubleClick(t){}MouseDoubleClickPre(t){this.scene.MouseDoubleClick(t.x,t.y),this.MouseDoubleClick(t)}MouseMove(t){}MouseMovePre(t){this.scene.MouseMove(t.x,t.y),this.MouseMove(t)}MouseDrag(t){}MouseDragPre(t){this.scene.MouseDrag(t.x,t.y),this.MouseDrag(t)}MouseWheel(t){}MouseWheelPre(t){this.scene.MouseWheel(t.x,t.y,t.wheel),this.MouseWheel(t)}constructor(t){this.scene=t}}var n=s(79309);class a{InitIndeCanvas(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:650,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;this.scene.implementation.app.needUI?this.indeCanvas=new n.D(this.scene.implementation.app.viewController.nUIWrapper.nui.independentPanelWrapper,50,50,t,e,!0):this.indeCanvas=new n.D(this.scene.implementation.app.viewController.nUIWrapper.nui.independentPanelWrapper,1,-25,t,e,!0),this.indeCanvas.title="TF Env",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=t=>this.RenderIndependentCanvas(t)}get width(){return this.indeCanvas.canvas.width}get height(){return this.indeCanvas.canvas.height}Init(t){}RenderIndependentCanvas(t){}MouseMove(t,e){}MouseMovePre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseMove(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDown(t,e){}MouseDownPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDown(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseUp(t,e){}MouseUpPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseUp(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDrag(t,e){}MouseDragPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDrag(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseLeftClick(t,e){}MouseLeftClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseLeftClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseMiddleClick(t,e){}MouseMiddleClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseMiddleClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseRightClick(t,e){}MouseRightClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseRightClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDoubleClick(t,e){}MouseDoubleClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDoubleClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseWheel(t,e,s){}MouseWheelPre(t,e,s){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseWheel(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,s)}constructor(t,e=650,s=350){this.mOffX=-12,this.mOffY=-12,this.scene=t,this.scene.definitions.push(this),this.InitIndeCanvas(e,s)}}class l extends a{Init(){}MouseDown(t,e){this.vs.push(new i.h9(this.MapX(t),this.MapY(e)))}MapX(t){return i.$H.Remap(t,0,this.width,0,1)}MapY(t){return i.$H.Remap(t,0,this.height,1,0)}RenderIndependentCanvas(t){t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.LinearRegression(),this.RenderLine(t),t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(i.$H.Remap(this.vs[e].x,0,1,0,this.width),i.$H.Remap(this.vs[e].y,0,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill()}RenderLine(t){let e=0*this.a+this.bias,s=1*this.a+this.bias;t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(i.$H.Remap(0,0,1,0,this.width),i.$H.Remap(e,0,1,this.height,0)),t.lineTo(i.$H.Remap(1,0,1,0,this.width),i.$H.Remap(s,0,1,this.height,0)),t.stroke()}LinearRegression(){let t=0,e=0;for(let s=0;s<this.vs.length;++s)t+=this.vs[s].x,e+=this.vs[s].y;let s=t/this.vs.length,i=e/this.vs.length,h=0,n=0;for(let t=0;t<this.vs.length;++t)h+=(this.vs[t].x-s)*(this.vs[t].y-i),n+=(this.vs[t].x-s)*(this.vs[t].x-s);this.a=h/n,this.bias=i-this.a*s}constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.a=1,this.bias=0,this.indeCanvas.title="LinearRegression",this.Init()}}class r extends a{Init(){}MouseDown(t,e){this.vs.push(new i.h9(this.MapX(t),this.MapY(e)))}MapX(t){return i.$H.Remap(t,0,this.width,0,1)}MapY(t){return i.$H.Remap(t,0,this.height,1,0)}RenderIndependentCanvas(t){t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GradientDescent(),this.vs.length>1&&this.RenderLine(t),t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(i.$H.Remap(this.vs[e].x,0,1,0,this.width),i.$H.Remap(this.vs[e].y,0,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill()}RenderLine(t){let e=0*this.weight+this.bias,s=1*this.weight+this.bias;t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(i.$H.Remap(0,0,1,0,this.width),i.$H.Remap(e,0,1,this.height,0)),t.lineTo(i.$H.Remap(1,0,1,0,this.width),i.$H.Remap(s,0,1,this.height,0)),t.stroke()}GradientDescent(){for(let t=0;t<this.vs.length;++t){let e=this.vs[t].x,s=this.vs[t].y-(this.weight*e+this.bias);this.weight=this.weight+s*e*.1,this.bias=this.bias+.1*s}}constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.weight=1,this.bias=0,this.indeCanvas.title="LinearRegression",this.Init()}}var o=s(88405),d=s(49738);class p extends a{Init(){this.tfLinearRegression=new c,this.InitData(),this.InitUI()}InitUI(){let t=document.createElement("div");t.style.position="absolute",t.style.left="400px",t.style.color="#ffffff";let e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e);let s=document.getElementById("indePanel");s&&s.append(t)}InitData(){d.TFDataUtility.getData().then(t=>{let e=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let a of(t.forEach(t=>{let i=t.horsepower;i>s&&(s=i),i<e&&(e=i);let a=t.mpg;a>n&&(n=a),a<h&&(h=a)}),t)){let t=a.horsepower,l=a.mpg;this.vsTemp.push(new i.h9(i.$H.Remap(t,e,s,.1,.9),i.$H.Remap(l,h,n,.1,.9)))}})}MouseDown(t,e){this.vs.push(new i.h9(this.MapX(t),this.MapY(e)))}MapX(t){return i.$H.Remap(t,0,this.width,0,1)}MapY(t){return i.$H.Remap(t,0,this.height,1,0)}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),(2&this.t)==0){let t=this.vsTemp.pop();t&&this.vs.push(t)}if(this.vs.length>1){let e=[],s=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),s.push(this.vs[t].y);this.tfLinearRegression.train(e,s),this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(i.$H.Remap(this.vs[e].x,0,1,0,this.width),i.$H.Remap(this.vs[e].y,0,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.t+=.3}RenderLine(t){let e=[0,1],s=o.tidy(()=>this.tfLinearRegression.predict(o.tensor1d(e))),h=s.dataSync();s.dispose();let n=h[0],a=h[1];t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(i.$H.Remap(0,0,1,0,this.width),i.$H.Remap(n,0,1,this.height,0)),t.lineTo(i.$H.Remap(1,0,1,0,this.width),i.$H.Remap(a,0,1,this.height,0)),t.stroke()}constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.vsTemp=[],this.t=0,this.indeCanvas.title="TF LinearRegression GradientDescent 01",this.Init()}}class c{predict(t){return t.mul(this.weight).add(this.bias)}loss(t,e){return t.sub(e).square().mean()}train(t,e){o.tidy(()=>{let s=o.tensor1d(t),i=o.tensor1d(e);this.optimizer.minimize(()=>this.loss(this.predict(s),i))})}constructor(){this.leraningRate=.5,this.weight=o.variable(o.scalar(Math.random())),this.bias=o.variable(o.scalar(Math.random())),this.optimizer=o.train.sgd(this.leraningRate)}}class u extends a{InitUI(){let t=document.createElement("div");t.style.position="absolute",t.style.left="400px",t.style.color="#ffffff";let e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e);let s=document.getElementById("indePanel");if(s){s.append(t);let e=document.createElement("button");e.textContent="run",e.style.position="absolute",e.style.left="650px",e.onclick=()=>{},this.scene.implementation.app.model.modelViewCoreWrapper.viewWrapper.div.append(e)}}InitData(){d.TFDataUtility.getData().then(t=>{let e=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let a of(t.forEach(t=>{let i=t.horsepower;i>s&&(s=i),i<e&&(e=i);let a=t.mpg;a>n&&(n=a),a<h&&(h=a)}),t)){let t=a.horsepower,l=a.mpg;this.vsTemp.push(new i.h9(i.$H.Remap(t,e,s,-.9,.9),i.$H.Remap(l,h,n,-.9,.9)))}})}Init(){this.tfLinearRegression=new m}MouseDown(t,e){this.vs.push(new i.h9(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MapX(t){return i.$H.Remap(t,0,this.width,-1,1)}MapY(t){return i.$H.Remap(t,0,this.height,1,-1)}Grid(t){}RenderIndependentCanvas(t){if(this.Grid(t),t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),(2&this.t)==0){let t=this.vsTemp.pop();t&&this.vs.push(t)}if(this.vs.length>1){let e=[],s=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),s.push(this.vs[t].y);this.tfLinearRegression.train(e,s),this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(i.$H.Remap(this.vs[e].x,-1,1,0,this.width),i.$H.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.t+=.3}RenderLine(t){let e=[];for(let t=-1;t<=1;t+=.05)e.push(t);let s=o.tidy(()=>this.tfLinearRegression.predict2d(o.tensor1d(e))),h=s.dataSync();s.dispose(),t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(i.$H.Remap(e[0],-1,1,0,this.width),i.$H.Remap(h[0],-1,1,this.height,0));for(let s=1;s<e.length;++s)t.lineTo(i.$H.Remap(e[s],-1,1,0,this.width),i.$H.Remap(h[s],-1,1,this.height,0));t.stroke()}constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.vsTemp=[],this.selVec=void 0,this.t=0,this.indeCanvas.title="TF LinearRegression GradientDescent 01",this.Init(),this.InitData(),this.InitUI()}}class m{predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(o.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(o.scalar(4)).mul(this.weights[3]).add(t.pow(o.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(o.scalar(5)).mul(this.weights[4]).add(t.pow(o.scalar(4)).mul(this.weights[3])).add(t.pow(o.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):this.predict1d(t)}loss(t,e){return t.sub(e).square().mean()}train(t,e){o.tidy(()=>{let s=o.tensor1d(t),i=o.tensor1d(e);this.optimizer.minimize(()=>this.loss(this.predict(s),i))})}constructor(){this.weights=[],this.dim=1,this.leraningRate=.2;for(let t=0;t<5;++t){let t=o.variable(o.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=o.variable(o.scalar(2*Math.random()-1)),this.optimizer=o.train.adam(this.leraningRate)}}class f extends a{Init(){this.tfLinearRegression=new g,this.indeCanvas.canvas.style.zIndex="-1",d.TFDataUtility.getData().then(t=>{})}MouseDown(t,e){let s=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t)if(.05>i.h9.Distance(s,this.vs[t])){this.selVec=this.vs[t];return}this.vs.push(new i.h9(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MouseMove(t,e){let s;let h=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t).05>i.h9.Distance(h,this.vs[t])&&(s=this.vs[t]);s?this.selVec=s:this.selVec=void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return i.$H.Remap(t,0,this.width,-1,1)}MapY(t){return i.$H.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";let e=this.width/20-1,s=this.height/20-1;for(let i=0;i<20;i+=1){10===i?t.lineWidth=3:t.lineWidth=1;let h=e*i,n=0,a=h,l=this.height;t.beginPath(),t.moveTo(h,n),t.lineTo(a,l),t.stroke(),h=0,n=s*i,a=this.width,l=n,t.beginPath(),t.moveTo(h,n),t.lineTo(a,l),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){let e=[],s=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),s.push(this.vs[t].y);this.tfLinearRegression.train(e,s),this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(i.$H.Remap(this.vs[e].x,-1,1,0,this.width),i.$H.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),i.$H.Remap(this.selVec.x,-1,1,0,this.width),i.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){let e=[];for(let t=-1;t<=1;t+=.05)e.push(t);let s=o.tidy(()=>this.tfLinearRegression.predict(o.tensor1d(e))),h=s.dataSync();s.dispose(),t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(i.$H.Remap(e[0],-1,1,0,this.width),i.$H.Remap(h[0],-1,1,this.height,0));for(let s=1;s<e.length;++s)t.lineTo(i.$H.Remap(e[s],-1,1,0,this.width),i.$H.Remap(h[s],-1,1,this.height,0));t.stroke()}constructor(t,e=650,s=350){super(t,e,s),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.indeCanvas.title="TF LinearRegression GradientDescent 01",this.Init()}}class g{predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(o.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(o.scalar(4)).mul(this.weights[3]).add(t.pow(o.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(o.scalar(5)).mul(this.weights[4]).add(t.pow(o.scalar(4)).mul(this.weights[3])).add(t.pow(o.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):this.predict1d(t)}loss(t,e){return t.sub(e).square().mean()}train(t,e){o.tidy(()=>{let s=o.tensor1d(t),i=o.tensor1d(e);this.optimizer.minimize(()=>this.loss(this.predict(s),i))})}constructor(){this.weights=[],this.dim=3,this.leraningRate=.2;for(let t=0;t<5;++t){let t=o.variable(o.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=o.variable(o.scalar(2*Math.random()-1)),this.optimizer=o.train.adam(this.leraningRate)}}class v extends a{Init(){this.tfModel=new M}MouseDown(t,e){let s=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t)if(.05>i.h9.Distance(s,this.vs[t])){this.selVec=this.vs[t];return}this.vs.push(new i.h9(this.MapX(t),this.MapY(e)))}MouseMove(t,e){let s;let h=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t).05>i.h9.Distance(h,this.vs[t])&&(s=this.vs[t]);s?this.selVec=s:this.selVec=void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return i.$H.Remap(t,0,this.width,-1,1)}MapY(t){return i.$H.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";let e=this.width/20-1,s=this.height/20-1;for(let i=0;i<20;i+=1){10===i?t.lineWidth=3:t.lineWidth=1;let h=e*i,n=0,a=h,l=this.height;t.beginPath(),t.moveTo(h,n),t.lineTo(a,l),t.stroke(),h=0,n=s*i,a=this.width,l=n,t.beginPath(),t.moveTo(h,n),t.lineTo(a,l),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){let e=[],s=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),s.push(this.vs[t].y);this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(i.$H.Remap(this.vs[e].x,-1,1,0,this.width),i.$H.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),i.$H.Remap(this.selVec.x,-1,1,0,this.width),i.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){}constructor(t,e=650,s=350){super(t,e,s),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}}class M{train0(){let t=o.tensor2d([[0,0],[.5,.5],[1,1]]),e=o.tensor2d([[1],[.5],[0]]);this.model.fit(t,e,{epochs:10}).then(t=>console.log(t.history)),this.model.predict(t).print()}async train1(){let t=o.tensor2d([[0,0],[.5,.5],[1,1]]),e=o.tensor2d([[1],[.5],[0]]),s={epochs:10,shuffle:!0};for(let i=0;i<500;++i)await this.model.fit(t,e,s)}constructor(){this.model=o.sequential();let t=o.layers.dense({inputShape:[2],units:4,activation:"sigmoid"}),e=o.layers.dense({units:1,activation:"sigmoid"});this.model.add(t),this.model.add(e);let s={optimizer:o.train.sgd(.1),loss:o.losses.meanSquaredError};this.model.compile(s),this.train1().then(()=>{let t=o.tensor2d([[0,0],[.5,.5],[1,1]]);this.model.predict(t).print()})}}class w extends a{InitUI(){let t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.color="#ffffff";let e=document.createElement("p");e.textContent="ref: Coding Challenge #106: XOR Problem with TensorFlow.js by The Cording Train",e.style.fontSize="11px",t.append(e);let s=document.getElementById("indePanel");s&&s.append(t)}Init(){this.tfModel=new y;let t=[];for(let e=0;e<=10;++e)for(let s=0;s<=10;++s)t.push([.1*s,.1*e]);this.xPredict=o.tensor2d(t)}MouseDown(t,e){let s=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t)if(.05>i.h9.Distance(s,this.vs[t])){this.selVec=this.vs[t];return}this.vs.push(new i.h9(this.MapX(t),this.MapY(e)))}MouseMove(t,e){let s;let h=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t).05>i.h9.Distance(h,this.vs[t])&&(s=this.vs[t]);s?this.selVec=s:this.selVec=void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return i.$H.Remap(t,0,this.width,-1,1)}MapY(t){return i.$H.Remap(t,0,this.height,1,-1)}RenderIndependentCanvas(t){o.tidy(()=>{let e=this.tfModel.model.predict(this.xPredict).dataSync();t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill();let s=0;for(let i=0;i<=10;i++)for(let h=0;h<=10;h++){this.inputs.push(i);let n=42*i,a=42*h,l=e[s];t.fillStyle="rgba(".concat(255*l,",",0,",",0,",1)"),t.beginPath(),t.rect(n,a,42,42),t.closePath(),t.fill(),s++}})}constructor(t,e=650,s=350){super(t,e,s),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.inputs=[],this.indeCanvas.title="TF XOR",this.Init(),this.InitUI()}}class y{trainLoop(){this.train().then(t=>{setTimeout(()=>this.trainLoop(),1)})}async train(){return await this.model.fit(this.xTrain,this.yTrain,{epochs:10,shuffle:!0})}constructor(){this.xTrain=o.tensor2d([[0,0],[1,0],[0,1],[1,1]]),this.yTrain=o.tensor2d([[0],[1],[1],[0]]),this.model=o.sequential();let t=o.layers.dense({inputShape:[2],units:16,activation:"sigmoid"}),e=o.layers.dense({units:1,activation:"sigmoid"});this.model.add(t),this.model.add(e),this.model.compile({optimizer:o.train.adam(.05),loss:o.losses.meanSquaredError}),this.trainLoop()}}class C extends a{Init(){this.tfModel=new x}RenderIndependentCanvas(t){o.tidy(()=>{})}constructor(t,e=650,s=350){super(t,e,s),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.inputs=[],this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}}class x{async trainLoop(){await this.model.save("downloads://my-model"),await this.model.save("localstorage://ml/my-model-1"),this.train().then(t=>{setTimeout(()=>this.trainLoop(),1)})}async train(){return await this.model.fit(this.inputsTensor,this.labelsTensor,{epochs:50,shuffle:!0,validationData:[this.inputsTensor,this.labelsTensor]})}constructor(){let t=d.TFDataUtility.GetIrisData();o.util.shuffle(t);let e=[];for(let s=0;s<t.length;++s){let i=[];for(let e=0;e<t[s].length-1;++e)i.push(t[s][e]);e.push(i)}let s=[];for(let e=0;e<t.length;++e)0===t[e][t[e].length-1]?s.push([1,0,0]):1===t[e][t[e].length-1]?s.push([0,1,0]):2===t[e][t[e].length-1]&&s.push([0,0,1]);this.inputsTensor=o.tensor2d(e),this.labelsTensor=o.tensor2d(s),this.inputsTensor.print(),this.labelsTensor.print(),this.model=o.sequential();let i=o.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:10,activation:"sigmoid"}),h=o.layers.dense({units:3,activation:"softmax"});this.model.add(i),this.model.add(h),this.model.compile({optimizer:o.train.adam(),loss:o.losses.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}}class R extends a{async Init(){let t=new b;await t.Init().then(()=>{this.tfModel=new I("model1",t.inputsTensor,t.labelsTensor),this.tfModel.CreateModel01(),this.tfModel=new I("model2",t.inputsTensor,t.labelsTensor),this.tfModel.CreateModel02()})}RenderIndependentCanvas(t){o.tidy(()=>{})}constructor(t,e=650,s=350){super(t,e,s),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.inputs=[],this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}}class b{async Init(){let t=await this.OpenCSV();if(t){this.raw=this.processData(t),o.util.shuffle(this.raw);let e=[],s=[];for(let t=0;t<this.raw.length;++t){let i=[];for(let e=0;e<this.raw[t].length-1;++e)i.push(this.raw[t][e]);e.push(i),s.push(this.raw[t][this.raw[t].length-1])}let i=o.max(s).dataSync(),h=[];for(let t=0;t<s.length;++t){let e=[];for(let h=0;h<=i[0];++h)h===s[t]?e.push(1):e.push(0);h.push(e)}this.inputsTensor=o.tensor2d(e),this.labelsTensor=o.tensor2d(h),this.inputsTensor.print(),this.labelsTensor.print()}}processData(t){let e=t.split(/\r\n|\n/),s=e[0].split(","),i=[];for(let t=1;t<e.length;t++){let h=e[t].split(",");if(h.length===s.length){let t=[];for(let e=0;e<s.length;e++){let s=+h[e];isNaN(s)?t.push(h[e]):t.push(s)}i.push(t)}}return i}async OpenCSV(){return fetch("njslabSandboxStatic/ML/SmartDrawing/".concat("smartDrawingTrainData.csv")).then(t=>t.text()).catch(t=>{})}constructor(){}}class I{CreateModel01(){this.model=o.sequential();let t=o.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),e=o.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(t),this.model.add(e),this.Compile()}CreateModel02(){this.model=o.sequential();let t=o.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),e=o.layers.dense({units:15,activation:"sigmoid"}),s=o.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(t),this.model.add(e),this.model.add(s),this.Compile()}Compile(){this.model.compile({optimizer:o.train.adam(),loss:o.losses.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}async trainLoop(){this.t0=performance.now(),await this.model.save("downloads://my-model"),this.train().then(t=>{this.t1=performance.now(),setTimeout(()=>this.trainLoop(),1)})}async train(){}constructor(t,e,s){this.name=t,this.inputsTensor=e,this.labelsTensor=s}}var P=s(1616);class T extends a{Init(){d.TFDataUtility.getData().then(t=>{this.train(t)})}async train(t){let e=L(t),{inputs:s,labels:i}=e,h=H();P.show.modelSummary({name:"Model Summary"},h),await D(h,s,i),function(t,e,s){let{inputMax:i,inputMin:h,labelMin:n,labelMax:a}=s,[l,r]=o.tidy(()=>{let e=o.linspace(0,1,100),s=t.predict(e.reshape([100,1])),l=e.mul(i.sub(h)).add(h),r=s.mul(a.sub(n)).add(n);return[l.dataSync(),r.dataSync()]}),d=Array.from(l).map((t,e)=>({x:t,y:r[e]})),p=e.map(t=>({x:t.horsepower,y:t.mpg}));P.render.scatterplot({name:"Model Predictions vs Original Data"},{values:[p,d],series:["original","predicted"]},{xLabel:"Horsepower",yLabel:"MPG",height:300})}(h,t,e)}MouseDown(t,e){let s=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t)if(.05>i.h9.Distance(s,this.vs[t])){this.selVec=this.vs[t];return}this.vs.push(new i.h9(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MouseMove(t,e){let s;let h=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t).05>i.h9.Distance(h,this.vs[t])&&(s=this.vs[t]);s?this.selVec=s:this.selVec=void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return i.$H.Remap(t,0,this.width,-1,1)}MapY(t){return i.$H.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";let e=this.width/20-1,s=this.height/20-1;for(let i=0;i<20;i+=1){10===i?t.lineWidth=3:t.lineWidth=1;let h=e*i,n=0,a=h,l=this.height;t.beginPath(),t.moveTo(h,n),t.lineTo(a,l),t.stroke(),h=0,n=s*i,a=this.width,l=n,t.beginPath(),t.moveTo(h,n),t.lineTo(a,l),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){let e=[],s=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),s.push(this.vs[t].y);this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(i.$H.Remap(this.vs[e].x,-1,1,0,this.width),i.$H.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),i.$H.Remap(this.selVec.x,-1,1,0,this.width),i.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){let e=[];for(let t=-1;t<=1;t+=.05)e.push(t)}constructor(t,e=650,s=350){super(t,e,s),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}}async function D(t,e,s){return t.compile({optimizer:o.train.adam(),loss:o.losses.meanSquaredError,metrics:["mse"]}),await t.fit(e,s,{batchSize:32,epochs:50,shuffle:!0,callbacks:P.show.fitCallbacks({name:"Training Performance"},["loss","mse"],{height:200,callbacks:["onEpochEnd"]})})}let H=()=>{let t=o.sequential();return t.add(o.layers.dense({inputShape:[1],units:16,useBias:!0})),t.add(o.layers.dense({units:1,useBias:!0})),t},L=t=>o.tidy(()=>{o.util.shuffle(t);let e=t.map(t=>t.horsepower),s=t.map(t=>t.mpg),i=o.tensor2d(e,[e.length,1]),h=o.tensor2d(s,[s.length,1]),n=i.max(),a=i.min(),l=h.max(),r=h.min();return{inputs:i.sub(a).div(n.sub(a)),labels:h.sub(r).div(l.sub(r)),inputMax:n,inputMin:a,labelMax:l,labelMin:r}});class k extends a{Init(){this.tfLinearRegression.push(new E(1)),this.tfLinearRegression.push(new E(2)),this.tfLinearRegression.push(new E(3)),this.tfLinearRegression.push(new E(4)),this.indeCanvas.canvas.style.zIndex="-1",d.TFDataUtility.getData().then(t=>{}),new S}InitUI(){let t=document.createElement("div");t.style.position="absolute",t.style.left="40px",t.style.color="#ffffff";let e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e),(e=document.createElement("p")).textContent="LinearRegression",e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[0],t.append(e),(e=document.createElement("p")).style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[1],e.textContent="Degree of polynomial - 2",t.append(e),(e=document.createElement("p")).style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[2],e.textContent="Degree of polynomial - 3",t.append(e),(e=document.createElement("p")).style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[3],e.textContent="Degree of polynomial - 4",t.append(e);let s=document.getElementById("indePanel");s&&s.append(t)}MouseDown(t,e){let s=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t)if(.05>i.h9.Distance(s,this.vs[t])){this.selVec=this.vs[t];return}this.vs.push(new i.h9(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MouseMove(t,e){let s;let h=new i.h9(this.MapX(t),this.MapY(e));for(let t=0;t<this.vs.length;++t).05>i.h9.Distance(h,this.vs[t])&&(s=this.vs[t]);s?this.selVec=s:this.selVec=void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return i.$H.Remap(t,0,this.width,-1,1)}MapY(t){return i.$H.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";let e=this.width/20-1,s=this.height/20-1;for(let i=0;i<20;i+=1){10===i?t.lineWidth=3:t.lineWidth=1;let h=e*i,n=0,a=h,l=this.height;t.beginPath(),t.moveTo(h,n),t.lineTo(a,l),t.stroke(),h=0,n=s*i,a=this.width,l=n,t.beginPath(),t.moveTo(h,n),t.lineTo(a,l),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1)for(let e=0;e<this.tfLinearRegression.length;++e){let s=[],i=[];for(let t=0;t<this.vs.length;++t)s.push(this.vs[t].x),i.push(this.vs[t].y);this.tfLinearRegression[e].train(s,i),this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(i.$H.Remap(this.vs[e].x,-1,1,0,this.width),i.$H.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),i.$H.Remap(this.selVec.x,-1,1,0,this.width),i.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){for(let e=0;e<this.tfLinearRegression.length;++e){let s=[];for(let t=-1;t<=1;t+=.08)s.push(t);let h=o.tidy(()=>this.tfLinearRegression[e].predict(o.tensor1d(s))),n=h.dataSync();h.dispose(),t.lineWidth=1,t.strokeStyle=this.col[e],t.beginPath(),t.moveTo(i.$H.Remap(s[0],-1,1,0,this.width),i.$H.Remap(n[0],-1,1,this.height,0));for(let e=1;e<s.length;++e)t.lineTo(i.$H.Remap(s[e],-1,1,0,this.width),i.$H.Remap(n[e],-1,1,this.height,0));t.stroke()}}constructor(t,e=650,s=350){super(t,e,s),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.col=["#ff0000","#00ff00","#0000ff","#00fff0","#ff0000","#fff000","#0fff00"],this.tfLinearRegression=[],this.indeCanvas.title="TF MNist ",this.Init(),this.InitUI()}}class E{predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(o.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(o.scalar(4)).mul(this.weights[3]).add(t.pow(o.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(o.scalar(5)).mul(this.weights[4]).add(t.pow(o.scalar(4)).mul(this.weights[3])).add(t.pow(o.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):(this.dim,this.predict1d(t))}loss(t,e){return t.sub(e).square().mean()}train(t,e){o.tidy(()=>{let s=o.tensor1d(t),i=o.tensor1d(e);this.optimizer.minimize(()=>this.loss(this.predict(s),i))})}constructor(t=0){this.weights=[],this.dim=3,this.leraningRate=.2,this.dim=t;for(let t=0;t<5;++t){let t=o.variable(o.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=o.variable(o.scalar(2*Math.random()-1)),this.optimizer=o.train.adam(this.leraningRate)}}class S{async load(){let t=new Image,e=document.createElement("canvas"),s=e.getContext("2d"),i=new Promise((i,h)=>{t.crossOrigin="",t.onload=()=>{t.width=t.naturalWidth,t.height=t.naturalHeight;let i=new ArrayBuffer(20384e4);e.width=t.width,e.height=5e3;for(let h=0;h<13;h++){let n=new Float32Array(i,1568e4*h,392e4);s.drawImage(t,0,5e3*h,t.width,5e3,0,0,t.width,5e3);let a=s.getImageData(0,0,e.width,e.height);for(let t=0;t<a.data.length/4;t++)n[t]=a.data[4*t]/255}this.datasetImages=new Float32Array(i)},t.src="https://storage.googleapis.com/learnjs-data/model-builder/mnist_images.png"}),h=fetch("https://storage.googleapis.com/learnjs-data/model-builder/mnist_labels_uint8"),n=(await Promise.all([i,h]))[1];this.datasetLabels=new Uint8Array(await n.arrayBuffer()),this.trainImages=this.datasetImages.slice(0,4312e4),this.testImages=this.datasetImages.slice(4312e4),this.trainLabels=this.datasetLabels.slice(0,55e4),this.testLabels=this.datasetLabels.slice(55e4)}getTrainData(){return{xs:o.tensor4d(this.trainImages,[this.trainImages.length/784,28,28,1]),labels:o.tensor2d(this.trainLabels,[this.trainLabels.length/10,10])}}getTestData(t){let e=o.tensor4d(this.testImages,[this.testImages.length/784,28,28,1]),s=o.tensor2d(this.testLabels,[this.testLabels.length/10,10]);return null!=t&&(e=e.slice([0,0,0,0],[t,28,28,1]),s=s.slice([0,0],[t,10])),{xs:e,labels:s}}constructor(){}}class $ extends a{Init(){}RenderIndependentCanvas(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseDown(t,e){this.p=[t,e]}MouseMove(t,e){this.p=[t,e]}constructor(t){super(t),this.p=[0,0],this.Init()}}class V{Init(){this.definitions=[]}get width(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.width}get height(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.height}InitDefinition(){for(let t of this.definitions)t.Init(this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.ctx)}Render(t){}MouseMove(t,e){for(let s of this.definitions)s.MouseMovePre(t,e)}MouseLeftClick(t,e){for(let s of this.definitions)s.MouseLeftClickPre(t,e)}MouseDown(t,e){for(let s of this.definitions)s.MouseDownPre(t,e)}MouseUp(t,e){for(let s of this.definitions)s.MouseUpPre(t,e)}MouseDrag(t,e){for(let s of this.definitions)s.MouseDragPre(t,e)}MouseMiddleClick(t,e){for(let s of this.definitions)s.MouseMiddleClickPre(t,e)}MouseRightClick(t,e){for(let s of this.definitions)s.MouseRightClickPre(t,e)}MouseDoubleClick(t,e){for(let s of this.definitions)s.MouseDoubleClickPre(t,e)}MouseWheel(t,e,s){for(let i of this.definitions)i.MouseWheelPre(t,e,s)}Dispose(){this.definitions=[]}InitDefault(){}LoadDefinition(t){"blank"===t&&new $(this),"TFModel02XOR"===t&&new w(this,480,500),"TFModel03Iris"===t&&new C(this,480,500),"TFModel03SmartDrawing"===t&&new R(this,480,500),"TFModel01HorsepowerAndMilesPerGallon"===t&&new T(this,500,500),"TFModel01"===t&&new v(this,500,500),"JSLinearRegression"===t&&new l(this),"JSLinearRegressionGD"===t&&new r(this),"TFLinearRegressionGD"===t&&new p(this),"TFPolynomialRegression GD"===t&&new u(this),"TFPolyRegress Interaction"===t&&new f(this,500,500),"TFMnist"===t&&new k(this,500,500)}initPullDown(){this.implementation.app.viewController.nUIWrapper.initPullDown()}constructor(t){this.definitions=[],this.implementation=t,this.canvas=t.app.model.graphicsCoreWrapper.canvasWrapper.canvas,this.activeCommandController=new h(this),this.Init(),this.InitDefinition(),this.InitDefault(),this.initPullDown()}}}}]);
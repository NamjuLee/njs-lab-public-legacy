(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59980,41173],{75410:function(){},48628:function(){},31601:function(){},67792:function(){},34977:function(){},75042:function(){},56871:function(t,e,o){"use strict";o.d(e,{L:function(){return i}});class i{sendData(t){}constructor(t,e){this.firebaseConfig={apiKey:"AIzaSyA1yKg85WGZoshbk8xR23cXr3SwpqXVgIc",authDomain:"njs-data.firebaseapp.com",projectId:"njs-data",storageBucket:"njs-data.appspot.com",messagingSenderId:"635991152770",appId:"1:635991152770:web:722f5356e0d14cea50fc9b"},this.getData=t=>{let e=t.val();for(let t in e);},this.getError=t=>{console.error(t)}}}},27042:function(t,e,o){"use strict";o.r(e),o.d(e,{SmartDrawing:function(){return s}});var i=o(88405),r=o(98594),n=o(56871);class s{callback(t){let e=t.val();for(let t in console.log("callback -------- get data",e),e)console.log(t,e[t])}AppendDiv(){let t=document.getElementById("main"),e=document.createElement("div");t&&e&&(this.divText=e,t.insertBefore(this.divText,null),this.divText.style.marginLeft="20px")}async LoadModelFromJsons(){}async LoadModelFromPublic(){let t="https://raw.githubusercontent.com/NamjuLee/data/master/smart-drawing/model/modelLogisticRegression0/model.json";this.modelLogisticRegression=await this.LoadModelFromPath(t),t="https://raw.githubusercontent.com/NamjuLee/data/master/smart-drawing/model/modelMultiClassification0/model.json",this.modelMultiClassification=await this.LoadModelFromPath(t)}async LoadModelFromPath(t){return await i.loadLayersModel(t)}PredictByLogisticRegression(t){if(void 0===this.modelLogisticRegression){console.error("no model loaded");return}return(0,i.tidy)(()=>{let e=(0,i.tensor2d)([t]),o=this.modelLogisticRegression.predict(e).dataSync();return this.PredictionPostProcessingLogisticRegression(o[0])})}PredictByMultiClassification(t){if(void 0===this.modelMultiClassification){console.error("no model loaded");return}return(0,i.tidy)(()=>{let e=i.tensor2d([t]),o=this.modelMultiClassification.predict(e);{let t=Array.from(o.dataSync()),e=this.GetIndexBySortDescending(t),i=[];for(let o of e){let e=t[o],r="class:"+s.CLASS_TYPE[o]+", probability:"+e.toFixed(5);console.log(r),i.push(r)}this.UpdateDivWithText(i)}let r=o.argMax(-1).dataSync()[0];return s.CLASS_TYPE[r]})}UpdateDivWithText(t){let e="<p>*** FROM DEEP LEARNING MODEL B *** </p>";for(let o=0;o<t.length;++o)e+="<p> ".concat(t[o],"</p>");this.divText.innerHTML=e}PredictionPostProcessingLogisticRegression(t){return s.CLASS_TYPE[Math.floor(t+.5)]}GetIndexBySortDescending(t){let e=t.length,o=Array(e);for(var i=0;i<e;++i)o[i]=i;return o.sort((e,o)=>t[e]>t[o]?-1:t[e]<t[o]?1:0),o}Remove(){}Predict(t){let e=[];for(let o of t)e.push(new r.NVector3(o[0],o[1],0));let o=r.NVector3.ComputeDotProducts(e),i=this.GetInterpolatedArray(o,501);console.log("*** FROM DEEP LEARNING MODELS ***");let n=this.PredictByMultiClassification(i);return console.debug("pridiction:%c ".concat(n," from MC model"),"background: #4e2c7e; color: white"),this.firebaseWrapper.sendData({class:n,vec:t}),n}LinearInterpolate(t,e,o){return t+(e-t)*o}GetInterpolatedArray(t,e){let o=[],i=(t.length-1)/(e-1);o[0]=t[0];for(let r=1;r<e-1;r++){let e=r*i,n=+Math.floor(e).toFixed(),s=+Math.ceil(e).toFixed(),a=e-n;o[r]=this.LinearInterpolate(t[n],t[s],a)}return o[e-1]=t[t.length-1],o}constructor(){this.AppendDiv(),this.LoadModelFromPublic(),console.log(i.version),this.firebaseWrapper=new n.L("smartDrawing",this.callback)}}s.CLASS_TYPE={0:"CIRCLE",1:"TRI-GON",2:"ARROW_SINGLE",3:"ARROW_DOUBLE",4:"RECTANGLE",5:"TEXT",6:"CURVE",7:"HEART",8:"CLOUD"}},69651:function(t,e,o){"use strict";o.r(e),o.d(e,{Implementation:function(){return r}});var i=o(27042);class r{constructor(t){this.app=t,this.smartDrawing=new i.SmartDrawing}}}}]);
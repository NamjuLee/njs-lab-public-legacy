"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7186],{7186:function(t,e,s){s.r(e),s.d(e,{AppBlockGame:function(){return y},Solution:function(){return u}});class i{static GetVecforGraphicApp(t,e,s,n,h,r){let a=new i(0,0,0);return a.long=t,a.lat=e,a.ele=s,a.proX=n,a.proY=h,a.proZ=r,a}static DeepCopy(t){let e=new i(t.x,t.y,t.z);return e.long=t.long,e.lat=t.lat,e.proX=t.proX,e.proY=t.proY,e.proZ=t.proZ,e}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static GetAreayConvexGPS(t){let e,s,i,n=[],h=[];for(let e=0;e<t.length;++e)n.push(t[e].lat),h.push(t[e].long);n.push(t[0].lat),h.push(t[0].long);let r=0,a=0;for(let t=n.length;t--;)r+=n[t],a+=h[t];let o=r/n.length,l=a/h.length,c=Array(n.length);for(let t=n.length;t--;)n[t]-=o,h[t]-=l,h[t]>=0&&n[t]>=0?c[t]=Math.abs(180*Math.atan(n[t]/h[t])/Math.PI):h[t]<0&&n[t]>=0?c[t]=90+Math.abs(180*Math.atan(n[t]/h[t])/Math.PI):h[t]<0&&n[t]<0?c[t]=180+Math.abs(180*Math.atan(n[t]/h[t])/Math.PI):h[t]>=0&&n[t]<0&&(c[t]=270+Math.abs(180*Math.atan(n[t]/h[t])/Math.PI));for(let t=0;t<c.length;t++)for(let t=0;t<c.length-1;t++)e=c[t],s=n[t],i=h[t],e<c[t+1]&&(c[t]=c[t+1],n[t]=n[t+1],h[t]=h[t+1],c[t+1]=e,n[t+1]=s,h[t+1]=i);let y=0,u=0;for(let t=0;t<n.length;t++)t!==n.length-1?(y+=n[t]*h[t+1],u+=h[t]*n[t+1]):(y+=n[t]*h[0],u+=h[t]*n[0]);return(y-u)/2*20}static ScalarRev_V_S_OUT(t,e,s){return s.x=e*t.x,s.y=e*t.y,s.z=e*t.z,s}static Add(t,e){return new i(t.x+e.x,t.y+e.y,t.z+e.z)}static Sub(t,e){return new i(t.x-e.x,t.y-e.y,t.z-e.z)}static Clone(t){return i.DeepCopy(t)}static ZAxis(){return new i(0,0,1)}static YAxis(){return new i(0,1,0)}static Zero(){return new i(0,0,0)}static Origin(){return new i(0,0,0)}static Plus(t,e){return new i(t.x+e.x,t.y+e.y,t.z+e.z)}static Scale(t,e){return new i(t.x*e,t.y*e,t.z*e)}static MidVec(t,e){return new i(t.x+(e.x-t.x)*.5,t.y+(e.y-t.y)*.5,t.z+(e.z-t.z)*.5)}static CompareTwoVectors(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}static CompareTwoVectorsByGeoPos(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return t.long.toFixed(s)===e.long.toFixed(s)&&t.lat.toFixed(s)===e.lat.toFixed(s)}static Length(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}static Normalize(t){let e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return e<1e-4?new i(t.x,t.y,t.z):new i(t.x/e,t.y/e,t.z/e)}static GetArea(t){let e=0;for(let s=0,i=t.length;s<i;s++){let i=t[s].x,n=t[s===t.length-1?0:s+1].y,h=t[s===t.length-1?0:s+1].x,r=t[s].y;e+=i*n*.5,e-=h*r*.5}return Math.abs(e)}static GetAreaByLongLat(t){let e=0;for(let s=0;s<t.length-1;s++)e+=(t[s].long-t[s+1].long)*(t[s].lat+t[s+1].lat);return .5*e}static GetGeoArea(t){let e=0;for(let s=0;s<t.length-1;s++)e+=(t[s].x-t[s+1].x)*(t[s].y+t[s+1].y);return Math.abs(e*=.5)}static GetGeoAreaBbyLongLat(t){let e=0;for(let s=0;s<t.length-1;s++)e+=(t[s].long-t[s+1].long)*(t[s].lat+t[s+1].lat);return Math.abs(e*=.5)}static GetIndexByShortDistance(t,e){let s=-1,n=Number.MAX_SAFE_INTEGER;for(let h=0;h<e.length;++h){let r=i.Distance(t,e[h]);r<n&&(n=r,s=h)}return[s,n]}static Distance(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}static DistanceByArray(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2]))}static Distance2(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z)}static DotProduct(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static CrossProduct(t,e){return new i(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)}static DivideByNum(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=[],h=(e.x-t.x)/s,r=(e.y-t.y)/s,a=(e.z-t.z)/s;for(let e=0;e<s;++e){let s=t.x+h*e,o=t.y+r*e,l=t.z+a*e;n.push(new i(s,o,l))}return n}static KMeterFromGeoGPSPos(t,e){let s=e.lat*Math.PI/180-t.lat*Math.PI/180,i=e.long*Math.PI/180-t.long*Math.PI/180,n=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*6378.137}static KMeterByTwoGeoPos(t,e,s,n){let h=new i(0,0);h.long=t,h.lat=e;let r=new i(0,0);return r.long=s,r.lat=n,i.KMeterFromGeoGPSPos(h,r)}static KMeterFromGPSPos(t,e){let s=e.y*Math.PI/180-t.y*Math.PI/180,i=e.x*Math.PI/180-t.x*Math.PI/180,n=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.y*Math.PI/180)*Math.cos(e.y*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*6378.137}static Get1KM_Long_ByGeoUnit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=new i(t,e,0),n=0;for(let t=0;t<1e4;++t){let t=i.KMeterFromGPSPos(s,new i(s.x+n,s.y,s.z));if(1<t&&t<1.001)return s.x+n;n+=1e-5}return -1}static Get1KM_lat_ByGeoUnit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=new i(t,e,0),n=0;for(let t=0;t<1e4;++t){let t=i.KMeterFromGPSPos(s,new i(s.x,s.y+n,s.z));if(1<t&&t<1.001)return s.y+n;n+=1e-5}return -1}static Get1KM_Lat_Long_GeoUnit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=i.Get1KM_Long_ByGeoUnit(t,e),n=i.Get1KM_lat_ByGeoUnit(t,e);return new i(s,n,0)}static CalculateFalloff(t,e,s,n){let h=i.Sub(e,t).Length();return s*Math.exp(-n*h*h)*h}static Attractor(t,e,s,n){let h=i.Sub(e,t),r=h.Length();return h.Unitize(),h.Mult(s*Math.exp(-n*r*r))}static Explosion(t,e,s,n){let h=i.Sub(e,t),r=h.Length();return h.Unitize(),h.Mult(-(s*Math.exp(-n*r*r)))}static Rotor(t,e,s,n){return i.Sub(e,t).Unitize(),i.Origin()}static GetAngleBetween(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}static GetCosAngleByTwoVectors(t,e){return i.DotProduct(i.Normalize(t),i.Normalize(e))}static GetAngleByTwoVectorsRadian(t,e){return Math.acos(i.GetCosAngleByTwoVectors(t,e))}static GetAngleByTwoVectors(t,e){return 180*i.GetAngleByTwoVectorsRadian(t,e)/Math.PI}static GetRotationByWorldCoodinate(t){let e=new i(1,0,0);return i.GetAngleByTwoVectors(e,t)}static GetRotationByWorldCoodinateByTwo(t,e){let s=e.Sub(t),n=new i(1,0,0);return s.y>0?-1*i.GetAngleByTwoVectors(n,s):i.GetAngleByTwoVectors(n,s)}static ComputeDotProducts(t){let e=[];for(let s=0;s<t.length;++s)if(s<t.length-1){let n=new i(t[s].x,t[s].y,t[s].z),h=new i(t[s+1].x,t[s+1].y,t[s+1].z);h.x-=n.x,h.y-=n.y,h.z-=n.z;let r=i.DotProduct(new i(1,0,0),i.Normalize(h));e.push(r)}else{let n=new i(t[s].x,t[s].y,t[s].z),h=new i(t[0].x,t[0].y,t[0].z);h.x-=n.x,h.y-=n.y,h.z-=n.z;let r=i.DotProduct(new i(1,0,0),i.Normalize(h));e.push(r)}return e}static ComputeDotProductsWithCenter(t){let e=i.GetCenterVecFromVecs(t),s=[];for(let n=0;n<t.length;++n){let h,r;n<t.length-1?(h=new i(t[n].x-e.x,t[n].y-e.y,t[n].z-e.z),r=new i(t[n+1].x-e.x,t[n+1].y-e.y,t[n+1].z-e.z)):(h=new i(t[n].x-e.x,t[n].y-e.y,t[n].z-e.z),r=new i(t[0].x-e.x,t[0].y-e.y,t[0].z-e.z));let a=i.DotProduct(i.Normalize(h),i.Normalize(r));s.push(a)}return s}static GetXYDimForCircle(t){let e=i.GetCenterVecFromVecs(t),s=0,n=0,h=t.length;for(let i=0;i<h;++i)s+=Math.abs(t[i].x-e.x),n+=Math.abs(t[i].y-e.y);return[s/(h+=2),n/h]}static DistanceMouseWithTwoVecs(t,e,s){e.x+=1e-5,e.y+=1e-5;let n=i.GetBoundingVecs(e,s),h=i.GetCloseVec(e,s,t.x,t.y,n,!0);return i.Distance(t,h)}static GetCloseVec(t,e,s,n,h){let r=!(arguments.length>5)||void 0===arguments[5]||arguments[5],a=new i(t.x,t.y,t.z),o=new i(e.x,e.y,e.z).Sub(a),l=new i(s,n,0).Sub(a);o.Unitize();let c=a.Add(o.Mult(l.DotProduct(o)));return r?i.IsInsideOfVecs(c,h)?c:t.Distance(c)<e.Distance(c)?new i(t.x,t.y,t.z):new i(e.x,e.y,e.z):c}static GetBoundingVecs(t,e){let s=[],n=0,h=0,r=new i(n=t.x<e.x?t.x:e.x,t.y<e.y?t.y:e.y,t.z<e.z?t.z:e.z),a=new i(n=t.x>e.x?t.x:e.x,t.y>e.y?t.y:e.y,t.z>e.z?t.z:e.z);return s.push(new i(r.x,r.y,r.z)),s.push(new i(a.x,r.y,r.z)),s.push(new i(a.x,a.y,r.z)),s.push(new i(r.x,a.y,r.z)),s}static GetBoundaryByVecWidthHeight(t,e,s){let n=[];return n.push(new i(t.x,t.y,t.z)),n.push(new i(t.x+e,t.y,t.z)),n.push(new i(t.x+e,t.y+s,t.z)),n.push(new i(t.x,t.y+s,t.z)),n}static GetBoundingByVecs(t){let e=[],s=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let e=0;e<t.length;++e)s>t[e].x&&(s=t[e].x),n>t[e].y&&(n=t[e].y),h>t[e].z&&(h=t[e].z),r<t[e].x&&(r=t[e].x),a<t[e].y&&(a=t[e].y),o<t[e].z&&(o=t[e].z);return e.push(new i(s,n,h)),e.push(new i(r,a,o)),e}static GetMinMaxVecFromVecs(t){let e=Number.MAX_VALUE,s=Number.MAX_VALUE,n=Number.MAX_VALUE,h=Number.MIN_VALUE,r=Number.MIN_VALUE,a=Number.MIN_VALUE;for(let i of t)e>i.x&&(e=i.x),s>i.y&&(s=i.y),n>i.z&&(n=i.z),h<i.x&&(h=i.x),r<i.y&&(r=i.y),a<i.z&&(a=i.z);return[new i(e,s,n),new i(h,r,a)]}static RemoveVecsWithinDis(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=[];for(let s=0;s<t.length-1;++s){let n=t[s];if(!1!==n.d)for(let h=s+1;h<t.length;++h)i.Distance(n,t[h])<e&&(t[h].d=!1)}for(let e=0;e<t.length;++e)!0===t[e].d&&s.push(t[e]);return s}static IsInsideOfVecsWtihVecs(t,e){for(let s=0;s<t.length;s++)if(!i.IsInsideOfVecs(t[s],e))return!1;return!0}static IsInsideOfVecWithHeight(t,e,s,i){return e.x<t.x&&t.x<e.x+s&&e.y<t.y&&t.y<e.y+i}static orientation(t,e,s){let i=(e.y-t.y)*(s.x-e.x)-(e.x-t.x)*(s.y-e.y);return 0===i?0:i>0?1:2}static onSegment(t,e,s){return!!(e.x<=Math.max(t.x,s.x)&&e.x>=Math.min(t.x,s.x)&&e.y<=Math.max(t.y,s.y)&&e.y>=Math.min(t.y,s.y))}static isIntersect(t,e,s,i){let n=this.orientation(t,e,s),h=this.orientation(t,e,i),r=this.orientation(s,i,t),a=this.orientation(s,i,e);return!!(n!==h&&r!==a||0===n&&this.onSegment(t,s,e)||0===h&&this.onSegment(t,i,e)||0===r&&this.onSegment(s,t,i)||0===a&&this.onSegment(s,e,i))}static IsInsideOfVecs(t,e){let s=t.x,i=t.y,n=!1;for(let t=0,h=e.length-1;t<e.length;h=t++){let r=e[t].x,a=e[t].y,o=e[h].x,l=e[h].y;a>i!=l>i&&s<(o-r)*(i-a)/(l-a)+r&&(n=!n)}return n}static IsInsideOfVecsByArray(t,e){let s=t[0],i=t[1],n=!1;for(let t=0,h=e.length-1;t<e.length;h=t++){let r=e[t][0],a=e[t][1],o=e[h][0],l=e[h][1];a>i!=l>i&&s<(o-r)*(i-a)/(l-a)+r&&(n=!n)}return n}static IsInsideOfVecsByCrossing(t,e,s,n){return!!(this.IsInsideOfVecs(new i(t.x-.5*e,t.y-.5*s),n)||this.IsInsideOfVecs(new i(t.x+.5*e,t.y-.5*s),n)||this.IsInsideOfVecs(new i(t.x+.5*e,t.y+.5*s),n)||this.IsInsideOfVecs(new i(t.x-.5*e,t.y+.5*s),n))}static IsInsideOfVecsByConcaveHull(t,e){}static IsInsideOfVecsByConvexHull(t,e){return e=i.ConvexHull(e),!!i.IsInsideOfVecs(t,e)}static ConvexHull(t){t.sort(function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x});let e=[];for(let s=0;s<t.length;s++){for(;e.length>=2&&0>=i.Cross(e[e.length-2],e[e.length-1],t[s]);)e.pop();e.push(t[s])}let s=[];for(let e=t.length-1;e>=0;e--){for(;s.length>=2&&0>=i.Cross(s[s.length-2],s[s.length-1],t[e]);)s.pop();s.push(t[e])}s.pop(),e.pop();for(let t=0;t<s.length;++t)e.push(s[t]);return e}static Cross(t,e,s){return(e.x-t.x)*(s.y-t.y)-(e.y-t.y)*(s.x-t.x)}static Cross_A_B_OUT(t,e,s){let i=t.x,n=t.y,h=t.z,r=e.x,a=e.y,o=e.z;return s.x=n*o-h*a,s.y=h*r-i*o,s.z=i*a-n*r,s}static CheckBoundIntersection(t,e,s){for(let i=0;i<t.length-1;++i)if(this.CheckLineIntersection(t[i],t[i+1],e,s))return!0;return!1}static CheckLineIntersection(t,e,s,n){let h=0,r=0,a=0,o=0,l=0,c=!1,y=!1;h=(n.y-s.y)*(e.x-t.x)-(n.x-s.x)*(e.y-t.y);let u=new i(0,0,0);return 0===h?void 0:(r=t.y-s.y,a=t.x-s.x,o=(n.x-s.x)*r-(n.y-s.y)*a,l=(e.x-t.x)*r-(e.y-t.y)*a,r=o/h,a=l/h,u.x=t.x+r*(e.x-t.x),u.y=t.y+r*(e.y-t.y),r>0&&r<1&&(c=!0),a>0&&a<1&&(y=!0),c&&y)?u:void 0}static CheckConvexity(t){let e,s,n;if(t.length<3)return!1;let h=0;for(let r=0;r<t.length;r++){e=t[r];let a=t[(r+1)%t.length];if(s=new i(a.x-e.x,a.y-e.y,0),n=t[(r+2)%t.length],0===r)h=n.x*s.y-n.y*s.x+s.x*e.y-s.y*e.x;else{let t=n.x*s.y-n.y*s.x+s.x*e.y-s.y*e.x;if(t>0&&h<0||t<0&&h>0)return!1}}return!0}static MoveVecs(t,e){let s=[];for(let n=0;n<t.length;++n)s.push(i.MoveVec(t[n],e));return s}static MoveVec(t,e){return new i(t.x+e.x,t.y+e.y,t.z+e.z)}static RotateVecsLoal(t,e){let s=i.GetCenterVecFromVecs(t),n=new i(-s.x,-s.y,-s.z),h=i.MoveVecs(t,n);return h=i.RotateVecs(h,e),h=i.MoveVecs(h,s)}static RotateVecs(t,e){let s=[];for(let n=0;n<t.length;++n)s.push(i.RotateVec(t[n],e));return s}static Reflect(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.x*=-1,t.y*=-1,t.z*=-1;let n=this.DotProduct(t,e);return new i((2*n*e.x-t.x)*s,(2*n*e.y-t.y)*s,(2*n*e.z-t.z)*s)}static RotateVec(t,e){let s=Math.cos(.017453292519943278*e),n=Math.sin(.017453292519943278*e);return new i(t.x*s-t.y*n,t.x*n+t.y*s,t.z)}static GetCenterVecFromVecs(t){let e=new i(0,0,0);for(let s=0,i=t.length;s<i;++s)e.Add(t[s]);return e.Mult(1/t.length),e}static MidVecGeo(t,e){return new i(t.x+(e.x+t.x)*.5,t.y+(e.y+t.y)*.5,t.z+(e.z+t.z)*.5)}static GetVecFromIntersection(t){let e=[];for(let s=0;s<t.length-1;++s)for(let n=s+1;n<t.length-1;++n){let h=i.CheckLineIntersection(t[s],t[s+1],t[n],t[n+1]);h&&e.push(h)}if(0!==e.length)return e}static between(t,e,s){return t-i.eps<=e&&e<=s+i.eps}static segment_intersection(t,e,s,n){var h=((t.x*e.y-t.y*e.x)*(s.x-n.x)-(t.x-e.x)*(s.x*n.y-s.y*n.x))/((t.x-e.x)*(s.y-n.y)-(t.y-e.y)*(s.x-n.x)),r=((t.x*e.y-t.y*e.x)*(s.y-n.y)-(t.y-e.y)*(s.x*n.y-s.y*n.x))/((t.x-e.x)*(s.y-n.y)-(t.y-e.y)*(s.x-n.x));if(isNaN(h)||isNaN(r))return!1;if(t.x>=e.x){if(!i.between(e.x,h,t.x))return!1}else if(!i.between(t.x,h,e.x))return!1;if(t.y>=e.y){if(!i.between(e.y,r,t.y))return!1}else if(!i.between(t.y,r,e.y))return!1;if(s.x>=n.x){if(!i.between(n.x,h,s.x))return!1}else if(!i.between(s.x,h,n.x))return!1;if(s.y>=n.y){if(!i.between(n.y,r,s.y))return!1}else if(!i.between(s.y,r,n.y))return!1;return new i(h,r)}Set(t,e,s){return this.x=t,this.y=e,this.z=s,new i(this.x,this.y,this.z)}Scale(t){return this.x*=t,this.y*=t,this.z*=t,new i(this.x,this.y,this.z)}Mult(t){return this.x*=t,this.y*=t,this.z*=t,new i(this.x,this.y,this.z)}DivByVal(t){return this.x/=t,this.y/=t,this.z/=t,new i(this.x,this.y,this.z)}DivByVec(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,new i(this.x,this.y,this.z)}Add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,new i(this.x,this.y,this.z)}Sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,new i(this.x,this.y,this.z)}Negate(){return this.x*=-1,this.y*=-1,this.z*=-1,new i(this.x,this.y,this.z)}Equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}Clone(){let t=new i(this.x,this.y,this.z);return t.long=this.long,t.lat=this.lat,t.ele=this.ele,t.proX=this.proX,t.proY=this.proY,t.proZ=this.proZ,t}Length(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-5?1e-5:t}Unitize(){return this.Normalize()}IsOverlap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return this.Distance(t)<e}Normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-4||(this.x=this.x/t,this.y=this.y/t,this.z=this.z/t),this}Distance(t){return i.Distance(new i(this.x,this.y,this.z),t)}DistanceByArray(t){return i.DistanceByArray([this.x,this.y,this.z],t)}Distance2(t){return i.Distance2(new i(this.x,this.y,this.z),t)}DotProduct(t){return i.DotProduct(new i(this.x,this.y,this.z),t)}CrossProduct(t){return i.CrossProduct(new i(this.x,this.y,this.z),t)}SquareLength(){let t=i.Length(new i(this.x,this.y,this.z));return t*t}FadeExp(t,e){let s=new i(this.x,this.y,this.z);return s.Sub(t),Math.exp(-e*s.SquareLength())}GetAngle(){return Math.atan2(this.y,this.x)}GetAngleDegree(){return 180*this.GetAngle()/Math.PI}ToJSON(){}ToString(){return"x: "+this.x.toFixed(3).toString()+" , y: "+this.y.toFixed(3).toString()+", z: "+this.z.toFixed(3).toString()}ToFloat32Array(){return new Float32Array([this.x,this.y,this.z])}constructor(t,e,s=0){this.x=0,this.y=0,this.z=0,this.w=0,this.long=0,this.lat=0,this.ele=0,this.proX=0,this.proY=0,this.proZ=0,this.alt=0,this.d=!0,this.isModified=!1,this.color="#000000",this.isVisited=!1,this.x=t,this.y=e,this.z=s}}i.eps=1e-7,i.origin=new i(0,0,0);class n{keyDownHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!0:("Left"===t.key||"ArrowLeft"===t.key)&&(this.leftPressed=!0)}keyUpHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!1:("Left"===t.key||"ArrowLeft"===t.key)&&(this.leftPressed=!1)}collisionDetection(){for(let t=0;t<this.brickColumnCount;t++)for(let e=0;e<this.brickRowCount;e++){let s=this.bricks[t][e];1===s.status&&this.ball.pos.x>s.pos.x&&this.ball.pos.x<s.pos.x+this.brickWidth&&this.ball.pos.y>s.pos.y&&this.ball.pos.y<s.pos.y+this.brickHeight&&(this.dy=-this.dy,s.status=0)}}drawPaddle(t){t.beginPath(),t.rect(this.paddleX,this.canvas.height-this.paddleHeight,this.paddleWidth,this.paddleHeight),t.fillStyle="ff0000",t.fill(),t.closePath()}RenderBricks(t){for(var e=0;e<this.brickColumnCount;e++)for(var s=0;s<this.brickRowCount;s++)if(1===this.bricks[e][s].status){var i=e*(this.brickWidth+this.brickPadding)+this.brickOffsetLeft,n=s*(this.brickHeight+this.brickPadding)+this.brickOffsetTop;this.bricks[e][s].pos.x=i,this.bricks[e][s].pos.y=n,t.beginPath(),t.rect(i,n,this.brickWidth,this.brickHeight),t.fillStyle="#ff0000",t.fill(),t.closePath()}}Render(t){this.RenderBricks(t),this.ball.Render(t),this.drawPaddle(t),this.collisionDetection(),(this.ball.pos.x+this.dx>this.canvas.width-this.ball.r||this.ball.pos.x+this.dx<this.ball.r)&&(this.dx=-this.dx),this.ball.pos.y+this.dy<this.ball.r?this.dy=-this.dy:this.ball.pos.y+this.dy>this.canvas.height-this.ball.r&&this.ball.pos.x>this.paddleX&&this.ball.pos.x<this.paddleX+this.paddleWidth&&this.ball.pos.y===this.ball.pos.y-this.paddleHeight&&(this.dy=-this.dy),this.rightPressed&&this.paddleX<this.canvas.width-this.paddleWidth?this.paddleX+=7:this.leftPressed&&this.paddleX>0&&(this.paddleX-=7),this.ball.pos.x+=this.dx,this.ball.pos.y+=this.dy}constructor(t){this.bricks=[],this.dx=2,this.dy=-2,this.paddleHeight=10,this.paddleWidth=75,this.paddleX=10,this.rightPressed=!1,this.leftPressed=!1,this.brickRowCount=3,this.brickColumnCount=5,this.brickWidth=75,this.brickHeight=20,this.brickPadding=10,this.brickOffsetTop=30,this.brickOffsetLeft=30,this.BlockSystem=t,this.canvas=this.BlockSystem.CanvasCore.canvas,this.paddleX=(this.canvas.width-this.paddleWidth)/2,this.ball=new r(this.canvas.width/2,this.canvas.height-30),this.bricks=[];for(var e=0;e<this.brickColumnCount;e++){this.bricks[e]=[];for(var s=0;s<this.brickRowCount;s++)this.bricks[e][s]=new h(0,0,1)}document.onkeydown=t=>this.keyDownHandler(t),document.onkeyup=t=>this.keyUpHandler(t)}}class h{constructor(t,e,s=1){this.pos=new i(t,e),this.status=s}}class r{Render(t){t.beginPath(),t.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),t.fillStyle="#ff0000",t.fill(),t.closePath()}constructor(t,e){this.r=10,this.pos=new i(t,e)}}var a=s(8483);class o{InitCanvas(){let t=document.createElement("div");if(!t)return;this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);let e=document.createElement("div");if(!e)return;this.divCanvas=e,this.divLocalMain.append(e);let s=document.createElement("canvas");if(s){this.canvas=s,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";let t=this.canvas.getContext("2d");t&&(this.ctx=t,this.InitUI(),this.Init())}}InitUI(){let t=document.createElement("div");t&&(this.divUI=t,this.divLocalMain.append(t),this.divUI.style.marginLeft="10px",this.divUI.style.width="100%")}Init(){this.ctx.scale(1,1),this.EventBind(),this.Loop()}EventBind(){this.canvas.onclick=t=>{this.prevent=!1,this.timer=setTimeout(()=>{if(!this.prevent){if(!this.click)return;this.MouseClick(t)}this.prevent=!1},this.delay)},this.canvas.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},this.canvas.addEventListener("wheel",t=>this.MouseWheel(t,t.deltaY)),this.canvas.onmousedown=t=>{this.click=!0,this.pressed=!0,this.MouseDown(t)},this.canvas.onmouseup=t=>{this.pressed=!1,this.MouseUp(t)},this.canvas.onmousemove=t=>{this.pressed&&(this.click=!1,this.MouseDrag(t)),this.MouseMove(t)},window.onresize=t=>this.Resize(t)}Resize(t){}Loop(){requestAnimationFrame(()=>{this.Loop()}),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)}Render(t){}MouseClick(t){}MouseDoubleClick(t){}MouseDown(t){}MouseUp(t){}MouseMove(t){}MouseDrag(t){}MouseWheel(t,e){}constructor(t,e=500,s=300){this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.blockSystem=t,this.width=e,this.height=s;let i=document.getElementById(t.id);if(!i)return;this.host=i,this.InitCanvas()}}class l{Init(){this.CanvasCore.Render=t=>this.Render(t),this.CanvasCore.MouseDown=t=>this.MouseDown(t),this.CanvasCore.MouseClick=t=>this.MouseClick(t),this.CanvasCore.MouseDoubleClick=t=>this.MouseDoubleClick(t),this.CanvasCore.MouseUp=t=>this.MouseUp(t),this.CanvasCore.MouseMove=t=>this.MouseMove(t),this.CanvasCore.MouseDrag=t=>this.MouseDrag(t)}InitGraph(){this.blockGame=new n(this)}Render(t){this.blockGame.Render(t)}MouseDown(t){this.m.x=(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width)*1,this.m.y=(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height)*1}MouseUp(t){}MouseMove(t){}MouseDrag(t){}MouseClick(t){}MouseDoubleClick(t){}constructor(t){this.t=.9,this.m=new a.h9(0,0,0),this.id=t,this.CanvasCore=new o(this),this.Init(),this.InitGraph()}}class c{constructor(t){new l(t)}}class y{static Init(t){new y(t).Dummy()}Dummy(){}constructor(t="SandBox"){let e=document.getElementById(t),s=document.createElement("a");s.textContent="https://namjulee.github.io/njs-lab-public/njslab-legacy/?demo=26",s.href="https://namjulee.github.io/njs-lab-public/njslab-legacy/?demo=26",s.target="_blank",e.appendChild(s),e&&(this.host=e,this.host.style.overflow="auto"),this.implementation=new c(t)}}class u{destroy(){try{for(;void 0!==this.divHost&&void 0!==this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}catch(t){console.debug(t)}}constructor(t,e=0){this.divHost=document.getElementById(t);let s=document.createElement("div");s.id="block-game",s.style.width="100%",s.style.height="100%",this.divHost.appendChild(s),y.Init(s.id)}}}}]);
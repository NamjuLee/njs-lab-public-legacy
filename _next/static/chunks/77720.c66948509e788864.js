"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77720],{76320:function(e,t,n){n.d(t,{g_:function(){return te},Ue:function(){return C},YL:function(){return tt},fM:function(){return tn},iw:function(){return E},gJ:function(){return tr}});var r,a,s,i,o,u={};n.r(u),n.d(u,{json:function(){return B}});var l={};n.r(l),n.d(l,{json:function(){return V}});var p={};n.r(p),n.d(p,{json:function(){return W}});var h={};n.r(h),n.d(h,{json:function(){return H}});var c={};n.r(c),n.d(c,{json:function(){return j}});var d={};n.r(d),n.d(d,{json:function(){return U}});var m={};n.r(m),n.d(m,{json:function(){return q}});var f={};n.r(f),n.d(f,{json:function(){return G}});var g={};n.r(g),n.d(g,{json:function(){return Q}});var y={};n.r(y),n.d(y,{json:function(){return X}});var b={};n.r(b),n.d(b,{json:function(){return K}});var N={};n.r(N),n.d(N,{json:function(){return Z}});var x={};n.r(x),n.d(x,{json:function(){return J}});var k={};n.r(k),n.d(k,{json:function(){return Y}});var v={};n.r(v),n.d(v,{json:function(){return ee}});var w={};n.r(w),n.d(w,{json:function(){return et}});var S={};n.r(S),n.d(S,{json:function(){return en}});var T={};n.r(T),n.d(T,{json:function(){return er}});var I={};n.r(I),n.d(I,{json:function(){return ea}});var A={};n.r(A),n.d(A,{OP_SCOPE_SUFFIX:function(){return ev.zvA},abs:function(){return ev.WnP},acos:function(){return ev.Khb},acosh:function(){return ev.__u},add:function(){return ev.IHx},addN:function(){return ev.QBD},all:function(){return ev.$6P},any:function(){return ev.YjB},argMax:function(){return ev.NqF},argMin:function(){return ev.vHJ},asin:function(){return ev.ZRM},asinh:function(){return ev.VfV},atan:function(){return ev.z4N},atan2:function(){return ev.fvJ},atanh:function(){return ev.C80},avgPool:function(){return ev.wS1},avgPool3d:function(){return ev.uR5},basicLSTMCell:function(){return ev.zEQ},batchNorm:function(){return ev.tgs},batchNorm2d:function(){return ev.Dxk},batchNorm3d:function(){return ev.JY5},batchNorm4d:function(){return ev.p3b},batchToSpaceND:function(){return ev.E4h},bincount:function(){return ev.yE8},bitwiseAnd:function(){return ev.ycw},booleanMaskAsync:function(){return ev.anm},broadcastArgs:function(){return ev.XsQ},broadcastTo:function(){return ev.UFq},buffer:function(){return ev.f3b},cast:function(){return ev.pju},ceil:function(){return ev.mDi},clipByValue:function(){return ev.iUl},clone:function(){return ev.d9v},complex:function(){return ev.PYB},concat:function(){return ev.zoF},concat1d:function(){return ev.gME},concat2d:function(){return ev.Izb},concat3d:function(){return ev.MNy},concat4d:function(){return ev.ZaL},conv1d:function(){return ev.PAt},conv2d:function(){return ev.Tek},conv2dTranspose:function(){return ev.bc},conv3d:function(){return ev.pdZ},conv3dTranspose:function(){return ev.$QV},cos:function(){return ev.mCk},cosh:function(){return ev.f9Y},cosineWindow:function(){return ev.mew},cumprod:function(){return ev.$Gn},cumsum:function(){return ev.zbp},denseBincount:function(){return ev.ppE},depthToSpace:function(){return ev.nTT},depthwiseConv2d:function(){return ev.B10},diag:function(){return ev.Ka3},dilation2d:function(){return ev.WmZ},div:function(){return ev.hiC},divNoNan:function(){return ev.NTj},dot:function(){return ev.AKD},dropout:function(){return ev.rvX},einsum:function(){return ev.WYO},elu:function(){return ev.pyx},enclosingPowerOfTwo:function(){return ev.GRh},ensureShape:function(){return ev.EDe},equal:function(){return ev.DgJ},erf:function(){return ev.qNN},euclideanNorm:function(){return ev.d2q},exp:function(){return ev.Qqt},expandDims:function(){return ev.dt4},expm1:function(){return ev.t$B},eye:function(){return ev.iyy},fft:function(){return ev.kp_},fill:function(){return ev.hlL},floor:function(){return ev.GWj},floorDiv:function(){return ev.qPi},fused:function(){return ev.imm},gather:function(){return ev.Iqj},gatherND:function(){return ev.dbB},greater:function(){return ev.pjt},greaterEqual:function(){return ev.brS},ifft:function(){return ev.Sxn},imag:function(){return ev.asL},image:function(){return ev.BHj},inTopKAsync:function(){return ev.V3u},irfft:function(){return ev.wx0},isFinite:function(){return ev.xVT},isInf:function(){return ev.UWc},isNaN:function(){return ev.i2d},leakyRelu:function(){return ev.hi7},less:function(){return ev.d9m},lessEqual:function(){return ev.zN1},linalg:function(){return ev.$r2},linspace:function(){return ev.SX3},localResponseNormalization:function(){return ev.G9k},log:function(){return ev.cM7},log1p:function(){return ev.Krr},logSigmoid:function(){return ev.e_t},logSoftmax:function(){return ev.CmS},logSumExp:function(){return ev.l_t},logicalAnd:function(){return ev.HvI},logicalNot:function(){return ev.hJK},logicalOr:function(){return ev.K5V},logicalXor:function(){return ev.egP},losses:function(){return ev.MB5},lowerBound:function(){return ev.eab},matMul:function(){return ev.OI3},max:function(){return ev.Fp7},maxPool:function(){return ev._sB},maxPool3d:function(){return ev.YQQ},maxPoolWithArgmax:function(){return ev.Ip$},maximum:function(){return ev.gWQ},mean:function(){return ev.J69},meshgrid:function(){return ev.ry_},min:function(){return ev.VV$},minimum:function(){return ev.LTh},mirrorPad:function(){return ev.VdP},mod:function(){return ev.wQq},moments:function(){return ev.Gi7},movingAverage:function(){return ev.p_},mul:function(){return ev.dC7},multiRNNCell:function(){return ev.rq4},multinomial:function(){return ev.SJ_},neg:function(){return ev.W76},norm:function(){return ev.KOy},notEqual:function(){return ev.Quu},oneHot:function(){return ev.lfX},ones:function(){return ev.iUs},onesLike:function(){return ev.JpU},op:function(){return ev.op},outerProduct:function(){return ev.N2O},pad:function(){return ev.vku},pad1d:function(){return ev.pNR},pad2d:function(){return ev.koy},pad3d:function(){return ev.t1L},pad4d:function(){return ev.lGY},pool:function(){return ev.d_R},pow:function(){return ev.sQ3},prelu:function(){return ev.AL3},print:function(){return ev.S0v},prod:function(){return ev.WVs},raggedGather:function(){return ev.$gW},raggedRange:function(){return ev.VT$},raggedTensorToTensor:function(){return ev.N89},rand:function(){return ev.TN_},randomGamma:function(){return ev.wzB},randomNormal:function(){return ev.nGf},randomStandardNormal:function(){return ev.ruB},randomUniform:function(){return ev.LGj},randomUniformInt:function(){return ev.pe5},range:function(){return ev.w6H},real:function(){return ev.kwC},reciprocal:function(){return ev.M25},relu:function(){return ev.UYe},relu6:function(){return ev.btT},reshape:function(){return ev.XLQ},reverse:function(){return ev.GYS},reverse1d:function(){return ev.SDf},reverse2d:function(){return ev.diP},reverse3d:function(){return ev.sx7},reverse4d:function(){return ev.mG2},rfft:function(){return ev.QEs},round:function(){return ev.NMM},rsqrt:function(){return ev.bp0},scalar:function(){return ev.iD$},scatterND:function(){return ev.snQ},searchSorted:function(){return ev.zcT},selu:function(){return ev.U8D},separableConv2d:function(){return ev.U_I},setdiff1dAsync:function(){return ev.ODp},sigmoid:function(){return ev.XD2},sign:function(){return ev.Xxe},signal:function(){return ev.tdS},sin:function(){return ev.O$l},sinh:function(){return ev.R_K},slice:function(){return ev.tPi},slice1d:function(){return ev.jZU},slice2d:function(){return ev.SmN},slice3d:function(){return ev.CnO},slice4d:function(){return ev.p0P},softmax:function(){return ev.XAC},softplus:function(){return ev.Wvh},spaceToBatchND:function(){return ev.fBT},sparse:function(){return ev.rVs},sparseToDense:function(){return ev.ers},spectral:function(){return ev.uN7},split:function(){return ev.Vl2},sqrt:function(){return ev._b3},square:function(){return ev.h62},squaredDifference:function(){return ev.$i},squeeze:function(){return ev.L9e},stack:function(){return ev.knu},step:function(){return ev.Nbs},stridedSlice:function(){return ev.NXj},string:function(){return ev.Z_8},sub:function(){return ev.luU},sum:function(){return ev.Smz},tan:function(){return ev.ORZ},tanh:function(){return ev.AEp},tensor:function(){return ev.XeE},tensor1d:function(){return ev.RRF},tensor2d:function(){return ev.odF},tensor3d:function(){return ev.wOQ},tensor4d:function(){return ev.yXz},tensor5d:function(){return ev.Bfx},tensor6d:function(){return ev.xZs},tensorScatterUpdate:function(){return ev.Pg0},tile:function(){return ev.Gg6},topk:function(){return ev.hg7},transpose:function(){return ev.p4s},truncatedNormal:function(){return ev.Xu6},unique:function(){return ev.Two},unsortedSegmentSum:function(){return ev.pUJ},unstack:function(){return ev.HHK},upperBound:function(){return ev.GaM},variable:function(){return ev.VD$},where:function(){return ev.arb},whereAsync:function(){return ev.itS},zeros:function(){return ev.lls},zerosLike:function(){return ev.P84}});var D=n(94976);(0,D.env)().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),(r=i||(i={}))[r.DT_INVALID=0]="DT_INVALID",r[r.DT_FLOAT=1]="DT_FLOAT",r[r.DT_DOUBLE=2]="DT_DOUBLE",r[r.DT_INT32=3]="DT_INT32",r[r.DT_UINT8=4]="DT_UINT8",r[r.DT_INT16=5]="DT_INT16",r[r.DT_INT8=6]="DT_INT8",r[r.DT_STRING=7]="DT_STRING",r[r.DT_COMPLEX64=8]="DT_COMPLEX64",r[r.DT_INT64=9]="DT_INT64",r[r.DT_BOOL=10]="DT_BOOL",r[r.DT_QINT8=11]="DT_QINT8",r[r.DT_QUINT8=12]="DT_QUINT8",r[r.DT_QINT32=13]="DT_QINT32",r[r.DT_BFLOAT16=14]="DT_BFLOAT16",r[r.DT_QINT16=15]="DT_QINT16",r[r.DT_QUINT16=16]="DT_QUINT16",r[r.DT_UINT16=17]="DT_UINT16",r[r.DT_COMPLEX128=18]="DT_COMPLEX128",r[r.DT_HALF=19]="DT_HALF",r[r.DT_RESOURCE=20]="DT_RESOURCE",r[r.DT_VARIANT=21]="DT_VARIANT",r[r.DT_UINT32=22]="DT_UINT32",r[r.DT_UINT64=23]="DT_UINT64",r[r.DT_FLOAT_REF=101]="DT_FLOAT_REF",r[r.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",r[r.DT_INT32_REF=103]="DT_INT32_REF",r[r.DT_UINT8_REF=104]="DT_UINT8_REF",r[r.DT_INT16_REF=105]="DT_INT16_REF",r[r.DT_INT8_REF=106]="DT_INT8_REF",r[r.DT_STRING_REF=107]="DT_STRING_REF",r[r.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",r[r.DT_INT64_REF=109]="DT_INT64_REF",r[r.DT_BOOL_REF=110]="DT_BOOL_REF",r[r.DT_QINT8_REF=111]="DT_QINT8_REF",r[r.DT_QUINT8_REF=112]="DT_QUINT8_REF",r[r.DT_QINT32_REF=113]="DT_QINT32_REF",r[r.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",r[r.DT_QINT16_REF=115]="DT_QINT16_REF",r[r.DT_QUINT16_REF=116]="DT_QUINT16_REF",r[r.DT_UINT16_REF=117]="DT_UINT16_REF",r[r.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",r[r.DT_HALF_REF=119]="DT_HALF_REF",r[r.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",r[r.DT_VARIANT_REF=121]="DT_VARIANT_REF",r[r.DT_UINT32_REF=122]="DT_UINT32_REF",r[r.DT_UINT64_REF=123]="DT_UINT64_REF",(s=(a=o||(o={})).CheckpointFormatVersion||(a.CheckpointFormatVersion={}))[s.LEGACY=0]="LEGACY",s[s.V1=1]="V1",s[s.V2=2]="V2";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let F={};function E(e,t){F[e]={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t}}function C(e){delete F[e]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z(e,t,n,r,a){let s=t.inputParams[e];if(s&&void 0!==s.inputIndexStart){let e=s.inputIndexStart,i=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?e+1:s.inputIndexEnd,o=e<0?t.inputNames.length+e:e;if("tensor"===s.type)return M(t.inputNames[o],n,r,a);if("tensors"===s.type){let s=t.inputs.slice(e,i);return t.inputNames.slice(e,i).filter((e,t)=>{var n;return(null===(n=s[t])||void 0===n?void 0:n.op)!=="NoOp"}).map(e=>M(e,n,r,a))}let u=M(t.inputNames[o],n,r,a),l=u.dataSync();return"number"===s.type?l[0]:D.util.toNestedArray(u.shape,l)}let i=t.attrParams[e];return i&&i.value}function M(e,t,n,r){let[a,s]=$(e,n);if(null!=r){let e=r.getHashTableHandleByName(a);if(null!=e)return e}let i=n.currentContextIds.find(e=>!!t[L(a,e)]);return void 0!==i?t[L(a,i)][s]:void 0}function _(e,t,n){return t[L(e,n.currentContextId)]}function O(e,t){let[n,r,a]=$(e,t);return[L(n,t&&t.currentContextId),r,a]}function L(e,t){return t?`${e}-${t}`:e}function $(e,t){let n;if(""===e)return["",0,void 0];let r=null!=t&&null!=t.parseNodeNameCache;if(r){let n=t.parseNodeNameCache.get(e);if(null!=n)return n}let a=e.split(":");if(1===a.length)n=[e,0,void 0];else{let e=a[0],t=3===a.length?a[1]:void 0;n=[e,Number(a[a.length-1]),t]}return r&&t.parseNodeNameCache.set(e,n),n}function R(e,t,n){let r=z("pad",e,t,n);if("explicit"===r){r=z("explicitPaddings",e,t,n);let a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}return r}function P(e){return e.kept?e:(0,D.clone)(e)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let B=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],V=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],W=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],H=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],j=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],U=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],q=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],G=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Q=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],X=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],K=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Z=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],J=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Y=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],ee=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],et=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],en=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],er=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],ea=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var es=n(86300).Buffer;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ei{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[].concat(...[u,l,p,h,c,d,m,f,g,y,b,N,x,k,v,w,S,T,I].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){let n=e.node,r=[],a=[],s=[],i=n.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):(null==t.input||0===t.input.length)&&s.push(e[t.name]),e),{}),o=[],u=[],l={},p={};null!=t&&(l=this.mapSignatureEntries(t.inputs),p=this.mapSignatureEntries(t.outputs));let h=Object.keys(i);h.forEach(e=>{let t=i[e];t.inputNames.forEach((e,n)=>{let[r,,a]=O(e),s=i[r];if(null!=s.outputs){let e=s.outputs.indexOf(a);if(-1!==e){let a=`${r}:${e}`;t.inputNames[n]=a}}t.inputs.push(s),s.children.push(t)})}),0===Object.keys(p).length?h.forEach(e=>{let t=i[e];0===t.children.length&&u.push(t)}):Object.keys(p).forEach(e=>{let[t]=O(e),n=i[t];null!=n&&(n.signatureKey=p[e],u.push(n))}),Object.keys(l).length>0?Object.keys(l).forEach(e=>{let[t]=O(e),n=i[t];n&&(n.signatureKey=l[e],o.push(n))}):o=r;let c={};null!=e.library&&null!=e.library.function&&(c=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));let d={nodes:i,inputs:o,outputs:u,weights:a,placeholders:r,signature:t,functions:c};return s.length>0&&(d.initNodes=s),d}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){let t=F[e.op]||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});let n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.slice(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{let r;let a=n.type;switch(n.type){case"string":void 0===(r=eu(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=eu(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(r=eb(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=eb(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(r=ep(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(r=ep(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(r=ey(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=ey(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(r=el(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=el(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(r=ex(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=ex(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(r=eg(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=eg(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(r=eN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=eN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(r=ed(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=ed(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(r=em(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=em(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(r=ec(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=ec(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:r,type:a},t},{})),n}mapFunction(e){let t=e.nodeDef,n=[],r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));let a=[],s=[];e.signature.inputArg.forEach(e=>{let[t]=O(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:eh(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n}),Object.keys(r).forEach(e=>{let t=r[e];t.inputNames.forEach((e,n)=>{let[a,,s]=O(e),i=r[a];if(null!=i.outputs){let e=i.outputs.indexOf(s);if(-1!==e){let r=`${a}:${e}`;t.inputNames[n]=r}}t.inputs.push(i),i.children.push(t)})});let i=e.ret;e.signature.outputArg.forEach(e=>{let[t,n]=O(i[e.name]),a=r[t];null!=a&&(a.defaultOutput=n,s.push(a))});let o=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:s,weights:n,placeholders:[],signature:o}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function eo(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){let t=(0,D.env)().global;if(void 0!==t.atob)return t.atob(e);if(void 0!==es)return new es(e,"base64").toString();throw Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function eu(e,t,n,r=!1){let a=e[t];return null!=a?eo(a.s,r):n}function el(e,t,n){let r=e[t];return r?r.b:n}function ep(e,t,n){let r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function eh(e){switch("string"==typeof e&&(e=i[e]),e){case i.DT_FLOAT:case i.DT_HALF:return"float32";case i.DT_INT32:case i.DT_INT64:case i.DT_INT8:case i.DT_UINT8:return"int32";case i.DT_BOOL:return"bool";case i.DT_DOUBLE:return"float32";case i.DT_STRING:return"string";case i.DT_COMPLEX64:case i.DT_COMPLEX128:return"complex64";default:return null}}function ec(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function ed(e,t,n){let r=e[t];return r&&r.type?eh(r.type):n}function em(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>eh(e)):n}function ef(e){return e.unknownRank?void 0:null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function eg(e,t,n){let r=e[t];return r&&r.shape?ef(r.shape):n}function ey(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):n}function eb(e,t,n,r=!1){let a=e[t];return a&&a.list&&a.list.s?a.list.s.map(e=>eo(e,r)):n}function eN(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>ef(e)):n}function ex(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ek{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return M(e,this.tensorMap,this.context)}getAttr(e,t){let n=this.node.rawAttrs[e];if(null!=n.tensor)return M(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return ep(this.node.rawAttrs,e,t);if(null!=n.s)return eu(this.node.rawAttrs,e,t);if(null!=n.b)return el(this.node.rawAttrs,e,t);if(null!=n.shape)return eg(this.node.rawAttrs,e,t);if(null!=n.type)return ed(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return ey(this.node.rawAttrs,e,t);if(null!=n.list.s)return eb(this.node.rawAttrs,e,t);if(null!=n.list.shape)return eN(this.node.rawAttrs,e,t);if(null!=n.list.b)return ex(this.node.rawAttrs,e,t);if(null!=n.list.type)return em(this.node.rawAttrs,e,t)}return t}}var ev=n(82487);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ew=(e,t,n,r=A)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(z("a",e,t,n),z("b",e,t,n))];case"AddN":return[r.addN(z("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(z("a",e,t,n),z("b",e,t,n))];case"Mul":return[r.mul(z("a",e,t,n),z("b",e,t,n))];case"RealDiv":case"Div":return[r.div(z("a",e,t,n),z("b",e,t,n))];case"DivNoNan":return[r.divNoNan(z("a",e,t,n),z("b",e,t,n))];case"FloorDiv":return[r.floorDiv(z("a",e,t,n),z("b",e,t,n))];case"Sub":return[r.sub(z("a",e,t,n),z("b",e,t,n))];case"Minimum":return[r.minimum(z("a",e,t,n),z("b",e,t,n))];case"Maximum":return[r.maximum(z("a",e,t,n),z("b",e,t,n))];case"Pow":return[r.pow(z("a",e,t,n),z("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(z("a",e,t,n),z("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},eS=(e,t,n,r=A)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(z("x",e,t,n))];case"Acos":return[r.acos(z("x",e,t,n))];case"Acosh":return[r.acosh(z("x",e,t,n))];case"Asin":return[r.asin(z("x",e,t,n))];case"Asinh":return[r.asinh(z("x",e,t,n))];case"Atan":return[r.atan(z("x",e,t,n))];case"Atan2":return[r.atan2(z("x",e,t,n),z("y",e,t,n))];case"Atanh":return[r.atanh(z("x",e,t,n))];case"Ceil":return[r.ceil(z("x",e,t,n))];case"Complex":return[r.complex(z("real",e,t,n),z("imag",e,t,n))];case"Cos":return[r.cos(z("x",e,t,n))];case"Cosh":return[r.cosh(z("x",e,t,n))];case"Elu":return[r.elu(z("x",e,t,n))];case"Erf":return[r.erf(z("x",e,t,n))];case"Exp":return[r.exp(z("x",e,t,n))];case"Expm1":return[r.expm1(z("x",e,t,n))];case"Floor":return[r.floor(z("x",e,t,n))];case"Log":return[r.log(z("x",e,t,n))];case"Log1p":return[r.log1p(z("x",e,t,n))];case"Imag":return[r.imag(z("x",e,t,n))];case"Neg":return[r.neg(z("x",e,t,n))];case"Reciprocal":return[r.reciprocal(z("x",e,t,n))];case"Real":return[r.real(z("x",e,t,n))];case"Relu":return[r.relu(z("x",e,t,n))];case"Round":return[r.round(z("x",e,t,n))];case"Selu":return[r.selu(z("x",e,t,n))];case"Sigmoid":return[r.sigmoid(z("x",e,t,n))];case"Sin":return[r.sin(z("x",e,t,n))];case"Sign":return[r.sign(z("x",e,t,n))];case"Sinh":return[r.sinh(z("x",e,t,n))];case"Softplus":return[r.softplus(z("x",e,t,n))];case"Sqrt":return[r.sqrt(z("x",e,t,n))];case"Square":return[r.square(z("x",e,t,n))];case"Tanh":return[r.tanh(z("x",e,t,n))];case"Tan":return[r.tan(z("x",e,t,n))];case"ClipByValue":return[r.clipByValue(z("x",e,t,n),z("clipValueMin",e,t,n),z("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(z("x",e,t,n))];case"Rsqrt":return[r.rsqrt(M(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(z("x",e,t,n),z("alpha",e,t,n))];case"Prelu":return[r.prelu(z("x",e,t,n),z("alpha",e,t,n))];case"IsNan":return[r.isNaN(M(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(M(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(M(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){D.util.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){let a=e[r],s=t[r];D.util.assert(a<0||s<0||a===s,()=>n+` Shapes ${e} and ${t} must match`)}}}function eI(e){return!("number"==typeof e||e.some(e=>e<0))}function eA(e,t,n){let r=eD(e,n),a=!eI(r);if(a&&0===t.length)throw Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&t.forEach(e=>{r=eD(e.shape,r)}),!eI(r))throw Error(`Non-fully-defined elementShape: ${r}`);return r}function eD(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let n=[];for(let r=0;r<e.length;++r){let a=e[r],s=t[r];if(a>=0&&s>=0&&a!==s)throw Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=a>=0?a:s}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eF{constructor(e,t,n,r,a,s,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=s,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=(0,D.scalar)(0),(0,D.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let t=this.tensors[e];if(t.cleared)throw Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=t.shape),eT(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,(0,D.keep)(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return(0,D.tensor)([],[0].concat(this.elementShape));let n=this.readMany(e);return eT(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),(0,D.stack)(n,0)}concat(e){if(e&&e!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return(0,D.tensor)([],[0].concat(this.elementShape));let t=[];for(let e=0;e<this.size();e++)t.push(e);let n=this.readMany(t);return eT(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),(0,D.concat)(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,(0,D.unstack)(t,0))}split(e,t){if(t.dtype!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0,r=e.map(e=>n+=e);if(n!==t.shape[0])throw Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let a=0===n?0:t.size/n,s=[];(0,D.tidy)(()=>{t=(0,D.reshape)(t,[1,n,a]);for(let n=0;n<e.length;++n){let i=[0,0===n?0:r[n-1],0],o=[1,e[n],a];s[n]=(0,D.reshape)((0,D.slice)(t,i,o),this.elementShape)}return s});let i=[];for(let t=0;t<e.length;t++)i[t]=t;this.writeMany(i,s)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eE{get id(){return this.idTensor.id}constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);eT(t,e.shape,"TensorList shape mismatch: "),(0,D.keep)(e)}),this.idTensor=(0,D.scalar)(0),this.maxNumElements=r,(0,D.keep)(this.idTensor)}copy(){return new eE([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);eT(e,this.elementShape,"TensorList shape mismatch: ");let r=eA(this.elementShape,this.tensors,e);return(0,D.tidy)(()=>{let e=this.tensors.map(e=>(0,D.reshape)(e,r));return(0,D.stack)(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw Error("Trying to pop from an empty list.");let n=eA(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,eT(r.shape,e,"TensorList shape mismatch: "),(0,D.reshape)(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(eT(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw Error("Trying to push element into a full list.");(0,D.keep)(e),this.tensors.push(e)}resize(e){if(e<0)throw Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);let t=new eE([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw Error(`element at index ${e} is null.`);eT(this.tensors[e].shape,t,"TensorList shape mismatch: ");let r=eA(this.elementShape,this.tensors,t);return(0,D.reshape)(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);eT(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,D.keep)(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);eT(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());let r=eA(this.elementShape,this.tensors,n);return 0===e.length?(0,D.tensor)([],[0].concat(r)):(0,D.tidy)(()=>{let t=e.map(e=>(0,D.reshape)(this.tensors[e],r));return(0,D.stack)(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);eT(this.elementShape,t,"TensorList shape mismatch: ");let n=eA(this.elementShape,this.tensors,t);return 0===this.size()?(0,D.tensor)([],[0].concat(n)):(0,D.tidy)(()=>{let e=this.tensors.map(e=>(0,D.reshape)(e,n));return(0,D.concat)(e,0)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eC=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{let r=z("thenBranch",e,t,n),a=z("elseBranch",e,t,n),s=z("cond",e,t,n),i=z("args",e,t,n);if((await s.data())[0])return n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap);return n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=z("body",e,t,n),a=z("cond",e,t,n),s=z("args",e,t,n),i=await n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),o=s.map(e=>e.id),u=await i[0].data();i.forEach(e=>{e.kept||-1!==o.indexOf(e.id)||e.dispose()});let l=s;for(;u[0];){let e=l,t=(l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap)).map(e=>e.id);e.forEach(e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()});let s=await n.functionMap[a].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await s[0].data(),s.forEach(e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()})}return l}case"LoopCond":return[P(z("pred",e,t,n))];case"Switch":{let r=z("pred",e,t,n),a=z("data",e,t,n);return a.kept||(a=P(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{let r=e.inputNames.find(e=>void 0!==M(e,t,n));if(r)return[P(M(r,t,n))];return}case"Enter":{let r=z("frameName",e,t,n),a=z("tensor",e,t,n);return n.enterFrame(r),[P(a)]}case"Exit":{let r=z("tensor",e,t,n);return n.exitFrame(),[P(r)]}case"NextIteration":{let r=z("tensor",e,t,n);return n.nextIteration(),[P(r)]}case"TensorArrayV3":{let r=z("size",e,t,n),a=z("dtype",e,t,n),s=z("elementShape",e,t,n),i=z("dynamicSize",e,t,n),o=z("clearAfterRead",e,t,n),u=z("identicalElementShapes",e,t,n),l=new eF(z("name",e,t,n),a,r,s,u,i,o);return n.addTensorArray(l),[l.idTensor,(0,D.scalar)(1)]}case"TensorArrayWriteV3":{let r=z("tensorArrayId",e,t,n),a=z("index",e,t,n),s=z("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(a,s),[i.idTensor]}case"TensorArrayReadV3":{let r=z("tensorArrayId",e,t,n),a=z("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{let r=z("tensorArrayId",e,t,n),a=z("indices",e,t,n),s=z("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,s)]}case"TensorArrayScatterV3":{let r=z("tensorArrayId",e,t,n),a=z("indices",e,t,n),s=z("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(a,s),[i.idTensor]}case"TensorArrayConcatV3":{let r=z("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),s=z("dtype",e,t,n);return[a.concat(s)]}case"TensorArraySplitV3":{let r=z("tensorArrayId",e,t,n),a=z("tensor",e,t,n),s=z("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(s,a),[i.idTensor]}case"TensorArraySizeV3":{let r=z("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return[(0,D.scalar)(a.size(),"int32")]}case"TensorArrayCloseV3":{let r=z("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{let r=z("tensorListId",e,t,n),a=z("index",e,t,n),s=z("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(a,s),[i.idTensor]}case"TensorListGetItem":{let r=z("tensorListId",e,t,n),a=z("index",e,t,n),s=z("elementShape",e,t,n),i=z("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,s,i)]}case"TensorListScatterV2":case"TensorListScatter":{let r=z("indices",e,t,n),a=function(e,t,n,r){if(t.length!==e.shape[0])throw Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let a=Math.max(...t);if(null!=r&&-1!==r&&a>=r)throw Error(`Max index must be < array size (${a}  vs. ${r})`);let s=new eE([],n,e.dtype,r),i=(0,D.unstack)(e,0);return t.forEach((e,t)=>{s.setItem(e,i[t])}),s}(z("tensor",e,t,n),r,z("elementShape",e,t,n),z("numElements",e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=z("elementShape",e,t,n),a=z("elementDType",e,t,n),s=z("TensorListReserve"===e.op?"numElements":"maxNumElements",e,t,n),i=new eE([],r,a,"TensorListReserve"===e.op?-1:s);return n.addTensorList(i),[i.idTensor]}case"TensorListGather":{let r=z("tensorListId",e,t,n),a=z("indices",e,t,n),s=z("elementShape",e,t,n),i=z("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,i,s)]}case"TensorListStack":{let r=z("tensorListId",e,t,n),a=z("elementShape",e,t,n),s=z("elementDType",e,t,n),i=z("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,s,i)]}case"TensorListFromTensor":{let r=function(e,t,n){let r=e.dtype;if(e.shape.length<1)throw Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);return eT(e.shape.slice(1),t,"TensorList shape mismatch: "),new eE((0,D.unstack)(e),t,r)}(z("tensor",e,t,n),z("elementShape",e,t,n),z("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=z("tensorListId",e,t,n),a=n.getTensorList(r.id),s=z("dtype",e,t,n),i=z("elementShape",e,t,n);return[a.concat(s,i)]}case"TensorListPushBack":{let r=z("tensorListId",e,t,n),a=z("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{let r=z("tensorListId",e,t,n),a=z("elementShape",e,t,n),s=z("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,s)]}case"TensorListSplit":{let r=z("tensor",e,t,n),a=z("elementShape",e,t,n),s=function(e,t,n){let r=0,a=t.map(e=>r+=e);if(r!==e.shape[0])throw Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);let s=eD(e.shape.slice(1),n),i=0===r?0:e.size/r,o=(0,D.tidy)(()=>{let n=[];e=(0,D.reshape)(e,[1,r,i]);for(let r=0;r<t.length;++r){let o=[0,0===r?0:a[r-1],0],u=[1,t[r],i];n[r]=(0,D.reshape)((0,D.slice)(e,o,u),s)}return e.dispose(),n}),u=new eE([],n,e.dtype,t.length);for(let e=0;e<o.length;e++)u.setItem(e,o[e]);return u}(r,z("lengths",e,t,n),a);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=z("tensorListId",e,t,n),a=n.getTensorList(r.id);return[(0,D.scalar)(a.size(),"int32")]}case"TensorListResize":{let r=z("tensorListId",e,t,n),a=z("size",e,t,n),s=n.getTensorList(r.id).resize(a);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ez(e,t,n){let[r,a]=z("fusedOps",e,t,n),s="biasadd"===r,i="prelu"===a,o=z("numArgs",e,t,n);if(s){if(i&&2!==o)throw Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&s&&1!==o)throw Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if("fusedbatchnorm"===r)throw Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=z("strides",e,t,n),l=R(e,t,n),p=z("dataFormat",e,t,n).toUpperCase(),h=z("dilations",e,t,n),[c,d]=z("args",e,t,n);return s||(d=c,c=void 0),{stride:u,pad:l,dataFormat:p,dilations:h,biasArg:c,preluArg:d,activationFunc:a,leakyreluAlpha:z("leakyreluAlpha",e,t,n)}}let eM=(e,t,n,r=A)=>{switch(e.op){case"Conv1D":{let a=z("stride",e,t,n),s=z("pad",e,t,n),i=z("dataFormat",e,t,n).toUpperCase(),o=z("dilation",e,t,n);return[r.conv1d(z("x",e,t,n),z("filter",e,t,n),a,s,i,o)]}case"Conv2D":{let a=z("strides",e,t,n),s=R(e,t,n),i=z("dataFormat",e,t,n).toUpperCase(),o=z("dilations",e,t,n);return[r.conv2d(z("x",e,t,n),z("filter",e,t,n),[a[1],a[2]],s,i,[o[1],o[2]])]}case"_FusedConv2D":{let{stride:a,pad:s,dataFormat:i,dilations:o,biasArg:u,preluArg:l,activationFunc:p,leakyreluAlpha:h}=ez(e,t,n);return[r.fused.conv2d({x:z("x",e,t,n),filter:z("filter",e,t,n),strides:[a[1],a[2]],pad:s,dataFormat:i,dilations:[o[1],o[2]],bias:u,activation:p,preluActivationWeights:l,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{let{stride:a,pad:s,dataFormat:i,dilations:o,biasArg:u,preluArg:l,activationFunc:p,leakyreluAlpha:h}=ez(e,t,n);return[r.fused.depthwiseConv2d({x:z("x",e,t,n),filter:z("filter",e,t,n),strides:[a[1],a[2]],pad:s,dataFormat:i,dilations:[o[1],o[2]],bias:u,activation:p,preluActivationWeights:l,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let a=z("outputShape",e,t,n),s=z("strides",e,t,n),i=R(e,t,n);return[r.conv2dTranspose(z("x",e,t,n),z("filter",e,t,n),a,[s[1],s[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let a=z("strides",e,t,n),s=R(e,t,n),i=z("dilations",e,t,n),o=z("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(z("input",e,t,n),z("filter",e,t,n),[a[1],a[2]],s,o,[i[1],i[2]])]}case"Conv3D":{let a=z("strides",e,t,n),s=z("pad",e,t,n),i=z("dataFormat",e,t,n).toUpperCase(),o=z("dilations",e,t,n);return[r.conv3d(z("x",e,t,n),z("filter",e,t,n),[a[1],a[2],a[3]],s,i,[o[1],o[2],o[3]])]}case"AvgPool":{let a=z("strides",e,t,n),s=z("pad",e,t,n),i=z("kernelSize",e,t,n);return[r.avgPool(z("x",e,t,n),[i[1],i[2]],[a[1],a[2]],s)]}case"MaxPool":{let a=z("strides",e,t,n),s=z("pad",e,t,n),i=z("kernelSize",e,t,n);return[r.maxPool(z("x",e,t,n),[i[1],i[2]],[a[1],a[2]],s)]}case"MaxPoolWithArgmax":{let a=z("strides",e,t,n),s=z("pad",e,t,n),i=z("kernelSize",e,t,n),o=z("includeBatchInIndex",e,t,n),{result:u,indexes:l}=r.maxPoolWithArgmax(z("x",e,t,n),[i[1],i[2]],[a[1],a[2]],s,o);return[u,l]}case"AvgPool3D":{let a=z("strides",e,t,n),s=z("pad",e,t,n),i=z("kernelSize",e,t,n);return[r.avgPool3d(z("x",e,t,n),[i[1],i[2],i[3]],[a[1],a[2],a[3]],s)]}case"MaxPool3D":{let a=z("strides",e,t,n),s=z("pad",e,t,n),i=z("kernelSize",e,t,n);return[r.maxPool3d(z("x",e,t,n),[i[1],i[2],i[3]],[a[1],a[2],a[3]],s)]}case"Dilation2D":{let a=z("strides",e,t,n),s=z("pad",e,t,n),i=z("dilations",e,t,n),o=a[1],u=a[2],l=i[1],p=i[2];return[r.dilation2d(z("x",e,t,n),z("filter",e,t,n),[o,u],s,[l,p],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},e_=(e,t,n,r=A)=>{switch(e.op){case"Fill":{let a=z("shape",e,t,n),s=z("dtype",e,t,n),i=z("value",e,t,n);return[r.fill(a,i,s)]}case"LinSpace":{let a=z("start",e,t,n),s=z("stop",e,t,n),i=z("num",e,t,n);return[r.linspace(a,s,i)]}case"Multinomial":{let a=z("logits",e,t,n),s=z("numSamples",e,t,n),i=z("seed",e,t,n);return[r.multinomial(a,s,i)]}case"OneHot":{let a=z("indices",e,t,n),s=z("depth",e,t,n),i=z("onValue",e,t,n),o=z("offValue",e,t,n),u=z("dtype",e,t,n);return[r.oneHot(a,s,i,o,u)]}case"Ones":return[r.ones(z("shape",e,t,n),z("dtype",e,t,n))];case"OnesLike":return[r.onesLike(z("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(z("shape",e,t,n),z("dtype",e,t,n),z("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(z("shape",e,t,n),z("minval",e,t,n),z("maxval",e,t,n),z("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(z("shape",e,t,n),z("minval",e,t,n),z("maxval",e,t,n),z("seed",e,t,n))];case"Range":{let a=z("start",e,t,n),s=z("stop",e,t,n),i=z("step",e,t,n);return[r.range(a,s,i,z("dtype",e,t,n))]}case"TruncatedNormal":{let a=z("shape",e,t,n),s=z("mean",e,t,n),i=z("stdDev",e,t,n),o=z("seed",e,t,n);return[r.truncatedNormal(a,s,i,z("dtype",e,t,n),o)]}case"Zeros":return[r.zeros(z("shape",e,t,n),z("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(z("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eO(e,t,n){let r=z("boxes",e,t,n),a=z("scores",e,t,n),s=z("maxOutputSize",e,t,n);return{boxes:r,scores:a,maxOutputSize:s,iouThreshold:z("iouThreshold",e,t,n),scoreThreshold:z("scoreThreshold",e,t,n),softNmsSigma:z("softNmsSigma",e,t,n)}}let eL=async(e,t,n,r,a=A)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=eO(e,t,n),p=await a.image.nonMaxSuppressionWithScoreAsync(r,s,i,o,u,l);return[p.selectedIndices,p.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:u}=eO(e,t,n),l=z("padToMaxOutputSize",e,t,n),p=await a.image.nonMaxSuppressionPaddedAsync(r,s,i,o,u,l);return[p.selectedIndices,p.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:u}=eO(e,t,n);return[await a.image.nonMaxSuppressionAsync(r,s,i,o,u)]}case"Where":{let r=a.cast(z("condition",e,t,n),"bool"),s=[await a.whereAsync(r)];return r.dispose(),s}case"ListDiff":return a.setdiff1dAsync(z("x",e,t,n),z("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}},e$=(e,t,n,r=A)=>{switch(e.op){case"LowerBound":{let a=z("sortedSequence",e,t,n),s=z("values",e,t,n);return[r.lowerBound(a,s)]}case"TopKV2":{let a=z("x",e,t,n),s=z("k",e,t,n),i=z("sorted",e,t,n),o=r.topk(a,s,i);return[o.values,o.indices]}case"UpperBound":{let a=z("sortedSequence",e,t,n),s=z("values",e,t,n);return[r.upperBound(a,s)]}case"Unique":{let a=z("x",e,t,n),s=r.unique(a);return[s.values,s.indices]}case"UniqueV2":{let a=z("x",e,t,n),s=z("axis",e,t,n),i=r.unique(a,s);return[i.values,i.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},eR=(e,t,n,r=A)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let a=z("default",e,t,n);return[M(e.name,t,n)||a];case"Placeholder":return[M(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[P(z("x",e,t,n))];case"IdentityN":return z("x",e,t,n).map(e=>P(e));case"Shape":return[r.tensor1d(z("x",e,t,n).shape,"int32")];case"ShapeN":return z("x",e,t,n).map(e=>r.tensor1d(e.shape));case"Size":return[r.scalar(z("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(z("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=z("x",e,t,n),i=z("data",e,t,n),o=z("message",e,t,n),u=z("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,u));return[s];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var eP=n(86008);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eB{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=(0,D.scalar)(0),this.tensorMap=new Map,(0,D.keep)(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return eP.i(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),(0,D.tidy)(()=>{let e=(0,D.unstack)(t),r=n.length,a=e.length;D.util.assert(r===a,()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${a} elements.`);for(let t=0;t<r;t++){let r=n[t],a=e[t];(0,D.keep)(a),this.tensorMap.set(r,a)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return(0,D.tidy)(()=>{let e=[];for(let r=0;r<n.length;r++){let a=n[r],s=this.findWithDefault(a,t);e.push(s)}return(0,D.stack)(e)})}findWithDefault(e,t){let n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eV=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{let a=r.getHashTableHandleByName(e.name);if(null!=a)return[a];{let a=new eB(z("keyDType",e,t,n),z("valueDType",e,t,n));return r.addHashTable(e.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let a=z("tableHandle",e,t,n,r),s=z("keys",e,t,n),i=z("values",e,t,n),o=r.getHashTableById(a.id);return[await o.import(s,i)]}case"LookupTableFind":case"LookupTableFindV2":{let a=z("tableHandle",e,t,n,r),s=z("keys",e,t,n),i=z("defaultValue",e,t,n),o=r.getHashTableById(a.id);return[await o.find(s,i)]}case"LookupTableSize":case"LookupTableSizeV2":{let a=z("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},eW=(e,t,n,r=A)=>{switch(e.op){case"ResizeBilinear":{let a=z("images",e,t,n),s=z("size",e,t,n),i=z("alignCorners",e,t,n),o=z("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[s[0],s[1]],i,o)]}case"ResizeNearestNeighbor":{let a=z("images",e,t,n),s=z("size",e,t,n),i=z("alignCorners",e,t,n),o=z("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(a,[s[0],s[1]],i,o)]}case"CropAndResize":{let a=z("image",e,t,n),s=z("boxes",e,t,n),i=z("boxInd",e,t,n),o=z("cropSize",e,t,n),u=z("method",e,t,n),l=z("extrapolationValue",e,t,n);return[r.image.cropAndResize(a,s,i,o,u,l)]}case"ImageProjectiveTransformV3":{let a=z("images",e,t,n),s=z("transforms",e,t,n),i=z("outputShape",e,t,n),o=z("fillValue",e,t,n),u=z("interpolation",e,t,n),l=z("fillMode",e,t,n);return[r.image.transform(a,s,u.toLowerCase(),l.toLowerCase(),o,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},eH=(e,t,n,r=A)=>{switch(e.op){case"Equal":return[r.equal(z("a",e,t,n),z("b",e,t,n))];case"NotEqual":return[r.notEqual(z("a",e,t,n),z("b",e,t,n))];case"Greater":return[r.greater(z("a",e,t,n),z("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(z("a",e,t,n),z("b",e,t,n))];case"Less":return[r.less(z("a",e,t,n),z("b",e,t,n))];case"LessEqual":return[r.lessEqual(z("a",e,t,n),z("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(z("a",e,t,n),z("b",e,t,n))];case"LogicalNot":return[r.logicalNot(z("a",e,t,n))];case"LogicalOr":return[r.logicalOr(z("a",e,t,n),z("b",e,t,n))];case"Select":case"SelectV2":return[r.where(z("condition",e,t,n),z("a",e,t,n),z("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(z("a",e,t,n),z("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},ej=(e,t,n,r=A)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(z("a",e,t,n),z("b",e,t,n),z("transposeA",e,t,n),z("transposeB",e,t,n))];case"Einsum":return[r.einsum(z("equation",e,t,n),...z("tensors",e,t,n))];case"Transpose":return[r.transpose(z("x",e,t,n),z("perm",e,t,n))];case"_FusedMatMul":let[a,s]=z("fusedOps",e,t,n),i="prelu"===s,o=z("numArgs",e,t,n),u=z("leakyreluAlpha",e,t,n);if("biasadd"===a){if(i&&2!==o)throw Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==o)throw Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[l,p]=z("args",e,t,n);return[r.fused.matMul({a:z("a",e,t,n),b:z("b",e,t,n),transposeA:z("transposeA",e,t,n),transposeB:z("transposeB",e,t,n),bias:l,activation:s,preluActivationWeights:p,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(z("a",e,t,n),z("numLower",e,t,n),z("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},eU=(e,t,n,r=A)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(z("x",e,t,n),z("axis",e,t,n),z("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(z("x",e,t,n),z("mean",e,t,n),z("variance",e,t,n),z("offset",e,t,n),z("scale",e,t,n),z("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(z("x",e,t,n),z("radius",e,t,n),z("bias",e,t,n),z("alpha",e,t,n),z("beta",e,t,n))];case"Softmax":return[r.softmax(z("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(z("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},eq=(e,t,n,r=A)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:a,outputDenseValues:s}=r.raggedGather(z("paramsNestedSplits",e,t,n),z("paramsDenseValues",e,t,n),z("indices",e,t,n),z("outputRaggedRank",e,t,n));return a.concat(s)}case"RaggedRange":{let{rtNestedSplits:a,rtDenseValues:s}=r.raggedRange(z("starts",e,t,n),z("limits",e,t,n),z("splits",e,t,n));return[a,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(z("shape",e,t,n),z("values",e,t,n),z("defaultValue",e,t,n),z("rowPartitionTensors",e,t,n),z("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},eG=(e,t,n,r=A)=>{switch(e.op){case"Max":{let a=z("axis",e,t,n),s=z("keepDims",e,t,n);return[r.max(z("x",e,t,n),a,s)]}case"Mean":{let a=z("axis",e,t,n),s=z("keepDims",e,t,n);return[r.mean(z("x",e,t,n),a,s)]}case"Min":{let a=z("axis",e,t,n),s=z("keepDims",e,t,n);return[r.min(z("x",e,t,n),a,s)]}case"Sum":{let a=z("axis",e,t,n),s=z("keepDims",e,t,n);return[r.sum(z("x",e,t,n),a,s)]}case"All":{let a=z("axis",e,t,n),s=z("keepDims",e,t,n);return[r.all(z("x",e,t,n),a,s)]}case"Any":{let a=z("axis",e,t,n),s=z("keepDims",e,t,n);return[r.any(z("x",e,t,n),a,s)]}case"ArgMax":{let a=z("axis",e,t,n);return[r.argMax(z("x",e,t,n),a)]}case"ArgMin":{let a=z("axis",e,t,n);return[r.argMin(z("x",e,t,n),a)]}case"Prod":{let a=z("axis",e,t,n),s=z("keepDims",e,t,n);return[r.prod(z("x",e,t,n),a,s)]}case"Cumprod":{let a=z("axis",e,t,n),s=z("exclusive",e,t,n),i=z("reverse",e,t,n);return[r.cumprod(z("x",e,t,n),a,s,i)]}case"Cumsum":{let a=z("axis",e,t,n),s=z("exclusive",e,t,n),i=z("reverse",e,t,n);return[r.cumsum(z("x",e,t,n),a,s,i)]}case"Bincount":let a=z("x",e,t,n),s=z("weights",e,t,n),i=z("size",e,t,n);return[r.bincount(a,s,i)];case"DenseBincount":{let a=z("x",e,t,n),s=z("weights",e,t,n),i=z("size",e,t,n),o=z("binaryOutput",e,t,n);return[r.denseBincount(a,s,i,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},eQ=(e,t,n,r=A)=>{switch(e.op){case"ConcatV2":case"Concat":{let a=z("n",e,t,n),s=z("axis",e,t,n),i=z("tensors",e,t,n);return i=i.slice(0,a),[r.concat(i,s)]}case"Gather":{let a=z("x",e,t,n),s=z("indices",e,t,n);return[r.gather(a,r.cast(s,"int32"),0)]}case"GatherV2":{let a=z("axis",e,t,n),s=z("batchDims",e,t,n),i=z("x",e,t,n),o=z("indices",e,t,n);return[r.gather(i,r.cast(o,"int32"),a,s)]}case"Reverse":{let a=z("dims",e,t,n),s=[];for(let e=0;e<a.length;e++)a[e]&&s.push(e);let i=z("x",e,t,n);return[r.reverse(i,s)]}case"ReverseV2":{let a=z("axis",e,t,n),s=z("x",e,t,n);return[r.reverse(s,a)]}case"Slice":{let a=z("begin",e,t,n),s=z("size",e,t,n);return[r.slice(z("x",e,t,n),a,s)]}case"StridedSlice":{let a=z("begin",e,t,n),s=z("end",e,t,n),i=z("strides",e,t,n),o=z("beginMask",e,t,n),u=z("endMask",e,t,n),l=z("ellipsisMask",e,t,n),p=z("newAxisMask",e,t,n),h=z("shrinkAxisMask",e,t,n),c=z("x",e,t,n);return[r.stridedSlice(c,a,s,i,o,u,l,p,h)]}case"Pack":return(0,D.tidy)(()=>{let a=z("axis",e,t,n),s=z("tensors",e,t,n),i=s[0].shape,o=r.squeeze(s[0]).shape,u=s.map(e=>{let t=D.util.arraysEqual(e.shape,i);if(!t&&!D.util.arraysEqual(r.squeeze(e).shape,o))throw Error("the input tensors shape does not match");return t?e:r.reshape(e,i)});return[r.stack(u,a)]});case"Unpack":{let a=z("axis",e,t,n),s=z("tensor",e,t,n);return r.unstack(s,a)}case"Tile":{let a=z("reps",e,t,n);return[r.tile(z("x",e,t,n),a)]}case"Split":case"SplitV":{let a=z("axis",e,t,n),s=z("numOrSizeSplits",e,t,n),i=z("x",e,t,n);return r.split(i,s,a)}case"ScatterNd":{let a=z("indices",e,t,n),s=z("values",e,t,n),i=z("shape",e,t,n);return[r.scatterND(a,s,i)]}case"GatherNd":{let a=z("x",e,t,n),s=z("indices",e,t,n);return[r.gatherND(a,s)]}case"SparseToDense":{let a=z("sparseIndices",e,t,n),s=z("outputShape",e,t,n),i=z("sparseValues",e,t,n),o=z("defaultValue",e,t,n);return[r.sparseToDense(a,i,s,i.dtype===o.dtype?o:r.cast(o,i.dtype))]}case"TensorScatterUpdate":{let a=z("indices",e,t,n),s=z("values",e,t,n),i=z("tensor",e,t,n);return[r.tensorScatterUpdate(i,a,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},eX=(e,t,n,r=A)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:a,outputValues:s,emptyRowIndicator:i,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(z("indices",e,t,n),z("values",e,t,n),z("denseShape",e,t,n),z("defaultValue",e,t,n));return[a,s,i,o]}case"SparseReshape":{let{outputIndices:a,outputShape:s}=r.sparse.sparseReshape(z("inputIndices",e,t,n),z("inputShape",e,t,n),z("newShape",e,t,n));return[a,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(z("data",e,t,n),z("indices",e,t,n),z("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(z("data",e,t,n),z("indices",e,t,n),z("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},eK=(e,t,n,r=A)=>{switch(e.op){case"FFT":return[r.fft(z("x",e,t,n))];case"IFFT":return[r.ifft(z("x",e,t,n))];case"RFFT":return[r.rfft(z("x",e,t,n))];case"IRFFT":return[r.irfft(z("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},eZ=(e,t,n,r=A)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(z("input",e,t,n),z("pattern",e,t,n),z("rewrite",e,t,n),z("replaceGlobal",e,t,n))];case"StringNGrams":{let{nGrams:a,nGramsSplits:s}=r.string.stringNGrams(z("data",e,t,n),z("dataSplits",e,t,n),z("separator",e,t,n),z("nGramWidths",e,t,n),z("leftPad",e,t,n),z("rightPad",e,t,n),z("padWidth",e,t,n),z("preserveShortSequences",e,t,n));return[a,s]}case"StringSplit":{let{indices:a,values:s,shape:i}=r.string.stringSplit(z("input",e,t,n),z("delimiter",e,t,n),z("skipEmpty",e,t,n));return[a,s,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(z("input",e,t,n),z("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},eJ=(e,t,n,r=A)=>{switch(e.op){case"Cast":return[r.cast(z("x",e,t,n),z("dtype",e,t,n))];case"ExpandDims":{let a=z("axis",e,t,n);return[r.expandDims(z("x",e,t,n),a)]}case"Squeeze":{let a=z("axis",e,t,n);return[r.squeeze(z("x",e,t,n),a)]}case"Reshape":return[r.reshape(z("x",e,t,n),z("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(z("x",e,t,n),z("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(z("x",e,t,n),z("padding",e,t,n),z("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(z("x",e,t,n),z("padding",e,t,n),z("constantValue",e,t,n))];case"SpaceToBatchND":{let a=z("blockShape",e,t,n),s=z("paddings",e,t,n);return[r.spaceToBatchND(z("x",e,t,n),a,s)]}case"BatchToSpaceND":{let a=z("blockShape",e,t,n),s=z("crops",e,t,n);return[r.batchToSpaceND(z("x",e,t,n),a,s)]}case"DepthToSpace":{let a=z("blockSize",e,t,n),s=z("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(z("x",e,t,n),a,s)]}case"BroadcastTo":return[r.broadcastTo(z("x",e,t,n),z("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(z("s0",e,t,n),z("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(e,t,n,r,a=D.tidy){let s=((e,t,n)=>{switch(e.category){case"arithmetic":return a(()=>ew(e,t,n));case"basic_math":return a(()=>eS(e,t,n));case"control":return eC(e,t,n);case"convolution":return a(()=>eM(e,t,n));case"creation":return a(()=>e_(e,t,n));case"dynamic":return eL(e,t,n);case"evaluation":return a(()=>e$(e,t,n));case"image":return a(()=>eW(e,t,n));case"graph":return a(()=>eR(e,t,n));case"logical":return a(()=>eH(e,t,n));case"matrices":return a(()=>ej(e,t,n));case"normalization":return a(()=>eU(e,t,n));case"ragged":return a(()=>eq(e,t,n));case"reduction":return a(()=>eG(e,t,n));case"slice_join":return a(()=>eQ(e,t,n));case"sparse":return a(()=>eX(e,t,n));case"spectral":return a(()=>eK(e,t,n));case"string":return a(()=>eZ(e,t,n));case"transformation":return a(()=>eJ(e,t,n));case"hash_table":return eV(e,t,n,r);case"custom":let s=F[e.op];if(s&&s.customExecutor)return s.customExecutor(new ek(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return D.util.isPromise(s)?s.then(e=>[].concat(e)):[].concat(s)}class e0{constructor(e={},t={},n={},r={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1(e,t,n,r){let a=new Set,s=[],i=null,o=null,u=new Set,l=new Set(Object.keys(e).map(e=>$(e)[0])),p=new Set((r=r||[]).map(e=>$(e.name)[0])),h=[...t];for(;h.length>0;){let e=h.pop();if((e6(e)||e4.has(e.op)||e9.has(e.op))&&null==i&&(o=(i=e).children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),!(null!=n[e.name]||l.has(e.name)||p.has(e.name))){if(0===e.inputs.length){s.push(e.name);continue}e.inputs.forEach(e=>{u.has(e.name)||(u.add(e.name),h.push(e))})}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:s,dynamicNode:i,syncInputs:o}}class e2 extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}let e3=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),e4=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),e9=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function e6(e){return e3.has(e.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e5{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new e5(e.functions[t],this)})}getCompilationKey(e,t){let n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){let n=e1(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:s}=n;if(null!=a)throw Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(r.length>0){let n=t.map(e=>e.name),a=Object.keys(e);throw Error(`Cannot compute the outputs [${n}] from the provided inputs [${a}]. Missing the following inputs: [${r}]`)}let i=function(e,t){let{usedNodes:n,inputs:r}=t,a=Object.keys(r).map(e=>$(e)[0]).map(t=>e.nodes[t]),s=e.initNodes||[],i=e=>n.has("string"==typeof e?e:e.name);function o(e){return[...new Map(e.map(e=>[e.name,e])).values()]}let u=o([...a,...e.weights,...s]).filter(i),l=o([...u,...Object.values(e.nodes)]).filter(i),p=new Map(l.map(e=>[e.name,e])),h={};for(let e of l)for(let t of(h[e.name]=h[e.name]||0,e.children))i(t)||(h[t.name]=Number.POSITIVE_INFINITY),h[t.name]=(h[t.name]||0)+1;let c=Object.entries(h).filter(([,e])=>0===e).map(([e])=>e),d=[...c];for(;c.length>0;){let e=c.pop();for(let t of p.get(e).children.filter(i))0==--h[t.name]&&(d.push(t.name),c.push(t.name))}let m=function(e,t){let n=new Map(e.map(e=>[e.name,e])),r=t.map(e=>e.name),a=new Set(r);for(;r.length>0;){let e=r.pop();for(let t of n.get(e).children)!n.has(t.name)||a.has(t.name)||(a.add(t.name),r.push(t.name))}return e.filter(e=>a.has(e.name))}(d.map(e=>p.get(e)),u);return function(e,t){let n=new Map(e.map((e,t)=>[e.name,t])),r=new Set(t.map(e=>e.name)),a=e=>r.has("string"==typeof e?e:e.name),s=new Set(e.map(e=>e.name)),i=e=>s.has("string"==typeof e?e:e.name);for(let t of e){for(let e of t.children.filter(i)){if(!n.has(e.name))throw new e2(`Child ${e.name} of node ${t.name} is unreachable.`);if(n.get(t.name)>n.get(e.name))throw new e2(`Node ${t.name} is scheduled to run after its child ${e.name}.`)}if(!a(t))for(let e of t.inputs){if(!n.has(e.name))throw new e2(`Input ${e.name} of node ${t.name} is unreachable.`);if(n.get(e.name)>n.get(t.name))throw new e2(`Node ${t.name} is scheduled to run before its input ${e.name}.`)}}}(m,u),m}(this.graph,n),o=function(e){let t=new Map(e.map((e,t)=>[e.name,t])),n=Number.MAX_SAFE_INTEGER,r=e.map((e,t)=>e6(e)?n:t),a=e=>{let n=r[t.get(e.name)];return null==n?-1:n},s=e.map((e,t)=>e.children.map(a).reduce((e,t)=>Math.max(e,t),r[t])),i=new Map;for(let t=0;t<e.length;++t){let r=s[t];if(r===n)continue;let a=e[t],o=e[r];i.has(o.name)||i.set(o.name,[]),i.get(o.name).push(a)}return i}(i);return{orderedNodes:i,nodeLiveUntilMap:o}}cloneAndKeepTensor(e){if(null==e)return null;let t=e.clone();return(0,D.keep)(t),t}cloneTensorList(e){return e?e.map(e=>this.cloneAndKeepTensor(e)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,this.cloneTensorList(t)]))}execute(e,t){this.disposeIntermediateTensors();let n=Object.keys(e=this.mapInputs(e)).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let r=n.map(e=>this.graph.nodes[$(e)[0]]),a=t.map(e=>$(e)[0]),s=new Set(a),i=a.map(e=>this.graph.nodes[e]);0===i.length&&(i=this._outputs);let o=this.getCompilationKey(r,i),u=this.compiledMap.get(o);null==u&&(u=this.compile(e,i),this.compiledMap.set(o,u));try{this.keepIntermediateTensors=(0,D.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}let l={},p={};return(0,D.tidy)(()=>{let n=new e0(this.weightMap,l,p,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(t=>{let[a,s]=$(t,n),i=[];i[s]=e[t],r[a]=i,this.keepIntermediateTensors&&(this.clonedTensorsMap[a]=this.cloneTensorList(i))});let a=this.getFrozenTensorIds(r),{orderedNodes:i,nodeLiveUntilMap:o}=u;for(let e of i){if(r[e.name])continue;let t=eY(e,r,n,this._resourceManager);if(D.util.isPromise(t))throw Error(`The execution of the op '${e.op}' returned a promise. Please use model.executeAsync() instead.`);r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,a,s,o.get(e.name))}return null==this.parent&&n.dispose(a),t.map(e=>M(e,r,n))})}getFrozenTensorIds(e){return new Set([].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id))))}checkTensorForDisposal(e,t,n,r,a,s,i){if(!(e6(t)||s.has(e))){for(let r of n[e])null!=r&&(i[r.id]=(i[r.id]||0)+t.children.length);for(let e of t.inputs){if(e6(e))continue;let t=_(e.name,n,r);if(null!=t)for(let e of t){if(!e||e.kept||a.has(e.id))continue;let t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,a,s){if(!e6(e)&&null!=s){for(let e of s)if(!(e6(e)||a.has(e.name)))for(let a of _(e.name,t,n))!a||a.kept||r.has(a.id)||a.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,n=!1,r={},a={}){this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=(0,D.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}let s=new e0(this.weightMap,r,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let i=await this.executeWithControlFlow(e,s,t,n),o=t.map(e=>M(e,i,s)),u=new Set([...o.map(e=>e.id),...Object.keys(e).map(t=>e[t].id),...this.weightIds]);return Object.values(i).forEach(e=>{e.forEach(e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()})}),null==this.parent&&s.dispose(u),o}async executeFunctionAsync(e,t,n){let r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){let a=Object.keys(e),s=a.map(e=>this.graph.nodes[$(e)[0]]),i=n.map(e=>$(e)[0]),o=new Set(i),u=i.map(e=>this.graph.nodes[e]);0===u.length&&(u=this._outputs);let{usedNodes:l,missingInputs:p,dynamicNode:h,syncInputs:c}=e1(e,u,this.weightMap,this._initNodes),d=[...s,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{let[n,r]=$(t),a=[];a[r]=e[t],m[n]=a});let f={},g=this.getFrozenTensorIds(m),y={};for(;d.length>0;){let e=this.processStack(s,d,t,m,y,g,o,f,l);await Promise.all(e)}null!=h||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let b=u.filter(e=>!e6(e)&&!M(e.name,m,t)).map(e=>e.name);if(b.length>0){let e="";throw null!=h&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${c}]`),Error(`Cannot compute the outputs [${b}] from the provided inputs [${a}]. Consider providing the following inputs: [${p}]. ${e}`)}return m}processStack(e,t,n,r,a,s,i,o,u){let l=[];for(;t.length>0;){let e=t.pop();n.currentContext=e.contexts;let p="";if("Enter"===e.node.op&&z("isConstant",e.node,r,n)&&([p]=O(e.node.name,n)),null==r[e.node.name]){let h=eY(e.node,r,n,this._resourceManager);p||([p]=O(e.node.name,n));let c=n.currentContext;D.util.isPromise(h)?l.push(h.then(l=>(r[p]=l,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(l)),n.currentContext=c,this.checkTensorForDisposal(p,e.node,r,n,s,i,o),this.processChildNodes(e.node,t,n,r,a,u),l))):(r[p]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(h)),this.checkTensorForDisposal(p,e.node,r,n,s,i,o),this.processChildNodes(e.node,t,n,r,a,u))}else this.processChildNodes(e.node,t,n,r,a,u)}return l}processChildNodes(e,t,n,r,a,s){e.children.forEach(e=>{let[i]=O(e.name,n);!a[i]&&s.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!M(e,r,n))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!M(e,r,n))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let n=e[t],[r]=$(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){let e=a.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t);D.util.assert(t,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&D.util.assert(n.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(e){var t,n;let r={};for(let a in e){let s=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[a];null!=s?r[s.name]=e[a]:r[a]=e[a]}return r}checkInputs(e){let t=Object.keys(e).filter(e=>{let[t]=$(e);return null==this.graph.nodes[t]});if(t.length>0)throw Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(e=>{var t,n;let r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e},{})}checkOutputs(e){e.forEach(e=>{let[t]=$(e);if(!this.graph.nodes[t])throw Error(`The output '${e}' is not found in the graph`)})}}class e7{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}var e8=n(71149);class te{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},n=D.io){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,null==t&&(this.loadOptions={}),this.resourceManager=new e7}findIOHandler(){let e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return D.util.isPromise(e)?e.then(e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e)):this.loadSync(e)}loadSync(e){let t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw Error("Model artifacts missing streamWeights function");let t=await (0,e8.r)(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;let n=this.artifacts.modelTopology,r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){let e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`,this.executor=new e5(ei.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){let t=ei.Instance.transformGraph(e.modelInitializer);this.initializer=new e5(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"==typeof e){let t=this.io.getSaveHandlers(e);if(0===t.length)throw Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){let t=e instanceof D.Tensor?[e]:e,n={};return t.forEach((e,t)=>n[this.structuredOutputKeys[t]]=e),n}return e}predict(e,t){let n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){let n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof D.Tensor)&&!Array.isArray(e)){let n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(let t in n){let r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];let n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((t,n)=>{var a,s,i;let o=null===(i=null===(s=null===(a=this.signature)||void 0===a?void 0:a.inputs)||void 0===s?void 0:s[n])||void 0===i?void 0:i.resourceId;return null!=o?t[n]=this.resourceIdToCapturedInput[o]:t[n]=e[r++],t},{})}normalizeOutputs(e){return Array.isArray(e=e||this.outputNodes)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){let a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&(0,D.dispose)(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function tt(e,t={},n=D.io){var r;if(null==e)throw Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"==typeof e&&((r=e).endsWith("/")||(r+="/"),e=`${r}model.json?tfjs-format=file`);let a=new te(e,t,n);return await a.load(),a}function tn(e){let t;if(null==e)throw Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");if(e instanceof Array){let[n,r]=e;if(!n)throw Error("modelJSON must be the first element of the array");if(!r||!(r instanceof ArrayBuffer))throw Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in n))throw Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in n))throw Error("Model JSON is missing 'weightsManifest'");let a=D.io.getWeightSpecs(n.weightsManifest),s=D.io.getModelArtifactsForJSONSync(n,a,r);t=D.io.fromMemorySync(s)}else if("load"in e)t=e;else if("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e)t=D.io.fromMemorySync(e);else throw Error("Unknown model format");let n=new te(t);return n.load(),n}/** @license See the LICENSE file. */let tr="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */},18046:function(e,t,n){n.r(t);var r=n(5273),a=n(85013);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.abs=function(){return this.throwIfDisposed(),(0,r.W)(this)};var s=n(90514);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.acos=function(){return this.throwIfDisposed(),(0,s.K)(this)};var i=n(28246);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.acosh=function(){return this.throwIfDisposed(),(0,i._)(this)};var o=n(28796);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.add=function(e){return this.throwIfDisposed(),(0,o.I)(this,e)};var u=n(48172);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.all=function(e,t){return this.throwIfDisposed(),(0,u.$)(this,e,t)};var l=n(4541);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.any=function(e,t){return this.throwIfDisposed(),(0,l.Y)(this,e,t)};var p=n(89487);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.argMax=function(e){return this.throwIfDisposed(),(0,p.N)(this,e)};var h=n(80099);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.argMin=function(e){return this.throwIfDisposed(),(0,h.v)(this,e)};var c=n(70934),d=n(31143);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.asScalar=function(){return this.throwIfDisposed(),(0,d.hu)(1===this.size,()=>"The array must have only 1 element."),(0,c.X)(this,[])};var m=n(42460);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.asType=function(e){return this.throwIfDisposed(),(0,m.p)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.as1D=function(){return this.throwIfDisposed(),(0,c.X)(this,[this.size])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.as2D=function(e,t){return this.throwIfDisposed(),(0,c.X)(this,[e,t])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),(0,c.X)(this,[e,t,n])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),(0,c.X)(this,[e,t,n,r])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),(0,c.X)(this,[e,t,n,r,a])};var f=n(73978);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.asin=function(){return this.throwIfDisposed(),(0,f.Z)(this)};var g=n(64277);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.asinh=function(){return this.throwIfDisposed(),(0,g.V)(this)};var y=n(97410);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.atan=function(){return this.throwIfDisposed(),(0,y.z)(this)};var b=n(51562);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.atan2=function(e){return this.throwIfDisposed(),(0,b.f)(this,e)};var N=n(98813);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.atanh=function(){return this.throwIfDisposed(),(0,N.C)(this)};var x=n(4121);(0,a.t3)().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),(0,x.w)(this,e,t,n,r)};var k=n(85860);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),(0,k.E)(this,e,t)};var v=n(95837);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),(0,v.t)(this,e,t,n,r,a)};var w=n(69580);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.broadcastTo=function(e){return this.throwIfDisposed(),(0,w.U)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.cast=function(e){return this.throwIfDisposed(),(0,m.p)(this,e)};var S=n(37003);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.ceil=function(){return this.throwIfDisposed(),(0,S.m)(this)};var T=n(24737);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),(0,T.i)(this,e,t)};var I=n(66598);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof a.es&&(e=[e]),(0,I.z)([this,...e],t)};var A=n(77620);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.conv1d=function(e,t,n,r,a,s){return this.throwIfDisposed(),(0,A.P)(this,e,t,n,r,a,s)};var D=n(27294);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),(0,D.b)(this,e,t,n,r,a)};var F=n(7289);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.conv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),(0,F.T)(this,e,t,n,r,a,s)};var E=n(66292);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.cos=function(){return this.throwIfDisposed(),(0,E.m)(this)};var C=n(45094);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.cosh=function(){return this.throwIfDisposed(),(0,C.f)(this)};var z=n(96951);/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),(0,z.$)(this,e,t,n)};var M=n(82062);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),(0,M.z)(this,e,t,n)};var _=n(42580);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),(0,_.n)(this,e,t)};var O=n(86075);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.depthwiseConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),(0,O.B)(this,e,t,n,r,a,s)};var L=n(82795);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),(0,L.W)(this,e,t,n,r,a)};var $=n(76532);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.divNoNan=function(e){return this.throwIfDisposed(),(0,$.N)(this,e)};var R=n(69750);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.div=function(e){return this.throwIfDisposed(),(0,R.h)(this,e)};var P=n(27397);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.dot=function(e){return this.throwIfDisposed(),(0,P.A)(this,e)};var B=n(36394);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.elu=function(){return this.throwIfDisposed(),(0,B.p)(this)};var V=n(31998);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.equal=function(e){return this.throwIfDisposed(),(0,V.D)(this,e)};var W=n(30886);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.erf=function(){return this.throwIfDisposed(),(0,W.q)(this)};var H=n(56237);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),(0,H.d)(this,e,t)};var j=n(96197);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.exp=function(){return this.throwIfDisposed(),(0,j.Q)(this)};var U=n(68569);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.expandDims=function(e){return this.throwIfDisposed(),(0,U.d)(this,e)};var q=n(76074);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.expm1=function(){return this.throwIfDisposed(),(0,q.t)(this)};var G=n(14137);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.fft=function(){return this.throwIfDisposed(),(0,G.k)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.flatten=function(){return this.throwIfDisposed(),(0,c.X)(this,[this.size])};var Q=n(62114);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.floor=function(){return this.throwIfDisposed(),(0,Q.G)(this)};var X=n(27873);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.floorDiv=function(e){return this.throwIfDisposed(),(0,X.q)(this,e)};var K=n(85134);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.gather=function(e,t,n){return this.throwIfDisposed(),(0,K.I)(this,e,t,n)};var Z=n(8939);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,Z.b)(this,e)};var J=n(23553);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.greater=function(e){return this.throwIfDisposed(),(0,J.p)(this,e)};var Y=n(58695);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.ifft=function(){return this.throwIfDisposed(),(0,Y.S)(this)};var ee=n(1582);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.irfft=function(){return this.throwIfDisposed(),(0,ee.w)(this)};var et=n(73274);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.isFinite=function(){return this.throwIfDisposed(),(0,et.x)(this)};var en=n(72576);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.isInf=function(){return this.throwIfDisposed(),(0,en.U)(this)};var er=n(93141);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.isNaN=function(){return this.throwIfDisposed(),(0,er.i)(this)};var ea=n(3725);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.leakyRelu=function(e){return this.throwIfDisposed(),(0,ea.h)(this,e)};var es=n(91073);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,es.z)(this,e)};var ei=n(94562);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.less=function(e){return this.throwIfDisposed(),(0,ei.d)(this,e)};var eo=n(56382);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),(0,eo.G)(this,e,t,n,r)};var eu=n(54076);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,eu.e)(this)};var el=n(63190);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.logSoftmax=function(e){return this.throwIfDisposed(),(0,el.C)(this,e)};var ep=n(89927);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),(0,ep.l)(this,e,t)};var eh=n(60041);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.log=function(){return this.throwIfDisposed(),(0,eh.c)(this)};var ec=n(35135);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.log1p=function(){return this.throwIfDisposed(),(0,ec.K)(this)};var ed=n(72936);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.logicalAnd=function(e){return this.throwIfDisposed(),(0,ed.H)(this,e)};var em=n(70438);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.logicalNot=function(){return this.throwIfDisposed(),(0,em.h)(this)};var ef=n(6556);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.logicalOr=function(e){return this.throwIfDisposed(),(0,ef.K)(this,e)};var eg=n(15286);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.logicalXor=function(e){return this.throwIfDisposed(),(0,eg.e)(this,e)};var ey=n(33229);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),(0,ey.O)(this,e,t,n)};var eb=n(11e3);(0,a.t3)().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),(0,eb._)(this,e,t,n,r)};var eN=n(1408);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.max=function(e,t){return this.throwIfDisposed(),(0,eN.F)(this,e,t)};var ex=n(41725);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.maximum=function(e){return this.throwIfDisposed(),(0,ex.g)(this,e)};var ek=n(35968);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.mean=function(e,t){return this.throwIfDisposed(),(0,ek.J)(this,e,t)};var ev=n(91571);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.min=function(e,t){return this.throwIfDisposed(),(0,ev.V)(this,e,t)};var ew=n(64367);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.minimum=function(e){return this.throwIfDisposed(),(0,ew.L)(this,e)};var eS=n(23674);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),(0,eS.V)(this,e,t)};var eT=n(9965);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.mod=function(e){return this.throwIfDisposed(),(0,eT.w)(this,e)};var eI=n(74644);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.mul=function(e){return this.throwIfDisposed(),(0,eI.d)(this,e)};var eA=n(44591);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.neg=function(){return this.throwIfDisposed(),(0,eA.W)(this)};var eD=n(59181);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.norm=function(e,t,n){return this.throwIfDisposed(),(0,eD.K)(this,e,t,n)};var eF=n(79818);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.notEqual=function(e){return this.throwIfDisposed(),(0,eF.Q)(this,e)};var eE=n(3885);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),(0,eE.l)(this,e,t,n)};var eC=n(72102);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.onesLike=function(){return this.throwIfDisposed(),(0,eC.J)(this)};var ez=n(9434);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.pad=function(e,t){return this.throwIfDisposed(),(0,ez.v)(this,e,t)};var eM=n(41525);(0,a.t3)().prototype.pool=function(e,t,n,r,a,s){return this.throwIfDisposed(),(0,eM.d)(this,e,t,n,r,a,s)};var e_=n(52952);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.pow=function(e){return this.throwIfDisposed(),(0,e_.s)(this,e)};var eO=n(55676);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.prelu=function(e){return this.throwIfDisposed(),(0,eO.A)(this,e)};var eL=n(63885);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.prod=function(e,t){return this.throwIfDisposed(),(0,eL.W)(this,e,t)};var e$=n(49599);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.reciprocal=function(){return this.throwIfDisposed(),(0,e$.M)(this)};var eR=n(71579);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.relu=function(){return this.throwIfDisposed(),(0,eR.U)(this)};var eP=n(18820);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.relu6=function(){return this.throwIfDisposed(),(0,eP.b)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.reshapeAs=function(e){return this.throwIfDisposed(),(0,c.X)(this,e.shape)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.reshape=function(e){return this.throwIfDisposed(),(0,c.X)(this,e)};var eB=n(57554);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),(0,eB.I)(this,e,t,n)};var eV=n(37875);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),(0,eV.j)(this,e,t,n)};var eW=n(28258);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.reverse=function(e){return this.throwIfDisposed(),(0,eW.G)(this,e)};var eH=n(2196);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.rfft=function(){return this.throwIfDisposed(),(0,eH.Q)(this)};var ej=n(11514);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.round=function(){return this.throwIfDisposed(),(0,ej.N)(this)};var eU=n(74045);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.rsqrt=function(){return this.throwIfDisposed(),(0,eU.b)(this)};var eq=n(18044);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.selu=function(){return this.throwIfDisposed(),(0,eq.U)(this)};var eG=n(43758);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.separableConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),(0,eG.U)(this,e,t,n,r,a,s)};var eQ=n(51417);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.sigmoid=function(){return this.throwIfDisposed(),(0,eQ.X)(this)};var eX=n(85582);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.sign=function(){return this.throwIfDisposed(),(0,eX.X)(this)};var eK=n(74449);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.sin=function(){return this.throwIfDisposed(),(0,eK.O)(this)};var eZ=n(49407);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.sinh=function(){return this.throwIfDisposed(),(0,eZ.R)(this)};var eJ=n(92959);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.slice=function(e,t){return this.throwIfDisposed(),(0,eJ.t)(this,e,t)};var eY=n(36486);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.softmax=function(e){return this.throwIfDisposed(),(0,eY.X)(this,e)};var e0=n(341);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.softplus=function(){return this.throwIfDisposed(),(0,e0.W)(this)};var e1=n(68644);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),(0,e1.f)(this,e,t)};var e2=n(394);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.split=function(e,t){return this.throwIfDisposed(),(0,e2.V)(this,e,t)};var e3=n(13681);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.sqrt=function(){return this.throwIfDisposed(),(0,e3._)(this)};var e4=n(97888);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.square=function(){return this.throwIfDisposed(),(0,e4.h)(this)};var e9=n(32765);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.squaredDifference=function(e){return this.throwIfDisposed(),(0,e9.$)(this,e)};var e6=n(53953);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.squeeze=function(e){return this.throwIfDisposed(),(0,e6.L)(this,e)};var e5=n(1495);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof a.es?[this,e]:[this,...e];return(0,e5.k)(n,t)};var e7=n(26449);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.step=function(e){return this.throwIfDisposed(),(0,e7.N)(this,e)};var e8=n(61396);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.stridedSlice=function(e,t,n,r,a,s,i,o){return this.throwIfDisposed(),(0,e8.N)(this,e,t,n,r,a,s,i,o)};var te=n(67435);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.sub=function(e){return this.throwIfDisposed(),(0,te.l)(this,e)};var tt=n(43174);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.sum=function(e,t){return this.throwIfDisposed(),(0,tt.S)(this,e,t)};var tn=n(45182);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.tan=function(){return this.throwIfDisposed(),(0,tn.O)(this)};var tr=n(30460);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.tanh=function(){return this.throwIfDisposed(),(0,tr.A)(this)};var ta=n(3490);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.tile=function(e){return this.throwIfDisposed(),(0,ta.G)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.toBool=function(){return this.throwIfDisposed(),(0,m.p)(this,"bool")},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.toFloat=function(){return this.throwIfDisposed(),(0,m.p)(this,"float32")},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.toInt=function(){return this.throwIfDisposed(),(0,m.p)(this,"int32")};var ts=n(59466);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.topk=function(e,t){return this.throwIfDisposed(),(0,ts.h)(this,e,t)};var ti=n(33072);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.transpose=function(e){return this.throwIfDisposed(),(0,ti.p)(this,e)};var to=n(30502);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.unique=function(e){return this.throwIfDisposed(),(0,to.T)(this,e)};var tu=n(1818);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),(0,tu.p)(this,e,t)};var tl=n(89501);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.unstack=function(e){return this.throwIfDisposed(),(0,tl.H)(this,e)};var tp=n(9670);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.where=function(e,t){return this.throwIfDisposed(),(0,tp.a)(e,this,t)};var th=n(33113);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,a.t3)().prototype.zerosLike=function(){return this.throwIfDisposed(),(0,th.P)(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */},97525:function(e,t,n){n.d(t,{GD:function(){return w},Gc:function(){return y},aI:function(){return T}});var r=n(94976),a=n(86406),s=n(44386);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class i extends r.serialization.Serializable{getConfig(){return{}}}class o extends i{apply(e,t=1){return a.py(e,t)}}o.className="elu",r.serialization.registerClass(o);class u extends i{apply(e){return r.selu(e)}}u.className="selu",r.serialization.registerClass(u);class l extends i{apply(e){return r.relu(e)}}l.className="relu",r.serialization.registerClass(l);class p extends i{apply(e){return(0,r.tidy)(()=>r.minimum(6,r.relu(e)))}}p.className="relu6",r.serialization.registerClass(p);class h extends i{apply(e){return e}}h.className="linear",r.serialization.registerClass(h);class c extends i{apply(e){return r.sigmoid(e)}}c.className="sigmoid",r.serialization.registerClass(c);class d extends i{apply(e){return a.HX(e)}}d.className="hardSigmoid",r.serialization.registerClass(d);class m extends i{apply(e){return r.softplus(e)}}m.className="softplus",r.serialization.registerClass(m);class f extends i{apply(e){return a.O(e)}}f.className="softsign",r.serialization.registerClass(f);class g extends i{apply(e){return r.tanh(e)}}g.className="tanh",r.serialization.registerClass(g);class y extends i{apply(e,t=-1){return r.softmax(e,t)}}y.className="softmax",r.serialization.registerClass(y);class b extends i{apply(e,t=-1){return r.logSoftmax(e,t)}}b.className="logSoftmax",r.serialization.registerClass(b);class N extends i{apply(e){return(0,r.tidy)(()=>r.tidy(()=>{let t=r.mul(.5,r.add(1,r.erf(r.div(e,Math.sqrt(2)))));return r.mul(e,t)}))}}N.className="gelu",r.serialization.registerClass(N);class x extends i{apply(e){return(0,r.tidy)(()=>r.mul(.5,r.mul(e,r.add(1,r.tanh(r.mul(r.sqrt(r.div(2,Math.PI)),r.add(e,r.mul(.044715,r.pow(e,3)))))))))}}x.className="gelu_new",r.serialization.registerClass(x);class k extends i{apply(e){return(0,r.tidy)(()=>r.mul(e,r.tanh(r.softplus(e))))}}k.className="mish",r.serialization.registerClass(k);class v extends i{apply(e,t=1){return(0,r.tidy)(()=>r.mul(r.sigmoid(r.mul(e,t)),e))}}function w(e){return e.getClassName()}function S(e,t={}){return(0,s.tU)(e,r.serialization.SerializationMap.getMap().classNameMap,t,"activation")}function T(e){if(null==e){let e={};return e.className="linear",e.config={},S(e)}if("string"==typeof e){let t={};return t.className=e,t.config={},S(t)}return e instanceof i?e:S(e)}v.className="swish",r.serialization.registerClass(v)},79996:function(e,t,n){let r;n.d(t,{Ho:function(){return s},rf:function(){return i}});var a=n(94976);function s(){return null==r&&(r=(0,a.backend)().epsilon()),r}function i(){return"channelsLast"}},73706:function(e,t,n){n.d(t,{L:function(){return a},s:function(){return i}});/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let r=0;function a(){return r++}let s={};function i(e=""){return e in s||(s[e]=0),s[e]+=1,e+s[e].toString()}},86406:function(e,t,n){n.d(t,{AK:function(){return x},GZ:function(){return y},Gg:function(){return b},HX:function(){return D},Iq:function(){return k},KC:function(){return F},O:function(){return I},Uz:function(){return c},a2:function(){return S},c9:function(){return d},dt:function(){return l},h6:function(){return v},mV:function(){return g},nG:function(){return N},pj:function(){return u},py:function(){return T},rv:function(){return A},rx:function(){return p},uI:function(){return f},xH:function(){return h}});var r=n(94976),a=n(96168),s=n(17995),i=n(37222),o=n(79996);function u(e,t){return r.cast(e,t)}function l(e,t=-1){let n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),r.reshape(e,n)}function p(e,t){return(0,r.tidy)(()=>{if(2!==e.shape.length)throw new s.nu(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return b(l(e,1),[1,t,1])})}function h(e){let t=[i.NS(e.shape)];return r.reshape(e,t)}function c(e){if(e.rank<=1)throw new s.nu(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);let t=[e.shape[0],i.NS(e.shape,1)];return r.reshape(e,t)}function d(e,t,n){return(0,r.tidy)(()=>{switch(e.rank){case 1:return r.slice1d(e,t,n);case 2:return r.slice2d(e,[t,0],[n,e.shape[1]]);case 3:return r.slice3d(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return r.slice4d(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return r.slice(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return r.slice(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new s.nu(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function m(e,t,n){return(0,r.tidy)(()=>{switch(e.rank){case 1:return r.slice1d(e,t,n);case 2:return r.slice2d(e,[0,t],[e.shape[0],n]);case 3:return r.slice3d(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return r.slice4d(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new s.nu(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function f(e,t,n,a){return(0,r.tidy)(()=>{switch(e.rank){case 1:return r.slice1d(e,t,n);case 2:switch(a){case 1:return d(e,t,n);case 2:return m(e,t,n);default:throw new s.nu(`The axis is not within the rank of the tensor ${a}`)}case 3:switch(a){case 1:return d(e,t,n);case 2:return r.slice3d(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return m(e,t,n);default:throw new s.nu(`The axis is not within the rank of the tensor ${a}`)}case 4:switch(a){case 1:return d(e,t,n);case 2:return r.slice4d(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return r.slice4d(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return m(e,t,n);default:throw new s.nu(`The axis is not within the rank of the tensor ${a}`)}default:throw new s.nu(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function g(e,t=-1){let n;return t<0&&(t=0!==(n=e[0].rank)?n:0),t===e[0].rank&&(t=-1),r.concat(e,t)}function y(e,t){switch(e.rank){case 1:return r.concat1d([e,t]);case 2:return r.concat2d([e,t],0);case 3:return r.concat3d([e,t],0);case 4:return r.concat4d([e,t],0);default:throw new s.nu(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function b(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new s.nu(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return r.tile(e,t)}function N(e,t=0,n=1,a,s){return r.randomNormal(e,t,n,a,s)}function x(e,t,n,a){if(e.rank<2||t.rank<2)throw new s.nj(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new s.nj(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`);if(2===e.rank&&2===t.rank)return r.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?w(e.rank,a,(0,o.rf)()):null,activation:n});{let s=e.shape.slice(),i=s.pop();e=r.reshape(e,[-1,i]);let u=t.shape.slice(),l=u.pop(),p=u.pop(),h=[...u,l],c=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=r.reshape(r.transpose(t,c),[p,-1]);let d=[...s,...h];return r.reshape(r.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?w(e.rank,a,(0,o.rf)()):null,activation:n}),d)}}function k(e,t,n){return(0,r.tidy)(()=>(t=Array.isArray(t)?(0,r.tensor1d)(t,"int32"):r.cast(t,"int32"),r.gather(e,t,n)))}function v(e){return r.mul(e,e)}function w(e,t,n){let a=t.shape;if(1!==t.rank&&t.rank!==e)throw new s.nu(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===a.length?r.reshape(t,[1,a[0],1,1,1]):r.reshape(t,[1,a[3],a[0],a[1],a[2]]);if("channelsLast"===n)return 1===a.length?r.reshape(t,[1,1,1,1,a[0]]):r.reshape(t,[1].concat(a))}else if(4===e){if("channelsFirst"===n)return 1===a.length?r.reshape(t,[1,a[0],1,1]):r.reshape(t,[1,a[2],a[0],a[1]]);if("channelsLast"===n)return 1===a.length?r.reshape(t,[1,1,1,a[0]]):r.reshape(t,[1].concat(a))}else if(3===e){if("channelsFirst"===n)return 1===a.length?r.reshape(t,[1,a[0],1]):r.reshape(t,[1,a[1],a[0]]);if("channelsLast"===n)return 1===a.length?r.reshape(t,[1,1,a[0]]):r.reshape(t,[1].concat(a))}else if(e<3)return t;throw new s.nu(`Unsupported input rank by biasAdd: ${t.rank}`)}function S(e,t,n){return(0,r.tidy)(()=>(null==n&&(n=(0,o.rf)()),(0,a.cj)(n),r.add(e,w(e.rank,t,n))))}function T(e,t=1){if(1!==t)throw new s.nj(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return r.elu(e)}function I(e){return(0,r.tidy)(()=>r.div(e,r.add(r.abs(e),1)))}function A(e,t,n,a){return(0,r.tidy)(()=>r.dropout(e,t,n,a))}function D(e){return(0,r.tidy)(()=>{let t=r.add(.5,r.mul(.2,e));return r.clipByValue(t,0,1)})}function F(e,t,n=!1){return n?e():t()}},34936:function(e,t,n){n.d(t,{Ay:function(){return c},BO:function(){return p},CZ:function(){return m},Sk:function(){return f},ex:function(){return l},iT:function(){return d},m$:function(){return g}});var r,a,s=n(94976),i=n(17995),o=n(66973),u=n(44386);(r=a||(a={}))[r.SILENT=0]="SILENT",r[r.VERBOSE=1]="VERBOSE";class l{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class p{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onEpochBegin(e,t)}async onEpochEnd(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onEpochEnd(e,t)}async onBatchBegin(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onBatchBegin(e,t)}async onBatchEnd(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onBatchEnd(e,t)}async onTrainBegin(e){for(let t of(null==e&&(e={}),this.callbacks))await t.onTrainBegin(e)}async onTrainEnd(e){for(let t of(null==e&&(e={}),this.callbacks))await t.onTrainEnd(e)}}class h extends l{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});let n=null==t.size?0:t.size;for(let e in this.seen+=n,t){let r=t[e];if("number"==typeof r)this.totals.hasOwnProperty(e)||(this.totals[e]=0),this.totals[e]=this.totals[e]+r*n;else{let t;e in this.totals?t=this.totals[e]:this.totals[e]=0;let a=(0,s.tidy)(()=>(0,s.add)(this.totals[e],(0,s.mul)(r,n)));this.totals[e]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(let e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?t[e]=this.totals[e]/this.seen:(0,s.tidy)(()=>{let n=(0,s.mul)((0,s.div)(1,this.seen),this.totals[e]);t[e]=n,this.totals[e].dispose(),(0,s.keep)(t[e])}))}}class c extends l{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){for(let n in null==t&&(t={}),this.epoch.push(e),t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let r in this.history){let a=this.history[r];for(let s=0;s<a.length;++s)if("number"!=typeof a[s]){let i=a[s];e.push(i.data()),t.push(r),n.push(s)}}let r=await Promise.all(e);for(let e=0;e<r.length;++e)this.history[t[e]][n[e]].dispose(),this.history[t[e]][n[e]]=r[e][0]}}class d extends l{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||s.nextFrame,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");s.util.isNumber(this.yieldEvery)&&(this.maybeWait=u.Ds(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let r=[];null!=this.yield&&(await (0,o.Z)(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await (0,o.Z)(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];null!=this.epochEnd&&(await (0,o.Z)(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await (0,o.Z)(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];null!=this.batchEnd&&(await (0,o.Z)(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):s.util.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await (0,o.Z)(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await (0,o.Z)(e),await this.trainEnd(e))}}function m(e,t){return(null==e&&(e={}),e instanceof l)?[e]:Array.isArray(e)&&e[0]instanceof l?e:u.zZ(e).map(e=>new d(e,t))}class f{constructor(){}static registerCallbackConstructor(e,t){s.util.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),f.checkForDuplicate(t),null==f.constructors[e]&&(f.constructors[e]=[]),f.constructors[e].push(t)}static checkForDuplicate(e){for(let t in f.constructors)f.constructors[+t].forEach(t=>{if(t===e)throw new i.nu("Duplicate callback constructor.")})}static clear(){f.constructors={}}static createCallbacks(e){let t=[];for(let n in f.constructors){let r=+n;e>=r&&t.push(...f.constructors[r])}return t.map(e=>new e)}}function g(e,t,n,r,a,s,i,o,u){let l=new c,d=[new h,...f.createCallbacks(t)];null!=e&&d.push(...e),d.push(l);let m=new p(d);return m.setParams({epochs:n,initialEpoch:r,samples:a,steps:s,batchSize:i,verbose:t,doValidation:o,metrics:u}),{callbackList:m,history:l}}f.constructors={}},96168:function(e,t,n){n.d(t,{Lp:function(){return l},MU:function(){return c},cj:function(){return i},f4:function(){return h},w8:function(){return d},wU:function(){return o},zb:function(){return u}});var r=n(77617),a=n(44386);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let s=new Map;function i(e){(0,a.xn)(r.PS,"DataFormat",e)}function o(e){(0,a.xn)(r.Mz,"InterpolationFormat",e)}function u(e){(0,a.xn)(r.zx,"PaddingMode",e)}function l(e){(0,a.xn)(r.MK,"PoolMode",e)}let p=[];function h(e,t){p.push(e);try{let e=t();return p.pop(),e}catch(e){throw p.pop(),e}}function c(e){if(!f(e))throw Error("Not a valid tensor name: '"+e+"'");return(0===p.length?"":p.join("/")+"/")+e}function d(e){if(!f(e))throw Error("Not a valid tensor name: '"+e+"'");s.has(e)||s.set(e,0);let t=s.get(e);if(s.set(e,s.get(e)+1),!(t>0))return e;{let n=`${e}_${t}`;return s.set(n,1),n}}let m=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function f(e){return!!e.match(m)}},3211:function(e,t,n){n.d(t,{Ad:function(){return f},Yq:function(){return u},cK:function(){return l},he:function(){return p},iL:function(){return h},xF:function(){return d}});var r=n(94976),a=n(79996),s=n(44386);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i(e,t){return(0,r.tidy)(()=>r.sqrt(r.sum(r.mul(e,e),t,!0)))}class o extends r.serialization.Serializable{getConfig(){return{}}}class u extends o{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,r.tidy)(()=>{let t=i(e,this.axis),n=r.clipByValue(t,0,this.maxValue);return r.mul(e,r.div(n,r.add((0,a.Ho)(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}u.className="MaxNorm",r.serialization.registerClass(u);class l extends o{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,r.tidy)(()=>r.div(e,r.add((0,a.Ho)(),i(e,this.axis))))}getConfig(){return{axis:this.axis}}}l.className="UnitNorm",r.serialization.registerClass(l);class p extends o{apply(e){return r.relu(e)}}p.className="NonNeg",r.serialization.registerClass(p);class h extends o{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,r.tidy)(()=>{let t=i(e,this.axis),n=r.add(r.mul(this.rate,r.clipByValue(t,this.minValue,this.maxValue)),r.mul(1-this.rate,t));return r.mul(e,r.div(n,r.add((0,a.Ho)(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}h.className="MinMaxNorm",r.serialization.registerClass(h);let c={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function d(e){return(0,s.Kj)(e)}function m(e,t={}){return(0,s.tU)(e,r.serialization.SerializationMap.getMap().classNameMap,t,"constraint")}function f(e){return null==e?null:"string"==typeof e?m({className:e in c?c[e]:e,config:{}}):e instanceof o?e:m(e)}},42005:function(e,t,n){n.d(t,{l2:function(){return l},ht:function(){return d},kS:function(){return c}});var r=n(94976),a=n(17995);/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class s{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}var i=n(44386),o=n(41573),u=n(3692);class l{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof l)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,n){if(null==this.id2Value[e.id])this.id2Value[e.id]=/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return(0,r.cast)(t,e.dtype)}catch(n){throw new a.nu(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n);else throw new a.nu(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof u.Iy){if(null!=this.id2Value[e.id])return this.id2Value[e.id];throw new a.nu(`Nonexistent key: ${e.name}`)}{let t=this.name2Id[e];if(null==t)throw new a.nu(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof u.Iy){if(null!=this.id2Value[e.id])return this.id2Mask[e.id];throw new a.nu(`Nonexistent key: ${e.name}`)}{let t=this.name2Id[e];if(null==t)throw new a.nu(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&(0,r.dispose)(this.id2Mask)}}let p=new s,h=new s;function c(e){null!=p&&p.setMaxEntries(e),null!=h&&h.setMaxEntries(e)}function d(e,t,n,a){let s;let u=null!=n&&n.training,c=Array.isArray(e),d=c?e:[e],f=d.map(e=>e.name),g=[],y=t.names();for(let e of f)-1!==y.indexOf(e)?g.push(t.getValue(e)):g.push(null);null!=a&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);let b=f.join(",")+"|"+t.names().sort().join(","),N=p.get(b);if(null==N){let e=function(e,t){r.util.assert(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],a={};if(1===e.length){let r=m(e[0],t);n=r.sorted,a=r.recipientMap}else{let r=new Set;for(let s of e){let{sorted:e,recipientMap:i}=m(s,t);for(let t of e)r.has(t.name)||(n.push(t),r.add(t.name));for(let e in i)null==a[e]&&(a[e]=new Set),i[e].forEach(t=>a[e].add(t))}}return{sorted:n,recipientCounts:function(e){let t={};for(let n in e)t[n]=e[n].size;return t}(a)}}(d,t);N=e.sorted,s=e.recipientCounts,p.put(b,N),h.put(b,s)}s={},u||Object.assign(s,h.get(b));let x=new l(t);for(let e=0;e<N.length;++e){if(null!=a){let e=(0,r.memory)().numTensors;e>a.maxNumTensors&&(a.maxNumTensors=e),e<a.minNumTensors&&(a.minNumTensors=e)}let l=N[e],p=l.sourceLayer;if(p instanceof o.l)continue;let h=[],c=[],d=[],m=!1;for(let e of l.inputs){let n=x.getValue(e),r=x.getMask(e);h.push(n),c.push(r),null!=r&&(m=!0),u||(s[e.name]--,0!==s[e.name]||t.hasKey(e)||-1!==f.indexOf(e.name)||n.isDisposed||!0===e.sourceLayer.stateful||d.push(n))}m&&((n=n||{}).mask=c[0]);let y=(0,i.zZ)(p.apply(h,n)),b=null;p.supportsMasking&&(b=p.computeMask(h,c));let k=function(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(let r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}(l),v=Array.isArray(k)?k:[k];for(let e=0;e<v.length;++e){x.hasKey(v[e])||x.add(v[e],y[e],Array.isArray(b)?b[0]:b);let t=f.indexOf(v[e].name);-1!==t&&(g[t]=y[e])}u||(0,r.dispose)(d)}return x.disposeMasks(),c?g:g[0]}function m(e,t){let n=new Set,r=[],a={};for(let e of t.names())n.add(e);let s=[],i=[];for(s.push(e);s.length>0;){let e=s[s.length-1];if(n.has(e.name)){s.pop();continue}let t=i[i.length-1]===s.length-1;if(0===e.inputs.length||t)s.pop(),r.push(e),n.add(e.name),t&&i.pop();else for(let t of(i.push(s.length-1),e.inputs))null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),n.has(t.name)||s.push(t)}return{sorted:r,recipientMap:a}}},41573:function(e,t,n){n.d(t,{I:function(){return u},l:function(){return o}});var r=n(94976),a=n(73706),s=n(17995),i=n(3692);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o extends i.mh{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:(0,a.s)("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new s.nu("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new s.nu("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new s.nu("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let r=new i.Iy(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new i.NB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new s.nu(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function u(e){if(null==e.batchShape&&null==e.shape)throw Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new s.nu("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new o({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}o.className="InputLayer",r.serialization.registerClass(o)},3692:function(e,t,n){n.d(t,{Iy:function(){return d},NB:function(){return f},Zg:function(){return c},hA:function(){return function e(t,n,r){if((null==n||null!=r&&r>0)&&(n=t.sourceLayer,r=t.nodeIndex),0===n.inboundNodes.length)return[t];{let t=n.inboundNodes[r];if(0===t.inboundLayers.length)return t.inputTensors;{let n=[];for(let r=0;r<t.inboundLayers.length;r++)for(let a of e(t.inputTensors[r],t.inboundLayers[r],t.nodeIndices[r]))-1===n.indexOf(a)&&n.push(a);return n}}}},mh:function(){return y}});var r=n(94976),a=n(73706),s=n(96168),i=n(17995),o=n(87882),u=n(44386),l=n(69075),p=n(61690),h=n(33217);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class c{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class d{constructor(e,t,n,r,i,o,u){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=u,this.id=(0,a.L)(),null!=o&&(this.originalName=(0,s.MU)(o),this.name=(0,s.w8)(this.originalName)),this.rank=t.length}}let m=0;class f{constructor(e,t){for(let n of(this.callArgs=t,this.id=m++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes,e.inboundLayers))null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let g=0;class y extends r.serialization.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=g++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let e=this.getClassName();t=u.D1(e)+"_"+(0,a.s)(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new i.LH(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new i.nu(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return u.Bq(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return u.Bq(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new i.j1(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new i.j1(`Layer ${this.name} is not connected, no input to return.`);return u.Bq(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new i.j1(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new i.j1(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return u.Bq(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){let t=u.zZ(e);if(null==this.inputSpec||0===this.inputSpec.length)return;let n=u.zZ(this.inputSpec);if(t.length!==n.length)throw new i.nu(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let e=0;e<t.length;e++){let r=t[e],a=n[e];if(null==a)continue;let s=r.rank;if(null!=a.ndim&&s!==a.ndim)throw new i.nu(`Input ${e} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${s}`);if(null!=a.maxNDim&&s>a.maxNDim)throw new i.nu(`Input ${e} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${s}`);if(null!=a.minNDim&&s<a.minNDim)throw new i.nu(`Input ${e} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${s}.`);if(null!=a.dtype&&r.dtype!==a.dtype)throw new i.nu(`Input ${e} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${r.dtype}.`);if(a.axes){let t=r.shape;for(let n in a.axes){let r=Number(n),s=a.axes[n],o=r>=0?t[r]:t[t.length+r];if(null!=s&&-1===[s,null].indexOf(o))throw new i.nu(`Input ${e} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${s} but got shape ${t}.`)}}if(null!=a.shape)for(let t=0;t<a.shape.length;++t){let n=a.shape[t],s=r.shape[t];if(null!=n&&null!=s&&n!==s)throw new i.nu(`Input ${e} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=u.zZ(e),r=function(e){let t=!0;for(let n of u.zZ(e))if(!(n instanceof d)){t=!1;break}return t}(e),a=function(e){let t=!0;for(let n of u.zZ(e))if(n instanceof d){t=!1;break}return t}(e);if(r===a)throw new i.nu("Arguments to apply() must be all SymbolicTensors or all Tensors");return(0,s.f4)(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let t=[];for(let n of u.zZ(e))t.push(n.shape);this.build(u.Bq(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);let a=u.zZ(r),s=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),s.push(e);if(r=u.Bq(s),null!=this.activityRegularizer)throw new i.nj("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{let n;let r=function(e){e=u.zZ(e);let t=[];for(let n of e)t.push(n.shape);return u.Bq(t)}(e),a=this.computeOutputShape(r),s="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?r[0]:r),n=null!=a&&a.length>0&&Array.isArray(a[0])?a.map((n,r)=>new d(s,n,this,u.zZ(e),t,this.name,r)):new d(s,a,this,u.zZ(e),t,this.name),this.addInboundNode(e,n,null,null,r,a,t),this._refCount++,null!=this.activityRegularizer)throw new i.nj("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape){if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new i.j1(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new i.j1(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new i.LH(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return p.t(this.weights)}build(e){this.built=!0}getWeights(e=!1){return(0,h.FQ)(e?this.trainableWeights:this.weights)}setWeights(e){(0,r.tidy)(()=>{let t=this.weights;if(t.length!==e.length)throw new i.nu(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;let n=[],a=(0,h.FQ)(t);for(let s=0;s<a.length;++s){let o=a[s],u=t[s],l=e[s];if(!r.util.arraysEqual(o.shape,l.shape))throw new i.nu(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);n.push([u,l])}(0,h.zb)(n)})}addWeight(e,t,n,r,a,s,u,l){if(-1!==this._addedWeightNames.indexOf(e))throw new i.nu(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=l?l():(0,o.L5)("zeros"));let p=r.apply(t,n),c=new h.fU(p,n,e,s,u);return p.dispose(),null!=a&&this.addLoss(()=>a.apply(c.read())),null==s&&(s=!0),s?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=u.zZ(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(Array.isArray(t))t.forEach(e=>{if(null!=e)throw TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;let r=this.computeMask(e,n),a=u.zZ(t),s=u.zZ(r);if(a.length!==s.length)throw Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let e=0;e<a.length;e++)a[e].kerasMask=s[e]}addInboundNode(e,t,n,r,a,s,i=null){let o=u.zZ(e);t=u.zZ(t),n=u.zZ(n),r=u.zZ(r),a=l.x6(a),s=l.x6(s);let p=[],h=[],c=[];for(let e of o)p.push(e.sourceLayer),h.push(e.nodeIndex),c.push(e.tensorIndex);new f({outboundLayer:this,inboundLayers:p,nodeIndices:h,tensorIndices:c,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:s},i);for(let e=0;e<t.length;e++)t[e].sourceLayer=this,t[e].nodeIndex=this.inboundNodes.length-1,t[e].tensorIndex=e}getConfig(){let e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}},6435:function(e,t,n){n.d(t,{D:function(){return d},y:function(){return h}});var r=n(94976),a=n(34936),s=n(17995),i=n(66973),o=n(44386),u=n(34379);function l(e,t){let n,a;n=t.xs,a=t.ys,r.util.assert(null!=n&&null!=a,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);let s=p("input",e.inputNames,n),i=p("output",e.outputNames,a),o=s[0].shape[0];r.util.assert(s.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),r.util.assert(i.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let t=0;t<s.length;t++)r.util.assert(s[t].shape[0]===o,()=>`Batch size mismatch: input ${e.inputNames[t]} has ${s[t].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);for(let t=0;t<i.length;t++)r.util.assert(i[t].shape[0]===o,()=>`Batch size mismatch: output ${e.outputNames[t]} has ${i[t].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);return{xs:s,ys:i}}function p(e,t,n){if(n instanceof r.Tensor)return[n];if(Array.isArray(n))return r.util.assert(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{let r=[];for(let a of t){if(null==n[a])throw new s.nu(`The feature data generated by the dataset lacks the required ${e} key '${a}'.`);r.push(n[a])}return r}}async function h(e,t,n){let p=null!=n.batchesPerEpoch;if(r.util.assert(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),r.util.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),r.util.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),r.util.assert(!p||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),r.util.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let h,d,m,f;let g=null!=n.validationData;if(g){if(c(n.validationData))r.util.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{let e=function(e){if(3===e.length)throw new s.nj("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);h=e.xs,d=e.ys}}let y=e.makeTrainFunction(),b=e.getDedupedMetricsNames();m=g?b.slice().concat(b.map(e=>"val_"+e)):b.slice();let N=(0,a.CZ)(n.callbacks,n.yieldEvery),x=null==n.verbose?1:n.verbose,{callbackList:k,history:v}=(0,a.m$)(N,x,n.epochs,null,null,(f=null,null!=n.batchesPerEpoch?f=n.batchesPerEpoch:Number.isFinite(t.size)&&(f=t.size),f),null,g,m);k.setModel(e),e.history=v,await k.onTrainBegin(),e.stopTraining_=!1;let w=null==n.initialEpoch?0:n.initialEpoch,S=await t.iterator();for(;w<n.epochs;){let a={};await k.onEpochBegin(w);let s=0,m=0;for(p||(S=await t.iterator());!p||s<n.batchesPerEpoch;){let t=await S.next();if(p&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${s} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(null!=t.value){let{xs:a,ys:o}=l(e,t.value),p={};p.batch=m,p.size=a[0].shape[0],await k.onBatchBegin(m,p);let h=[];if(null!=n.classWeight){let t=(0,u.Vf)(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)h.push(await (0,u.tl)(o[e],null,t[e]))}let c=a.concat(o).concat(h),d=y(c);r.dispose(c);for(let e=0;e<b.length;++e){let t=b[e],n=d[e];p[t]=n,r.keep(n)}await k.onBatchEnd(m,p),(0,i.i)(p),m++,s++}if(p?s>=n.batchesPerEpoch:t.done){if(g){let t;t=c(n.validationData)?(0,o.zZ)(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):(0,o.zZ)(e.evaluate(h,d,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)a[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await k.onEpochEnd(w,a),w++,e.stopTraining_)break}return await k.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function c(e){return"function"==typeof e.iterator}async function d(e,t,n){let a=null!=(n=n||{}).batches,i=e.testFunction,u=[];if(n.verbose>0)throw new s.nj("Verbose mode is not implemented yet.");r.util.assert(!a||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);let p="function"==typeof t.next?t:await t.iterator(),h=0,c=0;for(;!a||c<n.batches;){let t=await p.next();if(u=r.tidy(()=>{if(t.value){let{xs:n,ys:a}=l(e,t.value),s=n.concat(a),o=r.tidy(()=>i(s));if(r.dispose(s),0===c)for(let e=0;e<o.length;++e)u.push((0,r.scalar)(0));let p=s[0].shape[0];for(let e=0;e<o.length;++e){let t=o[e],n=u[e];u[e]=r.tidy(()=>r.add(u[e],r.mul(p,t))),c>0&&r.dispose(n)}r.dispose(o),h+=p,++c}return u}),t.done){a&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let e=0;e<u.length;++e){let t=u[e];u[e]=r.div(u[e],h),r.dispose(t)}return(0,o.Bq)(u)}},78442:function(e,t,n){n.d(t,{R_:function(){return o},YV:function(){return u},YX:function(){return function e(t,n){return r.tidy(()=>null==t?null:Array.isArray(t)?t.map(t=>e(t,n)):(0,a.Iq)(t,"int32"===n.dtype?n:r.cast(n,"int32")))}},fQ:function(){return s},kS:function(){return l},sf:function(){return i}});var r=n(94976),a=n(86406);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s(e){r.util.assert(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function i(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>(0,a.c9)(e,t,n-t)):(0,a.c9)(e,t,n-t)}function o(e,t){let n=[],r=0,a=null;for(;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function u(e){let t=[];e instanceof r.Tensor&&(e=[e]);for(let n=0;n<e.length;++n){let r=e[n];if(1===r.rank)t.push((0,a.dt)(r,1));else if(0===r.rank)throw Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");else t.push(r)}return t}function l(e,t){if(null==e)return;let n=[];if(t instanceof r.Tensor)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(let e in t){let r=t[e];n.push(r.id)}let a=[];if(e instanceof r.Tensor)-1===n.indexOf(e.id)&&a.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&a.push(e)});else if(null!=e)for(let t in e){let r=e[t];-1===n.indexOf(r.id)&&a.push(r)}a.forEach(e=>{e.isDisposed||e.dispose()})}},34379:function(e,t,n){n.d(t,{Vf:function(){return a},mo:function(){return i},tl:function(){return s}});var r=n(94976);function a(e,t){return(/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function(e,t,n){let r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){let n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}(e,t,"classWeight"))}async function s(e,t,n,a){if(null!=t||null!=a)throw Error("Support sampleWeight is not implemented yet");if(null==n)return null;{let t=(0,r.tidy)(()=>{if(1===e.shape.length)return(0,r.clone)(e);if(2===e.shape.length){if(e.shape[1]>1)return(0,r.argMax)(e,1);if(1===e.shape[1])return(0,r.reshape)(e,[e.shape[0]]);throw Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await t.data());(0,r.dispose)(t);let s=[];return a.forEach(e=>{if(null==n[e])throw Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);s.push(n[e])}),(0,r.tensor1d)(s,"float32")}}function i(e,t){return(0,r.mul)(e,t)}},17995:function(e,t,n){n.d(t,{LH:function(){return a},j1:function(){return r},nj:function(){return i},nu:function(){return s},ps:function(){return o}});/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}class a extends Error{constructor(e){super(e),Object.setPrototypeOf(this,a.prototype)}}class s extends Error{constructor(e){super(e),Object.setPrototypeOf(this,s.prototype)}}class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,i.prototype)}}class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o.prototype)}}},17418:function(e,t,n){n.d(t,{FB:function(){return i.FB},Pe:function(){return u},gl:function(){return p},o4:function(){return o},qH:function(){return l}});var r=n(34936),a=n(41573),s=n(91431),i=n(25732);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o(e){return new s.QV(e)}function u(e){return new i.sb(e)}function l(e){return(0,a.I)(e)}function p(e,t){r.Sk.registerCallbackConstructor(e,t)}},87882:function(e,t,n){n.d(t,{sr:function(){return m},Jf:function(){return k},sq:function(){return x},RP:function(){return v},rB:function(){return w},iJ:function(){return b},m7:function(){return h},V9:function(){return S},yD:function(){return T},M6:function(){return d},vG:function(){return I},MD:function(){return g},Is:function(){return f},w8:function(){return y},xc:function(){return N},H_:function(){return c},L5:function(){return E},Cx:function(){return F}});var r=n(94976),a=n(86406),s=n(96168),i=n(17995);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let o=["fanIn","fanOut","fanAvg"],u=["normal","uniform","truncatedNormal"];var l=n(44386),p=n(37222);class h extends r.serialization.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class c extends h{apply(e,t){return(0,r.zeros)(e,t)}}c.className="Zeros",r.serialization.registerClass(c);class d extends h{apply(e,t){return(0,r.ones)(e,t)}}d.className="Ones",r.serialization.registerClass(d);class m extends h{constructor(e){if(super(),"object"!=typeof e)throw new i.nu(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new i.nu(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return(0,r.tidy)(()=>(0,r.mul)((0,r.scalar)(this.value),(0,r.ones)(e,t)))}getConfig(){return{value:this.value}}}m.className="Constant",r.serialization.registerClass(m);class f extends h{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return(0,r.randomUniform)(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}f.className="RandomUniform",r.serialization.registerClass(f);class g extends h{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new i.nj(`randomNormal does not support dType ${t}.`);return a.nG(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}g.className="RandomNormal",r.serialization.registerClass(g);class y extends h{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new i.nj(`truncatedNormal does not support dType ${t}.`);return(0,r.truncatedNormal)(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}y.className="TruncatedNormal",r.serialization.registerClass(y);class b extends h{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return(0,r.tidy)(()=>{if(2===e.length&&e[0]===e[1])return(0,r.mul)(this.gain,(0,r.eye)(e[0]));throw new i.nu("Identity matrix initializer can only be used for 2D square matrices.")})}getConfig(){return{gain:this.gain}}}b.className="Identity",r.serialization.registerClass(b);class N extends h{constructor(e){var t,n;if(super(),e.scale<0)throw new i.nu(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,(0,l.xn)(o,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,n=this.distribution,(0,l.xn)(u,"Distribution",n),this.seed=e.seed}apply(e,t){let n=function(e,t="channelsLast"){let n,r;if((0,s.cj)(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){let t=(0,p.NS)(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){let t=(0,p.NS)(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{let t=(0,p.NS)(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),a=n[0],o=n[1],u=this.scale;if("fanIn"===this.mode?u/=Math.max(1,a):"fanOut"===this.mode?u/=Math.max(1,o):u/=Math.max(1,(a+o)/2),"normal"===this.distribution){let n=Math.sqrt(u);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new i.nj(`${this.getClassName()} does not support dType ${t}.`);return(0,r.truncatedNormal)(e,0,n,t,this.seed)}{let n=Math.sqrt(3*u);return(0,r.randomUniform)(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}N.className="VarianceScaling",r.serialization.registerClass(N);class x extends N{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return N.className}}x.className="GlorotUniform",r.serialization.registerClass(x);class k extends N{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return N.className}}k.className="GlorotNormal",r.serialization.registerClass(k);class v extends N{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return N.className}}v.className="HeNormal",r.serialization.registerClass(v);class w extends N{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return N.className}}w.className="HeUniform",r.serialization.registerClass(w);class S extends N{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return N.className}}S.className="LeCunNormal",r.serialization.registerClass(S);class T extends N{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return N.className}}T.className="LeCunUniform",r.serialization.registerClass(T);class I extends h{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return(0,r.tidy)(()=>{if(e.length<2)throw new i.nj("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw TypeError(`Unsupported data type ${t}.`);let n=r.util.sizeFromShape(e.slice(0,-1)),s=e[e.length-1],o=n*s;o>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${o}) elements: Slowness may result.`);let u=a.nG([Math.max(s,n),Math.min(s,n)],0,1,t,this.seed),l=r.linalg.qr(u,!1),p=l[0],h=l[1].flatten().stridedSlice([0],[Math.min(s,n)*Math.min(s,n)],[Math.min(s,n)+1]);return p=(0,r.mul)(p,h.sign()),n<s&&(p=p.transpose()),(0,r.mul)((0,r.scalar)(this.gain),p.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}I.className="Orthogonal",r.serialization.registerClass(I);let A={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function D(e,t={}){return(0,l.tU)(e,r.serialization.SerializationMap.getMap().classNameMap,t,"initializer")}function F(e){return(0,l.Kj)(e)}function E(e){if("string"==typeof e){let t=e in A?A[e]:e;if("GlorotNormal"===t)return new k;if("GlorotUniform"===t)return new x;{if("HeNormal"===t)return new v;if("HeUniform"===t)return new w;if("LeCunNormal"===t)return new S;if("LeCunUniform"===t)return new T;let e={};return e.className=t,e.config={},D(e)}}return e instanceof h?e:D(e)}},77617:function(e,t,n){n.d(t,{MK:function(){return i},Mz:function(){return a},PS:function(){return r},eY:function(){return o},zx:function(){return s}});/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let r=["channelsFirst","channelsLast"],a=["nearest","bilinear"],s=["valid","same","causal"],i=["max","avg"],o=["sum","mul","concat","ave"]},5761:function(e,t,n){n.d(t,{Cv:function(){return m},Gc:function(){return g},Ln:function(){return f},UH:function(){return c},_H:function(){return d},qi:function(){return h}});var r=n(94976),a=n(97525),s=n(3211),i=n(3692),o=n(17995),u=n(87882),l=n(56419),p=n(69075);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class h extends i.mh{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=(0,p.nQ)(e);let n=(0,r.relu)(e);return null!=this.maxValue&&(n=(0,r.clipByValue)(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue};return Object.assign(e,super.getConfig()),e}}h.className="ReLU",r.serialization.registerClass(h);class c extends i.mh{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=(0,p.nQ)(e);return(0,r.leakyRelu)(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha};return Object.assign(e,super.getConfig()),e}}c.className="LeakyReLU",r.serialization.registerClass(c);class d extends i.mh{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=(0,u.L5)(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=(0,l.EC)(e.alphaRegularizer),this.alphaConstraint=(0,s.Ad)(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if("number"==typeof e.sharedAxes)this.sharedAxes=[e.sharedAxes];else throw new o.nu(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){let t=(e=(0,p.Wf)(e)).slice(1);if(null!=this.sharedAxes)for(let e of this.sharedAxes)t[e-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(null!=this.sharedAxes)for(let t=1;t<e.length;++t)n[t]=e[t];this.inputSpec=[new i.Zg({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=(0,p.nQ)(e),(0,r.prelu)(e,this.alpha.read())}getConfig(){let e={alphaInitializer:(0,u.Cx)(this.alphaInitializer),alphaRegularizer:(0,l.SG)(this.alphaRegularizer),alphaConstraint:(0,s.xF)(this.alphaConstraint),sharedAxes:this.sharedAxes};return Object.assign(e,super.getConfig()),e}}d.className="PReLU",r.serialization.registerClass(d);class m extends i.mh{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new o.nj(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=(0,p.nQ)(e);return(0,r.elu)(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha};return Object.assign(e,super.getConfig()),e}}m.className="ELU",r.serialization.registerClass(m);class f extends i.mh{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){let n=(0,p.nQ)(e);return(0,r.mul)(n,(0,r.cast)((0,r.greater)(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta};return Object.assign(e,super.getConfig()),e}}f.className="ThresholdedReLU",r.serialization.registerClass(f);class g extends i.mh{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=new a.Gc().apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return(0,r.tidy)(()=>{let n=(0,p.nQ)(e),a=t.mask;if(null!=a){let e=(0,r.mul)((0,r.sub)((0,r.ones)(n.shape),(0,r.cast)(a,n.dtype)),(0,r.scalar)(-1e9));n=(0,r.add)(n,e)}return this.axis instanceof Array?this.axis.length>1?(0,r.exp)((0,r.sub)(n,(0,r.logSumExp)(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis};return Object.assign(e,super.getConfig()),e}}g.className="Softmax",r.serialization.registerClass(g)},75168:function(e,t,n){n.d(t,{$:function(){return m}});var r=n(94976),a=n(79996),s=n(86406),i=n(96168),o=n(3211),u=n(17995),l=n(87882),p=n(56419),h=n(22615),c=n(69075),d=n(53299);class m extends d.nx{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=(0,l.L5)(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=(0,o.Ad)(e.depthwiseConstraint),this.depthwiseRegularizer=(0,p.EC)(e.depthwiseRegularizer)}build(e){if((e=(0,c.Wf)(e)).length<4)throw new u.nu(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new u.nu(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);let n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return(0,r.tidy)(()=>{let t=/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function(e,t,n=[1,1],s="valid",o,l){return(0,r.tidy)(()=>{null==o&&(o=(0,a.rf)()),(0,i.cj)(o);let l=(0,d.aP)(e,o);if(4!==e.rank)throw new u.nu(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new u.nu(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return l=r.depthwiseConv2d(l,t,n,"same"===s?"same":"valid","NHWC",null),"channelsFirst"===o&&(l=r.transpose(l,[0,3,1,2])),l})}(e=(0,c.nQ)(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,0);return this.useBias&&(t=s.a2(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=(0,c.Wf)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=(0,h.kt)(t,this.kernelSize[0],this.padding,this.strides[0]),s=(0,h.kt)(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,s]:[e[0],a,s,r]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=(0,l.Cx)(this.depthwiseInitializer),e.depthwiseRegularizer=(0,p.SG)(this.depthwiseRegularizer),e.depthwiseConstraint=(0,o.xF)(this.depthwiseRegularizer),e}}m.className="DepthwiseConv2D",r.serialization.registerClass(m)},34247:function(e,t,n){n.d(t,{a:function(){return f},p:function(){return g}});var r=n(94976),a=n(86406),s=n(96168),i=n(3692),o=n(17995),u=n(87882),l=n(22615),p=n(44386),h=n(69075),c=n(31529),d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class m extends c.$p{constructor(e){if(e.unroll)throw new o.nj("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new o.nj("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new i.Zg({ndim:5})]}call(e,t){return r.tidy(()=>{if(null!=this.cell.dropoutMask&&(r.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(r.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new o.nu("ConvRNN2D cell does not support constants");let n=null==t?null:t.mask,a=null==t?null:t.training,s=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:s})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...[,,].fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return r.tidy(()=>{let{stateSize:t}=this.cell,n=e.shape,a=this.computeSingleOutputShape(n),s=[a[0],...a.slice(2)],i=r.zeros(s);return Array.isArray(t)?Array(t.length).fill(i):[i]})}resetStates(e,t=!1){r.tidy(()=>{if(!this.stateful)throw new o.j1("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,a=this.computeSingleOutputShape(n),s=[a[0],...a.slice(2)];if(null==n[0])throw new o.nu("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>r.zeros(s)):this.states_=[r.zeros(s)];else if(null==e)r.dispose(this.states_),null!=this.keptStates&&(r.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>r.zeros(s)):this.states_[0]=r.zeros(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new o.nu(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):r.dispose(this.states_);for(let t=0;t<this.states_.length;++t){let n=e[t];if(!r.util.arraysEqual(n.shape,s))throw new o.nu(`State ${t} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map(e=>r.keep(e.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:s,dilationRate:i}=this.cell,o="channelsFirst"===t,u=e[o?3:2],p=e[o?4:3],h=(0,l.kt)(u,r[0],a,s[0],i[0]),c=(0,l.kt)(p,r[1],a,s[1],i[1]);return[...e.slice(0,2),...o?[n,h,c]:[h,c,n]]}}m.className="ConvRNN2D";class f extends c.U7{constructor(e){let{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:i,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,(0,p.iQ)(this.filters,"filters"),this.kernelSize=(0,l.AF)(n,2,"kernelSize"),this.kernelSize.forEach(e=>(0,p.iQ)(e,"kernelSize")),this.strides=(0,l.AF)(r||1,2,"strides"),this.strides.forEach(e=>(0,p.iQ)(e,"strides")),this.padding=a||"valid",(0,s.zb)(this.padding),this.dataFormat=i||"channelsLast",(0,s.cj)(this.dataFormat),this.dilationRate=(0,l.AF)(o||1,2,"dilationRate"),this.dilationRate.forEach(e=>(0,p.iQ)(e,"dilationRate"))}build(e){var t;e=(0,h.Wf)(e);let n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new o.nu(`The channel dimension of the input should be defined. Found ${e[n]}`);let s=e[n],i=this.kernelSize.concat([s,4*this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let l=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){let n=this.biasInitializer,s=this.filters;e=new((t=class extends u.m7{apply(e,t){let i=n.apply([s]),o=r.ones([s]),u=n.apply([2*s]);return a.mV([i,o,u])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return r.tidy(()=>{if(3!==e.length)throw new o.nu(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training||!1,a=e[0],s=e[1],i=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=(0,c._0)({ones:()=>r.onesLike(a),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let u=this.dropoutMask,l=(e,t,n)=>t&&t[n]?r.mul(t[n],e):e,p=l(a,u,0),h=l(a,u,1),d=l(a,u,2),m=l(a,u,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=(0,c._0)({ones:()=>r.onesLike(s),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let f=this.recurrentDropoutMask,g=l(s,f,0),y=l(s,f,1),b=l(s,f,2),N=l(s,f,3),[x,k,v,w]=r.split(this.kernel.read(),4,3),[S,T,I,A]=this.useBias?r.split(this.bias.read(),4):[null,null,null,null];p=this.inputConv(p,x,S,this.padding),h=this.inputConv(h,k,T,this.padding),d=this.inputConv(d,v,I,this.padding),m=this.inputConv(m,w,A,this.padding);let[D,F,E,C]=r.split(this.recurrentKernel.read(),4,3);g=this.recurrentConv(g,D),y=this.recurrentConv(y,F),b=this.recurrentConv(b,E),N=this.recurrentConv(N,C);let z=this.recurrentActivation.apply(r.add(p,g)),M=this.recurrentActivation.apply(r.add(h,y)),_=r.add(r.mul(M,i),r.mul(z,this.activation.apply(r.add(d,b)))),O=r.mul(this.recurrentActivation.apply(r.add(m,N)),this.activation.apply(_));return[O,O,_]})}getConfig(){let e=super.getConfig(),{units:t}=e,n=d(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,s){let i=r.conv2d(e,t,this.strides,s||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?a.a2(i,n,this.dataFormat):i}recurrentConv(e,t){return r.conv2d(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}f.className="ConvLSTM2DCell",r.serialization.registerClass(f);class g extends m{constructor(e){super(Object.assign(Object.assign({},e),{cell:new f(e)}))}static fromConfig(e,t){return new e(t)}}g.className="ConvLSTM2D",r.serialization.registerClass(g)},61409:function(e,t,n){n.d(t,{E7:function(){return N},Ex:function(){return f},HZ:function(){return x},Jq:function(){return b},Jw:function(){return v},mb:function(){return g},qj:function(){return y},vf:function(){return m},xV:function(){return k}});var r=n(94976),a=n(97525),s=n(86406),i=n(3211),o=n(3692),u=n(17995),l=n(87882),p=n(56419),h=n(44386),c=n(37222),d=n(69075);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class m extends o.mh{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;let t=e.shape,n=[];for(let e=0;e<this.noiseShape.length;++e)n.push(null==this.noiseShape[e]?t[e]:this.noiseShape[e]);return n}call(e,t){return(0,r.tidy)(()=>{this.invokeCallHook(e,t);let n=(0,d.nQ)(e);if(0<this.rate&&this.rate<1){let e=null!=t.training&&t.training,r=this.getNoiseShape(n);return s.KC(()=>s.rv(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed};return Object.assign(e,super.getConfig()),e}dispose(){return super.dispose()}}m.className="Dropout",r.serialization.registerClass(m);class f extends m{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}}f.className="SpatialDropout1D",r.serialization.registerClass(f);class g extends o.mh{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,(0,h.iQ)(this.units,"units"),this.activation=(0,a.aI)(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=(0,l.L5)(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=(0,l.L5)(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=(0,i.Ad)(e.kernelConstraint),this.biasConstraint=(0,i.Ad)(e.biasConstraint),this.kernelRegularizer=(0,p.EC)(e.kernelRegularizer),this.biasRegularizer=(0,p.EC)(e.biasRegularizer),this.activityRegularizer=(0,p.EC)(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){let t=(e=(0,d.Wf)(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){let t=(e=(0,d.Wf)(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return(0,r.tidy)(()=>{let n;this.invokeCallHook(e,t);let r=(0,d.nQ)(e),a=(0,h.WT)(this.activation.getClassName());return null!=a?n=s.AK(r,this.kernel.read(),a,this.bias?this.bias.read():null):(n=s.AK(r,this.kernel.read()),null!=this.bias&&(n=s.a2(n,this.bias.read())),null!=this.activation&&(n=this.activation.apply(n))),n})}getConfig(){let e={units:this.units,activation:(0,a.GD)(this.activation),useBias:this.useBias,kernelInitializer:(0,l.Cx)(this.kernelInitializer),biasInitializer:(0,l.Cx)(this.biasInitializer),kernelRegularizer:(0,p.SG)(this.kernelRegularizer),biasRegularizer:(0,p.SG)(this.biasRegularizer),activityRegularizer:(0,p.SG)(this.activityRegularizer),kernelConstraint:(0,i.xF)(this.kernelConstraint),biasConstraint:(0,i.xF)(this.biasConstraint)};return Object.assign(e,super.getConfig()),e}}g.className="Dense",r.serialization.registerClass(g);class y extends o.mh{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){for(let t of(e=(0,d.Wf)(e)).slice(1))if(null==t)throw new u.nu(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],(0,c.NS)(e,1)]}call(e,t){return(0,r.tidy)(()=>{this.invokeCallHook(e,t);let n=(0,d.nQ)(e);if("channelsFirst"===this.dataFormat&&n.rank>1){let e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=(0,r.transpose)(n,e)}return s.Uz(n)})}getConfig(){let e={};return null!=this.dataFormat&&(e.dataFormat=this.dataFormat),Object.assign(e,super.getConfig()),e}}y.className="Flatten",r.serialization.registerClass(y);class b extends o.mh{constructor(e){super(e),this.supportsMasking=!0,this.activation=(0,a.aI)(e.activation)}call(e,t){return(0,r.tidy)(()=>{this.invokeCallHook(e,t);let n=(0,d.nQ)(e);return this.activation.apply(n)})}getConfig(){let e={activation:(0,a.GD)(this.activation)};return Object.assign(e,super.getConfig()),e}}b.className="Activation",r.serialization.registerClass(b);class N extends o.mh{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return(0,r.tidy)(()=>(e=(0,d.nQ)(e),s.rx(e,this.n)))}getConfig(){let e={n:this.n};return Object.assign(e,super.getConfig()),e}}N.className="RepeatVector",r.serialization.registerClass(N);class x extends o.mh{constructor(e){super(e),this.targetShape=e.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",r=t.slice(),a=1,s=null;for(let e=0;e<r.length;++e){let t=r[e];if(this.isUnknown(t)){if(null===s)s=e;else throw new u.nu("Can only specifiy one unknown dimension.")}else a*=t}let i=(0,c.NS)(e);if(null!==s){if(0===a||i%a!=0)throw new u.nu(n);r[s]=i/a}else if(i!==a)throw new u.nu(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return(0,r.tidy)(()=>{this.invokeCallHook(e,t);let n=(0,d.nQ)(e),a=n.shape,s=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return(0,r.reshape)(n,s)})}getConfig(){let e={targetShape:this.targetShape};return Object.assign(e,super.getConfig()),e}}x.className="Reshape",r.serialization.registerClass(x);class k extends o.mh{constructor(e){if(super(e),null==e.dims)throw Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let t=(0,c.w6)(1,e.dims.length+1);if(!r.util.arraysEqual(e.dims.slice().sort(),t))throw Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new o.Zg({ndim:this.dims.length+1})]}computeOutputShape(e){let t=(e=(0,d.Wf)(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return(0,r.transpose)((0,d.nQ)(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims};return Object.assign(e,super.getConfig()),e}}k.className="Permute",r.serialization.registerClass(k);class v extends o.mh{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e?this.maskValue=null==e.maskValue?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=(0,d.nQ)(e);return(0,r.any)((0,r.notEqual)(n,this.maskValue),-1)}call(e,t){return(0,r.tidy)(()=>{this.invokeCallHook(e,t);let n=(0,d.nQ)(e),a=(0,r.any)((0,r.notEqual)(n,this.maskValue),-1,!0);return(0,r.mul)(n,(0,r.cast)(a,n.dtype))})}}v.className="Masking",r.serialization.registerClass(v)},72740:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(94976),a=n(86406),s=n(3211),i=n(3692),o=n(17995),u=n(87882),l=n(56419),p=n(44386),h=n(69075);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class c extends i.mh{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(p.zZ(e.inputLength))}this.inputDim=e.inputDim,p.iQ(this.inputDim,"inputDim"),this.outputDim=e.outputDim,p.iQ(this.outputDim,"outputDim"),this.embeddingsInitializer=(0,u.L5)(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=(0,l.EC)(e.embeddingsRegularizer),this.activityRegularizer=(0,l.EC)(e.activityRegularizer),this.embeddingsConstraint=(0,s.Ad)(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return(0,r.tidy)(()=>this.maskZero?(e=(0,h.nQ)(e),(0,r.notEqual)(e,(0,r.zerosLike)(e))):null)}computeOutputShape(e){if(e=(0,h.Wf)(e),null==this.inputLength)return[...e,this.outputDim];let t=p.zZ(this.inputLength);if(t.length!==e.length-1)throw new o.nu(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){let a=t[r],s=e[r+1];if(null!=a&&null!=s&&a!==s)throw new o.nu(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==a&&(t[n]=s),n++}}return[e[0],...t,this.outputDim]}call(e,t){return(0,r.tidy)(()=>{this.invokeCallHook(e,t);let n=(0,h.nQ)(e);"int32"!==n.dtype&&(n=a.pj(n,"int32"));let s=a.Iq(this.embeddings.read(),(0,r.reshape)(n,[n.size]));return(0,r.reshape)(s,(0,h.Wf)(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:(0,u.Cx)(this.embeddingsInitializer),embeddingsRegularizer:(0,l.SG)(this.embeddingsRegularizer),activityRegularizer:(0,l.SG)(this.activityRegularizer),embeddingsConstraint:(0,s.xF)(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength};return Object.assign(e,super.getConfig()),e}}c.className="Embedding",r.serialization.registerClass(c)},34013:function(e,t,n){n.d(t,{Ag:function(){return m},BM:function(){return f},mm:function(){return c},oT:function(){return N},q8:function(){return g},wY:function(){return d},yR:function(){return y}});var r=n(94976),a=n(86406),s=n(3692),i=n(17995),o=n(41640),u=n(44386),l=n(37222),p=n(69075);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class h extends s.mh{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new i.nj}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;let n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){let a=e[e.length-t.length+r],s=t[r];if(null==a||null==s||a<0||s<0)n.push(null);else if(1===a)n.push(s);else if(1===s)n.push(a);else{if(a!==s)throw new i.nu("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[(0,p.Wf)(e)]),e.length<2)throw new i.nu(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(let n of e)null!=n&&null!==n[0]&&t.push(n[0]);if((t=u.Tw(t)).length>1)throw new i.nu(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let t=1;t<e.length;++t){let r=null==e[t]?null:e[t].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let r=e.map(e=>e.length);-1===e.indexOf(null)&&1===u.Tw(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return(0,r.tidy)(()=>{if(!this.reshapeRequired)return this.mergeFunction(e);{let t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){let r=l.Fp(n);for(let n of e){let e=n.rank;for(let t=0;t<r-e;++t)n=a.dt(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(let a of e){let e=a.rank;if(null==e){let e=a.shape,s=e[0],i=e.slice(1).concat([s]),o=r.reshape(a,[s].concat(l.NS(e.slice(1))));o=r.transpose(o,[1,0]),o=r.reshape(o,i),t.push(o),n=!0}else if(e>1){let s=l.w6(1,e).concat([0]);t.push(r.transpose(a,s)),n=!0}else t.push(a)}let a=this.mergeFunction(t),s=a.rank;if(n){if(null==s){let e=a.shape,t=e.length,n=e[t-1],s=[n].concat(e.slice(0,e.length-1));a=r.reshape(r.transpose(r.reshape(a,[-1,n]),[1,0]),s)}else if(s>1){let e=[s-1].concat(l.w6(0,s-1));a=r.transpose(a,e)}}return a}}})}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){let r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let n=[];for(let t of e)null!=t&&null!==t[0]&&n.push(t[0]);return 1===(n=u.Tw(n)).length?n.concat(t):[null].concat(t)}computeMask(e,t){return r.tidy(()=>{if(null==t)return null;if(!Array.isArray(t))throw new i.nu("`mask` should be an Array");if(!Array.isArray(e))throw new i.nu("`inputs` should be an Array");if(t.length!==e.length)throw new i.nu(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:r.expandDims(e,0)))[0];for(let e=1;e<t.length-1;++e)n=r.logicalAnd(n,t[e]);return n})}}class c extends h{constructor(e){super(e)}mergeFunction(e){return(0,r.tidy)(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=r.add(t,e[n]);return t})}}c.className="Add",r.serialization.registerClass(c);class d extends h{constructor(e){super(e)}mergeFunction(e){return(0,r.tidy)(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=r.mul(t,e[n]);return t})}}d.className="Multiply",r.serialization.registerClass(d);class m extends h{constructor(e){super(e)}mergeFunction(e){return(0,r.tidy)(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=r.add(t,e[n]);return r.mul(1/e.length,t)})}}m.className="Average",r.serialization.registerClass(m);class f extends h{constructor(e){super(e)}mergeFunction(e){return(0,r.tidy)(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=r.maximum(t,e[n]);return t})}}f.className="Maximum",r.serialization.registerClass(f);class g extends h{constructor(e){super(e)}mergeFunction(e){return(0,r.tidy)(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=r.minimum(t,e[n]);return t})}}g.className="Minimum",r.serialization.registerClass(g);class y extends h{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||1===e.length)throw new i.nu("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(let n of e)if(null!=n){t=!1;break}if(t)return;let n=[];for(let t=0;t<e.length;++t){let a=e[t].slice();a.splice(this.axis,1);let s=!1;for(let e of n)if(r.util.arraysEqual(e,a)){s=!0;break}s||n.push(a)}if(n.length>1)throw new i.nu("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return(0,r.tidy)(()=>a.mV(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new i.nu("A `Concatenate` layer should be called on a list of inputs.");let t=e[0].slice(),n=this.axis<0?t.length+this.axis:this.axis;for(let r of e.slice(1)){if(null==t[n]||null==r[n]){t[n]=null;break}t[n]+=r[n]}return t}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new i.nu("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new i.nu("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new i.nu(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return r.tidy(()=>{let n=!0;if(t.forEach(e=>{if(null!=e){n=!1;return}}),n)return null;let a=[];for(let n=0;n<e.length;++n)null==t[n]?a.push(r.cast(r.onesLike(e[n]),"bool")):t[n].rank<e[n].rank?a.push(r.expandDims(t[n],-1)):a.push(t[n]);let s=r.concat(a,this.axis);return r.all(s,-1,!1)})}getConfig(){let e={axis:this.axis};return Object.assign(e,super.getConfig()),e}}function b(e,t){for(;e<0;)e+=t;return e}y.className="Concatenate",r.serialization.registerClass(y);class N extends h{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){r.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new i.nj("Dot layer does not support tensors of 4D or higher rank yet.");let a=this.interpretAxes(t,n);if(t[a[0]]!==n[a[1]])throw new i.nu(`Dimension incompatibility: ${t[a[0]]} !== ${n[a[1]]}`)}mergeFunction(e){let t;if(2!==e.length)throw new i.nu(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],a=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>b(t,e[n].shape.length)):[b(this.axes,n.shape.length),b(this.axes,a.shape.length)],this.normalize&&(n=(0,o.Eq)(n,t[0]),a=(0,o.Eq)(a,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new i.nj("batchDot is not implemented for tensors of 4D or higher rank yet");if(r.util.assert(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),r.util.assert(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new i.nj("batchDot is not implemented for complex64-type Tensors yet.");let a=e.shape.length,s=t.shape.length;null==n&&(n=[a-1,s-2]);let o=n;return r.tidy(()=>{let n,i;if(a>s){n=a-s;let e=[];for(let t=0;t<n;++t)e.push(1);t=r.reshape(t,t.shape.concat(e))}else if(s>a){n=s-a;let t=[];for(let e=0;e<n;++e)t.push(1);e=r.reshape(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=o[0]===o[1]?r.sum(r.mul(e,t),o[0]):r.sum(r.mul(r.transpose(e,[1,0]),t),o[1]);else{let n=o[0]!==e.shape.length-1,a=o[1]===t.shape.length-1;i=r.matMul(e,t,n,a)}if(n>0){let e;e=a>s?a+s-3:a-1;let t=[];for(let r=e;r<e+n;++r)t.push(r);i=r.squeeze(i,t)}return 1===i.shape.length&&(i=r.expandDims(i,1)),i})}(n,a,t)}interpretAxes(e,t){return Array.isArray(this.axes)?this.axes:[b(this.axes,e.length),b(this.axes,t.length)]}computeOutputShape(e){r.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new i.nj("Dot layer does not support tensors of 4D or higher rank yet.");let a=this.interpretAxes(t,n);t.splice(a[0],1),n.splice(a[1],1),n.splice(0,1);let s=t.concat(n);return 1===s.length&&s.push(1),s}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize};return Object.assign(e,super.getConfig()),e}}N.className="Dot",r.serialization.registerClass(N)},39509:function(e,t,n){n.d(t,{Qt:function(){return o},ZM:function(){return u},aj:function(){return l}});var r=n(94976),a=n(86406),s=n(3692),i=n(69075);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o extends s.mh{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return(0,r.tidy)(()=>{this.invokeCallHook(e,t);let n=(0,i.nQ)(e);return a.KC(()=>(0,r.add)(a.nG(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}}o.className="GaussianNoise",r.serialization.registerClass(o);class u extends s.mh{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return(0,r.tidy)(()=>{this.invokeCallHook(e,t);let n=(0,i.nQ)(e);return this.rate>0&&this.rate<1?a.KC(()=>{let e=Math.sqrt(this.rate/(1-this.rate));return(0,r.mul)(n,a.nG(n.shape,1,e))},()=>n,t.training||!1):n})}}u.className="GaussianDropout",r.serialization.registerClass(u);class l extends s.mh{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||(0,i.nQ)(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return(0,r.tidy)(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return a.KC(()=>{let t=(0,i.nQ)(e),s=(0,r.greaterEqual)((0,r.randomUniform)(n),this.rate);s=a.pj(s,"float32");let o=((1-this.rate)*(1+3.09091329228798*this.rate))**-.5,u=-(-1.7580993408473766*o)*this.rate,l=(0,r.add)((0,r.mul)(t,s),(0,r.mul)((0,r.add)(s,-1),-1.7580993408473766));return(0,r.add)((0,r.mul)(l,o),u)},()=>(0,i.nQ)(e),t.training||!1)}return e})}}l.className="AlphaDropout",r.serialization.registerClass(l)},15016:function(e,t,n){n.d(t,{XM:function(){return d},pz:function(){return m}});var r=n(94976),a=n(3211),s=n(3692),i=n(17995),o=n(87882),u=n(56419),l=n(44386),p=n(37222),h=n(69075);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c(e,t,n,a,s,o=.001){let u;if(2===e.rank)u=r.batchNorm2d(e,t,n,a,s,o);else if(3===e.rank)u=r.batchNorm3d(e,t,n,a,s,o);else if(4===e.rank)u=r.batchNorm4d(e,t,n,a,s,o);else throw new i.nj(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return u}class d extends s.mh{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=(0,o.L5)(e.betaInitializer||"zeros"),this.gammaInitializer=(0,o.L5)(e.gammaInitializer||"ones"),this.movingMeanInitializer=(0,o.L5)(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=(0,o.L5)(e.movingVarianceInitializer||"ones"),this.betaConstraint=(0,a.Ad)(e.betaConstraint),this.gammaConstraint=(0,a.Ad)(e.gammaConstraint),this.betaRegularizer=(0,u.EC)(e.betaRegularizer),this.gammaRegularizer=(0,u.EC)(e.gammaRegularizer)}build(e){e=(0,h.Wf)(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new i.nu(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new s.Zg({ndim:e.length,axes:{[t]:n}})];let r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return(0,r.tidy)(()=>{let n=null!=t.training&&t.training,a=(0,h.nQ)(e),s=a.shape,i=s.length,o=p.w6(0,i),u=this.axis>=0?this.axis:this.axis+i;o.splice(u,1);let d=l.JE(1,i);d[u]=s[u];let m=o.slice();m.sort();let f=!r.util.arraysEqual(m,p.w6(0,i).slice(0,i-1));if(!n)return(()=>{if(!f)return c(a,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon);{let e=(0,r.reshape)(this.movingMean.read(),d);return c(a,e,(0,r.reshape)(this.movingVariance.read(),d),this.center?(0,r.reshape)(this.beta.read(),d):null,this.scale?(0,r.reshape)(this.gamma.read(),d):null,this.epsilon)}})();let[g,y,b]=function(e,t,n,a,s=.001){return r.util.arraysEqual(a.slice().sort(),p.w6(0,e.rank-1))?function(e,t,n,a,s=.001){return(0,r.tidy)(()=>{let i=r.moments(e,a),o=i.mean,u=i.variance;return[c(e,o,u,n,t,s),o,u]})}(e,t,n,a,s):function(e,t,n,a,s=.001){return(0,r.tidy)(()=>{let i=r.moments(e,a),o=i.mean,u=i.variance,l=[];for(let t of p.w6(0,e.rank))-1!==a.indexOf(t)?l.push(1):l.push(e.shape[t]);let h=(0,r.reshape)(o,l),d=(0,r.reshape)(u,l),m=null==t?null:(0,r.reshape)(t,l);return[c(e,h,d,null==n?null:(0,r.reshape)(n,l),m,s),o,u]})}(e,t,n,a,s)}(a,this.gamma.read(),this.beta.read(),o,this.epsilon),N=(e,t,n)=>{r.tidy(()=>{let a=e.read(),s=r.mul(r.sub(a,t),1-n);e.write(r.sub(a,s))})};return(()=>{N(this.movingMean,y,this.momentum),N(this.movingVariance,b,this.momentum)})(),g})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,o.Cx)(this.betaInitializer),gammaInitializer:(0,o.Cx)(this.gammaInitializer),movingMeanInitializer:(0,o.Cx)(this.movingMeanInitializer),movingVarianceInitializer:(0,o.Cx)(this.movingVarianceInitializer),betaRegularizer:(0,u.SG)(this.betaRegularizer),gammaRegularizer:(0,u.SG)(this.gammaRegularizer),betaConstraint:(0,a.xF)(this.betaConstraint),gammaConstraint:(0,a.xF)(this.gammaConstraint)};return Object.assign(e,super.getConfig()),e}}d.className="BatchNormalization",r.serialization.registerClass(d);class m extends s.mh{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let e of this.axis)if(!Number.isInteger(e))throw Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=(0,o.L5)(e.betaInitializer||"zeros"),this.gammaInitializer=(0,o.L5)(e.gammaInitializer||"ones"),this.betaRegularizer=(0,u.EC)(e.betaRegularizer),this.gammaRegularizer=(0,u.EC)(e.gammaRegularizer),this.supportsMasking=!0}build(e){let t=(e=(0,h.Wf)(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let e=0;e<this.axis.length;++e)this.axis[e]<0&&(this.axis[e]+=t);for(let e of this.axis)if(e<0||e>=t)throw Error(`Invalid axis: ${e}`);if(this.axis.length!==l.Tw(this.axis).length)throw Error(`Found duplicate axes in: ${this.axis}`);let n=this.axis.map(t=>e[t]);this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0}call(e,t){let n=(0,h.nQ)(e),a=n.shape,s=a.length;return(0,r.tidy)(()=>{let{mean:e,variance:t}=(0,r.moments)(n,this.axis,!0),i=l.JE(1,s);for(let e of this.axis)i[e]=a[e];let o=e=>null!=e&&e.shape.length!==s?r.reshape(e,i):e,u=this.scale?o(this.gamma.read()):null,p=this.center?o(this.beta.read()):null,h=[],d=[];for(let e=0;e<s;++e)-1!==this.axis.indexOf(e)?(h.push(a[e]),d.push(1)):(h.push(1),d.push(a[e]));return e=r.tile(e,h),t=r.tile(t,h),null!=u&&(u=r.tile(u,d)),null!=p&&(p=r.tile(p,d)),c(n,e,t,p,u,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,o.Cx)(this.betaInitializer),gammaInitializer:(0,o.Cx)(this.gammaInitializer),betaRegularizer:(0,u.SG)(this.betaRegularizer),gammaRegularizer:(0,u.SG)(this.gammaRegularizer)};return Object.assign(e,super.getConfig()),e}}m.className="LayerNormalization",r.serialization.registerClass(m)},75661:function(e,t,n){n.d(t,{Zm:function(){return u}});var r=n(94976),a=n(79996),s=n(3692),i=n(17995),o=n(69075);class u extends s.mh{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?(0,a.rf)():e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{let t,n;if(e.padding=e.padding,2!==e.padding.length)throw new i.nu(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new i.nu(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new i.nu(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new s.Zg({ndim:4})]}computeOutputShape(e){let t,n;return(e=(0,o.Wf)(e),"channelsFirst"===this.dataFormat)?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return(0,r.tidy)(()=>{var t,n,s;return t=(0,o.nQ)(e),n=this.padding,s=this.dataFormat,(0,r.tidy)(()=>{let e;if(4!==t.rank)throw new i.nu(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new i.nu("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==s&&(s=(0,a.rf)()),"channelsLast"!==s&&"channelsFirst"!==s)throw new i.nu(`Unknown data format: ${s}. Supported data formats are 'channelsLast' and 'channelsFirst.`);return e="channelsFirst"===s?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],r.pad(t,e)})})}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat};return Object.assign(e,super.getConfig()),e}}u.className="ZeroPadding2D",r.serialization.registerClass(u)},24627:function(e,t,n){n.d(t,{B1:function(){return g},CQ:function(){return x},FG:function(){return T},Sc:function(){return v},e5:function(){return I},g8:function(){return y},rQ:function(){return D},ux:function(){return N},vu:function(){return F},xv:function(){return w}});var r=n(94976),a=n(79996),s=n(86406),i=n(96168),o=n(3692),u=n(17995),l=n(22615),p=n(44386),h=n(69075),c=n(53299);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function d(e,t,n,s,o,u){return(0,r.tidy)(()=>{let l;(0,i.cj)(o),(0,i.Lp)(u),(0,i.zb)(s),null==n&&(n=[1,1]),null==s&&(s="valid"),null==o&&(o=(0,a.rf)()),null==u&&(u="max"),e=(0,c.aP)(e,o);let p="same"===s?"same":"valid";return l="max"===u?r.maxPool(e,t,n,p):r.avgPool(e,t,n,p),"channelsFirst"===o&&(l=r.transpose(l,[0,3,1,2])),l})}function m(e,t,n,s,o,u){return(0,r.tidy)(()=>{let l;(0,i.cj)(o),(0,i.Lp)(u),(0,i.zb)(s),null==n&&(n=[1,1,1]),null==s&&(s="valid"),null==o&&(o=(0,a.rf)()),null==u&&(u="max"),e=(0,c.fN)(e,o);let p="same"===s?"same":"valid";return l="max"===u?r.maxPool3d(e,t,n,p):r.avgPool3d(e,t,n,p),"channelsFirst"===o&&(l=r.transpose(l,[0,4,1,2,3])),l})}class f extends o.mh{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&1===e.poolSize.length&&"number"==typeof e.poolSize[0])this.poolSize=e.poolSize;else throw new u.nu(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if((0,p.iQ)(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else if(Array.isArray(e.strides)&&1===e.strides.length&&"number"==typeof e.strides[0])this.strides=e.strides;else throw new u.nu(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);(0,p.iQ)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,(0,i.zb)(this.padding),this.inputSpec=[new o.Zg({ndim:3})]}computeOutputShape(e){e=(0,h.Wf)(e);let t=(0,l.kt)(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return(0,r.tidy)(()=>{this.invokeCallHook(e,t),e=s.dt((0,h.nQ)(e),2);let n=this.poolingFunction((0,h.nQ)(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return r.squeeze(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides};return Object.assign(e,super.getConfig()),e}}class g extends f{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,i.cj)(a),(0,i.zb)(r),d(e,t,n,r,a,"max")}}g.className="MaxPooling1D",r.serialization.registerClass(g);class y extends f{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,i.cj)(a),(0,i.zb)(r),d(e,t,n,r,a,"avg")}}y.className="AveragePooling1D",r.serialization.registerClass(y);class b extends o.mh{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new u.nu(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];(0,p.iQ)(this.poolSize,"poolSize"),(0,p.iQ)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,i.cj)(this.dataFormat),(0,i.zb)(this.padding),this.inputSpec=[new o.Zg({ndim:4})]}computeOutputShape(e){e=(0,h.Wf)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return(t=(0,l.kt)(t,this.poolSize[0],this.padding,this.strides[0]),n=(0,l.kt)(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat)?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return(0,r.tidy)(()=>(this.invokeCallHook(e,t),this.poolingFunction((0,h.nQ)(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat};return Object.assign(e,super.getConfig()),e}}class N extends b{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,i.cj)(a),(0,i.zb)(r),d(e,t,n,r,a,"max")}}N.className="MaxPooling2D",r.serialization.registerClass(N);class x extends b{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,i.cj)(a),(0,i.zb)(r),d(e,t,n,r,a,"avg")}}x.className="AveragePooling2D",r.serialization.registerClass(x);class k extends o.mh{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new u.nu(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];(0,p.iQ)(this.poolSize,"poolSize"),(0,p.iQ)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,i.cj)(this.dataFormat),(0,i.zb)(this.padding),this.inputSpec=[new o.Zg({ndim:5})]}computeOutputShape(e){e=(0,h.Wf)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return(t=(0,l.kt)(t,this.poolSize[0],this.padding,this.strides[0]),n=(0,l.kt)(n,this.poolSize[1],this.padding,this.strides[1]),r=(0,l.kt)(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat)?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return(0,r.tidy)(()=>(this.invokeCallHook(e,t),this.poolingFunction((0,h.nQ)(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat};return Object.assign(e,super.getConfig()),e}}class v extends k{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,i.cj)(a),(0,i.zb)(r),m(e,t,n,r,a,"max")}}v.className="MaxPooling3D",r.serialization.registerClass(v);class w extends k{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,i.cj)(a),(0,i.zb)(r),m(e,t,n,r,a,"avg")}}w.className="AveragePooling3D",r.serialization.registerClass(w);class S extends o.mh{constructor(e){super(e),this.inputSpec=[new o.Zg({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new u.nj}}class T extends S{constructor(e){super(e||{})}call(e,t){return(0,r.tidy)(()=>{let t=(0,h.nQ)(e);return r.mean(t,1)})}}T.className="GlobalAveragePooling1D",r.serialization.registerClass(T);class I extends S{constructor(e){super(e||{})}call(e,t){return(0,r.tidy)(()=>{let t=(0,h.nQ)(e);return r.max(t,1)})}}I.className="GlobalMaxPooling1D",r.serialization.registerClass(I);class A extends o.mh{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,i.cj)(this.dataFormat),this.inputSpec=[new o.Zg({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new u.nj}getConfig(){let e={dataFormat:this.dataFormat};return Object.assign(e,super.getConfig()),e}}class D extends A{call(e,t){return(0,r.tidy)(()=>{let t=(0,h.nQ)(e);return"channelsLast"===this.dataFormat?r.mean(t,[1,2]):r.mean(t,[2,3])})}}D.className="GlobalAveragePooling2D",r.serialization.registerClass(D);class F extends A{call(e,t){return(0,r.tidy)(()=>{let t=(0,h.nQ)(e);return"channelsLast"===this.dataFormat?r.max(t,[1,2]):r.max(t,[2,3])})}}F.className="GlobalMaxPooling2D",r.serialization.registerClass(F)},96840:function(e,t,n){n.d(t,{Q:function(){return u}});var r=n(3692),a=n(94976),s=n(69075),i=n(17995),o=n(86406);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class u extends r.mh{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode};return Object.assign(e,super.getConfig()),e}computeOutputShape(e){return null==(e=(0,s.Wf)(e))?[this.numTokens]:("oneHot"===this.outputMode&&1!==e[e.length-1]?e.push(this.numTokens):e[e.length-1]=this.numTokens,e)}call(e,t){return(0,a.tidy)(()=>{let n;if("int32"!==(e=(0,s.nQ)(e)).dtype&&(e=o.pj(e,"int32")),void 0!==t.countWeights){if("count"!==this.outputMode)throw new i.nu(`countWeights is not used when outputMode !== count.
              Received countWeights=${t.countWeights}`);n=(0,s.nQ)(t.countWeights)}let r=(0,a.max)(e),u=(0,a.min)(e),l=(0,a.greater)(this.numTokens,r).bufferSync().get(0),p=(0,a.greaterEqual)(u,0).bufferSync().get(0);if(!(l&&p))throw new i.nu(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return(/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function(e,t,n,r){let u,l=(0,s.nQ)(e);if("int32"!==l.dtype&&(l=o.pj(l,"int32")),"int"===t)return l;let p=l.shape;if(0===l.rank&&(l=(0,a.expandDims)(l,-1)),"oneHot"===t&&1!==l.shape[l.shape.length-1]&&(l=(0,a.expandDims)(l,-1)),l.rank>2)throw new i.nu(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${p} which would result in output rank ${l.rank}.`);let h=["multiHot","oneHot"].includes(t),c=l;if(u=void 0!==r&&"count"===t?(0,a.denseBincount)(c,r,n,h):(0,a.denseBincount)(c,[],n,h),"tfIdf"!==t)return u;if(r)return(0,a.mul)(u,r);throw new i.nu("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n))})}}u.className="CategoryEncoding",a.serialization.registerClass(u)},86375:function(e,t,n){n.d(t,{d:function(){return l}});var r=n(94976),a=n(69075),s=n(3692),i=n(86406);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let{resizeBilinear:o,cropAndResize:u}=r.image;class l extends s.mh{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,s,o,l,p,h){return(0,r.tidy)(()=>{let c;let d=!1,m=(s+t)/l,f=(o+n)/p,g=[t/l,n/p,m,f],y=[];3===e.rank?(d=!0,c=(0,r.stack)([e])):c=e;for(let e=0;e<c.shape[0];e++)y.push(g);let b=u(c,(0,r.tensor)(y,[y.length,4]),(0,r.range)(0,y.length,1,"int32"),[s,o],"nearest");return d?i.pj((0,a.nQ)((0,r.unstack)(b)),h):i.pj(b,h)})}upsize(e,t,n,a){return(0,r.tidy)(()=>{let r=o(e,[t,n]);return i.pj(r,a)})}call(e,t){return(0,r.tidy)(()=>{let t=(0,a.nQ)(e),n=t.dtype,r=t.shape,s=r[r.length-3],i=r[r.length-2],o=0;s!==this.height&&(o=Math.floor((s-this.height)/2));let u=0;return(i!==this.width&&0===(u=Math.floor((i-this.width)/2))&&(u=1),o>=0&&u>=0)?this.centerCrop(t,o,u,this.height,this.width,s,i,n):this.upsize(e,this.height,this.width,n)})}getConfig(){let e={height:this.height,width:this.width};return Object.assign(e,super.getConfig()),e}computeOutputShape(e){let t=(e=(0,a.Wf)(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}l.className="CenterCrop",r.serialization.registerClass(l)},44339:function(e,t,n){n.d(t,{L:function(){return o}});var r=n(3692),a=n(94976),s=n(69075),i=n(86406);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o extends r.mh{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset};return Object.assign(e,super.getConfig()),e}call(e,t){return(0,a.tidy)(()=>("float32"!==(e=(0,s.nQ)(e)).dtype&&(e=i.pj(e,"float32")),(0,a.add)((0,a.mul)(e,this.scale),this.offset)))}}o.className="Rescaling",a.serialization.registerClass(o)},74242:function(e,t,n){n.d(t,{D:function(){return u}});var r=n(94976),a=n(3692),s=n(17995),i=n(69075);let o=new Set(["bilinear","nearest"]);class u extends a.mh{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(o.has(e.interpolation))this.interpolation=e.interpolation;else throw new s.nu(`Invalid interpolation parameter: ${e.interpolation} is not implemented`)}else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){let t=(e=(0,i.Wf)(e))[2];return[this.height,this.width,t]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio};return Object.assign(e,super.getConfig()),e}call(e,t){return(0,r.tidy)(()=>{let t=[this.height,this.width];if("bilinear"===this.interpolation)return r.image.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return r.image.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw Error(`Interpolation is ${this.interpolation} but only ${[...o]} are supported`)})}}u.className="Resizing",r.serialization.registerClass(u)},5910:function(e,t,n){n.d(t,{z:function(){return p}});var r=n(94976),a=n(69075),s=n(17995),i=n(3692);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}o.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class u extends i.mh{constructor(e){super(e),this.randomGenerator=new o(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed};return Object.assign(e,super.getConfig()),e}}u.className="BaseRandomLayer";let l=new Set(["bilinear","nearest"]);class p extends u{constructor(e){super(e);let{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new s.nu(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new s.nu(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new s.nu(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(n){if(l.has(n))this.interpolation=n;else throw new s.nu(`Invalid interpolation parameter: ${n} is not implemented`)}}getConfig(){let e={factor:this.factor,interpolation:this.interpolation};return Object.assign(e,super.getConfig()),e}computeOutputShape(e){let t=(e=(0,a.Wf)(e))[2];return[this.imgHeight,-1,t]}call(e,t){return(0,r.tidy)(()=>{let t=(0,a.nQ)(e);this.imgHeight=t.shape[t.shape.length-3];let n=t.shape[t.shape.length-2];this.widthFactor=(0,r.randomUniform)([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*n;s=Math.round(s);let i=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return r.image.resizeBilinear(e,i);case"nearest":return r.image.resizeNearestNeighbor(e,i);default:throw Error(`Interpolation is ${this.interpolation}
          but only ${[...l]} are supported`)}})}}p.className="RandomWidth",r.serialization.registerClass(p)},80485:function(e,t,n){n.d(t,{v:function(){return s}});var r=n(94976),a=n(44386);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s(e,t={},n=!1){return(0,a.tU)(e,r.serialization.SerializationMap.getMap().classNameMap,t,"layer",n)}},24592:function(e,t,n){n.d(t,{V9:function(){return m},j8:function(){return f}});var r=n(94976),a=n(86406),s=n(96168),i=n(3692),o=n(17995),u=n(77617),l=n(44386),p=n(69075),h=n(31529),c=n(80485);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class d extends i.mh{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}};return Object.assign(e,super.getConfig()),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let r=t.layer,a=(0,c.v)(r,n);delete t.layer;let s={layer:a};return Object.assign(s,t),new e(s)}}class m extends d{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=(0,p.Wf)(e)).length<3)throw new o.nu(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){let t=[(e=(0,p.Wf)(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return(0,r.tidy)(()=>(e=(0,p.nQ)(e),(0,h.nd)((e,n)=>[(0,p.nQ)(this.layer.call(e,t)),[]],e,[],!1,null,null,!1,!0)[1]))}}m.className="TimeDistributed",r.serialization.registerClass(m);class f extends d{constructor(e){var t;super(e);let n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=(0,c.v)(r),n.goBackwards=!0!==n.goBackwards;let a={};if(a.className=e.layer.getClassName(),a.config=n,this.backwardLayer=(0,c.v)(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,t=this.mergeMode,l.xn(u.eY,"BidirectionalMergeMode",t),e.weights)throw new o.nj("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,t)),this.backwardLayer.setWeights(e.slice(t))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return(Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState&&(r=a.slice(1)),t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState)?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):l.Bq(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});let a=(0,h.lx)(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);let s=[],u=[];if(null!=n){let e=n.length;if(e%2>0)throw new o.nu("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,s.push(...n);let r=n.map(e=>new i.Zg({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),u.push(...r)}if(null!=r)throw new o.nj("Support for constants in Bidirectional layers is not implemented yet.");let l=s[0]instanceof i.Iy;for(let e of s)if(e instanceof i.Iy!==l)throw new o.nu("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(!l)return super.apply(e,t);{let n=[e].concat(s),r=this.inputSpec.concat(u),a=this.inputSpec;this.inputSpec=r;let i=super.apply(n,t);return this.inputSpec=a,i}}call(e,t){return(0,r.tidy)(()=>{let n,s,i,o;let u=t.initialState;if(null==u)n=this.forwardLayer.call(e,t),s=this.backwardLayer.call(e,t);else{let r=u.slice(0,u.length/2),a=u.slice(u.length/2);n=this.forwardLayer.call(e,Object.assign(t,{initialState:r})),s=this.backwardLayer.call(e,Object.assign(t,{initialState:a}))}return(this.returnState&&(Array.isArray(n)&&(i=n.slice(1).concat(s.slice(1))),n=n[0],s=s[0]),this.returnSequences&&(s=r.reverse(s,1)),"concat"===this.mergeMode?o=a.mV([n,s]):"sum"===this.mergeMode?o=r.add(n,s):"ave"===this.mergeMode?o=r.mul(.5,r.add(n,s)):"mul"===this.mergeMode?o=r.mul(n,s):null==this.mergeMode&&(o=[n,s]),this.returnState)?null==this.mergeMode?o.concat(i):[o].concat(i):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){(0,s.f4)(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),(0,s.f4)(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,!this.returnState)return n;{let e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode};return Object.assign(e,super.getConfig()),e}static fromConfig(e,t){let n=(0,c.v)(t.layer);if(delete t.layer,null!=t.numConstants)throw new o.nj("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");return t.layer=n,new e(t)}}f.className="Bidirectional",r.serialization.registerClass(f)},66973:function(e,t,n){n.d(t,{Z:function(){return a},i:function(){return s}});var r=n(94976);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function a(e){if(null==e)return;let t=[],n=[],a=[];for(let r in e){let s=e[r];"number"!=typeof s&&(t.push(s.data()),n.push(r),a.push(s))}if(t.length>0){let s=await Promise.all(t);for(let t=0;t<s.length;++t)e[n[t]]=s[t][0];(0,r.dispose)(a)}}function s(e){if(null!=e)for(let t in e){let n=e[t];"number"!=typeof n&&n.dispose()}}},41640:function(e,t,n){n.d(t,{Eq:function(){return o},FD:function(){return u},KM:function(){return c},Ls:function(){return m},U2:function(){return g},dr:function(){return f},fO:function(){return d},ke:function(){return l},t3:function(){return p},uq:function(){return h}});var r=n(94976),a=n(79996),s=n(86406),i=n(17995);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o(e,t){return(0,r.tidy)(()=>{"float32"!==e.dtype&&(e=r.cast(e,"float32"));let n=r.sum(s.h6(e),t,!0),i=r.fill(n.shape,(0,a.Ho)()),o=r.sqrt(r.maximum(n,i));return r.div(e,o)})}function u(e,t){return(0,r.tidy)(()=>r.mean(s.h6(r.sub(t,e)),-1))}function l(e,t){return(0,r.tidy)(()=>r.mean(r.abs(r.sub(t,e)),-1))}function p(e,t){return(0,r.tidy)(()=>{let n=r.sub(e,t),s=r.clipByValue(r.abs(e),(0,a.Ho)(),Number.MAX_VALUE),i=r.abs(r.div(n,s));return r.mul(100,r.mean(i,-1))})}function h(e,t,n=!1){return(0,r.tidy)(()=>{if(n)t=r.softmax(t);else{let e=r.sum(t,t.shape.length-1,!0);t=r.div(t,e)}return t=r.clipByValue(t,(0,a.Ho)(),1-(0,a.Ho)()),r.neg(r.sum(r.mul(r.cast(e,"float32"),r.log(t)),t.shape.length-1))})}function c(e,t,n=!1){return(0,r.tidy)(()=>{let i=r.cast(r.floor(s.xH(e)),"int32"),o=(t=r.clipByValue(t,(0,a.Ho)(),1-(0,a.Ho)())).shape;return h(r.reshape(r.oneHot(i,o[o.length-1]),o),t,n)})}function d(e,t){return(0,r.tidy)(()=>{let n;return n=r.clipByValue(t,(0,a.Ho)(),1-(0,a.Ho)()),n=r.log(r.div(n,r.sub(1,n))),r.mean(function(e,t){if(!r.util.arraysEqual(e.shape,t.shape))throw new i.nu(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return(0,r.tidy)(()=>{let n=r.relu(t),a=r.neg(r.abs(t));return r.add(r.sub(n,r.mul(t,e)),r.log1p(r.exp(a)))})}(e,n),-1)})}function m(e,t){return(0,r.tidy)(()=>{let n=o(e,-1),a=o(t,-1),s=r.mul(n,a);return r.neg(r.sum(s,-1))})}let f={meanSquaredError:u,meanAbsoluteError:l,meanAbsolutePercentageError:p,meanSquaredLogarithmicError:function(e,t){return(0,r.tidy)(()=>{let n=r.clipByValue(t,(0,a.Ho)(),Number.MAX_VALUE),i=r.log(r.add(1,n)),o=r.clipByValue(e,(0,a.Ho)(),Number.MAX_VALUE),u=r.log(r.add(1,o));return r.mean(s.h6(r.sub(i,u)),-1)})},squaredHinge:function(e,t){return(0,r.tidy)(()=>{let n=r.maximum(0,r.sub(1,r.mul(e,t)));return r.mean(s.h6(n),-1)})},hinge:function(e,t){return(0,r.tidy)(()=>{let n=r.maximum(0,r.sub(1,r.mul(e,t)));return r.mean(n,-1)})},categoricalHinge:function(e,t){return(0,r.tidy)(()=>{let n=r.sum(r.mul(e,t),-1),a=r.max(r.mul(r.sub(1,e),t),-1);return r.maximum(0,r.add(1,r.sub(a,n)))})},logcosh:function(e,t){return(0,r.tidy)(()=>{let n=r.sub(t,e),a=r.sub(r.add(n,r.softplus(r.mul(-2,n))),Math.log(2));return r.mean(a,-1)})},categoricalCrossentropy:h,sparseCategoricalCrossentropy:c,binaryCrossentropy:d,kullbackLeiblerDivergence:function(e,t){return(0,r.tidy)(()=>{let n=r.clipByValue(e,(0,a.Ho)(),1),s=r.clipByValue(t,(0,a.Ho)(),1);return r.sum(r.mul(e,r.log(r.div(n,s))),-1)})},poisson:function(e,t){return(0,r.tidy)(()=>{let n=r.log(r.add((0,a.Ho)(),t));return r.mean(r.sub(t,r.mul(e,n)),-1)})},cosineProximity:m};function g(e){if("string"!=typeof e)return e;{if(e in f)return f[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new i.nu(t)}}},5587:function(e,t,n){n.d(t,{G5:function(){return l},KM:function(){return w},TY:function(){return m},U2:function(){return T},_F:function(){return u},aI:function(){return I},ch:function(){return h},fO:function(){return d},uq:function(){return k},wC:function(){return c}});var r=n(94976),a=n(86406),s=n(17995),i=n(41640),o=n(44386);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u(e,t){return(0,r.tidy)(()=>{let n=r.mul(.5,r.onesLike(t)),s=a.pj(r.greater(t,n),e.dtype);return r.mean(r.equal(e,s),-1)})}function l(e,t){return(0,r.tidy)(()=>a.pj(r.equal(r.argMax(e,-1),r.argMax(t,-1)),"float32"))}function p(e,t){return(0,r.tidy)(()=>r.cast(r.sum(r.logicalAnd(r.equal(e,1),r.equal(t,1))),"float32"))}function h(e,t){return(0,r.tidy)(()=>{let n=p(e,t),a=(0,r.tidy)(()=>r.cast(r.sum(r.logicalAnd(r.equal(e,0),r.equal(t,1))),"float32")),s=r.add(n,a);return r.cast(r.where(r.greater(s,0),r.div(n,s),0),"float32")})}function c(e,t){return(0,r.tidy)(()=>{let n=p(e,t),a=(0,r.tidy)(()=>r.cast(r.sum(r.logicalAnd(r.equal(e,1),r.equal(t,0))),"float32")),s=r.add(n,a);return r.cast(r.where(r.greater(s,0),r.div(n,s),0),"float32")})}function d(e,t){return(0,i.fO)(e,t)}function m(e,t){return e.rank===t.rank&&(e=r.squeeze(e,[e.rank-1])),(t=r.argMax(t,-1)).dtype!==e.dtype&&(t=r.cast(t,e.dtype)),r.cast(r.equal(e,t),"float32")}let f=i.FD,g=i.FD,y=i.ke,b=i.ke,N=i.t3,x=i.t3,k=i.uq,v=i.Ls,w=i.KM,S={binaryAccuracy:u,categoricalAccuracy:l,precision:h,categoricalCrossentropy:k,sparseCategoricalCrossentropy:w,mse:f,MSE:g,mae:y,MAE:b,mape:N,MAPE:x,cosine:v};function T(e){if("string"==typeof e&&e in S)return S[e];if("string"!=typeof e&&null!=e)return e;throw new s.nu(`Unknown metric ${e}`)}function I(e){if(o.hu(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let t;for(let n of Object.keys(i.dr))if(i.dr[n]===e){t=n;break}if(void 0!==t)return t;for(let n of Object.keys(S))if(S[n]===e){t=n;break}return void 0!==t?t:e.name}}},25732:function(e,t,n){n.d(t,{FB:function(){return m},p5:function(){return d},sb:function(){return g}});var r=n(94976),a=n(73706),s=n(41573),i=n(3692),o=n(91431),u=n(17995),l=n(80485),p=n(44386),h=n(2909),c=n(69075);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function d(e,t){"modelTopology"in e||(e={modelTopology:e});let n=e.modelTopology;null!=n.model_config&&(n=n.model_config);let a=(0,h.a)(n),s=(0,l.v)(a,t);if(null!=e.weightsManifest){let t=await r.io.loadWeights(e.weightsManifest,e.pathPrefix,s.weights.map(e=>e.originalName)),n={};for(let e of s.weights)n[e.originalName]=t[e.originalName];s.loadWeights(n),(0,r.dispose)(t)}return s}async function m(e,t){if(null==t&&(t={}),"string"==typeof e){let n=r.io.getLoadHandlers(e,t);if(0===n.length)n.push(r.io.browserHTTPRequest(e,t));else if(n.length>1)throw new u.nu(`Found more than one (${n.length}) load handlers for URL '${e}'`);e=n[0]}return f(e,void 0,t)}async function f(e,t,n){if(null==n&&(n={}),null==e.load)throw new u.nu("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let a=await e.load(),s=a.modelTopology;null!=s.model_config&&(s=s.model_config);let i=null==n.strict||n.strict,o=null!=a.weightData&&null!=a.weightSpecs&&i,p=(0,l.v)((0,h.a)(s),t,o),c=a.trainingConfig;if(null!=c&&p.loadTrainingConfig(c),null!=a.userDefinedMetadata&&p.setUserDefinedMetadata(a.userDefinedMetadata),null!=a.weightData){if(null==a.weightSpecs)throw new u.nu("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:e,optimizerWeights:t}=function(e,t){let n=r.io.decodeWeights(e,t),a={},s=[];return t.forEach(e=>{"optimizer"===e.group?s.push({name:e.name,tensor:n[e.name]}):a[e.name]=n[e.name]}),{modelWeights:a,optimizerWeights:s}}(a.weightData,a.weightSpecs);p.loadWeights(e,i),null!=p.optimizer&&t.length>0&&await p.optimizer.setWeights(t),(0,r.dispose)(e),(0,r.dispose)(t.map(e=>e.tensor))}return p}class g extends o.QV{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:(0,a.s)("sequential_"),null!=e.layers)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new u.nu(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let t;let n=e instanceof g||e instanceof o.QV;if(n){if(1!==(t=e).outputs.length)throw new u.nu("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new u.nu("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new u.nu("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let t=(0,s.I)({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(n)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new u.nu(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new u.nu("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=(0,i.hA)(this.outputs[0])}this.inboundNodes=[],new i.NB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:p.JE(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{let t=e.apply(this.outputs[0]);if(Array.isArray(t))throw TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if((0,c.Wf)(e),0===this.inputs.length||0===this.outputs.length)throw TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new o.QV({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new u.LH("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new u.LH("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new u.LH("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new u.LH("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},a=!1){let s;let i={};if(t instanceof Array){if(!(null!=t[0].className)||"Merge"===t[0].className)throw new u.nu("Legacy serialization format not supported yet.");s=t}else r.util.assert(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=t.layers,delete t.layers,i=t;let o=new e(i);if(!(o instanceof g))throw new u.nj(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(let e of s){let t=void 0,n=(0,l.v)(e,t,a);a&&n.setFastWeightInitDuringBuild(!0),o.add(n)}return o}set stopTraining(e){if(null==this.model)throw new u.nu("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new u.nu("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}g.className="Sequential",r.serialization.registerClass(g)},37655:function(e,t,n){n.d(t,{j:function(){return i}});var r=n(94976),a=n(79996),s=n(17995);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i(e){let t={Adagrad:()=>r.train.adagrad(.01),Adadelta:()=>r.train.adadelta(1,.95,(0,a.Ho)()),Adam:()=>r.train.adam(.001,.9,.999,(0,a.Ho)()),Adamax:()=>r.train.adamax(.002,.9,.999,(0,a.Ho)(),0),RMSProp:()=>r.train.rmsprop(.001,.9,0,(0,a.Ho)()),SGD:()=>r.train.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new s.nu(`Unknown Optimizer ${e}`)}},56419:function(e,t,n){n.d(t,{EC:function(){return m},SG:function(){return c},Xm:function(){return u},l1:function(){return l},l2:function(){return p}});var r=n(94976),a=n(86406),s=n(44386);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i(e){if(null!=e&&"object"!=typeof e)throw Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class o extends r.serialization.Serializable{}class u extends o{constructor(e){super(),i(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return(0,r.tidy)(()=>{let t=(0,r.zeros)([1]);return this.hasL1&&(t=(0,r.add)(t,(0,r.sum)(r.mul(this.l1,(0,r.abs)(e))))),this.hasL2&&(t=(0,r.add)(t,(0,r.sum)(r.mul(this.l2,a.h6(e))))),r.reshape(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}function l(e){return i(e),new u({l1:null!=e?e.l1:null,l2:0})}function p(e){return i(e),new u({l2:null!=e?e.l2:null,l1:0})}u.className="L1L2",r.serialization.registerClass(u);let h={l1l2:"L1L2"};function c(e){return(0,s.Kj)(e)}function d(e,t={}){return(0,s.tU)(e,r.serialization.SerializationMap.getMap().classNameMap,t,"regularizer")}function m(e){return null==e?null:"string"==typeof e?d({className:e in h?h[e]:e,config:{}}):e instanceof o?e:d(e)}},82098:function(e,t,n){n.d(t,{WE:function(){return r}});function r(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!function e(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){for(let n of Object.keys(t))if("string"!=typeof n||!e(t[n]))return!1;return!0}if(!Array.isArray(t))return!1;for(let n of t)if(!e(n))return!1;return!0}{let e=typeof t;return"string"===e||"number"===e||"boolean"===e}}(e))throw Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let n=JSON.stringify(e);n.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}},22615:function(e,t,n){n.d(t,{$U:function(){return u},AF:function(){return i},kt:function(){return o}});var r=n(17995),a=n(44386),s=n(37222);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i(e,t,n){if("number"==typeof e)return(0,a.JE)(e,t);if(e.length!==t)throw new r.nu(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let a=0;a<t;++a){let i=e[a];if(!(0,s.U)(i))throw new r.nu(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function o(e,t,n,r,a=1){return null==e?e:Math.floor((("same"===n?e:e-(t+(t-1)*(a-1))+1)+r-1)/r)}function u(e,t,n,a){if(null==e)return null;if("valid"===a)e=e*t+(0,s.Fp)([n-t,0]);else if("same"===a)e*=t;else throw new r.nu(`Unsupport padding mode: ${a}.`);return e}},44386:function(e,t,n){n.d(t,{Bq:function(){return u},D1:function(){return p},Ds:function(){return x},JE:function(){return s},Kj:function(){return d},L7:function(){return f},Mx:function(){return N},QX:function(){return o},Tw:function(){return g},WT:function(){return k},hu:function(){return i},iQ:function(){return function e(t,n){Array.isArray(t)?(r.util.assert(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((t,r)=>e(t,`element ${r+1} of ${n}`))):r.util.assert(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${function e(t){return null===t?"null":Array.isArray(t)?"["+t.map(t=>e(t)).join(",")+"]":"string"==typeof t?`"${t}"`:`${t}`}(t)}.`)}},nK:function(){return y},tU:function(){return m},xn:function(){return b},zW:function(){return h},zZ:function(){return l}});var r=n(94976),a=n(17995);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{let n=Array(t);return n.fill(e),n}}function i(e,t){if(!e)throw new a.ps(t)}function o(e,t){let n=0;for(let r of e)r===t&&n++;return n}function u(e){return 1===e.length?e[0]:e}function l(e){return Array.isArray(e)?e:[e]}function p(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function h(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let c={};function d(e){if(null==e)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function m(e,t={},n={},r="object",s=!1){if("string"==typeof e){let s;if(e in n)s=n[e];else if(e in c)s=c[e];else if(null==(s=t[e]))throw new a.nu(`Unknown ${r}: ${e}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}{let i,o;if(null==e.className||null==e.config)throw new a.nu(`${r}: Improper config format: ${JSON.stringify(e)}.
'className' and 'config' must set.`);let u=e.className;if(u in n?[i,o]=n[u]:u in c?[i,o]=c.className:u in t&&([i,o]=t[u]),null==i)throw new a.nu(`Unknown ${r}: ${u}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=o){let t={};for(let e of Object.keys(c))t[e]=c[e];for(let e of Object.keys(n))t[e]=n[e];e.config.customObjects=t;let r=Object.assign({},c);for(let e of Object.keys(n))c[e]=n[e];!function e(t){if(null!=t&&"object"==typeof t){if(Array.isArray(t))t.forEach(t=>e(t));else for(let n of Object.keys(t)){let r=t[n];null!=r&&"object"==typeof r&&(Array.isArray(r)||"ndarray"!==r.type||"number"!=typeof r.value?e(r):t[n]=r.value)}}}(e.config);let a=o(i,e.config,n,s);return c=Object.assign({},r),a}{let t=Object.assign({},c);for(let e of Object.keys(n))c[e]=n[e];let r=new i(e.config);return c=Object.assign({},t),r}}}function f(e,t){return -1*(e<t?-1:e>t?1:0)}function g(e){if(null==e)return e;let t=[];for(let n of e)-1===t.indexOf(n)&&t.push(n);return t}function y(e){if(null==e)throw new a.nu(`Invalid value in obj: ${JSON.stringify(e)}`);for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function b(e,t,n){if(null!=n&&0>e.indexOf(n))throw new a.nu(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function N(e,t,n=0,r=1/0){return i(n>=0),i(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function x(e,t,n){let a,s=null!=n?n():r.util.now();return(...i)=>{let o=null!=n?n():r.util.now();return o-s<t?a:(s=o,a=e(...i))}}function k(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}},11923:function(e,t,n){n.d(t,{I:function(){return a}});var r=n(61690);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a(e,t,n,a=console.log){let i;let o=function(e){let t=!0,n=[],r=[];for(let t in e.nodesByDepth)n.push(e.nodesByDepth[t]);for(let e of n){if(e.length>1||1===e.length&&e[0].inboundLayers.length>1){t=!1;break}r.push(...e)}if(t)for(let n of e.layers){let e=!1;for(let a of n.inboundNodes)if(-1!==r.indexOf(a)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),u=["Layer (type)","Input Shape","Output shape","Param #"];if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!o)for(let t in u.push("Receives inputs"),i=[],e.nodesByDepth)i.push(...e.nodesByDepth[t]);a("_".repeat(t)),s(u,n,a),a("=".repeat(t));let l=e.layers;for(let e=0;e<l.length;++e)o?function(e,t,n){let r,a;try{a=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(e){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}let i=e.name,o=e.getClassName();s([`${i} (${o})`,a,r,e.countParams().toString()],t,n)}(l[e],n,a):function(e,t,n,r){let a,i;try{i=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(e){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(e){a="multiple"}let o=[];for(let t of e.inboundNodes)if(null==n||!(n.length>0)||-1!==n.indexOf(t))for(let e=0;e<t.inboundLayers.length;++e){let n=t.inboundLayers[e].name,r=t.nodeIndices[e],a=t.tensorIndices[e];o.push(`${n}[${r}][${a}]`)}let u=e.name,l=e.getClassName(),p=0===o.length?"":o[0];s([`${u} (${l})`,i,a,e.countParams().toString(),p],t,r);for(let e=1;e<o.length;++e)s(["","","","",o[e]],t,r)}(l[e],n,i,a),a((e===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let p=null!=e.collectedTrainableWeights?(0,r.t)(e.collectedTrainableWeights):(0,r.t)(e.trainableWeights),h=(0,r.t)(e.nonTrainableWeights);a(`Total params: ${p+h}`),a(`Trainable params: ${p}`),a(`Non-trainable params: ${h}`),a("_".repeat(t))}function s(e,t,n=console.log){let r="";for(let n=0;n<e.length;++n)n>0&&(r=r.slice(0,r.length-1)+" "),r+=e[n],r=r.slice(0,t[n]),r+=" ".repeat(t[n]-r.length);n(r)}},37222:function(e,t,n){n.d(t,{Fp:function(){return o},NS:function(){return s},U:function(){return a},VV:function(){return i},w6:function(){return u}});var r=n(17995);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a(e){return e===parseInt(e.toString(),10)}function s(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function i(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r<t&&(t=r)}return t}function o(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r>t&&(t=r)}return t}function u(e,t){if(t<e)throw new r.nu(`end (${t}) < begin (${e}) is forbidden.`);let n=[];for(let r=e;r<t;++r)n.push(r);return n}},2909:function(e,t,n){n.d(t,{a:function(){return function e(t,n){if(null===t)return null;if("string"==typeof t)return r.zW(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){let r=[],s=t.length;for(let i=0;i<s;++i){let s=t[i];a(n,i,s)?r.push(s):r.push(e(s,n))}return r}{let n={};for(let a of Object.keys(t)){let s=t[a];if("name"===a&&"string"==typeof s)n[a]=s;else{let t=r.zW(a);n[t]=e(s,t)}}return n}}},q:function(){return function e(t,n){if(null==t)return null;if("string"==typeof t)return r.D1(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){let r=[],s=t.length;for(let i=0;i<s;++i){let s=t[i];a(n,i,s)?r.push(s):r.push(e(s,n))}return r}{let n={};for(let a of Object.keys(t)){let s=t[a],i=r.D1(a);("name"===a||"className"===a)&&"string"==typeof s?n[i]=s:n[i]=e(s,a)}return n}}}});var r=n(44386);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}},69075:function(e,t,n){n.d(t,{Wf:function(){return o},XO:function(){return a},nQ:function(){return i},x6:function(){return s}});var r=n(17995);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a(e){return Array.isArray(e)&&Array.isArray(e[0])}function s(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function i(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new r.nu(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function o(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))return e;if(1===e.length)return e[0];throw new r.nu(`Expected exactly 1 Shape; got ${e.length}`)}},61690:function(e,t,n){n.d(t,{t:function(){return r}});/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r(e){let t=0;for(let n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}},33217:function(e,t,n){n.d(t,{FQ:function(){return u},fU:function(){return o},zb:function(){return l}});var r=n(94976),a=n(73706),s=n(96168);n(17995);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let i="Variable";class o{constructor(e,t="float32",n=i,o=!0,u=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=(0,a.L)(),n=null==n?i:n,this.originalName=(0,s.MU)(n),this.name=(0,s.w8)(this.originalName),this.trainable_=o,this.constraint=u,this.val=r.variable(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function u(e){return e.map(e=>e.read())}function l(e){e.forEach(e=>{e[0].write(e[1])})}},37906:function(e,t,n){n.d(t,{i:function(){return r}});/** @license See the LICENSE file. */let r="4.20.0"},88405:function(e,t,n){n.r(t),n.d(t,{Abs:function(){return h.Abs},Acos:function(){return h.Acos},Acosh:function(){return h.Acosh},AdadeltaOptimizer:function(){return h.AdadeltaOptimizer},AdagradOptimizer:function(){return h.AdagradOptimizer},AdamOptimizer:function(){return h.AdamOptimizer},AdamaxOptimizer:function(){return h.AdamaxOptimizer},Add:function(){return h.Add},AddN:function(){return h.AddN},All:function(){return h.All},Any:function(){return h.Any},ArgMax:function(){return h.ArgMax},ArgMin:function(){return h.ArgMin},Asin:function(){return h.Asin},Asinh:function(){return h.Asinh},Atan:function(){return h.Atan},Atan2:function(){return h.Atan2},Atanh:function(){return h.Atanh},AvgPool:function(){return h.AvgPool},AvgPool3D:function(){return h.AvgPool3D},AvgPool3DGrad:function(){return h.AvgPool3DGrad},AvgPoolGrad:function(){return h.AvgPoolGrad},BatchMatMul:function(){return h.BatchMatMul},BatchToSpaceND:function(){return h.BatchToSpaceND},Bincount:function(){return h.Bincount},BitwiseAnd:function(){return h.BitwiseAnd},BroadcastArgs:function(){return h.BroadcastArgs},BroadcastTo:function(){return h.BroadcastTo},Callback:function(){return n3},CallbackList:function(){return nY.BO},Cast:function(){return h.Cast},Ceil:function(){return h.Ceil},ClipByValue:function(){return h.ClipByValue},Complex:function(){return h.Complex},ComplexAbs:function(){return h.ComplexAbs},Concat:function(){return h.Concat},Conv2D:function(){return h.Conv2D},Conv2DBackpropFilter:function(){return h.Conv2DBackpropFilter},Conv2DBackpropInput:function(){return h.Conv2DBackpropInput},Conv3D:function(){return h.Conv3D},Conv3DBackpropFilterV2:function(){return h.Conv3DBackpropFilterV2},Conv3DBackpropInputV2:function(){return h.Conv3DBackpropInputV2},Cos:function(){return h.Cos},Cosh:function(){return h.Cosh},CropAndResize:function(){return h.CropAndResize},Cumprod:function(){return h.Cumprod},Cumsum:function(){return h.Cumsum},CustomCallback:function(){return nY.iT},DataStorage:function(){return h.DataStorage},DenseBincount:function(){return h.DenseBincount},DepthToSpace:function(){return h.DepthToSpace},DepthwiseConv2dNative:function(){return h.DepthwiseConv2dNative},DepthwiseConv2dNativeBackpropFilter:function(){return h.DepthwiseConv2dNativeBackpropFilter},DepthwiseConv2dNativeBackpropInput:function(){return h.DepthwiseConv2dNativeBackpropInput},Diag:function(){return h.Diag},Dilation2D:function(){return h.Dilation2D},Dilation2DBackpropFilter:function(){return h.Dilation2DBackpropFilter},Dilation2DBackpropInput:function(){return h.Dilation2DBackpropInput},Draw:function(){return h.Draw},ENV:function(){return h.ENV},EarlyStopping:function(){return n6},Einsum:function(){return h.Einsum},Elu:function(){return h.Elu},EluGrad:function(){return h.EluGrad},Environment:function(){return h.Environment},Equal:function(){return h.Equal},Erf:function(){return h.Erf},Exp:function(){return h.Exp},ExpandDims:function(){return h.ExpandDims},Expm1:function(){return h.Expm1},FFT:function(){return h.FFT},Fill:function(){return h.Fill},FlipLeftRight:function(){return h.FlipLeftRight},Floor:function(){return h.Floor},FloorDiv:function(){return h.FloorDiv},FromPixels:function(){return h.FromPixels},FusedBatchNorm:function(){return h.FusedBatchNorm},FusedConv2D:function(){return h.FusedConv2D},FusedDepthwiseConv2D:function(){return h.FusedDepthwiseConv2D},GPGPUContext:function(){return uw.Af},GatherNd:function(){return h.GatherNd},GatherV2:function(){return h.GatherV2},GraphModel:function(){return rr.g_},Greater:function(){return h.Greater},GreaterEqual:function(){return h.GreaterEqual},History:function(){return nY.Ay},IFFT:function(){return h.IFFT},Identity:function(){return h.Identity},Imag:function(){return h.Imag},InputSpec:function(){return n7.Zg},IsFinite:function(){return h.IsFinite},IsInf:function(){return h.IsInf},IsNan:function(){return h.IsNan},KernelBackend:function(){return h.KernelBackend},LRN:function(){return h.LRN},LRNGrad:function(){return h.LRNGrad},LayerVariable:function(){return rt.fU},LayersModel:function(){return n0.QV},LeakyRelu:function(){return h.LeakyRelu},Less:function(){return h.Less},LessEqual:function(){return h.LessEqual},LinSpace:function(){return h.LinSpace},Log:function(){return h.Log},Log1p:function(){return h.Log1p},LogSoftmax:function(){return h.LogSoftmax},LogicalAnd:function(){return h.LogicalAnd},LogicalNot:function(){return h.LogicalNot},LogicalOr:function(){return h.LogicalOr},LogicalXor:function(){return h.LogicalXor},LowerBound:function(){return h.LowerBound},MathBackendCPU:function(){return at},MathBackendWebGL:function(){return uw.QC},MatrixBandPart:function(){return h.MatrixBandPart},Max:function(){return h.Max},MaxPool:function(){return h.MaxPool},MaxPool3D:function(){return h.MaxPool3D},MaxPool3DGrad:function(){return h.MaxPool3DGrad},MaxPoolGrad:function(){return h.MaxPoolGrad},MaxPoolWithArgmax:function(){return h.MaxPoolWithArgmax},Maximum:function(){return h.Maximum},Mean:function(){return h.Mean},Min:function(){return h.Min},Minimum:function(){return h.Minimum},MirrorPad:function(){return h.MirrorPad},Mod:function(){return h.Mod},MomentumOptimizer:function(){return h.MomentumOptimizer},Multinomial:function(){return h.Multinomial},Multiply:function(){return h.Multiply},Neg:function(){return h.Neg},NonMaxSuppressionV3:function(){return h.NonMaxSuppressionV3},NonMaxSuppressionV4:function(){return h.NonMaxSuppressionV4},NonMaxSuppressionV5:function(){return h.NonMaxSuppressionV5},NotEqual:function(){return h.NotEqual},OP_SCOPE_SUFFIX:function(){return h.OP_SCOPE_SUFFIX},OneHot:function(){return h.OneHot},OnesLike:function(){return h.OnesLike},Optimizer:function(){return h.Optimizer},OptimizerConstructors:function(){return h.OptimizerConstructors},Pack:function(){return h.Pack},PadV2:function(){return h.PadV2},Pool:function(){return h.Pool},Pow:function(){return h.Pow},Prelu:function(){return h.Prelu},Prod:function(){return h.Prod},RMSPropOptimizer:function(){return h.RMSPropOptimizer},RNN:function(){return re.$p},RaggedGather:function(){return h.RaggedGather},RaggedRange:function(){return h.RaggedRange},RaggedTensorToTensor:function(){return h.RaggedTensorToTensor},Range:function(){return h.Range},Rank:function(){return h.Rank},Real:function(){return h.Real},RealDiv:function(){return h.RealDiv},Reciprocal:function(){return h.Reciprocal},Reduction:function(){return h.Reduction},Relu:function(){return h.Relu},Relu6:function(){return h.Relu6},Reshape:function(){return h.Reshape},ResizeBilinear:function(){return h.ResizeBilinear},ResizeBilinearGrad:function(){return h.ResizeBilinearGrad},ResizeNearestNeighbor:function(){return h.ResizeNearestNeighbor},ResizeNearestNeighborGrad:function(){return h.ResizeNearestNeighborGrad},Reverse:function(){return h.Reverse},RotateWithOffset:function(){return h.RotateWithOffset},Round:function(){return h.Round},Rsqrt:function(){return h.Rsqrt},SGDOptimizer:function(){return h.SGDOptimizer},ScatterNd:function(){return h.ScatterNd},SearchSorted:function(){return h.SearchSorted},Select:function(){return h.Select},Selu:function(){return h.Selu},Sequential:function(){return nQ.sb},Sigmoid:function(){return h.Sigmoid},Sign:function(){return h.Sign},Sin:function(){return h.Sin},Sinh:function(){return h.Sinh},Slice:function(){return h.Slice},Softmax:function(){return h.Softmax},Softplus:function(){return h.Softplus},SpaceToBatchND:function(){return h.SpaceToBatchND},SparseFillEmptyRows:function(){return h.SparseFillEmptyRows},SparseReshape:function(){return h.SparseReshape},SparseSegmentMean:function(){return h.SparseSegmentMean},SparseSegmentSum:function(){return h.SparseSegmentSum},SparseToDense:function(){return h.SparseToDense},SplitV:function(){return h.SplitV},Sqrt:function(){return h.Sqrt},Square:function(){return h.Square},SquaredDifference:function(){return h.SquaredDifference},StaticRegexReplace:function(){return h.StaticRegexReplace},Step:function(){return h.Step},StridedSlice:function(){return h.StridedSlice},StringNGrams:function(){return h.StringNGrams},StringSplit:function(){return h.StringSplit},StringToHashBucketFast:function(){return h.StringToHashBucketFast},Sub:function(){return h.Sub},Sum:function(){return h.Sum},SymbolicTensor:function(){return n7.Iy},Tan:function(){return h.Tan},Tanh:function(){return h.Tanh},Tensor:function(){return h.Tensor},TensorBuffer:function(){return h.TensorBuffer},TensorScatterUpdate:function(){return h.TensorScatterUpdate},Tile:function(){return h.Tile},TopK:function(){return h.TopK},Transform:function(){return h.Transform},Transpose:function(){return h.Transpose},Unique:function(){return h.Unique},Unpack:function(){return h.Unpack},UnsortedSegmentSum:function(){return h.UnsortedSegmentSum},UpperBound:function(){return h.UpperBound},Variable:function(){return h.Variable},ZerosLike:function(){return h.ZerosLike},_FusedMatMul:function(){return h._FusedMatMul},abs:function(){return h.abs},acos:function(){return h.acos},acosh:function(){return h.acosh},add:function(){return h.add},addN:function(){return h.addN},all:function(){return h.all},any:function(){return h.any},argMax:function(){return h.argMax},argMin:function(){return h.argMin},asin:function(){return h.asin},asinh:function(){return h.asinh},atan:function(){return h.atan},atan2:function(){return h.atan2},atanh:function(){return h.atanh},avgPool:function(){return h.avgPool},avgPool3d:function(){return h.avgPool3d},backend:function(){return h.backend},backend_util:function(){return h.backend_util},basicLSTMCell:function(){return h.basicLSTMCell},batchNorm:function(){return h.batchNorm},batchNorm2d:function(){return h.batchNorm2d},batchNorm3d:function(){return h.batchNorm3d},batchNorm4d:function(){return h.batchNorm4d},batchToSpaceND:function(){return h.batchToSpaceND},bincount:function(){return h.bincount},bitwiseAnd:function(){return h.bitwiseAnd},booleanMaskAsync:function(){return h.booleanMaskAsync},broadcastArgs:function(){return h.broadcastArgs},broadcastTo:function(){return h.broadcastTo},broadcast_util:function(){return h.broadcast_util},browser:function(){return h.browser},buffer:function(){return h.buffer},callbacks:function(){return n5},cast:function(){return h.cast},ceil:function(){return h.ceil},clipByValue:function(){return h.clipByValue},clone:function(){return h.clone},complex:function(){return h.complex},concat:function(){return h.concat},concat1d:function(){return h.concat1d},concat2d:function(){return h.concat2d},concat3d:function(){return h.concat3d},concat4d:function(){return h.concat4d},constraints:function(){return s},conv1d:function(){return h.conv1d},conv2d:function(){return h.conv2d},conv2dTranspose:function(){return h.conv2dTranspose},conv3d:function(){return h.conv3d},conv3dTranspose:function(){return h.conv3dTranspose},copyRegisteredKernels:function(){return h.copyRegisteredKernels},cos:function(){return h.cos},cosh:function(){return h.cosh},cosineWindow:function(){return h.cosineWindow},cumprod:function(){return h.cumprod},cumsum:function(){return h.cumsum},customGrad:function(){return h.customGrad},data:function(){return p},denseBincount:function(){return h.denseBincount},deprecationWarn:function(){return h.deprecationWarn},depthToSpace:function(){return h.depthToSpace},depthwiseConv2d:function(){return h.depthwiseConv2d},deregisterOp:function(){return rr.Ue},device_util:function(){return h.device_util},diag:function(){return h.diag},dilation2d:function(){return h.dilation2d},disableDeprecationWarnings:function(){return h.disableDeprecationWarnings},dispose:function(){return h.dispose},disposeVariables:function(){return h.disposeVariables},div:function(){return h.div},divNoNan:function(){return h.divNoNan},dot:function(){return h.dot},dropout:function(){return h.dropout},einsum:function(){return h.einsum},elu:function(){return h.elu},enableDebugMode:function(){return h.enableDebugMode},enableProdMode:function(){return h.enableProdMode},enclosingPowerOfTwo:function(){return h.enclosingPowerOfTwo},engine:function(){return h.engine},ensureShape:function(){return h.ensureShape},env:function(){return h.env},equal:function(){return h.equal},erf:function(){return h.erf},euclideanNorm:function(){return h.euclideanNorm},exp:function(){return h.exp},expandDims:function(){return h.expandDims},expm1:function(){return h.expm1},eye:function(){return h.eye},fft:function(){return h.fft},fill:function(){return h.fill},findBackend:function(){return h.findBackend},findBackendFactory:function(){return h.findBackendFactory},floor:function(){return h.floor},floorDiv:function(){return h.floorDiv},forceHalfFloat:function(){return uw.kS},fused:function(){return h.fused},gather:function(){return h.gather},gatherND:function(){return h.gatherND},gather_util:function(){return h.gather_util},getBackend:function(){return h.getBackend},getGradient:function(){return h.getGradient},getKernel:function(){return h.getKernel},getKernelsForBackend:function(){return h.getKernelsForBackend},gpgpu_util:function(){return uw.lz},grad:function(){return h.grad},grads:function(){return h.grads},greater:function(){return h.greater},greaterEqual:function(){return h.greaterEqual},ifft:function(){return h.ifft},imag:function(){return h.imag},image:function(){return h.image},inTopKAsync:function(){return h.inTopKAsync},initializers:function(){return i},input:function(){return n8.qH},io:function(){return h.io},irfft:function(){return h.irfft},isFinite:function(){return h.isFinite},isInf:function(){return h.isInf},isNaN:function(){return h.isNaN},keep:function(){return h.keep},kernel_impls:function(){return h.kernel_impls},layers:function(){return nE},leakyRelu:function(){return h.leakyRelu},less:function(){return h.less},lessEqual:function(){return h.lessEqual},linalg:function(){return h.linalg},linspace:function(){return h.linspace},loadGraphModel:function(){return rr.YL},loadGraphModelSync:function(){return rr.fM},loadLayersModel:function(){return n8.FB},localResponseNormalization:function(){return h.localResponseNormalization},log:function(){return h.log},log1p:function(){return h.log1p},logSigmoid:function(){return h.logSigmoid},logSoftmax:function(){return h.logSoftmax},logSumExp:function(){return h.logSumExp},logicalAnd:function(){return h.logicalAnd},logicalNot:function(){return h.logicalNot},logicalOr:function(){return h.logicalOr},logicalXor:function(){return h.logicalXor},losses:function(){return h.losses},lowerBound:function(){return h.lowerBound},matMul:function(){return h.matMul},math:function(){return h.math},max:function(){return h.max},maxPool:function(){return h.maxPool},maxPool3d:function(){return h.maxPool3d},maxPoolWithArgmax:function(){return h.maxPoolWithArgmax},maximum:function(){return h.maximum},mean:function(){return h.mean},memory:function(){return h.memory},meshgrid:function(){return h.meshgrid},metrics:function(){return o},min:function(){return h.min},minimum:function(){return h.minimum},mirrorPad:function(){return h.mirrorPad},mod:function(){return h.mod},model:function(){return n8.o4},models:function(){return u},moments:function(){return h.moments},movingAverage:function(){return h.movingAverage},mul:function(){return h.mul},multiRNNCell:function(){return h.multiRNNCell},multinomial:function(){return h.multinomial},neg:function(){return h.neg},nextFrame:function(){return h.nextFrame},norm:function(){return h.norm},notEqual:function(){return h.notEqual},oneHot:function(){return h.oneHot},ones:function(){return h.ones},onesLike:function(){return h.onesLike},op:function(){return h.op},outerProduct:function(){return h.outerProduct},pad:function(){return h.pad},pad1d:function(){return h.pad1d},pad2d:function(){return h.pad2d},pad3d:function(){return h.pad3d},pad4d:function(){return h.pad4d},pool:function(){return h.pool},pow:function(){return h.pow},prelu:function(){return h.prelu},print:function(){return h.print},prod:function(){return h.prod},profile:function(){return h.profile},raggedGather:function(){return h.raggedGather},raggedRange:function(){return h.raggedRange},raggedTensorToTensor:function(){return h.raggedTensorToTensor},rand:function(){return h.rand},randomGamma:function(){return h.randomGamma},randomNormal:function(){return h.randomNormal},randomStandardNormal:function(){return h.randomStandardNormal},randomUniform:function(){return h.randomUniform},randomUniformInt:function(){return h.randomUniformInt},range:function(){return h.range},ready:function(){return h.ready},real:function(){return h.real},reciprocal:function(){return h.reciprocal},registerBackend:function(){return h.registerBackend},registerCallbackConstructor:function(){return n8.gl},registerGradient:function(){return h.registerGradient},registerKernel:function(){return h.registerKernel},registerOp:function(){return rr.iw},regularizers:function(){return l},relu:function(){return h.relu},relu6:function(){return h.relu6},removeBackend:function(){return h.removeBackend},reshape:function(){return h.reshape},reverse:function(){return h.reverse},reverse1d:function(){return h.reverse1d},reverse2d:function(){return h.reverse2d},reverse3d:function(){return h.reverse3d},reverse4d:function(){return h.reverse4d},rfft:function(){return h.rfft},round:function(){return h.round},rsqrt:function(){return h.rsqrt},scalar:function(){return h.scalar},scatterND:function(){return h.scatterND},scatter_util:function(){return h.scatter_util},searchSorted:function(){return h.searchSorted},selu:function(){return h.selu},separableConv2d:function(){return h.separableConv2d},sequential:function(){return n8.Pe},serialization:function(){return h.serialization},setBackend:function(){return h.setBackend},setPlatform:function(){return h.setPlatform},setWebGLContext:function(){return uw.nd},setdiff1dAsync:function(){return h.setdiff1dAsync},shared:function(){return an},sigmoid:function(){return h.sigmoid},sign:function(){return h.sign},signal:function(){return h.signal},sin:function(){return h.sin},sinh:function(){return h.sinh},slice:function(){return h.slice},slice1d:function(){return h.slice1d},slice2d:function(){return h.slice2d},slice3d:function(){return h.slice3d},slice4d:function(){return h.slice4d},slice_util:function(){return h.slice_util},softmax:function(){return h.softmax},softplus:function(){return h.softplus},spaceToBatchND:function(){return h.spaceToBatchND},sparse:function(){return h.sparse},sparseToDense:function(){return h.sparseToDense},spectral:function(){return h.spectral},split:function(){return h.split},sqrt:function(){return h.sqrt},square:function(){return h.square},squaredDifference:function(){return h.squaredDifference},squeeze:function(){return h.squeeze},stack:function(){return h.stack},step:function(){return h.step},stridedSlice:function(){return h.stridedSlice},string:function(){return h.string},sub:function(){return h.sub},sum:function(){return h.sum},sumOutType:function(){return h.sumOutType},tan:function(){return h.tan},tanh:function(){return h.tanh},tensor:function(){return h.tensor},tensor1d:function(){return h.tensor1d},tensor2d:function(){return h.tensor2d},tensor3d:function(){return h.tensor3d},tensor4d:function(){return h.tensor4d},tensor5d:function(){return h.tensor5d},tensor6d:function(){return h.tensor6d},tensorScatterUpdate:function(){return h.tensorScatterUpdate},tensor_util:function(){return h.tensor_util},test_util:function(){return h.test_util},tidy:function(){return h.tidy},tile:function(){return h.tile},time:function(){return h.time},topk:function(){return h.topk},train:function(){return h.train},transpose:function(){return h.transpose},truncatedNormal:function(){return h.truncatedNormal},unique:function(){return h.unique},unregisterGradient:function(){return h.unregisterGradient},unregisterKernel:function(){return h.unregisterKernel},unsortedSegmentSum:function(){return h.unsortedSegmentSum},unstack:function(){return h.unstack},upcastType:function(){return h.upcastType},upperBound:function(){return h.upperBound},util:function(){return h.util},valueAndGrad:function(){return h.valueAndGrad},valueAndGrads:function(){return h.valueAndGrads},variable:function(){return h.variable},variableGrads:function(){return h.variableGrads},version:function(){return uS},version_converter:function(){return rr.gJ},version_core:function(){return h.version_core},version_cpu:function(){return ar},version_layers:function(){return rn.i},version_webgl:function(){return uw.ic},webgl:function(){return uw.yO},webgl_util:function(){return uw.fZ},where:function(){return h.where},whereAsync:function(){return h.whereAsync},zeros:function(){return h.zeros},zerosLike:function(){return h.zerosLike}});var r,a,s={};n.r(s),n.d(s,{maxNorm:function(){return np},minMaxNorm:function(){return nd},nonNeg:function(){return nc},unitNorm:function(){return nh}});var i={};n.r(i),n.d(i,{constant:function(){return ny},glorotNormal:function(){return nS},glorotUniform:function(){return nw},heNormal:function(){return nT},heUniform:function(){return nI},identity:function(){return nk},leCunNormal:function(){return nA},leCunUniform:function(){return nD},ones:function(){return ng},orthogonal:function(){return nF},randomNormal:function(){return nN},randomUniform:function(){return nb},truncatedNormal:function(){return nx},varianceScaling:function(){return nv},zeros:function(){return nf}});var o={};n.r(o),n.d(o,{MAPE:function(){return nH},MSE:function(){return nq},binaryAccuracy:function(){return nM},binaryCrossentropy:function(){return n_},categoricalAccuracy:function(){return nL},categoricalCrossentropy:function(){return n$},cosineProximity:function(){return nB},mape:function(){return nj},meanAbsoluteError:function(){return nV},meanAbsolutePercentageError:function(){return nW},meanSquaredError:function(){return nU},mse:function(){return nG},precision:function(){return nR},recall:function(){return nP},sparseCategoricalAccuracy:function(){return nO}});var u={};n.r(u),n.d(u,{modelFromJSON:function(){return nQ.p5}});var l={};n.r(l),n.d(l,{l1:function(){return nZ},l1l2:function(){return nK},l2:function(){return nJ}});var p={};n.r(p),n.d(p,{CSVDataset:function(){return rB},Dataset:function(){return rF},FileDataSource:function(){return r1},TextLineDataset:function(){return r_},URLDataSource:function(){return r2},array:function(){return rC},csv:function(){return r3},func:function(){return r4},generator:function(){return r9},microphone:function(){return r5},version_data:function(){return r7},webcam:function(){return r6},zip:function(){return rz}});var h=n(94976),c=n(89052),d=n(42460),m=n(74644),f=n(26449);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g={kernelName:c.SYM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,f.N)((0,d.p)(n,"float32"),-1))}}};var y=n(69750),b=n(44591),N=n(86008),x=n(13681),k=n(97888),v=n(67435);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let w={kernelName:c.VGw,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,k.h)((0,d.p)(n,"float32")),r=(0,x._)((0,v.l)((0,N.i)(1),t));return(0,b.W)((0,y.h)(e,r))}}}},S={kernelName:c.SpW,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,x._)((0,v.l)((0,k.h)((0,d.p)(n,"float32")),1));return(0,y.h)(e,t)}}}};var T=n(87355),I=n(70934),A=n(43174);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let D={kernelName:c.mm_,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=T.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=e,r=T.getReductionAxes(n.shape,a);return r.length>0&&(t=(0,A.S)(t,r)),(0,I.X)(t,n.shape)},b:()=>{let t=e,n=T.getReductionAxes(r.shape,a);return n.length>0&&(t=(0,A.S)(t,n)),(0,I.X)(t,r.shape)}}}},F={kernelName:c.Xze,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}};var E=n(33113);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let C={kernelName:c.sJF,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,E.P)(n)}}},z={kernelName:c.aJk,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,E.P)(n)}}},M={kernelName:c.M2y,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,y.h)(e,(0,x._)((0,v.l)((0,N.i)(1),(0,k.h)((0,d.p)(n,"float32")))))}}};var _=n(28796);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let O={kernelName:c.qw7,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,x._)((0,_.I)((0,N.i)(1),(0,k.h)((0,d.p)(n,"float32"))));return(0,y.h)(e,t)}}}},L={kernelName:c.QCc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,T.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{let t=(0,_.I)((0,k.h)(n),(0,k.h)(r)),s=(0,m.d)(e,(0,y.h)(r,t)),i=(0,T.getReductionAxes)(n.shape,a);return i.length>0&&(s=(0,A.S)(s,i)),(0,I.X)(s,n.shape)},b:()=>{let t=(0,_.I)((0,k.h)(n),(0,k.h)(r)),s=(0,b.W)((0,m.d)(e,(0,y.h)(n,t))),i=(0,T.getReductionAxes)(r.shape,a);return i.length>0&&(s=(0,A.S)(s,i)),(0,I.X)(s,r.shape)}}}},$={kernelName:c.jMg,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,y.h)(e,(0,_.I)((0,k.h)((0,d.p)(n,"float32")),1))}}},R={kernelName:c.Oyi,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,y.h)(e,(0,v.l)((0,N.i)(1),(0,k.h)((0,d.p)(n,"float32"))))}}};var P=n(58520),B=n(34950),V=n(31143),W=n(72235),H=n(73080);let j=(0,H.op)({avgPool3dGrad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a,s){let i=(0,B._1)(e,"dy","avgPool3dGrad"),o=(0,B._1)(t,"input","avgPool3dGrad"),u=i,l=o,p=!1;4===o.rank&&(p=!0,u=(0,I.X)(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),l=(0,I.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V.hu(5===u.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),V.hu(5===l.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),(0,W.m)("avgPool3dGrad",a,s);let h={dy:u,input:l},d=P.BV.runKernel(c.IMb,h,{filterSize:n,strides:r,pad:a,dimRoundingMode:s});return p?(0,I.X)(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),U={kernelName:c._k9,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:s,pad:i,dimRoundingMode:o}=n;return{x:()=>j(e,r,a,s,i,o)}}},q=(0,H.op)({avgPoolGrad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a){let s=(0,B._1)(e,"dy","avgPoolGrad"),i=(0,B._1)(t,"input","avgPoolGrad");V.hu(i.rank===s.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`);let o=i,u=s,l=!1;3===i.rank&&(l=!0,o=(0,I.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=(0,I.X)(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V.hu(4===u.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),V.hu(4===o.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);let p={dy:u,input:o},h=P.BV.runKernel(c.ROF,p,{filterSize:n,strides:r,pad:a});return l?(0,I.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),G={kernelName:c.JhU,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:s,pad:i}=n;return{x:()=>q(e,r,a,s,i)}}};var Q=n(33229);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let X={kernelName:c.XLW,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,a]=t,{transposeA:s,transposeB:i}=n;return s||i?!s&&i?{a:()=>(0,Q.O)(e,a,!1,!1),b:()=>(0,Q.O)(e,r,!0,!1)}:s&&!i?{a:()=>(0,Q.O)(a,e,!1,!0),b:()=>(0,Q.O)(r,e,!1,!1)}:{a:()=>(0,Q.O)(a,e,!0,!0),b:()=>(0,Q.O)(e,r,!0,!0)}:{a:()=>(0,Q.O)(e,a,!1,!0),b:()=>(0,Q.O)(r,e,!0,!1)}}};var K=n(68644);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Z={kernelName:c.zws,gradFunc:(e,t,n)=>{let{blockShape:r,crops:a}=n;return{x:()=>(0,K.f)(e,r,a)}}},J={kernelName:c.Ly9,gradFunc:(e,t,n)=>{let r=n.inputShape,a=n.shape,s=Array.from(a);for(let e=r.length-1;e>=0;e--)if(r[e]===a[e])s[e]=1;else if(1!==r[e])throw Error(`broadcastTo(): [${r}] cannot be broadcast to [${a}].`);let i=[];for(let e=0;e<s.length;e++)s[e]>1&&i.push(e);return{x:()=>(0,A.S)(e,i,!0)}}},Y={kernelName:c.RFZ,gradFunc:e=>({x:()=>e.clone()})},ee={kernelName:c.gJX,gradFunc:e=>({x:()=>(0,E.P)(e)})};var et=n(8939),en=n(91073),er=n(72936),ea=n(9670);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let es={kernelName:c.xnO,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:a,clipValueMax:s}=n;return{x:()=>(0,ea.a)((0,er.H)((0,et.b)(r,a),(0,en.z)(r,s)),e,(0,E.P)(e))}}},ei={kernelName:c.yj2,inputsToSave:["x"],gradFunc:g.gradFunc};var eo=n(394);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eu={kernelName:c.Eh3,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(e=>e.shape),{axis:a}=n,s=(0,V.EC)(a,t[0].shape)[0],i=r.map(e=>e[s]);return(0,eo.V)(e,i,s).map(e=>()=>e)}};var el=n(65714),ep=n(43447);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eh={kernelName:c.mhS,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{dilations:s,strides:i,pad:o,dataFormat:u}=n;return V.hu(W.I0(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>(0,ep._)(r.shape,e,a,i,o,u),filter:()=>(0,el.p)(r,e,a.shape,i,o,u)}}};var ec=n(7289);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ed={kernelName:c.wm,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{strides:s,pad:i,dataFormat:o,dimRoundingMode:u}=n;return{dy:()=>(0,ec.T)(e,a,s,i,o,1,u),filter:()=>(0,el.p)(e,r,a.shape,s,i,o,u)}}},em=(0,H.op)({conv3DBackpropFilter_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a){let s=e;4===e.rank&&(s=(0,I.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;4===i.rank&&(i=(0,I.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),V.hu(5===s.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),V.hu(5===i.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),V.hu(5===n.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),V.hu(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),V.hu(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);let o={x:s,dy:i};return P.BV.runKernel(c.o2y,o,{strides:r,pad:a,filterShape:n})}});var ef=n(50375);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eg={kernelName:c.x12,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:s}=n;V.hu((0,W.I0)(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[i,o]=t;return{x:()=>(0,ef._)(i.shape,e,o,a,s),filter:()=>em(i,e,o.shape,a,s)}}};var ey=n(74449);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eb={kernelName:c.mc4,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)((0,b.W)((0,ey.O)((0,d.p)(n,"float32"))),e)}}};var eN=n(49407);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ex={kernelName:c.TR1,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)((0,eN.R)((0,d.p)(n,"float32")),e)}}};var ek=n(63584),ev=n(82062),ew=n(33072);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eS={kernelName:c.iHb,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a,exclusive:s,reverse:i}=n;return{x:()=>{let t=(0,ek.Q3)([a],r.rank),n=(0,ev.z)(e,a,s,!i);return null!=t&&(n=(0,ew.p)(n,t)),n}}}};var eT=n(91224),eI=n(15187);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eA={kernelName:c.cie,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:s,dimRoundingMode:i}=n,o=null==r?[1,1]:r;V.hu(W.I0(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[u,l]=t;return V.hu(4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),V.hu(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),V.hu(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),V.hu(W.jT(a,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${o}'.`),W.m("depthwiseConv2d",s,i),{x:()=>(0,eI.v)(u.shape,e,l,a,s,o,i),filter:()=>(0,eT.z)(u,e,l.shape,a,s,o,i)}}},eD={kernelName:c.p4S,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,s={x:r,filter:a,dy:e},i={x:r,filter:a,dy:e};return{x:()=>P.BV.runKernel(c.ekb,s,n),filter:()=>P.BV.runKernel(c.Vn9,i,n)}}},eF={kernelName:c.SX0,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>P.BV.runKernel(c.HEU,r)}}};var eE=n(96197);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eC={kernelName:c.Omj,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=(0,m.d)((0,eE.Q)((0,b.W)((0,k.h)(n))),2/Math.sqrt(Math.PI));return{x:()=>(0,m.d)(e,r)}}},ez={kernelName:c.NEP,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,n)}}},eM={kernelName:c.YFo,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>(0,I.X)(e,n.shape)}}},e_={kernelName:c.Y0y,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,eE.Q)(n))}}},eO={kernelName:c.OR,gradFunc:e=>({x:()=>(0,E.P)(e)})},eL={kernelName:c.jeX,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,T.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{let t=(0,y.h)(e,(0,d.p)(r,"float32")),s=(0,T.getReductionAxes)(n.shape,a);return s.length>0?(0,I.X)((0,A.S)(t,s),n.shape):t},b:()=>{let t=(0,m.d)(e,(0,d.p)(n,"float32")),s=(0,T.getReductionAxes)(r.shape,a);s.length>0&&(t=(0,I.X)((0,A.S)(t,s),r.shape));let i=(0,k.h)(r);return(0,b.W)((0,y.h)(t,(0,d.p)(i,"float32")))}}}};var e$=n(74045),eR=n(3490);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eP={kernelName:c.sHE,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[a,s,i,o]=t,u=null==o?(0,N.i)(1):o,l=(0,T.getReductionAxes)(s.shape,a.shape),p=[];if(1===s.rank){for(let e=0;e<a.shape.length-1;++e)p.push(a.shape[e]);p.push(1)}let h=(0,v.l)(a,s),c=(0,m.d)(e,u),d=(0,e$.b)((0,_.I)(i,(0,N.i)(r))),f=(0,m.d)((0,m.d)((0,m.d)(d,d),d),(0,N.i)(-.5));return{x:()=>1===s.rank?(0,I.X)((0,m.d)((0,m.d)(e,(0,eR.G)((0,I.X)(d,[1,1,1,s.shape[0]]),p)),u),a.shape):(0,I.X)((0,m.d)((0,m.d)(e,d),u),a.shape),mean:()=>{let e=(0,m.d)((0,m.d)(d,(0,N.i)(-1)),c);return 1===s.rank&&(e=(0,A.S)(e,l)),(0,I.X)(e,s.shape)},variance:()=>{let e=(0,m.d)((0,m.d)(f,h),c);return 1===s.rank&&(e=(0,A.S)(e,l)),(0,I.X)(e,s.shape)},scale:()=>{let t=(0,m.d)(h,d),n=(0,m.d)(e,t);return 1===s.rank&&(n=(0,A.S)(n,l)),(0,I.X)(n,s.shape)},offset:()=>{let t=e;return 1===s.rank&&(t=(0,A.S)(t,l)),(0,I.X)(t,s.shape)}}}};var eB=n(1495),eV=n(1818);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eW={kernelName:c.qi_,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,a]=t,{axis:s,batchDims:i}=n,o=(0,V.EC)(s,r.shape)[0],u=(e,t,n)=>()=>{let r=e.shape,a=t.size,i=r.slice(0,o),u=i.length,l=r.slice(s,r.length).slice(1),p=l.length,h=eH(0,u),c=eH(u+1,u+1+p),d=ej([i,[a],l]),m=(0,I.X)(n,d),f=(0,I.X)(t,[a]),g=ej([[u],h,c]),y=(0,ew.p)(m,g),b=(0,eV.p)(y,f,e.shape[o]),N=(0,ek.LJ)(g);return(0,ew.p)(b,N)};if(1!==i)return{x:u(r,a,e),indices:()=>a};{let t=r.shape[0],n=r.split(t,0);return{x:()=>(0,eB.k)(n.map((t,n)=>u(t,a.slice(n,1),e.slice(n,1))())).reshape(r.shape),indices:()=>a}}}};function eH(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function ej(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eU={kernelName:c.Acj,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>(0,E.P)(n),b:()=>(0,E.P)(r)}}},eq={kernelName:c.iJz,gradFunc:e=>({x:()=>(0,d.p)(e,"float32")})},eG={kernelName:c.avt,gradFunc:e=>({x:()=>(0,E.P)(e)})},eQ={kernelName:c.iWB,gradFunc:e=>({x:()=>(0,E.P)(e)})},eX={kernelName:c.r7n,gradFunc:e=>({x:()=>(0,E.P)(e)})};var eK=n(23553);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eZ={kernelName:c.J$2,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:a}=n,s=(0,eK.p)(r,0);return{x:()=>(0,ea.a)(s,e,(0,m.d)(e,a))}}},eJ={kernelName:c.kU,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,y.h)(e,(0,_.I)(n,1))}}},eY={kernelName:c.ZbH,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,y.h)(e,(0,d.p)(n,"float32"))}}},e0={kernelName:c.qCd,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n;return{logits:()=>{let t=(0,eE.Q)(r);return(0,v.l)(e,(0,m.d)((0,A.S)(e,a,!0),t))}}}},e1=(0,H.op)({localResponseNormalizationBackprop_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=5,a=1,s=1,i=.5){return P.BV.runKernel(c.Hhh,{x:e,y:t,dy:n},{depthRadius:r,bias:a,alpha:s,beta:i})}}),e2={kernelName:c.eZ0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{depthRadius:s,bias:i,alpha:o,beta:u}=n;return{x:()=>e1(r,a,e,s,i,o,u)}}};var e3=n(31998);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e4(e,t,n,r){return t.rank<n.rank&&(t=(0,I.X)(t,ek.rv(t.shape,r))),e.rank<n.rank&&(e=(0,I.X)(e,ek.rv(e.shape,r))),{x:()=>(0,m.d)(e,(0,d.p)((0,e3.D)(n,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e9={kernelName:c.YoZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let{reductionIndices:r}=n,a=t[0],s=t[1],i=V.EC(r,a.shape),o=e4(e,s,a,i);return{x:()=>o.x()}}};var e6=n(94562);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e5={kernelName:c.BMI,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>(0,m.d)(e,(0,d.p)((0,et.b)(n,r),"float32")),b:()=>(0,m.d)(e,(0,d.p)((0,e6.d)(n,r),"float32"))}}},e7=(0,H.op)({maxPool3dGrad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a,s,i){let o=(0,B._1)(e,"dy","maxPool3dGrad"),u=(0,B._1)(t,"input","maxPool3dGrad"),l=(0,B._1)(n,"output","maxPool3dGrad"),p=o,h=u,d=l,m=!1;4===u.rank&&(m=!0,p=(0,I.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),h=(0,I.X)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=(0,I.X)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),V.hu(5===p.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${p.rank}.`),V.hu(5===h.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),V.hu(5===d.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),(0,W.m)("maxPool3dGrad",s,i);let f={dy:p,input:h,output:d},g=P.BV.runKernel(c.OU7,f,{filterSize:r,strides:a,pad:s,dimRoundingMode:i});return m?(0,I.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),e8={kernelName:c.OAf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:u}=n;return{x:()=>e7(e,r,a,s,i,o,u)}}},te=(0,H.op)({maxPoolGrad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a,s,i){let o=(0,B._1)(e,"dy","maxPoolGrad"),u=(0,B._1)(t,"input","maxPoolGrad"),l=(0,B._1)(n,"output","maxPoolGrad");return V.hu(u.rank===o.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${o.rank})`),V.hu(4===o.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),V.hu(4===u.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),W.m("maxPoolGrad",s,i),P.BV.runKernel(c.OV7,{dy:o,input:u,output:l},{filterSize:r,strides:a,pad:s,dimRoundingMode:i})}}),tt={kernelName:c.mTV,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:s,strides:i,pad:o}=n;return{x:()=>te(e,r,a,s,i,o)}}};var tn=n(93311);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tr={kernelName:c.q2K,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,s=V.EC(a,r.shape),i=(0,ek.kz)(r.shape,s)[1],o=V.NA(i);return{x:()=>{let t=r.shape.slice();s.forEach(e=>{t[e]=1});let n=(0,I.X)(e,t);return(0,y.h)((0,m.d)(n,(0,tn.i)(r.shape,"float32")),o)}}}},ta={kernelName:c.c17,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let{axis:r}=n,[a,s]=t,i=V.EC(r,a.shape),o=e4(e,s,a,i);return{x:()=>o.x()}}},ts={kernelName:c.q8u,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>(0,m.d)(e,(0,d.p)((0,en.z)(n,r),"float32")),b:()=>(0,m.d)(e,(0,d.p)((0,eK.p)(n,r),"float32"))}}};var ti=n(92959);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let to={kernelName:c.jQs,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,s=a.map(e=>e[0]);return{x:()=>(0,ti.t)(e,s,r.shape)}}};var tu=n(62114);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tl={kernelName:c.Vbg,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,T.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{let t=(0,T.getReductionAxes)(n.shape,a);return t.length>0?(0,I.X)((0,A.S)(e,t),n.shape):e},b:()=>{let t=(0,m.d)(e,(0,b.W)((0,tu.G)((0,y.h)(n,r)))),s=(0,T.getReductionAxes)(r.shape,a);return s.length>0?(0,I.X)((0,A.S)(t,s),r.shape):t}}}},tp={kernelName:c.wYn,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,T.assertAndGetBroadcastShape)(n.shape,r.shape);return{a:()=>{let t=(0,m.d)(e,(0,d.p)(r,"float32")),s=(0,T.getReductionAxes)(n.shape,a);return s.length>0?(0,I.X)((0,A.S)(t,s),n.shape):t},b:()=>{let t=(0,m.d)(e,(0,d.p)(n,"float32")),s=(0,T.getReductionAxes)(r.shape,a);return s.length>0?(0,I.X)((0,A.S)(t,s),r.shape):t}}}},th={kernelName:c.kuV,gradFunc:e=>({x:()=>(0,b.W)(e)})};var tc=n(71647);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let td={kernelName:c.we_,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>(0,tc.l)(n.shape,"float32")}}},tm={kernelName:c.qWM,gradFunc:e=>({x:()=>(0,E.P)(e)})};var tf=n(89501);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tg={kernelName:c.QiL,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n;return(0,tf.H)(e,r).map(e=>()=>e)}},ty={kernelName:c.lyA,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,s=a.map(e=>e[0]);return{x:()=>(0,ti.t)(e,s,r.shape)}}};var tb=n(60041),tN=n(52952);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tx={kernelName:c.pe_,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,a]=t,s=T.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=(0,d.p)(r,"float32"),a=(0,m.d)(e,(0,m.d)(t,(0,tN.s)(n,(0,v.l)(t,(0,N.i)(1))))),i=T.getReductionAxes(n.shape,s);return i.length>0&&(a=(0,A.S)(a,i)),(0,I.X)(a,n.shape)},b:()=>{let t=(0,eK.p)(n,0),i=(0,ea.a)(t,(0,tb.c)(n),(0,E.P)(n)),o=(0,m.d)(e,(0,m.d)(a,i)),u=T.getReductionAxes(r.shape,s);return u.length>0&&(o=(0,A.S)(o,u)),(0,I.X)(o,r.shape)}}}},tk={kernelName:c.o0g,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,eK.p)(n,0);return{x:()=>(0,ea.a)(a,e,(0,m.d)(e,r)),alpha:()=>{let t=(0,ea.a)(a,(0,E.P)(e),(0,m.d)(e,n)),s=(0,T.getReductionAxes)(r.shape,e.shape);return s.length>0&&(t=(0,A.S)(t,s)),(0,I.X)(t,r.shape)}}}};var tv=n(96951);let tw={kernelName:c.DlI,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,s=[];return s=null==a?r.shape.map((e,t)=>t):"number"==typeof a?[a]:a,{x:()=>(function(e,t,n){let r=e.shape.length,a=r-n.length,s=ek.Q3(n,r),i=e;null!=s&&(i=(0,ew.p)(e,s));let o=i.shape.slice(),u=o.splice(r-n.length,n.length).reduce((e,t)=>e*t,1);o.push(u);let l=/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=e.shape.slice();r[n]=1;let a=(0,I.X)(t,r),s=(0,tv.$)(e,n,!0,!1),i=(0,tv.$)(e,n,!0,!0),o=(0,m.d)(s,i);return(0,m.d)(a,o)}(i.reshape(o),t,a);if(l=l.reshape(i.shape),null!=s){let e=ek.LJ(s);l=(0,ew.p)(l,e)}return l})(r,e,s)}}},tS={kernelName:c.oHH,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=T.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=(0,y.h)(e,(0,d.p)(r,"float32")),s=T.getReductionAxes(n.shape,a);return s.length>0?(0,I.X)((0,A.S)(t,s),n.shape):t},b:()=>{let t=(0,m.d)(e,(0,d.p)(n,"float32")),s=T.getReductionAxes(r.shape,a);s.length>0&&(t=(0,I.X)((0,A.S)(t,s),r.shape));let i=(0,k.h)(r);return(0,b.W)((0,y.h)(t,(0,d.p)(i,"float32")))}}}},tT={kernelName:c.$HU,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,y.h)(e,(0,b.W)((0,k.h)(n)))}}},tI={kernelName:c.SbG,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=(0,m.d)((0,en.z)(n,6),(0,f.N)(n));return{x:()=>(0,m.d)(e,(0,d.p)(r,"float32"))}}},tA={kernelName:c.qkr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,d.p)((0,f.N)(n),"float32"))}}},tD={kernelName:c.HZH,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,I.X)(e,n.shape)}}},tF={kernelName:c._Yw,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>P.BV.runKernel(c.zbQ,a,n)}}},tE={kernelName:c.dpD,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>P.BV.runKernel(c.Hmb,a,n)}}};var tC=n(28258);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tz={kernelName:c.mKl,gradFunc:(e,t,n)=>{let{dims:r}=n,a=(0,V.EC)(r,e.shape);return{x:()=>(0,tC.G)(e,a)}}},tM={kernelName:c.e07,gradFunc:e=>({x:()=>(0,E.P)(e)})},t_={kernelName:c.bV0,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,b.W)((0,y.h)(e,(0,m.d)((0,tN.s)(n,1.5),2)))}}};var tO=n(70438);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tL={kernelName:c.PhF,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>(0,d.p)((0,E.P)(n),"float32"),t:()=>(0,m.d)(e,(0,d.p)(n,e.dtype)),e:()=>(0,m.d)(e,(0,d.p)((0,tO.h)(n),e.dtype))}}};var t$=n(35437);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tR={kernelName:c.oFR,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,eK.p)(n,(0,N.i)(0)),r=(0,N.i)(t$.y),a=(0,N.i)(t$.$),s=(0,m.d)(e,a),i=(0,m.d)((0,m.d)(e,r),(0,eE.Q)((0,d.p)(n,"float32")));return(0,ea.a)(t,s,i)}}}},tP={kernelName:c.a5O,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,m.d)(n,(0,v.l)((0,N.i)(1),n)))}}},tB={kernelName:c.i5y,gradFunc:e=>({x:()=>(0,E.P)(e)})};var tV=n(66292);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tW={kernelName:c.RQH,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)((0,tV.m)((0,d.p)(n,"float32")),e)}}};var tH=n(45094);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tj={kernelName:c.wYB,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)((0,tH.f)((0,d.p)(n,"float32")),e)}}};var tU=n(9434),tq=n(74021);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tG={kernelName:c.p2w,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:a,size:s}=n,i=r.shape,[o,u]=(0,tq.parseSliceParams)(r,a,s),l=[];for(let t=0;t<e.rank;t++)l.push([o[t],i[t]-o[t]-u[t]]);return{x:()=>(0,tU.v)(e,l)}}},tQ={kernelName:c.Gcp,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:a}=n,s=(0,m.d)(e,r);return{logits:()=>(0,v.l)(s,(0,m.d)((0,A.S)(s,[a],!0),r))}}};var tX=n(51417);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tK={kernelName:c.MRv,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,tX.X)(n))}}};var tZ=n(85860);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tJ={kernelName:c.TQc,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:a}=n;return{x:()=>(0,tZ.E)(e,r,a)}}};var tY=n(66598);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let t0={kernelName:c.L8s,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>(0,tY.z)(e,r)}}},t1={kernelName:c.FKq,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,y.h)(e,(0,m.d)((0,x._)((0,d.p)(n,"float32")),2))}}},t2={kernelName:c.bK0,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)(e,(0,m.d)((0,d.p)(n,"float32"),2))}}},t3={kernelName:c._tC,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,N.i)(2);return{a:()=>(0,m.d)(e,(0,m.d)(a,(0,v.l)(n,r))),b:()=>(0,m.d)(e,(0,m.d)(a,(0,v.l)(r,n)))}}},t4={kernelName:c.h8e,gradFunc:e=>({x:()=>(0,E.P)(e)})},t9={kernelName:c.Tr8,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=T.assertAndGetBroadcastShape(n.shape,r.shape);return{a:()=>{let t=e,r=T.getReductionAxes(n.shape,a);return r.length>0&&(t=(0,A.S)(t,r)),(0,I.X)(t,n.shape)},b:()=>{let t=e,n=T.getReductionAxes(r.shape,a);return n.length>0&&(t=(0,A.S)(t,n)),(0,I.X)((0,b.W)(t),r.shape)}}}},t6={kernelName:c.GBy,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,a=r.shape.slice(),{axis:s}=n;(0,V.EC)(s,r.shape).forEach(e=>{a[e]=1});let i=(0,I.X)(e,a),o=(0,m.d)(i,(0,tn.i)(r.shape,"float32"));return{x:()=>o}}},t5={kernelName:c.sEM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,y.h)(e,(0,k.h)((0,tV.m)(n)))}}},t7={kernelName:c.MIZ,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,m.d)((0,v.l)((0,N.i)(1),(0,k.h)(n)),e)}}},t8={kernelName:c.n9L,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:a}=n;return{x:()=>{let t=(0,E.P)(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=(0,_.I)(t,(0,ti.t)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)t=(0,_.I)(t,(0,ti.t)(e,[n*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let i=0;i<a[2];++i)t=(0,_.I)(t,(0,ti.t)(e,[n*r.shape[0],s*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(4===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let i=0;i<a[2];++i)for(let o=0;o<a[3];++o)t=(0,_.I)(t,(0,ti.t)(e,[n*r.shape[0],s*r.shape[1],i*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return t}}}},ne={kernelName:c.G3Y,gradFunc:(e,t,n)=>{let{perm:r}=n,a=ek.LJ(r);return{x:()=>(0,ew.p)(e,a)}}},nt={kernelName:c.ToN,gradFunc:(e,t,n)=>{let{axis:r}=n;return{value:()=>(0,eB.k)(e,r)}}};var nn=n(68569),nr=n(85134),na=n(41725);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ns={kernelName:c.Qvg,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(function(e,t){let n=(0,na.g)(t,(0,E.P)(t)),r=(0,nr.I)(e,n),a=(0,et.b)(t,(0,N.i)(0,"int32")),s=r.rank-a.rank;for(let e=0;e<s;++e)a=(0,nn.d)(a,e+1);a=(0,er.H)(a,(0,tn.i)(r.shape,"bool"));let i=(0,E.P)(r);return(0,ea.a)(a,r,i)})(e,n)}}},ni={kernelName:c.RuY,gradFunc:e=>({x:()=>(0,E.P)(e)})};var no=n(77413);for(let e of[g,w,S,D,F,C,z,M,O,L,$,R,U,G,X,Z,J,Y,ee,es,ei,eu,ed,eh,eg,eb,ex,eS,eA,eD,tS,eF,eC,ez,eM,e_,eL,eO,eP,eW,eU,eq,eG,eQ,eX,eZ,eJ,eY,e0,e2,e9,e9,e5,e8,tt,tr,ta,ts,to,tl,tp,th,td,tm,tg,ty,ty,tx,tk,tw,tT,tI,tA,tD,tF,tE,tz,tM,t_,tL,tR,tP,tB,tW,tj,tG,tQ,tK,tJ,tJ,t0,t0,t1,t3,t2,t4,t9,t6,t5,t7,t8,ne,nt,ns,ni])(0,no.Li)(e);n(18046);var nu=n(42005);(0,h.env)().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,nu.kS);var nl=n(3211);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function np(e){return new nl.Yq(e)}function nh(e){return new nl.cK(e)}function nc(){return new nl.he}function nd(e){return new nl.iL(e)}var nm=n(87882);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nf(){return new nm.H_}function ng(){return new nm.M6}function ny(e){return new nm.sr(e)}function nb(e){return new nm.Is(e)}function nN(e){return new nm.MD(e)}function nx(e){return new nm.w8(e)}function nk(e){return new nm.iJ(e)}function nv(e){return new nm.xc(e)}function nw(e){return new nm.sq(e)}function nS(e){return new nm.Jf(e)}function nT(e){return new nm.RP(e)}function nI(e){return new nm.rB(e)}function nA(e){return new nm.V9(e)}function nD(e){return new nm.yD(e)}function nF(e){return new nm.vG(e)}var nE=n(87661),nC=n(41640),nz=n(5587);function nM(e,t){return nz._F(e,t)}function n_(e,t){return nz.fO(e,t)}function nO(e,t){return nz.TY(e,t)}function nL(e,t){return nz.G5(e,t)}function n$(e,t){return nz.uq(e,t)}function nR(e,t){return nz.ch(e,t)}function nP(e,t){return nz.wC(e,t)}function nB(e,t){return nC.Ls(e,t)}function nV(e,t){return nC.ke(e,t)}function nW(e,t){return nC.t3(e,t)}function nH(e,t){return nC.t3(e,t)}function nj(e,t){return nC.t3(e,t)}function nU(e,t){return nC.FD(e,t)}function nq(e,t){return nC.FD(e,t)}function nG(e,t){return nC.FD(e,t)}var nQ=n(25732),nX=n(56419);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nK(e){return new nX.Xm(e)}function nZ(e){return nX.l1(e)}function nJ(e){return nX.l2(e)}var nY=n(34936),n0=n(91431),n1=n(17995),n2=n(66973);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class n3 extends nY.ex{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof n0.QV))throw Error("model must be a LayersModel, not some other Container");this.model=e}}function n4(e,t){return e<t}function n9(e,t){return e>t}class n6 extends n3{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new n1.nj("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),"min"===this.mode?this.monitorFunc=n4:"max"===this.mode?this.monitorFunc=n9:-1!==this.monitor.indexOf("acc")?this.monitorFunc=n9:this.monitorFunc=n4,this.monitorFunc===n4&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===n4?1/0:-1/0}async onEpochEnd(e,t){await (0,n2.Z)(t);let n=this.getMonitorValue(t);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){null==e&&(e={});let t=e[this.monitor];return null==t&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}}let n5={earlyStopping:function(e){return new n6(e)}};var n7=n(3692),n8=n(17418),re=n(31529),rt=n(33217),rn=n(37906),rr=n(76320),ra=n(15661);function rs(e,t,n=new Map,r=new Set){if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw Error("Circular references are not supported.");if(n.has(e))return n.get(e);let a=t(e);if(a.recurse&&null!==a.value)throw Error("A deep map function may not return both a value and recurse=true.");if(!a.recurse)return n.set(e,a.value),a.value;if(ru(e)){let a=Array.isArray(e)?[]:{};for(let s in r.add(e),e){let i=rs(e[s],t,n,r);a[s]=i}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}throw Error(`Can't recurse into non-iterable type: ${e}`)}function ri(e){return null===e?null:ru(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function ro(e,t){let n=new Map;for(let r of(rs(e,t,n),Array.from(n.keys()))){let e=n.get(r);if(h.util.isPromise(e)){let t=await e;n.set(r,t)}}return rs(e,t,n)}function ru(e){let t=!1;if(h.env().get("IS_BROWSER"))t=e instanceof TextDecoder;else{let{StringDecoder:r}=n(34977);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof h.Tensor)&&!(e instanceof Promise)&&!t)}function rl(e){return e instanceof h.Tensor?{value:e.clone(),recurse:!1}:ru(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rp{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw RangeError("Can't create ring buffer of capacity < 1.");this.data=Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rh extends rp{constructor(){super(rh.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=2*this.capacity,t=Array(e),n=this.length();for(let e=0;e<n;e++)t[e]=this.get(this.wrap(this.begin+e));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}rh.INITIAL_CAPACITY=32;class rc{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)n=e((t=await this.next()).value)}handleErrors(e){return new rk(this,e)}filter(e){return new rN(this,e)}map(e){return new rx(this,e)}mapAsync(e){return new rv(this,e)}serialMapAsync(e){return new rv(this,e).serial()}flatmap(e){return new rS(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e,t=!0){return new rb(this,e,t)}columnMajorBatch(e,t=!0,n=ri){return this.rowMajorBatch(e,t).map(e=>(function(e,t=ri){return function e(t,n,r=new Set){let a=t[0];if(r.has(a))throw Error("Circular references are not supported.");let s=n(t);if(s.recurse&&null!==s.value)throw Error("A deep zip function may not return both a value and recurse=true.");if(!s.recurse)return s.value;if(ru(a)){let s=Array.isArray(a)?[]:{};for(let i in r.add(a),a){let a=e(t.map(e=>e[i]),n,r);s[i]=a}return r.delete(a),s}throw Error(`Can't recurse into non-iterable type: ${a}`)}(e,t)})(e,n))}concatenate(e,t){return new rT(new rd([this,e]),t)}take(e){return e<0||null==e?this:new ry(this,e)}skip(e){return e<0||null==e?this:new rg(this,e)}prefetch(e){return new rA(this,e)}shuffle(e,t){return new rD(this,e,t)}serial(){return new rf(this)}}class rd extends rc{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:rs(e,rl),done:!1}}}class rm extends rc{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class rf extends rc{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class rg extends rc{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;h.dispose(e.value)}return this.upstream.next()}}class ry extends rc{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class rb extends rc{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done){if(this.enableSmallLastBatch&&e.length>0)return{value:e,done:!1};return{value:null,done:!0}}e.push(t.value)}return{value:e,done:!1}}}class rN extends rc{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;h.dispose(e.value)}}}class rx extends rc{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=h.tensor_util.getTensorsInContainer(e.value),n=this.transform(e.value),r=h.tensor_util.getTensorsInContainer(n);for(let e of t)h.tensor_util.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}}class rk extends rc{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class rv extends rc{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=h.tensor_util.getTensorsInContainer(e.value),n=await this.transform(e.value),r=h.tensor_util.getTensorsInContainer(n);for(let e of t)h.tensor_util.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}}class rw extends rc{constructor(){super(),this.outputQueue=new rh,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class rS extends rw{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=h.tensor_util.getTensorsInContainer(e.value),n=this.transform(e.value),r=h.tensor_util.getTensorsInContainer(n);for(let e of(this.outputQueue.pushAll(n),t))h.tensor_util.isTensorInList(e,r)||e.dispose();return!0}}class rT extends rc{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){let e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}(r=a||(a={}))[r.FAIL=0]="FAIL",r[r.SHORTEST=1]="SHORTEST",r[r.LONGEST=2]="LONGEST";class rI extends rc{constructor(e,t=a.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0,r=await ro(this.iterators,function(e){return e instanceof rc?{value:e.next().then(e=>(t++,e.done&&n++,e.value)),recurse:!1}:{value:null,recurse:!0}});if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case a.FAIL:throw Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case a.SHORTEST:return{value:null,done:!0};case a.LONGEST:}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class rA extends rc{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new rp(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class rD extends rA{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=ra.alea(n||h.util.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rF{constructor(){this.size=null}batch(e,t=!0){let n=this;return h.util.assert(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`),rE(async()=>(await n.iterator()).columnMajorBatch(e,t,rM),this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e))}concatenate(e){let t=this;return rE(async()=>(await t.iterator()).concatenate(await e.iterator()),this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null)}filter(e){let t=this;return rE(async()=>(await t.iterator()).filter(t=>h.tidy(()=>e(t))),this.size===1/0?1/0:null)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return rE(async()=>(await t.iterator()).map(t=>h.tidy(()=>e(t))),this.size)}mapAsync(e){let t=this;return rE(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return rE(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t=this;return rE(async()=>new rT(new rm(async()=>({value:await t.iterator(),done:!1})).take(e),void 0),null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null)}skip(e){let t=this;return rE(async()=>(await t.iterator()).skip(e),null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null)}shuffle(e,t,n=!0){if(null==e||e<0){if(null==this.size)throw RangeError("`Dataset.shuffle()` requires bufferSize to be specified.");throw RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`)}let r=this,a=ra.alea(t||h.util.now().toString());return rE(async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){let t=this;return rE(async()=>(await t.iterator()).take(e),null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null)}async toArray(){if(this.size===1/0)throw Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function rE(e,t=null){return new class extends rF{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function rC(e){return rE(async()=>new rd(e),e.length)}function rz(e){let t;if(!ru(e))throw Error("The argument to zip() must be an object or array.");if(Array.isArray(e))for(let n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(let n in e)t=null==t?e[n].size:Math.min(t,e[n].size);return rE(async()=>(function(e,t=a.FAIL){return new rI(e,t)})(await ro(e,e=>{if(e instanceof rF)return{value:e.iterator(),recurse:!1};if(ru(e))return{value:null,recurse:!0};throw Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}),a.SHORTEST),t)}function rM(e){var t,n;return null===e?null:null==(t=e[0])||null===(n=t)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(t)||"object"==typeof t&&t instanceof h.Tensor||h.util.isTypedArray(t)?{value:function(e){if(0===e.length)throw Error("Can't make a batch of zero elements.");return e[0]instanceof h.Tensor?h.stack(e):h.tensor(e)}(e),recurse:!1}:{value:null,recurse:!0}}rF.MAX_BUFFER_SIZE=1e4;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class r_ extends rF{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}}let rO=Symbol("out"),rL=Symbol("field"),r$=Symbol("quote"),rR=Symbol("quoteafterquote"),rP=Symbol("quoteinquote");class rB extends rF{async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(this.fullColumnNames||e)this.fullColumnNames&&e&&h.util.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+").");else throw Error("Column names must be provided if there is no header line.");this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),n=Object.keys(t).filter(e=>t[e]>1);if(h.util.assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs){for(let e of Object.keys(this.columnConfigs))if(-1===this.fullColumnNames.indexOf(e))throw Error('The key "'+e+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(!this.hasHeader)return null;{let e=await this.base.iterator(),t=await e.next();if(t.done)throw Error("No data was found for CSV parsing.");let n=t.value;return this.parseRow(n,!1)}}constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new r_(e),t||(t={}),this.hasHeader=!1!==t.hasHeader,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(h.util.assert(null==t.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){let t=this.parseRow(e),n={},r={};for(let a=0;a<this.fullColumnNames.length;a++){let s=this.fullColumnNames[a],i=this.columnConfigs?this.columnConfigs[s]:null;if(!this.configuredColumnsOnly||i){let o=t[a],u=null;if(""===o){if(i&&void 0!==i.default)u=i.default;else if(i&&(i.required||i.isLabel))throw Error(`Required column ${s} is empty in this line: ${e}`);else u=void 0}else{let e=Number(o);if(isNaN(e))u=i&&"bool"===i.dtype?this.getBoolean(o):o;else if(i&&i.dtype)switch(i.dtype){case"float32":default:u=e;break;case"int32":u=Math.floor(e);break;case"bool":u=this.getBoolean(o)}else u=e}i&&i.isLabel?r[s]=u:n[s]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){let n=[],r=0,a=e.length,s=rO;for(let t=0;t<a;t++)switch(s){case rO:switch(e.charAt(t)){case'"':r=t+1,s=r$;break;case this.delimiter:if(r=t+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),s=rO;break;default:s=rL,r=t}break;case rL:e.charAt(t)===this.delimiter&&(n.push(e.substring(r,t)),s=rO,r=t+1);break;case r$:'"'===e.charAt(t)&&(s=rR);break;case rR:switch(e.charAt(t)){case this.delimiter:n.push(e.substring(r,t-1)),s=rO,r=t+1;break;case'"':s=r$;break;default:s=rP}break;case rP:'"'===e.charAt(t)&&(s=r$)}if(s===rR?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rV extends rc{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=!1!==e.includeSpectrogram,this.includeWaveform=!0===e.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(!(0,h.env)().get("IS_BROWSER"))throw Error("microphone API is only supported in browser environment.");let t=new rV(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(e){throw Error(`Error thrown while initializing video stream: ${e.message}`)}if(!this.stream)throw Error("Could not obtain audio from microphone.");let e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;let t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){let e,t;if(this.isClosed)return{value:null,done:!0};let n=await this.getAudioData();if(this.includeSpectrogram){let t=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let e=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let e=[],t=[],n=0;return new Promise(r=>{let a=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(a),r({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){!this.isClosed&&(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){let t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((e,r)=>n.set(e,r*t)),n}getTensorFromAudioDataArray(e,t){let n=new Float32Array(h.util.sizeFromShape(t));return n.set(e,n.length-e.length),(0,h.tensor)(n,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rW extends rc{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize()){if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=(0,h.tensor1d)([0],"int32"),this.webcamConfig.centerCrop){let e=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-e)/2,r=(1-t)/2;this.cropBox=(0,h.tensor2d)([r,n,t+r,n+e],[1,4])}else this.cropBox=(0,h.tensor2d)([0,0,1,1],[1,4])}}summary(){return"webcam"}static async create(e,t={}){if(!(0,h.env)().get("IS_BROWSER"))throw Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}let n=new rW(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&h.util.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message=`Error thrown while initializing video stream: ${e.message}`,e}if(!this.stream)throw Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){let e;if(this.isClosed)return{value:null,done:!0};try{e=h.browser.fromPixels(this.webcamVideoElement)}catch(e){throw Error(`Error thrown converting video to pixels: ${JSON.stringify(e)}`)}if(!this.resize)return{value:e,done:!1};try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(e){throw Error(`Error thrown cropping the video: ${e.message}`)}finally{e.dispose()}}needToResize(){return!!this.webcamConfig.resizeWidth&&!!this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight)}cropAndResizeFrame(e){return(0,h.tidy)(()=>{let t;let n=(0,h.expandDims)((0,h.cast)(e,"float32"),0),r=(t=h.image.cropAndResize(n,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear")).shape;return(0,h.reshape)(t,r.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw Error("Can not convert infinite video stream to array.")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rH{}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rj extends rc{split(e){return new rU(this,e)}}class rU extends rj{constructor(e,t){super(),this.upstream=e,this.impl=new rq(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class rq extends rw{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){let e=await this.upstream.next();if(e.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);for(let e of(t[0]=this.carryover+t[0],t.slice(0,-1)))this.outputQueue.push(e);return this.carryover=t[t.length-1],!0}}var rG=n(86300).Buffer;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rQ extends rc{decodeUTF8(){return new rX(this)}}class rX extends rj{constructor(e){super(),this.upstream=e,this.impl=new rK(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class rK extends rw{constructor(e){if(super(),this.upstream=e,(0,h.env)().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:e}=n(31601);this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){let e,t;let n=await this.upstream.next();return!n.done&&(e=n.value,t=(0,h.env)().get("IS_BROWSER")?this.decoder.decode(e,{stream:!0}):this.decoder.write(rG.from(e.buffer)),this.outputQueue.push(t),!0)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class rZ extends rQ{constructor(e,t={}){super(),this.file=e,this.options=t,h.util.assert(e instanceof Uint8Array||!!(0,h.env)().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576}summary(){return`FileChunks ${this.file}`}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};let e=new Promise((e,t)=>{let n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{let r=new FileReader;r.onload=n=>{let a=r.result;if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),!(a instanceof Uint8Array))return t(TypeError("FileReader returned unknown type."));e(a)},r.onabort=e=>t(Error("Aborted")),r.onerror=e=>t(Error(e.type));let a=this.file.slice(this.offset,n);r.readAsArrayBuffer(a)}this.offset=n});return{value:await e,done:!1}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */async function rJ(e,t={},n){let r,a;"string"==typeof e?r=e:(r=e.url,a=rY(e));let s=await (n||h.util.fetch)(r,a);if(s.ok)return new rZ(new Uint8Array(await s.arrayBuffer()),t);throw Error(s.statusText)}let rY=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function r0(e){return"string"==typeof e&&"file://"===e.slice(0,7)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class r1 extends rH{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(r0(this.input)&&(0,h.env)().get("IS_NODE")){let e=n(67792);this.input=e.readFileSync(this.input.slice(7))}return new rZ(this.input,this.options)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class r2 extends rH{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return r0(this.url)?new r1(this.url,this.fileOptions).iterator():rJ(this.url,this.fileOptions)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function r3(e,t={}){return new rB(new r2(e),t)}function r4(e){let t=new rm(e);return rE(async()=>t)}function r9(e){return rE(async()=>{let t=await e();return new rm(()=>t.next())})}async function r6(e,t){return rW.create(e,t)}async function r5(e){return rV.create(e)}/** @license See the LICENSE file. */let r7="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r8=n(23356);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ae=h.kernel_impls.whereImpl;class at extends h.KernelBackend{nextDataId(){return at.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new h.DataStorage(this,(0,h.engine)())}write(e,t,n){this.firstUse&&(this.firstUse=!1,(0,h.env)().get("IS_NODE")&&h.backend_util.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));let r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&h.util.isString(n[0])){let a=n.map(e=>h.util.encodeString(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){let t=this.data.get(e);t.refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){let e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return h.backend_util.mergeRealAndImagArrays(e,t)}return h.util.convertBackendValuesAndArrayBuffer(this.data.get(e).values,t)}bufferSync(e){let t=this.readSync(e.dataId);if("string"===e.dtype)try{let n=t.map(e=>h.util.decodeString(e));return(0,h.buffer)(e.shape,e.dtype,n)}catch(e){throw Error("Failed to decode encoded string bytes into utf-8")}return(0,h.buffer)(e.shape,e.dtype,t)}makeOutput(e,t,n){return(0,h.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=h.util.now();return e(),{kernelMs:h.util.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){(0,r8.H)([e],"where");let t=this.readSync(e.dataId);return ae(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}at.nextDataId=0;var an=n(69095);/** @license See the LICENSE file. */let ar="4.20.0";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,h.registerBackend)("cpu",()=>new at,1);var aa=n(32497);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let as=(0,aa.A)(h.Elu,e=>e>=0?e:Math.exp(e)-1),ai={kernelName:h.Elu,backendName:"cpu",kernelFunc:as};var ao=n(59094);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function au(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:s}=r;(0,r8.H)([a],"leakyRelu");let i=h.util.sizeFromShape(a.shape),o=n.data.get(a.dataId).values,u=h.util.getTypedArrayFromDType("float32",i);for(let e=0;e<o.length;e++)u[e]=o[e]<0?s*o[e]:o[e];return n.makeTensorInfo(a.shape,"float32",u)}let al={kernelName:h.LeakyRelu,backendName:"cpu",kernelFunc:au};var ap=n(95592);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ah=(0,ap.b)((e,t)=>e<0?t*e:e);function ac(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t;(0,r8.H)([r,a],"prelu");let s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,[o,u]=ah(r.shape,a.shape,s,i,"float32");return n.makeTensorInfo(u,"float32",o)}let ad={kernelName:h.Prelu,backendName:"cpu",kernelFunc:ac},am=(0,aa.A)(h.Relu,e=>Math.max(0,e)),af={kernelName:h.Relu,backendName:"cpu",kernelFunc:am},ag=(0,aa.A)(h.Relu6,e=>Math.min(Math.max(0,e),6)),ay={kernelName:h.Relu6,backendName:"cpu",kernelFunc:ag};var ab=n(95721);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aN(e,t,n,r,a){if("linear"===n)return(0,ao.y)({inputs:{x:t},backend:e});if("relu"===n)return am({inputs:{x:t},backend:e});if("elu"===n)return as({inputs:{x:t},backend:e});if("relu6"===n)return ag({inputs:{x:t},backend:e});if("prelu"===n)return ac({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return au({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return(0,ab.XD)({inputs:{x:t},backend:e});throw Error(`Activation ${n} has not been implemented for the CPU backend.`)}var ax=n(43902);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ak(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:s}=r,i=h.util.sizeFromShape(a.shape),o=h.util.inferFromImplicitShape(s,i),u=h.util.sizeFromShape(o);h.util.assert(i===u,()=>`The new shape (${o}) has ${u} elements and the old shape (${a.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);let l=n.data.get(a.dataId);if(null!=l.complexTensorInfos){let e=l.complexTensorInfos.real,t=l.complexTensorInfos.imag;e.shape=o,t.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}let av={kernelName:h.Reshape,backendName:"cpu",kernelFunc:ak};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aw(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:s}=t,{transposeA:i,transposeB:o}=r;(0,r8.H)([a,s],"matMul");let u=a.shape.length,l=s.shape.length,p=i?a.shape[u-2]:a.shape[u-1],c=o?s.shape[l-1]:s.shape[l-2],d=i?a.shape[u-1]:a.shape[u-2],m=o?s.shape[l-2]:s.shape[l-1],f=a.shape.slice(0,-2),g=s.shape.slice(0,-2),y=h.util.sizeFromShape(f),b=h.util.sizeFromShape(g),N=h.broadcast_util.assertAndGetBroadcastShape(a.shape.slice(0,-2),s.shape.slice(0,-2)).concat([d,m]);h.util.assert(p===c,()=>`Error in matMul: inner shapes (${p}) and (${c}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${i} and transposeB=${o} must match.`);let x=ak({inputs:{x:a},backend:n,attrs:{shape:i?[y,p,d]:[y,d,p]}}),k=ak({inputs:{x:s},backend:n,attrs:{shape:o?[b,m,c]:[b,c,m]}}),v=i?x.shape[1]:x.shape[2],w=i?x.shape[2]:x.shape[1],S=o?k.shape[1]:k.shape[2],T=Math.max(y,b),I=n.data.get(x.dataId).values,A=n.data.get(k.dataId).values,D=h.util.computeStrides(x.shape),F=h.util.computeStrides(k.shape),[E,C,z]=i?[D[0],1,D[1]]:[D[0],D[1],1],[M,_,O]=o?[1,F[1],F[0]]:[F[1],1,F[0]],L=w*S,$=(0,h.buffer)([T,w,S],x.dtype),R=$.values,P=n.blockSize;for(let e=0;e<T;e++){let t=e%y,n=e%b;for(let r=0;r<w;r+=P){let a=Math.min(r+P,w);for(let s=0;s<S;s+=P){let i=Math.min(s+P,S);for(let o=0;o<v;o+=P){let u=Math.min(o+P,v);for(let l=r;l<a;l++)for(let r=s;r<i;r++){let a=0;for(let e=o;e<u;e++)a+=I[t*E+l*C+e*z]*A[e*M+r*_+n*O];R[e*L+(l*S+r)]+=a}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(N,$.dtype,$.values)}let aS={kernelName:h.BatchMatMul,backendName:"cpu",kernelFunc:aw},aT={kernelName:h._FusedMatMul,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t,n,r;let{inputs:a,backend:s,attrs:i}=e,{a:o,b:u,bias:l,preluActivationWeights:p}=a,{transposeA:h,transposeB:c,activation:d,leakyreluAlpha:m}=i,f=[];for(let e of(t=aw({inputs:{a:o,b:u},attrs:{transposeA:h,transposeB:c},backend:s}),l&&(n=(0,ax.IH)({inputs:{a:t,b:l},backend:s}),f.push(t),t=n),d&&(r=aN(s,t,d,p,m),f.push(t),t=r),f))s.disposeIntermediateTensorInfo(e);return t}};var aI=n(50111);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let aA=(0,aa.A)(h.Acos,e=>Math.acos(e)),aD={kernelName:h.Acos,backendName:"cpu",kernelFunc:aA},aF=(0,aa.A)(h.Acosh,e=>Math.acosh(e)),aE={kernelName:h.Acosh,backendName:"cpu",kernelFunc:aF},aC={kernelName:h.AddN,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e;(0,r8.H)(t,"addN");let r=t.map(e=>n.data.get(e.dataId).values),a=(0,h.buffer)(t[0].shape,t[0].dtype),s=a.values;for(let e=0;e<t.length;e++){let t=r[e];for(let e=0;e<s.length;e++)s[e]+=t[e]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}};var az=n(46985);let aM={kernelName:h.All,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;(0,r8.H)(a,"all");let o=h.util.parseAxisParam(s,a.shape),u=o,l=h.backend_util.getAxesPermutation(u,a.shape.length),p=a;null!=l&&(p=(0,az.p)({inputs:{x:a},backend:n,attrs:{perm:l}}),u=h.backend_util.getInnerMostAxes(u.length,a.shape.length)),h.backend_util.assertAxesAreInnerMostDims("all",u,p.shape.length);let[c,d]=h.backend_util.computeOutAndReduceShapes(p.shape,u),m=h.util.sizeFromShape(d),f=h.util.makeZerosTypedArray(h.util.sizeFromShape(c),p.dtype),g=n.data.get(p.dataId).values;for(let e=0;e<f.length;++e){let t=e*m,n=g[t];for(let e=0;e<m;++e){let r=g[t+e];n=n&&r}f[e]=n}null!=l&&n.disposeIntermediateTensorInfo(p);let y=n.makeTensorInfo(c,p.dtype,f);if(i){let e=ak({inputs:{x:y},backend:n,attrs:{shape:h.backend_util.expandShapeToKeepDim(c,o)}});return n.disposeIntermediateTensorInfo(y),e}return y}},a_={kernelName:h.Any,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;(0,r8.H)(a,"any");let o=h.util.parseAxisParam(s,a.shape),u=o,l=h.backend_util.getAxesPermutation(u,a.shape.length),p=a;null!=l&&(p=(0,az.p)({inputs:{x:a},backend:n,attrs:{perm:l}}),u=h.backend_util.getInnerMostAxes(u.length,a.shape.length)),h.backend_util.assertAxesAreInnerMostDims("any",u,p.shape.length);let[c,d]=h.backend_util.computeOutAndReduceShapes(p.shape,u),m=h.util.sizeFromShape(d),f=h.util.makeZerosTypedArray(h.util.sizeFromShape(c),p.dtype),g=n.data.get(p.dataId).values;for(let e=0;e<f.length;++e){let t=e*m,n=g[t];for(let e=0;e<m;++e){let r=g[t+e];n=n||r}f[e]=n}null!=l&&n.disposeIntermediateTensorInfo(p);let y=n.makeTensorInfo(c,p.dtype,f);if(i){let e=ak({inputs:{x:y},backend:n,attrs:{shape:h.backend_util.expandShapeToKeepDim(c,o)}});return n.disposeIntermediateTensorInfo(y),e}return y}},aO={kernelName:h.ArgMax,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;(0,r8.H)(a,"argMax");let i=h.util.parseAxisParam(s,a.shape),o=h.backend_util.getAxesPermutation(i,a.shape.length),u=a,l=[];null!=o&&(l.push(u=(0,az.p)({inputs:{x:a},backend:n,attrs:{perm:o}})),i=h.backend_util.getInnerMostAxes(i.length,u.shape.length)),i=[i[0]],h.backend_util.assertAxesAreInnerMostDims("argMax",i,u.shape.length);let[p,c]=h.backend_util.computeOutAndReduceShapes(u.shape,i),d=h.util.sizeFromShape(p),m=h.util.makeZerosTypedArray(d,"int32"),f=h.util.sizeFromShape(c),g=n.data.get(u.dataId).values;for(let e=0;e<m.length;++e){let t=e*f,n=g[t],r=0;for(let e=0;e<f;++e){let a=g[t+e];a>n&&(n=a,r=e)}m[e]=r}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(p,"int32",m)}},aL={kernelName:h.ArgMin,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;(0,r8.H)(a,"argMin");let i=h.util.parseAxisParam(s,a.shape),o=h.backend_util.getAxesPermutation(i,a.shape.length),u=a,l=[];null!=o&&(l.push(u=(0,az.p)({inputs:{x:a},backend:n,attrs:{perm:o}})),i=h.backend_util.getInnerMostAxes(i.length,u.shape.length)),i=[i[0]],h.backend_util.assertAxesAreInnerMostDims("argMin",i,u.shape.length);let[p,c]=h.backend_util.computeOutAndReduceShapes(u.shape,i),d=h.util.sizeFromShape(p),m=h.util.makeZerosTypedArray(d,"int32"),f=h.util.sizeFromShape(c),g=n.data.get(u.dataId).values;for(let e=0;e<m.length;++e){let t=e*f,n=g[t],r=0;for(let e=0;e<f;++e){let a=g[t+e];a<n&&(n=a,r=e)}m[e]=r}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(p,"int32",m)}},a$=(0,aa.A)(h.Asin,e=>Math.asin(e)),aR={kernelName:h.Asin,backendName:"cpu",kernelFunc:a$},aP=(0,aa.A)(h.Asinh,e=>Math.asinh(e)),aB={kernelName:h.Asinh,backendName:"cpu",kernelFunc:aP},aV=(0,aa.A)(h.Atan,e=>Math.atan(e)),aW={kernelName:h.Atan,backendName:"cpu",kernelFunc:aV};var aH=n(84840);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let aj=(0,ap.b)((e,t)=>Math.atan2(e,t)),aU=(0,aH.j)(h.Atan2,aj),aq={kernelName:h.Atan2,backendName:"cpu",kernelFunc:aU},aG=(0,aa.A)(h.Atanh,e=>Math.atanh(e)),aQ={kernelName:h.Atanh,backendName:"cpu",kernelFunc:aG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aX(e,t,n,r,a,s){let i=a.strideHeight,o=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,p=a.effectiveFilterHeight,c=a.effectiveFilterWidth,d=a.padInfo.top,m=a.padInfo.left,f="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=(0,h.buffer)(a.outShape,n),y=g.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],N=a.outShape[2]*a.outShape[3],x=a.outShape[3];for(let t=0;t<a.batchSize;++t){let n=t*b,h=t*r[0];for(let t=0;t<a.inChannels;++t)for(let g=0;g<a.outHeight;++g){let b=g*i-d,k=Math.max(0,b),v=Math.min(a.inHeight,p+b),w=n+g*N;for(let n=0;n<a.outWidth;++n){let i=n*o-m,p=Math.max(0,i),d=Math.min(a.inWidth,c+i),g=f,b=0,N=0;for(let n=k;n<v;n+=u){let a=h+n*r[1];for(let n=p;n<d;n+=l){let i=e[a+n*r[2]+t];"max"===s&&i>g?g=i:"avg"===s&&(b+=i,N++)}if(isNaN(g))break}y[w+n*x+t]="avg"===s?b/N:g}}}return g}function aK(e,t,n,r,a=!1,s=!1){let i=(0,h.buffer)(r.outShape,"int32"),o=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,p=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,m=r.padInfo.top,f=r.padInfo.left,g=(0,h.buffer)(t,n,e);for(let e=0;e<r.batchSize;++e)for(let t=0;t<r.inChannels;++t)for(let n=0;n<r.outHeight;++n){let h=n*o-m,y=h;for(;y<0;)y+=l;let b=Math.min(r.inHeight,c+h);for(let o=0;o<r.outWidth;++o){let c=o*u-f,m=c;for(;m<0;)m+=p;let N=Math.min(r.inWidth,d+c),x=Number.NEGATIVE_INFINITY,k=-1;for(let n=y;n<b;n+=l){let i=n-h;for(let o=m;o<N;o+=p){let u=o-c,l=g.get(e,n,o,t);l>x&&(x=l,k=a?s?((e*r.inHeight+n)*r.inWidth+o)*r.inChannels+t:(n*r.inWidth+o)*r.inChannels+t:i*d+u)}}i.set(k,e,n,o,t)}}return i}function aZ(e,t,n,r,a,s){let i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,p=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterDepth,m=a.effectiveFilterHeight,f=a.effectiveFilterWidth,g=a.padInfo.front,y=a.padInfo.top,b=a.padInfo.left,N="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=(0,h.buffer)(a.outShape,n),k=x.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],T=a.outShape[4];for(let t=0;t<a.batchSize;++t){let n=t*v,h=t*r[0];for(let t=0;t<a.inChannels;++t)for(let x=0;x<a.outDepth;++x){let v=x*i-g,I=v;for(;I<0;)I+=l;let A=Math.min(a.inDepth,d+v),D=n+x*w;for(let n=0;n<a.outHeight;++n){let i=n*o-y,d=i;for(;d<0;)d+=p;let g=Math.min(a.inHeight,m+i),x=D+n*S;for(let n=0;n<a.outWidth;++n){let i=n*u-b,o=i;for(;o<0;)o+=c;let m=Math.min(a.inWidth,f+i),y=x+n*T,v=N,w=0,S=0;for(let n=I;n<A;n+=l){let a=h+n*r[1];for(let n=d;n<g;n+=p){let i=a+n*r[2];for(let n=o;n<m;n+=c){let a=e[i+n*r[3]+t];if("max"===s&&a>v?v=a:"avg"===s&&(w+=a,S++),isNaN(v))break}if(isNaN(v))break}if(isNaN(v))break}k[y+t]="avg"===s?w/Math.max(S,1):v}}}}return x}let aJ={kernelName:h.AvgPool,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:s}=n;(0,r8.H)(s,"avgPool");let{filterSize:i,strides:o,pad:u,dimRoundingMode:l}=a;h.util.assert(h.backend_util.eitherStridesOrDilationsAreOne(o,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);let p=h.backend_util.computePool2DInfo(s.shape,i,o,1,u,l);if(1===p.filterWidth&&1===p.filterHeight&&h.util.arraysEqual(p.inShape,p.outShape))t=(0,ao.y)({inputs:{x:s},backend:r});else{let e=r.data.get(s.dataId).values,n=h.util.computeStrides(s.shape),a=aX(e,s.shape,s.dtype,n,p,"avg");t=r.makeTensorInfo(p.outShape,s.dtype,a.values)}return t}},aY={kernelName:h.AvgPool3D,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:u,dataFormat:l}=r;(0,r8.H)(a,"avgPool3d");let p=h.backend_util.computePool3DInfo(a.shape,s,i,1,o,u,l),c=aZ(n.data.get(a.dataId).values,a.shape,a.dtype,h.util.computeStrides(a.shape),p,"avg");return n.makeTensorInfo(c.shape,"float32",c.values)}},a0={kernelName:h.AvgPool3DGrad,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:i,strides:o,pad:u,dimRoundingMode:l}=r;(0,r8.H)([a,s],"avgPool3DGrad");let p=h.backend_util.computePool3DInfo(s.shape,i,o,1,u,l),c=p.strideDepth,d=p.strideHeight,m=p.strideWidth,f=p.filterDepth,g=p.filterHeight,y=p.filterWidth,b=p.dilationDepth,N=p.dilationHeight,x=p.dilationWidth,k=p.effectiveFilterDepth,v=p.effectiveFilterHeight,w=p.effectiveFilterWidth,S=k-1-p.padInfo.front,T=w-1-p.padInfo.left,I=v-1-p.padInfo.top,A=(0,h.buffer)(s.shape,"float32"),D=1/(f*g*y),F=n.bufferSync(a);for(let e=0;e<p.batchSize;++e)for(let t=0;t<p.inChannels;++t)for(let n=0;n<p.inDepth;++n)for(let r=0;r<p.inHeight;++r)for(let a=0;a<p.inWidth;++a){let s=n-S,i=r-I,o=a-T,u=0;for(let n=0;n<k;n+=b){let r=(s+n)/c;if(!(r<0)&&!(r>=p.outDepth)&&Math.floor(r)===r)for(let n=0;n<v;n+=N){let a=(i+n)/d;if(!(a<0)&&!(a>=p.outHeight)&&Math.floor(a)===a)for(let n=0;n<w;n+=x){let s=(o+n)/m;s<0||s>=p.outWidth||Math.floor(s)!==s||(u+=F.get(e,r,a,s,t))}}}A.set(u*D,e,n,r,a,t)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}},a1={kernelName:h.AvgPoolGrad,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t;(0,r8.H)([a,s],"avgPoolGrad");let{filterSize:i,strides:o,pad:u}=r,l=h.backend_util.computePool2DInfo(s.shape,i,o,1,u),p=l.strideHeight,c=l.strideWidth,d=l.filterHeight,m=l.filterWidth,f=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterHeight,b=l.effectiveFilterWidth,N=b-1-l.padInfo.left,x=y-1-l.padInfo.top,k=(0,h.buffer)(s.shape,"float32"),v=1/(d*m),w=n.data.get(a.dataId).values,S=(0,h.buffer)(a.shape,"float32",w);for(let e=0;e<l.batchSize;++e)for(let t=0;t<l.inChannels;++t)for(let n=0;n<l.inHeight;++n)for(let r=0;r<l.inWidth;++r){let a=n-x,s=r-N,i=0;for(let n=0;n<y;n+=f){let r=(a+n)/p;if(!(r<0)&&!(r>=l.outHeight)&&Math.floor(r)===r)for(let n=0;n<b;n+=g){let a=(s+n)/c;a<0||a>=l.outWidth||Math.floor(a)!==a||(i+=S.get(e,r,a,t))}}k.set(i*v,e,n,r,t)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},a2={kernelName:h.FusedBatchNorm,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,scale:s,offset:i,mean:o,variance:u}=t;h.util.assert(o.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),h.util.assert(null==i||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),h.util.assert(null==s||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),(0,r8.H)([a,o,u,s,i],"batchNorm");let{varianceEpsilon:l}=r;null==l&&(l=.001);let p=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,d=n.data.get(u.dataId).values,m=s?n.data.get(s.dataId).values:new Float32Array([1]),f=i?n.data.get(i.dataId).values:new Float32Array([0]),g=new Float32Array(p.length),y=f.length,b=m.length,N=d.length,x=c.length,k=0,v=0,w=0,S=0;for(let e=0;e<p.length;++e)g[e]=f[k++]+(p[e]-c[v++])*m[w++]/Math.sqrt(d[S++]+l),k>=y&&(k=0),v>=x&&(v=0),w>=b&&(w=0),S>=N&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,g)}};var a3=n(95014);let a4={kernelName:h.BatchToSpaceND,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,crops:i}=r;(0,r8.H)([a],"batchToSpaceND");let o=s.reduce((e,t)=>e*t),u=h.backend_util.getReshaped(a.shape,s,o),l=h.backend_util.getPermuted(u.length,s.length),p=h.backend_util.getReshapedPermuted(a.shape,s,o),c=h.backend_util.getSliceBeginCoords(i,s.length),d=h.backend_util.getSliceSize(p,i,s.length),m=ak({inputs:{x:a},backend:n,attrs:{shape:u}}),f=(0,az.p)({inputs:{x:m},backend:n,attrs:{perm:l}}),g=ak({inputs:{x:f},backend:n,attrs:{shape:p}}),y=(0,a3.tP)({inputs:{x:g},backend:n,attrs:{begin:c,size:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}};var a9=n(41903);let a6={kernelName:h.Bincount,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i}=r,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,l=(0,a9.W)(o,u,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,l)}};var a5=n(62722);let a7={kernelName:h.BroadcastArgs,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,o=h.backend_util.assertAndGetBroadcastShape(Array.from(s),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}};var a8=n(26647),se=n(78116);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let st=(0,aa.A)(h.ClipByValue,(e,t)=>e>t.clipValueMax?t.clipValueMax:e<t.clipValueMin?t.clipValueMin:e),sn={kernelName:h.ClipByValue,backendName:"cpu",kernelFunc:st};var sr=n(96110);let sa={kernelName:h.ComplexAbs,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,n=e.backend,r=new Float32Array(h.util.sizeFromShape(t.shape)),a=n.data.get(t.dataId),s=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,o=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values;for(let e=0;e<o.length;e++){let t=o[e],n=u[e];r[e]=Math.hypot(t,n)}return n.makeOutput(r,t.shape,"float32")}};var ss=n(22578);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}let so={kernelName:h.Imag,backendName:"cpu",kernelFunc:si};var su=n(3271);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sl(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,s=h.util.parseAxisParam(a,t[0].shape)[0],i=t.map(e=>e.shape);h.backend_util.assertParamsConsistent(i,s);let o=h.backend_util.computeOutShape(t.map(e=>e.shape),s);if(0===h.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);let u=t.filter(e=>h.util.sizeFromShape(e.shape)>0);if(1===u.length)return(0,ao.y)({inputs:{x:u[0]},backend:n});if("complex64"===u[0].dtype){let e=u.map(e=>(0,su.k)({inputs:{input:e},backend:n})),t=u.map(e=>si({inputs:{input:e},backend:n})),r=sl({inputs:e,backend:n,attrs:{axis:s}}),a=sl({inputs:t,backend:n,attrs:{axis:s}}),i=(0,sr.P)({inputs:{real:r,imag:a},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),i}let l=u.map(e=>{let t=h.util.sizeFromShape(e.shape.slice(s));return ak({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),p=l.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));o=h.backend_util.computeOutShape(l.map(e=>e.shape),1);let c=1===l[0].shape[0],d=(0,ss.j)(p,o,t[0].dtype,c),m=h.backend_util.computeOutShape(u.map(e=>e.shape),s),f=n.makeTensorInfo(m,t[0].dtype,d);return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}let sp={kernelName:h.Concat,backendName:"cpu",kernelFunc:sl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sh(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dataFormat:u,dilations:l,dimRoundingMode:p}=r;(0,r8.H)([a,s],"conv2d");let c=h.backend_util.convertConv2DDataFormat(u),d=h.backend_util.computeConv2DInfo(a.shape,s.shape,i,l,o,p,!1,c),m=d.filterHeight,f=d.filterWidth,g=d.dilationHeight,y=d.dilationWidth,b=d.padInfo.left,N=d.padInfo.top,x="channelsLast"===d.dataFormat,k=new h.TensorBuffer(d.outShape,a.dtype),v=h.util.computeStrides(a.shape),w=h.util.computeStrides(s.shape),S=v[0],T=x?v[1]:v[2],I=x?v[2]:1,A=x?1:v[1],D=k.strides[0],F=x?k.strides[1]:k.strides[2],E=x?k.strides[2]:1,C=x?1:k.strides[1],z=n.data.get(a.dataId).values,M=n.data.get(s.dataId).values,_=k.values;for(let e=0;e<d.batchSize;++e){let t=e*S,n=e*D;for(let e=0;e<d.outHeight;++e){let r=n+e*F,a=e*d.strideHeight-N;for(let e=0;e<m;++e){let n=a+e*g;if(n<0||n>=d.inHeight)continue;let s=e*w[0],i=t+n*T;for(let e=0;e<d.outWidth;++e){let t=r+e*E,n=e*d.strideWidth-b;for(let e=0;e<f;++e){let r=n+e*y;if(r<0||r>=d.inWidth)continue;let a=s+e*w[1],o=i+r*I,u=a;for(let e=0;e<d.inChannels;++e){let n=z[o+e*A];for(let e=0;e<d.outChannels;++e)_[t+e*C]+=n*M[u+e];u+=d.outChannels}}}}}}return n.makeTensorInfo(k.shape,k.dtype,_)}let sc={kernelName:h.Conv2D,backendName:"cpu",kernelFunc:sh},sd={kernelName:h.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,dataFormat:u,dimRoundingMode:l,filterShape:p}=r;(0,r8.H)([a,s],"conv2dBackpropFilter");let c=h.backend_util.convertConv2DDataFormat(u),d=h.backend_util.computeConv2DInfo(a.shape,p,i,1,o,l,!1,c),{strideHeight:m,strideWidth:f,filterHeight:g,filterWidth:y}=d,b="channelsLast"===d.dataFormat,N=new h.TensorBuffer(d.filterShape,"float32"),x=d.padInfo.left,k=d.padInfo.top,v=n.data.get(a.dataId).values,w=n.data.get(s.dataId).values,S=new h.TensorBuffer(a.shape,a.dtype,v),T=new h.TensorBuffer(s.shape,s.dtype,w);for(let e=0;e<g;++e){let t=Math.max(0,Math.ceil((k-e)/m)),n=Math.min(d.outHeight,(d.inHeight+k-e)/m);for(let r=0;r<y;++r){let a=Math.max(0,Math.ceil((x-r)/f)),s=Math.min(d.outWidth,(d.inWidth+x-r)/f);for(let i=0;i<d.inChannels;++i)for(let o=0;o<d.outChannels;++o){let u=0;for(let l=0;l<d.batchSize;++l)for(let p=t;p<n;++p){let t=e+p*m-k;for(let e=a;e<s;++e){let n=r+e*f-x;b?u+=S.get(l,t,n,i)*T.get(l,p,e,o):u+=S.get(l,i,t,n)*T.get(l,o,p,e)}}N.set(u,e,r,i,o)}}}return n.makeTensorInfo(N.shape,N.dtype,N.values)}},sm={kernelName:h.Conv2DBackpropInput,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{inputShape:i,strides:o,pad:u,dataFormat:l,dimRoundingMode:p}=r;(0,r8.H)([a,s],"conv2dBackpropInput");let c=h.util.computeStrides(s.shape),d=h.util.computeStrides(a.shape),m=h.backend_util.convertConv2DDataFormat(l),f=h.backend_util.computeConv2DInfo(i,s.shape,o,1,u,p,!1,m),g=new h.TensorBuffer(f.inShape,"float32"),y=g.values,b=n.data.get(a.dataId).values,N=n.data.get(s.dataId).values,[x,k,v]=c,{batchSize:w,filterHeight:S,filterWidth:T,inChannels:I,inHeight:A,inWidth:D,outChannels:F,outHeight:E,outWidth:C,strideHeight:z,strideWidth:M}=f;m=f.dataFormat;let _=S-1-f.padInfo.top,O=T-1-f.padInfo.left,L="channelsLast"===m,$=g.strides[0],R=L?g.strides[1]:g.strides[2],P=L?g.strides[2]:1,B=L?1:g.strides[1],V=d[0],W=L?d[1]:d[2],H=L?d[2]:1,j=L?1:d[1];for(let e=0;e<w;++e)for(let t=0;t<I;++t)for(let n=0;n<A;++n){let r=n-_,a=Math.max(0,Math.ceil(r/z)),s=Math.min(E,(S+r)/z);for(let i=0;i<D;++i){let o=i-O,u=Math.max(0,Math.ceil(o/M)),l=Math.min(C,(T+o)/M),p=0;for(let n=a;n<s;++n){let a=n*z-r;for(let r=u;r<l;++r){let s=r*M-o,i=V*e+W*n+H*r,u=x*(S-1-a)+k*(T-1-s)+v*t;for(let e=0;e<F;++e)p+=b[i+j*e]*N[u+e]}}y[$*e+R*n+P*i+B*t]=p}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},sf={kernelName:h.Conv3D,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:u}=r;(0,r8.H)([a,s],"conv3d");let l=h.backend_util.computeConv3DInfo(a.shape,s.shape,i,u,o),{filterDepth:p,filterHeight:c,filterWidth:d,dilationDepth:m,dilationHeight:f,dilationWidth:g,padInfo:y}=l,b=y.front,N=y.left,x=y.top,k=new h.TensorBuffer(l.outShape,a.dtype),v=n.data.get(a.dataId).values,w=n.data.get(s.dataId).values,S=k.values,T=h.util.computeStrides(a.shape),I=h.util.computeStrides(s.shape);for(let e=0;e<l.batchSize;++e){let t=e*T[0],n=e*k.strides[0];for(let e=0;e<l.outDepth;++e){let r=n+e*k.strides[1],a=e*l.strideDepth-b;for(let e=0;e<p;++e){let n=a+e*m;if(n<0||n>=l.inDepth)continue;let s=e*I[0],i=t+n*T[1];for(let e=0;e<l.outHeight;++e){let t=r+e*k.strides[2],n=e*l.strideHeight-x;for(let e=0;e<c;++e){let r=n+e*f;if(r<0||r>=l.inHeight)continue;let a=s+e*I[1],o=i+r*T[2];for(let e=0;e<l.outWidth;++e){let n=t+e*l.outChannels,r=e*l.strideWidth-N;for(let e=0;e<d;++e){let t=r+e*g;if(t<0||t>=l.inWidth)continue;let s=a+e*I[2],i=o+t*l.inChannels,u=s;for(let e=0;e<l.inChannels;++e){let t=v[i+e];for(let e=0;e<l.outChannels;++e)S[n+e]+=t*w[u+e];u+=l.outChannels}}}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},sg={kernelName:h.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,filterShape:u}=r;(0,r8.H)([a,s],"conv3dBackpropFilterV2");let l=h.util.computeStrides(a.shape),p=h.util.computeStrides(s.shape),c=h.backend_util.computeConv3DInfo(a.shape,u,i,1,o),d=c.strideDepth,m=c.strideHeight,f=c.strideWidth,g=c.filterDepth,y=c.filterHeight,b=c.filterWidth,N=new h.TensorBuffer(c.filterShape,"float32"),x=N.values,[k,v,w,S]=N.strides,T=n.data.get(s.dataId).values,[I,A,D,F]=p,E=n.data.get(a.dataId).values,[C,z,M,_]=l,O=c.padInfo.front,L=c.padInfo.left,$=c.padInfo.top;for(let e=0;e<g;++e){let t=Math.max(0,Math.ceil((O-e)/d)),n=Math.min(c.outDepth,(c.inDepth+O-e)/d),r=e*k;for(let a=0;a<y;++a){let s=Math.max(0,Math.ceil(($-a)/m)),i=Math.min(c.outHeight,(c.inHeight+$-a)/m),o=a*v+r;for(let r=0;r<b;++r){let u=Math.max(0,Math.ceil((L-r)/f)),l=Math.min(c.outWidth,(c.inWidth+L-r)/f),p=r*w+o;for(let o=0;o<c.inChannels;++o){let h=o*S+p;for(let p=0;p<c.outChannels;++p){let g=0;for(let h=0;h<c.batchSize;++h){let c=h*C,y=h*I;for(let h=t;h<n;++h){let t=(e+h*d-O)*z+c,n=h*A+y;for(let e=s;e<i;++e){let s=(a+e*m-$)*M+t,i=e*D+n;for(let e=u;e<l;++e){let t=(r+e*f-L)*_+s,n=e*F+i;g+=E[t+o]*T[n+p]}}}}x[h+p]=g}}}}}return n.makeTensorInfo(N.shape,N.dtype,N.values)}},sy={kernelName:h.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{pad:i,strides:o,inputShape:u}=r;(0,r8.H)([a],"conv3dBackpropInputV2");let l=h.util.computeStrides(a.shape),p=h.util.computeStrides(s.shape),c=h.backend_util.computeConv3DInfo(u,s.shape,o,1,i),d=new h.TensorBuffer(c.inShape,"float32"),m=d.values,[f,g,y,b]=d.strides,N=n.data.get(a.dataId).values,[x,k,v,w]=l,S=n.data.get(s.dataId).values,[T,I,A,D]=p,{batchSize:F,filterDepth:E,filterHeight:C,filterWidth:z,inChannels:M,inDepth:_,inHeight:O,inWidth:L,outChannels:$,outDepth:R,outHeight:P,outWidth:B,strideDepth:V,strideHeight:W,strideWidth:H}=c,j=E-1-c.padInfo.front,U=C-1-c.padInfo.top,q=z-1-c.padInfo.left;for(let e=0;e<F;++e)for(let t=0;t<M;++t)for(let n=0;n<_;++n){let r=n-j,a=Math.max(0,Math.ceil(r/V)),s=Math.min(R,(E+r)/V);for(let i=0;i<O;++i){let o=i-U,u=Math.max(0,Math.ceil(o/W)),l=Math.min(P,(C+o)/W);for(let p=0;p<L;++p){let h=p-q,c=Math.max(0,Math.ceil(h/H)),d=Math.min(B,(z+h)/H),F=0;for(let n=a;n<s;++n){let a=n*V-r;for(let r=u;r<l;++r){let s=r*W-o;for(let i=c;i<d;++i){let o=i*H-h,u=x*e+k*n+v*r+w*i,l=T*(E-1-a)+I*(C-1-s)+A*(z-1-o)+D*t;for(let e=0;e<$;++e)F+=N[u+e]*S[l+e]}}}m[f*e+g*n+y*i+b*p+t]=F}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},sb=(0,aa.A)(h.Cos,e=>Math.cos(e)),sN={kernelName:h.Cos,backendName:"cpu",kernelFunc:sb},sx=(0,aa.A)(h.Cosh,e=>Math.cosh(e)),sk={kernelName:h.Cosh,backendName:"cpu",kernelFunc:sx},sv={kernelName:h.CropAndResize,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:i}=t,{cropSize:o,method:u,extrapolationValue:l}=r,[p,c,d,m]=a.shape,f=s.shape[0],[g,y]=o,b=(0,h.buffer)([f,g,y,m],"float32"),N=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,k=n.data.get(a.dataId).values,v=h.util.computeStrides(a.shape),w=h.util.computeStrides(b.shape);for(let e=0;e<f;e++){let t=4*e,n=N[t],r=N[t+1],a=N[t+2],s=N[t+3],i=x[e];if(i>=p)continue;let o=g>1?(a-n)*(c-1)/(g-1):0,h=y>1?(s-r)*(d-1)/(y-1):0;for(let t=0;t<g;t++){let p=g>1?n*(c-1)+t*o:.5*(n+a)*(c-1);if(p<0||p>c-1){for(let n=0;n<y;n++)for(let r=0;r<m;r++){let a=r+n*w[2]+t*w[1]+e*w[0];b.values[a]=l}continue}if("bilinear"===u){let n=Math.floor(p),a=Math.ceil(p),o=p-n;for(let u=0;u<y;u++){let p=y>1?r*(d-1)+u*h:.5*(r+s)*(d-1);if(p<0||p>d-1){for(let n=0;n<m;n++){let r=n+u*w[2]+t*w[1]+e*w[0];b.values[r]=l}continue}let c=Math.floor(p),f=Math.ceil(p),g=p-c;for(let r=0;r<m;r++){let s=r+c*v[2]+n*v[1]+i*v[0],l=k[s],p=k[s=r+f*v[2]+n*v[1]+i*v[0]],h=k[s=r+c*v[2]+a*v[1]+i*v[0]],d=k[s=r+f*v[2]+a*v[1]+i*v[0]],m=l+(p-l)*g,y=h+(d-h)*g;s=r+u*w[2]+t*w[1]+e*w[0],b.values[s]=m+(y-m)*o}}}else for(let n=0;n<y;++n){let a=y>1?r*(d-1)+n*h:.5*(r+s)*(d-1);if(a<0||a>d-1){for(let r=0;r<m;r++){let a=r+n*w[2]+t*w[1]+e*w[0];b.values[a]=l}continue}let o=Math.round(a),u=Math.round(p);for(let r=0;r<m;r++){let a=r+o*v[2]+u*v[1]+i*v[0],s=r+n*w[2]+t*w[1]+e*w[0];b.values[s]=k[a]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},sw={kernelName:h.Cumprod,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r;(0,r8.H)(a,"cumprod");let u=h.backend_util.getAxesPermutation([s],a.shape.length),l=a;null!=u&&(l=(0,az.p)({inputs:{x:a},backend:n,attrs:{perm:u}}));let p=h.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(p!==l.shape.length-1)throw Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${p}`);let c=(0,h.upcastType)(l.dtype,"int32"),d=h.util.makeOnesTypedArray(h.util.sizeFromShape(l.shape),c),m=n.data.get(l.dataId).values,f=l.shape[l.shape.length-1],g=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<m.length;e+=f)for(let t=0;t<f;t++){let n=g(e,t);if(0===t)d[n]=i?1:m[n];else{let r=g(e,t-1);d[n]=i?m[r]*d[r]:m[n]*d[r]}}let y=n.makeTensorInfo(l.shape,c,d);if(null!=u){let e=h.backend_util.getUndoAxesPermutation(u),t=(0,az.p)({inputs:{x:y},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),t}return y}},sS={kernelName:h.Cumsum,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r;(0,r8.H)(a,"cumsum");let u=h.backend_util.getAxesPermutation([s],a.shape.length),l=a;null!=u&&(l=(0,az.p)({inputs:{x:a},backend:n,attrs:{perm:u}}));let p=h.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(p!==l.shape.length-1)throw Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${p}`);let c=(0,h.upcastType)(l.dtype,"int32"),d=h.util.makeZerosTypedArray(h.util.sizeFromShape(l.shape),c),m=n.data.get(l.dataId).values,f=l.shape[l.shape.length-1],g=o?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<m.length;e+=f)for(let t=0;t<f;t++){let n=g(e,t);if(0===t)d[n]=i?0:m[n];else{let r=g(e,t-1);d[n]=i?m[r]+d[r]:m[n]+d[r]}}let y=n.makeTensorInfo(l.shape,c,d);if(null!=u){let e=h.backend_util.getUndoAxesPermutation(u),t=(0,az.p)({inputs:{x:y},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),t}return y}},sT={kernelName:h.DenseBincount,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i,binaryOutput:o}=r;if(1===a.shape.length){let e=n.data.get(a.dataId).values,t=n.data.get(s.dataId).values,r=(0,a9.W)(e,t,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,r)}if(2===a.shape.length){let e=n.bufferSync(a),t=n.bufferSync(s),r=(0,a9.i)(e,t,i,o);return n.makeTensorInfo(r.shape,s.dtype,r.values)}throw Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}},sI={kernelName:h.DepthToSpace,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:i}=r;h.util.assert("NHWC"===i,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);let o=a.shape[0],u=a.shape[1],l=a.shape[2],p=a.shape[3],c=u*s,d=l*s,m=p/(s*s),f=n.data.get(a.dataId).values,g=new Float32Array(o*c*d*m),y=0;for(let e=0;e<o;++e)for(let t=0;t<c;++t){let n=Math.floor(t/s),r=t%s;for(let t=0;t<d;++t){let a=Math.floor(t/s),i=t%s,o=(r*s+i)*m;for(let t=0;t<m;++t){let r=t+o+p*(a+l*(n+u*e));g[y++]=f[r]}}}return n.makeTensorInfo([o,c,d,m],a.dtype,g)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sA(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:u,dimRoundingMode:l}=r;(0,r8.H)([a,s],"depthwiseConv2DNative");let p=h.util.computeStrides(a.shape),c=h.util.computeStrides(s.shape),d=u;null==d&&(d=[1,1]),h.util.assert(h.backend_util.eitherStridesOrDilationsAreOne(i,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${d}'`);let m=h.backend_util.computeConv2DInfo(a.shape,s.shape,i,d,o,l,!0),{filterHeight:f,filterWidth:g,dilationHeight:y,dilationWidth:b,padInfo:N}=m,x=N.left,k=N.top,v=m.outChannels/m.inChannels,w=new h.TensorBuffer(m.outShape,a.dtype),S=n.data.get(a.dataId).values,T=n.data.get(s.dataId).values,I=w.values;for(let e=0;e<m.batchSize;++e){let t=e*p[0],n=e*w.strides[0];for(let e=0;e<m.outHeight;++e){let r=n+e*w.strides[1],a=e*m.strideHeight-k;for(let e=0;e<f;++e){let n=a+e*y;if(n<0||n>=m.inHeight)continue;let s=e*c[0],i=t+n*p[1];for(let e=0;e<m.outWidth;++e){let t=r+e*w.strides[2],n=e*m.strideWidth-x;for(let e=0;e<g;++e){let r=n+e*b;if(r<0||r>=m.inWidth)continue;let a=s+e*c[1],o=i+r*m.inChannels,u=t,l=a;for(let e=0;e<m.inChannels;++e){let t=S[o+e];for(let e=0;e<v;++e)I[u+e]+=t*T[l+e];u+=v,l+=v}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}let sD={kernelName:h.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:sA},sF={kernelName:h.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,dilations:o,pad:u,dimRoundingMode:l,filterShape:p}=r;(0,r8.H)([a,s],"depthwiseConv2dNativeBackpropFilter");let c=h.backend_util.computeConv2DInfo(a.shape,p,i,o,u,l,!0),{strideHeight:d,strideWidth:m,filterHeight:f,filterWidth:g}=c,y=new h.TensorBuffer(c.filterShape,"float32"),b=c.padInfo.left,N=c.padInfo.top,x=c.outChannels/c.inChannels,k=n.data.get(a.dataId).values,v=new h.TensorBuffer(a.shape,a.dtype,k),w=n.data.get(s.dataId).values,S=new h.TensorBuffer(s.shape,s.dtype,w);for(let e=0;e<f;++e){let t=Math.max(0,Math.ceil((N-e)/d)),n=Math.min(c.outHeight,(c.inHeight+N-e)/d);for(let r=0;r<g;++r){let a=Math.max(0,Math.ceil((b-r)/m)),s=Math.min(c.outWidth,(c.inWidth+b-r)/m);for(let i=0;i<c.outChannels;++i){let o=Math.trunc(i/x),u=i%x,l=0;for(let u=0;u<c.batchSize;++u)for(let p=t;p<n;++p){let t=e+p*d-N;for(let e=a;e<s;++e){let n=r+e*m-b;l+=v.get(u,t,n,o)*S.get(u,p,e,i)}}y.set(l,e,r,o,u)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},sE={kernelName:h.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{strides:i,dilations:o,pad:u,dimRoundingMode:l,inputShape:p}=r;(0,r8.H)([a,s],"depthwiseConv2DNativeBackpropInput");let c=h.util.computeStrides(a.shape),d=h.util.computeStrides(s.shape),m=h.backend_util.computeConv2DInfo(p,s.shape,i,o,u,l,!0),f=new h.TensorBuffer(m.inShape,"float32"),g=f.values,[y,b,N]=f.strides,x=n.data.get(a.dataId).values,[k,v,w]=c,S=n.data.get(s.dataId).values,[T,I,A]=d,{batchSize:D,filterHeight:F,filterWidth:E,inChannels:C,inHeight:z,inWidth:M,outChannels:_,outHeight:O,outWidth:L,strideHeight:$,strideWidth:R}=m,P=F-1-m.padInfo.top,B=E-1-m.padInfo.left,V=_/C;for(let e=0;e<D;++e)for(let t=0;t<C;++t)for(let n=0;n<z;++n){let r=n-P,a=Math.max(0,Math.ceil(r/$)),s=Math.min(O,(F+r)/$);for(let i=0;i<M;++i){let o=i-B,u=Math.max(0,Math.ceil(o/R)),l=Math.min(L,(E+o)/R),p=0;for(let n=a;n<s;++n){let a=n*$-r;for(let r=u;r<l;++r){let s=r*R-o,i=k*e+v*n+w*r,u=T*(F-1-a)+I*(E-1-s)+A*t;for(let e=0;e<V;++e)p+=x[i+(t*V+e)]*S[u+e]}}g[y*e+b*n+N*i+t]=p}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},sC={kernelName:h.Diag,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=h.util.sizeFromShape(r.shape),s=n.data.get(r.dataId).values,i=(0,h.buffer)([a,a],r.dtype),o=i.values;for(let e=0;e<s.length;e++)o[e*a+e]=s[e];let u=[...r.shape,...r.shape];return n.makeTensorInfo(u,i.dtype,i.values)}},sz={kernelName:h.Dilation2D,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a}=e,{strides:s,pad:i,dilations:o}=n,u=t.data.get(r.dataId).values,l=r.shape.length,p=t.data.get(a.dataId).values,c=a.shape.length,{batchSize:d,inHeight:m,inWidth:f,inChannels:g,outHeight:y,outWidth:b,padInfo:N,strideHeight:x,strideWidth:k,filterHeight:v,filterWidth:w,dilationHeight:S,dilationWidth:T,outShape:I}=h.backend_util.computeDilation2DInfo(r.shape,a.shape,s,i,"NHWC",o),A=h.util.sizeFromShape(I),D=I.length,F=h.util.getArrayFromDType(r.dtype,A);for(let e=0;e<d;++e)for(let t=0;t<y;++t){let n=t*x-N.top;for(let s=0;s<b;++s){let i=s*k-N.left;for(let o=0;o<g;++o){let d=Number.MIN_SAFE_INTEGER;for(let t=0;t<v;++t){let s=n+t*S;if(s>=0&&s<m)for(let n=0;n<w;++n){let m=i+n*T;if(m>=0&&m<f){let i=h.util.locToIndex([e,s,m,o],l,h.util.computeStrides(r.shape)),f=h.util.locToIndex([t,n,o],c,h.util.computeStrides(a.shape)),g=u[i]+p[f];g>d&&(d=g)}}}F[h.util.locToIndex([e,t,s,o],D,h.util.computeStrides(I))]=d}}}return{dataId:t.write(h.util.toTypedArray(F,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}},sM={kernelName:h.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:s}=e,{strides:i,pad:o,dilations:u}=n,l=h.util.toNestedArray(r.shape,t.data.get(r.dataId).values),p=h.util.toNestedArray(a.shape,t.data.get(a.dataId).values),{batchSize:c,inHeight:d,inWidth:m,inChannels:f,outHeight:g,outWidth:y,padInfo:b,strideHeight:N,strideWidth:x,filterHeight:k,filterWidth:v,dilationHeight:w,dilationWidth:S,outShape:T}=h.backend_util.computeDilation2DInfo(r.shape,a.shape,i,o,"NHWC",u);h.util.assert(s.rank===T.length,()=>`Error in ${h.Dilation2DBackpropFilter}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);let I=h.util.toNestedArray(T,t.data.get(s.dataId).values),A=h.util.makeZerosNestedTypedArray(a.shape,a.dtype);for(let e=0;e<c;++e)for(let t=0;t<g;++t){let n=t*N-b.top;for(let r=0;r<y;++r){let a=r*x-b.left;for(let s=0;s<f;++s){let i=Number.MIN_SAFE_INTEGER,o=0,u=0;for(let t=0;t<k;++t){let r=n+t*w;if(r>=0&&r<d)for(let n=0;n<v;++n){let h=a+n*S;if(h>=0&&h<m){let a=l[e][r][h][s]+p[t][n][s];a>i&&(i=a,o=t,u=n)}}}A[o][u][s]+=I[e][t][r][s]}}}return{dataId:t.write(h.util.toTypedArray(A,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},s_={kernelName:h.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:s}=e,{strides:i,pad:o,dilations:u}=n,l=h.util.toNestedArray(r.shape,t.data.get(r.dataId).values),p=h.util.toNestedArray(a.shape,t.data.get(a.dataId).values),{batchSize:c,inHeight:d,inWidth:m,inChannels:f,outHeight:g,outWidth:y,padInfo:b,strideHeight:N,strideWidth:x,filterHeight:k,filterWidth:v,dilationHeight:w,dilationWidth:S,outShape:T}=h.backend_util.computeDilation2DInfo(r.shape,a.shape,i,o,"NHWC",u);h.util.assert(s.rank===T.length,()=>`Error in ${h.Dilation2DBackpropInput}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);let I=h.util.toNestedArray(T,t.data.get(s.dataId).values),A=h.util.makeZerosNestedTypedArray(r.shape,r.dtype);for(let e=0;e<c;++e)for(let t=0;t<g;++t){let n=t*N-b.top;for(let r=0;r<y;++r){let a=r*x-b.left;for(let s=0;s<f;++s){let i=Number.MIN_SAFE_INTEGER,o=n<0?0:n,u=a<0?0:a;for(let t=0;t<k;++t){let r=n+t*w;if(r>=0&&r<d)for(let n=0;n<v;++n){let h=a+n*S;if(h>=0&&h<m){let a=l[e][r][h][s]+p[t][n][s];a>i&&(i=a,o=r,u=h)}}}A[e][o][u][s]+=I[e][t][r][s]}}}return{dataId:t.write(h.util.toTypedArray(A,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},sO={kernelName:h.Draw,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{canvas:s,options:i}=r,{contextOptions:o,imageOptions:u}=i||{},l=(null==u?void 0:u.alpha)||1,p=(null==o?void 0:o.contextType)||"2d";if("2d"!==p)throw Error(`Context type ${o.contextType} is not supported by the CPU backend.`);let h=s.getContext(p,(null==o?void 0:o.contextAttributes)||{});if(null==h)throw Error(`Could not get the context with ${p} type.`);let[c,d]=a.shape.slice(0,2),m=2===a.shape.length?1:a.shape[2],f=n.data.get(a.dataId).values,g="float32"===a.dtype?255:1,y=new Uint8ClampedArray(d*c*4);for(let e=0;e<c*d;++e){let t=[0,0,0,255*l];for(let n=0;n<m;n++){let r=f[e*m+n];if("float32"===a.dtype){if(r<0||r>1)throw Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${r}.`)}else if("int32"===a.dtype&&(r<0||r>255))throw Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${r}.`);1===m?(t[0]=r*g,t[1]=r*g,t[2]=r*g):t[n]=r*g}let n=4*e;y[n+0]=Math.round(t[0]),y[n+1]=Math.round(t[1]),y[n+2]=Math.round(t[2]),y[n+3]=Math.round(t[3])}s.width=d,s.height=c;let b=new ImageData(y,d,c);return h.putImageData(b,0,0),a}};var sL=n(52873),s$=n(84451);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sR(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:s}=n,{axis:i,keepDims:o}=a;(0,r8.H)(s,"sum");let u=(t="bool"===s.dtype?(0,a8.pj)({inputs:{x:s},backend:r,attrs:{dtype:"int32"}}):(0,ao.y)({inputs:{x:s},backend:r})).shape.length,l=h.util.parseAxisParam(i,t.shape),p=h.backend_util.getAxesPermutation(l,u),c=l,d=t;null!=p&&(d=(0,az.p)({inputs:{x:t},backend:r,attrs:{perm:p}}),c=h.backend_util.getInnerMostAxes(c.length,u)),h.backend_util.assertAxesAreInnerMostDims("sum",c,d.shape.length);let[m,f]=h.backend_util.computeOutAndReduceShapes(d.shape,c),g=h.backend_util.upcastType(d.dtype,"int32"),y=(0,s$.l)(r,m,g),b=h.util.sizeFromShape(f),N=r.data.get(y.dataId).values,x=r.data.get(d.dataId).values;for(let e=0;e<N.length;++e){let t=e*b,n=0;for(let e=0;e<b;++e)n+=x[t+e];N[e]=n}if(o){let e=h.backend_util.expandShapeToKeepDim(y.shape,l),t=y;y=ak({inputs:{x:y},backend:r,attrs:{shape:e}}),r.disposeIntermediateTensorInfo(t)}return r.disposeIntermediateTensorInfo(t),null!=p&&r.disposeIntermediateTensorInfo(d),y}let sP={kernelName:h.Sum,backendName:"cpu",kernelFunc:sR},sB={kernelName:h.Einsum,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,{allDims:s,summedDims:i,idDims:o}=h.backend_util.decodeEinsumEquation(a,t.length);h.backend_util.checkEinsumDimSizes(s.length,o,t);let{path:u,steps:l}=h.backend_util.getEinsumComputePath(i,o),p=l.length,c=null,d=s.length,m=[];for(let e=0;e<p;++e){for(let r of l[e]){let e;let{permutationIndices:a,expandDims:s}=h.backend_util.getEinsumPermutation(d,o[r]);h.backend_util.isIdentityPermutation(a)?e=t[r]:(e=(0,az.p)({inputs:{x:t[r]},backend:n,attrs:{perm:a}}),m.push(e));let i=e.shape.slice();for(let e=0;e<s.length;++e)i.splice(s[e],0,1);h.util.arraysEqual(e.shape,i)||(e=ak({inputs:{x:e},backend:n,attrs:{shape:i}}),m.push(e)),null===c?c=e:(c=(0,sL.Jp)({inputs:{a:e,b:c},backend:n}),m.push(c))}e<p-1&&(u[e]>=0&&(c=sR({inputs:{x:c},backend:n,attrs:{axis:u[e]-(s.length-d),keepDims:!1}}),m.push(c)),d--)}for(let e of m)e!==c&&n.disposeIntermediateTensorInfo(e);return c}},sV={kernelName:h.EluGrad,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{dy:r,y:a}=t;(0,r8.H)([r,a],"eluGrad");let s=new Float32Array(h.util.sizeFromShape(a.shape)),i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let e=0;e<i.length;++e){let t=i[e];t>=0?s[e]=o[e]:s[e]=o[e]*(t+1)}return n.makeTensorInfo(a.shape,"float32",s)}};var sW=n(4801);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let sH=h.backend_util.ERF_P,sj=h.backend_util.ERF_A1,sU=h.backend_util.ERF_A2,sq=h.backend_util.ERF_A3,sG=h.backend_util.ERF_A4,sQ=h.backend_util.ERF_A5,sX=(0,aa.A)(h.Erf,e=>{let t=Math.abs(e),n=1/(1+sH*t);return Math.sign(e)*(1-((((sQ*n+sG)*n+sq)*n+sU)*n+sj)*n*Math.exp(-t*t))}),sK={kernelName:h.Erf,backendName:"cpu",kernelFunc:sX};var sZ=n(93980);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sJ(e){let{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:s}=r,i=a.shape.length,o=a.shape.slice(),u=s;return s<0&&(h.util.assert(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),u=i+s+1),o.splice(u,0,1),ak({inputs:{x:a},backend:n,attrs:{shape:o}})}let sY={kernelName:h.ExpandDims,backendName:"cpu",kernelFunc:sJ};var s0=n(73330);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let s1=(0,ap.b)((e,t)=>e/t),s2=(0,aH.j)(h.RealDiv,s1),s3={kernelName:h.RealDiv,backendName:"cpu",kernelFunc:s2};var s4=n(8968);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s9(e,t,n){let r=e.shape,a=r[0],s=r[1],i=n.data.get(e.dataId),o=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,l=[a,s],p=h.util.sizeFromShape(l),c=h.util.getTypedArrayFromDType("float32",p),d=h.util.getTypedArrayFromDType("float32",p);for(let e=0;e<a;e++){let r=(0,a3.tP)({inputs:{x:o},backend:n,attrs:{begin:[e,0],size:[1,s]}}),a=(0,a3.tP)({inputs:{x:u},backend:n,attrs:{begin:[e,0],size:[1,s]}}),i=(0,sr.P)({inputs:{real:r,imag:a},backend:n}),{real:l,imag:p}=function(e,t,n){let r=h.util.sizeFromShape(e.shape),a=n.data.get(e.dataId),s=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if((r&r-1)==0){let a=function e(t,n,r,a,s){if(1===r)return{real:t,imag:n};let i=h.backend_util.mergeRealAndImagArrays(t,n),o=r/2,u=h.backend_util.complexWithEvenIndex(i),l=u.real,p=u.imag,c=[l.length],d=s.makeTensorInfo(c,"float32",l),m=s.makeTensorInfo(c,"float32",p),f=(0,sr.P)({inputs:{real:d,imag:m},backend:s}),g=h.backend_util.complexWithOddIndex(i),y=g.real,b=g.imag,N=[y.length],x=s.makeTensorInfo(N,"float32",y),k=s.makeTensorInfo(N,"float32",b),v=(0,sr.P)({inputs:{real:x,imag:k},backend:s}),w=e(l,p,o,a,s),S=w.real,T=w.imag,I=[S.length],A=s.makeTensorInfo(I,"float32",S),D=s.makeTensorInfo(I,"float32",T),F=(0,sr.P)({inputs:{real:A,imag:D},backend:s}),E=e(y,b,o,a,s),C=E.real,z=E.imag,M=[C.length],_=s.makeTensorInfo(M,"float32",C),O=s.makeTensorInfo(M,"float32",z),L=(0,sr.P)({inputs:{real:_,imag:O},backend:s}),$=h.backend_util.exponents(r,a),R=[$.real.length],P=s.makeTensorInfo(R,"float32",$.real),B=s.makeTensorInfo(R,"float32",$.imag),V=(0,sr.P)({inputs:{real:P,imag:B},backend:s}),W=(0,sL.Jp)({inputs:{a:V,b:L},backend:s}),H=(0,ax.IH)({inputs:{a:F,b:W},backend:s}),j=(0,s4.lu)({inputs:{a:F,b:W},backend:s}),U=(0,su.k)({inputs:{input:H},backend:s}),q=(0,su.k)({inputs:{input:j},backend:s}),G=si({inputs:{input:H},backend:s}),Q=si({inputs:{input:j},backend:s}),X=sl({inputs:[U,q],backend:s,attrs:{axis:0}}),K=sl({inputs:[G,Q],backend:s,attrs:{axis:0}}),Z=s.data.get(X.dataId).values,J=s.data.get(K.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo(_),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(L),s.disposeIntermediateTensorInfo(P),s.disposeIntermediateTensorInfo(B),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(H),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(U),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(K),{real:Z,imag:J}}(s,i,r,t,n),o=[e.shape[0],e.shape[1]];if(t){let e=n.makeTensorInfo(o,"float32",a.real),t=n.makeTensorInfo(o,"float32",a.imag),s=n.makeTensorInfo([],"float32",h.util.createScalarValue(r,"float32")),i=(0,ao.y)({inputs:{x:s},backend:n}),u=s3.kernelFunc({inputs:{a:e,b:s},backend:n}),l=s3.kernelFunc({inputs:{a:t,b:i},backend:n}),p=n.data.get(u.dataId).values,c=n.data.get(l.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),{real:p,imag:c}}return a}{let e=function(e,t,n){let r=new Float32Array(2*t);for(let a=0;a<t;a++){let s=0,i=0;for(let r=0;r<t;r++){let o=h.backend_util.exponent(a*r,t,n),u=h.backend_util.getComplexWithIndex(e,r);s+=u.real*o.real-u.imag*o.imag,i+=u.real*o.imag+u.imag*o.real}n&&(s/=t,i/=t),h.backend_util.assignToTypedArray(r,s,i,a)}return r}(h.backend_util.mergeRealAndImagArrays(s,i),r,t);return h.backend_util.splitRealAndImagArrays(e)}}(i,t,n),m=h.backend_util.mergeRealAndImagArrays(l,p);for(let t=0;t<s;t++){let n=h.backend_util.getComplexWithIndex(m,t);c[e*s+t]=n.real,d[e*s+t]=n.imag}n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i)}let m=n.makeTensorInfo(l,"float32",c),f=n.makeTensorInfo(l,"float32",d),g=(0,sr.P)({inputs:{real:m,imag:f},backend:n});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(f),g}let s6={kernelName:h.FFT,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{input:r}=t,a=h.util.sizeFromShape(r.shape),s=r.shape[r.shape.length-1],i=ak({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),o=s9(i,!1,n),u=ak({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),u}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5(e){let{backend:t,attrs:n}=e,{shape:r,value:a,dtype:s}=n,i=s||h.util.inferDtype(a),o=h.util.getArrayFromDType(i,h.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(o,a,0),t.makeTensorInfo(r,i,o)}let s7={kernelName:h.Fill,backendName:"cpu",kernelFunc:s5},s8={kernelName:h.FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,a=h.util.getTypedArrayFromDType(r.dtype,h.util.sizeFromShape(r.shape)),[s,i,o,u]=r.shape,l=n.data.get(r.dataId).values;for(let e=0;e<s;e++){let t=e*o*i*u;for(let e=0;e<i;e++){let n=o*u*e;for(let e=0;e<o;e++){let r=e*u;for(let s=0;s<u;s++){let i=Math.round(o-e-1),p=t+n+r+s,h=l[p];i>=0&&i<o&&(h=l[t+n+i*u+s]),a[p]=h}}}}return{dataId:n.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var ie=n(55573),it=n(69257);let ir={kernelName:h.FusedConv2D,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:u,pad:l,dataFormat:p,dilations:h,dimRoundingMode:c,activation:d,leakyreluAlpha:m}=r,f=sh({inputs:{x:a,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:p,dilations:h,dimRoundingMode:c}});if(i){let e=f;if("NCHW"===p&&1===i.shape.length&&1!==i.shape[0]){let e=ak({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});f=(0,ax.IH)({inputs:{a:f,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else f=(0,ax.IH)({inputs:{a:f,b:i},backend:n});n.disposeIntermediateTensorInfo(e)}if(d){let e=f;if("NCHW"===p&&"prelu"===d&&1===o.shape.length&&1!==o.shape[0]){let e=ak({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});f=aN(n,f,d,e,m),n.disposeIntermediateTensorInfo(e)}else f=aN(n,f,d,o,m);n.disposeIntermediateTensorInfo(e)}return f}},ia={kernelName:h.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:u,pad:l,dataFormat:p,dilations:h,dimRoundingMode:c,activation:d,leakyreluAlpha:m}=r,f=sA({inputs:{x:a,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:p,dilations:h,dimRoundingMode:c}});if(i){let e=f;f=(0,ax.IH)({inputs:{a:f,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(d){let e=f;f=aN(n,f,d,o,m),n.disposeIntermediateTensorInfo(e)}return f}};var is=n(54574);let ii={kernelName:h.GatherNd,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,s=h.util.sizeFromShape(r.shape),i=a.shape,o=i[i.length-1],[u,l,p,c]=h.backend_util.prepareAndValidate(r,a);if(0===l)return n.makeTensorInfo(u,r.dtype,[]);let d=n.data.get(a.dataId).values,m=n.bufferSync(r),f=(0,is.m)(d,m,r.dtype,l,o,p,c,r.shape,s);return n.makeTensorInfo(u,r.dtype,f.values)}};var io=n(39437);let iu={kernelName:h.GatherV2,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:s}=t,{axis:i,batchDims:o}=r;(0,r8.H)([a,s],"gatherV2");let u=h.util.parseAxisParam(i,a.shape)[0],l=n.data.get(s.dataId).values,p=a.shape[u];for(let e=0;e<l.length;++e){let t=l[e];h.util.assert(t<=p-1&&t>=0,()=>`GatherV2: the index value ${t} is not in [0, ${p-1}]`)}let c=o;null==o&&(c=0);let d=h.util.sizeFromShape(s.shape),m=h.backend_util.segment_util.collectGatherOpShapeInfo(a,s,u,c),f=ak({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),g=ak({inputs:{x:s},backend:n,attrs:{shape:[m.batchSize,d/m.batchSize]}}),y=[m.batchSize,m.outerSize,d/m.batchSize,m.sliceSize],b=n.bufferSync(g),N=n.bufferSync(f),x=(0,io.i)(N,b,y);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}};var il=n(21771),ip=n(55552);let ih={kernelName:h.IFFT,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{input:r}=t,a=h.util.sizeFromShape(r.shape),s=r.shape[r.shape.length-1],i=ak({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),o=s9(i,!0,n),u=ak({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),u}},ic=(0,aa.A)(h.IsFinite,e=>Number.isFinite(e)?1:0,"bool"),id={kernelName:h.IsFinite,backendName:"cpu",kernelFunc:ic},im=(0,aa.A)(h.IsInf,e=>Math.abs(e)===1/0?1:0,"bool"),ig={kernelName:h.IsInf,backendName:"cpu",kernelFunc:im},iy=(0,aa.A)(h.IsNan,e=>Number.isNaN(e)?1:0,"bool"),ib={kernelName:h.IsNan,backendName:"cpu",kernelFunc:iy};var iN=n(24277),ix=n(68123),ik=n(67021);let iv={kernelName:h.LinSpace,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,i=(0,ik.b)(r,a,s);return t.makeTensorInfo([i.length],"float32",i)}};var iw=n(72266);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let iS=(0,aa.A)(h.Log1p,e=>Math.log1p(e)),iT={kernelName:h.Log1p,backendName:"cpu",kernelFunc:iS},iI=(0,ap.b)((e,t)=>e&&t),iA=(0,aH.j)(h.LogicalAnd,iI,null,"bool"),iD={kernelName:h.LogicalAnd,backendName:"cpu",kernelFunc:iA},iF=(0,aa.A)(h.LogicalNot,e=>e?0:1,"bool"),iE={kernelName:h.LogicalNot,backendName:"cpu",kernelFunc:iF},iC=(0,ap.b)((e,t)=>e||t),iz=(0,aH.j)(h.LogicalOr,iC,null,"bool"),iM={kernelName:h.LogicalOr,backendName:"cpu",kernelFunc:iz},i_={kernelName:h.LRN,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:s,bias:i,alpha:o,beta:u}=r;(0,r8.H)(a,"LRN");let l=a.shape[3],p=l-1,c=n.data.get(a.dataId).values,d=h.util.sizeFromShape(a.shape),m=new Float32Array(d);for(let e=0;e<d;e++){let t=function(e){let t=e%l,n=e-t+Math.max(0,t-s),r=e-t+Math.min(t+s,p),a=0;for(;n<=r;n++){let e=c[n];a+=e*e}return a}(e),n=c[e]*Math.pow(i+o*t,-u);m[e]=n}return n.makeTensorInfo(a.shape,a.dtype,m)}},iO={kernelName:h.LRNGrad,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:i}=t,{depthRadius:o,bias:u,alpha:l,beta:p}=r;(0,r8.H)(i,"LRNGrad");let c=h.util.sizeFromShape(i.shape),d=i.shape[3],m=n.data.get(i.dataId).values,f=n.data.get(a.dataId).values,g=n.data.get(s.dataId).values,y=new Float32Array(c);for(let e=0;e<c;e++){let t=e%d,n=e-t+Math.max(0,t-o),r=e-t+Math.min(d,t+o+1),a=0;for(let e=n;e<r;e++)a+=Math.pow(f[e],2);a=l*a+u;for(let t=n;t<r;t++){let n=-2*l*p*f[t]*g[e]/a;e===t&&(n+=Math.pow(a,-p)),n*=m[e],y[t]+=n}}return n.makeTensorInfo(i.shape,a.dtype,y)}};var iL=n(28410),i$=n(2379);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iR(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:s,keepDims:i}=r,o=a.shape,u=o.length,l=h.util.parseAxisParam(s,o),p=l,c=h.backend_util.getAxesPermutation(p,u),d=n.data.get(a.dataId).values;if(null!=c){let e=Array(u);for(let t=0;t<e.length;t++)e[t]=o[c[t]];d=(0,i$.H)(d,o,a.dtype,c,e),p=h.backend_util.getInnerMostAxes(p.length,u),o=e}(0,r8.H)(a,"max"),h.backend_util.assertAxesAreInnerMostDims("max",p,u);let[m,f]=h.backend_util.computeOutAndReduceShapes(o,p),g=h.util.sizeFromShape(f),y=(0,iL.B)(d,g,m,a.dtype),b=n.write(y,m,a.dtype),N=m;return i&&(N=h.backend_util.expandShapeToKeepDim(m,l)),{dataId:b,shape:N,dtype:a.dtype}}let iP={kernelName:h.Max,backendName:"cpu",kernelFunc:iR};var iB=n(29155);let iV={kernelName:h.MaxPool,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:s}=n;(0,r8.H)(s,"maxPool");let{filterSize:i,strides:o,pad:u,dimRoundingMode:l}=a;h.util.assert(h.backend_util.eitherStridesOrDilationsAreOne(o,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);let p=h.backend_util.computePool2DInfo(s.shape,i,o,1,u,l);if(1===p.filterWidth&&1===p.filterHeight&&h.util.arraysEqual(p.inShape,p.outShape))t=(0,ao.y)({inputs:{x:s},backend:r});else{let e=r.data.get(s.dataId).values,n=h.util.computeStrides(s.shape),a=aX(e,s.shape,s.dtype,n,p,"max");t=r.makeTensorInfo(p.outShape,s.dtype,a.values)}return t}},iW={kernelName:h.MaxPool3D,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:u,dataFormat:l}=r;(0,r8.H)(a,"maxPool3d");let p=h.backend_util.computePool3DInfo(a.shape,s,i,1,o,u,l),c=aZ(n.data.get(a.dataId).values,a.shape,a.dtype,h.util.computeStrides(a.shape),p,"max");return n.makeTensorInfo(c.shape,"float32",c.values)}},iH={kernelName:h.MaxPool3DGrad,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:i,strides:o,pad:u,dimRoundingMode:l}=r;(0,r8.H)([a,s],"maxPool3DGrad");let p=h.backend_util.computePool3DInfo(s.shape,i,o,1,u,l),c=function(e,t){let n=(0,h.buffer)(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,s=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,p=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=t.padInfo.front,m=t.padInfo.top,f=t.padInfo.left;for(let h=0;h<t.batchSize;++h)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){let b=y*r-d,N=b;for(;N<0;)N+=i;let x=Math.min(t.inDepth,l+b);for(let r=0;r<t.outHeight;++r){let l=r*a-m,d=l;for(;d<0;)d+=o;let k=Math.min(t.inHeight,p+l);for(let a=0;a<t.outWidth;++a){let m=a*s-f,v=m;for(;v<0;)v+=u;let w=Math.min(t.inWidth,c+m),S=Number.NEGATIVE_INFINITY,T=-1;for(let t=N;t<x;t+=i){let n=t-b;for(let r=d;r<k;r+=o){let a=r-l;for(let s=v;s<w;s+=u){let i=s-m,o=e.get(h,t,r,s,g);o>=S&&(S=o,T=n*p*c+a*p+i)}}}n.set(T,h,y,r,a,g)}}}return n}(n.bufferSync(s),p),d=p.strideDepth,m=p.strideHeight,f=p.strideWidth,g=p.dilationDepth,y=p.dilationHeight,b=p.dilationWidth,N=p.effectiveFilterDepth,x=p.effectiveFilterHeight,k=p.effectiveFilterWidth,v=N-1-p.padInfo.front,w=k-1-p.padInfo.left,S=x-1-p.padInfo.top,T=(0,h.buffer)(s.shape,"float32"),I=n.bufferSync(a);for(let e=0;e<p.batchSize;++e)for(let t=0;t<p.inChannels;++t)for(let n=0;n<p.inDepth;++n)for(let r=0;r<p.inHeight;++r)for(let a=0;a<p.inWidth;++a){let s=n-v,i=r-S,o=a-w,u=0;for(let n=0;n<N;n+=g){let r=(s+n)/d;if(!(r<0)&&!(r>=p.outDepth)&&Math.floor(r)===r)for(let a=0;a<x;a+=y){let s=(i+a)/m;if(!(s<0)&&!(s>=p.outHeight)&&Math.floor(s)===s)for(let i=0;i<k;i+=b){let l=(o+i)/f;if(l<0||l>=p.outWidth||Math.floor(l)!==l)continue;let h=N*x*k-1-c.get(e,r,s,l,t)===n*x*k+a*k+i?1:0;0!==h&&(u+=I.get(e,r,s,l,t)*h)}}}T.set(u,e,n,r,a,t)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}},ij={kernelName:h.MaxPoolGrad,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s,output:i}=t;(0,r8.H)([s,i],"maxPoolGrad");let{filterSize:o,strides:u,pad:l,dimRoundingMode:p}=r,c=h.backend_util.computePool2DInfo(s.shape,o,u,1,l,p),d=n.data.get(s.dataId).values,m=(0,h.buffer)(c.outShape,s.dtype,aK(d,s.shape,s.dtype,c).values),f=c.strideHeight,g=c.strideWidth,y=c.dilationHeight,b=c.dilationWidth,N=c.effectiveFilterHeight,x=c.effectiveFilterWidth,k=x-1-c.padInfo.left,v=N-1-c.padInfo.top,w=(0,h.buffer)(s.shape,"float32"),S=n.data.get(a.dataId).values,T=(0,h.buffer)(a.shape,"float32",S);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){let a=n-v,s=r-k,i=0;for(let n=0;n<N;n+=y){let r=(a+n)/f;if(!(r<0)&&!(r>=c.outHeight)&&Math.floor(r)===r)for(let a=0;a<x;a+=b){let o=(s+a)/g;if(o<0||o>=c.outWidth||Math.floor(o)!==o)continue;let u=N*x-1-m.get(e,r,o,t)===n*x+a?1:0;0!==u&&(i+=T.get(e,r,o,t)*u)}}w.set(i,e,n,r,t)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},iU={kernelName:h.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:a,strides:s,pad:i,includeBatchInIndex:o}=t;(0,r8.H)(r,"MaxPoolWithArgmax");let u=n.data.get(r.dataId).values,l=h.backend_util.computePool2DInfo(r.shape,a,s,[1,1],i),[p,c]=/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a){let s=h.util.computeStrides(t),i=aX(e,t,n,s,a,"max"),o=aK(e,t,n,a,!0,r);return[i.values,o.values]}(u,r.shape,r.dtype,o,l),d=n.write(p,l.outShape,r.dtype),m=n.write(c,l.outShape,r.dtype);return[{dataId:d,shape:l.outShape,dtype:r.dtype},{dataId:m,shape:l.outShape,dtype:"int32"}]}},iq={kernelName:h.Mean,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=h.util.parseAxisParam(s,a.shape),u=h.backend_util.computeOutAndReduceShapes(a.shape,o)[1],l=h.util.sizeFromShape(u),p=[],c=n.makeTensorInfo([],"float32",new Float32Array([l]));p.push(c);let d=(0,a8.pj)({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});p.push(d);let m=s2({inputs:{a:d,b:c},backend:n});p.push(m);let f=sR({inputs:{x:m},backend:n,attrs:{axis:s,keepDims:i}});return p.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}},iG={kernelName:h.Min,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;(0,r8.H)(a,"min");let o=h.util.parseAxisParam(s,a.shape),u=o,l=h.backend_util.getAxesPermutation(u,a.shape.length),p=a;null!=l&&(p=(0,az.p)({inputs:{x:a},backend:n,attrs:{perm:l}}),u=h.backend_util.getInnerMostAxes(u.length,a.shape.length)),h.backend_util.assertAxesAreInnerMostDims("min",u,p.shape.length);let[c,d]=h.backend_util.computeOutAndReduceShapes(p.shape,u),m=h.util.sizeFromShape(d),f=h.util.makeZerosTypedArray(h.util.sizeFromShape(c),p.dtype),g=n.data.get(p.dataId).values;for(let e=0;e<f.length;++e){let t=e*m,n=g[t];for(let e=0;e<m;++e){let r=g[t+e];(Number.isNaN(r)||r<n)&&(n=r)}f[e]=n}null!=l&&n.disposeIntermediateTensorInfo(p);let y=n.makeTensorInfo(c,p.dtype,f);if(i){let e=ak({inputs:{x:y},backend:n,attrs:{shape:h.backend_util.expandShapeToKeepDim(c,o)}});return n.disposeIntermediateTensorInfo(y),e}return y}};var iQ=n(49779);let iX={kernelName:h.MirrorPad,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,mode:i}=r;(0,r8.H)(a,"mirrorPad");let o=s.map((e,t)=>e[0]+a.shape[t]+e[1]),u=s.map(e=>e[0]),l=s.map((e,t)=>e[0]+a.shape[t]),p="reflect"===i?0:1,c=n.data.get(a.dataId).values,d=a.shape.length,m=h.util.computeStrides(a.shape),f=h.util.sizeFromShape(o),g=o.length,y=h.util.computeStrides(o),b=h.util.getTypedArrayFromDType(a.dtype,f);for(let e=0;e<f;e++){let t=h.util.indexToLoc(e,g,y);for(let e=0;e<g;e++)t[e]<u[e]?t[e]=2*u[e]-t[e]-p:t[e]>=l[e]&&(t[e]=(l[e]-1)*2-t[e]+p);t=t.map((e,t)=>e-u[t]);let n=h.util.locToIndex(t,d,m);b[e]=c[n]}return{dataId:n.write(b,o,a.dtype),shape:o,dtype:a.dtype}}},iK=(0,ap.b)((e,t)=>{let n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),iZ=(0,aH.j)(h.Mod,iK),iJ={kernelName:h.Mod,backendName:"cpu",kernelFunc:iZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iY(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:s}=r,i=a.shape.length,o=s;if(-1===o&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);let u=h.util.parseAxisParam([o],a.shape),l=iR({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),p=h.backend_util.expandShapeToKeepDim(l.shape,u),c=ak({inputs:{x:l},backend:n,attrs:{shape:p}}),d=(0,s4.lu)({inputs:{a:a,b:c},backend:n}),m=(0,sZ.Qq)({inputs:{x:d},backend:n}),f=sR({inputs:{x:m},backend:n,attrs:{axis:u,keepDims:!1}}),g=ak({inputs:{x:f},backend:n,attrs:{shape:p}}),y=s2({inputs:{a:m,b:g},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}let i0={kernelName:h.Softmax,backendName:"cpu",kernelFunc:iY},i1={kernelName:h.Multinomial,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:i,normalized:o}=r;(0,r8.H)(a,"multinomial");let u=o?a:iY({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],p=u.shape[1],c=n.data.get(u.dataId).values,d=[l,s],m=h.util.makeZerosTypedArray(h.util.sizeFromShape(d),"int32");for(let e=0;e<l;++e){let t=e*p,n=new Float32Array(p-1);n[0]=c[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+c[t+e];let r=ra.alea(i.toString()),a=e*s;for(let e=0;e<s;++e){let t=r();m[a+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){m[a+e]=r;break}}}return o||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",m)}};var i2=n(14751);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let i3=h.kernel_impls.nonMaxSuppressionV3Impl,i4={kernelName:h.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:u}=r;(0,r8.H)(a,"NonMaxSuppression");let{selectedIndices:l}=i3(n.data.get(a.dataId).values,n.data.get(s.dataId).values,i,o,u);return n.makeTensorInfo([l.length],"int32",new Int32Array(l))}},i9=h.kernel_impls.nonMaxSuppressionV4Impl,i6={kernelName:h.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:l}=r;(0,r8.H)(a,"NonMaxSuppressionPadded");let{selectedIndices:p,validOutputs:h}=i9(n.data.get(a.dataId).values,n.data.get(s.dataId).values,i,o,u,l);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},i5=h.kernel_impls.nonMaxSuppressionV5Impl,i7={kernelName:h.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=r;(0,r8.H)(a,"NonMaxSuppressionWithScore");let{selectedIndices:p,selectedScores:h}=i5(n.data.get(a.dataId).values,n.data.get(s.dataId).values,i,o,u,l);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}};var i8=n(74666);let oe={kernelName:h.OneHot,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:s,depth:i,onValue:o,offValue:u}=r;(0,r8.H)(a,"oneHot");let l=h.util.sizeFromShape(a.shape),p=new Float32Array(l*i);p.fill(u);let c=n.data.get(a.dataId).values;for(let e=0;e<l;++e)c[e]>=0&&c[e]<i&&(p[e*i+c[e]]=o);return n.makeTensorInfo([...a.shape,i],s,p)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ot(e){let{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw Error("zerosLike is not supported for string tensors");if("complex64"!==r.dtype)return s5({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}});{let e=(0,su.k)({inputs:{input:r},backend:n}),t=ot({inputs:{x:e},backend:n}),a=si({inputs:{input:r},backend:n}),s=ot({inputs:{x:a},backend:n}),i=(0,sr.P)({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),i}}let on={kernelName:h.ZerosLike,backendName:"cpu",kernelFunc:ot},or={kernelName:h.OnesLike,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(t){let{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw Error("onesLike is not supported for string tensors");if("complex64"!==a.dtype)return s5({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}});{let t=(0,su.k)({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=si({inputs:{input:a},backend:r}),i=ot({inputs:{x:s},backend:r}),o=(0,sr.P)({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oa(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return sJ({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let s=t[0].shape,i=t[0].dtype;t.forEach(e=>{h.util.assertShapesMatch(s,e.shape,"All tensors passed to stack must have matching shapes"),h.util.assert(i===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],u=sl({inputs:t.map(e=>{let t=sJ({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}let os={kernelName:h.Pack,backendName:"cpu",kernelFunc:oa},oi={kernelName:h.PadV2,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,constantValue:i}=r;(0,r8.H)(a,"pad");let o=s.map((e,t)=>e[0]+a.shape[t]+e[1]),u=s.map(e=>e[0]),l=n.data.get(a.dataId).values,p=h.util.sizeFromShape(a.shape),c=a.shape.length,d=h.util.computeStrides(a.shape),m=h.util.sizeFromShape(o),f=o.length,g=h.util.computeStrides(o),y=h.util.getTypedArrayFromDType(a.dtype,m);0!==i&&y.fill(i);for(let e=0;e<p;e++){let t=h.util.indexToLoc(e,c,d).map((e,t)=>e+u[t]);y[h.util.locToIndex(t,f,g)]=l[e]}return{dataId:n.write(y,o,a.dtype),shape:o,dtype:a.dtype}}},oo=(0,ap.b)((e,t)=>Math.pow(e,t)),ou=(0,aH.j)(h.Pow,oo),ol={kernelName:h.Pow,backendName:"cpu",kernelFunc:ou};var op=n(54158),oh=n(9591);let oc={kernelName:h.RaggedGather,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:s,indices:i}=t,{outputRaggedRank:o}=r,u=a.map(e=>n.data.get(e.dataId).values),l=a.map(e=>e.shape),p=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values,[c,d,m]=(0,oh.c)(u,l,p,s.shape,s.dtype,h,i.shape,o),f=c.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(m,s.dtype,d);return f.concat([g])}};var od=n(38873);let om={kernelName:h.RaggedRange,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:s}=t,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,[l,p]=(0,od.S)(i,r.shape,r.dtype,o,a.shape,u,s.shape);return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([p.length],r.dtype,p)]}};var of=n(34078);let og={kernelName:h.RaggedTensorToTensor,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{shape:a,values:s,defaultValue:i,rowPartitionTensors:o}=t,{rowPartitionTypes:u}=r,l=n.data.get(a.dataId).values,p=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values,c=o.map(e=>n.data.get(e.dataId).values),d=o.map(e=>e.shape),[m,f]=(0,of.p)(l,a.shape,p,s.shape,s.dtype,h,i.shape,c,d,u);return n.makeTensorInfo(m,s.dtype,f)}};var oy=n(61304);let ob={kernelName:h.Range,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,dtype:s,step:i}=n,o=(0,oy.b)(r,a,i,s);return t.makeTensorInfo([o.length],s,o)}},oN=(0,aa.A)(h.Reciprocal,e=>1/e),ox={kernelName:h.Reciprocal,backendName:"cpu",kernelFunc:oN},ok={kernelName:h.ResizeBilinear,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r;(0,r8.H)(a,"resizeBilinear");let u=h.util.computeStrides(a.shape),[l,p]=o,[c,d,m,f]=a.shape,g=n.data.get(a.dataId).values,y=new Float32Array(h.util.sizeFromShape([c,l,p,f])),b=[s&&l>1?d-1:d,s&&p>1?m-1:m],N=[s&&l>1?l-1:l,s&&p>1?p-1:p],x=0,k=b[0]/N[0],v=b[1]/N[1];for(let e=0;e<c;e++)for(let t=0;t<l;t++){let n;let r=Math.max(0,Math.floor(n=i?k*(t+.5)-.5:k*t)),a=n-r,s=Math.min(d-1,Math.ceil(n)),o=e*u[0]+r*u[1],l=e*u[0]+s*u[1];for(let e=0;e<p;e++){let t;let n=Math.max(0,Math.floor(t=i?v*(e+.5)-.5:v*e)),r=t-n,s=Math.min(m-1,Math.ceil(t)),p=o+n*u[2],h=l+n*u[2],c=o+s*u[2],d=l+s*u[2];for(let e=0;e<f;e++){let t=g[p+e],n=g[h+e],s=g[c+e],i=g[d+e],o=t+(s-t)*r,u=o+(n+(i-n)*r-o)*a;y[x++]=u}}}return n.makeTensorInfo([c,l,p,f],"float32",y)}},ov={kernelName:h.ResizeBilinearGrad,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r;(0,r8.H)([s,a],"resizeBilinearGrad");let o=h.util.computeStrides(a.shape),[u,l,p,c]=a.shape,[,d,m]=s.shape,f=new Float32Array(u*l*p*c),g=[i&&d>1?l-1:l,i&&m>1?p-1:p],y=[i&&d>1?d-1:d,i&&m>1?m-1:m],b=g[0]/y[0],N=g[1]/y[1],x=n.data.get(s.dataId).values,k=0;for(let e=0;e<u;e++){let t=e*o[0];for(let e=0;e<d;e++){let n=e*b,r=Math.floor(n),a=Math.min(Math.ceil(n),l-1),s=t+r*o[1],i=t+a*o[1],u=n-r,h=1-u;for(let e=0;e<m;e++){let t=e*N,n=Math.floor(t),r=Math.min(Math.ceil(t),p-1),a=t-n,l=1-a,d=s+n*o[2],m=s+r*o[2],g=i+n*o[2],y=i+r*o[2],b=h*l,v=h*a,w=u*l,S=u*a;for(let e=0;e<c;e++){let t=x[k++];f[d+e]+=t*b,f[m+e]+=t*v,f[g+e]+=t*w,f[y+e]+=t*S}}}}return n.makeTensorInfo([u,p,l,c],"float32",f)}},ow={kernelName:h.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r;(0,r8.H)(a,"resizeNearestNeighbor");let u=h.util.computeStrides(a.shape),[l,p]=o,[c,d,m,f]=a.shape,g=n.data.get(a.dataId).values,y=new Float32Array(c*l*p*f),b=[s&&l>1?d-1:d,s&&p>1?m-1:m],N=[s&&l>1?l-1:l,s&&p>1?p-1:p],x=b[0]/N[0],k=b[1]/N[1],v=0;for(let e=0;e<c;e++){let t=e*u[0];for(let e=0;e<l;e++){let n=i?x*(e+.5):x*e,r=Math.min(d-1,s?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));let a=t+r*u[1];for(let e=0;e<p;e++){let t=i?k*(e+.5):k*e,n=Math.min(m-1,s?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));let r=a+n*u[2];for(let e=0;e<f;e++){let t=g[r+e];y[v++]=t}}}}return n.makeTensorInfo([c,l,p,f],a.dtype,y)}},oS={kernelName:h.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r;(0,r8.H)([s,a],"resizeNearestNeighborGrad");let o=h.util.computeStrides(a.shape),u=h.util.computeStrides(s.shape),[l,p,c,d]=a.shape,[,m,f]=s.shape,g=new Float32Array(l*p*c*d),y=n.data.get(s.dataId).values,b=[i&&m>1?p-1:p,i&&f>1?c-1:c],N=[i&&m>1?m-1:m,i&&f>1?f-1:f],x=b[0]/N[0],k=b[1]/N[1],v=1/x,w=1/k,S=2*Math.ceil(v)+2,T=2*Math.ceil(w)+2;for(let e=0;e<l;e++){let t=e*o[0];for(let e=0;e<p;e++){let n=t+e*o[1],r=Math.floor(Math.floor(e*v)-S/2);for(let a=0;a<c;a++){let s=n+a*o[2],l=Math.floor(Math.floor(a*w)-T/2);for(let n=0;n<d;n++){let o=0;for(let s=0;s<S;s++){let h=s+r;if(h<0||h>=m)continue;let d=t+h*u[1],g=h*x;if(e===Math.min(p-1,i?Math.round(g):Math.floor(g)))for(let e=0;e<T;e++){let t=e+l;if(t<0||t>=f)continue;let r=d+t*u[2],s=t*k;a===Math.min(c-1,i?Math.round(s):Math.floor(s))&&(o+=y[r+n])}}g[s+n]=o}}}}return n.makeTensorInfo(a.shape,a.dtype,g)}},oT={kernelName:h.Reverse,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r;(0,r8.H)(a,"reverse");let i=a.shape.length,o=h.util.parseAxisParam(s,a.shape);if(0===i)return(0,ao.y)({inputs:{x:a},backend:n});let u=new h.TensorBuffer(a.shape,a.dtype),l=n.bufferSync(a);for(let e=0;e<u.size;e++){let t=u.indexToLoc(e),n=t.slice();o.forEach(e=>n[e]=a.shape[e]-1-n[e]),u.set(l.get(...n),...t)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}},oI={kernelName:h.RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:a,fillValue:s,center:i}=t,o=h.util.getTypedArrayFromDType(r.dtype,h.util.sizeFromShape(r.shape)),[u,l,p,c]=r.shape,[d,m]=h.backend_util.getImageCenter(i,l,p),f=Math.sin(a),g=Math.cos(a),y=n.data.get(r.dataId).values;for(let e=0;e<u;e++){let t=e*p*l*c;for(let e=0;e<l;e++){let n=p*c*e;for(let r=0;r<p;r++){let a=r*c;for(let i=0;i<c;i++){let h=[u,e,r,i],b=h[2],N=h[1],x=(b-d)*g-(N-m)*f,k=(b-d)*f+(N-m)*g;x=Math.round(x+d),k=Math.round(k+m);let v=s;"number"!=typeof s&&(v=3===i?255:s[i]),x>=0&&x<p&&k>=0&&k<l&&(v=y[t+p*c*k+x*c+i]),o[t+n+a+i]=v}}}}return{dataId:n.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},oA=(0,aa.A)(h.Round,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}),oD={kernelName:h.Round,backendName:"cpu",kernelFunc:oA};var oF=n(75857),oE=n(43972);let oC={kernelName:h.ScatterNd,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:s}=t,{shape:i}=r,{sliceRank:o,numUpdates:u,sliceSize:l,strides:p,outputSize:c}=h.backend_util.calculateShapes(s,a,i),d=n.bufferSync(a),m=n.bufferSync(s),f=(0,oE.N)(d,m,i,c,l,u,o,p,0,!0);return n.makeTensorInfo(i,f.dtype,f.values)}},oz={kernelName:h.SearchSorted,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:s}=t,{side:i}=r,o=function(e,t,n,r,a,s){let i=h.util.getArrayFromDType("int32",n*a);for(let o=0;o<n;++o){let n=e.slice(o*r,(o+1)*r),u=o*a;for(let e=0;e<a;++e)i[u+e]="left"===s?/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=0,r=e.length,a=0;for(;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}(n,t[e+u]):function(e,t){let n=0,r=e.length,a=0;for(;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}(n,t[e+u])}return i}(n.data.get(a.dataId).values,n.data.get(s.dataId).values,a.shape[0],a.shape[1],s.shape[1],i);return n.makeTensorInfo(s.shape,"int32",o)}},oM={kernelName:h.Select,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t;(0,r8.H)([r,a,s],"select");let i=r.shape.length,o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,p=(0,h.upcastType)(a.dtype,s.dtype),c=h.util.makeZerosTypedArray(h.util.sizeFromShape(a.shape),p),d=0,m=0===i||i>1||1===a.shape.length?1:h.util.sizeFromShape(a.shape.slice(1));for(let e=0;e<o.length;e++)for(let t=0;t<m;t++)1===o[e]?c[d++]=u[e]:c[d++]=l[e];return n.makeTensorInfo(a.shape,p,c)}},o_=h.backend_util.SELU_SCALEALPHA,oO=h.backend_util.SELU_SCALE,oL=(0,aa.A)(h.Selu,e=>e>=0?oO*e:o_*(Math.exp(e)-1)),o$={kernelName:h.Selu,backendName:"cpu",kernelFunc:oL},oR=(0,aa.A)(h.Sign,e=>e<0?-1:e>0?1:0),oP={kernelName:h.Sign,backendName:"cpu",kernelFunc:oR},oB=(0,aa.A)(h.Sin,e=>Math.sin(e)),oV={kernelName:h.Sin,backendName:"cpu",kernelFunc:oB},oW=(0,aa.A)(h.Sinh,e=>Math.sinh(e)),oH={kernelName:h.Sinh,backendName:"cpu",kernelFunc:oW},oj=Math.log(11920928955078125e-23)+2,oU=(0,aa.A)(h.Softplus,e=>{let t=Math.exp(e);return e<oj?t:e>-oj?e:Math.log(1+t)}),oq={kernelName:h.Softplus,backendName:"cpu",kernelFunc:oU},oG={kernelName:h.SpaceToBatchND,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,paddings:i}=r;(0,r8.H)([a],"spaceToBatchND");let o=h.util.sizeFromShape(s),u=[[0,0]];u.push(...i);for(let e=1+s.length;e<a.shape.length;++e)u.push([0,0]);let l=oi.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),p=h.backend_util.getReshaped(l.shape,s,o,!1),c=h.backend_util.getPermuted(p.length,s.length,!1),d=h.backend_util.getReshapedPermuted(l.shape,s,o,!1),m=ak({inputs:{x:l},backend:n,attrs:{shape:p}}),f=(0,az.p)({inputs:{x:m},backend:n,attrs:{perm:c}}),g=ak({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(f),g}};var oQ=n(79292);let oX={kernelName:h.SparseFillEmptyRows,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:i}=t;if(1!==s.shape.length)throw Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(2!==r.shape.length)throw Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(1!==a.shape.length)throw Error(`Values must be a vector, saw:
        ${a.shape}`);if(0!==i.shape.length)throw Error(`Default value must be a scalar, saw:
        ${i.shape}`);let o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,p=n.data.get(i.dataId).values[0],[h,c,d,m,f]=(0,oQ.c)(o,r.shape,r.dtype,u,a.dtype,l,p);return[n.makeTensorInfo(c,r.dtype,h),n.makeTensorInfo([c[0]],a.dtype,d),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(e=>Number(e)))),n.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}};var oK=n(40349);let oZ={kernelName:h.SparseReshape,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(1!==a.shape.length)throw Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(1!==s.shape.length)throw Error(`Target shape should be a vector but received shape ${s.shape}`);let i=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,u=Array.from(n.data.get(s.dataId).values),[l,p,h]=(0,oK.U)(o,r.shape,r.dtype,i,u);return[n.makeTensorInfo(p,r.dtype,l),n.makeTensorInfo([h.length],s.dtype,new Int32Array(h))]}};var oJ=n(40292);let oY={kernelName:h.SparseSegmentMean,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw Error(`Indices should be a vector but received shape
          ${a.shape}`);if(1!==s.shape.length)throw Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(a.shape[0]!==s.shape[0])throw Error("segmentIds and indices should have same size.");let i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,[l,p]=(0,oJ.V)(i,r.shape,r.dtype,o,u,!0);return n.makeTensorInfo(p,r.dtype,l)}},o0={kernelName:h.SparseSegmentSum,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw Error(`Indices should be a vector but received shape
         ${a.shape}`);if(1!==s.shape.length)throw Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(a.shape[0]!==s.shape[0])throw Error("segmentIds and indices should have same size.");let i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,[l,p]=(0,oJ.V)(i,r.shape,r.dtype,o,u);return n.makeTensorInfo(p,r.dtype,l)}},o1={kernelName:h.SparseToDense,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{sparseIndices:s,sparseValues:i,defaultValue:o}=n,{outputShape:u}=a,{sliceRank:l,numUpdates:p,sliceSize:c,strides:d,outputSize:m}=h.backend_util.calculateShapes(i,s,u),f=r.bufferSync(s);switch(i.dtype){case"bool":{let e=r.bufferSync(i),n=!!r.data.get(o.dataId).values[0];t=(0,oE.N)(f,e,u,m,c,p,l,d,n,!1);break}case"float32":{let e=r.bufferSync(i),n=r.data.get(o.dataId).values[0];t=(0,oE.N)(f,e,u,m,c,p,l,d,n,!1);break}case"int32":{let e=r.bufferSync(i),n=r.data.get(o.dataId).values[0];t=(0,oE.N)(f,e,u,m,c,p,l,d,n,!1);break}case"string":{let e=r.bufferSync(i),n=h.util.decodeString(r.data.get(o.dataId).values[0]);t=(0,oE.N)(f,e,u,m,c,p,l,d,n,!1);break}default:throw Error(`Unsupported type ${i.dtype}`)}return r.makeTensorInfo(u,t.dtype,t.values)}},o2={kernelName:h.SplitV,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:i}=r,o=h.util.parseAxisParam(i,a.shape)[0],u=h.backend_util.prepareSplitSize(a,s,o),l=Array(a.shape.length).fill(0),p=a.shape.slice();return u.map(e=>{let t=[...p];t[o]=e;let r=(0,a3.tP)({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[o]+=e,r})}};var o3=n(7824);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let o4={kernelName:h.Square,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:n}=e;(0,r8.H)(n,"square");let r=t.data.get(n.dataId).values,a=new Float32Array(r.length);for(let e=0;e<r.length;++e){let t=r[e];a[e]=t*t}return{dataId:t.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};var o9=n(75649),o6=n(29901);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let o5=(0,aa.A)(h.Step,(e,t)=>isNaN(e)?NaN:e>0?1:t.alpha),o7={kernelName:h.Step,backendName:"cpu",kernelFunc:o5};var o8=n(23582);let ue={kernelName:h.StridedSlice,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:s}=n,{begin:i,end:o,strides:u,beginMask:l,endMask:p,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:m}=a;(0,r8.H)(s,"stridedSlice");let{finalShapeSparse:f,finalShape:g,isIdentity:y,sliceDim0:b,isSimpleSlice:N,begin:x,end:k,strides:v}=h.slice_util.sliceInfo(s.shape,i,o,u,l,p,c,d,m);if(y)t=ak({inputs:{x:s},backend:r,attrs:{shape:g}});else if(b||N){h.util.assert(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);let e=h.slice_util.computeOutShape(x,k,v),n=(0,a3.tP)({inputs:{x:s},backend:r,attrs:{begin:x,size:e}});t=ak({inputs:{x:n},backend:r,attrs:{shape:g}}),r.disposeIntermediateTensorInfo(n)}else{let e=r.bufferSync(s),n=(0,o8.t)(f,e,v,x);t=r.makeTensorInfo(g,n.dtype,n.values)}return t}};var ut=n(16468);let un={kernelName:h.StringNGrams,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:i,rightPad:o,padWidth:u,preserveShortSequences:l}=r,{data:p,dataSplits:h}=t,c=n.data.get(p.dataId).values,d=n.data.get(h.dataId).values,[m,f]=(0,ut.A)(c,d,a,s,i,o,u,l);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(h.shape,"int32",f)]}};var ur=n(75297);let ua={kernelName:h.StringSplit,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:i}=t;if("string"!==s.dtype)throw Error("Input must be of datatype string");if(1!==s.shape.length)throw Error(`Input must be a vector, got shape: ${s.shape}`);if(0!==i.shape.length)throw Error(`Delimiter must be a scalar, got shape: ${i.shape}`);let o=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values[0],[l,p,h]=(0,ur.Q)(o,u,a),c=p.length;return[n.makeTensorInfo([c,2],"int32",l),n.makeTensorInfo([c],"string",p),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var us=n(57347);let ui={kernelName:h.StringToHashBucketFast,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw Error("Input must be of datatype string");if(a<=0)throw Error("Number of buckets must be at least 1");let i=n.data.get(s.dataId).values,o=(0,us.h)(i,a);return n.makeTensorInfo(s.shape,"int32",o)}},uo=(0,aa.A)(h.Tan,e=>Math.tan(e)),uu={kernelName:h.Tan,backendName:"cpu",kernelFunc:uo},ul=(0,aa.A)(h.Tanh,e=>Math.tanh(e)),up={kernelName:h.Tanh,backendName:"cpu",kernelFunc:ul},uh={kernelName:h.TensorScatterUpdate,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{tensor:r,indices:a,updates:s}=t,{sliceRank:i,numUpdates:o,sliceSize:u,strides:l,outputSize:p}=h.backend_util.calculateShapes(s,a,r.shape),c=n.bufferSync(a),d=n.bufferSync(s),m=n.bufferSync(r),f=(0,oE.N)(c,d,r.shape,p,u,o,i,l,m,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};var uc=n(13387);let ud={kernelName:h.Tile,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:s}=r;(0,r8.H)(a,"tile");let i=(0,uc.R)(n.bufferSync(a),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}};var um=n(21399);let uf={kernelName:h.TopK,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:s,sorted:i}=r;(0,r8.H)(a,"topk");let o=n.data.get(a.dataId).values,[u,l]=(0,um.W)(o,a.shape,a.dtype,s,i);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},ug={kernelName:h.Transform,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:s}=t,{interpolation:i,fillMode:o,fillValue:u,outputShape:l}=n,[p,c,d,m]=a.shape,[f,g]=null!=l?l:[c,d],y=[p,f,g,m],b=h.util.computeStrides(a.shape),N=b[0],x=b[1],k=b[2],v=h.util.computeStrides(y),w=v[0],S=v[1],T=v[2],I=h.util.getTypedArrayFromDType(a.dtype,h.util.sizeFromShape(y));I.fill(u);let A=r.data.get(a.dataId).values,D=r.data.get(s.dataId).values;for(let e=0;e<p;++e){let t=1===s.shape[0]?D:D.subarray(8*e,8*e+8);for(let n=0;n<f;++n)for(let r=0;r<g;++r)for(let a=0;a<m;++a){let s;let l=t[6]*r+t[7]*n+1;if(0===l)continue;let p=(t[0]*r+t[1]*n+t[2])/l,h=(t[3]*r+t[4]*n+t[5])/l,m=uy(p,d,o),f=uy(h,c,o);switch(i){case"nearest":s=ub(A,c,d,N,x,k,e,Math.round(f),Math.round(m),a,u);break;case"bilinear":s=function(e,t,n,r,a,s,i,o,u,l,p){let h=Math.floor(o),c=Math.floor(u),d=h+1,m=c+1,f=(m-u)*ub(e,t,n,r,a,s,i,h,c,l,p)+(u-c)*ub(e,t,n,r,a,s,i,h,m,l,p),g=(m-u)*ub(e,t,n,r,a,s,i,d,c,l,p)+(u-c)*ub(e,t,n,r,a,s,i,d,m,l,p);return(d-o)*f+(o-h)*g}(A,c,d,N,x,k,e,f,m,a,u);break;default:throw Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}I[e*w+n*S+r*T+a]=s}return r.makeTensorInfo(y,a.dtype,I)}return{dataId:r.write(I,y,a.dtype),shape:a.shape,dtype:a.dtype}}};function uy(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0){if(t<=1)n=0;else{let e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}}else if(n>t-1){if(t<=1)n=0;else{let e=2*t;(n-=e*Math.trunc(n/e))>=t&&(n=e-n-1)}}return h.util.clamp(0,n,t-1)}(e,t);case"wrap":let r;return(r=e)<0?t<=1?r=0:r+=t*(Math.trunc(-r/(t-1))+1):r>t-1&&(t<=1?r=0:r-=t*Math.trunc(r/(t-1))),h.util.clamp(0,r,t-1);case"nearest":return h.util.clamp(0,e,t-1);default:return e}}function ub(e,t,n,r,a,s,i,o,u,l,p){return 0<=o&&o<t&&0<=u&&u<n?e[i*r+o*a+u*s+l]:p}var uN=n(5433);let ux={kernelName:h.Unique,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;(0,r8.H)(s,"unique");let i=r.data.get(s.dataId).values,{outputValues:o,outputShape:u,indices:l}=(0,uN.S)(i,a,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,o),r.makeTensorInfo([l.length],"int32",l)]}},uk={kernelName:h.Unpack,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:s}=r;s<0&&(s+=a.shape.length);let i=a.shape.length,o=a.shape[s],u=Array(i-1),l=0;for(let e=0;e<i;e++)e!==s&&(u[l++]=a.shape[e]);let p=Array(i).fill(0),h=a.shape.slice();h[s]=1;let c=Array(o);for(let e=0;e<c.length;e++){p[s]=e;let t=(0,a3.tP)({inputs:{x:a},backend:n,attrs:{begin:p,size:h}});c[e]=ak({inputs:{x:t},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(t)}return c}},uv={kernelName:h.UnsortedSegmentSum,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:s}=t,{numSegments:i}=r;(0,r8.H)(a,"unsortedSegmentSum");let o=a.shape.length,u=s.shape.length,l=[],p=[],c=o-u,d=s;for(let e=0;e<c;++e){let t=sJ({inputs:{input:d},backend:n,attrs:{dim:e+1}});d=t,p.push(t)}for(let e=0;e<i;++e){let t=h.util.createScalarValue(e,"int32"),r=n.makeTensorInfo([],"int32",t),s=(0,sW.Dg)({inputs:{a:r,b:d},backend:n}),i=(0,a8.pj)({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),o=(0,sL.Jp)({inputs:{a:i,b:a},backend:n}),u=sR({inputs:{x:o},backend:n,attrs:{axis:0,keepDims:!1}});l.push(u),p.push(r),p.push(s),p.push(i),p.push(o),p.push(u)}let m=oa({inputs:l,backend:n,attrs:{axis:0}});return p.forEach(e=>n.disposeIntermediateTensorInfo(e)),m}};for(let e of[aT,aI.fC,aD,aE,ax.j4,aC,aM,a_,aO,aL,aR,aB,aW,aq,aQ,aJ,aY,a0,a1,aS,a2,a4,a6,a5.T0,a7,a8.Mq,se.y2,sn,sr.z,sa,sp,sc,sd,sm,sf,sg,sy,sN,sk,sv,sw,sS,sT,sI,sD,sF,sE,sC,sz,sM,s_,sO,sB,ai,sV,sW.Kx,sK,sZ.SX,sY,s0.Vu,s6,s7,s8,ie.Ao,it.EE,ir,ia,ii,iu,il.Ce,ip.V,ao.I,ih,so,id,ig,ib,al,iN.zh,ix.m3,iv,iw.xM,iT,iD,iE,iM,i_,iO,iP,iB.eJ,iV,iW,iH,ij,iU,iq,iG,iQ.u0,iX,iJ,i1,sL.f$,i2.AF,i4,i6,i7,i8.nP,oe,or,os,oi,ol,ad,op.Iz,oc,om,og,ob,su.O,s3,ox,af,ay,av,ok,ov,ow,oS,oT,oI,oD,oF.FY,oC,oz,oM,o$,ab.BP,oP,oV,oH,a3.C6,i0,oq,oG,oX,oZ,oY,o0,o1,o2,o3.cz,o4,o9.MS,o6.j,o7,ue,un,ua,ui,s4.GR,sP,uu,up,uh,ud,uf,ug,az.b,ux,uk,uv,on])(0,h.registerKernel)(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var uw=n(53844);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let uS={"tfjs-core":h.version_core,"tfjs-backend-cpu":ar,"tfjs-backend-webgl":uw.ic,"tfjs-data":r7,"tfjs-layers":rn.i,"tfjs-converter":rr.gJ,tfjs:"4.20.0"}}}]);
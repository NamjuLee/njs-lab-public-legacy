"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74555,87496,42585],{87496:function(e,r,t){t.r(r),t.d(r,{GLShaderCommon:function(){return a}});class a{static getShaderProgram(e,r,t){let o=!(arguments.length>3)||void 0===arguments[3]||arguments[3],n=a.createShader(e,e.VERTEX_SHADER,r),i=a.createShader(e,e.FRAGMENT_SHADER,t);return n&&i&&a.createProgram(e,n,i,o)||(console.error("vertex fragment shader error"),null)}static getShader(e,r,t){let a=e.createShader(r);return null===a?null:(e.shaderSource(a,t),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))?a:(console.log("An error occurred compiling the shaders:"+e.getShaderInfoLog(a)),e.deleteShader(a),null)}static createProgram(e,r,t){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],o=e.createProgram();return null===o?null:(e.attachShader(o,r),e.attachShader(o,t),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS))?a&&(e.validateProgram(o),!e.getProgramParameter(o,e.VALIDATE_STATUS))?(console.error("Failed to validate program",e.getProgramInfoLog(o)),e.deleteProgram(o),e.deleteShader(t),e.deleteShader(r),null):(e.deleteShader(t),e.deleteShader(r),o):(console.log("Failed to link program: "+e.getProgramInfoLog(o)),e.deleteProgram(o),e.deleteShader(t),e.deleteShader(r),null)}static createShader(e,r,t){let a=e.createShader(r);return null===a?null:(e.shaderSource(a,t),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))?a:(console.log(e.getShaderInfoLog(a)),e.deleteShader(a),null)}static createShaderFromPath(e,r,t){let o=e.createShader(r);return null===o?null:(e.shaderSource(o,a.getSourceSynch(t)),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS))?o:(console.log(e.getShaderInfoLog(o)),e.deleteShader(o),null)}static getSourceSynch(e){let r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),200===r.status?r.responseText:null}static loadImage(e,r){let t=new Image;t.onload=function(){r(null,t)},t.src=e}}},42585:function(e,r,t){var a,o;t.r(r),t.d(r,{ATTR:function(){return a},AttribLocations:function(){return n},UniformLocations:function(){return i}}),(o=a||(a={})).ATTR_POSITION_NAME="a_position",o[o.ATTR_POSITION_LOC=0]="ATTR_POSITION_LOC",o.ATTR_NORMAL_NAME="a_norm",o[o.ATTR_NORMAL_LOC=1]="ATTR_NORMAL_LOC",o.ATTR_UV_NAME="a_uv",o[o.ATTR_UV_LOC=2]="ATTR_UV_LOC",o[o.ATTR_COLOR_LOC=4]="ATTR_COLOR_LOC",o.ATTR_COLOR_NAME="a_color";class n{constructor(e,r){this.position=e.getAttribLocation(r,"a_norm"),this.normal=e.getAttribLocation(r,"a_norm"),this.uv=e.getAttribLocation(r,"a_uv")}}class i{constructor(e,r){this.perspective=e.getUniformLocation(r,"uPMatrix"),this.modalMatrix=e.getUniformLocation(r,"uMVMatrix"),this.cameraMatrix=e.getUniformLocation(r,"uCameraMatrix"),this.mainTexture=e.getUniformLocation(r,"uMainTex")}}},74555:function(e,r,t){t.r(r),t.d(r,{Shader:function(){return n}});var a=t(87496),o=t(42585);class n{activate(){return this.gl.useProgram(this.program),this}deactivate(){return this.gl.useProgram(null),this}dispose(){this.gl.getParameter(this.gl.CURRENT_PROGRAM)===this.program&&this.gl.useProgram(null),this.gl.deleteProgram(this.program)}setPerspective(e){return this.gl.uniformMatrix4fv(this.uniformLoc.perspective,!1,e),this}setModalMatrix(e){return this.gl.uniformMatrix4fv(this.uniformLoc.modalMatrix,!1,e),this}setCameraMatrix(e){return this.gl.uniformMatrix4fv(this.uniformLoc.cameraMatrix,!1,e),this}preRender(){}renderModal(e){return this.gl.bindVertexArray(e.mesh.vao),e.mesh.indexCount?this.gl.drawElements(e.mesh.drawMode,e.mesh.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(e.mesh.drawMode,0,e.mesh.vertexCount),this.gl.bindVertexArray(null),this}constructor(e,r,t){this.program=a.GLShaderCommon.getShaderProgram(e,r,t,!0),null!=this.program&&(this.gl=e,e.useProgram(this.program),this.attribLoc=new o.AttribLocations(e,this.program),this.uniformLoc=new o.UniformLocations(e,this.program))}}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33045,3955],{75410:function(){},48628:function(){},31601:function(){},67792:function(){},34977:function(){},75042:function(){},3955:function(e,s,i){"use strict";i.r(s),i.d(s,{DefinitionIndeCanvasCore:function(){return n}});var t=i(79309);class n{InitIndeCanvas(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:650,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;this.scene.implementation.app.needUI?this.indeCanvas=new t.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,50,50,e,s,!0):this.indeCanvas=new t.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,1,-25,e,s,!0),this.indeCanvas.title="TF Env",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=e=>this.RenderIndependentCanvas(e)}get width(){return this.indeCanvas.canvas.width}get height(){return this.indeCanvas.canvas.height}Init(e){}RenderIndependentCanvas(e){}MouseMove(e,s){}MouseMovePre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseMove(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDown(e,s){}MouseDownPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseDown(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseUp(e,s){}MouseUpPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseUp(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDrag(e,s){}MouseDragPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseDrag(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseLeftClick(e,s){}MouseLeftClickPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseLeftClick(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseMiddleClick(e,s){}MouseMiddleClickPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseMiddleClick(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseRightClick(e,s){}MouseRightClickPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseRightClick(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDoubleClick(e,s){}MouseDoubleClickPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseDoubleClick(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseWheel(e,s,i){}MouseWheelPre(e,s,i){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseWheel(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,i)}constructor(e,s=650,i=350){this.mOffX=-12,this.mOffY=-12,this.scene=e,this.scene.definitions.push(this),this.InitIndeCanvas(s,i)}}},30976:function(e,s,i){"use strict";i.r(s),i.d(s,{TFModel03SmartDrawing:function(){return a}});var t=i(88405),n=i(3955);class a extends n.DefinitionIndeCanvasCore{async Init(){let e=new h;await e.Init().then(()=>{this.tfModel=new o("model1",e.inputsTensor,e.labelsTensor),this.tfModel.CreateModel01(),this.tfModel=new o("model2",e.inputsTensor,e.labelsTensor),this.tfModel.CreateModel02()})}RenderIndependentCanvas(e){t.tidy(()=>{})}constructor(e,s=650,i=350){super(e,s,i),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.inputs=[],this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}}class h{async Init(){let e=await this.OpenCSV();if(e){this.raw=this.processData(e),t.util.shuffle(this.raw);let s=[],i=[];for(let e=0;e<this.raw.length;++e){let t=[];for(let s=0;s<this.raw[e].length-1;++s)t.push(this.raw[e][s]);s.push(t),i.push(this.raw[e][this.raw[e].length-1])}console.log(s),console.log(i);let n=t.max(i).dataSync(),a=[];for(let e=0;e<i.length;++e){let s=[];for(let t=0;t<=n[0];++t)t===i[e]?s.push(1):s.push(0);a.push(s)}console.log(a),this.inputsTensor=t.tensor2d(s),this.labelsTensor=t.tensor2d(a),this.inputsTensor.print(),this.labelsTensor.print()}}processData(e){let s=e.split(/\r\n|\n/),i=s[0].split(","),t=[];for(let e=1;e<s.length;e++){let n=s[e].split(",");if(n.length===i.length){let e=[];for(let s=0;s<i.length;s++){let i=+n[s];isNaN(i)?e.push(n[s]):e.push(i)}t.push(e)}}return t}async OpenCSV(){return fetch("njslabSandboxStatic/ML/SmartDrawing/".concat("smartDrawingTrainData.csv")).then(e=>(console.log(e),e.text())).catch(e=>{console.log(e)})}constructor(){}}class o{CreateModel01(){this.model=t.sequential();let e=t.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),s=t.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(e),this.model.add(s),this.Compile()}CreateModel02(){this.model=t.sequential();let e=t.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),s=t.layers.dense({units:15,activation:"sigmoid"}),i=t.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(e),this.model.add(s),this.model.add(i),this.Compile()}Compile(){this.model.compile({optimizer:t.train.adam(),loss:t.losses.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}async trainLoop(){this.t0=performance.now(),await this.model.save("downloads://my-model"),this.train().then(e=>{this.t1=performance.now(),console.log("".concat(this.name,": ").concat(e.history.loss[0],", ").concat(this.t1-this.t0," ")),setTimeout(()=>this.trainLoop(),1)})}async train(){}constructor(e,s,i){this.name=e,this.inputsTensor=s,this.labelsTensor=i}}}}]);
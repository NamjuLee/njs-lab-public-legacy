"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72151],{53568:function(t,e,l){l.d(e,{Z:function(){return m}});var n,i=l(86641),r=l(94605),a=l(689),s=l(61764),o=l(65223),h=l(89312),u=l(1275),f=l(64186),p=l(27532),c=l(6470);let d=n=class extends a.wq{static createEmptyBand(t,e){return new(n.getPixelArrayConstructor(t))(e)}static combineBandMasks(t){if(t.length<2)return t[0];let e=t[0].length,l=new Uint8Array(e).fill(255);for(let n=0;n<t.length;n++){let i=t[n];for(let t=0;t<e;t++)i[t]||(l[t]=0)}return l}static getPixelArrayConstructor(t){let e;switch(t){case"u1":case"u2":case"u4":case"u8":e=Uint8Array;break;case"u16":e=Uint16Array;break;case"u32":e=Uint32Array;break;case"s8":e=Int8Array;break;case"s16":e=Int16Array;break;case"s32":e=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":e=Float32Array;break;case"f64":e=Float64Array}return e}constructor(t){super(t),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.premultiplyAlpha=!1,this.statistics=null,this.depthCount=1}castPixelType(t){if(!t)return"f32";let e=t.toLowerCase();return["u1","u2","u4"].includes(e)?e="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(e)||(e="f32"),e}getPlaneCount(){return this.pixels?.length}addData(t){if(!t.pixels||t.pixels.length!==this.width*this.height)throw new r.Z("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(t.pixels),this.statistics.push(t.statistics??new p.c)}getAsRGBA(){let t=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(t);break;default:this._fillFrom8Bit(t)}return new Uint8ClampedArray(t)}getAsRGBAFloat(){let t=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(t),t}updateStatistics(){if(!this.pixels)return;this.statistics=this.pixels.map(t=>(function(t,e){let l=1/0,n=-1/0,i=t.length,r,a=0;if(null!=e)for(r=0;r<i;r++)e[r]&&(l=(a=t[r])<l?a:l,n=a>n?a:n);else for(r=0;r<i;r++)l=(a=t[r])<l?a:l,n=a>n?a:n;return new p.c(l,n)})(t,this.mask));let t=this.mask,e=0;if(null!=t)for(let l=0;l<t.length;l++)t[l]&&e++;else e=this.width*this.height;this.validPixelCount=e}clamp(t){let e,l,i;if(!t||"f64"===t||"f32"===t||!this.pixels)return;let[r,a]=(0,c.rL)(t),s=this.pixels,o=this.width*this.height,h=s.length,u=[];for(let f=0;f<h;f++){i=n.createEmptyBand(t,o),e=s[f];for(let t=0;t<o;t++)l=e[t],i[t]=l>a?a:l<r?r:l;u.push(i)}this.pixels=u,this.pixelType=t}extractBands(t){let{pixels:e,statistics:l}=this;if(null==t||0===t.length||!e||0===e.length)return this;let i=e.length,r=t.some(t=>t>=e.length),a=i===t.length&&!t.some((t,e)=>t!==e);if(r||a)return this;let s=this.bandMasks?.length===i?t.map(t=>this.bandMasks[t]):void 0,{mask:o,validPixelCount:h}=this,{width:u,height:f}=this;return s?.length&&(h=(o=n.combineBandMasks(s)).filter(t=>!!t).length),new n({pixelType:this.pixelType,width:u,height:f,mask:o,bandMasks:s,validPixelCount:h,maskIsAlpha:this.maskIsAlpha,pixels:t.map(t=>e[t]),statistics:l&&t.map(t=>l[t])})}clone(){let t;let e=new n({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});null!=this.mask&&(e.mask=new Uint8Array(this.mask)),this.bandMasks&&(e.bandMasks=this.bandMasks.map(t=>new Uint8Array(t)));let l=n.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];let n=!!this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=n?this.pixels[t].slice(0,this.pixels[t].length):new l(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=(0,s.d9)(this.statistics[t]);return e.premultiplyAlpha=this.premultiplyAlpha,e}_fillFrom8Bit(t){let e,l,n,i;let{mask:r,maskIsAlpha:a,premultiplyAlpha:s,pixels:h}=this;if(!t||!h?.length)return void o.Z.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");e=l=n=h[0],h.length>=3?(l=h[1],n=h[2]):2===h.length&&(l=h[1]);let u=new Uint32Array(t),f=this.width*this.height;if(e.length===f){if(null!=r&&r.length===f){if(a)for(i=0;i<f;i++){let t=r[i];if(t){let r=t/255;u[i]=s?t<<24|n[i]*r<<16|l[i]*r<<8|e[i]*r:t<<24|n[i]<<16|l[i]<<8|e[i]}}else for(i=0;i<f;i++)r[i]&&(u[i]=-16777216|n[i]<<16|l[i]<<8|e[i])}else for(i=0;i<f;i++)u[i]=-16777216|n[i]<<16|l[i]<<8|e[i]}else o.Z.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(t){let e,l,n,i,r;let{pixels:a,mask:s,statistics:h}=this;if(!t||!a?.length)return void o.Z.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let u=this.pixelType,f=1,p=0,c=1;if(h&&h.length>0){for(let t of h)null!=t.minValue&&(p=Math.min(p,t.minValue)),null!=t.maxValue&&null!=t.minValue&&(c=Math.max(c,t.maxValue-t.minValue));f=255/c}else{let t=255;"s8"===u?(p=-128,t=127):"u16"===u?t=65535:"s16"===u?(p=-32768,t=32767):"u32"===u?t=4294967295:"s32"===u?(p=-2147483648,t=2147483647):"f32"===u?(p=-34e38,t=34e38):"f64"===u&&(p=-Number.MAX_VALUE,t=Number.MAX_VALUE),f=255/(t-p)}let d=new Uint32Array(t),m=this.width*this.height;if((e=l=n=a[0]).length!==m)return o.Z.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(a.length>=2){if(l=a[1],a.length>=3&&(n=a[2]),null!=s&&s.length===m)for(i=0;i<m;i++)s[i]&&(d[i]=-16777216|(n[i]-p)*f<<16|(l[i]-p)*f<<8|(e[i]-p)*f);else for(i=0;i<m;i++)d[i]=-16777216|(n[i]-p)*f<<16|(l[i]-p)*f<<8|(e[i]-p)*f}else if(null!=s&&s.length===m)for(i=0;i<m;i++)r=(e[i]-p)*f,s[i]&&(d[i]=-16777216|r<<16|r<<8|r);else for(i=0;i<m;i++)r=(e[i]-p)*f,d[i]=-16777216|r<<16|r<<8|r}_fillFrom32Bit(t){let e,l,n,i;let{pixels:r,mask:a}=this;if(!t||!r?.length)return o.Z.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");e=l=n=r[0],r.length>=3?(l=r[1],n=r[2]):2===r.length&&(l=r[1]);let s=this.width*this.height;if(e.length!==s)return o.Z.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let h=0;if(null!=a&&a.length===s)for(i=0;i<s;i++)t[h++]=e[i],t[h++]=l[i],t[h++]=n[i],t[h++]=1&a[i];else for(i=0;i<s;i++)t[h++]=e[i],t[h++]=l[i],t[h++]=n[i],t[h++]=1}};(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"width",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"height",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"pixelType",void 0),(0,i._)([(0,u.p)("pixelType")],d.prototype,"castPixelType",null),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"validPixelCount",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"mask",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"maskIsAlpha",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"pixels",void 0),(0,i._)([(0,h.Cb)()],d.prototype,"premultiplyAlpha",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"statistics",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"depthCount",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"noDataValues",void 0),(0,i._)([(0,h.Cb)({json:{write:!0}})],d.prototype,"bandMasks",void 0);let m=d=n=(0,i._)([(0,f.j)("esri.layers.support.PixelBlock")],d)},27532:function(t,e,l){l.d(e,{c:function(){return n}});class n{constructor(t=null,e=null,l=null){this.minValue=t,this.maxValue=e,this.noDataValue=l}}},6470:function(t,e,l){l.d(e,{Ao:function(){return s},DV:function(){return a},JQ:function(){return r},rL:function(){return i}});let n={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function i(t){return n[t]??[-34028234663852886e22,34028234663852886e22]}function r(t,e){return null==t||null==e?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function a(t){return(t?.startsWith("s")||t?.startsWith("u"))??!1}function s(t,e,l){if(t.depthCount&&t.depthCount>1)return;let{pixels:n,statistics:r,pixelType:a}=t,s=n[0].length,o=t.bandMasks??[],h=t.mask??new Uint8Array(s).fill(255),u="f32"===a||"f64"===a,f=i(a),p=!1;for(let t=0;t<n.length;t++){let i="number"==typeof e?e:e[t];if(null==i)continue;let s=r?.[t]?.minValue??f[0],c=r?.[t]?.maxValue??f[1];if(s>i+Number.EPSILON||c<i-Number.EPSILON)continue;let d=o[t]||h.slice(),m=n[t],g=l?.customFloatTolerance;if(u&&0!==g){let t=g;t||(t=Math.abs(i)>=9999999e31?2e-7*Math.abs(i):"f32"===a?11920928955078125e-23:Number.EPSILON);for(let e=0;e<m.length;e++)d[e]&&Math.abs(m[e]-i)<t&&(m[e]=0,d[e]=0,h[e]=0,p=!0)}else for(let t=0;t<m.length;t++)d[t]&&m[t]===i&&(m[t]=0,d[t]=0,h[t]=0,p=!0);o[t]=d}p&&(t.bandMasks=t.bandMasks||t.pixels.length>1?o:null,t.mask=h),p&&"updateStatistics"in t&&t.updateStatistics()}},92477:function(t,e,l){l.d(e,{$f:function(){return h},CD:function(){return a},DX:function(){return r},Gd:function(){return f},Kh:function(){return v},Pz:function(){return p},Qh:function(){return D},SJ:function(){return c},Uk:function(){return L},Uu:function(){return F},Vl:function(){return V},XV:function(){return d},a2:function(){return x},nA:function(){return b},nk:function(){return u},oB:function(){return A},pW:function(){return T},sS:function(){return M},us:function(){return P},wV:function(){return m},zp:function(){return g}});var n,i,r,a,s=l(53568),o=l(6470);(n=r||(r={}))[n.matchAny=0]="matchAny",n[n.matchAll=1]="matchAll",(i=a||(a={}))[i.bestMatch=0]="bestMatch",i[i.fail=1]="fail";let h=6;function u(t){return null!=t&&"esri.layers.support.PixelBlock"===t.declaredClass&&t.pixels&&t.pixels.length>0}function f(t){if(!t?.length||t.some(t=>!u(t)))return null;if(1===t.length)return t[0]?.clone()??null;let{width:e,height:l,pixelType:n}=t[0];if(t.some(t=>t.width!==e||t.height!==l))return null;let i=t.map(({mask:t})=>t).filter(t=>null!=t),r=null;i.length&&((r=new Uint8Array(e*l)).set(i[0]),i.length>1&&k(i.slice(1),r));let a=[];t.forEach(({pixels:t})=>a.push(...t));let o=t.map(({statistics:t})=>t).filter(t=>t?.length),h=[];return o.forEach(t=>h.push(...t)),new s.Z({pixelType:n,width:e,height:l,mask:r,pixels:a,statistics:h.length?h:null})}function p(t){if(!t)return;let e=t.colormap;if(!e||0===e.length)return;let l=e.sort((t,e)=>t[0]-e[0]),n=0;l[0][0]<0&&(n=l[0][0]);let i=Math.max(256,l[l.length-1][0]-n+1),r=new Uint8Array(4*i),a=[],s,o=0,h=0,u=5===l[0].length;if(i>65536)return l.forEach(t=>{a[t[0]-n]=u?t.slice(1):t.slice(1).concat([255])}),{indexed2DColormap:a,offset:n,alphaSpecified:u};if(t.fillUnspecified)for(o=(s=l[h])[0]-n;o<i;o++)r[4*o]=s[1],r[4*o+1]=s[2],r[4*o+2]=s[3],r[4*o+3]=u?s[4]:255,o===s[0]-n&&(s=h===l.length-1?s:l[++h]);else for(o=0;o<l.length;o++)r[h=4*((s=l[o])[0]-n)]=s[1],r[h+1]=s[2],r[h+2]=s[3],r[h+3]=u?s[4]:255;return{indexedColormap:r,offset:n,alphaSpecified:u}}function c(t,e){if(!u(t)||!e||!e.indexedColormap&&!e.indexed2DColormap)return t;let l=t.clone(),n=l.pixels,i=l.mask,r=l.width*l.height;if(1!==n.length)return t;let{indexedColormap:a,indexed2DColormap:s,offset:o,alphaSpecified:h}=e,f=0,p=n[0],c=new Uint8Array(p.length),d=new Uint8Array(p.length),m=new Uint8Array(p.length),g,x=0;if(a){let t=a.length-1;if(null!=i)for(f=0;f<r;f++)i[f]&&((x=4*(p[f]-o))<o||x>t?i[f]=0:(c[f]=a[x],d[f]=a[x+1],m[f]=a[x+2],i[f]=a[x+3]));else{for(i=new Uint8Array(r),f=0;f<r;f++)(x=4*(p[f]-o))<o||x>t?i[f]=0:(c[f]=a[x],d[f]=a[x+1],m[f]=a[x+2],i[f]=a[x+3]);l.mask=i}}else if(s){if(null!=i)for(f=0;f<r;f++)i[f]&&(g=s[p[f]],c[f]=g[0],d[f]=g[1],m[f]=g[2],i[f]=g[3]);else{for(i=new Uint8Array(r),f=0;f<r;f++)g=s[p[f]],c[f]=g[0],d[f]=g[1],m[f]=g[2],i[f]=g[3];l.mask=i}}return l.pixels=[c,d,m],l.statistics=null,l.pixelType="u8",l.maskIsAlpha=h,l}function d(t,e){if(!u(t))return null;let{pixels:l,mask:n}=t,i=l.length,r=e.lut,{offset:a}=e;r&&1===r[0].length&&(r=l.map(()=>r));let o=[],h=e.outputPixelType||"u8";for(let t=0;t<i;t++){let e=m(l[t],n,r[t],a||0,h);o.push(e)}let f=new s.Z({width:t.width,height:t.height,pixels:o,mask:n,pixelType:h});return f.updateStatistics(),f}function m(t,e,l,n,i){let r=t.length,a=s.Z.createEmptyBand(i,r);if(e)for(let i=0;i<r;i++)e[i]&&(a[i]=l[t[i]-n]);else for(let e=0;e<r;e++)a[e]=l[t[e]-n];return a}function g(t,e){if(!u(t))return null;let l=t.clone(),{pixels:n}=l,i=l.width*l.height,r=e.length,a=Math.floor(r/2),s=e[Math.floor(a)],o=n[0],h,f,p,c,d,m,g=!1,x=new Uint8Array(i),w=new Uint8Array(i),y=new Uint8Array(i),k=l.mask,M=4===e[0].mappedColor.length;for(k||((k=new Uint8Array(i)).fill(M?255:1),l.mask=k),d=0;d<i;d++)if(k[d]){for(h=o[d],g=!1,m=a,f=s,p=0,c=r-1;c-p>1;){if(h===f.value){g=!0;break}h>f.value?p=m:c=m,f=e[Math.floor(m=Math.floor((p+c)/2))]}g||(h===e[p].value?(f=e[p],g=!0):h===e[c].value?(f=e[c],g=!0):h<e[p].value?(g=!1,f=null):h>e[p].value&&(h<e[c].value?(f=e[p],g=!0):c===r-1?(g=!1,f=null):(f=e[c],g=!0))),g?(x[d]=f.mappedColor[0],w[d]=f.mappedColor[1],y[d]=f.mappedColor[2],k[d]=f.mappedColor[3]):x[d]=w[d]=y[d]=k[d]=0}return l.pixels=[x,w,y],l.mask=k,l.pixelType="u8",l.maskIsAlpha=M,l}function x(t,e){if(!u(t))return null;let{width:l,height:n}=t,{inputRanges:i,outputValues:r,outputPixelType:a,noDataRanges:h,allowUnmatched:f,isLastInputRangeInclusive:p}=e,c=t.pixels[0],d=s.Z.createEmptyBand(a,c.length),m=t.mask,g=new Uint8Array(l*n);m?g.set(m):g.fill(255);let x=t.pixelType.startsWith("f")?1e-6:0,w=i.map(t=>t-x);w[0]=i[0],w[w.length-1]=i[i.length-1]+(p?1e-6:0);let y=i.length/2,[k,M]=(0,o.rL)(a);for(let t=0;t<n;t++)for(let e=0;e<l;e++){let n=t*l+e;if(g[n]){let t=c[n],e=!1;for(let l=y-1;l>=0;l--)if(t===w[2*l]||t>w[2*l]&&t<w[2*l+1]){d[n]=r[l],e=!0;break}e||(f?d[n]=t>M?M:t<k?k:t:g[n]=0)}}let A=h?.length;if(A)for(let t=0;t<n;t++)for(let e=0;e<l;e++){let n=t*l+e;if(!m||m[n]){let t=c[n];for(let e=0;e<A;e+=2)if(t>=h[e]&&t<=h[e+1]){d[n]=0,g[n]=0;break}}}return new s.Z({width:l,height:n,pixelType:a,pixels:[d],mask:g})}function w(t,e,l,n){let i=null!=l&&l.length>=2?new Set(l):null,r=1===l?.length?l[0]:null,a=!!e?.length;for(let l=0;l<t.length;l++)if(n[l]){let s=t[l];if(a){let t=!1;for(let l=0;l<e.length;l+=2)if(s>=e[l]&&s<=e[l+1]){t=!0;break}t||(n[l]=0)}n[l]&&(s===r||i?.has(s))&&(n[l]=0)}}function y(t,e){let l=t[0].length;for(let n=0;n<l;n++)if(e[n]){let l=!1;for(let e=0;e<t.length;e++)if(t[e][n]){l=!0;break}l||(e[n]=0)}}function k(t,e){let l=t[0].length;for(let n=0;n<l;n++)if(e[n]){let l=!1;for(let e=0;e<t.length;e++)if(0===t[e][n]){l=!0;break}l&&(e[n]=0)}}function M(t,e){if(!u(t))return null;let{width:l,height:n,pixels:i}=t,r=l*n,a=new Uint8Array(r);t.mask?a.set(t.mask):a.fill(255);let o=i.length,{includedRanges:h,noDataValues:f,outputPixelType:p,matchAll:c,lookups:d}=e;if(d){let t=[];for(let e=0;e<o;e++){let l=d[e],n=m(i[e],a,l.lut,l.offset||0,"u8");t.push(n)}1===t.length?a.set(t[0]):c?y(t,a):k(t,a)}else if(c){let t=[];for(let e=0;e<o;e++){let l=new Uint8Array(r);l.set(a),w(i[e],h?.slice(2*e,2*e+2),f?.[e],l),t.push(l)}1===t.length?a.set(t[0]):y(t,a)}else for(let t=0;t<o;t++)w(i[t],h?.slice(2*t,2*t+2),f?.[t],a);return new s.Z({width:l,height:n,pixelType:p,pixels:i,mask:a})}function A(t){let{srcPixelType:e,inputRanges:l,outputValues:n,allowUnmatched:i,noDataRanges:r,isLastInputRangeInclusive:a,outputPixelType:h}=t;if("u8"!==e&&"s8"!==e&&"u16"!==e&&"s16"!==e)return null;let u=e.includes("16")?65536:256,f=e.includes("s")?-u/2:0,p=s.Z.createEmptyBand(h,u),c=new Uint8Array(u);i&&c.fill(255);let[d,m]=(0,o.rL)(h);if(l?.length&&n?.length){let t=l.map(t=>t-1e-6);t[0]=l[0],a&&(t[t.length-1]=l[l.length-1]);for(let e=0;e<t.length;e++){let l=n[e]>m?m:n[e]<d?d:n[e],i=Math.ceil(t[2*e]-f),r=Math.floor(t[2*e+1]-f);for(let t=i;t<=r;t++)p[t]=l,c[t]=255}}if(r?.length)for(let t=0;t<r.length;t++){let e=Math.ceil(r[2*t]-f),l=Math.floor(r[2*t+1]-f);for(let t=e;t<=l;t++)c[t]=0}return{lut:p,offset:f,mask:c}}function b(t,e,l){if("u8"!==t&&"s8"!==t&&"u16"!==t&&"s16"!==t)return null;let n=t.includes("16")?65536:256,i=t.includes("s")?-n/2:0,r=new Uint8Array(n);if(e)for(let t=0;t<e.length;t++){let l=Math.ceil(e[2*t]-i),n=Math.floor(e[2*t+1]-i);for(let t=l;t<=n;t++)r[t]=255}else r.fill(255);if(l)for(let t=0;t<l.length;t++)r[l[t]-i]=0;return{lut:r,offset:i}}function v(t,e){if(!t||0===t.length)return null;let l=t.find(t=>t.pixelBlock);if(null==l?.pixelBlock)return null;let n=(l.extent.xmax-l.extent.xmin)/l.pixelBlock.width,i=(l.extent.ymax-l.extent.ymin)/l.pixelBlock.height,r=.01*Math.min(n,i),a=t.sort((t,e)=>Math.abs(t.extent.ymax-e.extent.ymax)>r?e.extent.ymax-t.extent.ymax:Math.abs(t.extent.xmin-e.extent.xmin)>r?t.extent.xmin-e.extent.xmin:0),s=Math.min.apply(null,a.map(t=>t.extent.xmin)),o=Math.min.apply(null,a.map(t=>t.extent.ymin)),h=Math.max.apply(null,a.map(t=>t.extent.xmax)),u=Math.max.apply(null,a.map(t=>t.extent.ymax)),f={x:Math.round((e.xmin-s)/n),y:Math.round((u-e.ymax)/i)},p={width:Math.round((h-s)/n),height:Math.round((u-o)/i)},c={width:Math.round((e.xmax-e.xmin)/n),height:Math.round((e.ymax-e.ymin)/i)};return Math.round(p.width/l.pixelBlock.width)*Math.round(p.height/l.pixelBlock.height)!==a.length||f.x<0||f.y<0||p.width<c.width||p.height<c.height?null:{extent:e,pixelBlock:P(a.map(t=>t.pixelBlock),p,{clipOffset:f,clipSize:c})}}function U(t,e,l,n,i,r){let{width:a,height:s}=l.block,{x:o,y:h}=l.offset,{width:u,height:f}=l.mosaic,p={xmin:o<=n*a?0:o<n*a+a?o-n*a:a,ymin:h<=i*s?0:h<i*s+s?h-i*s:s,xmax:o+u<=n*a?0:o+u<n*a+a?o+u-n*a:a,ymax:h+f<=i*s?0:h+f<i*s+s?h+f-i*s:s},c=0,d=0;if(r){let t=r.hasGCSSShiftTransform?360:r.halfWorldWidth??0,e=a*r.resolutionX,l=r.startX+n*e;l<t&&l+e>t?d=r.rightPadding:l>=t&&(c=r.leftMargin-r.rightPadding,d=0)}if(p.xmax-=d,"number"!=typeof e)for(let l=p.ymin;l<p.ymax;l++){let r=(i*s+l-h)*u+(n*a-o)+c,f=l*a;for(let l=p.xmin;l<p.xmax;l++)t[r+l]=e[f+l]}else for(let l=p.ymin;l<p.ymax;l++){let r=(i*s+l-h)*u+(n*a-o)+c;for(let l=p.xmin;l<p.xmax;l++)t[r+l]=e}}function P(t,e,l={}){let n;let{clipOffset:i,clipSize:r,alignmentInfo:a,blockWidths:o}=l;if(o)return function(t,e,l){let n=t.find(t=>null!=t);if(null==n)return null;let i=t.some(t=>null==t||!!t.mask),{width:r,height:a}=e,o=i?new Uint8Array(r*a):null,{blockWidths:h}=l,f=[],p=n.getPlaneCount(),c=s.Z.getPixelArrayConstructor(n.pixelType);if(i)for(let e=0,l=0;e<t.length;l+=h[e],e++){let n=t[e];if(!u(n))continue;let i=n.mask;for(let t=0;t<a;t++)for(let a=0;a<h[e];a++)o[t*r+a+l]=null==i?255:i[t*n.width+a]}let d=t.some(t=>t?.bandMasks&&t.bandMasks.length>1),m=d?[]:void 0,g=r*a;for(let e=0;e<p;e++){let l=new c(g),n=d?new Uint8Array(g):void 0;for(let i=0,s=0;i<t.length;s+=h[i],i++){let o=t[i];if(!u(o))continue;let f=o.pixels[e];if(null!=f){for(let t=0;t<a;t++)for(let e=0;e<h[i];e++)l[t*r+e+s]=f[t*o.width+e];if(n){let t=o.bandMasks?.[e]??o.mask;for(let e=0;e<a;e++)for(let l=0;l<h[i];l++)n[e*r+l+s]=t?t[e*o.width+l]:255}}}f.push(l),m&&n&&m.push(n)}let x=new s.Z({width:r,height:a,mask:o,bandMasks:m,pixels:f,pixelType:n.pixelType});return x.updateStatistics(),x}(t,e,{blockWidths:o});let h=t.find(t=>u(t));if(null==h)return null;let f=r?r.width:e.width,p=r?r.height:e.height,c=h.width,d=h.height,m=e.width/c,g=e.height/d,x={offset:i||{x:0,y:0},mosaic:r||e,block:{width:c,height:d}},w=h.pixelType,y=s.Z.getPixelArrayConstructor(w),k=h.pixels.length,M=[];for(let e=0;e<k;e++){n=new y(f*p);for(let l=0;l<g;l++)for(let i=0;i<m;i++){let r=t[l*m+i];u(r)&&U(n,r.pixels[e],x,i,l,a)}M.push(n)}let A=t.some(t=>null==t||null!=t.mask&&t.mask.length>0),b=t.some(t=>t?.bandMasks&&t.bandMasks.length>1),v=A?new Uint8Array(f*p):void 0,P=b?[]:void 0;if(v){for(let e=0;e<g;e++)for(let l=0;l<m;l++){let n=t[e*m+l],i=null!=n?n.mask:null;U(v,null!=i?i:n?255:0,x,l,e,a)}if(P)for(let e=0;e<k;e++){let l=new Uint8Array(f*p);for(let n=0;n<g;n++)for(let i=0;i<m;i++){let r=t[n*m+i],s=r?.bandMasks?.[e]??r?.mask;U(l,null!=s?s:r?255:0,x,i,n,a)}P.push(l)}}let T=new s.Z({width:f,height:p,pixels:M,pixelType:w,bandMasks:P,mask:v});return T.updateStatistics(),T}function T(t,e,l){if(!u(t))return null;let{width:n,height:i}=t,r=e.x,a=e.y,s=l.width+r,o=l.height+a;if(r<0||a<0||s>n||o>i||0===r&&0===a&&s===n&&o===i)return t;t.mask||(t.mask=new Uint8Array(n*i));let h=t.mask;for(let t=0;t<i;t++){let e=t*n;for(let l=0;l<n;l++)h[e+l]=t<a||t>=o||l<r||l>=s?0:1}return t.updateStatistics(),t}function I(t){if(0===t.size)return 0;let e=0,l=-1,n=0,i=t.keys(),r=i.next();for(;!r.done;)(n=t.get(r.value))>e&&(l=r.value,e=n),r=i.next();return l}function _(t,e,l){if(0===l)return;let n=t.get(e);1===n?t.delete(e):t.set(e,n-1)}function C(t,e,l){0!==l&&t.set(e,t.has(e)?t.get(e)+1:1)}function B(t,e,l){let{x:n,y:i}=e,{width:r,height:a}=l;if(0===n&&0===i&&a===t.height&&r===t.width)return t;let{width:o,height:h}=t,f=Math.max(0,i),p=Math.max(0,n),c=Math.min(n+r,o),d=Math.min(i+a,h);if(c<0||d<0||!u(t))return null;n=Math.max(0,-n),i=Math.max(0,-i);let{pixels:m}=t,g=r*a,x=m.length,w=[];for(let e=0;e<x;e++){let l=m[e],a=s.Z.createEmptyBand(t.pixelType,g);for(let t=f;t<d;t++){let e=t*o,s=(t+i-f)*r+n;for(let t=p;t<c;t++)a[s++]=l[e+t]}w.push(a)}let y=new Uint8Array(g),k=t.mask;for(let t=f;t<d;t++){let e=t*o,l=(t+i-f)*r+n;for(let t=p;t<c;t++)y[l++]=k?k[e+t]:1}let M=new s.Z({width:l.width,height:l.height,pixelType:t.pixelType,pixels:w,mask:y});return M.updateStatistics(),M}function S(t,e=!0){if(!u(t))return null;let{pixels:l,width:n,height:i,mask:r,pixelType:a}=t,o=[],h=Math.round(n/2),f=Math.round(i/2),p=i-1,c=n-1;for(let t=0;t<l.length;t++){let r=l[t],u=s.Z.createEmptyBand(a,h*f),d=0;for(let t=0;t<i;t+=2)for(let l=0;l<n;l+=2){let i=r[t*n+l];if(e){let e=l===c?i:r[t*n+l+1],a=t===p?i:r[t*n+l+n],s=l===c?a:t===p?e:r[t*n+l+n+1];u[d++]=(i+e+a+s)/4}else u[d++]=i}o.push(u)}let d=null;if(null!=r){d=new Uint8Array(h*f);let t=0;for(let l=0;l<i;l+=2)for(let i=0;i<n;i+=2){let a=r[l*n+i];if(e){let e=i===c?a:r[l*n+i+1],s=l===p?a:r[l*n+i+n],o=i===c?s:l===p?e:r[l*n+i+n+1];d[t++]=a*e*s*o?1:0}else d[t++]=a}}return new s.Z({width:h,height:f,pixelType:a,pixels:o,mask:d})}function V(t,e,l=0,n=!0){if(!u(t))return null;let{width:i,height:r}=e,{width:a,height:s}=t,o=new Map,h={x:0,y:0},f=1+l,p=t;for(let t=0;t<f;t++){let l=Math.ceil(a/i),u=Math.ceil(s/r);for(let n=0;n<u;n++){h.y=n*r;for(let r=0;r<l;r++){h.x=r*i;let l=B(p,h,e);o.set(`${t}/${n}/${r}`,l)}}t<f-1&&(p=S(p,n)),a=Math.round(a/2),s=Math.round(s/2)}return o}function F(t){let{pixelBlock:e,tileSize:l,level:n,row:i,col:r,useBilinear:a}=t;if(!u(e))return null;let{width:s,height:o}=l,h=2**n,f=h*s,p=h*o,c=B(e,{y:i*p,x:r*f},{width:f,height:p});if(!c)return null;for(let t=n;t>0;t--)c=S(c,a);return c}function Z(t,e,l,n,i=0){let r,a,s,o,h,u,f;let{width:p,height:c}=t,{width:d,height:m}=e,g=n.cols,x=n.rows,w=Math.ceil(d/g-.1/g),y=Math.ceil(m/x-.1/x),k=w*g,M=k*y*x,A=new Float32Array(M),b=new Float32Array(M),v=new Uint32Array(M),U=new Uint32Array(M),P,T,I=0;for(let t=0;t<y;t++)for(let e=0;e<w;e++){a=l[r=12*(t*w+e)],s=l[r+1],o=l[r+2],h=l[r+3],u=l[r+4],f=l[r+5];for(let l=0;l<x;l++){I=(t*x+l)*k+e*g,T=(l+.5)/x;for(let t=0;t<l;t++)P=(t+.5)/g,A[I+t]=(a*P+s*T+o)*p+i,b[I+t]=(h*P+u*T+f)*c+i,v[I+t]=Math.floor(A[I+t]),U[I+t]=Math.floor(b[I+t])}r+=6,a=l[r],s=l[r+1],o=l[r+2],h=l[r+3],u=l[r+4],f=l[r+5];for(let l=0;l<x;l++){I=(t*x+l)*k+e*g,T=(l+.5)/x;for(let t=l;t<g;t++)P=(t+.5)/g,A[I+t]=(a*P+s*T+o)*p+i,b[I+t]=(h*P+u*T+f)*c+i,v[I+t]=Math.floor(A[I+t]),U[I+t]=Math.floor(b[I+t])}}return{offsets_x:A,offsets_y:b,offsets_xi:v,offsets_yi:U,gridWidth:k}}function D(t,e){let{coefficients:l,spacing:n}=e,{offsets_x:i,offsets_y:r,gridWidth:a}=Z(t,t,l,{rows:n[0],cols:n[1]}),{width:s,height:o}=t,h=new Float32Array(s*o),u=180/Math.PI;for(let t=0;t<o;t++)for(let e=0;e<s;e++){let l=t*a+e,n=0===t?l:l-a,f=t===o-1?l:l+a,p=i[n]-i[f],c=r[f]-r[n];if(isNaN(p)||isNaN(c))h[t*s+e]=90;else{let l=Math.atan2(c,p)*u;l=(360+l)%360,h[t*s+e]=l}}return h}function L(t,e,l,n,i="nearest"){let r,a;if(!u(t))return null;"majority"===i&&(t=function(t){if(!u(t))return null;let e=t.clone(),{width:l,height:n,pixels:i}=t,r=i[0],a=e.pixels[0],s=t.mask;for(let t=2;t<n-1;t++){let e=new Map;for(let n=t-2;n<t+2;n++)for(let t=0;t<4;t++){let i=n*l+t;C(e,r[i],s?s[i]:1)}a[t*l]=I(e),a[t*l+1]=a[t*l+2]=a[t*l];let n=3;for(;n<l-1;n++){let i=(t-2)*l+n+1;C(e,r[i],s?s[i]:1),C(e,r[i=(t-1)*l+n+1],s?s[i]:1),C(e,r[i=t*l+n+1],s?s[i]:1),C(e,r[i=(t+1)*l+n+1],s?s[i]:1),_(e,r[i=(t-2)*l+n-3],s?s[i]:1),_(e,r[i=(t-1)*l+n-3],s?s[i]:1),_(e,r[i=t*l+n-3],s?s[i]:1),_(e,r[i=(t+1)*l+n-3],s?s[i]:1),a[t*l+n]=I(e)}a[t*l+n+1]=a[t*l+n]}for(let t=0;t<l;t++)a[t]=a[l+t]=a[2*l+t],a[(n-1)*l+t]=a[(n-2)*l+t];return e.updateStatistics(),e}(t));let{pixels:o,mask:h,bandMasks:f,pixelType:p}=t,c=t.width,d=t.height,m=s.Z.getPixelArrayConstructor(p),g=o.length,{width:x,height:w}=e,y=!1;for(let t=0;t<l.length;t+=3)-1===l[t]&&-1===l[t+1]&&-1===l[t+2]&&(y=!0);let{offsets_x:k,offsets_y:M,offsets_xi:A,offsets_yi:b,gridWidth:v}=Z({width:c,height:d},e,l,n,"majority"===i?.5:0),U=(t,e,l,n)=>{let i=t instanceof Float32Array||t instanceof Float64Array?0:.5;for(let a=0;a<w;a++){r=a*v;for(let s=0;s<x;s++){if(k[r]<0||M[r]<0)t[a*x+s]=0;else if(n)t[a*x+s]=e[A[r]+b[r]*c];else{let n=Math.floor(k[r]),o=Math.floor(M[r]),h=Math.ceil(k[r]),u=Math.ceil(M[r]),f=k[r]-n,p=M[r]-o;if(!l||l[n+o*c]&&l[h+o*c]&&l[n+u*c]&&l[h+u*c]){let l=(1-f)*e[n+o*c]+f*e[h+o*c],r=(1-f)*e[n+u*c]+f*e[h+u*c];t[a*x+s]=(1-p)*l+p*r+i}else t[a*x+s]=e[A[r]+b[r]*c]}r++}}},P=[],T=f?.length===g,B=[];for(let t=0;t<g;t++){if(T){let e=new Uint8Array(x*w);U(e,f[t],f[t],!0),B.push(e)}U(a=new m(x*w),o[t],T?f[t]:h,"nearest"===i||"majority"===i),P.push(a)}let S=new s.Z({width:x,height:w,pixelType:p,pixels:P,bandMasks:T?B:void 0});if(null!=h)S.mask=new Uint8Array(x*w),U(S.mask,h,h,!0);else if(y){S.mask=new Uint8Array(x*w);for(let t=0;t<x*w;t++)S.mask[t]=k[t]<0||M[t]<0?0:1}return S.updateStatistics(),S}},70813:function(t,e,l){l.d(e,{BH:function(){return g},K:function(){return U},KC:function(){return d},NL:function(){return o},QI:function(){return m},Tg:function(){return f},Yx:function(){return h},nb:function(){return T},wF:function(){return P},xQ:function(){return c}});var n=l(740),i=l(53568),r=l(92477);let a=new Map;a.set("meter-per-second",1),a.set("kilometer-per-hour",.277778),a.set("knots",.514444),a.set("feet-per-second",.3048),a.set("mile-per-hour",.44704);let s=180/Math.PI,o=new n.X({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function h(t,e){return a.get(t)/a.get(e)||1}function u(t){return(450-t)%360}function f(t,e="geographic"){let[l,n]=t,i=Math.sqrt(l*l+n*n),r=Math.atan2(n,l)*s;return r=(360+r)%360,"geographic"===e&&(r=u(r)),[i,r]}function p(t,e="geographic"){let l=t[1];"geographic"===e&&(l=u(l)),l%=360;let n=t[0];return[n*Math.cos(l/s),n*Math.sin(l/s)]}function c(t,e,l,n="geographic"){if(!(0,r.nk)(t)||null==l)return t;let i="vector-magdir"===e?t.clone():d(t,e),a=i.pixels[1];for(let t=0;t<a.length;t++)a[t]="geographic"===n?(a[t]+l[t]+270)%360:(a[t]+360-l[t])%360;return"vector-magdir"===e?i:d(i,"vector-magdir")}function d(t,e,l="geographic",n=1){if(!(0,r.nk)(t))return t;let{pixels:a,width:s,height:o}=t,h=s*o,u=a[0],c=a[1],d=t.pixelType.startsWith("f")?t.pixelType:"f32",m=i.Z.createEmptyBand(d,h),g=i.Z.createEmptyBand(d,h),x=0;for(let t=0;t<o;t++)for(let t=0;t<s;t++)"vector-uv"===e?([m[x],g[x]]=f([u[x],c[x]],l),m[x]*=n):([m[x],g[x]]=p([u[x],c[x]],l),m[x]*=n,g[x]*=n),x++;let w=new i.Z({pixelType:d,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:[m,g]});return w.updateStatistics(),w}function m(t,e,l=1){if(1===l||!(0,r.nk)(t))return t;let n=t.clone(),{pixels:i,width:a,height:s}=n,o=i[0],h=i[1],u=0;for(let t=0;t<s;t++)for(let t=0;t<a;t++)"vector-uv"===e?(o[u]*=l,h[u]*=l):o[u]*=l,u++;return n.updateStatistics(),n}function g(t,e,l,n,i){if(null==i||!i.spatialReference.equals(t.spatialReference))return{extent:t,width:Math.round(e/n),height:Math.round(l/n),resolution:t.width/e};let r=i.xmin,a=i.ymax,s=(t.xmax-t.xmin)/e*n,o=(t.ymax-t.ymin)/l*n;return t.xmin=r+Math.floor((t.xmin-r)/s)*s,t.xmax=r+Math.ceil((t.xmax-r)/s)*s,t.ymin=a+Math.floor((t.ymin-a)/o)*o,t.ymax=a+Math.ceil((t.ymax-a)/o)*o,{extent:t,width:Math.round(t.width/s),height:Math.round(t.height/o),resolution:(s+o)/2}}let x=w(0,0,0);function w(t=0,e=0,l=Math.PI,n=!0){n&&(l=(2*Math.PI-l)%(2*Math.PI));let i=n?-1:1,r=-7*i,a=-2*i,s=-16*i,[o,h]=y(0,e+13*i,l,21.75),[u,f]=y(t-5.5,e+r,l,21.75),[p,c]=y(t+5.5,e+r,l,21.75),[d,m]=y(t-1.5,e+a,l,21.75),[g,x]=y(t+1.5,e+a,l,21.75),[w,k]=y(t-1.5,e+s,l,21.75),[M,A]=y(t+1.5,e+s,l,21.75);return[o,h,u,f,d,m,g,x,p,c,w,k,M,A]}function y(t,e,l,n=1){return[Math.sqrt(t*t+e*e)/n,(2*Math.PI+(2*Math.PI+Math.atan2(e,t))%(2*Math.PI)-l)%(2*Math.PI)]}let k=[0,1,3,6,10,16,21,27,33,40,47,55,63],M=[0,.5,1,1.5,2],A=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function b(t,e,l,n){let i;let r=h(n||"knots",l);for(i=1;i<e.length;i++)if(i===e.length-1){if(t<e[i]*r)break}else if(t<=e[i]*r)break;return Math.min(i-1,e.length-2)}let v=[];function U(t,e){let l=0,n=0,{width:i,height:r,mask:a}=t,s=t.pixels[0],u=[],f=[],p=h(o.fromJSON(e.inputUnit),"knots"),c="wind_speed"===e.style?5:Number.MAX_VALUE;for(let t=0;t<r;t++)for(let e=0;e<i;e++){let o=s[t*i+e]*p;if((!a||a[t*i+e])&&o<c){for(let n=0;n<4;n++)u[l++]=(e+.5)/i,u[l++]=(t+.5)/r,u[l++]=n<2?-.5:.5,u[l++]=n%2==0?-.5:.5,u[l++]=0,u[l++]=o;let a=4*(l/24-1);f[n++]=a,f[n++]=a+1,f[n++]=a+2,f[n++]=a+1,f[n++]=a+2,f[n++]=a+3}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(f)}}function P(t,e){return"simple_scalar"===e.style?U(t,e):"wind_speed"===e.style?function(t,e){if(0===v.length)for(let t=0;t<30;t++)v.push(function(t=0,e=Math.PI,l=!0){l&&(e=(2*Math.PI-e)%(2*Math.PI));let n=l?-1:1,i=5*n,r=20*n,a=25*n,s=2*n,o=l?1:-1,h=5*o,[u,f]=[0+h,0-r],[p,c]=[u+2*o,f],[d,m]=[p-0*o,c+s],[g,x]=[0-h,0-a],[w,k]=[g+0*o,x-s],M=Math.ceil(t/5),A=Math.floor(M/10);M-=8*A;let b=[],v=[];for(let t=0;t<M/2;t++,A--){A<=0&&M%2==1&&t===(M-1)/2&&(w=(g=0)+0*o,k=(x=(x+f)/2)-s);let[l,n]=y(g,x,e,45);if(A>0){let[t,i]=y(p,x,e,45),[r,a]=y(u,f,e,45);b.push(t),b.push(i),b.push(l),b.push(n),b.push(r),b.push(a)}else{let[t,i]=y(p,c,e,45),[r,a]=y(d,m,e,45),[s,o]=y(w,k,e,45);v.push(l),v.push(n),v.push(s),v.push(o),v.push(r),v.push(a),v.push(t),v.push(i)}x+=i,f+=i,c+=i,m+=i,k+=i}let[U,P]=y(0+h,0+r,e,45),T=7*o,[I,_]=y(0+T,0+r,e,45),[C,B]=y(0+h,0-a,e,45),[S,V]=y(0+T,0-a,e,45);return{pennants:b,barbs:v,shaft:[U,P,I,_,C,B,S,V]}}(5*t,0,!e.invertDirection));let l=h(o.fromJSON(e.inputUnit),"knots"),{width:n,height:i,mask:r}=t,a=t.pixels[0],s=t.pixels[1],u=[],f=[],p=0,c=0;for(let t=0;t<i;t++)for(let e=0;e<n;e++){let o=t*n+e,h=a[o]*l;if((!r||r[t*n+e])&&h>=5){let l=(s[o]+360)%360/180*Math.PI,{pennants:r,barbs:a,shaft:d}=v[Math.min(Math.floor(h/5),29)];if(r.length+a.length===0)continue;let m=u.length/6,g=(e+.5)/n,x=(t+.5)/i;for(let t=0;t<r.length;t+=2)u[p++]=g,u[p++]=x,u[p++]=r[t],u[p++]=r[t+1]+l,u[p++]=0,u[p++]=h;for(let t=0;t<a.length;t+=2)u[p++]=g,u[p++]=x,u[p++]=a[t],u[p++]=a[t+1]+l,u[p++]=0,u[p++]=h;for(let t=0;t<d.length;t+=2)u[p++]=g,u[p++]=x,u[p++]=d[t],u[p++]=d[t+1]+l,u[p++]=0,u[p++]=h;for(let t=0;t<r.length/6;t++)f[c++]=m,f[c++]=m+1,f[c++]=m+2,m+=3;for(let t=0;t<a.length/8;t++)f[c++]=m,f[c++]=m+1,f[c++]=m+2,f[c++]=m+1,f[c++]=m+2,f[c++]=m+3,m+=4;f[c++]=m+0,f[c++]=m+1,f[c++]=m+2,f[c++]=m+1,f[c++]=m+3,f[c++]=m+2,m+=4}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(f)}}(t,e):function(t,e){let{style:l,inputUnit:n,outputUnit:i,breakValues:r}=e,a=o.fromJSON(n),s=o.fromJSON(i),h=0,u=0,{width:f,height:p,mask:c}=t,d=t.pixels[0],m=t.pixels[1],g=null!=c?c.filter(t=>t>0).length:f*p,y=new Float32Array(42*g),v=new Uint32Array(15*g),U=e.invertDirection?w(0,0,0,!1):x;for(let t=0;t<p;t++)for(let e=0;e<f;e++){let n=t*f+e;if(!c||c[t*f+e]){let i=(m[n]+360)%360/180*Math.PI,o=function(t,e,l,n,i){let r=0;switch(e){case"beaufort_kn":r=b(t,k,"knots",l);break;case"beaufort_km":r=b(t,k,"kilometer-per-hour",l);break;case"beaufort_ft":r=b(t,k,"feet-per-second",l);break;case"beaufort_m":r=b(t,k,"meter-per-second",l);break;case"classified_arrow":r=b(t,i??[],n,l);break;case"ocean_current_m":r=b(t,M,"meter-per-second",l);break;case"ocean_current_kn":r=b(t,A,"knots",l)}return r}(d[n],l,a,s,r);for(let l=0;l<U.length;l+=2)y[h++]=(e+.5)/f,y[h++]=(t+.5)/p,y[h++]=U[l],y[h++]=U[l+1]+i,y[h++]=o,y[h++]=d[n];let c=7*(h/42-1);v[u++]=c,v[u++]=c+1,v[u++]=c+2,v[u++]=c+0,v[u++]=c+4,v[u++]=c+3,v[u++]=c+0,v[u++]=c+2,v[u++]=c+3,v[u++]=c+2,v[u++]=c+5,v[u++]=c+3,v[u++]=c+5,v[u++]=c+6,v[u++]=c+3}}return{vertexData:y,indexData:v}}(t,e)}function T(t,e,l,n=[0,0],r=.5){let{width:a,height:s,mask:o}=t,[h,u]=t.pixels,[c,d]=n,m=Math.round((a-c)/l),g=Math.round((s-d)/l),x=m*g,w=new Float32Array(x),y=new Float32Array(x),k=new Uint8Array(x),M="vector-uv"===e;for(let t=0;t<g;t++)for(let e=0;e<m;e++){let n=0,i=t*m+e,g=Math.max(0,t*l+d),x=Math.max(0,e*l+c),A=Math.min(s,g+l),b=Math.min(a,x+l);for(let t=g;t<A;t++)for(let e=x;e<b;e++){let l=t*a+e;if(!o||o[l]){n++;let t=M?[h[l],u[l]]:[h[l],(360+u[l])%360],[e,r]=M?t:p(t);w[i]+=e,y[i]+=r}}if(n>=(A-g)*(b-x)*(1-r)){k[i]=1;let[t,e]=f([w[i]/n,y[i]/n]);w[i]=t,y[i]=e}else k[i]=0,w[i]=0,y[i]=0}let A=new i.Z({width:m,height:g,pixels:[w,y],mask:k});return A.updateStatistics(),A}},24738:function(t,e,l){l.d(e,{GE:function(){return f},KK:function(){return c}}),l(55066);var n=l(37180),i=l(65223),r=l(13507),a=l(31124),s=l(3457),o=l(62329),h=l(9377);let u=()=>i.Z.getLogger("esri.views.2d.engine.flow.dataUtils");async function f(t,e,l,i){let r=performance.now(),o=function(t,e){let l=function(t,e,l,n){if(0===n)return t;let i=Math.round(3*n),r=Array(2*i+1),a=0;for(let t=-i;t<=i;t++){let e=Math.exp(-t*t/(n*n));r[t+i]=e,a+=e}for(let t=-i;t<=i;t++)r[t+i]/=a;let s=new Float32Array(t.length);for(let n=0;n<l;n++)for(let l=0;l<e;l++){let a=0,o=0;for(let s=-i;s<=i;s++){if(l+s<0||l+s>=e)continue;let h=r[s+i];a+=h*t[2*(n*e+(l+s))],o+=h*t[2*(n*e+(l+s))+1]}s[2*(n*e+l)]=a,s[2*(n*e+l)+1]=o}let o=new Float32Array(t.length);for(let t=0;t<e;t++)for(let n=0;n<l;n++){let a=0,h=0;for(let o=-i;o<=i;o++){if(n+o<0||n+o>=l)continue;let u=r[o+i];a+=u*s[2*((n+o)*e+t)],h+=u*s[2*((n+o)*e+t)+1]}o[2*(n*e+t)]=a,o[2*(n*e+t)+1]=h}return o}(e.data,e.width,e.height,t.smoothing);return t.interpolate?(t,n)=>{let i=Math.floor(t),r=Math.floor(n);if(i<0||i>=e.width||r<0||r>=e.height)return[0,0];let a=t-i,s=n-r,o=i<e.width-1?i+1:i,h=r<e.height-1?r+1:r,u=l[2*(r*e.width+i)],f=l[2*(r*e.width+o)],p=l[2*(h*e.width+i)],c=l[2*(h*e.width+o)],d=l[2*(r*e.width+i)+1],m=l[2*(r*e.width+o)+1];return[(u*(1-s)+p*s)*(1-a)+(f*(1-s)+c*s)*a,(d*(1-s)+l[2*(h*e.width+i)+1]*s)*(1-a)+(m*(1-s)+l[2*(h*e.width+o)+1]*s)*a]}:(t,n)=>{let i=Math.round(t),r=Math.round(n);return i<0||i>=e.width||r<0||r>=e.height?[0,0]:[l[2*(r*e.width+i)],l[2*(r*e.width+i)+1]]}}(e,l),h=performance.now(),f=function(t,e,l,n){let i=[],r=new s.Z,a=1/Math.max(t.lineCollisionWidth,1),o=Math.round(l*a),h=Math.round(n*a),u=new Int32Array(o*h);for(let t=0;t<u.length;t++)u[t]=-1;let f=[];for(let e=0;e<n;e+=t.lineSpacing)for(let n=0;n<l;n+=t.lineSpacing)f.push({x:n,y:e,sort:r.getFloat()});for(let{x:l,y:n}of(f.sort((t,e)=>t.sort-e.sort),f))if(r.getFloat()<t.density){let r=function(t,e,l,n,i,r,a,s,o){let h,u;let f=[],p=l,c=n,d=0,[m,g]=e(p,c),x=Math.sqrt((m*=t.velocityScale)*m+(g*=t.velocityScale)*g);f.push({x:p,y:c,t:d,speed:x});for(let l=0;l<t.verticesPerLine;l++){let[l,n]=e(p,c),m=Math.sqrt((l*=t.velocityScale)*l+(n*=t.velocityScale)*n);if(m<t.minSpeedThreshold)break;let g=l/m,x=n/m;if(p+=g*t.segmentLength,c+=x*t.segmentLength,d+=t.segmentLength/m,Math.acos(g*h+x*u)>t.maxTurnAngle)break;if(t.collisions){let t=Math.round(p*o),e=Math.round(c*o);if(t<0||t>a-1||e<0||e>s-1)return f;let l=r[e*a+t];if(-1!==l&&l!==i)return f;r[e*a+t]=i}f.push({x:p,y:c,t:d,speed:m}),h=g,u=x}return f}(t,e,l,n,i.length,u,o,h,a);if(r.length<2)continue;i.push(r)}return i}(e,o,l.width,l.height),p=performance.now(),c=function(t,e){let l=new s.Z,n=new Float32Array(4*t.reduce((t,e)=>t+e.length,0)),i=Array(t.length),r=0,a=0;for(let s of t){let t=r;for(let t of s)n[4*r]=t.x,n[4*r+1]=t.y,n[4*r+2]=t.t,n[4*r+3]=t.speed,r++;i[a++]={startVertex:t,numberOfVertices:s.length,totalTime:s[s.length-1].t,timeSeed:e?l.getFloat():0}}return{lineVertices:n,lineDescriptors:i}}(f,!0),d=performance.now(),m="Streamlines"===t?function(t,e){let{lineVertices:l,lineDescriptors:n}=t,i=0,r=0;for(let t of n)i+=2*t.numberOfVertices,r+=6*(t.numberOfVertices-1);let a=new Float32Array(9*i),s=new Uint32Array(r),o=0,h=0;function u(t,e,l,n,i,r,s,h){let u=9*o,f=0;a[u+f++]=t,a[u+f++]=e,a[u+f++]=1,a[u+f++]=l,a[u+f++]=r,a[u+f++]=s,a[u+f++]=n/2,a[u+f++]=i/2,a[u+f++]=h,o++,a[u+f++]=t,a[u+f++]=e,a[u+f++]=-1,a[u+f++]=l,a[u+f++]=r,a[u+f++]=s,a[u+f++]=-n/2,a[u+f++]=-i/2,a[u+f++]=h,o++}for(let t of n){let{totalTime:e,timeSeed:n}=t,i=null,r=null,a=null,f=null,p=null,c=null;for(let d=0;d<t.numberOfVertices;d++){let m=l[4*(t.startVertex+d)],g=l[4*(t.startVertex+d)+1],x=l[4*(t.startVertex+d)+2],w=l[4*(t.startVertex+d)+3],y=null,k=null,M=null,A=null;if(d>0){let t=Math.sqrt((y=m-i)*y+(k=g-r)*k);if(y/=t,k/=t,d>1){let t=y+p,e=k+c,l=Math.sqrt(t*t+e*e),n=Math.min(1/((t/=l)*y+(e/=l)*k),10);t*=n,e*=n,M=-e,A=t}else M=-k,A=y;null!==M&&null!==A&&(u(i,r,a,M,A,e,n,w),s[h++]=o-2,s[h++]=o,s[h++]=o-1,s[h++]=o,s[h++]=o+1,s[h++]=o-1)}i=m,r=g,a=x,p=y,c=k,f=w}u(i,r,a,-c,p,e,n,f)}return{vertexData:a,indexData:s}}(c,0):function(t){let{lineVertices:e,lineDescriptors:l}=t,n=0,i=0;for(let t of l){let e=t.numberOfVertices-1;n+=4*e*2,i+=6*e*2}let r=new Float32Array(16*n),a=new Uint32Array(i),s,o,h,u,f,p,c,d,m,g,x,w,y,k,M=0,A=0;function b(t,e){let l=m+x,n=g+w,i=Math.sqrt(l*l+n*n);l/=i,n/=i;let b=m*l+g*n;l/=b,n/=b;let v=x+y,U=w+k,P=Math.sqrt(v*v+U*U);v/=P,U/=P;let T=x*v+w*U;v/=T,U/=T,function(t,e,l,n,i,a,s,o,h,u,f,p,c,d){let m=16*M,g=0;for(let x of[1,2])for(let w of[1,2,3,4])r[m+g++]=t,r[m+g++]=e,r[m+g++]=l,r[m+g++]=n,r[m+g++]=s,r[m+g++]=o,r[m+g++]=h,r[m+g++]=u,r[m+g++]=x,r[m+g++]=w,r[m+g++]=c,r[m+g++]=d,r[m+g++]=i/2,r[m+g++]=a/2,r[m+g++]=f/2,r[m+g++]=p/2,M++}(s,o,h,u,-n,l,f,p,c,d,-U,v,t,e),a[A++]=M-8,a[A++]=M-7,a[A++]=M-6,a[A++]=M-7,a[A++]=M-5,a[A++]=M-6,a[A++]=M-4,a[A++]=M-3,a[A++]=M-2,a[A++]=M-3,a[A++]=M-1,a[A++]=M-2}for(let t of l){s=null,o=null,h=null,u=null,f=null,p=null,c=null,d=null,m=null,g=null,x=null,w=null,y=null,k=null;let{totalTime:l,timeSeed:n}=t;for(let i=0;i<t.numberOfVertices;i++)!function(t,e,l,n,i,r){if(m=x,g=w,x=y,w=k,null==m&&null==g&&(m=x,g=w),null!=f&&null!=p){let l=Math.sqrt((y=t-f)*y+(k=e-p)*k);y/=l,k/=l}null!=m&&null!=g&&b(i,r),s=f,o=p,h=c,u=d,f=t,p=e,c=l,d=n}(e[4*(t.startVertex+i)],e[4*(t.startVertex+i)+1],e[4*(t.startVertex+i)+2],e[4*(t.startVertex+i)+3],l,n);m=x,g=w,x=y,w=k,null==m&&null==g&&(m=x,g=w),null!=m&&null!=g&&b(l,n)}return{vertexData:r,indexData:a}}(c),g=performance.now();return(0,n.Z)("esri-2d-profiler")&&(u().info("I.1","_createFlowFieldFromData (ms)",Math.round(h-r)),u().info("I.2","_getStreamlines (ms)",Math.round(p-h)),u().info("I.3","createAnimatedLinesData (ms)",Math.round(d-p)),u().info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(g-d)),u().info("I.5","createFlowMesh (ms)",Math.round(g-r)),u().info("I.6","Mesh size (bytes)",m.vertexData.buffer.byteLength+m.indexData.buffer.byteLength)),await Promise.resolve(),(0,a.k_)(i),m}function p(t,e){let l=e.pixels,{width:n,height:i}=e,a=new Float32Array(n*i*2),s=e.mask||new Uint8Array(n*i*2);if(e.mask||s.fill(255),"vector-uv"===t)for(let t=0;t<n*i;t++)a[2*t]=l[0][t],a[2*t+1]=-l[1][t];else if("vector-magdir"===t)for(let t=0;t<n*i;t++){let e=l[0][t],n=(0,r.Vl)(l[1][t]),i=Math.cos(n-Math.PI/2),s=Math.sin(n-Math.PI/2);a[2*t]=i*e,a[2*t+1]=s*e}return{data:a,mask:s,width:n,height:i}}async function c(t,e,l,i,r,a){let s=performance.now(),f=(0,o.C5)(e.spatialReference);if(!f){let o=await d(t,e,l,i,r,a);return(0,n.Z)("esri-2d-profiler")&&u().info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-s)),(0,n.Z)("esri-2d-profiler")&&u().info("I.9","Number of parts",1),o}let[p,c]=f.valid,m=Math.ceil(e.width/(c-p)),g=e.width/m,x=Math.round(l/m),w=e.xmin,y=[],k=performance.now();for(let l=0;l<m;l++){let l=new h.Z({xmin:w,xmax:w+g,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference});y.push(d(t,l,x,i,r,a)),w+=g}let M=await Promise.all(y);(0,n.Z)("esri-2d-profiler")&&u().info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-k)),(0,n.Z)("esri-2d-profiler")&&u().info("I.9","Number of parts",M.length);let A={data:new Float32Array(l*i*2),mask:new Uint8Array(l*i),width:l,height:i},b=0;for(let t of M){for(let e=0;e<t.height;e++)for(let n=0;n<t.width;n++)b+n>=l||(A.data[2*(e*l+b+n)]=t.data[2*(e*t.width+n)],A.data[2*(e*l+b+n)+1]=t.data[2*(e*t.width+n)+1],A.mask[e*l+b+n]=t.mask[e*t.width+n]);b+=t.width}return(0,n.Z)("esri-2d-profiler")&&u().info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-s)),A}async function d(t,e,l,n,i,r){let a={requestProjectedLocalDirections:!0,signal:r};if(null!=i&&(a.timeExtent=i),"imagery"===t.type){await t.load({signal:r});let i=t.rasterInfo.dataType,s=await t.fetchImage(e,l,n,a);return null==s?.pixelData?.pixelBlock?{data:new Float32Array(l*n*2),mask:new Uint8Array(l*n),width:l,height:n}:p(i,s.pixelData.pixelBlock)}await t.load({signal:r});let s=t.serviceRasterInfo.dataType,o=await t.fetchPixels(e,l,n,a);return null==o?.pixelBlock?{data:new Float32Array(l*n*2),mask:new Uint8Array(l*n),width:l,height:n}:p(s,o.pixelBlock)}}}]);
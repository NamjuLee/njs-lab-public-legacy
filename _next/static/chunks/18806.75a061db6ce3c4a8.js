(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18806],{15510:function(t){function i(t){return Promise.resolve().then(function(){var i=Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i})}i.keys=function(){return[]},i.resolve=i,i.id=15510,t.exports=i},75410:function(){},48628:function(){},31601:function(){},67792:function(){},34977:function(){},75042:function(){},21322:function(t,i,e){"use strict";e.d(i,{P:function(){return n}});var s=e(88405);class n{predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(s.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(s.scalar(4)).mul(this.weights[3]).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(s.scalar(5)).mul(this.weights[4]).add(t.pow(s.scalar(4)).mul(this.weights[3])).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):(this.dim,this.predict1d(t))}loss(t,i){return t.sub(i).square().mean()}train(t,i){s.tidy(()=>{let e=s.tensor1d(t),n=s.tensor1d(i);this.optimizer.minimize(()=>this.loss(this.predict(e),n))})}constructor(t=0){this.weights=[],this.dim=3,this.leraningRate=.2,this.dim=t;for(let t=0;t<5;++t){let t=s.variable(s.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=s.variable(s.scalar(2*Math.random()-1)),this.optimizer=s.train.adam(this.leraningRate)}}},88876:function(t,i,e){"use strict";e.d(i,{NJSCORE:function(){return r},PolynomialRegression:function(){return o.P},RendererThree:function(){return s.T}});var s=e(14540),n=e(45169);e.o(n,"AStart")&&e.d(i,{AStart:function(){return n.AStart}}),e.o(n,"COLOR_BLENDING")&&e.d(i,{COLOR_BLENDING:function(){return n.COLOR_BLENDING}}),e.o(n,"Graph")&&e.d(i,{Graph:function(){return n.Graph}}),e.o(n,"KNN")&&e.d(i,{KNN:function(){return n.KNN}}),e.o(n,"LinearRegression")&&e.d(i,{LinearRegression:function(){return n.LinearRegression}}),e.o(n,"LinearRegressionGradientDescent")&&e.d(i,{LinearRegressionGradientDescent:function(){return n.LinearRegressionGradientDescent}}),e.o(n,"MercatorProjection")&&e.d(i,{MercatorProjection:function(){return n.MercatorProjection}}),e.o(n,"PolynomialRegression")&&e.d(i,{PolynomialRegression:function(){return n.PolynomialRegression}}),e.o(n,"RGBtoGray")&&e.d(i,{RGBtoGray:function(){return n.RGBtoGray}}),e.o(n,"RendererCanvas")&&e.d(i,{RendererCanvas:function(){return n.RendererCanvas}}),e.o(n,"RendererJSAPI")&&e.d(i,{RendererJSAPI:function(){return n.RendererJSAPI}}),e.o(n,"TypeDithering")&&e.d(i,{TypeDithering:function(){return n.TypeDithering}}),e.o(n,"Vector3")&&e.d(i,{Vector3:function(){return n.Vector3}}),e.o(n,"buildNetwork")&&e.d(i,{buildNetwork:function(){return n.buildNetwork}}),e.o(n,"crossProduct")&&e.d(i,{crossProduct:function(){return n.crossProduct}}),e.o(n,"deepCopy")&&e.d(i,{deepCopy:function(){return n.deepCopy}}),e.o(n,"distanceEuclidean")&&e.d(i,{distanceEuclidean:function(){return n.distanceEuclidean}}),e.o(n,"distanceTo")&&e.d(i,{distanceTo:function(){return n.distanceTo}}),e.o(n,"dithering4_4")&&e.d(i,{dithering4_4:function(){return n.dithering4_4}}),e.o(n,"ditheringFloydSteinberg")&&e.d(i,{ditheringFloydSteinberg:function(){return n.ditheringFloydSteinberg}}),e.o(n,"getArrayBinaryImgFromCtx")&&e.d(i,{getArrayBinaryImgFromCtx:function(){return n.getArrayBinaryImgFromCtx}}),e.o(n,"getCSVFromURL")&&e.d(i,{getCSVFromURL:function(){return n.getCSVFromURL}}),e.o(n,"getCheckBox")&&e.d(i,{getCheckBox:function(){return n.getCheckBox}}),e.o(n,"getImgFromURL")&&e.d(i,{getImgFromURL:function(){return n.getImgFromURL}}),e.o(n,"getJSONFromURL")&&e.d(i,{getJSONFromURL:function(){return n.getJSONFromURL}}),e.o(n,"getLineSeg")&&e.d(i,{getLineSeg:function(){return n.getLineSeg}}),e.o(n,"getRandomHex")&&e.d(i,{getRandomHex:function(){return n.getRandomHex}}),e.o(n,"getSlider")&&e.d(i,{getSlider:function(){return n.getSlider}}),e.o(n,"getUUID")&&e.d(i,{getUUID:function(){return n.getUUID}}),e.o(n,"hex2RGBA")&&e.d(i,{hex2RGBA:function(){return n.hex2RGBA}}),e.o(n,"isInsideOfVecs")&&e.d(i,{isInsideOfVecs:function(){return n.isInsideOfVecs}}),e.o(n,"normalize")&&e.d(i,{normalize:function(){return n.normalize}}),e.o(n,"reflect")&&e.d(i,{reflect:function(){return n.reflect}}),e.o(n,"remap")&&e.d(i,{remap:function(){return n.remap}}),e.o(n,"shuffleArray")&&e.d(i,{shuffleArray:function(){return n.shuffleArray}});var o=e(21322),r=e(8483)},14540:function(t,i,e){"use strict";e.d(i,{T:function(){return o}});var s=e(97776),n=e(78252);class o{initCanvas(){this.scene=new s.xsS,this.scene.background=new s.Ilk(0),this.scene.castShadow=!0,this.renderer=new s.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(this.hostDiv.clientWidth/this.hostDiv.clientHeight),this.renderer.domElement.id="Three",this.renderer.domElement.style.position="absolute",this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight),this.hostDiv.appendChild(this.renderer.domElement),this.camera=new s.cPb(30,this.hostDiv.clientWidth/this.hostDiv.clientHeight,1,5e3),this.controls=new n.OrbitControls(this.camera,this.renderer.domElement),this.camera.position.set(0,0,5),this.controls.update(),this.canvas=this.renderer.domElement,this.init()}init(){this.eventBind()}eventBind(){this.renderer.domElement.onmousedown=t=>this.mouseDown(t),this.renderer.domElement.onmouseup=t=>this.mouseUp(t),this.renderer.domElement.onmousemove=t=>this.mouseMove(t),this.renderer.domElement.addEventListener("click",t=>this.mouseClick(t)),window.addEventListener("resize",()=>this.onWindowResize())}onWindowResize(){this.camera.aspect=this.hostDiv.clientWidth/this.hostDiv.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight)}start(){this.loop()}mouseDown(t){}mouseUp(t){}mouseClick(t){}mouseDClick(t){}mouseMove(t){}mouseDrag(t){}update(t){}destroy(){for(window.removeEventListener("resize",()=>this.onWindowResize()),cancelAnimationFrame(this.requestFrame),this.requestFrame=void 0;this.hostDiv.lastChild;)this.hostDiv.removeChild(this.hostDiv.lastChild)}constructor(t){this.t=0,this.requestFrame=void 0,this.loop=()=>{this.requestFrame=requestAnimationFrame(this.loop),this.controls.update(),this.update(this.scene),this.renderer.render(this.scene,this.camera),this.t+=.01},this.hostDiv=document.getElementById(t),this.initCanvas()}}},4361:function(t,i,e){"use strict";e.d(i,{MO:function(){return r},TE:function(){return n},Y4:function(){return s},h9:function(){return o}});let s=(t,i)=>{let e=t[0].x,s=t[1].x,n=i[0].x,o=i[1].x,r=t[0].y,h=t[1].y,l=i[0].y,d=i[1].y;return e<=o&&s>=n&&r<=d&&h>=l},n=(t,i)=>Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)+(t.z-i.z)*(t.z-i.z));class o{constructor(t=0,i=0,e=0){this.x=0,this.y=0,this.z=0,this.lon=0,this.lat=0,this.elevation=0,this.d=!0,this.isRenderable=!0,this.x=t,this.y=i,this.z=e}}class r{updateBounding(){this.collision=new h(this)}render(t){t.beginPath(),t.arc(this.vec.x,this.vec.y,this.radius,0,2*Math.PI),t.closePath(),this.isCollapse?t.fillStyle="#f00":t.fillStyle="#0f0",t.fill(),this.renderBoundingBox(t)}renderBoundingBox(t){t.beginPath(),t.rect(this.collision.minVec.x,this.collision.minVec.y,this.collision.maxVec.x-this.collision.minVec.x,this.collision.maxVec.y-this.collision.minVec.y),t.stroke()}constructor(t,i){this.id="",this.numVisit=0,this.radius=10,this.isCollapse=!1,this.isHidden=!1,this.isRenderable=!0,this.isSelected=!1,this.isHover=!1,this.vec=new o(t,i,0),this.updateBounding()}}class h{Reset(){this.neighborShapes=[],this.numOrder=-1,this.base.numVisit=0,this.base.isCollapse=!1,this.isCollided=!1,this.isVisited=!1}constructor(t){this.isCollided=!1,this.neighborShapes=[],this.isVisited=!1,this.numOrder=-1,this.base=t;let i=this.base.radius;this.minVec=new o(this.base.vec.x-i,this.base.vec.y-i,0),this.maxVec=new o(this.base.vec.x+i,this.base.vec.y+i,0)}}},9034:function(t,i,e){"use strict";e.r(i),e.d(i,{Renderer:function(){return m},Solution:function(){return p}});var s=e(4361);class n{IsInside(t){return(0,s.TE)(this.vec,t)<this.r1?(this.isHover=!0,!0):(this.isHover=!1,!1)}AddPost(t){if(!this.points.includes(t)){this.points.push(t),this.vec=new s.h9(0,0,0);for(let t=0;t<this.points.length;++t)this.vec.x+=this.points[t].vec.x,this.vec.y+=this.points[t].vec.y,this.UpdateBoundingBox(this.points[t].vec);this.vec.x/=this.points.length,this.vec.y/=this.points.length,this.minVec=new s.h9(this.vec.x-this.r1,this.vec.y-this.r1,0),this.maxVec=new s.h9(this.vec.x+this.r1,this.vec.y+this.r1,0)}}NeedDecompose(){return this.boundingBoxMax.x-this.boundingBoxMin.x>this.GridResolution||this.boundingBoxMax.y-this.boundingBoxMin.y>this.GridResolution}Split(){this.DeepRemove();let t=(this.boundingBoxMax.x-this.boundingBoxMin.x)/this.GridResolution<1?1:(this.boundingBoxMax.x-this.boundingBoxMin.x)/this.GridResolution,i=(this.boundingBoxMax.y-this.boundingBoxMin.y)/this.GridResolution<1?1:(this.boundingBoxMax.y-this.boundingBoxMin.y)/this.GridResolution,e=this.buildGrid(t,i);this.BuildSubCluster(e,t,i)}Merge(t){this.points.concat(t.points),this.vec=new s.h9(0,0,0);for(let t=0;t<this.points.length;++t)this.vec.x+=this.points[t].vec.x,this.vec.y+=this.points[t].vec.y,this.UpdateBoundingBox(this.points[t].vec);this.vec.x/=this.points.length,this.vec.y/=this.points.length,this.minVec=new s.h9(this.vec.x-this.r1,this.vec.y-this.r1,0),this.maxVec=new s.h9(this.vec.x+this.r1,this.vec.y+this.r1,0),t.DeepRemove()}DeepRemove(){this.renderer.RemoveCluster(this)}buildGrid(t,i){this.tempGeoGridList=[];let e=[];for(let n=0;n<i;++n){let i=this.boundingBoxMin.y+n*this.GridResolution,o=[];for(let n=0;n<t;++n){let t=this.boundingBoxMin.x+n*this.GridResolution;e.push(new s.h9(t,i));let r=[];o.push(r)}this.tempGeoGridList.push(o)}return this.tempVecGridList=e,e}BuildSubCluster(t,i,e){for(let t=0;t<this.points.length;++t)this.GetCellAtPoint(this.points[t].vec,i,e).push(this.points[t]);for(let t=0;t<this.tempGeoGridList.length;++t)for(let i=0;i<this.tempGeoGridList[t].length;++i)this.tempGeoGridList[t][i]&&(1===this.tempGeoGridList[t][i].length?this.tempGeoGridList[t][i][0].collision.Reset():this.tempGeoGridList[t][i].length>1&&this.renderer.clustersRPoint.push(new n(this.renderer,this.tempGeoGridList[t][i])))}GetCellAtPoint(t,i,e){let n=new s.h9(t.x-this.boundingBoxMin.x,t.y-this.boundingBoxMin.y),o=Math.round(n.x/this.GridResolution),r=Math.round(n.y/this.GridResolution);return o>=i&&(o=i-1),r>=e&&(r=e-1),o<0&&(o=0),r<0&&(r=0),o=Math.round(o),r=Math.round(r),this.tempGeoGridList[r][o]}Draw(t,i,e,n){if(this.UpdateTimeer(),e){this.vec=new s.h9(0,0,0),this.boundingBoxMin=new s.h9(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.boundingBoxMax=new s.h9(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let t=0;t<this.points.length;++t)this.vec.x+=this.points[t].vec.x,this.vec.y+=this.points[t].vec.y,this.UpdateBoundingBox(this.points[t].vec);this.vec.x/=this.points.length,this.vec.y/=this.points.length,this.minVec=new s.h9(this.vec.x-this.r1,this.vec.y-this.r1,0),this.maxVec=new s.h9(this.vec.x+this.r1,this.vec.y+this.r1,0)}if(o(t,this.points,this.vec,this.r0,this.r1,this.isHover,this.t),i.optimizer.inspection&&(t.beginPath(),t.rect(this.minVec.x,this.minVec.y,this.maxVec.x-this.minVec.x,this.maxVec.y-this.minVec.y),t.closePath(),t.fillStyle="rgba(0, 0, 0, 0.3)",t.fill(),t.lineWidth=.5,t.beginPath(),t.rect(this.boundingBoxMin.x,this.boundingBoxMin.y,this.boundingBoxMax.x-this.boundingBoxMin.x,this.boundingBoxMax.y-this.boundingBoxMin.y),t.closePath(),t.stroke(),this.tempVecGridList.length>0))for(let i=0;i<this.tempVecGridList.length;++i)t.beginPath(),t.rect(this.tempVecGridList[i].x,this.tempVecGridList[i].y,this.GridResolution,this.GridResolution),t.closePath(),t.stroke()}UpdateTimeer(){this.t-=.1,this.t=this.t<.4?.4:this.t}UpdateBoundingBox(t){this.boundingBoxMin.x=t.x<this.boundingBoxMin.x?t.x:this.boundingBoxMin.x,this.boundingBoxMin.y=t.y<this.boundingBoxMin.y?t.y:this.boundingBoxMin.y,this.boundingBoxMax.x=t.x>this.boundingBoxMax.x?t.x:this.boundingBoxMax.x,this.boundingBoxMax.y=t.y>this.boundingBoxMax.y?t.y:this.boundingBoxMax.y}constructor(t,i){this.r0=16,this.r1=24,this.isHover=!1,this.isVisited=!1,this.boundingBoxMin=new s.h9(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.boundingBoxMax=new s.h9(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER),this.vec=new s.h9(0,0,0),this.t=1,this.GridResolution=85,this.tempVecGridList=[],this.tempGeoGridList=[],this.renderer=t,this.points=i;for(let t=0;t<this.points.length;++t)this.vec.x+=this.points[t].vec.x,this.vec.y+=this.points[t].vec.y,this.UpdateBoundingBox(this.points[t].vec);this.vec.x/=this.points.length,this.vec.y/=this.points.length,this.minVec=new s.h9(this.vec.x-this.r1,this.vec.y-this.r1,0),this.maxVec=new s.h9(this.vec.x+this.r1,this.vec.y+this.r1,0)}}let o=function(t,i,e,s,n,o){if(arguments.length>6&&void 0!==arguments[6]&&arguments[6],o)for(let s=0;s<i.length;++s)t.lineWidth=.6,t.strokeStyle="#f00",t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i[s].vec.x,i[s].vec.y),t.closePath(),t.stroke(),t.lineWidth=1,t.strokeStyle="rgba(255, 255, 255, 1)",t.fillStyle="#f00",t.beginPath(),t.arc(i[s].vec.x,i[s].vec.y,4,0,2*Math.PI),t.closePath(),t.fill(),t.stroke();o?(t.fillStyle="#f00",t.beginPath(),t.arc(e.x,e.y,1.5,0,2*Math.PI),t.closePath(),t.fill()):(t.beginPath(),t.arc(e.x,e.y,n,0,2*Math.PI),t.closePath(),t.fillStyle="#f00",t.fill(),t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.closePath(),t.fillStyle="#0f0",t.fill(),t.fillStyle="rgba(255, 255, 255, 1)",t.font="bold 11px Arial",t.textAlign="center",t.fillText("".concat(i.length),e.x,e.y+4))};class r{InitGeometry(){this.clustersRPoint=[]}addClusterByGeometries(t){for(let i=0;i<t.length;++i)this.clustersRPoint.push(new n(this,t[i]))}RemoveCluster(t){this.clustersRPoint.splice(this.clustersRPoint.indexOf(t),1)}Render(t,i,e){if(this.clustersRPoint.length>0)for(let s=0;s<this.clustersRPoint.length;++s)this.clustersRPoint[s].Draw(t,this,i,e)}constructor(t){this.clustersRPoint=[],this.optimizer=t}}class h{update(){this.updatePoints(),this.pointList=this.BuildConnectivity(this.pointList),this.initGeometry();let t=this.buildGraph(this.pointList);if(void 0!==t){this.addClusterByGeometries(t),this.PostUpdateCollisionBasedonGraph();let i=this.NeedDecompose();i.length>0&&(this.SplitClusters(i),this.PostMergeCluster())}}initGeometry(){this.optimizer.renderer.InitGeometry()}addClusterByGeometries(t){this.optimizer.renderer.addClusterByGeometries(t)}updatePoints(){this.pointList=[];for(let t=0;t<this.optimizer.points.length;++t)if(!this.optimizer.points[t].isHidden&&this.optimizer.points[t].isRenderable){let i=this.optimizer.points[t];i.collision.Reset(),this.pointList.push(i)}}BuildConnectivity(t){for(let i=0;i<t.length;++i){let e=t[i];for(let n=i+1;n<t.length;++n){let i=t[n];!i.isCollapse&&i!==e&&(0,s.Y4)([e.collision.minVec,e.collision.maxVec],[i.collision.minVec,i.collision.maxVec])&&(e.collision.isCollided=!0,e.isCollapse=!0,e.numVisit=0,e.collision.neighborShapes.push(i),i.collision.isCollided=!0,i.isCollapse=!0,i.numVisit=0,i.collision.neighborShapes.push(e))}}return t}buildGraph(t){let i=[];for(let e=0;e<t.length;++e){let s,n=[],o=[t[e]];o[0].collision.isVisited=!0,n.push(o[0]);let r=0;for(;void 0!==(s=o.shift());){for(let t=0;t<s.collision.neighborShapes.length;++t)s.collision.neighborShapes[t].collision.isVisited||(s.collision.neighborShapes[t].collision.isVisited=!0,o.push(s.collision.neighborShapes[t]),n.push(s.collision.neighborShapes[t]));if(r++>1e3){console.debug("fail to optimize");return}}n.length>1&&i.push(n)}return i}PostUpdateCollisionBasedonGraph(){for(let t=0;t<this.optimizer.renderer.clustersRPoint.length;++t)this.UpdateByQueue(this.optimizer.renderer.clustersRPoint[t],this.pointList)}UpdateByQueue(t,i){let e=0,n=[...i];for(;n.length;){let o=n.shift();if(o){if(o.numVisit>100){o.numVisit=0;break}if(0===n.length&&i.length<e++)break;o.collision.isCollided||((0,s.Y4)([o.collision.minVec,o.collision.maxVec],[t.minVec,t.maxVec])?(o.collision.isCollided=!0,o.isCollapse=!0,o.numVisit=0,t.AddPost(o)):(o.numVisit++,n.push(o)))}}}NeedDecompose(){let t=[];for(let i=0;i<this.optimizer.renderer.clustersRPoint.length;++i)this.optimizer.renderer.clustersRPoint[i].NeedDecompose()&&t.push(this.optimizer.renderer.clustersRPoint[i]);return t}SplitClusters(t){for(let i=0;i<t.length;++i)t[i].Split()}PostMergeCluster(){this.PostMergeClusterCompute(this.optimizer.renderer.clustersRPoint)}PostMergeClusterCompute(t){for(let i=0;i<t.length-1;++i){let e=t[i];for(let n=i+1;n<t.length;++n){let i=t[n];!i.isVisited&&(0,s.TE)(e.vec,i.vec)<e.r1+20&&(i.isVisited=!0,e.Merge(i))}}}constructor(t){this.pointList=[],this.optimizer=t}}class l{push(t,i,e,n){let o=new s.MO(t,i);o.vec.lon=e,o.vec.lat=n,this.points.push(o),this.update()}mouseInteraction(t,i){}extentChanging(t,i){this.points.forEach(t=>{let e=i(t.vec.lon,t.vec.lat);t.vec.x=e[0],t.vec.y=e[1],t.updateBounding()}),this.update()}update(){this.graphClustering.update()}getCellAtPoint(t){}render(t,i,e,s){this.points.forEach(s=>{if(i){let t=e(s.vec.lon,s.vec.lat);s.vec.x=t[0],s.vec.y=t[1],s.updateBounding()}s.render(t)}),i&&this.update(),this.renderer.Render(t,i,e)}constructor(){this.mv=new s.h9(0,0),this.inspection=!0,this.points=[],this.graphClustering=new h(this),this.renderer=new r(this)}}var d=e(77719),a=e.n(d);class c{initMap(t){a().accessToken="pk.eyJ1IjoiZGVzaWduanUiLCJhIjoiY2xhNGU0YWo4MDlhYzNwdHBwenVvang4eiJ9.P3sX4l_3KjdPeRRbVS1VVg",this.map=new(a()).Map({container:t,zoom:15,center:[-71.093161,42.358871],style:"mapbox://styles/mapbox/dark-v10"}),this.map.dragRotate.disable(),this.map.on("mousemove",t=>{this.mouseMove(t)}),this.map.on("click",t=>{this.mouseClick(t)}),this.map.on("mousedown",t=>{this.mouseDown(t)}),this.map.on("dblclick",t=>{this.mouseDClick(t)}),this.map.on("mouseup",t=>{this.mouseUp(t)}),this.map.on("zoom",t=>{this.extentChanging(t)}),this.map.on("drag",t=>{this.extentChanging(t)});let i=document.getElementsByClassName("mapboxgl-canvas")[0];i.style.position="absolute",(i=document.getElementsByClassName("mapboxgl-control-container")[0]).style.display="none",this.div=i}destroy(){this.div.parentElement.removeChild(this.div)}constructor(t){var i=this;this.center=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-99.292649,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:39.043903;i.map.setCenter({lat:e,lng:t})},this.toMap=(t,i)=>{let e=this.map.unproject({x:t,y:i});return[e.lng,e.lat]},this.toScreen=(t,i)=>{let e=this.map.project([t,i]);return[e.x,e.y]},this.extentChanging=t=>{},this.mouseDown=t=>{},this.mouseUp=t=>{},this.mouseMove=t=>{},this.mouseClick=t=>{},this.mouseDClick=t=>{},this.initMap(t)}}var u=e(88876);class p{keyDown(t){}destroy(){for(this.mapboxWrapper.destroy(),this.renderer.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}constructor(t){this.mouseDown=t=>{},this.mouseUp=t=>{},this.mouseDrag=t=>{},this.mouseClick=t=>{this.renderer.pts.push([t.lngLat.lng,t.lngLat.lat]);let i=this.mapboxWrapper.toScreen(t.lngLat.lng,t.lngLat.lat);this.renderer.mouseClick(i[0],i[1])},this.mouseMove=t=>{},this.extentChanging=t=>{this.renderer.extentChanging(t)},this.divHost=document.getElementById(t),this.divHost.style.position="relative",this.mapboxWrapper=new c(this.divHost.id),this.mapboxWrapper.mouseDown=this.mouseDown,this.mapboxWrapper.mouseUp=this.mouseUp,this.mapboxWrapper.mouseClick=this.mouseClick,this.mapboxWrapper.mouseMove=this.mouseMove,this.mapboxWrapper.extentChanging=this.extentChanging,setTimeout(()=>{this.renderer=new m(this.divHost,this)},100)}}class m extends u.RendererCanvas{render(t){this.time+=.1,this.clustering.render(t,this.app.mapboxWrapper.map.isMoving()||this.app.mapboxWrapper.map.isZooming(),this.app.mapboxWrapper.toScreen,this.app.mapboxWrapper.toMap)}constructor(t,i){super(t),this.time=0,this.pts=[],this.mouseClick=(t,i)=>{let e=this.app.mapboxWrapper.toMap(t,i);this.clustering.push(t,i,e[0],e[1])},this.extentChanging=t=>{},this.mouseUp=(t,i)=>{},this.mouseDrag=(t,i)=>{},this.app=i,this.canvas.id="mapboxCustom",this.canvas.style.position="absolute",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.pointerEvents="none",this.pts.push([-71.093161,42.358871]),this.clustering=new l,this.start()}}}}]);
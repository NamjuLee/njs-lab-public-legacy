"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5982,63332],{91870:function(e,t,r){r.d(t,{a:function(){return S},b:function(){return f},c:function(){return n},e:function(){return _},f:function(){return o},g:function(){return m},i:function(){return d},j:function(){return y},l:function(){return g},n:function(){return p},s:function(){return l},t:function(){return b}});var i=r(77584);function n(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function l(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function o(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function a(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function u(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function f(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function c(e,t){let r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],l=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+l*l)}function h(e,t){let r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],l=t[3]-e[3];return r*r+i*i+n*n+l*l}function d(e){let t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function y(e){let t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function p(e,t){let r=t[0],i=t[1],n=t[2],l=t[3],o=r*r+i*i+n*n+l*l;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=l*o),e}function m(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function g(e,t,r,i){let n=t[0],l=t[1],o=t[2],s=t[3];return e[0]=n+i*(r[0]-n),e[1]=l+i*(r[1]-l),e[2]=o+i*(r[2]-o),e[3]=s+i*(r[3]-s),e}function b(e,t,r){let i=t[0],n=t[1],l=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*l+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*l+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*l+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*l+r[15]*o,e}function S(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function _(e,t){let r=e[0],n=e[1],l=e[2],o=e[3],s=t[0],a=t[1],u=t[2],f=t[3],c=(0,i.bn)();return Math.abs(r-s)<=c*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=c*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(l-u)<=c*Math.max(1,Math.abs(l),Math.abs(u))&&Math.abs(o-f)<=c*Math.max(1,Math.abs(o),Math.abs(f))}Object.freeze(Object.defineProperty({__proto__:null,add:o,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:n,copyVec3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:c,distance:c,div:u,divide:u,dot:m,equals:_,exactEquals:S,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:d,length:d,lerp:g,max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},mul:a,multiply:a,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:p,random:function(e,t){let r,n,l,o,s,a;let u=i.FD;t=t||1;do s=(r=2*u()-1)*r+(n=2*u()-1)*n;while(s>=1);do a=(l=2*u()-1)*l+(o=2*u()-1)*o;while(a>=1);let f=Math.sqrt((1-s)/a);return e[0]=t*r,e[1]=t*n,e[2]=t*l*f,e[3]=t*o*f,e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:f,scaleAndAdd:function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e},set:l,sqrDist:h,sqrLen:y,squaredDistance:h,squaredLength:y,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:s,subtract:s,transformMat4:b,transformQuat:function(e,t,r){let i=t[0],n=t[1],l=t[2],o=r[0],s=r[1],a=r[2],u=r[3],f=u*i+s*l-a*n,c=u*n+a*i-o*l,h=u*l+o*n-s*i,d=-o*i-s*n-a*l;return e[0]=f*u+-(d*o)+-(c*a)- -(h*s),e[1]=c*u+-(d*s)+-(h*o)- -(f*a),e[2]=h*u+-(d*a)+-(f*s)- -(c*o),e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))},57812:function(e,t,r){r.d(t,{z:function(){return n}});var i=r(85515);class n{constructor(e,t){this._storage=new i.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},85515:function(e,t,r){r.d(t,{WJ:function(){return s},Xq:function(){return o}});var i,n,l=r(35313);(i=n||(n={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";class o{constructor(e,t,r){this.name=e,this._storage=t,this.id=a+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,r,i=0){this._storage.put(this,e,t,r,i)}pop(e){let t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){let t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t,r){this._storage.updateSize(this,e,t,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class s{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new l.Z,this._users=new l.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(t=>t[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){let r=this._db.get(e.id+t);return r?.size??0}put(e,t,r,i,l){t=e.id+t;let o=this._db.get(t);return(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(t),o.entry!==r&&this._notifyRemove(t,o.entry,o.size,n.ALL)),i>this._maxSize)?void this._notifyRemove(t,r,i,n.ALL):void 0===r?void console.warn("Refusing to cache undefined entry "):!i||i<0?(console.warn(`Refusing to cache entry with size ${i} for key ${t}`),void this._notifyRemove(t,r,0,n.ALL)):void(this._db.set(t,new u(r,i,1+Math.max(l,-4)- -3)),this._size+=i,e.size+=i,this._checkSize())}updateSize(e,t,r,i){t=e.id+t;let l=this._db.get(t);if(l&&l.entry===r){for(this._size-=l.size,e.size-=l.size;i>this._maxSize;){let e=this._notifyRemove(t,r,i,n.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);i=e}l.size=i,this._size+=i,e.size+=i,this._checkSize()}}pop(e,t){t=e.id+t;let r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(e,t){t=e.id+t;let r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}peek(e,t){let r=this._db.get(e.id+t);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){let e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=[];this._db.forEach((e,i)=>{let n=e.lifetime;r[n]=(r[n]||0)+e.size,this._users.forAll(r=>{let{id:n,name:l}=r;if(i.startsWith(n)){let r=t[l]||0;t[l]=r+e.size}})});let i={};this._users.forAll(e=>{let r=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){let n=t[r]||0;t[r]=n,i[r]=Math.round(100*e.hitRate)+"%"}else i[r]="0%"});let n=Object.keys(t);n.sort((e,r)=>t[r]-t[e]),n.forEach(r=>e[r]=Math.round(t[r]/1048576)+"MB / "+i[r]);for(let t=r.length-1;t>=0;--t){let i=r[t];i&&(e["Priority "+(t+-3-1)]=Math.round(i/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){let t=e.id;this._db.forEach((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,e.size,n.ALL))}),e.size=0}clearAll(){this._db.forEach((e,t)=>this._notifyRemove(t,e.entry,e.size,n.ALL)),this._users.forAll(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,r,i){let n;return this._removeFuncs.some(l=>{if(e.startsWith(l[0])){let e=l[1](t,i,r);return"number"==typeof e&&(n=e),!0}return!1}),n}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e)),this._checkSizeLimits()}_checkSizeLimits(e){let t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;let r=e?.id,i=!0;for(;i;)for(let[n,l]of(i=!1,this._db))if(0===l.lifetime&&(!r||n.startsWith(r))){if(this._purgeItem(n,l,e),t.size<=.9*t.maxSize)return;i||=this._db.has(n)}for(let[i,n]of this._db)if((!r||i.startsWith(r))&&(this._purgeItem(i,n,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,r=this._users.find(t=>e.startsWith(t.id))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);let i=this._notifyRemove(e,t.entry,t.size,n.SOME);null!=i&&i>0&&(this._size+=i,r&&(r.size+=i),t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}let a=0;class u{constructor(e,t,r){this.entry=e,this.size=t,this.lifetime=r,this.lives=r}}},28541:function(e,t,r){r.d(t,{R:function(){return S},w:function(){return _}});var i=r(86641),n=r(94761),l=r(36399),o=r(61764),s=r(39553);class a{constructor(){this._propertyOriginMap=new Map,this._originStores=Array(s.v8),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){let t=new a,r=this._originStores[s.s3.DEFAULTS];r&&r.forEach((e,r)=>{t.set(r,(0,o.d9)(e),s.s3.DEFAULTS)});for(let r=s.s3.SERVICE;r<s.v8;r++){let i=this._originStores[r];i&&i.forEach((i,n)=>{e&&e.has(n)||t.set(n,(0,o.d9)(i),r)})}return t}get(e,t){let r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){let t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=s.s3.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){let i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=s.s3.USER){let r=this._originStores[t];if(!r)return;let i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){let t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){let r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;let r=this._originStores[t],i=r?.get(e),n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),n!==i}originOf(e){return this._propertyOriginMap.get(e)||s.s3.DEFAULTS}forEach(e){this._values.forEach(e)}}var u=r(22819),f=r(56529),c=r(64186);let h=e=>{let t=class extends e{constructor(...e){super(...e);let t=(0,f.vw)(this),r=t.store,i=new a;t.store=i,(0,l.M)(t,r,i)}read(e,t){(0,u.i)(this,e,t)}getAtOrigin(e,t){let r=d(this),i=(0,s.M9)(t);if("string"==typeof e)return r.get(e,i);let n={};return e.forEach(e=>{n[e]=r.get(e,i)}),n}originOf(e){return(0,s.x3)(this.originIdOf(e))}originIdOf(e){return d(this).originOf(e)}revert(e,t){let r=d(this),i=(0,s.M9)(t),n=(0,f.vw)(this);("string"==typeof e?"*"===e?r.keys(i):[e]:e).forEach(e=>{n.invalidate(e),r.revert(e,i),n.commit(e)})}};return(0,i._)([(0,c.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],t)};function d(e){return(0,f.vw)(e).store}let y=class extends h(n.Z){};y=(0,i._)([(0,c.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],y);var p=r(15458),m=r(72491);let g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return b(this).delete(e,(0,s.M9)(t))}write(e,t){return(0,m.c)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,f.vw)(this).setAtOrigin(e,t,(0,s.M9)(r))}removeOrigin(e){let t=b(this),r=(0,s.M9)(e);for(let e of t.keys(r))t.originOf(e)===r&&t.set(e,t.get(e,r),s.s3.USER)}updateOrigin(e,t){let r=b(this),i=(0,s.M9)(t),n=(0,p.U2)(this,e);for(let t=i+1;t<s.v8;++t)r.delete(e,t);r.set(e,n,i)}toJSON(e){return this.write({},e)}};return(t=(0,i._)([(0,c.j)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t};function b(e){return(0,f.vw)(e).store}let S=e=>{let t=class extends g(h(e)){constructor(...e){super(...e)}};return(0,i._)([(0,c.j)("esri.core.MultiOriginJSONSupport")],t)},_=class extends S(n.Z){};_=(0,i._)([(0,c.j)("esri.core.MultiOriginJSONSupport")],_)},97558:function(e,t,r){r.d(t,{$c:function(){return d},Hg:function(){return y},jW:function(){return c},uD:function(){return h}});var i=r(94761),n=r(50973),l=r(56529);let o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function s(e){return e instanceof i.Z}function a(e){return e instanceof n.Z?Object.keys(e.items):s(e)?(0,l.vw)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof n.Z?e.items[t]:e[t]}function f(e){return e?e.declaredClass:null}function c(e,t){return h(e,t)}function h(e,t){if(null==e)return!1;let r=t.split("."),i=e;for(let e of r){if("complete"===i.type)break;if("partial"!==i.type)return!1;{let t=i.diff[e];if(!t)return!1;i=t}}return!0}function d(e,t){if(!e)return!1;if("partial"===e.type){let r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&f(e)!==f(t)?{type:"complete",oldValue:e,newValue:t}:function e(t,r){let i;let n=t.diff;if(n&&"function"==typeof n)return n(t,r);let l=a(t),c=a(r);if(0===l.length&&0===c.length)return;if(!l.length||!c.length||!(!Array.isArray(t)||!Array.isArray(r))&&t.length!==r.length)return{type:"complete",oldValue:t,newValue:r};let h=c.filter(e=>!l.includes(e)),d=l.filter(e=>!c.includes(e)),y=l.filter(e=>c.includes(e)&&u(t,e)!==u(r,e)).concat(h,d).sort(),p=f(t);if(p&&o.has(p)&&y.length)return{type:"complete",oldValue:t,newValue:r};let m=s(t)&&s(r);for(let l of y){let o;let s=u(t,l),a=u(r,l);if((m||"function"!=typeof s&&"function"!=typeof a)&&s!==a&&(null!=s||null!=a)){if(n&&n[l]&&"function"==typeof n[l])o=n[l]?.(s,a);else if(s instanceof Date&&a instanceof Date){if(s.getTime()===a.getTime())continue;o={type:"complete",oldValue:s,newValue:a}}else o="object"==typeof s&&"object"==typeof a&&f(s)===f(a)?e(s,a):{type:"complete",oldValue:s,newValue:a};null!=o&&(null!=i?i.diff[l]=o:i={type:"partial",diff:{[l]:o}})}}return i}(e,t)}},57111:function(e,t,r){r.d(t,{C:function(){return i}});let i=["operational-layers","basemap","ground"]},40465:function(e,t,r){function i(){return[0,0,0,0]}function n(e,t,r,i){return[e,t,r,i]}function l(){return i()}function o(){return n(1,1,1,1)}function s(){return n(1,0,0,0)}function a(){return n(0,1,0,0)}function u(){return n(0,0,1,0)}function f(){return n(0,0,0,1)}r.d(t,{Ue:function(){return i},al:function(){return n}});let c=l(),h=o(),d=s(),y=a(),p=u();Object.freeze(Object.defineProperty({__proto__:null,ONES:h,UNIT_W:f(),UNIT_X:d,UNIT_Y:y,UNIT_Z:p,ZEROS:c,clone:function(e){return[e[0],e[1],e[2],e[3]]},create:i,createView:function(e,t){return new Float64Array(e,t,4)},fromArray:function(e,t=i()){let r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t},fromValues:n,ones:o,unitW:f,unitX:s,unitY:a,unitZ:u,zeros:l},Symbol.toStringTag,{value:"Module"}))},22521:function(e,t,r){r.d(t,{A4:function(){return l},L9:function(){return o},yV:function(){return n}});var i=r(9450);class n{}function l(e){return e instanceof i.ld?e===n.instance:"unknown"===e?.toString().toLowerCase()}function o(e){return l(e)?n.instance:e}n.instance=new i.vF("Etc/UTC")},48932:function(e,t,r){function i(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function n(e){if("lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length)return e;let{originPosition:t,scale:r,translate:i}=e,n=r[0]??1,l=r[1]??1;return{originPosition:"lowerLeft",scale:[n,"lowerLeft"===t?l:-l,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function l({scale:e,translate:t},r){return r*e[0]+t[0]}function o({scale:e,translate:t},r){return r*e[1]+t[1]}function s({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function a({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function u(e,t){return e&&t?d:e&&!t?c:!e&&t?h:f}r.d(t,{G6:function(){return S},Ie:function(){return b},J9:function(){return m},RF:function(){return p},U1:function(){return g},vY:function(){return i}}),r(5005);let f=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let i=t[0],n=l(e,i[0]),s=o(e,i[1]);r[0]=[n,s];let{scale:a,originPosition:u}=e,f=a[0],c="lowerLeft"===u?a[1]:-a[1];for(let e=1;e<t.length;e++){let[i,l]=t[e];n+=f*i,s+=c*l,r[e]=[n,s]}return r},c=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let i=t[0],n=l(e,i[0]),a=o(e,i[1]);r[0]=[n,a,s(e,i[2])];let{scale:u,originPosition:f}=e,c=u[0],h="lowerLeft"===f?u[1]:-u[1];for(let i=1;i<t.length;i++){let[l,o,u]=t[i];n+=c*l,a+=h*o,r[i]=[n,a,s(e,u)]}return r},h=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let i=t[0],n=l(e,i[0]),s=o(e,i[1]);r[0]=[n,s,a(e,i[2])];let{scale:u,originPosition:f}=e,c=u[0],h="lowerLeft"===f?u[1]:-u[1];for(let i=1;i<t.length;i++){let[l,o,u]=t[i];n+=c*l,s+=h*o,r[i]=[n,s,a(e,u)]}return r},d=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let i=t[0],n=l(e,i[0]),u=o(e,i[1]);r[0]=[n,u,s(e,i[2]),a(e,i[3])];let{scale:f,originPosition:c}=e,h=f[0],d="lowerLeft"===c?f[1]:-f[1];for(let i=1;i<t.length;i++){let[l,o,f,c]=t[i];n+=h*l,u+=d*o,r[i]=[n,u,s(e,f),a(e,c)]}return r};function y(e,t,r){let i=Array(r.length);for(let n=0;n<r.length;n++)i[n]=t(e,r[n]);return i}function p(e,t,r){let i=n(e);return t.x=function({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}(i,r.x),t.y=function({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}(i,r.y),null!=r.z&&(t.z=function({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}(i,r.z)),null!=r.m&&(t.m=function({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}(i,r.m)),t}function m(e,t,r,i=r?.hasZ??!1,l=r?.hasM??!1){if(null!=r){let o=n(e);t.points=u(i,l)(o,r.points),t.hasZ=i,t.hasM=l}return t}function g(e,t,r,i=null!=r?.z,u=null!=r?.m){if(null==r)return t;let f=n(e);return t.x=l(f,r.x),t.y=o(f,r.y),i&&(t.z=s(f,r.z)),u&&(t.m=a(f,r.m)),t}function b(e,t,r,i=r?.hasZ??!1,l=r?.hasM??!1){if(null!=r){let o=n(e);t.rings=y(o,u(i,l),r.rings),t.hasZ=i,t.hasM=l}return t}function S(e,t,r,i=r?.hasZ??!1,l=r?.hasM??!1){if(null!=r){let o=n(e);t.paths=y(o,u(i,l),r.paths),t.hasZ=i,t.hasM=l}return t}},49128:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var i,n=r(86641);r(55066);var l=r(50973),o=r(94755),s=r(28541),a=r(31124),u=r(20128),f=r(72659),c=r(89312);r(37180),r(65223),r(3457);var h=r(37647),d=r(64186),y=r(50713),p=r(36502),m=r(37109),g=r(14066),b=r(59727),S=r(15346),_=r(3482),M=r(89973),v=r(78298),w=r(60163),I=r(689),C=r(21962),L=r(44340),T=r(61733),x=r(1822),P=r(9377);let z=i=class extends w.Z.EventedMixin((0,I.eC)(C.Z)){constructor(...e){super(...e),this.description=null,this.fullExtent=null,this.id=null,this.networkLink=null,this.parent=null,this.sublayers=null,this.title=null,this.sourceJSON=null,this.layer=null,this.addHandles([(0,u.on)(()=>this.sublayers,"after-add",({item:e})=>{e.parent=this,e.layer=this.layer},u.Z_),(0,u.on)(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=e.parent=null},u.Z_),(0,u.YP)(()=>this.sublayers,(e,t)=>{if(t)for(let e of t)e.layer=e.parent=null;if(e)for(let t of e)t.parent=this,t.layer=this.layer},u.Z_),(0,u.YP)(()=>this.layer,e=>{if(this.sublayers)for(let t of this.sublayers)t.layer=e},u.Z_)])}initialize(){(0,u.N1)(()=>this.networkLink).then(()=>(0,u.N1)(()=>!0===this.visible)).then(()=>this.load())}load(e){if(!this.networkLink||this.networkLink.viewFormat)return;let t=null!=e?e.signal:null,r=this._fetchService(this._get("networkLink")?.href??"",t).then(e=>{let t=(0,x.lm)(e.sublayers);this.fullExtent=P.Z.fromJSON(t),this.sourceJSON=e;let r=(0,T.se)(l.Z.ofType(i),(0,x.j5)(i,e));this.sublayers?this.sublayers.addMany(r):this.sublayers=r,this.layer?.emit("sublayer-update"),this.layer&&this.layer.notifyChange("visibleSublayers")});return this.addResolvingPromise(r),Promise.resolve(this)}get visible(){return this._get("visible")}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}readVisible(e,t){return!!t.visibility}_fetchService(e,t){return(0,x.CS)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then(e=>(0,x.Cw)(e.data))}};(0,n._)([(0,c.Cb)()],z.prototype,"description",void 0),(0,n._)([(0,c.Cb)({type:P.Z})],z.prototype,"fullExtent",void 0),(0,n._)([(0,c.Cb)()],z.prototype,"id",void 0),(0,n._)([(0,c.Cb)({readOnly:!0,value:null})],z.prototype,"networkLink",void 0),(0,n._)([(0,c.Cb)({json:{write:{allowNull:!0}}})],z.prototype,"parent",void 0),(0,n._)([(0,c.Cb)({type:l.Z.ofType(z),json:{write:{allowNull:!0}}})],z.prototype,"sublayers",void 0),(0,n._)([(0,c.Cb)({value:null,json:{read:{source:"name",reader:e=>(0,L.Cb)(e)}}})],z.prototype,"title",void 0),(0,n._)([(0,c.Cb)({value:!0})],z.prototype,"visible",null),(0,n._)([(0,h.r)("visible",["visibility"])],z.prototype,"readVisible",null),(0,n._)([(0,c.Cb)()],z.prototype,"sourceJSON",void 0),(0,n._)([(0,c.Cb)()],z.prototype,"layer",void 0);let O=z=i=(0,n._)([(0,d.j)("esri.layers.support.KMLSublayer")],z),F=["kml","xml"],k=class extends(0,g.h7)((0,_.Q)((0,M.M)((0,b.q)((0,S.I)((0,s.R)(m.Z)))))){constructor(...e){super(...e),this._visibleFolders=[],this.allSublayers=new o.Z({getCollections:()=>[this.sublayers],getChildrenFunction:e=>e.sublayers}),this.outSpatialReference=p.Z.WGS84,this.path=null,this.legendEnabled=!1,this.operationalLayerType="KML",this.sublayers=null,this.type="kml",this.url=null}initialize(){this.addHandles([(0,u.YP)(()=>this.sublayers,(e,t)=>{t&&t.forEach(e=>{e.parent=null,e.layer=null}),e&&e.forEach(e=>{e.parent=this,e.layer=this})},u.Z_),this.on("sublayer-update",()=>this.notifyChange("fullExtent"))])}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readSublayersFromItemOrWebMap(e,t){this._visibleFolders=t.visibleFolders}readSublayers(e,t,r){return(0,x.j5)(O,t,r,this._visibleFolders)}writeSublayers(e,t){let r=[],i=e.toArray();for(;i.length;){let e=i[0];e.networkLink||(e.visible&&r.push(e.id),e.sublayers&&i.push(...e.sublayers.toArray())),i.shift()}t.visibleFolders=r}get title(){let e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?(0,f.vt)(this.url,F)||"KML":e}set title(e){this._set("title",e)}get visibleSublayers(){let e=this.sublayers,t=[],r=e=>{e.visible&&(t.push(e),e.sublayers&&e.sublayers.forEach(r))};return e&&e.forEach(r),t}get fullExtent(){return this._recomputeFullExtent()}load(e){let t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"],supportsData:!1},e).catch(a.r9).then(()=>this._fetchService(t))),Promise.resolve(this)}destroy(){super.destroy(),this.allSublayers.destroy()}async _fetchService(e){let t=await Promise.resolve().then(()=>this.resourceInfo?{ssl:!1,data:this.resourceInfo}:(0,x.CS)(this.url??"",this.outSpatialReference,this.refreshInterval,e)),r=(0,x.Cw)(t.data);r&&this.read(r,{origin:"service"})}_recomputeFullExtent(){let e=null;null!=this.extent&&(e=this.extent.clone());let t=r=>{if(r.sublayers)for(let i of r.sublayers.items)t(i),i.visible&&i.fullExtent&&(null!=e?e.union(i.fullExtent):e=i.fullExtent.clone())};return t(this),e}};(0,n._)([(0,c.Cb)({readOnly:!0})],k.prototype,"allSublayers",void 0),(0,n._)([(0,c.Cb)({type:p.Z})],k.prototype,"outSpatialReference",void 0),(0,n._)([(0,c.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],k.prototype,"path",void 0),(0,n._)([(0,c.Cb)({readOnly:!0,json:{read:!1,write:!1}})],k.prototype,"legendEnabled",void 0),(0,n._)([(0,c.Cb)({type:["show","hide","hide-children"]})],k.prototype,"listMode",void 0),(0,n._)([(0,c.Cb)({type:["KML"]})],k.prototype,"operationalLayerType",void 0),(0,n._)([(0,c.Cb)({})],k.prototype,"resourceInfo",void 0),(0,n._)([(0,c.Cb)({type:l.Z.ofType(O),json:{write:{ignoreOrigin:!0}}})],k.prototype,"sublayers",void 0),(0,n._)([(0,h.r)(["web-map","portal-item"],"sublayers",["visibleFolders"])],k.prototype,"readSublayersFromItemOrWebMap",null),(0,n._)([(0,h.r)("service","sublayers",["sublayers"])],k.prototype,"readSublayers",null),(0,n._)([(0,y.c)("sublayers")],k.prototype,"writeSublayers",null),(0,n._)([(0,c.Cb)({readOnly:!0,json:{read:!1}})],k.prototype,"type",void 0),(0,n._)([(0,c.Cb)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],k.prototype,"title",null),(0,n._)([(0,c.Cb)(v.HQ)],k.prototype,"url",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],k.prototype,"visibleSublayers",null),(0,n._)([(0,c.Cb)({type:P.Z})],k.prototype,"extent",void 0),(0,n._)([(0,c.Cb)()],k.prototype,"fullExtent",null);let E=k=(0,n._)([(0,d.j)("esri.layers.KMLLayer")],k)},59727:function(e,t,r){r.d(t,{q:function(){return _}});var i=r(86641),n=r(14627),l=r(94605),o=r(72659),s=r(89312),a=r(61733);r(3457),r(37180);var u=r(37647),f=r(64186),c=r(50713),h=r(57111),d=r(22819),y=r(72491);let p={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},m={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},g={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},b={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":p,"web-map/basemap":m,"web-map/tables":g,"link-chart/operational-layers":{...p,LinkChartLayer:!0},"link-chart/basemap":m,"link-chart/tables":g,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};var S=r(78298);let _=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,r){return"Group Layer"===r?.portalItem?.type?void 0:e}writeListMode(e,t,r,i){(i&&"ground"===i.layerContainerType||e&&(0,y.d)(this,r,{},i))&&(t[r]=e)}writeOperationalLayerType(e,t,r,i){e&&"tables"!==i?.layerContainerType&&(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}readTimeExtent(e){return e?n.Z.fromArray(e):null}writeTimeExtent(e,t,r,i){e&&"tables"!==i.layerContainerType&&(e.isEmpty?i?.messages&&i.messages.push(new l.Z("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[r]=e.toArray())}read(e,t){t&&(t.layer=this),(0,d.$)(this,e,t=>super.read(e,t),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){let e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=b[e],i=!!r?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(i=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(i=!1),!i)return t.messages?.push(new l.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}let r=super.write(e,{...t,layer:this}),i=!!t&&!!t.messages&&!!t.messages.filter(e=>e instanceof l.Z&&"web-document-write:property-required"===e.name).length;return(0,o.jc)(r?.url)?(t?.messages?.push(new l.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&i?null:r}beforeSave(){}};return(0,i._)([(0,s.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,i._)([(0,u.r)("id",["id"])],t.prototype,"readId",null),(0,i._)([(0,s.Cb)(S.rT)],t.prototype,"listMode",void 0),(0,i._)([(0,c.c)("listMode")],t.prototype,"writeListMode",null),(0,i._)([(0,s.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:h.C}}}}})],t.prototype,"operationalLayerType",void 0),(0,i._)([(0,c.c)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,i._)([(0,s.Cb)(S.Oh)],t.prototype,"opacity",void 0),(0,i._)([(0,s.Cb)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,i._)([(0,s.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,i._)([(0,c.c)("title"),(0,c.c)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,i._)([(0,s.Cb)({type:n.Z,json:{origins:{"web-scene":{write:{layerContainerTypes:h.C}}}}})],t.prototype,"visibilityTimeExtent",void 0),(0,i._)([(0,u.r)("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),(0,i._)([(0,c.c)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[a.z8,a.p2]]}})],t.prototype,"writeTimeExtent",null),(0,i._)([(0,s.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:h.C}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=(0,i._)([(0,f.j)("esri.layers.mixins.OperationalLayer")],t)}},15346:function(e,t,r){r.d(t,{I:function(){return v}});var i=r(86641),n=r(39301),l=r(94596),o=r(54748),s=r(27817),a=r(94605),u=r(65223),f=r(36152),c=r(31124),h=r(72659),d=r(89312);r(37180),r(3457);var y=r(37647),p=r(64186),m=r(50713),g=r(24243),b=r(81449),S=r(20550),_=r(86541),M=r(63332);let v=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,f.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new S.default({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{let{load:i}=await Promise.all([r.e(22065),r.e(86487)]).then(r.bind(r,86487));return(0,c.k_)(t),await i({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(e){throw(0,c.D_)(e)||u.Z.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch(e=>((0,c.r9)(e),!0)))}async setUserPrivileges(e,t){if(!n.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{let{features:{edit:r,fullEdit:i},content:{updateItem:n}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",i),this._set("userHasUpdateItemPrivileges",n)}catch(e){(0,c.r9)(e)}}async _fetchUserPrivileges(e,t){let r,i,n=this.portalItem;if(!e||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(t);let o=e===n.id;if(o&&n.portal.user)return(0,M.Ss)(n);if(o)r=n.portal.url;else try{r=await (0,g.oP)(this.url,t)}catch(e){(0,c.r9)(e)}if(!r||!(0,h.Zo)(r,n.portal.url))return this._fetchFallbackUserPrivileges(t);try{let e=null!=t?t.signal:null;i=await l.id?.getCredential(`${r}/sharing`,{prompt:!1,signal:e})}catch(e){(0,c.r9)(e)}if(!i)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(o?await n.reload():(n=new S.default({id:e,portal:{url:r}}),await n.load(t)),n.portal.user)return(0,M.Ss)(n)}catch(e){(0,c.r9)(e)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,c.r9)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){let t=this.url?l.id?.findCredential(this.url):null;if(!t)return!0;let r=w.credential===t?w.user:await this._fetchEditingUser(e);return w.credential=t,w.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){let t=this.portalItem?.portal?.user;if(t)return t;let r=l.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;let i=`${r.owningSystemUrl}/sharing/rest`,n=b.Z.getDefault();if(n&&n.loaded&&(0,h.Fv)(n.restUrl)===(0,h.Fv)(i))return n.user;let a=`${i}/community/self`,u=null!=e?e.signal:null,f=await (0,s.q6)((0,o.Z)(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return f.ok?_.Z.fromJSON(f.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){let r=t?.portal,i=this.portalItem?.id&&(this.portalItem.portal||b.Z.getDefault());return r&&i&&!(0,h.tm)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new a.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i._)([(0,d.Cb)({type:S.default})],t.prototype,"portalItem",null),(0,i._)([(0,y.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,i._)([(0,m.c)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,i._)([(0,d.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,i._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,i._)([(0,p.j)("esri.layers.mixins.PortalLayer")],t)},w={credential:null,user:null}},3482:function(e,t,r){r.d(t,{Q:function(){return g}});var i=r(86641);r(37180);var n=r(65223),l=r(31124),o=r(89312),s=r(1275);r(3457);var a=r(64186),u=r(57111),f=r(50973);r(27817),r(94605),r(22926);var c=r(19164);let h=new f.Z,d=new WeakMap,y=0,p=0;function m(){let e=Date.now(),t=!1;for(let r of h){let i=r.deref();i?i.refreshInterval&&e-(d.get(i)??0)+5>=6e4*i.refreshInterval&&(d.set(i,e),i.refresh(e)):t=!0}if(t)for(let e=h.length-1;e>=0;e--)h.at(e).deref()||h.removeAt(e)}(0,c.EH)(()=>{let e=Date.now(),t=0;for(let r of h){let i=r.deref();i&&(t=function e(t,r){return Number.isFinite(t)&&Number.isFinite(r)?r<=0?t:e(r,t%r):0}(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?d.get(i)||d.set(i,e):d.delete(i))}if(t!==p){if(p=t,clearInterval(y),0===p)return void(y=0);y=setInterval(m,p)}});let g=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,l.Ds)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||null!=this&&"object"==typeof this&&"refreshInterval"in this&&"refresh"in this&&h.push(new WeakRef(this))},()=>{})}destroy(){!function(e){let t=h.find(t=>t.deref()===e);t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,l.R8)(this._debounceHasDataChanged()).then(t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})},e=>{n.Z.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})})}async hasDataChanged(){return!0}get test(){}};return(0,i._)([(0,o.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.C}}}}})],t.prototype,"refreshInterval",void 0),(0,i._)([(0,s.p)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,i._)([(0,o.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,i._)([(0,o.Cb)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,i._)([(0,a.j)("esri.layers.mixins.RefreshableLayer")],t)}},32370:function(e,t,r){r.d(t,{Z:function(){return h}});var i=r(94605),n=r(689),l=r(65223),o=r(59528),s=r(22521),a=r(67009),u=r(46200),f=r(9450);let c=new Map;class h{static fromJSON(e){return new h(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new h(e.fields??[],m(e))}static fromLayerJSON(e){return new h(e.fields??[],m(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;let r=[];for(let e of this.fields){let t=e?.name,i=y(t);if(t&&i){let n=d(t);this._fieldsMap.set(t,e),this._fieldsMap.set(n,e),this._normalizedFieldsMap.set(i,e),r.push(`${n}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,a.y2)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,a.H7)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,a.Dl)(e)||(0,a.Se)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields)for(let e of(this._requiredFields=[],this.fields))(0,a.Dl)(e)||(0,a.Se)(e)||e.nullable||void 0!==(0,a.os)(e)||this._requiredFields.push(e);return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||((t=this._fieldsMap.get(d(e))??this._normalizedFieldsMap.get(y(e)))&&this._fieldsMap.set(e,t),t)}getTimeZone(e){let t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(l.Z.getLogger("esri.layers.support.FieldsIndex").error(new i.Z("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.pt):p.has(t.type)?u._4:null:null}getLuxonTimeZone(e){let t=this.getTimeZone(e);return t?t===u._4?s.yV.instance:t===u.pt?f.Qf.utcInstance:(0,o.s1)(c,t,()=>f.vF.create(t)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,a.sX)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>(0,n.AK)(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function d(e){return e.trim().toLowerCase()}function y(e){return a.q6(e)?.toLowerCase()??""}let p=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function m(e){let t=new Map;if(!e.fields)return t;let r=!0===e.datesInUnknownTimezone,{timeInfo:i,editFieldsInfo:n}=e,l=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",s="dateFieldsTimeZone"in e?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,u.Jv)(e.dateFieldsTimeReference):null,a=n?"timeZone"in n?n.timeZone??s:n.dateFieldsTimeReference?(0,u.Jv)(n.dateFieldsTimeReference):s??u.pt:null,f=i?"timeZone"in i?i.timeZone??s:i.timeReference?(0,u.Jv)(i.timeReference):s:null,c=new Map([[d(n?.creationDateField??""),a],[d(n?.editDateField??""),a],[d(l),f],[d(o),f]]);for(let{name:i,type:n}of e.fields)if(p.has(n))t.set(i,u._4);else if("date"!==n&&"esriFieldTypeDate"!==n)t.set(i,null);else if(r)t.set(i,u._4);else{let e=c.get(d(i??""))??s;t.set(i,e)}return t}},78298:function(e,t,r){r.d(t,{C_:function(){return f},HQ:function(){return h},Lx:function(){return p},Oh:function(){return g},PV:function(){return y},YI:function(){return u},bT:function(){return b},iR:function(){return c},id:function(){return _},rO:function(){return M},rT:function(){return w},rn:function(){return d},u1:function(){return v},vg:function(){return S}});var i=r(57111),n=r(9377),l=r(36502),o=r(37144),s=r(81961),a=r(60536);let u={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:i.C}}},f={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},c={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:i.C}}},h={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:o.w}}},d={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:i.C}}},y={value:null,type:s.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:i.C}}};function p(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}let m={write:{enabled:!0,layerContainerTypes:i.C},read:!0},g={type:Number,json:{origins:{"web-document":m,"portal-item":{write:!0}}}},b={...g,json:{...g.json,origins:{"web-document":{...m,write:{enabled:!0,layerContainerTypes:i.C,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,a.b)(t.layerDefinition.drawingInfo.transparency):void 0:(0,a.b)(t.drawingInfo.transparency)}}},S={type:n.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{let r=n.Z.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=l.Z.fromJSON(t.spatialReference)),r}}}},read:!1}},_={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},M={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:i.C}}},name:"layerDefinition.minScale",write:!0}},v={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:i.C}}},name:"layerDefinition.maxScale",write:!0}},w={json:{write:{ignoreOrigin:!0,layerContainerTypes:i.C},origins:{"web-map":{read:!1,write:!1}}}}},1822:function(e,t,r){r.d(t,{CS:function(){return m},Cw:function(){return p},Yu:function(){return S},j5:function(){return g},lm:function(){return _}});var i=r(39301),n=r(94596),l=r(23504),o=r(54748),s=r(61764),a=r(72659),u=r(36502),f=r(54053),c=r(87394),h=r(90071),d=r(9158);let y={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function p(e){let t=e.folders||[],r=t.slice(),i=new Map,n=new Map,l=new Map,o=new Map,a=new Map,u={esriGeometryPoint:n,esriGeometryPolyline:l,esriGeometryPolygon:o};(e.featureCollection?.layers||[]).forEach(e=>{let t=(0,s.d9)(e);t.featureSet.features=[];let r=e.featureSet.geometryType;i.set(r,t);let a=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?b(n,a,e.featureSet.features):"esriGeometryPolyline"===r?b(l,a,e.featureSet.features):"esriGeometryPolygon"===r&&b(o,a,e.featureSet.features)}),e.groundOverlays&&e.groundOverlays.forEach(e=>{a.set(e.id,e)}),t.forEach(t=>{t.networkLinkIds.forEach(i=>{let n=function(e,t,r){let i;let n=(r.some(t=>t.id===e&&(i=t,!0)),i);return n&&(n.parentFolderId=t,n.networkLink=n),n}(i,t.id,e.networkLinks);n&&r.push(n)})}),r.forEach(e=>{if(e.featureInfos){for(let t of(e.points=(0,s.d9)(i.get("esriGeometryPoint")),e.polylines=(0,s.d9)(i.get("esriGeometryPolyline")),e.polygons=(0,s.d9)(i.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos))switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{let r=u[t.type].get(t.id);r&&e[y[t.type]]?.featureSet.features.push(r);break}case"GroundOverlay":{let r=a.get(t.id);r&&e.mapImages.push(r)}}e.fullExtent=_([e])}});let f=_(r);return{folders:t,sublayers:r,extent:f}}function m(e,t,r,l){let s=n.id?.findCredential(e);e=(0,a.fl)(e,{token:s?.token});let u=i.default.kmlServiceUrl;return(0,o.Z)(u,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:l})}function g(e,t,r=null,i=[]){let n=[],l={},o=t.sublayers,s=new Set(t.folders.map(e=>e.id));return o.forEach(t=>{let o=new e;if(r?o.read(t,r):o.read(t),i.length&&s.has(o.id)&&(o.visible=i.includes(o.id)),l[t.id]=o,null!=t.parentFolderId&&-1!==t.parentFolderId){let e=l[t.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers?.unshift(o)}else n.unshift(o)}),n}function b(e,t,r){r.forEach(r=>{e.set(r.attributes[t],r)})}async function S(e){let t=d.Z.fromJSON(e.featureSet).features,r=e.layerDefinition,i=(0,h.i)(r.drawingInfo.renderer),n=l.Z.fromJSON(e.popupInfo),o=[];for(let e of t){let t=await i.getSymbolAsync(e);e.symbol=t,e.popupTemplate=n,e.visible=!0,o.push(e)}return o}function _(e){let t=(0,f.Ue)(f.G_),r=(0,f.Ue)(f.G_);for(let i of e){if(i.polygons?.featureSet?.features)for(let e of i.polygons.featureSet.features)(0,c.Yg)(t,e.geometry),(0,f.TC)(r,t);if(i.polylines?.featureSet?.features)for(let e of i.polylines.featureSet.features)(0,c.Yg)(t,e.geometry),(0,f.TC)(r,t);if(i.points?.featureSet?.features)for(let e of i.points.featureSet.features)(0,c.Yg)(t,e.geometry),(0,f.TC)(r,t);if(i.mapImages)for(let e of i.mapImages)(0,c.Yg)(t,e.extent),(0,f.TC)(r,t)}return(0,f.fS)(r,f.G_)?void 0:{xmin:r[0],ymin:r[1],zmin:r[2],xmax:r[3],ymax:r[4],zmax:r[5],spatialReference:u.Z.WGS84}}},63332:function(e,t,r){r.d(t,{$o:function(){return c},Fj:function(){return u},Ss:function(){return d},_$:function(){return a},ck:function(){return f},hz:function(){return h},qj:function(){return s}});var i=r(20928),n=r(36502),l=r(56132);async function o(e){let t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,l.Sx)(e);let r=n.Z.WGS84;return await (0,i.initializeProjection)(t,r),(0,i.project)(e,r)}function s(e,t){if(!a(e,t)){let r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords?.includes(t)}function u(e){return a(e,h.HOSTED_SERVICE)}function f(e,t){let r=e.typeKeywords;if(r){let e=r.indexOf(t);e>-1&&r.splice(e,1)}}async function c(e){let t;let r=e.clone().normalize();if(r.length>1)for(let e of r)t?e.width>t.width&&(t=e):t=e;else t=r[0];return o(t)}let h={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function d(e){let{portal:t,isOrgItem:r,itemControl:i}=e,n=t.user?.privileges,l=!n||n.includes("features:user:edit"),o=!!r&&!!n?.includes("features:user:fullEdit"),s="update"===i||"admin"===i;return s?o=l=!0:o&&(l=!0),{features:{edit:l,fullEdit:o},content:{updateItem:s}}}},95015:function(e,t,r){r.d(t,{AJ:function(){return u},If:function(){return c},k0:function(){return a},uI:function(){return f},ul:function(){return s},wx:function(){return h}});var i=r(13507),n=r(4392),l=r(91870),o=r(40465);let s=2.4;function a(e){return(0,n.Wz)(e*s)}function u(e){return(0,n.F2)(e)/s}function f(e){let t=new Uint8ClampedArray(2048);if((e=e.filter(({ratio:e})=>e>=0&&e<=1).sort((e,t)=>e.ratio-t.ratio).map(({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))).length<1)return t;let r=e[0],n=e[0],s=1,a=(0,o.Ue)();for(let o=0;o<512;o++){let u=(o+.5)/512;for(;u>n.ratio&&s<e.length;)r=n,n=e[s++];(function(e,t,r,n){let{color:o,ratio:s}=t,{color:a,ratio:u}=r;u===s&&(1===u?s-=1e-6:u+=1e-6);let f=(0,i.uZ)((n-s)/(u-s),0,1);(0,l.l)(e,o.toArray(),a.toArray(),f)})(a,r,n,u),t.set(a,4*o)}return t}function c(e,t,r){let i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function h(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},9158:function(e,t,r){r.d(t,{Z:function(){return S}});var i,n=r(86641),l=r(55066),o=r(19637),s=r(740),a=r(689),u=r(61764),f=r(89312);r(37180),r(65223);var c=r(37647),h=r(64186),d=r(50713),y=r(36502),p=r(5005),m=r(40041);let g=new s.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),b=i=class extends a.wq{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){let r=y.Z.fromJSON(t.spatialReference),i=[];for(let t=0;t<e.length;t++){let n=e[t],l=o.Z.fromJSON(n),s=n.geometry?.spatialReference;null==l.geometry||s||(l.geometry.spatialReference=r);let a=n.aggregateGeometries,u=l.aggregateGeometries;if(a&&null!=u)for(let e in u){let t=u[e],i=a[e],n=i?.spatialReference;null==t||n||(t.spatialReference=r)}i.push(l)}return i}writeGeometryType(e,t,r,i){if(e)return void g.write(e,t,r,i);let{features:n}=this;if(n){for(let e of n)if(null!=e?.geometry)return void g.write(e.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;let r=!!e.spatialReference,i=(0,p.im)(e);return i&&!r&&t.spatialReference&&(i.spatialReference=y.Z.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());let{features:r}=this;if(r){for(let e of r)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}}clone(){return new i(this.cloneProperties())}cloneProperties(){return(0,u.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){let t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){let i=t.features[r];if(i.geometry){let t=e?.[r];i.geometry=t?.toJSON()||i.geometry}}return t}quantize(e){let{scale:[t,r],translate:[i,n]}=e,l=this.features,o=this._getQuantizationFunction(this.geometryType,e=>Math.round((e-i)/t),e=>Math.round((n-e)/r));for(let e=0,t=l.length;e<t;e++)o?.(l[e].geometry)||(l.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){let{geometryType:e,features:t,transform:r}=this;if(!r)return this;let{translate:[i,n],scale:[l,o]}=r,s=null,a=null;if(this.hasZ&&null!=r?.scale?.[2]){let{translate:[,,e],scale:[,,t]}=r;s=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){let{translate:[,,,e],scale:[,,,t]}=r;a=r=>null==r?r:r*t+e}let u=this._getHydrationFunction(e,e=>e*l+i,e=>n-e*o,s,a);for(let{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}_quantizePoints(e,t,r){let i,n;let l=[];for(let o=0,s=e.length;o<s;o++){let s=e[o];if(o>0){let e=t(s[0]),o=r(s[1]);e===i&&o===n||(l.push([e-i,o-n]),i=e,n=o)}else i=t(s[0]),n=r(s[1]),l.push([i,n])}return l.length>0?l:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{let i=(0,p.oU)(e)?e.rings:e.paths,n=[];for(let e=0,l=i.length;e<l;e++){let l=i[e],o=this._quantizePoints(l,t,r);o&&n.push(o)}return n.length>0?((0,p.oU)(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?e=>{let i=this._quantizePoints(e.points,t,r);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,i,n){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),i&&(e.z=i(e.z))}:"polyline"===e||"polygon"===e?e=>{let l,o;let s=(0,p.oU)(e)?e.rings:e.paths;for(let e=0,i=s.length;e<i;e++){let i=s[e];for(let e=0,n=i.length;e<n;e++){let n=i[e];e>0?(l+=n[0],o+=n[1]):(l=n[0],o=n[1]),n[0]=t(l),n[1]=r(o)}}if(i&&n)for(let e=0,t=s.length;e<t;e++){let t=s[e];for(let e=0,r=t.length;e<r;e++){let r=t[e];r[2]=i(r[2]),r[3]=n(r[3])}}else if(i)for(let e=0,t=s.length;e<t;e++){let t=s[e];for(let e=0,r=t.length;e<r;e++){let r=t[e];r[2]=i(r[2])}}else if(n)for(let e=0,t=s.length;e<t;e++){let t=s[e];for(let e=0,r=t.length;e<r;e++){let r=t[e];r[2]=n(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),i&&null!=e.zmax&&null!=e.zmin&&(e.zmax=i(e.zmax),e.zmin=i(e.zmin)),n&&null!=e.mmax&&null!=e.mmin&&(e.mmax=n(e.mmax),e.mmin=n(e.mmin))}:"multipoint"===e?e=>{let l,o;let s=e.points;for(let e=0,i=s.length;e<i;e++){let i=s[e];e>0?(l+=i[0],o+=i[1]):(l=i[0],o=i[1]),i[0]=t(l),i[1]=r(o)}if(i&&n)for(let e=0,t=s.length;e<t;e++){let t=s[e];t[2]=i(t[2]),t[3]=n(t[3])}else if(i)for(let e=0,t=s.length;e<t;e++){let t=s[e];t[2]=i(t[2])}else if(n)for(let e=0,t=s.length;e<t;e++){let t=s[e];t[2]=n(t[2])}}:null}};(0,n._)([(0,f.Cb)({type:String,json:{write:!0}})],b.prototype,"displayFieldName",void 0),(0,n._)([(0,f.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"exceededTransferLimit",void 0),(0,n._)([(0,f.Cb)({type:[o.Z],json:{write:!0}})],b.prototype,"features",void 0),(0,n._)([(0,c.r)("features")],b.prototype,"readFeatures",null),(0,n._)([(0,f.Cb)({type:[m.Z],json:{write:!0}})],b.prototype,"fields",void 0),(0,n._)([(0,f.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],b.prototype,"geometryType",void 0),(0,n._)([(0,d.c)("geometryType")],b.prototype,"writeGeometryType",null),(0,n._)([(0,f.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasM",void 0),(0,n._)([(0,f.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasZ",void 0),(0,n._)([(0,f.Cb)({types:l.qM,json:{write:!0}})],b.prototype,"queryGeometry",void 0),(0,n._)([(0,c.r)("queryGeometry")],b.prototype,"readQueryGeometry",null),(0,n._)([(0,f.Cb)({type:y.Z,json:{write:!0}})],b.prototype,"spatialReference",void 0),(0,n._)([(0,d.c)("spatialReference")],b.prototype,"writeSpatialReference",null),(0,n._)([(0,f.Cb)({json:{write:!0}})],b.prototype,"transform",void 0),(b=i=(0,n._)([(0,h.j)("esri.rest.support.FeatureSet")],b)).prototype.toJSON.isDefaultToJSON=!0;let S=b},68563:function(e,t,r){r.d(t,{E:function(){return n},m:function(){return i}});let i={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},n={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0}}},88421:function(e,t,r){r.d(t,{$Z:function(){return function e(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{let r=t.symbolLayers;if(r)for(let t of r){let r=e(t);if(null!=r)return r}break}case"CIMTextSymbol":return e(t.symbol);case"CIMSolidStroke":return t.color}}},BX:function(){return w},Cc:function(){return b},E_:function(){return s},F:function(){return function e(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(let r of t.symbolLayers){let t=e(r);if(void 0!==t)return t}break;case"CIMTextSymbol":return e(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}},FG:function(){return C},H1:function(){return o},J0:function(){return p},JW:function(){return x},Le:function(){return P},Mk:function(){return function e(t){if(null==t)return!1;if(Array.isArray(t))return t.every(t=>e(t));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}},Ml:function(){return G},On:function(){return M},Qf:function(){return L},RI:function(){return S},T2:function(){return F},TB:function(){return T},TT:function(){return a},Ts:function(){return E},Ul:function(){return A},W7:function(){return function e(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(let r of t.symbolLayers){let t=e(r);if(null!=t)return t}break;case"CIMTextSymbol":return e(t.symbol);case"CIMSolidFill":return t.color}return null}},X_:function(){return I},ap:function(){return k},be:function(){return f},cO:function(){return g},dT:function(){return O},e0:function(){return function e(t){if(null==t)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{let r=t.symbolLayers;if(!r)return"Normal";for(let t of r)if("CIMVectorMarker"===t.type)return e(t)}break;case"CIMVectorMarker":{let r=t.markerGraphics;if(!r)return"Normal";for(let t of r)if(t.symbol)return e(t.symbol)}}return"Normal"}},gJ:function(){return y},k5:function(){return d},nn:function(){return n},oY:function(){return u},pJ:function(){return _},vn:function(){return m},wi:function(){return v},yL:function(){return h},yl:function(){return z},zL:function(){return c}});var i=r(68563);function n(e){return[e.r,e.g,e.b,e.a]}function l(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function o(e,t){let r=[],i=0,n=-1;do if((n=e.indexOf("[",i))>=i){if(n>i){let t=e.substr(i,n-i);r.push([t,null,l(t)])}if(i=n+1,(n=e.indexOf("]",i))>=i){if(n>i){let l=t[e.substr(i,n-i)];l&&r.push([null,l,!1])}i=n+1}}while(-1!==n);if(i<e.length-1){let t=e.substr(i);r.push([t,null,l(t)])}return r}function s(e,t,r,i){let n="",l=null;for(let i of t){let[t,o,s]=i;if(t)s?l=t:(l&&(n+=l,l=null),n+=t);else{let t=o;null!=r&&(t=E(o,r));let i=e.attributes[t];i&&(l&&(n+=l,l=null),n+=i)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(n,i)}function a(e,t,r,i,n,l,o=!0){let s=t/n,a=r/l,u=Math.ceil(s/2),f=Math.ceil(a/2);for(let r=0;r<l;r++)for(let c=0;c<n;c++){let h=4*(c+(o?l-r-1:r)*n),d=0,y=0,p=0,m=0,g=0,b=0,S=0,_=(r+.5)*a;for(let i=Math.floor(r*a);i<(r+1)*a;i++){let r=Math.abs(_-(i+.5))/f,n=(c+.5)*s,l=r*r;for(let r=Math.floor(c*s);r<(c+1)*s;r++){let o=Math.abs(n-(r+.5))/u,s=Math.sqrt(l+o*o);s>=-1&&s<=1&&(d=2*s*s*s-3*s*s+1)>0&&(S+=d*e[(o=4*(r+i*t))+3],p+=d,e[o+3]<255&&(d=d*e[o+3]/250),m+=d*e[o],g+=d*e[o+1],b+=d*e[o+2],y+=d)}}i[h]=m/y,i[h+1]=g/y,i[h+2]=b/y,i[h+3]=S/p}}function u(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function f(e){return e.data?.symbol??null}function c(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function h(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function d(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function y(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}let p=(e,t=0)=>null==e||isNaN(e)?t:e,m=(e,t)=>e??t,g=e=>e.tintColor?u(e.tintColor):[255,255,255,1],b=e=>{if(!e)return!1;for(let t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function S(){return Promise.all([r.e(58379),r.e(56362)]).then(r.bind(r,56362))}function _(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function M(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function v(e){let t="normal",r="normal";if(e){let i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function w(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function I(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function C(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function L(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}))}let T=e=>e.includes("data:image/svg+xml");function x(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function P(e){return e?e.charAt(0).toLowerCase()+e.substring(1):e}function z(e,t,r,i,n,l){var o,s;let{infos:a}=l,u=1,f=0,c=0,h=0;for(let{offsetX:e,offsetY:t,rotation:r,size:i,frameHeight:n,rotateClockWise:l}of a)c=Z(e,t,f,u,c),h=R(e,t,f,u,h),n&&(u*=i/n),o=f,f=l?o-r:o+r;let d=Z(i,n,f,u,c),y=R(i,n,f,u,h);return{size:e*u,rotation:(s=f,r?s-t:s+t),offsetX:d,offsetY:y}}function O(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...i.m[t]];let r=i.E[e];if(!r)throw Error(`InternalError: default value for type ${e}.`);return r[t]}function F(e){return e?.dashTemplate&&"string"==typeof e.dashTemplate&&(e.dashTemplate=e.dashTemplate.split(" ").map(Number)),e}function k(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(let r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{let e=r.size??i.E.CIMVectorMarker.size;e>t&&(t=e)}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(let r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{let e=r.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&y(r.markerPlacement)){let e=r.size??i.E.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{let e=r.height;null!=e&&e>t&&(t=e)}}}return t}}}function E(e,t){if(null!==t){let r=t.get(e);return r?r.name:e}return e}function A(e){return e.map(e=>({...e,propertyName:P(e.propertyName)}))}function G(e){let t={};for(let r in e){let i=e[r];t[P(r)]=i}return t}function R(e,t,r,i,n){let l=r*Math.PI/180;return l?(Math.sin(l)*e+Math.cos(l)*t)*i+n:t*i+n}function Z(e,t,r,i,n){let l=r*Math.PI/180;return l?(Math.cos(l)*e-Math.sin(l)*t)*i+n:e*i+n}},98499:function(e,t,r){r.d(t,{CJ:function(){return u},G:function(){return h},Rz:function(){return c},kD:function(){return y},mW:function(){return d},xA:function(){return a},z3:function(){return f}}),r(37180);var i=r(88565),n=r(94833),l=r(96938),o=r(47116),s=r(8739);let a=l.Z.fromJSON(s.I4),u=n.Z.fromJSON(s.ET),f=i.Z.fromJSON(s.lF),c=o.Z.fromJSON(s.qP),h=l.Z.fromJSON(s.eG),d=n.Z.fromJSON(s.wW),y=i.Z.fromJSON(s.lj)},8739:function(e,t,r){r.d(t,{ET:function(){return o},I4:function(){return l},SQ:function(){return i},X1:function(){return n},eG:function(){return u},lF:function(){return s},lj:function(){return c},qP:function(){return a},wW:function(){return f}});let i=[252,146,31,255],n=[153,153,153,255],l={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},s={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},f={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);
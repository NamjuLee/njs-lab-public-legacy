"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36417],{36417:function(e,t,s){s.r(t),s.d(t,{ExpressImageViewer:function(){return r}});var i=s(92612);class n{get mode(){return this._mode}set mode(e){this._mode=e,this._numFrame=0,this._mode===i.An.InteractiveViewer?(this.canvas.onmouseenter=e=>{this._numFrame=0,this.loop()},this.canvas.onmousemove=e=>{this._numFrame>this._numMaxFrame&&(this._numFrame=0,this.loop())},this.loop()):(this.canvas.onmouseenter=e=>{},this.canvas.onmousemove=e=>{})}updateCanvasSize(e,t){this.canvas.width=e,this.canvas.height=t}init(){this.loop()}loop(){this._numFrame++<=this._numMaxFrame&&this._mode===i.An.InteractiveViewer&&requestAnimationFrame(()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.loop()}),this.render()}render(){this.app.scene.render(this.ctx)}destroy(){this.div.removeChild(this.canvas)}constructor(e,t){this._numMaxFrame=120,this._mode=i.An.ObserveViewer,this._numFrame=0,this.app=e,this.div=t,this.canvas=document.createElement("canvas"),this.div.appendChild(this.canvas),this.updateCanvasSize(this.div.clientWidth,this.div.clientHeight),this.canvas.style.position="absolute",this.ctx=this.canvas.getContext("2d"),this.app.debugMode&&(this.canvas.style.background="rgba(255, 0, 0, 0.3)"),this.init()}}class h{render(e){this.projection.widthDisplay=e.canvas.width,this.projection.heightDisplay=e.canvas.height;let t,s=0,n=[],h=[0,0];if(this.app.data)for(this.index=this.app.data.length;this.index--;){let o=this.app.data[this.index],r=o.styles.width*this.scaleByRatio*o.styles.scale;switch(o.type){case i.zq.POINT_REGULAR:case i.zq.POINT_NUMBERED:t=o.nodes[0].sx,s=o.nodes[0].sy,[t,s]=this.projection.toScreen(t,s),(0,i.ld)(e,o.nodes,this.svgNPoint,o.styles.colorRgba,[0,0],this.scaleByRatio*o.styles.scale);break;case i.zq.POLYLINE_BENDING:n=[];for(let e=0;e<o.nodes.length;++e)[t,s]=this.projection.toScreen(o.nodes[e].sx,o.nodes[e].sy),n.push({sx:t,sy:s});(0,i.JV)(e,n,o.styles.colorRgba,h,r);break;case i.zq.POLYGON_GRAPH:n=[];for(let e=0;e<o.nodes.length;++e)[t,s]=this.projection.toScreen(o.nodes[e].sx,o.nodes[e].sy),n.push({sx:t,sy:s});(0,i.xG)(e,n,o.styles.colorRgba,h,r);break;case i.zq.RECTANGLE:n=[];for(let e=0;e<o.nodes.length;++e)[t,s]=this.projection.toScreen(o.nodes[e].sx,o.nodes[e].sy),n.push({sx:t,sy:s});(0,i.xG)(e,n,o.styles.colorRgba,h,r);break;case i.zq.CIRCLE:n=[];for(let e=0;e<o.nodes.length;++e)[t,s]=this.projection.toScreen(o.nodes[e].sx,o.nodes[e].sy),n.push({sx:t,sy:s});(0,i.wq)(e,n,o.styles.colorRgba,h,r);break;case i.zq.ARROW_SINGLE:n=[];for(let e=0;e<o.nodes.length;++e)[t,s]=this.projection.toScreen(o.nodes[e].sx,o.nodes[e].sy),n.push({sx:t,sy:s});(0,i.nq)(e,n,o.styles.colorRgba,h,r);break;case i.zq.ARROW_DOUBLE:n=[];for(let e=0;e<o.nodes.length;++e)[t,s]=this.projection.toScreen(o.nodes[e].sx,o.nodes[e].sy),n.push({sx:t,sy:s});(0,i.aK)(e,n,o.styles.colorRgba,h,r)}}}constructor(e){this.scale=1,this.index=0,this.scaleByRatio=1,this.app=e,this.projection=new o,this.svgRPoint=new Path2D("M9 0a9.022 9.022 0 00-9 9.041c0 4.992 5 11.761 9 19.421 4-7.659 9-14.428 9-19.42A9.022 9.022 0 009 .001V0zm0 12.652a3.85 3.85 0 113.833-3.85A3.841 3.841 0 019 12.652z"),this.svgNPoint=new Path2D("M26 2a2 2 0 00-2-2H2a2 2 0 00-2 2v17a2 2 0 002 2h6.757l4.276 6.33L17.31 21H24a2 2 0 002-2V2z")}}class o{toScreen(e,t){let s=e-this.xCropped,i=t-this.yCropped;return[s=this.remap(s,this.widthCropped,this.widthDisplay),i=this.remap(i,this.heightCropped,this.heightDisplay)]}constructor(){this.xCropped=0,this.yCropped=0,this.widthCropped=0,this.heightCropped=0,this.widthDisplay=0,this.heightDisplay=0,this.remap=(e,t,s)=>e*s/t}}class r{getCanvas(){return this.renderer.canvas}updateMode(e){this.renderer.mode=e}render(){this.renderer.render()}updateCanvasSize(e,t){this.renderer.updateCanvasSize(e,t),this.render()}updateScale(e){this.scene.scale=e}updateExtent(e,t,s){this.scene.projection.xCropped=e.x,this.scene.projection.yCropped=e.y,this.scene.projection.widthCropped=e.width,this.scene.projection.heightCropped=e.height,this.scene.projection.widthDisplay=t,this.scene.projection.heightDisplay=s}updateGeometry(e){e&&(this.data=e,this.render())}destroy(){this.renderer.destroy()}constructor(e,t,s){this.data=[],this.width=0,this.height=0,this.debugMode=!1,this.div=e,this.width=t,this.height=s,this.scene=new h(this),this.renderer=new n(this,e)}}},92612:function(e,t,s){s.d(t,{An:function(){return h.An},Bm:function(){return i.Bm},JV:function(){return i.JV},Kz:function(){return i.Kz},_y:function(){return i._y},aK:function(){return i.aK},ld:function(){return i.ld},nq:function(){return i.nq},wq:function(){return i.wq},xG:function(){return i.xG},zq:function(){return n.zq}});var i=s(56891);s(23176);var n=s(44147);s(3584);var h=s(12494);s(63810)}}]);
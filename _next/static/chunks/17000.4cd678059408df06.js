"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17e3],{33012:function(e,t,i){i.d(t,{T:function(){return h}});var s=i(97776),n=i(78252);class o{initCanvas(){s.Tme.DEFAULT_UP.set(0,1,0),this.scene=new s.xsS,this.scene.background=new s.Ilk(0),this.scene.castShadow=!0,this.renderer=new s.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(this.hostDiv.clientWidth/this.hostDiv.clientHeight),this.renderer.domElement.id="Three",this.renderer.domElement.style.position="absolute",this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight),this.hostDiv.appendChild(this.renderer.domElement),this.camera=new s.cPb(30,this.hostDiv.clientWidth/this.hostDiv.clientHeight,1,5e3),this.controls=new n.OrbitControls(this.camera,this.renderer.domElement),this.camera.position.set(20,20,20),this.controls.update(),this.canvas=this.renderer.domElement,this.init()}init(){this.eventBind()}eventBind(){this.renderer.domElement.onmousedown=e=>this.mouseDown(e),this.renderer.domElement.onmouseup=e=>this.mouseUp(e),this.renderer.domElement.onmousemove=e=>this.mouseMove(e),this.renderer.domElement.addEventListener("click",e=>this.mouseClick(e)),window.addEventListener("resize",()=>this.onWindowResize())}onWindowResize(){this.camera.aspect=this.hostDiv.clientWidth/this.hostDiv.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight)}start(){this.loop()}mouseDown(e){}mouseUp(e){}mouseClick(e){}mouseDClick(e){}mouseMove(e){}mouseDrag(e){}update(e){}destroy(){for(window.removeEventListener("resize",()=>this.onWindowResize()),cancelAnimationFrame(this.requestFrame),this.requestFrame=void 0;this.hostDiv.lastChild;)this.hostDiv.removeChild(this.hostDiv.lastChild)}constructor(e){this.t=0,this.loop=()=>{this.requestFrame=requestAnimationFrame(this.loop),this.controls.update(),this.update(this.scene),this.renderer.render(this.scene,this.camera),this.t+=.01},this.hostDiv=document.getElementById(e),this.initCanvas()}}class h extends o{initPost(){let e=new s.Mig(5592405);this.scene.add(e),this.pointLight=new s.cek(16777215,100),this.pointLight.position.x=10,this.pointLight.castShadow=!0,this.scene.add(this.pointLight),this.axis=new s.y8_(5),this.axis.position.y=.001,this.scene.add(this.axis),this.grid=new s.VLJ(50,100,4473924,3289650),this.scene.add(this.grid);let t=new s._12(50,50),i=new s.vBJ({color:65793,side:s.ehD,transparent:!0,opacity:0});this.ground=new s.Kj0(t,i),this.ground.rotation.x=-Math.PI/2,this.scene.add(this.ground);let n=new s.vBJ({color:65280}),o=new s.xo$(.05,50,50),h=new s.Kj0(o,n);h.translateX(1),this.sphere=h,this.scene.add(h)}reset(){this.arrayMesh=[],this.arrayPoint=[],this.arrayArrow=[];for(let e=this.scene.children.length-1;e>=0;e--){let t=this.scene.children[e];this.scene.remove(t)}this.initPost()}set showGrid(e){this.grid.visible=e}set showAxis(e){this.axis.visible=e}add(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];this.scene.add(e),i&&(this.arrayMesh.push(e),this.arrayPoint.push(t))}addArrow(e,t){let i=new s.tGC(t,e,1,"#f00");this.arrayArrow.push(i),this.scene.add(i)}addPoint(e){let t=new s.vBJ({color:16777215}),i=new s.xo$(.1,20,20),n=new s.Kj0(i,t);n.translateX(e.vec.x),n.translateY(e.vec.z),n.translateZ(e.vec.y),this.add(n,e),this.addArrow(e.vec,e.velocity)}mouseMove(e){console.log("mouseMove"),this.picking(e)}picking(e){this.mouse.x=e.offsetX/this.renderer.domElement.clientWidth*2-1,this.mouse.y=-(e.offsetY/this.renderer.domElement.clientHeight*2)+1,this.raycaster.setFromCamera(this.mouse,this.camera);let t=this.raycaster.intersectObjects([...this.arrayMesh]);if(t.length>0)return console.log(t[0].point.x,t[0].point.y,t[0].point.z),this.m.set(t[0].point.x,t[0].point.y,t[0].point.z),t[0].object!==this.sphere&&this.sphere.position.set(t[0].point.x,t[0].point.y,t[0].point.z),t;let i=this.raycaster.intersectObjects([this.ground]);i.length>0&&(this.m.set(i[0].point.x,i[0].point.y,i[0].point.z),this.sphere.position.set(i[0].point.x,i[0].point.y,i[0].point.z))}mouseClick(e){console.log("mouseClick");let t=this.picking(e);t&&console.log({mesh:t}),console.log("mouseClick"),this.mouseClickPost(e)}update(e){this.render(e),this.arrayMesh.forEach((e,t)=>{e.position.x=this.arrayPoint[t].vec.x,e.position.y=this.arrayPoint[t].vec.z,e.position.z=this.arrayPoint[t].vec.y}),this.arrayArrow.forEach((e,t)=>{e.position.x=this.arrayPoint[t].vec.x,e.position.y=this.arrayPoint[t].vec.z,e.position.z=this.arrayPoint[t].vec.y;let i=new s.Pa4(this.arrayPoint[t].velocity.x,this.arrayPoint[t].velocity.z,this.arrayPoint[t].velocity.y),n=.5*i.length();e.setLength(n,.1,.1),e.setDirection(i)});let t=new s.yGw;t.makeRotationY(.011*Math.PI),this.pointLight.position.applyMatrix4(t)}constructor(e="main"){super(e),this.raycaster=new s.iMs,this.mouse=new s.FM8,this.m=new s.Pa4,this.arrayMesh=[],this.arrayPoint=[],this.arrayArrow=[],this.render=e=>{},this.mouseClickPost=e=>{},this.initPost(),this.start()}}},12334:function(e,t,i){i.d(t,{V:function(){return s}});let s=e=>{let t=document.createElement("div");t.style.display="flex";let i=document.createElement("input");i.type="checkbox",i.defaultChecked=!1;let s=document.createElement("div");return s.textContent=e,s.style.color="#aaa",t.appendChild(i),t.appendChild(s),{div:t,checkBox:i}}},17e3:function(e,t,i){i.r(t),i.d(t,{Solution:function(){return o}});var s=i(33012),n=i(12334);class o{initDom(){let e=document.createElement("div");e.style.position="absolute",this.div.appendChild(e);let t=document.createElement("button");t.textContent="reset",t.onclick=()=>{this.reset(),this.init()},e.append(t);let i=(0,n.V)("grid");e.append(i.div),i.checkBox.checked=!0,i.checkBox.onchange=()=>{!0===i.checkBox.checked?this.renderer.showGrid=!0:this.renderer.showGrid=!1};let s=(0,n.V)("axis");e.append(s.div),s.checkBox.checked=!0,s.checkBox.onchange=()=>{!0===s.checkBox.checked?this.renderer.showAxis=!0:this.renderer.showAxis=!1}}reset(){this.renderer.reset(),this.t=0,this.pts=[]}init(){for(let e=-10;e<25;e++)for(let t=-10;t<10;t++){let i=new h(e,t,Math.sin(e*t*.1)+10);this.pts.push(i),this.renderer.addPoint(i)}}render(e){this.pts.forEach(e=>{e.force=new d(0,0,-9.81),e.move(this.t,.985)}),this.t+=.001}mouseMove(e,t){}renderMouse(e){}mouseClick(e){console.log("ddd"),console.log(this.renderer.m);let t=this.renderer.m,i=new h(t.x,t.z,t.y);this.pts.push(i),this.renderer.addPoint(i)}destroy(){this.renderer.destroy()}constructor(e){this.m=[0,0],this.t=0,this.pts=[],this.div=document.getElementById(e),this.renderer=new s.T(e),this.renderer.mouseClickPost=e=>this.mouseClick(e),this.renderer.render=e=>this.render(e),this.initDom(),this.init()}}class h{move(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.velocity=r(this.velocity,this.damping),this.velocity=c(this.velocity,r(this.force,e/this.mass)),this.vec=c(this.vec,r(this.velocity,e)),this.vec.z<0&&(this.vec.z=0,this.velocity.z<0&&(this.velocity.z=-this.velocity.z))}constructor(e,t,i,s=0,n=0,o=0){this.force=new d(0,0,0),this.mass=10,this.r=10,this.damping=.99-.01*Math.random(),this.vec=new d(e,t,i),this.velocity=new d(s,n,o)}}let r=(e,t)=>a(e,t),a=(e,t)=>new d(e.x*t,e.y*t,e.z*t),c=(e,t)=>new d(e.x+t.x,e.y+t.y,e.z+t.z);class d{constructor(e,t,i){this.x=0,this.y=0,this.z=0,this.x=e,this.y=t,this.z=i}}}}]);
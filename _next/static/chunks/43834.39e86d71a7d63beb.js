"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43834],{43834:function(e,t,i){i.r(t),i.d(t,{Solution:function(){return r}});let n=e=>{let t="";for(let i=0;i<e;i++){let e=2*Math.random()-1,i=2*Math.random()-1;t+="vec2<f32>(".concat(e,", ").concat(i,"),")}return console.log(t),{vertex:"\n        @vertex\n        fn main(@builtin(vertex_index) VertexIndex: u32) -> @builtin(position) vec4<f32> {\n            var pos = array<vec2<f32>, ".concat(e,">(\n                ").concat(t,"           \n                // vec2<f32>(-0.5,  0.7),\n                // vec2<f32>( 0.3,  0.6),\n                // vec2<f32>( 0.5,  0.3),\n                // vec2<f32>( 0.4, -0.5),\n                // vec2<f32>(-0.4, -0.4),\n                // vec2<f32>(-0.3,  0.2)\n            );\n            return vec4<f32>(pos[VertexIndex], 0.0, 1.0);\n        }"),fragment:"\n        @fragment\n        fn main() ->  @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 1.0, 1.0, 1.0);\n        }"}};class r{async initWebGPU(){if(!navigator.gpu)throw Error("Not Support WebGPU");let e=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!e)throw Error("No Adapter Found");let t=await e.requestDevice();this.ctx=this.canvas.getContext("webgpu");let i=navigator.gpu.getPreferredCanvasFormat?navigator.gpu.getPreferredCanvasFormat():this.ctx.getPreferredFormat(e);window.devicePixelRatio,this.canvas.width=this.divHost.clientWidth,this.canvas.height=this.divHost.clientHeight,this.ctx.configure({device:t,format:i,alphaMode:"opaque"}),this.size={width:this.canvas.width,height:this.canvas.height},this.device=t,this.format=i,this.initPipeline(this.device,this.format)}async initPipeline(e,t){let i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"line-list";"line-strip"===r&&(i="uint32");let a=n(10),o=e.createRenderPipeline({layout:"auto",vertex:{module:e.createShaderModule({code:a.vertex}),entryPoint:"main"},fragment:{module:e.createShaderModule({code:a.fragment}),entryPoint:"main",targets:[{format:t}]},primitive:{topology:r,stripIndexFormat:i}}),s=e.createCommandEncoder(),c=this.ctx.getCurrentTexture().createView(),d=s.beginRenderPass({colorAttachments:[{view:c,clearValue:[0,0,0,1],loadOp:"clear",storeOp:"store"}]});d.setPipeline(o),d.draw(10),d.end(),e.queue.submit([s.finish()])}destroy(){for(this.device.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}constructor(e){this.divHost=document.getElementById(e),this.canvas=document.createElement("canvas"),this.divHost.appendChild(this.canvas),this.initWebGPU()}}}}]);
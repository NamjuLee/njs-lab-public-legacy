"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65830],{47567:function(t,e,i){i.d(e,{R:function(){return o},_:function(){return n}});let n="@";class o{emitAction(t){this.ioWrapper.model.app.emitAction&&this.ioWrapper.model.app.emitAction(t)}getNumLayers(){this.ioWrapper.model.app.getNumLayers&&this.ioWrapper.model.app.getNumLayers()}localizedString(t){this.ioWrapper.model.app.localizedString&&this.ioWrapper.model.app.localizedString(t)}constructor(t){this.ioWrapper=t}}},65830:function(t,e,i){i.r(e),i.d(e,{AppImageDrawing:function(){return D},CONFIG:function(){return b},InteractionMode:function(){return n.An}});var n=i(10706);class o{initPost(){}constructor(t,e){this.model=t,this.appProperties=new n.gj,this.appProperties.isStandalone=!0,this.appControllerStatus=new n.jp(e),this.browserUtility=new n.R7}}class s{async importAssets(){}async importAsset(t){let e=await (0,n.ee)(t);return(0,n.dX)(e)}constructor(t){this.model=t,this.importAssets()}}class r{mouseEventController(t){this.model.app.implementations&&this.model.app.implementations.mouseEventController(t),this.model.app.addon}keyboardEventController(t){this.model.app.implementations&&this.model.app.implementations.keyboardEventController(t),this.model.app.addon}keyboardEventControllerFromDocument(t){this.model.app.implementations&&this.model.app.implementations.keyboardEventControllerFromDocument(t)}touchEventController(t){this.model.app.implementations&&this.model.app.implementations.touchEventController(t)}constructor(t){this.model=t}}var a=i(47567);class p{constructor(){}}class h{init(){"undefined"!=typeof document&&(document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp))}destroy(){"undefined"!=typeof document&&(document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp))}keyDown(t){let e=this.commonEventBuilder(t);e.PRESS_TYPE=n.rO.Down,this.keyEventFromDocument(e)}keyUp(t){let e=this.commonEventBuilder(t);e.PRESS_TYPE=n.rO.Up,e.hasShiftKey&&e.hasCtrlKey||this.keyEventFromDocument(e)}commonEventBuilder(t){let e=new p;return e.preEvent=this.MouseEventDataPre,e.key=t.key,e.keyCode=t.keyCode,e.code=t.code,e.hasCtrlKey=t.ctrlKey,e.hasShiftKey=t.shiftKey,e.hasAltKey=t.altKey,e.hasMetaCommand=t.metaKey,this.MouseEventDataPre=e,e}keyEvent(t){this.model.controllerWrapper.keyboardEventController(t)}keyEventFromDocument(t){this.model.controllerWrapper.keyboardEventControllerFromDocument(t)}constructor(t,e=n.Nq.JSAPI4X){this.keyDown=this.keyDown.bind(this),this.keyUp=this.keyUp.bind(this),this.model=t,this.type=e,this.isUp=!1,this.init(),this.MouseEventDataPre=new p}}var l=i(28582);class m{removeEvent(){}appendEvent(){}constructor(t){this.frame=0,this.frameSkip=2,this.mouseInteraction=t}}class c extends m{appendEvent(){let t=this.mouseInteraction.model.modelViewWrapper.div;t.style.pointerEvents="auto",t.addEventListener("click",this.mouseClick),t.addEventListener("dblclick",this.mouseDoubleClick),t.addEventListener("mousedown",this.mouseDown),t.addEventListener("mouseup",this.mouseUp),t.addEventListener("mousemove",this.mouseMove)}removeEvent(){let t=this.mouseInteraction.model.modelViewWrapper.div;t.removeEventListener("click",this.mouseClick),t.removeEventListener("dblclick",this.mouseDoubleClick),t.removeEventListener("mousedown",this.mouseDown),t.removeEventListener("mouseup",this.mouseUp),t.removeEventListener("mousemove",this.mouseMove)}constructor(t){super(t),this.clickable=!0,this.disableMoveEvent=!1,this.mouseClick=t=>{if(!this.clickable){this.clickable=!0;return}this.mouseInteraction.mouseClick(t)},this.mouseDoubleClick=t=>{this.mouseInteraction.mouseDoubleClick(t)},this.mouseDown=t=>{this.clickable=!0,this.mouseInteraction.mouseDown(t)},this.mouseUp=t=>{this.disableMoveEvent=!0,this.mouseInteraction.mouseUp(t)},this.mouseMove=t=>{if(this.clickable=!1,this.disableMoveEvent){this.disableMoveEvent=!1;return}this.mouseInteraction.mouseMove(t)},this.appendEvent()}}class u{initNativeMouseWheelEvent(t){t.onwheel=t=>{this.mouseWheel(t,t.deltaY)}}mouseDown(t){if(!this.isInsideCropShape(t))return;this.click=!0,this.down=!0;let e=this.commonEventBuilder(t);e.CLICK_TYPE=n.uD.Down,e.isDown=!0,this.mouseEvenEmitting(e)}mouseClick(t){if(!this.isInsideCropShape(t))return;let e=this.commonEventBuilder(t);0===t.button?e.CLICK_TYPE=n.uD.Left:1===t.button?e.CLICK_TYPE=n.uD.Middle:2===t.button&&(e.CLICK_TYPE=n.uD.Right),this.mouseEvenEmitting(e)}mouseDoubleClick(t){if(!this.isInsideCropShape(t))return;let e=this.commonEventBuilder(t);e.CLICK_TYPE=n.uD.Double,this.mouseEvenEmitting(e)}mouseDrag(t){this.click=!1;let e=this.commonEventBuilder(t);e.CLICK_TYPE=n.uD.Drag,e.isDown=!0,1===t.buttons?e.CLICK_TYPE=n.uD.Drag:4===t.buttons?e.CLICK_TYPE=n.uD.DragMiddle:2===t.buttons&&(e.CLICK_TYPE=n.uD.DragRight),this.mouseEvenEmitting(e)}mouseMove(t){if(!this.isInsideCropShape(t))return;if(this.down){this.mouseDrag(t);return}let e=this.commonEventBuilder(t);e.CLICK_TYPE=n.uD.Move,e.isDown=!1,this.mouseEvenEmitting(e)}mouseUp(t){this.down=!1;let e=this.commonEventBuilder(t);e.CLICK_TYPE=n.uD.Up,e.isDown=!1,this.mouseEvenEmitting(e)}mouseWheel(t,e){if(!this.isInsideCropShape(t))return;let i=this.commonEventBuilder(t);i.wheel=e,i.CLICK_TYPE=n.uD.Wheel,this.mouseEvenEmitting(i)}appendDownEvent(t){}appendUpEvent(){document.onmouseup=t=>{let e=this.commonEventBuilder(t);0===t.button?e.CLICK_TYPE=n.uD.Left:1===t.button?e.CLICK_TYPE=n.uD.Middle:2===t.button&&(e.CLICK_TYPE=n.uD.Right),e.isDown=!1,e.CLICK_TYPE=n.uD.Up,this.mouseEvenEmitting(e)}}get isEnableZoomByDoubleClick(){return this.isEnableZoomByDoubleClickValue}set isEnableZoomByDoubleClick(t){t?this.timer=setTimeout(()=>{this.isEnableZoomByDoubleClickValue=t},1e3):this.isEnableZoomByDoubleClickValue=t}commonEventBuilder(t){let e=new l.$;return e.preX=this.mouseEventDataPre.x,e.preY=this.mouseEventDataPre.y,e.pressedShift=t.shiftKey,e.pressedAlt=t.altKey,e.pressedCtrl=t.ctrlKey,e.x=t.offsetX,e.y=t.offsetY,e.preWheel=this.mouseEventDataPre.wheel,e.wheel=0,e.native=t,this.mouseEventDataPre=e,this.e=e,e}get stopPropagation(){return this._stopPropagation}set stopPropagation(t){this._stopPropagation=t}mouseEvenEmitting(t){this.model.appCoreWrapper.appControllerStatus.mode!==n.An.ObserveViewer&&(this.mouseEventEmittingForViewController(t),this._stopPropagation||this.mouseEventEmittingForModel(t))}mouseEventEmittingForViewController(t){this.mouseInteractionUI&&this.mouseInteractionUI.mouseInteractionMenu(t)}mouseEventEmittingForModel(t){this.model.controllerWrapper.mouseEventController(t)}destroy(){this.mouseEvent.removeEvent()}isInsideCropShape(t){return!!this.model.app.implementations.imageAnnoApp.scene.paramsEditing.isInsideCropShape(t.offsetX,t.offsetY)||(t.stopPropagation(),!1)}constructor(t){this.isEnable=!0,this.isEnableZoomByDoubleClickValue=!0,this.click=!1,this.prevent=!1,this.delay=100,this.down=!1,this._stopPropagation=!1,this.model=t,this.mouseEventDataPre=new l.$,this.mouseEvent=new c(this),this.initNativeMouseWheelEvent(this.model.modelViewWrapper.div)}}var d=i(15050);class g{appendEvent(){}constructor(t){this.touchInteraction=t}}class v extends g{appendEvent(){this.touchInteraction.model.modelViewWrapper.div.ontouchstart=t=>{this.touchInteraction.model.app.implementations.imageAnnoApp;let e=this.touchInteraction.commonEventBuilder(t,n.wn.Start);this.touchInteraction.mouseEvent(e)},this.touchInteraction.model.modelViewWrapper.div.ontouchend=t=>{this.touchInteraction.model.app.implementations.imageAnnoApp;let e=this.touchInteraction.commonEventBuilder(t,n.wn.End);this.touchInteraction.mouseEvent(e)},this.touchInteraction.model.modelViewWrapper.div.ontouchmove=t=>{this.touchInteraction.model.app.implementations.imageAnnoApp;let e=this.touchInteraction.commonEventBuilder(t,n.wn.Move);this.touchInteraction.mouseEvent(e)},this.touchInteraction.model.modelViewWrapper.div.ontouchcancel=t=>{this.touchInteraction.model.app.implementations.imageAnnoApp;let e=this.touchInteraction.commonEventBuilder(t,n.wn.Cancel);this.touchInteraction.mouseEvent(e)}}constructor(t){super(t),this.appendEvent()}}class w{commonEventBuilder(t,e){let i=new d.f;return i.TOUCH_TYPE=e,i.build(t,e),this.touchEventDataPre=i,i}mouseEvent(t){this.model.controllerWrapper.touchEventController(t)}constructor(t){this.isEnable=!0,this.click=!1,this.prevent=!1,this.delay=100,this.down=!1,this.model=t,w.model=t,this.touchEvent=new v(this)}}class y{set isEnableZoomByDoubleClick(t){this.mouseInteraction.isEnableZoomByDoubleClick=t}get isEnableZoomByDoubleClick(){return this.mouseInteraction.isEnableZoomByDoubleClick}destroy(){this.mouseInteraction.destroy()}constructor(t){this.ioWrapper=t,this.mouseInteraction=new u(this.ioWrapper.model),this.keyboardInteraction=new h(this.ioWrapper.model),this.touchInteraction=new w(this.ioWrapper.model)}}class A{pushAction(t){this.model.app.implementations.pushAction(t)}constructor(t){this.model=t}}class f{initPost(){this.initEventInteraction()}initEventInteraction(){this.eventInteraction=new y(this)}download(){}destroy(){this.eventInteraction.keyboardInteraction.destroy(),this.eventInteraction.mouseInteraction.destroy()}open(){}constructor(t){this.model=t,this.emitAction=new a.R(this),this.stateProcessing=new A(this.model)}}class C{init(t){let e=document.createElement("div");this.divNGraphicsHost=e,e.id="ExpressImageDrawing",e.style.width="100%",e.style.height="100%",this.divWrapper=document.createElement("div"),this.divWrapper.id="Annotation-image-wrapper".concat(this.model.app.CONFIG.VERSION_APP),this.divWrapper.style.width="100%",this.divWrapper.style.height="100%",this.divWrapper.style.pointerEvents="none",this.div=document.createElement("div"),this.div.id="Annotation-image-".concat(this.model.app.CONFIG.VERSION_APP),this.div.style.userSelect="none",this.div.style.width="100%",this.div.style.height="100%",this.div.style.zIndex="1",this.div.style.position="relative",this.divWrapper.appendChild(this.div),e.appendChild(this.divWrapper);let i=document.getElementById(t);i&&(this.divHost=i,this.divHost.parentNode&&this.divHost.appendChild(e))}removeDivImg(){this.model.modelViewWrapper.div.removeChild(this.model.modelViewWrapper.div.childNodes[2])}removeDiv(){try{this.model.modelViewWrapper.divNGraphicsHost.parentNode.removeChild(this.model.modelViewWrapper.divNGraphicsHost)}catch(t){console.debug(t)}}initPost(){}constructor(t,e){this.model=t,this.init(e),this.model.appCoreWrapper.appProperties.compileMode,n.ct.Production}}class E{projectionToImageSpace(t,e){return[this.img.width/this.imgAppended.width*t,this.img.height/this.imgAppended.height*e]}updateEffecting(t){this.dataFilter=t}initImageByImg(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#1D2730";this.img=t,this.imgString=t.src,this.imgOriginal=i,this.imgOriginalString=i.src,this.imgCroppingParam=JSON.parse(e),this.croppingDataTemp=this.imgCroppingParam,this.model.app.param.colorCover=n,this.model.app.isLoaded&&(this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.croppingDataTemp),this.updateImg(t,n))}updateImg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#1D2730";this.imgAppended=new Image,this.imgAppended.src=t.src,this.imgAppended.style.pointerEvents="none",this.imgAppended.style.width="100%",this.imgAppended.style.height="100%",this.imgAppended.onload=()=>{this.updateMaskForCroppingShape(t,e),this.model.modelViewWrapper.div.append(this.imgAppended);let i=(t.width/this.imgAppended.width+t.height/this.imgAppended.height)*.5;this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.scaleScreenByRatioImageSize=i<1?1:i),this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(t.width,t.height),this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.isActive=!0),this.model.ioWrapper.emitAction.emitAction("ready@markup"),this.imgAppended.onload=()=>{}}}toCroppedImg(){this.useModifiedImage=!0,this.imgAppended.src=this.imgString,this.toModifiedImgCroppingParam(),this.model.ioWrapper.emitAction.emitAction("update-cropping@"+JSON.stringify(this.imgCroppingParam)),this.model.ioWrapper.emitAction.emitAction("update-effecting@"+JSON.stringify(this.dataFilter)),this.model.ioWrapper.emitAction.emitAction("update-container-size@")}toOriginalImg(){this.useModifiedImage=!1,this.imgAppended.src=this.imgOriginalString,this.toOriginalImgCroppingParam(),this.model.ioWrapper.emitAction.emitAction("update-cropping@"+JSON.stringify(this.imgOriginalCroppingParam)),this.model.ioWrapper.emitAction.emitAction("update-effecting@"+JSON.stringify({typePreset:"normal",filter:{interpolation:1,blur:0,sepia:0,contrast:1,brightness:1,saturate:1,hueRotate:0},tint:{}})),this.model.ioWrapper.emitAction.emitAction("update-container-size@original")}toOriginalImgCroppingParam(){this.imgOriginalCroppingParam={aspectRatio:"original",x:0,y:0,width:this.imgOriginal.width,height:this.imgOriginal.height,rotation:0,scale:1,shape:"rectangle"},this.img.width=this.imgOriginalCroppingParam.width,this.img.height=this.imgOriginalCroppingParam.height,this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.imgOriginalCroppingParam),this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(this.imgOriginal.width,this.imgOriginal.height)),this.croppingDataTemp=this.imgOriginalCroppingParam}toModifiedImgCroppingParam(){this.img.width=this.imgCroppingParam.width,this.img.height=this.imgCroppingParam.height,this.model.app.implementations.imageAnnoApp&&(this.model.app.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.imgCroppingParam),this.model.app.implementations.imageAnnoApp.graphicsCoreWrapper.resizeCanvas(this.imgCroppingParam.width,this.imgCroppingParam.height)),this.croppingDataTemp=this.imgCroppingParam}updateMaskForCroppingShape(t,e){let i=document.createElement("canvas");i.style.width="100%",i.style.height="100%",i.width=t.width,i.height=t.height,i.style.position="absolute",this.model.modelViewWrapper.div.append(i);let o=i.getContext("2d");o.fillStyle=e,o.beginPath(),o.rect(0,0,i.width,i.height),o.closePath(),o.fill(),(0,n.JY)(o,this.croppingDataTemp.shape,0,0,this.croppingDataTemp.width,this.croppingDataTemp.height,!1)}constructor(t){this.dataFilter="",this.imgString="",this.imgOriginalString="",this.useModifiedImage=!0,this.croppingDataTemp=void 0,this.model=t}}class I{destroy(){this.model.modelViewWrapper.divNGraphicsHost.removeChild(this.divUIWrapper)}updateStyle(t,e,i){this.divSizeFrameBG.style.backgroundColor="rgb(".concat(t,",").concat(i,",").concat(e,")")}Layer0(){let t=this.model.app.param.themeUI.top.iconFill,e=document.createElement("div");e.style.margin="5px",e.style.marginBottom="20px",this.divUIWrapper.append(e);let i=(0,n.sR)(()=>{this.model.app.api.onClickPlace()},'\n            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n            <path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z"/>\n            </svg>\n            '));i.style.transform="scale(".concat(1.7,")"),i.style.paddingRight="10px",e.append(i),e.append((0,n.sR)(()=>{this.model.app.api.onClickCancel()},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>\n                </svg>\n                '),1.4)),e.append((0,n.sR)(()=>{this.model.app.api.onClickBlackhole()},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n                <path d="M4.146.146A.5.5 0 0 1 4.5 0h7a.5.5 0 0 1 .5.5c0 .68-.342 1.174-.646 1.479-.126.125-.25.224-.354.298v4.431l.078.048c.203.127.476.314.751.555C12.36 7.775 13 8.527 13 9.5a.5.5 0 0 1-.5.5h-4v4.5c0 .276-.224 1.5-.5 1.5s-.5-1.224-.5-1.5V10h-4a.5.5 0 0 1-.5-.5c0-.973.64-1.725 1.17-2.189A5.921 5.921 0 0 1 5 6.708V2.277a2.77 2.77 0 0 1-.354-.298C4.342 1.674 4 1.179 4 .5a.5.5 0 0 1 .146-.354z"/>\n                </svg>\n                '),1.4)),e.append((0,n.sR)(()=>{},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n                <path fill-rule="evenodd" d="M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103zM10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8v12.98zm-6-.8V1.11l-4 .8v12.98l4-.8z"/>\n                </svg>\n                '),1.4)),e.append((0,n.sR)(()=>{this.model.app.api.onClickCropper()},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="'.concat(t,'" viewBox="0 0 20 20">\n                <path d="M3.5.5A.5.5 0 0 1 4 1v13h13a.5.5 0 0 1 0 1h-2v2a.5.5 0 0 1-1 0v-2H3.5a.5.5 0 0 1-.5-.5V4H1a.5.5 0 0 1 0-1h2V1a.5.5 0 0 1 .5-.5zm2.5 3a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4H6.5a.5.5 0 0 1-.5-.5z"/>\n                </svg>\n                '),1.4))}Layer1(){let t=document.createElement("div");this.divUIWrapper.append(t);let e="#000000";t.append((0,n.sR)(()=>{this.model.app.api.onclickActiveCommand(n.uA.SELECT)},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onClickUndo()},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onClickRedo()},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onclickActiveCommand(n.uA.POINT_REGULAR)},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onclickActiveCommand(n.uA.POINT_NUMBERED)},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <circle cx="8" cy="8" r="8"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onclickActiveCommand(n.uA.POLYLINE_BENDING)},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onclickActiveCommand(n.uA.POLYGON_GRAPH)},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M8.5.134a1 1 0 0 0-1 0l-6 3.577a1 1 0 0 0-.5.866v6.846a1 1 0 0 0 .5.866l6 3.577a1 1 0 0 0 1 0l6-3.577a1 1 0 0 0 .5-.866V4.577a1 1 0 0 0-.5-.866L8.5.134z"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onclickActiveCommand(n.uA.CIRCLE)},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onclickActiveCommand(n.uA.RECTANGLE)},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onclickActiveCommand(n.uA.ARROW_SINGLE)},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M14 2.5a.5.5 0 0 0-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0v-6z"/>\n                </svg>\n                '))),t.append((0,n.sR)(()=>{this.model.app.api.onclickActiveCommand(n.uA.ARROW_DOUBLE)},'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="'.concat(e,'" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707z"/>\n                </svg>\n                ')))}initPost(){this.divSizeFrameBG=document.createElement("div"),this.divSizeFrameBG.style.textAlign="center",this.divSizeFrameBG.style.padding="10px",this.divSizeFrameBG.textContent="Size ",this.divWidth=document.createElement("input"),this.divWidth.style.width="50px",this.divWidth.setAttribute("type","text"),this.divWidth.setAttribute("min","100"),this.divSizeFrameBG.append(this.divWidth),this.divWidth.oninput=()=>{},this.divHeight=document.createElement("input"),this.divHeight.style.width="50px",this.divHeight.setAttribute("type","text"),this.divHeight.setAttribute("min","100"),this.divSizeFrameBG.append(this.divHeight),this.divHeight.oninput=()=>{},this.divUIWrapper.append(this.divSizeFrameBG)}constructor(t){this.model=t;let e=document.createElement("div");this.divUIWrapper=e,this.divUIWrapper.id="ExpressUI",this.divUIWrapper.style.zIndex="3",this.divUIWrapper.style.position="relative",this.divUIWrapper.style.width="100%",this.divUIWrapper.style.padding=this.model.app.param.themeUI.top.padding,this.divUIWrapper.style.height=this.model.app.param.themeUI.top.height,this.divUIWrapper.style.background=this.model.app.param.themeUI.top.background,this.divUIWrapper.style.marginBottom=this.model.app.param.themeUI.top.marginBottom,this.model.modelViewWrapper.divNGraphicsHost.prepend(this.divUIWrapper);let i=document.createElement("p");i.textContent="Image Annotation App V1",i.style.fontSize="12px;",i.style.color="#afafaf",i.style.pointerEvents="none",i.style.top="0px",i.style.left="20px",this.divUIWrapper.append(i),this.Layer0(),this.Layer1()}}class x{resize(t,e){this.modelViewWrapper.div.style.width=t+"px",this.modelViewWrapper.div.style.height=e+"px"}initPost(){this.modelViewWrapper.initPost(),this.appCoreWrapper.initPost(),this.ioWrapper.initPost()}restart(){}destroy(){this.ui&&this.ui.destroy(),this.ioWrapper.destroy(),this.modelViewWrapper.removeDiv()}pushAction(t){this.ioWrapper.stateProcessing.pushAction(t)}pushTheme(t){this.app.implementations.pushTheme(t)}init(){}constructor(t,e,i=n.An.Drawing){this.app=t,this.app.model=this,this.assets=new s(this),this.ioWrapper=new f(this),this.appCoreWrapper=new o(this,i),this.modelViewWrapper=new C(this,e),this.imageWrapper=new E(this),this.controllerWrapper=new r(this),this.app.param.UI&&(this.ui=new I(this)),this.init()}}class k{async initCropping(){return i.e(7375).then(i.bind(i,7375)).then(t=>{let{AppImageEditing:e}=t}).catch(t=>{throw console.debug("Stop loading Mapticon Addon."),console.debug(t),t})}async initMapticon(){}async initVisualizationJSAPI(){}async initVisualizationExternalGLJSAPI(){}async initDrawingBlock(){}async initMapfilter(){}async initQuickCommander(){}async initSmartCommander(){}async initSmartDrawing(){}async initVoiceController(){}constructor(t){this.addon=t}}class P{get enablePan(){return this.mapticon&&(this._enablePan=this.mapticon.enablePan),this._enablePan}set enablePan(t){this._enablePan=t}get stopPropagation(){return this._stopPropagation}set stopPropagation(t){this._stopPropagation=t}MouseEventController(t){!this.stopPropagation&&(this.mapticon&&this.mapticon.MouseEventController(t),this.tourTool&&this.tourTool.MouseEventController(t))}KeyboardEventController(t){}TouchEventController(t){}Resize(t,e){this.mapfilter&&this.mapfilter.Resize(t,e)}async InitMapticon(){return this.dynamicImport.initMapticon()}async InitVisualizationJSAPI(){return this.dynamicImport.initVisualizationJSAPI()}async InitVisualizationExternalGLJSAPI(){return this.dynamicImport.initVisualizationExternalGLJSAPI()}async InitDrawingBlock(){return this.dynamicImport.initDrawingBlock()}async InitMapfilter(){return this.dynamicImport.initMapfilter()}async InitQuickCommander(){return this.dynamicImport.initQuickCommander()}async InitSmartCommander(){return this.dynamicImport.initSmartCommander()}async InitSmartDrawing(){return this.dynamicImport.initSmartDrawing()}async InitVoiceController(){return this.dynamicImport.initVoiceController()}constructor(t){this._stopPropagation=!1,this._enablePan=!0,this.app=t,this.dynamicImport=new k(this)}}class z{needRevertBaseImage(){return!this.app.model.imageWrapper.useModifiedImage}onclickActiveCommand(t){this.app.implementations.imageAnnoApp&&this.app.implementations.imageAnnoApp.activeCommandController.setActiveCommand(t)}onClickDestroy(){this.app.destroy()}onClickPlace(){this.emitDataToExpressImageData(),this.onClickDestroy()}getAllGeometries(){return this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()}shiftEnvironment(t){this.app.param.environment=t,this.app.implementations.imageAnnoApp.customization.themeRenderStyle.shiftEnvironment(t),this.app.implementations.imageAnnoApp.geometryCommon.gcmdSupporting.renderForce()}updateRPointPath(t){return this.app.implementations.imageAnnoApp.customization.themeRenderStyle.updateRPointPath(t),this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()}emitDataToExpressImageData(){this.app.implementations.imageAnnoApp.io.emitAction("update@".concat(JSON.stringify(this.getAllGeometries())))}onClickCancel(){this.onClickDestroy()}onClickBlackhole(){this.app.implementations.imageAnnoApp.apiWrapper.environment.shiftBlackholePos()}onClickReset(){}onClickUndo(){this.app.implementations.imageAnnoApp.scene.undo()}onClickRedo(){this.app.implementations.imageAnnoApp.scene.redo()}onClickDownload(){}onClickCapture(){}onClickSetColor(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.app.implementations.imageAnnoApp.activeCommandController.activeColorController.setActiveColor(t,e)}setScaleGraphics(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];this.app.implementations.imageAnnoApp.activeCommandController.setScaleGraphics(t,e,i)}updateEffecting(t){this.app.model.imageWrapper.updateEffecting(t)}getCanvas(){return this.app.implementations.imageAnnoApp.geometryCommon.gcmdAProcessing.getCanvas()}getDataGeometry(){return this.app.implementations.imageAnnoApp.geometryCommon.gcmdSelecting.getAllGeometries()}getScaleFactor(){return this.app.implementations.imageAnnoApp.activeCommandController.scaleGlobal}onClickCropper(){}onClickRevertToOriginal(){this.app.implementations.imageAnnoApp&&(this.app.implementations.imageAnnoApp.geometryCommon.gcmdProcessing.resetGeometryList(),this.emitDataToExpressImageData(),this.app.model.imageWrapper.toOriginalImgCroppingParam(),this.app.model.imageWrapper.toOriginalImg(),this.app.implementations.imageAnnoApp.scene.captureScene(),this.app.implementations.imageAnnoApp.io.emitAction("markup@resizeDiv"))}constructor(t){this.app=t}}let b={config:{BASE_URL:""},PATH_ADDON:"../../../../Addon",VERSION_APP:"2",HAS_ANIMATION:!1,LAB:!1};class D{static get id(){return this._id++}set setEnvironment(t){this.param.environment=t}async initImplementations(){return i.e(18648).then(i.bind(i,18648)).then(t=>{let{Implementations:e}=t;this.implementations||(this.implementations=new e(this,this.model.modelViewWrapper.divNGraphicsHost))}).catch(t=>{throw console.debug("Stop loading mapticon."),console.debug(t),t})}initLab(){this.implementations.imageAnnoApp}initPost(){this.model.initPost(),this.implementations.initPost(),this.implementations.imageAnnoApp,this.param.renderer===n.g4.Svg&&(this.model.modelViewWrapper.divNGraphicsHost.style.pointerEvents="none"),this.model.imageWrapper.croppingDataTemp&&this.implementations.imageAnnoApp&&this.implementations.imageAnnoApp.scene.paramsEditing.updateDataCropping(this.model.imageWrapper.croppingDataTemp),this.model.imageWrapper.img&&(this.param.colorCover?this.model.imageWrapper.updateImg(this.model.imageWrapper.img,this.param.colorCover):this.model.imageWrapper.updateImg(this.model.imageWrapper.img)),this.isLoaded=!0,this.initPostAppEnv()}initPostAppEnv(){this.implementations.imageAnnoApp&&(this.implementations.imageAnnoApp.activeCommandController.acProperties.isScaleDynamicRender=!0,this.implementations.imageAnnoApp.activeCommandController.acProperties.optimizerTextleaderline=n.Nv.Collision,this.param.features&&this.param.features.clustering&&this.implementations.imageAnnoApp.apiWrapper.environment.toggleClusteringPoint(this.param.features.clustering))}restart(){}toJson(){return this.implementations.imageAnnoApp?Array.from(this.implementations.imageAnnoApp.renderer.saveDrawingGeometries()).reduce((t,e)=>{let[,i]=e,{id:n,type:o,nodes:s,data:r,styles:a}=i;return t[n]={id:n,type:o,nodes:s,...a&&Object.keys(a).length&&{styles:a},...r&&Object.keys(r).length&&{data:r}},t},{}):{}}pause(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.implementations.Pause(t)}resume(){this.implementations.resume()}destroy(){this.implementations&&this.implementations.destroy(),this.model&&this.model.destroy()}pushAction(t){t&&this.model.pushAction(t)}pushTheme(t){this.model.pushTheme(t)}bindActionEmitting(t){this.emitAction=t}resize(t,e){this.model.resize(t,e),this.implementations.resize(t,e)}async initViewController(){}open(){this.model.ioWrapper.open()}initImageByImg(t,e,i,n){this.model.imageWrapper.initImageByImg(t,e,i,n)}updateEffecting(t){this.api.updateEffecting(t)}initCropping(){this.addon.dynamicImport.initCropping()}constructor(t,e,i=n.BQ.AnnotationMap){this.CONFIG=b,this.PRODUCTION=!0,this.INSPECTION=!1,this.isLoaded=!1,this.APP=i,this.param=t,this.INSPECTION&&(this.PRODUCTION=!1),this.CONFIG.config=t.config;let o=t.UI;t.features&&t.features.hasAnimation&&(this.CONFIG.HAS_ANIMATION=t.features.hasAnimation),t.isLab&&(this.CONFIG.LAB=t.isLab,this.CONFIG.HAS_ANIMATION=!1),this.instanceID=D.id,this.api=new z(this),this.model=new x(this,this.param.id,this.param.interactionMode),void 0===this.param.rendererActive||!0===this.param.rendererActive?this.param.rendererActive=!0:this.param.rendererActive=!1,this.addon=new P(this),this.initImplementations().then(()=>{this.param.renderer===n.g4.Svg?this.implementations.initAnnotationSVGInstance(this.CONFIG.HAS_ANIMATION,this.param.rendererActive,this.param.theme):(this.implementations.initAnnotationCanvasInstance(this.CONFIG.HAS_ANIMATION,this.param.rendererActive,this.param.theme),this.implementations.imageAnnoApp&&(this.implementations.imageAnnoApp.activeCommandController.acProperties.isActivateSnapping=!0)),o&&this.initViewController(),this.param.features&&this.param.features.mapFilter,this.initPost(),this.CONFIG.LAB&&this.initLab(),e.geometry&&e.geometry.length>0&&(this.implementations.imageAnnoApp&&(this.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.isActive=!1,this.implementations.imageAnnoApp.geometryCommon.gcmdProcessing.DumpByIGeometriesFromImageDataModel(e.geometry)),this.api.setScaleGraphics(e.scale,!0,!1)),this.implementations.imageAnnoApp&&this.implementations.imageAnnoApp.scene.captureScene()})}}D._id=0},85241:function(t,e,i){i.d(e,{$E:function(){return n.$}});var n=i(28582);i(15050)},10706:function(t,e,i){i.d(e,{Y4:function(){return z},Us:function(){return s.Us},uA:function(){return a.uA},$b:function(){return m.$},jp:function(){return y},gj:function(){return g},BQ:function(){return s.BQ},Aq:function(){return s.Aq},R7:function(){return A},uD:function(){return s.uD},ew:function(){return p.e},$C:function(){return p.$},ct:function(){return s.ct},CF:function(){return s.CF},mL:function(){return f},QH:function(){return I},qA:function(){return h.qA},Nq:function(){return s.Nq},iu:function(){return s.iu},oU:function(){return h.oU},zq:function(){return a.zq},An:function(){return s.An},cg:function(){return s.cg},hO:function(){return s.hO},h9:function(){return ty},aX:function(){return E},g:function(){return s.g},xX:function(){return s.xX},Nv:function(){return s.Nv},oW:function(){return s.oW},rO:function(){return s.rO},g4:function(){return s.g4},i$:function(){return v.i},$u:function(){return a.$u},PH:function(){return s.PH},wn:function(){return s.wn},fb:function(){return l.f},c8:function(){return tl},$5:function(){return N},Lg:function(){return j},$z:function(){return Q},ir:function(){return G},EW:function(){return r.EW},Ds:function(){return c.D},p$:function(){return b},xs:function(){return te},Cv:function(){return u.Cv},$$:function(){return q},Cj:function(){return $},HP:function(){return to},F$:function(){return tn},sR:function(){return c.s},dX:function(){return x.dX},mI:function(){return tv},Sm:function(){return d.Sm},Sp:function(){return T},Th:function(){return B},CV:function(){return V},iV:function(){return R},fi:function(){return F},nI:function(){return U},$4:function(){return _},aj:function(){return u.vI},rv:function(){return ts},nP:function(){return x.nP},ee:function(){return k.ee},yP:function(){return u.yP},sI:function(){return u.sI},kt:function(){return d.kt},Ux:function(){return u.Ux},kC:function(){return u.kC},yH:function(){return u.yH},VT:function(){return x.VT},KF:function(){return x.KF},vQ:function(){return Z},Fs:function(){return u.Fs},Qi:function(){return P},lh:function(){return tt},Wo:function(){return d.Wo},rW:function(){return d.rW},AR:function(){return u.AR},xt:function(){return tw},mp:function(){return tp},X0:function(){return ta},vD:function(){return th},Hq:function(){return d.Hq},JY:function(){return r.JY},zQ:function(){return L},Vt:function(){return tc},Fv:function(){return O},hW:function(){return M},PD:function(){return S},z1:function(){return tr},iC:function(){return d.iC},Z3:function(){return d.Z3},AJ:function(){return d.AJ},DM:function(){return td},bA:function(){return W},lu:function(){return D}});var n,o,s=i(12494),r=i(23176),a=i(44147),p=i(59965),h=i(3584);(n=o||(o={})).POINT_REGULAR="POINT_REGULAR",n.POINT_NUMBERED="POINT_NUMBERED",n.POINT_ICON="POINT_ICON",n.ARROW_SINGLE="ARROW_SINGLE",n.ARROW_DOUBLE="ARROW_DOUBLE",n.POLYLINE="POLYLINE",n.POLYGON="POLYGON",n.CIRCLE="CIRCLE",n.RECTANGLE="RECTANGLE",n.TEXT="TEXT";var l=i(29026);i(85241);var m=i(92491),c=i(86376),u=i(68045),d=i(40597);class g{constructor(){this.isStandalone=!1,this.compileMode=s.ct.Development}}var v=i(91588);class w{constructor(){this.clickLeft=!0,this.clickMiddle=!0,this.clickRight=!0,this.clickDouble=!0,this.mouseDown=!0,this.mouseMove=!0,this.mouseDrag=!0,this.keyDown=!0}}class y{set mode(t){this._mode=t,t===s.An.Drawing&&(this.currentControllerStatus=this.drawing),t===s.An.InteractiveViewer&&(this.currentControllerStatus=this.interactiveViewer),t===s.An.ObserveViewer&&(this.currentControllerStatus=this.viewer)}get mode(){return this._mode}setAccessibility(t,e){t===s.An.Drawing&&(this.drawing.clickLeft=e.clickLeft,this.drawing.clickMiddle=e.clickMiddle,this.drawing.clickRight=e.clickRight,this.drawing.clickDouble=e.clickDouble,this.drawing.mouseDown=e.mouseDown,this.drawing.mouseMove=e.mouseMove,this.drawing.mouseDrag=e.mouseDrag),t===s.An.InteractiveViewer&&(this.currentControllerStatus=this.interactiveViewer),t===s.An.ObserveViewer&&(this.currentControllerStatus=this.viewer)}constructor(t){this.currentControllerStatus=new w,this.drawing=new w,this.interactiveViewer=new w,this.viewer=new w,this.interactiveViewer.clickLeft=!0,this.interactiveViewer.clickMiddle=!1,this.interactiveViewer.clickRight=!1,this.interactiveViewer.clickDouble=!1,this.interactiveViewer.mouseDown=!0,this.interactiveViewer.mouseMove=!0,this.interactiveViewer.mouseDrag=!1,this.interactiveViewer.keyDown=!1,this.viewer.clickLeft=!1,this.viewer.clickMiddle=!1,this.viewer.clickRight=!1,this.viewer.clickDouble=!1,this.viewer.mouseDown=!1,this.viewer.mouseMove=!1,this.viewer.mouseDrag=!1,this.viewer.keyDown=!1,this.mode=t}}class A{detectBrowser(){if(-1!==navigator.userAgent.indexOf("Edge")){this._type=s.Aq.Edge;return}if(-1!==(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))&&(this._type=s.Aq.Opera),-1!==navigator.userAgent.indexOf("Chrome")){this._type=s.Aq.Chrome;return}if(-1!==navigator.userAgent.indexOf("Safari")){this._type=s.Aq.Safari;return}if(-1!==navigator.userAgent.indexOf("Firefox")){this._type=s.Aq.Firefox;return}-1!==navigator.userAgent.indexOf("MSIE")&&(this._type=s.Aq.Ie),this._type=s.Aq.Unknown}detectIsMoile(){this._isMobile=!1,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(this._isMobile=!0)}get type(){return this._type}get isMobile(){return this._isMobile}constructor(){this.detectBrowser(),this.detectIsMoile()}}class f{static simplifyPath(t,e){let i=this.computeDouglasPeucker(t,e);return i.push(t[t.length-1]),i}static computeDouglasPeucker(t,e){if(t.length<=2)return[t[0]];let i=[],n=new C(t[0],t[t.length-1]),o=0,s=0,r;for(var a=1;a<=t.length-2;a++){var p=n.distanceToPoint(t[a]);p>o&&(o=p,s=a)}return o>=e?(r=t[s],n.distanceToPoint(r),i=(i=i.concat(this.computeDouglasPeucker(t.slice(0,s+1),e))).concat(this.computeDouglasPeucker(t.slice(s,t.length),e))):(r=t[s],n.distanceToPoint(r),i=[t[0]]),i}computeDouglasPeucker(t,e){if(t.length<=2)return[t[0]];let i=[],n=new C(t[0],t[t.length-1]),o=0,s=0,r;for(var a=1;a<=t.length-2;a++){var p=n.distanceToPoint(t[a]);p>o&&(o=p,s=a)}return o>=e?(r=t[s],n.distanceToPoint(r),i=(i=i.concat(this.computeDouglasPeucker(t.slice(0,s+1),e))).concat(this.computeDouglasPeucker(t.slice(s,t.length),e))):(r=t[s],n.distanceToPoint(r),i=[t[0]]),i}constructor(){}}class C{distanceToPoint(t){let e=(this.p1.y-this.p0.y)/(this.p1.x-this.p0.x),i=this.p0.y-e*this.p0.x,n=[];return n.push(Math.abs(t.y-e*t.x-i)/Math.sqrt(Math.pow(e,2)+1)),n.push(Math.sqrt(Math.pow(t.x-this.p0.x,2)+Math.pow(t.y-this.p0.y,2))),n.push(Math.sqrt(Math.pow(t.x-this.p1.x,2)+Math.pow(t.y-this.p1.y,2))),n.sort((t,e)=>t-e)[0]}constructor(t,e){this.p0=t,this.p1=e}}class E{scale(t){return(Math.sin(this.t)+5)*.2*t}easeInElastic(t){return(.04-.04/t)*Math.sin(25*t)+1}easeOutElastic2(t){return Math.pow(2,-10*t)*Math.sin(2*Math.PI*(t-.075)/.3)+1}constructor(){this.t=0}}class I{init(t,e){if("undefined"==typeof document)return;var i=new Blob([this.encode(JSON.stringify(t,null,4))],{type:"esri/drawingTool"});let n=URL.createObjectURL(i);var o=document.createElement("a");o.setAttribute("href",n),o.setAttribute("download",e);var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(s)}encode(t){let e=[];for(let i=0;i<t.length;i++)e.push(t.charCodeAt(i));return new Uint8Array(e)}dummy(){}constructor(t,e){this.init(t,e)}}var x=i(91300),k=i(55320);let P=(t,e,i,n,o,s,r,a)=>new ty(t,e,0),z=(t,e)=>{let i=t[0].x,n=t[1].x,o=e[0].x,s=e[1].x,r=t[0].y,a=t[1].y,p=e[0].y,h=e[1].y;return i<=s&&n>=o&&r<=h&&a>=p},b=t=>{let e=new ty(t.x,t.y,t.z);return e.alt=t.alt,e.d=t.d,e.isModified=t.isModified,e.parent=t.parent,e.w=t.w,e},D=(t,e)=>new ty(t.x-e.x,t.y-e.y,t.z-e.z),M=()=>new ty(0,0,0),S=(t,e)=>new ty(t.x+e.x,t.y+e.y,t.z+e.z),W=(t,e)=>new ty(t.x*e,t.y*e,t.z*e),L=(t,e)=>new ty(t.x+(e.x-t.x)*.5,t.y+(e.y-t.y)*.5,t.z+(e.z-t.z)*.5),N=(t,e)=>t.x===e.x&&t.y===e.y&&t.z===e.z,O=t=>{let e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return e<1e-4?new ty(t.x,t.y,t.z):new ty(t.x/e,t.y/e,t.z/e)},_=t=>{let e=0;for(let i=0;i<t.length-1;i++)e+=(t[i].x-t[i+1].x)*(t[i].y+t[i+1].y);return Math.abs(e*=.5)},T=(t,e)=>Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z)),R=(t,e,i,n)=>Math.sqrt((t-i)*(t-i)+(e-n)*(e-n)),V=(t,e)=>Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])),B=(t,e)=>(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z),U=(t,e)=>t.x*e.x+t.y*e.y+t.z*e.z,G=(t,e)=>new ty(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x),F=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=[],o=(e.x-t.x)/i,s=(e.y-t.y)/i,r=(e.z-t.z)/i;for(let e=0;e<i;++e){let i=t.x+o*e,a=t.y+s*e,p=t.z+r*e;n.push(new ty(i,a,p))}return n},Y=(t,e)=>{let i=e.y*Math.PI/180-t.y*Math.PI/180,n=e.x*Math.PI/180-t.x*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t.y*Math.PI/180)*Math.cos(e.y*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6378.137},H=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new ty(t,e,0),n=0;for(let t=0;t<1e4;++t){let t=Y(i,new ty(i.x+n,i.y,i.z));if(1<t&&t<1.001)return i.x+n;n+=1e-5}return -1},K=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new ty(t,e,0),n=0;for(let t=0;t<1e4;++t){let t=Y(i,new ty(i.x,i.y+n,i.z));if(1<t&&t<1.001)return i.y+n;n+=1e-5}return -1},q=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new ty(H(t,e),K(t,e),0)},X=(t,e)=>U(O(t),O(e)),J=(t,e)=>Math.acos(X(t,e)),$=(t,e)=>180*J(t,e)/Math.PI,Z=(t,e)=>{let i=e.Sub(t),n=new ty(1,0,0);return i.y>0?-1*$(n,i):$(n,i)},j=t=>{let e=[];for(let i=0;i<t.length;++i)if(i<t.length-1){let n=new ty(t[i].x,t[i].y,t[i].z),o=new ty(t[i+1].x,t[i+1].y,t[i+1].z);o.x-=n.x,o.y-=n.y,o.z-=n.z;let s=U(new ty(1,0,0),O(o));e.push(s)}else{let n=new ty(t[i].x,t[i].y,t[i].z),o=new ty(t[0].x,t[0].y,t[0].z);o.x-=n.x,o.y-=n.y,o.z-=n.z;let s=U(new ty(1,0,0),O(o));e.push(s)}return e},Q=t=>{let e=tv(t),i=[];for(let n=0;n<t.length;++n){let o,s;n<t.length-1?(o=new ty(t[n].x-e.x,t[n].y-e.y,t[n].z-e.z),s=new ty(t[n+1].x-e.x,t[n+1].y-e.y,t[n+1].z-e.z)):(o=new ty(t[n].x-e.x,t[n].y-e.y,t[n].z-e.z),s=new ty(t[0].x-e.x,t[0].y-e.y,t[0].z-e.z));let r=U(O(o),O(s));i.push(r)}return i},tt=t=>{let e=tv(t),i=0,n=0,o=t.length;for(let s=0;s<o;++s)i+=Math.abs(t[s].x-e.x),n+=Math.abs(t[s].y-e.y);return[i/(o+=2),n/o]},te=(t,e,i)=>{e.x+=1e-5,e.y+=1e-5;let n=tn(e,i),o=ti(e,i,t.x,t.y,n,!0);return T(t,o)},ti=function(t,e,i,n,o){let s=!(arguments.length>5)||void 0===arguments[5]||arguments[5],r=new ty(t.x,t.y,t.z),a=new ty(e.x,e.y,e.z).Sub(r),p=new ty(i,n,0).Sub(r);a.unitize();let h=r.Add(a.Mult(U(p,a)));return s?ta(h,o)?h:T(t,h)<T(e,h)?new ty(t.x,t.y,t.z):new ty(e.x,e.y,e.z):h},tn=(t,e)=>{let i=[],n=0,o=0,s=new ty(n=t.x<e.x?t.x:e.x,t.y<e.y?t.y:e.y,t.z<e.z?t.z:e.z),r=new ty(n=t.x>e.x?t.x:e.x,t.y>e.y?t.y:e.y,t.z>e.z?t.z:e.z);return i.push(new ty(s.x,s.y,s.z)),i.push(new ty(r.x,s.y,s.z)),i.push(new ty(r.x,r.y,s.z)),i.push(new ty(s.x,r.y,s.z)),i},to=t=>{let e=[],i=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;for(let e=0;e<t.length;++e)i>t[e].x&&(i=t[e].x),n>t[e].y&&(n=t[e].y),o>t[e].z&&(o=t[e].z),s<t[e].x&&(s=t[e].x),r<t[e].y&&(r=t[e].y),a<t[e].z&&(a=t[e].z);return e.push(new ty(i,n,o)),e.push(new ty(s,r,a)),e},ts=t=>{let e=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE,r=Number.MIN_VALUE;for(let a of t)e>a.x&&(e=a.x),i>a.y&&(i=a.y),n>a.z&&(n=a.z),o<a.x&&(o=a.x),s<a.y&&(s=a.y),r<a.z&&(r=a.z);return[new ty(e,i,n),new ty(o,s,r)]},tr=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=[];for(let i=0;i<t.length-1;++i){let n=t[i];if(!1!==n.d)for(let o=i+1;o<t.length;++o)T(n,t[o])<e&&(t[o].d=!1)}for(let e=0;e<t.length;++e)!0===t[e].d&&i.push(t[e]);return i},ta=(t,e)=>{let i=t.x,n=t.y,o=!1;for(let t=0,s=e.length-1;t<e.length;s=t++){let r=e[t].x,a=e[t].y,p=e[s].x,h=e[s].y;a>n!=h>n&&i<(p-r)*(n-a)/(h-a)+r&&(o=!o)}return o},tp=(t,e,i)=>{let n=t.x,o=t.y;return e.x<n&&n<i.x&&e.y<o&&o<i.y},th=(t,e,i,n)=>!!(ta(new ty(t.x-.5*e,t.y-.5*i),n)||ta(new ty(t.x+.5*e,t.y-.5*i),n)||ta(new ty(t.x+.5*e,t.y+.5*i),n)||ta(new ty(t.x-.5*e,t.y+.5*i),n)),tl=(t,e,i)=>{for(let n=0;n<t.length-1;++n)if(tm(t[n],t[n+1],e,i))return!0;return!1},tm=(t,e,i,n)=>{let o=0,s=0,r=0,a=0,p=0,h=!1,l=!1;o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);let m=new ty(0,0,0);if(0!==o&&(s=t.y-i.y,r=t.x-i.x,a=(n.x-i.x)*s-(n.y-i.y)*r,p=(e.x-t.x)*s-(e.y-t.y)*r,s=a/o,r=p/o,m.x=t.x+s*(e.x-t.x),m.y=t.y+s*(e.y-t.y),s>0&&s<1&&(h=!0),r>0&&r<1&&(l=!0),h&&l))return m},tc=(t,e)=>{let i=[];for(let n=0;n<t.length;++n)i.push(tu(t[n],e));return i},tu=(t,e)=>new ty(t.x+e.x,t.y+e.y,t.z+e.z),td=(t,e)=>{let i=[];for(let n=0;n<t.length;++n)i.push(tg(t[n],e));return i},tg=(t,e)=>{let i=Math.cos(.017453292519943278*e),n=Math.sin(.017453292519943278*e);return new ty(t.x*i-t.y*n,t.x*n+t.y*i,t.z)},tv=t=>{let e=new ty(0,0,0);for(let i=0,n=t.length;i<n;++i)e.Add(t[i]);return e.Mult(1/t.length),e},tw=function(t,e,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;return Math.pow(e.x-t.x,2)/Math.pow(o+i,2)+Math.pow(e.y-t.y,2)/Math.pow(o+n,2)<=1};class ty{Mult(t){return this.x*=t,this.y*=t,this.z*=t,new ty(this.x,this.y,this.z)}divByVal(t){return this.x/=t,this.y/=t,this.z/=t,new ty(this.x,this.y,this.z)}Add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,new ty(this.x,this.y,this.z)}Sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,new ty(this.x,this.y,this.z)}unitize(){return this.normalize()}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-4||(this.x=this.x/t,this.y=this.y/t,this.z=this.z/t),this}constructor(t,e,i=0){this.x=0,this.y=0,this.z=0,this.w=0,this.alt=0,this.d=!0,this.isModified=!1,this.x=t,this.y=e,this.z=i}}},28582:function(t,e,i){i.d(e,{$:function(){return o}});var n=i(12494);class o{deepCopy(){let t=new o;return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.pressedAlt=this.pressedAlt,t.pressedShift=this.pressedShift,t.pressedCtrl=this.pressedCtrl,t.isDoubleClick=this.isDoubleClick,t.isDown=this.isDown,t.isMove=this.isMove,t.lat=this.lat,t.long=this.long,t.wheel=this.wheel,t.preWheel=this.preWheel,t.yGLPicking=this.yGLPicking,t.CLICK_TYPE=this.CLICK_TYPE,t.native=this.native,t}constructor(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.CLICK_TYPE=n.uD.Move,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.isActive=!0}}},15050:function(t,e,i){i.d(e,{f:function(){return o}});var n=i(12494);class o{build(t,e){for(let i=0;i<t.touches.length;++i){let n=new s;n.identifier=t.touches[i].identifier,n.TOUCH_TYPE=e,n.radiusX=t.touches[i].radiusX,n.radiusY=t.touches[i].radiusY,n.rotationAngle=t.touches[i].rotationAngle,n.x=t.touches[i].clientX,n.y=t.touches[i].clientY,n.force=t.touches[i].force,n.color=this.colorForTouch(t.touches[i]),this.eventList.push(n)}}deepCopy(){}colorForTouch(t){let e=t.identifier%16,i=Math.floor(t.identifier/3)%16,n=Math.floor(t.identifier/7)%16,o=e.toString(16);return"#"+o+i.toString(16)+n.toString(16)}constructor(){this.TOUCH_TYPE=n.wn.Move,this.eventList=[]}}class s{deepCopy(){let t=new s;return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.yGLPicking=this.yGLPicking,t.TOUCH_TYPE=this.TOUCH_TYPE,t}constructor(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.TOUCH_TYPE=n.wn.Move}}}}]);
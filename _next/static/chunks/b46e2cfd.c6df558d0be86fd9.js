(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53591],{45169:function(t,r,i){var s;/*! For license information please see index.js.LICENSE.txt */s=()=>(()=>{var t,r,s={87611:(t,r,i)=>{"use strict";i.d(r,{Z5:()=>p,HY:()=>el,mv:()=>eC,AA:()=>v,yM:()=>M,xE:()=>Q,K3:()=>c,h:()=>_,GH:()=>ea,YY:()=>f});let s,n,o,a=!1,l=!1,u=!1,d=!1,h=!1,p={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},c=t=>{let r=new URL(t,eS.$resourcesUrl$);return r.origin!==ev.location.origin?r.href:r.pathname},f=t=>eS.$resourcesUrl$=t,y="http://www.w3.org/1999/xlink",m={},g=t=>"object"==(t=typeof t)||"function"===t,_=(t,r,...i)=>{let s=null,n=null,o=null,a=!1,l=!1,u=[],d=r=>{for(let i=0;i<r.length;i++)Array.isArray(s=r[i])?d(s):null!=s&&"boolean"!=typeof s&&((a="function"!=typeof t&&!g(s))&&(s=String(s)),a&&l?u[u.length-1].$text$+=s:u.push(a?b(null,s):s),l=a)};if(d(i),r&&(r.key&&(n=r.key),r.name&&(o=r.name),1)){let t=r.className||r.class;t&&(r.class="object"!=typeof t?t:Object.keys(t).filter(r=>t[r]).join(" "))}if("function"==typeof t)return t(null===r?{}:r,u,C);let h=b(t,null);return h.$attrs$=r,u.length>0&&(h.$children$=u),h.$key$=n,h.$name$=o,h},b=(t,r)=>({$flags$:0,$tag$:t,$text$:r,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),v={},w=t=>t&&t.$tag$===v,C={forEach:(t,r)=>t.map(S).forEach(r),map:(t,r)=>t.map(S).map(r).map(x)},S=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),x=t=>{if("function"==typeof t.vtag){let r=Object.assign({},t.vattrs);return t.vkey&&(r.key=t.vkey),t.vname&&(r.name=t.vname),_(t.vtag,r,...t.vchildren||[])}let r=b(t.vtag,t.vtext);return r.$attrs$=t.vattrs,r.$children$=t.vchildren,r.$key$=t.vkey,r.$name$=t.vname,r},M=(t,r,i)=>({emit:s=>I(t,r,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:s})}),I=(t,r,i)=>{let s=eS.ce(r,i);return t.dispatchEvent(s),s},E=new WeakMap,T=(t,r,i,s)=>{let n=P(r,i),o=e_.get(n);if(t=11===t.nodeType?t:ew,o){if("string"==typeof o){t=t.head||t;let r,i=E.get(t);i||E.set(t,i=new Set),i.has(n)||((r=ew.createElement("style")).innerHTML=o,t.insertBefore(r,t.querySelector("link")),i&&i.add(n))}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o])}return n},P=(t,r)=>"sc-"+(r&&32&t.$flags$?t.$tagName$+"-"+r:t.$tagName$),A=(t,r,i,s,n,o)=>{if(i!==s){let a=em(t,r),l=r.toLowerCase();if("class"===r){let r=t.classList,n=O(i),o=O(s);r.remove(...n.filter(t=>t&&!o.includes(t))),r.add(...o.filter(t=>t&&!n.includes(t)))}else if("style"===r){for(let r in i)s&&null!=s[r]||(r.includes("-")?t.style.removeProperty(r):t.style[r]="");for(let r in s)i&&s[r]===i[r]||(r.includes("-")?t.style.setProperty(r,s[r]):t.style[r]=s[r])}else if("key"===r);else if("ref"===r)s&&s(t);else if(t.__lookupSetter__(r)||"o"!==r[0]||"n"!==r[1]){let u=g(s);if((a||u&&null!==s)&&!n)try{if(t.tagName.includes("-"))t[r]=s;else{let n=null==s?"":s;"list"===r?a=!1:null!=i&&t[r]==n||(t[r]=n)}}catch(t){}let d=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(r=l,d=!0),null==s||!1===s?!1===s&&""!==t.getAttribute(r)||(d?t.removeAttributeNS(y,r):t.removeAttribute(r)):(!a||4&o||n)&&!u&&(s=!0===s?"":s,d?t.setAttributeNS(y,r,s):t.setAttribute(r,s))}else r="-"===r[2]?r.slice(3):em(ev,l)?l.slice(2):l[2]+r.slice(3),i&&eS.rel(t,r,i,!1),s&&eS.ael(t,r,s,!1)}},k=/\s/,O=t=>t?t.split(k):[],R=(t,r,i,s)=>{let n=11===r.$elm$.nodeType&&r.$elm$.host?r.$elm$.host:r.$elm$,o=t&&t.$attrs$||m,a=r.$attrs$||m;for(s in o)s in a||A(n,s,o[s],void 0,i,r.$flags$);for(s in a)A(n,s,o[s],a[s],i,r.$flags$)},L=(t,r,i,l)=>{let h=r.$children$[i],p,c,f,y=0;if(a||(u=!0,"slot"!==h.$tag$||(s&&l.classList.add(s+"-s"),h.$flags$|=h.$children$?2:1)),null!==h.$text$)p=h.$elm$=ew.createTextNode(h.$text$);else if(1&h.$flags$)p=h.$elm$=ew.createTextNode("");else{if(d||(d="svg"===h.$tag$),p=h.$elm$=ew.createElementNS(d?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&h.$flags$?"slot-fb":h.$tag$),d&&"foreignObject"===h.$tag$&&(d=!1),R(null,h,d),null!=s&&p["s-si"]!==s&&p.classList.add(p["s-si"]=s),h.$children$)for(y=0;y<h.$children$.length;++y)(c=L(t,h,y,p))&&p.appendChild(c);"svg"===h.$tag$?d=!1:"foreignObject"===p.tagName&&(d=!0)}return p["s-hn"]=o,3&h.$flags$&&(p["s-sr"]=!0,p["s-cr"]=n,p["s-sn"]=h.$name$||"",(f=t&&t.$children$&&t.$children$[i])&&f.$tag$===h.$tag$&&t.$elm$&&F(t.$elm$,!1)),p},F=(t,r)=>{eS.$flags$|=1;let i=t.childNodes;for(let t=i.length-1;t>=0;t--){let s=i[t];s["s-hn"]!==o&&s["s-ol"]&&(V(s).insertBefore(s,Z(s)),s["s-ol"].remove(),s["s-ol"]=void 0,u=!0),r&&F(s,r)}eS.$flags$&=-2},N=(t,r,i,s,n,a)=>{let l,u=t["s-cr"]&&t["s-cr"].parentNode||t;for(u.shadowRoot&&u.tagName===o&&(u=u.shadowRoot);n<=a;++n)s[n]&&(l=L(null,i,n,t))&&(s[n].$elm$=l,u.insertBefore(l,Z(r)))},j=(t,r,i,s,n)=>{for(;r<=i;++r)(s=t[r])&&(n=s.$elm$,B(s),l=!0,n["s-ol"]?n["s-ol"].remove():F(n,!0),n.remove())},D=(t,r)=>t.$tag$===r.$tag$&&("slot"===t.$tag$?t.$name$===r.$name$:t.$key$===r.$key$),Z=t=>t&&t["s-ol"]||t,V=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,z=(t,r)=>{let i;let s=r.$elm$=t.$elm$,n=t.$children$,o=r.$children$,a=r.$tag$,l=r.$text$;null!==l?(i=s["s-cr"])?i.parentNode.textContent=l:t.$text$!==l&&(s.data=l):(d="svg"===a||"foreignObject"!==a&&d,"slot"===a||R(t,r,d),null!==n&&null!==o?((t,r,i,s)=>{let n,o,a=0,l=0,u=0,d=0,h=r.length-1,p=r[0],c=r[h],f=s.length-1,y=s[0],m=s[f];for(;a<=h&&l<=f;)if(null==p)p=r[++a];else if(null==c)c=r[--h];else if(null==y)y=s[++l];else if(null==m)m=s[--f];else if(D(p,y))z(p,y),p=r[++a],y=s[++l];else if(D(c,m))z(c,m),c=r[--h],m=s[--f];else if(D(p,m))"slot"!==p.$tag$&&"slot"!==m.$tag$||F(p.$elm$.parentNode,!1),z(p,m),t.insertBefore(p.$elm$,c.$elm$.nextSibling),p=r[++a],m=s[--f];else if(D(c,y))"slot"!==p.$tag$&&"slot"!==m.$tag$||F(c.$elm$.parentNode,!1),z(c,y),t.insertBefore(c.$elm$,p.$elm$),c=r[--h],y=s[++l];else{for(u=-1,d=a;d<=h;++d)if(r[d]&&null!==r[d].$key$&&r[d].$key$===y.$key$){u=d;break}u>=0?(o=r[u]).$tag$!==y.$tag$?n=L(r&&r[l],i,u,t):(z(o,y),r[u]=void 0,n=o.$elm$):n=L(r&&r[l],i,l,t),y=s[++l],n&&V(p.$elm$).insertBefore(n,Z(p.$elm$))}a>h?N(t,null==s[f+1]?null:s[f+1].$elm$,i,s,l,f):l>f&&j(r,a,h)})(s,n,r,o):null!==o?(null!==t.$text$&&(s.textContent=""),N(s,null,r,o,0,o.length-1)):null!==n&&j(n,0,n.length-1),d&&"svg"===a&&(d=!1))},U=t=>{let r,i,s,n,o,a;let l=t.childNodes;for(i=0,s=l.length;i<s;i++)if(1===(r=l[i]).nodeType){if(r["s-sr"]){for(o=r["s-sn"],r.hidden=!1,n=0;n<s;n++)if(a=l[n].nodeType,l[n]["s-hn"]!==r["s-hn"]||""!==o){if(1===a&&o===l[n].getAttribute("slot")){r.hidden=!0;break}}else if(1===a||3===a&&""!==l[n].textContent.trim()){r.hidden=!0;break}}U(r)}},G=[],q=t=>{let r,i,s,n,o,a,u=0,d=t.childNodes,h=d.length;for(;u<h;u++){if((r=d[u])["s-sr"]&&(i=r["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,n=r["s-sn"],a=s.length-1;a>=0;a--)(i=s[a])["s-cn"]||i["s-nr"]||i["s-hn"]===r["s-hn"]||($(i,n)?(o=G.find(t=>t.$nodeToRelocate$===i),l=!0,i["s-sn"]=i["s-sn"]||n,o?o.$slotRefNode$=r:G.push({$slotRefNode$:r,$nodeToRelocate$:i}),i["s-sr"]&&G.map(t=>{$(t.$nodeToRelocate$,i["s-sn"])&&(o=G.find(t=>t.$nodeToRelocate$===i))&&!t.$slotRefNode$&&(t.$slotRefNode$=o.$slotRefNode$)})):G.some(t=>t.$nodeToRelocate$===i)||G.push({$nodeToRelocate$:i}));1===r.nodeType&&q(r)}},$=(t,r)=>1===t.nodeType?null===t.getAttribute("slot")&&""===r||t.getAttribute("slot")===r:t["s-sn"]===r||""===r,B=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(B)},W=(t,r)=>{let i=t.$hostElement$,d=t.$cmpMeta$,h=t.$vnode$||b(null,null),p=w(r)?r:_(null,null,r);if(o=i.tagName,d.$attrsToReflect$&&(p.$attrs$=p.$attrs$||{},d.$attrsToReflect$.map(([t,r])=>p.$attrs$[r]=i[t])),p.$tag$=null,p.$flags$|=4,t.$vnode$=p,p.$elm$=h.$elm$=i.shadowRoot||i,s=i["s-sc"],n=i["s-cr"],a=ex&&0!=(1&d.$flags$),l=!1,z(h,p),eS.$flags$|=1,u){let t,r,i,s,n,o;q(p.$elm$);let a=0;for(;a<G.length;a++)(r=(t=G[a]).$nodeToRelocate$)["s-ol"]||((i=ew.createTextNode(""))["s-nr"]=r,r.parentNode.insertBefore(r["s-ol"]=i,r));for(a=0;a<G.length;a++)if(r=(t=G[a]).$nodeToRelocate$,t.$slotRefNode$){for(s=t.$slotRefNode$.parentNode,n=t.$slotRefNode$.nextSibling,i=r["s-ol"];i=i.previousSibling;)if((o=i["s-nr"])&&o["s-sn"]===r["s-sn"]&&s===o.parentNode&&(!(o=o.nextSibling)||!o["s-nr"])){n=o;break}(n||s===r.parentNode)&&r.nextSibling===n||r===n||(!r["s-hn"]&&r["s-ol"]&&(r["s-hn"]=r["s-ol"].parentNode.nodeName),s.insertBefore(r,n))}else 1===r.nodeType&&(r.hidden=!0)}l&&U(p.$elm$),eS.$flags$&=-2,G.length=0},H=(t,r)=>(t.$flags$|=16,t.$ancestorComponent$,eO(()=>J(t,r))),J=(t,r)=>{let i;let s=t.$hostElement$,n=(t.$cmpMeta$.$tagName$,()=>{});return r?(er(s,"componentWillLoad"),i=ee(s,"componentWillLoad")):(er(s,"componentWillUpdate"),i=ee(s,"componentWillUpdate")),er(s,"componentWillRender"),i=et(i,()=>ee(s,"componentWillRender")),n(),et(i,()=>Y(t,s,r))},Y=async(t,r,i)=>{let s=t.$hostElement$,n=(t.$cmpMeta$.$tagName$,()=>{});s["s-rc"],i&&(t=>{let r=t.$cmpMeta$,i=t.$hostElement$,s=r.$flags$,n=(r.$tagName$,()=>{}),o=T(ex&&i.shadowRoot?i.shadowRoot:i.getRootNode(),r,t.$modeName$);10&s&&(i["s-sc"]=o,i.classList.add(o+"-h"),2&s&&i.classList.add(o+"-s")),n()})(t);let o=(t.$cmpMeta$.$tagName$,()=>{});K(t,r,s),o(),n(),X(t)},K=(t,r,i)=>{try{r=r.render&&r.render(),t.$flags$&=-17,t.$flags$|=2,W(t,r)}catch(r){eg(r,t.$hostElement$)}return null},X=t=>{t.$cmpMeta$.$tagName$;let r=t.$hostElement$;t.$ancestorComponent$,ee(r,"componentDidRender"),er(r,"componentDidRender"),64&t.$flags$?(ee(r,"componentDidUpdate"),er(r,"componentDidUpdate")):(t.$flags$|=64,ee(r,"componentDidLoad"),er(r,"componentDidLoad"))},Q=t=>{{let r=ef(t),i=r.$hostElement$.isConnected;return i&&2==(18&r.$flags$)&&H(r,!1),i}},ee=(t,r,i)=>{if(t&&t[r])try{return t[r](i)}catch(t){eg(t)}},et=(t,r)=>t&&t.then?t.then(r):r(),er=(t,r)=>{},ei=(t,r,i)=>{if(r.$members$){t.watchers&&(r.$watchers$=t.watchers);let i=Object.entries(r.$members$),s=t.prototype;i.map(([t,[i]])=>{(31&i||32&i)&&Object.defineProperty(s,t,{get(){return ef(this).$instanceValues$.get(t)},set(i){((t,r,i,s)=>{var n,o;let a=ef(t),l=a.$instanceValues$.get(r),u=a.$flags$;n=i,o=s.$members$[r][0],i=null==n||g(n)?n:4&o?"false"!==n&&(""===n||!!n):2&o?parseFloat(n):1&o?String(n):n;let d=Number.isNaN(l)&&Number.isNaN(i);if(i!==l&&!d&&(a.$instanceValues$.set(r,i),1)){if(s.$watchers$&&128&u){let n=s.$watchers$[r];n&&n.map(s=>{try{t[s](i,l,r)}catch(r){eg(r,t)}})}if(2==(18&u)){if(t.componentShouldUpdate&&!1===t.componentShouldUpdate(i,l,r))return;H(a,!1)}}})(this,t,i,r)},configurable:!0,enumerable:!0})});{let n=new Map;s.attributeChangedCallback=function(t,r,i){eS.jmp(()=>{let r=n.get(t);if(this.hasOwnProperty(r))i=this[r],delete this[r];else if(s.hasOwnProperty(r)&&"number"==typeof this[r]&&this[r]==i)return;this[r]=(null!==i||"boolean"!=typeof this[r])&&i})},t.observedAttributes=i.filter(([t,r])=>15&r[0]).map(([t,i])=>{let s=i[1]||t;return n.set(s,t),512&i[0]&&r.$attrsToReflect$.push([t,s]),s})}}return t},es=async(t,r,i,s,n)=>{if(0==(32&r.$flags$)&&(n=t.constructor,r.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>r.$flags$|=128),n.style)){let s=n.style;"string"!=typeof s&&(s=s[r.$modeName$=eb.map(r=>r(t)).find(t=>!!t)]);let l=P(i,r.$modeName$);if(!e_.has(l)){var o,a;let t;let r=(i.$tagName$,()=>{});o=s,a=!!(1&i.$flags$),t=e_.get(l),eI&&a?"string"==typeof(t=t||new CSSStyleSheet)?t=o:t.replaceSync(o):t=o,e_.set(l,t),r()}}r.$ancestorComponent$,H(r,!0)},en=t=>{},eo=t=>{let r=t["s-cr"]=ew.createComment("");r["s-cn"]=!0,t.insertBefore(r,t.firstChild)},ea=(t,r)=>{let i={$flags$:r[0],$tagName$:r[1]};i.$members$=r[2],i.$listeners$=r[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[],!ex&&1&i.$flags$&&(i.$flags$|=8);let s=t.prototype.connectedCallback,n=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){ey(this,i)},connectedCallback(){(t=>{if(0==(1&eS.$flags$)){let r=ef(t),i=r.$cmpMeta$,s=(i.$tagName$,()=>{});if(1&r.$flags$)eu(t,r,i.$listeners$,!1),en(r.$lazyInstance$);else{let s;r.$flags$|=1,!s&&12&i.$flags$&&eo(t),i.$members$&&Object.entries(i.$members$).map(([r,[i]])=>{if(31&i&&t.hasOwnProperty(r)){let i=t[r];delete t[r],t[r]=i}}),es(t,r,i)}s()}})(this),s&&s.call(this)},disconnectedCallback(){(t=>{if(0==(1&eS.$flags$)){let r=ef(t);r.$rmListeners$&&(r.$rmListeners$.map(t=>t()),r.$rmListeners$=void 0)}})(this),n&&n.call(this)},__attachShadow(){ex?this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)}):this.shadowRoot=this}}),t.is=i.$tagName$,ei(t,i)},el=(t,r)=>r,eu=(t,r,i,s)=>{i&&i.map(([i,s,n])=>{let o=eh(t,i),a=ed(r,n),l=ep(i);eS.ael(o,s,a,l),(r.$rmListeners$=r.$rmListeners$||[]).push(()=>eS.rel(o,s,a,l))})},ed=(t,r)=>i=>{try{t.$hostElement$[r](i)}catch(t){eg(t)}},eh=(t,r)=>4&r?ew:8&r?ev:16&r?ew.body:t,ep=t=>eM?{passive:0!=(1&t),capture:0!=(2&t)}:0!=(2&t),ec=new WeakMap,ef=t=>ec.get(t),ey=(t,r)=>{let i={$flags$:0,$hostElement$:t,$cmpMeta$:r,$instanceValues$:new Map};return eu(t,i,r.$listeners$,!1),ec.set(t,i)},em=(t,r)=>r in t,eg=(t,r)=>(0,console.error)(t,r),e_=new Map,eb=[],ev="undefined"!=typeof window?window:{},ew=ev.document||{head:{}},eC=ev.HTMLElement||class{},eS={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,r,i,s)=>t.addEventListener(r,i,s),rel:(t,r,i,s)=>t.removeEventListener(r,i,s),ce:(t,r)=>new CustomEvent(t,r)},ex=!0,eM=(()=>{let t=!1;try{ew.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(t){}return t})(),eI=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(t){}return!1})(),eE=[],eT=[],eP=t=>{for(let r=0;r<t.length;r++)try{t[r](performance.now())}catch(t){eg(t)}t.length=0},eA=()=>{eP(eE),eP(eT),(h=eE.length>0)&&eS.raf(eA)},ek=t=>Promise.resolve(void 0).then(t),eO=t=>{eT.push(t),h||(h=!0,4&eS.$flags$?ek(eA):eS.raf(eA))}},88529:t=>{function r(t){return Promise.resolve().then(()=>{var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r})}r.keys=()=>[],r.resolve=r,r.id=88529,t.exports=r},4507:function(t,r,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,r,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(r,i);n&&!("get"in n?!r.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,n)}:function(t,r,i,s){void 0===s&&(s=i),t[s]=r[i]}),n=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||s(r,t,i)};Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0,r.version="BETA 0.0.x",n(i(28738),r),n(i(57104),r),n(i(60200),r),n(i(2065),r),n(i(96773),r),n(i(28752),r),n(i(92610),r),n(i(35410),r),n(i(35662),r),n(i(94059),r),n(i(54438),r),n(i(38473),r)},28738:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.COLOR_BLENDING=r.Color=r.getFalseColor=r.RGBtoGray=r.getRandomRGBArray=r.getRandomRGBAString=r.getRandomRGBString=r.getRandomHex=r.RGBToHex=r.getColorByCelsius=r.hex2RGBA=r.hexToRGBANormalized=void 0;var s=i(92610);r.hexToRGBANormalized=function(t,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var s=parseInt((t=t.replace("#","")).substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);if(i){var a=.58*s+.17*n+.8*o;return[a,a,a,r]}return[s/255,n/255,o/255,r/255]},r.hex2RGBA=function(t,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var s=parseInt((t=t.replace("#","")).substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);if(i){var a=.58*s+.17*n+.8*o;return[a,a,a,r]}return[s,n,o,r]},r.getColorByCelsius=function(t){return n((0,s.celsius2fahrenheit)(t))};var n=function(t){return 120<t&&t<=150?[62,2,22]:115<t&&t<=120?[85,12,37]:110<t&&t<=115?[110,21,49]:105<t&&t<=110?[115,32,62]:100<t&&t<=105?[159,41,76]:95<t&&t<=100?[175,77,78]:90<t&&t<=95?[190,112,76]:85<t&&t<=90?[195,138,83]:80<t&&t<=85?[193,157,97]:75<t&&t<=80?[194,171,117]:70<t&&t<=75?[171,168,125]:65<t&&t<=70?[135,154,132]:60<t&&t<=65?[100,141,137]:55<t&&t<=60?[67,129,144]:50<t&&t<=55?[40,117,147]:45<t&&t<=50?[39,103,138]:40<t&&t<=45?[39,91,128]:35<t&&t<=40?[37,79,119]:30<t&&t<=35?[38,67,111]:25<t&&t<=30?[47,71,117]:20<t&&t<=25?[57,81,127]:15<t&&t<=20?[65,92,135]:10<t&&t<=15?[77,101,145]:5<t&&t<=10?[86,113,156]:0<t&&t<=5?[98,123,166]:-5<t&&t<=0?[117,145,185]:-10<t&&t<=-5?[128,155,192]:-15<t&&t<=-10?[138,164,205]:-20<t&&t<=-15?[147,177,215]:-25<t&&t<=-20?[156,184,223]:-30<t&&t<=-25?[167,191,227]:-35<t&&t<=-30?[175,198,231]:-40<t&&t<=-35?[184,205,234]:-45<t&&t<=-40?[192,212,237]:-50<t&&t<=-45?[203,219,244]:-55<t&&t<=-50?[211,226,247]:-60<t&&t<=-55?[220,233,250]:-100<t&&t<=-60?[228,240,255]:[0,0,0]};r.RGBToHex=function(t,r,i){return"#"+[Math.round(t),Math.round(r),Math.round(i)].map(function(t){var r=t.toString(16);return 1===r.length?"0"+r:r}).join("")},r.getRandomHex=function(){return(0,r.RGBToHex)(Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()))},r.getRandomRGBString=function(){return"rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),")")},r.getRandomRGBAString=function(){return"rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",1)")},r.getRandomRGBArray=function(){return[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())]},r.RGBtoGray=function(t,r,i){return .2126*t+.7152*r+.0722*i},r.getFalseColor=function(t){var r=[];return r.push(Math.round(255*a(t))),r.push(Math.round(255*u(t))),r.push(Math.round(255*l(t))),r};var o,a=function(t,r,i){return void 0===r&&(r=0),void 0===i&&(i=1),(t=(t-r)/(i-r))<=.25?0:t<=.5?(1020*t-255)/255:1},l=function(t,r,i){return void 0===r&&(r=0),void 0===i&&(i=1),(t=(t-r)/(i-r))<=.25?(-512*t+128)/255:0},u=function(t,r,i){return void 0===r&&(r=0),void 0===i&&(i=1),(t=(t-r)/(i-r))<=.25?1020*t/255:t<=.5?1:(-510*t+510)/255};r.Color=function(t,r,i,s){void 0===s&&(s=1),this.r=0,this.g=0,this.b=0,this.a=1,this.r=t,this.g=r,this.b=i,this.a=s},(o=r.COLOR_BLENDING||(r.COLOR_BLENDING={})).SOURCE_OVER="source-over",o.SOURCE_IN="source-in",o.SOURCE_OUT="source-out",o.SOURCE_ATOP="source-atop",o.COPY="copy",o.DESTAINATION_OVER="destination-over",o.DESTAINATION_IN="destination-in",o.DESTAINATION_OUT="destination-out",o.DESTAINATION_ATOP="destination-atop",o.LIGHTER="lighter",o.MULTIPLY="multiply",o.SCREEN="screen",o.OVERLAY="overlay",o.DARKEN="darken",o.LIGHTEN="lighten",o.COLOR_DODGE="color-dodge",o.COLOR_BURN="color-burn",o.HARD_LIGHT="hard-light",o.SOFT_LIGHT="soft-light",o.DIFFERENCE="difference",o.EXCLUSION="exclusion",o.HUE="hue",o.SATURATION="saturation",o.COLOR="color",o.LUMINOSITY="luminosity"},25523:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMaxIndex=r.getIndexBySort=r.getDomain=r.remap=r.remaps=r.normalizeVector=r.Stddev=r.Mean=r.GetGaussianEx=r.GetGaussianForTest=r.GetGaussian=r.GenerateXYData=r.GenerateXYDataForTest=r.Linspace=void 0,r.Linspace=function(t,r,i){void 0===t&&(t=-1),void 0===r&&(r=1),void 0===i&&(i=100);for(var s=(r-t)/(i-1),n=[],o=0;o<i;++o)n.push(t+s*o);return n},r.GenerateXYDataForTest=function(){return(0,r.GenerateXYData)(-100,100,30,[6e-5,-.003,.1,10])},r.GenerateXYData=function(t,r,i,s){for(var n=[],o=(r-t)/i,a=t;a<r;a+=o)n.push([a,s[0]*a*a*a+s[1]*a*a+s[2]*a+s[3]]);return n},r.GetGaussian=function(t,r,i){return Math.exp(-Math.pow(t-r,2)/(2*Math.pow(i,2)))},r.GetGaussianForTest=function(){return(0,r.GetGaussianEx)()[1]},r.GetGaussianEx=function(){for(var t=(0,r.Linspace)(-5,5,100),i=[],s=0,n=[[0,1],[0,2],[1,.5],[1,.75]];s<n.length;s++){for(var o=n[s],a=[],l=0;l<t.length;l++){var u=t[l],d=(0,r.GetGaussian)(u,o[0],o[1]);a.push([u,d])}i.push(a)}return i},r.Mean=function(t){for(var r=0,i=0;i<t.length;i++)r+=t[i];return r/t.length},r.Stddev=function(t){for(var i=0,s=(0,r.Mean)(t),n=0;n<t.length;n++){var o=t[n];i+=(o-s)*(o-s)}return Math.sqrt(i/(t.length-1))},r.normalizeVector=function(t,r,i){return t.map(function(t){return(t-r)/i})},r.remaps=function(t,i,s,n,o){for(var a=[],l=0;l<t.length;l++){var u=t[l];a.push((0,r.remap)(u,i,s,n,o))}return a},r.remap=function(t,r,i,s,n){return(t-r)*(n-s)/(i-r)+s},r.getDomain=function(t){for(var r=Number.MAX_VALUE,i=Number.MIN_VALUE,s=0;s<t.length;s++){var n=t[s];r>n&&(r=n),i<n&&(i=n)}return[r,i]},r.getIndexBySort=function(t){for(var r=t.length,i=Array(r),s=0;s<r;++s)i[s]=s;return i.sort(function(r,i){return t[r]<t[i]?-1:t[r]>t[i]?1:0}),i},r.getMaxIndex=function(t){for(var r=-1,i=Number.MIN_SAFE_INTEGER,s=0;s<t.length;++s)i<t[s]&&(i=t[s],r=s);return r}},35662:function(t,r,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,r,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(r,i);n&&!("get"in n?!r.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,n)}:function(t,r,i,s){void 0===s&&(s=i),t[s]=r[i]}),n=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||s(r,t,i)};Object.defineProperty(r,"__esModule",{value:!0}),n(i(25523),r)},5247:function(t,r){"use strict";var i,s=this&&this.__spreadArray||function(t,r,i){if(i||2==arguments.length)for(var s,n=0,o=r.length;n<o;n++)!s&&n in r||(s||(s=Array.prototype.slice.call(r,0,n)),s[n]=r[n]);return t.concat(s||Array.prototype.slice.call(r))};Object.defineProperty(r,"__esModule",{value:!0}),r.buildNetwork=r.EdgeAStar=r.NodeAStar=r.AStart=void 0;var n=((i=function(){}).TYPE={Manhattan:"Manhattan  ",Euclidean:"Euclidean "},i.strength=.01,i.distanceManhattan=function(t,r,i,s,n,o){return Math.abs(t-s)+Math.abs(r-n)+Math.abs(i-o)},i.distanceEuclidean=function(t,r,i,s,n,o){return Math.sqrt((t-s)*(t-s)+(r-n)*(r-n)+(i-o)*(i-o))},i.gePath=function(t,r,s){i.typeHeuristic=i.distanceEuclidean,s===i.TYPE.Manhattan&&(i.typeHeuristic=i.distanceManhattan);for(var n=[t],o=[],a=void 0,l=100;l--&&(void 0===(a=i.propagation(n,o,r))||!a.length););return a},i.path=[],i.propagation=function(t,r,n){if(!(t.length>0))return i.path;for(var o=0,a=0;a<t.length;a++)t[a].f<t[o].f&&(o=a),t[a].f===t[o].f&&t[a].g>t[o].g&&(o=a);var l=t[o];if(l===n)return s([l,l.previous],i.path,!0);i.path=[];for(var u=l;u.previous&&(i.path.push(u.previous),(u=u.previous).previous!==i.path[i.path.length-2]););t.splice(t.indexOf(l),1),r.push(l);var d=l.neighbors;for(a=0;a<d.length;a++){var h=d[a];if(!r.includes(h)&&!h.blocked){var p=l.g+i.heuristic(h,l)*i.strength;if(t.includes(h))continue;t.push(h),h.g=p,h.h=i.heuristic(h,n),h.f=h.g+h.h,h.previous=l}}},i.heuristic=function(t,r){return i.typeHeuristic(t.x,t.y,t.z,r.x,r.y,r.z)},i);r.AStart=n;var o=function(t,r,i){this.id=-1,this.f=0,this.h=0,this.g=0,this.x=0,this.y=0,this.z=0,this.neighbors=[],this.edges=[],this.previous=void 0,this.blocked=!1,this.x=t,this.y=r,this.z=i};r.NodeAStar=o;var a=function(t,r){this.id=-1,this.n0=t,this.n1=r,this.n0.edges.push(this),this.n1.edges.push(this),t.neighbors.push(r),r.neighbors.push(t)};r.EdgeAStar=a,r.buildNetwork=function(t){for(var r=[],i=[],s=[],n=0;n<t.length;++n){var o=t[n].p0,a=t[n].p1;s.push(d(o,r)),s.push(d(a,r))}for(n=0;n<s.length;n+=2)l(s[n],s[n+1],i);return r};var l=function(t,r,i){if(t!==r){var s=u(t,r,i);if(void 0!==s)return s;var n=new a(t,r);return n.id=i.length,i.push(n),n}},u=function(t,r,i){for(var s=0;s<i.length;++s)if(i[s].n0===t&&i[s].n1===r||i[s].n0===r&&i[s].n1===t)return i[s]},d=function(t,r){for(var i=0;i<r.length;++i)if(.01>h(t.x,t.y,t.z,r[i].x,r[i].y,r[i].z))return r[i];var s=new o(t.x,t.y,t.z);return s.id=r.length,r.push(s),s},h=function(t,r,i,s,n,o){return Math.sqrt((t-s)*(t-s)+(r-n)*(r-n)+(i-o)*(i-o))}},96773:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Node=r.Edge=r.Graph=r.buildNetwork=r.NodeAStar=r.AStart=void 0;var s,n,o=i(5247);Object.defineProperty(r,"AStart",{enumerable:!0,get:function(){return o.AStart}}),Object.defineProperty(r,"NodeAStar",{enumerable:!0,get:function(){return o.NodeAStar}}),Object.defineProperty(r,"buildNetwork",{enumerable:!0,get:function(){return o.buildNetwork}});var a=((s=function(){var t=this;this.nodes=[],this.edges=[],this.costFnDistance=function(r,i,s){return void 0===s&&(s=2e-4),t.distanceTo(r.x,r.y,r.z,i.x,i.y,i.z)}}).prototype.initByLines=function(t){this.nodes=[],this.edges=[],this.AddEdgeByLines(t)},s.prototype.AddEdgeByLines=function(t){for(var r=[],i=0;i<t.length;++i){var s=t[i].p0,n=t[i].p1;r.push(this.AddNode(s)),r.push(this.AddNode(n))}for(i=0;i<r.length;i+=2)this.AddEdge(r[i],r[i+1])},s.prototype.AddNode=function(t){for(var r=0;r<this.nodes.length;++r)if(.01>this.distanceTo(t.x,t.y,t.z,this.nodes[r].x,this.nodes[r].y,this.nodes[r].z))return this.nodes[r];var i=new u(t.x,t.y,t.z);return i.id=this.nodes.length,this.nodes.push(i),i},s.prototype.AddEdge=function(t,r){if(t!==r){var i=this.findEdge(t,r);if(void 0!==i)return i;var s=new l(t,r);return s.id=this.edges.length,this.edges.push(s),s}},s.prototype.findEdge=function(t,r){for(var i=0;i<this.edges.length;++i)if(this.edges[i].n0===t&&this.edges[i].n1===r||this.edges[i].n0===r&&this.edges[i].n1===t)return this.edges[i]},s.prototype.findClosestNode=function(t){if(0!==this.nodes.length){for(var r=-1,i=Number.MAX_VALUE,s=0;s<this.nodes.length;++s){var n=this.distanceTo(t.x,t.y,t.z,this.nodes[s].x,this.nodes[s].y,this.nodes[s].z);n<i&&(r=s,i=n)}return this.nodes[r]}},s.prototype.distanceTo=function(t,r,i,s,n,o){return Math.sqrt((t-s)*(t-s)+(r-n)*(r-n)+(i-o)*(i-o))},s.prototype.propagationByNode=function(t,r,i){void 0===i&&(i=1),void 0===r&&(r=this.costFnDistance),this.nodeOrigin=t;for(var s=0;s<this.nodes.length;++s)this.nodes[s].reset();var n=[];for(n.push(t),s=0;s<1e7&&0!==n.length;++s){var o=n[0];n.shift();for(var a=0;a<o.nodes.length;++a){var l=o.nodes[a],u=r(o,l,i),d=o.networkDistance+u;(-1===l.networkDistance||d<l.networkDistance)&&(l.networkDistance=d,n.push(l))}}},s.prototype.backpropagation=function(t){var r=0,i=0;this.nodeTarget=t;var s=[];if(-1!==t.networkDistance){s.push(this.nodes[t.id]);var n=t;for(r=0;r<1e5;++r){var o=n;for(o.countVisit++,i=0;i<n.nodes.length;++i){var a=n.nodes[i];a.networkDistance<o.networkDistance&&(o=a)}if(o===n){s.push(this.nodeOrigin);break}n=o,s.push(this.nodes[n.id])}}return s},s);r.Graph=a;var l=function(t,r){this.id=-1,this.n0=t,this.n1=r,this.n0.edges.push(this),this.n1.edges.push(this),t.nodes.push(r),r.nodes.push(t)};r.Edge=l;var u=((n=function(t,r,i){this.id=-1,this.edges=[],this.nodes=[],this.networkDistance=-1,this.countVisit=0,this.x=t,this.y=r,this.z=i}).prototype.reset=function(){this.networkDistance=-1,this.countVisit=0},n.prototype.deepCopy=function(){var t=new n(this.x,this.y,this.z);return t.id=this.id,t},n);r.Node=u},2065:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.distanceTo=r.getLineSeg=r.getLineIntersectPlane=void 0,r.getLineIntersectPlane=function(t,r,i,s,n,o,a,l){if(!(t===i&&r===s||n===a&&o===l)){var u=(l-o)*(i-t)-(a-n)*(s-r);if(0!==u){var d=((a-n)*(r-o)-(l-o)*(t-n))/u,h=((i-t)*(r-o)-(s-r)*(t-n))/u;if(!(d<0||d>1||h<0||h>1))return[t+d*(i-t),r+d*(s-r)]}}},r.getLineSeg=function(t){for(var s=[],n=0;n<t.length;++n){for(var o=t[n],a=[],l=0;l<t.length;++l){var u=t[l];if(o!==u){var d=(0,r.getLineIntersectPlane)(o.p0.x,o.p0.y,o.p1.x,o.p1.y,u.p0.x,u.p0.y,u.p1.x,u.p1.y);d&&a.push({x:d[0],y:d[1],z:0})}}if(0===a.length)s.push(o);else if(1===a.length)s.push({p0:o.p0,p1:a[0]}),s.push({p0:a[0],p1:o.p1});else{var h=[];for(l=0;l<a.length;++l)h.push((0,r.distanceTo)(o.p0.x,o.p0.y,o.p0.z,a[l].x,a[l].y,a[l].z));var p=i(h);for(s.push({p0:o.p0,p1:a[p[0]]}),l=0;l<p.length-1;++l)s.push({p0:a[p[l]],p1:a[p[l+1]]});s.push({p0:a[p[p.length-1]],p1:o.p1})}}return s};var i=function(t){return t.map(function(t,r){return{ind:r,val:t}}).sort(function(t,r){return t.val>r.val?1:t.val===r.val?0:-1}).map(function(t){return t.ind})};r.distanceTo=function(t,r,i,s,n,o){return Math.sqrt((t-s)*(t-s)+(r-n)*(r-n)+(i-o)*(i-o))}},60200:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Vector3=r.reflect=r.distanceEuclidean=r.isInsideOfVecs=r.crossProduct=r.origin=r.zero=r.yAxis=r.zAxis=r.dotProduct=r.deepCopy=r.clone=r.normalize=r.getMidVec=void 0,r.getMidVec=function(t,r){return new s(t.x+.5*(r.x-t.x),t.y+.5*(r.y-t.y),t.z+.5*(r.z-t.z))},r.normalize=function(t){var r=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return new s(t.x/r,t.y/r,t.z/r)},r.clone=function(t){return(0,r.deepCopy)(t)},r.deepCopy=function(t){return new s(t.x,t.y,t.z)},r.dotProduct=function(t,r){return t.x*r.x+t.y*r.y+t.z*r.z},r.zAxis=function(){return new s(0,0,1)},r.yAxis=function(){return new s(0,1,0)},r.zero=function(){return new s(0,0,0)},r.origin=function(){return new s(0,0,0)},r.crossProduct=function(t,r){return new s(t.y*r.z-t.z*r.y,t.z*r.x-t.x*r.z,t.x*r.y-t.y*r.x)},r.isInsideOfVecs=function(t,r){for(var i=t.x,s=t.y,n=!1,o=0,a=r.length-1;o<r.length;a=o++){var l=r[o].x,u=r[o].y,d=r[a].x,h=r[a].y;u>s!=h>s&&i<(d-l)*(s-u)/(h-u)+l&&(n=!n)}return n},r.distanceEuclidean=function(t,r,i,s,n,o){return Math.sqrt((t-s)*(t-s)+(r-n)*(r-n)+(i-o)*(i-o))},r.reflect=function(t,i,n){void 0===n&&(n=1);var o=(0,r.dotProduct)(t,i);return new s(-((2*o*i.x-t.x)*n),-((2*o*i.y-t.y)*n),-((2*o*i.z-t.z)*n))};var i,s=((i=function(t,r,i){void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=r,this.z=i}).prototype.set=function(t,r,i){return this.x=t,this.y=r,this.z=i,this},i.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},i.prototype.multi=function(t){return this.x*=t,this.y*=t,this.z*=t,this},i.prototype.divByVal=function(t){return this.x/=t,this.y/=t,this.z/=t,this},i.prototype.divByVec=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},i.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},i.prototype.negate=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},i.prototype.Equals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},i.prototype.distanceTo=function(t){return i.distanceTo(this,t)},i.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-4||(this.x=this.x/t,this.y=this.y/t,this.z=this.z/t),this},i.prototype.clone=function(){return new i(this.x,this.y,this.z)},i.prototype.length=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t<1e-5?1e-5:t},i.prototype.unitize=function(){return this.normalize()},i.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},i.prototype.getAngleDegree=function(){return 180*this.getAngle()/Math.PI},i.prototype.toJSON=function(){},i.prototype.toString=function(){return"x: "+this.x.toFixed(3).toString()+" , y: "+this.y.toFixed(3).toString()+", z: "+this.z.toFixed(3).toString()},i.prototype.toFloat32Array=function(){return new Float32Array([this.x,this.y,this.z])},i.distanceTo=function(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y)+(t.z-r.z)*(t.z-r.z))},i);r.Vector3=s},54438:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getCheckBox=r.getSlider=void 0,r.getSlider=function(t,r,i){var s=document.createElement("div");s.style.display="flex";var n=document.createElement("input");n.type="range",n.min="".concat(r),n.max="".concat(i);var o=document.createElement("div");return o.textContent=t,o.style.color="#aaa",s.appendChild(n),s.appendChild(o),{div:s,slider:n}},r.getCheckBox=function(t){var r=document.createElement("div");r.style.display="flex";var i=document.createElement("input");i.type="checkbox",i.defaultChecked=!1;var s=document.createElement("div");return s.textContent=t,s.style.color="#aaa",r.appendChild(i),r.appendChild(s),{div:r,checkBox:i}}},28752:function(t,r){"use strict";var i=this&&this.__awaiter||function(t,r,i,s){return new(i||(i=Promise))(function(n,o){var a=function(t){try{u(s.next(t))}catch(t){o(t)}},l=function(t){try{u(s.throw(t))}catch(t){o(t)}},u=function(t){var r,s;t.done?n(t.value):(r=t.value,(null!=(s=i)&&"undefined"!=typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](r):r instanceof s)?r:new i(function(t){t(r)})).then(a,l)};u((s=s.apply(t,r||[])).next())})},s=this&&this.__generator||function(t,r){var i,s,n,o,a=function(t){return function(r){return l([t,r])}},l=function(o){if(i)throw TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,s=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((n=(n=u.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){u.label=o[1];break}if(6===o[0]&&u.label<n[1]){u.label=n[1],n=o;break}if(n&&u.label<n[2]){u.label=n[2],u.ops.push(o);break}n[2]&&u.ops.pop(),u.trys.pop();continue}o=r.call(t,u)}catch(t){o=[6,t],s=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}},u={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o};Object.defineProperty(r,"__esModule",{value:!0}),r.loadSVGFromHTTP=r.getImgFromURL=r.getCSVFromURL=r.getJSONFromURL=void 0,r.getJSONFromURL=function(t){return i(void 0,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,fetch(t)];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()]}})})},r.getCSVFromURL=function(t){return i(void 0,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,fetch(t)];case 1:return[4,r.sent().text()];case 2:return[2,r.sent()]}})})},r.getImgFromURL=function(t){return i(void 0,void 0,void 0,function(){return s(this,function(r){return[2,fetch("".concat(t)).then(function(t){return t.blob()}).then(function(t){var r=new Image,i=URL.createObjectURL(t);return r.src=i,r.onload=function(){r.crossOrigin="anonymous"},r}).catch(function(t){})]})})},r.loadSVGFromHTTP=function(t){return i(void 0,void 0,void 0,function(){return s(this,function(r){return[2,fetch(t,{mode:"no-cors"}).then(function(t){return t.text()}).catch(function(t){console.log(t)})]})})}},42729:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DitheringFloyd=void 0;var i,s=((i=function(){}).make=function(t,r){void 0===r&&(r=1),u(t),n(t,r)},i);r.DitheringFloyd=s;var n=function(t,r){for(var i=t.getImageData(0,0,t.canvas.width,t.canvas.height),s=new ImageData(new Uint8ClampedArray(i.data),i.width,i.height),n=0;n<i.height;n++)for(var a=0;a<i.width;a++){var l=4*a+n*i.width*4,u=i.data[l],h=i.data[l+1],p=i.data[l+2],c=Math.round(r*u/255*(255/r)),f=Math.round(r*h/255*(255/r)),y=Math.round(r*p/255*(255/r));i.data[l]=c,i.data[l+1]=f,i.data[l+2]=y;var m=new d(u-c,h-f,p-y);o(s,i,a+1,n,7,m),o(s,i,a-1,n+1,3,m),o(s,i,a,n+1,5,m),o(s,i,a+1,n+1,1,m)}t.putImageData(s,0,0)},o=function(t,r,i,s,n,o){var l=function(t,i){return 4*t+i*r.width*4},u=r.data[l(s,i)],d=r.data[l(s,i)+1],h=r.data[l(s,i)+2];u+=o.r*(n/16),d+=o.g*(n/16),h+=o.b*(n/16),t.data[l(s,i)]=a(u),t.data[l(s,i)+1]=a(d),t.data[l(s,i)+2]=a(h)},a=function(t){return l(Math.round(t))},l=function(t){return t<0?0:t>255?255:t},u=function(t){for(var r=t.getImageData(0,0,t.canvas.width,t.canvas.height),i=new ImageData(new Uint8ClampedArray(r.data),r.width,r.height),s=0;s<r.height;s++)for(var n=0;n<r.width;n++){var o=4*n+s*r.width*4,a=.299*i.data[o]+.587*i.data[o+1]+.114*i.data[o+2];i.data[o]=i.data[o+1]=i.data[o+2]=a}t.putImageData(i,0,0)},d=function(t,r,i){this.r=t,this.g=r,this.b=i}},57104:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dithering4_4=r.getArrayBinaryImgFromCtx=r.ditheringFloydSteinberg=r.DitheringFloyd=r.TypeDithering=void 0,(s=r.TypeDithering||(r.TypeDithering={})).BayerOrderedDithering="Bayer ordered dithering",s.FloydSteinberg="Floyd Steinberg",s.None="None";var s,n=i(42729);Object.defineProperty(r,"DitheringFloyd",{enumerable:!0,get:function(){return n.DitheringFloyd}}),r.ditheringFloydSteinberg=function(t){for(var r=t.getImageData(0,0,t.canvas.width,t.canvas.height),i=new ImageData(new Uint8ClampedArray(r.data),r.width,r.height),s=function(t,i){return 4*t+i*r.width*4},n=0;n<r.height;n++)for(var o=0;o<r.width;o++){var a=i.data[s(o,n)],l=a>125?255:0;i.data[s(o,n)]=i.data[s(o,n)+1]=i.data[s(o,n)+2]=l;var u=a-l;i.data[s(o+1,n)]=i.data[s(o+1,n)+1]=i.data[s(o+1,n)+2]=i.data[s(o+1,n)]+7*u/16,i.data[s(o-1,n+1)]=i.data[s(o-1,n+1)+1]=i.data[s(o-1,n+1)+2]=i.data[s(o-1,n+1)]+3*u/16,i.data[s(o,n+1)]=i.data[s(o,n+1)+1]=i.data[s(o,n+1)+2]=i.data[s(o,n+1)]+5*u/16,i.data[s(o+1,n+1)]=i.data[s(o+1,n+1)+1]=i.data[s(o+1,n+1)+2]=i.data[s(o+1,n+1)]+1*u/16}t.putImageData(i,0,0)},r.getArrayBinaryImgFromCtx=function(t){for(var r=t.getImageData(0,0,t.canvas.width,t.canvas.height),i=[],s=0;s<r.data.length;s++)0===r.data[4*s]?i.push(1):i.push(0),i.push(" ");return i},r.dithering4_4=function(t){for(var r=t.getImageData(0,0,t.canvas.width,t.canvas.height),i=new ImageData(new Uint8ClampedArray(r.data),r.width,r.height),s=[[1,9,3,11],[13,5,15,7],[4,12,2,10],[16,8,14,6]],n=(r.width,r.height),o=(r.data,0);o<r.height;o++)for(var a=0;a<r.width;a++){var l=4*(a*n+o),u=s[a%4][o%4];i.data[l]=i.data[l+1]=i.data[l+2]=32*((i.data[l]+u)/32|0)}t.putImageData(i,0,0)}},92610:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MercatorProjection=r.shuffleArray=r.coord4326To3857=r.coord3857To4326=r.linearInterpolate=r.getInterpolatedArray=r.getIndexBySortDescending=r.fahrenheit2celsius=r.celsius2fahrenheit=void 0,r.celsius2fahrenheit=function(t){return 1.8*t+32},r.fahrenheit2celsius=function(t){return 5*(t-32)/9},r.getIndexBySortDescending=function(t){for(var r=Array(t.length),i=0;i<t.length;++i)r[i]=i;return r.sort(function(r,i){return t[r]>t[i]?-1:t[r]<t[i]?1:0}),r},r.getInterpolatedArray=function(t,i){var s=[],n=(t.length-1)/(i-1);s[0]=t[0];for(var o=1;o<i-1;o++){var a=o*n,l=+Math.floor(a).toFixed(),u=+Math.ceil(a).toFixed(),d=a-l;s[o]=(0,r.linearInterpolate)(t[l],t[u],d)}return s[i-1]=t[t.length-1],s},r.linearInterpolate=function(t,r,i){return t+(r-t)*i},r.coord3857To4326=function(t,r){var i=t/(20037508.34/180);return[180*t/20037508.34,i=Math.atan(Math.pow(2.7182818284,Math.PI/180*i))/(Math.PI/360)-90]},r.coord4326To3857=function(t,r){var i=r+90;return i*=Math.PI/360,[20037508.34*t/180,i=20037508.34*(i=Math.log(i=Math.tan(i))/(Math.PI/180))/180]},r.shuffleArray=function(t){for(var r=t.length-1;r>0;r--){var i=Math.floor(Math.random()*(r+1)),s=t[r];t[r]=t[i],t[i]=s}},r.MercatorProjection=function(t,r){return[30559983.333/360*(t+180),223- -(30559983.333*Math.log(Math.tan(Math.PI/4+r*Math.PI/180/2))/(2*Math.PI)*1)]}},327:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RendererCanvas=void 0;var i,s=((i=function(t){var r=this;this.isDown=!1,this.debugMode=!1,this.isStatic=!1,this.prevent=!1,this.delay=250,this.isDrag=!1,this.resize=function(){var t=r.divHost.getBoundingClientRect();r.canvas.width=t.width,r.canvas.height=t.height},this.divHost="string"==typeof t?document.getElementById(t):t;var i=this.divHost.getBoundingClientRect();this.canvas=document.createElement("canvas"),this.canvas.width=i.width,this.canvas.height=i.height,this.divHost.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.canvas.onclick=function(t){r.timer=setTimeout(function(){r.prevent||r.mouseClick(t.offsetX,t.offsetY),r.isDrag=!1,r.prevent=!1},r.delay)},this.canvas.onwheel=function(t){r.mouseWheel(t)},this.canvas.ondblclick=function(t){clearTimeout(r.timer),r.prevent=!0,r.mouseDoubleClick(t.offsetX,t.offsetY)},this.canvas.onmousedown=function(t){r.isDown=!0,r.mouseDown(t.offsetX,t.offsetY)},this.canvas.onmouseup=function(t){r.isDown=!1,r.isDrag=!1,r.mouseUp(t.offsetX,t.offsetY)},this.canvas.onmousemove=function(t){r.isDown?(r.isDrag=!0,r.prevent=!0,r.mouseDrag(t.offsetX,t.offsetY)):r.mouseMove(t.offsetX,t.offsetY)},window.addEventListener("resize",this.resize)}).prototype.start=function(){this.loop(this.ctx)},i.prototype.destroy=function(){window.removeEventListener("resize",this.resize),this.isStatic=!0;try{for(;void 0!==this.divHost&&void 0!==this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}catch(t){}this.destroyPost()},i.prototype.destroyPost=function(){},i.prototype.loop=function(t){var r=this;this.isStatic||(requestAnimationFrame(function(){r.loop(r.ctx)}),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.render(this.ctx))},i.prototype.render=function(t){},i.prototype.mouseClick=function(t,r){this.debugMode&&console.log("click")},i.prototype.mouseDoubleClick=function(t,r){this.debugMode&&console.log("d-click")},i.prototype.mouseDown=function(t,r){this.debugMode&&console.log("down")},i.prototype.mouseUp=function(t,r){this.debugMode&&console.log("up")},i.prototype.mouseMove=function(t,r){this.debugMode&&console.log("move")},i.prototype.mouseDrag=function(t,r){this.debugMode&&console.log("drag")},i.prototype.mouseWheel=function(t){this.debugMode&&console.log("wheel",t)},i.prototype.keyDown=function(t){this.debugMode&&console.log("keydown")},i.prototype.keyUp=function(t){this.debugMode&&console.log("keyup")},i);r.RendererCanvas=s},18842:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RendererCanvasDynamicLight=void 0;var i,s=((i=function(t){var r=this;this.isDown=!1,this.debugMode=!1,this.isStatic=!1,this.prevent=!1,this.animation=!0,this.delay=250,this.frameNum=1,this.isDrag=!1,this.start=function(){r.loop(r.ctx)},this.resize=function(){var t=r.divHost.getBoundingClientRect();r.canvas.width=t.width,r.canvas.height=t.height},this.loop=function(t){r.isStatic||((r.frameNum++<100||r.animation)&&requestAnimationFrame(function(){r.loop(t)}),t.clearRect(0,0,t.canvas.width,t.canvas.height),r.render(t))},this.forceRender=function(){r.frameNum=0,r.loop(r.ctx)},this.divHost=t;var i=this.divHost.getBoundingClientRect();this.canvas=document.createElement("canvas"),this.canvas.width=i.width,this.canvas.height=i.height,this.divHost.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.canvas.onclick=function(t){r.timer=setTimeout(function(){r.prevent||r.mouseClick(t.offsetX,t.offsetY),r.isDrag=!1,r.prevent=!1},r.delay)},this.canvas.onwheel=function(t){r.mouseWheel(t)},this.canvas.ondblclick=function(t){clearTimeout(r.timer),r.prevent=!0,r.mouseDoubleClick(t.offsetX,t.offsetY)},this.canvas.onmousedown=function(t){r.isDown=!0,r.mouseDown(t.offsetX,t.offsetY)},this.canvas.onmouseup=function(t){r.isDown=!1,r.isDrag=!1,r.mouseUp(t.offsetX,t.offsetY)},this.canvas.onmousemove=function(t){r.isDown?(r.isDrag=!0,r.prevent=!0,r.mouseDrag(t.offsetX,t.offsetY)):r.mouseMove(t.offsetX,t.offsetY)},window.addEventListener("resize",this.resize)}).prototype.destroy=function(){window.removeEventListener("resize",this.resize),this.isStatic=!0;try{for(;void 0!==this.divHost&&void 0!==this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}catch(t){}},i.prototype.render=function(t){},i.prototype.mouseClick=function(t,r){this.debugMode&&console.log("click")},i.prototype.mouseDoubleClick=function(t,r){this.debugMode&&console.log("d-click")},i.prototype.mouseDown=function(t,r){this.debugMode&&console.log("down")},i.prototype.mouseUp=function(t,r){this.debugMode&&console.log("up")},i.prototype.mouseMove=function(t,r){this.debugMode&&console.log("move")},i.prototype.mouseDrag=function(t,r){this.debugMode&&console.log("drag")},i.prototype.mouseWheel=function(t){this.debugMode&&console.log("wheel",t)},i);r.RendererCanvasDynamicLight=s},12930:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardEventData=r.MouseEventData=r.EventInteraction=r.MOUSE_TYPE=void 0,(s=n=r.MOUSE_TYPE||(r.MOUSE_TYPE={})).DOWN="DOWN",s.UP="UP",s.MOVE="MOVE",s.CLICK="CLICK",s.DRAG="DRAG";var i,s,n,o=function(){function t(r){this.isDown=!1,this.app=r,t.mouseEventDataPre=new a,this.InitArcGISMapEventV4x()}return t.prototype.InitArcGISMapEventV4x=function(){var t=this;this.app.mView.watch("size",function(){t.app.ctx.canvas.width=t.app.mView.container.clientWidth,t.app.ctx.canvas.height=t.app.mView.container.clientHeight,t.app.resizeCanvas(t.app.mView.container.clientWidth,t.app.mView.container.clientHeight)}),this.app.mView.on("pointer-down",function(r){var i=t.CommonEventBuilderArcGIS(r);i.type=n.DOWN,i.isDown=!0,t.isDown=!0,t.app.mouseEvent(i)}),this.app.mView.on("pointer-up",function(r){var i=t.CommonEventBuilderArcGIS(r);i.type=n.UP,i.isDown=!1,t.isDown=!1,t.app.mouseEvent(i)}),this.app.mView.on("click",function(r){var i=t.CommonEventBuilderArcGIS(r);i.type=n.CLICK,t.app.mouseEvent(i)}),this.app.mView.on("drag",function(r){if(t.isDown){t.app.disablePan&&r.stopPropagation();var i=t.CommonEventBuilderArcGIS(r);i.type=n.DRAG,t.app.mouseEvent(i)}}),this.app.mView.on("pointer-move",function(r){if(!t.isDown){var i=t.CommonEventBuilderArcGIS(r);i.type=n.MOVE,t.app.mouseEvent(i)}}),this.app.mView.on("key-down",function(r){"Arrow"!==r.key.slice(0,5)&&"-"!==r.key&&"="!==r.key&&"d"!==r.key||r.stopPropagation(),t.KeyDownJSAPI4X(r.native)})},t.prototype.CommonEventBuilderArcGIS=function(r){var i=new a;return i.preX=t.mouseEventDataPre.x,i.preY=t.mouseEventDataPre.y,i.x=r.x,i.y=r.y,i.yGLPicking=r.native.target.getBoundingClientRect().bottom-r.native.clientY,i.pressedShift=r.native.shiftKey,i.pressedAlt=r.native.altKey,i.pressedCtrl=r.native.ctrlKey,i.native=r.native,t.mouseEventDataPre=i,i},t.prototype.KeyDownJSAPI4X=function(t){this.CommonEventBuilder(t),this.app.keyDown(t)},t.prototype.CommonEventBuilder=function(t){var r=new l;return r.key=t.key,r.keyCode=t.keyCode,r.code=t.code,r.hasCtrlKey=t.ctrlKey,r.hasShiftKey=t.shiftKey,r.hasAltKey=t.altKey,r.hasMetaCommand=t.metaKey,r},t}();r.EventInteraction=o;var a=((i=function(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0}).prototype.DeepCopy=function(){var t=new i;return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.pressedAlt=this.pressedAlt,t.pressedShift=this.pressedShift,t.pressedCtrl=this.pressedCtrl,t.isDoubleClick=this.isDoubleClick,t.isDown=this.isDown,t.isMove=this.isMove,t.lat=this.lat,t.long=this.long,t.wheel=this.wheel,t.preWheel=this.preWheel,t.yGLPicking=this.yGLPicking,t.native=this.native,t},i);r.MouseEventData=a;var l=function(){};r.KeyboardEventData=l},67702:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RendererJSAPI=void 0;var s,n=i(63449),o=i(46615),a=i(33355),l=i(12930),u=((s=function(t){var r=this;this.disablePan=!1,this.isStatic=!1,this.toScreen=function(t,i){r.mPoint.longitude=t,r.mPoint.latitude=i;var s=r.mView.toScreen(r.mPoint);return[s.x,s.y]},this.toMap=function(t,i){var s=r.mView.toMap({x:t,y:i}).clone();return[s.longitude,s.latitude,s.x,s.y]},this.hostDiv=document.getElementById(t);var i=new o.default({basemap:"dark-gray-vector"}),s=new n.default({container:t,map:i,zoom:15,center:[-71.0933575,42.3591654],ui:{components:[]}});s.when(function(){s.ui.add({component:new a.default({view:s}),position:"top-right"}),r.mView=s,r.canvas=document.createElement("canvas"),r.canvas.id="digitalMappingVisualization",r.canvas.style.zIndex="1",r.canvas.style.position="absolute",r.canvas.style.pointerEvents="none",r.ctx=r.canvas.getContext("2d"),r.mView.container.appendChild(r.canvas),r.hostDiv=r.mView.container,r.ctx.globalCompositeOperation="source-over",r.canvas.width=r.mView.container.clientWidth,r.canvas.height=r.mView.container.clientHeight,r.eventInteraction=new l.EventInteraction(r),r.mPoint=r.mView.toMap({x:0,y:0}),r.mPoint.spatialReference=r.mView.spatialReference,r.mView.zoom=16,r.initPost(),r.start()})}).prototype.initPost=function(){},s.prototype.mouseEvent=function(t){if(t.type!==l.MOUSE_TYPE.DOWN){if(t.type!==l.MOUSE_TYPE.UP){if(t.type!==l.MOUSE_TYPE.CLICK)return t.type===l.MOUSE_TYPE.DRAG?void this.mouseDrag(t.x,t.y):void this.mouseMove(t.x,t.y);this.mouseClick(t.x,t.y)}else this.mouseUp(t.x,t.y)}else this.mouseDown(t.x,t.y)},s.prototype.start=function(){this.time=0,this.draw(this.ctx)},s.prototype.draw=function(t){var r=this;this.isStatic||(requestAnimationFrame(function(){r.draw(r.ctx)}),this.clear(this.ctx),this.time+=.1,this.render(this.ctx))},s.prototype.clear=function(t){t&&t.clearRect(0,0,t.canvas.width,t.canvas.height)},s.prototype.center=function(t,r){this.mPoint.longitude=t,this.mPoint.latitude=r,this.mView.center=this.mPoint},s.prototype.zoom=function(t){this.mView.zoom=t},s.prototype.destroy=function(){if(this.isStatic=!0,this.hostDiv)try{for(;this.hostDiv.firstChild;)this.hostDiv.removeChild(this.hostDiv.firstChild)}catch(t){console.error("Error in destroy method:",t)}else console.warn("hostDiv is undefined in destroy method")},s.prototype.render=function(t){},s.prototype.keyDown=function(t){},s.prototype.mouseClick=function(t,r){},s.prototype.mouseDown=function(t,r){},s.prototype.mouseUp=function(t,r){},s.prototype.mouseDrag=function(t,r){},s.prototype.mouseMove=function(t,r){},s.prototype.resizeCanvas=function(t,r){},s);r.RendererJSAPI=u},35410:function(t,r,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,r,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(r,i);n&&!("get"in n?!r.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,n)}:function(t,r,i,s){void 0===s&&(s=i),t[s]=r[i]}),n=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||s(r,t,i)};Object.defineProperty(r,"__esModule",{value:!0}),n(i(327),r),n(i(18842),r),n(i(67702),r),n(i(12930),r)},75559:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Deltatime=void 0;var i,s=((i=function(){this.last=0}).prototype.UpdateFPS=function(){this.now=window.performance.now(),this.msLoop=this.now-this.last,this.last=this.now,this.delta=this.delta+Math.min(1,this.msLoop/1e3),this.delta>this.frameRate&&(this.delta=this.delta-this.frameRate),this.delta=(Date.now()-this.timeLastRender)/1e3,this.timeLastRender=Date.now(),this.frameRate=1/this.delta},Object.defineProperty(i.prototype,"dt",{get:function(){return this.delta},enumerable:!1,configurable:!0}),i);r.Deltatime=s},38473:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getUUID=r.Deltatime=void 0;var s=i(75559);Object.defineProperty(r,"Deltatime",{enumerable:!0,get:function(){return s.Deltatime}}),r.getUUID=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===r?i:3&i|8).toString(16)})}},98763:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.KNN=void 0;var i,s,n,o=function(t,r){return Math.sqrt(function(t,r){for(var i=0,s=0;s<t.length;s++)i+=(t[s]-r[s])*(t[s]-r[s]);return i}(t,r))},a=((i=function(t,r,i){if(void 0===i&&(i={}),!0===t)return this.tree=new d(r.kdTree,i),this.k=r.k,this.classes=new Set(r.classes),void(this.isEuclidean=r.isEuclidean);for(var s=new Set(r),n=s.size+1,a=Array(t.length),l=0;l<a.length;++l)a[l]=t[l].slice();for(l=0;l<r.length;++l)a[l].push(r[l]);this.tree=new d(a,o),this.k=n,this.classes=s,this.isEuclidean=!0}).prototype.predict=function(t){if(Array.isArray(t)){if("number"==typeof t[0])return l(this,t);if(Array.isArray(t[0])&&"number"==typeof t[0][0]){for(var r=Array(t.length),i=0;i<t.length;i++)r[i]=l(this,t[i]);return r}}throw TypeError("dataset error")},i);r.KNN=a;var l=function(t,r){for(var i=t.kdTree.nearest(r,t.k),s={},n=-1,o=-1,a=i[0][0].length-1,l=0,u=t.classes;l<u.length;l++)s[u[l]]=0;for(var d=0;d<i.length;++d){var h=i[d][0][a],p=++s[h];p>o&&(n=h,o=p)}return n},u=function(t,r,i){this.obj=t,this.left=null,this.right=null,this.parent=i,this.dimensions=r},d=((s=function(t,r){if(Array.isArray(t)){this.dimensions=Array(t[0].length);for(var i=0;i<this.dimensions.length;i++)this.dimensions[i]=i;this.root=h(t,0,null,this.dimensions)}else this.dimensions=t.dimensions,this.root=t,p(this.root);this.metric=r}).prototype.nearest=function(t,r,i){var s,n=this.metric,o=this.dimensions,a=new c(function(t){return-t[1]}),l=function(i){var s,u,d,h,p=function(t,i){a.push([t,i]),a.size()>r&&a.pop()},c=o[i.dimension],f=n(t,i.obj),y={};for(h=0;h<o.length;h+=1)h===i.dimension?y[o[h]]=t[o[h]]:y[o[h]]=i.obj[o[h]];u=n(y,i.obj),null!==i.right||null!==i.left?(l(s=null===i.right?i.left:null===i.left?i.right:t[c]<i.obj[c]?i.left:i.right),(a.size()<r||f<a.peek()[1])&&p(i,f),(a.size()<r||Math.abs(u)<a.peek()[1])&&null!==(d=s===i.left?i.right:i.left)&&l(d)):(a.size()<r||f<a.peek()[1])&&p(i,f)};if(i)for(s=0;s<r;s+=1)a.push([null,i]);this.root&&l(this.root);var u=[];for(s=0;s<Math.min(r,a.content.length);s+=1)a.content[s][0]&&u.push([a.content[s][0].obj,a.content[s][1]]);return u},s),h=function(t,r,i,s){var n=r%s.length;if(0===t.length)return null;if(1===t.length)return new u(t[0],n,i);t.sort(function(t,r){return t[s[n]]-r[s[n]]});var o=Math.floor(t.length/2),a=new u(t[o],n,i);return a.left=h(t.slice(0,o),r+1,a,s),a.right=h(t.slice(o+1),r+1,a,s),a},p=function(t){t.left&&(t.left.parent=t,p(t.left)),t.right&&(t.right.parent=t,p(t.right))},c=((n=function(t){this.content=[],this.scoreFunction=t}).prototype.push=function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},n.prototype.pop=function(){var t=this.content[0],r=this.content.pop();return this.content.length>0&&(this.content[0]=r,this.sinkDown(0)),t},n.prototype.peek=function(){return this.content[0]},n.prototype.size=function(){return this.content.length},n.prototype.bubbleUp=function(t){for(var r=this.content[t];t>0;){var i=Math.floor((t+1)/2)-1,s=this.content[i];if(!(this.scoreFunction(r)<this.scoreFunction(s)))break;this.content[i]=r,this.content[t]=s,t=i}},n.prototype.sinkDown=function(t){for(var r=this.content.length,i=this.content[t],s=this.scoreFunction(i);;){var n=void 0,o=2*(t+1),a=o-1,l=null;if(a<r){var u=this.content[a];(n=this.scoreFunction(u))<s&&(l=a)}if(o<r){var d=this.content[o];this.scoreFunction(d)<(null===l?s:n)&&(l=o)}if(null===l)break;this.content[t]=this.content[l],this.content[l]=i,t=l}},n)},33609:(t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LinearRegressionGradientDescent=r.LinearRegression=void 0;var i,s,n=((i=function(){this.weight=1,this.bias=0}).prototype.fit=function(t,r){this.dataX=t,this.dataY=r;for(var i=0,s=0,n=0;n<this.dataX.length;++n)i+=this.dataX[n],s+=this.dataY[n];var o=i/this.dataX.length,a=s/this.dataY.length,l=0,u=0;for(n=0;n<this.dataX.length;++n)l+=(this.dataX[n]-o)*(this.dataY[n]-a),u+=(this.dataX[n]-o)*(this.dataX[n]-o);this.weight=l/u,this.bias=a-this.weight*o},i.prototype.predict=function(t){for(var r=[],i=0;i<t.length;++i)r.push(this.weight*t[i]+this.bias);return r},i);r.LinearRegression=n;var o=((s=function(){this.weight=1,this.bias=0,this.learningRate=.01}).prototype.fit=function(t,r,i){void 0===i&&(i=10),this.dataX=t,this.dataY=r;for(var s=0;s<i;++s)this.GradientDescent()},s.prototype.GradientDescent=function(){for(var t=0;t<this.dataX.length;++t){var r=this.dataX[t],i=this.dataY[t]-(this.weight*r+this.bias);this.weight=this.weight+i*r*this.learningRate,this.bias=this.bias+i*this.learningRate}},s.prototype.predict=function(t){for(var r=[],i=0;i<t.length;++i)r.push(this.weight*t[i]+this.bias);return r},s);r.LinearRegressionGradientDescent=o},94059:function(t,r,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,r,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(r,i);n&&!("get"in n?!r.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return r[i]}}),Object.defineProperty(t,s,n)}:function(t,r,i,s){void 0===s&&(s=i),t[s]=r[i]}),n=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||s(r,t,i)};Object.defineProperty(r,"__esModule",{value:!0}),r.rSquared=void 0,n(i(33609),r),n(i(98763),r),r.rSquared=function(t,r,i){for(var s,n=0,o=0,a=r.reduce(function(t,r){return t+r})/r.length,l=0;l<t.length;l++)n+=Math.pow(r[l]-(s=t[l],i[0]+i[1]*s),2),o+=Math.pow(r[l]-a,2);return 1-n/o}},27832:(t,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>T});var s,n=i(24765),o=i(51084),a=i(58493),l=i(8393),u=i(72140),d=i(59118),h=i(63878),p=i(57197),c=i(66150),f=i(82639),y=i(66138),m=i(82583),g=i(53919),_=(i(21314),i(30407)),b=i(62300),v=i(371),w=i(13725),C=i(73640),S=i(30903),x=i(91594);let M=0,I="esri.Basemap",E=s=class extends(0,u.eC)(h.Z){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+M++,this.baseLayers=new o.Z,this.referenceLayers=new o.Z;let r=t=>{t.parent&&t.parent!==this&&"remove"in t.parent&&t.parent.remove(t),t.parent=this,"elevation"===t.type&&c.Z.getLogger(this.declaredClass).error(`Layer '${t.title}, id:${t.id}' of type '${t.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=t=>{t.parent=null};this.baseLayers.on("after-add",t=>r(t.item)),this.referenceLayers.on("after-add",t=>r(t.item)),this.baseLayers.on("after-remove",t=>i(t.item)),this.referenceLayers.on("after-remove",t=>i(t.item))}initialize(){this.when().catch(t=>{c.Z.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){for(let t of this.baseLayers.removeAll())t.destroy();for(let t of this.referenceLayers.removeAll())t.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem?.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",(0,a.Z)(t,this._get("baseLayers")))}_writeBaseLayers(t,r,i){let s=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(t=>{let r=(0,x.Nw)(t,i.webmap?i.webmap.getLayerJSONFromResourceInfo(t):null,i);(0,f.pC)(r)&&s.push(r)}),this.referenceLayers.forEach(t=>{let r=(0,x.Nw)(t,i.webmap?i.webmap.getLayerJSONFromResourceInfo(t):null,i);(0,f.pC)(r)&&(r.isReference=!0,s.push(r))})),r.baseMapLayers=s}set referenceLayers(t){this._set("referenceLayers",(0,a.Z)(t,this._get("referenceLayers")))}writeTitle(t,r){r.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return(0,p.G)(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){let t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(t.loadStatus="loaded"),new s({resourceInfo:this.resourceInfo}).set(t)}read(t,r){this.resourceInfo||this._set("resourceInfo",{data:t,context:r}),super.read(t,r)}write(t,r){return t=t||{},r&&r.origin||(r={origin:"web-map",...r}),super.write(t,r),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(t=>{let r=(0,d.d9)(t);return r.url&&(0,m.oC)(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&(0,m.oC)(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),t}async _loadFromSource(t){let{resourceInfo:r,portalItem:i}=this;(0,y.k_)(t);let s=[];if(r){let i=r.context?r.context.url:null;if(s.push(this._loadLayersFromJSON(r.data,i,t)),r.data.id&&!r.data.title){let t=r.data.id;s.push((0,S.g)(t).then(t=>{t&&this.read({title:t},r.context)}))}}else i&&s.push(this._loadFromItem(i,t));await Promise.all(s)}async _loadLayersFromJSON(t,r,s){let n=this.resourceInfo&&this.resourceInfo.context,o=this.portalItem&&this.portalItem.portal||n&&n.portal||null,a=n&&"web-scene"===n.origin?"web-scene":"web-map",{populateOperationalLayers:l}=await i.e(7603).then(i.bind(i,37603)),u=[];if((0,y.k_)(s),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){let i={context:{origin:a,url:r,portal:o,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},s=l(this.baseLayers,t.baseMapLayers.filter(t=>!t.isReference),i);u.push(s);let n=l(this.referenceLayers,t.baseMapLayers.filter(t=>t.isReference),i);u.push(n)}await (0,y.as)(u)}async _loadFromItem(t,r){let i=await t.load(r),s=await i.fetchData("json",r),n=(0,m.mN)(t.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:"web-map",portal:t.portal||w.Z.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||w.Z.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,r)}static fromId(t){let r=S.s[t];if(r){if(r.deprecated){let r=null;"dark-gray"===t?r="dark-gray-vector":"gray"===t?r="gray-vector":"streets"===t?r="streets-vector":"topo"===t&&(r="topo-vector"),(0,l.x9)(c.Z.getLogger(I),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:r,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return s.fromJSON(r)}return null}};(0,n._)([(0,g.Cb)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,r,i,s){this._writeBaseLayers(t,r,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:o.Z}},writer(t,r,i,s){this._writeBaseLayers(t,r,s)}}}}}})],E.prototype,"baseLayers",null),(0,n._)([(0,g.Cb)({type:String,json:{origins:{"web-scene":{write:!0}}}})],E.prototype,"id",void 0),(0,n._)([(0,g.Cb)({type:C.default})],E.prototype,"portalItem",void 0),(0,n._)([(0,g.Cb)()],E.prototype,"referenceLayers",null),(0,n._)([(0,g.Cb)({readOnly:!0})],E.prototype,"resourceInfo",void 0),(0,n._)([(0,g.Cb)({type:v.Z})],E.prototype,"spatialReference",void 0),(0,n._)([(0,g.Cb)()],E.prototype,"thumbnailUrl",void 0),(0,n._)([(0,g.Cb)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],E.prototype,"title",void 0),(0,n._)([(0,b.c)("title")],E.prototype,"writeTitle",null);let T=E=s=(0,n._)([(0,_.j)(I)],E)},55410:(t,r,i)=>{"use strict";i.d(r,{Z:()=>c});var s,n,o=i(81533),a=i(5047),l=i(82639),u=i(21314);function d(t){return(0,a.uZ)((0,u.vU)(t),0,255)}function h(t,r,i){return isNaN(t=Number(t))?i:t<r?r:t>i?i:t}class p{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,r,i,s=new p){return s.r=Math.round(t.r+(r.r-t.r)*i),s.g=Math.round(t.g+(r.g-t.g)*i),s.b=Math.round(t.b+(r.b-t.b)*i),s.a=t.a+(r.a-t.a)*i,s._sanitize()}static fromRgb(t,r){let i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){let t=i[2].split(/\s*,\s*/),s=i[1];if("rgb"===s&&3===t.length||"rgba"===s&&4===t.length){let i=t[0];if("%"===i.charAt(i.length-1)){let i=t.map(t=>2.56*parseFloat(t));return 4===t.length&&(i[3]=parseFloat(t[3])),p.fromArray(i,r)}return p.fromArray(t.map(t=>parseFloat(t)),r)}if("hsl"===s&&3===t.length||"hsla"===s&&4===t.length)return p.fromArray((0,o.B7)(parseFloat(t[0]),parseFloat(t[1])/100,parseFloat(t[2])/100,parseFloat(t[3])),r)}return null}static fromHex(t,r=new p){if(4!==t.length&&7!==t.length||"#"!==t[0])return null;let i=4===t.length?4:8,s=(1<<i)-1,n=Number("0x"+t.substr(1));return isNaN(n)?null:(["b","g","r"].forEach(t=>{let o=n&s;n>>=i,r[t]=4===i?17*o:o}),r.a=1,r)}static fromArray(t,r=new p){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){let i=(0,o.St)(t)?(0,o.h$)(t):null;return i&&p.fromArray(i,r)||p.fromRgb(t,r)||p.fromHex(t,r)}static fromJSON(t){return t&&new p([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return(0,l.pC)(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return(0,l.pC)(t)?[t.r/255,t.g/255,t.b/255,null!=t.a?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return"string"==typeof t?p.fromString(t,this):Array.isArray(t)?p.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof p||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){let t=this.r.toString(16),r=this.g.toString(16),i=this.b.toString(16);return`#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${i.length<2?"0"+i:i}`}toCss(t=!1){let r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=p.AlphaMode.ALWAYS){let r=d(this.r),i=d(this.g),s=d(this.b);return t===p.AlphaMode.ALWAYS||1!==this.a?[r,i,s,d(255*this.a)]:[r,i,s]}clone(){return new p(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return(0,l.pC)(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(h(this.r,0,255)),this.g=Math.round(h(this.g,0,255)),this.b=Math.round(h(this.b,0,255)),this.a=h(this.a,0,1),this}_set(t,r,i,s){this.r=t,this.g=r,this.b=i,this.a=s}}p.prototype.declaredClass="esri.Color",(n=(s=p||(p={})).AlphaMode||(s.AlphaMode={}))[n.ALWAYS=0]="ALWAYS",n[n.UNLESS_OPAQUE=1]="UNLESS_OPAQUE";let c=p},94323:(t,r,i)=>{"use strict";i.d(r,{Z:()=>m});var s=i(24765),n=i(64012),o=i(19047),a=i(98402),l=i(34577),u=i(72140),d=i(82639),h=i(44042),p=i(53919),c=(i(99950),i(21314),i(30407)),f=i(95758);let y=class extends(0,l.J)(u.wq){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,h.D)(),configurable:!0})}normalizeCtorArgs(t,r,i,s){return t&&!t.declaredClass?t:{geometry:t,symbol:r,attributes:i,popupTemplate:s}}set aggregateGeometries(t){JSON.stringify(this._get("aggregateGeometries"))!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){let r=this._get("attributes");r!==t&&(this._set("attributes",t),this._notifyLayer("attributes",r,t))}set geometry(t){let r=this._get("geometry");r!==t&&(this._set("geometry",t),this._notifyLayer("geometry",r,t))}set symbol(t){let r=this._get("symbol");r!==t&&(this._set("symbol",t),this._notifyLayer("symbol",r,t))}set visible(t){let r=this._get("visible");r!==t&&(this._set("visible",t),this._notifyLayer("visible",r,t))}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(let r of[this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(t&&"defaultPopupTemplate"in r&&(0,d.pC)(r.defaultPopupTemplate))return r.defaultPopupTemplate}return null}getAttribute(t){return this.attributes?.[t]}setAttribute(t,r){if(this.attributes){let i=this.getAttribute(t);this.attributes[t]=r,this._notifyLayer("attributes",i,r,t)}else this.attributes={[t]:r},this._notifyLayer("attributes",void 0,r,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:function(t){if(!(0,d.pC)(t))return null;let r={};for(let i in t){let s=t[i];s&&(r[i]=s.toJSON())}return 0!==Object.keys(r).length?r:null}(this.aggregateGeometries),geometry:(0,d.pC)(this.geometry)?this.geometry.toJSON():null,symbol:(0,d.pC)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){(0,d.pC)(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(t,r,i,s){if(!this.layer||!("graphicChanged"in this.layer))return;let n={graphic:this,property:t,oldValue:r,newValue:i};"attributes"===t&&(n.attributeName=s),this.layer.graphicChanged(n)}};(0,s._)([(0,p.Cb)({value:null,json:{read:function(t){if(!t)return null;let r={};for(let i in t){let s=(0,f.im)(t[i]);s&&(r[i]=s)}return 0!==Object.keys(r).length?r:null}}})],y.prototype,"aggregateGeometries",null),(0,s._)([(0,p.Cb)({value:null})],y.prototype,"attributes",null),(0,s._)([(0,p.Cb)({value:null,types:n.qM,json:{read:f.im}})],y.prototype,"geometry",null),(0,s._)([(0,p.Cb)({type:Boolean})],y.prototype,"isAggregate",void 0),(0,s._)([(0,p.Cb)({clonable:"reference"})],y.prototype,"layer",void 0),(0,s._)([(0,p.Cb)({type:o.Z})],y.prototype,"popupTemplate",void 0),(0,s._)([(0,p.Cb)({clonable:"reference"})],y.prototype,"sourceLayer",void 0),(0,s._)([(0,p.Cb)({value:null,types:a.LB})],y.prototype,"symbol",null),(0,s._)([(0,p.Cb)({type:Boolean,value:!0})],y.prototype,"visible",null),((y=(0,s._)([(0,c.j)("esri.Graphic")],y))||(y={})).generateUID=h.D;let m=y},46615:(t,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>$});var s,n=i(24765),o=i(27832),a=i(55410),l=i(51084),u=i(58493),d=i(1833),h=i(12790),p=i(72140),c=i(59118),f=i(63878),y=i(57197),m=i(66150),g=i(66138),_=i(53919),b=i(21314),v=i(30407),w=i(62300),C=(i(99950),i(96082),i(21374));let S=s=class extends p.wq{constructor(t){super(t),this.type="none"}clone(){return new s({type:this.type})}};(0,n._)([(0,C.J)({none:"none",stayAbove:"stay-above"})],S.prototype,"type",void 0),S=s=(0,n._)([(0,v.j)("esri.ground.NavigationConstraint")],S);var x=i(53306);let M=class extends x.Z{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};(0,n._)([(0,_.Cb)()],M.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"DECONFLICTOR_SHOW_GRID",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"LABELS_SHOW_BORDER",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"TEXT_SHOW_BASELINE",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"TEXT_SHOW_BORDER",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"OVERLAY_SHOW_CENTER",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"SHOW_POI",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"I3S_TREE_SHOW_TILES",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"I3S_SHOW_MODIFICATIONS",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"LINE_WIREFRAMES",void 0),(0,n._)([(0,_.Cb)()],M.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0);let I=new(M=(0,n._)([(0,v.j)("esri.views.3d.support.DebugFlags")],M));var E,T=i(59534);let P=E=class extends(0,p.eC)(f.Z){constructor(t){super(t),this.opacity=1,this.shading=!I.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new l.Z;let r=t=>{t.parent&&t.parent!==this&&"remove"in t.parent&&t.parent.remove(t),t.parent=this,"elevation"!==t.type&&"base-elevation"!==t.type&&m.Z.getLogger(this.declaredClass).error(`Layer '${t.title}, id:${t.id}' of type '${t.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",t=>r(t.item)),this.layers.on("after-remove",t=>{t.item.parent=null})}initialize(){this.when().catch(t=>{m.Z.getLogger(this.declaredClass).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){for(let t of this.layers.removeAll())t.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",(0,u.Z)(t,this._get("layers")))}writeLayers(t,r,i,s){let n=[];t&&(s={...s,layerContainerType:"ground"},t.forEach(t=>{if("write"in t){let r={};(0,d.sM)(t)().write(r,s)&&n.push(r)}else s&&s.messages&&s.messages.push(new h.Z("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted in the ground`,{layer:t}))})),r.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return(0,y.G)(this,t=>{t(this.layers)})}async queryElevation(t,r){await this.load({signal:r?.signal});let{ElevationQuery:s}=await i.e(8565).then(i.bind(i,88565));(0,g.k_)(r);let n=new s,o=this.layers.filter(A).toArray();return n.queryAll(o,t,r)}async createElevationSampler(t,r){await this.load({signal:r?.signal});let{ElevationQuery:s}=await i.e(8565).then(i.bind(i,88565));(0,g.k_)(r);let n=new s,o=this.layers.filter(A).toArray();return n.createSamplerAll(o,t,r)}clone(){let t={opacity:this.opacity,surfaceColor:(0,c.d9)(this.surfaceColor),navigationConstraint:(0,c.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new E({resourceInfo:this.resourceInfo}).set(t)}read(t,r){this.resourceInfo||this._set("resourceInfo",{data:t,context:r}),super.read(t,r)}_loadFromSource(t){let r=this.resourceInfo;return r?this._loadLayersFromJSON(r.data,r.context,t):Promise.resolve()}_loadLayersFromJSON(t,r,s){let n=r&&r.origin||"web-scene",o=r&&r.portal||null,a=r&&r.url||null;return i.e(7603).then(i.bind(i,37603)).then(({populateOperationalLayers:r})=>{(0,g.k_)(s);let i=[];return t.layers&&Array.isArray(t.layers)&&i.push(r(this.layers,t.layers,{context:{origin:n,url:a,portal:o,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"})),(0,g.as)(i)}).then(()=>{})}};function A(t){return"elevation"===t.type||t&&"createElevationSampler"in t}(0,n._)([(0,_.Cb)({json:{read:!1}})],P.prototype,"layers",null),(0,n._)([(0,w.c)("layers")],P.prototype,"writeLayers",null),(0,n._)([(0,_.Cb)({readOnly:!0})],P.prototype,"resourceInfo",void 0),(0,n._)([(0,_.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:b.z8,read:{reader:T.b,source:"transparency"},write:{writer:(t,r)=>{r.transparency=(0,T.a)(t)},target:"transparency"}}})],P.prototype,"opacity",void 0),(0,n._)([(0,_.Cb)({type:Boolean,nonNullable:!0,json:{read:!1}})],P.prototype,"shading",void 0),(0,n._)([(0,_.Cb)({type:a.Z,json:{type:[b.z8],write:(t,r)=>{r.surfaceColor=t.toJSON().slice(0,3)}}})],P.prototype,"surfaceColor",void 0),(0,n._)([(0,_.Cb)({type:S,json:{write:!0}})],P.prototype,"navigationConstraint",void 0);let k=P=E=(0,n._)([(0,v.j)("esri.Ground")],P);var O=i(42589),R=i(88832),L=i(82639),F=i(36844);function N(t){return!(!(t&&t.loaded&&"capabilities"in t&&t?.capabilities?.operations&&"supportsEditing"in t.capabilities.operations&&!0===t.capabilities.operations.supportsEditing)||"editingEnabled"in t&&!t.editingEnabled)}var j=i(10242),D=(i(82583),i(30903));let Z=m.Z.getLogger("esri.support.basemapUtils");var V=i(86060);let z={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var U=i(90944),G=i(84999);let q=class extends(0,G.Q)((0,U.K)(R.Z.EventedMixin(x.Z))){constructor(t){super(t),this.allLayers=new O.Z({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=(0,V.a)(this),this.basemap=null,this.editableLayers=new O.Z({getCollections:()=>[this.allLayers],itemFilterFunction:N}),this.ground=new k,this._basemapCache={}}destroy(){this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.ground?.destroy(),this.basemap?.destroy(),function(t){for(let r in t){let i=t[r];!1===i?.destroyed&&i.destroy(),delete t[r]}}(this._basemapCache),this._basemapCache=null}castBasemap(t){return function(t,r){let i;if("string"==typeof t){if(!(t in D.s)){let r=Object.entries(D.s).filter(([t,r])=>j.Z.apiKey&&!r.classic||!j.Z.apiKey&&r.classic&&!r.deprecated).map(([t])=>`"${t}"`).join(", ");return Z.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${r}`),null}r&&(i=r[t]),i||(i=o.default.fromId(t),r&&(r[t]=i))}else i=(0,b.se)(o.default,t);return i?.destroyed&&(Z.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}(t,this._basemapCache)}castGround(t){let r;let i=(r=null,"string"==typeof t?t in z?r=new k({resourceInfo:{data:{layers:[z[t]]}}}):m.Z.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`):r=(0,b.se)(k,t),r);return(0,L.Wi)(i)?this._get("ground"):i}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};(0,n._)([(0,_.Cb)({readOnly:!0,dependsOn:[]})],q.prototype,"allLayers",void 0),(0,n._)([(0,_.Cb)({readOnly:!0})],q.prototype,"allTables",void 0),(0,n._)([(0,_.Cb)({type:o.default})],q.prototype,"basemap",void 0),(0,n._)([(0,F.p)("basemap")],q.prototype,"castBasemap",null),(0,n._)([(0,_.Cb)({readOnly:!0})],q.prototype,"editableLayers",void 0),(0,n._)([(0,_.Cb)({type:k,nonNullable:!0})],q.prototype,"ground",void 0),(0,n._)([(0,F.p)("ground")],q.prototype,"castGround",null);let $=q=(0,n._)([(0,v.j)("esri.Map")],q)},19047:(t,r,i)=>{"use strict";i.d(r,{Z:()=>W});var s=i(24765),n=i(34577),o=i(51084),a=i(72140),l=i(59118),u=i(66150),d=i(66138),h=i(53919),p=i(36844),c=i(71169),f=i(30407),y=i(62300),m=i(21314),g=i(99444),_=i(86780),b=i(97663),v=i(67530),w=i(87086),C=i(86288),S=i(38488),x=i(29978),M=i(65081);let I={base:null,key:"type",typeMap:{attachment:_.Z,media:S.Z,text:M.Z,expression:w.Z,field:C.Z,relationship:x.Z}};var E,T=i(89845),P=i(85200);i(99950);let A=E=class extends a.wq{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new E({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};(0,s._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],A.prototype,"returnTopmostRaster",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],A.prototype,"showNoDataRecords",void 0);let k=A=E=(0,s._)([(0,f.j)("esri.popup.LayerOptions")],A);var O,R=i(62799);let L=O=class extends a.wq{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new O({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?(0,l.d9)(this.orderByFields):null})}};(0,s._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],L.prototype,"showRelatedRecords",void 0),(0,s._)([(0,h.Cb)({type:[R.Z],json:{write:!0}})],L.prototype,"orderByFields",void 0);let F=L=O=(0,s._)([(0,f.j)("esri.popup.RelatedRecordsInfo")],L);var N=i(24292),j=i(34133),D=i(7823),Z=i(41207);let V=u.Z.getLogger("esri.PopupTemplate"),z="relationships/",U="expression/",G=o.Z.ofType({key:"type",defaultKeyValue:"button",base:j.Z,typeMap:{button:D.Z,toggle:Z.Z}}),q={base:b.Z,key:"type",typeMap:{media:S.Z,custom:v.Z,text:M.Z,attachments:_.Z,fields:C.Z,expression:w.Z,relationship:x.Z}},$=["attachments","fields","media","text","expression","relationship"],B=class extends(0,n.J)(a.wq){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(t=>(0,m.N7)(q,t)):"string"==typeof t||"function"==typeof t||t instanceof HTMLElement||(0,d.y8)(t)?t:(V.error("content error","unsupported content value",{value:t}),null)}readContent(t,r){let{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeContent(t,r,i,s){"string"!=typeof t?Array.isArray(t)&&(r.popupElements=t.filter(t=>$.includes(t.type)).map(t=>t&&t.toJSON(s)),r.popupElements.forEach(t=>{"attachments"===t.type?this._writeAttachmentContent(r):"media"===t.type?this._writeMediaContent(t,r):"text"===t.type?this._writeTextContent(t,r):"relationship"===t.type&&this._writeRelationshipContent(t,r)})):r.description=t}writeFieldInfos(t,r,i,s){let{content:n}=this,o=Array.isArray(n)?n:null;if(t){let i=o?o.filter(t=>"fields"===t.type):[],n=i.length&&i.every(t=>t.fieldInfos?.length);r.fieldInfos=t.filter(Boolean).map(t=>{let r=t.toJSON(s);return n&&(r.visible=!1),r})}if(o)for(let t of o)"fields"===t.type&&this._writeFieldsContent(t,r)}writeLayerOptions(t,r,i,s){r[i]=t&&(null!==t.showNoDataRecords||null!==t.returnTopmostRaster)?t.toJSON(s):null}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){let i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),(0,g.gd)(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){let r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;let i=(0,l.d9)(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(t=>{let i=r.fieldInfos.find(r=>r.fieldName.toLowerCase()===t.fieldName.toLowerCase());i?i.visible=!0:r.fieldInfos.push(t)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){let i=t.orderByFields?.map(r=>this._toFieldOrderJSON(r,t.relationshipId))||[],s=[...r.relatedRecordsInfo?.orderByFields||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;let i=(0,l.d9)(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){let s={description:!1,mediaInfos:!1};return i.map(i=>"media"===i.type?(i.mediaInfos||!r||s.mediaInfos||(i.mediaInfos=r,s.mediaInfos=!0),S.Z.fromJSON(i)):"text"===i.type?(i.text||!t||s.description||(i.text=t,s.description=!0),M.Z.fromJSON(i)):"attachments"===i.type?_.Z.fromJSON(i):"fields"===i.type?C.Z.fromJSON(i):"expression"===i.type?w.Z.fromJSON(i):"relationship"===i.type?x.Z.fromJSON(i):void 0).filter(Boolean)}_toRelationshipContent(t){let{field:r,order:i}=t;if(!r?.startsWith(z))return null;let s=r.replace(z,"").split("/");if(2!==s.length)return null;let n=parseInt(s[0],10),o=s[1];return"number"==typeof n&&o?x.Z.fromJSON({relationshipId:n,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){let{order:i,field:s}=t;return{field:`${z}${r}/${s}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){let n=[];t?n.push(new M.Z({text:t})):n.push(new C.Z),Array.isArray(r)&&r.length&&n.push(S.Z.fromJSON({mediaInfos:r})),i&&n.push(_.Z.fromJSON({displayType:"auto"}));let{showRelatedRecords:o,orderByFields:a}=s;return o&&a?.length&&a.forEach(t=>{let r=this._toRelationshipContent(t);r&&n.push(r)}),n.length?n:t}_getContentElementFields(t){let r=t?.type;if("attachments"===r)return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if("custom"===r)return t.outFields||[];if("fields"===r)return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if("media"===r){let r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((t,r)=>[...t,...this._getMediaInfoFields(r)],[])]}return"text"===r?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){let{caption:r,title:i,value:s}=t,{fields:n,normalizeField:o,tooltipField:a,sourceURL:l,linkURL:u}=s||{},d=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(l),...this._extractFieldNames(u),...n??[]];return o&&d.push(o),a&&d.push(a),d}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((t,r)=>[...t,..."expression"===r.type&&r.expressionInfo?[r.expressionInfo]:[]],r):[]}_getContentFields(t){return"string"==typeof t?this._extractFieldNames(t):Array.isArray(t)?t.reduce((t,r)=>[...t,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(i=>(0,g.io)(t,r,i.expression)))}_getFieldInfoFields(t){return t?t.filter(t=>void 0===t.visible||!!t.visible).map(t=>t.fieldName).filter(t=>!t.startsWith(z)&&!t.startsWith(U)):[]}_getActionsFields(t){return t?t.toArray().reduce((t,r)=>[...t,...this._getActionFields(r)],[]):[]}_getActionFields(t){let{className:r,title:i,type:s}=t,n="button"===s||"toggle"===s?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(n)]}_getTitleFields(t){return"string"==typeof t?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||"string"!=typeof t)return[];let r=t.match(/{[^}]*}/g);if(!r)return[];let i=/\{(\w+):.+\}/,s=r.filter(t=>!(0===t.indexOf(`{${z}`)||0===t.indexOf(`{${U}`))).map(t=>t.replace(i,"{$1}"));return s?s.map(t=>t.slice(1,-1)):[]}};(0,s._)([(0,h.Cb)({type:G})],B.prototype,"actions",void 0),(0,s._)([(0,h.Cb)()],B.prototype,"content",void 0),(0,s._)([(0,p.p)("content")],B.prototype,"castContent",null),(0,s._)([(0,c.r)("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],B.prototype,"readContent",null),(0,s._)([(0,y.c)("content",{popupElements:{type:o.Z.ofType(I)},showAttachments:{type:Boolean},mediaInfos:{type:o.Z.ofType(N.V)},description:{type:String},relatedRecordsInfo:{type:F}})],B.prototype,"writeContent",null),(0,s._)([(0,h.Cb)({type:[T.Z],json:{write:!0}})],B.prototype,"expressionInfos",void 0),(0,s._)([(0,h.Cb)({type:[P.Z]})],B.prototype,"fieldInfos",void 0),(0,s._)([(0,y.c)("fieldInfos")],B.prototype,"writeFieldInfos",null),(0,s._)([(0,h.Cb)({type:k})],B.prototype,"layerOptions",void 0),(0,s._)([(0,y.c)("layerOptions")],B.prototype,"writeLayerOptions",null),(0,s._)([(0,h.Cb)({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],B.prototype,"lastEditInfoEnabled",void 0),(0,s._)([(0,h.Cb)()],B.prototype,"outFields",void 0),(0,s._)([(0,h.Cb)()],B.prototype,"overwriteActions",void 0),(0,s._)([(0,h.Cb)()],B.prototype,"returnGeometry",void 0),(0,s._)([(0,h.Cb)({json:{type:String}})],B.prototype,"title",void 0),(0,s._)([(0,y.c)("title")],B.prototype,"writeTitle",null);let W=B=(0,s._)([(0,f.j)("esri.PopupTemplate")],B)},67005:(t,r,i)=>{"use strict";i.d(r,{Z:()=>m});var s,n=i(24765),o=i(72140),a=i(82639),l=i(56129),u=i(53919),d=(i(99950),i(21314),i(71169)),h=i(30407),p=i(62300);let c=s=class extends o.wq{constructor(t){super(t),this.end=null,this.start=null}static get allTime(){return f}static get empty(){return y}readEnd(t,r){return null!=r.end?new Date(r.end):null}writeEnd(t,r){r.end=t?t.getTime():null}get isAllTime(){return this.equals(s.allTime)}get isEmpty(){return this.equals(s.empty)}readStart(t,r){return null!=r.start?new Date(r.start):null}writeStart(t,r){r.start=t?t.getTime():null}clone(){return new s({end:this.end,start:this.start})}equals(t){if(!t)return!1;let r=(0,a.pC)(this.start)?this.start.getTime():this.start,i=(0,a.pC)(this.end)?this.end.getTime():this.end,s=(0,a.pC)(t.start)?t.start.getTime():t.start,n=(0,a.pC)(t.end)?t.end.getTime():t.end;return r===s&&i===n}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();let r=(0,a.yw)(this.start,r=>(0,l.JE)(r,t)),i=(0,a.yw)(this.end,r=>{let i=(0,l.JE)(r,t);return r.getTime()===i.getTime()?i:(0,l.Nm)(i,1,t)});return new s({start:r,end:i})}intersection(t){let r,i;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return s.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();let n=(0,a.R2)(this.start,-1/0,t=>t.getTime()),o=(0,a.R2)(this.end,1/0,t=>t.getTime()),l=(0,a.R2)(t.start,-1/0,t=>t.getTime()),u=(0,a.R2)(t.end,1/0,t=>t.getTime());if(l>=n&&l<=o?r=l:n>=l&&n<=u&&(r=n),o>=l&&o<=u?i=o:u>=n&&u<=o&&(i=u),null!=r&&null!=i&&!isNaN(r)&&!isNaN(i)){let t=new s;return t.start=r===-1/0?null:new Date(r),t.end=i===1/0?null:new Date(i),t}return s.empty}offset(t,r){if(this.isEmpty||this.isAllTime)return this.clone();let i=new s,{start:n,end:o}=this;return(0,a.pC)(n)&&(i.start=(0,l.Nm)(n,t,r)),(0,a.pC)(o)&&(i.end=(0,l.Nm)(o,t,r)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return f.clone();let r=(0,a.pC)(this.start)&&(0,a.pC)(t.start)?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=(0,a.pC)(this.end)&&(0,a.pC)(t.end)?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new s({start:r,end:i})}};(0,n._)([(0,u.Cb)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"end",void 0),(0,n._)([(0,d.r)("end")],c.prototype,"readEnd",null),(0,n._)([(0,p.c)("end")],c.prototype,"writeEnd",null),(0,n._)([(0,u.Cb)({readOnly:!0,json:{read:!1}})],c.prototype,"isAllTime",null),(0,n._)([(0,u.Cb)({readOnly:!0,json:{read:!1}})],c.prototype,"isEmpty",null),(0,n._)([(0,u.Cb)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"start",void 0),(0,n._)([(0,d.r)("start")],c.prototype,"readStart",null),(0,n._)([(0,p.c)("start")],c.prototype,"writeStart",null);let f=new(c=s=(0,n._)([(0,h.j)("esri.TimeExtent")],c)),y=new c({start:void 0,end:void 0}),m=c},7589:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s,n=i(24765),o=i(72140),a=i(56129),l=i(53919),u=(i(99950),i(21314),i(30407)),d=i(20901);let h=s=class extends o.wq{constructor(t){super(t),this.value=0,this.unit="milliseconds"}toMilliseconds(){return(0,a.rJ)(this.value,this.unit,"milliseconds")}clone(){return new s({value:this.value,unit:this.unit})}};(0,n._)([(0,l.Cb)({type:Number,json:{write:!0},nonNullable:!0})],h.prototype,"value",void 0),(0,n._)([(0,l.Cb)({type:d.v.apiValues,json:{type:d.v.jsonValues,read:d.v.read,write:d.v.write},nonNullable:!0})],h.prototype,"unit",void 0);let p=h=s=(0,n._)([(0,u.j)("esri.TimeInterval")],h)},99836:(t,r,i)=>{"use strict";i.d(r,{Z:()=>x});var s=i(24765),n=i(34577),o=i(2951),a=i(72140),l=i(5047),u=i(82639),d=i(53919),h=(i(99950),i(36844)),p=i(71169),c=i(30407),f=i(62300),y=i(21314),m=i(46472);let g=class extends(0,n.J)(a.wq){constructor(...t){super(...t),this.position=new m.Z([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(t,r,i,s){if(t&&"object"==typeof t&&("x"in t||Array.isArray(t))){let n={position:t};return null!=r&&(n.heading=r),null!=i&&(n.tilt=i),null!=s&&(n.fov=s),n}return t}writePosition(t,r,i,s){let n=t.clone();n.x=(0,y.q9)(t.x||0),n.y=(0,y.q9)(t.y||0),n.z=t.hasZ?(0,y.q9)(t.z||0):t.z,r[i]=n.write({},s)}readPosition(t,r){let i=new m.Z;return i.read(t,r),i.x=(0,y.q9)(i.x||0),i.y=(0,y.q9)(i.y||0),i.z=i.hasZ?(0,y.q9)(i.z||0):i.z,i}equals(t){return!(0,u.Wi)(t)&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)}};(0,s._)([(0,d.Cb)({type:m.Z,json:{write:{isRequired:!0}}})],g.prototype,"position",void 0),(0,s._)([(0,f.c)("position")],g.prototype,"writePosition",null),(0,s._)([(0,p.r)("position")],g.prototype,"readPosition",null),(0,s._)([(0,d.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,h.p)(t=>o.BV.normalize((0,y.q9)(t)))],g.prototype,"heading",void 0),(0,s._)([(0,d.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,h.p)(t=>(0,l.uZ)((0,y.q9)(t),-180,180))],g.prototype,"tilt",void 0),(0,s._)([(0,d.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],g.prototype,"fov",void 0);let _=g=(0,s._)([(0,c.j)("esri.Camera")],g);var b,v=i(64012),w=i(95758);let C=b=class extends a.wq{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new b({rotation:this.rotation,scale:this.scale,targetGeometry:(0,u.pC)(this.targetGeometry)?this.targetGeometry.clone():null,camera:(0,u.pC)(this.camera)?this.camera.clone():null})}};function S(){return{enabled:!this.camera}}(0,s._)([(0,d.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:S}}}}})],C.prototype,"rotation",void 0),(0,s._)([(0,h.p)("rotation")],C.prototype,"castRotation",null),(0,s._)([(0,d.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:S}}}}})],C.prototype,"scale",void 0),(0,s._)([(0,d.Cb)({types:v.qM,json:{read:w.im,write:!0,origins:{"web-scene":{read:w.im,write:{overridePolicy:S}}}}})],C.prototype,"targetGeometry",void 0),(0,s._)([(0,d.Cb)({type:_,json:{write:!0}})],C.prototype,"camera",void 0);let x=C=b=(0,s._)([(0,c.j)("esri.Viewpoint")],C)},6487:(t,r,i)=>{"use strict";i.d(r,{V:()=>u});var s=i(10242),n=(i(57837),i(12790)),o=i(66150),a=i(82583);let l=o.Z.getLogger("esri.assets");function u(t){if(!s.Z.assetsPath)throw l.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new n.Z("assets:path-not-set","config.assetsPath is not set");return(0,a.v_)(s.Z.assetsPath,t)}},27405:(t,r,i)=>{"use strict";i.d(r,{a:()=>c});var s,n=i(24765),o=i(55410),a=i(72140),l=i(59118),u=i(53919),d=(i(21314),i(30407)),h=i(58244);let p=s=class extends a.wq{constructor(){super(...arguments),this.color=new o.Z("white")}clone(){return new s({color:(0,l.d9)(this.color)})}};(0,n._)([(0,u.Cb)(h.a)],p.prototype,"color",void 0);let c=p=s=(0,n._)([(0,d.j)("esri.symbols.callouts.LineCallout3DBorder")],p);Object.freeze(Object.defineProperty({__proto__:null,default:c},Symbol.toStringTag,{value:"Module"}))},47750:(t,r,s)=>{"use strict";s.d(r,{a:()=>a,c:()=>n,g:()=>o});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function a(t){throw Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}},20917:(t,r,i)=>{"use strict";i.d(r,{R:()=>o,a:()=>d,g:()=>n,t:()=>u});let s=1e-6;function n(){return s}let o=Math.random,a=Math.PI/180,l=180/Math.PI;function u(t){return t*a}function d(t){return t*l}Object.freeze(Object.defineProperty({__proto__:null,getEpsilon:n,setEpsilon:function(t){s=t},RANDOM:o,toRadian:u,toDegree:d,equals:function(t,r){return Math.abs(t-r)<=s*Math.max(1,Math.abs(t),Math.abs(r))}},Symbol.toStringTag,{value:"Module"}))},50088:(t,r,i)=>{"use strict";i.d(r,{a:()=>f,b:()=>p,c:()=>a,d:()=>o,f:()=>c,i:()=>n,m:()=>l,r:()=>u,s:()=>d,t:()=>h});var s=i(20917);function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t,r,i,s,n,o,a){return t[0]=r,t[1]=i,t[2]=s,t[3]=n,t[4]=o,t[5]=a,t}function a(t,r){let i=r[0],s=r[1],n=r[2],o=r[3],a=r[4],l=r[5],u=i*o-s*n;return u?(u=1/u,t[0]=o*u,t[1]=-s*u,t[2]=-n*u,t[3]=i*u,t[4]=(n*l-o*a)*u,t[5]=(s*a-i*l)*u,t):null}function l(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=i[0],h=i[1],p=i[2],c=i[3],f=i[4],y=i[5];return t[0]=s*d+o*h,t[1]=n*d+a*h,t[2]=s*p+o*c,t[3]=n*p+a*c,t[4]=s*f+o*y+l,t[5]=n*f+a*y+u,t}function u(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=Math.sin(i),h=Math.cos(i);return t[0]=s*h+o*d,t[1]=n*h+a*d,t[2]=-(s*d)+o*h,t[3]=-(n*d)+a*h,t[4]=l,t[5]=u,t}function d(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=i[0],h=i[1];return t[0]=s*d,t[1]=n*d,t[2]=o*h,t[3]=a*h,t[4]=l,t[5]=u,t}function h(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=i[0],h=i[1];return t[0]=s,t[1]=n,t[2]=o,t[3]=a,t[4]=s*d+o*h+l,t[5]=n*d+a*h+u,t}function p(t,r){let i=Math.sin(r),s=Math.cos(r);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t}function c(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function f(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function y(t,r,i){return t[0]=r[0]-i[0],t[1]=r[1]-i[1],t[2]=r[2]-i[2],t[3]=r[3]-i[3],t[4]=r[4]-i[4],t[5]=r[5]-i[5],t}Object.freeze(Object.defineProperty({__proto__:null,copy:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t},identity:n,set:o,invert:a,determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:l,rotate:u,scale:d,translate:h,fromRotation:p,fromScaling:c,fromTranslation:f,str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)},add:function(t,r,i){return t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t[3]=r[3]+i[3],t[4]=r[4]+i[4],t[5]=r[5]+i[5],t},subtract:y,multiplyScalar:function(t,r,i){return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=r[3]*i,t[4]=r[4]*i,t[5]=r[5]*i,t},multiplyScalarAndAdd:function(t,r,i,s){return t[0]=r[0]+i[0]*s,t[1]=r[1]+i[1]*s,t[2]=r[2]+i[2]*s,t[3]=r[3]+i[3]*s,t[4]=r[4]+i[4]*s,t[5]=r[5]+i[5]*s,t},exactEquals:function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]},equals:function(t,r){let i=t[0],n=t[1],o=t[2],a=t[3],l=t[4],u=t[5],d=r[0],h=r[1],p=r[2],c=r[3],f=r[4],y=r[5],m=(0,s.g)();return Math.abs(i-d)<=m*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(n-h)<=m*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-p)<=m*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-c)<=m*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(l-f)<=m*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(u-y)<=m*Math.max(1,Math.abs(u),Math.abs(y))},mul:l,sub:y},Symbol.toStringTag,{value:"Module"}))},60013:(t,r,i)=>{"use strict";function s(){let t=new Float32Array(6);return t[0]=1,t[3]=1,t}function n(t,r,i,s){let n=r[s],o=r[s+1];t[s]=i[0]*n+i[2]*o+i[4],t[s+1]=i[1]*n+i[3]*o+i[5]}function o(t,r,i,s=0,o=0,a=2){let l=o||r.length/a;for(let o=s;o<l;o++)n(t,r,i,o*a)}i.d(r,{c:()=>s,t:()=>o}),Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(t){let r=new Float32Array(6);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r},fromValues:function(t,r,i,s,n,o){let a=new Float32Array(6);return a[0]=t,a[1]=r,a[2]=i,a[3]=s,a[4]=n,a[5]=o,a},createView:function(t,r){return new Float32Array(t,r,6)},transform:n,transformMany:o},Symbol.toStringTag,{value:"Module"}))},48458:(t,r,i)=>{"use strict";function s(){return[1,0,0,1,0,0]}i.d(r,{c:()=>s}),Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]},fromValues:function(t,r,i,s,n,o){return[t,r,i,s,n,o]},createView:function(t,r){return new Float64Array(t,r,6)}},Symbol.toStringTag,{value:"Module"}))},34035:(t,r,i)=>{"use strict";i.d(r,{a:()=>u,b:()=>m,d:()=>c,f:()=>n,g:()=>a,h:()=>h,i:()=>_,j:()=>y,k:()=>f,m:()=>d,r:()=>p,s:()=>o,t:()=>l});var s=i(20917);function n(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function o(t,r,i,s,n,o,a,l,u,d){return t[0]=r,t[1]=i,t[2]=s,t[3]=n,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=d,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function l(t,r){if(t===r){let i=r[1],s=r[2],n=r[5];t[1]=r[3],t[2]=r[6],t[3]=i,t[5]=r[7],t[6]=s,t[7]=n}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function u(t,r){let i=r[0],s=r[1],n=r[2],o=r[3],a=r[4],l=r[5],u=r[6],d=r[7],h=r[8];return t[0]=a*h-l*d,t[1]=n*d-s*h,t[2]=s*l-n*a,t[3]=l*u-o*h,t[4]=i*h-n*u,t[5]=n*o-i*l,t[6]=o*d-a*u,t[7]=s*u-i*d,t[8]=i*a-s*o,t}function d(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=r[6],h=r[7],p=r[8],c=i[0],f=i[1],y=i[2],m=i[3],g=i[4],_=i[5],b=i[6],v=i[7],w=i[8];return t[0]=c*s+f*a+y*d,t[1]=c*n+f*l+y*h,t[2]=c*o+f*u+y*p,t[3]=m*s+g*a+_*d,t[4]=m*n+g*l+_*h,t[5]=m*o+g*u+_*p,t[6]=b*s+v*a+w*d,t[7]=b*n+v*l+w*h,t[8]=b*o+v*u+w*p,t}function h(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=r[6],h=r[7],p=r[8],c=i[0],f=i[1];return t[0]=s,t[1]=n,t[2]=o,t[3]=a,t[4]=l,t[5]=u,t[6]=c*s+f*a+d,t[7]=c*n+f*l+h,t[8]=c*o+f*u+p,t}function p(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=r[6],h=r[7],p=r[8],c=Math.sin(i),f=Math.cos(i);return t[0]=f*s+c*a,t[1]=f*n+c*l,t[2]=f*o+c*u,t[3]=f*a-c*s,t[4]=f*l-c*n,t[5]=f*u-c*o,t[6]=d,t[7]=h,t[8]=p,t}function c(t,r,i){let s=i[0],n=i[1],o=i[2];return t[0]=s*r[0],t[1]=s*r[1],t[2]=s*r[2],t[3]=n*r[3],t[4]=n*r[4],t[5]=n*r[5],t[6]=o*r[6],t[7]=o*r[7],t[8]=o*r[8],t}function f(t,r,i){let s=i[0],n=i[1];return t[0]=s*r[0],t[1]=s*r[1],t[2]=s*r[2],t[3]=n*r[3],t[4]=n*r[4],t[5]=n*r[5],t}function y(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function m(t,r){let i=r[0],s=r[1],n=r[2],o=r[3],a=r[4],l=r[5],u=r[6],d=r[7],h=r[8],p=r[9],c=r[10],f=r[11],y=r[12],m=r[13],g=r[14],_=r[15],b=i*l-s*a,v=i*u-n*a,w=i*d-o*a,C=s*u-n*l,S=s*d-o*l,x=n*d-o*u,M=h*m-p*y,I=h*g-c*y,E=h*_-f*y,T=p*g-c*m,P=p*_-f*m,A=c*_-f*g,k=b*A-v*P+w*T+C*E-S*I+x*M;return k?(k=1/k,t[0]=(l*A-u*P+d*T)*k,t[1]=(u*E-a*A-d*I)*k,t[2]=(a*P-l*E+d*M)*k,t[3]=(n*P-s*A-o*T)*k,t[4]=(i*A-n*E+o*I)*k,t[5]=(s*E-i*P-o*M)*k,t[6]=(m*x-g*S+_*C)*k,t[7]=(g*w-y*x-_*v)*k,t[8]=(y*S-m*w+_*b)*k,t):null}function g(t,r,i){return t[0]=r[0]-i[0],t[1]=r[1]-i[1],t[2]=r[2]-i[2],t[3]=r[3]-i[3],t[4]=r[4]-i[4],t[5]=r[5]-i[5],t[6]=r[6]-i[6],t[7]=r[7]-i[7],t[8]=r[8]-i[8],t}function _(t){let r=(0,s.g)(),i=t[0],n=t[1],o=t[2],a=t[3],l=t[4],u=t[5],d=t[6],h=t[7],p=t[8];return Math.abs(1-(i*i+a*a+d*d))<=r&&Math.abs(1-(n*n+l*l+h*h))<=r&&Math.abs(1-(o*o+u*u+p*p))<=r}Object.freeze(Object.defineProperty({__proto__:null,fromMat4:n,copy:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t},set:o,identity:a,transpose:l,invert:function(t,r){let i=r[0],s=r[1],n=r[2],o=r[3],a=r[4],l=r[5],u=r[6],d=r[7],h=r[8],p=h*a-l*d,c=-h*o+l*u,f=d*o-a*u,y=i*p+s*c+n*f;return y?(y=1/y,t[0]=p*y,t[1]=(-h*s+n*d)*y,t[2]=(l*s-n*a)*y,t[3]=c*y,t[4]=(h*i-n*u)*y,t[5]=(-l*i+n*o)*y,t[6]=f*y,t[7]=(-d*i+s*u)*y,t[8]=(a*i-s*o)*y,t):null},adjoint:u,determinant:function(t){let r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],d=t[8];return r*(d*o-a*u)+i*(-d*n+a*l)+s*(u*n-o*l)},multiply:d,translate:h,rotate:p,scale:c,scaleByVec2:f,fromTranslation:y,fromRotation:function(t,r){let i=Math.sin(r),s=Math.cos(r);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t},fromQuat:function(t,r){let i=r[0],s=r[1],n=r[2],o=r[3],a=i+i,l=s+s,u=n+n,d=i*a,h=s*a,p=s*l,c=n*a,f=n*l,y=n*u,m=o*a,g=o*l,_=o*u;return t[0]=1-p-y,t[3]=h-_,t[6]=c+g,t[1]=h+_,t[4]=1-d-y,t[7]=f-m,t[2]=c-g,t[5]=f+m,t[8]=1-d-p,t},normalFromMat4Legacy:function(t,r){let i=r[0],s=r[1],n=r[2],o=r[4],a=r[5],l=r[6],u=r[8],d=r[9],h=r[10],p=h*a-l*d,c=-h*o+l*u,f=d*o-a*u,y=i*p+s*c+n*f;if(!y)return null;let m=1/y;return t[0]=p*m,t[1]=(-h*s+n*d)*m,t[2]=(l*s-n*a)*m,t[3]=c*m,t[4]=(h*i-n*u)*m,t[5]=(-l*i+n*o)*m,t[6]=f*m,t[7]=(-d*i+s*u)*m,t[8]=(a*i-s*o)*m,t},normalFromMat4:m,projection:function(t,r,i){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)},add:function(t,r,i){return t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t[3]=r[3]+i[3],t[4]=r[4]+i[4],t[5]=r[5]+i[5],t[6]=r[6]+i[6],t[7]=r[7]+i[7],t[8]=r[8]+i[8],t},subtract:g,multiplyScalar:function(t,r,i){return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=r[3]*i,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=r[7]*i,t[8]=r[8]*i,t},multiplyScalarAndAdd:function(t,r,i,s){return t[0]=r[0]+i[0]*s,t[1]=r[1]+i[1]*s,t[2]=r[2]+i[2]*s,t[3]=r[3]+i[3]*s,t[4]=r[4]+i[4]*s,t[5]=r[5]+i[5]*s,t[6]=r[6]+i[6]*s,t[7]=r[7]+i[7]*s,t[8]=r[8]+i[8]*s,t},exactEquals:function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]},equals:function(t,r){let i=t[0],n=t[1],o=t[2],a=t[3],l=t[4],u=t[5],d=t[6],h=t[7],p=t[8],c=r[0],f=r[1],y=r[2],m=r[3],g=r[4],_=r[5],b=r[6],v=r[7],w=r[8],C=(0,s.g)();return Math.abs(i-c)<=C*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-f)<=C*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-y)<=C*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-m)<=C*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(l-g)<=C*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-_)<=C*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(d-b)<=C*Math.max(1,Math.abs(d),Math.abs(b))&&Math.abs(h-v)<=C*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(p-w)<=C*Math.max(1,Math.abs(p),Math.abs(w))},isOrthoNormal:_,mul:d,sub:g},Symbol.toStringTag,{value:"Module"}))},28477:(t,r,i)=>{"use strict";function s(){let t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function n(t){let r=new Float32Array(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function o(t,r,i,s,n,o,a,l,u){let d=new Float32Array(9);return d[0]=t,d[1]=r,d[2]=i,d[3]=s,d[4]=n,d[5]=o,d[6]=a,d[7]=l,d[8]=u,d}i.d(r,{a:()=>n,c:()=>s,f:()=>o}),Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:n,fromValues:o,createView:function(t,r){return new Float32Array(t,r,9)}},Symbol.toStringTag,{value:"Module"}))},20161:(t,r,i)=>{"use strict";i.d(r,{a:()=>u,d:()=>y,e:()=>c,f:()=>f,g:()=>b,h:()=>C,i:()=>a,j:()=>w,k:()=>p,m:()=>d,s:()=>o,t:()=>l,v:()=>h,x:()=>S,y:()=>m});var s=i(63462),n=i(20917);function o(t,r,i,s,n,o,a,l,u,d,h,p,c,f,y,m,g){return t[0]=r,t[1]=i,t[2]=s,t[3]=n,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=d,t[9]=h,t[10]=p,t[11]=c,t[12]=f,t[13]=y,t[14]=m,t[15]=g,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,r){if(t===r){let i=r[1],s=r[2],n=r[3],o=r[6],a=r[7],l=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=i,t[6]=r[9],t[7]=r[13],t[8]=s,t[9]=o,t[11]=r[14],t[12]=n,t[13]=a,t[14]=l}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function u(t,r){let i=r[0],s=r[1],n=r[2],o=r[3],a=r[4],l=r[5],u=r[6],d=r[7],h=r[8],p=r[9],c=r[10],f=r[11],y=r[12],m=r[13],g=r[14],_=r[15],b=i*l-s*a,v=i*u-n*a,w=i*d-o*a,C=s*u-n*l,S=s*d-o*l,x=n*d-o*u,M=h*m-p*y,I=h*g-c*y,E=h*_-f*y,T=p*g-c*m,P=p*_-f*m,A=c*_-f*g,k=b*A-v*P+w*T+C*E-S*I+x*M;return k?(k=1/k,t[0]=(l*A-u*P+d*T)*k,t[1]=(n*P-s*A-o*T)*k,t[2]=(m*x-g*S+_*C)*k,t[3]=(c*S-p*x-f*C)*k,t[4]=(u*E-a*A-d*I)*k,t[5]=(i*A-n*E+o*I)*k,t[6]=(g*w-y*x-_*v)*k,t[7]=(h*x-c*w+f*v)*k,t[8]=(a*P-l*E+d*M)*k,t[9]=(s*E-i*P-o*M)*k,t[10]=(y*S-m*w+_*b)*k,t[11]=(p*w-h*S-f*b)*k,t[12]=(l*I-a*T-u*M)*k,t[13]=(i*T-s*I+n*M)*k,t[14]=(m*v-y*C-g*b)*k,t[15]=(h*C-p*v+c*b)*k,t):null}function d(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=r[6],h=r[7],p=r[8],c=r[9],f=r[10],y=r[11],m=r[12],g=r[13],_=r[14],b=r[15],v=i[0],w=i[1],C=i[2],S=i[3];return t[0]=v*s+w*l+C*p+S*m,t[1]=v*n+w*u+C*c+S*g,t[2]=v*o+w*d+C*f+S*_,t[3]=v*a+w*h+C*y+S*b,v=i[4],w=i[5],C=i[6],S=i[7],t[4]=v*s+w*l+C*p+S*m,t[5]=v*n+w*u+C*c+S*g,t[6]=v*o+w*d+C*f+S*_,t[7]=v*a+w*h+C*y+S*b,v=i[8],w=i[9],C=i[10],S=i[11],t[8]=v*s+w*l+C*p+S*m,t[9]=v*n+w*u+C*c+S*g,t[10]=v*o+w*d+C*f+S*_,t[11]=v*a+w*h+C*y+S*b,v=i[12],w=i[13],C=i[14],S=i[15],t[12]=v*s+w*l+C*p+S*m,t[13]=v*n+w*u+C*c+S*g,t[14]=v*o+w*d+C*f+S*_,t[15]=v*a+w*h+C*y+S*b,t}function h(t,r,i){let s=i[0],n=i[1],o=i[2];if(r===t)t[12]=r[0]*s+r[4]*n+r[8]*o+r[12],t[13]=r[1]*s+r[5]*n+r[9]*o+r[13],t[14]=r[2]*s+r[6]*n+r[10]*o+r[14],t[15]=r[3]*s+r[7]*n+r[11]*o+r[15];else{let i=r[0],a=r[1],l=r[2],u=r[3],d=r[4],h=r[5],p=r[6],c=r[7],f=r[8],y=r[9],m=r[10],g=r[11];t[0]=i,t[1]=a,t[2]=l,t[3]=u,t[4]=d,t[5]=h,t[6]=p,t[7]=c,t[8]=f,t[9]=y,t[10]=m,t[11]=g,t[12]=i*s+d*n+f*o+r[12],t[13]=a*s+h*n+y*o+r[13],t[14]=l*s+p*n+m*o+r[14],t[15]=u*s+c*n+g*o+r[15]}return t}function p(t,r,i){let s=i[0],n=i[1],o=i[2];return t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=r[3]*s,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=r[11]*o,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function c(t,r,i,s){let o,a,l,u,d,h,p,c,f,y,m,g,_,b,v,w,C,S,x,M,I,E,T,P,A=s[0],k=s[1],O=s[2],R=Math.sqrt(A*A+k*k+O*O);return R<(0,n.g)()?null:(A*=R=1/R,k*=R,O*=R,o=Math.sin(i),l=1-(a=Math.cos(i)),u=r[0],d=r[1],h=r[2],p=r[3],c=r[4],f=r[5],y=r[6],m=r[7],g=r[8],_=r[9],b=r[10],v=r[11],w=A*A*l+a,C=k*A*l+O*o,S=O*A*l-k*o,x=A*k*l-O*o,M=k*k*l+a,I=O*k*l+A*o,E=A*O*l+k*o,T=k*O*l-A*o,P=O*O*l+a,t[0]=u*w+c*C+g*S,t[1]=d*w+f*C+_*S,t[2]=h*w+y*C+b*S,t[3]=p*w+m*C+v*S,t[4]=u*x+c*M+g*I,t[5]=d*x+f*M+_*I,t[6]=h*x+y*M+b*I,t[7]=p*x+m*M+v*I,t[8]=u*E+c*T+g*P,t[9]=d*E+f*T+_*P,t[10]=h*E+y*T+b*P,t[11]=p*E+m*T+v*P,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function f(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function y(t,r,i){if(0===r)return a(t);let s,o,l,u=i[0],d=i[1],h=i[2],p=Math.sqrt(u*u+d*d+h*h);return p<(0,n.g)()?null:(u*=p=1/p,d*=p,h*=p,s=Math.sin(r),l=1-(o=Math.cos(r)),t[0]=u*u*l+o,t[1]=d*u*l+h*s,t[2]=h*u*l-d*s,t[3]=0,t[4]=u*d*l-h*s,t[5]=d*d*l+o,t[6]=h*d*l+u*s,t[7]=0,t[8]=u*h*l+d*s,t[9]=d*h*l-u*s,t[10]=h*h*l+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function m(t,r){let i=Math.sin(r),s=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3],l=s+s,u=n+n,d=o+o,h=s*l,p=s*u,c=s*d,f=n*u,y=n*d,m=o*d,g=a*l,_=a*u,b=a*d;return t[0]=1-(f+m),t[1]=p+b,t[2]=c-_,t[3]=0,t[4]=p-b,t[5]=1-(h+m),t[6]=y+g,t[7]=0,t[8]=c+_,t[9]=y-g,t[10]=1-(h+f),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}let _=(0,s.c)();function b(t,r,i,s){let n=r[0],o=r[1],a=r[2],l=r[3],u=n+n,d=o+o,h=a+a,p=n*u,c=n*d,f=n*h,y=o*d,m=o*h,g=a*h,_=l*u,b=l*d,v=l*h,w=s[0],C=s[1],S=s[2];return t[0]=(1-(y+g))*w,t[1]=(c+v)*w,t[2]=(f-b)*w,t[3]=0,t[4]=(c-v)*C,t[5]=(1-(p+g))*C,t[6]=(m+_)*C,t[7]=0,t[8]=(f+b)*S,t[9]=(m-_)*S,t[10]=(1-(p+y))*S,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function v(t,r,i){return t[0]=r[0]-i[0],t[1]=r[1]-i[1],t[2]=r[2]-i[2],t[3]=r[3]-i[3],t[4]=r[4]-i[4],t[5]=r[5]-i[5],t[6]=r[6]-i[6],t[7]=r[7]-i[7],t[8]=r[8]-i[8],t[9]=r[9]-i[9],t[10]=r[10]-i[10],t[11]=r[11]-i[11],t[12]=r[12]-i[12],t[13]=r[13]-i[13],t[14]=r[14]-i[14],t[15]=r[15]-i[15],t}function w(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]}function C(t,r){if(t===r)return!0;let i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],u=t[5],d=t[6],h=t[7],p=t[8],c=t[9],f=t[10],y=t[11],m=t[12],g=t[13],_=t[14],b=t[15],v=r[0],w=r[1],C=r[2],S=r[3],x=r[4],M=r[5],I=r[6],E=r[7],T=r[8],P=r[9],A=r[10],k=r[11],O=r[12],R=r[13],L=r[14],F=r[15],N=(0,n.g)();return Math.abs(i-v)<=N*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(s-w)<=N*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-C)<=N*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(a-S)<=N*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(l-x)<=N*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-M)<=N*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(d-I)<=N*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(h-E)<=N*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(p-T)<=N*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(c-P)<=N*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-A)<=N*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(y-k)<=N*Math.max(1,Math.abs(y),Math.abs(k))&&Math.abs(m-O)<=N*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(g-R)<=N*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(_-L)<=N*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(b-F)<=N*Math.max(1,Math.abs(b),Math.abs(F))}function S(t){let r=(0,n.g)(),i=t[0],s=t[1],o=t[2],a=t[4],l=t[5],u=t[6],d=t[8],h=t[9],p=t[10];return Math.abs(1-(i*i+a*a+d*d))<=r&&Math.abs(1-(s*s+l*l+h*h))<=r&&Math.abs(1-(o*o+u*u+p*p))<=r}Object.freeze(Object.defineProperty({__proto__:null,copy:function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},set:o,identity:a,transpose:l,invert:u,adjoint:function(t,r){let i=r[0],s=r[1],n=r[2],o=r[3],a=r[4],l=r[5],u=r[6],d=r[7],h=r[8],p=r[9],c=r[10],f=r[11],y=r[12],m=r[13],g=r[14],_=r[15];return t[0]=l*(c*_-f*g)-p*(u*_-d*g)+m*(u*f-d*c),t[1]=-(s*(c*_-f*g)-p*(n*_-o*g)+m*(n*f-o*c)),t[2]=s*(u*_-d*g)-l*(n*_-o*g)+m*(n*d-o*u),t[3]=-(s*(u*f-d*c)-l*(n*f-o*c)+p*(n*d-o*u)),t[4]=-(a*(c*_-f*g)-h*(u*_-d*g)+y*(u*f-d*c)),t[5]=i*(c*_-f*g)-h*(n*_-o*g)+y*(n*f-o*c),t[6]=-(i*(u*_-d*g)-a*(n*_-o*g)+y*(n*d-o*u)),t[7]=i*(u*f-d*c)-a*(n*f-o*c)+h*(n*d-o*u),t[8]=a*(p*_-f*m)-h*(l*_-d*m)+y*(l*f-d*p),t[9]=-(i*(p*_-f*m)-h*(s*_-o*m)+y*(s*f-o*p)),t[10]=i*(l*_-d*m)-a*(s*_-o*m)+y*(s*d-o*l),t[11]=-(i*(l*f-d*p)-a*(s*f-o*p)+h*(s*d-o*l)),t[12]=-(a*(p*g-c*m)-h*(l*g-u*m)+y*(l*c-u*p)),t[13]=i*(p*g-c*m)-h*(s*g-n*m)+y*(s*c-n*p),t[14]=-(i*(l*g-u*m)-a*(s*g-n*m)+y*(s*u-n*l)),t[15]=i*(l*c-u*p)-a*(s*c-n*p)+h*(s*u-n*l),t},determinant:function(t){let r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],d=t[8],h=t[9],p=t[10],c=t[11],f=t[12],y=t[13],m=t[14],g=t[15];return(r*a-i*o)*(p*g-c*m)-(r*l-s*o)*(h*g-c*y)+(r*u-n*o)*(h*m-p*y)+(i*l-s*a)*(d*g-c*f)-(i*u-n*a)*(d*m-p*f)+(s*u-n*l)*(d*y-h*f)},multiply:d,translate:h,scale:p,rotate:c,rotateX:function(t,r,i){let s=Math.sin(i),n=Math.cos(i),o=r[4],a=r[5],l=r[6],u=r[7],d=r[8],h=r[9],p=r[10],c=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=o*n+d*s,t[5]=a*n+h*s,t[6]=l*n+p*s,t[7]=u*n+c*s,t[8]=d*n-o*s,t[9]=h*n-a*s,t[10]=p*n-l*s,t[11]=c*n-u*s,t},rotateY:function(t,r,i){let s=Math.sin(i),n=Math.cos(i),o=r[0],a=r[1],l=r[2],u=r[3],d=r[8],h=r[9],p=r[10],c=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*n-d*s,t[1]=a*n-h*s,t[2]=l*n-p*s,t[3]=u*n-c*s,t[8]=o*s+d*n,t[9]=a*s+h*n,t[10]=l*s+p*n,t[11]=u*s+c*n,t},rotateZ:function(t,r,i){let s=Math.sin(i),n=Math.cos(i),o=r[0],a=r[1],l=r[2],u=r[3],d=r[4],h=r[5],p=r[6],c=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*n+d*s,t[1]=a*n+h*s,t[2]=l*n+p*s,t[3]=u*n+c*s,t[4]=d*n-o*s,t[5]=h*n-a*s,t[6]=p*n-l*s,t[7]=c*n-u*s,t},fromTranslation:f,fromScaling:function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:y,fromXRotation:m,fromYRotation:function(t,r){let i=Math.sin(r),s=Math.cos(r);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,r){let i=Math.sin(r),s=Math.cos(r);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:g,fromQuat2:function(t,r){let i=-r[0],s=-r[1],n=-r[2],o=r[3],a=r[4],l=r[5],u=r[6],d=r[7],h=i*i+s*s+n*n+o*o;return h>0?(_[0]=2*(a*o+d*i+l*n-u*s)/h,_[1]=2*(l*o+d*s+u*i-a*n)/h,_[2]=2*(u*o+d*n+a*s-l*i)/h):(_[0]=2*(a*o+d*i+l*n-u*s),_[1]=2*(l*o+d*s+u*i-a*n),_[2]=2*(u*o+d*n+a*s-l*i)),g(t,r,_),t},getTranslation:function(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t},getScaling:function(t,r){let i=r[0],s=r[1],n=r[2],o=r[4],a=r[5],l=r[6],u=r[8],d=r[9],h=r[10];return t[0]=Math.sqrt(i*i+s*s+n*n),t[1]=Math.sqrt(o*o+a*a+l*l),t[2]=Math.sqrt(u*u+d*d+h*h),t},getRotation:function(t,r){let i=r[0]+r[5]+r[10],s=0;return i>0?(s=2*Math.sqrt(i+1),t[3]=.25*s,t[0]=(r[6]-r[9])/s,t[1]=(r[8]-r[2])/s,t[2]=(r[1]-r[4])/s):r[0]>r[5]&&r[0]>r[10]?(s=2*Math.sqrt(1+r[0]-r[5]-r[10]),t[3]=(r[6]-r[9])/s,t[0]=.25*s,t[1]=(r[1]+r[4])/s,t[2]=(r[8]+r[2])/s):r[5]>r[10]?(s=2*Math.sqrt(1+r[5]-r[0]-r[10]),t[3]=(r[8]-r[2])/s,t[0]=(r[1]+r[4])/s,t[1]=.25*s,t[2]=(r[6]+r[9])/s):(s=2*Math.sqrt(1+r[10]-r[0]-r[5]),t[3]=(r[1]-r[4])/s,t[0]=(r[8]+r[2])/s,t[1]=(r[6]+r[9])/s,t[2]=.25*s),t},fromRotationTranslationScale:b,fromRotationTranslationScaleOrigin:function(t,r,i,s,n){let o=r[0],a=r[1],l=r[2],u=r[3],d=o+o,h=a+a,p=l+l,c=o*d,f=o*h,y=o*p,m=a*h,g=a*p,_=l*p,b=u*d,v=u*h,w=u*p,C=s[0],S=s[1],x=s[2],M=n[0],I=n[1],E=n[2],T=(1-(m+_))*C,P=(f+w)*C,A=(y-v)*C,k=(f-w)*S,O=(1-(c+_))*S,R=(g+b)*S,L=(y+v)*x,F=(g-b)*x,N=(1-(c+m))*x;return t[0]=T,t[1]=P,t[2]=A,t[3]=0,t[4]=k,t[5]=O,t[6]=R,t[7]=0,t[8]=L,t[9]=F,t[10]=N,t[11]=0,t[12]=i[0]+M-(T*M+k*I+L*E),t[13]=i[1]+I-(P*M+O*I+F*E),t[14]=i[2]+E-(A*M+R*I+N*E),t[15]=1,t},fromQuat:function(t,r){let i=r[0],s=r[1],n=r[2],o=r[3],a=i+i,l=s+s,u=n+n,d=i*a,h=s*a,p=s*l,c=n*a,f=n*l,y=n*u,m=o*a,g=o*l,_=o*u;return t[0]=1-p-y,t[1]=h+_,t[2]=c-g,t[3]=0,t[4]=h-_,t[5]=1-d-y,t[6]=f+m,t[7]=0,t[8]=c+g,t[9]=f-m,t[10]=1-d-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,r,i,s,n,o,a){let l=1/(i-r),u=1/(n-s),d=1/(o-a);return t[0]=2*o*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(i+r)*l,t[9]=(n+s)*u,t[10]=(a+o)*d,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*d,t[15]=0,t},perspective:function(t,r,i,s,n){let o;let a=1/Math.tan(r/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(o=1/(s-n),t[10]=(n+s)*o,t[14]=2*n*s*o):(t[10]=-1,t[14]=-2*s),t},perspectiveFromFieldOfView:function(t,r,i,s){let n=Math.tan(r.upDegrees*Math.PI/180),o=Math.tan(r.downDegrees*Math.PI/180),a=Math.tan(r.leftDegrees*Math.PI/180),l=Math.tan(r.rightDegrees*Math.PI/180),u=2/(a+l),d=2/(n+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=-(a-l)*u*.5,t[9]=(n-o)*d*.5,t[10]=s/(i-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i/(i-s),t[15]=0,t},ortho:function(t,r,i,s,n,o,a){let l=1/(r-i),u=1/(s-n),d=1/(o-a);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(r+i)*l,t[13]=(n+s)*u,t[14]=(a+o)*d,t[15]=1,t},lookAt:function(t,r,i,s){let o,l,u,d,h,p,c,f,y,m;let g=r[0],_=r[1],b=r[2],v=s[0],w=s[1],C=s[2],S=i[0],x=i[1],M=i[2],I=(0,n.g)();return Math.abs(g-S)<I&&Math.abs(_-x)<I&&Math.abs(b-M)<I?a(t):(m=1/Math.sqrt((c=g-S)*c+(f=_-x)*f+(y=b-M)*y),c*=m,f*=m,y*=m,(m=Math.sqrt((o=w*y-C*f)*o+(l=C*c-v*y)*l+(u=v*f-w*c)*u))?(o*=m=1/m,l*=m,u*=m):(o=0,l=0,u=0),(m=Math.sqrt((d=f*u-y*l)*d+(h=y*o-c*u)*h+(p=c*l-f*o)*p))?(d*=m=1/m,h*=m,p*=m):(d=0,h=0,p=0),t[0]=o,t[1]=d,t[2]=c,t[3]=0,t[4]=l,t[5]=h,t[6]=f,t[7]=0,t[8]=u,t[9]=p,t[10]=y,t[11]=0,t[12]=-(o*g+l*_+u*b),t[13]=-(d*g+h*_+p*b),t[14]=-(c*g+f*_+y*b),t[15]=1,t)},targetTo:function(t,r,i,s){let n=r[0],o=r[1],a=r[2],l=s[0],u=s[1],d=s[2],h=n-i[0],p=o-i[1],c=a-i[2],f=h*h+p*p+c*c;f>0&&(h*=f=1/Math.sqrt(f),p*=f,c*=f);let y=u*c-d*p,m=d*h-l*c,g=l*p-u*h;return(f=y*y+m*m+g*g)>0&&(y*=f=1/Math.sqrt(f),m*=f,g*=f),t[0]=y,t[1]=m,t[2]=g,t[3]=0,t[4]=p*g-c*m,t[5]=c*y-h*g,t[6]=h*m-p*y,t[7]=0,t[8]=h,t[9]=p,t[10]=c,t[11]=0,t[12]=n,t[13]=o,t[14]=a,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,r,i){return t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t[3]=r[3]+i[3],t[4]=r[4]+i[4],t[5]=r[5]+i[5],t[6]=r[6]+i[6],t[7]=r[7]+i[7],t[8]=r[8]+i[8],t[9]=r[9]+i[9],t[10]=r[10]+i[10],t[11]=r[11]+i[11],t[12]=r[12]+i[12],t[13]=r[13]+i[13],t[14]=r[14]+i[14],t[15]=r[15]+i[15],t},subtract:v,multiplyScalar:function(t,r,i){return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=r[3]*i,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=r[7]*i,t[8]=r[8]*i,t[9]=r[9]*i,t[10]=r[10]*i,t[11]=r[11]*i,t[12]=r[12]*i,t[13]=r[13]*i,t[14]=r[14]*i,t[15]=r[15]*i,t},multiplyScalarAndAdd:function(t,r,i,s){return t[0]=r[0]+i[0]*s,t[1]=r[1]+i[1]*s,t[2]=r[2]+i[2]*s,t[3]=r[3]+i[3]*s,t[4]=r[4]+i[4]*s,t[5]=r[5]+i[5]*s,t[6]=r[6]+i[6]*s,t[7]=r[7]+i[7]*s,t[8]=r[8]+i[8]*s,t[9]=r[9]+i[9]*s,t[10]=r[10]+i[10]*s,t[11]=r[11]+i[11]*s,t[12]=r[12]+i[12]*s,t[13]=r[13]+i[13]*s,t[14]=r[14]+i[14]*s,t[15]=r[15]+i[15]*s,t},exactEquals:w,equals:C,isOrthoNormal:S,mul:d,sub:v},Symbol.toStringTag,{value:"Module"}))},87004:(t,r,i)=>{"use strict";function s(){let t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}i.d(r,{c:()=>s});let n=s();Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(t){let r=new Float32Array(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},fromValues:function(t,r,i,s,n,o,a,l,u,d,h,p,c,f,y,m){let g=new Float32Array(16);return g[0]=t,g[1]=r,g[2]=i,g[3]=s,g[4]=n,g[5]=o,g[6]=a,g[7]=l,g[8]=u,g[9]=d,g[10]=h,g[11]=p,g[12]=c,g[13]=f,g[14]=y,g[15]=m,g},createView:function(t,r){return new Float32Array(t,r,16)},IDENTITY:n},Symbol.toStringTag,{value:"Module"}))},51037:(t,r,i)=>{"use strict";let s;i.d(r,{e:()=>h,f:()=>d,g:()=>u,h:()=>y,i:()=>I,j:()=>v,l:()=>E,p:()=>L});var n,o,a,l,u,d,h,p,c,f,y,m,g,_,b,v,w,C=i(6487),S=i(96082);let x,M=null;function I(){return!!M}function E(){return x||(x=i.e(2831).then(i.bind(i,12831)).then(t=>t.p).then(({default:t})=>t({locateFile:t=>(0,C.V)(`esri/geometry/support/${t}`)})).then(t=>{P(t)}))}(function(t){function r(t,r,i){M.ensureCache.prepare();let s=O(i),n=i===s,o=M.ensureFloat64(s),a=M._pe_geog_to_proj(M.getPointer(t),r,o);return a&&R(i,r,o,n),a}function i(t,r,i){return s(t,r,i,0)}function s(t,r,i,s){M.ensureCache.prepare();let n=O(i),o=i===n,a=M.ensureFloat64(n),l=M._pe_proj_to_geog_center(M.getPointer(t),r,a,s);return l&&R(i,r,a,o),l}t.geogToProj=r,t.projGeog=function(t,s,n,o){switch(o){case d.PE_TRANSFORM_P_TO_G:return i(t,s,n);case d.PE_TRANSFORM_G_TO_P:return r(t,s,n)}return 0},t.projToGeog=i,t.projToGeogCenter=s})(u||(u={})),(p=d||(d={})).init=function(){p.PE_BUFFER_MAX=M.PeDefs.prototype.PE_BUFFER_MAX,p.PE_NAME_MAX=M.PeDefs.prototype.PE_NAME_MAX,p.PE_MGRS_MAX=M.PeDefs.prototype.PE_MGRS_MAX,p.PE_USNG_MAX=M.PeDefs.prototype.PE_USNG_MAX,p.PE_DD_MAX=M.PeDefs.prototype.PE_DD_MAX,p.PE_DDM_MAX=M.PeDefs.prototype.PE_DDM_MAX,p.PE_DMS_MAX=M.PeDefs.prototype.PE_DMS_MAX,p.PE_UTM_MAX=M.PeDefs.prototype.PE_UTM_MAX,p.PE_PARM_MAX=M.PeDefs.prototype.PE_PARM_MAX,p.PE_TYPE_NONE=M.PeDefs.prototype.PE_TYPE_NONE,p.PE_TYPE_GEOGCS=M.PeDefs.prototype.PE_TYPE_GEOGCS,p.PE_TYPE_PROJCS=M.PeDefs.prototype.PE_TYPE_PROJCS,p.PE_TYPE_GEOGTRAN=M.PeDefs.prototype.PE_TYPE_GEOGTRAN,p.PE_TYPE_COORDSYS=M.PeDefs.prototype.PE_TYPE_COORDSYS,p.PE_TYPE_UNIT=M.PeDefs.prototype.PE_TYPE_UNIT,p.PE_TYPE_LINUNIT=M.PeDefs.prototype.PE_TYPE_LINUNIT,p.PE_STR_OPTS_NONE=M.PeDefs.prototype.PE_STR_OPTS_NONE,p.PE_STR_AUTH_NONE=M.PeDefs.prototype.PE_STR_AUTH_NONE,p.PE_STR_AUTH_TOP=M.PeDefs.prototype.PE_STR_AUTH_TOP,p.PE_STR_NAME_CANON=M.PeDefs.prototype.PE_STR_NAME_CANON,p.PE_PARM_X0=M.PeDefs.prototype.PE_PARM_X0,p.PE_PARM_ND=M.PeDefs.prototype.PE_PARM_ND,p.PE_TRANSFORM_1_TO_2=M.PeDefs.prototype.PE_TRANSFORM_1_TO_2,p.PE_TRANSFORM_2_TO_1=M.PeDefs.prototype.PE_TRANSFORM_2_TO_1,p.PE_TRANSFORM_P_TO_G=M.PeDefs.prototype.PE_TRANSFORM_P_TO_G,p.PE_TRANSFORM_G_TO_P=M.PeDefs.prototype.PE_TRANSFORM_G_TO_P,p.PE_HORIZON_RECT=M.PeDefs.prototype.PE_HORIZON_RECT,p.PE_HORIZON_POLY=M.PeDefs.prototype.PE_HORIZON_POLY,p.PE_HORIZON_LINE=M.PeDefs.prototype.PE_HORIZON_LINE,p.PE_HORIZON_DELTA=M.PeDefs.prototype.PE_HORIZON_DELTA},function(t){let r={},i={},s=t=>{if(t){let r=t.getType();switch(r){case d.PE_TYPE_GEOGCS:t=M.castObject(t,M.PeGeogcs);break;case d.PE_TYPE_PROJCS:t=M.castObject(t,M.PeProjcs);break;case d.PE_TYPE_GEOGTRAN:t=M.castObject(t,M.PeGeogtran);break;default:r&d.PE_TYPE_UNIT&&(t=M.castObject(t,M.PeUnit))}}return t};function n(t,i){let n=null,o=r[t];if(o||(o={},r[t]=o),o.hasOwnProperty(String(i)))n=o[i];else{let r=M.PeFactory.prototype.factoryByType(t,i);M.compare(r,M.NULL)||(n=r,o[i]=n)}return s(n)}t.initialize=function(){M.PeFactory.prototype.initialize(null)},t.coordsys=function(t){return n(d.PE_TYPE_COORDSYS,t)},t.factoryByType=n,t.fromString=function(t,r){let n=null,o=i[t];if(o||(o={},i[t]=o),o.hasOwnProperty(r))n=o[r];else{let i=M.PeFactory.prototype.fromString(t,r);M.compare(i,M.NULL)||(n=i,o[r]=n)}return s(n)},t.geogcs=function(t){return n(d.PE_TYPE_GEOGCS,t)},t.geogtran=function(t){return n(d.PE_TYPE_GEOGTRAN,t)},t.getCode=function(t){return M.PeFactory.prototype.getCode(t)},t.projcs=function(t){return n(d.PE_TYPE_PROJCS,t)},t.unit=function(t){return n(d.PE_TYPE_UNIT,t)}}(h||(h={}));let T=null;function P(t){function r(t,r,i){t[r]=i(t[r])}for(let i of(M=t,d.init(),c.init(),g.init(),b.init(),v.init(),T=class extends M.PeGCSExtent{destroy(){M.destroy(this)}},[M.PeDatum,M.PeGeogcs,M.PeGeogtran,M.PeObject,M.PeParameter,M.PePrimem,M.PeProjcs,M.PeSpheroid,M.PeUnit]))r(i.prototype,"getName",t=>function(){return t.call(this,Array(d.PE_NAME_MAX))});for(let t of[M.PeGeogtran,M.PeProjcs])r(t.prototype,"getParameters",t=>function(){let r=Array(d.PE_PARM_MAX),i=t.call(this);for(let t=0;t<r.length;t++){let s=M.getValue(i,"*");r[t]=s?M.wrapPointer(s,M.PeParameter):null,i+=Int32Array.BYTES_PER_ELEMENT}return r});r(M.PeHorizon.prototype,"getCoord",t=>function(){let r=this.getSize();if(!r)return null;let i=[];return R(i,r,t.call(this)),i}),r(M.PeGTlistExtendedEntry.prototype,"getEntries",t=>{let r=M._pe_getPeGTlistExtendedGTsSize();return function(){let i=null,s=t.call(this);if(!M.compare(s,M.NULL)){i=[s];let t=this.getSteps();if(t>1){let n=M.getPointer(s);for(let s=1;s<t;s++)i.push(M.wrapPointer(n+r*s,M.PeGTlistExtendedGTs))}}return i}});let i=M._pe_getPeHorizonSize(),s=t=>function(){let r=this._cache;if(r||(r=new Map,this._cache=r),r.has(t))return r.get(t);let s=null,n=t.call(this);if(!M.compare(n,M.NULL)){s=[n];let t=n.getNump();if(t>1){let r=M.getPointer(n);for(let n=1;n<t;n++)s.push(M.wrapPointer(r+i*n,M.PeHorizon))}}return r.set(t,s),s};r(M.PeProjcs.prototype,"horizonGcsGenerate",s),r(M.PeProjcs.prototype,"horizonPcsGenerate",s),M.PeObject.prototype.toString=function(t=d.PE_STR_OPTS_NONE){M.ensureCache.prepare();let r=M.getPointer(this),i=M.ensureInt8(Array(d.PE_BUFFER_MAX));return M.UTF8ToString(M._pe_object_to_string_ext(r,t,i))}}function A(t){if(!t)return;let r=M.getClass(t);if(!r)return;let i=M.getCache(r);if(!i)return;let s=M.getPointer(t);s&&delete i[s]}function k(t,r){let i=[],s=Array(r);for(let r=0;r<t;r++)i.push(M.ensureInt8(s));return i}function O(t){let r;return Array.isArray(t[0])?(r=[],t.forEach(t=>{r.push(t[0],t[1])})):r=t,r}function R(t,r,i,s=!1){if(s)for(let s=0;s<2*r;s++)t[s]=M.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{let s=0===t.length;for(let n=0;n<r;n++)s&&(t[n]=[,,]),t[n][0]=M.getValue(i,"double"),t[n][1]=M.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(n=c||(c={})).init=function(){n.PE_GTLIST_OPTS_COMMON=M.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,s=M._pe_getPeGTlistExtendedEntrySize()},n.getGTlist=function(t,r,i,n,o,a){let l=null,u=new M.PeInteger(a);try{let d=M.PeGTlistExtended.prototype.getGTlist(t,r,i,n,o,u);if((a=u.val)&&(l=[d],a>1)){let t=M.getPointer(d);for(let r=1;r<a;r++)l.push(M.wrapPointer(t+s*r,M.PeGTlistExtendedEntry))}}finally{M.destroy(u)}return l},(f||(f={})).destroy=function(t){if(t&&t.length){for(let r of t)A(r),r.getEntries().forEach(t=>{A(t);let r=t.getGeogtran();A(r),r.getParameters().forEach(A),[r.getGeogcs1(),r.getGeogcs2()].forEach(t=>{A(t);let r=t.getDatum();A(r),A(r.getSpheroid()),A(t.getPrimem()),A(t.getUnit())})});M.PeGTlistExtendedEntry.prototype.Delete(t[0])}},(y||(y={})).geogToGeog=function(t,r,i,s,n){M.ensureCache.prepare();let o=O(i),a=i===o,l=M.ensureFloat64(o),u=0;s&&(u=M.ensureFloat64(s));let d=M._pe_geog_to_geog(M.getPointer(t),r,l,u,n);return d&&R(i,r,l,a),d},function(t){let r=(t,r,i,s,n,o)=>{let a,l;switch(M.ensureCache.prepare(),t){case"dd":a=M._pe_geog_to_dd,l=d.PE_DD_MAX;break;case"ddm":a=M._pe_geog_to_ddm,l=d.PE_DDM_MAX;break;case"dms":a=M._pe_geog_to_dms,l=d.PE_DMS_MAX}let u=0;r&&(u=M.getPointer(r));let h=O(s),p=M.ensureFloat64(h),c=k(i,l),f=a(u,i,p,n,M.ensureInt32(c));if(f)for(let t=0;t<i;t++)o[t]=M.UTF8ToString(c[t]);return f},i=(t,r,i,s,n)=>{let o;switch(M.ensureCache.prepare(),t){case"dd":o=M._pe_dd_to_geog;break;case"ddm":o=M._pe_ddm_to_geog;break;case"dms":o=M._pe_dms_to_geog}let a=0;r&&(a=M.getPointer(r));let l=s.map(t=>M.ensureString(t)),u=M.ensureInt32(l),d=M.ensureFloat64(Array(2*i)),h=o(a,i,u,d);return h&&R(n,i,d),h};t.geogToDms=function(t,i,s,n,o){return r("dms",t,i,s,n,o)},t.dmsToGeog=function(t,r,s,n){return i("dms",t,r,s,n)},t.geogToDdm=function(t,i,s,n,o){return r("ddm",t,i,s,n,o)},t.ddmToGeog=function(t,r,s,n){return i("ddm",t,r,s,n)},t.geogToDd=function(t,i,s,n,o){return r("dd",t,i,s,n,o)},t.ddToGeog=function(t,r,s,n){return i("dd",t,r,s,n)}}(m||(m={})),(o=g||(g={})).init=function(){o.PE_MGRS_STYLE_NEW=M.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,o.PE_MGRS_STYLE_OLD=M.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,o.PE_MGRS_STYLE_AUTO=M.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,o.PE_MGRS_180_ZONE_1_PLUS=M.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,o.PE_MGRS_ADD_SPACES=M.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},o.geogToMgrsExtended=function(t,r,i,s,n,o,a){M.ensureCache.prepare();let l=0;t&&(l=M.getPointer(t));let u=O(i),h=M.ensureFloat64(u),p=k(r,d.PE_MGRS_MAX),c=M.ensureInt32(p),f=M._pe_geog_to_mgrs_extended(l,r,h,s,n,o,c);if(f)for(let t=0;t<r;t++)a[t]=M.UTF8ToString(p[t]);return f},o.mgrsToGeogExtended=function(t,r,i,s,n){M.ensureCache.prepare();let o=0;t&&(o=M.getPointer(t));let a=i.map(t=>M.ensureString(t)),l=M.ensureInt32(a),u=M.ensureFloat64(Array(2*r)),d=M._pe_mgrs_to_geog_extended(o,r,l,s,u);return d&&R(n,r,u),d},(a=_||(_={})).geogToUsng=function(t,r,i,s,n,o,a){M.ensureCache.prepare();let l=0;t&&(l=M.getPointer(t));let u=O(i),h=M.ensureFloat64(u),p=k(r,d.PE_MGRS_MAX),c=M.ensureInt32(p),f=M._pe_geog_to_usng(l,r,h,s,n,o,c);if(f)for(let t=0;t<r;t++)a[t]=M.UTF8ToString(p[t]);return f},a.usngToGeog=function(t,r,i,s){M.ensureCache.prepare();let n=0;t&&(n=M.getPointer(t));let o=i.map(t=>M.ensureString(t)),a=M.ensureInt32(o),l=M.ensureFloat64(Array(2*r)),u=M._pe_usng_to_geog(n,r,a,l);return u&&R(s,r,l),u},(l=b||(b={})).init=function(){l.PE_UTM_OPTS_NONE=M.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,l.PE_UTM_OPTS_ADD_SPACES=M.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,l.PE_UTM_OPTS_NS=M.PeNotationUtm.prototype.PE_UTM_OPTS_NS},l.geogToUtm=function(t,r,i,s,n){M.ensureCache.prepare();let o=0;t&&(o=M.getPointer(t));let a=O(i),l=M.ensureFloat64(a),u=k(r,d.PE_UTM_MAX),h=M.ensureInt32(u),p=M._pe_geog_to_utm(o,r,l,s,h);if(p)for(let t=0;t<r;t++)n[t]=M.UTF8ToString(u[t]);return p},l.utmToGeog=function(t,r,i,s,n){M.ensureCache.prepare();let o=0;t&&(o=M.getPointer(t));let a=i.map(t=>M.ensureString(t)),l=M.ensureInt32(a),u=M.ensureFloat64(Array(2*r)),d=M._pe_utm_to_geog(o,r,l,s,u);return d&&R(n,r,u),d},function(t){let r=new Map;t.init=function(){t.PE_PCSINFO_OPTION_NONE=M.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=M.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=M.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=M.PePCSInfo.prototype.PE_POLE_POINT},t.generate=function(i,s=t.PE_PCSINFO_OPTION_DOMAIN){let n=null,o=null;return r.has(i)&&(o=r.get(i))[s]&&(n=o[s]),n||(n=M.PePCSInfo.prototype.generate(i,s),o||(o=[],r.set(i,o)),o[s]=n),n}}(v||(v={})),(w||(w={})).versionString=function(){return M.PeVersion.prototype.version_string()};let L=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return M},isLoaded:I,isSupported:function(){return!!(0,S.Z)("esri-wasm")},load:E,get PeCSTransformations(){return u},get PeDefs(){return d},get PeFactory(){return h},get PeGCSExtent(){return T},get PeGTlistExtended(){return c},get PeGTlistExtendedEntry(){return f},get PeGTTransformations(){return y},get PeNotationDms(){return m},get PeNotationMgrs(){return g},get PeNotationUsng(){return _},get PeNotationUtm(){return b},get PePCSInfo(){return v},get PeVersion(){return w},_init:P},Symbol.toStringTag,{value:"Module"}))},80038:(t,r,i)=>{"use strict";i.d(r,{M:()=>s,a:()=>_,e:()=>m,f:()=>l,i:()=>f,p:()=>y,r:()=>d,t:()=>u,w:()=>h});var s,n,o=i(82639),a=i(82583);function l(t,r){let i=r&&r.url&&r.url.path;if(t&&i&&(t=(0,a.hF)(t,i,{preserveProtocolRelative:!0}),r.portalItem&&r.readResourcePaths)){let i=(0,a.PF)(t,r.portalItem.itemUrl);null!=i&&c.test(i)&&r.readResourcePaths.push(r.portalItem.resourceFromPath(i).path)}return g(t,r&&r.portal)}function u(t,r,i=s.YES){if(null==t)return t;!(0,a.YP)(t)&&r&&r.blockedRelativeUrls&&r.blockedRelativeUrls.push(t);let n=(0,a.hF)(t);if(r){let i=r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.rootPath||r.url&&r.url.path;if(i){let s=g(i,r.portal);null!=(n=(0,a.PF)(g(n,r.portal),s,s))&&n!==t&&r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=m(n,r?.portal),(0,a.YP)(n)&&(n=(0,a.Fv)(n)),r?.resources&&r?.portalItem&&!(0,a.YP)(n)&&!(0,a.HK)(n)&&i===s.YES&&r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(n),compress:!1}),n}function d(t,r,i){return l(t,i)}function h(t,r,i,s){let n=u(t,s);void 0!==n&&(r[i]=n)}let p=/\/items\/([^\/]+)\/resources\/(.*)/,c=/^\.\/resources\//;function f(t){return(t?.match(p)??null)?.[1]??null}function y(t){let r=t?.match(p)??null;if(null==r)return null;let i=r[2],s=i.lastIndexOf("/");if(-1===s){let{path:t,extension:r}=(0,a.fZ)(i);return{prefix:null,filename:t,extension:(0,o.Wg)(r)}}let{path:n,extension:l}=(0,a.fZ)(i.slice(s+1));return{prefix:i.slice(0,s),filename:n,extension:(0,o.Wg)(l)}}function m(t,r){return r&&!r.isPortal&&r.urlKey&&r.customBaseUrl?(0,a.Ie)(t,`${r.urlKey}.${r.customBaseUrl}`,r.portalHostname):t}function g(t,r){if(!r||r.isPortal||!r.urlKey||!r.customBaseUrl)return t;let i=`${r.urlKey}.${r.customBaseUrl}`,s=(0,a.TI)();return(0,a.D6)(s,`${s.scheme}://${i}`)?(0,a.Ie)(t,r.portalHostname,i):(0,a.Ie)(t,i,r.portalHostname)}(n=s||(s={}))[n.YES=0]="YES",n[n.NO=1]="NO";let _=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:l,toJSON:u,read:d,write:h,itemIdFromResourceUrl:f,prefixAndFilenameFromResourceUrl:y,ensureMainOnlineDomain:m,get MarkKeep(){return s}},Symbol.toStringTag,{value:"Module"}))},46315:(t,r,i)=>{"use strict";i.d(r,{q:()=>o});var s,n={exports:{}};void 0!==(s=function(){function t(t,r,i){var s=t[r];t[r]=t[i],t[i]=s}function r(t,r){return t<r?-1:t>r?1:0}return function(i,s,n,o,a){(function r(i,s,n,o,a){for(;o>n;){if(o-n>600){var l=o-n+1,u=s-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(l-h)/l)*(u-l/2<0?-1:1);r(i,s,Math.max(n,Math.floor(s-u*h/l+p)),Math.min(o,Math.floor(s+(l-u)*h/l+p)),a)}var c=i[s],f=n,y=o;for(t(i,n,s),a(i[o],c)>0&&t(i,n,o);f<y;){for(t(i,f,y),f++,y--;0>a(i[f],c);)f++;for(;a(i[y],c)>0;)y--}0===a(i[n],c)?t(i,n,y):t(i,++y,o),y<=s&&(n=y+1),s<=y&&(o=y-1)}})(i,s,n||0,o||i.length-1,a||r)}}())&&(n.exports=s);let o=n.exports},74529:(t,r,i)=>{"use strict";i.d(r,{r:()=>n});var s=i(46315);function n(t,r){if(!(this instanceof n))return new n(t,r);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),r&&("function"==typeof r?this.toBBox=r:this._initFormat(r)),this.clear()}function o(t,r){a(t,0,t.children.length,r,t)}function a(t,r,i,s,n){n||(n=y(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,a=r;a<i;a++)o=t.children[a],l(n,t.leaf?s(o):o);return n}function l(t,r){return t.minX=Math.min(t.minX,r.minX),t.minY=Math.min(t.minY,r.minY),t.maxX=Math.max(t.maxX,r.maxX),t.maxY=Math.max(t.maxY,r.maxY),t}function u(t,r){return t.minX-r.minX}function d(t,r){return t.minY-r.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function c(t,r){return t.minX<=r.minX&&t.minY<=r.minY&&r.maxX<=t.maxX&&r.maxY<=t.maxY}function f(t,r){return r.minX<=t.maxX&&r.minY<=t.maxY&&r.maxX>=t.minX&&r.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,r,i,n,o){for(var a,l=[r,i];l.length;)(i=l.pop())-(r=l.pop())<=n||(a=r+Math.ceil((i-r)/n/2)*n,(0,s.q)(t,a,r,i,o),l.push(r,a,a,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var r=this.data,i=[],s=this.toBBox;if(!f(t,r))return i;for(var n,o,a,l,u=[];r;){for(n=0,o=r.children.length;n<o;n++)a=r.children[n],f(t,l=r.leaf?s(a):a)&&(r.leaf?i.push(a):c(t,l)?this._all(a,i):u.push(a));r=u.pop()}return i},collides:function(t){var r=this.data,i=this.toBBox;if(!f(t,r))return!1;for(var s,n,o,a,l=[];r;){for(s=0,n=r.children.length;s<n;s++)if(o=r.children[s],f(t,a=r.leaf?i(o):o)){if(r.leaf||c(t,a))return!0;l.push(o)}r=l.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var r=0,i=t.length;r<i;r++)this.insert(t[r]);return this}var s=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var n=this.data;this.data=s,s=n}this._insert(s,this.data.height-s.height-1,!0)}}else this.data=s;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,r){if(!t)return this;for(var i,s,n,o,a=this.data,l=this.toBBox(t),u=[],d=[];a||u.length;){if(a||(a=u.pop(),s=u[u.length-1],i=d.pop(),o=!0),a.leaf&&-1!==(n=function(t,r,i){if(!i)return r.indexOf(t);for(var s=0;s<r.length;s++)if(i(t,r[s]))return s;return -1}(t,a.children,r)))return a.children.splice(n,1),u.push(a),this._condense(u),this;o||a.leaf||!c(a,l)?s?(i++,a=s.children[i],o=!1):a=null:(u.push(a),d.push(i),i=0,s=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:d,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,r){for(var i=[];t;)t.leaf?r.push.apply(r,t.children):i.push.apply(i,t.children),t=i.pop();return r},_build:function(t,r,i,s){var n,a=i-r+1,l=this._maxEntries;if(a<=l)return o(n=y(t.slice(r,i+1)),this.toBBox),n;s||(s=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,s-1))),(n=y([])).leaf=!1,n.height=s;var u,d,h,p,c=Math.ceil(a/l),f=c*Math.ceil(Math.sqrt(l));for(m(t,r,i,f,this.compareMinX),u=r;u<=i;u+=f)for(m(t,u,h=Math.min(u+f-1,i),c,this.compareMinY),d=u;d<=h;d+=c)p=Math.min(d+c-1,h),n.children.push(this._build(t,d,p,s-1));return o(n,this.toBBox),n},_chooseSubtree:function(t,r,i,s){for(var n,o,a,l,u,d,p,c;s.push(r),!r.leaf&&s.length-1!==i;){for(p=c=1/0,n=0,o=r.children.length;n<o;n++)u=h(a=r.children[n]),(d=(Math.max(a.maxX,t.maxX)-Math.min(a.minX,t.minX))*(Math.max(a.maxY,t.maxY)-Math.min(a.minY,t.minY))-u)<c?(c=d,p=u<p?u:p,l=a):d===c&&u<p&&(p=u,l=a);r=l||r.children[0]}return r},_insert:function(t,r,i){var s=this.toBBox,n=i?t:s(t),o=[],a=this._chooseSubtree(n,this.data,r,o);for(a.children.push(t),l(a,n);r>=0&&o[r].children.length>this._maxEntries;)this._split(o,r),r--;this._adjustParentBBoxes(n,o,r)},_split:function(t,r){var i=t[r],s=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,s);var a=this._chooseSplitIndex(i,n,s),l=y(i.children.splice(a,i.children.length-a));l.height=i.height,l.leaf=i.leaf,o(i,this.toBBox),o(l,this.toBBox),r?t[r-1].children.push(l):this._splitRoot(i,l)},_splitRoot:function(t,r){this.data=y([t,r]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,r,i){var s,n,o,l,u,d,p,c;for(d=p=1/0,s=r;s<=i-r;s++)l=function(t,r){var i=Math.max(t.minX,r.minX),s=Math.max(t.minY,r.minY);return Math.max(0,Math.min(t.maxX,r.maxX)-i)*Math.max(0,Math.min(t.maxY,r.maxY)-s)}(n=a(t,0,s,this.toBBox),o=a(t,s,i,this.toBBox)),u=h(n)+h(o),l<d?(d=l,c=s,p=u<p?u:p):l===d&&u<p&&(p=u,c=s);return c},_chooseSplitAxis:function(t,r,i){var s=t.leaf?this.compareMinX:u,n=t.leaf?this.compareMinY:d;this._allDistMargin(t,r,i,s)<this._allDistMargin(t,r,i,n)&&t.children.sort(s)},_allDistMargin:function(t,r,i,s){t.children.sort(s);var n,o,u=this.toBBox,d=a(t,0,r,u),h=a(t,i-r,i,u),c=p(d)+p(h);for(n=r;n<i-r;n++)o=t.children[n],l(d,t.leaf?u(o):o),c+=p(d);for(n=i-r-1;n>=r;n--)o=t.children[n],l(h,t.leaf?u(o):o),c+=p(h);return c},_adjustParentBBoxes:function(t,r,i){for(var s=i;s>=0;s--)l(r[s],t)},_condense:function(t){for(var r,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(r=t[i-1].children).splice(r.indexOf(t[i]),1):this.clear():o(t[i],this.toBBox)},_initFormat:function(t){var r=["return a"," - b",";"];this.compareMinX=Function("a","b",r.join(t[0])),this.compareMinY=Function("a","b",r.join(t[1])),this.toBBox=Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},24765:(t,r,i)=>{"use strict";function s(t,r,i,s){var n,o=arguments.length,a=o<3?r:null===s?s=Object.getOwnPropertyDescriptor(r,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,r,i,s);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(a=(o<3?n(a):o>3?n(r,i,a):n(r,i))||a);return o>3&&a&&Object.defineProperty(r,i,a),a}i.d(r,{_:()=>s})},44514:(t,r,i)=>{"use strict";i.d(r,{a:()=>l,b:()=>h,c:()=>n,d:()=>p,e:()=>w,f:()=>g,g:()=>b,h:()=>_,i:()=>f,j:()=>a,k:()=>c,n:()=>m,s:()=>o,t:()=>v});var s=i(20917);function n(t,r){return t[0]=r[0],t[1]=r[1],t}function o(t,r,i){return t[0]=r,t[1]=i,t}function a(t,r,i){return t[0]=r[0]+i[0],t[1]=r[1]+i[1],t}function l(t,r,i){return t[0]=r[0]-i[0],t[1]=r[1]-i[1],t}function u(t,r,i){return t[0]=r[0]*i[0],t[1]=r[1]*i[1],t}function d(t,r,i){return t[0]=r[0]/i[0],t[1]=r[1]/i[1],t}function h(t,r,i){return t[0]=r[0]*i,t[1]=r[1]*i,t}function p(t,r){let i=r[0]-t[0],s=r[1]-t[1];return Math.sqrt(i*i+s*s)}function c(t,r){let i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s}function f(t){let r=t[0],i=t[1];return Math.sqrt(r*r+i*i)}function y(t){let r=t[0],i=t[1];return r*r+i*i}function m(t,r){return t[0]=-r[0],t[1]=-r[1],t}function g(t,r){let i=r[0],s=r[1],n=i*i+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=r[0]*n,t[1]=r[1]*n),t}function _(t,r){return t[0]*r[0]+t[1]*r[1]}function b(t,r,i){let s=r[0]*i[1]-r[1]*i[0];return t[0]=t[1]=0,t[2]=s,t}function v(t,r,i){let s=r[0],n=r[1];return t[0]=i[0]*s+i[2]*n+i[4],t[1]=i[1]*s+i[3]*n+i[5],t}let w=l;Object.freeze(Object.defineProperty({__proto__:null,copy:n,set:o,add:a,subtract:l,multiply:u,divide:d,ceil:function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t},floor:function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t},min:function(t,r,i){return t[0]=Math.min(r[0],i[0]),t[1]=Math.min(r[1],i[1]),t},max:function(t,r,i){return t[0]=Math.max(r[0],i[0]),t[1]=Math.max(r[1],i[1]),t},round:function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t},scale:h,scaleAndAdd:function(t,r,i,s){return t[0]=r[0]+i[0]*s,t[1]=r[1]+i[1]*s,t},distance:p,squaredDistance:c,length:f,squaredLength:y,negate:m,inverse:function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t},normalize:g,dot:_,cross:b,lerp:function(t,r,i,s){let n=r[0],o=r[1];return t[0]=n+s*(i[0]-n),t[1]=o+s*(i[1]-o),t},random:function(t,r){r=r||1;let i=2*(0,s.R)()*Math.PI;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t},transformMat2:function(t,r,i){let s=r[0],n=r[1];return t[0]=i[0]*s+i[2]*n,t[1]=i[1]*s+i[3]*n,t},transformMat2d:v,transformMat3:function(t,r,i){let s=r[0],n=r[1];return t[0]=i[0]*s+i[3]*n+i[6],t[1]=i[1]*s+i[4]*n+i[7],t},transformMat4:function(t,r,i){let s=r[0],n=r[1];return t[0]=i[0]*s+i[4]*n+i[12],t[1]=i[1]*s+i[5]*n+i[13],t},rotate:function(t,r,i,s){let n=r[0]-i[0],o=r[1]-i[1],a=Math.sin(s),l=Math.cos(s);return t[0]=n*l-o*a+i[0],t[1]=n*a+o*l+i[1],t},angle:function(t,r){let i=t[0],s=t[1],n=r[0],o=r[1],a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));let l=n*n+o*o;l>0&&(l=1/Math.sqrt(l));let u=(i*n+s*o)*a*l;return u>1?0:u<-1?Math.PI:Math.acos(u)},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:function(t,r){return t[0]===r[0]&&t[1]===r[1]},equals:function(t,r){let i=t[0],n=t[1],o=r[0],a=r[1],l=(0,s.g)();return Math.abs(i-o)<=l*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))},projectAndScale:function(t,r,i,s,n){let o=r[0]-i[0],a=r[1]-i[1],l=(s[0]*o+s[1]*a)*(n-1);return o=s[0]*l,a=s[1]*l,t[0]=r[0]+o,t[1]=r[1]+a,t},len:f,sub:w,mul:u,div:d,dist:p,sqrDist:c,sqrLen:y},Symbol.toStringTag,{value:"Module"}))},75028:(t,r,i)=>{"use strict";function s(){return new Float32Array(2)}function n(t,r){let i=new Float32Array(2);return i[0]=t,i[1]=r,i}function o(){return s()}function a(){return n(1,1)}function l(){return n(1,0)}function u(){return n(0,1)}i.d(r,{O:()=>h,Z:()=>d,c:()=>s,f:()=>n});let d=o(),h=a(),p=l(),c=u();Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(t){let r=new Float32Array(2);return r[0]=t[0],r[1]=t[1],r},fromValues:n,createView:function(t,r){return new Float32Array(t,r,2)},zeros:o,ones:a,unitX:l,unitY:u,ZEROS:d,ONES:h,UNIT_X:p,UNIT_Y:c},Symbol.toStringTag,{value:"Module"}))},5793:(t,r,i)=>{"use strict";function s(){return[0,0]}function n(t,r){return[t,r]}function o(t,r){return new Float64Array(t,r,2)}function a(){return n(1,1)}function l(){return n(1,0)}function u(){return n(0,1)}i.d(r,{Z:()=>d,a:()=>s,c:()=>o,f:()=>n});let d=[0,0],h=a(),p=l(),c=u();Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(t){return[t[0],t[1]]},fromValues:n,fromArray:function(t){let r=[0,0],i=Math.min(2,t.length);for(let s=0;s<i;++s)r[s]=t[s];return r},createView:o,zeros:function(){return[0,0]},ones:a,unitX:l,unitY:u,ZEROS:d,ONES:h,UNIT_X:p,UNIT_Y:c},Symbol.toStringTag,{value:"Module"}))},44834:(t,r,i)=>{"use strict";i.d(r,{B:()=>h,C:()=>p,a:()=>u,b:()=>d,c:()=>a,d:()=>m,e:()=>b,f:()=>v,g:()=>c,h:()=>w,i:()=>y,k:()=>E,l:()=>o,m:()=>C,n:()=>_,p:()=>g,q:()=>x,r:()=>T,s:()=>l,t:()=>S,u:()=>P,z:()=>f});var s=i(63462),n=i(20917);function o(t){let r=t[0],i=t[1],s=t[2];return Math.sqrt(r*r+i*i+s*s)}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function l(t,r,i,s){return t[0]=r,t[1]=i,t[2]=s,t}function u(t,r,i){return t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t}function d(t,r,i){return t[0]=r[0]-i[0],t[1]=r[1]-i[1],t[2]=r[2]-i[2],t}function h(t,r,i){return t[0]=r[0]*i[0],t[1]=r[1]*i[1],t[2]=r[2]*i[2],t}function p(t,r,i){return t[0]=r[0]/i[0],t[1]=r[1]/i[1],t[2]=r[2]/i[2],t}function c(t,r,i){return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t}function f(t,r,i,s){return t[0]=r[0]+i[0]*s,t[1]=r[1]+i[1]*s,t[2]=r[2]+i[2]*s,t}function y(t,r){let i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2];return Math.sqrt(i*i+s*s+n*n)}function m(t,r){let i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2];return i*i+s*s+n*n}function g(t){let r=t[0],i=t[1],s=t[2];return r*r+i*i+s*s}function _(t,r){let i=r[0],s=r[1],n=r[2],o=i*i+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o),t}function b(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function v(t,r,i){let s=r[0],n=r[1],o=r[2],a=i[0],l=i[1],u=i[2];return t[0]=n*u-o*l,t[1]=o*a-s*u,t[2]=s*l-n*a,t}function w(t,r,i,s){let n=r[0],o=r[1],a=r[2];return t[0]=n+s*(i[0]-n),t[1]=o+s*(i[1]-o),t[2]=a+s*(i[2]-a),t}function C(t,r,i){let s=r[0],n=r[1],o=r[2];return t[0]=i[0]*s+i[4]*n+i[8]*o+i[12],t[1]=i[1]*s+i[5]*n+i[9]*o+i[13],t[2]=i[2]*s+i[6]*n+i[10]*o+i[14],t}function S(t,r,i){let s=r[0],n=r[1],o=r[2];return t[0]=s*i[0]+n*i[3]+o*i[6],t[1]=s*i[1]+n*i[4]+o*i[7],t[2]=s*i[2]+n*i[5]+o*i[8],t}function x(t,r,i){let s=i[0],n=i[1],o=i[2],a=i[3],l=r[0],u=r[1],d=r[2],h=n*d-o*u,p=o*l-s*d,c=s*u-n*l,f=n*c-o*p,y=o*h-s*c,m=s*p-n*h,g=2*a;return h*=g,p*=g,c*=g,f*=2,y*=2,m*=2,t[0]=l+h+f,t[1]=u+p+y,t[2]=d+c+m,t}let M=(0,s.c)(),I=(0,s.c)();function E(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function T(t,r,i){let s=i[0]-r[0],n=i[1]-r[1],o=i[2]-r[2],a=s*s+n*n+o*o;return a>0?(a=1/Math.sqrt(a),t[0]=s*a,t[1]=n*a,t[2]=o*a):(t[0]=0,t[1]=0,t[2]=0),t}let P=o;Object.freeze(Object.defineProperty({__proto__:null,length:o,copy:a,set:l,add:u,subtract:d,multiply:h,divide:p,ceil:function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t},floor:function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t},abs:function(t,r){return t[0]=Math.abs(r[0]),t[1]=Math.abs(r[1]),t[2]=Math.abs(r[2]),t},sign:function(t,r){return t[0]=Math.sign(r[0]),t[1]=Math.sign(r[1]),t[2]=Math.sign(r[2]),t},min:function(t,r,i){return t[0]=Math.min(r[0],i[0]),t[1]=Math.min(r[1],i[1]),t[2]=Math.min(r[2],i[2]),t},max:function(t,r,i){return t[0]=Math.max(r[0],i[0]),t[1]=Math.max(r[1],i[1]),t[2]=Math.max(r[2],i[2]),t},round:function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t},scale:c,scaleAndAdd:f,distance:y,squaredDistance:m,squaredLength:g,negate:function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t},inverse:function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t},normalize:_,dot:b,cross:v,lerp:w,hermite:function(t,r,i,s,n,o){let a=o*o,l=a*(2*o-3)+1,u=a*(o-2)+o,d=a*(o-1),h=a*(3-2*o);return t[0]=r[0]*l+i[0]*u+s[0]*d+n[0]*h,t[1]=r[1]*l+i[1]*u+s[1]*d+n[1]*h,t[2]=r[2]*l+i[2]*u+s[2]*d+n[2]*h,t},bezier:function(t,r,i,s,n,o){let a=1-o,l=a*a,u=o*o,d=l*a,h=3*o*l,p=3*u*a,c=u*o;return t[0]=r[0]*d+i[0]*h+s[0]*p+n[0]*c,t[1]=r[1]*d+i[1]*h+s[1]*p+n[1]*c,t[2]=r[2]*d+i[2]*h+s[2]*p+n[2]*c,t},random:function(t,r){r=r||1;let i=n.R,s=2*i()*Math.PI,o=2*i()-1,a=Math.sqrt(1-o*o)*r;return t[0]=Math.cos(s)*a,t[1]=Math.sin(s)*a,t[2]=o*r,t},transformMat4:C,transformMat3:S,transformQuat:x,rotateX:function(t,r,i,s){let n=[],o=[];return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],o[0]=n[0],o[1]=n[1]*Math.cos(s)-n[2]*Math.sin(s),o[2]=n[1]*Math.sin(s)+n[2]*Math.cos(s),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t},rotateY:function(t,r,i,s){let n=[],o=[];return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],o[0]=n[2]*Math.sin(s)+n[0]*Math.cos(s),o[1]=n[1],o[2]=n[2]*Math.cos(s)-n[0]*Math.sin(s),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t},rotateZ:function(t,r,i,s){let n=[],o=[];return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],o[0]=n[0]*Math.cos(s)-n[1]*Math.sin(s),o[1]=n[0]*Math.sin(s)+n[1]*Math.cos(s),o[2]=n[2],t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t},angle:function(t,r){a(M,t),a(I,r),_(M,M),_(I,I);let i=b(M,I);return i>1?0:i<-1?Math.PI:Math.acos(i)},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:E,equals:function(t,r){if(t===r)return!0;let i=t[0],s=t[1],o=t[2],a=r[0],l=r[1],u=r[2],d=(0,n.g)();return Math.abs(i-a)<=d*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-l)<=d*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(o-u)<=d*Math.max(1,Math.abs(o),Math.abs(u))},direction:T,sub:d,mul:h,div:p,dist:y,sqrDist:m,len:P,sqrLen:g},Symbol.toStringTag,{value:"Module"}))},63462:(t,r,i)=>{"use strict";function s(){return[0,0,0]}function n(t){return[t[0],t[1],t[2]]}function o(t,r,i){return[t,r,i]}function a(t){let r=[0,0,0],i=Math.min(3,t.length);for(let s=0;s<i;++s)r[s]=t[s];return r}function l(t,r){return new Float64Array(t,r,3)}function u(){return o(1,1,1)}function d(){return o(1,0,0)}function h(){return o(0,1,0)}function p(){return o(0,0,1)}i.d(r,{O:()=>f,Z:()=>c,a:()=>n,b:()=>l,c:()=>s,d:()=>a,f:()=>o});let c=[0,0,0],f=u(),y=d(),m=h(),g=p();Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:n,fromValues:o,fromArray:a,createView:l,zeros:function(){return[0,0,0]},ones:u,unitX:d,unitY:h,unitZ:p,ZEROS:c,ONES:f,UNIT_X:y,UNIT_Y:m,UNIT_Z:g},Symbol.toStringTag,{value:"Module"}))},39999:(t,r,i)=>{"use strict";i.d(r,{a:()=>a,b:()=>h,c:()=>n,d:()=>g,e:()=>f,f:()=>y,g:()=>b,h:()=>v,l:()=>_,n:()=>m,s:()=>o});var s=i(20917);function n(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function o(t,r,i,s,n){return t[0]=r,t[1]=i,t[2]=s,t[3]=n,t}function a(t,r,i){return t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t[3]=r[3]+i[3],t}function l(t,r,i){return t[0]=r[0]-i[0],t[1]=r[1]-i[1],t[2]=r[2]-i[2],t[3]=r[3]-i[3],t}function u(t,r,i){return t[0]=r[0]*i[0],t[1]=r[1]*i[1],t[2]=r[2]*i[2],t[3]=r[3]*i[3],t}function d(t,r,i){return t[0]=r[0]/i[0],t[1]=r[1]/i[1],t[2]=r[2]/i[2],t[3]=r[3]/i[3],t}function h(t,r,i){return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=r[3]*i,t}function p(t,r){let i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2],o=r[3]-t[3];return Math.sqrt(i*i+s*s+n*n+o*o)}function c(t,r){let i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2],o=r[3]-t[3];return i*i+s*s+n*n+o*o}function f(t){let r=t[0],i=t[1],s=t[2],n=t[3];return Math.sqrt(r*r+i*i+s*s+n*n)}function y(t){let r=t[0],i=t[1],s=t[2],n=t[3];return r*r+i*i+s*s+n*n}function m(t,r){let i=r[0],s=r[1],n=r[2],o=r[3],a=i*i+s*s+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=i*a,t[1]=s*a,t[2]=n*a,t[3]=o*a),t}function g(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function _(t,r,i,s){let n=r[0],o=r[1],a=r[2],l=r[3];return t[0]=n+s*(i[0]-n),t[1]=o+s*(i[1]-o),t[2]=a+s*(i[2]-a),t[3]=l+s*(i[3]-l),t}function b(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function v(t,r){let i=t[0],n=t[1],o=t[2],a=t[3],l=r[0],u=r[1],d=r[2],h=r[3],p=(0,s.g)();return Math.abs(i-l)<=p*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(n-u)<=p*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-d)<=p*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-h)<=p*Math.max(1,Math.abs(a),Math.abs(h))}Object.freeze(Object.defineProperty({__proto__:null,copy:n,set:o,add:a,subtract:l,multiply:u,divide:d,ceil:function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t},floor:function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t},min:function(t,r,i){return t[0]=Math.min(r[0],i[0]),t[1]=Math.min(r[1],i[1]),t[2]=Math.min(r[2],i[2]),t[3]=Math.min(r[3],i[3]),t},max:function(t,r,i){return t[0]=Math.max(r[0],i[0]),t[1]=Math.max(r[1],i[1]),t[2]=Math.max(r[2],i[2]),t[3]=Math.max(r[3],i[3]),t},round:function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t},scale:h,scaleAndAdd:function(t,r,i,s){return t[0]=r[0]+i[0]*s,t[1]=r[1]+i[1]*s,t[2]=r[2]+i[2]*s,t[3]=r[3]+i[3]*s,t},distance:p,squaredDistance:c,length:f,squaredLength:y,negate:function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t},inverse:function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t},normalize:m,dot:g,lerp:_,random:function(t,r){let i,n,o,a,l,u;let d=s.R;r=r||1;do l=(i=2*d()-1)*i+(n=2*d()-1)*n;while(l>=1);do u=(o=2*d()-1)*o+(a=2*d()-1)*a;while(u>=1);let h=Math.sqrt((1-l)/u);return t[0]=r*i,t[1]=r*n,t[2]=r*o*h,t[3]=r*a*h,t},transformMat4:function(t,r,i){let s=r[0],n=r[1],o=r[2],a=r[3];return t[0]=i[0]*s+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*s+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*s+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*s+i[7]*n+i[11]*o+i[15]*a,t},transformQuat:function(t,r,i){let s=r[0],n=r[1],o=r[2],a=i[0],l=i[1],u=i[2],d=i[3],h=d*s+l*o-u*n,p=d*n+u*s-a*o,c=d*o+a*n-l*s,f=-a*s-l*n-u*o;return t[0]=h*d+-(f*a)+-(p*u)- -(c*l),t[1]=p*d+-(f*l)+-(c*a)- -(h*u),t[2]=c*d+-(f*u)+-(h*l)- -(p*a),t[3]=r[3],t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:b,equals:v,sub:l,mul:u,div:d,dist:p,sqrDist:c,len:f,sqrLen:y},Symbol.toStringTag,{value:"Module"}))},10269:(t,r,i)=>{"use strict";function s(){return[0,0,0,0]}function n(t,r,i,s){return[t,r,i,s]}function o(t,r){return new Float64Array(t,r,4)}function a(){return n(1,1,1,1)}function l(){return n(1,0,0,0)}function u(){return n(0,1,0,0)}function d(){return n(0,0,1,0)}function h(){return n(0,0,0,1)}i.d(r,{a:()=>o,c:()=>s,f:()=>n});let p=a(),c=l(),f=u(),y=d(),m=h();Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(t){return[t[0],t[1],t[2],t[3]]},fromValues:n,fromArray:function(t){let r=[0,0,0,0],i=Math.min(4,t.length);for(let s=0;s<i;++s)r[s]=t[s];return r},createView:o,zeros:function(){return[0,0,0,0]},ones:a,unitX:l,unitY:u,unitZ:d,unitW:h,ZEROS:[0,0,0,0],ONES:p,UNIT_X:c,UNIT_Y:f,UNIT_Z:y,UNIT_W:m},Symbol.toStringTag,{value:"Module"}))},81533:(t,r,i)=>{"use strict";i.d(r,{B7:()=>u,St:()=>n,VL:()=>a,h$:()=>o,rW:()=>d});let s={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function n(t){return s[t]||s[t.toLowerCase()]}function o(t){return s[t]??s[t.toLowerCase()]}function a(t){return[...o(t)]}function l(t,r,i){i<0&&++i,i>1&&--i;let s=6*i;return s<1?t+(r-t)*s:2*i<1?r:3*i<2?t+(r-t)*(2/3-i)*6:t}function u(t,r,i,s=1){let n=(t%360+360)%360/360,o=i<=.5?i*(r+1):i+r-i*r,a=2*i-o;return[Math.round(255*l(a,o,n+1/3)),Math.round(255*l(a,o,n)),Math.round(255*l(a,o,n-1/3)),s]}function d(t){let r;let i=t.length>5,s=i?8:4,n=(1<<s)-1,o=i?1:17,a=i?9===t.length:5===t.length,l=Number("0x"+t.substr(1));if(isNaN(l))return null;let u=[0,0,0,1];return a&&(r=l&n,l>>=s,u[3]=o*r/255),r=l&n,l>>=s,u[2]=o*r,r=l&n,l>>=s,u[1]=o*r,r=l&n,l>>=s,u[0]=o*r,u}},10242:(t,r,i)=>{"use strict";i.d(r,{Z:()=>n}),i(96082);var s=i(12619);let n={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};globalThis.esriConfig&&((0,s.RH)(n,globalThis.esriConfig,!0),delete n.has),n.assetsPath||(n.assetsPath=`https://js.arcgis.com/${"4.25.4".slice(0,-2)}/@arcgis/core/assets`,n.defaultAssetsPath=n.assetsPath)},53306:(t,r,i)=>{"use strict";i.d(r,{Z:()=>A});var s=i(46366),n=i(82639),o=i(91746),a=i(9096),l=(i(96082),i(59118)),u=i(66150),d=i(35461),h=i(80107),p=i(43319),c=i(11918),f=i(71499),y=i(61943);class m{constructor(t,r,i){this.properties=t,this.propertyName=r,this.metadata=i,this._observers=null,this._accessed=null,this._handles=null,this.flags=f.v.Dirty|(i.nonNullable?f.v.NonNullable:0)|(i.hasOwnProperty("value")?f.v.HasDefaultValue:0)|(void 0===i.get?f.v.DepTrackingInitialized:0)|(void 0===i.dependsOn?f.v.AutoTracked:0)}destroy(){if(this.flags&f.v.Dirty&&this._observers)for(let t of this._observers.slice())t.onCommitted();this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){let t;(0,c.it)(this);let r=this.properties.store,i=this.propertyName,s=this.flags,n=r.get(i);if(s&f.v.Computing||~s&f.v.Dirty&&r.has(i))return n;this.flags|=f.v.Computing;let o=this.properties.host;s&f.v.AutoTracked?t=(0,c.LJ)(this,this.metadata.get,o):((0,c.GF)(o,this),t=this.metadata.get.call(o)),r.set(i,t,p.s3.COMPUTED);let a=r.get(i);return a===n?this.flags&=~f.v.Dirty:(0,c.gb)(this.commit,this),this.flags&=~f.v.Computing,a}onObservableAccessed(t){t!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=f.v.DepTrackingInitialized;let t=this._accessed;if(null===t)return;let r=this._handles;null===r&&(r=this._handles=[]);for(let i=0;i<t.length;++i)r.push(t[i].observe(this));t.length=0}observe(t){return null===this._observers&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new y.X(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&f.v.Overriden&&(this.flags|=f.v.Dirty);let t=this._observers;if(null!==t)for(let r=0;r<t.length;++r)t[r].onInvalidated()}commit(){this.flags&=~f.v.Dirty,this.onCommitted()}onCommitted(){if(null===this._observers)return;let t=this._observers.slice();for(let r=0;r<t.length;++r)t[r].onCommitted()}_clearObservationHandles(){let t=this._handles;if(null!==t){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}}class g{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){let r=new g;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,(0,l.d9)(i))}),r}get(t){return this._values.get(t)}originOf(){return p.s3.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}var _=i(65233);function b(t,r,i,s){return!(void 0===t||null==i&&t.flags&f.v.NonNullable&&(s.lifecycle,h.F.INITIALIZING,1))}u.Z.getLogger("esri.core.accessorSupport.Properties");class v{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=h.F.INITIALIZING,this.store=new g,this._origin=p.s3.USER;let r=this.host.constructor.__accessorMetadata__,i=r.properties;for(let t in i){let r=new m(this,t,i[t]);this.properties.set(t,r)}this.metadatas=i,this._autoDestroy=r.autoDestroy}initialize(){this.lifecycle=h.F.CONSTRUCTING}constructed(){this.lifecycle=h.F.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(let[r,i]of this.properties){var t;let s=this.internalGet(r);s&&(t=s)&&"function"==typeof t.destroy&&(s.destroy(),~i.flags&f.v.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(let[t,r]of this.properties)r.destroy()}get initialized(){return this.lifecycle!==h.F.INITIALIZING}get(t){let r=this.properties.get(t);if(r.metadata.get)return r.getComputed();(0,c.it)(r);let i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){let r=this.store.originOf(t);if(void 0===r){let r=this.properties.get(t);if(void 0!==r&&r.flags&f.v.HasDefaultValue)return"defaults"}return(0,p.x3)(r)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){let r=this.properties.get(t);if(void 0!==r)return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){let i=this.properties.get(t);void 0!==i&&this._internalSet(i,r)}getDependsInfo(t,r,i){let s=this.properties.get(r);if(!(void 0!==s))return"";let n=new Set,o=(0,c.LJ)({onObservableAccessed:t=>n.add(t),onTrackingEnd:()=>{}},()=>s.metadata.get?.call(t)),a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;if(0===n.size)return a;for(let t of(i+="  ",n)){if(!(t instanceof m))continue;let r=t.properties.host,s=t.propertyName,n=(0,_.vw)(r);a+=n?n.getDependsInfo(r,s,i):`${i}${s}: undefined
`}return a}setAtOrigin(t,r,i){let s=this.properties.get(t);if(void 0!==s)return this._setAtOrigin(s,r,i)}isOverridden(t){let r=this.properties.get(t);return void 0!==r&&!!(r.flags&f.v.Overriden)}clearOverride(t){let r=this.properties.get(t);void 0!==r&&r.flags&f.v.Overriden&&(r.flags&=~f.v.Overriden,r.notifyChange())}override(t,r){let i=this.properties.get(t);if(!b(i,0,r,this))return;let s=i.metadata.cast;if(s){let t=this._cast(s,r),{valid:i,value:n}=t;if(w.release(t),!i)return;r=n}i.flags|=f.v.Overriden,this._internalSet(i,r)}set(t,r){let i=this.properties.get(t);if(!b(i,0,r,this))return;let s=i.metadata.cast;if(s){let t=this._cast(s,r),{valid:i,value:n}=t;if(w.release(t),!i)return;r=n}let n=i.metadata.set;n?n.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=(0,p.M9)(t)}getDefaultOrigin(){return(0,p.x3)(this._origin)}notifyChange(t){let r=this.properties.get(t);void 0!==r&&r.notifyChange()}invalidate(t){let r=this.properties.get(t);void 0!==r&&r.invalidate()}commit(t){let r=this.properties.get(t);void 0!==r&&r.commit()}_internalSet(t,r){let i=this.lifecycle!==h.F.INITIALIZING?this._origin:p.s3.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){let s=this.store,n=t.propertyName;s.has(n,i)&&(0,l.fS)(r,s.get(n))&&~t.flags&f.v.Overriden&&i===s.originOf(n)||(t.invalidate(),s.set(n,r,i),t.commit(),(0,c.mS)(this.host,t))}_cast(t,r){let i=w.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}}let w=new d.Z(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});var C,S,x=i(96956),M=i(42169),I=i(53919),E=i(30407);let T=Symbol("Accessor-Handles"),P=Symbol("Accessor-Initialized");class A{constructor(...t){if(this[C]=null,this[S]=!1,this.constructor===A)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new v(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw Error("Multi-inheritance unsupported since 4.16");let{properties:r,declaredClass:i,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;let n=this;class o extends n{constructor(...t){super(...t),this.inherited=null,s&&s.apply(this,t)}}for(let r in(0,a.JT)(o.prototype),t){let i=t[r];o.prototype[r]="function"==typeof i?function(...t){let s;let o=this.inherited;this.inherited=function(...t){if(n.prototype[r])return n.prototype[r].apply(this,t)};try{s=i.apply(this,t)}catch(t){throw this.inherited=o,t}return this.inherited=o,s}:t[r]}for(let t in r){let i=function(t){if(null==t)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}(r[t]);(0,I.Cb)(i)(o.prototype,t)}return(0,E.j)(i)(o)}postscript(t){let r=this.__accessor__,i=r.ctorArgs||t;r.initialize(),i&&(this.set(i),r.ctorArgs=null),r.constructed(),this.initialize(),this[P]=!0}initialize(){}destroy(){this.destroyed||(this[T]=(0,n.SC)(this[T]),(0,M.BT)(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[P]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return(0,o.U2)(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return(0,x.t)(this,t,r),this}watch(t,r,i){return(0,M.YP)(this,t,r,i)}own(t){this.addHandles(t)}addHandles(t,r){let i=this[T];(0,n.Wi)(i)&&(i=this[T]=new s.Z),i.add(t,r)}removeHandles(t){let r=this[T];(0,n.Wi)(r)||r.remove(t)}hasHandles(t){let r=this[T];return!!(0,n.pC)(r)&&r.has(t)}_override(t,r){void 0===r?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){null==r?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}C=T,S=P},14963:(t,r,i)=>{"use strict";i.d(r,{Z:()=>o});var s=i(35461);function n(t){t.length=0}class o{constructor(t=50,r=50){this._pool=new s.Z(Array,void 0,n,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return a.acquire()}static release(t){return a.release(t)}static prune(){a.prune()}}let a=new o(100)},34577:(t,r,i)=>{"use strict";i.d(r,{J:()=>h,j:()=>p});var s=i(24765),n=i(53306),o=(i(96082),i(59118)),a=(i(66150),i(82639)),l=i(43319),u=i(65233),d=i(30407);let h=t=>{let r=class extends t{clone(){let t=(0,a.s3)((0,u.vw)(this),"unable to clone instance of non-accessor class"),r=t.metadatas,i=t.store,s={},n=new Map;for(let t in r){let a=r[t],u=i?.originOf(t),d=a.clonable;if(a.readOnly||!1===d||u!==l.s3.USER&&u!==l.s3.DEFAULTS&&u!==l.s3.WEB_MAP&&u!==l.s3.WEB_SCENE)continue;let h=this[t],p=null;p="function"==typeof d?d(h):"reference"===d?h:(0,o.Vo)(h),null!=h&&null==p||(u===l.s3.DEFAULTS?n.set(t,p):s[t]=p)}let d=new(Object.getPrototypeOf(this)).constructor(s);if(n.size){let t=u.vw(d)?.store;if(t)for(let[r,i]of n)t.set(r,i,l.s3.DEFAULTS)}return d}};return(0,s._)([(0,d.j)("esri.core.Clonable")],r)},p=class extends h(n.Z){};p=(0,s._)([(0,d.j)("esri.core.Clonable")],p)},51084:(t,r,i)=>{"use strict";i.d(r,{Z:()=>A});var s,n=i(24765),o=i(14963),a=i(88832),l=i(59118),u=i(82639),d=i(35461);(h=s||(s={}))[h.ADD=1]="ADD",h[h.REMOVE=2]="REMOVE",h[h.MOVE=4]="MOVE";var h,p,c=i(57446),f=i(53919),y=i(21314),m=i(10861),g=i(30407),_=i(11918),b=i(20209);let v=new d.Z(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),w=()=>{};function C(t){return t?t instanceof P?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function S(t){if(t&&t.length)return t[0]}let x=new Set,M=new Set,I=new Set,E=new Map,T=0,P=p=class extends a.Z.EventedAccessor{constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new b.s,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:T++})}static isCollection(t){return null!=t&&t instanceof p}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof p?{items:t}:t:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return(0,_.it)(this._observable),this._items}set items(t){this._emitBeforeChanges(s.ADD)||(this._splice(0,this.length,C(t)),this._emitAfterChanges(s.ADD))}hasEventListener(t){return"change"===t?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,r){if("change"===t){let t=this._chgListeners,i={removed:!1,callback:r};return t.push(i),this._notifications&&this._notifications.push({listeners:t.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=w,i.removed=!0,t.splice(t.indexOf(i),1)}}}return this._emitter.on(t,r)}once(t,r){let i=this.on(t,r);return{remove(){i.remove()}}}add(t,r){if((0,_.it)(this._observable),this._emitBeforeChanges(s.ADD))return this;let i=this.getNextIndex(r??null);return this._splice(i,0,[t]),this._emitAfterChanges(s.ADD),this}addMany(t,r=this._items.length){if((0,_.it)(this._observable),!t||!t.length||this._emitBeforeChanges(s.ADD))return this;let i=this.getNextIndex(r);return this._splice(i,0,C(t)),this._emitAfterChanges(s.ADD),this}at(t){if((0,_.it)(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if((0,_.it)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return[];let t=this._splice(0,this.length)||[];return this._emitAfterChanges(s.REMOVE),t}clone(){return(0,_.it)(this._observable),this._createNewInstance({items:this._items.map(l.d9)})}concat(...t){(0,_.it)(this._observable);let r=t.map(C);return this._createNewInstance({items:this._items.concat(...r)})}drain(t,r){if((0,_.it)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return;let i=(0,u.j0)(this._splice(0,this.length)),n=i.length;for(let s=0;s<n;s++)t.call(r,i[s],s,i);this._emitAfterChanges(s.REMOVE)}every(t,r){return(0,_.it)(this._observable),this._items.every(t,r)}filter(t,r){let i;return(0,_.it)(this._observable),i=2==arguments.length?this._items.filter(t,r):this._items.filter(t),this._createNewInstance({items:i})}find(t,r){return(0,_.it)(this._observable),this._items.find(t,r)}findIndex(t,r){return(0,_.it)(this._observable),this._items.findIndex(t,r)}flatten(t,r){(0,_.it)(this._observable);let i=[];return function t(r,i,s,n){i&&i.forEach((i,o,a)=>{r.push(i),t(r,s.call(n,i,o,a),s,n)})}(i,this,t,r),new p(i)}forEach(t,r){return(0,_.it)(this._observable),this._items.forEach(t,r)}getItemAt(t){return(0,_.it)(this._observable),this._items[t]}getNextIndex(t){(0,_.it)(this._observable);let r=this.length;return(t=t??r)<0?t=0:t>r&&(t=r),t}includes(t,r=0){return(0,_.it)(this._observable),this._items.includes(t,r)}indexOf(t,r=0){return(0,_.it)(this._observable),this._items.indexOf(t,r)}join(t=","){return(0,_.it)(this._observable),this._items.join(t)}lastIndexOf(t,r=this.length-1){return(0,_.it)(this._observable),this._items.lastIndexOf(t,r)}map(t,r){(0,_.it)(this._observable);let i=this._items.map(t,r);return new p({items:i})}reorder(t,r=this.length-1){(0,_.it)(this._observable);let i=this.indexOf(t);if(-1!==i){if(r<0?r=0:r>=this.length&&(r=this.length-1),i!==r){if(this._emitBeforeChanges(s.MOVE))return t;this._splice(i,1),this._splice(r,0,[t]),this._emitAfterChanges(s.MOVE)}return t}}pop(){if((0,_.it)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return;let t=S(this._splice(this.length-1,1));return this._emitAfterChanges(s.REMOVE),t}push(...t){return(0,_.it)(this._observable),this._emitBeforeChanges(s.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(s.ADD)),this.length}reduce(t,r){(0,_.it)(this._observable);let i=this._items;return 2==arguments.length?i.reduce(t,r):i.reduce(t)}reduceRight(t,r){(0,_.it)(this._observable);let i=this._items;return 2==arguments.length?i.reduceRight(t,r):i.reduceRight(t)}remove(t){return(0,_.it)(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if((0,_.it)(this._observable),t<0||t>=this.length||this._emitBeforeChanges(s.REMOVE))return;let r=S(this._splice(t,1));return this._emitAfterChanges(s.REMOVE),r}removeMany(t){if((0,_.it)(this._observable),!t||!t.length||this._emitBeforeChanges(s.REMOVE))return[];let r=t instanceof p?t.toArray():t,i=this._items,n=[],o=r.length;for(let t=0;t<o;t++){let s=r[t],o=i.indexOf(s);if(o>-1){let s=1+function(t,r,i,s){let n=Math.min(t.length-i,r.length-s),o=0;for(;o<n&&t[i+o]===r[s+o];)o++;return o}(r,i,t+1,o+1),a=this._splice(o,s);a&&a.length>0&&n.push.apply(n,a),t+=s-1}}return this._emitAfterChanges(s.REMOVE),n}reverse(){if((0,_.it)(this._observable),this._emitBeforeChanges(s.MOVE))return this;let t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(s.MOVE),this}shift(){if((0,_.it)(this._observable),!this.length||this._emitBeforeChanges(s.REMOVE))return;let t=S(this._splice(0,1));return this._emitAfterChanges(s.REMOVE),t}slice(t=0,r=this.length){return(0,_.it)(this._observable),this._createNewInstance({items:this._items.slice(t,r)})}some(t,r){return(0,_.it)(this._observable),this._items.some(t,r)}sort(t){if((0,_.it)(this._observable),!this.length||this._emitBeforeChanges(s.MOVE))return this;let r=(0,u.j0)(this._splice(0,this.length));return arguments.length?r.sort(t):r.sort(),this._splice(0,0,r),this._emitAfterChanges(s.MOVE),this}splice(t,r,...i){(0,_.it)(this._observable);let n=(r?s.REMOVE:0)|(i.length?s.ADD:0);if(this._emitBeforeChanges(n))return[];let o=this._splice(t,r,i)||[];return this._emitAfterChanges(n),o}toArray(){return(0,_.it)(this._observable),this._items.slice()}toJSON(){return(0,_.it)(this._observable),this.toArray()}toLocaleString(){return(0,_.it)(this._observable),this._items.toLocaleString()}toString(){return(0,_.it)(this._observable),this._items.toString()}unshift(...t){return(0,_.it)(this._observable),!t.length||this._emitBeforeChanges(s.ADD)||(this._splice(0,0,t),this._emitAfterChanges(s.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,r,i){let s,n;let o=this._items,a=this.itemType;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,c.Os)(()=>this._dispatchChange())),r){if(n=o.splice(t,r),this.hasEventListener("before-remove")){let r=v.acquire();r.target=this,r.cancellable=!0;for(let i=0,a=n.length;i<a;i++)s=n[i],r.reset(s),this.emit("before-remove",r),r.defaultPrevented&&(n.splice(i,1),o.splice(t,0,s),t+=1,i-=1,a-=1);v.release(r)}if(this.length=this._items.length,this.hasEventListener("after-remove")){let t=v.acquire();t.target=this,t.cancellable=!1;let r=n.length;for(let i=0;i<r;i++)t.reset(n[i]),this.emit("after-remove",t);v.release(t)}}if(i&&i.length){if(a){let t=[];for(let r of i){let i=a.ensureType(r);null==i&&null!=r||t.push(i)}i=t}let r=this.hasEventListener("before-add"),s=this.hasEventListener("after-add"),n=t===this.length;if(r||s){let a=v.acquire();a.target=this,a.cancellable=!0;let l=v.acquire();for(let u of(l.target=this,l.cancellable=!1,i))r?(a.reset(u),this.emit("before-add",a),a.defaultPrevented||(n?o.push(u):o.splice(t++,0,u),this._set("length",o.length),s&&(l.reset(u),this.emit("after-add",l)))):(n?o.push(u):o.splice(t++,0,u),this._set("length",o.length),l.reset(u),this.emit("after-add",l));v.release(l),v.release(a)}else{if(n)for(let t of i)o.push(t);else o.splice(t,0,...i);this._set("length",o.length)}}return(i&&i.length||n&&n.length)&&this._notifyChangeEvent(i,n),n}_emitBeforeChanges(t){let r=!1;if(this.hasEventListener("before-changes")){let i=v.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),r=i.defaultPrevented,v.release(i)}return r}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){let r=v.acquire();r.target=this,r.cancellable=!1,r.type=t,this.emit("after-changes",r),v.release(r)}this._observable.notify()}_notifyChangeEvent(t,r){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:r})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;let t=this._notifications;for(let r of(this._notifications=null,t)){let t=r.changes;for(let{added:r,removed:i}of(x.clear(),M.clear(),I.clear(),t)){if(r){if(0===I.size&&0===M.size)for(let t of r)x.add(t);else for(let t of r)M.has(t)?(I.add(t),M.delete(t)):I.has(t)||x.add(t)}if(i){if(0===I.size&&0===x.size)for(let t of i)M.add(t);else for(let t of i)x.has(t)?x.delete(t):(I.delete(t),M.add(t))}}let i=o.Z.acquire();x.forEach(t=>{i.push(t)});let s=o.Z.acquire();M.forEach(t=>{s.push(t)});let n=this._items,a=r.items,l=o.Z.acquire();if(I.forEach(t=>{a.indexOf(t)!==n.indexOf(t)&&l.push(t)}),r.listeners&&(i.length||s.length||l.length)){let t={target:this,added:i,removed:s,moved:l},n=r.listeners.length;for(let i=0;i<n;i++){let s=r.listeners[i];s.removed||s.callback.call(this,t)}}o.Z.release(i),o.Z.release(s),o.Z.release(l)}x.clear(),M.clear(),I.clear()}};P.ofType=t=>{if(!t)return p;if(E.has(t))return E.get(t);let r=null;if("function"==typeof t)r=t.prototype.declaredClass;else if(t.base)r=t.base.prototype.declaredClass;else for(let i in t.typeMap){let s=t.typeMap[i].prototype.declaredClass;r?r+=` | ${s}`:r=s}let i=class extends p{};return(0,n._)([(0,m.c)({Type:t,ensureType:"function"==typeof t?(0,y.se)(t):(0,y.N7)(t)})],i.prototype,"itemType",void 0),i=(0,n._)([(0,g.j)(`esri.core.Collection<${r}>`)],i),E.set(t,i),i},(0,n._)([(0,f.Cb)()],P.prototype,"length",void 0),(0,n._)([(0,f.Cb)()],P.prototype,"items",null);let A=P=p=(0,n._)([(0,g.j)("esri.core.Collection")],P)},42589:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s=i(24765),n=i(51084),o=i(82639),a=(i(96082),i(12790),i(66150),i(42169),i(52256)),l=i(53919),u=(i(99950),i(21314),i(30407));let d=class extends n.Z{constructor(t){super(t),this.getCollections=null}initialize(){this.own((0,a.EH)(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){let t=(0,o.pC)(this.getCollections)?this.getCollections():null;if((0,o.Wi)(t))return void this.removeAll();let r=0;for(let i of t)(0,o.pC)(i)&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new n.Z(t)}_processCollection(t,r){if(!r)return t;let i=this.itemFilterFunction?this.itemFilterFunction:t=>!!t;for(let s of r)if(s){if(i(s)){let r=this.indexOf(s,t);r>=0?r!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){let r=this.getChildrenFunction(s);if(Array.isArray(r))for(let i of r)t=this._processCollection(t,i);else t=this._processCollection(t,r)}}return t}};(0,s._)([(0,l.Cb)()],d.prototype,"getCollections",void 0),(0,s._)([(0,l.Cb)()],d.prototype,"getChildrenFunction",void 0),(0,s._)([(0,l.Cb)()],d.prototype,"itemFilterFunction",void 0);let h=d=(0,s._)([(0,u.j)("esri.core.CollectionFlattener")],d)},2951:(t,r,i)=>{"use strict";i.d(r,{BV:()=>a});var s=i(5047);class n{constructor(t,r){this.min=t,this.max=r,this.range=r-t}ndiff(t,r=0){return Math.ceil((t-r)/this.range)*this.range+r}_normalize(t,r,i,s=0,n=!1){return(i-=s)<t?i+=this.ndiff(t-i):i>r&&(i-=this.ndiff(i-r)),n&&i===r&&(i=t),i+s}normalize(t,r=0,i=!1){return this._normalize(this.min,this.max,t,r,i)}clamp(t,r=0){return(0,s.uZ)(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+this.ndiff(t-r,i)}minimalMonotonic(t,r,i){return this._normalize(t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);let i=(r=this.normalize(r))-t,s=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(s)?i:s}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}}function o(t){for(let r in t){let i=t[r];i instanceof Function&&(t[r]=i.bind(t))}return t}o(new n(0,2*Math.PI)),o(new n(-Math.PI,Math.PI));let a=o(new n(0,360))},12790:(t,r,i)=>{"use strict";i.d(r,{Z:()=>a});var s=i(59118),n=i(66150),o=i(10001);class a extends o.Z{constructor(t,r,i){if(super(t,r,i),!(this instanceof a))return new a(t,r,i)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&"object"==typeof r&&"function"==typeof r.toJSON)return r;try{return(0,s.d9)(r)}catch(t){return"[object]"}}))}}catch(t){throw n.Z.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new a(t.name,t.message,t.details)}}a.prototype.type="error"},88832:(t,r,i)=>{"use strict";i.d(r,{Z:()=>u});var s=i(24765),n=i(53306),o=i(31015),a=i(30407);class l{constructor(){this._emitter=new l.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}}!function(t){class r{constructor(t=null){this._target=t,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(t,r){let i=this._listenersMap&&this._listenersMap.get(t);if(!i)return!1;let s=this._target||this;return[...i].forEach(t=>{t.call(s,r)}),i.length>0}on(t,r){if(Array.isArray(t)){let i=t.map(t=>this.on(t,r));return(0,o.AL)(i)}if(t.includes(","))throw TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);let i=this._listenersMap.get(t)||[];return i.push(r),this._listenersMap.set(t,i),{remove:()=>{let i=this._listenersMap&&this._listenersMap.get(t)||[],s=i.indexOf(r);s>=0&&i.splice(s,1)}}}once(t,r){let i=this.on(t,t=>{i.remove(),r.call(null,t)});return i}hasEventListener(t){let r=this._listenersMap&&this._listenersMap.get(t);return null!=r&&r.length>0}}t.EventEmitter=r,t.EventedMixin=t=>{let i=class extends t{constructor(){super(...arguments),this._emitter=new r}destroy(){this._emitter.clear()}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};return(0,s._)([(0,a.j)("esri.core.Evented")],i)};let i=class extends n.Z{constructor(){super(...arguments),this._emitter=new l.EventEmitter(this)}destroy(){this._emitter.clear()}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};i=(0,s._)([(0,a.j)("esri.core.Evented")],i),t.EventedAccessor=i}(l||(l={}));let u=l},57107:(t,r,i)=>{"use strict";i.d(r,{p:()=>d,r:()=>h});var s=i(24765),n=i(53306),o=i(46366),a=i(53919),l=i(30407),u=i(99447);let d=t=>{let r=class extends t{destroy(){this.destroyed||(this._get("handles")?.destroy(),this._get("updatingHandles")?.destroy())}get handles(){return this._get("handles")||new o.Z}get updatingHandles(){return this._get("updatingHandles")||new u.t}};return(0,s._)([(0,a.Cb)({readOnly:!0})],r.prototype,"handles",null),(0,s._)([(0,a.Cb)({readOnly:!0})],r.prototype,"updatingHandles",null),r=(0,s._)([(0,l.j)("esri.core.HandleOwner")],r)},h=class extends d(n.Z){};h=(0,s._)([(0,l.j)("esri.core.HandleOwner")],h)},46366:(t,r,i)=>{"use strict";i.d(r,{Z:()=>o});var s=i(20341),n=i(82639);class o{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if((0,s.TW)(t)){let i=this._getOrCreateGroup(r);for(let r of t)this._isHandle(r)&&i.push(r)}else this._isHandle(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if("function"==typeof t)this._groups.forEach(r=>r.forEach(t));else{let i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(this._ensureGroupKey(t))}remove(t){if("string"!=typeof t&&(0,s.TW)(t)){for(let r of t)this.remove(r);return this}return this.has(t)&&(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t))),this}removeAll(){return this._groups.forEach(t=>this._removeAllFromGroup(t)),this._groups.clear(),this}_isHandle(t){return t&&!!t.remove}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);let r=[];return this._groups.set(this._ensureGroupKey(t),r),r}_getGroup(t){return(0,n.j0)(this._groups.get(this._ensureGroupKey(t)))}_ensureGroupKey(t){return t||"_default_"}_removeAllFromGroup(t){t.forEach(t=>t.remove())}}},18372:(t,r,i)=>{"use strict";i.d(r,{IG:()=>a,iv:()=>l});var s=i(24765),n=i(30407);let o=0,a=t=>{let r=class extends t{constructor(...t){super(...t),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+o++})}};return(0,s._)([(0,n.j)("esri.core.Identifiable")],r)},l=t=>{let r=class extends t{constructor(...t){super(...t),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:o++})}};return(0,s._)([(0,n.j)("esri.core.NumericIdentifiable")],r)},u=class extends a(class{}){};u=(0,s._)([(0,n.j)("esri.core.Identifiable")],u)},86214:(t,r,i)=>{"use strict";i.d(r,{Z:()=>n});var s=i(24303);class n{constructor(t,r){this._storage=new s.WJ,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r){this._storage.put(t,r,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},72140:(t,r,i)=>{"use strict";i.d(r,{wq:()=>_,eC:()=>m});var s=i(24765),n=i(53306),o=i(82639),a=i(59118),l=i(43319);class u{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){let r=new u;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,(0,a.d9)(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);let i=this._values.get(t);return null==r||i?.origin===r?i?.value:void 0}originOf(t){return this._values.get(t)?.origin??l.s3.USER}keys(t){t=this._normalizeOrigin(t);let r=[...this._values.keys()];return null==t?r:r.filter(r=>this._values.get(r)?.origin===t)}set(t,r,i){if((i=this._normalizeOrigin(i))===l.s3.DEFAULTS){let r=this._values.get(t);if(r&&null!=r.origin&&r.origin>i)return}this._values.set(t,new d(r,i))}delete(t,r){null!=(r=this._normalizeOrigin(r))&&this._values.get(t)?.origin!==r||this._values.delete(t)}has(t,r){return null!=(r=this._normalizeOrigin(r))?this._values.get(t)?.origin===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(null!=t)return t===l.s3.DEFAULTS?t:l.s3.USER}}class d{constructor(t,r){this.value=t,this.origin=r}}var h=i(25012),p=i(9334),c=i(65233),f=i(72758),y=i(30407);let m=t=>{let r=class extends t{constructor(...t){super(...t);let r=(0,o.j0)((0,c.vw)(this)),i=r.store,s=new u;r.store=s,(0,h.M)(r,i,s)}read(t,r){(0,p.i)(this,t,r)}write(t={},r){return(0,f.c)(this,t,r)}toJSON(t){return this.write({},t)}static fromJSON(t,r){return g.call(this,t,r)}};return(r=(0,s._)([(0,y.j)("esri.core.JSONSupport")],r)).prototype.toJSON.isDefaultToJSON=!0,r};function g(t,r){if(!t)return null;if(t.declaredClass)throw Error("JSON object is already hydrated");let i=new this;return i.read(t,r),i}let _=class extends m(n.Z){};_=(0,s._)([(0,y.j)("esri.core.JSONSupport")],_)},67918:(t,r,i)=>{"use strict";i.d(r,{Z:()=>n});var s=i(24303);class n{constructor(t,r){this._storage=new s.WJ,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r,i){this._storage.put(t,r,i,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}},63878:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s,n=i(24765),o=i(12790),a=i(3832),l=i(66138),u=i(19687),d=i(53919),h=i(30407);let p="loaded",c=t=>{let r=class extends t{constructor(...t){super(...t),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(t=>{let r=this.load.bind(this);this.load=i=>{let s=new Promise((t,r)=>{let s=(0,l.$F)(i,r);this.destroyed&&r(new o.Z("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(t,r).finally(()=>{s&&s.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");let t=this._loadController=new AbortController;r({signal:t.signal}),(0,l.fu)(t.signal,()=>{this._promiseProps.abort()})}return t(),s}})),this.when(()=>{this._set("loadStatus",p),this._loadController=null},t=>{this._set("loadStatus","failed"),this._set("loadError",t),this._loadController=null})}get loaded(){return this.loadStatus===p}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new o.Z("load:cancelled","Cancelled")),this._loadController?.abort()),this}};return(0,n._)([(0,d.Cb)({readOnly:!0})],r.prototype,"loaded",null),(0,n._)([(0,d.Cb)({readOnly:!0})],r.prototype,"loadError",void 0),(0,n._)([(0,d.Cb)({clonable:!1})],r.prototype,"loadStatus",void 0),(0,n._)([(0,d.Cb)({type:[u.Z],readOnly:!0})],r.prototype,"loadWarnings",null),r=(0,n._)([(0,h.j)("esri.core.Loadable")],r)},f=class extends c(a.D){};(s=(f=(0,n._)([(0,h.j)("esri.core.Loadable")],f))||(f={})).LoadableMixin=c,s.isLoadable=function(t){return!(!t||!t.load)};let y=f},66150:(t,r,i)=>{"use strict";i.d(r,{Z:()=>l});var s=i(10242),n=(i(96082),i(82639)),o=i(32121);let a={info:0,warn:1,error:2,none:3};class l{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=t.level&&(this.level=t.level),null!=t.writer&&(this.writer=t.writer),this._module=t.module,l._loggers[this.module]=this;let r=this.module.lastIndexOf(".");-1!==r&&(this._parent=l.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){let t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){let r=l._loggers;return l._loggers=t,r},set throttlingDisabled(e){l._throttlingDisabled=e}}}static getLogger(t){let r=l._loggers[t];return r||(r=new l({module:t})),r}_log(t,r,...i){if(this._matchLevel(t)){if("always"!==r&&!l._throttlingDisabled){let s=this._argsToKey(i),n=this._loggedMessages[t].get(s);if("once"===r&&null!=n||"oncePerTick"===r&&n&&n>=l._tickCounter)return;this._loggedMessages[t].set(s,l._tickCounter),l._scheduleTickCounterIncrement()}for(let r of s.Z.log.interceptors)if(r(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;(0,n.pC)(i);){let r=i[t];if((0,n.pC)(r))return r;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,r,...i){console[t](`[${r}]`,...i)}_matchLevel(t){let r=s.Z.log.level?s.Z.log.level:"warn";return a[this._parentWithMember("level",r)]<=a[t]}_argsToKey(...t){return(0,o.hP)(JSON.stringify(t,(t,r)=>"object"!=typeof r||Array.isArray(r)?r:"[Object]"))}static _scheduleTickCounterIncrement(){l._tickCounterScheduled||(l._tickCounterScheduled=!0,Promise.resolve().then(()=>{l._tickCounter++,l._tickCounterScheduled=!1}))}}l._loggers={},l._tickCounter=0,l._tickCounterScheduled=!1,l._throttlingDisabled=!1},33283:(t,r,i)=>{"use strict";i.d(r,{F:()=>h,M:()=>s});let s={Base64:0,Hex:1,String:2,Raw:3};function n(t,r){let i=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(i>>16)<<16|65535&i}function o(t,r,i,s,o,a){var l;return n((l=n(n(r,t),n(s,a)))<<o|l>>>32-o,i)}function a(t,r,i,s,n,a,l){return o(r&i|~r&s,t,r,n,a,l)}function l(t,r,i,s,n,a,l){return o(r&s|i&~s,t,r,n,a,l)}function u(t,r,i,s,n,a,l){return o(r^i^s,t,r,n,a,l)}function d(t,r,i,s,n,a,l){return o(i^(r|~s),t,r,n,a,l)}function h(t,r=s.Hex){let i=r||s.Base64,o=function(t,r){t[r>>5]|=128<<r%32,t[14+(r+64>>>9<<4)]=r;let i=1732584193,s=-271733879,o=-1732584194,h=271733878;for(let r=0;r<t.length;r+=16){let p=i,c=s,f=o,y=h;i=a(i,s,o,h,t[r+0],7,-680876936),h=a(h,i,s,o,t[r+1],12,-389564586),o=a(o,h,i,s,t[r+2],17,606105819),s=a(s,o,h,i,t[r+3],22,-1044525330),i=a(i,s,o,h,t[r+4],7,-176418897),h=a(h,i,s,o,t[r+5],12,1200080426),o=a(o,h,i,s,t[r+6],17,-1473231341),s=a(s,o,h,i,t[r+7],22,-45705983),i=a(i,s,o,h,t[r+8],7,1770035416),h=a(h,i,s,o,t[r+9],12,-1958414417),o=a(o,h,i,s,t[r+10],17,-42063),s=a(s,o,h,i,t[r+11],22,-1990404162),i=a(i,s,o,h,t[r+12],7,1804603682),h=a(h,i,s,o,t[r+13],12,-40341101),o=a(o,h,i,s,t[r+14],17,-1502002290),s=a(s,o,h,i,t[r+15],22,1236535329),i=l(i,s,o,h,t[r+1],5,-165796510),h=l(h,i,s,o,t[r+6],9,-1069501632),o=l(o,h,i,s,t[r+11],14,643717713),s=l(s,o,h,i,t[r+0],20,-373897302),i=l(i,s,o,h,t[r+5],5,-701558691),h=l(h,i,s,o,t[r+10],9,38016083),o=l(o,h,i,s,t[r+15],14,-660478335),s=l(s,o,h,i,t[r+4],20,-405537848),i=l(i,s,o,h,t[r+9],5,568446438),h=l(h,i,s,o,t[r+14],9,-1019803690),o=l(o,h,i,s,t[r+3],14,-187363961),s=l(s,o,h,i,t[r+8],20,1163531501),i=l(i,s,o,h,t[r+13],5,-1444681467),h=l(h,i,s,o,t[r+2],9,-51403784),o=l(o,h,i,s,t[r+7],14,1735328473),s=l(s,o,h,i,t[r+12],20,-1926607734),i=u(i,s,o,h,t[r+5],4,-378558),h=u(h,i,s,o,t[r+8],11,-2022574463),o=u(o,h,i,s,t[r+11],16,1839030562),s=u(s,o,h,i,t[r+14],23,-35309556),i=u(i,s,o,h,t[r+1],4,-1530992060),h=u(h,i,s,o,t[r+4],11,1272893353),o=u(o,h,i,s,t[r+7],16,-155497632),s=u(s,o,h,i,t[r+10],23,-1094730640),i=u(i,s,o,h,t[r+13],4,681279174),h=u(h,i,s,o,t[r+0],11,-358537222),o=u(o,h,i,s,t[r+3],16,-722521979),s=u(s,o,h,i,t[r+6],23,76029189),i=u(i,s,o,h,t[r+9],4,-640364487),h=u(h,i,s,o,t[r+12],11,-421815835),o=u(o,h,i,s,t[r+15],16,530742520),s=u(s,o,h,i,t[r+2],23,-995338651),i=d(i,s,o,h,t[r+0],6,-198630844),h=d(h,i,s,o,t[r+7],10,1126891415),o=d(o,h,i,s,t[r+14],15,-1416354905),s=d(s,o,h,i,t[r+5],21,-57434055),i=d(i,s,o,h,t[r+12],6,1700485571),h=d(h,i,s,o,t[r+3],10,-1894986606),o=d(o,h,i,s,t[r+10],15,-1051523),s=d(s,o,h,i,t[r+1],21,-2054922799),i=d(i,s,o,h,t[r+8],6,1873313359),h=d(h,i,s,o,t[r+15],10,-30611744),o=d(o,h,i,s,t[r+6],15,-1560198380),s=d(s,o,h,i,t[r+13],21,1309151649),i=d(i,s,o,h,t[r+4],6,-145523070),h=d(h,i,s,o,t[r+11],10,-1120210379),o=d(o,h,i,s,t[r+2],15,718787259),s=d(s,o,h,i,t[r+9],21,-343485551),i=n(i,p),s=n(s,c),o=n(o,f),h=n(h,y)}return[i,s,o,h]}(function(t){let r=[];for(let i=0,s=8*t.length;i<s;i+=8)r[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return r}(t),8*t.length);switch(i){case s.Raw:return o;case s.Hex:return function(t){let r="0123456789abcdef",i=[];for(let s=0,n=4*t.length;s<n;s++)i.push(r.charAt(t[s>>2]>>s%4*8+4&15)+r.charAt(t[s>>2]>>s%4*8&15));return i.join("")}(o);case s.String:return function(t){let r=[];for(let i=0,s=32*t.length;i<s;i+=8)r.push(String.fromCharCode(t[i>>5]>>>i%32&255));return r.join("")}(o);case s.Base64:return function(t){let r=[];for(let i=0,s=4*t.length;i<s;i+=3){let s=(t[i>>2]>>i%4*8&255)<<16|(t[i+1>>2]>>(i+1)%4*8&255)<<8|t[i+2>>2]>>(i+2)%4*8&255;for(let n=0;n<4;n++)8*i+6*n>32*t.length?r.push("="):r.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>6*(3-n)&63))}return r.join("")}(o)}}},39013:(t,r,i)=>{"use strict";function s(t,r){for(let[i,s]of t)if(r(s,i))return!0;return!1}function n(t,r,i){let s=t.get(r);if(void 0!==s)return s;let n=i();return t.set(r,n),n}i.d(r,{oE:()=>s,s1:()=>n})},24303:(t,r,i)=>{"use strict";i.d(r,{WJ:()=>u,Xq:()=>l});var s,n,o=i(82639),a=i(71937);(n=s||(s={}))[n.ALL=0]="ALL",n[n.SOME=1]="SOME";class l{constructor(t,r,i){this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,r,i,s=0){this._storage.put(this._namespace+t,r,i,s)}get(t){let r=this._storage.get(this._namespace+t);return void 0===r?++this._miss:++this._hit,r}pop(t){let r=this._storage.pop(this._namespace+t);return void 0===r?++this._miss:++this._hit,r}updateSize(t,r,i){this._storage.updateSize(this._namespace+t,r,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class u{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new a.Z,this._users=new a.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,r,i,n){let o=this._db.get(t);if(o&&(this._size-=o.size,this._db.delete(t),o.entry!==r&&this._notifyRemove(t,o.entry,s.ALL)),i>this._maxSize)return void this._notifyRemove(t,r,s.ALL);if(void 0===r)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);let a=1+Math.max(n,-3)- -3;this._db.set(t,{entry:r,size:i,lifetime:a,lives:a}),this._size+=i,this._checkSizeLimit()}updateSize(t,r,i){let n=this._db.get(t);if(n&&n.entry===r){for(this._size-=n.size;i>this._maxSize;){let n=this._notifyRemove(t,r,s.SOME);if(!((0,o.pC)(n)&&n>0))return void this._db.delete(t);i=n}n.size=i,this._size+=i,this._checkSizeLimit()}}pop(t){let r=this._db.get(t);if(r)return this._size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(t){let r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}getStats(){let t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=[];this._db.forEach((t,s)=>{let n=t.lifetime;i[n]=(i[n]||0)+t.size,this._users.forAll(i=>{let n=i.namespace;if(s.startsWith(n)){let i=r[n]||0;r[n]=i+t.size}})});let s={};this._users.forAll(t=>{let i=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){let n=r[i]||0;r[i]=n,s[i]=Math.round(100*t.hitRate)+"%"}else s[i]="0%"});let n=Object.keys(r);n.sort((t,i)=>r[i]-r[t]),n.forEach(i=>t[i]=Math.round(r[i]/1048576)+"MB / "+s[i]);for(let r=i.length-1;r>=0;--r){let s=i[r];s&&(t["Priority "+(r+-3-1)]=Math.round(s/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((r,i)=>{i.startsWith(t)&&(this._size-=r.size,this._db.delete(i),this._notifyRemove(i,r.entry,s.ALL))})}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,s.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i){let s;return this._removeFuncs.some(n=>{if(t.startsWith(n[0])){let t=n[1](r,i);return"number"==typeof t&&(s=t),!0}return!1}),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(let[t,r]of this._db){if(this._db.delete(t),r.lives<=1){this._size-=r.size;let i=this._notifyRemove(t,r.entry,s.SOME);(0,o.pC)(i)&&i>0&&(this._size+=i,r.lives=r.lifetime,r.size=i,this._db.set(t,r))}else--r.lives,this._db.set(t,r);if(this._size<=.9*this.maxSize)return}}}},10001:(t,r,i)=>{"use strict";i.d(r,{Z:()=>n});var s=i(12619);class n{constructor(t,r,i){this.name=t,this.details=i,this instanceof n&&(this.message=(r&&r.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(t,r)=>{if(""===r)return"$";let n=(0,s.hS)(r,i)??"";if(void 0===n)throw Error(`could not find key "${r}" in template`);return n.toString()}))??"")}toString(){return"["+this.name+"]: "+this.message}}},45470:(t,r,i)=>{"use strict";i.d(r,{R:()=>v,w:()=>w});var s=i(24765),n=i(53306),o=i(82639),a=i(25012),l=i(59118),u=i(43319);class d{constructor(){this._propertyOriginMap=new Map,this._originStores=Array(u.kk),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){let r=new d,i=this._originStores[u.s3.DEFAULTS];i&&i.forEach((t,i)=>{r.set(i,(0,l.d9)(t),u.s3.DEFAULTS)});for(let i=u.s3.SERVICE;i<u.kk;i++){let s=this._originStores[i];s&&s.forEach((s,n)=>{t&&t.has(n)||r.set(n,(0,l.d9)(s),i)})}return r}get(t,r){let i=void 0===r?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){let r=null==t?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=u.s3.USER){let s=this._originStores[i];if(s||(s=new Map,this._originStores[i]=s),s.set(t,r),!this._values.has(t)||(0,o.j0)(this._propertyOriginMap.get(t))<=i){let s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=u.s3.USER){let i=this._originStores[r];if(!i)return;let s=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let i=r-1;i>=0;i--){let r=this._originStores[i];if(r&&r.has(t)){this._values.set(t,r.get(t)),this._propertyOriginMap.set(t,i);break}}}return s}has(t,r){let i=void 0===r?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;let i=this._originStores[r],s=i&&i.get(t),n=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,r),n!==s}originOf(t){return this._propertyOriginMap.get(t)||u.s3.DEFAULTS}forEach(t){this._values.forEach(t)}}var h=i(9334),p=i(65233),c=i(30407);let f=t=>{let r=class extends t{constructor(...t){super(...t);let r=(0,o.j0)((0,p.vw)(this)),i=r.store,s=new d;r.store=s,(0,a.M)(r,i,s)}read(t,r){(0,h.i)(this,t,r)}getAtOrigin(t,r){let i=y(this),s=(0,u.M9)(r);if("string"==typeof t)return i.get(t,s);let n={};return t.forEach(t=>{n[t]=i.get(t,s)}),n}originOf(t){return(0,u.x3)(this.originIdOf(t))}originIdOf(t){return y(this).originOf(t)}revert(t,r){let i=y(this),s=(0,u.M9)(r),n=(0,p.vw)(this);("string"==typeof t?"*"===t?i.keys(s):[t]:t).forEach(t=>{n.invalidate(t),i.revert(t,s),n.commit(t)})}};return(0,s._)([(0,c.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],r)};function y(t){return(0,p.vw)(t).store}let m=class extends f(n.Z){};m=(0,s._)([(0,c.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],m);var g=i(72758);let _=t=>{let r=class extends t{constructor(...t){super(...t)}clear(t,r="user"){return b(this).delete(t,(0,u.M9)(r))}write(t={},r){return(0,g.c)(this,t=t||{},r),t}setAtOrigin(t,r,i){(0,p.vw)(this).setAtOrigin(t,r,(0,u.M9)(i))}removeOrigin(t){let r=b(this),i=(0,u.M9)(t);for(let t of r.keys(i))r.originOf(t)===i&&r.set(t,r.get(t,i),u.s3.USER)}updateOrigin(t,r){let i=b(this),s=(0,u.M9)(r),n=this.get(t);for(let r=s+1;r<u.kk;++r)i.delete(t,r);i.set(t,n,s)}toJSON(t){return this.write({},t)}};return(r=(0,s._)([(0,c.j)("esri.core.WriteableMultiOriginJSONSupport")],r)).prototype.toJSON.isDefaultToJSON=!0,r};function b(t){return(0,p.vw)(t).store}let v=t=>{let r=class extends _(f(t)){constructor(...t){super(...t)}};return(0,s._)([(0,c.j)("esri.core.MultiOriginJSONSupport")],r)},w=class extends v(n.Z){};w=(0,s._)([(0,c.j)("esri.core.MultiOriginJSONSupport")],w)},35461:(t,r,i)=>{"use strict";i.d(r,{Z:()=>s});class s{constructor(t,r,i,s=1,n=0){if(this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=s,this._pool=Array(n),this._initialSize=n,this._ctor)for(let t=0;t<n;t++)this._pool[t]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){var r;let i;if(s.test.disabled)i=new this._ctor;else{if(0===this._pool.length){let t=this.allocationSize;for(let r=0;r<t;r++)this._pool[r]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):(r=i)&&r.acquire&&"function"==typeof r.acquire&&i.acquire(...t),i}release(t){t&&!s.test.disabled&&(this._releaseFunction?this._releaseFunction(t):t&&t.release&&"function"==typeof t.release&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){let t=this._pool[r];this._dispose(t)}this._pool.length=t}}_dispose(t){t.dispose&&"function"==typeof t.dispose&&t.dispose()}}s.test={disabled:!1}},63979:(t,r,i)=>{"use strict";i.d(r,{Z:()=>n});var s=i(82639);class n{constructor(t,r=30){this.name=t,this._counter=0,this._samples=Array(r)}record(t){(0,s.pC)(t)&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}},71937:(t,r,i)=>{"use strict";i.d(r,{Z:()=>a});var s,n=i(99950);!function(t){let r=(t,r,i,s)=>{let n=r,o=r,a=i>>>1,l=t[n-1];for(;o<=a;){(o=n<<1)<i&&0>s(t[o-1],t[o])&&++o;let r=t[o-1];if(0>=s(r,l))break;t[n-1]=r,n=o}t[n-1]=l},i=(t,r)=>t<r?-1:t>r?1:0;t.sort=function(t,s,n,o){void 0===s&&(s=0),void 0===n&&(n=t.length),void 0===o&&(o=i);for(let i=n>>>1;i>s;i--)r(t,i,n,o);let a=s+1;for(let i=n-1;i>s;i--){let n=t[s];t[s]=t[i],t[i]=n,r(t,a,i,o)}},t.iterableSort=function*(t,s,n,o){void 0===s&&(s=0),void 0===n&&(n=t.length),void 0===o&&(o=i);for(let i=n>>>1;i>s;i--)r(t,i,n,o),yield;let a=s+1;for(let i=n-1;i>s;i--){let n=t[s];t[s]=t[i],t[i]=n,r(t,a,i,o),yield}}}(s||(s={}));let o=s;class a{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new n.SO,t&&(t.initialSize&&(this.data=Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),void 0!==t.deallocator&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>l(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){let r=[];for(let i=0;i<this._length;i++){let s=this.data[i];t(s)&&r.push(s)}return r}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,r){let i=this.data.indexOf(t,r);return -1!==i&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));let t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,l(this)}pop(){if(0===this.length)return;let t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){let r=(0,n.cq)(this.data,t,this.length,this._hint);if(-1!==r)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex((0,n.cq)(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=(0,n.FY)(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;let i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){o.sort(this.data,0,this.length,t)}iterableSort(t){return o.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}filterInPlace(t,r){let i=0;for(let s=0;s<this._length;++s){let n=this.data[s];t.call(r,n,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=n,i++)}if(this._deallocator)for(let t=i;t<this._length;t++)this.data[t]=this._deallocator(this.data[t]);return this._length=i,this._shrink(),this}forAll(t,r){let i=this.length,s=this.data;for(let n=0;n<i;++n)t.call(r,s[n],n,s)}forEach(t,r){for(let i=0;i<this.length;++i)t.call(r,this.data[i],i,this.data)}map(t,r){let i=Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(r,this.data[s],s,this.data);return i}reduce(t,r){let i=r;for(let r=0;r<this.length;++r)i=t(i,this.data[r],r,this.data);return i}has(t){let r=this.length,i=this.data;for(let s=0;s<r;++s)if(i[s]===t)return!0;return!1}}function l(t){t.data.length>1.5*t.length&&(t.data.length=Math.floor(1.1*t.length))}},3832:(t,r,i)=>{"use strict";i.d(r,{D:()=>c,v:()=>p});var s,n,o=i(24765),a=i(53306),l=i(82639),u=i(66138),d=i(30407);(n=s||(s={}))[n.PENDING=0]="PENDING",n[n.RESOLVED=1]="RESOLVED",n[n.REJECTED=2]="REJECTED";class h{constructor(t){this.instance=t,this._resolver=(0,u.dD)(),this._status=s.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=s.RESOLVED,this._cleanUp()},()=>{this._status=s.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===s.RESOLVED}isRejected(){return this._status===s.REJECTED}isFulfilled(){return this._status!==s.PENDING}abort(){this._resolver.reject((0,u.zE)())}when(t,r){return this._resolver.promise.then(t,r)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;let t=(0,u.dD)(),r=[...this._resolvingPromises,(0,l.j0)(t.promise)],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve(this.instance)},t=>{this.isFulfilled()||this._allPromise!==i||(0,u.D_)(t)||this._resolver.reject(t)}),t.resolve()}}let p=t=>(0,o._)([(0,d.j)("esri.core.Promise")],class extends t{constructor(...t){super(...t),this._promiseProps=new h(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(t,r){return new Promise((t,r)=>{this._promiseProps.when(t,r)}).then(t,r)}catch(t){return this.when(null,t)}addResolvingPromise(t){t&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in t?t.when():t)}}),c=class extends p(a.Z){};c=(0,o._)([(0,d.j)("esri.core.Promise")],c)},91425:(t,r,i)=>{"use strict";i.d(r,{Z:()=>n});var s=i(82639);class n{constructor(t=t=>t.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){let t;if(0!==this._items.size){for(t of this._items);return t}}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(0===this.length)return;let t=this.peek();return this._items.delete((0,s.j0)(t)),t}popLast(){if(0===this.length)return;let t=this.last();return this._items.delete((0,s.j0)(t)),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(r=>{t(r)||this._items.delete(r)}),this}}},55243:(t,r,i)=>{"use strict";i.d(r,{Z:()=>s});class s{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*s._m}getInt(){return this._seed=(s._a*this._seed+s._c)%s._m,this._seed}getFloat(){return this.getInt()/(s._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){return t+this.getInt()/s._m*(r-t)}}s._m=2147483647,s._a=48271,s._c=0},50719:(t,r,i)=>{"use strict";i.d(r,{e:()=>o});var s=i(82639),n=i(35461);class o extends n.Z{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=(0,s.wN)(this._set)}acquire(...t){let r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}},19687:(t,r,i)=>{"use strict";i.d(r,{Z:()=>n});var s=i(10001);class n extends s.Z{constructor(t,r,i){if(super(t,r,i),!(this instanceof n))return new n(t,r,i)}}n.prototype.type="warning"},43319:(t,r,i)=>{"use strict";i.d(r,{M9:()=>l,Wm:()=>d,kk:()=>a,s3:()=>s,x3:()=>u});var s,n,o=i(82639);(n=s||(s={}))[n.DEFAULTS=0]="DEFAULTS",n[n.COMPUTED=1]="COMPUTED",n[n.SERVICE=2]="SERVICE",n[n.PORTAL_ITEM=3]="PORTAL_ITEM",n[n.WEB_SCENE=4]="WEB_SCENE",n[n.WEB_MAP=5]="WEB_MAP",n[n.USER=6]="USER";let a=s.USER+1;function l(t){switch(t){case"defaults":return s.DEFAULTS;case"service":return s.SERVICE;case"portal-item":return s.PORTAL_ITEM;case"web-scene":return s.WEB_SCENE;case"web-map":return s.WEB_MAP;case"user":return s.USER;default:return null}}function u(t){switch(t){case s.DEFAULTS:return"defaults";case s.SERVICE:return"service";case s.PORTAL_ITEM:return"portal-item";case s.WEB_SCENE:return"web-scene";case s.WEB_MAP:return"web-map";case s.USER:return"user"}return(0,o.j0)(void 0)}function d(t){return u(t)}},36844:(t,r,i)=>{"use strict";i.d(r,{p:()=>l});var s=i(21314),n=i(9096);let o=Object.prototype.toString;function a(t,r,i,s){(0,n.VZ)(t,r).cast=s}function l(...t){if(3!==t.length||"string"!=typeof t[1]){var r;return 1===t.length&&"[object Function]"===o.call(t[0])?function(t){let r="__accessorMetadata__"in t?(0,s.se)(t):t;return function(...t){if(t.push(r),"number"==typeof t[2])throw Error("Using @cast has parameter decorator is not supported since 4.16");return a.apply(this,t)}}(t[0]):1===t.length&&"string"==typeof t[0]?(r=t[0],(t,i)=>{(0,n.VZ)(t,r).cast=t[i]}):void 0}}},21374:(t,r,i)=>{"use strict";i.d(r,{J:()=>o});var s=i(84576),n=i(53919);function o(t,r={}){let i=t instanceof s.X?t:new s.X(t,r),o={type:r?.ignoreUnknown??1?i.apiValues:String,json:{type:i.jsonValues,read:!r?.readOnly&&{reader:i.read},write:{writer:i.write}}};return void 0!==r?.readOnly&&(o.readOnly=!!r.readOnly),void 0!==r?.default&&(o.json.default=r.default),void 0!==r?.name&&(o.json.name=r.name),(0,n.Cb)(o)}},53919:(t,r,i)=>{"use strict";i.d(r,{CJ:()=>d,Cb:()=>u,Eg:()=>h});var s=i(66150),n=i(21314),o=i(91746),a=i(9096),l=i(96956);function u(t={}){return(r,i)=>{if(r===Function.prototype)throw Error(`Inappropriate use of @property() on a static field: ${r.name}.${i}. Accessor does not support static properties.`);let u=Object.getOwnPropertyDescriptor(r,i),d=(0,a.VZ)(r,i);u&&(u.get||u.set?(d.get=u.get||d.get,d.set=u.set||d.set):"value"in u&&("value"in t&&s.Z.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${r.constructor.name}" already defined in the metadata`,t),d.value=t.value=u.value)),null!=t.readOnly&&(d.readOnly=t.readOnly);let p=t.aliasOf;if(p){let t;let r="string"==typeof p?p:p.source,s="string"==typeof p?null:!0===p.overridable;d.dependsOn=[r],d.get=function(){let i=(0,o.U2)(this,r);if("function"==typeof i){t||(t=r.split(".").slice(0,-1).join("."));let s=(0,o.U2)(this,t);s&&(i=i.bind(s))}return i},d.readOnly||(d.set=s?function(t){this._override(i,t)}:function(t){(0,l.t)(this,r,t)})}let c=t.type,f=t.types;d.cast||(c?d.cast=function(t){let r=0,i=t;if((0,n.AY)(t))return(0,n.sY)(t);for(;Array.isArray(i)&&1===i.length&&"string"!=typeof i[0]&&"number"!=typeof i[0];)i=i[0],r++;let s=i;return(0,n.gB)(s)?0===r?(0,n.i$)(s):(0,n.Iu)((0,n.i$)(s),r):1===r?(0,n.rY)(s):r>1?(0,n.di)(s,r):t.from?t.from:(0,n.se)(t)}(c):f&&(Array.isArray(f)?d.cast=(0,n.Ls)((0,n.N7)(f[0])):d.cast=(0,n.N7)(f))),(0,a.tz)(d,t),t.range&&(d.cast=h(d.cast,t.range))}}function d(t,r,i){let s=(0,a.VZ)(t,i);s.json||(s.json={});let n=s.json;return void 0!==r&&(n.origins||(n.origins={}),n.origins[r]||(n.origins[r]={}),n=n.origins[r]),n}function h(t,r){return i=>{let s=+t(i);return null!=r.step&&(s=Math.round(s/r.step)*r.step),null!=r.min&&(s=Math.max(r.min,s)),null!=r.max&&(s=Math.min(r.max,s)),s}}},71169:(t,r,i)=>{"use strict";i.d(r,{r:()=>n});var s=i(53919);function n(t,r,i){let n,o;return void 0===r||Array.isArray(r)?(o=t,i=r,n=[void 0]):(o=r,n=Array.isArray(t)?t:[t]),(t,r)=>{let a=t.constructor.prototype;n.forEach(n=>{let l=(0,s.CJ)(t,n,o);l.read&&"object"==typeof l.read||(l.read={}),l.read.reader=a[r],i&&(l.read.source=(l.read.source||[]).concat(i))})}}},10861:(t,r,i)=>{"use strict";function s(t){return(r,i)=>{r[i]=t}}i.d(r,{c:()=>s})},30407:(t,r,i)=>{"use strict";i.d(r,{j:()=>d}),i(96082);var s=i(80107),n=i(9096),o=i(11918),a=i(4262);let l=new Set,u=new Set;function d(t){return r=>{r.prototype.declaredClass=t,function(t){let r=t.prototype,i=(0,n.JT)(r).properties,l={};for(let t of Object.getOwnPropertyNames(i)){let r=i[t];(0,a.OM)(r),l[t]={enumerable:!0,configurable:!0,get:function(t,r){return null==r.get?function(){let r=this.__accessor__.properties.get(t);if(void 0===r)return;(0,o.it)(r);let i=this.__accessor__.store;return i.has(t)?i.get(t):r.metadata.value}:function(){let r=this.__accessor__.properties.get(t);if(void 0!==r)return r.getComputed()}}(t,r),set(i){let n=this.__accessor__;if(void 0!==n){if(!Object.isFrozen(this)){if(n.initialized&&r.readOnly)throw TypeError(`[accessor] cannot assign to read-only property '${t}' of ${this.declaredClass}`);if(n.lifecycle===s.F.CONSTRUCTED&&r.constructOnly)throw TypeError(`[accessor] cannot assign to construct-only property '${t}' of ${this.declaredClass}`);n.set(t,i)}}else Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:i})}}}Object.defineProperties(t.prototype,l)}(r);let i=[],d=[],h=r.prototype;for(;h;)h.hasOwnProperty("initialize")&&!l.has(h.initialize)&&(l.add(h.initialize),i.push(h.initialize)),h.hasOwnProperty("destroy")&&!u.has(h.destroy)&&(u.add(h.destroy),d.push(h.destroy)),h=Object.getPrototypeOf(h);l.clear(),u.clear();class p extends r{constructor(...t){if(super(...t),this.constructor===p&&"function"==typeof this.postscript){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let t=i.length-1;t>=0;t--)i[t].call(this)}}),d.length){let t=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!t){t=!0;for(let t=0;t<d.length;t++)d[t].call(this)}}})}this.postscript(...t)}}}return p.__accessorMetadata__=(0,n.JT)(r.prototype),p.prototype.declaredClass=t,p}}},62300:(t,r,i)=>{"use strict";i.d(r,{c:()=>n});var s=i(53919);function n(t,r,i){let n,o;return void 0===r?(o=t,n=[void 0]):"string"!=typeof r?(o=t,n=[void 0],i=r):(o=r,n=Array.isArray(t)?t:[t]),(t,r)=>{let a=t.constructor.prototype;for(let l of n){let n=(0,s.CJ)(t,l,o);n.write&&"object"==typeof n.write||(n.write={}),i&&(n.write.target=i),n.write.writer=a[r]}}}},25012:(t,r,i)=>{"use strict";i.d(r,{M:()=>n});var s=i(43319);function n(t,r,i){r.keys().forEach(t=>{i.set(t,r.get(t),s.s3.DEFAULTS)}),Object.keys(t.metadatas).forEach(r=>{t.internalGet(r)&&i.set(r,t.internalGet(r),s.s3.DEFAULTS)})}},39417:(t,r,i)=>{"use strict";i.d(r,{Hg:()=>y,V7:()=>f,uD:()=>c});var s=i(53306),n=i(51084),o=i(82639),a=i(65233);let l=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function u(t){return t instanceof s.Z}function d(t){return t instanceof n.Z?Object.keys(t.items):u(t)?(0,a.vw)(t).keys():t?Object.keys(t):[]}function h(t,r){return t instanceof n.Z?t.items[r]:t[r]}function p(t){return t?t.declaredClass:null}function c(t,r){if((0,o.Wi)(t))return!1;let i=r.split("."),s=t;for(let t of i){if("complete"===s.type)break;if("partial"!==s.type)return!1;{let r=s.diff[t];if(!r)return!1;s=r}}return!0}function f(t,r){for(let i of r)if(c(t,i))return!0;return!1}function y(t,r){if(!("function"==typeof t||"function"==typeof r||(0,o.Wi)(t)&&(0,o.Wi)(r)))return(0,o.Wi)(t)||(0,o.Wi)(r)||"object"==typeof t&&"object"==typeof r&&p(t)!==p(r)?{type:"complete",oldValue:t,newValue:r}:function t(r,i){let s;let n=r.diff;if(n&&"function"==typeof n)return n(r,i);let a=d(r),c=d(i);if(0===a.length&&0===c.length)return;if(!a.length||!c.length||!(!Array.isArray(r)||!Array.isArray(i))&&r.length!==i.length)return{type:"complete",oldValue:r,newValue:i};let f=c.filter(t=>!a.includes(t)),y=a.filter(t=>!c.includes(t)),m=a.filter(t=>c.includes(t)&&h(r,t)!==h(i,t)).concat(f,y).sort(),g=p(r);if(g&&l.includes(g)&&m.length)return{type:"complete",oldValue:r,newValue:i};let _=u(r)&&u(i);for(let a of m){let l;let u=h(r,a),d=h(i,a);if((_||"function"!=typeof u&&"function"!=typeof d)&&u!==d&&(null!=u||null!=d)){if(n&&n[a]&&"function"==typeof n[a])l=n[a](u,d);else if(u instanceof Date&&d instanceof Date){if(u.getTime()===d.getTime())continue;l={type:"complete",oldValue:u,newValue:d}}else l="object"==typeof u&&"object"==typeof d&&p(u)===p(d)?t(u,d):{type:"complete",oldValue:u,newValue:d};(0,o.pC)(l)&&((0,o.pC)(s)?s.diff[a]=l:s={type:"partial",diff:{[a]:l}})}}return s}(t,r)}},21314:(t,r,i)=>{"use strict";i.d(r,{AY:()=>T,Iu:()=>S,Ls:()=>w,N7:()=>function t(r,i){if(2==arguments.length)return t(r).call(null,i);let s={},n=[],a=[];for(let t in r.typeMap){let i=r.typeMap[t];s[t]=v(i),n.push(_(i)),a.push(t)}let l=()=>`'${n.join("', '")}'`,u=()=>`'${a.join("', '")}'`,d="string"==typeof r.key?t=>t[r.key]:r.key;return t=>{if(r.base&&!c(r.base,t)||null==t)return t;let i=d(t)||r.defaultKeyValue,n=s[i];if(!n)return o.error("Accessor#set",`Invalid property value, value needs to be one of ${l()}, or a plain object that can autocast (having .type = ${u()})`),null;if(!c(r.typeMap[i],t))return t;if("string"==typeof r.key&&!p(t)){let i={};for(let s in t)s!==r.key&&(i[s]=t[s]);return n(i)}return n(t)}},TJ:()=>g,V5:()=>E,Zs:()=>u,di:()=>x,gB:()=>M,i$:()=>function t(r,i){if(2==arguments.length)return t(r).call(null,i);let s=new Set,n=r.filter(t=>"function"!=typeof t),a=r.filter(t=>"function"==typeof t);for(let t of r)"string"!=typeof t&&"number"!=typeof t||s.add(t);let l=null,u=null;return(t,r)=>{if(null==t)return t;let i=typeof t,d="string"===i||"number"===i;return d&&(s.has(t)||a.some(t=>"string"===i&&t===String||"number"===i&&t===Number))||"object"===i&&a.some(r=>!c(t,r))?t:(d&&n.length?(l||(l=n.map(t=>"string"==typeof t?`'${t}'`:`${t}`).join(", ")),o.error("Accessor#set",`'${t}' is not a valid value for this property, only the following values are valid: ${l}`)):"object"==typeof t&&a.length?(u||(u=a.map(t=>_(t)).join(", ")),o.error("Accessor#set",`'${t}' is not a valid value for this property, value must be one of ${u}`)):o.error("Accessor#set",`'${t}' is not a valid value for this property`),r&&(r.valid=!1),null)}},q9:()=>d,rY:()=>C,sY:()=>function t(r){switch(r.type){case"native":return v(r.value);case"array":return w(t(r.value));case"one-of":let i;return i=null,(t,s)=>!function t(r,i){if(null==r)return!0;switch(i.type){case"native":switch(i.value){case Number:case I:return"number"==typeof r;case Boolean:return"boolean"==typeof r;case String:return"string"==typeof r}return r instanceof i.value;case"array":return!!Array.isArray(r)&&!r.some(r=>!t(r,i.value));case"one-of":return i.values.some(i=>t(r,i))}}(t,r)?(null==i&&(i=function t(r){switch(r.type){case"native":switch(r.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case I:return"integer";case Date:return"date";default:return _(r.value)}case"array":return`array of ${t(r.value)}`;case"one-of":{let i=r.values.map(r=>t(r));return`one of ${i.slice(0,i.length-1)} or ${i[i.length-1]}`}}return"unknown"}(r)),o.error("Accessor#set",`Invalid property value, value needs to be of type ${i}`),s&&(s.valid=!1),null):t;default:return null}},se:()=>v,vU:()=>h,z8:()=>I}),i(96082);var s=i(66150),n=i(39013);let o=s.Z.getLogger("esri.core.accessorSupport.ensureTypes");function a(t){return null==t?t:new Date(t)}function l(t){return null==t?t:!!t}function u(t){return null==t?t:t.toString()}function d(t){return null==t?t:isNaN(t=parseFloat(t))?0:t}function h(t){return null==t?t:Math.round(parseFloat(t))}function p(t){return t&&t.constructor&&void 0!==t.constructor.__accessorMetadata__}function c(t,r){return null!=r&&t&&!(r instanceof t)}function f(t){return t&&"isCollection"in t}function y(t){return t&&t.Type?"function"==typeof t.Type?t.Type:t.Type.base:null}function m(t,r){return!!p(r)&&(o.error("Accessor#set","Assigning an instance of '"+(r.declaredClass||"unknown")+"' which is not a subclass of '"+_(t)+"'"),!0)}function g(t,r){return null==r?r:f(t)?function(t,r){if(!r||!r.constructor||!f(r.constructor))return m(t,r)?r:new t(r);let i=y(t.prototype.itemType),s=y(r.constructor.prototype.itemType);return i?s?i===s?r:i.prototype.isPrototypeOf(s.prototype)?new t(r):(m(t,r),r):new t(r):r}(t,r):c(t,r)?m(t,r)?r:new t(r):r}function _(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}let b=new WeakMap;function v(t,r){let i=function(t){switch(t){case Number:return d;case I:return h;case Boolean:return l;case String:return u;case Date:return a;default:return(0,n.s1)(b,t,()=>g.bind(null,t))}}(t);return 1==arguments.length?i:i(r)}function w(t,r,i){return 1==arguments.length?w.bind(null,t):r?Array.isArray(r)?r.map(r=>t(r,i)):[t(r,i)]:r}function C(t,r){return 1==arguments.length?w(v.bind(null,t)):w(v.bind(null,t),r)}function S(t,r,i){if(2==arguments.length)return S.bind(null,t,r);if(!i)return i;let s=r,n=i=function t(r,i,s){return 0!==i&&Array.isArray(s)?s.map(s=>t(r,i-1,s)):r(s)}(t,r,i);for(;s>0&&Array.isArray(n);)s--,n=n[0];if(void 0!==n)for(let t=0;t<s;t++)i=[i];return i}function x(t,r,i){return 2==arguments.length?S(v.bind(null,t),r):S(v.bind(null,t),r,i)}function M(t){return!!Array.isArray(t)&&!t.some(r=>{let i=typeof r;return!("string"===i||"number"===i||"function"===i&&t.length>1)})}class I{}let E={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function T(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}},4262:(t,r,i)=>{"use strict";i.d(r,{hk:()=>p,HS:()=>d,Ah:()=>h,OM:()=>y});var s=i(21314),n=i(51609);function o(t){t.name&&(t.read&&"object"==typeof t.read?void 0===t.read.source&&(t.read.source=t.name):t.read={source:t.name},t.write&&"object"==typeof t.write?void 0===t.write.target&&(t.write.target=t.name):t.write={target:t.name})}function a(t){"boolean"==typeof t.read?t.read={enabled:t.read}:"function"==typeof t.read?t.read={enabled:!0,reader:t.read}:t.read&&"object"==typeof t.read&&void 0===t.read.enabled&&(t.read.enabled=!0)}function l(t){"boolean"==typeof t.write?t.write={enabled:t.write}:"function"==typeof t.write?t.write={enabled:!0,writer:t.write}:t.write&&"object"==typeof t.write&&void 0===t.write.enabled&&(t.write.enabled=!0)}var u=i(32802);function d(t,r){return p(t,"read",r)}function h(t,r){return p(t,"write",r)}function p(t,r,i){let s=t&&t.json;if(t&&t.json&&t.json.origins&&i){let n=i.origin&&t.json.origins[i.origin];n&&("any"===r||r in n)&&(s=n)}return s}function c(t){if(!t.type)return;let r=0,i=t.type;for(;Array.isArray(i)&&!(0,s.gB)(i);)i=i[0],r++;return{type:i,ndimArray:r}}function f(t){if(!t.types)return;let r=0,i=t.types;for(;Array.isArray(i);)i=i[0],r++;return{types:i,ndimArray:r}}function y(t){(function(t){if(t.json||(t.json={}),a(t.json),l(t.json),o(t.json),t.json.origins)for(let r in t.json.origins)a(t.json.origins[r]),l(t.json.origins[r]),o(t.json.origins[r]);return!0})(t)&&(function(t){if(t.json&&t.json.origins){let r=t.json.origins,i={"web-document":["web-scene","web-map"]};for(let t in i)if(r[t]){let s=r[t];i[t].forEach(t=>{r[t]=s}),delete r[t]}}}(t),function(t){let r=t.json.types?f(t.json):t.type?c(t):f(t);if(t.json.origins)for(let i in t.json.origins){let s=t.json.origins[i],o=s.types?s.type?c(s):f(s):r;(0,n.U)(o,s,!1),s.types&&!s.write&&t.json.write&&t.json.write.enabled&&(s.write={...t.json.write}),(0,u.U)(o,s)}(0,n.U)(r,t.json,!0),(0,u.U)(r,t.json)}(t))}},51609:(t,r,i)=>{"use strict";i.d(r,{U:()=>d,d:()=>h});var s=i(66150),n=i(12619),o=i(19687),a=i(9096),l=i(97568);let u=s.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function d(t,r,i){t&&(!i&&!r.read||r.read?.reader||!1===r.read?.enabled||("types"in t?m(t.types):y(t.type))&&(0,n.RB)("read.reader",h(t),r))}function h(t){let r=t.ndimArray??0;if(r>1)return function(t){let r=(function t(r,i,s,n){return 0!==n&&Array.isArray(i)?i.map(i=>t(r,i,s,n-1)):r(i,void 0,s)}).bind(null,p(t)),i=t.ndimArray??0;return(t,s,n)=>{if(null==t)return t;t=r(t,n,i);let o=i,a=t;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(void 0!==a)for(let r=0;r<o;r++)t=[t];return t}}(t);if(1===r)return c(t);if("type"in t&&f(t.type)){let r=t.type.prototype?.itemType?.Type,i=c("function"==typeof r?{type:r}:{types:r});return(r,s,n)=>{let o=i(r,s,n);return o?new t.type(o):o}}return p(t)}function p(t){var r;return"type"in t?(r=t.type).prototype.read?(t,i,s)=>{if(null==t)return t;let n=typeof t;if("object"!==n)return void u.error(`Expected JSON value of type 'object' to deserialize type '${r.prototype.declaredClass}', but got '${n}'`);let o=new r;return o.read(t,s),o}:r.fromJSON:function(t){let r=null,i=t.errorContext??"type";return(s,n,l)=>{if(null==s)return s;let d=typeof s;if("object"!==d)return void u.error(`Expected JSON value of type 'object' to deserialize, but got '${d}'`);r||(r=function(t){let r={};for(let i in t.typeMap){let s=t.typeMap[i],n=(0,a.JT)(s.prototype);if("function"==typeof t.key)continue;let o=n.properties[t.key];if(!o)continue;o.json?.type&&Array.isArray(o.json.type)&&1===o.json.type.length&&"string"==typeof o.json.type[0]&&(r[o.json.type[0]]=s);let l=o.json?.write;if(!l||!l.writer){r[i]=s;continue}let u=l.target,d="string"==typeof u?u:t.key,h={};l.writer(i,h,d),h[d]&&(r[h[d]]=s)}return r}(t));let h=t.key;if("string"!=typeof h)return;let p=s[h],c=p?r[p]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!c){let t=`Type '${p||"unknown"}' is not supported`;return l&&l.messages&&s&&l.messages.push(new o.Z(`${i}:unsupported`,t,{definition:s,context:l})),void u.error(t)}let f=new c;return f.read(s,l),f}}(t.types)}function c(t){let r=p(t);return(t,i,s)=>{if(null==t)return t;if(Array.isArray(t)){let i=[];for(let n of t){let t=r(n,void 0,s);void 0!==t&&i.push(t)}return i}let n=r(t,void 0,s);return void 0!==n?[n]:void 0}}function f(t){if(!(0,l.u)(t))return!1;let r=t.prototype.itemType;return!(!r||!r.Type)&&("function"==typeof r.Type?y(r.Type):m(r.Type))}function y(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||f(t))}function m(t){for(let r in t.typeMap)if(!y(t.typeMap[r]))return!1;return!0}},97568:(t,r,i)=>{"use strict";function s(t){return!!t&&t.prototype&&t.prototype.declaredClass&&0===t.prototype.declaredClass.indexOf("esri.core.Collection")}i.d(r,{u:()=>s})},32802:(t,r,i)=>{"use strict";i.d(r,{U:()=>l,k:()=>p});var s=i(12790),n=i(66150),o=i(12619),a=i(97568);function l(t,r){var i,s;if(!r.write||r.write.writer||!1===r.write.enabled&&!r.write.overridePolicy)return;let n=t?.ndimArray??0;t&&(1===n||"type"in t&&(0,a.u)(t.type))?r.write.writer=c:n>1?r.write.writer=(t,r,i,s)=>{let a;if(null===t)a=null;else{a=function t(r,i,s){return 0!==s&&Array.isArray(r)?r.map(r=>t(r,i,s-1)):h(r,i)}(t,s,n);let r=n,i=a;for(;r>0&&Array.isArray(i);)r--,i=i[0];if(void 0!==i)for(let t=0;t<r;t++)a=[a]}(0,o.RB)(i,a,r)}:r.types?Array.isArray(r.types)?r.write.writer=(i=r.types[0],(t,r,s,n)=>t&&Array.isArray(t)?d(t.filter(t=>u(t,i,n)),r,s,n):d(t,r,s,n)):r.write.writer=(s=r.types,(t,r,i,n)=>t?u(t,s,n)?d(t,r,i,n):void 0:d(t,r,i,n)):r.write.writer=d}function u(t,r,i){for(let i in r.typeMap)if(t instanceof r.typeMap[i])return!0;if(i?.messages){let o=r.errorContext??"type",a=`Values of type '${("function"!=typeof r.key?t[r.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new s.Z(`${o}:unsupported`,a,{definition:t,context:i})),n.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(a)}return!1}function d(t,r,i,s){(0,o.RB)(i,h(t,s),r)}function h(t,r){return t&&"function"==typeof t.write?t.write({},r):t&&"function"==typeof t.toJSON?t.toJSON():"number"==typeof t?p(t):t}function p(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function c(t,r,i,s){let n;null===t?n=null:t&&"function"==typeof t.map?"function"==typeof(n=t.map(t=>h(t,s))).toArray&&(n=n.toArray()):n=[h(t,s)],(0,o.RB)(i,n,r)}},91746:(t,r,i)=>{"use strict";i.d(r,{$z:()=>o,Gg:()=>l,U2:()=>a});var s=i(65233);function n(t,r){let i="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=r.getItemAt||Array.isArray(r)){let t=parseInt(i,10);if(!isNaN(t))return Array.isArray(r)?r[t]:r.getItemAt(t)}let n=(0,s.vw)(r);return(0,s.b6)(n,i)?n.get(i):r[i]}function o(t,r,i=0){return"string"!=typeof r||r.includes(".")?function t(r,i,s){if(null==r)return r;let o=n(i[s],r);return!o&&s<i.length-1?void 0:s===i.length-1?o:t(o,i,s+1)}(t,(0,s.NI)(r),i):n(r,t)}function a(t,r){return o(t,r)}function l(t,r){return void 0!==o(r,t)}},80107:(t,r,i)=>{"use strict";var s,n;i.d(r,{F:()=>s}),(n=s||(s={}))[n.INITIALIZING=0]="INITIALIZING",n[n.CONSTRUCTING=1]="CONSTRUCTING",n[n.CONSTRUCTED=2]="CONSTRUCTED"},9096:(t,r,i)=>{"use strict";i.d(r,{JT:()=>l,VZ:()=>u,tz:()=>d});var s=i(59118),n=i(82639),o=i(65233);class a{constructor(t){this.autoDestroy=!1,this.properties=t}}function l(t){let r=t.constructor.__accessorMetadata__,i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(r){if(!i){let i=Object.create(r.properties),n=r.autoDestroy;for(let t in i)i[t]=(0,s.d9)(i[t]);(r=new a(i)).autoDestroy=n,Object.defineProperty(t.constructor,"__accessorMetadata__",{value:r,enumerable:!1,configurable:!0,writable:!0})}}else r=new a({}),Object.defineProperty(t.constructor,"__accessorMetadata__",{value:r,enumerable:!1,configurable:!0,writable:!0});return(0,n.j0)(t.constructor.__accessorMetadata__)}function u(t,r){let i=l(t).properties,s=i[r];return s||(s=i[r]={}),s}function d(t,r){return(0,o.TS)(t,r,p)}let h=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function p(t){return h.test(t)?"replace":"merge"}},9334:(t,r,i)=>{"use strict";i.d(r,{$:()=>u,i:()=>l});var s=i(91746),n=i(65233),o=i(4262);let a={origin:"service"};function l(t,r,i=a){if(!r||"object"!=typeof r)return;let l=(0,n.vw)(t),u=l.metadatas,d={};for(let t of Object.getOwnPropertyNames(r))!function(t,r,i,n,a){var l;let u=(0,o.HS)(r[i],a);for(let d of((l=u)&&(!l.read||!1!==l.read.enabled&&!l.read.source)&&(t[i]=!0),Object.getOwnPropertyNames(r)))(function(t,r,i){if(!t||!t.read||!1===t.read.enabled||!t.read.source)return!1;let n=t.read.source;if("string"==typeof n){if(n===r||n.includes(".")&&0===n.indexOf(r)&&(0,s.Gg)(n,i))return!0}else for(let t of n)if(t===r||t.includes(".")&&0===t.indexOf(r)&&(0,s.Gg)(t,i))return!0;return!1})(u=(0,o.HS)(r[d],a),i,n)&&(t[d]=!0)}(d,u,t,r,i);for(let n of(l.setDefaultOrigin(i.origin),Object.getOwnPropertyNames(d))){let a;let d=(0,o.HS)(u[n],i).read,h=d&&d.source;a=h&&"string"==typeof h?(0,s.$z)(r,h):r[n],d&&d.reader&&(a=d.reader.call(t,a,r,i)),void 0!==a&&l.set(n,a)}if(!i||!i.ignoreDefaults)for(let r of(l.setDefaultOrigin("defaults"),Object.getOwnPropertyNames(u)))d[r]||function(t,r,i,s){let n=i.metadatas,a=(0,o.hk)(n[r],"any",s),l=a&&a.default;if(void 0===l)return;let u="function"==typeof l?l.call(t,r,s):l;void 0!==u&&i.set(r,u)}(t,r,l,i);l.setDefaultOrigin("user")}function u(t,r,i,s=a){let n={...s,messages:[]};i(n),n.messages?.forEach(r=>{"warning"!==r.type||t.loaded?s&&s.messages&&s.messages.push(r):t.loadWarnings.push(r)})}},96956:(t,r,i)=>{"use strict";i.d(r,{t:()=>function t(r,i,a){if(r&&i){if("object"==typeof i)for(let s of Object.getOwnPropertyNames(i))t(r,s,i[s]);else{if(i.includes(".")){let s=i.split("."),n=s.splice(s.length-1,1)[0];return void t((0,o.U2)(r,s),n,a)}let l=r.__accessor__;null!=l&&function(t,r){if((0,n.Z)("esri-unknown-property-errors")&&null==r.metadatas[t])throw new s.Z("set:unknown-property","setting unknown property '"+t+"' on instance of "+r.host.declaredClass)}(i,l),r[i]=a}}}});var s=i(12790),n=i(96082),o=(i(66150),i(91746))},11918:(t,r,i)=>{"use strict";i.d(r,{GF:()=>v,LJ:()=>c,gb:()=>f,it:()=>d,mS:()=>_}),i(96082);var s=i(66150),n=i(65233),o=i(71499);let a={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},l=[],u=a;function d(t){u.onObservableAccessed(t)}let h=!1,p=!1;function c(t,r,i){if(h)return y(t,r,i);m(t);let s=r.call(i);return g(),s}function f(t,r){return c(a,t,r)}function y(t,r,i){let n=h;h=!0,m(t);let o=null;try{o=r.call(i)}catch(t){p&&s.Z.getLogger("esri.core.accessorSupport.tracking").error(t)}return g(),h=n,o}function m(t){u=t,l.push(t)}function g(){let t=l.length;if(t>1){let r=l.pop();u=l[t-2],r.onTrackingEnd()}else if(1===t){let t=l.pop();u=a,t.onTrackingEnd()}else u=a}function _(t,r){if(r.flags&o.v.DepTrackingInitialized)return;let i=p;p=!1,r.flags&o.v.AutoTracked?y(r,r.metadata.get,t):v(t,r),p=i}let b=[];function v(t,r){r.flags&o.v.ExplicitlyTracking||(r.flags|=o.v.ExplicitlyTracking,y(r,()=>{for(let i of r.metadata.dependsOn||b)if("string"!=typeof i||i.includes(".")){let r=(0,n.NI)(i);for(let i=0,s=t;i<r.length&&null!=s&&"object"==typeof s;++i)s=w(s,r[i],i!==r.length-1)}else w(t,i,!1)}),r.flags&=~o.v.ExplicitlyTracking)}function w(t,r,i){let s="?"===r[r.length-1]?r.slice(0,-1):r;if(null!=t.getItemAt||Array.isArray(t)){let r=parseInt(s,10);if(!isNaN(r))return Array.isArray(t)?t[r]:t.getItemAt(r)}let o=n.vw(t)?.properties.get(s);return o&&(d(o),_(t,o)),i?t[s]:void 0}},71499:(t,r,i)=>{"use strict";var s,n;i.d(r,{v:()=>s}),(n=s||(s={}))[n.Dirty=1]="Dirty",n[n.Overriden=2]="Overriden",n[n.Computing=4]="Computing",n[n.NonNullable=8]="NonNullable",n[n.HasDefaultValue=16]="HasDefaultValue",n[n.DepTrackingInitialized=32]="DepTrackingInitialized",n[n.AutoTracked=64]="AutoTracked",n[n.ExplicitlyTracking=128]="ExplicitlyTracking"},85224:(t,r,i)=>{"use strict";i.d(r,{f:()=>o});var s=i(11918),n=i(20209);class o{constructor(t){this._observable=new n.s,this._value=t}get(){return(0,s.it)(this._observable),this._value}set(t){t!==this._value&&(this._value=t,this._observable.notify())}}},61943:(t,r,i)=>{"use strict";i.d(r,{X:()=>n});var s=i(99950);class n{constructor(t,r){this._observers=t,this._observer=r}remove(){(0,s.Od)(this._observers,this._observer)}}},20209:(t,r,i)=>{"use strict";i.d(r,{s:()=>n});var s=i(61943);class n{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new s.X(this._observers,t)}notify(){let t=this._observers.slice();for(let r=0;r<t.length;++r){let i=t[r];i.onInvalidated(),i.onCommitted()}}}},62783:(t,r,i)=>{"use strict";i.d(r,{M:()=>s});class s{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){let t=this._invalidCount;if(1===t)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){let t=this._handles,r=this._accessed;for(let i=0;i<r.length;++i)t.push(r[i].observe(this));r.length=0}clear(){let t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}},52256:(t,r,i)=>{"use strict";i.d(r,{EH:()=>d,U5:()=>l,Xz:()=>u});var s=i(11918),n=i(62783);let o=!1,a=[];function l(t,r){let i=new n.M(function n(){if(!i||l)return;if(o)return void h(n);let u=a;i.clear(),o=!0,l=!0,a=(0,s.LJ)(i,t),l=!1,o=!1,r(a,u),p()}),a=null,l=!1;return l=!0,a=(0,s.LJ)(i,t),l=!1,{remove:function(){i&&(i.destroy(),i=null,a=null)}}}function u(t,r){let i=new n.M(function(){r(o,a)}),o=null;function a(){return i?(i.clear(),o=(0,s.LJ)(i,t)):null}return a(),{remove:function(){i&&(i.destroy(),i=null),o=null}}}function d(t){let r=new n.M(function n(){r&&!i&&(o?h(n):(r.clear(),o=!0,i=!0,(0,s.LJ)(r,t),i=!1,o=!1,p()))}),i=!1;return i=!0,(0,s.LJ)(r,t),i=!1,{remove:function(){r&&(r.destroy(),r=null)}}}function h(t){a.includes(t)||a.unshift(t)}function p(){for(;a.length;)a.pop()()}},65233:(t,r,i)=>{"use strict";i.d(r,{IH:()=>c,NI:()=>d,Qc:()=>p,TS:()=>u,b6:()=>l,vw:()=>a});var s=i(31015),n=i(59118),o=i(82639);function a(t){return t?t.__accessor__?t.__accessor__:t.propertyInvalidated?t:null:null}function l(t,r){return null!=t&&t.metadatas&&null!=t.metadatas[r]}function u(t,r,i){return function t(r,i,s){return i?Object.keys(i).reduce((r,a)=>{let l=null,u="merge";if(s&&(l=s.path?`${s.path}.${a}`:a,u=s.policy(l)),"replace"===u)return r[a]=i[a],r;if(void 0===r[a])return r[a]=(0,n.d9)(i[a]),r;let d=r[a],h=i[a];if(d===h)return r;if(Array.isArray(h)||Array.isArray(r))d=d?Array.isArray(d)?r[a]=d.concat():r[a]=[d]:r[a]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(t=>{d.includes(t)||d.push(t)}));else if(h&&"object"==typeof h){if(s){let i=s.path;s.path=(0,o.j0)(l),r[a]=t(d,h,s),s.path=i}else r[a]=t(d,h,null)}else r.hasOwnProperty(a)&&!i.hasOwnProperty(a)||(r[a]=h);return r},r||{}):r}(t,r,i?{policy:i,path:""}:null)}function d(t){return Array.isArray(t)?t:t.split(".")}function h(t){return t.includes(",")?t.split(",").map(t=>t.trim()):[t.trim()]}function p(t,r,i,n){let o=function(t){if(Array.isArray(t)){let r=[];for(let i of t)r.push(...h(i));return r}return h(t)}(r);if(1!==o.length){let r=o.map(r=>n(t,r,i));return(0,s.AL)(r)}return n(t,o[0],i)}function c(t){let r=!1;return()=>{r||(r=!0,t())}}},42169:(t,r,i)=>{"use strict";let s;i.d(r,{Fs:()=>C,NC:()=>M,BT:()=>b,YP:()=>S,aQ:()=>x});var n,o,a=i(14963),l=i(59118),u=i(50719),d=i(57446),h=i(44042),p=i(91746),c=i(52256),f=i(65233);(o=n||(n={}))[o.Untracked=0]="Untracked",o[o.Tracked=1]="Tracked";class y{constructor(){this.uid=(0,h.D)(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,s,o){return this.pool.acquire(n.Untracked,t,r,i,s,o,l.fS)}static acquireTracked(t,r,i,s){return this.pool.acquire(n.Tracked,t,r,i,null,null,s)}notify(t,r){this.type===n.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r)}acquire(t,r,i,s,n,o,a){this.uid=(0,h.D)(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=(0,h.D)(),this.removed=!0}}y.pool=new u.e(y);let m=new a.Z,g=new Set;function _(t){g.delete(t),g.add(t),s||(s=(0,d.Os)(v))}function b(t){for(let r of g.values())r.target===t&&(r.removed=!0)}function v(){let t=10;for(;s&&t--;){s=null;let t=function(){let t=m.acquire();t.length=g.size;let r=0;for(let i of g)t[r]=i,++r;return g.clear(),t}(),r=m.acquire();for(let i of t){let t=i.uid;(function(t){if(t.removed)return;let r=t.oldValue,i=t.getValue();t.equals(r,i)||(t.oldValue=i,t.notify(i,r))})(i),t===i.uid&&i.removed&&r.push(i)}for(let t of g)t.removed&&(r.push(t),g.delete(t));for(let t of r)y.pool.release(t);m.release(r),m.release(t),w.forEach(t=>t())}}let w=new Set;function C(t){return w.add(t),{remove(){w.delete(t)}}}function S(t,r,i,s=!1){let n;return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:s?function(t,r,i){let s=(0,f.Qc)(t,r,i,(t,r,i)=>{let n=!1;return(0,c.U5)(()=>(0,p.$z)(t,r),(o,a)=>{t.__accessor__.destroyed?s.remove():n||(n=!0,(0,l.fS)(a,o)||i.call(t,o,a,r,t),n=!1)})});return s}(t,r,i):n=(0,f.Qc)(t,r,i,(t,r,i)=>{let s,o,a=(0,c.Xz)(()=>(0,p.$z)(t,r),(a,l)=>{t.__accessor__.destroyed||s&&s.uid!==o?n.remove():(s||(o=(s=y.acquireUntracked(a,i,l,t,r)).uid),_(s))});return{remove:(0,f.IH)(()=>{a.remove(),s&&(s.uid!==o||s.removed||(s.removed=!0,_(s)),s=null),n=a=null})}})}function x(t,r,i=!1,s=l.y7){let n,o,a,u;return i?(n=!1,(0,c.U5)(t,(t,i)=>{n||(n=!0,s(i,t)||r(t,i),n=!1)})):(u=(0,c.Xz)(t,(t,i)=>{o&&o.uid!==a?u.remove():(o||(a=(o=y.acquireTracked(t,r,i,s)).uid),_(o))}),{remove:(0,f.IH)(()=>{u.remove(),o&&(o.uid!==a||o.removed||(o.removed=!0,_(o)),o=null),u=null})})}function M(t){return function(r,i){for(let i of r.entries())if(i[0].oldValue===t)return!0;return!1}(g)}},72758:(t,r,i)=>{"use strict";i.d(r,{c:()=>p,d:()=>h});var s=i(99950),n=i(12790),o=i(66150),a=i(43319),l=i(65233),u=i(4262);function d(t,r,i,l,u,d){if(!l||!l.write)return!1;let h=t.get(i);if(!u&&l.write.overridePolicy){let r=l.write.overridePolicy.call(t,h,i,d);void 0!==r&&(u=r)}if(u||(u=l.write),!u||!1===u.enabled)return!1;if((null===h&&!u.allowNull&&!u.writerEnsuresNonNull||void 0===h)&&u.isRequired){let r=new n.Z("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return r&&d&&d.messages?d.messages.push(r):r&&!d&&o.Z.getLogger("esri.core.accessorSupport.write").error(r.name,r.message),!1}return!(void 0===h||null===h&&!u.allowNull&&!u.writerEnsuresNonNull||(!r.store.multipleOriginsSupported||r.store.originOf(i)===a.s3.DEFAULTS)&&function(t,r,i,n,o){let a=n.default;if(void 0===a)return!1;if(null!=n.defaultEquals)return n.defaultEquals(o);if("function"==typeof a){if(Array.isArray(o)){let n=a.call(t,r,i);return(0,s.fS)(n,o)}return!1}return a===o}(t,i,d,l,h)||!u.ignoreOrigin&&d&&d.origin&&r.store.multipleOriginsSupported&&r.store.originOf(i)<(0,a.M9)(d.origin))}function h(t,r,i,s){let n=(0,l.vw)(t),o=n.metadatas,a=(0,u.Ah)(o[r],s);return!!a&&d(t,n,r,a,i,s)}function p(t,r,i){if(t&&"function"==typeof t.toJSON&&(!t.toJSON.isDefaultToJSON||!t.write))return(0,l.TS)(r,t.toJSON(i));let s=(0,l.vw)(t),n=s.metadatas;for(let o in n){let h=(0,u.Ah)(n[o],i);if(!d(t,s,o,h,void 0,i))continue;let p=t.get(o),c=function(t,r,i,s,n){let o={};return r.write?.writer?.call(t,s,o,i,n),o}(t,h,h.write&&"string"==typeof h.write.target?h.write.target:o,p,i);Object.keys(c).length>0&&(r=(0,l.TS)(r,c),i?.resources?.pendingOperations?.length&&Promise.all(i.resources.pendingOperations).then(()=>(0,l.TS)(r,c)),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:o,oldOrigin:(0,a.Wm)(s.store.originOf(o)),newOrigin:i.origin}))}return r}},99950:(t,r,i)=>{"use strict";i.d(r,{FY:()=>b,Od:()=>v,SO:()=>f,Tw:()=>o,Vx:()=>l,a9:()=>p,cq:()=>m,e$:()=>g,e5:()=>u,fS:()=>a,w6:()=>c,zG:()=>d});var s=i(82639),n=i(55243);function o(t,r){return r?t.filter((t,i,s)=>s.findIndex(r.bind(null,t))===i):t.filter((t,r,i)=>i.indexOf(t)===r)}function a(t,r,i){if((0,s.Wi)(t)&&(0,s.Wi)(r))return!0;if((0,s.Wi)(t)||(0,s.Wi)(r)||t.length!==r.length)return!1;if(i){for(let s=0;s<t.length;s++)if(!i(t[s],r[s]))return!1}else for(let i=0;i<t.length;i++)if(t[i]!==r[i])return!1;return!0}function l(t,r){let i=t.length!==r.length;i&&(t.length=r.length);for(let s=0;s<r.length;++s)t[s]!==r[s]&&(t[s]=r[s],i=!0);return i}function u(t,r,i){let s,n;return i?(s=r.filter(r=>!t.some(t=>i(t,r))),n=t.filter(t=>!r.some(r=>i(r,t)))):(s=r.filter(r=>!t.includes(r)),n=t.filter(t=>!r.includes(t))),{added:s,removed:n}}function d(t){return t&&"number"==typeof t.length}let h=!!Array.prototype.fill;function p(t,r){if(h)return Array(t).fill(r);let i=Array(t);for(let s=0;s<t;s++)i[s]=r;return i}function c(t,r){void 0===r&&(r=t,t=0);let i=Array(r-t);for(let s=t;s<r;s++)i[s-t]=s;return i}class f{constructor(){this.last=0}}let y=new f;function m(t,r,i,s){let n=Math.max(0,(s=s||y).last-10);for(let o=n;o<i;++o)if(t[o]===r)return s.last=o,o;let o=Math.min(n,i);for(let i=0;i<o;++i)if(t[i]===r)return s.last=i,i;return -1}function g(t,r,i,s){let n=i??t.length,o=m(t,r,n,s);if(-1!==o)return t[o]=t[n-1],null==i&&t.pop(),r}let _=new Set;function b(t,r,i=t.length,s=r.length,n,o){if(0===s||0===i)return i;_.clear();for(let t=0;t<s;++t)_.add(r[t]);let a=Math.max(0,(n=n||y).last-10);for(let r=a;r<i;++r)if(_.has(t[r])&&(o&&o.push(t[r]),_.delete(t[r]),t[r]=t[i-1],--i,--r,0===_.size||0===i))return _.clear(),i;for(let r=0;r<a&&(!_.has(t[r])||(o&&o.push(t[r]),_.delete(t[r]),t[r]=t[i-1],--i,--r,0!==_.size&&0!==i));++r);return _.clear(),i}function v(t,r){let i=t.indexOf(r);return -1!==i?(t.splice(i,1),r):null}new n.Z},95894:(t,r,i)=>{"use strict";i.d(r,{Ed:()=>d,UI:()=>h,mt:()=>y,q6:()=>f,vr:()=>m});var s=i(24765),n=i(53306),o=i(82639),a=i(66138),l=i(53919),u=(i(99950),i(21314),i(30407));function d(t,r,i){return(0,a.as)(t.map((t,s)=>r.apply(i,[t,s])))}async function h(t,r,i){return(await (0,a.as)(t.map((t,s)=>r.apply(i,[t,s])))).map(t=>t.value)}function p(t){return{ok:!0,value:t}}function c(t){return{ok:!1,error:t}}async function f(t){if((0,o.Wi)(t))return{ok:!1,error:Error("no promise provided")};try{return p(await t)}catch(t){return c(t)}}async function y(t){try{return p(await t)}catch(t){return(0,a.r9)(t),c(t)}}function m(t,r){return new g(t,r)}let g=class extends n.Z{constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=(0,o.IM)(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;let{signal:i}=this._abortController;this.promise=t(i),this.promise.then(t=>{this._result=p(t),this._cleanup()},t=>{this._result=c(t),this._cleanup()}),this._abortHandle=(0,a.fu)(r,this.abort)}get value(){var t;return t=this._result,(0,o.pC)(t)&&!0===t.ok?t.value:null}get error(){var t;return t=this._result,(0,o.pC)(t)&&!1===t.ok?t.error:null}get finished(){return(0,o.pC)(this._result)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=(0,o.hw)(this._abortHandle),this._abortController=null}};(0,s._)([(0,l.Cb)()],g.prototype,"value",null),(0,s._)([(0,l.Cb)()],g.prototype,"error",null),(0,s._)([(0,l.Cb)()],g.prototype,"finished",null),(0,s._)([(0,l.Cb)()],g.prototype,"promise",void 0),(0,s._)([(0,l.Cb)()],g.prototype,"_result",void 0),g=(0,s._)([(0,u.j)("esri.core.asyncUtils.ReactiveTask")],g)},8451:(t,r,i)=>{"use strict";var s,n;function o(t){return 32+t.length}function a(t){if(!t)return 0;let r=h;for(let i in t)if(t.hasOwnProperty(i)){let s=t[i];switch(typeof s){case"string":r+=o(s);break;case"number":r+=16;break;case"boolean":r+=4}}return r}function l(t){if(!t)return 0;if(Array.isArray(t))return function(t){let r=t.length;if(0===r||"number"==typeof t[0])return 32+8*r;let i=p;for(let s=0;s<r;s++)i+=u(t[s]);return i}(t);let r=h;for(let i in t)t.hasOwnProperty(i)&&(r+=u(t[i]));return r}function u(t){switch(typeof t){case"object":return l(t);case"string":return o(t);case"number":return 16;case"boolean":return 4;default:return 8}}function d(t,r){return p+t.length*r}i.d(r,{Ul:()=>l,Y8:()=>s,do:()=>d,f2:()=>a});let h=32,p=32;(n=s||(s={}))[n.KILOBYTES=1024]="KILOBYTES",n[n.MEGABYTES=1048576]="MEGABYTES",n[n.GIGABYTES=1073741824]="GIGABYTES"},67220:(t,r,i)=>{"use strict";var s;i.d(r,{m:()=>n});let n=(s=globalThis,{setTimeout:(t,r)=>{let i=s.setTimeout(t,r);return{remove:()=>s.clearTimeout(i)}}})},58493:(t,r,i)=>{"use strict";i.d(r,{R:()=>o,Z:()=>n});var s=i(51084);function n(t,r,i=s.Z){return r||(r=new i),r===t||(r.removeAll(),t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))?r.addMany(t):t&&r.add(t)),r}function o(t){return t}},36164:(t,r,i)=>{"use strict";function s(t){return"h"in t&&"s"in t&&"v"in t}function n(t){return"l"in t&&"a"in t&&"b"in t}function o(t){return"l"in t&&"c"in t&&"h"in t}i.d(r,{Y3:()=>m,_Y:()=>y,sJ:()=>g,xr:()=>f});let a=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(t,r){let i,s;let n=[];if(t[0].length!==r.length)throw"dimensions do not match";let o=t.length,a=t[0].length,l=0;for(i=0;i<o;i++){for(l=0,s=0;s<a;s++)l+=t[i][s]*r[s];n.push(l)}return n}function d(t){let r=u(a,[t.r/255,t.g/255,t.b/255].map(t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4));return{x:100*r[0],y:100*r[1],z:100*r[2]}}function h(t){let r=u(l,[t.x/100,t.y/100,t.z/100]).map(t=>Math.min(1,Math.max(t<=.0031308?12.92*t:1.055*t**(1/2.4)-.055,0)));return{r:Math.round(255*r[0]),g:Math.round(255*r[1]),b:Math.round(255*r[2])}}function p(t){let r=[t.x/95.047,t.y/100,t.z/108.883].map(t=>t>(6/29)**3?t**(1/3):1/3*(29/6)**2*t+4/29);return{l:116*r[1]-16,a:500*(r[0]-r[1]),b:200*(r[1]-r[2])}}function c(t){let r=t.l,i=[(r+16)/116+t.a/500,(r+16)/116,(r+16)/116-t.b/200].map(t=>t>6/29?t**3:3*(6/29)**2*(t-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function f(t){return"r"in t&&"g"in t&&"b"in t?t:o(t)?h(c(function(t){let r=t.l,i=t.c,s=t.h;return{l:r,a:i*Math.cos(s),b:i*Math.sin(s)}}(t))):n(t)?h(c(t)):"x"in t&&"y"in t&&"z"in t?h(t):s(t)?function(t){let r;let i=(t.h+360)%360/60,s=t.s/100,n=t.v/100*255,o=n*s,a=o*(1-Math.abs(i%2-1));switch(Math.floor(i)){case 0:r={r:o,g:a,b:0};break;case 1:r={r:a,g:o,b:0};break;case 2:r={r:0,g:o,b:a};break;case 3:r={r:0,g:a,b:o};break;case 4:r={r:a,g:0,b:o};break;case 5:case 6:r={r:o,g:0,b:a};break;default:r={r:0,g:0,b:0}}return r.r=Math.round(r.r+n-o),r.g=Math.round(r.g+n-o),r.b=Math.round(r.b+n-o),r}(t):t}function y(t){return s(t)?t:function(t){let r=t.r,i=t.g,s=t.b,n=Math.max(r,i,s),o=n-Math.min(r,i,s),a=n,l=0===o?0:n===r?(i-s)/o%6:n===i?(s-r)/o+2:(r-i)/o+4,u=0===o?0:o/a;return l<0&&(l+=6),{h:l*=60,s:u*=100,v:a*=100/255}}(f(t))}function m(t){return n(t)?t:p(d(f(t)))}function g(t){return o(t)?t:function(t){let r=t.l,i=t.a,s=t.b,n=Math.atan2(s,i);return{l:r,c:Math.sqrt(i*i+s*s),h:n=n>0?n:n+2*Math.PI}}(p(d(f(t))))}},1833:(t,r,i)=>{"use strict";function s(t){}function n(t){return()=>t}i.d(r,{Bg:()=>s,sM:()=>n}),i(96082)},8393:(t,r,i)=>{"use strict";i.d(r,{Mr:()=>o,x9:()=>a});var s=i(96082);let n=new Set;function o(t,r,i={}){if((0,s.Z)("esri-deprecation-warnings")){let{moduleName:s}=i;a(t,"Property: "+(s?s+"::":"")+r,i)}}function a(t,r,i={}){if((0,s.Z)("esri-deprecation-warnings")){let{replacement:s,version:o,see:a,warnOnce:l}=i,u=r;s&&(u+=`
	 Replacement: ${s}`),o&&(u+=`
	 Version: ${o}`),a&&(u+=`
	 See ${a} for more details.`),function(t,r,i=!1){i&&n.has(r)||(i&&n.add(r),t.warn(` DEPRECATED - ${r}`))}(t,u,l)}}},19016:(t,r,i)=>{"use strict";function s(t){return"string"==typeof t?document.getElementById(t):t??null}function n(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function o(t,r){let i=r.parentNode;i&&i.insertBefore(t,r)}function a(t,r){for(;;){let i=t.firstChild;if(!i)break;r.appendChild(i)}}i.d(r,{L7:()=>s,Vt:()=>o,YD:()=>a,cS:()=>n}),(()=>{if("function"==typeof Element.prototype.closest)return(t,r)=>t.closest(r);Element.prototype.matches||Element.prototype.msMatchesSelector})()},47845:(t,r,i)=>{"use strict";function s(t){return t&&("function"==typeof t.on||"function"==typeof t.addEventListener)}function n(t,r,i){if(!s(t))throw TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(r,i);if(Array.isArray(r)){let s=r.slice();for(let r of s)t.addEventListener(r,i);return{remove(){for(let r of s)t.removeEventListener(r,i)}}}return t.addEventListener(r,i),{remove(){t.removeEventListener(r,i)}}}function o(t,r,i){if(!s(t))throw TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(r,i);let o=n(t,r,r=>{o.remove(),i.call(t,r)});return{remove(){o.remove()}}}i.d(r,{IH:()=>o,kK:()=>l,on:()=>n,vT:()=>s});let a={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function l({key:t}){return a[t]||t}},31015:(t,r,i)=>{"use strict";i.d(r,{AL:()=>n,kB:()=>o});var s=i(82639);function n(t){return o(()=>t.forEach(t=>(0,s.pC)(t)&&t.remove()))}function o(t){return{remove:()=>{t&&(t(),t=void 0)}}}},96082:(t,r,i)=>{"use strict";let s;function n(t){return"function"==typeof s[t]?s[t]=s[t](globalThis):s[t]}i.d(r,{Z:()=>n}),s=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},n.add=(t,r,i,o)=>((o||void 0===s[t])&&(s[t]=r),i&&n(t)),n.cache=s,n.add("esri-deprecation-warnings",!0),(()=>{n.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);let t="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(n.add("host-browser",t),n.add("host-node","object"==typeof globalThis.process&&globalThis.process.versions?.node&&globalThis.process.versions.v8),n.add("dom",t),n("host-browser")){let t=navigator,r=t.userAgent,i=t.appVersion,s=parseFloat(i);if(n.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),n.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),n.add("khtml",i.includes("Konqueror")?s:void 0),n.add("edge",parseFloat(r.split("Edge/")[1])||void 0),n.add("opr",parseFloat(r.split("OPR/")[1])||void 0),n.add("webkit",!n("wp")&&!n("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),n.add("chrome",!n("edge")&&!n("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),n.add("android",!n("wp")&&parseFloat(r.split("Android ")[1])||void 0),n.add("safari",!i.includes("Safari")||n("wp")||n("chrome")||n("android")||n("edge")||n("opr")?void 0:parseFloat(i.split("Version/")[1])),n.add("mac",i.includes("Macintosh")),!n("wp")&&r.match(/(iPhone|iPod|iPad)/)){let t=RegExp.$1.replace(/P/,"p"),i=parseFloat((r.match(/OS ([\d_]+)/)?RegExp.$1:"1").replace(/_/,".").replace(/_/g,""));n.add(t,i),n.add("ios",i)}n.add("trident",parseFloat(i.split("Trident/")[1])||void 0),n("webkit")||(!r.includes("Gecko")||n("wp")||n("khtml")||n("trident")||n("edge")||n.add("mozilla",s),n("mozilla")&&n.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){let t=navigator.userAgent,r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);r&&n.add("esri-mobile",r),i&&n.add("esri-iPhone",i),n.add("esri-geolocation",!!navigator.geolocation)}n.add("esri-canvas-svg-support",!n("trident")),n.add("esri-wasm","WebAssembly"in globalThis),n.add("esri-shared-array-buffer",()=>{let t=!1===globalThis.crossOriginIsolated;return"SharedArrayBuffer"in globalThis&&!t}),n.add("wasm-simd",()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))),n.add("esri-atomics","Atomics"in globalThis),n.add("esri-workers","Worker"in globalThis),n.add("web-feat:cache","caches"in globalThis),n.add("esri-workers-arraybuffer-transfer",!n("safari")||Number(n("safari"))>=12),n.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),n.add("featurelayer-simplify-payload-size-factors",[1,1,4]),n.add("featurelayer-snapshot-enabled",!0),n.add("featurelayer-snapshot-point-min-threshold",8e4),n.add("featurelayer-snapshot-point-max-threshold",4e5),n.add("featurelayer-snapshot-point-coverage",.1),n.add("featurelayer-advanced-symbols",!1),n.add("featurelayer-pbf",!0),n.add("featurelayer-pbf-statistics",!1),n.add("feature-layers-workers",!0),n.add("feature-polyline-generalization-factor",1),n.add("mapview-transitions-duration",200),n.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),n.add("mapserver-pbf-enabled",!1),n.add("mapimagelayer-popup-identify-max-tolerance",20),n.add("heatmap-allow-raster-fallback",!0),n.add("heatmap-force-raster",!1),n("host-webworker")||n("host-browser")&&(n.add("esri-csp-restrictions",()=>{try{Function()}catch{return!0}return!1}),n.add("esri-image-decode",()=>{if("decode"in new Image){let t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{n.add("esri-image-decode",!0,!0,!0)}).catch(()=>{n.add("esri-image-decode",!1,!0,!0)})}return!1}),n.add("esri-url-encodes-apostrophe",()=>{let t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})()},20341:(t,r,i)=>{"use strict";function s(t){let r=[];return function*(){for(let i of(yield*r,t))r.push(i),yield i}}function n(t,r){for(let i of t)if(null!=i&&r(i))return i}function o(t){return null!=t&&"function"==typeof t[Symbol.iterator]}i.d(r,{Fs:()=>s,TW:()=>o,sE:()=>n})},84576:(t,r,i)=>{"use strict";i.d(r,{X:()=>n,w:()=>o});var s=i(12619);class n{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=t=>this.fromJSON(t),this.write=(t,r,i)=>{let n=this.toJSON(t);void 0!==n&&(0,s.RB)(i,n,r)},this.write.isJSONMapWriter=!0}toJSON(t){if(this._apiToJSON.hasOwnProperty(t)){let r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}_invertMap(t){let r={};for(let i in t)r[t[i]]=i;return r}_getKeysSorted(t){let r=[];for(let i in t)r.push(i);return r.sort(),r}}function o(){return function(t,r){return new n(t,{ignoreUnknown:!0,...r})}}},59118:(t,r,i)=>{"use strict";i.d(r,{Vo:()=>function t(r){if(!r||"object"!=typeof r||"function"==typeof r||"HTMLElement"in globalThis&&r instanceof HTMLElement)return r;let i=p(r);if((0,n.pC)(i))return i;if(u(r)){let i=!0,s=r.map(r=>{let s=t(r);return null!=r&&null==s&&(i=!1),s});return i?s:null}if(l(r))return r.clone();if(!d(r)){let i=new(Object.getPrototypeOf(r)).constructor;for(let s of Object.getOwnPropertyNames(r)){let n=r[s],o=t(n);if(null!=n&&null==o)return null;i[s]=o}return i}return null},d9:()=>a,fS:()=>c,y7:()=>f,yd:()=>function t(r,i){let s;if(i)for(s in r)r.hasOwnProperty(s)&&(void 0===r[s]?delete r[s]:r[s]instanceof Object&&t(r[s],!0));else for(s in r)r.hasOwnProperty(s)&&void 0===r[s]&&delete r[s];return r}});var s=i(99950),n=i(82639),o=i(30217);function a(t){if(!t||"object"!=typeof t||"function"==typeof t)return t;let r=p(t);if((0,n.pC)(r))return r;if(l(t))return t.clone();if(u(t))return t.map(a);if(d(t))return t.clone();let i={};for(let r of Object.getOwnPropertyNames(t))i[r]=a(t[r]);return i}function l(t){return"function"==typeof t.clone}function u(t){return"function"==typeof t.map&&"function"==typeof t.forEach}function d(t){return"function"==typeof t.notifyChange&&"function"==typeof t.watch}function h(t){if("[object Object]"!==Object.prototype.toString.call(t))return!1;let r=Object.getPrototypeOf(t);return null===r||r===Object.prototype}function p(t){if((0,o.W0)(t)||(0,o.lq)(t)||(0,o.KZ)(t)||(0,o.z3)(t)||(0,o.Uc)(t)||(0,o.Hx)(t)||(0,o.ZY)(t)||(0,o.xZ)(t)||(0,o.fS)(t))return(0,o.tP)(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){let r=new Map;for(let[i,s]of t)r.set(i,a(s));return r}if(t instanceof Set){let r=new Set;for(let i of t)r.add(a(i));return r}return null}function c(t,r){return t===r||"number"==typeof t&&isNaN(t)&&"number"==typeof r&&isNaN(r)||"function"==typeof(t||{}).getTime&&"function"==typeof(r||{}).getTime&&t.getTime()===r.getTime()||!1}function f(t,r){return t===r||(null==t||"string"==typeof t?t===r:"number"==typeof t?t===r||"number"==typeof r&&isNaN(t)&&isNaN(r):t instanceof Date?r instanceof Date&&t.getTime()===r.getTime():Array.isArray(t)?Array.isArray(r)&&(0,s.fS)(t,r):t instanceof Set?r instanceof Set&&function(t,r){if(t.size!==r.size)return!1;for(let i of t)if(!r.has(i))return!1;return!0}(t,r):t instanceof Map?r instanceof Map&&function(t,r){if(t.size!==r.size)return!1;for(let[i,s]of t){let t=r.get(i);if(t!==s||void 0===t&&!r.has(i))return!1}return!0}(t,r):!!h(t)&&h(r)&&function(t,r){if(null===t||null===r)return!1;let i=Object.keys(t);if(null===r||Object.keys(r).length!==i.length)return!1;for(let s of i)if(t[s]!==r[s]||!Object.prototype.hasOwnProperty.call(r,s))return!1;return!0}(t,r))}},57197:(t,r,i)=>{"use strict";i.d(r,{G:()=>l,w:()=>u});var s=i(95894),n=i(51084),o=i(63878),a=i(82639);async function l(t,r){return await t.load(),u(t,r)}async function u(t,r){let i=[],l=(...t)=>{for(let r of t)(0,a.Wi)(r)||(Array.isArray(r)?l(...r):n.Z.isCollection(r)?r.forEach(t=>l(t)):o.Z.isLoadable(r)&&i.push(r))};r(l);let u=null;if(await (0,s.UI)(i,async t=>{!1!==(await (0,s.q6)("loadAll"in t&&"function"==typeof t.loadAll?t.loadAll():t.load())).ok||u||(u=t)}),u)throw u.loadError;return t}},5047:(t,r,i)=>{"use strict";i.d(r,{BV:()=>p,Kt:()=>f,Sf:()=>o,Vl:()=>h,ZF:()=>c,fp:()=>u,jE:()=>b,oK:()=>_,oc:()=>v,t7:()=>d,uZ:()=>a,wt:()=>l});var s=i(44834);i(39999);let n=new Float32Array(1);function o(t){--t;for(let r=1;r<32;r<<=1)t|=t>>r;return t+1}function a(t,r,i){return Math.min(Math.max(t,r),i)}function l(t){return 0==(t&t-1)}function u(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function d(t,r,i){return t+(r-t)*i}function h(t){return t*Math.PI/180}function p(t){return 180*t/Math.PI}function c(t){return Math.acos(a(t,-1,1))}function f(t){return Math.asin(a(t,-1,1))}function y(t,r,i=1e-6){return t===r||!(!Number.isFinite(t)||!Number.isFinite(r))&&(t>r?t-r:r-t)<=i}let m=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT)),g=BigInt("1000000");function _(t){var r;return r=Math.max(-w,Math.min(t,w)),n[0]=r,n[0]}function b(t,r){let i=(0,s.l)(t),n=f(t[2]/i),o=Math.atan2(t[1]/i,t[0]/i);return(0,s.s)(r,i,n,o),r}function v(t){let r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],s=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(y(r,1)&&y(i,1)&&y(s,1))}!function(t){var r,i;let s=(r=t=Math.abs(t),m.setFloat64(0,r),m.getBigInt64(0));i=s<=g?g:s-g,m.setBigInt64(0,i),m.getFloat64(0)}(1);let w=(n[0]=34028234663852886e22,n[0])},82639:(t,r,i)=>{"use strict";function s(t){return null!=t}function n(t){return null==t}function o(t,r){return s(t)?r(t):null}function a(t){return t}function l(t,r){return u(t,r),t}function u(t,r){if(n(t))throw Error(r??"value is None")}function d(t,r){return s(t)?t:"function"==typeof r?r():r}function h(t,r){return s(t)?t:r}function p(t){return s(t)&&t.destroy(),null}function c(t){return s(t)&&t.dispose(),null}function f(t){return s(t)&&t.remove(),null}function y(t){return s(t)&&t.abort(),null}function m(t){return s(t)&&t.release(),null}function g(t,r,i){return s(t)&&s(r)?s(i)?i(t,r):t.equals(r):t===r}function _(t){return null}function b(t,r){let i=[];for(let s of t)i.push(w(s,null,r));return i}function v(t,r){for(let i of t)o(i,r)}function w(t,r,i){return s(t)?i(t):r}function C(t){return t.filter(t=>s(t))}function S(t,...r){let i=t;for(let t=0;t<r.length&&i;++t)i=i[r[t]];return i}function x(t){return t}i.d(r,{Fd:()=>b,IM:()=>y,JR:()=>v,M2:()=>c,O3:()=>u,Pt:()=>d,R2:()=>w,RY:()=>m,SC:()=>p,U2:()=>S,Wg:()=>a,Wi:()=>n,_W:()=>g,hw:()=>f,j0:()=>x,lV:()=>C,pC:()=>s,s3:()=>l,wN:()=>_,yl:()=>h,yw:()=>o})},37407:(t,r,i)=>{"use strict";i.d(r,{Y:()=>n});let s=[];function n(t){s.push(t),1===s.length&&queueMicrotask(()=>{let t=s.slice();for(let r of(s.length=0,t))r()})}},12619:(t,r,i)=>{"use strict";i.d(r,{RB:()=>a,RH:()=>n,hS:()=>o});var s=i(59118);function n(t,r,i=!1){return function t(r,i,n){return i?Object.keys(i).reduce((r,o)=>{let a=r[o],l=i[o];return a===l||(void 0===a?r[o]=(0,s.d9)(l):Array.isArray(l)||Array.isArray(r)?(a=a?Array.isArray(a)?r[o]=a.concat():r[o]=[a]:r[o]=[],l&&(Array.isArray(l)||(l=[l]),n?l.forEach(t=>{a.includes(t)||a.push(t)}):r[o]=l.concat())):l&&"object"==typeof l?r[o]=t(a,l,n):r.hasOwnProperty(o)&&!i.hasOwnProperty(o)||(r[o]=l)),r},r||{}):r}(t,r,i)}function o(t,r){if(null!=r)return r[t]||l(t.split("."),!1,r)}function a(t,r,i){let s=t.split("."),n=s.pop(),o=l(s,!0,i);o&&n&&(o[n]=r)}function l(t,r,i){let s=i;for(let i of t){if(null==s)return;if(!(i in s)){if(!r)return;s[i]={}}s=s[i]}return s}},61812:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n,o=i(96082),a=i(35461);(n=s||(s={}))[n.varint=0]="varint",n[n.fixed64=1]="fixed64",n[n.delimited=2]="delimited",n[n.fixed32=5]="fixed32",n[n.unknown=99]="unknown";let l=new TextDecoder("utf-8"),u=(0,o.Z)("safari")||(0,o.Z)("ios")?6:(0,o.Z)("ff")?12:32;class d{constructor(t,r,i=0,n=t?t.byteLength:0){this._tag=0,this._dataType=s.unknown,this._init(t,r,i,n)}_init(t,r,i,s){this._data=t,this._dataView=r,this._pos=i,this._end=s}asUnsafe(){return this}clone(){return new d(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;let r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;let t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){let t=this.getUInt32();if(void 0!==t)return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){let t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){let t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+4294967296*t.getUint32(r+4,!0);return this._skip(8),i}getSFixed64(){let t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+4294967296*t.getInt32(r+4,!0);return this._skip(8),i}getDouble(){let t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){let t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){let t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){let t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){let t=this._getLength(),r=this._pos,i=this._toString(this._data,r,r+t);return this._skip(t),i}getBytes(){let t=this._getLength(),r=this._pos,i=this._toBytes(this._data,r,r+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,r,i,s){let n=this.getMessage(),o=t(n,r,i,s);return n.release(),o}processMessage(t){let r=this.getMessage(),i=t(r);return r.release(),i}getMessage(){let t=this._getLength(),r=d.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r}release(){d.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case s.varint:this._decodeVarint();break;case s.fixed64:this._skip(8);break;case s.delimited:this._skip(this._getLength());break;case s.fixed32:this._skip(4);break;default:throw Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){let t=this._data,r=this._pos,i=0,s=0;if(this._end-r>=10)do{if(i|=127&(s=t[r++]),0==(128&s)||(i|=(127&(s=t[r++]))<<7,0==(128&s))||(i|=(127&(s=t[r++]))<<14,0==(128&s))||(i|=(127&(s=t[r++]))<<21,0==(128&s))||(i+=268435456*(127&(s=t[r++])),0==(128&s))||(i+=34359738368*(127&(s=t[r++])),0==(128&s))||(i+=4398046511104*(127&(s=t[r++])),0==(128&s))||(i+=562949953421312*(127&(s=t[r++])),0==(128&s))||(i+=72057594037927940*(127&(s=t[r++])),0==(128&s))||(i+=0x7fffffffffffffff*(127&(s=t[r++])),0==(128&s)))break;throw Error("Varint too long!")}while(0);else{let n=1;for(;r!==this._end&&0!=(128&(s=t[r]));)++r,i+=(127&s)*n,n*=128;if(r===this._end)throw Error("Varint overrun!");++r,i+=s*n}return this._pos=r,i}_decodeSVarint(){let t=this._data,r=this._pos,i=0,s=0,n=1&t[r];if(this._end-r>=10)do{if(i|=127&(s=t[r++]),0==(128&s)||(i|=(127&(s=t[r++]))<<7,0==(128&s))||(i|=(127&(s=t[r++]))<<14,0==(128&s))||(i|=(127&(s=t[r++]))<<21,0==(128&s))||(i+=268435456*(127&(s=t[r++])),0==(128&s))||(i+=34359738368*(127&(s=t[r++])),0==(128&s))||(i+=4398046511104*(127&(s=t[r++])),0==(128&s))||(i+=562949953421312*(127&(s=t[r++])),0==(128&s))||(i+=72057594037927940*(127&(s=t[r++])),0==(128&s))||(i+=0x7fffffffffffffff*(127&(s=t[r++])),0==(128&s)))break;throw Error("Varint too long!")}while(0);else{let n=1;for(;r!==this._end&&0!=(128&(s=t[r]));)++r,i+=(127&s)*n,n*=128;if(r===this._end)throw Error("Varint overrun!");++r,i+=s*n}return this._pos=r,n?-(i+1)/2:i/2}_getLength(){if(this._dataType!==s.delimited)throw Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,r,i){if((i=Math.min(this._end,i))-r>u){let s=t.subarray(r,i);return l.decode(s)}let s="",n="";for(let o=r;o<i;++o){let r=t[o];128&r?n+="%"+r.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(r),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(t,r,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,r,i-r)}}d.pool=new a.Z(d,void 0,t=>{t._data=null,t._dataView=null})},66138:(t,r,i)=>{"use strict";i.d(r,{$F:()=>y,D_:()=>g,Ds:()=>M,H9:()=>c,Hc:()=>h,Hl:()=>m,R8:()=>_,WW:()=>w,Yn:()=>E,as:()=>v,dD:()=>b,e4:()=>C,fu:()=>f,gx:()=>x,hh:()=>I,k_:()=>u,r9:()=>p,y8:()=>S,zE:()=>l});var s=i(67220),n=(i(8393),i(12790)),o=i(47845),a=(i(66150),i(82639));function l(t="Aborted"){return new n.Z("AbortError",t)}function u(t,r="Aborted"){if(h(t))throw l(r)}function d(t){return(0,a.pC)(t)?"aborted"in t?t:t.signal:t}function h(t){let r=d(t);return(0,a.pC)(r)&&r.aborted}function p(t){if(g(t))throw t}function c(t){if(!g(t))throw t}function f(t,r){let i=d(t);if(!(0,a.Wi)(i)){if(!i.aborted)return(0,o.IH)(i,"abort",()=>r());r()}}function y(t,r){let i=d(t);if(!(0,a.Wi)(i))return u(i),(0,o.IH)(i,"abort",()=>r(l()))}function m(t,r){let i=d(r);return(0,a.Wi)(i)?t:new Promise((i,s)=>{let n=f(r,()=>s(l())),o=()=>n=(0,a.hw)(n);t.then(o,o),t.then(i,s)})}function g(t){return"AbortError"===t?.name}async function _(t){try{return await t}catch(t){if(!g(t))throw t;return}}function b(){let t=null,r=new Promise((r,i)=>{t={promise:void 0,resolve:r,reject:i}});return t.promise=r,t}async function v(t){if(t){if("function"!=typeof t.forEach){let r=Object.keys(t),i=r.map(r=>t[r]),s=await v(i),n={};return r.map((t,r)=>n[t]=s[r]),n}return new Promise(r=>{let i=[],s=t.length;0===s&&r(i),t.forEach(t=>{let n={promise:t||Promise.resolve(t)};i.push(n),n.promise.then(t=>{n.value=t}).catch(t=>{n.error=t}).then(()=>{0==--s&&r(i)})})})}}async function w(t){return(await v(t)).filter(t=>!!t.value).map(t=>t.value)}function C(t,r,i){let s=new AbortController;return f(i,()=>s.abort()),new Promise((i,n)=>{let o=setTimeout(()=>{o=0,i(r)},t);f(s,()=>{o&&(clearTimeout(o),n(l()))})})}function S(t){return t&&"function"==typeof t.then}function x(t){return S(t)?t:Promise.resolve(t)}function M(t,r=-1){let i,s,n,o,u=null,d=(...h)=>{if(i){s=h,o&&o.reject(l()),o=b();let t=(0,a.j0)(o.promise);if(u){let t=u;u=null,t.abort()}return t}if(n=o||b(),o=null,r>0){let s=new AbortController,n=i=x(t(...h,s.signal));C(r).then(()=>{i===n&&(o?s.abort():u=s)})}else i=1,i=x(t(...h));let p=()=>{let t=s;s=n=i=u=null,null!=t&&d(...t)},c=i,f=n;return c.then(p,p),c.then(f.resolve,f.reject),(0,a.j0)(f.promise)};return d}function I(){let t,r;let i=new Promise((i,s)=>{t=i,r=s}),n=r=>{t(r)};return n.resolve=r=>t(r),n.reject=t=>r(t),n.timeout=(t,r)=>s.m.setTimeout(()=>n.reject(r),t),n.promise=i,n}async function E(t){await Promise.resolve(),u(t)}},67844:(t,r,i)=>{"use strict";i.d(r,{N1:()=>c,YP:()=>u,Z_:()=>m,gx:()=>d,nn:()=>g,on:()=>p,tX:()=>_});var s=i(47845),n=i(31015),o=i(82639),a=i(66138),l=i(42169);function u(t,r,i={}){return h(t,r,i,f)}function d(t,r,i={}){return h(t,r,i,y)}function h(t,r,i={},s){let n=null,a=i.once?(t,i)=>{s(t)&&((0,o.hw)(n),r(t,i))}:(t,i)=>{s(t)&&r(t,i)};if(n=(0,l.aQ)(t,a,i.sync,i.equals),i.initial){let r=t();a(r,r)}return n}function p(t,r,i,a={}){let l=null,d=null,h=null;function p(){l&&d&&(d.remove(),a.onListenerRemove?.(l),l=null,d=null)}function c(t){a.once&&a.once&&(0,o.hw)(h),i(t)}let f=u(t,(t,i)=>{p(),(0,s.vT)(t)&&(l=t,d=(0,s.on)(t,r,c),a.onListenerAdd?.(t))},{sync:a.sync,initial:!0});return h=(0,n.kB)(()=>{f.remove(),p()})}function c(t,r){return function(t,r,i){if((0,a.Hc)(i))return Promise.reject((0,a.zE)());let s=t();if(r?.(s))return Promise.resolve(s);let l=null;function u(){l=(0,o.hw)(l)}return new Promise((s,o)=>{l=(0,n.AL)([(0,a.fu)(i,()=>{u(),o((0,a.zE)())}),h(t,t=>{u(),s(t)},{sync:!1,once:!0},r??f)])})}(t,y,r)}function f(t){return!0}function y(t){return!!t}i(52256);let m={sync:!0},g={initial:!0},_={sync:!0,initial:!0}},57446:(t,r,i)=>{"use strict";i.d(r,{A:()=>v,MU:()=>M,Os:()=>b});var s=i(82639),n=i(37407),o=i(63979),a=i(71937),l=i(66138),u=i(63441);class d{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class h{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let p=0,c={time:(0,u.HA)(0),deltaTime:(0,u.HA)(0),elapsedFrameTime:(0,u.HA)(0),frameDuration:(0,u.HA)(0)},f=["prepare","preRender","render","postRender","update","finish"],y=[],m=new a.Z;class g{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}let _={willDispatch:!1,executeFrameTasks:function(t){let r=(0,u.HA)(t-p);p=t;let i=1e3/60,s=Math.max(0,r-1e3/60);for(let n=0;n<f.length;n++){let o=performance.now(),a=f[n];m.forAll(o=>{o.paused||o.removed||(0===n&&o.ticks++,o.phases[a]&&(c.time=t,c.deltaTime=0===o.ticks?(0,u.HA)(0):r,c.elapsedFrameTime=(0,u.HA)(performance.now()-t),c.frameDuration=(0,u.HA)(i-s),o.phases[a]?.call(o,c)))}),I[n].record(performance.now()-o)}m.forAll(t=>{t.removed&&S.push(t)}),m.removeUnorderedMany(S.data,S.length),S.clear(),E.record(performance.now()-t)}};function b(t){let r=new h(t);return y.push(r),_.willDispatch||(_.willDispatch=!0,(0,n.Y)(x)),r}function v(t){let r=new d(t);return m.push(r),null==w&&(p=performance.now(),w=requestAnimationFrame(C)),new g(r)}let w=null;function C(){let t=performance.now();w=null,w=m.length>0?requestAnimationFrame(C):null,_.executeFrameTasks(t)}let S=new a.Z;function x(){for(;y.length;){let t=(0,s.j0)(y.shift());t.isActive&&t.callback()}_.willDispatch=!1}function M(t=1,r){let i=(0,l.hh)(),s=()=>{(0,l.Hc)(r)?i.reject((0,l.zE)()):0===t?i():(--t,(0,n.Y)(()=>s()))};return s(),i.promise}let I=f.map(t=>new o.Z(t)),E=new o.Z("total")},85098:(t,r,i)=>{"use strict";i.d(r,{F2:()=>n,Wz:()=>o,s1:()=>u,t_:()=>a,vW:()=>l});let s=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function n(t){return t?t/72*96:0}function o(t){return t?72*t/96:0}function a(t){if("string"==typeof t){let r=t.match(s);if(r){let i=Number(r[1]),s=r[3]&&r[3].toLowerCase(),n="-"===t.charAt(0),a="px"===s?o(i):i;return n?-a:a}return console.warn("screenUtils.toPt: input not recognized!"),null}return t}function l(t=0,r=0){return{x:t,y:r}}function u(t=0,r=0){return[t,r]}},18229:(t,r,i)=>{"use strict";i.d(r,{E:()=>n,_:()=>o});var s=i(82639);async function n(t,r){let{WhereClause:s}=await i.e(2238).then(i.bind(i,2238));return s.create(t,r)}function o(t,r){return(0,s.pC)(t)?(0,s.pC)(r)?`(${t}) AND (${r})`:t:r}},32121:(t,r,i)=>{"use strict";i.d(r,{Cb:()=>u,Qs:()=>a,gx:()=>o,hP:()=>l});var s=i(12619);let n=/\{([^\}]+)\}/g;function o(t,r){return t.replace(n,"object"==typeof r?(t,i)=>(0,s.hS)(i,r)??"":(t,i)=>r(i)??"")}function a(t,r){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,t=>r&&r.includes(t)?t:`\\${t}`)}function l(t){let r=0;for(let i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i)|0;return r}function u(t){return(new DOMParser).parseFromString(t||"","text/html").body.innerText||""}},59181:(t,r,i)=>{"use strict";i.d(r,{a:()=>h,z:()=>p});var s=i(24765),n=i(51084),o=i(58493),a=i(57107),l=(i(96082),i(66150),i(82639)),u=i(53919),d=(i(99950),i(21314),i(30407));let h=class extends(0,a.p)(n.Z){constructor(t){super(t),this.handles.add([this.on("before-add",t=>{(0,l.Wi)(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(let t of this.items)this._own(t)}_releaseAll(){for(let t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(n.Z.ofType(this.itemType.Type))(t):new n.Z(t)}};function p(t,r){return{type:t,cast:o.R,set(i){let s=(0,o.Z)(i,this._get(r),t);s.owner=this,this._set(r,s)}}}(0,s._)([(0,u.Cb)()],h.prototype,"owner",null),h=(0,s._)([(0,d.j)("esri.core.support.OwningCollection")],h)},99447:(t,r,i)=>{"use strict";i.d(r,{t:()=>p});var s=i(24765),n=i(53306),o=i(46366),a=i(82639),l=i(67844),u=i(57446),d=i(53919),h=i(30407);let p=class extends n.Z{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new o.Z,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(t,r,i={}){return this._installWatch(t,r,i,l.YP)}addWhen(t,r,i={}){return this._installWatch(t,r,i,l.gx)}addOnCollectionChange(t,r,{initial:i=!1,final:s=!1}={}){let n=++this._handleId;return this._handles.add([(0,l.on)(t,"after-changes",this._createSyncUpdatingCallback(),l.Z_),(0,l.on)(t,"change",r,{onListenerAdd:i?t=>r({added:t.toArray(),removed:[]}):void 0,onListenerRemove:s?t=>r({added:[],removed:t.toArray()}):void 0})],n),{remove:()=>this._handles.remove(n)}}addPromise(t){if((0,a.Wi)(t))return t;let r=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(t)&&(0!==this._pendingPromises.size||this._handles.has(c)||this._set("updating",!1))}},r),this._pendingPromises.add(t),this._set("updating",!0);let i=()=>this._handles.remove(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(t,r,i={},s){let n=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,n);let o=s(t,r,i);return this._handles.add(o,n),{remove:()=>this._handles.remove(n)}}_installSyncUpdatingWatch(t,r){let i=this._createSyncUpdatingCallback(),s=(0,l.YP)(t,i,{sync:!0,equals:()=>!1});return this._handles.add(s,r),s}_createSyncUpdatingCallback(){return()=>{this._handles.remove(c),++this._scheduleHandleId;let t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add((0,u.Os)(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(c))}),c)}}};(0,s._)([(0,d.Cb)({readOnly:!0})],p.prototype,"updating",void 0),p=(0,s._)([(0,h.j)("esri.core.support.WatchUpdatingTracking")],p);let c=-42},76539:(t,r,i)=>{"use strict";function s(t,r,i,s){let n=null,o=1e3;"number"==typeof r?(o=r,s=i):(n=r??null,o=i);let a,l=0,u=()=>{l=0,t.apply(s,a)},d=(...t)=>{n&&n.apply(s,t),a=t,o?l||(l=setTimeout(u,o)):u()};return d.remove=()=>{l&&(clearTimeout(l),l=0)},d.forceUpdate=()=>{l&&(clearTimeout(l),u())},d.hasPendingUpdates=()=>!!l,d}i.d(r,{P:()=>s})},63441:(t,r,i)=>{"use strict";function s(t){return t}i.d(r,{HA:()=>s})},56129:(t,r,i)=>{"use strict";i.d(r,{JE:()=>a,Nm:()=>o,rJ:()=>l}),i(96082);let s={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},n={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function o(t,r,i){let s=new Date(t.getTime());if(r&&i){let{getter:t,setter:o,multiplier:a}=n[i];if("months"===i){let t=function(t,r){let i=new Date(t,r+1,1);return i.setDate(0),i.getDate()}(s.getFullYear(),s.getMonth()+r);s.getDate()>t&&s.setDate(t)}s[o](s[t]()+r*a)}return s}function a(t,r){switch(r){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function l(t,r,i){return 0===t?0:t*s[r]/s[i]}},30217:(t,r,i)=>{"use strict";function s(t,r){if(t.forEach)t.forEach(r);else for(let i=0;i<t.length;i++)r(t[i],i,t)}function n(t,r,i){if(t.slice)return t.slice(r,i);void 0===r?r=0:(r<0&&(r+=t.length),r=Math.min(t.length,Math.max(0,r))),void 0===i?i=t.length:(i<0&&(i+=t.length),i=Math.min(t.length,Math.max(0,i)));let s=Math.max(0,i-r),n=new t.constructor(s);for(let i=0;i<s;i++)n[i]=t[r+i];return n}function o(t){return t instanceof ArrayBuffer||t&&t.constructor&&"ArrayBuffer"===t.constructor.name}function a(t){return t instanceof Int8Array||t&&t.constructor&&"Int8Array"===t.constructor.name}function l(t){return t instanceof Uint8Array||t&&t.constructor&&"Uint8Array"===t.constructor.name}function u(t){return t instanceof Uint8ClampedArray||t&&t.constructor&&"Uint8ClampedArray"===t.constructor.name}function d(t){return t instanceof Int16Array||t&&t.constructor&&"Int16Array"===t.constructor.name}function h(t){return t instanceof Uint16Array||t&&t.constructor&&"Uint16Array"===t.constructor.name}function p(t){return t instanceof Int32Array||t&&t.constructor&&"Int32Array"===t.constructor.name}function c(t){return t instanceof Uint32Array||t&&t.constructor&&"Uint32Array"===t.constructor.name}function f(t){return t instanceof Float32Array||t&&t.constructor&&"Float32Array"===t.constructor.name}function y(t){return t instanceof Float64Array||t&&t.constructor&&"Float64Array"===t.constructor.name}i.d(r,{Ed:()=>s,Hx:()=>p,KZ:()=>u,Uc:()=>h,W0:()=>a,ZY:()=>c,eP:()=>o,fS:()=>y,lq:()=>l,tP:()=>n,xZ:()=>f,z3:()=>d})},44042:(t,r,i)=>{"use strict";i.d(r,{D:()=>n});let s=0;function n(){return++s}},35562:(t,r,i)=>{"use strict";let s;i.d(r,{$C:()=>x,En:()=>C,Jo:()=>N,_R:()=>M,c9:()=>E,cM:()=>I,gV:()=>F,hd:()=>h,qE:()=>A,ty:()=>S}),i(96082);var n=i(84576),o=i(82639),a=i(34757),l=i(94531),u=i(32488),d=i(22121);let h=39.37,p=l.sv.radius*Math.PI/200,c=/UNIT\[([^\]]+)\]\]$/i,f=d.Z,y=/UNIT\[([^\]]+)\]/i,m=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),g=(0,n.w)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),_={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:1e-6},"square-centimeters":{inBaseUnits:1e-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1e6},"square-inches":{inBaseUnits:64516e-8},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(s=1200/3937)*s},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e-6},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:.1*10},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4168181825440.5796}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},b=(()=>{let t={};for(let r in _)for(let i in _[r].units)t[i]=r;return t})();function v(t){let r=b[t];if(!r)throw Error("unknown type");return r}function w(t,r=null){return _[r=r||v(t)].baseUnit===t}function C(t,r,i){if(r===i)return t;let s=v(r);if(s!==v(i))throw Error("incompatible units");let n=w(r,s)?t:t*_[s].units[r].inBaseUnits;return w(i,s)?n:n/_[s].units[i].inBaseUnits}function S(t,r,i){return C(t,r,"meters")/(i*Math.PI/180)}function x(t){return g.fromJSON(t.toLowerCase())||null}function M(t){if((0,o.pC)(t)&&!(0,u.N$)(t))return 1;let r=E(t);return r>1e5?1:r}function I(t){return E(t)>=(0,a.Iu)(t).metersPerDegree?"meters":A(t)}function E(t,r=l.sv.metersPerDegree){return(0,o.Pt)(function(t,r=!1){let i=(0,o.pC)(t)?t.wkid:null,s=(0,o.pC)(t)?t.wkt:null,n=null;if(i){if((0,u.o$)(i))return l.yr.metersPerDegree;if((0,u.ME)(i))return l.Z1.metersPerDegree;!(n=f.values[f[i]])&&r&&m.has(i)&&(n=p)}else s&&(O(s)?n=T(c.exec(s),n):k(s)&&(n=T(y.exec(s),n)));return n}(t,!0),r)}function T(t,r){return t&&t[1]?P(t[1]):r}function P(t){return parseFloat(t.split(",")[1])}function A(t){let r=(0,o.pC)(t)?t.wkid:null,i=(0,o.pC)(t)?t.wkt:null,s=null;if(r)s=f.units[f[r]];else if(i){let t=O(i)?c:k(i)?y:null;if(t){let r=t.exec(i);r&&r[1]&&(s=function(t){let r=/[\\"\\']{1}([^\\"\\']+)/.exec(t),i=r&&r[1];if(!i||!f.units.includes(i)){let r=P(t);i=null;let s=f.values;for(let t=0;t<s.length;++t)if(1e-7>Math.abs(r-s[t])){i=f.units[t];break}}return i}(r[1]))}}return(0,o.pC)(s)?x(s):null}function k(t){return/^GEOCCS/i.test(t)}function O(t){return/^PROJCS/i.test(t)}let R={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},L={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},F=(0,n.w)()(R),N=(0,n.w)()(L);(0,n.w)()({...R,...L})},82583:(t,r,i)=>{"use strict";i.d(r,{$U:()=>ei,AH:()=>J,B7:()=>T,D6:()=>Z,Fv:()=>G,HK:()=>H,Hu:()=>ec,Ie:()=>ed,L:()=>x,Ml:()=>em,P$:()=>$,PF:()=>U,Qj:()=>eu,R9:()=>b,TI:()=>S,YP:()=>B,Yd:()=>ea,ZN:()=>ef,_l:()=>Q,b7:()=>P,ed:()=>F,fZ:()=>eg,fl:()=>ey,hF:()=>z,hO:()=>es,io:()=>ee,jc:()=>W,kl:()=>V,mN:()=>M,oC:()=>et,oh:()=>D,qg:()=>A,rS:()=>Y,sJ:()=>X,tD:()=>L,tm:()=>N,u0:()=>I,v_:()=>q,vt:()=>el,zd:()=>ep});var s=i(10242),n=i(12790),o=i(66150),a=i(82639);let l=o.Z.getLogger("esri.core.urlUtils"),u=s.Z.request,d="esri/config: esriConfig.request.proxyUrl is not set.",h=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,p=/^\s*http:/i,c=/^\s*https:/i,f=/^\s*file:/i,y=/:\d+$/,m=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,g=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),_=RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class b{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=(0,a.j0)(this.uri.match(g));this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),null!=this.authority&&(r=(0,a.j0)(this.authority.match(_)),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}}let v={},w=new b(s.Z.applicationUrl),C=function(){let t=(0,a.j0)(w.path),r=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${w.scheme}://${w.host}${null!=w.port?`:${w.port}`:""}${r}`}(),S=()=>w,x=()=>C;function M(t){if(!t)return null;let r={path:null,query:null},i=new b(t),s=t.indexOf("?");return null===i.query?r.path=t:(r.path=t.substring(0,s),r.query=I(i.query)),i.fragment&&(r.hash=i.fragment,null===i.query&&(r.path=r.path.substring(0,r.path.length-(i.fragment.length+1)))),r}function I(t){let r=t.split("&"),i={};for(let t of r){let r,s;if(!t)continue;let n=t.indexOf("=");n<0?(r=decodeURIComponent(t),s=""):(r=decodeURIComponent(t.slice(0,n)),s=decodeURIComponent(t.slice(n+1)));let o=i[r];"string"==typeof o&&(o=i[r]=[o]),Array.isArray(o)?o.push(s):i[r]=s}return i}function E(t){return t&&"object"==typeof t&&"toJSON"in t&&"function"==typeof t.toJSON}function T(t,r){return t?r&&"function"==typeof r?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(r(i,t[i]))).join("&"):Object.keys(t).map(i=>{let s=t[i];if(null==s)return"";let n=encodeURIComponent(i)+"=",o=r&&r[i];return o?n+encodeURIComponent(o(s)):Array.isArray(s)?s.map(t=>E(t)?n+encodeURIComponent(JSON.stringify(t)):n+encodeURIComponent(t)).join("&"):E(s)?n+encodeURIComponent(JSON.stringify(s)):n+encodeURIComponent(s)}).filter(t=>t).join("&"):""}function P(t=!1){let r,i=u.proxyUrl;if("string"==typeof t){r=ei(t);let s=F(t);s&&(i=s.proxyUrl)}else r=!!t;if(!i)throw l.warn(d),new n.Z("urlutils:proxy-not-set",d);return r&&en()&&(i=es(i)),M(i)}function A(t){let r,i;let s=F(t);if(s){let t=O(s.proxyUrl);r=t.path,i=t.query?I(t.query):null}if(r){let s=M(t);t=r+"?"+s.path;let n=T({...i,...s.query});n&&(t=`${t}?${n}`)}return t}let k={path:"",query:""};function O(t){let r=t.indexOf("?");return -1!==r?(k.path=t.slice(0,r),k.query=t.slice(r+1)):(k.path=t,k.query=null),k}function R(t){var r;return(t=eo(t=(r=t=O(t).path)&&"/"===r[r.length-1]?r:`${r}/`,!0)).toLowerCase()}function L(t){let r={proxyUrl:t.proxyUrl,urlPrefix:R(t.urlPrefix)},i=u.proxyRules,s=r.urlPrefix,n=i.length;for(let t=0;t<i.length;t++){let r=i[t].urlPrefix;if(0===s.indexOf(r)){if(s.length===r.length)return -1;n=t;break}0===r.indexOf(s)&&(n=t+1)}return i.splice(n,0,r),n}function F(t){let r=u.proxyRules,i=R(t);for(let t=0;t<r.length;t++)if(0===i.indexOf(r[t].urlPrefix))return r[t]}function N(t,r){return t=j(t),r=j(r),eo(t)===eo(r)}function j(t){let r=(t=G(t)).indexOf("/sharing");return r>0?t.substring(0,r):t.replace(/\/+$/,"")}function D(t){let r=r=>null==r||r instanceof RegExp&&r.test(t)||"string"==typeof r&&t.startsWith(r),i=u.interceptors;if(i){for(let t of i)if(Array.isArray(t.urls)){if(t.urls.some(r))return t}else if(r(t.urls))return t}return null}function Z(t,r,i=!1){if(!t||!r)return!1;let s=eh(t),n=eh(r);return!(!i&&s.scheme!==n.scheme)&&null!=s.host&&null!=n.host&&s.host.toLowerCase()===n.host.toLowerCase()&&s.port===n.port}function V(t){if("string"==typeof t){if(!B(t))return!0;t=eh(t)}if(Z(t,w))return!0;let r=u.trustedServers||[];for(let s=0;s<r.length;s++){var i;let n=(v[i=r[s]]||(er(i)||et(i)?v[i]=[new b(z(i))]:v[i]=[new b(`http://${i}`),new b(`https://${i}`)]),v[i]);for(let r=0;r<n.length;r++)if(Z(t,n[r]))return!0}return!1}function z(t,r=C,i){return et(t)?i&&i.preserveProtocolRelative?t:"http"===w.scheme&&w.authority===$(t).slice(2)?`http:${t}`:`https:${t}`:er(t)?t:(0,a.j0)(q("/"===t[0]?function(t){let r=t.indexOf("//"),i=t.indexOf("/",r+2);return -1===i?t:t.slice(0,i)}(r):r,t))}function U(t,r=C,i){if(null==t||!B(t))return t;let s=G(t),n=s.toLowerCase(),o=G(r).toLowerCase().replace(/\/+$/,""),a=i?G(i).toLowerCase().replace(/\/+$/,""):null;if(a&&0!==o.indexOf(a))return t;let l=(t,r,i)=>-1===(i=t.indexOf(r,i))?t.length:i,u=l(n,"/",n.indexOf("//")+2),d=-1;for(;n.slice(0,u+1)===o.slice(0,u)+"/"&&(d=u+1,u!==n.length);)u=l(n,"/",u+1);if(-1===d||a&&d<a.length)return t;t=s.slice(d);let h=o.slice(d-1).replace(/[^/]+/g,"").length;if(h>0)for(let r=0;r<h;r++)t=`../${t}`;else t=`./${t}`;return t}function G(t){return function(t){var r;let i;let s=u.httpsDomains;if(!(null!=(r=t)&&p.test(r)||"http"===w.scheme&&et(r)))return t;let n=t.indexOf("/",7);if(i=(i=-1===n?t:t.slice(0,n)).toLowerCase().slice(7),y.test(i)){if(!i.endsWith(":80"))return t;i=i.slice(0,-3),t=t.replace(":80","")}return"http"===w.scheme&&i===w.authority&&!m.test(t)||(en()&&i===w.authority||s&&s.some(t=>i===t||i.endsWith(`.${t}`))||en()&&!F(t))&&(t=es(t)),t}(t=(t=function(t){if(/^https?:\/\//i.test(t)){let r=O(t);t=(t=r.path.replace(/\/{2,}/g,"/")).replace("/","//"),r.query&&(t+=`?${r.query}`)}return t}(t=z(t=t.trim()))).replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2"))}function q(...t){let r=t.filter(a.pC);if(!r||!r.length)return;let i=[];if(B(r[0])){var s;let t=r[0],n=t.indexOf("//");-1!==n&&(i.push(t.slice(0,n+1)),null!=(s=r[0])&&f.test(s)&&(i[0]+="/"),r[0]=t.slice(n+2))}else"/"===r[0][0]&&i.push("");let n=r.reduce((t,r)=>r?t.concat(r.split("/")):t,[]);for(let t=0;t<n.length;t++){let r=n[t];".."===r&&i.length>0&&".."!==i[i.length-1]?i.pop():(!r&&t===n.length-1||r&&("."!==r||0===i.length))&&i.push(r)}return i.join("/")}function $(t,r=!1){if(null==t||W(t)||H(t))return null;let i=t.indexOf("://");if(-1===i&&et(t))i=2;else{if(-1===i)return null;i+=3}let s=t.indexOf("/",i);return -1!==s&&(t=t.slice(0,s)),r&&(t=eo(t,!0)),t}function B(t){return et(t)||er(t)}function W(t){return null!=t&&"blob:"===t.slice(0,5)}function H(t){return null!=t&&"data:"===t.slice(0,5)}function J(t){let r=X(t);if(!r||!r.isBase64)return null;let i=atob(r.data),s=new Uint8Array(i.length);for(let t=0;t<i.length;t++)s[t]=i.charCodeAt(t);return s.buffer}function Y(t){return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}let K=/^data:(.*?)(;base64)?,(.*)$/;function X(t){let r=t.match(K);if(!r)return null;let[,i,s,n]=r;return{mediaType:i,isBase64:!!s,data:n}}function Q(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function ee(t,r){(function(t,r){if(!t)return!1;let i=document.createElement("a");if(!("download"in i))return!1;let s=URL.createObjectURL(t);return i.download=r,i.href=s,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),!0})(t,r)||window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(t,r)}function et(t){return null!=t&&"/"===t[0]&&"/"===t[1]}function er(t){return null!=t&&h.test(t)}function ei(t){return null!=t&&c.test(t)||"https"===w.scheme&&et(t)}function es(t){return et(t)?`https:${t}`:t.replace(p,"https:")}function en(){return"https"===w.scheme}function eo(t,r=!1){return et(t)?t.slice(2):(t=t.replace(h,""),r&&t.length>1&&"/"===t[0]&&"/"===t[1]&&(t=t.slice(2)),t)}function ea(t){let r=0;if(B(t)){let i=t.indexOf("//");-1!==i&&(r=i+2)}let i=t.lastIndexOf("/");return i<r?t:t.slice(0,i+1)}function el(t,r){if(!t)return"";let i=M(t).path.replace(/\/+$/,""),s=i.substring(i.lastIndexOf("/")+1);if(!r?.length)return s;let n=RegExp(`.(${r.join("|")})$`,"ig");return s.replace(n,"")}function eu(t){return t.replace(/\/+$/,"")}function ed(t,r,i){if(!(r&&i&&t&&B(t)))return t;let s=t.indexOf("//"),n=t.indexOf("/",s+2),o=t.indexOf(":",s+2),a=Math.min(n<0?t.length:n,o<0?t.length:o);return t.slice(s+2,a).toLowerCase()!==r.toLowerCase()?t:`${t.slice(0,s+2)}${i}${t.slice(a)}`}function eh(t){return"string"==typeof t?new b(z(t)):(t.scheme||(t.scheme=w.scheme),t)}function ep(t){return eb.test(t)}function ec(t,r){let i=M(t),s=Object.keys(i.query||{});return s.length>0&&r&&r.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function ef(t,r,i){let s=M(t),n=s.query||{};return n[r]=String(i),`${s.path}?${T(n)}`}function ey(t,r){let i=M(t),s=i.query||{};for(let t in r)s[t]=r[t];let n=T(s);return n?`${i.path}?${n}`:i.path}function em(t){if((0,a.Wi)(t))return null;let r=t.match(e_);return r?r[2]:null}function eg(t){if((0,a.Wi)(t))return null;let r=t.match(e_);return r?{path:r[1],extension:r[2]}:{path:t,extension:null}}let e_=/([^.]*)\.([^\/]*)$/,eb=/(^data:image\/svg|\.svg$)/i},16743:(t,r,i)=>{"use strict";i.d(r,{D:()=>n});let s="randomUUID"in crypto;function n(){if(s)return crypto.randomUUID();let t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;let r=r=>t[r].toString(16).padStart(4,"0");return r(0)+r(1)+"-"+r(2)+"-"+r(3)+"-"+r(4)+"-"+r(5)+r(6)+r(7)}},49823:(t,r,i)=>{"use strict";i.d(r,{Z:()=>u});var s=i(31015),n=i(66150),o=i(66138),a=i(91425),l=i(62733);class u{constructor(){this._inUseClients=[],this._clients=[],this._clientPromises=[],this._ongoingJobsQueue=new a.Z}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,r){return new Promise((i,s)=>{let n=!0,a=t=>{(0,o.k_)(r.signal),n&&(n=!1,t())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let n=0;n<t.length;++n){let u=t[n];(0,o.y8)(u)?this._clientPromises[n]=u.then(t=>(this._clients[n]=new l.Z(t,r,()=>this._ongoingJobsQueue.pop()??null),a(i),this._clients[n]),()=>(a(s),null)):(this._clients[n]=new l.Z(u,r,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[n]=Promise.resolve(this._clients[n]),a(i))}})}broadcast(t,r,i){let s=Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){let o=this._clientPromises[n];s[n]=o.then(s=>s?.invoke(t,r,i))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject((0,o.zE)(`Worker closing, aborting job calling '${t.methodName}'`));for(let t of this._clientPromises)t.then(t=>t?.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,r,i){let s;Array.isArray(i)?(n.Z.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:i}):s=i;let a=(0,o.dD)();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:s,deferred:a});for(let t=0;t<this._clientPromises.length;t++){let r=this._clients[t];r?r.jobAdded():this._clientPromises[t].then(t=>t?.jobAdded())}return a.promise}on(t,r){return Promise.all(this._clientPromises).then(()=>(0,s.AL)(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{let r=Array(this._clientPromises.length),i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(r[s]=n.openPort()),0==--i&&t(r)})})}get test(){return{numClients:this._clients.length}}}},62733:(t,r,i)=>{"use strict";i.d(r,{Z:()=>b});var s=i(49869),n=i(12790),o=i(47845),a=i(82639),l=i(66138),u=i(30043),d=i(29562);let h={statsWorker:()=>Promise.all([i.e(3945),i.e(6976)]).then(i.bind(i,26976)),geometryEngineWorker:()=>Promise.all([i.e(962),i.e(418)]).then(i.bind(i,10418)),CSVSourceWorker:()=>Promise.all([i.e(2238),i.e(3945),i.e(3914),i.e(4510),i.e(7978)]).then(i.bind(i,57978)),EdgeProcessingWorker:()=>Promise.all([i.e(1211),i.e(4373)]).then(i.bind(i,34373)),ElevationSamplerWorker:()=>Promise.all([i.e(7931),i.e(5932)]).then(i.bind(i,55932)),FeatureServiceSnappingSourceWorker:()=>Promise.all([i.e(2238),i.e(3945),i.e(3914),i.e(4510),i.e(8380)]).then(i.bind(i,38211)),GeoJSONSourceWorker:()=>Promise.all([i.e(2238),i.e(3945),i.e(3914),i.e(4510),i.e(1422),i.e(4786)]).then(i.bind(i,54786)),LercWorker:()=>i.e(151).then(i.bind(i,151)),MemorySourceWorker:()=>Promise.all([i.e(2238),i.e(3945),i.e(3914),i.e(4510),i.e(1422),i.e(4701)]).then(i.bind(i,44701)),PBFDecoderWorker:()=>i.e(7516).then(i.bind(i,67516)),Pipeline:()=>Promise.all([i.e(6057),i.e(4813),i.e(2238),i.e(6873),i.e(3945),i.e(3914),i.e(4510),i.e(9919)]).then(i.bind(i,6281)),PointCloudWorker:()=>Promise.all([i.e(6476),i.e(1396)]).then(i.bind(i,1396)),RasterWorker:()=>Promise.all([i.e(8073),i.e(1909),i.e(7419),i.e(2584)]).then(i.bind(i,32584)),SceneLayerSnappingSourceWorker:()=>Promise.all([i.e(2238),i.e(3945),i.e(3914),i.e(1211),i.e(7539)]).then(i.bind(i,42988)),SceneLayerWorker:()=>i.e(6193).then(i.bind(i,76193)),WFSSourceWorker:()=>Promise.all([i.e(2238),i.e(3945),i.e(3914),i.e(4510),i.e(1422),i.e(7662)]).then(i.bind(i,47662)),WorkerTileHandler:()=>Promise.all([i.e(8008),i.e(4922)]).then(i.bind(i,30558))},{CLOSE:p,ABORT:c,INVOKE:f,RESPONSE:y,OPEN_PORT:m,ON:g}=u.Cs;class _{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===u.Cs.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){for(let t of(this._timer=null,this._invokeMessages))this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class b{constructor(t,r,i){this._port=t,this._getNextJob=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new _(t=>this._onInvokeMessage(t)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){let r;let i=new MessageChannel;r="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t;let s=new b(i.port1,{channel:i,client:r},()=>null);return"object"==typeof r&&"remoteClient"in r&&(r.remoteClient=s),b.clients.set(s,r),i.port2}static loadWorker(t){let r=h[t];return r?r():Promise.resolve(null)}close(){this._post({type:p}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){let s=i&&i.signal,o=i&&i.transferList;if(!this._port)return Promise.reject(new n.Z("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));let d=(0,u.jt)();return new Promise((i,n)=>{if((0,l.Hc)(s))return this._processWork(),void n((0,l.zE)());let u=(0,l.fu)(s,()=>{let t=this._outJobs.get(d);t&&(this._outJobs.delete(d),this._processWork(),(0,a.hw)(t.abortHandle),this._post({type:c,jobId:d}),n((0,l.zE)()))});this._outJobs.set(d,{resolve:i,reject:n,abortHandle:u,debugInfo:t}),this._post({type:f,jobId:d,methodName:t,abortable:null!=s},r,o)})}on(t,r){let i=new MessageChannel;function s(t){r(t.data)}return this._port.postMessage({type:u.Cs.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),{remove(){i.port1.postMessage({type:u.Cs.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",s)}}}jobAdded(){this._processWork()}openPort(){let t=new MessageChannel;return this._post({type:m,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=2)return;let t=this._getNextJob();if(!t)return;let{methodName:r,data:i,invokeOptions:s,deferred:n}=t;this.invoke(r,i,s).then(t=>n.resolve(t)).catch(t=>n.reject(t))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{(0,a.hw)(t.abortHandle),t.reject((0,l.zE)(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){(0,a.pC)(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){let r=(0,u.QM)(t);if(r)switch(r.type){case y:this._onResponseMessage(r);break;case f:this._invokeQueue.push(r);break;case c:this._onAbortMessage(r);break;case p:this._onCloseMessage();break;case m:this._onOpenPortMessage(r);break;case g:this._onOnMessage(r)}}_onAbortMessage(t){let r=this._inJobs,i=t.jobId,s=r.get(i);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){let t=this._client;this._close(),t&&"destroy"in t&&b.clients.get(this)===t&&t.destroy(),b.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){let{methodName:r,jobId:i,data:s,abortable:n}=t,o=n?new AbortController:null,a=this._inJobs,d,h=this._client,p=h[r];try{if(!p&&r&&r.includes(".")){let t=r.split(".");for(let r=0;r<t.length-1;r++)p=(h=h[t[r]])[t[r+1]]}if("function"!=typeof p)throw TypeError(`${r} is not a function`);d=p.call(h,s,{client:this,signal:o?o.signal:null})}catch(t){return void this._post({type:y,jobId:i,error:(0,u.AB)(t)})}(0,l.y8)(d)?(a.set(i,{controller:o,promise:d}),d.then(t=>{a.has(i)&&(a.delete(i),this._post({type:y,jobId:i},t))},t=>{a.has(i)&&(a.delete(i),(0,l.D_)(t)||this._post({type:y,jobId:i,error:(0,u.AB)(t||{message:`Error encountered at method ${r}`})}))})):this._post({type:y,jobId:i},d)}_onOpenPortMessage(t){new b(t.port,{client:this._client},()=>null)}_onOnMessage(t){let{port:r}=t,i=this._client.on(t.eventType,t=>{r.postMessage(t)}),s=(0,o.on)(t.port,"message",t=>{u.QM(t)?.type===u.Cs.CLOSE&&(s.remove(),i.remove(),r.close())})}_onResponseMessage(t){let{jobId:r,error:i,data:s}=t,o=this._outJobs;if(!o.has(r))return;let l=o.get(r);o.delete(r),this._processWork(),(0,a.hw)(l.abortHandle),i?l.reject(n.Z.fromJSON(JSON.parse(i))):l.resolve(s)}_post(t,r,i){return(0,u.oi)(this._port,t,r,i)}}b.kernelInfo={revision:d.$,version:s.i8,buildDate:d.r},b.clients=new Map},30043:(t,r,i)=>{"use strict";i.d(r,{AB:()=>u,Cs:()=>n,QM:()=>d,jt:()=>l,oi:()=>function t(r,i,s,a){let l;if(i.type===n.OPEN_PORT)return void r.postMessage(i,[i.port]);if(i.type!==n.INVOKE&&i.type!==n.RESPONSE)return void r.postMessage(i);if(s&&"object"==typeof s&&("result"in s||"transferList"in s)?(l=h(s.transferList),i.data=s.result):(l=h(a),i.data=s),l){if((0,o.Z)("ff")){for(let s of l)if("byteLength"in s&&s.byteLength>267386880){let s="Worker call with large ArrayBuffer would crash Firefox";switch(i.type){case n.INVOKE:throw s;case n.RESPONSE:return void t(r,{type:n.RESPONSE,jobId:i.jobId,error:u(s)})}}}r.postMessage(i,l)}else r.postMessage(i)}});var s,n,o=i(96082);(s=n||(n={}))[s.HANDSHAKE=0]="HANDSHAKE",s[s.OPEN=1]="OPEN",s[s.OPENED=2]="OPENED",s[s.RESPONSE=3]="RESPONSE",s[s.INVOKE=4]="INVOKE",s[s.ABORT=5]="ABORT",s[s.CLOSE=6]="CLOSE",s[s.OPEN_PORT=7]="OPEN_PORT",s[s.ON=8]="ON";let a=0;function l(){return a++}function u(t){return t?"string"==typeof t?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function d(t){if(!t)return null;let r=t.data;return r?"string"==typeof r?JSON.parse(r):r:null}function h(t){if(!t||!t.length)return null;if((0,o.Z)("esri-workers-arraybuffer-transfer"))return t;let r=t.filter(t=>!(t instanceof ArrayBuffer||t&&t.constructor&&"ArrayBuffer"===t.constructor.name));return r.length?r:null}},40655:(t,r,s)=>{"use strict";let n,o;s.d(r,{j2:()=>Z,bA:()=>z});var a=s(12790),l=s(96082),u=s(66138),d=s(49823),h=s(62733),p=s(49869),c=s(66150),f=s(82639),y=s(30043),m=s(6487),g=s(10242),_=(s(92886),s(82583));let b={};var v=s(37407);class w{constructor(){let t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}}class C{constructor(){this._dispatcher=new w,this._workerPostMessage({type:y.Cs.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){(0,v.Y)(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){(0,v.Y)(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){let r=(0,y.QM)(t);if(r&&r.type===y.Cs.OPEN){let{modulePath:t,jobId:s}=r,n=await h.Z.loadWorker(t);n||(n=await i(15510)(t));let o=h.Z.connect(n);this._workerPostMessage({type:y.Cs.OPENED,jobId:s,data:o})}}}var S=s(11284),x=s(29562);let M=c.Z.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:I}=y.Cs,E="Failed to create Worker. Fallback to execute module in main thread";async function T(t){return new Promise(r=>{function i(n){let o=(0,y.QM)(n);o&&o.type===I&&(t.removeEventListener("message",i),t.removeEventListener("error",s),r(t))}function s(r){r.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",s),M.warn("Failed to create Worker. Fallback to execute module in main thread",r),(t=new C).addEventListener("message",i),t.addEventListener("error",s)}t.addEventListener("message",i),t.addEventListener("error",s)})}let P=0,{ABORT:A,INVOKE:k,OPEN:O,OPENED:R,RESPONSE:L}=y.Cs;class F{constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",t=>{t.preventDefault(),c.Z.getLogger("esri.core.workers.WorkerOwner").error(t)})}static async create(t){return new F(await async function(){let t;if(!(0,l.Z)("esri-workers")||((0,l.Z)("mozilla"),0))return T(new C);if(!n&&!o)try{let t='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,version:r}=configuration.kernelInfo,{revision:t,version:n}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS API for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const i=outgoing.get(r);outgoing.delete(r),o.error?i.reject(JSON.parse(o.error)):i.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.split('"{CONFIGURATION}"').join(`'${function(){let t;if(null!=g.Z.default){let r={...g.Z};delete r.default,t=JSON.parse(JSON.stringify(r))}else t=JSON.parse(JSON.stringify(g.Z));t.assetsPath=(0,_.hF)(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?(0,_.hF)(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=(0,S.Kd)(),t.has={"esri-csp-restrictions":(0,l.Z)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,l.Z)("esri-2d-update-debug"),"featurelayer-pbf":(0,l.Z)("featurelayer-pbf"),"featurelayer-simplify-thresholds":(0,l.Z)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,l.Z)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,l.Z)("featurelayer-simplify-mobile-factor"),"esri-atomics":(0,l.Z)("esri-atomics"),"esri-shared-array-buffer":(0,l.Z)("esri-shared-array-buffer"),"esri-tiles-debug":(0,l.Z)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,l.Z)("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":(0,l.Z)("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":(0,l.Z)("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=(0,_.hF)(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=(0,_.hF)(t.workers.workerPath):t.workers.workerPath=(0,_.hF)((0,m.V)("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;let r=g.Z.workers.loaderConfig,i=function(t){let r={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(r.async=!0),t.hasOwnProperty("isDebug")||(r.isDebug=!1),t.baseUrl||(r.baseUrl=b.baseUrl),b.packages?.forEach(t=>{!function(t,r){for(let i of t)if(i.name===r.name)return;t.push(r)}(r.packages??[],t)}),r}({baseUrl:r?.baseUrl,locale:(0,S.Kd)(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...r?.has},map:{...r?.map},paths:{...r?.paths},packages:r?.packages||[]}),s={version:p.i8,buildDate:x.r,revision:x.$};return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:s})}()}'`);n=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){o=t||{}}if(n)try{t=new Worker(n,{name:"esri-worker-"+P++})}catch(r){M.warn(E,o),t=new C}else M.warn(E,o),t=new C;return T(t)}(),t)}terminate(){this.worker.terminate()}async open(t,r={}){let{signal:i}=r,s=(0,y.jt)();return new Promise((r,n)=>{let o={resolve:r,reject:n,abortHandle:(0,u.$F)(i,()=>{this._outJobs.delete(s),this._post({type:A,jobId:s})})};this._outJobs.set(s,o),this._post({type:O,jobId:s,modulePath:t})})}_onMessage(t){let r=(0,y.QM)(t);if(r)switch(r.type){case R:this._onOpenedMessage(r);break;case L:this._onResponseMessage(r);break;case A:this._onAbortMessage(r);break;case k:this._onInvokeMessage(r)}}_onAbortMessage(t){let r=this._inJobs,i=t.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(t){let r;let{methodName:i,jobId:s,data:n,abortable:o}=t,a=o?new AbortController:null,l=this._inJobs,d=p.Nv[i];try{if("function"!=typeof d)throw TypeError(`${i} is not a function`);r=d.call(null,n,{signal:a?a.signal:null})}catch(t){return void this._post({type:L,jobId:s,error:(0,y.AB)(t)})}(0,u.y8)(r)?(l.set(s,{controller:a,promise:r}),r.then(t=>{l.has(s)&&(l.delete(s),this._post({type:L,jobId:s},t))},t=>{l.has(s)&&(l.delete(s),t||(t={message:"Error encountered at method"+i}),(0,u.D_)(t)||this._post({type:L,jobId:s,error:(0,y.AB)(t||{message:`Error encountered at method ${i}`})}))})):this._post({type:L,jobId:s},r)}_onOpenedMessage(t){let{jobId:r,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),(0,f.hw)(s.abortHandle),s.resolve(i))}_onResponseMessage(t){let{jobId:r,error:i,data:s}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),(0,f.hw)(n.abortHandle),i?n.reject(a.Z.fromJSON(JSON.parse(i))):n.resolve(s))}_post(t,r,i){return(0,y.oi)(this.worker,t,r,i)}}let N=(0,l.Z)("esri-workers-debug")?1:(0,l.Z)("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):(0,l.Z)("host-browser")?navigator.hardwareConcurrency-1:0;N||(N=(0,l.Z)("safari")&&(0,l.Z)("mac")||(0,l.Z)("trident")?7:2);let j=0,D=[];function Z(){G()}async function V(t,r){let i=new d.Z;return await i.open(t,r),i}async function z(t,r={}){if("string"!=typeof t)throw new a.Z("workers:undefined-module","modulePath is missing");let s=r.strategy||"distributed";if((0,l.Z)("host-webworker")&&!(0,l.Z)("esri-workers")&&(s="local"),"local"===s){let s=await h.Z.loadWorker(t);s||(s=await i(15510)(t)),(0,u.k_)(r.signal);let n=r.client||s;return V([h.Z.connect(s)],{...r,client:n})}if(await G(),(0,u.k_)(r.signal),"dedicated"===s){let i=j++%N;return V([await D[i].open(t,r)],r)}if(r.maxNumWorkers&&r.maxNumWorkers>0){let i=Math.min(r.maxNumWorkers,N);if(i<N){let s=Array(i);for(let n=0;n<i;++n){let i=j++%N;s[n]=D[i].open(t,r)}return V(s,r)}}return V(D.map(i=>i.open(t,r)),r)}let U=null;async function G(){if(U)return U;new AbortController;let t=[];for(let r=0;r<N;r++){let i=F.create(r).then(t=>(D[r]=t,t));t.push(i)}return U=Promise.all(t)}},58627:(t,r,i)=>{"use strict";i.d(r,{Z:()=>ey});var s,n,o,a=i(24765),l=i(72140),u=i(59118),d=i(53919),h=i(36844),p=i(71169),c=i(30407),f=i(62300),y=(i(99950),i(21314));let m=o=class extends l.wq{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new o({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],m.prototype,"expression",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,a._)([(0,d.Cb)({type:["boolean","date","number","string"],json:{write:!0}})],m.prototype,"returnType",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],m.prototype,"title",void 0);let g=m=o=(0,a._)([(0,c.j)("esri.form.ExpressionInfo")],m),_=class extends l.wq{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],_.prototype,"description",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],_.prototype,"label",void 0),(0,a._)([(0,d.Cb)()],_.prototype,"type",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],_.prototype,"visibilityExpression",void 0);let b=_=(0,a._)([(0,c.j)("esri.form.elements.Element")],_),v=q=class extends l.wq{constructor(t){super(t),this.type=null}clone(){return new q({type:this.type})}};(0,a._)([(0,d.Cb)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],v.prototype,"type",void 0);let w=v=q=(0,a._)([(0,c.j)("esri.form.elements.inputs.AttachmentInput")],v),C=$=class extends b{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new $({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],C.prototype,"attachmentKeyword",void 0),(0,a._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],C.prototype,"editable",void 0),(0,a._)([(0,d.Cb)({type:w,json:{read:{source:"inputType"},write:{target:"inputType"}}})],C.prototype,"input",void 0),(0,a._)([(0,d.Cb)({type:["attachment"],json:{read:!1,write:!0}})],C.prototype,"type",void 0);let S=C=$=(0,a._)([(0,c.j)("esri.form.elements.AttachmentElement")],C),x=class extends l.wq{constructor(t){super(t),this.type=null}};(0,a._)([(0,d.Cb)()],x.prototype,"type",void 0);let M=x=(0,a._)([(0,c.j)("esri.form.elements.inputs.Input")],x),I=class extends M{constructor(t){super(t),this.maxLength=null,this.minLength=0}};(0,a._)([(0,d.Cb)({type:Number,json:{write:!0}})],I.prototype,"maxLength",void 0),(0,a._)([(0,d.Cb)({type:Number,json:{write:!0}})],I.prototype,"minLength",void 0);let E=I=(0,a._)([(0,c.j)("esri.form.elements.inputs.TextInput")],I),T=B=class extends E{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new B({maxLength:this.maxLength,minLength:this.minLength})}};(0,a._)([(0,d.Cb)({type:["barcode-scanner"],json:{read:!1,write:!0}})],T.prototype,"type",void 0);let P=T=B=(0,a._)([(0,c.j)("esri.form.elements.inputs.BarcodeScannerInput")],T),A=W=class extends M{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new W({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],A.prototype,"noValueOptionLabel",void 0),(0,a._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],A.prototype,"showNoValueOption",void 0),(0,a._)([(0,d.Cb)({type:["combo-box"],json:{read:!1,write:!0}})],A.prototype,"type",void 0);let k=A=W=(0,a._)([(0,c.j)("esri.form.elements.inputs.ComboBoxInput")],A);function O(t){return null!=t?new Date(t):null}function R(t){return t?t.getTime():null}let L=H=class extends M{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,r){return O(r.max)}writeMax(t,r){r.max=R(t)}readMin(t,r){return O(r.min)}writeMin(t,r){r.min=R(t)}clone(){return new H({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};(0,a._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],L.prototype,"includeTime",void 0),(0,a._)([(0,d.Cb)({type:Date,json:{type:Number,write:!0}})],L.prototype,"max",void 0),(0,a._)([(0,p.r)("max")],L.prototype,"readMax",null),(0,a._)([(0,f.c)("max")],L.prototype,"writeMax",null),(0,a._)([(0,d.Cb)({type:Date,json:{type:Number,write:!0}})],L.prototype,"min",void 0),(0,a._)([(0,p.r)("min")],L.prototype,"readMin",null),(0,a._)([(0,f.c)("min")],L.prototype,"writeMin",null),(0,a._)([(0,d.Cb)({type:["datetime-picker"],json:{read:!1,write:!0}})],L.prototype,"type",void 0);let F=L=H=(0,a._)([(0,c.j)("esri.form.elements.inputs.DateTimePickerInput")],L),N=J=class extends M{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new J({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],N.prototype,"noValueOptionLabel",void 0),(0,a._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],N.prototype,"showNoValueOption",void 0),(0,a._)([(0,d.Cb)({type:["radio-buttons"],json:{read:!1,write:!0}})],N.prototype,"type",void 0);let j=N=J=(0,a._)([(0,c.j)("esri.form.elements.inputs.RadioButtonsInput")],N),D=Y=class extends M{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Y({offValue:this.offValue,onValue:this.onValue})}};(0,a._)([(0,d.Cb)({type:[String,Number],json:{write:!0}})],D.prototype,"offValue",void 0),(0,a._)([(0,d.Cb)({type:[String,Number],json:{write:!0}})],D.prototype,"onValue",void 0),(0,a._)([(0,d.Cb)({type:["switch"],json:{read:!1,write:!0}})],D.prototype,"type",void 0);let Z=D=Y=(0,a._)([(0,c.j)("esri.form.elements.inputs.SwitchInput")],D),V=K=class extends E{constructor(t){super(t),this.type="text-area"}clone(){return new K({maxLength:this.maxLength,minLength:this.minLength})}};(0,a._)([(0,d.Cb)({type:["text-area"],json:{read:!1,write:!0}})],V.prototype,"type",void 0);let z=V=K=(0,a._)([(0,c.j)("esri.form.elements.inputs.TextAreaInput")],V),U=X=class extends E{constructor(t){super(t),this.type="text-box"}clone(){return new X({maxLength:this.maxLength,minLength:this.minLength})}};(0,a._)([(0,d.Cb)({type:["text-box"],json:{read:!1,write:!0}})],U.prototype,"type",void 0);let G={base:M,key:"type",typeMap:{"barcode-scanner":P,"combo-box":k,"datetime-picker":F,"radio-buttons":j,switch:Z,"text-area":z,"text-box":U=X=(0,a._)([(0,c.j)("esri.form.elements.inputs.TextBoxInput")],U)}};var q,$,B,W,H,J,Y,K,X,Q,ee=i(43058);let et=Q=class extends b{constructor(t){super(t),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Q({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};(0,a._)([(0,d.Cb)({types:ee.V5,json:{read:{reader:ee.im},write:!0}})],et.prototype,"domain",void 0),(0,a._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],et.prototype,"editable",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],et.prototype,"editableExpression",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],et.prototype,"fieldName",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],et.prototype,"hint",void 0),(0,a._)([(0,d.Cb)({types:G,json:{read:{source:"inputType"},write:{target:"inputType"}}})],et.prototype,"input",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],et.prototype,"requiredExpression",void 0),(0,a._)([(0,d.Cb)({type:String,json:{read:!1,write:!0}})],et.prototype,"type",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],et.prototype,"valueExpression",void 0);let er=et=Q=(0,a._)([(0,c.j)("esri.form.elements.FieldElement")],et);var ei,es=i(62799);let en=ei=class extends b{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new ei({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:(0,u.d9)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};(0,a._)([(0,d.Cb)({type:Number,json:{write:!0}})],en.prototype,"displayCount",void 0),(0,a._)([(0,d.Cb)({type:["list"],json:{write:!0}})],en.prototype,"displayType",void 0),(0,a._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],en.prototype,"editable",void 0),(0,a._)([(0,d.Cb)({type:[es.Z],json:{write:!0}})],en.prototype,"orderByFields",void 0),(0,a._)([(0,d.Cb)({type:Number,json:{write:!0}})],en.prototype,"relationshipId",void 0),(0,a._)([(0,d.Cb)({type:["relationship"],json:{read:!1,write:!0}})],en.prototype,"type",void 0);let eo=en=ei=(0,a._)([(0,c.j)("esri.form.elements.RelationshipElement")],en);function ea(t){return{typesWithGroup:{base:b,key:"type",typeMap:{attachment:S,field:er,group:t,relationship:eo}},typesWithoutGroup:{base:b,key:"type",typeMap:{attachment:S,field:er,relationship:eo}}}}function el(t,r,i=!0){if(!t)return null;let s=i?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return t.filter(t=>s[t.type]).map(t=>s[t.type].fromJSON(t))}function eu(t,r,i=!0){if(!t)return null;let s=i?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return t.filter(t=>s[t.type]).map(t=>t.toJSON())}function ed(t,r,i=!0){return t?t.map(t=>(0,y.N7)(i?r.typesWithGroup:r.typesWithoutGroup,t)):null}let eh=s=class extends b{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return ed(t,ep,!1)}readElements(t,r){return el(r.formElements,ep,!1)}writeElements(t,r){r.formElements=eu(t,ep,!1)}clone(){return new s({description:this.description,elements:(0,u.d9)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,a._)([(0,d.Cb)({json:{write:!0}})],eh.prototype,"elements",void 0),(0,a._)([(0,h.p)("elements")],eh.prototype,"castElements",null),(0,a._)([(0,p.r)("elements",["formElements"])],eh.prototype,"readElements",null),(0,a._)([(0,f.c)("elements")],eh.prototype,"writeElements",null),(0,a._)([(0,d.Cb)({type:["collapsed","expanded"],json:{write:!0}})],eh.prototype,"initialState",void 0),(0,a._)([(0,d.Cb)({type:String,json:{read:!1,write:!0}})],eh.prototype,"type",void 0);let ep=ea(eh=s=(0,a._)([(0,c.j)("esri.form.elements.GroupElement")],eh)),ec=ea(eh),ef=n=class extends l.wq{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return ed(t,ec)}readElements(t,r){return el(r.formElements,ec)}writeElements(t,r){r.formElements=eu(t,ec)}clone(){return new n({description:this.description,expressionInfos:(0,u.d9)(this.expressionInfos),elements:(0,u.d9)(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],ef.prototype,"description",void 0),(0,a._)([(0,d.Cb)({json:{write:!0}})],ef.prototype,"elements",void 0),(0,a._)([(0,h.p)("elements")],ef.prototype,"castElements",null),(0,a._)([(0,p.r)("elements",["formElements"])],ef.prototype,"readElements",null),(0,a._)([(0,f.c)("elements")],ef.prototype,"writeElements",null),(0,a._)([(0,d.Cb)({type:[g],json:{write:!0}})],ef.prototype,"expressionInfos",void 0),(0,a._)([(0,d.Cb)({type:Boolean,json:{default:!1,write:!0}})],ef.prototype,"preserveFieldValuesWhenHidden",void 0),(0,a._)([(0,d.Cb)({type:String,json:{write:!0}})],ef.prototype,"title",void 0);let ey=ef=n=(0,a._)([(0,c.j)("esri.form.FormTemplate")],ef)},64012:(t,r,i)=>{"use strict";i.d(r,{qM:()=>h});var s=i(21314),n=i(18721),o=i(29098),a=i(13345),l=i(46472),u=i(24539),d=i(39442);i(371),i(34351),i(95758);let h={base:o.Z,key:"type",typeMap:{extent:n.Z,multipoint:a.Z,point:l.Z,polyline:d.Z,polygon:u.Z}};(0,s.N7)(h)},18721:(t,r,i)=>{"use strict";i.d(r,{Z:()=>b});var s,n=i(24765),o=i(82639),a=i(32121),l=i(53919),u=(i(99950),i(21314),i(30407)),d=i(29098),h=i(46472),p=i(371),c=i(35864),f=i(97261),y=i(32488),m=i(77056);function g(t,r,i){return null==r?i:null==i?r:t(r,i)}let _=s=class extends d.Z{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,r,i,s,n){return t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof t?(t.spatialReference=null==t.spatialReference?p.Z.WGS84:t.spatialReference,t):{xmin:t,ymin:r,xmax:i,ymax:s,spatialReference:n??p.Z.WGS84}}static fromBounds(t,r){return new s({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:r})}static fromPoint(t){return new s({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){let t=new h.Z({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){let r=this.center;return null!=t.z&&this.hasZ?this.offset(t.x-r.x,t.y-r.y,t.z-r.z):this.offset(t.x-r.x,t.y-r.y)}clone(){let t=new s;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,null!=this.zmin&&(t.zmin=this.zmin,t.zmax=this.zmax),null!=this.mmin&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;let r=this.spatialReference,i=t.spatialReference;return r&&i&&!r.equals(i)&&(0,m.Q8)(r,i)&&(t=r.isWebMercator?(0,m.$)(t):(0,m.Sx)(t,!0)),"point"===t.type?(0,c.aV)(this,t):"extent"===t.type&&(0,c.uP)(this,t)}equals(t){if(this===t)return!0;if((0,o.Wi)(t))return!1;let r=this.spatialReference,i=t.spatialReference;return r&&i&&!r.equals(i)&&(0,m.Q8)(r,i)&&(t=r.isWebMercator?(0,m.$)(t):(0,m.Sx)(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){let r=.5*(1-t),i=this.width*r,s=this.height*r;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){let t=(this.zmax-this.zmin)*r;this.zmin+=t,this.zmax-=t}if(this.hasM){let t=(this.mmax-this.mmin)*r;this.mmin+=t,this.mmax-=t}return this}intersects(t){if((0,o.Wi)(t))return!1;"mesh"===t.type&&(t=t.extent);let r=this.spatialReference,i=t.spatialReference;return r&&i&&!(0,y.fS)(r,i)&&(0,m.Q8)(r,i)&&(t=r.isWebMercator?(0,m.$)(t):(0,m.Sx)(t,!0)),(0,f.IY)(t.type)(this,t)}normalize(){let t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,r,i){return this.xmin+=t,this.ymin+=r,this.xmax+=t,this.ymax+=r,null!=i&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=g(Math.min,this.zmin,t.zmin),this.zmax=g(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=g(Math.min,this.mmin,t.mmin),this.mmax=g(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:(0,o.Wi)(t)||!this.intersects(t)?null:(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=g(Math.max,this.zmin,t.zmin),this.zmax=g(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=g(Math.max,this.mmin,t.mmin),this.mmax=g(Math.min,this.mmax,t.mmax)),this)}toJSON(t){return this.write({},t)}_shiftCM(t=(0,y.C5)(this.spatialReference)){if(!t||!this.spatialReference)return this;let r=this.spatialReference,i=this._getCM(t);if(i){let s=r.isWebMercator?(0,m.Sx)(i):i;this.xmin-=i.x,this.xmax-=i.x,r.isWebMercator||(s.x=this._normalizeX(s.x,t).x),this.spatialReference=new p.Z((0,a.gx)((r.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(t){let r=null,[i,s]=t.valid,n=this.xmin,o=this.xmax;return n>=i&&n<=s&&o>=i&&o<=s||(r=this.center),r}_normalize(t,r,i){let s=this.spatialReference;if(!s)return this;let n=i??(0,y.C5)(s);if(null==n)return this;let o=this._getParts(n).map(t=>t.extent);if(o.length<2)return o[0]||this;if(o.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(r)return o;let a=!0,l=!0;return o.forEach(t=>{t.hasZ||(a=!1),t.hasM||(l=!1)}),{rings:o.map(t=>{let r=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(a){let i=(t.zmax-t.zmin)/2;for(let t=0;t<r.length;t++)r[t].push(i)}if(l){let i=(t.mmax-t.mmin)/2;for(let t=0;t<r.length;t++)r[t].push(i)}return r}),hasZ:a,hasM:l,spatialReference:s}}_getParts(t){let r=this.cache._parts;if(!r){let i;r=[];let{ymin:n,ymax:o,spatialReference:a}=this,l=this.width,u=this.xmin,d=this.xmax,[h,p]=(t=t||(0,y.C5)(a)).valid,c=(i=this._normalizeX(this.xmin,t)).x,f=i.frameId,m=(i=this._normalizeX(this.xmax,t)).x,g=i.frameId,_=c===m&&l>0;if(l>2*p){let t=new s(u<d?c:m,n,p,o,a),i=new s(h,n,u<d?m:c,o,a),l=new s(0,n,p,o,a),y=new s(h,n,0,o,a),_=[],b=[];t.contains(l)&&_.push(f),t.contains(y)&&b.push(f),i.contains(l)&&_.push(g),i.contains(y)&&b.push(g);for(let t=f+1;t<g;t++)_.push(t),b.push(t);r.push({extent:t,frameIds:[f]},{extent:i,frameIds:[g]},{extent:l,frameIds:_},{extent:y,frameIds:b})}else c>m||_?r.push({extent:new s(c,n,p,o,a),frameIds:[f]},{extent:new s(h,n,m,o,a),frameIds:[g]}):r.push({extent:new s(c,n,m,o,a),frameIds:[f]});this.cache._parts=r}let i=this.hasZ,n=this.hasM;if(i||n){let t={};i&&(t.zmin=this.zmin,t.zmax=this.zmax),n&&(t.mmin=this.mmin,t.mmax=this.mmax);for(let i=0;i<r.length;i++)r[i].extent.set(t)}return r}_normalizeX(t,r){let[i,s]=r.valid,n=2*s,o,a=0;return t>s?(o=Math.ceil(Math.abs(t-s)/n),t-=o*n,a=o):t<i&&(o=Math.ceil(Math.abs(t-i)/n),t+=o*n,a=-o),{x:t,frameId:a}}};(0,n._)([(0,l.Cb)({readOnly:!0})],_.prototype,"cache",null),(0,n._)([(0,l.Cb)({readOnly:!0})],_.prototype,"center",null),(0,n._)([(0,l.Cb)({readOnly:!0})],_.prototype,"extent",null),(0,n._)([(0,l.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],_.prototype,"hasM",null),(0,n._)([(0,l.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],_.prototype,"hasZ",null),(0,n._)([(0,l.Cb)({readOnly:!0})],_.prototype,"height",null),(0,n._)([(0,l.Cb)({readOnly:!0})],_.prototype,"width",null),(0,n._)([(0,l.Cb)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],_.prototype,"xmin",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],_.prototype,"ymin",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],_.prototype,"mmin",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],_.prototype,"zmin",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],_.prototype,"xmax",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],_.prototype,"ymax",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],_.prototype,"mmax",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],_.prototype,"zmax",void 0),(_=s=(0,n._)([(0,u.j)("esri.geometry.Extent")],_)).prototype.toJSON.isDefaultToJSON=!0;let b=_},29098:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s=i(24765),n=i(72140),o=i(53919),a=(i(99950),i(21314),i(71169)),l=i(30407),u=i(371);let d=class extends n.wq{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=u.Z.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof u.Z)return t;if(null!=t){let i=new u.Z;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};(0,s._)([(0,o.Cb)()],d.prototype,"type",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],d.prototype,"cache",null),(0,s._)([(0,o.Cb)({readOnly:!0})],d.prototype,"extent",null),(0,s._)([(0,o.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d.prototype,"hasM",void 0),(0,s._)([(0,o.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d.prototype,"hasZ",void 0),(0,s._)([(0,o.Cb)({type:u.Z,json:{write:!0}})],d.prototype,"spatialReference",void 0),(0,s._)([(0,a.r)("spatialReference")],d.prototype,"readSpatialReference",null);let h=d=(0,s._)([(0,l.j)("esri.geometry.Geometry")],d)},20681:(t,r,i)=>{"use strict";i.d(r,{Z:()=>v});var s,n=i(24765),o=i(99950),a=i(84576),l=i(72140),u=i(35562),d=i(19687),h=i(53919),p=(i(21314),i(71169)),c=i(30407),f=i(62300);let y=(0,a.w)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),m=y.jsonValues.slice();(0,o.e$)(m,"orthometric");let g=(0,a.w)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"}),_=s=class extends l.wq{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,r,i){return y.write(t,r,i)}readHeightModel(t,r,i){var s;return y.read(t)||(i&&i.messages&&i.messages.push((s={context:i},new d.Z("height-model:unsupported",`Height model of value '${t}' is not supported`,s))),null)}readHeightUnit(t,r,i){return g.read(t)||(i&&i.messages&&i.messages.push(b(t,{context:i})),null)}readHeightUnitService(t,r,i){return(0,u.$C)(t)||g.read(t)||(i&&i.messages&&i.messages.push(b(t,{context:i})),null)}readVertCRS(t,r){return r.vertCRS||r.ellipsoid||r.geoid}clone(){return new s({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,r){let i=(0,u.cM)(r);return new s({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,r){return r={origin:"web-scene",...r},super.write(t,r)}static fromJSON(t){if(!t)return null;let r=new s;return r.read(t,{origin:"web-scene"}),r}};function b(t,r){return new d.Z("height-unit:unsupported",`Height unit of value '${t}' is not supported`,r)}(0,n._)([(0,h.Cb)({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m,default:"ellipsoidal"}}}})],_.prototype,"heightModel",void 0),(0,n._)([(0,f.c)("web-scene","heightModel")],_.prototype,"writeHeightModel",null),(0,n._)([(0,p.r)(["web-scene","service"],"heightModel")],_.prototype,"readHeightModel",null),(0,n._)([(0,h.Cb)({type:g.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g.jsonValues,write:g.write}}}})],_.prototype,"heightUnit",void 0),(0,n._)([(0,p.r)("web-scene","heightUnit")],_.prototype,"readHeightUnit",null),(0,n._)([(0,p.r)("service","heightUnit")],_.prototype,"readHeightUnitService",null),(0,n._)([(0,h.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],_.prototype,"vertCRS",void 0),(0,n._)([(0,p.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],_.prototype,"readVertCRS",null);let v=_=s=(0,n._)([(0,c.j)("esri.geometry.HeightModelInfo")],_)},13345:(t,r,i)=>{"use strict";i.d(r,{Z:()=>m});var s,n=i(24765),o=i(59118),a=i(53919),l=(i(21314),i(30407)),u=i(62300),d=i(18721),h=i(29098),p=i(46472),c=i(2966);function f(t){return(r,i)=>null==r?i:null==i?r:t(r,i)}let y=s=class extends h.Z{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,r){if(!t&&!r)return{};let i={};Array.isArray(t)?(i.points=t,i.spatialReference=r):t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));let s=i.points&&i.points[0];return s&&(void 0===i.hasZ&&void 0===i.hasM?(i.hasZ=s.length>2,i.hasM=!1):void 0===i.hasZ?i.hasZ=s.length>3:void 0===i.hasM&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){let t=this.points;if(!t.length)return null;let r=new d.Z,i=this.hasZ,s=this.hasM,n=i?3:2,o=t[0],a=f(Math.min),l=f(Math.max),u,h,p,c,[y,m]=o,[g,_]=o;for(let r=0,o=t.length;r<o;r++){let o=t[r],[d,f]=o;if(y=a(y,d),m=a(m,f),g=l(g,d),_=l(_,f),i&&o.length>2){let t=o[2];u=a(u,t),p=l(p,t)}if(s&&o.length>n){let t=o[n];h=a(h,t),c=l(c,t)}}return r.xmin=y,r.ymin=m,r.xmax=g,r.ymax=_,r.spatialReference=this.spatialReference,i?(r.zmin=u,r.zmax=p):(r.zmin=void 0,r.zmax=void 0),s?(r.mmin=h,r.mmax=c):(r.mmin=void 0,r.mmax=void 0),r}writePoints(t,r){r.points=(0,o.d9)(this.points)}addPoint(t){return(0,c.l)(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){let t={points:(0,o.d9)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new s(t)}getPoint(t){if(!this._validateInputs(t))return null;let r=this.points[t],i={x:r[0],y:r[1],spatialReference:this.spatialReference},s=2;return this.hasZ&&(i.z=r[2],s=3),this.hasM&&(i.m=r[s]),new p.Z(i)}removePoint(t){if(!this._validateInputs(t))return null;let r=new p.Z(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),r}setPoint(t,r){return this._validateInputs(t)&&((0,c.l)(this,r),Array.isArray(r)||(r=r.toArray()),this.points[t]=r,this.notifyChange("points")),this}toJSON(t){return this.write({},t)}_validateInputs(t){return null!=t&&t>=0&&t<this.points.length}};(0,n._)([(0,a.Cb)({readOnly:!0})],y.prototype,"cache",null),(0,n._)([(0,a.Cb)()],y.prototype,"extent",null),(0,n._)([(0,a.Cb)({type:[[Number]],json:{write:{isRequired:!0}}})],y.prototype,"points",void 0),(0,n._)([(0,u.c)("points")],y.prototype,"writePoints",null),(y=s=(0,n._)([(0,l.j)("esri.geometry.Multipoint")],y)).prototype.toJSON.isDefaultToJSON=!0;let m=y},46472:(t,r,i)=>{"use strict";i.d(r,{Z:()=>w});var s,n=i(24765),o=i(66150),a=i(82639),l=i(53919),u=(i(99950),i(36844)),d=i(71169),h=i(30407),p=i(62300),c=i(21314),f=i(29098),y=i(371),m=i(32488),g=i(77056);let _=[0,0];function b(t){return t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)}let v=s=class extends f.Z{constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(t,r){r._set("x",t._get("x")),r._set("y",t._get("y")),r._set("z",t._get("z")),r._set("m",t._get("m"));let i=t._get("spatialReference");r._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(t,r,i,s,n){let a;if(Array.isArray(t))a=t,n=r,t=a[0],r=a[1],i=a[2],s=a[3];else if(t&&"object"==typeof t){if(t=null!=(a=t).x?a.x:a.longitude,r=null!=a.y?a.y:a.latitude,i=a.z,s=a.m,(n=a.spatialReference)&&"esri.geometry.SpatialReference"!==n.declaredClass&&(n=new y.Z(n)),null!=a.longitude||null!=a.latitude){if(null==a.longitude)o.Z.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(null==a.latitude)o.Z.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!a.declaredClass&&n&&n.isWebMercator){let i=(0,g.hG)(a.longitude,a.latitude,_);t=i[0],r=i[1]}}}else b(i)?(n=i,i=null):b(s)&&(n=s,s=null);let l={x:t,y:r};return null==l.x&&null!=l.y?o.Z.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):null==l.y&&null!=l.x&&o.Z.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),null!=n&&(l.spatialReference=n),null!=i&&(l.z=i),null!=s&&(l.m=s),l}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(t){t!==(void 0!==this._get("m"))&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return void 0!==this.z}set hasZ(t){t!==(void 0!==this._get("z"))&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){let{spatialReference:t,x:r,y:i}=this;if(t){if(t.isWebMercator)return(0,g.R6)(r,i,_)[1];if(t.isGeographic)return i}return null}set latitude(t){let{spatialReference:r,x:i}=this;null!=t&&r&&(r.isWebMercator?this._set("y",(0,g.hG)(i,t,_)[1]):r.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){let{x:t,y:r,spatialReference:i}=this;if(i){if(i.isWebMercator)return(0,g.R6)(t,r,_)[0];if(i.isGeographic)return t}return null}set longitude(t){let{y:r,spatialReference:i}=this;null!=t&&i&&(i.isWebMercator?this._set("x",(0,g.hG)(t,r,_)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,r,i){r[i]=isNaN(t)?"NaN":t}readX(t){return"string"==typeof t?NaN:t}clone(){let t=new s;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return s.copy(t,this),this}equals(t){if((0,a.Wi)(t))return!1;let{x:r,y:i,z:s,m:n,spatialReference:o}=this,{z:l,m:u}=t,{x:d,y:h,spatialReference:p}=t;if(!o.equals(p)){if(o.isWebMercator&&p.isWGS84)[d,h]=(0,g.hG)(d,h),p=o;else{if(!o.isWGS84||!p.isWebMercator)return!1;[d,h]=(0,g.R6)(d,h),p=o}}return r===d&&i===h&&s===l&&n===u&&o.wkid===p.wkid}offset(t,r,i){return this.x+=t,this.y+=r,null!=i&&(this.z=(this.z??0)+i),this}normalize(){let t;if(!this.spatialReference)return this;let r=(0,m.C5)(this.spatialReference);if(!r)return this;let i=this.x,[s,n]=r.valid,o=2*n;return i>n?(t=Math.ceil(Math.abs(i-n)/o),i-=t*o):i<s&&(t=Math.ceil(Math.abs(i-s)/o),i+=t*o),this._set("x",i),this}distance(t){return function(t,r){let i=t.x-r.x,s=t.y-r.y,n=t.hasZ&&r.hasZ?t.z-r.z:0;return Math.sqrt(i*i+s*s+n*n)}(this,t)}toArray(){let t=this.hasZ,r=this.hasM;return t&&r?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:r?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};(0,n._)([(0,l.Cb)({readOnly:!0})],v.prototype,"cache",null),(0,n._)([(0,l.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],v.prototype,"hasM",null),(0,n._)([(0,l.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],v.prototype,"hasZ",null),(0,n._)([(0,l.Cb)({type:Number})],v.prototype,"latitude",null),(0,n._)([(0,l.Cb)({type:Number})],v.prototype,"longitude",null),(0,n._)([(0,l.Cb)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),(0,u.p)(t=>isNaN(t)?t:(0,c.q9)(t))],v.prototype,"x",void 0),(0,n._)([(0,p.c)("x")],v.prototype,"writeX",null),(0,n._)([(0,d.r)("x")],v.prototype,"readX",null),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],v.prototype,"y",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],v.prototype,"z",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],v.prototype,"m",void 0),(v=s=(0,n._)([(0,h.j)("esri.geometry.Point")],v)).prototype.toJSON.isDefaultToJSON=!0;let w=v},24539:(t,r,i)=>{"use strict";i.d(r,{Z:()=>M});var s,n=i(24765),o=i(99950),a=i(59118),l=i(82639),u=i(53919),d=(i(21314),i(30407)),h=i(62300),p=i(18721),c=i(29098),f=i(46472),y=i(371),m=i(77846),g=i(35864),_=i(48498),b=i(48352),v=i(97261),w=i(77056),C=i(2966);function S(t){return!Array.isArray(t[0])}let x=s=class extends c.Z{constructor(...t){super(...t),this.rings=[],this.type="polygon"}static fromExtent(t){let r=t.clone().normalize(),i=t.spatialReference,n=!1,o=!1;for(let t of r)t.hasZ&&(n=!0),t.hasM&&(o=!0);let a={rings:r.map(t=>{let r=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(n&&t.hasZ){let i=t.zmin+.5*(t.zmax-t.zmin);for(let t=0;t<r.length;t++)r[t].push(i)}if(o&&t.hasM){let i=t.mmin+.5*(t.mmax-t.mmin);for(let t=0;t<r.length;t++)r[t].push(i)}return r}),spatialReference:i};return n&&(a.hasZ=!0),o&&(a.hasM=!0),new s(a)}normalizeCtorArgs(t,r){let i,s,n=null,o=null;return t&&!Array.isArray(t)?(n=t.rings?t.rings:null,r||(t.spatialReference?r=t.spatialReference:t.rings||(r=t)),i=t.hasZ,s=t.hasM):n=t,n=n||[],r=r||y.Z.WGS84,n.length&&n[0]&&null!=n[0][0]&&"number"==typeof n[0][0]&&(n=[n]),(o=n[0]&&n[0][0])&&(void 0===i&&void 0===s?(i=o.length>2,s=o.length>3):void 0===i?i=s?o.length>3:o.length>2:void 0===s&&(s=i?o.length>3:o.length>2)),{rings:n,spatialReference:r,hasZ:i,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){let t=(0,m.tO)(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;let r=new f.Z;return r.x=t[0],r.y=t[1],r.spatialReference=this.spatialReference,this.hasZ&&(r.z=t[2]),r}get extent(){let{spatialReference:t}=this,r=(0,b._w)(this);if(!r)return null;let i=new p.Z(r);return i.spatialReference=t,i}get isSelfIntersecting(){return(0,v.Ff)(this.rings)}writeRings(t,r){r.rings=(0,a.d9)(this.rings)}addRing(t){if(!t)return;let r=this.rings,i=r.length;if(S(t)){let s=[];for(let r=0,i=t.length;r<i;r++)s[r]=t[r].toArray();r[i]=s}else r[i]=t.concat();return this.notifyChange("rings"),this}clone(){let t=new s;return t.spatialReference=this.spatialReference,t.rings=(0,a.d9)(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if((0,l.Wi)(t))return!1;let r=this.spatialReference,i=t.spatialReference;if((0,l.pC)(r)!==(0,l.pC)(i)||(0,l.pC)(r)&&(0,l.pC)(i)&&!r.equals(i)||this.rings.length!==t.rings.length)return!1;let s=([t,r,i,s],[n,o,a,l])=>t===n&&r===o&&(null==i&&null==a||i===a)&&(null==s&&null==l||s===l);for(let r=0;r<this.rings.length;r++){let i=this.rings[r],n=t.rings[r];if(!(0,o.fS)(i,n,s))return!1}return!0}contains(t){if(!t)return!1;let r=(0,w.iV)(t,this.spatialReference);return(0,g.CI)(this,(0,l.pC)(r)?r:t)}isClockwise(t){let r;return r=S(t)?t.map(t=>this.hasZ?this.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y]):t,(0,_.bu)(r,this.hasM,this.hasZ)}getPoint(t,r){if(!this._validateInputs(t,r))return null;let i=this.rings[t][r],s=this.hasZ,n=this.hasM;return s&&!n?new f.Z(i[0],i[1],i[2],void 0,this.spatialReference):n&&!s?new f.Z(i[0],i[1],void 0,i[2],this.spatialReference):s&&n?new f.Z(i[0],i[1],i[2],i[3],this.spatialReference):new f.Z(i[0],i[1],this.spatialReference)}insertPoint(t,r,i){return this._validateInputs(t,r,!0)&&((0,C.l)(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(r,0,i),this.notifyChange("rings")),this}removePoint(t,r){if(!this._validateInputs(t,r))return null;let i=new f.Z(this.rings[t].splice(r,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;let r=this.rings.splice(t,1)[0],i=this.spatialReference,s=r.map(t=>new f.Z(t,i));return this.notifyChange("rings"),s}setPoint(t,r,i){return this._validateInputs(t,r)&&((0,C.l)(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][r]=i,this.notifyChange("rings")),this}_validateInputs(t,r,i=!1){if(null==t||t<0||t>=this.rings.length)return!1;if(null!=r){let s=this.rings[t];if(i&&(r<0||r>s.length)||!i&&(r<0||r>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};(0,n._)([(0,u.Cb)({readOnly:!0})],x.prototype,"cache",null),(0,n._)([(0,u.Cb)({readOnly:!0})],x.prototype,"centroid",null),(0,n._)([(0,u.Cb)({readOnly:!0})],x.prototype,"extent",null),(0,n._)([(0,u.Cb)({readOnly:!0})],x.prototype,"isSelfIntersecting",null),(0,n._)([(0,u.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],x.prototype,"rings",void 0),(0,n._)([(0,h.c)("rings")],x.prototype,"writeRings",null),(x=s=(0,n._)([(0,d.j)("esri.geometry.Polygon")],x)).prototype.toJSON.isDefaultToJSON=!0;let M=x},39442:(t,r,i)=>{"use strict";i.d(r,{Z:()=>g});var s,n=i(24765),o=i(59118),a=i(53919),l=(i(21314),i(30407)),u=i(62300),d=i(18721),h=i(29098),p=i(46472),c=i(371),f=i(48352),y=i(2966);let m=s=class extends h.Z{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,r){let i,s,n=null,o=null;return t&&!Array.isArray(t)?(n=t.paths?t.paths:null,r||(t.spatialReference?r=t.spatialReference:t.paths||(r=t)),i=t.hasZ,s=t.hasM):n=t,n=n||[],r=r||c.Z.WGS84,n.length&&n[0]&&null!=n[0][0]&&"number"==typeof n[0][0]&&(n=[n]),(o=n[0]&&n[0][0])&&(void 0===i&&void 0===s?(i=o.length>2,s=!1):void 0===i?i=!s&&o.length>3:void 0===s&&(s=!i&&o.length>3)),{paths:n,spatialReference:r,hasZ:i,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){let{spatialReference:t}=this,r=(0,f.Wn)(this);if(!r)return null;let i=new d.Z(r);return i.spatialReference=t,i}writePaths(t,r){r.paths=(0,o.d9)(this.paths)}addPath(t){if(!t)return;let r=this.paths,i=r.length;if(Array.isArray(t[0]))r[i]=t.concat();else{let s=[];for(let r=0,i=t.length;r<i;r++)s[r]=t[r].toArray();r[i]=s}return this.notifyChange("paths"),this}clone(){let t=new s;return t.spatialReference=this.spatialReference,t.paths=(0,o.d9)(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,r){if(!this._validateInputs(t,r))return null;let i=this.paths[t][r],s=this.hasZ,n=this.hasM;return s&&!n?new p.Z(i[0],i[1],i[2],void 0,this.spatialReference):n&&!s?new p.Z(i[0],i[1],void 0,i[2],this.spatialReference):s&&n?new p.Z(i[0],i[1],i[2],i[3],this.spatialReference):new p.Z(i[0],i[1],this.spatialReference)}insertPoint(t,r,i){return this._validateInputs(t,r,!0)&&((0,y.l)(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(r,0,i),this.notifyChange("paths")),this}removePath(t){if(!this._validateInputs(t,null))return null;let r=this.paths.splice(t,1)[0],i=this.spatialReference,s=r.map(t=>new p.Z(t,i));return this.notifyChange("paths"),s}removePoint(t,r){if(!this._validateInputs(t,r))return null;let i=new p.Z(this.paths[t].splice(r,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,r,i){return this._validateInputs(t,r)&&((0,y.l)(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][r]=i,this.notifyChange("paths")),this}_validateInputs(t,r,i=!1){if(null==t||t<0||t>=this.paths.length)return!1;if(null!=r){let s=this.paths[t];if(i&&(r<0||r>s.length)||!i&&(r<0||r>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};(0,n._)([(0,a.Cb)({readOnly:!0})],m.prototype,"cache",null),(0,n._)([(0,a.Cb)({readOnly:!0})],m.prototype,"extent",null),(0,n._)([(0,a.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],m.prototype,"paths",void 0),(0,n._)([(0,u.c)("paths")],m.prototype,"writePaths",null),(m=s=(0,n._)([(0,l.j)("esri.geometry.Polyline")],m)).prototype.toJSON.isDefaultToJSON=!0;let g=m},371:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s,n=i(24765),o=i(72140),a=i(59118),l=i(21314),u=i(53919),d=i(30407),h=i(62300),p=i(32488);let c=s=class extends o.wq{constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(t){if(!t)return null;if(t.wkid){if(102100===t.wkid)return s.WebMercator;if(4326===t.wkid)return s.WGS84}let r=new s;return r.read(t),r}normalizeCtorArgs(t){return t&&"object"==typeof t?t:{["string"==typeof t?"wkt":"wkid"]:t}}get isWGS84(){return(0,p.oR)(this)}get isWebMercator(){return(0,p.sS)(this)}get isGeographic(){return(0,p.sT)(this)}get isWrappable(){return(0,p.MP)(this)}writeWkt(t,r){this.wkid||(r.wkt=t)}clone(){if(this===s.WGS84)return s.WGS84;if(this===s.WebMercator)return s.WebMercator;let t=new s;return null!=this.wkid?(t.wkid=this.wkid,null!=this.latestWkid&&(t.latestWkid=this.latestWkid),null!=this.vcsWkid&&(t.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(t.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=(0,a.d9)(this.imageCoordinateSystem)),t}equals(t){if(null==t)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==t.imageCoordinateSystem)return!1;let{id:r,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:s}=t.imageCoordinateSystem,n=this.imageCoordinateSystem;return null==r||s?JSON.stringify(n)===JSON.stringify(t.imageCoordinateSystem):i?n.id===r&&n.referenceServiceName===i:n.id===r}return(0,p.fS)(this,t)}toJSON(t){return this.write(void 0,t)}};c.GCS_NAD_1927=null,c.WGS84=null,c.WebMercator=null,c.PlateCarree=null,(0,n._)([(0,u.Cb)({readOnly:!0})],c.prototype,"isWGS84",null),(0,n._)([(0,u.Cb)({readOnly:!0})],c.prototype,"isWebMercator",null),(0,n._)([(0,u.Cb)({readOnly:!0})],c.prototype,"isGeographic",null),(0,n._)([(0,u.Cb)({readOnly:!0})],c.prototype,"isWrappable",null),(0,n._)([(0,u.Cb)({type:l.z8,json:{write:!0}})],c.prototype,"latestWkid",void 0),(0,n._)([(0,u.Cb)({type:l.z8,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkt}}}}}}})],c.prototype,"wkid",void 0),(0,n._)([(0,u.Cb)({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkid}}}}}}})],c.prototype,"wkt",void 0),(0,n._)([(0,h.c)("wkt"),(0,h.c)("web-scene","wkt")],c.prototype,"writeWkt",null),(0,n._)([(0,u.Cb)({type:l.z8,json:{write:!0}})],c.prototype,"vcsWkid",void 0),(0,n._)([(0,u.Cb)({type:l.z8,json:{write:!0}})],c.prototype,"latestVcsWkid",void 0),(0,n._)([(0,u.Cb)()],c.prototype,"imageCoordinateSystem",void 0),(c=s=(0,n._)([(0,d.j)("esri.geometry.SpatialReference")],c)).prototype.toJSON.isDefaultToJSON=!0,c.GCS_NAD_1927=new c({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),c.WGS84=new c(p.Zn),c.WebMercator=new c(p.R_),c.PlateCarree=new c(p.WR),Object.freeze&&(Object.freeze(c.GCS_NAD_1927),Object.freeze(c.WGS84),Object.freeze(c.WebMercator));let f=c},972:(t,r,i)=>{"use strict";i.d(r,{Up:()=>G,Bm:()=>K,rS:()=>z,iQ:()=>q,kR:()=>F,zD:()=>N,iV:()=>j,CM:()=>J,oj:()=>D,dz:()=>Z,JY:()=>V,KC:()=>W,Wt:()=>$});var s,n,o=i(12790),a=i(5047),l=i(82639),u=i(66138),d=i(35562),h=i(11918),p=i(20209),c=i(20161),f=(i(44834),i(63462)),y=i(18721),m=i(13345),g=i(51037),_=i(46472),b=i(24539),v=i(39442),w=i(34757),C=(i(8865),i(94531));let S=C.sv.radius,x=C.sv.eccentricitySquared,M={a1:S*x,a2:S*x*S*x,a3:S*x*x/2,a4:S*x*S*x*2.5,a5:S*x+S*x*x/2,a6:1-x};C.sv.radius,C.sv.flattening,C.Z1.radius,C.Z1.flattening,C.yr.radius,C.yr.flattening,C.yr.radius;var I=i(34930),E=i(32488),T=i(54023),P=i(46262);let A=null,k=null,O=null,R={},L=new p.s;function F(){return!!A&&(0,g.i)()}function N(t){return(0,l.Wi)(O)&&(O=Promise.all([(0,g.l)(),i.e(962).then(i.bind(i,10962)).then(t=>t.g),i.e(4604).then(i.bind(i,24604))])),O.then(([,r,{hydratedAdapter:i}])=>{(0,u.k_)(t),k=i,(A=r.default)._enableProjection(g.p),L.notify()})}function j(t,r,i=null,s=null){return Array.isArray(t)?0===t.length?[]:D(k,t,t[0].spatialReference,r,i,s):D(k,[t],t.spatialReference,r,i,s)[0]}function D(t,r,i,s,n=null,o=null){if((0,l.Wi)(i)||(0,l.Wi)(s))return r;if(G(i,s,n))return r.map(t=>(0,l.Wg)(t?"x"in t?function(t,r,i,s,n){eP[0]=t.x,eP[1]=t.y;let o=t.z;return eP[2]=void 0!==o?o:0,J(eP,r,0,eP,s,0,1)?(i.x=eP[0],i.y=eP[1],i.spatialReference=s,void 0===o?(i.z=void 0,i.hasZ=!1):(i.z=eP[2],i.hasZ=!0),void 0===t.m?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}(t,i,new _.Z,s,0):"xmin"in t?function(t,r,i,s,n){let{xmin:o,ymin:a,xmax:l,ymax:u,hasZ:d,hasM:h}=t;return H(o,a,d?t.zmin:0,r,eP,s)?(i.xmin=eP[0],i.ymin=eP[1],d&&(i.zmin=eP[2]),H(l,u,d?t.zmax:0,r,eP,s)?(i.xmax=eP[0],i.ymax=eP[1],d&&(i.zmax=eP[2]),h&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=s,i):null):null}(t,i,new y.Z,s,0):"rings"in t?B(t,i,new b.Z,s,0):"paths"in t?function(t,r,i,s,n){let{paths:o,hasZ:a,hasM:l}=t,u=[];return Y(o,a??!1,l??!1,r,u,s,0)?(i.paths=u,i.spatialReference=s,i.hasZ=a,i.hasM=l,i):null}(t,i,new v.Z,s,0):"points"in t?function(t,r,i,s,n){let{points:o,hasZ:a,hasM:l}=t,u=[],d=o.length,h=[];for(let t of o)h.push(t[0],t[1],a?t[2]:0);if(!J(h,r,0,h,s,0,d))return null;for(let t=0;t<d;++t){let r=3*t,i=h[r],s=h[r+1];a&&l?u.push([i,s,h[r+2],o[t][3]]):a?u.push([i,s,h[r+2]]):l?u.push([i,s,o[t][2]]):u.push([i,s])}return i.points=u,i.spatialReference=s,i.hasZ=a,i.hasM=l,i}(t,i,new m.Z,s,0):null:null));if((0,l.Wi)(n)){let t=I.Z.cacheKey(i,s);void 0!==R[t]?n=R[t]:(n=z(i,s,void 0),(0,l.Wi)(n)&&(n=new I.Z),R[t]=n)}if((0,l.Wi)(A)||(0,l.Wi)(t))throw new U;return(0,l.pC)(o)?A._project(t,r,i,s,n,o):A._project(t,r,i,s,n)}function Z(t,r){let i=V([t],r);return(0,l.pC)(i.pending)?{pending:i.pending,geometry:null}:(0,l.pC)(i.geometries)?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function V(t,r){if(!F()){for(let i of t)if((0,l.pC)(i)&&!(0,E.fS)(i.spatialReference,r)&&(0,E.JY)(i.spatialReference)&&(0,E.JY)(r)&&!G(i.spatialReference,r))return(0,h.it)(L),{pending:N(),geometries:null}}return{pending:null,geometries:t.map(t=>(0,l.Wi)(t)?null:(0,E.fS)(t.spatialReference,r)?t:(0,E.JY)(t.spatialReference)&&(0,E.JY)(r)?function(t,r){try{let i=j(t,r);if(null==i)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);let s=(0,P.k)(i.type,t.spatialReference,r);return(0,l.pC)(s)&&s(i),i}catch(t){if(!(t instanceof U))throw t;return null}}(t,r):null)}}function z(t,r,i=null){if((0,l.Wi)(t)||(0,l.Wi)(r))return null;if((0,l.Wi)(A)||(0,l.Wi)(k))throw new U;let s=A._getTransformation(k,t,r,i,i?.spatialReference);return null!==s?I.Z.fromGE(s):null}class U extends o.Z{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function G(t,r,i){return!i&&(!!(0,E.fS)(t,r)||(0,E.JY)(t)&&(0,E.JY)(r)&&!!eb(t,r,eS))}async function q(t,r,i,s){if(F())return(0,u.Yn)(s);if(Array.isArray(t)){for(let{source:r,dest:i,geographicTransformation:n}of t)if(!G(r,i,n))return N(s)}else if(!G(t,r,i))return N(s);return(0,u.Yn)(s)}function $(t,r,i=r.spatialReference,s=0){return(0,l.pC)(t.spatialReference)&&(0,l.pC)(i)&&(0,l.pC)(B(t,t.spatialReference,r,i,s))}function B(t,r,i,s,n){let{rings:o,hasZ:a,hasM:l}=t,u=[];return Y(o,a??!1,l??!1,r,u,s,n)?(i.rings=u,i.spatialReference=s,i.hasZ=a,i.hasM=l,i):null}function W(t,r,i,s=0){eP[0]=t.x,eP[1]=t.y;let n=t.z;return eP[2]=void 0!==n?n:s,J(eP,t.spatialReference,0,r,i,0,1)}function H(t,r,i,s,n,o){return eI[0]=t,eI[1]=r,eI[2]=i,J(eI,s,0,n,o,0,1)}function J(t,r,i,s,n,o,a=1){let u=eb(r,n,eS);if((0,l.Wi)(u))return!1;if(u===et){if(t===s&&i===o)return!0;let r=i+3*a;for(let n=i,a=o;n<r;n++,a++)s[a]=t[n];return!0}let d=i+3*a;for(let r=i,n=o;r<d;r+=3,n+=3)u(t,r,s,n);return!0}function Y(t,r,i,s,n,o,a=0){let l=[];for(let i of t)for(let t of i)l.push(t[0],t[1],r?t[2]:a);if(!J(l,s,0,l,o,0,l.length/3))return!1;let u=0;for(let s of(n.length=0,t)){let t=[];for(let n of s)r&&i?t.push([l[u++],l[u++],l[u++],n[3]]):r?t.push([l[u++],l[u++],l[u++]]):(i?t.push([l[u++],l[u++],n[2]]):t.push([l[u++],l[u++]]),u++);n.push(t)}return!0}function K(t,r,i,s){if((0,l.Wi)(t)||(0,l.Wi)(s))return!1;let o=ee(t,ew),a=ee(s,eC);if(o===a&&!X(a)&&(o!==n.UNKNOWN||(0,E.fS)(t,s)))return(0,c.f)(i,r),!0;if(X(a)){let t=e_[o][n.LON_LAT],s=e_[n.LON_LAT][a];return!(0,l.Wi)(t)&&!(0,l.Wi)(s)&&(t(r,0,eE,0),s(eE,0,eT,0),Q(ex*eE[0],ex*eE[1],i),i[12]=eT[0],i[13]=eT[1],i[14]=eT[2],!0)}if((a===n.WEB_MERCATOR||a===n.PLATE_CARREE)&&(o===n.WGS84||o===n.CGCS2000&&a===n.PLATE_CARREE||o===n.SPHERICAL_ECEF||o===n.WEB_MERCATOR)){let t=e_[o][n.LON_LAT],s=e_[n.LON_LAT][a];return!(0,l.Wi)(t)&&!(0,l.Wi)(s)&&(t(r,0,eE,0),s(eE,0,eT,0),o===n.SPHERICAL_ECEF?(Q(ex*eE[0],ex*eE[1],i),(0,c.t)(i,i)):(0,c.i)(i),i[12]=eT[0],i[13]=eT[1],i[14]=eT[2],!0)}return!1}function X(t){return t===n.SPHERICAL_ECEF||t===n.SPHERICAL_MARS_PCPF||t===n.SPHERICAL_MOON_PCPF}function Q(t,r,i){let s=Math.sin(t),n=Math.cos(t),o=Math.sin(r),a=Math.cos(r);return i[0]=-s,i[4]=-o*n,i[8]=a*n,i[12]=0,i[1]=n,i[5]=-o*s,i[9]=a*s,i[13]=0,i[2]=0,i[6]=a,i[10]=o,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,i}function ee(t,r){return t?r.spatialReference===t?r.spatialReferenceId:(r.spatialReference=t,"metersPerUnit"in r&&(r.metersPerUnit=(0,d.c9)(t,1)),t.wkt===w.GG.wkt?r.spatialReferenceId=n.SPHERICAL_ECEF:(0,E.oR)(t)?r.spatialReferenceId=n.WGS84:(0,E.sS)(t)?r.spatialReferenceId=n.WEB_MERCATOR:(0,E.QM)(t)?r.spatialReferenceId=n.PLATE_CARREE:t.wkt===w.wY.wkt?r.spatialReferenceId=n.WGS84_ECEF:t.wkid===T.W.CGCS2000?r.spatialReferenceId=n.CGCS2000:t.wkt===w.HQ.wkt?r.spatialReferenceId=n.SPHERICAL_MARS_PCPF:t.wkt===w.VY.wkt?r.spatialReferenceId=n.SPHERICAL_MOON_PCPF:(0,E.BZ)(t)?r.spatialReferenceId=n.GCSMARS2000:(0,E.V2)(t)?r.spatialReferenceId=n.GCSMOON2000:r.spatialReferenceId=n.UNKNOWN):n.UNKNOWN}function et(t,r,i,s){t!==i&&(i[s++]=t[r++],i[s++]=t[r++],i[s]=t[r])}function er(t,r,i,s){i[s++]=t[r++]/C.sv.radius*eM,i[s++]=eM*(Math.PI/2-2*Math.atan(Math.exp(-t[r++]/C.sv.radius))),i[s]=t[r]}function ei(t,r,i,s){!function(t,r,i,s,n){let o=.4999999*Math.PI,l=Math.sin((0,a.uZ)(ex*t[r+1],-o,o));i[s++]=ex*t[r]*n.radius,i[s++]=n.halfSemiMajorAxis*Math.log((1+l)/(1-l)),i[s]=t[r+2]}(t,r,i,s,C.sv)}(s=n||(n={}))[s.UNKNOWN=0]="UNKNOWN",s[s.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",s[s.WGS84=2]="WGS84",s[s.WEB_MERCATOR=3]="WEB_MERCATOR",s[s.WGS84_ECEF=4]="WGS84_ECEF",s[s.CGCS2000=5]="CGCS2000",s[s.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",s[s.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",s[s.GCSMARS2000=8]="GCSMARS2000",s[s.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",s[s.GCSMOON2000=10]="GCSMOON2000",s[s.LON_LAT=11]="LON_LAT",s[s.PLATE_CARREE=12]="PLATE_CARREE";let es=C.sv.radius*Math.PI/180,en=180/(C.sv.radius*Math.PI);function eo(t,r,i,s){i[s]=t[r]*es,i[s+1]=t[r+1]*es,i[s+2]=t[r+2]}function ea(t,r,i,s){i[s]=t[r]*en,i[s+1]=t[r+1]*en,i[s+2]=t[r+2]}function el(t,r,i,s,n){let o=n+t[r+2],a=ex*t[r+1],l=ex*t[r],u=Math.cos(a);i[s++]=Math.cos(l)*u*o,i[s++]=Math.sin(l)*u*o,i[s]=Math.sin(a)*o}function eu(t,r,i,s){el(t,r,i,s,C.Z1.radius)}function ed(t,r,i,s){el(t,r,i,s,C.yr.radius)}function eh(t,r,i,s){el(t,r,i,s,C.sv.radius)}function ep(t,r,i,s,n){let o=t[r],l=t[r+1],u=t[r+2],d=Math.sqrt(o*o+l*l+u*u),h=(0,a.Kt)(u/(0===d?1:d));i[s++]=eM*Math.atan2(l,o),i[s++]=eM*h,i[s]=d-n}function ec(t,r,i,s){ep(t,r,i,s,C.Z1.radius)}function ef(t,r,i,s){ep(t,r,i,s,C.yr.radius)}function ey(t,r,i,s){ep(t,r,i,s,C.sv.radius)}function em(t,r,i,s){!function(t,r,i,s,n){let o=ex*t[r],a=ex*t[r+1],l=t[r+2],u=Math.sin(a),d=Math.cos(a),h=n.radius/Math.sqrt(1-n.eccentricitySquared*u*u);i[s++]=(h+l)*d*Math.cos(o),i[s++]=(h+l)*d*Math.sin(o),i[s++]=(h*(1-n.eccentricitySquared)+l)*u}(t,r,i,s,C.sv)}function eg(t,r,i,s){let n,o,a,l,u,d,h,p,c,f,y,m,g,_,b,v,w,S,x,I,E;let T=t[r],P=t[r+1],A=t[r+2];n=Math.abs(A),a=Math.sqrt(o=T*T+P*P),u=Math.sqrt(l=o+A*A),I=Math.atan2(P,T),d=A*A/l,h=o/l,_=M.a2/u,b=M.a3-M.a4/u,h>.3?(x=Math.asin(p=n/u*(1+h*(M.a1+_+d*b)/u)),c=Math.sqrt(1-(f=p*p))):(x=Math.acos(c=a/u*(1-d*(M.a5-_-h*b)/u)),p=Math.sqrt(f=1-c*c)),y=1-C.sv.eccentricitySquared*f,m=C.sv.radius/Math.sqrt(y),g=M.a6*m,_=a-m*c,b=n-g*p,w=c*_+p*b,x+=S=(v=c*b-p*_)/(g/y+w),E=w+v*S/2,A<0&&(x=-x),i[s++]=eM*I,i[s++]=eM*x,i[s]=E}let e_={[n.WGS84]:{[n.CGCS2000]:null,[n.GCSMARS2000]:null,[n.GCSMOON2000]:null,[n.LON_LAT]:et,[n.WGS84_COMPARABLE_LON_LAT]:et,[n.SPHERICAL_ECEF]:eh,[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:ei,[n.PLATE_CARREE]:eo,[n.WGS84]:et,[n.WGS84_ECEF]:em},[n.CGCS2000]:{[n.CGCS2000]:et,[n.GCSMARS2000]:null,[n.GCSMOON2000]:null,[n.LON_LAT]:et,[n.WGS84_COMPARABLE_LON_LAT]:et,[n.SPHERICAL_ECEF]:eh,[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:null,[n.PLATE_CARREE]:eo,[n.WGS84]:null,[n.WGS84_ECEF]:em},[n.GCSMARS2000]:{[n.CGCS2000]:null,[n.GCSMARS2000]:et,[n.GCSMOON2000]:null,[n.LON_LAT]:et,[n.WGS84_COMPARABLE_LON_LAT]:null,[n.SPHERICAL_ECEF]:null,[n.SPHERICAL_MARS_PCPF]:ed,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:null,[n.PLATE_CARREE]:null,[n.WGS84]:null,[n.WGS84_ECEF]:null},[n.GCSMOON2000]:{[n.CGCS2000]:null,[n.GCSMARS2000]:null,[n.GCSMOON2000]:et,[n.LON_LAT]:et,[n.WGS84_COMPARABLE_LON_LAT]:null,[n.SPHERICAL_ECEF]:null,[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:eu,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:null,[n.PLATE_CARREE]:null,[n.WGS84]:null,[n.WGS84_ECEF]:null},[n.WEB_MERCATOR]:{[n.CGCS2000]:null,[n.GCSMARS2000]:null,[n.GCSMOON2000]:null,[n.LON_LAT]:er,[n.WGS84_COMPARABLE_LON_LAT]:er,[n.SPHERICAL_ECEF]:function(t,r,i,s){er(t,r,i,s),eh(i,s,i,s)},[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:et,[n.PLATE_CARREE]:function(t,r,i,s){er(t,r,i,s),eo(i,s,i,s)},[n.WGS84]:er,[n.WGS84_ECEF]:function(t,r,i,s){er(t,r,i,s),em(i,s,i,s)}},[n.WGS84_ECEF]:{[n.CGCS2000]:eg,[n.GCSMARS2000]:null,[n.GCSMOON2000]:null,[n.LON_LAT]:eg,[n.WGS84_COMPARABLE_LON_LAT]:eg,[n.SPHERICAL_ECEF]:function(t,r,i,s){eg(t,r,i,s),eh(i,s,i,s)},[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:function(t,r,i,s){eg(t,r,i,s),ei(i,s,i,s)},[n.PLATE_CARREE]:function(t,r,i,s){eg(t,r,i,s),eo(i,s,i,s)},[n.WGS84]:eg,[n.WGS84_ECEF]:et},[n.SPHERICAL_ECEF]:{[n.CGCS2000]:ey,[n.GCSMARS2000]:null,[n.GCSMOON2000]:null,[n.LON_LAT]:ey,[n.WGS84_COMPARABLE_LON_LAT]:ey,[n.SPHERICAL_ECEF]:et,[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:function(t,r,i,s){ey(t,r,i,s),ei(i,s,i,s)},[n.PLATE_CARREE]:function(t,r,i,s){ey(t,r,i,s),eo(i,s,i,s)},[n.WGS84]:ey,[n.WGS84_ECEF]:function(t,r,i,s){ey(t,r,i,s),em(i,s,i,s)}},[n.SPHERICAL_MARS_PCPF]:{[n.CGCS2000]:null,[n.GCSMARS2000]:ef,[n.GCSMOON2000]:null,[n.LON_LAT]:ef,[n.WGS84_COMPARABLE_LON_LAT]:null,[n.SPHERICAL_ECEF]:null,[n.SPHERICAL_MARS_PCPF]:et,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:null,[n.PLATE_CARREE]:null,[n.WGS84]:null,[n.WGS84_ECEF]:null},[n.SPHERICAL_MOON_PCPF]:{[n.CGCS2000]:null,[n.GCSMARS2000]:null,[n.GCSMOON2000]:ec,[n.LON_LAT]:ec,[n.WGS84_COMPARABLE_LON_LAT]:null,[n.SPHERICAL_ECEF]:null,[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:et,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:null,[n.PLATE_CARREE]:null,[n.WGS84]:null,[n.WGS84_ECEF]:null},[n.UNKNOWN]:{[n.CGCS2000]:null,[n.GCSMARS2000]:null,[n.GCSMOON2000]:null,[n.LON_LAT]:null,[n.WGS84_COMPARABLE_LON_LAT]:null,[n.SPHERICAL_ECEF]:null,[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:et,[n.WEB_MERCATOR]:null,[n.PLATE_CARREE]:null,[n.WGS84]:null,[n.WGS84_ECEF]:null},[n.LON_LAT]:{[n.CGCS2000]:et,[n.GCSMARS2000]:et,[n.GCSMOON2000]:et,[n.LON_LAT]:et,[n.WGS84_COMPARABLE_LON_LAT]:et,[n.SPHERICAL_ECEF]:eh,[n.SPHERICAL_MARS_PCPF]:ed,[n.SPHERICAL_MOON_PCPF]:eu,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:ei,[n.PLATE_CARREE]:eo,[n.WGS84]:et,[n.WGS84_ECEF]:em},[n.WGS84_COMPARABLE_LON_LAT]:{[n.CGCS2000]:null,[n.GCSMARS2000]:null,[n.GCSMOON2000]:null,[n.LON_LAT]:et,[n.WGS84_COMPARABLE_LON_LAT]:et,[n.SPHERICAL_ECEF]:eh,[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:null,[n.PLATE_CARREE]:eo,[n.WGS84]:et,[n.WGS84_ECEF]:em},[n.PLATE_CARREE]:{[n.CGCS2000]:ea,[n.GCSMARS2000]:null,[n.GCSMOON2000]:null,[n.LON_LAT]:ea,[n.WGS84_COMPARABLE_LON_LAT]:ea,[n.SPHERICAL_ECEF]:function(t,r,i,s){ea(t,r,i,s),eh(i,s,i,s)},[n.SPHERICAL_MARS_PCPF]:null,[n.SPHERICAL_MOON_PCPF]:null,[n.UNKNOWN]:null,[n.WEB_MERCATOR]:function(t,r,i,s){ea(t,r,i,s),ei(i,s,i,s)},[n.PLATE_CARREE]:et,[n.WGS84]:ea,[n.WGS84_ECEF]:function(t,r,i,s){ea(t,r,i,s),em(i,s,i,s)}}};function eb(t,r,i=ev()){return(0,l.Wi)(t)||(0,l.Wi)(r)?null:function(t,r,i){if((0,l.Wi)(t)||(0,l.Wi)(r)||i.source.spatialReference===t&&i.dest.spatialReference===r)return i;let s=ee(t,i.source),o=ee(r,i.dest);return s===n.UNKNOWN&&o===n.UNKNOWN?(0,E.fS)(t,r)?i.projector=et:i.projector=null:i.projector=e_[s][o],i}(t,r,i).projector}function ev(){return{source:{spatialReference:null,spatialReferenceId:n.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:n.UNKNOWN,metersPerUnit:1},projector:et}}let ew={spatialReference:null,spatialReferenceId:n.UNKNOWN},eC={spatialReference:null,spatialReferenceId:n.UNKNOWN},eS=ev(),ex=(ev(),(0,a.Vl)(1)),eM=(0,a.BV)(1),eI=(0,f.c)(),eE=(0,f.c)(),eT=(0,f.c)(),eP=(0,f.c)();(0,f.c)()},34757:(t,r,i)=>{"use strict";i.d(r,{GG:()=>u,HQ:()=>d,Iu:()=>f,VY:()=>h,e8:()=>y,rS:()=>c,wY:()=>p});var s=i(82639),n=i(371),o=i(94531),a=i(32488);function l(t){return new n.Z({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}let u=l(o.sv),d=l(o.yr),h=l(o.Z1),p=new n.Z({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${o.sv.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function c(t){return t&&((0,a.BZ)(t)||t===d)?d:t&&((0,a.V2)(t)||t===h)?h:u}function f(t){return(0,s.pC)(t)&&((0,a.BZ)(t)||t===d)?o.yr:(0,s.pC)(t)&&((0,a.V2)(t)||t===h)?o.Z1:o.sv}function y(t){return(0,a.o$)(t)?o.yr:(0,a.ME)(t)?o.Z1:o.sv}},94531:(t,r,i)=>{"use strict";i.d(r,{Z1:()=>a,sv:()=>n,yr:()=>o});class s{constructor(t,r,i,s){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i;let n=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*n,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}let n=new s(6378137,1/298.257223563,3e5,.006694379990137799),o=new s(3396190,1/169.8944472236118,23e4),a=new s(1737400,0,0)},34930:(t,r,i)=>{"use strict";i.d(r,{Z:()=>o});let s=0;class n{constructor(t){this.uid=s++,t?(this._wkt=null!=t.wkt?t.wkt:null,this._wkid=null!=t.wkid?t.wkid:-1,this._isInverse=null!=t.isInverse&&!0===t.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){let r=new n;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=s++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=s++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=s++}getInverse(){let t=new n;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class o{constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(let r of t.steps)r instanceof n?this.steps.push(r):this.steps.push(new n({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}static cacheKey(t,r){return[void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():"",void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():""].join(",")}static fromGE(t){let r=new o,i="";for(let s of t.steps){let t=n.fromGE(s);r.steps.push(t),i+=t.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}getInverse(){let t=new o;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){let i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(let r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[o.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(let t of this.steps)i+=t.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);let s=this._cachedProjection[o.cacheKey(t,r)];return void 0===s?null:s}}},54023:(t,r,i)=>{"use strict";var s,n;i.d(r,{W:()=>s}),(n=s||(s={}))[n.CGCS2000=4490]="CGCS2000",n[n.GCSMARS2000=104971]="GCSMARS2000",n[n.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",n[n.GCSMOON2000=104903]="GCSMOON2000"},22121:(t,r,i)=>{"use strict";let s;i.d(r,{Z:()=>n});let n={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(s=2e3;s<=2045;s++)n[s]=0;for(s=2056;s<=2065;s++)n[s]=0;for(s=2067;s<=2135;s++)n[s]=0;for(s=2137;s<=2154;s++)n[s]=0;for(s=2161;s<=2170;s++)n[s]=0;for(s=2172;s<=2193;s++)n[s]=0;for(s=2195;s<=2198;s++)n[s]=0;for(s=2200;s<=2203;s++)n[s]=0;for(s=2205;s<=2217;s++)n[s]=0;for(s=2222;s<=2224;s++)n[s]=1;for(s=2225;s<=2250;s++)n[s]=2;for(s=2251;s<=2253;s++)n[s]=1;for(s=2257;s<=2264;s++)n[s]=2;for(s=2274;s<=2279;s++)n[s]=2;for(s=2280;s<=2282;s++)n[s]=1;for(s=2283;s<=2289;s++)n[s]=2;for(s=2290;s<=2292;s++)n[s]=0;for(s=2308;s<=2313;s++)n[s]=0;for(s=2315;s<=2491;s++)n[s]=0;for(s=2494;s<=2866;s++)n[s]=0;for(s=2867;s<=2869;s++)n[s]=1;for(s=2870;s<=2888;s++)n[s]=2;for(s=2891;s<=2895;s++)n[s]=2;for(s=2896;s<=2898;s++)n[s]=1;for(s=2902;s<=2908;s++)n[s]=2;for(s=2915;s<=2920;s++)n[s]=2;for(s=2921;s<=2923;s++)n[s]=1;for(s=2924;s<=2930;s++)n[s]=2;for(s=2931;s<=2962;s++)n[s]=0;for(s=2964;s<=2968;s++)n[s]=2;for(s=2969;s<=2973;s++)n[s]=0;for(s=2975;s<=2991;s++)n[s]=0;for(s=2995;s<=3051;s++)n[s]=0;for(s=3054;s<=3079;s++)n[s]=0;for(s=3081;s<=3088;s++)n[s]=0;for(s=3092;s<=3101;s++)n[s]=0;for(s=3106;s<=3138;s++)n[s]=0;for(s=3146;s<=3151;s++)n[s]=0;for(s=3153;s<=3166;s++)n[s]=0;for(s=3168;s<=3172;s++)n[s]=0;for(s=3174;s<=3203;s++)n[s]=0;for(s=3294;s<=3358;s++)n[s]=0;for(s=3367;s<=3403;s++)n[s]=0;for(s=3408;s<=3416;s++)n[s]=0;for(s=3417;s<=3438;s++)n[s]=2;for(s=3441;s<=3446;s++)n[s]=2;for(s=3447;s<=3450;s++)n[s]=0;for(s=3451;s<=3459;s++)n[s]=2;for(s=3460;s<=3478;s++)n[s]=0;for(s=3554;s<=3559;s++)n[s]=0;for(s=3560;s<=3570;s++)n[s]=2;for(s=3571;s<=3581;s++)n[s]=0;for(s=3594;s<=3597;s++)n[s]=0;for(s=3601;s<=3604;s++)n[s]=0;for(s=3637;s<=3639;s++)n[s]=0;for(s=3665;s<=3667;s++)n[s]=0;for(s=3693;s<=3695;s++)n[s]=0;for(s=3701;s<=3727;s++)n[s]=0;for(s=3728;s<=3739;s++)n[s]=2;for(s=3740;s<=3751;s++)n[s]=0;for(s=3753;s<=3760;s++)n[s]=2;for(s=3761;s<=3773;s++)n[s]=0;for(s=3775;s<=3777;s++)n[s]=0;for(s=3779;s<=3781;s++)n[s]=0;for(s=3783;s<=3785;s++)n[s]=0;for(s=3788;s<=3791;s++)n[s]=0;for(s=3797;s<=3802;s++)n[s]=0;for(s=3814;s<=3816;s++)n[s]=0;for(s=3825;s<=3829;s++)n[s]=0;for(s=3832;s<=3841;s++)n[s]=0;for(s=3844;s<=3852;s++)n[s]=0;for(s=3873;s<=3885;s++)n[s]=0;for(s=3890;s<=3893;s++)n[s]=0;for(s=3907;s<=3912;s++)n[s]=0;for(s=3942;s<=3950;s++)n[s]=0;for(s=3968;s<=3970;s++)n[s]=0;for(s=3973;s<=3976;s++)n[s]=0;for(s=3986;s<=3989;s++)n[s]=0;for(s=3994;s<=3997;s++)n[s]=0;for(s=4048;s<=4051;s++)n[s]=0;for(s=4056;s<=4063;s++)n[s]=0;for(s=4093;s<=4096;s++)n[s]=0;for(s=4390;s<=4398;s++)n[s]=0;for(s=4399;s<=4413;s++)n[s]=2;for(s=4418;s<=4433;s++)n[s]=2;for(s=4455;s<=4457;s++)n[s]=2;for(s=4484;s<=4489;s++)n[s]=0;for(s=4491;s<=4554;s++)n[s]=0;for(s=4568;s<=4589;s++)n[s]=0;for(s=4652;s<=4656;s++)n[s]=0;for(s=4766;s<=4800;s++)n[s]=0;for(s=5014;s<=5016;s++)n[s]=0;for(s=5069;s<=5072;s++)n[s]=0;for(s=5105;s<=5130;s++)n[s]=0;for(s=5173;s<=5188;s++)n[s]=0;for(s=5253;s<=5259;s++)n[s]=0;for(s=5269;s<=5275;s++)n[s]=0;for(s=5292;s<=5311;s++)n[s]=0;for(s=5329;s<=5331;s++)n[s]=0;for(s=5343;s<=5349;s++)n[s]=0;for(s=5355;s<=5357;s++)n[s]=0;for(s=5387;s<=5389;s++)n[s]=0;for(s=5459;s<=5463;s++)n[s]=0;for(s=5479;s<=5482;s++)n[s]=0;for(s=5518;s<=5520;s++)n[s]=0;for(s=5530;s<=5539;s++)n[s]=0;for(s=5550;s<=5552;s++)n[s]=0;for(s=5562;s<=5583;s++)n[s]=0;for(s=5623;s<=5625;s++)n[s]=2;for(s=5631;s<=5639;s++)n[s]=0;for(s=5649;s<=5653;s++)n[s]=0;for(s=5663;s<=5680;s++)n[s]=0;for(s=5682;s<=5685;s++)n[s]=0;for(s=5875;s<=5877;s++)n[s]=0;for(s=5896;s<=5899;s++)n[s]=0;for(s=5921;s<=5940;s++)n[s]=0;for(s=6050;s<=6125;s++)n[s]=0;for(s=6244;s<=6275;s++)n[s]=0;for(s=6328;s<=6348;s++)n[s]=0;for(s=6350;s<=6356;s++)n[s]=0;for(s=6366;s<=6372;s++)n[s]=0;for(s=6381;s<=6387;s++)n[s]=0;for(s=6393;s<=6404;s++)n[s]=0;for(s=6480;s<=6483;s++)n[s]=0;for(s=6511;s<=6514;s++)n[s]=0;for(s=6579;s<=6581;s++)n[s]=0;for(s=6619;s<=6624;s++)n[s]=0;for(s=6625;s<=6627;s++)n[s]=2;for(s=6628;s<=6632;s++)n[s]=0;for(s=6634;s<=6637;s++)n[s]=0;for(s=6669;s<=6692;s++)n[s]=0;for(s=6707;s<=6709;s++)n[s]=0;for(s=6720;s<=6723;s++)n[s]=0;for(s=6732;s<=6738;s++)n[s]=0;for(s=6931;s<=6933;s++)n[s]=0;for(s=6956;s<=6959;s++)n[s]=0;for(s=7005;s<=7007;s++)n[s]=0;for(s=7057;s<=7070;s++)n[s]=2;for(s=7074;s<=7082;s++)n[s]=0;for(s=7109;s<=7118;s++)n[s]=0;for(s=7119;s<=7127;s++)n[s]=1;for(s=7374;s<=7376;s++)n[s]=0;for(s=7528;s<=7586;s++)n[s]=0;for(s=7587;s<=7645;s++)n[s]=2;for(s=7692;s<=7696;s++)n[s]=0;for(s=7755;s<=7787;s++)n[s]=0;for(s=7791;s<=7795;s++)n[s]=0;for(s=7799;s<=7801;s++)n[s]=0;for(s=7803;s<=7805;s++)n[s]=0;for(s=7825;s<=7831;s++)n[s]=0;for(s=7845;s<=7859;s++)n[s]=0;for(s=8013;s<=8032;s++)n[s]=0;for(s=8065;s<=8068;s++)n[s]=1;for(s=8518;s<=8529;s++)n[s]=2;for(s=8533;s<=8536;s++)n[s]=2;for(s=8538;s<=8540;s++)n[s]=2;for(s=8677;s<=8679;s++)n[s]=0;for(s=8836;s<=8840;s++)n[s]=0;for(s=8857;s<=8859;s++)n[s]=0;for(s=8908;s<=8910;s++)n[s]=0;for(s=9154;s<=9159;s++)n[s]=0;for(s=9205;s<=9218;s++)n[s]=0;for(s=9271;s<=9273;s++)n[s]=0;for(s=9295;s<=9297;s++)n[s]=0;for(s=9356;s<=9360;s++)n[s]=0;for(s=9404;s<=9407;s++)n[s]=0;for(s=9476;s<=9482;s++)n[s]=0;for(s=9487;s<=9494;s++)n[s]=0;for(s=9697;s<=9699;s++)n[s]=0;for(s=20002;s<=20032;s++)n[s]=0;for(s=20062;s<=20092;s++)n[s]=0;for(s=20135;s<=20138;s++)n[s]=0;for(s=20248;s<=20258;s++)n[s]=0;for(s=20348;s<=20358;s++)n[s]=0;for(s=20436;s<=20440;s++)n[s]=0;for(s=20822;s<=20824;s++)n[s]=0;for(s=20904;s<=20932;s++)n[s]=0;for(s=20934;s<=20936;s++)n[s]=0;for(s=21004;s<=21032;s++)n[s]=0;for(s=21035;s<=21037;s++)n[s]=0;for(s=21095;s<=21097;s++)n[s]=0;for(s=21148;s<=21150;s++)n[s]=0;for(s=21207;s<=21264;s++)n[s]=0;for(s=21307;s<=21364;s++)n[s]=0;for(s=21413;s<=21423;s++)n[s]=0;for(s=21453;s<=21463;s++)n[s]=0;for(s=21473;s<=21483;s++)n[s]=0;for(s=21780;s<=21782;s++)n[s]=0;for(s=21891;s<=21894;s++)n[s]=0;for(s=21896;s<=21899;s++)n[s]=0;for(s=22171;s<=22177;s++)n[s]=0;for(s=22181;s<=22187;s++)n[s]=0;for(s=22191;s<=22197;s++)n[s]=0;for(s=22234;s<=22236;s++)n[s]=0;for(s=22521;s<=22525;s++)n[s]=0;for(s=22991;s<=22994;s++)n[s]=0;for(s=23028;s<=23038;s++)n[s]=0;for(s=23830;s<=23853;s++)n[s]=0;for(s=23866;s<=23872;s++)n[s]=0;for(s=23877;s<=23884;s++)n[s]=0;for(s=23886;s<=23894;s++)n[s]=0;for(s=23946;s<=23948;s++)n[s]=0;for(s=24311;s<=24313;s++)n[s]=0;for(s=24342;s<=24347;s++)n[s]=0;for(s=24370;s<=24374;s++)n[s]=10;for(s=24375;s<=24381;s++)n[s]=0;for(s=24718;s<=24721;s++)n[s]=0;for(s=24817;s<=24821;s++)n[s]=0;for(s=24877;s<=24882;s++)n[s]=0;for(s=24891;s<=24893;s++)n[s]=0;for(s=25391;s<=25395;s++)n[s]=0;for(s=25828;s<=25838;s++)n[s]=0;for(s=26191;s<=26195;s++)n[s]=0;for(s=26391;s<=26393;s++)n[s]=0;for(s=26701;s<=26722;s++)n[s]=0;for(s=26729;s<=26799;s++)n[s]=2;for(s=26801;s<=26803;s++)n[s]=2;for(s=26811;s<=26813;s++)n[s]=2;for(s=26847;s<=26870;s++)n[s]=2;for(s=26891;s<=26899;s++)n[s]=0;for(s=26901;s<=26923;s++)n[s]=0;for(s=26929;s<=26946;s++)n[s]=0;for(s=26948;s<=26998;s++)n[s]=0;for(s=27037;s<=27040;s++)n[s]=0;for(s=27205;s<=27232;s++)n[s]=0;for(s=27258;s<=27260;s++)n[s]=0;for(s=27391;s<=27398;s++)n[s]=0;for(s=27561;s<=27564;s++)n[s]=0;for(s=27571;s<=27574;s++)n[s]=0;for(s=27581;s<=27584;s++)n[s]=0;for(s=27591;s<=27594;s++)n[s]=0;for(s=28191;s<=28193;s++)n[s]=0;for(s=28348;s<=28358;s++)n[s]=0;for(s=28402;s<=28432;s++)n[s]=0;for(s=28462;s<=28492;s++)n[s]=0;for(s=29118;s<=29122;s++)n[s]=0;for(s=29168;s<=29172;s++)n[s]=0;for(s=29177;s<=29185;s++)n[s]=0;for(s=29187;s<=29195;s++)n[s]=0;for(s=29900;s<=29903;s++)n[s]=0;for(s=30161;s<=30179;s++)n[s]=0;for(s=30491;s<=30494;s++)n[s]=0;for(s=30729;s<=30732;s++)n[s]=0;for(s=31251;s<=31259;s++)n[s]=0;for(s=31265;s<=31268;s++)n[s]=0;for(s=31275;s<=31279;s++)n[s]=0;for(s=31281;s<=31297;s++)n[s]=0;for(s=31461;s<=31469;s++)n[s]=0;for(s=31491;s<=31495;s++)n[s]=0;for(s=31917;s<=31922;s++)n[s]=0;for(s=31965;s<=32e3;s++)n[s]=0;for(s=32001;s<=32003;s++)n[s]=2;for(s=32005;s<=32031;s++)n[s]=2;for(s=32033;s<=32060;s++)n[s]=2;for(s=32064;s<=32067;s++)n[s]=2;for(s=32074;s<=32077;s++)n[s]=2;for(s=32081;s<=32086;s++)n[s]=0;for(s=32107;s<=32130;s++)n[s]=0;for(s=32133;s<=32158;s++)n[s]=0;for(s=32164;s<=32167;s++)n[s]=2;for(s=32180;s<=32199;s++)n[s]=0;for(s=32201;s<=32260;s++)n[s]=0;for(s=32301;s<=32360;s++)n[s]=0;for(s=32601;s<=32662;s++)n[s]=0;for(s=32664;s<=32667;s++)n[s]=2;for(s=32701;s<=32761;s++)n[s]=0;for(s=53001;s<=53004;s++)n[s]=0;for(s=53008;s<=53019;s++)n[s]=0;for(s=53021;s<=53032;s++)n[s]=0;for(s=53034;s<=53037;s++)n[s]=0;for(s=53042;s<=53046;s++)n[s]=0;for(s=53074;s<=53080;s++)n[s]=0;for(s=54001;s<=54004;s++)n[s]=0;for(s=54008;s<=54019;s++)n[s]=0;for(s=54021;s<=54032;s++)n[s]=0;for(s=54034;s<=54037;s++)n[s]=0;for(s=54042;s<=54046;s++)n[s]=0;for(s=54048;s<=54053;s++)n[s]=0;for(s=54074;s<=54080;s++)n[s]=0;for(s=54098;s<=54101;s++)n[s]=0;for(s=102001;s<=102040;s++)n[s]=0;for(s=102042;s<=102063;s++)n[s]=0;for(s=102065;s<=102067;s++)n[s]=0;for(s=102070;s<=102117;s++)n[s]=0;for(s=102122;s<=102216;s++)n[s]=0;for(s=102221;s<=102377;s++)n[s]=0;for(s=102382;s<=102388;s++)n[s]=0;for(s=102389;s<=102398;s++)n[s]=2;for(s=102399;s<=102444;s++)n[s]=0;for(s=102445;s<=102447;s++)n[s]=2;for(s=102448;s<=102458;s++)n[s]=0;for(s=102459;s<=102468;s++)n[s]=2;for(s=102469;s<=102499;s++)n[s]=0;for(s=102500;s<=102519;s++)n[s]=1;for(s=102520;s<=102524;s++)n[s]=0;for(s=102525;s<=102529;s++)n[s]=2;for(s=102530;s<=102588;s++)n[s]=0;for(s=102590;s<=102598;s++)n[s]=0;for(s=102601;s<=102603;s++)n[s]=0;for(s=102605;s<=102628;s++)n[s]=0;for(s=102629;s<=102646;s++)n[s]=2;for(s=102648;s<=102700;s++)n[s]=2;for(s=102701;s<=102703;s++)n[s]=0;for(s=102707;s<=102730;s++)n[s]=2;for(s=102733;s<=102758;s++)n[s]=2;for(s=102767;s<=102900;s++)n[s]=0;for(s=102901;s<=102933;s++)n[s]=2;for(s=102934;s<=102950;s++)n[s]=13;for(s=102951;s<=102955;s++)n[s]=0;for(s=102961;s<=102963;s++)n[s]=0;for(s=102965;s<=102969;s++)n[s]=0;for(s=102971;s<=102973;s++)n[s]=0;for(s=102975;s<=102989;s++)n[s]=0;for(s=102990;s<=102992;s++)n[s]=1;for(s=102997;s<=103002;s++)n[s]=0;for(s=103003;s<=103008;s++)n[s]=2;for(s=103009;s<=103011;s++)n[s]=0;for(s=103012;s<=103014;s++)n[s]=2;for(s=103019;s<=103021;s++)n[s]=0;for(s=103022;s<=103024;s++)n[s]=2;for(s=103029;s<=103031;s++)n[s]=0;for(s=103032;s<=103034;s++)n[s]=2;for(s=103065;s<=103068;s++)n[s]=0;for(s=103074;s<=103076;s++)n[s]=0;for(s=103077;s<=103079;s++)n[s]=1;for(s=103080;s<=103082;s++)n[s]=0;for(s=103083;s<=103085;s++)n[s]=2;for(s=103090;s<=103093;s++)n[s]=0;for(s=103097;s<=103099;s++)n[s]=0;for(s=103100;s<=103102;s++)n[s]=2;for(s=103107;s<=103109;s++)n[s]=0;for(s=103110;s<=103112;s++)n[s]=2;for(s=103113;s<=103116;s++)n[s]=0;for(s=103117;s<=103120;s++)n[s]=2;for(s=103153;s<=103157;s++)n[s]=0;for(s=103158;s<=103162;s++)n[s]=2;for(s=103163;s<=103165;s++)n[s]=0;for(s=103166;s<=103168;s++)n[s]=1;for(s=103169;s<=103171;s++)n[s]=2;for(s=103186;s<=103188;s++)n[s]=0;for(s=103189;s<=103191;s++)n[s]=2;for(s=103192;s<=103195;s++)n[s]=0;for(s=103196;s<=103199;s++)n[s]=2;for(s=103200;s<=103224;s++)n[s]=0;for(s=103225;s<=103227;s++)n[s]=1;for(s=103232;s<=103237;s++)n[s]=0;for(s=103238;s<=103243;s++)n[s]=2;for(s=103244;s<=103246;s++)n[s]=0;for(s=103247;s<=103249;s++)n[s]=2;for(s=103254;s<=103256;s++)n[s]=0;for(s=103257;s<=103259;s++)n[s]=2;for(s=103264;s<=103266;s++)n[s]=0;for(s=103267;s<=103269;s++)n[s]=2;for(s=103300;s<=103375;s++)n[s]=0;for(s=103381;s<=103383;s++)n[s]=0;for(s=103384;s<=103386;s++)n[s]=1;for(s=103387;s<=103389;s++)n[s]=0;for(s=103390;s<=103392;s++)n[s]=2;for(s=103397;s<=103399;s++)n[s]=0;for(s=103400;s<=103471;s++)n[s]=2;for(s=103476;s<=103478;s++)n[s]=0;for(s=103479;s<=103481;s++)n[s]=2;for(s=103486;s<=103488;s++)n[s]=0;for(s=103489;s<=103491;s++)n[s]=2;for(s=103492;s<=103495;s++)n[s]=0;for(s=103496;s<=103499;s++)n[s]=2;for(s=103528;s<=103543;s++)n[s]=0;for(s=103544;s<=103548;s++)n[s]=2;for(s=103549;s<=103551;s++)n[s]=0;for(s=103552;s<=103554;s++)n[s]=1;for(s=103555;s<=103557;s++)n[s]=2;for(s=103558;s<=103560;s++)n[s]=0;for(s=103571;s<=103573;s++)n[s]=0;for(s=103574;s<=103576;s++)n[s]=2;for(s=103577;s<=103580;s++)n[s]=0;for(s=103581;s<=103583;s++)n[s]=2;for(s=103595;s<=103694;s++)n[s]=0;for(s=103696;s<=103699;s++)n[s]=0;for(s=103700;s<=103793;s++)n[s]=2;for(s=103794;s<=103887;s++)n[s]=0;for(s=103900;s<=103971;s++)n[s]=2},18211:(t,r,i)=>{"use strict";i.d(r,{Gv:()=>b,HH:()=>l,JR:()=>m,TC:()=>u,Tn:()=>c,Ue:()=>o,al:()=>a,cS:()=>y,dp:()=>h,fS:()=>_,op:()=>p,pp:()=>d,t8:()=>f});var s=i(82639),n=i(18721);function o(t=v){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function a(t,r,i,s,n,a,l=o()){return l[0]=t,l[1]=r,l[2]=i,l[3]=s,l[4]=n,l[5]=a,l}function l(t,r){let i=isFinite(t[2])||isFinite(t[5]);return new n.Z(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:r}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:r})}function u(t,r){t[0]=Math.min(t[0],r[0]),t[1]=Math.min(t[1],r[1]),t[2]=Math.min(t[2],r[2]),t[3]=Math.max(t[3],r[3]),t[4]=Math.max(t[4],r[4]),t[5]=Math.max(t[5],r[5])}function d(t,r){t[0]=Math.min(t[0],r[0]),t[1]=Math.min(t[1],r[1]),t[2]=Math.min(t[2],r[2]),t[3]=Math.max(t[3],r[0]),t[4]=Math.max(t[4],r[1]),t[5]=Math.max(t[5],r[2])}function h(t,r=[0,0,0]){return r[0]=t[0]>=t[3]?0:t[3]-t[0],r[1]=t[1]>=t[4]?0:t[4]-t[1],r[2]=t[2]>=t[5]?0:t[5]-t[2],r}function p(t,r,i=t){return i[0]=r[0],i[1]=r[1],i[2]=r[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function c(t,r,i=t){return i[3]=r[0],i[4]=r[1],i[5]=r[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function f(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function y(t){return t?f(t,b):o(b)}function m(t,r){return t[0]=r[0],t[1]=r[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=r[2],t[4]=r[3],t[5]=Number.POSITIVE_INFINITY,t}function g(t){return 6===t.length}function _(t,r,i){if((0,s.Wi)(t)||(0,s.Wi)(r))return t===r;if(!g(t)||!g(r))return!1;if(i){for(let s=0;s<t.length;s++)if(!i(t[s],r[s]))return!1}else for(let i=0;i<t.length;i++)if(t[i]!==r[i])return!1;return!0}i(8865);let b=[1/0,1/0,1/0,-1/0,-1/0,-1/0],v=[0,0,0,0,0,0];o()},8865:(t,r,i)=>{"use strict";i.d(r,{Cb:()=>y,Gv:()=>x,HH:()=>h,Ho:()=>p,SO:()=>m,Ue:()=>o,Zm:()=>_,al:()=>u,bf:()=>f,cS:()=>w,d9:()=>a,fS:()=>S,jE:()=>g,jn:()=>c,kK:()=>b,oJ:()=>d,r3:()=>v}),i(96082),i(5047);var s=i(82639),n=i(18721);function o(t=M){return[t[0],t[1],t[2],t[3]]}function a(t){return[t[0],t[1],t[2],t[3]]}function l(t,r){return t!==r&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3]),t}function u(t,r,i,s,n=o()){return n[0]=t,n[1]=r,n[2]=i,n[3]=s,n}function d(t,r=o()){return r[0]=t.xmin,r[1]=t.ymin,r[2]=t.xmax,r[3]=t.ymax,r}function h(t,r){return new n.Z({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:r})}function p(t,r){r[0]<t[0]&&(t[0]=r[0]),r[0]>t[2]&&(t[2]=r[0]),r[1]<t[1]&&(t[1]=r[1]),r[1]>t[3]&&(t[3]=r[1])}function c(t,r,i){if((0,s.Wi)(r))l(i,t);else if("length"in r)C(r)?(i[0]=Math.min(t[0],r[0]),i[1]=Math.min(t[1],r[1]),i[2]=Math.max(t[2],r[2]),i[3]=Math.max(t[3],r[3])):2!==r.length&&3!==r.length||(i[0]=Math.min(t[0],r[0]),i[1]=Math.min(t[1],r[1]),i[2]=Math.max(t[2],r[0]),i[3]=Math.max(t[3],r[1]));else switch(r.type){case"extent":i[0]=Math.min(t[0],r.xmin),i[1]=Math.min(t[1],r.ymin),i[2]=Math.max(t[2],r.xmax),i[3]=Math.max(t[3],r.ymax);break;case"point":i[0]=Math.min(t[0],r.x),i[1]=Math.min(t[1],r.y),i[2]=Math.max(t[2],r.x),i[3]=Math.max(t[3],r.y)}}function f(t){return(0,s.Wi)(t)||t[0]>=t[2]?0:t[2]-t[0]}function y(t){return t[1]>=t[3]?0:t[3]-t[1]}function m(t){return f(t)*y(t)}function g(t,r,i){return r>=t[0]&&i>=t[1]&&r<=t[2]&&i<=t[3]}function _(t,r,i){return r[0]>=t[0]-i&&r[1]>=t[1]-i&&r[0]<=t[2]+i&&r[1]<=t[3]+i}function b(t,r){return Math.max(r[0],t[0])<=Math.min(r[2],t[2])&&Math.max(r[1],t[1])<=Math.min(r[3],t[3])}function v(t,r){return r[0]>=t[0]&&r[2]<=t[2]&&r[1]>=t[1]&&r[3]<=t[3]}function w(t){return t?l(t,x):o(x)}function C(t){return null!=t&&4===t.length}function S(t,r){return C(t)&&C(r)?t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]:t===r}let x=[1/0,1/0,-1/0,-1/0],M=[0,0,0,0]},23565:(t,r,i)=>{"use strict";function s(t){return void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax}function n(t){return void 0!==t.points}function o(t){return void 0!==t.x&&void 0!==t.y}function a(t){return void 0!==t.paths}function l(t){return void 0!==t.rings}function u(t){return function(r,i){return null==r?i:null==i?r:t(r,i)}}i.d(r,{$P:()=>p,C6:()=>f,Yg:()=>c,lC:()=>m});let d=u(Math.min),h=u(Math.max);function p(t,r){return a(r)?f(t,r.paths,!1,!1):l(r)?f(t,r.rings,!1,!1):n(r)?m(t,r.points,!1,!1,!1,!1):s(r)?y(t,r):(o(r)&&(t[0]=r.x,t[1]=r.y,t[2]=r.x,t[3]=r.y),t)}function c(t,r){return a(r)?f(t,r.paths,!0,!1):l(r)?f(t,r.rings,!0,!1):n(r)?m(t,r.points,!0,!1,!0,!1):s(r)?y(t,r,0,0,!0,!1):(o(r)&&(t[0]=r.x,t[1]=r.y,t[2]=r.z,t[3]=r.x,t[4]=r.y,t[5]=r.z),t)}function f(t,r,i,s){let n=i?3:2;if(!r.length||!r[0].length)return null;let o,a,l,u,[p,c]=r[0][0],[f,y]=r[0][0];for(let t=0;t<r.length;t++){let m=r[t];for(let t=0;t<m.length;t++){let r=m[t],[g,_]=r;if(p=d(p,g),c=d(c,_),f=h(f,g),y=h(y,_),i&&r.length>2){let t=r[2];o=d(o,t),a=h(a,t)}if(s&&r.length>n){let t=r[n];l=d(o,t),u=h(a,t)}}}return i?s?(t[0]=p,t[1]=c,t[2]=o,t[3]=l,t[4]=f,t[5]=y,t[6]=a,t[7]=u,t.length=8):(t[0]=p,t[1]=c,t[2]=o,t[3]=f,t[4]=y,t[5]=a,t.length=6):s?(t[0]=p,t[1]=c,t[2]=l,t[3]=f,t[4]=y,t[5]=u,t.length=6):(t[0]=p,t[1]=c,t[2]=f,t[3]=y,t.length=4),t}function y(t,r,i,s,n,o){let a=r.xmin,l=r.xmax,u=r.ymin,d=r.ymax,h=r.zmin,p=r.zmax,c=r.mmin,f=r.mmax;return n?(h=h||0,p=p||0,o?(c=c||0,f=f||0,t[0]=a,t[1]=u,t[2]=h,t[3]=c,t[4]=l,t[5]=d,t[6]=p,t[7]=f):(t[0]=a,t[1]=u,t[2]=h,t[3]=l,t[4]=d,t[5]=p)):o?(c=c||0,f=f||0,t[0]=a,t[1]=u,t[2]=c,t[3]=l,t[4]=d,t[5]=f):(t[0]=a,t[1]=u,t[2]=l,t[3]=d),t}function m(t,r,i,s,n,o){let a=i?3:2,l=s&&o,u=i&&n;if(!r.length||!r[0].length)return null;let p,c,f,y,[m,g]=r[0],[_,b]=r[0];for(let t=0;t<r.length;t++){let i=r[t],[s,n]=i;if(m=d(m,s),g=d(g,n),_=h(_,s),b=h(b,n),u&&i.length>2){let t=i[2];p=d(p,t),c=h(c,t)}if(l&&i.length>a){let t=i[a];f=d(p,t),y=h(c,t)}}return n?(p=p||0,c=c||0,o?(f=f||0,y=y||0,t[0]=m,t[1]=g,t[2]=p,t[3]=f,t[4]=_,t[5]=b,t[6]=c,t[7]=y):(t[0]=m,t[1]=g,t[2]=p,t[3]=_,t[4]=b,t[5]=c)):o?(f=f||0,y=y||0,t[0]=m,t[1]=g,t[2]=f,t[3]=_,t[4]=b,t[5]=y):(t[0]=m,t[1]=g,t[2]=_,t[3]=b),t}},77846:(t,r,i)=>{"use strict";i.d(r,{$G:()=>n,DS:()=>l,NA:()=>u,a:()=>a,tO:()=>o});var s=i(48498);function n(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function o(t){return t?a(t.rings,t.hasZ??!1):null}function a(t,r){if(!t||!t.length)return null;let i=[],n=[],o=r?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let i=0,s=t.length;i<s;i++){let s=l(t[i],r,o);s&&n.push(s)}if(n.sort((t,i)=>{let s=t[2]-i[2];return 0===s&&r&&(s=t[4]-i[4]),s}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],r&&(i[2]=n[0][3]),(i[0]<o[0]||i[0]>o[1]||i[1]<o[2]||i[1]>o[3]||r&&(i[2]<o[4]||i[2]>o[5]))&&(i.length=0)),!i.length){let n=t[0]&&t[0].length?function(t,r){let i=r?[0,0,0]:[0,0],n=r?[0,0,0]:[0,0],o=0,a=0,l=0,u=0;for(let d=0,h=t.length;d<h-1;d++){let h=t[d],p=t[d+1];if(h&&p){i[0]=h[0],i[1]=h[1],n[0]=p[0],n[1]=p[1],r&&h.length>2&&p.length>2&&(i[2]=h[2],n[2]=p[2]);let t=(0,s.xA)(i,n);if(t){o+=t;let i=(0,s.Gi)(h,p);a+=t*i[0],l+=t*i[1],r&&i.length>2&&(u+=t*i[2])}}}return o>0?r?[a/o,l/o,u/o]:[a/o,l/o]:t.length?t[0]:null}(t[0],r):null;if(!n)return null;i[0]=n[0],i[1]=n[1],r&&n.length>2&&(i[2]=n[2])}return i}function l(t,r,i){let s=0,n=0,o=0,a=0,l=0,u=t.length?t[0][0]:0,d=t.length?t[0][1]:0,h=t.length&&r?t[0][2]:0;for(let p=0;p<t.length;p++){let c=t[p],f=t[(p+1)%t.length],[y,m,g]=c,_=y-u,b=m-d,[v,w,C]=f,S=v-u,x=w-d,M=_*x-S*b;if(a+=M,s+=(_+S)*M,n+=(b+x)*M,r&&c.length>2&&f.length>2){let t=g-h,r=C-h,i=_*r-S*t;o+=(t+r)*i,l+=i}y<i[0]&&(i[0]=y),y>i[1]&&(i[1]=y),m<i[2]&&(i[2]=m),m>i[3]&&(i[3]=m),r&&(g<i[4]&&(i[4]=g),g>i[5]&&(i[5]=g))}if(a>0&&(a*=-1),l>0&&(l*=-1),!a)return null;a*=.5,l*=.5;let p=[s/(6*a)+u,n/(6*a)+d,a];return r&&(i[4]===i[5]||0===l?(p[3]=(i[4]+i[5])/2,p[4]=0):(p[3]=o/(6*l)+h,p[4]=l)),p}function u(t){if(!t||!t.rings)return null;let{rings:r}=t,i=0;for(let t=0;t<r.length;t++)i+=(0,s.Sm)(r[t]);if(i<1e-6)return a(r,!1);let n=[0,0],o=r[0][0];for(let t=0;t<r.length;t++)(function(t,r,i){let n;if(!t||!i||i.length<3)return;let o=i[0],a=[0,0],l=[i[1][0]-o[0],i[1][1]-o[1]];for(let r=2;r<i.length;r++)a[0]=i[r][0]-o[0],a[1]=i[r][1]-o[1],n=.16666666666666666*(a[0]*l[1]-a[1]*l[0]),t[0]+=n*(l[0]+a[0]),t[1]+=n*(l[1]+a[1]),l[0]=a[0],l[1]=a[1];let u=(0,s.Sm)(i),d=[o[0],o[1]];d[0]-=r[0],d[1]-=r[1],d[0]*=u,d[1]*=u,t[0]+=d[0],t[1]+=d[1]})(n,o,r[t]);return n[0]*=1/i,n[1]*=1/i,n[0]+=o[0],n[1]+=o[1],n}},35864:(t,r,i)=>{"use strict";i.d(r,{CI:()=>p,OQ:()=>u,Qg:()=>d,aV:()=>o,lQ:()=>a,uP:()=>l,wP:()=>c});var s=i(82639);let n=[0,0];function o(t,r){return!!(0,s.pC)(r)&&h(t,r.x,r.y,r.z)}function a(t,r){if(!r.points||r.points.length)return!1;for(let i of r.points)if(!u(t,i))return!1;return!0}function l(t,r){let{xmin:i,ymin:s,zmin:n,xmax:o,ymax:a,zmax:l}=r;return t.hasZ&&r.hasZ?h(t,i,s,n)&&h(t,i,a,n)&&h(t,o,a,n)&&h(t,o,s,n)&&h(t,i,s,l)&&h(t,i,a,l)&&h(t,o,a,l)&&h(t,o,s,l):h(t,i,s)&&h(t,i,a)&&h(t,o,a)&&h(t,o,s)}function u(t,r){return h(t,r[0],r[1])}function d(t,r){return h(t,r[0],r[1],r[2])}function h(t,r,i,s){return r>=t.xmin&&r<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(null==s||!t.hasZ||s>=t.zmin&&s<=t.zmax)}function p(t,r){return n[1]=r.y,n[0]=r.x,c(t.rings,n)}function c(t,r){if(!t)return!1;if(!Array.isArray(t[0][0]))return f(!1,t,r);let i=!1;for(let s=0,n=t.length;s<n;s++)i=f(i,t[s],r);return i}function f(t,r,i){let[s,n]=i,o=t,a=0;for(let t=0,i=r.length;t<i;t++){++a===i&&(a=0);let[l,u]=r[t],[d,h]=r[a];(u<n&&h>=n||h<n&&u>=n)&&l+(n-u)/(h-u)*(d-l)<s&&(o=!o)}return o}},48498:(t,r,i)=>{"use strict";i.d(r,{Gi:()=>l,Sm:()=>p,Tx:()=>o,Zy:()=>h,bu:()=>u,ko:()=>a,pW:()=>d,xA:()=>n});var s=i(99950);function n(t,r){let i=r[0]-t[0],s=r[1]-t[1];if(t.length>2&&r.length>2){let n=t[2]-r[2];return Math.sqrt(i*i+s*s+n*n)}return Math.sqrt(i*i+s*s)}function o(t,r,i,s){let[n,o]=r,[a,l]=i[s],[u,d]=i[s+1],h=u-a,p=d-l,c=Math.min(1,Math.max(0,((n-a)*h+(o-l)*p)/(h*h+p*p)));return t[0]=a+h*c,t[1]=l+p*c,t}function a(t,r,i){let s=i.rings,n,o,a=!1,l=1/0;for(let i=0;i<s.length;i++){let u=s[i];for(let i=0,s=u.length-1;i<u.length;s=i++)n=u[i],o=u[s],n[1]>r!=o[1]>r&&t<(o[0]-n[0])*(r-n[1])/(o[1]-n[1])+n[0]&&(a=!a),l=Math.min(l,function(t,r,i,s){let n=i[0],o=i[1],a=s[0]-n,l=s[1]-o;if(0!==a||0!==l){let i=((t-n)*a+(r-o)*l)/(a*a+l*l);i>1?(n=s[0],o=s[1]):i>0&&(n+=a*i,o+=l*i)}return(a=t-n)*a+(l=r-o)*l}(t,r,n,o))}return 0===l?0:(a?1:-1)*Math.sqrt(l)}function l(t,r){return function(t,r,i){let s=t[0]+.5*(r[0]-t[0]),n=t[1]+.5*(r[1]-t[1]);return t.length>2&&r.length>2?[s,n,t[2]+.5*(r[2]-t[2])]:[s,n]}(t,r,.5)}function u(t,r,i){let s=t.length,n=0,o=0,a=0;for(let l=0;l<s;l++){let u=t[l],d=t[(l+1)%s],h=2;n+=u[0]*d[1]-d[0]*u[1],u.length>2&&d.length>2&&i&&(o+=u[0]*d[2]-d[0]*u[2],h=3),u.length>h&&d.length>h&&r&&(a+=u[0]*d[h]-d[0]*u[h])}return n<=0&&o<=0&&a<=0}function d(t){if("rings"in t&&(h(t),t.rings.length>0&&!u(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(let r of t.rings)r.reverse()}function h(t){if("rings"in t)for(let r of t.rings)(function(t){let r=t.length;return r>2&&(0,s.fS)(t[0],t[r-1])})(r)||r.push(r[0].slice())}function p(t){if(!t||t.length<3)return 0;let r=0,i=t.length-1;for(let s=0;s<i;s++)r+=(t[s][0]-t[s+1][0])*(t[s][1]+t[s+1][1]);return -.5*(r+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]))}i(32488)},48352:(t,r,i)=>{"use strict";i.d(r,{Wn:()=>c,_w:()=>p,aO:()=>h});var s=i(23565);let n=[];function o(t,r,i,s){return{xmin:t,ymin:r,xmax:i,ymax:s}}function a(t,r,i,s,n,o){return{xmin:t,ymin:r,zmin:i,xmax:s,ymax:n,zmax:o}}function l(t,r,i,s,n,o){return{xmin:t,ymin:r,mmin:i,xmax:s,ymax:n,mmax:o}}function u(t,r,i,s,n,o,a,l){return{xmin:t,ymin:r,zmin:i,mmin:s,xmax:n,ymax:o,zmax:a,mmax:l}}function d(t,r=!1,i=!1){return r?i?u(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):a(t[0],t[1],t[2],t[3],t[4],t[5]):i?l(t[0],t[1],t[2],t[3],t[4],t[5]):o(t[0],t[1],t[2],t[3])}function h(t){return t?void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?t:void 0!==t.x&&void 0!==t.y?function(t){let{x:r,y:i,z:s,m:n}=t,d=null!=n;return null!=s?d?u(r,i,s,n,r,i,s,n):a(r,i,s,r,i,s):d?l(r,i,n,r,i,n):o(r,i,r,i)}(t):void 0!==t.rings?p(t):void 0!==t.paths?c(t):void 0!==t.points?function(t){let{hasZ:r,hasM:i,points:o}=t;return d((0,s.lC)(n,o,r??!1,i??!1),r,i)}(t):null:null}function p(t){let{hasZ:r,hasM:i,rings:o}=t,a=(0,s.C6)(n,o,r??!1,i??!1);return a?d(a,r,i):null}function c(t){let{hasZ:r,hasM:i,paths:o}=t,a=(0,s.C6)(n,o,r??!1,i??!1);return a?d(a,r,i):null}},97261:(t,r,i)=>{"use strict";i.d(r,{Ff:()=>g,IY:()=>v,UT:()=>b,h_:()=>o});var s=i(35864);function n(t,r){return(0,s.aV)(t,r)}function o(t,r){let i,s,n;let o=t.hasZ&&r.hasZ;if(t.xmin<=r.xmin){if(i=r.xmin,t.xmax<i)return!1}else if(i=t.xmin,r.xmax<i)return!1;if(t.ymin<=r.ymin){if(s=r.ymin,t.ymax<s)return!1}else if(s=t.ymin,r.ymax<s)return!1;if(o&&r.hasZ){if(t.zmin<=r.zmin){if(n=r.zmin,t.zmax<n)return!1}else if(n=t.zmin,r.zmax<n)return!1}return!0}function a(t,r){let{points:i,hasZ:n}=r,o=n?s.Qg:s.OQ;for(let r of i)if(o(t,r))return!0;return!1}let l=[0,0],u=[0,0],d=[0,0],h=[0,0],p=[l,u,d,h],c=[[d,l],[l,u],[u,h],[h,d]];function f(t,r){return function(t,r){for(let i of(l[0]=t.xmin,l[1]=t.ymax,u[0]=t.xmax,u[1]=t.ymax,d[0]=t.xmin,d[1]=t.ymin,h[0]=t.xmax,h[1]=t.ymin,p))if((0,s.wP)(r,i))return!0;for(let i of r){if(!i.length)continue;let r=i[0];if((0,s.OQ)(t,r))return!0;for(let n=1;n<i.length;n++){let o=i[n];if((0,s.OQ)(t,o)||_(r,o,c))return!0;r=o}}return!1}(t,r.rings)}function y(t,r){l[0]=t.xmin,l[1]=t.ymax,u[0]=t.xmax,u[1]=t.ymax,d[0]=t.xmin,d[1]=t.ymin,h[0]=t.xmax,h[1]=t.ymin;let i=r.paths;for(let r of i){if(!i.length)continue;let n=r[0];if((0,s.OQ)(t,n))return!0;for(let i=1;i<r.length;i++){let o=r[i];if((0,s.OQ)(t,o)||_(n,o,c))return!0;n=o}}return!1}let m=[0,0];function g(t){for(let r=0;r<t.length;r++){let i=t[r];for(let s=0;s<i.length-1;s++){let n=i[s],o=i[s+1];for(let i=r+1;i<t.length;i++)for(let r=0;r<t[i].length-1;r++){let s=t[i][r],a=t[i][r+1];if(b(n,o,s,a,m)&&!(m[0]===n[0]&&m[1]===n[1]||m[0]===s[0]&&m[1]===s[1]||m[0]===o[0]&&m[1]===o[1]||m[0]===a[0]&&m[1]===a[1]))return!0}}let s=i.length;if(!(s<=4))for(let t=0;t<s-3;t++){let r=s-1;0===t&&(r=s-2);let n=i[t],o=i[t+1];for(let s=t+2;s<r;s++){let t=i[s],r=i[s+1];if(b(n,o,t,r,m)&&!(m[0]===n[0]&&m[1]===n[1]||m[0]===t[0]&&m[1]===t[1]||m[0]===o[0]&&m[1]===o[1]||m[0]===r[0]&&m[1]===r[1]))return!0}}}return!1}function _(t,r,i){for(let s=0;s<i.length;s++)if(b(t,r,i[s][0],i[s][1]))return!0;return!1}function b(t,r,i,s,n){let[o,a]=t,[l,u]=r,[d,h]=i,[p,c]=s,f=p-d,y=o-d,m=l-o,g=c-h,_=a-h,b=u-a,v=g*m-f*b;if(0===v)return!1;let w=(f*_-g*y)/v,C=(m*_-b*y)/v;return w>=0&&w<=1&&C>=0&&C<=1&&(n&&(n[0]=o+w*(l-o),n[1]=a+w*(u-a)),!0)}function v(t){switch(t){case"esriGeometryEnvelope":case"extent":return o;case"esriGeometryMultipoint":case"multipoint":return a;case"esriGeometryPoint":case"point":return n;case"esriGeometryPolygon":case"polygon":return f;case"esriGeometryPolyline":case"polyline":return y}}},95758:(t,r,i)=>{"use strict";i.d(r,{Ji:()=>g,YX:()=>h,aW:()=>p,im:()=>m,l9:()=>f,oU:()=>y,q9:()=>b,wp:()=>c});var s=i(82639),n=i(18721),o=i(29098),a=i(13345),l=i(46472),u=i(24539),d=i(39442);function h(t){return void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax}function p(t){return void 0!==t.points}function c(t){return void 0!==t.x&&void 0!==t.y}function f(t){return void 0!==t.paths}function y(t){return void 0!==t.rings}function m(t){return(0,s.Wi)(t)?null:t instanceof o.Z?t:c(t)?l.Z.fromJSON(t):f(t)?d.Z.fromJSON(t):y(t)?u.Z.fromJSON(t):p(t)?a.Z.fromJSON(t):h(t)?n.Z.fromJSON(t):null}function g(t){return t?c(t)?"esriGeometryPoint":f(t)?"esriGeometryPolyline":y(t)?"esriGeometryPolygon":h(t)?"esriGeometryEnvelope":p(t)?"esriGeometryMultipoint":null:null}let _={esriGeometryPoint:l.Z,esriGeometryPolyline:d.Z,esriGeometryPolygon:u.Z,esriGeometryEnvelope:n.Z,esriGeometryMultipoint:a.Z};function b(t){return t&&_[t]||null}},80385:(t,r,i)=>{"use strict";i.d(r,{aX:()=>w,or:()=>C});var s=i(10242),n=i(12790),o=i(66150),a=i(82639),l=i(24539),u=i(39442),d=i(59912),h=i(32488),p=i(77056),c=(i(64012),i(57837)),f=i(95758),y=i(73463),m=i(82583),g=i(4756);let _=o.Z.getLogger("esri.geometry.support.normalizeUtils");function b(t,r,i){if(r){let r=function(t,r){if(!(t instanceof u.Z||t instanceof l.Z)){let t="straightLineDensify: the input geometry is neither polyline nor polygon";throw _.error(t),new n.Z(t)}let i=(0,d.x3)(t),s=[];for(let t of i){let r=[];s.push(r),r.push([t[0][0],t[0][1]]);for(let i=0;i<t.length-1;i++){let s=t[i][0],n=t[i][1],o=t[i+1][0],a=t[i+1][1],l=Math.sqrt((o-s)*(o-s)+(a-n)*(a-n)),u=(a-n)/l,d=(o-s)/l,h=l/1e6;if(h>1){for(let t=1;t<=h-1;t++){let i=1e6*t,o=d*i+s,a=u*i+n;r.push([o,a])}let t=(l+1e6*Math.floor(h-1))/2,i=d*t+s,o=u*t+n;r.push([i,o])}r.push([o,a])}}return"polygon"===t.type?new l.Z({rings:s,spatialReference:t.spatialReference}):new u.Z({paths:s,spatialReference:t.spatialReference})}(t,1e6);t=(0,p.Sx)(r,!0)}return i&&(t=(0,d.Sy)(t,i)),t}function v(t,r,i){if(Array.isArray(t)){let s=t[0];if(s>r){let i=(0,d.XZ)(s,r);t[0]=s+-2*r*i}else if(s<i){let r=(0,d.XZ)(s,i);t[0]=s+-2*i*r}}else{let s=t.x;if(s>r){let i=(0,d.XZ)(s,r);t=t.clone().offset(-2*r*i,0)}else if(s<i){let r=(0,d.XZ)(s,i);t=t.clone().offset(-2*i*r,0)}}return t}async function w(t,r,i){if(!Array.isArray(t))return w([t],r);r&&"string"!=typeof r&&_.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");let n="string"==typeof r?r:r?.url??s.Z.geometryServiceUrl,o,C,S,x,M,I,E,T,P=0,A=[],k=[];for(let r of t)if((0,a.Wi)(r))k.push(r);else if(o||(o=r.spatialReference,C=(0,h.C5)(o),I=(S=o.isWebMercator)?102100:4326,x=d.UZ[I].maxX,M=d.UZ[I].minX,E=d.UZ[I].plus180Line,T=d.UZ[I].minus180Line),C){if("mesh"===r.type)k.push(r);else if("point"===r.type)k.push(v(r.clone(),x,M));else if("multipoint"===r.type){let t=r.clone();t.points=t.points.map(t=>v(t,x,M)),k.push(t)}else if("extent"===r.type){let t=r.clone()._normalize(!1,!1,C);k.push(t.rings?new l.Z(t):t)}else if(r.extent){let t=r.extent,i=(0,d.XZ)(t.xmin,M)*(2*x),s=0===i?r.clone():(0,d.Sy)(r.clone(),i);t.offset(i,0),t.intersects(E)&&t.xmax!==x?(P=t.xmax>P?t.xmax:P,s=b(s,S),A.push(s),k.push("cut")):t.intersects(T)&&t.xmin!==M?(P=t.xmax*(2*x)>P?t.xmax*(2*x):P,s=b(s,S,360),A.push(s),k.push("cut")):k.push(s)}else k.push(r.clone())}else k.push(r);let O=(0,d.XZ)(P,x),R=-90,L=O,F=new u.Z;for(;O>0;){let t=360*O-180;F.addPath([[t,R],[t,-1*R]]),R*=-1,O--}if(A.length>0&&L>0){let r=function(t,r){let i=-1;for(let s=0;s<r.cutIndexes.length;s++){let n=r.cutIndexes[s],o=r.geometries[s],a=(0,d.x3)(o);for(let t=0;t<a.length;t++){let r=a[t];r.some(i=>{if(i[0]<180)return!0;{let i=0;for(let t=0;t<r.length;t++){let s=r[t][0];i=s>i?s:i}i=Number(i.toFixed(9));let s=-360*(0,d.XZ)(i,180);for(let i=0;i<r.length;i++){let r=o.getPoint(t,i);o.setPoint(t,i,r.clone().offset(s,0))}return!0}})}if(n===i){if("polygon"===t[0].type)for(let r of(0,d.x3)(o))t[n]=t[n].addRing(r);else if("polyline"===t[0].type)for(let r of(0,d.x3)(o))t[n]=t[n].addPath(r)}else i=n,t[n]=o}return t}(A,await async function(t,r,i,s){let n=(0,y.en)(t),o=r[0].spatialReference,a={...s,query:{...n.query,f:"json",sr:JSON.stringify(o),target:JSON.stringify({geometryType:(0,f.Ji)(r[0]),geometries:r}),cutter:JSON.stringify(i)}},{cutIndexes:l,geometries:u=[]}=(await (0,c.default)(n.path+"/cut",a)).data;return{cutIndexes:l,geometries:u.map(t=>{let r=(0,f.im)(t);return r.spatialReference=o,r})}}(n,A,F,i)),s=[],o=[];for(let i=0;i<k.length;i++){let n=k[i];if("cut"!==n)o.push(n);else{let n=r.shift(),l=t[i];(0,a.pC)(l)&&"polygon"===l.type&&l.rings&&l.rings.length>1&&n.rings.length>=l.rings.length?(s.push(n),o.push("simplify")):o.push(S?(0,p.$)(n):n)}}if(!s.length)return o;let l=await async function(t,r,i){let s="string"==typeof t?(0,m.mN)(t):t,n=r[0].spatialReference,o=(0,f.Ji)(r[0]),a={...i,query:{...s.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify((0,g.F)(r))}},{data:l}=await (0,c.default)(s.path+"/simplify",a);return(0,g.o)(l.geometries,o,n)}(n,s,i),u=[];for(let t=0;t<o.length;t++){let r=o[t];"simplify"!==r?u.push(r):u.push(S?(0,p.$)(l.shift()):l.shift())}return u}let N=[];for(let t=0;t<k.length;t++){let r=k[t];if("cut"!==r)N.push(r);else{let t=A.shift();N.push(!0===S?(0,p.$)(t):t)}}return N}function C(t,r){let i=(0,h.C5)(r);if(i){let[r,s]=i.valid,n=s-r;if(t<r)for(;t<r;)t+=n;if(t>s)for(;t>s;)t-=n}return t}},59912:(t,r,i)=>{"use strict";i.d(r,{Sy:()=>u,UZ:()=>a,XZ:()=>l,x3:()=>d});var s=i(39442),n=i(371),o=i(95758);let a={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new s.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:n.Z.WebMercator}),minus180Line:new s.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:n.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new s.Z({paths:[[[180,-180],[180,180]]],spatialReference:n.Z.WGS84}),minus180Line:new s.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:n.Z.WGS84})}};function l(t,r){return Math.ceil((t-r)/(2*r))}function u(t,r){for(let i of d(t))for(let t of i)t[0]+=r;return t}function d(t){return(0,o.oU)(t)?t.rings:t.paths}},32488:(t,r,i)=>{"use strict";i.d(r,{BZ:()=>S,C5:()=>y,JY:()=>E,ME:()=>x,MP:()=>I,N$:()=>g,QM:()=>w,R_:()=>P,V2:()=>M,WR:()=>A,Zn:()=>T,fS:()=>f,o$:()=>C,oR:()=>_,sS:()=>v,sT:()=>m,yW:()=>b});var s=i(82639),n=i(32121),o=i(54023),a=i(22121);let l={102113:!0,102100:!0,3857:!0,3785:!0},u={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},d='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',h=[-20037508.342788905,20037508.342788905],p=[-20037508.342787,20037508.342787],c={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:h,origin:p,dx:1e-5},102100:{wkTemplate:d,valid:h,origin:p,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:h,origin:p,dx:1e-5},3857:{wkTemplate:d,valid:h,origin:p,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function f(t,r){return t===r||!(0,s.Wi)(t)&&!(0,s.Wi)(r)&&(null!=t.wkid||null!=r.wkid?t.wkid===r.wkid||v(t)&&v(r)||null!=r.latestWkid&&t.wkid===r.latestWkid||null!=t.latestWkid&&r.wkid===t.latestWkid:!(!t.wkt||!r.wkt)&&t.wkt.toUpperCase()===r.wkt.toUpperCase())}function y(t){return E(t)&&t.wkid&&c[t.wkid]||null}function m(t){return!!E(t)&&(t.wkid?null==a.Z[t.wkid]:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function g(t){return!(S(t)||M(t))}function _(t){return E(t)&&4326===t.wkid}function b(t){return E(t)&&t.wkid===o.W.CGCS2000}function v(t){return E(t)&&null!=t.wkid&&!0===l[t.wkid]}function w(t){return E(t)&&32662===t.wkid}function C(t){return t===o.W.GCSMARS2000||t===o.W.GCSMARS2000_SPHERE}function S(t){return E(t)&&null!=t.wkid&&C(t.wkid)}function x(t){return t===o.W.GCSMOON2000}function M(t){return E(t)&&null!=t.wkid&&x(t.wkid)}function I(t){return E(t)&&null!=t.wkid&&!0===u[t.wkid]}function E(t){return(0,s.pC)(t)&&(null!=t.wkid&&t.wkid>=2e3||null!=t.wkt)}let T={wkid:4326,wkt:(0,n.gx)(c[4326].wkTemplate,{Central_Meridian:"0.0"})},P={wkid:102100,latestWkid:3857},A={wkid:32662}},34351:(t,r,i)=>{"use strict";i.d(r,{Mk:()=>n,P$:()=>o});var s=i(84576);let n=(0,s.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),o=(0,s.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},77056:(t,r,i)=>{"use strict";i.d(r,{$:()=>b,Q8:()=>y,R6:()=>_,Sx:()=>v,hG:()=>g,iV:()=>m,mZ:()=>h});var s=i(59118),n=i(82639),o=i(371),a=i(94531),l=i(32488);function u(t){return 57.29577951308232*t}function d(t){return .017453292519943*t}function h(t){return Math.PI/2-2*Math.atan(Math.exp(-t/a.sv.radius))}function p(t){return null!=t.wkid||null!=t.wkt}let c=[0,0];function f(t,r,i,s,n){if(n.spatialReference=i,"x"in t&&"x"in n)[n.x,n.y]=r(t.x,t.y,c,s);else if("xmin"in t&&"xmin"in n)[n.xmin,n.ymin]=r(t.xmin,t.ymin,c,s),[n.xmax,n.ymax]=r(t.xmax,t.ymax,c,s);else if("paths"in t&&"paths"in n||"rings"in t&&"rings"in n){let i;let o="paths"in t?t.paths:t.rings,a=[];for(let t=0;t<o.length;t++){let n=o[t];i=[],a.push(i);for(let t=0;t<n.length;t++)i.push(r(n[t][0],n[t][1],[0,0],s)),n[t].length>2&&i[t].push(n[t][2]),n[t].length>3&&i[t].push(n[t][3])}"paths"in n?n.paths=a:n.rings=a}else if("points"in t&&"points"in n){let i=t.points,o=[];for(let t=0;t<i.length;t++)o[t]=r(i[t][0],i[t][1],[0,0],s),i[t].length>2&&o[t].push(i[t][2]),i[t].length>3&&o[t].push(i[t][3]);n.points=o}return n}function y(t,r){let i=t&&(p(t)?t:t.spatialReference),s=r&&(p(r)?r:r.spatialReference);return!(t&&"type"in t&&"mesh"===t.type||r&&"type"in r&&"mesh"===r.type||!i||!s)&&(!!(0,l.fS)(s,i)||(0,l.sS)(s)&&(0,l.oR)(i)||(0,l.sS)(i)&&(0,l.oR)(s))}function m(t,r){if((0,n.Wi)(t))return null;let i=t.spatialReference,a=r&&(p(r)?r:r.spatialReference);return y(i,a)?(0,l.fS)(i,a)?(0,s.d9)(t):(0,l.sS)(a)?f(t,g,o.Z.WebMercator,!1,(0,s.d9)(t)):(0,l.oR)(a)?f(t,_,o.Z.WGS84,!1,(0,s.d9)(t)):null:null}function g(t,r,i=[0,0]){r>89.99999?r=89.99999:r<-89.99999&&(r=-89.99999);let s=d(r);return i[0]=d(t)*a.sv.radius,i[1]=a.sv.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function _(t,r,i=[0,0],s=!1){let n=u(t/a.sv.radius);return i[0]=s?n:n-360*Math.floor((n+180)/360),i[1]=u(Math.PI/2-2*Math.atan(Math.exp(-r/a.sv.radius))),i}function b(t,r=!1,i=(0,s.d9)(t)){return f(t,g,o.Z.WebMercator,r,i)}function v(t,r=!1,i=(0,s.d9)(t)){return f(t,_,o.Z.WGS84,r,i)}},2966:(t,r,i)=>{"use strict";function s(t,r,i=!1){let{hasM:s,hasZ:n}=t;Array.isArray(r)?4!==r.length||s||n?3===r.length&&i&&!s?(n=!0,s=!1):3===r.length&&s&&n&&(s=!1,n=!1):(s=!0,n=!0):(n=!n&&r.hasZ&&(!s||r.hasM),s=!s&&r.hasM&&(!n||r.hasZ)),t.hasZ=n,t.hasM=s}i.d(r,{l:()=>s})},46262:(t,r,i)=>{"use strict";i.d(r,{k:()=>a});var s=i(82639),n=i(35562),o=i(32488);function a(t,r,i){if((0,s.Wi)(r)||(0,s.Wi)(i)||i.vcsWkid||(0,o.fS)(r,i))return null;let a=(0,n._R)(r)/(0,n._R)(i);if(1===a)return null;switch(t){case"point":case"esriGeometryPoint":return t=>{t&&null!=t.z&&(t.z*=a)};case"polyline":case"esriGeometryPolyline":return t=>(function(t,r){if(t)for(let i of t.paths)for(let t of i)t.length>2&&(t[2]*=r)})(t,a);case"polygon":case"esriGeometryPolygon":return t=>(function(t,r){if(t)for(let i of t.rings)for(let t of i)t.length>2&&(t[2]*=r)})(t,a);case"multipoint":case"esriGeometryMultipoint":return t=>(function(t,r){if(t)for(let i of t.points)i.length>2&&(i[2]*=r)})(t,a);case"extent":case"esriGeometryExtent":return t=>{t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=a,t.zmax*=a)};default:return null}}},92886:(t,r,i)=>{"use strict";i(18368),i(90631),i(63727),i(11284);var s=i(48463),n=i(57837),o=i(12790),a=i(82639);async function l(t){return(0,a.pC)(d.fetchBundleAsset)?d.fetchBundleAsset(t):JSON.parse((await (0,n.default)(t,{responseType:"text"})).data)}class u{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let s;s="string"==typeof i?t=>new URL(t,new URL(i,window.location.href)).href:i instanceof URL?t=>new URL(t,i).href:i,this.pattern="string"==typeof r?RegExp(`^${r}`):r,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,r){return async function(t,r,i,n){let a;let u=r.exec(i);if(!u)throw new o.Z("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${r}"`);let d=u[1]?`${u[1]}/`:"",h=u[2],p=(0,s.Su)(n),c=`${d}${h}.json`,f=p?`${d}${h}_${p}.json`:c;try{a=await l(t(f))}catch(r){if(f===c)throw new o.Z("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:r});try{a=await l(t(c))}catch(t){throw new o.Z("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:t})}}return a}(this.getAssetUrl,this.matcher,t,r)}}let d={};var h=i(6487);(0,s.tz)(new u({pattern:"esri/",location:h.V}))},18368:(t,r,i)=>{"use strict";i.d(r,{Ze:()=>g,p6:()=>_});var s=i(84576),n=i(11284);let o={year:"numeric",month:"numeric",day:"numeric"},a={year:"numeric",month:"long",day:"numeric"},l={year:"numeric",month:"short",day:"numeric"},u={year:"numeric",month:"long",weekday:"long",day:"numeric"},d={hour:"numeric",minute:"numeric"},h={...d,second:"numeric"},p={"short-date":o,"short-date-short-time":{...o,...d},"short-date-short-time-24":{...o,...d,hour12:!1},"short-date-long-time":{...o,...h},"short-date-long-time-24":{...o,...h,hour12:!1},"short-date-le":o,"short-date-le-short-time":{...o,...d},"short-date-le-short-time-24":{...o,...d,hour12:!1},"short-date-le-long-time":{...o,...h},"short-date-le-long-time-24":{...o,...h,hour12:!1},"long-month-day-year":a,"long-month-day-year-short-time":{...a,...d},"long-month-day-year-short-time-24":{...a,...d,hour12:!1},"long-month-day-year-long-time":{...a,...h},"long-month-day-year-long-time-24":{...a,...h,hour12:!1},"day-short-month-year":l,"day-short-month-year-short-time":{...l,...d},"day-short-month-year-short-time-24":{...l,...d,hour12:!1},"day-short-month-year-long-time":{...l,...h},"day-short-month-year-long-time-24":{...l,...h,hour12:!1},"long-date":u,"long-date-short-time":{...u,...d},"long-date-short-time-24":{...u,...d,hour12:!1},"long-date-long-time":{...u,...h},"long-date-long-time-24":{...u,...h,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":d,"long-time":h},c=(0,s.w)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),f=(c.apiValues,c.toJSON.bind(c),c.fromJSON.bind(c),{ar:"ar-u-nu-latn-ca-gregory"}),y=new WeakMap,m=p["short-date-short-time"];function g(t){return t?p[t]:null}function _(t,r){return(function(t){let r=t||m,i=y.get(r);if(!i){let t=(0,n.Kd)(),s=f[(0,n.Kd)()]||t;i=new Intl.DateTimeFormat(s,r),y.set(r,i)}return i})(r).format(t)}(0,n.Ze)(()=>{y=new WeakMap,m=p["short-date-short-time"]})},11284:(t,r,i)=>{"use strict";let s;i.d(r,{Kd:()=>a,Ze:()=>h,qe:()=>u});let n=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function o(){return n??globalThis.navigator?.language??"en"}function a(){return void 0===s&&(s=o()),s}let l=[];function u(t){return l.push(t),{remove(){l.splice(l.indexOf(t),1)}}}let d=[];function h(t){return d.push(t),{remove(){l.splice(d.indexOf(t),1)}}}globalThis.addEventListener?.("languagechange",function(){let t=o();s!==t&&(s=t,[...d].forEach(r=>{r.call(null,t)}),[...l].forEach(r=>{r.call(null,t)}))})},48463:(t,r,i)=>{"use strict";i.d(r,{ME:()=>c,Su:()=>f,tz:()=>p});var s=i(12790),n=i(66138),o=i(11284);let a=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,l={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0},u=[],d=new Map;function h(t){for(let r of d.keys())y(t.pattern,r)&&d.delete(r)}function p(t){return u.includes(t)||(h(t),u.unshift(t)),{remove(){let r=u.indexOf(t);r>-1&&(u.splice(r,1),h(t))}}}async function c(t){let r=(0,o.Kd)();d.has(t)||d.set(t,async function(t,r){let i=[];for(let s of u)if(y(s.pattern,t))try{return await s.fetchMessageBundle(t,r)}catch(t){i.push(t)}if(i.length)throw new s.Z("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i});throw new s.Z("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}(t,r));let i=d.get(t);return i&&await m.add(i),i}function f(t){if(!a.test(t))return null;let r=a.exec(t);if(null===r)return null;let[,i,s]=r,n=i+(s?"-"+s.toUpperCase():"");return l[n]?n:l[i]?i:null}function y(t,r){return"string"==typeof t?r.startsWith(t):t.test(r)}(0,o.Ze)(()=>{d.clear()});let m=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,n.dD)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},90631:(t,r,i)=>{"use strict";i.d(r,{sh:()=>u,uf:()=>d});var s=i(82639),n=i(11284);let o={ar:"ar-u-nu-latn"},a=new WeakMap,l={};function u(t={}){let r={};return null!=t.digitSeparator&&(r.useGrouping=t.digitSeparator),null!=t.places&&(r.minimumFractionDigits=r.maximumFractionDigits=t.places),r}function d(t,r){return -0===t&&(t=0),(function(t){let r=t||l;if(!a.has(r)){let i=(0,n.Kd)(),s=o[(0,n.Kd)()]||i;a.set(r,new Intl.NumberFormat(s,t))}return(0,s.j0)(a.get(r))})(r).format(t)}(0,n.Ze)(()=>{a=new WeakMap,l={}})},63727:(t,r,i)=>{"use strict";i.d(r,{n:()=>d});var s=i(66150),n=i(12619),o=i(32121),a=i(18368),l=i(90631);let u=s.Z.getLogger("esri.intl.substitute");function d(t,r,i={}){let{format:s={}}=i;return(0,o.gx)(t,t=>(function(t,r,i){let s,o;let d=t.indexOf(":");if(-1===d?s=t.trim():(s=t.slice(0,d).trim(),o=t.slice(d+1).trim()),!s)return"";let p=(0,n.hS)(s,r);if(null==p)return"";let c=(o?i?.[o]:null)??i?.[s];return c?function(t,r){switch(r.type){case"date":return(0,a.p6)(t,r.intlOptions);case"number":return(0,l.uf)(t,r.intlOptions);default:return u.warn("missing format descriptor for key {key}"),h(t)}}(p,c):o?function(t,r){switch(r.toLowerCase()){case"dateformat":return(0,a.p6)(t);case"numberformat":return(0,l.uf)(t);default:return u.warn(`inline format is unsupported since 4.12: ${r}`),/^(dateformat|datestring)/i.test(r)?(0,a.p6)(t):/^numberformat/i.test(r)?(0,l.uf)(t):h(t)}}(p,o):h(p)})(t,r,s))}function h(t){switch(typeof t){case"string":return t;case"number":return(0,l.uf)(t);case"boolean":return""+t;default:return t instanceof Date?(0,a.p6)(t):""}}},49869:(t,r,i)=>{"use strict";let s;i.d(r,{Dp:()=>d,Nv:()=>l,i8:()=>a,id:()=>s,qh:()=>u});var n=i(96082),o=i(82583);let a="4.25",l={async request(t,r){let{default:s}=await Promise.resolve().then(i.bind(i,57837)),n=t.options,a=n.responseType;n.signal=r?.signal,n.responseType="native"===a||"native-request-init"===a?"native-request-init":a&&["blob","json","text"].includes(a)&&o.oh(t.url)?.after?a:"array-buffer";let l=await s(t.url,n),u={data:l.data,ssl:l.ssl};switch(l.requestOptions?.responseType){case"native-request-init":return delete u.data.signal,u;case"blob":u.data=await u.data.arrayBuffer();break;case"json":u.data=(new TextEncoder).encode(JSON.stringify(u.data)).buffer;break;case"text":u.data=(new TextEncoder).encode(u.data).buffer}return{result:u,transferList:[u.data]}}};function u(t){s=t}function d(t){let r=s&&s.findCredential(t);return r&&r.token?(0,o.ZN)(t,"token",r.token):t}(0,n.Z)("host-webworker")},88622:(t,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>eU});var s=i(24765),n=i(19047),o=(i(57969),i(63535),i(51661),i(29432),i(71260),i(76744),i(47513)),a=i(61885),l=i(42765),u=i(80587),d=i(57837),h=i(98402),p=i(34577),c=i(51084),f=i(12790),y=i(46366),m=i(59118),g=i(66150),_=i(82639),b=i(45470),v=i(12619),w=i(66138),C=i(18229),S=i(82583),x=i(53919),M=i(36844),I=i(71169),E=i(30407),T=i(62300),P=i(51609),A=i(58627),k=i(371),O=i(75737),R=(i(64012),i(94323)),L=i(57107),F=i(96082),N=i(63878),j=i(3832),D=i(40655),Z=(i(99950),i(21314)),V=i(10861),z=i(7938),U=i(83866),G=i(55308),q=i(18721),$=i(24539),B=i(34351);let W=0,H="esri.layers.graphics.sources.MemorySource",J=g.Z.getLogger(H),Y=class extends N.Z.LoadableMixin((0,j.v)((0,L.p)(c.Z))){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){let r=(0,_.pC)(t)?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){let t=this.layer?.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,r={}){await this.load(r);let i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);(0,U.p)(t,this.layer.spatialReference,i);let s=G.default.fromJSON(i);if(!this._requiresClientGraphicMapping())return s;let n=this.layer.objectIdField;for(let t of s.features){let r=t.attributes[n],i=this._idToClientGraphic.get(r);i&&(t.geometry=i.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new f.Z("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);let i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return(0,U.p)(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(t=>({count:t.count,extent:q.Z.fromJSON(t.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}async _applyEdits(t){if(!this._connection)throw new f.Z("feature-layer-source:edit-failure","Memory source not loaded");let r=this.layer.objectIdField,i=null,s=[],n=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);let o=t=>"objectId"in t&&null!=t.objectId?t.objectId:"attributes"in t&&null!=t.attributes[r]?t.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(let r of t.deleteFeatures){let t=o(r);null!=t&&s.push(t)}let a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(let r of t.updateFeatures)if(n.push(this._serializeFeature(r)),a){let t=o(r);null!=t&&a.set(t,r)}}(0,z.P)(i?i.features:null,n,this.layer.spatialReference);let{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:s});return this.fullExtent=l,i&&i.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(t,r){if("mesh"!==this._layerOrSourceGeometryType||(0,_.Wi)(t))return;let i=[];for(let{geometry:s}of t)!(0,_.pC)(s)||"mesh"!==s.type||s.hasExtent||s.loaded||i.push(s.load({signal:r}));i.length&&await Promise.all(i)}_updateClientGraphicIds(t,r){if(this._idToClientGraphic){if(t)for(let i of r.updateResults){if(!i.success)continue;let r=t.get(i.objectId);null!=r&&this._addIdToClientGraphic(r)}for(let t of r.deleteResults)t.success&&this._idToClientGraphic.delete(t.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){let r=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new f.Z("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){let r=new Map,i=Array(t.length),s=null;for(let n=0;n<t.length;n++){let o=t[n],a=this._serializeFeature(o);!s&&(0,_.pC)(o.geometry)&&(s=o.geometry.type),i[n]=a,r.set(`${a.uid}`,o)}let n=this;return{features:i,inferredGeometryType:s,finish(t){let i=n.sourceJSON.objectIdField;for(let s in t){let o=t[s],a=r.get(s);a&&(a.attributes||(a.attributes={}),-1===o?delete a.attributes[i]:a.attributes[i]=o,n._addIdToClientGraphic(a))}}}}_addIdToClientGraphic(t){if(!this._idToClientGraphic)return;let r=this.sourceJSON.objectIdField,i=t.attributes&&t.attributes[r];null!=i&&this._idToClientGraphic.set(i,t)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return"mesh"===t||"multipatch"===t||"extent"===t}_serializeFeature(t){let{attributes:r}=t,i=this._geometryForSerialization(t),s=(W++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:r}:{uid:s,attributes:r}}_geometryForSerialization(t){let{geometry:r}=t;return(0,_.Wi)(r)?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?$.Z.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await (0,D.bA)("MemorySourceWorker",{strategy:(0,F.Z)("feature-layers-workers")?"dedicated":"local",signal:t});let{fields:r,spatialReference:i,objectIdField:s,hasM:n,hasZ:o,timeInfo:a}=this.layer,l="defaults"===this.layer.originOf("spatialReference");await this._prepareClientMapping(this.items,t);let u=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",t=>{J.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),t.preventDefault()}));let d={features:u.features,fields:r&&r.map(t=>t.toJSON()),geometryType:B.P$.toJSON(this._workerGeometryType),hasM:"mesh"!==this._layerOrSourceGeometryType&&n,hasZ:"mesh"===this._layerOrSourceGeometryType||o,objectIdField:s,spatialReference:l?null:i&&i.toJSON(),timeInfo:a?a.toJSON():null},h=await this._connection.invoke("load",d,{signal:t});for(let t of h.warnings)J.warn(t.message,{layer:this.layer,warning:t});h.featureErrors.length&&J.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);let p=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(p.geometryType=B.P$.toJSON(u.inferredGeometryType)),this.sourceJSON=p,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(h.assignedObjectIds)}};(0,s._)([(0,V.c)({Type:R.Z,ensureType:(0,Z.se)(R.Z)})],Y.prototype,"itemType",void 0),(0,s._)([(0,x.Cb)()],Y.prototype,"type",void 0),(0,s._)([(0,x.Cb)({constructOnly:!0})],Y.prototype,"layer",void 0),(0,s._)([(0,x.Cb)({readOnly:!0})],Y.prototype,"_workerGeometryType",null),(0,s._)([(0,x.Cb)()],Y.prototype,"sourceJSON",void 0),Y=(0,s._)([(0,E.j)(H)],Y);var K=i(77842),X=i(85439),Q=i(85475),ee=i(8013),et=i(74919),er=i(51302),ei=i(12344),es=i(69173),en=i(63281),eo=i(54485),ea=i(36369),el=i(53306);let eu=class extends el.Z{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};(0,s._)([(0,x.Cb)()],eu.prototype,"updating",void 0),(0,s._)([(0,x.Cb)()],eu.prototype,"status",void 0);let ed=eu=(0,s._)([(0,E.j)("esri.layers.support.PublishingInfo")],eu),eh="esri.layers.mixins.PublishableLayer";Symbol(eh);let ep=t=>{let r=class extends t{get publishingInfo(){if(this.destroyed)return null;let t=this._get("publishingInfo");if(t)return t;let r=new ed;return this._checkPublishingStatus(r),r}_checkPublishingStatus(t){let r=0,i=async n=>{let o;t.updating=!0;try{o=await this.fetchPublishingStatus()}catch(t){o="unavailable"}"published"!==o&&"unavailable"!==o||("publishing"===t.status&&this.refresh(),s.remove()),t.status=o,t.updating=!1,s.removed||(r=setTimeout(i,n,n+125))},s={removed:!1,remove(){this.removed=!0,clearTimeout(r)}};this.when().catch(()=>s.remove()),i(250),this.own(s)}};return(0,s._)([(0,x.Cb)({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=(0,s._)([(0,E.j)(eh)],r)};var ec=i(72937),ef=i(45086),ey=i(88113),em=i(15463),eg=i(98793),e_=i(71958),eb=i(32950),ev=i(61458),ew=i(72844),eC=i(99444),eS=i(57599),ex=i(94018),eM=i(65392),eI=i(28548),eE=i(93948),eT=i(88026),eP=i(57775),eA=i(88794),ek=i(37004),eO=i(59534);let eR="FeatureLayer",eL="esri.layers.FeatureLayer",eF=g.Z.getLogger(eL);function eN(t,r){return new f.Z("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${r}`,{layer:t})}function ej(t){return t&&t instanceof c.Z}let eD=(0,ew.v)();function eZ(t,r,i){let s=!!i?.writeLayerSchema;return{enabled:s,ignoreOrigin:s}}let eV=class extends(0,ei.B)((0,es.M)((0,er.b)(ep((0,et.o1)((0,Q.h)((0,eo.c)((0,ey.n)((0,ef.M)((0,ec.Q)((0,X.Y)((0,en.q)((0,ea.I)((0,b.R)((0,ee.N)((0,K.V)((0,p.J)(O.Z))))))))))))))))){constructor(...t){super(...t),this._handles=new y.Z,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=k.Z.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){this.source?.destroy(),this._handles=(0,_.SC)(this._handles)}normalizeCtorArgs(t,r){return"string"==typeof t?{url:t,...r}:t}load(t){let r=(0,_.pC)(t)?t.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(r).then(t=>this.initLayerProperties(t))),Promise.resolve(this);let i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},t).catch(w.r9).then(async()=>{if(this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)){let t=await this._fetchFirstLayerId(r);null!=t&&(this.layerId=t)}if(!this.url&&!this._hasMemorySource())throw new f.Z("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(r))}).then(()=>this.finishLoadEditablePortalLayer(t));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(t,r){return r=r.layerDefinition||r,(0,e_.hu)(t,r,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,r){return this._readEditingEnabled(r,!1)}readEditingEnabledFromWebMap(t,r,i){return this._readEditingEnabled(r,!0,i)}writeEditingEnabled(t,r){this._writeEditingEnabled(t,r,!1)}writeEditingEnabledToWebMap(t,r,i,s){this._writeEditingEnabled(t,r,!0,s)}readIsTable(t,r){return"Table"===(r=r?.layerDefinition??r).type||!r.geometryType}writeIsTable(t,r,i,s){s?.writeLayerSchema&&(0,v.RB)(i,t?"Table":"Feature Layer",r)}readGlobalIdField(t,r){return(0,e_.rk)(r.layerDefinition||r)}readObjectIdField(t,r){return(0,e_.kZ)(r.layerDefinition||r)}get parsedUrl(){let t=(0,S.mN)(this.url);return null!=t&&(null!=this.dynamicDataSource?t.path=(0,S.v_)(t.path,"dynamicLayer"):null!=this.layerId&&(t.path=(0,S.v_)(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){(0,eC.YN)(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,r,i){let s=(r=r.layerDefinition||r).drawingInfo?.renderer;if(s){let t=(0,l.a)(s,r,i)??void 0;return t||eF.error("Failed to create renderer",{rendererDefinition:r.drawingInfo.renderer,layer:this,context:i}),t}if(r.defaultSymbol)return r.types&&r.types.length?new a.Z({defaultSymbol:ez(r.defaultSymbol,r,i),field:r.typeIdField,uniqueValueInfos:r.types.map(t=>({id:t.id,symbol:ez(t.symbol,t,i)}))}):new o.Z({symbol:ez(r.defaultSymbol,r,i)})}set source(t){let r=this._get("source");r!==t&&(ej(r)&&this._resetMemorySource(r),ej(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof c.Z?new Y({layer:this,items:t}):t:null}readSource(t,r){let i=G.default.fromJSON(r.featureSet);return new Y({layer:this,items:i?.features??[]})}readTemplates(t,r){let i=r.editFieldsInfo,s=i&&i.creatorField,n=i&&i.editorField;return t=t&&t.map(t=>eb.Z.fromJSON(t)),this._fixTemplates(t,s),this._fixTemplates(t,n),t}readTitle(t,r){let i=r.layerDefinition?.name??r.name,s=r.title||r.layerDefinition&&r.layerDefinition.title;if(i){let t=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,em.a7)(this.url,i):i;let r=i;if(!r&&this.url){let t=(0,em.Qc)(this.url);(0,_.pC)(t)&&(r=t.title)}if(!r)return;return"item-title-and-service-name"===this.sublayerTitleMode&&t&&t!==r&&(r=t+" - "+r),(0,em.ld)(r)}if("item-title"===this.sublayerTitleMode&&s)return s}readTitleFromWebMap(t,r){return r.title||r.layerDefinition&&r.layerDefinition.name}readTypeIdField(t,r){let i=(r=r.layerDefinition||r).typeIdField;if(i&&r.fields){i=i.toLowerCase();let t=r.fields.find(t=>t.name.toLowerCase()===i);t&&(i=t.name)}return i}readTypes(t,r){t=(r=r.layerDefinition||r).types;let i=r.editFieldsInfo,s=i&&i.creatorField,n=i&&i.editorField;return t&&t.map(t=>(t=ev.Z.fromJSON(t),this._fixTemplates(t.templates,s),this._fixTemplates(t.templates,n),t))}readVisible(t,r){return r.layerDefinition&&null!=r.layerDefinition.defaultVisibility?!!r.layerDefinition.defaultVisibility:null!=r.visibility?!!r.visibility:void 0}async addAttachment(t,r){return(0,e_.JD)(this,t,r,eR)}async updateAttachment(t,r,i){return(0,e_.Y5)(this,t,r,i,eR)}async applyEdits(t,r){return(0,e_.Jj)(this,t,r)}on(t,r){return super.on(t,r)}createPopupTemplate(t){return(0,ek.eZ)(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});let{default:r}=await (0,w.Hl)(i.e(1650).then(i.bind(i,31650)),t);return new r({layer:this}).load({signal:t})}createQuery(){let t=(0,e_.rP)(this);t.dynamicDataSource=this.dynamicDataSource;let r=(0,_.pC)(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,i=(0,C._)(this.definitionExpression,r);return t.where=i||"1=1",t}async deleteAttachments(t,r){return(0,e_.FV)(this,t,r,eR)}async fetchRecomputedExtents(t){return(0,e_.Ci)(this,t,eR)}getFeatureType(t){let{typeIdField:r,types:i}=this;if(!r||!t)return null;let s=t.attributes?t.attributes[r]:void 0;if(null==s)return null;let n=null;return i?.some(t=>{let{id:r}=t;return null!=r&&(r.toString()===s.toString()&&(n=t),!!n)}),n}getFieldDomain(t,r){let i=r&&r.feature,s=this.getFeatureType(i);if(s){let r=s.domains&&s.domains[t];if(r&&"inherited"!==r.type)return r}return this._getLayerDomain(t)}getField(t){return this.fieldsIndex.get(t)}async queryAttachments(t,r){return(0,e_.SU)(this,t,r,eR)}async queryFeatures(t,r){let i=await this.load(),s=await i.source.queryFeatures(eP.Z.from(t)??i.createQuery(),r);if(s?.features)for(let t of s.features)t.layer=t.sourceLayer=i;return s}async queryObjectIds(t,r){return(0,e_.tD)(this,t,r,eR)}async queryFeatureCount(t,r){return(0,e_.VG)(this,t,r,eR)}async queryExtent(t,r){return(0,e_.KE)(this,t,r,eR)}async queryRelatedFeatures(t,r){return(0,e_.kp)(this,t,r,eR)}async queryRelatedFeaturesCount(t,r){return(0,e_.C9)(this,t,r,eR)}async queryTopFeatures(t,r){let{source:i,capabilities:s}=await this.load();if(!i.queryTopFeatures||!s?.query?.supportsTopFeaturesQuery)throw new f.Z(eR,"Layer source does not support queryTopFeatures capability");let n=await i.queryTopFeatures(eA.Z.from(t),r);if(n?.features)for(let t of n.features)t.layer=t.sourceLayer=this;return n}async queryTopObjectIds(t,r){let{source:i,capabilities:s}=await this.load();if(!i.queryTopObjectIds||!s?.query.supportsTopFeaturesQuery)throw new f.Z(eR,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(eA.Z.from(t),r)}async queryTopFeaturesExtent(t,r){let{source:i,capabilities:s}=await this.load();if(!i.queryTopExtents||!s?.query?.supportsTopFeaturesQuery)throw new f.Z(eR,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(eA.Z.from(t),r)}async queryTopFeatureCount(t,r){let{source:i,capabilities:s}=await this.load();if(!i.queryTopCount||!s?.query?.supportsTopFeaturesQuery)throw new f.Z(eR,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(eA.Z.from(t),r)}read(t,r){let i=t.featureCollection;if(i){let t=i.layers;t&&1===t.length&&(super.read(t[0],r),null!=i.showLegend&&super.read({showLegend:i.showLegend},r))}super.read(t,r),r&&"service"===r.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(t,r){let{origin:i,layerContainerType:s,messages:n}=r={...r,origin:r?.origin??void 0,writeLayerSchema:r?.writeLayerSchema??this._hasMemorySource()};if(this.dynamicDataSource)return n?.push(eN(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if("web-scene"===i||"web-map"===i&&"tables"!==s)return n?.push(eN(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return n?.push(eN(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===i&&"tables"===s)return n?.push(eN(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(t,r)}clone(){if(this._hasMemorySource())throw new f.Z(eR,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){return!!this.loaded&&("memory"===this.source?.type||(0,eI.D)(this,t))}async save(t){return(await i.e(3076).then(i.bind(i,83076))).save(this,t)}async saveAs(t,r){return(await i.e(3076).then(i.bind(i,83076))).saveAs(this,t,r)}_readEditingEnabled(t,r,i){let s=t.layerDefinition?.capabilities;return s?this._hasEditingCapability(s):(s=t.capabilities,r&&"web-map"===i?.origin&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(t,r,i,s){if(!t){let t=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";(0,v.RB)("layerDefinition.capabilities",t,r),i&&!s?.writeLayerSchema&&(r.capabilities=t)}}_getLayerDomain(t){let r=this.fieldsIndex.get(t);return r?r.domain:null}_fetchFirstLayerId(t){return(0,d.default)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(t=>{let r=t.data;if(r)return Array.isArray(r.layers)&&r.layers.length>0?r.layers[0].id:Array.isArray(r.tables)&&r.tables.length>0?r.tables[0].id:void 0})}async initLayerProperties(t){return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),(0,eC.YN)(this.renderer,this.fieldsIndex),(0,eC.UF)(this.timeInfo,this.fieldsIndex),(0,eT.y)(this,{origin:"service"})}async hasDataChanged(){return(0,e_.gG)(this)}async fetchPublishingStatus(){let t=this.source;return t?.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){let t=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||-1!==t.search(/\/FeatureServer\//i)||this.fields?.some(t=>"geometry"===t.type)||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,r){t&&t.forEach(t=>{let i=t.prototype&&t.prototype.attributes;i&&r&&delete i[r]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new f.Z("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new f.Z("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([t.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),t.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};(0,s._)([(0,I.r)("service","capabilities")],eV.prototype,"readCapabilities",null),(0,s._)([(0,x.Cb)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],eV.prototype,"charts",void 0),(0,s._)([(0,x.Cb)({readOnly:!0})],eV.prototype,"createQueryVersion",null),(0,s._)([(0,x.Cb)({json:{read:{source:"layerDefinition.copyrightText"}}})],eV.prototype,"copyright",void 0),(0,s._)([(0,x.Cb)({json:{read:{source:"layerDefinition.displayField"}}})],eV.prototype,"displayField",void 0),(0,s._)([(0,x.Cb)({types:h.LB,readOnly:!0})],eV.prototype,"defaultSymbol",void 0),(0,s._)([(0,x.Cb)({type:eE.n})],eV.prototype,"dynamicDataSource",void 0),(0,s._)([(0,x.Cb)({type:Boolean})],eV.prototype,"editingEnabled",null),(0,s._)([(0,I.r)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],eV.prototype,"readEditingEnabled",null),(0,s._)([(0,I.r)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],eV.prototype,"readEditingEnabledFromWebMap",null),(0,s._)([(0,T.c)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],eV.prototype,"writeEditingEnabled",null),(0,s._)([(0,T.c)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],eV.prototype,"writeEditingEnabledToWebMap",null),(0,s._)([(0,x.Cb)({...eD.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:eZ}}}}})],eV.prototype,"fields",void 0),(0,s._)([(0,x.Cb)(eD.fieldsIndex)],eV.prototype,"fieldsIndex",void 0),(0,s._)([(0,x.Cb)({type:A.Z,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],eV.prototype,"formTemplate",void 0),(0,s._)([(0,x.Cb)({json:{read:{source:"layerDefinition.extent"}}})],eV.prototype,"fullExtent",void 0),(0,s._)([(0,x.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:eZ,writer(t,r,i){let s=t?e_.Fr.toJSON(t):null;s&&(0,v.RB)(i,s,r)}}}},read:{source:"layerDefinition.geometryType",reader:e_.Fr.read}}})],eV.prototype,"geometryType",void 0),(0,s._)([(0,x.Cb)({json:{read:{source:"layerDefinition.hasM"}}})],eV.prototype,"hasM",void 0),(0,s._)([(0,x.Cb)({json:{read:{source:"layerDefinition.hasZ"}}})],eV.prototype,"hasZ",void 0),(0,s._)([(0,x.Cb)(eg.id)],eV.prototype,"id",void 0),(0,s._)([(0,x.Cb)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],eV.prototype,"infoFor3D",void 0),(0,s._)([(0,x.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],eV.prototype,"isTable",void 0),(0,s._)([(0,I.r)("service","isTable",["type","geometryType"]),(0,I.r)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],eV.prototype,"readIsTable",null),(0,s._)([(0,T.c)("web-map","isTable")],eV.prototype,"writeIsTable",null),(0,s._)([(0,x.Cb)(eg.iR)],eV.prototype,"labelsVisible",void 0),(0,s._)([(0,x.Cb)({type:[eS.Z],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:ex.r},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:ex.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],eV.prototype,"labelingInfo",void 0),(0,s._)([(0,x.Cb)((()=>{let t=(0,m.d9)(eg.bT);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){(0,v.RB)(i,(0,eO.a)(t),r)}}},t})())],eV.prototype,"opacity",void 0),(0,s._)([(0,x.Cb)(eg.rn)],eV.prototype,"legendEnabled",void 0),(0,s._)([(0,x.Cb)({type:["show","hide"],json:(()=>{let t=(0,m.d9)(eg.rT.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],eV.prototype,"listMode",void 0),(0,s._)([(0,I.r)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],eV.prototype,"readGlobalIdField",null),(0,s._)([(0,x.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:eZ}}}}})],eV.prototype,"objectIdField",void 0),(0,s._)([(0,I.r)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],eV.prototype,"readObjectIdField",null),(0,s._)([(0,x.Cb)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],eV.prototype,"operationalLayerType",void 0),(0,s._)([(0,x.Cb)(eD.outFields)],eV.prototype,"outFields",void 0),(0,s._)([(0,x.Cb)({readOnly:!0})],eV.prototype,"parsedUrl",null),(0,s._)([(0,x.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],eV.prototype,"path",void 0),(0,s._)([(0,x.Cb)(eg.C_)],eV.prototype,"popupEnabled",void 0),(0,s._)([(0,x.Cb)({type:n.Z,json:{name:"popupInfo",write:!0}})],eV.prototype,"popupTemplate",void 0),(0,s._)([(0,x.Cb)({readOnly:!0})],eV.prototype,"defaultPopupTemplate",null),(0,s._)([(0,x.Cb)({types:u.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:u.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(t,r,i)=>({ignoreOrigin:i?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,r,i)=>({ignoreOrigin:i?.writeLayerSchema})}}})],eV.prototype,"renderer",null),(0,s._)([(0,I.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,I.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],eV.prototype,"readRenderer",null),(0,s._)([(0,x.Cb)((()=>{let t=(0,m.d9)(eg.YI);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],eV.prototype,"screenSizePerspectiveEnabled",void 0),(0,s._)([(0,x.Cb)({clonable:!1})],eV.prototype,"source",null),(0,s._)([(0,M.p)("source")],eV.prototype,"castSource",null),(0,s._)([(0,I.r)("portal-item","source",["featureSet"]),(0,I.r)("web-map","source",["featureSet"])],eV.prototype,"readSource",null),(0,s._)([(0,x.Cb)({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],eV.prototype,"spatialReference",void 0),(0,s._)([(0,x.Cb)({type:Number})],eV.prototype,"subtypeCode",void 0),(0,s._)([(0,x.Cb)({type:[eb.Z]})],eV.prototype,"templates",void 0),(0,s._)([(0,I.r)("templates",["editFieldsInfo","creatorField","editorField","templates"])],eV.prototype,"readTemplates",null),(0,s._)([(0,x.Cb)({type:eM.Z})],eV.prototype,"timeInfo",void 0),(0,s._)([(0,x.Cb)()],eV.prototype,"title",void 0),(0,s._)([(0,I.r)("service","title",["name"]),(0,I.r)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],eV.prototype,"readTitle",null),(0,s._)([(0,I.r)("web-map","title",["layerDefinition.name","title"])],eV.prototype,"readTitleFromWebMap",null),(0,s._)([(0,x.Cb)({type:String})],eV.prototype,"sublayerTitleMode",void 0),(0,s._)([(0,x.Cb)({json:{read:!1}})],eV.prototype,"type",void 0),(0,s._)([(0,x.Cb)({type:String})],eV.prototype,"typeIdField",void 0),(0,s._)([(0,I.r)("service","typeIdField"),(0,I.r)("typeIdField",["layerDefinition.typeIdField"])],eV.prototype,"readTypeIdField",null),(0,s._)([(0,x.Cb)({type:[ev.Z]})],eV.prototype,"types",void 0),(0,s._)([(0,I.r)("service","types",["types"]),(0,I.r)("types",["layerDefinition.types"])],eV.prototype,"readTypes",null),(0,s._)([(0,x.Cb)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],eV.prototype,"visible",void 0),(0,s._)([(0,I.r)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],eV.prototype,"readVisible",null),eV=(0,s._)([(0,E.j)(eL)],eV);let ez=(0,P.d)({types:h.QT}),eU=eV},75737:(t,r,i)=>{"use strict";i.d(r,{Z:()=>v});var s=i(24765),n=(i(64012),i(57837)),o=i(12790),a=i(88832),l=i(18372),u=i(63878),d=i(66150),h=i(66138),p=i(82583),c=i(53919),f=(i(99950),i(21314),i(30407)),y=i(10242),m=i(18721),g=i(371);let _=0,b=class extends a.Z.EventedMixin((0,l.IG)(u.Z)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new m.Z(-180,-90,180,90,g.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+_++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=g.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){return(await i.e(6701).then(i.bind(i,36701))).fromUrl("string"==typeof t?{url:t}:t)}static fromPortalItem(t){return async function(t){let r="portalItem"in t?t:{portalItem:t},s=await i.e(5853).then(i.bind(i,85853));try{return await s.fromItem(r)}catch(n){let t=r&&r.portalItem,i=t&&t.id||"unset",s=t&&t.portal&&t.portal.url||y.Z.portalUrl;throw d.Z.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+s+"', id: '"+i+"')",n),n}}(t)}initialize(){this.when().catch(t=>{(0,h.D_)(t)||d.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){if(this.parent){let t=this.parent;"layers"in t&&t.layers.includes(this)?t.layers.remove(this):"tables"in t&&t.tables.includes(this)?t.tables.remove(this):"baseLayers"in t&&t.baseLayers.includes(this)?t.baseLayers.remove(this):"baseLayers"in t&&t.referenceLayers.includes(this)&&t.referenceLayers.remove(this)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,p.mN)(this.url)}async fetchAttributionData(){let t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await (0,n.default)(t,{query:{f:"json"},responseType:"json"})).data;throw new o.Z("layer:no-attribution-data","Layer does not have attribution data")}};(0,s._)([(0,c.Cb)({type:String})],b.prototype,"attributionDataUrl",void 0),(0,s._)([(0,c.Cb)({type:m.Z})],b.prototype,"fullExtent",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],b.prototype,"hasAttributionData",null),(0,s._)([(0,c.Cb)({type:String,clonable:!1})],b.prototype,"id",void 0),(0,s._)([(0,c.Cb)({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0),(0,s._)([(0,c.Cb)({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0),(0,s._)([(0,c.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0),(0,s._)([(0,c.Cb)({clonable:!1})],b.prototype,"parent",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],b.prototype,"parsedUrl",null),(0,s._)([(0,c.Cb)({type:Boolean})],b.prototype,"popupEnabled",void 0),(0,s._)([(0,c.Cb)({type:Boolean})],b.prototype,"attributionVisible",void 0),(0,s._)([(0,c.Cb)({type:g.Z})],b.prototype,"spatialReference",void 0),(0,s._)([(0,c.Cb)({type:String})],b.prototype,"title",void 0),(0,s._)([(0,c.Cb)({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0),(0,s._)([(0,c.Cb)()],b.prototype,"url",void 0),(0,s._)([(0,c.Cb)({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0);let v=b=(0,s._)([(0,f.j)("esri.layers.Layer")],b)},59731:(t,r,i)=>{"use strict";i.d(r,{rk:()=>l,Tj:()=>u,GI:()=>d,CE:()=>h,Tq:()=>p,Zx:()=>c,Ee:()=>y});var s=i(81533),n=i(85098),o=i(87004),a=i(20161);class l{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){var s,n,o;this.strength=(s=t.strength,s+(r.strength-s)*i),this.radius=(n=t.radius,n+(r.radius-n)*i),this.threshold=(o=t.threshold,o+(r.threshold-o)*i)}clone(){return new l(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:f(this.radius),strength:this.strength,threshold:this.threshold}}}class u{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){var s;this.radius=Math.round((s=t.radius,s+(r.radius-s)*i))}clone(){return new u(this.radius)}toJSON(){return{type:"blur",radius:f(this.radius)}}}class d{constructor(t,r){this.type=t,this.amount=r,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){var s;this.amount=(s=t.amount,s+(r.amount-s)*i),this._updateMatrix()}clone(){return new d(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){let t=this._colorMatrix||(0,o.c)();switch(this.type){case"brightness":this._colorMatrix=((t,r)=>{let i=(0,a.s)(t,r,0,0,0,0,r,0,0,0,0,r,0,0,0,0,1);return(0,a.t)(i,i)})(t,this.amount);break;case"contrast":this._colorMatrix=((t,r)=>{let i=(0,a.s)(t,r,0,0,.5-.5*r,0,r,0,.5-.5*r,0,0,r,.5-.5*r,0,0,0,1);return(0,a.t)(i,i)})(t,this.amount);break;case"grayscale":this._colorMatrix=((t,r)=>{let i=1-this.amount,s=(0,a.s)(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return(0,a.t)(s,s)})(t);break;case"invert":this._colorMatrix=((t,r)=>{let i=1-2*r,s=(0,a.s)(t,i,0,0,r,0,i,0,r,0,0,i,r,0,0,0,1);return(0,a.t)(s,s)})(t,this.amount);break;case"saturate":this._colorMatrix=((t,r)=>{let i=(0,a.s)(t,.213+.787*r,.715-.715*r,.072-.072*r,0,.213-.213*r,.715+.285*r,.072-.072*r,0,.213-.213*r,.715-.715*r,.072+.928*r,0,0,0,0,1);return(0,a.t)(i,i)})(t,this.amount);break;case"sepia":this._colorMatrix=((t,r)=>{let i=1-this.amount,s=(0,a.s)(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return(0,a.t)(s,s)})(t)}}}class h{constructor(t,r,i,s){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=s,this.type="drop-shadow"}interpolate(t,r,i){var s,n,o,a,l,u,d;this.offsetX=(s=t.offsetX,s+(r.offsetX-s)*i),this.offsetY=(n=t.offsetY,n+(r.offsetY-n)*i),this.blurRadius=(o=t.blurRadius,o+(r.blurRadius-o)*i),this.color[0]=Math.round((a=t.color[0],a+(r.color[0]-a)*i)),this.color[1]=Math.round((l=t.color[1],l+(r.color[1]-l)*i)),this.color[2]=Math.round((u=t.color[2],u+(r.color[2]-u)*i)),this.color[3]=(d=t.color[3],d+(r.color[3]-d)*i)}clone(){return new h(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){let t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:f(this.offsetX),yoffset:f(this.offsetY),blurRadius:f(this.blurRadius),color:t}}}class p{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){var s;this.angle=(s=t.angle,s+(r.angle-s)*i),this._updateMatrix()}clone(){return new p(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){let t=this._colorMatrix||(0,o.c)();this._colorMatrix=((t,r)=>{let i=Math.sin(r*Math.PI/180),s=Math.cos(r*Math.PI/180),n=(0,a.s)(t,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return(0,a.t)(n,n)})(t,this.angle)}}class c{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){var s;this.amount=(s=t.amount,s+(r.amount-s)*i)}clone(){return new c(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function f(t){return Math.round(1e3*(0,n.Wz)(t))/1e3}function y(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new d(t.type,0);case"saturate":case"brightness":case"contrast":return new d(t.type,1);case"opacity":return new c(1);case"hue-rotate":return new p(0);case"blur":return new u(0);case"drop-shadow":return new h(0,0,0,[...(0,s.h$)("transparent")]);case"bloom":return new l(0,0,1)}}},62913:(t,r,i)=>{"use strict";i.d(r,{cW:()=>u,ij:()=>l,rM:()=>d});var s=i(12790),n=i(12619),o=i(52271),a=i(68667);function l(t,r,i){try{return function(t){if(!t||0===t.length)return null;if(function(t){let r=t[0];return!!r&&"scale"in r}(t)){let r=[];for(let i of t)r.push({scale:i.scale,value:d(i.value)});return r}return d(t)}(t)}catch(t){i?.messages?.push(t)}return null}function u(t,r,i,s){try{let s=function(t){let r=(0,o.Q)(t);return r?(0,a.Cb)(r)?r.map(t=>t.toJSON()):r.map(({scale:t,effects:r})=>({scale:t,value:r.map(t=>t.toJSON())})):null}(t);(0,n.RB)(i,s,r)}catch(t){s.messages&&s.messages.push(t)}}function d(t){if(!t||!t.length)return"";let r=[];for(let i of t){let t=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":t=[h(i,"amount")];break;case"blur":t=[h(i,"radius","pt")];break;case"hue-rotate":t=[h(i,"angle","deg")];break;case"drop-shadow":t=[h(i,"xoffset","pt"),h(i,"yoffset","pt"),h(i,"blurRadius","pt"),function(t,r){if(null==t[r])throw new s.Z("effect:missing-parameter",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});let i=t[r];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}(i,"color")];break;case"bloom":t=[h(i,"strength"),h(i,"radius","pt"),h(i,"threshold")]}let n=`${i.type}(${t.filter(Boolean).join(" ")})`;(0,o.Q)(n),r.push(n)}return r.join(" ")}function h(t,r,i){if(null==t[r])throw new s.Z("effect:missing-parameter",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});return i?t[r]+i:""+t[r]}},52271:(t,r,i)=>{"use strict";i.d(r,{Q:()=>d});var s,n=i(81533),o=i(12790),a=i(59731),l=(i(47750),i(68667)),u={exports:{}};function d(t){if(!t||0===t.length)return null;if("string"==typeof t){let r=h(t);return r&&0!==r.length?r:null}let r=t.map(t=>{if(!Number.isFinite(t.scale)||t.scale<=0)throw new o.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:t});return{scale:t.scale,effects:h(t.value)}});r.sort((t,r)=>r.effects.length-t.effects.length);for(let t=0;t<r.length-1;t++){if(!(0,l.AS)(r[t].effects,r[t+1].effects))throw new o.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:r[t].effects,b:r[t+1].effects});(0,l.uF)(r[t].effects,r[t+1].effects)}return r.sort((t,r)=>r.scale-t.scale),r}function h(t){let r;if(!t)return[];try{r=u.exports.parse(t)}catch(r){throw new o.Z("effect:invalid-syntax","Invalid effect syntax",{value:t,error:r})}return r.map(t=>(function(t){try{var r;switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":let i;return i=1,p(t.parameters,1),1===t.parameters.length&&(i=g(t.parameters[0])),new a.GI(t.name,i);case"opacity":let s;return s=1,p(t.parameters,1),1===t.parameters.length&&(s=g(t.parameters[0])),new a.Zx(s);case"hue-rotate":let l;return l=0,p(t.parameters,1),1===t.parameters.length&&(r=t.parameters[0],function(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=y[t.unit]))throw new o.Z("effect:type-error",`Expected <angle>, Actual: ${c(t)}`,{term:t})}(r),l=r.value*y[r.unit]||0),new a.Tq(l);case"blur":let u;return u=0,p(t.parameters,1),1===t.parameters.length&&(u=_(t.parameters[0]),f(u,t.parameters[0])),new a.Tj(u);case"drop-shadow":return function(t){let r=[],i=null;for(let s of t.parameters)if("color"===s.type){if(r.length&&Object.freeze(r),i)throw new o.Z("effect:type-error","Accepts only one color",{});i=function(t){switch(t.colorType){case"hex":return(0,n.rW)(t.value);case"named":return b(t.value);case"function":return function(t){if(p(t.parameters,4),v.test(t.name))return[g(t.parameters[0]),g(t.parameters[1]),g(t.parameters[2]),t.parameters[3]?g(t.parameters[3]):1];if(w.test(t.name)){var r;return(0,n.B7)((function(t){if("quantity"!==t.type||null!==t.unit)throw new o.Z("effect:type-error",`Expected <double>, Actual: ${c(t)}`,{term:t})}(r=t.parameters[0]),f(r.value,r),r.value),g(t.parameters[1]),g(t.parameters[2]),t.parameters[3]?g(t.parameters[3]):1)}throw new o.Z("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}(t.value)}}(s)}else{let t=_(s);if(Object.isFrozen(r))throw new o.Z("effect:type-error","<length> parameters not consecutive",{lengths:r});r.push(t),3===r.length&&f(t,s)}if(r.length<2||r.length>3)throw new o.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${r.length}}`,{lengths:r});return new a.CE(r[0],r[1],r[2]||0,i||b("black"))}(t);case"bloom":let d,h,m;return d=1,h=0,m=0,p(t.parameters,3),t.parameters[0]&&(d=g(t.parameters[0])),t.parameters[1]&&(h=_(t.parameters[1]),f(h,t.parameters[1])),t.parameters[2]&&(m=g(t.parameters[2])),new a.rk(d,h,m)}}catch(r){throw r.details.filter=t,r}throw new o.Z("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})})(t))}function p(t,r){if(t.length>r)throw new o.Z("effect:type-error",`Function supports up to ${r} parameters, Actual: ${t.length}`,{parameters:t})}function c(t){if("color"===t.type)return"<color>";if(t.unit){if(m[t.unit])return"<length>";if(y[t.unit])return"<angle>";if("%"===t.unit)return"<percentage>"}return"<double>"}function f(t,r){if(t<0)throw new o.Z("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:r})}s=function(){function t(r,i,s,n){var o=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(o,t.prototype),o.expected=i,o.found=s,o.location=n,o.name="SyntaxError",o}function r(t,r,i){return i=i||" ",t.length>r?t:(r-=t.length,t+(i+=i.repeat(r)).slice(0,r))}return function(t,r){function i(){this.constructor=t}i.prototype=r.prototype,t.prototype=new i}(t,Error),t.prototype.format=function(t){var i="Error: "+this.message;if(this.location){var s,n=null;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){n=t[s].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,a=this.location.source+":"+o.line+":"+o.column;if(n){var l=this.location.end,u=r("",o.line.toString().length," "),d=n[o.line-1],h=(o.line===l.line?l.column:d.length+1)-o.column||1;i+="\n --> "+a+"\n"+u+" |\n"+o.line+" | "+d+"\n"+u+" | "+r("",o.column-1," ")+r("",h,"^")}else i+="\n at "+a}return i},t.buildMessage=function(t,r){var i={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var r=t.parts.map(function(t){return Array.isArray(t)?o(t[0])+"-"+o(t[1]):o(t)});return"["+(t.inverted?"^":"")+r.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function s(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+s(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+s(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+s(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+s(t)})}function a(t){return i[t.type](t)}return"Expected "+function(t){var r,i,s=t.map(a);if(s.sort(),s.length>0){for(r=1,i=1;r<s.length;r++)s[r-1]!==s[r]&&(s[i]=s[r],i++);s.length=i}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(t)+" but "+(r?'"'+n(r)+'"':"end of input")+" found."},{SyntaxError:t,parse:function(r,i){var s,n,o,a,l,u,d,h,p={},c=(i=void 0!==i?i:{}).grammarSource,f={start:ef},y=ef,m="none",g="grad",_="turn",b=/^[ \t\n\r]/,v=/^[a-z\-]/,w=/^[0-9a-fA-F]/,C=/^[+\-]/,S=/^[0-9]/,x=eh("none"),M=eu("none",!1),I=eu(")",!1),E=eu(",",!1),T=eh("whitespace"),P=ed([" ","	","\n","\r"],!1,!1),A=eh("function"),k=eu("(",!1),O=eh("identifier"),R=ed([["a","z"],"-"],!1,!1),L=eh("percentage"),F=eu("%",!1),N=eh("length"),j=eu("px",!1),D=eu("cm",!1),Z=eu("mm",!1),V=eu("in",!1),z=eu("pt",!1),U=eu("pc",!1),G=eh("angle"),q=eu("deg",!1),$=eu("rad",!1),B=eu("grad",!1),W=eu("turn",!1),H=eh("number"),J=eh("color"),Y=eu("#",!1),K=ed([["0","9"],["a","f"],["A","F"]],!1,!1),X=ed(["+","-"],!1,!1),Q=ed([["0","9"]],!1,!1),ee=eu(".",!1),et=eu("e",!1),er=0,ei=0,es=[{line:1,column:1}],en=0,eo=[],ea=0;if("startRule"in i){if(!(i.startRule in f))throw Error("Can't start parsing from rule \""+i.startRule+'".');y=f[i.startRule]}function el(){return r.substring(ei,er)}function eu(t,r){return{type:"literal",text:t,ignoreCase:r}}function ed(t,r,i){return{type:"class",parts:t,inverted:r,ignoreCase:i}}function eh(t){return{type:"other",description:t}}function ep(t){var i,s=es[t];if(s)return s;for(i=t-1;!es[i];)i--;for(s={line:(s=es[i]).line,column:s.column};i<t;)10===r.charCodeAt(i)?(s.line++,s.column=1):s.column++,i++;return es[t]=s,s}function ec(t){er<en||(er>en&&(en=er,eo=[]),eo.push(t))}function ef(){var t,i,s;return ea++,i=er,eg(),r.substr(er,4)===m?(s=m,er+=4):(s=p,0===ea&&ec(M)),s!==p?(eg(),ei=i,i=[]):(er=i,i=p),ea--,i===p&&0===ea&&ec(x),(t=i)===p&&(t=function(){var t,r;if(t=[],(r=ey())!==p)for(;r!==p;)t.push(r),r=ey();else t=p;return t}()),t}function ey(){var t,i,s,n,o,a,l;return t=er,eg(),(ea++,o=er,(a=e_())!==p?(40===r.charCodeAt(er)?(l="(",er++):(l=p,0===ea&&ec(k)),l!==p?(ei=o,o=a):(er=o,o=p)):(er=o,o=p),ea--,o===p&&(a=p,0===ea&&ec(A)),(i=o)!==p)?(eg(),(s=function(){var t,i,s,n,o,a,l,u;if(t=er,(i=em())!==p){for(s=[],n=er,o=eg(),44===r.charCodeAt(er)?(a=",",er++):(a=p,0===ea&&ec(E)),a===p&&(a=null),l=eg(),(u=em())!==p?n=o=[o,a,l,u]:(er=n,n=p);n!==p;)s.push(n),n=er,o=eg(),44===r.charCodeAt(er)?(a=",",er++):(a=p,0===ea&&ec(E)),a===p&&(a=null),l=eg(),(u=em())!==p?n=o=[o,a,l,u]:(er=n,n=p);ei=t,t=s.length>0?[i].concat(s.map(function(t){return t[3]})):[i]}else er=t,t=p;return t}())===p&&(s=null),eg(),41===r.charCodeAt(er)?(n=")",er++):(n=p,0===ea&&ec(I)),n!==p?(eg(),ei=t,t={type:"function",name:i,parameters:s||[]}):(er=t,t=p)):(er=t,t=p),t}function em(){var t,i,s,n,o,a,l,u,d,h,c,f,y,m,b;return t=er,ea++,l=er,eg(),(u=eb())!==p?(37===r.charCodeAt(er)?(d="%",er++):(d=p,0===ea&&ec(F)),d!==p?(ei=l,l={value:u,unit:"%"}):(er=l,l=p)):(er=l,l=p),ea--,l===p&&0===ea&&ec(L),(i=l)===p&&(ea++,h=er,eg(),(c=eb())!==p?("px"===r.substr(er,2)?(f="px",er+=2):(f=p,0===ea&&ec(j)),f!==p?(ei=h,h={value:c,unit:"px"}):(er=h,h=p)):(er=h,h=p),h===p&&(h=er,eg(),(c=eb())!==p?("cm"===r.substr(er,2)?(f="cm",er+=2):(f=p,0===ea&&ec(D)),f!==p?(ei=h,h={value:c,unit:"cm"}):(er=h,h=p)):(er=h,h=p),h===p&&(h=er,eg(),(c=eb())!==p?("mm"===r.substr(er,2)?(f="mm",er+=2):(f=p,0===ea&&ec(Z)),f!==p?(ei=h,h={value:c,unit:"mm"}):(er=h,h=p)):(er=h,h=p),h===p&&(h=er,eg(),(c=eb())!==p?("in"===r.substr(er,2)?(f="in",er+=2):(f=p,0===ea&&ec(V)),f!==p?(ei=h,h={value:c,unit:"in"}):(er=h,h=p)):(er=h,h=p),h===p&&(h=er,eg(),(c=eb())!==p?("pt"===r.substr(er,2)?(f="pt",er+=2):(f=p,0===ea&&ec(z)),f!==p?(ei=h,h={value:c,unit:"pt"}):(er=h,h=p)):(er=h,h=p),h===p&&(h=er,eg(),(c=eb())!==p?("pc"===r.substr(er,2)?(f="pc",er+=2):(f=p,0===ea&&ec(U)),f!==p?(ei=h,h={value:c,unit:"pc"}):(er=h,h=p)):(er=h,h=p)))))),ea--,h===p&&0===ea&&ec(N),(i=h)===p)&&(ea++,y=er,(m=eb())!==p?("deg"===r.substr(er,3)?(b="deg",er+=3):(b=p,0===ea&&ec(q)),b!==p?(ei=y,y={value:m,unit:"deg"}):(er=y,y=p)):(er=y,y=p),y===p&&(y=er,(m=eb())!==p?("rad"===r.substr(er,3)?(b="rad",er+=3):(b=p,0===ea&&ec($)),b!==p?(ei=y,y={value:m,unit:"rad"}):(er=y,y=p)):(er=y,y=p),y===p&&(y=er,(m=eb())!==p?(r.substr(er,4)===g?(b=g,er+=4):(b=p,0===ea&&ec(B)),b!==p?(ei=y,y={value:m,unit:"grad"}):(er=y,y=p)):(er=y,y=p),y===p&&(y=er,(m=eb())!==p?(r.substr(er,4)===_?(b=_,er+=4):(b=p,0===ea&&ec(W)),b!==p?(ei=y,y={value:m,unit:"turn"}):(er=y,y=p)):(er=y,y=p)))),ea--,y===p&&(m=p,0===ea&&ec(G)),(i=y)===p)&&(ea++,s=er,eg(),(n=eb())!==p?(ei=s,s={value:n,unit:null}):(er=s,s=p),ea--,s===p&&0===ea&&ec(H),i=s),i!==p&&(ei=t,i={type:"quantity",value:(o=i).value,unit:o.unit}),(t=i)===p&&(t=er,(i=function(){var t,i,s,n;if(ea++,t=er,35===r.charCodeAt(er)?(i="#",er++):(i=p,0===ea&&ec(Y)),i!==p){if(s=[],w.test(r.charAt(er))?(n=r.charAt(er),er++):(n=p,0===ea&&ec(K)),n!==p)for(;n!==p;)s.push(n),w.test(r.charAt(er))?(n=r.charAt(er),er++):(n=p,0===ea&&ec(K));else s=p;s!==p?(ei=t,t={type:"hex",value:el()}):(er=t,t=p)}else er=t,t=p;return t===p&&(t=er,(i=ey())!==p&&(ei=t,i={type:"function",value:i}),(t=i)===p&&(t=er,(i=e_())!==p&&(ei=t,i={type:"named",value:el()}),t=i)),ea--,t===p&&(i=p,0===ea&&ec(J)),t}())!==p&&(ei=t,i={type:"color",colorType:(a=i).type,value:a.value}),t=i),t}function eg(){var t,i;for(ea++,t=[],b.test(r.charAt(er))?(i=r.charAt(er),er++):(i=p,0===ea&&ec(P));i!==p;)t.push(i),b.test(r.charAt(er))?(i=r.charAt(er),er++):(i=p,0===ea&&ec(P));return ea--,i=p,0===ea&&ec(T),t}function e_(){var t,i,s;if(ea++,t=er,i=[],v.test(r.charAt(er))?(s=r.charAt(er),er++):(s=p,0===ea&&ec(R)),s!==p)for(;s!==p;)i.push(s),v.test(r.charAt(er))?(s=r.charAt(er),er++):(s=p,0===ea&&ec(R));else i=p;return i!==p&&(ei=t,i=el()),ea--,(t=i)===p&&(i=p,0===ea&&ec(O)),t}function eb(){var t,i,s,n,o,a,l;for(t=er,C.test(r.charAt(er))?(r.charAt(er),er++):0===ea&&ec(X),i=er,s=[],S.test(r.charAt(er))?(n=r.charAt(er),er++):(n=p,0===ea&&ec(Q));n!==p;)s.push(n),S.test(r.charAt(er))?(n=r.charAt(er),er++):(n=p,0===ea&&ec(Q));if(46===r.charCodeAt(er)?(n=".",er++):(n=p,0===ea&&ec(ee)),n!==p){if(o=[],S.test(r.charAt(er))?(a=r.charAt(er),er++):(a=p,0===ea&&ec(Q)),a!==p)for(;a!==p;)o.push(a),S.test(r.charAt(er))?(a=r.charAt(er),er++):(a=p,0===ea&&ec(Q));else o=p;o!==p?i=s=[s,n,o]:(er=i,i=p)}else er=i,i=p;if(i===p){if(i=[],S.test(r.charAt(er))?(s=r.charAt(er),er++):(s=p,0===ea&&ec(Q)),s!==p)for(;s!==p;)i.push(s),S.test(r.charAt(er))?(s=r.charAt(er),er++):(s=p,0===ea&&ec(Q));else i=p}if(i!==p){if(s=er,101===r.charCodeAt(er)?(n="e",er++):(n=p,0===ea&&ec(et)),n!==p){if(C.test(r.charAt(er))?(o=r.charAt(er),er++):(o=p,0===ea&&ec(X)),o===p&&(o=null),a=[],S.test(r.charAt(er))?(l=r.charAt(er),er++):(l=p,0===ea&&ec(Q)),l!==p)for(;l!==p;)a.push(l),S.test(r.charAt(er))?(l=r.charAt(er),er++):(l=p,0===ea&&ec(Q));else a=p;a!==p?s=n=[n,o,a]:(er=s,s=p)}else er=s,s=p;s===p&&(s=null),ei=t,t=parseFloat(el())}else er=t,t=p;return t}if((h=y())!==p&&er===r.length)return h;throw h!==p&&er<r.length&&ec({type:"end"}),l=eo,u=en<r.length?r.charAt(en):null,s=en,n=en<r.length?en+1:en,o=ep(s),a=ep(n),d={source:c,start:{offset:s,line:o.line,column:o.column},end:{offset:n,line:a.line,column:a.column}},new t(t.buildMessage(l,u),l,u,d)}}},u.exports&&(u.exports=s());let y={deg:1,grad:.9,rad:180/Math.PI,turn:360},m={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function g(t){!function(t){if("quantity"!==t.type||null!==t.unit&&"%"!==t.unit)throw new o.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${c(t)}`,{term:t})}(t);let r=t.value;return f(r,t),"%"===t.unit?.01*r:r}function _(t){return function(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=m[t.unit]))throw new o.Z("effect:type-error",`Expected <length>, Actual: ${c(t)}`,{term:t})}(t),t.value*m[t.unit]||0}function b(t){if(!(0,n.St)(t))throw new o.Z("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return(0,n.VL)(t)}let v=/^rgba?/i,w=/^hsla?/i},68667:(t,r,i)=>{"use strict";i.d(r,{AS:()=>n,Cb:()=>a,uF:()=>o});var s=i(59731);function n(t,r){let i=t.length>r.length?t:r;return(t.length>r.length?r:t).every((t,r)=>t.type===i[r].type)}function o(t,r){let i=t.length>r.length?t:r,n=t.length>r.length?r:t;for(let t=n.length;t<i.length;t++)n.push((0,s.Ee)(i[t]))}function a(t){let r=t[0];return!!r&&"type"in r}},77710:(t,r,i)=>{"use strict";i.d(r,{S6:()=>o,nd:()=>a,u_:()=>n});var s=i(82639);class n{constructor(t=null,r={},i,s){this.geometry=t,this.attributes=r,this.centroid=i,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){let t=new n(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function o(t){return!((0,s.Wi)(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)}class a extends n{}},73181:(t,r,i)=>{"use strict";i.d(r,{Z:()=>s});class s{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){let t=new s;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}},36543:(t,r,i)=>{"use strict";i.d(r,{Z:()=>s});class s{constructor(t=[],r=[],i=!1){this.lengths=t??[],this.coords=r??[],this.hasIndeterminateRingOrder=i}static fromRect(t){let[r,i,n,o]=t,a=n-r,l=o-i;return new s([5],[r,i,a,0,0,l,-a,0,0,-l])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,r)=>t+r)}forEachVertex(t){let r=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){let s=this.lengths[i];for(let i=0;i<s;i++)t(this.coords[2*(i+r)],this.coords[2*(i+r)+1]);r+=s}}clone(t){return t?(t.set(this.coords),new s(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new s(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},55309:(t,r,i)=>{"use strict";i.d(r,{$:()=>es,$g:()=>en,E7:()=>W,EI:()=>H,GH:()=>J,IN:()=>v,Iv:()=>R,J6:()=>N,Jd:()=>b,Nh:()=>er,RZ:()=>et,Uy:()=>z,XA:()=>$,Yn:()=>B,cn:()=>X,dd:()=>O,di:()=>Y,eG:()=>Z,fQ:()=>w,hY:()=>eo,h_:()=>Q,ks:()=>U,lM:()=>ee,lz:()=>ea,oB:()=>el,u0:()=>D,zj:()=>ei});var s=i(12790),n=i(66150),o=i(82639),a=i(95758),l=i(77710),u=i(73181),d=i(36543);function h(t,r){return t?r?4:3:r?3:2}let p=n.Z.getLogger("esri.layers.graphics.featureConversionUtils"),c={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},f=(t,r,i,s,n,o)=>{t[i]=n,t[i+1]=o},y=(t,r,i,s,n,o)=>{t[i]=n,t[i+1]=o,t[i+2]=r[s+2]},m=(t,r,i,s,n,o)=>{t[i]=n,t[i+1]=o,t[i+2]=r[s+3]},g=(t,r,i,s,n,o)=>{t[i]=n,t[i+1]=o,t[i+2]=r[s+2],t[i+3]=r[s+3]};function _(t,r,i,s){if(t){if(i)return r&&s?g:y;if(r&&s)return m}else if(r&&s)return y;return f}function b({scale:t,translate:r},i){return Math.round((i-r[0])/t[0])}function v({scale:t,translate:r},i){return Math.round((r[1]-i)/t[1])}function w(t,r,i){return t?r?i?T(t):x(t):i?I(t):C(t):null}function C(t){let r=t.coords;return{x:r[0],y:r[1]}}function S(t,r){return t.coords[0]=r.x,t.coords[1]=r.y,t}function x(t){let r=t.coords;return{x:r[0],y:r[1],z:r[2]}}function M(t,r){return t.coords[0]=r.x,t.coords[1]=r.y,t.coords[2]=r.z,t}function I(t){let r=t.coords;return{x:r[0],y:r[1],m:r[2]}}function E(t,r){return t.coords[0]=r.x,t.coords[1]=r.y,t.coords[2]=r.m,t}function T(t){let r=t.coords;return{x:r[0],y:r[1],z:r[2],m:r[3]}}function P(t,r){return t.coords[0]=r.x,t.coords[1]=r.y,t.coords[2]=r.z,t.coords[3]=r.m,t}function A(t,r){return t&&r?P:t?M:r?E:S}function k(t,r,i,s,n){let a=A(i,s);for(let{geometry:i,attributes:s}of r){let r=(0,o.pC)(i)?a(new d.Z,i):null;t.push(new l.u_(r,s,null,n?s[n]:void 0))}return t}function O(t,r,i=A(null!=r.z,null!=r.m)){return i(t,r)}function R(t,r,i){if((0,o.Wi)(t))return null;let s=h(r,i),n=[];for(let r=0;r<t.coords.length;r+=s){let i=[];for(let n=0;n<s;n++)i.push(t.coords[r+n]);n.push(i)}return r?i?{points:n,hasZ:r,hasM:i}:{points:n,hasZ:r}:i?{points:n,hasM:i}:{points:n}}function L(t,r,i,s,n){let a=h(i,s);for(let{geometry:i,attributes:s}of r){let r=(0,o.pC)(i)?F(new d.Z,i,a):null;t.push(new l.u_(r,s,null,n?s[n]:void 0))}return t}function F(t,r,i=h(r.hasZ,r.hasM)){t.lengths[0]=r.points.length;let s=t.coords,n=0;for(let t of r.points)for(let r=0;r<i;r++)s[n++]=t[r];return t}function N(t,r,i){if(!t)return null;let s=h(r,i),{coords:n,lengths:o}=t,a=[],l=0;for(let t of o){let r=[];for(let i=0;i<t;i++){let t=[];for(let r=0;r<s;r++)t.push(n[l++]);r.push(t)}a.push(r)}return r?i?{paths:a,hasZ:r,hasM:i}:{paths:a,hasZ:r}:i?{paths:a,hasM:i}:{paths:a}}function j(t,r,i,s,n){let a=h(i,s);for(let{geometry:i,attributes:s}of r){let r=(0,o.pC)(i)?D(new d.Z,i,a):null;t.push(new l.u_(r,s,null,n?s[n]:void 0))}return t}function D(t,r,i=h(r.hasZ,r.hasM)){let{lengths:s,coords:n}=t,o=0;for(let t of r.paths){for(let r of t)for(let t=0;t<i;t++)n[o++]=r[t];s.push(t.length)}return t}function Z(t,r,i){if(!t)return null;let s=h(r,i),{coords:n,lengths:o}=t,a=[],l=0;for(let t of o){let r=[];for(let i=0;i<t;i++){let t=[];for(let r=0;r<s;r++)t.push(n[l++]);r.push(t)}a.push(r)}return r?i?{rings:a,hasZ:r,hasM:i}:{rings:a,hasZ:r}:i?{rings:a,hasM:i}:{rings:a}}function V(t,r,i,s,n){for(let{geometry:a,centroid:u,attributes:h}of r){let r=(0,o.pC)(a)?z(new d.Z,a,i,s):null,p=n?h[n]:void 0;(0,o.pC)(u)?t.push(new l.u_(r,h,S(new d.Z,u),p)):t.push(new l.u_(r,h,null,p))}return t}function z(t,r,i=r.hasZ,s=r.hasM){return U(t,r.rings,i,s),t}function U(t,r,i,s){let n=h(i,s),{lengths:o,coords:a}=t,l=0;for(let i of(eu(t),r)){for(let t of i)for(let r=0;r<n;r++)a[l++]=t[r];o.push(i.length)}return t}let G=[],q=[];function $(t,r,i,s,n){G[0]=t;let[o]=B(q,G,r,i,s,n);return ed(G),ed(q),o}function B(t,r,i,n,o,a){if(ed(t),!i){for(let i of r){let r=a?i.attributes[a]:void 0;t.push(new l.u_(null,i.attributes,null,r))}return t}switch(i){case"esriGeometryPoint":return k(t,r,n,o,a);case"esriGeometryMultipoint":return L(t,r,n,o,a);case"esriGeometryPolyline":return j(t,r,n,o,a);case"esriGeometryPolygon":return V(t,r,n,o,a);default:p.error("convertToFeatureSet:unknown-geometry",new s.Z(`Unable to parse unknown geometry type '${i}'`)),ed(t)}return t}function W(t,r,i,n,o,a){let l=t.length;switch(i){case"esriGeometryPoint":k(t,r,n,o,a);break;case"esriGeometryMultipoint":L(t,r,n,o,a);break;case"esriGeometryPolyline":j(t,r,n,o,a);break;case"esriGeometryPolygon":V(t,r,n,o,a);break;default:p.error("convertToFeatureSet:unknown-geometry",new s.Z(`Unable to parse unknown geometry type '${i}'`))}for(let s=0;s<r.length;s++)t[s+l].geometryType=i,t[s+l].insertAfter=r[s].insertAfter,t[s+l].groupId=r[s].groupId;return t}function H(t,r,i,s){q[0]=t,K(G,q,r,i,s);let n=G[0];return ed(G),ed(q),n}function J(t,r,i){if((0,o.Wi)(t))return null;let n=new d.Z;return"hasZ"in t&&null==r&&(r=t.hasZ),"hasM"in t&&null==i&&(i=t.hasM),(0,a.wp)(t)?A(null!=r?r:null!=t.z,null!=i?i:null!=t.m)(n,t):(0,a.oU)(t)?z(n,t,r,i):(0,a.l9)(t)?D(n,t,h(r,i)):(0,a.aW)(t)?F(n,t,h(r,i)):void p.error("convertFromGeometry:unknown-geometry",new s.Z(`Unable to parse unknown geometry type '${t}'`))}function Y(t,r,i,n){let a=t&&("coords"in t?t:t.geometry);if((0,o.Wi)(a))return null;switch(r){case"esriGeometryPoint":{let t=C;return i&&n?t=T:i?t=x:n&&(t=I),t(a)}case"esriGeometryMultipoint":return R(a,i,n);case"esriGeometryPolyline":return N(a,i,n);case"esriGeometryPolygon":return Z(a,i,n);default:return p.error("convertToGeometry:unknown-geometry",new s.Z(`Unable to parse unknown geometry type '${r}'`)),null}}function K(t,r,i,n,a){if(ed(t),(0,o.Wi)(i))return function(t,r){for(let i of r)t.push({attributes:i.attributes});return t}(t,r);switch(i){case"esriGeometryPoint":return function(t,r,i,s){let n=C;for(let a of(i&&s?n=T:i?n=x:s&&(n=I),r)){let{geometry:r,attributes:i}=a,s=(0,o.pC)(r)?n(r):null;t.push({attributes:i,geometry:s})}return t}(t,r,n,a);case"esriGeometryMultipoint":return function(t,r,i,s){for(let{geometry:n,attributes:a}of r)t.push({attributes:a,geometry:(0,o.pC)(n)?R(n,i,s):null});return t}(t,r,n,a);case"esriGeometryPolyline":return function(t,r,i,s){for(let{geometry:n,attributes:a}of r)t.push({attributes:a,geometry:(0,o.pC)(n)?N(n,i,s):null});return t}(t,r,n,a);case"esriGeometryPolygon":return function(t,r,i,s){for(let{geometry:n,attributes:a,centroid:l}of r){let r=(0,o.pC)(n)?Z(n,i,s):null;if((0,o.pC)(l)){let i=C(l);t.push({attributes:a,centroid:i,geometry:r})}else t.push({attributes:a,geometry:r})}return t}(t,r,n,a);default:p.error("convertToFeatureSet:unknown-geometry",new s.Z(`Unable to parse unknown geometry type '${i}'`))}return t}function X(t){let{objectIdFieldName:r,spatialReference:i,transform:s,fields:n,hasM:o,hasZ:a,features:l,geometryType:u,exceededTransferLimit:d,uniqueIdField:h,queryGeometry:p,queryGeometryType:c}=t,f={features:K([],l,u,a,o),fields:n,geometryType:u,objectIdFieldName:r,spatialReference:i,uniqueIdField:h,queryGeometry:Y(p,c,!1,!1)};return s&&(f.transform=s),d&&(f.exceededTransferLimit=d),o&&(f.hasM=o),a&&(f.hasZ=a),f}function Q(t,r){let i=new u.Z,{hasM:n,hasZ:o,features:a,objectIdFieldName:l,spatialReference:d,geometryType:h,exceededTransferLimit:c,transform:f,fields:y}=t;return y&&(i.fields=y),i.geometryType=h??null,i.objectIdFieldName=l??r??null,i.spatialReference=d??null,i.objectIdFieldName?(a&&B(i.features,a,h,o,n,i.objectIdFieldName),c&&(i.exceededTransferLimit=c),n&&(i.hasM=n),o&&(i.hasZ=o),f&&(i.transform=f)):p.error(new s.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i}function ee(t){let{transform:r,features:i,hasM:s,hasZ:n}=t;if(!r)return t;for(let t of i)(0,o.pC)(t.geometry)&&en(t.geometry,t.geometry,s,n,r),(0,o.pC)(t.centroid)&&en(t.centroid,t.centroid,s,n,r);return t.transform=null,t}function et(t,r){let{geometryType:i,features:s,hasM:n,hasZ:o}=r;if(!t)return r;for(let r=0;r<s.length;r++){let a=s[r],l=a.weakClone();l.geometry=new d.Z,er(l.geometry,a.geometry,n,o,i,t),a.centroid&&(l.centroid=new d.Z,er(l.centroid,a.centroid,n,o,"esriGeometryPoint",t)),s[r]=l}return r.transform=t,r}function er(t,r,i,s,n,a,l=i,u=s){if(eu(t),(0,o.Wi)(r)||!r.coords.length)return null;let d=c[n],{coords:p,lengths:f}=r,y=h(i,s),m=h(i&&l,s&&u),g=_(i,s,l,u);if(!f.length)return g(t.coords,p,0,0,b(a,p[0]),v(a,p[1])),eu(t,y,0),t;let w,C,S,x,M=0,I=0,E=0;for(let r of f){if(r<d)continue;let i=0;I=E,S=w=b(a,p[M]),x=C=v(a,p[M+1]),g(t.coords,p,I,M,S,x),i++,M+=y,I+=m;for(let s=1;s<r;s++,M+=y)S=b(a,p[M]),x=v(a,p[M+1]),S===w&&x===C||(g(t.coords,p,I,M,S-w,x-C),I+=m,i++,w=S,C=x);i>=d&&(t.lengths.push(i),E=I)}return ed(t.coords,E),t.coords.length?t:null}function ei(t,r,i,s,n,o,a=i,l=s){if(eu(t),!r||!r.coords.length)return null;let u=c[n],{coords:d,lengths:p}=r,f=h(i,s),y=h(i&&a,s&&l),m=_(i,s,a,l);if(!p.length)return m(t.coords,d,0,0,d[0],d[1]),eu(t,f,0),t;let g=0,b=o*o;for(let r of p){if(r<u){g+=r*f;continue}let i=t.coords.length/y,s=g,n=g+(r-1)*f;m(t.coords,d,t.coords.length,s,d[s],d[s+1]),function t(r,i,s,n,o,a,l){let u,d=n,h=0;for(let t=a+s;t<l;t+=s)(u=function(t,r,i,s){let n=t[r],o=t[r+1],a=t[i],l=t[i+1],u=t[s],d=t[s+1],h=a,p=l,c=u-h,f=d-p;if(0!==c||0!==f){let t=((n-h)*c+(o-p)*f)/(c*c+f*f);t>1?(h=u,p=d):t>0&&(h+=c*t,p+=f*t)}return(c=n-h)*c+(f=o-p)*f}(i,t,a,l))>d&&(h=t,d=u);d>n&&(h-a>s&&t(r,i,s,n,o,a,h),o(r,i,r.length,h,i[h],i[h+1]),l-h>s&&t(r,i,s,n,o,h,l))}(t.coords,d,f,b,m,s,n),m(t.coords,d,t.coords.length,n,d[n],d[n+1]);let o=t.coords.length/y-i;o>=u?t.lengths.push(o):ed(t.coords,i*y),g+=r*f}return t.coords.length?t:null}function es(t,r,i,s){if((0,o.Wi)(r)||!r.coords||!r.coords.length)return null;let n=h(i,s),a=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY;if(r&&r.coords){let t=r.coords;for(let r=0;r<t.length;r+=n){let i=t[r],s=t[r+1];a=Math.min(a,i),u=Math.max(u,i),l=Math.min(l,s),d=Math.max(d,s)}}return t[0]=a,t[1]=l,t[2]=u,t[3]=d,t}function en(t,r,i,s,n){let{coords:a,lengths:l}=r,u=h(i,s);if(!a.length)return t!==r&&eu(t),t;(0,o.O3)(n);let{originPosition:d,scale:p,translate:c}=n;eh.originPosition=d;let f=eh.scale;f[0]=p[0]??1,f[1]=-(p[1]??1),f[2]=p[2]??1,f[3]=p[3]??1;let y=eh.translate;if(y[0]=c[0]??0,y[1]=c[1]??0,y[2]=c[2]??0,y[3]=c[3]??0,!l.length){for(let r=0;r<u;++r)t.coords[r]=function({scale:t,translate:r},i,s){return i*t[s]+r[s]}(eh,a[r],r);return t!==r&&eu(t,u,0),t}let m=0;for(let r=0;r<l.length;r++){let i=l[r];t.lengths[r]=i;for(let r=0;r<u;++r)t.coords[m+r]=function({scale:t,translate:r},i,s){return i*t[s]+r[s]}(eh,a[m+r],r);let s=t.coords[m],n=t.coords[m+1];m+=u;for(let r=1;r<i;r++,m+=u){s+=a[m]*f[0],n+=a[m+1]*f[1],t.coords[m]=s,t.coords[m+1]=n;for(let r=2;r<u;++r)t.coords[m+r]=function({scale:t,translate:r},i,s){return i*t[s]+r[s]}(eh,a[m+r],r)}}return t!==r&&eu(t,a.length,l.length),t}function eo(t,r,i,s,n,o){if(eu(t),t.lengths.push(...r.lengths),i===n&&s===o)for(let i=0;i<r.coords.length;i++)t.coords.push(r.coords[i]);else{let a=h(i,s),l=_(i,s,n,o),u=r.coords;for(let r=0;r<u.length;r+=a)l(t.coords,u,t.coords.length,r,u[r],u[r+1])}return t}function ea(t,r){let{coords:i,lengths:s}=t,n=0,o=0;for(let t=0;t<s.length;t++){let a=s[t];o+=function(t,r,i,s){let n=0,o=t[s*r],a=t[s*(r+1)];for(let l=1;l<i;l++){let i=o+t[s*(r+l)],u=a+t[s*(r+l)+1],d=(i-o)*(u+a);o=i,a=u,n+=d}return .5*n}(i,n,a,r),n+=a}return Math.abs(o)}function el(t,r){if((0,o.Wi)(t))return null;let i=t.clone(),s=t.coords,n=t.lengths,a=0;for(let t=0;t<n.length;t++){let o=n[t],l=s[r*a],u=s[r*a+1];for(let t=1;t<o;t++){let n=l+s[r*(a+t)],o=u+s[r*(a+t)+1];i.coords[r*(a+t)]=n,i.coords[r*(a+t)+1]=o,l=n,u=o}a+=o}return i}function eu(t,r=0,i=0){ed(t.lengths,i),ed(t.coords,r)}function ed(t,r=0){t.length!==r&&(t.length=r)}let eh={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},77842:(t,r,i)=>{"use strict";i.d(r,{V:()=>a});var s=i(24765),n=i(53919),o=(i(99950),i(21314),i(30407));let a=t=>{let r=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(t){null!=t?this._override("apiKey",t):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,s._)([(0,n.Cb)({type:String})],r.prototype,"apiKey",null),r=(0,s._)([(0,o.j)("esri.layers.mixins.APIKeyMixin")],r)}},85439:(t,r,i)=>{"use strict";i.d(r,{Y:()=>d});var s=i(24765),n=i(66150),o=i(82639),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(15463);let d=t=>{let r=class extends t{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){let t=(0,u.Qc)(this.url);if((0,o.pC)(t)&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t)}set url(t){this._set("url",(0,u.Nm)(t,n.Z.getLogger(this.declaredClass)))}};return(0,s._)([(0,a.Cb)()],r.prototype,"title",null),(0,s._)([(0,a.Cb)({type:String})],r.prototype,"url",null),r=(0,s._)([(0,l.j)("esri.layers.mixins.ArcGISService")],r)}},85475:(t,r,i)=>{"use strict";i.d(r,{h:()=>u});var s=i(24765),n=i(53919),o=(i(99950),i(21314),i(30407)),a=i(62913);let l={read:{reader:a.ij},write:{allowNull:!0,writer:a.cW}},u=t=>{let r=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,s._)([(0,n.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],r.prototype,"blendMode",void 0),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1,origins:{"web-map":l,"portal-item":l}}})],r.prototype,"effect",void 0),r=(0,s._)([(0,o.j)("esri.layers.mixins.BlendLayer")],r)}},8013:(t,r,i)=>{"use strict";i.d(r,{N:()=>a});var s=i(24765),n=i(53919),o=(i(99950),i(21314),i(30407));let a=t=>{let r=class extends t{constructor(){super(...arguments),this.customParameters=null}};return(0,s._)([(0,n.Cb)({type:Object,json:{write:{overridePolicy:t=>({enabled:!!(t&&Object.keys(t).length>0)})}}})],r.prototype,"customParameters",void 0),r=(0,s._)([(0,o.j)("esri.layers.mixins.CustomParametersMixin")],r)}},74919:(t,r,i)=>{"use strict";i.d(r,{dU:()=>l,lQ:()=>h,o1:()=>p});var s=i(24765),n=i(88832),o=i(59118),a=(i(66150),i(21314),i(12790),i(96082),i(30407));let l=new n.Z.EventEmitter,u="esri.layers.mixins.EditBusLayer",d=Symbol(u);function h(t){return null!=t&&"object"==typeof t&&d in t}let p=t=>{var r;let i=class extends t{constructor(...t){super(...t),this[r]=!0,this.when().then(()=>{this.own([l.on("edits",t=>{let r="layer"in t?t.layer:null,i="layer"in t?t.layer?.url:t.serviceUrl,s="layer"in t?t.layer?.layerId:t.layerId,n=t.event;if(r===this||i!==this.url)return;if(null!=s&&null!=this.layerId&&s===this.layerId)return void this.emit("edits",(0,o.d9)(n));let a=n.editedFeatures?.find(({layerId:t})=>t===this.layerId);if(a){let{adds:t,updates:r,deletes:i}=a.editedFeatures,s={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:t?t.map(({attributes:t})=>({objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]})):[],deletedFeatures:i?i.map(({attributes:t})=>({objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]})):[],updatedFeatures:r?r.map(({current:{attributes:t}})=>({objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]})):[],editedFeatures:(0,o.d9)(n.editedFeatures)};this.emit("edits",s)}})])},()=>{})}};return r=d,i=(0,s._)([(0,a.j)(u)],i)}},51302:(t,r,i)=>{"use strict";i.d(r,{b:()=>u});var s=i(24765),n=i(53919),o=(i(99950),i(21314),i(30407)),a=i(36801);let l={write:{allowNull:!0}},u=t=>{let r=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return(0,s._)([(0,n.Cb)({type:a.Z,json:{origins:{"web-map":l,"portal-item":l}}})],r.prototype,"featureEffect",void 0),r=(0,s._)([(0,o.j)("esri.layers.mixins.FeatureEffectLayer")],r)}},12344:(t,r,i)=>{"use strict";i.d(r,{B:()=>A});var s=i(24765),n=i(51084),o=i(59118),a=i(66150),l=i(53919),u=(i(21314),i(71169)),d=i(30407),h=i(62300),p=i(18721),c=i(20681),f=i(371),y=i(15463),m=i(98793),g=i(34577),_=i(72140);i(99950);let b=class extends(0,g.J)(_.wq){constructor(t){super(t)}};(0,s._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"name",void 0),(0,s._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"fields",void 0),(0,s._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"isAscending",void 0),(0,s._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"indexType",void 0),(0,s._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"isUnique",void 0),(0,s._)([(0,l.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"description",void 0),b=(0,s._)([(0,d.j)("esri.layers.support.FeatureIndex")],b);var v=i(71958),w=i(35562);let C=class extends(0,g.J)(_.wq){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};(0,s._)([(0,l.Cb)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],C.prototype,"shapeAreaField",void 0),(0,s._)([(0,l.Cb)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],C.prototype,"shapeLengthField",void 0),(0,s._)([(0,l.Cb)({type:String,json:{read:t=>w.gV.read(t)||w.Jo.read(t)}})],C.prototype,"units",void 0);let S=C=(0,s._)([(0,d.j)("esri.layers.support.GeometryFieldsInfo")],C);var x=i(21419),M=i(84576);let I=new M.X({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),E=new M.X({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),T=class extends(0,g.J)(_.wq){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,s._)([(0,l.Cb)({json:{read:I.read,write:I.write}})],T.prototype,"cardinality",void 0),(0,s._)([(0,l.Cb)({json:{read:!0,write:!0}})],T.prototype,"composite",void 0),(0,s._)([(0,l.Cb)({json:{read:!0,write:!0}})],T.prototype,"id",void 0),(0,s._)([(0,l.Cb)({json:{read:!0,write:!0}})],T.prototype,"keyField",void 0),(0,s._)([(0,l.Cb)({json:{read:!0,write:!0}})],T.prototype,"keyFieldInRelationshipTable",void 0),(0,s._)([(0,l.Cb)({json:{read:!0,write:!0}})],T.prototype,"name",void 0),(0,s._)([(0,l.Cb)({json:{read:!0,write:!0}})],T.prototype,"relatedTableId",void 0),(0,s._)([(0,l.Cb)({json:{read:!0,write:!0}})],T.prototype,"relationshipTableId",void 0),(0,s._)([(0,l.Cb)({json:{read:E.read,write:E.write}})],T.prototype,"role",void 0);let P=T=(0,s._)([(0,d.j)("esri.layers.support.Relationship")],T),A=t=>{let r=class extends t{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.spatialReference=f.Z.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(n.Z.ofType(b)),this.userIsAdmin=!1,this.version=void 0}readCapabilitiesFromService(t,r){return(0,v.hu)(t,r,this.url)}readEditingInfo(t,r){let{editingInfo:i}=r;return i?{lastEditDate:null!=i.lastEditDate?new Date(i.lastEditDate):null}:null}readIsTableFromService(t,r){return"Table"===r.type}readMinScale(t,r){return r.effectiveMinScale||t||0}readMaxScale(t,r){return r.effectiveMaxScale||t||0}readGlobalIdFieldFromService(t,r){return(0,v.rk)(r)}readObjectIdFieldFromService(t,r){return(0,v.kZ)(r)}readServiceDefinitionExpression(t,r){return r.definitionQuery||r.definitionExpression}set url(t){let r=(0,y.XG)({layer:this,url:t,nonStandardUrlAllowed:!0,logger:a.Z.getLogger(this.declaredClass)});this._set("url",r.url),null!=r.layerId&&this._set("layerId",r.layerId)}writeUrl(t,r,i,s){(0,y.wH)(this,t,null,r,s)}readVersion(t,r){return(0,v.JY)(r)}};return(0,s._)([(0,l.Cb)({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],r.prototype,"capabilities",void 0),(0,s._)([(0,u.r)("service","capabilities")],r.prototype,"readCapabilitiesFromService",null),(0,s._)([(0,l.Cb)({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],r.prototype,"copyright",void 0),(0,s._)([(0,l.Cb)({type:Boolean})],r.prototype,"datesInUnknownTimezone",void 0),(0,s._)([(0,l.Cb)({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],r.prototype,"displayField",void 0),(0,s._)([(0,l.Cb)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],r.prototype,"definitionExpression",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],r.prototype,"editFieldsInfo",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],r.prototype,"editingInfo",void 0),(0,s._)([(0,u.r)("editingInfo")],r.prototype,"readEditingInfo",null),(0,s._)([(0,l.Cb)((()=>{let t=(0,o.d9)(m.PV),r=t.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},t})())],r.prototype,"elevationInfo",void 0),(0,s._)([(0,l.Cb)({type:x.Z,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],r.prototype,"floorInfo",void 0),(0,s._)([(0,l.Cb)({type:p.Z,json:{origins:{service:{read:{source:"extent"}}}}})],r.prototype,"fullExtent",void 0),(0,s._)([(0,l.Cb)()],r.prototype,"gdbVersion",void 0),(0,s._)([(0,l.Cb)({readOnly:!0,type:S,json:{read:{source:"geometryProperties"}}})],r.prototype,"geometryFieldsInfo",void 0),(0,s._)([(0,l.Cb)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:v.Fr.read}}}})],r.prototype,"geometryType",void 0),(0,s._)([(0,l.Cb)({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasM",void 0),(0,s._)([(0,l.Cb)({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasZ",void 0),(0,s._)([(0,l.Cb)({readOnly:!0,type:c.Z})],r.prototype,"heightModelInfo",void 0),(0,s._)([(0,l.Cb)({type:Date})],r.prototype,"historicMoment",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],r.prototype,"isTable",void 0),(0,s._)([(0,u.r)("service","isTable",["type"])],r.prototype,"readIsTableFromService",null),(0,s._)([(0,l.Cb)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],r.prototype,"layerId",void 0),(0,s._)([(0,l.Cb)(m.rO)],r.prototype,"minScale",void 0),(0,s._)([(0,u.r)("service","minScale",["minScale","effectiveMinScale"])],r.prototype,"readMinScale",null),(0,s._)([(0,l.Cb)(m.u1)],r.prototype,"maxScale",void 0),(0,s._)([(0,u.r)("service","maxScale",["maxScale","effectiveMaxScale"])],r.prototype,"readMaxScale",null),(0,s._)([(0,l.Cb)({type:String})],r.prototype,"globalIdField",void 0),(0,s._)([(0,u.r)("service","globalIdField",["globalIdField","fields"])],r.prototype,"readGlobalIdFieldFromService",null),(0,s._)([(0,l.Cb)({type:String})],r.prototype,"objectIdField",void 0),(0,s._)([(0,u.r)("service","objectIdField",["objectIdField","fields"])],r.prototype,"readObjectIdFieldFromService",null),(0,s._)([(0,l.Cb)({type:[P],readOnly:!0})],r.prototype,"relationships",void 0),(0,s._)([(0,l.Cb)()],r.prototype,"sourceJSON",void 0),(0,s._)([(0,l.Cb)({type:Boolean})],r.prototype,"returnM",void 0),(0,s._)([(0,l.Cb)({type:Boolean})],r.prototype,"returnZ",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],r.prototype,"serviceDefinitionExpression",void 0),(0,s._)([(0,u.r)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],r.prototype,"readServiceDefinitionExpression",null),(0,s._)([(0,l.Cb)({type:f.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],r.prototype,"spatialReference",void 0),(0,s._)([(0,l.Cb)({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],r.prototype,"subtypeField",void 0),(0,s._)([(0,l.Cb)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],r.prototype,"trackIdField",void 0),(0,s._)([(0,l.Cb)({readOnly:!0,json:{write:!1}})],r.prototype,"serverGens",void 0),(0,s._)([(0,l.Cb)({type:n.Z.ofType(b),readOnly:!0})],r.prototype,"indexes",void 0),(0,s._)([(0,l.Cb)(m.HQ)],r.prototype,"url",null),(0,s._)([(0,h.c)("url")],r.prototype,"writeUrl",null),(0,s._)([(0,l.Cb)({readOnly:!0})],r.prototype,"userIsAdmin",void 0),(0,s._)([(0,l.Cb)({json:{origins:{service:{read:!0}},read:!1}})],r.prototype,"version",void 0),(0,s._)([(0,u.r)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],r.prototype,"readVersion",null),r=(0,s._)([(0,d.j)("esri.layers.mixins.FeatureLayerBase")],r)}},69173:(t,r,i)=>{"use strict";i.d(r,{M:()=>D});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(73151),u=i(15101),d=i(19047),h=(i(57969),i(63535),i(51661),i(29432),i(71260),i(76744),i(47513)),p=i(61885),c=i(42765),f=i(80587),y=i(98402),m=i(59118),g=i(12619),_=i(21374),b=i(71169),v=i(62300),w=i(51609),C=i(98793),S=i(57599);let x=(0,w.d)({types:y.QT}),M=s=class extends u.B{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(t,r,i){let s=t.filter(t=>"avg_angle"!==t.statisticType).map(t=>t.toJSON());(0,g.RB)(i,s,r)}readRenderer(t,r,i){let s=r.drawingInfo?.renderer;return s?(0,c.a)(s,r,i)??void 0:r.defaultSymbol?r.types&&r.types.length?new p.Z({defaultSymbol:x(r.defaultSymbol,r,i),field:r.typeIdField,uniqueValueInfos:r.types.map(t=>({id:t.id,symbol:x(t.symbol,t,i)}))}):new h.Z({symbol:x(r.defaultSymbol,r,i)}):null}clone(){return new s({fields:(0,m.d9)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,m.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:(0,m.d9)(this.popupTemplate),renderer:(0,m.d9)(this.renderer)})}};(0,n._)([(0,_.J)({binning:"binning"})],M.prototype,"type",void 0),(0,n._)([(0,_.J)({geohash:"geohash"})],M.prototype,"binType",void 0),(0,n._)([(0,o.Cb)({type:Number,range:{min:1,max:9},json:{write:!0}})],M.prototype,"fixedBinLevel",void 0),(0,n._)([(0,o.Cb)({type:[S.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],M.prototype,"labelingInfo",void 0),(0,n._)([(0,o.Cb)(C.iR)],M.prototype,"labelsVisible",void 0),(0,n._)([(0,o.Cb)(C.C_)],M.prototype,"popupEnabled",void 0),(0,n._)([(0,o.Cb)({type:d.Z,json:{name:"popupInfo",write:!0}})],M.prototype,"popupTemplate",void 0),(0,n._)([(0,o.Cb)({type:[l.Z],json:{write:!0}})],M.prototype,"fields",void 0),(0,n._)([(0,v.c)("fields")],M.prototype,"writeFields",null),(0,n._)([(0,o.Cb)({types:f.A,json:{write:{target:"drawingInfo.renderer"}}})],M.prototype,"renderer",void 0),(0,n._)([(0,b.r)("renderer",["drawingInfo.renderer"])],M.prototype,"readRenderer",null);let I=M=s=(0,n._)([(0,a.j)("esri.layers.support.FeatureReductionBinning")],M);var E,T=i(72140),P=i(85098);let A=(0,w.d)({types:y.QT});function k(t){return"simple"===t.type&&!t.visualVariables?.length}let O=E=class extends T.wq{constructor(t){super(t),this.type="cluster",this.clusterRadius=(0,P.t_)("80px"),this.clusterMinSize=(0,P.t_)("12px"),this.clusterMaxSize=(0,P.t_)("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(t,r,i){let s=r.drawingInfo?.renderer;return s?.authoringInfo?.isAutoGenerated?null:s?k(s)?null:(0,c.a)(s,r,i)??void 0:r.defaultSymbol?r.types&&r.types.length?new p.Z({defaultSymbol:A(r.defaultSymbol,r,i),field:r.typeIdField,uniqueValueInfos:r.types.map(t=>({id:t.id,symbol:A(t.symbol,t,i)}))}):new h.Z({symbol:A(r.defaultSymbol,r,i)}):null}readSymbol(t,r,i){let s=r.drawingInfo?.renderer;return s?.authoringInfo?.isAutoGenerated?null:s&&k(s)?c.a(s,r,i)?.symbol:null}writeSymbol(t,r,i,s){let n=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||n){let i=new h.Z({symbol:t});r.drawingInfo={renderer:i.write({},s)}}}writeFields(t,r,i){let s=t.filter(t=>"avg_angle"!==t.statisticType).map(t=>t.toJSON());(0,g.RB)(i,s,r)}readFields(t,r,i){return t.filter(t=>!t.isAutoGenerated).map(t=>l.Z.fromJSON(t))}clone(){return new E({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,m.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,m.d9)(this.fields),renderer:(0,m.d9)(this.renderer),symbol:(0,m.d9)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,m.d9)(this.popupTemplate)})}};(0,n._)([(0,o.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],O.prototype,"type",void 0),(0,n._)([(0,o.Cb)({type:Number,cast:t=>"auto"===t?t:(0,P.t_)(t),json:{write:!0}})],O.prototype,"clusterRadius",void 0),(0,n._)([(0,o.Cb)({type:Number,cast:P.t_,json:{write:!0}})],O.prototype,"clusterMinSize",void 0),(0,n._)([(0,o.Cb)({type:Number,cast:P.t_,json:{write:!0}})],O.prototype,"clusterMaxSize",void 0),(0,n._)([(0,o.Cb)(C.C_)],O.prototype,"popupEnabled",void 0),(0,n._)([(0,o.Cb)({type:d.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],O.prototype,"popupTemplate",void 0),(0,n._)([(0,o.Cb)({types:f.A,json:{write:{target:"drawingInfo.renderer"}}})],O.prototype,"renderer",void 0),(0,n._)([(0,b.r)("renderer",["drawingInfo.renderer"])],O.prototype,"readRenderer",null),(0,n._)([(0,o.Cb)({types:y.AH})],O.prototype,"symbol",void 0),(0,n._)([(0,b.r)("symbol",["drawingInfo.renderer"])],O.prototype,"readSymbol",null),(0,n._)([(0,v.c)("symbol")],O.prototype,"writeSymbol",null),(0,n._)([(0,o.Cb)({type:[S.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],O.prototype,"labelingInfo",void 0),(0,n._)([(0,o.Cb)(C.iR)],O.prototype,"labelsVisible",void 0),(0,n._)([(0,o.Cb)({type:[l.Z],json:{write:!0}})],O.prototype,"fields",void 0),(0,n._)([(0,v.c)("fields")],O.prototype,"writeFields",null),(0,n._)([(0,b.r)("fields")],O.prototype,"readFields",null);let R=O=E=(0,n._)([(0,a.j)("esri.layers.support.FeatureReductionCluster")],O);var L=i(17997);let F={key:"type",base:u.B,typeMap:{cluster:R,binning:I}},N={types:{key:"type",base:u.B,typeMap:{selection:L.Z,cluster:R,binning:I}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:F},"portal-item":{types:F},"web-scene":{types:{key:"type",base:u.B,typeMap:{selection:L.Z}}}}}};var j=i(87702);let D=t=>{let r=class extends t{constructor(...t){super(...t),this.own(this.watch("renderer",()=>{if(this.featureReduction){let t=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",t)}},!0))}set featureReduction(t){let r=this._normalizeFeatureReduction(t);this._set("featureReduction",r)}set renderer(t){}_normalizeFeatureReduction(t){if("cluster"!==t?.type)return t;let r=t.clone(),i=[new l.Z({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(r.fields??[]).filter(t=>!t.isAutoGenerated);if(t.renderer&&!t.renderer.authoringInfo?.isAutoGenerated)return r.fields=[...i,...s],r;if(t.symbol)return r.fields=[...i,...s],r.renderer=null,r;if(!this.renderer)return t;let n=(0,j.S1)(i,this.renderer,t,null,!1);return r.fields=[...i,...s],r.renderer=n,r}};return(0,n._)([(0,o.Cb)(N)],r.prototype,"featureReduction",null),r=(0,n._)([(0,a.j)("esri.layers.mixins.FeatureReductionLayer")],r)}},63281:(t,r,i)=>{"use strict";i.d(r,{q:()=>f});var s=i(24765),n=i(12790),o=i(82583),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(62300),d=i(9334),h=i(72758);let p={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}};var c=i(98793);let f=t=>{let r=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(t,r,i,s){(s&&"ground"===s.layerContainerType||t&&(0,h.d)(this,i,{},s))&&(r[i]=t)}writeOperationalLayerType(t,r,i,s){!t||s&&"tables"===s.layerContainerType||(r.layerType=t)}writeTitle(t,r){r.title=t??"Layer"}read(t,r){r&&(r.layer=this),(0,d.$)(this,t,r=>super.read(t,r),r)}write(t,r){if(r?.origin){let t=`${r.origin}/${r.layerContainerType||"operational-layers"}`,i=p[t],s=i&&i[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===t&&(s=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===t&&(s=!1),!s)return r.messages?.push(new n.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${t}'`,{layer:this})),null}let i=super.write(t,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter(t=>t instanceof n.Z&&"web-document-write:property-required"===t.name).length;return(0,o.jc)(i?.url)?(r?.messages?.push(new n.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:i}beforeSave(){}};return(0,s._)([(0,a.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],r.prototype,"id",void 0),(0,s._)([(0,a.Cb)(c.rT)],r.prototype,"listMode",void 0),(0,s._)([(0,u.c)("listMode")],r.prototype,"writeListMode",null),(0,s._)([(0,a.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],r.prototype,"operationalLayerType",void 0),(0,s._)([(0,u.c)("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),(0,s._)([(0,a.Cb)(c.Oh)],r.prototype,"opacity",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],r.prototype,"title",void 0),(0,s._)([(0,u.c)("title"),(0,u.c)(["web-scene"],"title")],r.prototype,"writeTitle",null),(0,s._)([(0,a.Cb)({type:Boolean,json:{name:"visibility"}})],r.prototype,"visible",void 0),r=(0,s._)([(0,l.j)("esri.layers.mixins.OperationalLayer")],r)}},54485:(t,r,i)=>{"use strict";i.d(r,{c:()=>m});var s,n=i(24765),o=i(12619),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(84576),d=i(72140);let h=new u.X({asc:"ascending",desc:"descending"}),p=s=class extends d.wq{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new s({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],p.prototype,"field",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],p.prototype,"valueExpression",void 0),(0,n._)([(0,a.Cb)({type:h.apiValues,json:{read:h.read,write:h.write}})],p.prototype,"order",void 0);let c=p=s=(0,n._)([(0,l.j)("esri.layers.support.OrderByInfo")],p);function f(t,r,i){if(!t)return null;let s=t.find(t=>!!t.field);if(!s)return null;let n=new c;return n.read(s,i),[n]}function y(t,r,i,s){let n=t.find(t=>!!t.field);n&&(0,o.RB)(i,[n.toJSON()],r)}let m=t=>{let r=class extends t{constructor(){super(...arguments),this.orderBy=null}};return(0,n._)([(0,a.Cb)({type:[c],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:f},write:{target:"layerDefinition.orderBy",writer:y}}})],r.prototype,"orderBy",void 0),r=(0,n._)([(0,l.j)("esri.layers.mixins.OrderedLayer")],r)}},36369:(t,r,i)=>{"use strict";i.d(r,{I:()=>v});var s=i(24765),n=i(49869),o=i(57837),a=i(95894),l=i(12790),u=i(66150),d=i(82639),h=i(66138),p=i(82583),c=i(53919),f=(i(99950),i(21314),i(71169)),y=i(30407),m=i(62300),g=i(13725),_=i(73640),b=i(91997);let v=t=>{let r=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem=(0,d.SC)(this.portalItem)}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t))}readPortalItem(t,r,i){if(r.itemId)return new _.default({id:r.itemId,portal:i&&i.portal})}writePortalItem(t,r){t&&t.id&&(r.itemId=t.id)}async loadFromPortal(t,r){if(this.portalItem&&this.portalItem.id)try{let s=await i.e(4135).then(i.bind(i,24135));return(0,h.k_)(r),await s.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},r)}catch(t){throw(0,h.D_)(t)||u.Z.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${t}`),t}}async finishLoadEditablePortalLayer(t){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(t).catch(t=>((0,h.r9)(t),!0)))}async _fetchUserHasEditingPrivileges(t){let r=this.url?n.id?.findCredential(this.url):null;if(!r)return!0;let i=w.credential===r?w.user:await this._fetchEditingUser(t);return w.credential=r,w.user=i,(0,d.Wi)(i)||null==i.privileges||i.privileges.includes("features:user:edit")}async _fetchEditingUser(t){let r=this.portalItem?.portal?.user;if(r)return r;let i=n.id.findServerInfo(this.url??"");if(!i?.owningSystemUrl)return null;let s=`${i.owningSystemUrl}/sharing/rest`,l=g.Z.getDefault();if(l&&l.loaded&&(0,p.Fv)(l.restUrl)===(0,p.Fv)(s))return l.user;let u=`${s}/community/self`,h=(0,d.pC)(t)?t.signal:null,c=await (0,a.q6)((0,o.default)(u,{authMode:"no-prompt",query:{f:"json"},signal:h}));return c.ok?b.default.fromJSON(c.value.data):null}read(t,r){r&&(r.layer=this),super.read(t,r)}write(t,r){let i=r&&r.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||g.Z.getDefault());return i&&s&&!(0,p.tm)(s.restUrl,i.restUrl)?(r.messages&&r.messages.push(new l.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...r,layer:this})}};return(0,s._)([(0,c.Cb)({type:_.default})],r.prototype,"portalItem",null),(0,s._)([(0,f.r)("web-document","portalItem",["itemId"])],r.prototype,"readPortalItem",null),(0,s._)([(0,m.c)("web-document","portalItem",{itemId:{type:String}})],r.prototype,"writePortalItem",null),(0,s._)([(0,c.Cb)({clonable:!1})],r.prototype,"resourceReferences",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],r.prototype,"userHasEditingPrivileges",void 0),r=(0,s._)([(0,y.j)("esri.layers.mixins.PortalLayer")],r)},w={credential:null,user:null}},72937:(t,r,i)=>{"use strict";i.d(r,{Q:()=>g});var s=i(24765),n=i(66150),o=i(66138),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(51084),d=(i(96082),i(12790),i(42169),i(52256));let h=new u.Z,p=new WeakMap;function c(t){return null!=t&&"object"==typeof t&&"refreshInterval"in t&&"refresh"in t}let f=0,y=0;function m(){let t=Date.now();for(let r of h)r.refreshInterval&&t-(p.get(r)??0)+5>=6e4*r.refreshInterval&&(p.set(r,t),r.refresh(t))}(0,d.EH)(()=>{let t=Date.now(),r=0;for(let i of h)r=function t(r,i){return Number.isFinite(r)&&Number.isFinite(i)?i<=0?r:t(i,r%i):0}(Math.round(6e4*i.refreshInterval),r),i.refreshInterval?p.get(i)||p.set(i,t):p.delete(i);if(r!==y){if(y=r,clearInterval(f),0===y)return void(f=0);f=setInterval(m,y)}});let g=t=>{let r=class extends t{constructor(...t){super(...t),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,o.Ds)(()=>this.hasDataChanged()),this.when().then(()=>{c(this)&&h.push(this)},()=>{})}destroy(){c(this)&&h.includes(this)&&h.remove(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(t=Date.now()){(0,o.R8)(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",t),this.emit("refresh",{dataChanged:r})},t=>{n.Z.getLogger(this.declaredClass).error(t),this.emit("refresh",{dataChanged:!1,error:t})})}async hasDataChanged(){return!0}};return(0,s._)([(0,a.Cb)({type:Number,cast:t=>t>=.1?t:t<=0?0:.1,json:{write:!0}})],r.prototype,"refreshInterval",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],r.prototype,"refreshTimestamp",void 0),(0,s._)([(0,a.Cb)()],r.prototype,"refreshParameters",null),r=(0,s._)([(0,l.j)("esri.layers.mixins.RefreshableLayer")],r)}},45086:(t,r,i)=>{"use strict";i.d(r,{M:()=>a});var s=i(24765),n=i(53919),o=(i(99950),i(21314),i(30407));let a=t=>{let r=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){var t;let r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&(t=i.effectiveScaleRange,r.minScale=r.minScale>0?t.minScale>0?Math.min(r.minScale,t.minScale):r.minScale:t.minScale,r.maxScale=r.maxScale>0?t.maxScale>0?Math.max(r.maxScale,t.maxScale):r.maxScale:t.maxScale);let s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return(0,s._)([(0,n.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,"minScale",void 0),(0,s._)([(0,n.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,"maxScale",void 0),(0,s._)([(0,n.Cb)({readOnly:!0})],r.prototype,"effectiveScaleRange",null),r=(0,s._)([(0,o.j)("esri.layers.mixins.ScaleRangeLayer")],r)}},88113:(t,r,i)=>{"use strict";i.d(r,{n:()=>c});var s=i(24765),n=i(67005),o=i(7589),a=i(53919),l=(i(99950),i(21314),i(71169)),u=i(30407),d=i(99444),h=i(65392),p=i(20901);let c=t=>{let r=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(t,r){let i=r.timeInfo.exportOptions;if(!i)return null;let s=i.timeOffset,n=p.v.fromJSON(i.timeOffsetUnits);return s&&n?new o.Z({value:s,unit:n}):null}set timeInfo(t){(0,d.UF)(t,this.fieldsIndex),this._set("timeInfo",t)}};return(0,s._)([(0,a.Cb)({type:n.Z,json:{write:!1}})],r.prototype,"timeExtent",void 0),(0,s._)([(0,a.Cb)({type:o.Z})],r.prototype,"timeOffset",void 0),(0,s._)([(0,l.r)("service","timeOffset",["timeInfo.exportOptions"])],r.prototype,"readOffset",null),(0,s._)([(0,a.Cb)({value:null,type:h.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],r.prototype,"timeInfo",null),(0,s._)([(0,a.Cb)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],r.prototype,"useViewTime",void 0),r=(0,s._)([(0,u.j)("esri.layers.mixins.TemporalLayer")],r)}},73151:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s,n=i(24765),o=i(72140),a=i(59118),l=i(53919),u=(i(21314),i(30407)),d=i(10977);let h=s=class extends o.wq{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new s({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:(0,a.d9)(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};(0,n._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],h.prototype,"isAutoGenerated",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],h.prototype,"alias",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],h.prototype,"onStatisticField",void 0),(0,n._)([(0,l.Cb)({type:d.Z,json:{write:!0}})],h.prototype,"onStatisticExpression",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],h.prototype,"statisticType",void 0);let p=h=s=(0,n._)([(0,u.j)("esri.layers.support.AggregateField")],h)},10977:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s=i(24765),n=i(34577),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407));let u=class extends(0,n.J)(o.wq){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"expression",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"title",void 0),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"returnType",void 0);let d=u=(0,s._)([(0,l.j)("esri.layers.support.ExpressionInfo")],u)},36801:(t,r,i)=>{"use strict";i.d(r,{Z:()=>_});var s,n=i(24765),o=i(12790),a=i(72140),l=i(82639),u=i(12619),d=i(53919),h=(i(99950),i(21314),i(30407)),p=i(62913),c=i(13440);let f={read:{reader:p.ij},write:{writer:p.cW,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},y={read:{reader:p.ij},write:{writer:p.cW,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},m={name:"showExcludedLabels",default:!0},g=s=class extends a.wq{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,r){let i=super.write(t,r);if(r?.origin){if(i.filter){let t=Object.keys(i.filter);if(t.length>1||"where"!==t[0])return r.messages?.push(new o.Z("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:r.layer,effect:this})),null}if("showExcludedLabels"in i)return r.messages?.push(new o.Z("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:r.layer,effect:this})),null}return i}clone(){return new s({filter:(0,l.pC)(this.filter)?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,n._)([(0,d.Cb)({type:c.Z,json:{write:{allowNull:!0,writer(t,r,i,s){let n=t?.write({},s);n&&0!==Object.keys(n).length?(0,u.RB)(i,n,r):(0,u.RB)(i,null,r)}}}})],g.prototype,"filter",void 0),(0,n._)([(0,d.Cb)({json:{write:!0,origins:{"web-map":f,"portal-item":f}}})],g.prototype,"includedEffect",void 0),(0,n._)([(0,d.Cb)({json:{write:!0,origins:{"web-map":y,"portal-item":y}}})],g.prototype,"excludedEffect",void 0),(0,n._)([(0,d.Cb)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":m,"portal-item":m}}})],g.prototype,"excludedLabelsVisible",void 0);let _=g=s=(0,n._)([(0,h.j)("esri.layers.support.FeatureEffect")],g)},13440:(t,r,i)=>{"use strict";i.d(r,{Z:()=>_});var s,n=i(24765),o=i(64012),a=i(67005),l=i(84576),u=i(72140),d=i(59118),h=i(82639),p=i(53919),c=(i(21314),i(30407)),f=i(57775);let y=new l.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),m=new l.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),g=s=class extends u.wq{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){let{where:r,geometry:i,spatialRelationship:s,timeExtent:n,objectIds:o,units:a,distance:l}=this;return new f.Z({geometry:(0,d.d9)(i),objectIds:(0,d.d9)(o),spatialRelationship:s,timeExtent:(0,d.d9)(n),where:r,units:a,distance:l,...t})}clone(){let{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:o,units:a,distance:l}=this;return new s({geometry:(0,d.d9)(r),objectIds:(0,d.d9)(o),spatialRelationship:i,timeExtent:(0,d.d9)(n),where:t,units:a,distance:l})}};(0,n._)([(0,p.Cb)({type:String,json:{write:!0}})],g.prototype,"where",void 0),(0,n._)([(0,p.Cb)({types:o.qM,json:{write:!0}})],g.prototype,"geometry",void 0),(0,n._)([(0,p.Cb)({type:y.apiValues,json:{name:"spatialRel",read:{reader:y.read},write:{allowNull:!1,writer:y.write,overridePolicy(){return{enabled:(0,h.pC)(this.geometry)}}}}})],g.prototype,"spatialRelationship",void 0),(0,n._)([(0,p.Cb)({type:Number,json:{write:{overridePolicy(t){return{enabled:null!=t&&null!=this.geometry}}}}})],g.prototype,"distance",void 0),(0,n._)([(0,p.Cb)({type:[Number],json:{write:!0}})],g.prototype,"objectIds",void 0),(0,n._)([(0,p.Cb)({type:m.apiValues,json:{read:m.read,write:{writer:m.write,overridePolicy(t){return{enabled:null!=t&&null!=this.geometry}}}}})],g.prototype,"units",void 0),(0,n._)([(0,p.Cb)({type:a.Z,json:{write:!0}})],g.prototype,"timeExtent",void 0);let _=g=s=(0,n._)([(0,c.j)("esri.layers.support.FeatureFilter")],g)},15101:(t,r,i)=>{"use strict";i.d(r,{B:()=>l});var s=i(24765),n=i(72140),o=i(53919),a=(i(99950),i(21314),i(30407));let l=class extends n.wq{constructor(){super(...arguments),this.type=null}};(0,s._)([(0,o.Cb)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=(0,s._)([(0,a.j)("esri.layers.support.FeatureReduction")],l)},17997:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(15101);let u=s=class extends l.B{constructor(t){super(t),this.type="selection"}clone(){return new s}};(0,n._)([(0,o.Cb)({type:["selection"]})],u.prototype,"type",void 0);let d=u=s=(0,n._)([(0,a.j)("esri.layers.support.FeatureReductionSelection")],u)},32950:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s=i(24765),n=i(34577),o=i(84576),a=i(72140),l=i(53919),u=(i(99950),i(21314),i(30407));let d=new o.X({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),h=class extends(0,n.J)(a.wq){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,s._)([(0,l.Cb)({json:{write:!0}})],h.prototype,"name",void 0),(0,s._)([(0,l.Cb)({json:{write:!0}})],h.prototype,"description",void 0),(0,s._)([(0,l.Cb)({json:{read:d.read,write:d.write}})],h.prototype,"drawingTool",void 0),(0,s._)([(0,l.Cb)({json:{write:!0}})],h.prototype,"prototype",void 0),(0,s._)([(0,l.Cb)({json:{write:!0}})],h.prototype,"thumbnail",void 0);let p=h=(0,s._)([(0,u.j)("esri.layers.support.FeatureTemplate")],h)},61458:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s=i(24765),n=i(34577),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(71169)),u=i(30407),d=i(62300),h=i(43058),p=i(32950);let c=class extends(0,n.J)(o.wq){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){let r={};for(let i of Object.keys(t))r[i]=(0,h.im)(t[i]);return r}writeDomains(t,r){let i={};for(let r of Object.keys(t))t[r]&&(i[r]=t[r]?.toJSON());r.domains=i}};(0,s._)([(0,a.Cb)({json:{write:!0}})],c.prototype,"id",void 0),(0,s._)([(0,a.Cb)({json:{write:!0}})],c.prototype,"name",void 0),(0,s._)([(0,a.Cb)({json:{write:!0}})],c.prototype,"domains",void 0),(0,s._)([(0,l.r)("domains")],c.prototype,"readDomains",null),(0,s._)([(0,d.c)("domains")],c.prototype,"writeDomains",null),(0,s._)([(0,a.Cb)({type:[p.Z],json:{write:!0}})],c.prototype,"templates",void 0);let f=c=(0,s._)([(0,u.j)("esri.layers.support.FeatureType")],c)},32195:(t,r,i)=>{"use strict";i.d(r,{Z:()=>g});var s,n=i(24765),o=i(84576),a=i(72140),l=i(53919),u=(i(99950),i(21314)),d=i(21374),h=i(71169),p=i(30407),c=i(43058),f=i(30764);let y=new o.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),m=s=class extends a.wq{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch(t){}return i?.value??null}readValueType(t,{description:r}){let i=null;try{i=r?JSON.parse(r):null}catch(t){}return i?y.fromJSON(i.fieldValueType):null}clone(){return new s({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],m.prototype,"alias",void 0),(0,n._)([(0,l.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],m.prototype,"defaultValue",void 0),(0,n._)([(0,l.Cb)()],m.prototype,"description",void 0),(0,n._)([(0,h.r)("description")],m.prototype,"readDescription",null),(0,n._)([(0,l.Cb)({types:c.V5,json:{read:{reader:c.im},write:!0}})],m.prototype,"domain",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),(0,n._)([(0,l.Cb)({type:u.z8,json:{write:!0}})],m.prototype,"length",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"nullable",void 0),(0,n._)([(0,d.J)(f.v)],m.prototype,"type",void 0),(0,n._)([(0,l.Cb)()],m.prototype,"valueType",void 0),(0,n._)([(0,h.r)("valueType",["description"])],m.prototype,"readValueType",null),(0,n._)([(0,l.Cb)({type:Boolean,json:{read:!1}})],m.prototype,"visible",void 0);let g=m=s=(0,n._)([(0,p.j)("esri.layers.support.Field")],m)},21014:(t,r,i)=>{"use strict";i.d(r,{Z:()=>a});var s=i(99444);function n(t){return"oid"===t.type||"esriFieldTypeOID"===t.type}function o(t){return"global-id"===t.type||"esriFieldTypeGlobalID"===t.type}class a{constructor(t=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;this.fields=t;let r=[];for(let i of t){let t=i&&i.name;if(t){let a=l(t),d=u(t);this._fieldsMap.set(t,i),this._fieldsMap.set(a,i),this._normalizedFieldsMap.set(d,i),r.push(a),"date"===i.type||"esriFieldTypeDate"===i.type?(this.dateFields.push(i),this._dateFieldsSet.add(i)):(0,s.H7)(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),n(i)||o(i)||(i.editable=null==i.editable||!!i.editable,i.nullable=null==i.nullable||!!i.nullable)}}r.sort(),this.uid=r.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields)for(let t of(this._requiredFields=[],this.fields))n(t)||o(t)||t.nullable||void 0!==(0,s.os)(t)||this._requiredFields.push(t);return this._requiredFields}has(t){return null!=this.get(t)}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||((r=this._fieldsMap.get(l(t))??this._normalizedFieldsMap.get(u(t)))&&this._fieldsMap.set(t,r),r)}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){let r=this.get(t);if(r)return r.name??void 0}}function l(t){return t.trim().toLowerCase()}function u(t){return(0,s.q6)(t).toLowerCase()}},24780:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314)),u=i(30407);let d=s=class extends o.wq{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new s({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,n._)([(0,a.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],d.prototype,"cols",void 0),(0,n._)([(0,a.Cb)({type:l.z8,json:{write:!0}})],d.prototype,"level",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"levelValue",void 0),(0,n._)([(0,a.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],d.prototype,"origin",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],d.prototype,"resolution",void 0),(0,n._)([(0,a.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],d.prototype,"rows",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],d.prototype,"scale",void 0);let h=d=s=(0,n._)([(0,u.j)("esri.layers.support.LOD")],d)},57599:(t,r,i)=>{"use strict";i.d(r,{Z:()=>M});var s,n=i(24765),o=i(98402),a=i(84576),l=i(72140),u=i(59118),d=i(85098),h=i(53919),p=(i(21314),i(71169)),c=i(30407),f=i(62300),y=(i(99950),i(70506));let m=s=class extends l.wq{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,r){return r.value?(0,y.dI)(r.value):t}writeExpression(t,r,i){null!=this.value&&(t=(0,y.dI)(this.value)),null!=t&&(r[i]=t)}clone(){return new s({expression:this.expression,title:this.title,value:this.value})}};(0,n._)([(0,h.Cb)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],m.prototype,"expression",void 0),(0,n._)([(0,p.r)("expression",["expression","value"])],m.prototype,"readExpression",null),(0,n._)([(0,f.c)("expression")],m.prototype,"writeExpression",null),(0,n._)([(0,h.Cb)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],m.prototype,"title",void 0),(0,n._)([(0,h.Cb)({json:{read:!1,write:!1}})],m.prototype,"value",void 0);let g=m=s=(0,n._)([(0,c.j)("esri.layers.support.LabelExpressionInfo")],m);var _,b=i(65910),v=i(62888);let w=new a.X({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function C(t){return!t||"service"!==t.origin&&"map-image"!==t.layer?.type}function S(t){return"map-image"===t?.type&&!!t.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}let x=_=class extends l.wq{constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=b.Rz,this.useCodedValues=void 0,this.where=null}static evaluateWhere(t,r){let i=(t,r,i)=>{switch(r){case"=":return t==i;case"<>":return t!=i;case">":return t>i;case">=":return t>=i;case"<":return t<i;case"<=":return t<=i}return!1};try{if(null==t)return!0;let s=t.split(" ");if(3===s.length)return i(r[s[0]],s[1],s[2]);if(7===s.length){let t=i(r[s[0]],s[1],s[2]),n=s[3],o=i(r[s[4]],s[5],s[6]);switch(n){case"AND":return t&&o;case"OR":return t||o}}return!1}catch(r){console.log("Error.: can't parse = "+t)}}readLabelExpression(t,r){let i=r.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,r,i){if(this.labelExpressionInfo){if(null!=this.labelExpressionInfo.value)t=(0,y.z7)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){let r=(0,y.el)(this.labelExpressionInfo.expression);r&&(t="["+r+"]")}}null!=t&&(r[i]=t)}writeLabelExpressionInfo(t,r,i,s){if(null==t&&null!=this.labelExpression&&C(s))t=new g({expression:this.getLabelExpressionArcade()});else if(!t)return;let n=t.toJSON(s);n.expression&&(r[i]=n)}writeMaxScale(t,r){(t||this.minScale)&&(r.maxScale=t)}writeMinScale(t,r){(t||this.maxScale)&&(r.minScale=t)}getLabelExpression(){return(0,y.hV)(this)}getLabelExpressionArcade(){return(0,y.YI)(this)}getLabelExpressionSingleField(){return(0,y.UO)(this)}hash(){return JSON.stringify(this)}clone(){return new _({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,u.d9)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,u.d9)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,n._)([(0,h.Cb)({type:String,json:{write:!0}})],x.prototype,"name",void 0),(0,n._)([(0,h.Cb)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],x.prototype,"allowOverrun",void 0),(0,n._)([(0,h.Cb)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],x.prototype,"deconflictionStrategy",void 0),(0,n._)([(0,h.Cb)({type:String,json:{write:{overridePolicy(t,r,i){return this.labelExpressionInfo&&"service"===i?.origin&&S(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],x.prototype,"labelExpression",void 0),(0,n._)([(0,p.r)("labelExpression")],x.prototype,"readLabelExpression",null),(0,n._)([(0,f.c)("labelExpression")],x.prototype,"writeLabelExpression",null),(0,n._)([(0,h.Cb)({type:g,json:{write:{overridePolicy:(t,r,i)=>C(i)||S(i.layer)?{allowNull:!0}:{enabled:!1}}}})],x.prototype,"labelExpressionInfo",void 0),(0,n._)([(0,f.c)("labelExpressionInfo")],x.prototype,"writeLabelExpressionInfo",null),(0,n._)([(0,h.Cb)({type:w.apiValues,json:{type:w.jsonValues,read:w.read,write:w.write}})],x.prototype,"labelPlacement",void 0),(0,n._)([(0,h.Cb)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],x.prototype,"labelPosition",void 0),(0,n._)([(0,h.Cb)({type:Number})],x.prototype,"maxScale",void 0),(0,n._)([(0,f.c)("maxScale")],x.prototype,"writeMaxScale",null),(0,n._)([(0,h.Cb)({type:Number})],x.prototype,"minScale",void 0),(0,n._)([(0,f.c)("minScale")],x.prototype,"writeMinScale",null),(0,n._)([(0,h.Cb)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],x.prototype,"repeatLabel",void 0),(0,n._)([(0,h.Cb)({type:Number,cast:d.t_,json:{write:!0,origins:{"web-scene":{write:!1}}}})],x.prototype,"repeatLabelDistance",void 0),(0,n._)([(0,h.Cb)({types:o.yK,json:{origins:{"web-scene":{types:o.S6,write:v.vX,default:null}},write:v.vX,default:null}})],x.prototype,"symbol",void 0),(0,n._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],x.prototype,"useCodedValues",void 0),(0,n._)([(0,h.Cb)({type:String,json:{write:!0}})],x.prototype,"where",void 0);let M=x=_=(0,n._)([(0,c.j)("esri.layers.support.LabelClass")],x)},21419:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(51084),a=i(72140),l=i(53919),u=(i(99950),i(21314),i(30407));let d=s=class extends a.wq{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new o.Z}clone(){return new s({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],d.prototype,"floorField",void 0),(0,n._)([(0,l.Cb)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),(0,n._)([(0,l.Cb)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0);let h=d=s=(0,n._)([(0,u.j)("esri.layers.support.LayerFloorInfo")],d)},19708:(t,r,i)=>{"use strict";i.d(r,{Z:()=>I});var s,n,o,a=i(24765),l=i(84576),u=i(72140),d=i(82639),h=i(35562),p=i(53919),c=(i(99950),i(21314)),f=i(71169),y=i(30407),m=i(62300),g=i(46472),_=i(371),b=i(8865),v=i(32488),w=i(77056),C=i(24780),S=i(99581);let x=new l.X({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"}),M=o=class extends u.wq{constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(t={}){let{resolutionFactor:r=1,scales:i,size:s=256,spatialReference:n=_.Z.WebMercator,numLODs:a=24}=t;if(!(0,v.JY)(n)){let t=[];if(i)for(let r=0;r<i.length;r++){let s=i[r];t.push({level:r,scale:s,resolution:s})}else{let r=5e-4;for(let i=a-1;i>=0;i--)t.unshift({level:i,scale:r,resolution:r}),r*=2}return new o({dpi:96,lods:t,origin:new g.Z(0,0,n),size:[s,s],spatialReference:n})}let l=(0,v.C5)(n),u=new g.Z(t.origin?{x:t.origin.x,y:t.origin.y,spatialReference:n}:l?{x:l.origin[0],y:l.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),d=1/(39.37*(0,h.c9)(n)*96),p=[];if(i)for(let t=0;t<i.length;t++){let r=i[t],s=r*d;p.push({level:t,scale:r,resolution:s})}else{let t=(0,v.sT)(n)?512/s*591657527.5917094:256/s*591657527.591555,i=Math.ceil(a/r);p.push({level:0,scale:t,resolution:t*d});for(let s=1;s<i;s++){let i=t/2**r,n=i*d;p.push({level:s,scale:i,resolution:n}),t=i}}return new o({dpi:96,lods:p,origin:u,size:[s,s],spatialReference:n})}get isWrappable(){let{spatialReference:t,origin:r}=this;if(t&&r){let i=(0,v.C5)(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-r.x)<=i.dx}return!1}readOrigin(t,r){return g.Z.fromJSON({spatialReference:r.spatialReference,...t})}set lods(t){let r=0,i=0,s=[],n=this._levelToLOD={};t&&(r=-1/0,i=1/0,t.forEach(t=>{s.push(t.scale),r=t.scale>r?t.scale:r,i=t.scale<i?t.scale:i,n[t.level]=t})),this._set("scales",s),this._set("minScale",r),this._set("maxScale",i),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,r){return[r.cols,r.rows]}writeSize(t,r){r.cols=t[0],r.rows=t[1]}zoomToScale(t){let r=this.scales;if(t<=0)return r[0];if(t>=r.length-1)return r[r.length-1];let i=Math.floor(t);return r[i]/(r[i]/r[i+1])**(t-i)}scaleToZoom(t){let r=this.scales,i=r.length-1,s=0;for(;s<i;s++){let i=r[s],n=r[s+1];if(i<=t)break;if(n===t)return s+1;if(i>t&&n<t)return s+Math.log(i/t)/Math.log(i/n)}return s}snapScale(t,r=.95){let i=this.scaleToZoom(t);return i%Math.floor(i)>=r?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,r,i,s){let n,o;let a=this.lodAt(t);if(!a)return null;if("number"==typeof r)n=r,o=i;else if((0,v.fS)(r.spatialReference,this.spatialReference))n=r.x,o=r.y,s=i;else{let t=(0,w.iV)(r,this.spatialReference);if((0,d.Wi)(t))return null;n=t.x,o=t.y,s=i}let l=a.resolution*this.size[0],u=a.resolution*this.size[1];return s||(s=new S.f(null,0,0,0,(0,b.Ue)())),s.level=t,s.row=Math.floor((this.origin.y-o)/u+.001),s.col=Math.floor((n-this.origin.x)/l+.001),this.updateTileInfo(s),s}updateTileInfo(t,r=o.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&r===o.ExtrapolateOptions.POWER_OF_TWO){let r=this.lods[this.lods.length-1];r.level<t.level&&(i=r)}if(!i)return;let s=t.level-i.level,n=i.resolution*this.size[0]/2**s,a=i.resolution*this.size[1]/2**s;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=(0,b.Ue)()),t.extent[0]=this.origin.x+t.col*n,t.extent[1]=this.origin.y-(t.row+1)*a,t.extent[2]=t.extent[0]+n,t.extent[3]=t.extent[1]+a}upsampleTile(t){let r=this._upsampleLevels[t.level];return!(!r||-1===r.parentLevel||(t.level=r.parentLevel,t.row=Math.floor(t.row/r.factor+.001),t.col=Math.floor(t.col/r.factor+.001),this.updateTileInfo(t),0))}getTileBounds(t,r){let i=this.lodAt(r.level);if(null==i)return null;let{resolution:s}=i,n=s*this.size[0],o=s*this.size[1];return t[0]=this.origin.x+r.col*n,t[1]=this.origin.y-(r.row+1)*o,t[2]=t[0]+n,t[3]=t[1]+o,t}lodAt(t){return this._levelToLOD?.[t]??null}clone(){return o.fromJSON(this.write({}))}getOrCreateCompatible(t,r){if(256===this.size[0]&&256===this.size[1])return 256===t?this:null;let i=[],s=this.lods.length;for(let t=0;t<s;t++){let s=this.lods[t],n=s.resolution*r;i.push(new C.Z({level:s.level,scale:s.scale,resolution:n}))}return new o({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){let t=this.lods;this._upsampleLevels=[];let r=null;for(let i=0;i<t.length;i++){let s=t[i];this._upsampleLevels[s.level]={parentLevel:r?r.level:-1,factor:r?r.resolution/s.resolution:0},r=s}}};(0,a._)([(0,p.Cb)({type:Number,json:{write:!0}})],M.prototype,"compressionQuality",void 0),(0,a._)([(0,p.Cb)({type:Number,json:{write:!0}})],M.prototype,"dpi",void 0),(0,a._)([(0,p.Cb)({type:String,json:{read:x.read,write:x.write,origins:{"web-scene":{read:!1,write:!1}}}})],M.prototype,"format",void 0),(0,a._)([(0,p.Cb)({readOnly:!0})],M.prototype,"isWrappable",null),(0,a._)([(0,p.Cb)({type:g.Z,json:{write:!0}})],M.prototype,"origin",void 0),(0,a._)([(0,f.r)("origin")],M.prototype,"readOrigin",null),(0,a._)([(0,p.Cb)({type:[C.Z],value:null,json:{write:!0}})],M.prototype,"lods",null),(0,a._)([(0,p.Cb)({readOnly:!0})],M.prototype,"minScale",void 0),(0,a._)([(0,p.Cb)({readOnly:!0})],M.prototype,"maxScale",void 0),(0,a._)([(0,p.Cb)({readOnly:!0})],M.prototype,"scales",void 0),(0,a._)([(0,p.Cb)({cast:t=>Array.isArray(t)?t:"number"==typeof t?[t,t]:[256,256]})],M.prototype,"size",void 0),(0,a._)([(0,f.r)("size",["rows","cols"])],M.prototype,"readSize",null),(0,a._)([(0,m.c)("size",{cols:{type:c.z8},rows:{type:c.z8}})],M.prototype,"writeSize",null),(0,a._)([(0,p.Cb)({type:_.Z,json:{write:!0}})],M.prototype,"spatialReference",void 0),(n=(s=(M=o=(0,a._)([(0,y.j)("esri.layers.support.TileInfo")],M))||(M={})).ExtrapolateOptions||(s.ExtrapolateOptions={}))[n.NONE=0]="NONE",n[n.POWER_OF_TWO=1]="POWER_OF_TWO";let I=M},99581:(t,r,i)=>{"use strict";i.d(r,{f:()=>s});class s{constructor(t,r,i,s,n){this.id=t,this.level=r,this.row=i,this.col=s,this.extent=n}}},65392:(t,r,i)=>{"use strict";i.d(r,{Z:()=>v});var s,n=i(24765),o=i(67005),a=i(7589),l=i(72140),u=i(59118),d=i(82639),h=i(53919),p=(i(21314),i(71169)),c=i(30407),f=i(62300);i(99950);let y=s=class extends l.wq{constructor(t){super(t),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(t,r){return void 0!==r.respectsDaylightSaving?r.respectsDaylightSaving:void 0!==r.respectDaylightSaving&&r.respectDaylightSaving}clone(){let{respectsDaylightSaving:t,timezone:r}=this;return new s({respectsDaylightSaving:t,timezone:r})}};(0,n._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],y.prototype,"respectsDaylightSaving",void 0),(0,n._)([(0,p.r)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],y.prototype,"readRespectsDaylightSaving",null),(0,n._)([(0,h.Cb)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],y.prototype,"timezone",void 0);let m=y=s=(0,n._)([(0,c.j)("esri.layers.support.TimeReference")],y);var g,_=i(20901);let b=g=class extends l.wq{constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(t,r){if(!r.timeExtent||!Array.isArray(r.timeExtent)||2!==r.timeExtent.length)return null;let i=new Date(r.timeExtent[0]),s=new Date(r.timeExtent[1]);return new o.Z({start:i,end:s})}writeFullTimeExtent(t,r){t&&(0,d.pC)(t.start)&&(0,d.pC)(t.end)?r.timeExtent=[t.start.getTime(),t.end.getTime()]:r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?new a.Z({value:r.timeInterval,unit:_.v.fromJSON(r.timeIntervalUnits)}):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?new a.Z({value:r.defaultTimeInterval,unit:_.v.fromJSON(r.defaultTimeIntervalUnits)}):null}writeInterval(t,r){if(t){let i=t.toJSON();r.timeInterval=i.value,r.timeIntervalUnits=i.unit}else r.timeInterval=null,r.timeIntervalUnits=null}clone(){let{cumulative:t,endField:r,hasLiveData:i,interval:s,startField:n,timeReference:o,fullTimeExtent:a,trackIdField:l,useTime:d}=this;return new g({cumulative:t,endField:r,hasLiveData:i,interval:s,startField:n,timeReference:(0,u.d9)(o),fullTimeExtent:(0,u.d9)(a),trackIdField:l,useTime:d})}};(0,n._)([(0,h.Cb)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],b.prototype,"cumulative",void 0),(0,n._)([(0,h.Cb)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],b.prototype,"endField",void 0),(0,n._)([(0,h.Cb)({type:o.Z,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"fullTimeExtent",void 0),(0,n._)([(0,p.r)("fullTimeExtent",["timeExtent"])],b.prototype,"readFullTimeExtent",null),(0,n._)([(0,f.c)("fullTimeExtent")],b.prototype,"writeFullTimeExtent",null),(0,n._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],b.prototype,"hasLiveData",void 0),(0,n._)([(0,h.Cb)({type:a.Z,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"interval",void 0),(0,n._)([(0,p.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],b.prototype,"readInterval",null),(0,n._)([(0,f.c)("interval")],b.prototype,"writeInterval",null),(0,n._)([(0,h.Cb)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],b.prototype,"startField",void 0),(0,n._)([(0,h.Cb)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"timeReference",void 0),(0,n._)([(0,h.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],b.prototype,"trackIdField",void 0),(0,n._)([(0,h.Cb)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],b.prototype,"useTime",void 0);let v=b=g=(0,n._)([(0,c.j)("esri.layers.support.TimeInfo")],b)},15463:(t,r,i)=>{"use strict";i.d(r,{B5:()=>p,DR:()=>f,G:()=>w,M8:()=>g,Nm:()=>_,Qc:()=>c,XG:()=>b,a7:()=>m,ld:()=>y,wH:()=>v});var s=i(82639),n=i(82583),o=i(80038);let a={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},l=Object.values(a),u=RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),d=RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${l.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),h=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function p(t){return!!u.test(t)}function c(t){if((0,s.Wi)(t))return null;let r=(0,n.mN)(t),i=r.path.match(u)||r.path.match(d);if(!i)return null;let[,o,l,h,p]=i,c=l.indexOf("/");return{title:y(-1!==c?l.slice(c+1):l),serverType:a[h.toLowerCase()],sublayer:null!=p&&""!==p?parseInt(p,10):null,url:{path:o}}}function f(t){let r=(0,n.mN)(t).path.match(h);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function y(t){return(t=t.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function m(t,r){let i=[];if(t){let r=c(t);(0,s.pC)(r)&&r.title&&i.push(r.title)}if(r){let t=y(r);i.push(t)}if(2===i.length){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function g(t){if(!t)return!1;let r=(t=t.toLowerCase()).includes(".arcgis.com/"),i=t.includes("//services")||t.includes("//tiles")||t.includes("//features");return r&&i}function _(t,r){return t?(0,n.Qj)((0,n.Hu)(t,r)):t}function b(t){let r,{url:i}=t;if(!i)return{url:i};i=(0,n.Hu)(i,t.logger);let o=(0,n.mN)(i),a=c(o.path);if((0,s.pC)(a))null!=a.sublayer&&null==t.layer.layerId&&(r=a.sublayer),i=a.url.path;else if(t.nonStandardUrlAllowed){let t=f(o.path);(0,s.pC)(t)&&(i=t.serviceUrl,r=t.sublayerId)}return{url:(0,n.Qj)(i),layerId:r}}function v(t,r,i,s,a){(0,o.w)(r,s,"url",a),s.url&&null!=t.layerId&&(s.url=(0,n.v_)(s.url,i,t.layerId.toString()))}function w(t){if(!t)return!1;let r=t.toLowerCase(),i=r.includes("/services/"),s=r.includes("/mapserver/wmsserver"),n=r.includes("/imageserver/wmsserver"),o=r.includes("/wmsserver");return i&&(s||n||o)}},98793:(t,r,i)=>{"use strict";i.d(r,{qG:()=>w,PV:()=>g,id:()=>S,iR:()=>f,rn:()=>m,rT:()=>I,u1:()=>M,rO:()=>x,Oh:()=>b,bT:()=>v,C_:()=>c,Lx:()=>_,vg:()=>C,YI:()=>p,HQ:()=>y});var s=i(67005),n=i(18721),o=i(371),a=i(80038),l=i(82639),u=(i(66138),i(56129)),d=i(3667),h=i(59534);let p={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},c={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,r)=>!r.disablePopup},write:{enabled:!0,writer(t,r,i){r[i]=!t}}}},f={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},y={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:a.w}}},m={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},g={value:null,type:d.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function _(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}let b={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},v={...b,json:{...b.json,origins:{"web-document":{...b.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,r,i)=>i&&"service"!==i.origin||!r.drawingInfo||void 0===r.drawingInfo.transparency?r.layerDefinition&&r.layerDefinition.drawingInfo&&void 0!==r.layerDefinition.drawingInfo.transparency?(0,h.b)(r.layerDefinition.drawingInfo.transparency):void 0:(0,h.b)(r.drawingInfo.transparency)}}},w={type:s.Z,readOnly:!0,get(){if(!this.layer?.timeInfo)return null;let{datesInUnknownTimezone:t,timeOffset:r,useViewTime:i}=this.layer,n=this.view?.timeExtent,o=this.layer.timeExtent;t&&(o=function(t){if(!t)return t;let{start:r,end:i}=t;return new s.Z({start:(0,l.pC)(r)?(0,u.Nm)(r,r.getTimezoneOffset(),"minutes"):r,end:(0,l.pC)(i)?(0,u.Nm)(i,i.getTimezoneOffset(),"minutes"):i})}(o));let a=i?n&&o?n.intersection(o):n||o:o;if(!a||a.isEmpty||a.isAllTime)return a;r&&(a=a.offset(-r.value,r.unit)),t&&(a=function(t){if(!t)return t;let{start:r,end:i}=t;return new s.Z({start:(0,l.pC)(r)?(0,u.Nm)(r,-r.getTimezoneOffset(),"minutes"):r,end:(0,l.pC)(i)?(0,u.Nm)(i,-i.getTimezoneOffset(),"minutes"):i})}(a));let d=this._get("timeExtent");return a.equals(d)?d:a}},C={type:n.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,r)=>{let i=n.Z.fromJSON(t);return null!=r.spatialReference&&"object"==typeof r.spatialReference&&(i.spatialReference=o.Z.fromJSON(r.spatialReference)),i}}}},read:!1}},S={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},x={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},M={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},I={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}}},43058:(t,r,i)=>{"use strict";i.d(r,{im:()=>M,V5:()=>x}),i(96082);var s,n,o,a,l=i(24765),u=i(59118),d=i(53919),h=(i(21314),i(21374)),p=i(30407),c=i(72140);i(99950);let f=a=class extends c.wq{constructor(t){super(t),this.name=null,this.code=null}clone(){return new a({name:this.name,code:this.code})}};(0,l._)([(0,d.Cb)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,l._)([(0,d.Cb)({type:[String,Number],json:{write:!0}})],f.prototype,"code",void 0),f=a=(0,l._)([(0,p.j)("esri.layers.support.CodedValue")],f);let y=new(i(84576)).X({inherited:"inherited",codedValue:"coded-value",range:"range"}),m=class extends c.wq{constructor(t){super(t),this.name=null,this.type=null}};(0,l._)([(0,d.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,l._)([(0,h.J)(y)],m.prototype,"type",void 0);let g=m=(0,l._)([(0,p.j)("esri.layers.support.Domain")],m),_=s=class extends g{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let r=null;if(this.codedValues){let i=String(t);this.codedValues.some(t=>(String(t.code)===i&&(r=t.name),!!r))}return r}clone(){return new s({codedValues:(0,u.d9)(this.codedValues),name:this.name})}};(0,l._)([(0,d.Cb)({type:[f],json:{write:!0}})],_.prototype,"codedValues",void 0),(0,l._)([(0,h.J)({codedValue:"coded-value"})],_.prototype,"type",void 0);let b=_=s=(0,l._)([(0,p.j)("esri.layers.support.CodedValueDomain")],_);i(66150),i(12790);let v=n=class extends g{constructor(t){super(t),this.type="inherited"}clone(){return new n}};(0,l._)([(0,h.J)({inherited:"inherited"})],v.prototype,"type",void 0);let w=v=n=(0,l._)([(0,p.j)("esri.layers.support.InheritedDomain")],v),C=o=class extends g{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new o({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,l._)([(0,d.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(t,r)=>r.range&&r.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(t,r,i){r[i]=[this.minValue||0,t]}}}})],C.prototype,"maxValue",void 0),(0,l._)([(0,d.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(t,r)=>r.range&&r.range[0]},write:{target:"range",writer(t,r,i){r[i]=[t,this.maxValue||0]}}}})],C.prototype,"minValue",void 0),(0,l._)([(0,h.J)({range:"range"})],C.prototype,"type",void 0);let S=C=o=(0,l._)([(0,p.j)("esri.layers.support.RangeDomain")],C),x={key:"type",base:g,typeMap:{range:C,"coded-value":b,inherited:w}};function M(t){if(!t||!t.type)return null;switch(t.type){case"range":return S.fromJSON(t);case"codedValue":return b.fromJSON(t);case"inherited":return w.fromJSON(t)}return null}},71958:(t,r,i)=>{"use strict";i.d(r,{C9:()=>A,Ci:()=>x,FV:()=>S,Fr:()=>c,JD:()=>b,JY:()=>F,Jj:()=>C,KE:()=>T,SU:()=>M,VG:()=>E,Y5:()=>w,gG:()=>k,hu:()=>_,kZ:()=>L,kp:()=>P,rP:()=>O,rk:()=>R,tD:()=>I});var s=i(12790),n=i(96082),o=i(84576),a=i(82639),l=i(18229),u=i(15463),d=i(96896),h=i(57775),p=i(58531);let c=new o.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),f={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function y(t,r,i){return!!(t&&t.hasOwnProperty(r)?t[r]:i)}function m(t,r,i){return t&&t.hasOwnProperty(r)?t[r]:i}function g(t,r){let i=t?.supportedOperationsWithCacheHint?.map(t=>t.toLowerCase());return!!i?.includes(r.toLowerCase())}function _(t,r,i){return{analytics:{supportsCacheHint:g(r.advancedQueryCapabilities,"queryAnalytics")},attachment:function(t){let r=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:g(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:y(t,"supportsAttachmentsResizing",!1)};return r&&Array.isArray(r)&&r.forEach(t=>{let r=f[t.name];r&&(i[r]=!!t.isEnabled)}),i}(r),data:{isVersioned:y(r,"isDataVersioned",!1),supportsAttachment:y(r,"hasAttachments",!1),supportsM:y(r,"hasM",!1),supportsZ:y(r,"hasZ",!1)},metadata:{supportsAdvancedFieldProperties:y(r,"supportsFieldDescriptionProperty",!1)},operations:function(t,r,i){let s=t?t.toLowerCase().split(",").map(t=>t.trim()):[],n=i?(0,u.Qc)(i):null,o=s.includes((0,a.pC)(n)&&"MapServer"===n.serverType?"data":"query"),l=s.includes("editing")&&!r.datesInUnknownTimezone,d=l&&s.includes("create"),h=l&&s.includes("delete"),p=l&&s.includes("update"),c=s.includes("changetracking"),f=r.advancedQueryCapabilities;return l&&!(d||h||p)&&(d=h=p=!0),{supportsCalculate:y(r,"supportsCalculate",!1),supportsTruncate:y(r,"supportsTruncate",!1),supportsValidateSql:y(r,"supportsValidateSql",!1),supportsAdd:d,supportsDelete:h,supportsEditing:l,supportsChangeTracking:c,supportsQuery:o,supportsQueryAnalytics:y(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:y(f,"supportsQueryAttachments",!1),supportsQueryTopFeatures:y(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:y(r,"supportsAttachmentsResizing",!1),supportsSync:s.includes("sync"),supportsUpdate:p,supportsExceedsLimitStatistics:y(r,"supportsExceedsLimitStatistics",!1)}}(r.capabilities||t,r,i),query:function(t,r){let i=t.advancedQueryCapabilities,s=t.ownershipBasedAccessControlForFeatures,o=t.archivingInfo,a=F(t),l=r?.includes("MapServer"),d=!(0,n.Z)("mapserver-pbf-enabled")&&l&&(a??0)<10.81,h=(0,u.M8)(r),p=(t.supportedQueryFormats||"").split(",").reduce((t,r)=>{let i=r.toLowerCase().trim();return i&&t.add(i),t},new Set);return{supportsStatistics:y(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:y(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:y(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:function(t){let r=t?.supportedSpatialAggregationStatistics?.map(t=>t.toLowerCase());return{envelope:!!r?.includes("envelopeaggregate"),centroid:!!r?.includes("centroidaggregate"),convexHull:!!r?.includes("convexhullaggregate")}}(i),supportsCentroid:y(i,"supportsReturningGeometryCentroid",!1),supportsDistance:y(i,"supportsQueryWithDistance",!1),supportsDistinct:y(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:y(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:y(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:y(i,"supportsHavingClause",!1),supportsOrderBy:y(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:y(i,"supportsPagination",!1),supportsQuantization:y(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:y(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:y(t,"supportsReturningQueryGeometry",!1),supportsResultType:y(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:y(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:y(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:y(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:y(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:y(s,"allowOthersToQuery",!0),supportsHistoricMoment:y(o,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!d&&p.has("pbf"),supportsDisjointSpatialRelationship:y(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:y(i,"supportsQueryWithCacheHint",!1)||g(i,"query"),supportsDefaultSpatialReference:y(i,"supportsDefaultSR",!1),supportsCompactGeometry:h,supportsFullTextSearch:y(i,"supportsFullTextSearch",!1),maxRecordCountFactor:m(t,"maxRecordCountFactor",void 0),maxRecordCount:m(t,"maxRecordCount",void 0),standardMaxRecordCount:m(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:m(t,"tileMaxRecordCount",void 0)}}(r,i),queryRelated:function(t){let r=t.advancedQueryCapabilities,i=y(r,"supportsAdvancedQueryRelated",!1);return{supportsPagination:y(r,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:g(r,"queryRelated")}}(r),queryTopFeatures:{supportsCacheHint:g(r.advancedQueryCapabilities,"queryTopFilter")},editing:function(t){let r=t.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:y(t,"allowGeometryUpdates",!0),supportsGlobalId:y(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:y(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:y(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:y(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:y(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:y(r,"allowAnonymousToDelete",!0),supportsDeleteByOthers:y(r,"allowOthersToDelete",!0),supportsUpdateByAnonymous:y(r,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:y(r,"allowOthersToUpdate",!0)}}(r)}}async function b(t,r,i,n){let{source:o}=await t.load();if(await v(t,r,n),!o.addAttachment)throw new s.Z(n,"Layer source does not support addAttachment capability");return o.addAttachment(r,i)}function v(t,r,i){let{attributes:n}=r,{objectIdField:o}=t;return t.get("capabilities.data.supportsAttachment")?r?n?o&&n[o]?Promise.resolve():Promise.reject(new s.Z(i,`feature is missing the identifying attribute ${o}`)):Promise.reject(new s.Z(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new s.Z(i,"A feature is required to add/delete/update attachments")):Promise.reject(new s.Z(i,"this layer doesn't support attachments"))}async function w(t,r,i,n,o){let{source:a}=await t.load();if(await v(t,r,o),!a.updateAttachment)throw new s.Z(o,"Layer source does not support updateAttachment capability");return a.updateAttachment(r,i,n)}async function C(t,r,s){let n=await i.e(315).then(i.bind(i,90315)),o=await t.load();return n.applyEdits(o,o.source,r,s)}async function S(t,r,i,n){let{source:o}=await t.load();if(await v(t,r,n),!o.deleteAttachments)throw new s.Z(n,"Layer source does not support deleteAttachments capability");return o.deleteAttachments(r,i)}async function x(t,r,i){let{source:n}=await t.load({signal:r?.signal});if(!n.fetchRecomputedExtents)throw new s.Z(i,"Layer source does not support fetchUpdates capability");return n.fetchRecomputedExtents(r)}async function M(t,r,i,n){r=d.Z.from(r);let{source:o,capabilities:a}=await t.load();if(!a?.data?.supportsAttachment)throw new s.Z(n,"this layer doesn't support attachments");let{attachmentTypes:l,objectIds:u,globalIds:h,num:p,size:c,start:f,where:y}=r;if(!a?.operations?.supportsQueryAttachments){let t=u&&u.length>1,i=l&&l.length,o=h&&h.length,a=c&&c.length;if(t||i||o||a||p||f||y)throw new s.Z(n,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",r)}if(!u?.length&&!y)throw new s.Z(n,"'objectIds' or 'where' are required to perform attachment query",r);if(!o.queryAttachments)throw new s.Z(n,"Layer source does not support queryAttachments capability",r);return o.queryAttachments(r)}async function I(t,r,i,n){let{source:o}=await t.load();if(!o.queryObjectIds)throw new s.Z(n,"Layer source does not support queryObjectIds capability");return o.queryObjectIds(h.Z.from(r)??t.createQuery(),i)}async function E(t,r,i,n){let{source:o}=await t.load();if(!o.queryFeatureCount)throw new s.Z(n,"Layer source does not support queryFeatureCount capability");return o.queryFeatureCount(h.Z.from(r)??t.createQuery(),i)}async function T(t,r,i,n){let{source:o}=await t.load();if(!o.queryExtent)throw new s.Z(n,"Layer source does not support queryExtent capability");return o.queryExtent(h.Z.from(r)??t.createQuery(),i)}async function P(t,r,i,n){let{source:o}=await t.load();if(!o.queryRelatedFeatures)throw new s.Z(n,"Layer source does not support queryRelatedFeatures capability");return o.queryRelatedFeatures(p.Z.from(r),i)}async function A(t,r,i,n){let{source:o}=await t.load();if(!o.queryRelatedFeaturesCount)throw new s.Z(n,"Layer source does not support queryRelatedFeaturesCount capability");return o.queryRelatedFeaturesCount(p.Z.from(r),i)}async function k(t){let r=t.source;if(r?.refresh)try{let{dataChanged:i,updates:s}=await r.refresh();if((0,a.pC)(s)&&(t.sourceJSON={...t.sourceJSON,...s},t.read(s,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await (0,l.E)(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function O(t){let r=new h.Z,i=t.get("capabilities.data"),s=t.get("capabilities.query");r.historicMoment=t.historicMoment,r.gdbVersion=t.gdbVersion,r.returnGeometry=!0,s&&(r.compactGeometryEnabled=s.supportsCompactGeometry,r.defaultSpatialReferenceEnabled=s.supportsDefaultSpatialReference),i&&(i.supportsZ&&null!=t.returnZ&&(r.returnZ=t.returnZ),i.supportsM&&null!=t.returnM&&(r.returnM=t.returnM)),r.outFields=["*"];let{timeOffset:n,timeExtent:o}=t;return r.timeExtent=null!=n&&null!=o?o.offset(-n.value,n.unit):o||null,r.multipatchOption="multipatch"===t.geometryType?"xyFootprint":null,r}function R(t){let{globalIdField:r,fields:i}=t;if(r)return r;if(i){for(let t of i)if("esriFieldTypeGlobalID"===t.type)return t.name}}function L(t){let{objectIdField:r,fields:i}=t;if(r)return r;if(i){for(let t of i)if("esriFieldTypeOID"===t.type)return t.name}}function F(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}},72844:(t,r,i)=>{"use strict";i.d(r,{v:()=>l});var s=i(66150),n=i(32195),o=i(21014),a=i(99444);function l(){return{fields:{type:[n.Z],value:null},fieldsIndex:{readOnly:!0,get(){return new o.Z(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){let t=this._userOutFields;if(!t||!t.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(let r of t)this.fieldsIndex?.has(r)||s.Z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${r} found in outFields`,{layer:this,outFields:t});return(0,a.Q0)(this.fieldsIndex,t)}}}}},30764:(t,r,i)=>{"use strict";i.d(r,{v:()=>s});let s=new(i(84576)).X({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},99444:(t,r,i)=>{"use strict";i.d(r,{io:()=>T,vl:()=>O,ZV:()=>R,AB:()=>I,gd:()=>M,Ll:()=>L,Mu:()=>j,Qj:()=>F,R9:()=>es,Q0:()=>x,YN:()=>v,UF:()=>C,O5:()=>A,CH:()=>N,os:()=>D,H7:()=>H,Ec:()=>en,qN:()=>J,q6:()=>g,Pz:()=>Y,Lk:()=>E,Qc:()=>K,vP:()=>ei});var s,n,o,a,l=i(12790),u=i(82639),d=i(12619);(a=o||(o={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",a.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var h=i(79286);let p=/^([0-9])/,c=/[^A-Za-z0-9_\u0080-\uffff]/g,f=/_{2,}/g,y=/^_/,m=/_$/;function g(t){return t?t.trim().replace(c,"_").replace(f,"_").replace(y,"").replace(m,"").replace(p,"F$1"):null}let _=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],b=["field","normalizationField"];function v(t,r){if(null!=t&&null!=r){for(let i of Array.isArray(t)?t:[t])if(w(_,i,r),"visualVariables"in i&&i.visualVariables)for(let t of i.visualVariables)w(b,t,r)}}function w(t,r,i){if(t)for(let s of t){let t=(0,d.hS)(s,r),n=t&&"function"!=typeof t&&i.get(t);n&&(0,d.RB)(s,n.name,r)}}function C(t,r){if(null!=t&&r?.fields?.length){if("startField"in t){let i=r.get(t.startField),s=r.get(t.endField);t.startField=i?.name??null,t.endField=s?.name??null}else{let i=r.get(t.startTimeField),s=r.get(t.endTimeField);t.startTimeField=i?.name??null,t.endTimeField=s?.name??null}}}let S=new Set;function x(t,r){return t&&r?(S.clear(),M(S,t,r),Array.from(S).sort()):[]}function M(t,r,i){if(i){if(r?.fields?.length){if(i.includes("*"))for(let{name:i}of r.fields)t.add(i);else for(let s of i)I(t,r,s)}else{if(i.includes("*"))return t.clear(),void t.add("*");for(let r of i)null!=r&&t.add(r)}}}function I(t,r,i){if("string"==typeof i){if(r){let s=r.get(i);s&&t.add(s.name)}else t.add(i)}}function E(t,r){return(0,u.Wi)(r)||(0,u.Wi)(t)?[]:r.includes("*")?(t.fields??[]).map(t=>t.name):r}async function T(t,r,i){if(!i)return;let{arcadeUtils:s}=await (0,h.LC)();for(let n of s.extractFieldNames(i,r?.fields?.map(t=>t.name)))I(t,r,n)}async function P(t,r,s){if(s&&"1=1"!==s){let n=(await i.e(2238).then(i.bind(i,2238))).WhereClause.create(s,r);if(!n.isStandardized)throw new l.Z("fieldUtils:collectFilterFields","Where clause is not standardized",{where:s});M(t,r,n.fieldNames)}}function A({displayField:t,fields:r}){return t||(r&&r.length?k(r,"name-or-title")||k(r,"unique-identifier")||k(r,"type-or-category")||function(t){for(let r of t){if(!r||!r.name)continue;let t=r.name.toLowerCase();if(t.includes("name")||t.includes("title"))return r.name}return null}(r):null)}function k(t,r){for(let i of t)if(i&&i.valueType&&i.valueType===r)return i.name;return null}async function O(t,r){if(!r)return;let i=(0,d.hS)("elevationInfo.featureExpressionInfo",r);return i?i.collectRequiredFields(t,r.fieldsIndex):void 0}async function R(t,r,i){if(!r||!i||!("fields"in i))return;let s=[];s.push(async function(t,r,i){let s=[];i?.expressionInfos&&s.push(...i.expressionInfos.map(i=>T(t,r.fieldsIndex,i.expression)));let n=i?.content;if(Array.isArray(n))for(let i of n)"expression"===i.type&&i.expressionInfo&&s.push(T(t,r.fieldsIndex,i.expressionInfo.expression));await Promise.all(s)}(t,r,i.popupTemplate)),i.fields&&s.push(...i.fields.map(async i=>{var s;return s=r.fieldsIndex,void(i.onStatisticExpression?T(t,s,i.onStatisticExpression.expression):t.add(i.onStatisticField))})),await Promise.all(s)}async function L(t,r,i){r&&(r.timeInfo&&(0,u.pC)(i)&&i.timeExtent&&M(t,r.fieldsIndex,[r.timeInfo.startField,r.timeInfo.endField]),r.floorInfo&&M(t,r.fieldsIndex,[r.floorInfo.floorField]),(0,u.pC)(i)&&(0,u.pC)(i.where)&&await P(t,r.fieldsIndex,i.where))}async function F(t,r,i){r&&i&&await Promise.all(i.map(i=>(async function(t,r,i){r&&i&&(i.valueExpression?await T(t,r.fieldsIndex,i.valueExpression):i.field&&I(t,r.fieldsIndex,i.field))})(t,r,i)))}function N(t){if(!t)return[];let r="editFieldsInfo"in t&&t.editFieldsInfo;return r?x(t.fieldsIndex,[r&&r.creatorField,r&&r.creationDateField,r&&r.editorField,r&&r.editDateField]):[]}async function j(t,r){let{labelingInfo:i,fieldsIndex:s}=r;i&&i.length&&await Promise.all(i.map(r=>(async function(t,r,i){if(!i)return;let s=i.getLabelExpression(),n=i.where;if("arcade"===s.type)await T(t,r,s.expression);else{let i=s.expression.match(/{[^}]*}/g);i&&i.forEach(i=>{I(t,r,i.slice(1,-1))})}await P(t,r,n)})(t,s,r)))}function D(t){let r=t.defaultValue;return void 0!==r&&B(t,r)?r:t.nullable?null:void 0}function Z(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function V(t){return null===t||Z(t)}let z="isInteger"in Number?Number.isInteger:t=>"number"==typeof t&&isFinite(t)&&Math.floor(t)===t;function U(t){return null===t||z(t)}function G(t){return null!=t&&"string"==typeof t}function q(t){return null===t||G(t)}function $(){return!0}function B(t,r){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?U:z;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?V:Z;break;case"string":case"esriFieldTypeString":i=t.nullable?q:G;break;default:i=$}return 1==arguments.length?i:i(r)}let W=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function H(t){return null!=t&&W.has(t.type)}function J(t){return null!=t&&("string"===t.type||"esriFieldTypeString"===t.type)}function Y(t){return null==t||"number"==typeof t&&isNaN(t)?null:t}function K(t,r){return t.nullable&&null===r?null:H(t)&&!function(t,r){let i="string"==typeof t?X(t):t;if(!i)return!1;let s=i.min,n=i.max;return i.isInteger?z(r)&&r>=s&&r<=n:r>=s&&r<=n}(t.type,Number(r))?s.OUT_OF_RANGE:B(t,r)?t.domain?function(t,r){switch(t.type){case"range":{let i="range"in t?t.range[0]:t.minValue,s="range"in t?t.range[1]:t.maxValue;if(null!=i&&+r<i||null!=s&&+r>s)return o.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==t.codedValues||t.codedValues.every(t=>null==t||t.code!==r))return o.INVALID_CODED_VALUE}return null}(t.domain,r):null:n.INVALID_TYPE}function X(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return Q;case"esriFieldTypeInteger":case"integer":return ee;case"esriFieldTypeSingle":case"single":return et;case"esriFieldTypeDouble":case"double":return er}}(s||(s={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",(n||(n={})).INVALID_TYPE="type-validation-error::invalid-type";let Q={min:-32768,max:32767,isInteger:!0},ee={min:-2147483648,max:2147483647,isInteger:!0},et={min:-34e37,max:12e37,isInteger:!1},er={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function ei(t,r,i){switch(t){case o.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${r.name}, domain: ${JSON.stringify(r.domain)}`;case o.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${r.name}, domain: ${JSON.stringify(r.domain)}`;case n.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${r.name}, type: ${r.type}, nullable: ${r.nullable}`;case s.OUT_OF_RANGE:{let{min:t,max:s}=X(r.type);return`Value ${i} is out of range for the number type - field: ${r.name}, type: ${r.type}, value range is ${t} to ${s}`}}}function es(t,r){return!function(t,r,i){if(!r||!r.attributes||!t){if((0,u.pC)(null))for(let r of t??[])null.add(r);return!0}let s=r.attributes,n=!1;for(let r of t)if(!(r in s)){if(n=!0,!(0,u.pC)(null))break;i.add(r)}return n}(t,r,null)}function en(t){return["raster.itempixelvalue","raster.servicepixelvalue"].some(r=>t.toLowerCase().startsWith(r))}},70506:(t,r,i)=>{"use strict";i.d(r,{UO:()=>f,YI:()=>c,dI:()=>y,el:()=>v,hV:()=>p,z7:()=>h});var s=i(32121);let n="__begin__",o="__end__",a=RegExp(n,"ig"),l=RegExp(o,"ig"),u=RegExp("^"+n,"i"),d=RegExp(o+"$","i");function h(t){return t.replace(RegExp("\\{","g"),"[").replace(RegExp("\\}","g"),"]")}function p(t){let r={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(r.expression=t.labelExpressionInfo.value,r.type="conventional"):t.labelExpressionInfo.expression&&(r.expression=t.labelExpressionInfo.expression,r.type="arcade"):null!=t.labelExpression&&(r.expression=t.labelExpression.replace(RegExp("\\[","g"),"{").replace(RegExp("\\]","g"),"}"),r.type="conventional"),r}function c(t){let r=p(t);if(!r)return null;switch(r.type){case"conventional":return y(r.expression);case"arcade":return r.expression}return null}function f(t){let r=p(t);if(!r)return null;switch(r.type){case"conventional":return function(t){let r=t.match(m);return r&&r[1].trim()||null}(r.expression);case"arcade":return v(r.expression)}return null}function y(t){let r;return t?(r=(0,s.gx)(t,t=>n+'$feature["'+t+'"]'+o),r=u.test(r)?r.replace(u,""):'"'+r,r=(r=d.test(r)?r.replace(d,""):r+'"').replace(a,'" + ').replace(l,' + "')):r='""',r}let m=/^\s*\{([^}]+)\}\s*$/i,g=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,_=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,b=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function v(t){if(!t)return null;let r=g.exec(t)||_.exec(t);return r?r[1]||r[3]:(r=b.exec(t))?r[2]:null}},94018:(t,r,i)=>{"use strict";i.d(r,{a:()=>p,r:()=>d});var s=i(12790),n=i(59118),o=i(66150),a=i(57599);let l=o.Z.getLogger("esri.layers.support.labelingInfo"),u=/\[([^\[\]]+)\]/gi;function d(t,r,i){return t?t.map(t=>{let s=new a.Z;if(s.read(t,i),s.labelExpression){let t=r.fields||r.layerDefinition&&r.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(u,(r,i)=>`[${function(t,r){if(!r)return t;let i=t.toLowerCase();for(let t=0;t<r.length;t++){let s=r[t].name;if(s.toLowerCase()===i)return s}return t}(i,t)}]`)}return s}):null}let h={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function p(t,r){let i=(0,n.d9)(t);return i.some(t=>(function(t,r){let i=t.labelPlacement,n=h[r];if(!t.symbol)return l.warn("No ILabelClass symbol specified."),!0;if(!n)return l.error(new s.Z("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${r}' is not supported`)),!0;if(!n.includes(i)){let s=n[0];i&&l.warn(`Found invalid label placement type ${i} for ${r}. Defaulting to ${s}`),t.labelPlacement=s}return!1})(t,r))?[]:i}},39574:(t,r,i)=>{"use strict";function s(t){return"feature"===t?.type&&!t.url&&"memory"===t.source?.type}function n(t){return"feature"===t?.type&&"feature-layer"===t.source?.type}i.d(r,{rQ:()=>s,y2:()=>n})},93948:(t,r,i)=>{"use strict";i.d(r,{n:()=>R});var s,n,o,a,l,u=i(24765),d=i(84576),h=i(72140),p=i(53919),c=(i(99950),i(36844)),f=i(21374),y=i(71169),m=i(30407),g=i(21314),_=i(51609),b=i(32195),v=i(64785),w=(i(64012),i(371)),C=i(34351);let S=l=class extends h.wq{constructor(t){super(t),this.type="query-table"}clone(){let{workspaceId:t,query:r,oidFields:i,spatialReference:s,geometryType:n}=this,o={workspaceId:t,query:r,oidFields:i,spatialReference:s?.clone()??void 0,geometryType:n};return new l(o)}};(0,u._)([(0,f.J)({queryTable:"query-table"})],S.prototype,"type",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],S.prototype,"workspaceId",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],S.prototype,"query",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],S.prototype,"oidFields",void 0),(0,u._)([(0,p.Cb)({type:w.Z,json:{write:!0}})],S.prototype,"spatialReference",void 0),(0,u._)([(0,f.J)(C.Mk)],S.prototype,"geometryType",void 0),S=l=(0,u._)([(0,m.j)("esri.layers.support.source.QueryTableDataSource")],S);let x=s=class extends h.wq{constructor(t){super(t),this.type="raster"}clone(){let{workspaceId:t,dataSourceName:r}=this;return new s({workspaceId:t,dataSourceName:r})}};(0,u._)([(0,f.J)({raster:"raster"})],x.prototype,"type",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],x.prototype,"dataSourceName",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],x.prototype,"workspaceId",void 0),x=s=(0,u._)([(0,m.j)("esri.layers.support.source.RasterDataSource")],x);let M=n=class extends h.wq{constructor(t){super(t),this.type="table"}clone(){let{workspaceId:t,gdbVersion:r,dataSourceName:i}=this;return new n({workspaceId:t,gdbVersion:r,dataSourceName:i})}};(0,u._)([(0,f.J)({table:"table"})],M.prototype,"type",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],M.prototype,"workspaceId",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],M.prototype,"gdbVersion",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],M.prototype,"dataSourceName",void 0),M=n=(0,u._)([(0,m.j)("esri.layers.support.source.TableDataSource")],M);let I=(0,d.w)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"}),E=o=class extends h.wq{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,r,i){return P()(t,r,i)}castLeftTableSource(t){return(0,g.N7)(k(),t)}readRightTableSource(t,r,i){return P()(t,r,i)}castRightTableSource(t){return(0,g.N7)(k(),t)}clone(){let{leftTableKey:t,rightTableKey:r,leftTableSource:i,rightTableSource:s,joinType:n}=this,a={leftTableKey:t,rightTableKey:r,leftTableSource:i?.clone()??void 0,rightTableSource:s?.clone()??void 0,joinType:n};return new o(a)}};(0,u._)([(0,f.J)({joinTable:"join-table"})],E.prototype,"type",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],E.prototype,"leftTableKey",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],E.prototype,"rightTableKey",void 0),(0,u._)([(0,p.Cb)({json:{write:!0}})],E.prototype,"leftTableSource",void 0),(0,u._)([(0,y.r)("leftTableSource")],E.prototype,"readLeftTableSource",null),(0,u._)([(0,c.p)("leftTableSource")],E.prototype,"castLeftTableSource",null),(0,u._)([(0,p.Cb)({json:{write:!0}})],E.prototype,"rightTableSource",void 0),(0,u._)([(0,y.r)("rightTableSource")],E.prototype,"readRightTableSource",null),(0,u._)([(0,c.p)("rightTableSource")],E.prototype,"castRightTableSource",null),(0,u._)([(0,f.J)(I)],E.prototype,"joinType",void 0);let T=null;function P(){return T||(T=(0,_.d)({types:k()})),T}let A=null;function k(){return A||(A={key:"type",base:null,typeMap:{"data-layer":R,"map-layer":v.R}}),A}let O={key:"type",base:null,typeMap:{"join-table":E=o=(0,u._)([(0,m.j)("esri.layers.support.source.JoinTableDataSource")],E),"query-table":S,raster:x,table:M}},R=a=class extends h.wq{constructor(t){super(t),this.type="data-layer"}clone(){let{fields:t,dataSource:r}=this;return new a({fields:t,dataSource:r})}};(0,u._)([(0,f.J)({dataLayer:"data-layer"})],R.prototype,"type",void 0),(0,u._)([(0,p.Cb)({type:[b.Z],json:{write:!0}})],R.prototype,"fields",void 0),(0,u._)([(0,p.Cb)({types:O,json:{write:!0}})],R.prototype,"dataSource",void 0),(R=a=(0,u._)([(0,m.j)("esri.layers.support.source.DataLayerSource")],R)).from=(0,g.se)(R)},64785:(t,r,i)=>{"use strict";i.d(r,{R:()=>h});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314)),u=i(21374),d=i(30407);let h=s=class extends o.wq{constructor(t){super(t),this.type="map-layer"}clone(){let{mapLayerId:t,gdbVersion:r}=this;return new s({mapLayerId:t,gdbVersion:r})}};(0,n._)([(0,u.J)({mapLayer:"map-layer"})],h.prototype,"type",void 0),(0,n._)([(0,a.Cb)({type:l.z8,json:{write:!0}})],h.prototype,"mapLayerId",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],h.prototype,"gdbVersion",void 0),h=s=(0,n._)([(0,d.j)("esri.layers.support.source.MapLayerSource")],h)},28548:(t,r,i)=>{"use strict";i.d(r,{D:()=>o});var s=i(15463);let n=[];function o(t,r){if((0,s.M8)(t.url??""))return!0;let{wkid:i}=r;for(let r of n){if((t.version??0)>=r[0])break;if("function"==typeof r[1]&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}n.push([10.91,()=>{let t=new Set([9709,9716,9741,9761,9766]);for(let r=9712;r<=9713;r++)t.add(r);for(let r=9748;r<=9749;r++)t.add(r);for(let r=20904;r<=20932;r++)t.add(r);for(let r=21004;r<=21032;r++)t.add(r);for(let r=21207;r<=21264;r++)t.add(r);for(let r=21307;r<=21364;r++)t.add(r);for(let r=102759;r<=102760;r++)t.add(r);for(let r=102901;r<=102955;r++)t.add(r);return t}]),n.push([10.9,()=>{let t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let r=9356;r<=9360;r++)t.add(r);for(let r=9404;r<=9407;r++)t.add(r);for(let r=9476;r<=9482;r++)t.add(r);for(let r=9487;r<=9494;r++)t.add(r);for(let r=9697;r<=9699;r++)t.add(r);return t}]),n.push([10.81,()=>{let t=new Set([9265,9333,103598,103699]);for(let r=9248;r<=9254;r++)t.add(r);for(let r=9271;r<=9273;r++)t.add(r);for(let r=9284;r<=9285;r++)t.add(r);for(let r=21453;r<=21463;r++)t.add(r);return t}]),n.push([10.8,()=>{let t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let r=8035;r<=8036;r++)t.add(r);for(let r=8455;r<=8456;r++)t.add(r);for(let r=8518;r<=8529;r++)t.add(r);for(let r=8533;r<=8536;r++)t.add(r);for(let r=8538;r<=8540;r++)t.add(r);for(let r=8677;r<=8679;r++)t.add(r);for(let r=8902;r<=8903;r++)t.add(r);for(let r=8907;r<=8910;r++)t.add(r);for(let r=8949;r<=8951;r++)t.add(r);for(let r=8972;r<=8987;r++)t.add(r);for(let r=9039;r<=9040;r++)t.add(r);for(let r=9068;r<=9069;r++)t.add(r);for(let r=9140;r<=9141;r++)t.add(r);for(let r=9148;r<=9150;r++)t.add(r);for(let r=9153;r<=9159;r++)t.add(r);for(let r=9205;r<=9218;r++)t.add(r);for(let r=9221;r<=9222;r++)t.add(r);for(let r=54098;r<=54101;r++)t.add(r);return t}]),n.push([10.71,()=>{let t=new Set([6316]);for(let r=8351;r<=8353;r++)t.add(r);for(let r=9294;r<=9297;r++)t.add(r);for(let r=103586;r<=103594;r++)t.add(r);for(let r=103696;r<=103698;r++)t.add(r);return t}]),n.push([10.7,()=>{let t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let r=8065;r<=8068;r++)t.add(r);for(let r=8082;r<=8083;r++)t.add(r);for(let r=8379;r<=8385;r++)t.add(r);for(let r=8836;r<=8840;r++)t.add(r);for(let r=8857;r<=8860;r++)t.add(r);for(let r=53035;r<=53037;r++)t.add(r);for(let r=54090;r<=54091;r++)t.add(r);for(let r=102498;r<=102499;r++)t.add(r);return t}]),n.push([10.61,()=>new Set([102497])]),n.push([10.6,()=>{let t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let r=7755;r<=7787;r++)t.add(r);for(let r=7791;r<=7795;r++)t.add(r);for(let r=7799;r<=7801;r++)t.add(r);for(let r=7825;r<=7831;r++)t.add(r);for(let r=7877;r<=7878;r++)t.add(r);for(let r=7882;r<=7883;r++)t.add(r);for(let r=7991;r<=7992;r++)t.add(r);for(let r=8042;r<=8043;r++)t.add(r);for(let r=8058;r<=8059;r++)t.add(r);for(let r=8311;r<=8348;r++)t.add(r);for(let r=9060;r<=9067;r++)t.add(r);for(let r=102562;r<=102568;r++)t.add(r);for(let r=102799;r<=102900;r++)t.add(r);return t}]),n.push([10.51,()=>{let t=new Set([7683,7881,7886,7899,8888,9e3]);for(let r=8013;r<=8032;r++)t.add(r);for(let r=9053;r<=9057;r++)t.add(r);for(let r=104017;r<=104018;r++)t.add(r);for(let r=104971;r<=104974;r++)t.add(r);return t}]),n.push([10.5,()=>{let t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let r=4087;r<=4088;r++)t.add(r);for(let r=5896;r<=5899;r++)t.add(r);for(let r=7005;r<=7007;r++)t.add(r);for(let r=7057;r<=7070;r++)t.add(r);for(let r=7073;r<=7082;r++)t.add(r);for(let r=7109;r<=7128;r++)t.add(r);for(let r=7844;r<=7859;r++)t.add(r);return t}])},2162:(t,r,i)=>{"use strict";i.d(r,{W:()=>o,v:()=>a});var s=i(70992);let n={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,r,i)=>{"-"===r.charAt(0)?t.style.setProperty(r,i):t.style[r]=i}},o=t=>(0,s.l7)(n,t),a={create:(t,r)=>(r=o(r),(0,s.WV)(t,document.createElement("div"),void 0,r),(0,s.UQ)(t,r)),append:(t,r,i)=>(i=o(i),(0,s.WV)(r,t,void 0,i),(0,s.UQ)(r,i)),insertBefore:(t,r,i)=>(i=o(i),(0,s.WV)(r,t.parentNode,t,i),(0,s.UQ)(r,i)),merge:(t,r,i)=>(i=o(i),r.domNode=t,(0,s.Yj)(t,r,i),(0,s.UQ)(r,i)),replace:(t,r,i)=>(i=o(i),(0,s.WV)(r,t.parentNode,t,i),t.parentNode.removeChild(t),(0,s.UQ)(r,i))}},70992:(t,r,i)=>{"use strict";i.d(r,{UQ:()=>T,WV:()=>x,Yj:()=>S,l7:()=>d});var s=i(93381);let n="http://www.w3.org/",o=`${n}2000/svg`,a=`${n}1999/xlink`,l,u=[],d=(t,r)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),r&&Object.keys(r).forEach(t=>{i[t]=r[t]}),i},h=(t,r)=>t.vnodeSelector===r.vnodeSelector&&(t.properties&&r.properties?t.properties.key===r.properties.key&&t.properties.bind===r.properties.bind:!t.properties&&!r.properties),p=t=>{if("string"!=typeof t)throw Error("Style values must be strings")},c=(t,r,i)=>{if(""!==r.vnodeSelector){for(let s=i;s<t.length;s++)if(h(t[s],r))return s}return -1},f=(t,r,i,s)=>{let n=t[r];if(""===n.vnodeSelector)return;let o=n.properties;if(!(o?void 0===o.key?o.bind:o.key:void 0)){for(let o=0;o<t.length;o++)if(o!==r&&h(t[o],n))throw Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${"added"===s?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},y=t=>{if(t.properties){let r=t.properties.enterAnimation;r&&r(t.domNode,t.properties)}},m=[],g=!1,_=t=>{(t.children||[]).forEach(_),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},b=()=>{g=!1,m.forEach(_),m.length=0},v=t=>{m.push(t),g||(g=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(b,{timeout:16}):setTimeout(b,16))},w=t=>{let r=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return r.style.pointerEvents="none",void i(r,()=>{r.parentNode&&(r.parentNode.removeChild(r),v(t))},t.properties)}r.parentNode&&(r.parentNode.removeChild(r),v(t))},C=(t,r,i)=>{if(!r)return;let n=i.eventHandlerInterceptor,l=Object.keys(r),u=l.length;for(let d=0;d<u;d++){let u=l[d],h=r[u];if("className"===u)throw Error('Property "className" is not supported, use "class".');if("class"===u)M(t,h,!0);else if("classes"===u){let r=Object.keys(h),i=r.length;for(let s=0;s<i;s++){let i=r[s];h[i]&&t.classList.add(i)}}else if("styles"===u){let r=Object.keys(h),s=r.length;for(let n=0;n<s;n++){let s=r[n],o=h[s];o&&(p(o),i.styleApplyer(t,s,o))}}else if("key"!==u&&null!=h){let l=typeof h;"function"===l?(0===u.lastIndexOf("on",0)&&(n&&(h=n(u,h,t,r)),"oninput"===u&&function(){let t=h;h=function(r){t.apply(this,[r]),r.target["oninput-value"]=r.target.value}}()),t[u]=h):i.namespace===o?"href"===u?t.setAttributeNS(a,u,h):t.setAttribute(u,h):"string"===l&&"value"!==u?"innerHTML"===u?t[u]=s.w3.sanitize(h):t.setAttribute(u,h):t[u]=h}}},S=(t,r,i)=>{((t,r,i)=>{if(r)for(let s of r)x(s,t,void 0,i)})(t,r.children,i),r.text&&(t.textContent=r.text),C(t,r.properties,i),r.properties&&r.properties.afterCreate&&r.properties.afterCreate.apply(r.properties.bind||r.properties,[t,i,r.vnodeSelector,r.properties,r.children])},x=(t,r,i,s)=>{let n,a=0,l=t.vnodeSelector,u=r.ownerDocument;if(""===l)n=t.domNode=u.createTextNode(t.text),void 0!==i?r.insertBefore(n,i):r.appendChild(n);else{for(let h=0;h<=l.length;++h){let p=l.charAt(h);if(h===l.length||"."===p||"#"===p){let p=l.charAt(a-1),c=l.slice(a,h);"."===p?n.classList.add(c):"#"===p?n.id=c:("svg"===c&&(s=d(s,{namespace:o})),void 0!==s.namespace?n=t.domNode=u.createElementNS(s.namespace,c):(n=t.domNode=t.domNode||u.createElement(c),"input"===c&&t.properties&&void 0!==t.properties.type&&n.setAttribute("type",t.properties.type)),void 0!==i?r.insertBefore(n,i):n.parentNode!==r&&r.appendChild(n)),a=h+1}}S(n,t,s)}},M=(t,r,i)=>{r&&r.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},I=(t,r,i,n)=>{if(!i)return;let l=!1,u=Object.keys(i),d=u.length;for(let h=0;h<d;h++){let d=u[h],c=i[d],f=r[d];if("class"===d)f!==c&&(M(t,f,!1),M(t,c,!0));else if("classes"===d){let r=t.classList,i=Object.keys(c),s=i.length;for(let t=0;t<s;t++){let s=i[t],n=!!c[s];!!f[s]!==n&&(l=!0,n?r.add(s):r.remove(s))}}else if("styles"===d){let r=Object.keys(c),i=r.length;for(let s=0;s<i;s++){let i=r[s],o=c[i];o!==f[i]&&(l=!0,o?(p(o),n.styleApplyer(t,i,o)):n.styleApplyer(t,i,""))}}else if(c||"string"!=typeof f||(c=""),"value"===d){let r=t[d];r!==c&&(t["oninput-value"]?r===t["oninput-value"]:c!==f)&&(t[d]=c,t["oninput-value"]=void 0),c!==f&&(l=!0)}else if(c!==f){let r=typeof c;"function"===r&&n.eventHandlerInterceptor||(n.namespace===o?"href"===d?t.setAttributeNS(a,d,c):t.setAttribute(d,c):"string"===r?"innerHTML"===d?t[d]=s.w3.sanitize(c):"role"===d&&""===c?t.removeAttribute(d):t.setAttribute(d,c):t[d]!==c&&(t[d]=c),l=!0)}}return l},E=(t,r,i,s,n)=>{if(i===s)return!1;s=s||u;let o,a=(i=i||u).length,d=s.length,p=0,m=0,g=!1;for(;m<d;){let u=p<a?i[p]:void 0,d=s[m];if(void 0!==u&&h(u,d))g=l(u,d,n)||g,p++;else{let u=c(i,d,p+1);if(u>=0){for(o=p;o<u;o++)w(i[o]),f(i,o,t,"removed");g=l(i[u],d,n)||g,p=u+1}else x(d,r,p<a?i[p].domNode:void 0,n),y(d),f(s,m,t,"added")}m++}if(a>p)for(o=p;o<a;o++)w(i[o]),f(i,o,t,"removed");return g};l=(t,r,i)=>{let s=t.domNode,n=!1;if(t===r)return!1;let a=!1;if(""===r.vnodeSelector){if(r.text!==t.text){let t=s.ownerDocument.createTextNode(r.text);return s.parentNode.replaceChild(t,s),r.domNode=t,n=!0}r.domNode=s}else 0===r.vnodeSelector.lastIndexOf("svg",0)&&(i=d(i,{namespace:o})),t.text!==r.text&&(a=!0,void 0===r.text?s.removeChild(s.firstChild):s.textContent=r.text),r.domNode=s,a=E(r,s,t.children,r.children,i)||a,a=I(s,t.properties,r.properties,i)||a,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate.apply(r.properties.bind||r.properties,[s,i,r.vnodeSelector,r.properties,r.children]);return a&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(s,r.properties,t.properties),n};let T=(t,r)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=t;t=i,l(s,i,r)},domNode:t.domNode})},31088:(t,r,i)=>{"use strict";i.d(r,{E:()=>u});var s=i(2162);let n,o=(t,r)=>{let i=[];for(;t&&t!==r;)i.push(t),t=t.parentNode;return i};n=Array.prototype.find?(t,r)=>t.find(r):(t,r)=>t.filter(r)[0];let a=(t,r)=>{let i=t;return r.forEach(t=>{i=i&&i.children?n(i.children,r=>r.domNode===t):void 0}),i},l=(t,r,i)=>{let s=function(s){i("domEvent",s);let n=r(),l=o(s.currentTarget,n.domNode);l.reverse();let u,d=a(n.getLastRender(),l);return t.scheduleRender(),d&&(u=d.properties[`on${s.type}`].apply(d.properties.bind||this,arguments)),i("domEventProcessed",s),u};return(t,r,i,n)=>s},u=t=>{let r,i,n=(0,s.W)(t),o=n.performanceLogger,a=!0,u=!1,d=[],h=[],p=(t,i,s)=>{let a;n.eventHandlerInterceptor=l(r,()=>a,o),a=t(i,s(),n),d.push(a),h.push(s)},c=()=>{if(i=void 0,a){a=!1,o("renderStart",void 0);for(let t=0;t<d.length;t++){let r=h[t]();o("rendered",void 0),d[t].update(r),o("patched",void 0)}o("renderDone",void 0),a=!0}};return r={renderNow:c,scheduleRender:()=>{i||u||(i=requestAnimationFrame(c))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),u=!0},resume:()=>{u=!1,a=!0,r.scheduleRender()},append:(t,r)=>{p(s.v.append,t,r)},insertBefore:(t,r)=>{p(s.v.insertBefore,t,r)},merge:(t,r)=>{p(s.v.merge,t,r)},replace:(t,r)=>{p(s.v.replace,t,r)},detach:t=>{for(let r=0;r<h.length;r++)if(h[r]===t)return h.splice(r,1),d.splice(r,1)[0];throw Error("renderFunction was not found")}}}},22776:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407));let u=s=class extends o.wq{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new s({title:this.title,expression:this.expression})}};(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"title",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"expression",void 0),(0,n._)([(0,a.Cb)({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],u.prototype,"returnType",void 0);let d=u=s=(0,n._)([(0,l.j)("esri.popup.ElementExpressionInfo")],u)},89845:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407));let u=s=class extends o.wq{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new s({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"name",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"title",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"expression",void 0),(0,n._)([(0,a.Cb)({type:["string","number"],json:{write:!0}})],u.prototype,"returnType",void 0);let d=u=s=(0,n._)([(0,l.j)("esri.popup.ExpressionInfo")],u)},85200:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s,n=i(24765),o=i(84576),a=i(72140),l=i(59118),u=i(53919),d=(i(21314),i(21374)),h=i(30407),p=i(71624);let c=s=class extends a.wq{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new s({fieldName:this.fieldName,format:this.format?(0,l.d9)(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"fieldName",void 0),(0,n._)([(0,u.Cb)({type:p.Z,json:{write:!0}})],c.prototype,"format",void 0),(0,n._)([(0,u.Cb)({type:Boolean,json:{write:!0,default:!1}})],c.prototype,"isEditable",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,n._)([(0,d.J)(new o.X({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],c.prototype,"stringFieldOption",void 0),(0,n._)([(0,u.Cb)({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],c.prototype,"statisticType",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"tooltip",void 0),(0,n._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],c.prototype,"visible",void 0);let f=c=s=(0,n._)([(0,h.j)("esri.popup.FieldInfo")],c)},86780:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(97663);let u=s=class extends l.Z{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new s({description:this.description,displayType:this.displayType,title:this.title})}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,n._)([(0,o.Cb)({type:["auto","preview","list"],json:{write:!0}})],u.prototype,"displayType",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],u.prototype,"title",void 0),(0,n._)([(0,o.Cb)({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],u.prototype,"type",void 0);let d=u=s=(0,n._)([(0,a.j)("esri.popup.content.AttachmentsContent")],u)},36657:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(38440),u=i(30696);let d=s=class extends l.Z{constructor(t){super(t),this.type="bar-chart"}clone(){return new s({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,n._)([(0,o.Cb)({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:u.l.write}})],d.prototype,"type",void 0);let h=d=s=(0,n._)([(0,a.j)("esri.popup.content.BarChartMediaInfo")],d)},78506:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(38440),u=i(30696);let d=s=class extends l.Z{constructor(t){super(t),this.type="column-chart"}clone(){return new s({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,n._)([(0,o.Cb)({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:u.l.write}})],d.prototype,"type",void 0);let h=d=s=(0,n._)([(0,a.j)("esri.popup.content.ColumnChartMediaInfo")],d)},97663:(t,r,i)=>{"use strict";i.d(r,{Z:()=>u});var s=i(24765),n=i(72140),o=i(53919),a=(i(99950),i(21314),i(30407));let l=class extends n.wq{constructor(t){super(t),this.type=null}};(0,s._)([(0,o.Cb)({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0);let u=l=(0,s._)([(0,a.j)("esri.popup.content.Content")],l)},67530:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(59118),a=i(53919),l=(i(21314),i(30407)),u=i(97663);let d=s=class extends u.Z{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new s({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?(0,o.d9)(this.outFields):null})}};(0,n._)([(0,a.Cb)()],d.prototype,"creator",void 0),(0,n._)([(0,a.Cb)()],d.prototype,"destroyer",void 0),(0,n._)([(0,a.Cb)()],d.prototype,"outFields",void 0),(0,n._)([(0,a.Cb)({type:["custom"],readOnly:!0})],d.prototype,"type",void 0);let h=d=s=(0,n._)([(0,l.j)("esri.popup.content.CustomContent")],d)},87086:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(22776),u=i(97663);let d=s=class extends u.Z{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new s({expressionInfo:this.expressionInfo?.clone()})}};(0,n._)([(0,o.Cb)({type:l.Z,json:{write:!0}})],d.prototype,"expressionInfo",void 0),(0,n._)([(0,o.Cb)({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],d.prototype,"type",void 0);let h=d=s=(0,n._)([(0,a.j)("esri.popup.content.ExpressionContent")],d)},86288:(t,r,i)=>{"use strict";i.d(r,{Z:()=>c});var s,n=i(24765),o=i(59118),a=i(53919),l=(i(21314),i(30407)),u=i(62300),d=i(85200),h=i(97663);let p=s=class extends h.Z{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,r){r.fieldInfos=t&&t.map(t=>t.toJSON())}clone(){return new s((0,o.d9)({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};(0,n._)([(0,a.Cb)({type:Object,json:{write:!0}})],p.prototype,"attributes",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,n._)([(0,a.Cb)({type:[d.Z]})],p.prototype,"fieldInfos",void 0),(0,n._)([(0,u.c)("fieldInfos")],p.prototype,"writeFieldInfos",null),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],p.prototype,"title",void 0),(0,n._)([(0,a.Cb)({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);let c=p=s=(0,n._)([(0,l.j)("esri.popup.content.FieldsContent")],p)},29299:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s,n,o=i(24765),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(63886),d=i(72140);let h=n=class extends d.wq{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new n({linkURL:this.linkURL,sourceURL:this.sourceURL})}};(0,o._)([(0,a.Cb)({type:String,json:{write:!0}})],h.prototype,"linkURL",void 0),(0,o._)([(0,a.Cb)({type:String,json:{write:!0}})],h.prototype,"sourceURL",void 0);let p=h=n=(0,o._)([(0,l.j)("esri.popup.content.support.ImageMediaInfoValue")],h),c=s=class extends u.Z{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new s({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};(0,o._)([(0,a.Cb)({type:Number,json:{write:!0}})],c.prototype,"refreshInterval",void 0),(0,o._)([(0,a.Cb)({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0),(0,o._)([(0,a.Cb)({type:p,json:{write:!0}})],c.prototype,"value",void 0);let f=c=s=(0,o._)([(0,l.j)("esri.popup.content.ImageMediaInfo")],c)},90858:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(38440),u=i(30696);let d=s=class extends l.Z{constructor(t){super(t),this.type="line-chart"}clone(){return new s({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,n._)([(0,o.Cb)({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:u.l.write}})],d.prototype,"type",void 0);let h=d=s=(0,n._)([(0,a.j)("esri.popup.content.LineChartMediaInfo")],d)},38488:(t,r,i)=>{"use strict";i.d(r,{Z:()=>b});var s,n=i(24765),o=i(59118),a=i(53919),l=(i(21314),i(71169)),u=i(30407),d=i(62300),h=i(36657),p=i(78506),c=i(97663),f=i(29299),y=i(90858),m=i(84675),g=i(24292);let _=s=class extends c.Z{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(t=>"image"===t.type?f.Z.fromJSON(t):"barchart"===t.type?h.Z.fromJSON(t):"columnchart"===t.type?p.Z.fromJSON(t):"linechart"===t.type?y.Z.fromJSON(t):"piechart"===t.type?m.Z.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(t,r){r.mediaInfos=t&&t.map(t=>t.toJSON())}clone(){return new s((0,o.d9)({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};(0,n._)([(0,a.Cb)()],_.prototype,"activeMediaInfoIndex",void 0),(0,n._)([(0,a.Cb)({type:Object,json:{write:!0}})],_.prototype,"attributes",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],_.prototype,"description",void 0),(0,n._)([(0,a.Cb)({types:[g.V]})],_.prototype,"mediaInfos",void 0),(0,n._)([(0,l.r)("mediaInfos")],_.prototype,"readMediaInfos",null),(0,n._)([(0,d.c)("mediaInfos")],_.prototype,"writeMediaInfos",null),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],_.prototype,"title",void 0),(0,n._)([(0,a.Cb)({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],_.prototype,"type",void 0);let b=_=s=(0,n._)([(0,u.j)("esri.popup.content.MediaContent")],_)},84675:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(38440),u=i(30696);let d=s=class extends l.Z{constructor(t){super(t),this.type="pie-chart"}clone(){return new s({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,n._)([(0,o.Cb)({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:u.l.write}})],d.prototype,"type",void 0);let h=d=s=(0,n._)([(0,a.j)("esri.popup.content.PieChartMediaInfo")],d)},29978:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s=i(24765),n=i(34577),o=i(53919),a=(i(99950),i(21314)),l=i(30407),u=i(97663),d=i(62799);let h=class extends(0,n.J)(u.Z){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};(0,s._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"description",void 0),(0,s._)([(0,o.Cb)({type:Number,json:{type:a.z8,write:!0}})],h.prototype,"displayCount",void 0),(0,s._)([(0,o.Cb)({type:["list"],json:{write:!0}})],h.prototype,"displayType",void 0),(0,s._)([(0,o.Cb)({type:[d.Z],json:{write:!0}})],h.prototype,"orderByFields",void 0),(0,s._)([(0,o.Cb)({type:Number,json:{type:a.z8,write:!0}})],h.prototype,"relationshipId",void 0),(0,s._)([(0,o.Cb)({type:String,json:{write:!0}})],h.prototype,"title",void 0),(0,s._)([(0,o.Cb)({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],h.prototype,"type",void 0);let p=h=(0,s._)([(0,l.j)("esri.popup.content.RelationshipContent")],h)},65081:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(97663);let u=s=class extends l.Z{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new s({text:this.text})}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],u.prototype,"text",void 0),(0,n._)([(0,o.Cb)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],u.prototype,"type",void 0);let d=u=s=(0,n._)([(0,a.j)("esri.popup.content.TextContent")],u)},38440:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(63886),u=i(72140),d=i(59118),h=i(8330);let p=s=class extends u.wq{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new s({fields:(0,d.d9)(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};(0,n._)([(0,o.Cb)({type:[String],json:{write:!0}})],p.prototype,"fields",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],p.prototype,"normalizeField",void 0),(0,n._)([(0,o.Cb)({type:[h.Z],json:{read:!1}})],p.prototype,"series",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],p.prototype,"tooltipField",void 0);let c=p=s=(0,n._)([(0,a.j)("esri.popup.content.support.ChartMediaInfoValue")],p),f=class extends l.Z{constructor(t){super(t),this.type=null,this.value=null}};(0,n._)([(0,o.Cb)({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],f.prototype,"type",void 0),(0,n._)([(0,o.Cb)({type:c,json:{write:!0}})],f.prototype,"value",void 0);let y=f=(0,n._)([(0,a.j)("esri.popup.content.mixins.ChartMediaInfo")],f)},63886:(t,r,i)=>{"use strict";i.d(r,{Z:()=>u});var s=i(24765),n=i(72140),o=i(53919),a=(i(99950),i(21314),i(30407));let l=class extends n.wq{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};(0,s._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"altText",void 0),(0,s._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"caption",void 0),(0,s._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"title",void 0),(0,s._)([(0,o.Cb)({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0);let u=l=(0,s._)([(0,a.j)("esri.popup.content.mixins.MediaInfo")],l)},8330:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(53306),a=i(53919),l=(i(99950),i(21314),i(30407));let u=s=class extends o.Z{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new s({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};(0,n._)([(0,a.Cb)()],u.prototype,"fieldName",void 0),(0,n._)([(0,a.Cb)()],u.prototype,"tooltip",void 0),(0,n._)([(0,a.Cb)()],u.prototype,"value",void 0);let d=u=s=(0,n._)([(0,l.j)("esri.popup.content.support.ChartMediaInfoValueSeries")],u)},30696:(t,r,i)=>{"use strict";i.d(r,{l:()=>s});let s=(0,i(84576).w)()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})},24292:(t,r,i)=>{"use strict";i.d(r,{V:()=>u});var s=i(36657),n=i(78506),o=i(29299),a=i(90858),l=i(84675);let u={base:i(63886).Z,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":s.Z,"column-chart":n.Z,"line-chart":a.Z,"pie-chart":l.Z,image:o.Z}}},71624:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s=i(24765);let n=(0,i(84576).w)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});n.toJSON.bind(n),n.fromJSON.bind(n);var o,a=i(72140),l=i(53919),u=(i(99950),i(21314)),d=i(21374),h=i(30407),p=i(18368),c=i(90631);let f=o=class extends a.wq{constructor(t){super(t),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new o({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(t){return this.dateFormat?(0,p.p6)(t,{...(0,p.Ze)(this.dateFormat),...this.dateTimeFormatOptions}):(0,c.uf)(t,(0,c.sh)(this))}formatRasterPixelValue(t){let r,i;return t.includes("-")?t:t.trim().includes(",")?(i=(r=",")+" ",this._formatDelimitedString(t,r,i,this)):t.trim().includes(";")?(i=(r=";")+" ",this._formatDelimitedString(t,r,i,this)):t.trim().includes(" ")?(r=i=" ",this._formatDelimitedString(t,r,i,this)):this.format(Number(t))}_formatDelimitedString(t,r,i,s){return t&&r&&i&&s?t.trim().split(r).map(t=>this.format(Number(t))).join(i):t}};(0,s._)([(0,d.J)(n)],f.prototype,"dateFormat",void 0),(0,s._)([(0,l.Cb)({type:Object,json:{read:!1}})],f.prototype,"dateTimeFormatOptions",void 0),(0,s._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"digitSeparator",void 0),(0,s._)([(0,l.Cb)({type:u.z8,json:{write:!0}})],f.prototype,"places",void 0);let y=f=o=(0,s._)([(0,h.j)("esri.popup.support.FieldInfoFormat")],f)},62799:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407));let u=s=class extends o.wq{constructor(t){super(t),this.field=null,this.order=null}clone(){return new s({field:this.field,order:this.order})}};(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"field",void 0),(0,n._)([(0,a.Cb)({type:["asc","desc"],json:{write:!0}})],u.prototype,"order",void 0);let d=u=s=(0,n._)([(0,l.j)("esri.popup.support.RelatedRecordsInfoFieldOrder")],u)},13725:(t,r,i)=>{"use strict";let s;i.d(r,{Z:()=>P});var n=i(24765),o=i(10242),a=i(49869),l=i(57837),u=i(12790),d=i(72140),h=i(63878),p=i(82639),c=i(66138),f=i(53919),y=(i(99950),i(21314)),m=i(71169),g=i(30407),_=i(18721),b=i(11284),v=i(75032),w=i(53306);let C=class extends w.Z{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};(0,n._)([(0,f.Cb)()],C.prototype,"nextQueryParams",void 0),(0,n._)([(0,f.Cb)()],C.prototype,"queryParams",void 0),(0,n._)([(0,f.Cb)()],C.prototype,"results",void 0),(0,n._)([(0,f.Cb)()],C.prototype,"total",void 0);let S=C=(0,n._)([(0,g.j)("esri.portal.PortalQueryResult")],C);var x,M=i(91997),I=i(2037);let E={PortalGroup:()=>Promise.resolve().then(i.bind(i,72013)),PortalItem:()=>Promise.resolve().then(i.bind(i,73640)),PortalUser:()=>Promise.resolve().then(i.bind(i,91997))},T=x=class extends(0,d.eC)(h.Z){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=o.Z.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return"string"==typeof t?{url:t}:t}destroy(){this._esriIdCredentialCreateHandle=(0,p.hw)(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(let r of t)o.Z.request.trustedServers.includes(r)||o.Z.request.trustedServers.push(r);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){let t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){let r=t.indexOf("/sharing");t=(r>0?t.substring(0,r):this.url.replace(/\/+$/,""))+"/sharing/rest"}return t}get thumbnailUrl(){let t=this.restUrl,r=this.thumbnail;return t&&r?this._normalizeSSL(t+"/portals/self/resources/"+r):null}readUrlKey(t){return t?t.toLowerCase():t}readUser(t){let r=null;return t&&((r=M.default.fromJSON(t)).portal=this),r}load(t){let r=Promise.resolve().then(i.bind(i,27832)).then(({default:r})=>{(0,c.k_)(t),s=r}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,t)).then(t=>{if(a.id){let t=a.id;this.credential=t.findCredential(this.restUrl),this.credential||this.authMode!==x.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle=t.on("credential-create",()=>{t.findCredential(this.restUrl)&&this._signIn().catch(()=>{})}))}this.sourceJSON=t,this.read(t)});return this.addResolvingPromise(r),Promise.resolve(this)}async createElevationLayers(){await this.load();let t=this._getHelperService("defaultElevationLayers"),r=(await i.e(6848).then(i.bind(i,56848))).default;return t?t.map(t=>new r({id:t.id,url:t.url})):[]}fetchBasemaps(t,r){let i=new v.Z;return i.query=t||(o.Z.apiKey&&(0,I.r)(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,r).then(t=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',t.total){let s=t.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,r)}return null}).then(t=>t&&t.total?t.results.filter(t=>"Web Map"===t.type).map(t=>new s({portalItem:t})):[])}fetchCategorySchema(t){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",t).then(t=>t.categorySchema):(0,c.Hc)(t)?Promise.reject((0,c.zE)()):Promise.resolve([])}fetchFeaturedGroups(t){let r=this.featuredGroups,i=new v.Z;if(i.num=100,i.sortField="title",r&&r.length){let s=[];for(let t of r)s.push(`(title:"${t.title}" AND owner:${t.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,t).then(t=>t.results)}return(0,c.Hc)(t)?Promise.reject((0,c.zE)()):Promise.resolve([])}fetchRegions(t){let r=this.user?.culture||this.culture||(0,b.Kd)();return this._request(this.restUrl+"/portals/regions",{...t,query:{culture:r}})}fetchSettings(t){let r=this.user?.culture||this.culture||(0,b.Kd)();return this._request(this.restUrl+"/portals/self/settings",{...t,query:{culture:r}})}static getDefault(){return x._default&&!x._default.destroyed||(x._default=new x),x._default}queryGroups(t,r){return this._queryPortal("/community/groups",t,"PortalGroup",r)}queryItems(t,r){return this._queryPortal("/search",t,"PortalItem",r)}queryUsers(t,r){return t.sortField||(t.sortField="username"),this._queryPortal("/community/users",t,"PortalUser",r)}toJSON(){throw new u.Z("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw Error("JSON object is already hydrated");return new x({sourceJSON:t})}_getHelperService(t){let r=this.helperServices&&this.helperServices[t];if(!r)throw new u.Z("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return r}_getHelperServiceUrl(t){let r=this._getHelperService(t);if(!r?.url)throw new u.Z("portal:service-url-not-found",`The \`helperServices\` entry "${t}" does not include a \`url\` value`);return r.url}_fetchSelf(t=this.authMode,r=!1,i){let s=this.restUrl+"/portals/self",n={authMode:t,query:{culture:(0,b.Kd)().toLowerCase()},...i};return"auto"===n.authMode&&(n.authMode="no-prompt"),r&&(n.query.default=!0),this._request(s,n)}_queryPortal(t,r,i,s){let n=(0,y.se)(v.Z,r),o=r=>this._request(this.restUrl+t,{...n.toRequestOptions(this),...s}).then(t=>{let i=n.clone();return i.start=t.nextStart,new S({nextQueryParams:i,queryParams:n,total:t.total,results:x._resultsToTypedArray(r,{portal:this},t,s)})}).then(t=>Promise.all(t.results.map(r=>"function"==typeof r.when?r.when():t)).then(()=>t,r=>((0,c.r9)(r),t)));return i&&E[i]?E[i]().then(({default:t})=>((0,c.k_)(s),o(t))):o()}_signIn(){if(this.authMode===x.AUTH_MODE_ANONYMOUS)return Promise.reject(new u.Z("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);let t=t=>Promise.resolve().then(()=>"not-loaded"===this.loadStatus?(t||(this.authMode="immediate"),this.load().then(()=>null)):"loading"===this.loadStatus?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(t=>{t&&(this.sourceJSON=t,this.read(t))});return a.id?a.id.getCredential(this.restUrl).then(r=>t(r)):t(this.credential)}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(t){let r=this.credential&&this.credential.token;return this._normalizeSSL(r?t+(t.includes("?")?"&":"?")+"token="+r:t)}_requestToTypedArray(t,r,i){return this._request(t,r).then(t=>{let r=x._resultsToTypedArray(i,{portal:this},t);return Promise.all(r.map(r=>"function"==typeof r.when?r.when():t)).then(()=>r,()=>r)})}_readBasemap(t){if(t){let r=s.fromJSON(t);return r.portalItem={portal:this},r}return null}_request(t,r={}){let i={f:"json",...r.query},{authMode:s=this.authMode===x.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:o=!1,method:a="auto",responseType:u="json",signal:d}=r;return(0,l.default)(this._normalizeSSL(t),{authMode:s,body:n,cacheBust:o,method:a,query:i,responseType:u,timeout:0,signal:d}).then(t=>t.data)}static _resultsToTypedArray(t,r,i,s){let n;if(i){let o=(0,p.pC)(s)?s.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||r)&&(n=n.map(i=>{let s=Object.assign(t?t.fromJSON(i):i,r);return"function"==typeof s.load&&s.load(o),s}))}else n=[];return n}};T.AUTH_MODE_ANONYMOUS="anonymous",T.AUTH_MODE_AUTO="auto",T.AUTH_MODE_IMMEDIATE="immediate",(0,n._)([(0,f.Cb)()],T.prototype,"access",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"allSSL",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"authMode",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"authorizedCrossOriginDomains",void 0),(0,n._)([(0,m.r)("authorizedCrossOriginDomains")],T.prototype,"readAuthorizedCrossOriginDomains",null),(0,n._)([(0,f.Cb)()],T.prototype,"basemapGalleryGroupQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"bingKey",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"canListApps",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"canListData",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"canListPreProvisionedItems",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"canProvisionDirectPurchase",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"canSearchPublic",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"canShareBingPublic",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"canSharePublic",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"canSignInArcGIS",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"canSignInIDP",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"colorSetsGroupQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"commentsEnabled",void 0),(0,n._)([(0,f.Cb)({type:Date})],T.prototype,"created",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"credential",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"culture",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"currentVersion",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"customBaseUrl",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"defaultBasemap",void 0),(0,n._)([(0,m.r)("defaultBasemap")],T.prototype,"readDefaultBasemap",null),(0,n._)([(0,f.Cb)()],T.prototype,"defaultDevBasemap",void 0),(0,n._)([(0,m.r)("defaultDevBasemap")],T.prototype,"readDefaultDevBasemap",null),(0,n._)([(0,f.Cb)({type:_.Z})],T.prototype,"defaultExtent",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"defaultVectorBasemap",void 0),(0,n._)([(0,m.r)("defaultVectorBasemap")],T.prototype,"readDefaultVectorBasemap",null),(0,n._)([(0,f.Cb)()],T.prototype,"description",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"devBasemapGalleryGroupQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"eueiEnabled",void 0),(0,n._)([(0,f.Cb)({readOnly:!0})],T.prototype,"extraQuery",null),(0,n._)([(0,f.Cb)()],T.prototype,"featuredGroups",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"featuredItemsGroupQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"galleryTemplatesGroupQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"livingAtlasGroupQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"hasCategorySchema",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"helpBase",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"helperServices",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"helpMap",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"homePageFeaturedContent",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"homePageFeaturedContentCount",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"httpPort",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"httpsPort",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"id",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"ipCntryCode",void 0),(0,n._)([(0,f.Cb)({readOnly:!0})],T.prototype,"isOrganization",null),(0,n._)([(0,f.Cb)()],T.prototype,"isPortal",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"isReadOnly",void 0),(0,n._)([(0,f.Cb)({readOnly:!0})],T.prototype,"itemPageUrl",null),(0,n._)([(0,f.Cb)()],T.prototype,"layerTemplatesGroupQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"maxTokenExpirationMinutes",void 0),(0,n._)([(0,f.Cb)({type:Date})],T.prototype,"modified",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"name",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"portalHostname",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"portalMode",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"portalProperties",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"region",void 0),(0,n._)([(0,f.Cb)({readOnly:!0})],T.prototype,"restUrl",null),(0,n._)([(0,f.Cb)()],T.prototype,"rotatorPanels",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"showHomePageDescription",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"sourceJSON",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"staticImagesUrl",void 0),(0,n._)([(0,f.Cb)({json:{name:"2DStylesGroupQuery"}})],T.prototype,"stylesGroupQuery2d",void 0),(0,n._)([(0,f.Cb)({json:{name:"stylesGroupQuery"}})],T.prototype,"stylesGroupQuery3d",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"supportsHostedServices",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"symbolSetsGroupQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"templatesGroupQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"thumbnail",void 0),(0,n._)([(0,f.Cb)({readOnly:!0})],T.prototype,"thumbnailUrl",null),(0,n._)([(0,f.Cb)()],T.prototype,"units",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"url",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"urlKey",void 0),(0,n._)([(0,m.r)("urlKey")],T.prototype,"readUrlKey",null),(0,n._)([(0,f.Cb)()],T.prototype,"user",void 0),(0,n._)([(0,m.r)("user")],T.prototype,"readUser",null),(0,n._)([(0,f.Cb)()],T.prototype,"useStandardizedQuery",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"useVectorBasemaps",void 0),(0,n._)([(0,f.Cb)()],T.prototype,"vectorBasemapGalleryGroupQuery",void 0);let P=T=x=(0,n._)([(0,g.j)("esri.portal.Portal")],T)},72013:(t,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>c});var s=i(24765),n=i(12790),o=i(72140),a=i(82639),l=i(53919),u=(i(99950),i(21314)),d=i(30407),h=i(75032);let p=class extends o.wq{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){let t=this.url,r=this.thumbnail;return t&&r&&this.portal?this.portal?._normalizeUrl(`${t}/info/${r}?f=json`):null}get url(){let t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return(0,a.s3)(this.portal)._request(this.url+"/categorySchema",t).then(r=>{let i=r.categorySchema||[];return i.some(t=>"contentCategorySetsGroupQuery.LivingAtlas"===t.source)?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return(0,a.s3)(this.portal)._request(this.url+"/users",t)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}toJSON(){throw new n.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,r){let i=(0,u.se)(h.Z,t),s=(0,a.s3)(this.portal);return parseFloat(s.currentVersion)>5?(i=i||new h.Z,s._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",r)):((i=i?i.clone():new h.Z).query="group:"+this.id+(i.query?" "+i.query:""),s.queryItems(i,r))}_fetchCategorySchemaSet(t,r){let i=(0,a.s3)(this.portal);return i._fetchSelf(i.authMode,!0,r).then(t=>{let s=t.contentCategorySetsGroupQuery;if(s){let t=new h.Z;return t.disableExtraQuery=!0,t.num=1,t.query=s,i.queryGroups(t,r)}throw new n.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){let s=i.results[0],n=new h.Z;return n.num=1,n.query=`typekeywords:"${t}"`,s.queryItems(n,r)}throw new n.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(t=>t.total?t.results[0].fetchData("json",r).then(t=>{let r=t&&t.categorySchema;return r&&r.length?r:[]}):[])}};(0,s._)([(0,l.Cb)()],p.prototype,"access",void 0),(0,s._)([(0,l.Cb)({type:Date})],p.prototype,"created",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"description",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"id",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"isInvitationOnly",void 0),(0,s._)([(0,l.Cb)({type:Date})],p.prototype,"modified",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"owner",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"portal",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"snippet",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"sortField",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"sortOrder",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"tags",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"thumbnail",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],p.prototype,"thumbnailUrl",null),(0,s._)([(0,l.Cb)()],p.prototype,"title",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],p.prototype,"url",null);let c=p=(0,s._)([(0,d.j)("esri.portal.PortalGroup")],p)},73640:(t,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>P});var s,n=i(24765),o=i(6487),a=i(12790),l=i(72140),u=i(59118),d=i(63878),h=i(82639),p=i(82583),c=i(53919),f=i(21314),y=i(71169),m=i(30407),g=i(18721),_=i(13725),b=i(53306),v=i(66150),w=(i(99950),i(36844));let C=class extends b.Z{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t&&t.portalItem&&t.path?{...t,path:this._normalizePath(t.path,t.portalItem)}:t}set path(t){(0,h.pC)(t)&&(0,p.YP)(t)?v.Z.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return this._normalizePath(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){let i=this.url;if((0,h.Wi)(i))throw new a.Z("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:t,query:{token:this.portalItem.apiKey},signal:(0,h.U2)(r,"signal")})}async update(t,r){return(await i.e(7866).then(i.bind(i,27866))).addOrUpdateResource(this,"update",t,r)}hasPath(){return(0,h.pC)(this.path)}_normalizePath(t,r){return(0,h.Wi)(t)?t:(t=t.replace(/^\/+/,""),(0,h.pC)(r)&&(0,p.YP)(t)&&(t=(0,p.PF)(t,r.itemUrl)),t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};(0,n._)([(0,c.Cb)()],C.prototype,"portalItem",void 0),(0,n._)([(0,c.Cb)({type:String,value:null})],C.prototype,"path",null),(0,n._)([(0,w.p)("path")],C.prototype,"_castPath",null),(0,n._)([(0,c.Cb)({type:String,readOnly:!0})],C.prototype,"url",null),(0,n._)([(0,c.Cb)({type:String,readOnly:!0})],C.prototype,"itemRelativeUrl",null);let S=C=(0,n._)([(0,m.j)("esri.portal.PortalItemResource")],C),x=class extends b.Z{constructor(t){super(t),this.created=null,this.rating=null}};(0,n._)([(0,c.Cb)()],x.prototype,"created",void 0),(0,n._)([(0,c.Cb)()],x.prototype,"rating",void 0);let M=x=(0,n._)([(0,m.j)("esri.portal.PortalRating")],x),I=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),E=new Set(["KML","GeoJson","CSV"]),T=s=class extends(0,l.eC)(d.Z){constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(t){return(0,f.TJ)(s,t)}destroy(){this.portal=null}get displayName(){let t=this.type,r=this.typeKeywords||[],i=t;return"Feature Service"===t||"Feature Collection"===t?i=r.includes("Table")?"Table":r.includes("Route Layer")?"Route Layer":r.includes("Markup")?"Markup":"Feature Layer":"Image Service"===t?i=r.includes("Elevation 3D Layer")?"Elevation Layer":r.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===t?i="Scene Layer":"Video Service"===t?i="Video Layer":"Scene Package"===t?i="Scene Layer Package":"Stream Service"===t?i="Feature Layer":"Geoprocessing Service"===t&&this.portal&&this.portal.isPortal?i=r.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===t?i="Locator":"Geoenrichment Service"===t?i="GeoEnrichment Service":"Microsoft Powerpoint"===t?i="Microsoft PowerPoint":"GeoJson"===t?i="GeoJSON":"Globe Service"===t?i="Globe Layer":"Vector Tile Service"===t?i="Tile Layer":"netCDF"===t?i="NetCDF":"Map Service"===t?i=r.includes("Spatiotemporal")||!r.includes("Hosted Service")&&!r.includes("Tiled")||r.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===t?i="Big Data File Share":"Compact Tile Package"===t?i="Tile Package (tpkx)":"OGCFeatureServer"===t?i="OGC Feature Layer":"web mapping application"===t&&r.includes("configurableApp")&&(i="Instant App"),i}readExtent(t){return t&&t.length?new g.Z(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){let t=this.type&&this.type.toLowerCase()||"",r=this.typeKeywords||[],i,s=!1,n=!1,a=!1,l=!1,u=!1,d=!1;return t.indexOf("service")>0||"feature collection"===t||"kml"===t||"wms"===t||"wmts"===t||"wfs"===t?(s=r.includes("Hosted Service"),"feature service"===t||"feature collection"===t||"kml"===t||"wfs"===t?(n=r.includes("Table"),a=r.includes("Route Layer"),l=r.includes("Markup"),u=r.includes("Spatiotemporal"),d=r.includes("UtilityNetwork"),i=u&&n?"spatiotemporaltable":n?"table":a?"routelayer":l?"markup":u?"spatiotemporal":s?"featureshosted":d?"utilitynetwork":"features"):i="map service"===t||"wms"===t||"wmts"===t?s||r.includes("Tiled")||"wmts"===t?"maptiles":"mapimages":"scene service"===t?r.includes("Line")?"sceneweblayerline":r.includes("3DObject")?"sceneweblayermultipatch":r.includes("Point")?"sceneweblayerpoint":r.includes("IntegratedMesh")?"sceneweblayermesh":r.includes("PointCloud")?"sceneweblayerpointcloud":r.includes("Polygon")?"sceneweblayerpolygon":r.includes("Building")?"sceneweblayerbuilding":r.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===t?r.includes("Elevation 3D Layer")?"elevationlayer":r.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===t?"streamlayer":"video service"===t?"mediaservice":"vector tile service"===t?"vectortile":"datastore catalog service"===t?"datastorecollection":"geocoding service"===t?"geocodeservice":"geoprocessing service"===t?r.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"geodata service"===t?"geodataservice":"layers"):i="web map"===t||"cityengine web scene"===t?"maps":"web scene"===t?r.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===t&&r.includes("configurableApp")?"instantapps":"web mapping application"===t||"mobile application"===t||"application"===t||"operation view"===t||"desktop application"===t?"apps":"map document"===t||"map package"===t||"published map"===t||"scene document"===t||"globe document"===t||"basemap package"===t||"mobile basemap package"===t||"mobile map package"===t||"project package"===t||"project template"===t||"pro map"===t||"layout"===t||"layer"===t&&r.includes("ArcGIS Pro")||"explorer map"===t&&r.indexOf("Explorer Document")?"mapsgray":"service definition"===t||"csv"===t||"shapefile"===t||"cad drawing"===t||"geojson"===t||"360 vr experience"===t||"netcdf"===t||"administrative report"===t?"datafiles":"explorer add in"===t||"desktop add in"===t||"windows viewer add in"===t||"windows viewer configuration"===t?"appsgray":"arcgis pro add in"===t||"arcgis pro configuration"===t?"addindesktop":"rule package"===t||"file geodatabase"===t||"sqlite geodatabase"===t||"csv collection"===t||"kml collection"===t||"windows mobile package"===t||"map template"===t||"desktop application template"===t||"gml"===t||"arcpad package"===t||"code sample"===t||"form"===t||"document link"===t||"earth configuration"===t||"operations dashboard add in"===t||"rules package"===t||"image"===t||"workflow manager package"===t||"explorer map"===t&&r.includes("Explorer Mapping Application")||r.includes("Document")?"datafilesgray":"network analysis service"===t||"geoprocessing service"===t||"geodata service"===t||"geometry service"===t||"geoprocessing package"===t||"locator package"===t||"geoprocessing sample"===t||"workflow manager service"===t?"toolsgray":"layer"===t||"layer package"===t||"explorer layer"===t?"layersgray":"scene package"===t?"scenepackage":"mobile scene package"===t?"mobilescenepackage":"tile package"===t||"compact tile package"===t?"tilepackage":"task file"===t?"taskfile":"report template"===t?"report-template":"statistical data collection"===t?"statisticaldatacollection":"insights workbook"===t?"workbook":"insights model"===t?"insightsmodel":"insights page"===t?"insightspage":"insights theme"===t?"insightstheme":"hub initiative"===t?"hubinitiative":"hubpage"===t?"hubpage":"hub event"===t?"hubevent":"hub site application"===t?"hubsite":"hub project"===t?"hubproject":"relational database connection"===t?"relationaldatabaseconnection":"big data file share"===t?"datastorecollection":"image collection"===t?"imagecollection":"style"===t?"style":"desktop style"===t?"desktopstyle":"dashboard"===t?"dashboard":"raster function template"===t?"rasterprocessingtemplate":"vector tile package"===t?"vectortilepackage":"ortho mapping project"===t?"orthomappingproject":"ortho mapping template"===t?"orthomappingtemplate":"solution"===t?"solutions":"geopackage"===t?"geopackage":"deep learning package"===t?"deeplearningpackage":"real time analytic"===t?"realtimeanalytics":"big data analytic"===t?"bigdataanalytics":"feed"===t?"feed":"excalibur imagery project"===t?"excaliburimageryproject":"notebook"===t?"notebook":"storymap"===t?"storymap":"survey123 add in"===t?"survey123addin":"mission"===t?"mission":"mission report"===t?"missionreport":"quickcapture project"===t?"quickcaptureproject":"pro report"===t?"proreport":"pro report template"===t?"proreporttemplate":"urban model"===t?"urbanmodel":"web experience"===t?"experiencebuilder":"web experience template"===t?"webexperiencetemplate":"experience builder widget"===t?"experiencebuilderwidget":"experience builder widget package"===t?"experiencebuilderwidgetpackage":"workflow"===t?"workflow":"insights script"===t?"insightsscript":"kernel gateway connection"===t?"kernelgatewayconnection":"hub initiative template"===t?"hubinitiativetemplate":"storymap theme"===t?"storymaptheme":"knowledge graph"===t?"knowledgegraph":"native application"===t?"nativeapp":"native application installer"===t?"nativeappinstaller":"link chart"===t?"linkchart":"investigation"===t?"investigation":"ogcfeatureserver"===t?"features":"pro project"===t?"proproject":"insights workbook package"===t?"insightsworkbookpackage":"apache parquet"===t?"apacheparquet":"notebook code snippets"===t||"notebook code snippet library"===t?"notebookcodesnippets":"suitability model"===t?"suitabilitymodel":"esri classifier definition"===t?"classifierdefinition":"esri classification schema"===t?"classificationschema":"insights data engineering workbook"===t?"dataengineeringworkbook":"insights data engineering model"===t?"dataengineeringmodel":"deep learning studio project"===t?"deeplearningproject":"discussion"===t?"discussion":"maps",i?(0,o.V)("esri/images/portal/"+i+"16.png"):null}get isLayer(){return null!=this.type&&I.has(this.type)}get itemPageUrl(){let t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){let t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){let t=this.itemUrl,r=this.thumbnail;return t&&r?this.portal?._normalizeUrl(`${t}/info/${r}?f=json`)??null:null}get userItemUrl(){let t=this.get("portal.restUrl");if(!t)return null;let r=this.owner||this.get("portal.user.username");return r?`${t}/content/users/${this.ownerFolder?`${r}/${this.ownerFolder}`:r}/items/${this.id}`:null}load(t){let r=this.portal??(this.portal=_.Z.getDefault()),i=r.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?r._request(this.itemUrl,{signal:(0,h.pC)(t)?t.signal:null,query:{token:this.apiKey}}):{}).then(t=>{this.sourceJSON=t,this.read(t)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){let r={method:"post",query:{}};return t instanceof M&&(t=t.rating),null==t||isNaN(t)||"number"!=typeof t||(r.query.rating=t),this.portal?(await this.portal._request(this.itemUrl+"/addRating",r),new M({rating:t,created:new Date})):null}clone(){let t={access:this.access,accessInformation:this.accessInformation,applicationProxies:(0,u.d9)(this.applicationProxies),avgRating:this.avgRating,categories:(0,u.d9)(this.categories),created:(0,u.d9)(this.created),culture:this.culture,description:this.description,extent:(0,u.d9)(this.extent),groupCategories:(0,u.d9)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:(0,u.d9)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:(0,u.d9)(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:(0,u.d9)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,u.d9)(this.typeKeywords),url:this.url};return this.loaded&&(t.loadStatus="loaded"),new s({sourceJSON:this.sourceJSON}).set(t)}createPostQuery(){let t=this.toJSON();for(let r of["tags","typeKeywords","categories"])t[r]&&(t[r]=t[r].join(", "));let{extent:r}=t;return r&&(t.extent=JSON.stringify(r)),t}async deleteRating(){await (0,h.s3)(this.portal)._request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",r){return(0,h.s3)(this.portal)._request(this.itemUrl+"/data",{responseType:t,...r,query:{token:this.apiKey}})}async fetchRating(t){let r=await (0,h.s3)(this.portal)._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return null!=r.rating?(r.created=new Date(r.created),new M(r)):null}fetchRelatedItems(t,r){return(0,h.s3)(this.portal)._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...r},s)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}reload(){return(0,h.s3)(this.portal)._request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>(0,h.s3)(this.portal)._signIn()).then(()=>{let r=t&&t.data,i={method:"post"};for(let t in i.query=this.createPostQuery(),i.query)null===i.query[t]&&(i.query[t]="");return i.query.clearEmptyFields=!0,null!=r&&("string"==typeof r?i.query.text=r:"object"==typeof r&&(i.query.text=JSON.stringify(r))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new a.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(t){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{let r=t.thumbnail,i=t.filename,s={method:"post"};if("string"==typeof r)(0,p.HK)(r)?s.query={data:r}:s.query={url:(0,p.hF)(r)},(0,h.pC)(i)&&(s.query.filename=i);else{let t=new FormData;(0,h.pC)(i)?t.append("file",r,i):t.append("file",r),s.body=t}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new a.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},r){return(await i.e(7866).then(i.bind(i,27866))).fetchResources(this,t,r)}async addResource(t,r,s){let n=await i.e(7866).then(i.bind(i,27866));return t.portalItem=this,n.addOrUpdateResource(t,"add",r,s)}async removeResource(t,r){let s=await i.e(7866).then(i.bind(i,27866));if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new a.Z("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return s.removeResource(this,t,r)}async removeAllResources(t){return(await i.e(7866).then(i.bind(i,27866))).removeAllResources(this,t)}resourceFromPath(t){return new S({portalItem:this,path:t})}toJSON(){let t=this.extent,r={accessInformation:this.accessInformation,categories:(0,u.d9)(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:(0,u.d9)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,u.d9)(this.typeKeywords),url:this.url};return(0,u.yd)(r)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw Error("JSON object is already hydrated");return new s({sourceJSON:t})}_getPostQuery(){let t=this.toJSON();for(let r in t)"tags"===r&&null!==t[r]&&(t[r]=t[r].join(", ")),"typeKeywords"===r&&null!==t[r]&&(t[r]=t[r].join(", ")),"extent"===r&&t[r]&&(t[r]=JSON.stringify(t[r]));return t}};(0,n._)([(0,c.Cb)({type:["private","shared","org","public"]})],T.prototype,"access",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"accessInformation",void 0),(0,n._)([(0,c.Cb)({type:String})],T.prototype,"apiKey",void 0),(0,n._)([(0,c.Cb)({json:{read:{source:"appProxies"}}})],T.prototype,"applicationProxies",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"avgRating",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"categories",void 0),(0,n._)([(0,c.Cb)({type:Date})],T.prototype,"created",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"culture",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"description",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],T.prototype,"displayName",null),(0,n._)([(0,c.Cb)({type:g.Z})],T.prototype,"extent",void 0),(0,n._)([(0,y.r)("extent")],T.prototype,"readExtent",null),(0,n._)([(0,c.Cb)()],T.prototype,"groupCategories",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],T.prototype,"iconUrl",null),(0,n._)([(0,c.Cb)()],T.prototype,"id",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],T.prototype,"isLayer",null),(0,n._)([(0,c.Cb)()],T.prototype,"itemControl",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],T.prototype,"itemPageUrl",null),(0,n._)([(0,c.Cb)({readOnly:!0})],T.prototype,"itemUrl",null),(0,n._)([(0,c.Cb)()],T.prototype,"licenseInfo",void 0),(0,n._)([(0,c.Cb)({type:Date})],T.prototype,"modified",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"name",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"numComments",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"numRatings",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"numViews",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"owner",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"ownerFolder",void 0),(0,n._)([(0,c.Cb)({type:_.Z})],T.prototype,"portal",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"screenshots",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"size",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"snippet",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"sourceJSON",void 0),(0,n._)([(0,c.Cb)({type:String})],T.prototype,"spatialReference",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"tags",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"thumbnail",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],T.prototype,"thumbnailUrl",null),(0,n._)([(0,c.Cb)()],T.prototype,"title",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"type",void 0),(0,n._)([(0,c.Cb)()],T.prototype,"typeKeywords",void 0),(0,n._)([(0,c.Cb)({type:String,json:{read(t,r){if(E.has(r.type)){let r=this.portal?.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],T.prototype,"url",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],T.prototype,"userItemUrl",null);let P=T=s=(0,n._)([(0,m.j)("esri.portal.PortalItem")],T)},75032:(t,r,i)=>{"use strict";i.d(r,{Z:()=>g});var s,n=i(24765),o=i(53306),a=i(84576),l=i(59118),u=i(82639),d=i(53919),h=(i(21314),i(30407)),p=i(18721),c=i(371),f=i(77056);let y=new a.X({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"}),m=s=class extends o.Z{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t)}clone(){return new s({categories:this.categories?(0,l.d9)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,r){let i,s;if(this.categories&&(i=this.categories.map(t=>Array.isArray(t)?JSON.stringify(t):t)),this.extent){let t=(0,f.iV)(this.extent,c.Z.WGS84);(0,u.pC)(t)&&(s=`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);let o={categories:i,bbox:s,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map(t=>y.toJSON(t.trim())).join(","),o.sortOrder=this.sortOrder),{query:{...r,...o}}}};(0,n._)([(0,d.Cb)()],m.prototype,"categories",void 0),(0,n._)([(0,d.Cb)()],m.prototype,"disableExtraQuery",void 0),(0,n._)([(0,d.Cb)({type:p.Z})],m.prototype,"extent",void 0),(0,n._)([(0,d.Cb)()],m.prototype,"filter",void 0),(0,n._)([(0,d.Cb)()],m.prototype,"num",void 0),(0,n._)([(0,d.Cb)()],m.prototype,"query",void 0),(0,n._)([(0,d.Cb)()],m.prototype,"sortField",void 0),(0,n._)([(0,d.Cb)()],m.prototype,"sortOrder",null),(0,n._)([(0,d.Cb)()],m.prototype,"start",void 0);let g=m=s=(0,n._)([(0,h.j)("esri.portal.PortalQueryParams")],m)},91997:(t,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>f});var s=i(24765),n=i(12790),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407));let u=class extends o.wq{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){let t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new n.Z("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};(0,s._)([(0,a.Cb)({type:Date})],u.prototype,"created",void 0),(0,s._)([(0,a.Cb)()],u.prototype,"id",void 0),(0,s._)([(0,a.Cb)()],u.prototype,"portal",void 0),(0,s._)([(0,a.Cb)()],u.prototype,"title",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],u.prototype,"url",null),(0,s._)([(0,a.Cb)()],u.prototype,"username",void 0);let d=u=(0,s._)([(0,l.j)("esri.portal.PortalFolder")],u);var h,p=i(72013);let c=h=class extends o.wq{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){let t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get userContentUrl(){let t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){let t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){let r=t&&t.item,i=t&&t.data,s=t&&t.folder,n={method:"post"};r&&(n.query=r.createPostQuery(),null!=i&&("string"==typeof i?n.query.text=i:"object"==typeof i&&(n.query.text=JSON.stringify(i))));let o=this.userContentUrl;return s&&(o+="/"+("string"==typeof s?s:s.id)),this.portal._request(o+"/addItem",n).then(t=>(r.id=t.id,r.portal=this.portal,r.loaded?r.reload():r.load()))}deleteItem(t){let r=this.userContentUrl;return t.ownerFolder&&(r+="/"+t.ownerFolder),this.portal._request(r+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){let r=this.userContentUrl+"/deleteItems",i=t.map(t=>t.id);if(i.length){let s={method:"post",query:{items:i.join(",")}};return this.portal._request(r,s).then(()=>{t.forEach(t=>{t.id=null,t.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){return this.portal._request(this.userContentUrl??"",{query:{num:1}}).then(t=>t&&t.folders?t.folders.map(t=>{let r=d.fromJSON(t);return r.portal=this.portal,r}):[])}fetchGroups(){return this.portal._request(this.url??"").then(t=>t&&t.groups?t.groups.map(t=>{let r=p.default.fromJSON(t);return r.portal=this.portal,r}):[])}fetchItems(t){let r=t??{},s,n=this.userContentUrl??"";return r.folder&&(n+="/"+r.folder.id),Promise.resolve().then(i.bind(i,73640)).then(({default:t})=>{s=t;let i={folders:!1,num:r.num||10,start:r.start||1,sortField:r.sortField||"created",sortOrder:r.sortOrder||"asc"};return this.portal._request(n,{query:i})}).then(t=>{let r;return t&&t.items?Promise.all((r=t.items.map(t=>{let r=s.fromJSON(t);return r.portal=this.portal,r})).map(t=>t.load())).catch(t=>t).then(()=>({items:r,nextStart:t.nextStart,total:t.total})):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new p.default({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new n.Z("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new n.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw Error("JSON object is already hydrated");let r=new h;return r.sourceJSON=t,r.read(t),r}};(0,s._)([(0,a.Cb)()],c.prototype,"access",void 0),(0,s._)([(0,a.Cb)({type:Date})],c.prototype,"created",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"culture",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"description",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"email",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"favGroupId",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"fullName",void 0),(0,s._)([(0,a.Cb)({type:Date})],c.prototype,"modified",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"orgId",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"portal",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"preferredView",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"privileges",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"region",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"role",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"roleId",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"sourceJSON",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"thumbnail",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],c.prototype,"thumbnailUrl",null),(0,s._)([(0,a.Cb)()],c.prototype,"units",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],c.prototype,"userContentUrl",null),(0,s._)([(0,a.Cb)({readOnly:!0})],c.prototype,"url",null),(0,s._)([(0,a.Cb)()],c.prototype,"username",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"userType",void 0);let f=c=h=(0,s._)([(0,l.j)("esri.portal.PortalUser")],c)},36343:(t,r,i)=>{"use strict";i.d(r,{P:()=>a,a:()=>o});let s=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,n={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function o(t){let r=t?.match(s);if(!r)return null;let[,i,o,a]=r;if(!i)return null;let l=null,u=null,d=null,{devext:h,qaext:p,www:c}=n;if(o){if(l=i,a)switch(a.toLowerCase()){case"devext":({customBaseUrl:u,portalHostname:d}=h);break;case"qa":({customBaseUrl:u,portalHostname:d}=p);break;default:return null}else({customBaseUrl:u,portalHostname:d}=c)}else switch(i.toLowerCase()){case"devext":({customBaseUrl:u,portalHostname:d}=h);break;case"qaext":({customBaseUrl:u,portalHostname:d}=p);break;case"www":({customBaseUrl:u,portalHostname:d}=c);break;default:return null}return{customBaseUrl:u,isPortal:!1,portalHostname:d,urlKey:l}}function a(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}},20901:(t,r,i)=>{"use strict";i.d(r,{v:()=>s});let s=(0,i(84576).w)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},57969:(t,r,i)=>{"use strict";i.d(r,{Z:()=>A});var s,n=i(24765),o=i(98402),a=i(84576),l=i(59118),u=i(66150),d=i(82639),h=i(53919),p=i(36844),c=i(21374),f=i(71169),y=i(30407),m=i(62300),g=i(21314),_=i(99444),b=i(76744),v=i(94139),w=i(60056),C=i(72751),S=i(24757),x=i(79286);let M="percent-of-total",I="field",E=new a.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:M,esriNormalizeByField:I}),T=(0,g.se)(w.Z),P=s=class extends(0,v.W)(b.Z){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,r,i){if(!Array.isArray(t))return;let s=r.minValue;return t.map(t=>{let r=new w.Z;return r.read(t,i),null==r.minValue&&(r.minValue=s),null==r.maxValue&&(r.maxValue=r.minValue),s=r.maxValue,r})}writeClassBreakInfos(t,r,i,s){let n=t.map(t=>t.write({},s));this._areClassBreaksConsecutive()&&n.forEach(t=>delete t.classMinValue),r[i]=n}castField(t){return null==t?t:"function"==typeof t?(u.Z.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,g.Zs)(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType"),r=!!this.normalizationField,i=null!=this.normalizationTotal;return r||i?(t=(r?I:i&&M)||null,r&&i&&u.Z.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):t!==I&&t!==M||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,r,i){let s=null;s="number"==typeof t?new w.Z({minValue:t,maxValue:r,symbol:(0,o.se)(i)}):T((0,l.d9)(t)),this.classBreakInfos.push(s),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(t,r){let i=this.classBreakInfos.length;for(let s=0;s<i;s++){let i=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(i[0]===t&&i[1]===r){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(t,r){return this.valueExpression&&((0,d.Wi)(r)||(0,d.Wi)(r.arcade))&&u.Z.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,r):this._getBreakIndexForField(t)}async getClassBreakInfo(t,r){let i=r;this.valueExpression&&((0,d.Wi)(r)||(0,d.Wi)(r.arcade))&&(i={...i,arcade:await (0,x.LC)()});let s=this.getBreakIndex(t,i);return -1!==s?this.classBreakInfos[s]:null}getSymbol(t,r){if(this.valueExpression&&((0,d.Wi)(r)||(0,d.Wi)(r.arcade)))return void u.Z.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");let i=this.getBreakIndex(t,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,r){let i=r;if(this.valueExpression&&((0,d.Wi)(r)||(0,d.Wi)(r.arcade))){let t=await (0,x.LC)(),{arcadeUtils:r}=t;r.hasGeometryOperations(this.valueExpression)&&await r.enableGeometryOperations(),i={...i,arcade:t}}let s=this.getBreakIndex(t,i);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){let t=[];return this.classBreakInfos.forEach(r=>{r.symbol&&t.push(r.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,r)=>t+r.getAttributeHash(),"")}getMeshHash(){let t=JSON.stringify(this.backgroundFillSymbol),r=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${r}.${this.classBreakInfos.reduce((t,r)=>t+r.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new s({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,l.d9)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,l.d9)(this.visualVariables),legendOptions:(0,l.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,r){let i=[this.collectVVRequiredFields(t,r),this.collectSymbolFields(t,r)];await Promise.all(i)}async collectSymbolFields(t,r){let i=[...this.getSymbols().map(i=>i.collectRequiredFields(t,r)),(0,_.io)(t,r,this.valueExpression)];(0,_.AB)(t,r,this.field),(0,_.AB)(t,r,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,r){let{viewingMode:i,scale:s,spatialReference:n,arcade:o}=(0,d.Pt)(r,{}),{valueExpression:a}=this,l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null,u=(0,d.Wg)(o).arcadeUtils;if(!l){let t=u.createSyntaxTree(a);l=u.createFunction(t),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;let h=u.executeFunction(l,u.createExecContext(t,u.getViewInfo({viewingMode:i,scale:s,spatialReference:n})));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(t){let r=this.field,i=t.attributes,s=this.normalizationType,n=parseFloat(i[r]);if(s){let t=this.normalizationTotal,r=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if("log"===s)n=Math.log(n)*Math.LOG10E;else if(s!==M||null==t||isNaN(t)){if(s===I&&!isNaN(r)){if(isNaN(n)||isNaN(r))return -1;n/=r}}else n=n/t*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){let r=this.isMaxInclusive;if(null!=t&&"number"==typeof t&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){let s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]<=t&&(r?t<=s[1]:t<s[1]))return i}return -1}_areClassBreaksConsecutive(){let t=this.classBreakInfos,r=t.length;for(let i=1;i<r;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};(0,n._)([(0,h.Cb)(C.KK)],P.prototype,"backgroundFillSymbol",void 0),(0,n._)([(0,h.Cb)({type:[w.Z]})],P.prototype,"classBreakInfos",void 0),(0,n._)([(0,f.r)("classBreakInfos")],P.prototype,"readClassBreakInfos",null),(0,n._)([(0,m.c)("classBreakInfos")],P.prototype,"writeClassBreakInfos",null),(0,n._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"defaultLabel",void 0),(0,n._)([(0,h.Cb)(C.Gn)],P.prototype,"defaultSymbol",void 0),(0,n._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"field",void 0),(0,n._)([(0,p.p)("field")],P.prototype,"castField",null),(0,n._)([(0,h.Cb)({type:Boolean})],P.prototype,"isMaxInclusive",void 0),(0,n._)([(0,h.Cb)({type:S.I,json:{write:!0}})],P.prototype,"legendOptions",void 0),(0,n._)([(0,h.Cb)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],P.prototype,"minValue",null),(0,n._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"normalizationField",void 0),(0,n._)([(0,h.Cb)({type:Number,cast:t=>(0,g.q9)(t),json:{write:!0}})],P.prototype,"normalizationTotal",void 0),(0,n._)([(0,h.Cb)({type:E.apiValues,value:null,json:{type:E.jsonValues,read:E.read,write:E.write}})],P.prototype,"normalizationType",null),(0,n._)([(0,c.J)({classBreaks:"class-breaks"})],P.prototype,"type",void 0),(0,n._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"valueExpression",void 0),(0,n._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"valueExpressionTitle",void 0);let A=P=s=(0,n._)([(0,y.j)("esri.renderers.ClassBreaksRenderer")],P)},63535:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s,n=i(24765),o=i(59118),a=i(53919),l=(i(21314),i(30407)),u=i(62300),d=i(99444),h=i(76744),p=i(94139),c=i(13789);let f=s=class extends(0,p.W)(h.Z){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new c.DictionaryLoader(this.url,this.config,this.fieldMap)}writeData(t,r){t&&(r.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,r,i,s){s?.origin||super.writeVisualVariables(t,r,i,s)}clone(){return new s({config:(0,o.d9)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,o.d9)(this.fieldMap),url:(0,o.d9)(this.url),visualVariables:(0,o.d9)(this.visualVariables)})}async getSymbolAsync(t,r){return this._loader.getSymbolAsync(t,r)}async collectRequiredFields(t,r){for(let i in await this.collectVVRequiredFields(t,r),this.scaleExpression&&await (0,d.io)(t,r,this.scaleExpression),this.fieldMap){let s=this.fieldMap[i];r.has(s)&&t.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,r)=>t+r.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,n._)([(0,a.Cb)({type:c.DictionaryLoader})],f.prototype,"_loader",null),(0,n._)([(0,a.Cb)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],f.prototype,"config",void 0),(0,n._)([(0,a.Cb)({type:Object,json:{write:!0}})],f.prototype,"fieldMap",void 0),(0,n._)([(0,a.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],f.prototype,"scaleExpression",void 0),(0,n._)([(0,u.c)("scaleExpression")],f.prototype,"writeData",null),(0,n._)([(0,a.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],f.prototype,"scaleExpressionTitle",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],f.prototype,"url",void 0),(0,n._)([(0,u.c)("visualVariables")],f.prototype,"writeVisualVariables",null);let y=f=s=(0,n._)([(0,l.j)("esri.renderers.DictionaryRenderer")],f)},51661:(t,r,i)=>{"use strict";i.d(r,{Z:()=>C});var s,n=i(24765),o=i(55410),a=i(59118),l=i(53919),u=(i(21314),i(21374)),d=i(30407),h=i(99444),p=i(76744),c=i(94139),f=i(35957),y=i(72140);i(99950);let m=s=class extends y.wq{constructor(){super(...arguments),this.unit=null}clone(){return new s({unit:this.unit})}};(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],m.prototype,"unit",void 0);let g=m=s=(0,n._)([(0,d.j)("esri.renderers.support.DotDensityLegendOptions")],m);var _,b=i(59572),v=i(13395);let w=_=class extends(0,c.W)(p.Z){constructor(t){super(t),this.attributes=null,this.backgroundColor=new o.Z([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new v.Z,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(null==this.referenceScale)return this.dotValue;let r=t/this.referenceScale*this.dotValue;return r<1?1:r}getSymbol(){return new b.Z({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((t,r)=>t+r.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new _({attributes:(0,a.d9)(this.attributes),backgroundColor:(0,a.d9)(this.backgroundColor),dotBlendingEnabled:(0,a.d9)(this.dotBlendingEnabled),dotShape:(0,a.d9)(this.dotShape),dotSize:(0,a.d9)(this.dotSize),dotValue:(0,a.d9)(this.dotValue),legendOptions:(0,a.d9)(this.legendOptions),outline:(0,a.d9)(this.outline),referenceScale:(0,a.d9)(this.referenceScale),visualVariables:(0,a.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){let t=this.attributes?.map(t=>t.field||t.valueExpression||"");return`${t}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,r){for(let i of(await this.collectVVRequiredFields(t,r),this.attributes??[]))i.valueExpression&&await (0,h.io)(t,r,i.valueExpression),i.field&&t.add(i.field)}};(0,n._)([(0,l.Cb)({type:[f.Z],json:{write:!0}})],w.prototype,"attributes",void 0),(0,n._)([(0,l.Cb)({type:o.Z,json:{write:!0}})],w.prototype,"backgroundColor",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],w.prototype,"dotBlendingEnabled",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!1}})],w.prototype,"dotShape",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],w.prototype,"dotSize",void 0),(0,n._)([(0,l.Cb)({type:g,json:{write:!0}})],w.prototype,"legendOptions",void 0),(0,n._)([(0,l.Cb)({type:v.Z,json:{default:null,write:!0}})],w.prototype,"outline",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],w.prototype,"dotValue",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],w.prototype,"referenceScale",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],w.prototype,"seed",void 0),(0,n._)([(0,u.J)({dotDensity:"dot-density"})],w.prototype,"type",void 0);let C=w=_=(0,n._)([(0,d.j)("esri.renderers.DotDensityRenderer")],w)},29432:(t,r,i)=>{"use strict";i.d(r,{Z:()=>P});var s=i(24765),n=i(55410),o=(i(98402),i(8393)),a=i(59118),l=i(66150),u=i(57446),d=i(85098),h=i(53919),p=i(65233),c=(i(21314),i(21374)),f=i(30407),y=i(99444),m=i(76744),g=i(17225),_=i(72332),b=i(34577),v=i(72140);i(99950);let w=class extends(0,b.J)(v.wq){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],w.prototype,"minLabel",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],w.prototype,"maxLabel",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],w.prototype,"title",void 0),w=(0,s._)([(0,f.j)("esri.renderers.support.HeatmapLegendOptions")],w);var C,S=i(75558),x=i(11149);let M="esri.renderers.HeatmapRenderer",I=l.Z.getLogger(M);function E(t){if(null!=t){let{maxDensity:r,minDensity:i,radius:s}=t;if(null!=r||null!=i||null!=s){let{blurRadius:r,maxPixelIntensity:i,minPixelIntensity:s,...n}=t;return n}}return t}let T=C=class extends m.Z{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new _.Z({ratio:0,color:new n.Z("rgba(255, 140, 0, 0)")}),new _.Z({ratio:.75,color:new n.Z("rgba(255, 140, 0, 1)")}),new _.Z({ratio:.9,color:new n.Z("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return E(t)}get blurRadius(){return(0,S.AJ)(this.radius)}set blurRadius(t){let r=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",(0,S.k0)(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",r*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(S.nu**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,r){this._warnedProps[t]||"user"===(0,p.vw)(this).getDefaultOrigin()&&(this._warnedProps[t]=!0,(0,u.Os)(()=>{(0,o.Mr)(I,t,{replacement:`${String(r)} (suggested value: ${this._get(r)})`,version:"4.24"})}))}read(t,r){t=E(t),super.read(t,r)}getSymbol(){return new x.Z}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,r){let i=this.field,s=this.valueExpression;i&&"string"==typeof i&&await (0,y.AB)(t,r,i),s&&"string"==typeof s&&await (0,y.io)(t,r,s)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new C({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:(0,a.d9)(this.colorStops),field:this.field,legendOptions:(0,a.d9)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,s._)([(0,h.Cb)({type:g.Z,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],T.prototype,"authoringInfo",void 0),(0,s._)([(0,h.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],T.prototype,"blurRadius",null),(0,s._)([(0,h.Cb)({type:[_.Z],json:{write:!0}})],T.prototype,"colorStops",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],T.prototype,"field",void 0),(0,s._)([(0,h.Cb)({type:Number,json:{write:{overridePolicy:(t,r,i)=>({enabled:null==i})},origins:{"web-scene":{write:!1}}}})],T.prototype,"fieldOffset",void 0),(0,s._)([(0,h.Cb)({type:w,json:{write:!0}})],T.prototype,"legendOptions",void 0),(0,s._)([(0,h.Cb)({type:Number,json:{write:!0}})],T.prototype,"maxDensity",void 0),(0,s._)([(0,h.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],T.prototype,"maxPixelIntensity",null),(0,s._)([(0,h.Cb)({type:Number,json:{write:!0}})],T.prototype,"minDensity",void 0),(0,s._)([(0,h.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],T.prototype,"minPixelIntensity",null),(0,s._)([(0,h.Cb)({type:Number,cast:d.t_,json:{write:!0}})],T.prototype,"radius",void 0),(0,s._)([(0,h.Cb)({type:Number,range:{min:0},json:{default:0,write:!0}})],T.prototype,"referenceScale",void 0),(0,s._)([(0,c.J)({heatmap:"heatmap"})],T.prototype,"type",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],T.prototype,"valueExpression",void 0),(0,s._)([(0,h.Cb)({type:String})],T.prototype,"valueExpressionTitle",void 0),(0,s._)([(0,h.Cb)({readOnly:!0})],T.prototype,"_pixelIntensityToDensity",null);let P=T=C=(0,s._)([(0,f.j)(M)],T)},71260:(t,r,i)=>{"use strict";i.d(r,{Z:()=>S});var s=i(24765),n=i(55410),o=(i(98402),i(34577)),a=i(82639),l=i(85098),u=i(53919),d=(i(99950),i(21314),i(21374)),h=i(30407),p=i(99444),c=i(76744),f=i(94139),y=i(35957),m=i(72140);let g=class extends(0,o.J)(m.wq){constructor(){super(...arguments),this.color=new n.Z([0,0,0,0]),this.label=null,this.threshold=0}};(0,s._)([(0,u.Cb)({type:n.Z,json:{write:!0}})],g.prototype,"color",void 0),(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],g.prototype,"label",void 0),(0,s._)([(0,u.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],g.prototype,"threshold",void 0),g=(0,s._)([(0,h.j)("esri.renderers.support.OthersCategory")],g);let _=class extends(0,o.J)(m.wq){constructor(){super(...arguments),this.title=null}};(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],_.prototype,"title",void 0),_=(0,s._)([(0,h.j)("esri.renderers.support.PieChartLegendOptions")],_);var b=i(11149),v=i(59572),w=i(13395);let C=class extends(0,f.W)((0,o.J)(c.Z)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new n.Z([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new g,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new b.Z({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(a.pC)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,r)=>t+r.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,r)=>t+JSON.stringify(r),"")}async collectRequiredFields(t,r){for(let i of(await this.collectVVRequiredFields(t,r),this.attributes))i.valueExpression&&await (0,p.io)(t,r,i.valueExpression),i.field&&t.add(i.field)}};(0,s._)([(0,u.Cb)({type:[y.Z],json:{write:!0}})],C.prototype,"attributes",void 0),(0,s._)([(0,u.Cb)({type:v.Z,json:{default:null,write:!0}})],C.prototype,"backgroundFillSymbol",void 0),(0,s._)([(0,u.Cb)({type:n.Z,json:{write:!0}})],C.prototype,"defaultColor",void 0),(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],C.prototype,"defaultLabel",void 0),(0,s._)([(0,u.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],C.prototype,"holePercentage",void 0),(0,s._)([(0,u.Cb)({type:g,json:{write:!0}})],C.prototype,"othersCategory",void 0),(0,s._)([(0,u.Cb)({type:_,json:{write:!0}})],C.prototype,"legendOptions",void 0),(0,s._)([(0,u.Cb)({type:w.Z,json:{default:null,write:!0}})],C.prototype,"outline",void 0),(0,s._)([(0,u.Cb)({type:Number,cast:l.t_,json:{write:!0}})],C.prototype,"size",void 0),(0,s._)([(0,d.J)({pieChart:"pie-chart"})],C.prototype,"type",void 0);let S=C=(0,s._)([(0,h.j)("esri.renderers.PieChartRenderer")],C)},76744:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s=i(24765),n=i(84576),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(17225);let d=new n.X({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0}),h=class extends o.wq{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];let r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,s._)([(0,a.Cb)({type:u.Z,json:{write:!0}})],h.prototype,"authoringInfo",void 0),(0,s._)([(0,a.Cb)({type:d.apiValues,readOnly:!0,json:{type:d.jsonValues,read:!1,write:{writer:d.write,ignoreOrigin:!0}}})],h.prototype,"type",void 0);let p=h=(0,s._)([(0,l.j)("esri.renderers.Renderer")],h)},47513:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s,n=i(24765),o=i(59118),a=i(53919),l=(i(21314),i(21374)),u=i(30407),d=i(76744),h=i(94139),p=i(72751);let c=s=class extends(0,h.W)(d.Z){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,r){await Promise.all([this.collectSymbolFields(t,r),this.collectVVRequiredFields(t,r)])}async collectSymbolFields(t,r){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,r)))}getSymbol(t,r){return this.symbol}async getSymbolAsync(t,r){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,r)=>t+r.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,r)=>t+JSON.stringify(r),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new s({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:(0,o.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,n._)([(0,a.Cb)(p.Gn)],c.prototype,"symbol",void 0),(0,n._)([(0,l.J)({simple:"simple"})],c.prototype,"type",void 0);let f=c=s=(0,n._)([(0,u.j)("esri.renderers.SimpleRenderer")],c)},61885:(t,r,i)=>{"use strict";i.d(r,{Z:()=>B});var s=i(24765),n=i(98402),o=i(12790),a=i(59118),l=i(66150),u=i(82639),d=i(12619),h=i(67844),p=i(53919),c=i(36844),f=i(21374),y=i(71169),m=i(30407),g=i(62300),_=i(39417),b=i(21314),v=i(99444),w=i(13725),C=i(76744),S=i(94139),x=i(72751),M=i(24757),I=i(34577),E=i(72140);i(99950);let T=class extends(0,I.J)(E.wq){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};(0,s._)([(0,p.Cb)(x.GY)],T.prototype,"value",void 0),(0,s._)([(0,p.Cb)(x.GY)],T.prototype,"value2",void 0),(0,s._)([(0,p.Cb)(x.GY)],T.prototype,"value3",void 0);let P=T=(0,s._)([(0,m.j)("esri.renderers.support.UniqueValue")],T),A=class extends(0,I.J)(E.wq){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(null==t)return null;let r=typeof(t=Array.isArray(t)?t:[t])[0];return"string"===r||"number"===r?t.map(t=>new P({value:t})):"object"===r?t[0]instanceof P?t:t.map(t=>new P(t)):null}};(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],A.prototype,"description",void 0),(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],A.prototype,"label",void 0),(0,s._)([(0,p.Cb)(x.Gn)],A.prototype,"symbol",void 0),(0,s._)([(0,p.Cb)({type:[P],json:{type:[[String]],read:{reader:t=>t?t.map(t=>new P({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(t,r)=>{let i=[];for(let r of t){let t=[r.value,r.value2,r.value3].filter(u.pC).map(t=>t.toString());i.push(t)}r.values=i}}}})],A.prototype,"values",void 0),(0,s._)([(0,c.p)("values")],A.prototype,"castValues",null);let k=A=(0,s._)([(0,m.j)("esri.renderers.support.UniqueValueClass")],A),O=class extends(0,I.J)(E.wq){constructor(t){super(t),this.heading=null,this.classes=null}};(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],O.prototype,"heading",void 0),(0,s._)([(0,p.Cb)({type:[k],json:{write:!0}})],O.prototype,"classes",void 0);let R=O=(0,s._)([(0,m.j)("esri.renderers.support.UniqueValueGroup")],O);var L,F=i(12057),N=i(79286),j=i(80038),D=i(16433),Z=i(21950);let V="esri.renderers.UniqueValueRenderer",z=l.Z.getLogger(V),U="uvInfos-watcher",G="uvGroups-watcher",q=(0,b.se)(F.Z),$=L=class extends(0,S.W)(C.Z){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1,s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<r.length;n++){let o=t.find(t=>t.value===r[n].value);o?(0,_.Hg)(o,r[n])?(s.changed.push({type:"complete",oldValue:o,newValue:r[n]}),i=!0):s.unchanged.push({oldValue:o,newValue:r[n]}):(s.added.push(r[n]),i=!0)}for(let n=0;n<t.length;n++)r.find(r=>r.value===t[n].value)||(s.removed.push(t[n]),i=!0);return i?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return null==t||"function"==typeof t?t:(0,b.Zs)(t)}writeField(t,r,i,s){"string"==typeof t?r[i]=t:s&&s.messages?s.messages.push(new o.Z("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):z.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,r,i){return i.portal||w.Z.getDefault()}readStyleOrigin(t,r,i){return r.styleName?Object.freeze({styleName:r.styleName}):r.styleUrl?Object.freeze({styleUrl:(0,j.f)(r.styleUrl,i)}):void 0}writeStyleOrigin(t,r,i,s){t.styleName?r.styleName=t.styleName:t.styleUrl&&(r.styleUrl=(0,j.t)(t.styleUrl,s))}set uniqueValueGroups(t){this.styleOrigin?z.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?z.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,r){let i;if(this.styleOrigin)return void z.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");i="object"==typeof t?q(t):new F.Z({value:t,symbol:(0,n.se)(r)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void z.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r=this.uniqueValueInfos;if(r){for(let i=0;i<r.length;i++)if(r[i].value===t+""){delete this._valueInfoMap[t],r.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,r){let i=r;return this.valueExpression&&((0,u.Wi)(r)||(0,u.Wi)(r.arcade))&&(i={...i,arcade:await (0,N.LC)()}),this._getUniqueValueInfo(t,i)}getSymbol(t,r){if(this.valueExpression&&((0,u.Wi)(r)||(0,u.Wi)(r.arcade)))return void z.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");let i=this._getUniqueValueInfo(t,r);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,r){let i=r;if(this.valueExpression&&((0,u.Wi)(i)||(0,u.Wi)(i.arcade))){let t=await (0,N.LC)(),{arcadeUtils:r}=t;r.hasGeometryOperations(this.valueExpression)&&await r.enableGeometryOperations(),i={...i,arcade:t}}let s=this._getUniqueValueInfo(t,i);return s&&s.symbol||this.defaultSymbol}getSymbols(){let t=[];for(let r of this.uniqueValueInfos??[])r.symbol&&t.push(r.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,r)=>t+r.getAttributeHash(),"")}getMeshHash(){let t=JSON.stringify(this.backgroundFillSymbol),r=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce((t,r)=>t+r.getMeshHash(),"");return`${t}.${r}.${i}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){let t=new L({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,a.d9)(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,a.d9)(this.visualVariables),legendOptions:(0,a.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,a.d9)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);let r=(0,a.d9)(this.uniqueValueInfos),i=(0,a.d9)(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze((0,a.d9)(this.styleOrigin))),Object.freeze(r),Object.freeze(i)),t._set("uniqueValueInfos",r),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,r){let i=[this.collectVVRequiredFields(t,r),this.collectSymbolFields(t,r)];await Promise.all(i)}async collectSymbolFields(t,r){let i=[...this.getSymbols().map(i=>i.collectRequiredFields(t,r)),(0,v.io)(t,r,this.valueExpression)];(0,v.AB)(t,r,this.field),(0,v.AB)(t,r,this.field2),(0,v.AB)(t,r,this.field3),await Promise.all(i)}populateFromStyle(){return(0,D.n2)(this.styleOrigin,{portal:this.portal}).then(t=>{let r=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(i=>{let s=new Z.Z({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==t.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);let n=new F.Z({value:i.name,symbol:s});r.push(n),this._valueInfoMap[i.name]=n}),this._set("uniqueValueInfos",Object.freeze(r)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}_updateUniqueValues(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};let{uniqueValueInfos:t}=this;if(t)for(let r of t)this._valueInfoMap[r.value+""]=r}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(U);let{uniqueValueInfos:t}=this;if(t){let r=[];for(let i of t)r.push((0,h.YP)(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(t,r)=>{t!==r&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(r,U)}}_watchUniqueValueGroups(){this.removeHandles(G);let{uniqueValueGroups:t}=this;if(t){let r=[];for(let i of t)for(let t of(r.push((0,h.YP)(()=>({classes:i.classes}),(t,r)=>{t!==r&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0})),i.classes))r.push((0,h.YP)(()=>({symbol:t.symbol,values:t.values,label:t.label,description:t.description}),(t,r)=>{t!==r&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));this.addHandles(r,G)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();let t=[],{field:r,field2:i,field3:s,fieldDelimiter:n,uniqueValueGroups:o,valueExpression:a}=this;if(!r&&!a)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();let l=!(!r||!i);for(let r of o)for(let o of r.classes??[]){let{symbol:r,label:a,values:u,description:d}=o;for(let o of u??[]){let{value:u,value2:h,value3:p}=o,c=[u];i&&c.push(h),s&&c.push(p);let f=l?c.join(n||""):c[0];t.push(new F.Z({symbol:r,label:a,value:f,description:d}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();let{field:r,field2:i,valueExpression:s,fieldDelimiter:n,uniqueValueInfos:o}=this;if(!r&&!s||!o.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();let a=!(!r||!i),l=[new R({classes:o.map(t=>{let{symbol:r,label:i,value:s,description:o}=t,[l,u,d]=a?s?.toString()?.split(n||"")||[]:[s];return new k({symbol:r,label:i,description:o,values:[new P({value:l,value2:u,value3:d})]})})})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,r){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,r):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,r){let{viewingMode:i,scale:s,spatialReference:n,arcade:o}=(0,u.Pt)(r,{}),a=this._cache.compiledFunc,l=(0,u.Wg)(o).arcadeUtils;if(!a){let t=l.createSyntaxTree(this.valueExpression);a=l.createFunction(t),this._cache.compiledFunc=a}let d=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:s,spatialReference:n})));return this._valueInfoMap[d+""]}_getUnqiueValueInfoForFields(t){let r;let i=this.field,s=t.attributes;if("function"!=typeof i&&this.field2){let t=this.field2,n=this.field3,o=[];i&&o.push(s[i]),t&&o.push(s[t]),n&&o.push(s[n]),r=o.join(this.fieldDelimiter||"")}else"function"==typeof i?r=i(t):i&&(r=s[i]);return this._valueInfoMap[r+""]}static fromPortalStyle(t,r){let i=new L(r&&r.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",r&&r.portal||w.Z.getDefault());let s=i.populateFromStyle();return s.catch(r=>{z.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",r)}),s}static fromStyleUrl(t,r){let i=new L(r&&r.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));let s=i.populateFromStyle();return s.catch(r=>{z.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",r)}),s}};(0,s._)([(0,p.Cb)({readOnly:!0})],$.prototype,"_cache",null),(0,s._)([(0,f.J)({uniqueValue:"unique-value"})],$.prototype,"type",void 0),(0,s._)([(0,p.Cb)(x.KK)],$.prototype,"backgroundFillSymbol",void 0),(0,s._)([(0,p.Cb)({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],$.prototype,"field",null),(0,s._)([(0,c.p)("field")],$.prototype,"castField",null),(0,s._)([(0,g.c)("field")],$.prototype,"writeField",null),(0,s._)([(0,p.Cb)({type:String,value:null,json:{write:!0}})],$.prototype,"field2",null),(0,s._)([(0,p.Cb)({type:String,value:null,json:{write:!0}})],$.prototype,"field3",null),(0,s._)([(0,p.Cb)({type:String,value:null,json:{write:!0}})],$.prototype,"valueExpression",null),(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],$.prototype,"valueExpressionTitle",void 0),(0,s._)([(0,p.Cb)({type:M.I,json:{write:!0}})],$.prototype,"legendOptions",void 0),(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],$.prototype,"defaultLabel",void 0),(0,s._)([(0,p.Cb)((0,d.RH)({...x.Gn},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],$.prototype,"defaultSymbol",null),(0,s._)([(0,p.Cb)({type:String,value:null,json:{write:!0}})],$.prototype,"fieldDelimiter",null),(0,s._)([(0,p.Cb)({type:w.Z,readOnly:!0})],$.prototype,"portal",void 0),(0,s._)([(0,y.r)("portal",["styleName"])],$.prototype,"readPortal",null),(0,s._)([(0,p.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],$.prototype,"styleOrigin",void 0),(0,s._)([(0,y.r)("styleOrigin",["styleName","styleUrl"])],$.prototype,"readStyleOrigin",null),(0,s._)([(0,g.c)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],$.prototype,"writeStyleOrigin",null),(0,s._)([(0,p.Cb)({type:[R],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,r,i)=>(r.uniqueValueGroups||function(t){let{field1:r,field2:i,field3:s,fieldDelimiter:n,uniqueValueInfos:o,valueExpression:a}=t,l=!(!r||!i);return[{classes:(o??[]).map(t=>{let{symbol:o,label:u,value:d,description:h}=t,[p,c,f]=l?d?.toString()?.split(n||"")||[]:[d],y=[];return(r||a)&&y.push(p),i&&y.push(c),s&&y.push(f),{symbol:o,label:u,values:[y],description:h}})}]}(r)).map(t=>R.fromJSON(t,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],$.prototype,"uniqueValueGroups",null),(0,s._)([(0,p.Cb)({type:[F.Z],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],$.prototype,"uniqueValueInfos",null);let B=$=L=(0,s._)([(0,m.j)(V)],$)},94139:(t,r,i)=>{"use strict";i.d(r,{W:()=>D});var s,n=i(24765),o=i(82639),a=i(53919),l=(i(99950),i(21314)),u=i(71169),d=i(30407),h=i(62300),p=i(99444);let c=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var f,y=i(52697),m=i(95632);let g=f=class extends y.Z{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",t)}clone(){return new f({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};(0,n._)([(0,a.Cb)({readOnly:!0})],g.prototype,"cache",null),(0,n._)([(0,a.Cb)({type:["color"],json:{type:["colorInfo"]}})],g.prototype,"type",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],g.prototype,"normalizationField",void 0),(0,n._)([(0,a.Cb)({type:[m.Z],json:{write:!0}})],g.prototype,"stops",null);let _=g=f=(0,n._)([(0,d.j)("esri.renderers.visualVariables.ColorVariable")],g);var b,v=i(72140),w=i(59534);let C=b=class extends v.wq{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,r){return(0,w.b)(r.transparency)}writeOpacity(t,r,i){r[i]=(0,w.a)(t)}clone(){return new b({label:this.label,opacity:this.opacity,value:this.value})}};(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],C.prototype,"label",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{type:l.z8,write:{target:"transparency"}}})],C.prototype,"opacity",void 0),(0,n._)([(0,u.r)("opacity",["transparency"])],C.prototype,"readOpacity",null),(0,n._)([(0,h.c)("opacity")],C.prototype,"writeOpacity",null),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],C.prototype,"value",void 0);let S=C=b=(0,n._)([(0,d.j)("esri.renderers.visualVariables.support.OpacityStop")],C),x=s=class extends y.Z{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",t)}clone(){return new s({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};(0,n._)([(0,a.Cb)({readOnly:!0})],x.prototype,"cache",null),(0,n._)([(0,a.Cb)({type:["opacity"],json:{type:["transparencyInfo"]}})],x.prototype,"type",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],x.prototype,"normalizationField",void 0),(0,n._)([(0,a.Cb)({type:[S],json:{write:!0}})],x.prototype,"stops",null);let M=x=s=(0,n._)([(0,d.j)("esri.renderers.visualVariables.OpacityVariable")],x);var I=i(51201),E=i(10821),T=i(53306),P=i(84576),A=i(66150),k=i(19687);let O={color:_,size:E.Z,opacity:M,rotation:I.Z},R=new P.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),L=/^\[([^\]]+)\]$/i,F=class extends T.Z{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),(t=t&&t.filter(t=>!!t))&&t.length){for(let r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&t.sort((t,r)=>t.target===r.target?0:t.target?1:-1);for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){let{rotationExpression:s,rotationType:n}=r,o=s&&s.match(L),a=o&&o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:n,field:a})),t)return t.map(t=>{let r=R.read(t.type),s=O[r];s||(A.Z.getLogger(this.declaredClass).warn(`Unknown variable type: ${r}`),i&&i.messages&&i.messages.push(new k.Z("visual-variable:unsupported",`visualVariable of type '${r}' is not supported`,{definition:t,context:i})));let n=new s;return n.read(t,i),n})}writeVariables(t,r){let i=[];for(let s of t){let t=s.toJSON(r);t&&i.push(t)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,n._)([(0,a.Cb)()],F.prototype,"visualVariables",null);let N=F=(0,n._)([(0,d.j)("esri.renderers.visualVariables.VisualVariableFactory")],F),j={base:y.Z,key:"type",typeMap:{opacity:M,color:_,rotation:I.Z,size:E.Z}},D=t=>{let r=class extends t{constructor(){super(...arguments),this._vvFactory=new N}set visualVariables(t){this._vvFactory.visualVariables=t,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(t,r,i){return this._vvFactory.readVariables(t,r,i)}writeVisualVariables(t,r,i,s){r[i]=this._vvFactory.writeVariables(t,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(let t of this.visualVariables)if(t.arcadeRequired)return!0;return!1}hasVisualVariables(t,r){return t?this.getVisualVariablesForType(t,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(t,r){let i=this.visualVariables;return i?i.filter(i=>i.type===t&&("string"==typeof r?i.target===r:!1!==r||!i.target)):[]}async collectVVRequiredFields(t,r){let i=[];for(let s of(this.visualVariables&&(i=i.concat(this.visualVariables)),i))s&&(s.field&&(0,p.AB)(t,r,s.field),s.normalizationField&&(0,p.AB)(t,r,s.normalizationField),s.valueExpression&&(function(t,r,i){let s=t.match(c)?.[1]?.replace(/\\'/g,"'")??null;return!!(0,o.pC)(s)&&((0,p.AB)(r,i,s),!0)}(s.valueExpression,t,r)||await (0,p.io)(t,r,s.valueExpression)))}};return(0,n._)([(0,a.Cb)({types:[j],value:null,json:{write:!0}})],r.prototype,"visualVariables",null),(0,n._)([(0,u.r)("visualVariables",["visualVariables","rotationType","rotationExpression"])],r.prototype,"readVisualVariables",null),(0,n._)([(0,h.c)("visualVariables")],r.prototype,"writeVisualVariables",null),r=(0,n._)([(0,d.j)("esri.renderers.mixins.VisualVariablesMixin")],r)}},35957:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s,n=i(24765),o=i(55410),a=i(72140),l=i(66150),u=i(53919),d=(i(99950),i(36844)),h=i(30407),p=i(21314);let c=s=class extends a.wq{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return null==t?t:"function"==typeof t?(l.Z.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,p.Zs)(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new s({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,n._)([(0,u.Cb)({type:o.Z,json:{type:[Number],write:!0}})],c.prototype,"color",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"field",void 0),(0,n._)([(0,d.p)("field")],c.prototype,"castField",null),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);let f=c=s=(0,n._)([(0,h.j)("esri.renderers.support.AttributeColorInfo")],c)},17225:(t,r,i)=>{"use strict";i.d(r,{Z:()=>R});var s,n=i(24765),o=i(84576),a=i(72140),l=i(59118),u=i(53919),d=i(21314),h=i(71169),p=i(30407);i(99950);let c=s=class extends a.wq{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new s({minValue:this.minValue,maxValue:this.maxValue})}};(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],c.prototype,"minValue",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],c.prototype,"maxValue",void 0),c=s=(0,n._)([(0,p.j)("esri.renderer.support.AuthoringInfoClassBreakInfo")],c);let f=y=class extends a.wq{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new y({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,l.d9)(this.classBreakInfos)})}};(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],f.prototype,"field",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,n._)([(0,u.Cb)({type:[c],json:{write:!0}})],f.prototype,"classBreakInfos",void 0),f=y=(0,n._)([(0,p.j)("esri.renderers.support.AuthoringInfoFieldInfo")],f);var y,m,g=i(36844);let _=new o.X({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),b=new o.X({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),v={key:t=>"number"==typeof t?"number":"string",typeMap:{number:Number,string:String},base:null},w=["high-to-low","above-and-below","centered-on","extremes"],C=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],S=["seconds","minutes","hours","days","months","years"],x=m=class extends a.wq{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return"string"==typeof t||"number"==typeof t?t:null}castStartTime(t){return"string"==typeof t||"number"==typeof t?t:null}get style(){return"color"===this.type?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new m({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,n._)([(0,u.Cb)({types:v,json:{write:!0}})],x.prototype,"endTime",void 0),(0,n._)([(0,g.p)("endTime")],x.prototype,"castEndTime",null),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],x.prototype,"field",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],x.prototype,"maxSliderValue",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],x.prototype,"minSliderValue",void 0),(0,n._)([(0,u.Cb)({types:v,json:{write:!0}})],x.prototype,"startTime",void 0),(0,n._)([(0,g.p)("startTime")],x.prototype,"castStartTime",null),(0,n._)([(0,u.Cb)({type:_.apiValues,value:null,json:{type:_.jsonValues,read:_.read,write:_.write}})],x.prototype,"style",null),(0,n._)([(0,u.Cb)({type:C,value:null,json:{type:C,origins:{"web-scene":{type:w,write:{writer:(t,r)=>{w.includes(t)&&(r.theme=t)}}}},write:!0}})],x.prototype,"theme",null),(0,n._)([(0,u.Cb)({type:b.apiValues,json:{type:b.jsonValues,read:b.read,write:b.write}})],x.prototype,"type",void 0),(0,n._)([(0,u.Cb)({type:S,json:{type:S,write:!0}})],x.prototype,"units",void 0);let M=x=m=(0,n._)([(0,p.j)("esri.renderers.support.AuthoringInfoVisualVariable")],x);var I,E=i(41691);let T=new o.X({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),P=new o.X({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),A=new o.X({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),k=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],O=I=class extends a.wq{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){let t=this._get("classificationMethod"),r=this.type;return r&&"relationship"!==r?"class-breaks-size"===r||"class-breaks-color"===r?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?(0,E.i)(t):void 0}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){let t=this.type;return t&&"relationship"!==t&&"class-breaks-size"!==t&&"class-breaks-color"!==t||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let r=t;"classed-size"===t?r="class-breaks-size":"classed-color"===t&&(r="class-breaks-color"),this._set("type",r)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new I({classificationMethod:this.classificationMethod,colorRamp:(0,l.d9)(this.colorRamp),fadeRatio:(0,l.d9)(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:(0,l.d9)(this.field1),field2:(0,l.d9)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,n._)([(0,u.Cb)({type:T.apiValues,value:null,json:{type:T.jsonValues,read:T.read,write:T.write,origins:{"web-document":{default:"manual",type:T.jsonValues,read:T.read,write:T.write}}}})],O.prototype,"classificationMethod",null),(0,n._)([(0,u.Cb)({types:E.V,json:{write:!0}})],O.prototype,"colorRamp",void 0),(0,n._)([(0,h.r)("colorRamp")],O.prototype,"readColorRamp",null),(0,n._)([(0,u.Cb)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],O.prototype,"fadeRatio",void 0),(0,n._)([(0,u.Cb)({type:[String],value:null,json:{write:!0}})],O.prototype,"fields",null),(0,n._)([(0,u.Cb)({type:f,value:null,json:{write:!0}})],O.prototype,"field1",null),(0,n._)([(0,u.Cb)({type:f,value:null,json:{write:!0}})],O.prototype,"field2",null),(0,n._)([(0,u.Cb)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],O.prototype,"flowTheme",null),(0,n._)([(0,u.Cb)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],O.prototype,"focus",null),(0,n._)([(0,u.Cb)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],O.prototype,"isAutoGenerated",void 0),(0,n._)([(0,u.Cb)({type:Number,value:null,json:{type:d.z8,write:!0}})],O.prototype,"numClasses",null),(0,n._)([(0,u.Cb)({type:k,json:{type:k,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],O.prototype,"lengthUnit",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],O.prototype,"maxSliderValue",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],O.prototype,"minSliderValue",void 0),(0,n._)([(0,u.Cb)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],O.prototype,"statistics",null),(0,n._)([(0,u.Cb)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],O.prototype,"standardDeviationInterval",null),(0,n._)([(0,u.Cb)({type:P.apiValues,value:null,json:{type:P.jsonValues,read:P.read,write:P.write,origins:{"web-scene":{type:A.jsonValues,write:{writer:A.write,overridePolicy:t=>({enabled:"flow"!==t})}}}}})],O.prototype,"type",null),(0,n._)([(0,u.Cb)({type:[M],json:{write:!0}})],O.prototype,"visualVariables",void 0),(0,n._)([(0,u.Cb)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],O.prototype,"univariateSymbolStyle",null),(0,n._)([(0,u.Cb)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],O.prototype,"univariateTheme",null);let R=O=I=(0,n._)([(0,p.j)("esri.renderers.support.AuthoringInfo")],O)},60056:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(72751);let d=s=class extends o.wq{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new s({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){let t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],d.prototype,"minValue",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],d.prototype,"maxValue",void 0),(0,n._)([(0,a.Cb)(u.Gn)],d.prototype,"symbol",void 0);let h=d=s=(0,n._)([(0,l.j)("esri.renderers.support.ClassBreakInfo")],d)},13789:(t,r,i)=>{"use strict";i.r(r),i.d(r,{DictionaryLoader:()=>m});var s=i(55410),n=i(57837),o=i(12790),a=i(66150),l=i(67918),u=i(82639),d=i(66138),h=i(32121),p=i(79286),c=i(11560);let f="esri.renderers.support.DictionaryLoader",y={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class m{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new l.Z(100),this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(t){if((0,d.D_)(t))return this._dictionaryPromise=null,null}let n={};if(this.fieldMap)for(let r of this._symbolFields){let i=this.fieldMap[r];if(i&&null!=t.attributes[i]){let s=""+t.attributes[i];n[r]=s}else n[r]=""}let o=i?.(n,r);if(!o||"string"!=typeof o)return null;let a=(0,h.hP)(o).toString(),l=this._symbolCache.get(a);if(l)return l.catch(()=>{this._symbolCache.pop(a)}),l;let p=o.split(";"),c=[],f=[];for(let t of p)if(t){if(t.includes("po:")){let r=t.substr(3).split("|");if(3===r.length){let t=r[0],i=r[1],n=r[2];if("DashTemplate"===i)n=n.split(" ").map(t=>Number(t));else if("Color"===i){let t=new s.Z(n).toRgba();n=[t[0],t[1],t[2],255*t[3]]}else n=Number(n);f.push({primitiveName:t,propertyName:i,value:n})}}else if(t.includes("|")){for(let r of t.split("|"))if(this._itemNames.has(r)){c.push(r);break}}else this._itemNames.has(t)&&c.push(t)}let y=!(0,u.pC)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,m=this._cimPartsToCIMSymbol(c,f,y,r);return this._symbolCache.put(a,m,1),m}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void a.Z.getLogger(f).error("no valid URL!");let r=(0,n.default)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:(0,u.pC)(t)?t.signal:null}),[{data:i}]=await Promise.all([r,(0,p.LC)()]);if(!i)throw this._dictionaryPromise=null,new o.Z("esri.renderers.DictionaryRenderer","Bad dictionary data!");let s=i.expression,l=i.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=l.symbol;let d={};if(this.config){let t=this.config;for(let r in t)d[r]=t[r]}if(l.configuration)for(let t of l.configuration)d.hasOwnProperty(t.name)||(d[t.name]=t.value);let h=[];if((0,u.pC)(t)&&t.fields&&this.fieldMap)for(let r of this._symbolFields){let i=this.fieldMap[r],s=t.fields.filter(t=>t.name===i);s.length>0&&h.push({...s[0],name:r})}let c=(0,p.pp)(s,(0,u.pC)(t)?t.spatialReference:null,h,d).then(t=>{let r={scale:0};return(i,s)=>{if((0,u.Wi)(t))return null;let n=t.repurposeFeature({geometry:null,attributes:i});return r.scale=(0,u.pC)(s)?s.scale:void 0,t.evaluate({$feature:n,$view:r})}}).catch(t=>(a.Z.getLogger(f).error("Creating dictinoary expression failed:",t),null));return this._dictionaryPromise=c,c}async _cimPartsToCIMSymbol(t,r,i,s){let n=Array(t.length);for(let r=0;r<t.length;r++)n[r]=this._getSymbolPart(t[r],s);let o=await Promise.all(n),a=this.fieldMap;if(a)for(let t of o)(function t(r,i){if(!r)return;let s=r.symbolLayers;if(!s)return;let n=s.length;for(;n--;){let r=s[n];r&&!1!==r.enable&&"CIMVectorMarker"===r.type&&function(r,i){let s=r.markerGraphics;if(s)for(let r of s){if(!r)continue;let s=r.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":t(s,i);break;case"CIMTextSymbol":s.fieldMap=i}}}(r,i)}})(t,a);return new c.Z({data:this._combineSymbolParts(o,r,i)})}async _getSymbolPart(t,r){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(t=>t.data);let i=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),s=(0,n.default)(i,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,s);try{return(await s).data}catch(r){throw this._ongoingRequests.delete(t),r}}_combineSymbolParts(t,r,i){if(!t||0===t.length)return null;let s={...t[0]};if(t.length>1)for(let r of(s.symbolLayers=[],t))s.symbolLayers.unshift(...r.symbolLayers);return i&&(s.callout=y),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:r}}}},72332:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s,n=i(24765),o=i(55410),a=i(72140),l=i(53919),u=(i(99950),i(21314)),d=i(30407);let h=s=class extends a.wq{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new s({color:this.color,ratio:this.ratio})}};(0,n._)([(0,l.Cb)({type:o.Z,json:{type:[u.z8],default:null,write:!0}})],h.prototype,"color",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],h.prototype,"ratio",void 0);let p=h=s=(0,n._)([(0,d.j)("esri.renderers.support.HeatmapColorStop")],h)},24757:(t,r,i)=>{"use strict";i.d(r,{I:()=>u});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407));let u=s=class extends o.wq{constructor(){super(...arguments),this.title=null}clone(){return new s({title:this.title})}};(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],u.prototype,"title",void 0),u=s=(0,n._)([(0,l.j)("esri.renderers.support.LegendOptions")],u)},12057:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(72751);let d=s=class extends o.wq{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new s({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){let t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,n._)([(0,a.Cb)(u.Gn)],d.prototype,"symbol",void 0),(0,n._)([(0,a.Cb)(u.GY)],d.prototype,"value",void 0);let h=d=s=(0,n._)([(0,l.j)("esri.renderers.support.UniqueValueInfo")],d)},72751:(t,r,i)=>{"use strict";i.d(r,{GY:()=>h,Gn:()=>u,KK:()=>d});var s=i(98402),n=i(51609),o=i(62888),a=i(80629),l=i(71905);let u={types:s.QT,json:{write:{writer:o.cW},origins:{"web-scene":{types:s.f_,write:{writer:o.cW},read:{reader:(0,n.d)({types:s.f_})}}}}},d={types:{base:a.Z,key:"type",typeMap:{"simple-fill":s.LB.typeMap["simple-fill"],"picture-fill":s.LB.typeMap["picture-fill"],"polygon-3d":s.LB.typeMap["polygon-3d"]}},json:{write:{writer:o.cW},origins:{"web-scene":{type:l.Z,write:{writer:o.cW}}}}},h={cast:t=>null==t||"string"==typeof t||"number"==typeof t?t:`${t}`,json:{type:String,write:{writer:(t,r)=>{r.value=t?.toString()}}}}},75558:(t,r,i)=>{"use strict";i.d(r,{AJ:()=>d,If:()=>f,QM:()=>p,hy:()=>c,k0:()=>u,nu:()=>l,uI:()=>h,wx:()=>y});var s=i(5047),n=i(85098),o=i(39999),a=i(10269);let l=2.4;function u(t){return(0,n.Wz)(t*l)}function d(t){return(0,n.F2)(t)/l}function h(t){let r=new Uint8ClampedArray(2048);if((t=t.filter(({ratio:t})=>t>=0&&t<=1).sort((t,r)=>t.ratio-r.ratio).map(({color:t,ratio:r})=>({color:t,ratio:Math.max(r,.001)}))).length<1)return r;let i=t[0],n=t[0],l=1,u=(0,a.c)();for(let a=0;a<512;a++){let d=(a+.5)/512;for(;d>n.ratio&&l<t.length;)i=n,n=t[l++];(function(t,r,i,n){let{color:a,ratio:l}=r,{color:u,ratio:d}=i;d===l&&(1===d?l-=1e-6:d+=1e-6);let h=(0,s.uZ)((n-l)/(d-l),0,1);(0,o.l)(t,a.toArray(),u.toArray(),h)})(u,i,n,d),r.set(u,4*a)}return r}function p(t,r,i,s){let{radius:o,fieldOffset:a,field:l}=r,u=Math.round((0,n.F2)(o)),d=new Float64Array(i*s),h,p=Number.NEGATIVE_INFINITY,c=null!=l?"string"==typeof a?t=>-1*+t.readAttribute(l):t=>+t.readAttribute(l)+a:t=>1,y=new Set;for(let r of t){let t=r.getCursor();for(;t.next();){let r=t.getObjectId();if(y.has(r))continue;y.add(r);let n=t.readLegacyPointGeometry();if(n.x<-128||n.x>=i+128||n.y<-128||n.y>s+128)continue;let o=+c(t),a=Math.max(0,Math.round(n.x)-u),l=Math.max(0,Math.round(n.y)-u),m=Math.min(s,Math.round(n.y)+u),g=Math.min(i,Math.round(n.x)+u);for(let t=l;t<m;t++)for(let r=a;r<g;r++){let s=t*i+r,a=f(n.x-r,n.y-t,u);(h=d[s]+=a*o)>p&&(p=h)}}}return{matrix:d.buffer,max:p}}function c(t,r,i,n,o,a){t.canvas.width=t.canvas.height=r,t.clearRect(0,0,r,r);let l=t.getImageData(0,0,r,r);i&&n&&l.data.set(new Uint8ClampedArray(function(t,r,i,n,o){let a=new Uint32Array(t*t),l="buffer"in r?r:new Float64Array(r),u=new Uint32Array("buffer"in i?i.buffer:new Uint8Array(i).buffer),d=u.length/(o-n);for(let t=0;t<l.length;t++){let r=Math.floor((l[t]-n)*d);a[t]=u[(0,s.uZ)(r,0,u.length-1)]}return a.buffer}(r,i,n,o,a))),t.putImageData(l,0,0)}function f(t,r,i){let s=Math.sqrt(t**2+r**2)/i;return s>1?0:3/(Math.PI*i**2)*(1-s**2)**2}function y(t,r){return"function"==typeof t?t:t?"string"==typeof r?r=>-1*+r[t]:i=>+i[t]+r:()=>1}},42765:(t,r,i)=>{"use strict";i.d(r,{a:()=>u,i:()=>a});var s=i(19687),n=i(51609),o=i(80587);function a(t,r){return u(t,null,r)}let l=(0,n.d)({types:o.A});function u(t,r,i){return t?t&&(t.styleName||t.styleUrl)&&"uniqueValue"!==t.type?(i&&i.messages&&i.messages.push(new s.Z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):l(t,r,i):null}},5174:(t,r,i)=>{"use strict";i.d(r,{a:()=>o});var s=i(35562),n=i(94531);let o={inches:(0,s.En)(1,"meters","inches"),feet:(0,s.En)(1,"meters","feet"),"us-feet":(0,s.En)(1,"meters","us-feet"),yards:(0,s.En)(1,"meters","yards"),miles:(0,s.En)(1,"meters","miles"),"nautical-miles":(0,s.En)(1,"meters","nautical-miles"),millimeters:(0,s.En)(1,"meters","millimeters"),centimeters:(0,s.En)(1,"meters","centimeters"),decimeters:(0,s.En)(1,"meters","decimeters"),meters:(0,s.En)(1,"meters","meters"),kilometers:(0,s.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,s.ty)(1,"meters",n.sv.radius)}},88026:(t,r,i)=>{"use strict";i.d(r,{y:()=>a});var s=i(95894),n=i(66138),o=i(19687);async function a(t,r,i){let a=t&&t.getAtOrigin&&t.getAtOrigin("renderer",r.origin);if(a&&"unique-value"===a.type&&a.styleOrigin){let l=await (0,s.q6)(a.populateFromStyle());if((0,n.k_)(i),!1===l.ok){let i=l.error;r&&r.messages&&r.messages.push(new o.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${i.message}`,{error:i,context:r})),t.clear("renderer",r?.origin)}}}},80587:(t,r,i)=>{"use strict";i.d(r,{A:()=>p,o:()=>c});var s=i(57969),n=i(63535),o=i(51661),a=i(29432),l=i(71260),u=i(76744),d=i(47513),h=i(61885);let p={key:"type",base:u.Z,typeMap:{heatmap:a.Z,simple:d.Z,"unique-value":h.Z,"class-breaks":s.Z,"dot-density":o.Z,dictionary:n.Z,"pie-chart":l.Z},errorContext:"renderer"},c={key:"type",base:u.Z,typeMap:{simple:d.Z,"unique-value":h.Z,"class-breaks":s.Z,heatmap:a.Z},errorContext:"renderer"}},51201:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s,n=i(24765),o=i(12790),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(62300),d=i(52697);let h=s=class extends d.Z{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,r,i,s){if(s&&s.messages){let t=`visualVariables[${this.index}]`;s.messages.push(new o.Z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpressionTitle",context:s}))}}clone(){return new s({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};(0,n._)([(0,a.Cb)({readOnly:!0})],h.prototype,"cache",null),(0,n._)([(0,a.Cb)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],h.prototype,"axis",void 0),(0,n._)([(0,a.Cb)({type:["rotation"],json:{type:["rotationInfo"]}})],h.prototype,"type",void 0),(0,n._)([(0,a.Cb)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],h.prototype,"rotationType",void 0),(0,n._)([(0,a.Cb)({type:String,json:{write:!0}})],h.prototype,"valueExpressionTitle",void 0),(0,n._)([(0,u.c)("web-scene","valueExpressionTitle")],h.prototype,"writeValueExpressionTitleWebScene",null);let p=h=s=(0,n._)([(0,l.j)("esri.renderers.visualVariables.RotationVariable")],h)},10821:(t,r,i)=>{"use strict";i.d(r,{Z:()=>T});var s,n=i(24765),o=i(12790),a=i(84576),l=i(66150),u=i(85098),d=i(53919),h=(i(99950),i(36844)),p=i(71169),c=i(30407),f=i(62300),y=i(52697),m=i(84061),g=(i(21314),i(95891));let _=s=class extends g.Z{constructor(){super(...arguments),this.customValues=null}clone(){return new s({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};(0,n._)([(0,d.Cb)({type:[Number],json:{write:!0}})],_.prototype,"customValues",void 0);let b=_=s=(0,n._)([(0,c.j)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],_);var v,w=i(31818),C=i(43730);let S=new a.X({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),x=new a.X({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function M(t){if(null!=t)return"string"==typeof t||"number"==typeof t?(0,u.t_)(t):"size"===t.type?(0,w.iY)(t)?t:(delete(t={...t}).type,new E(t)):void 0}function I(t,r,i){if("object"!=typeof t)return t;let s=new E;return s.read(t,i),s}let E=v=class extends y.Z{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&C.viewScaleRE.test(this.valueExpression)}}set expression(t){l.Z.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===t?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){(0,w.iY)(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),(0,w.iY)(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return(0,w.PS)(this)}set maxDataValue(t){t&&this.stops&&(l.Z.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(l.Z.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return M(t)}readMaxSize(t,r,i){return I(t,0,i)}set minDataValue(t){t&&this.stops&&(l.Z.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(l.Z.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return M(t)}readMinSize(t,r,i){return I(t,0,i)}get arcadeRequired(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(t){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?t&&Array.isArray(t)&&(t=t.filter(t=>!!t)).sort((t,r)=>t.value-r.value):t&&(l.Z.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return(0,w.QW)(this,this.inputValueType)}readValueExpression(t,r){return t||r.expression&&"$view.scale"}writeValueExpressionWebScene(t,r,i,s){if("$view.scale"===t){if(s&&s.messages){let t=this.index,r="string"==typeof t?t:`visualVariables[${t}]`;s.messages.push(new o.Z("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpression",context:s}))}}else r[i]=t}readValueUnit(t){return t?x.read(t):null}clone(){return new v({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,w.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,w.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===w.hL.ClampedLinear){let{minSize:t,maxSize:r}=this;return this.minSize=r,this.maxSize=t,this}if(this.transformationType===w.hL.Stops){let t=this.stops;if(!t)return this;let r=t.map(t=>t.size).reverse(),i=t.length;for(let s=0;s<i;s++)t[s].size=r[s]}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};(0,n._)([(0,d.Cb)({readOnly:!0})],E.prototype,"cache",null),(0,n._)([(0,d.Cb)({type:S.apiValues,json:{type:S.jsonValues,origins:{"web-map":{read:!1}},read:S.read,write:S.write}})],E.prototype,"axis",void 0),(0,n._)([(0,d.Cb)({type:String,value:null,json:{read:!1}})],E.prototype,"expression",null),(0,n._)([(0,d.Cb)()],E.prototype,"index",null),(0,n._)([(0,d.Cb)({type:String,readOnly:!0})],E.prototype,"inputValueType",null),(0,n._)([(0,d.Cb)({type:b,json:{write:!0}})],E.prototype,"legendOptions",void 0),(0,n._)([(0,d.Cb)({type:Number,value:null,json:{write:!0}})],E.prototype,"maxDataValue",null),(0,n._)([(0,d.Cb)({type:Number,value:null,json:{write:!0}})],E.prototype,"maxSize",null),(0,n._)([(0,h.p)("maxSize")],E.prototype,"castMaxSize",null),(0,n._)([(0,p.r)("maxSize")],E.prototype,"readMaxSize",null),(0,n._)([(0,d.Cb)({type:Number,value:null,json:{write:!0}})],E.prototype,"minDataValue",null),(0,n._)([(0,d.Cb)({type:Number,value:null,json:{write:!0}})],E.prototype,"minSize",null),(0,n._)([(0,h.p)("minSize")],E.prototype,"castMinSize",null),(0,n._)([(0,p.r)("minSize")],E.prototype,"readMinSize",null),(0,n._)([(0,d.Cb)({type:String,json:{write:!0}})],E.prototype,"normalizationField",void 0),(0,n._)([(0,d.Cb)({readOnly:!0})],E.prototype,"arcadeRequired",null),(0,n._)([(0,d.Cb)({type:String})],E.prototype,"scaleBy",void 0),(0,n._)([(0,d.Cb)({type:[m.Z],value:null,json:{write:!0}})],E.prototype,"stops",null),(0,n._)([(0,d.Cb)({type:["outline"],json:{write:!0}})],E.prototype,"target",void 0),(0,n._)([(0,d.Cb)({type:String,readOnly:!0})],E.prototype,"transformationType",null),(0,n._)([(0,d.Cb)({type:["size"],json:{type:["sizeInfo"]}})],E.prototype,"type",void 0),(0,n._)([(0,d.Cb)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],E.prototype,"useSymbolValue",void 0),(0,n._)([(0,d.Cb)({type:String,json:{write:!0}})],E.prototype,"valueExpression",void 0),(0,n._)([(0,p.r)("valueExpression",["valueExpression","expression"])],E.prototype,"readValueExpression",null),(0,n._)([(0,f.c)("web-scene","valueExpression")],E.prototype,"writeValueExpressionWebScene",null),(0,n._)([(0,d.Cb)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],E.prototype,"valueRepresentation",void 0),(0,n._)([(0,d.Cb)({type:x.apiValues,json:{write:x.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],E.prototype,"valueUnit",void 0),(0,n._)([(0,p.r)("valueUnit")],E.prototype,"readValueUnit",null);let T=E=v=(0,n._)([(0,c.j)("esri.renderers.visualVariables.SizeVariable")],E)},52697:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s=i(24765),n=i(84576),o=i(72140),a=i(66150),l=i(53919),u=(i(99950),i(36844)),d=i(30407),h=i(21314),p=i(95891);let c=new n.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),f=class extends o.wq{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return null==t?t:"function"==typeof t?(a.Z.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,h.Zs)(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,s._)([(0,l.Cb)()],f.prototype,"index",void 0),(0,s._)([(0,l.Cb)({type:c.apiValues,readOnly:!0,json:{read:c.read,write:c.write}})],f.prototype,"type",void 0),(0,s._)([(0,l.Cb)({type:String,json:{write:!0}})],f.prototype,"field",void 0),(0,s._)([(0,u.p)("field")],f.prototype,"castField",null),(0,s._)([(0,l.Cb)({type:String,json:{write:!0}})],f.prototype,"valueExpression",void 0),(0,s._)([(0,l.Cb)({type:String,json:{write:!0}})],f.prototype,"valueExpressionTitle",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],f.prototype,"arcadeRequired",null),(0,s._)([(0,l.Cb)({type:p.Z,json:{write:!0}})],f.prototype,"legendOptions",void 0);let y=f=(0,s._)([(0,d.j)("esri.renderers.visualVariables.VisualVariable")],f)},95632:(t,r,i)=>{"use strict";i.d(r,{Z:()=>c});var s,n=i(24765),o=i(55410),a=i(72140),l=i(53919),u=(i(99950),i(21314)),d=i(30407),h=i(62300);let p=s=class extends a.wq{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,r,i){r[i]=t??0}clone(){return new s({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,n._)([(0,l.Cb)({type:o.Z,json:{type:[u.z8],write:!0}})],p.prototype,"color",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],p.prototype,"value",void 0),(0,n._)([(0,h.c)("value")],p.prototype,"writeValue",null);let c=p=s=(0,n._)([(0,d.j)("esri.renderers.visualVariables.support.ColorStop")],p)},84061:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(72140),a=i(85098),l=i(53919),u=(i(99950),i(21314),i(30407));let d=s=class extends o.wq{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new s({label:this.label,size:this.size,value:this.value})}};(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,n._)([(0,l.Cb)({type:Number,cast:a.t_,json:{write:!0}})],d.prototype,"size",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],d.prototype,"value",void 0);let h=d=s=(0,n._)([(0,u.j)("esri.renderers.visualVariables.support.SizeStop")],d)},95891:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(24757);let u=s=class extends l.I{constructor(){super(...arguments),this.showLegend=null}clone(){return new s({title:this.title,showLegend:this.showLegend})}};(0,n._)([(0,o.Cb)({type:Boolean,json:{write:!0}})],u.prototype,"showLegend",void 0);let d=u=s=(0,n._)([(0,a.j)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],u)},31818:(t,r,i)=>{"use strict";var s,n,o,a;function l(t){return t&&"esri.renderers.visualVariables.SizeVariable"===t.declaredClass}function u(t){return null!=t&&!isNaN(t)&&isFinite(t)}function d(t){return t.valueExpression?s.Expression:t.field&&"string"==typeof t.field?s.Field:s.Unknown}function h(t,r){let i=r||d(t),o=t.valueUnit||"unknown";return i===s.Unknown?n.Constant:t.stops?n.Stops:null!=t.minSize&&null!=t.maxSize&&null!=t.minDataValue&&null!=t.maxDataValue?n.ClampedLinear:"unknown"===o?null!=t.minSize&&null!=t.minDataValue?t.minSize&&t.minDataValue?n.Proportional:n.Additive:n.Identity:n.RealWorldSize}i.d(r,{PS:()=>d,QW:()=>h,RY:()=>s,hL:()=>n,iY:()=>l,qh:()=>u}),(o=s||(s={})).Unknown="unknown",o.Expression="expression",o.Field="field",(a=n||(n={})).Unknown="unknown",a.Stops="stops",a.ClampedLinear="clamped-linear",a.Proportional="proportional",a.Additive="additive",a.Constant="constant",a.Identity="identity",a.RealWorldSize="real-world-size"},43730:(t,r,i)=>{"use strict";i.r(r),i.d(r,{getAllSizes:()=>M,getColor:()=>y,getOpacity:()=>m,getRotationAngle:()=>g,getSize:()=>_,getSizeForValue:()=>w,getSizeFromNumberOrVariable:()=>b,getSizeRangeAtScale:()=>C,getVisualVariableValues:()=>S,viewScaleRE:()=>f});var s=i(55410),n=i(94323),o=i(1833),a=i(66150),l=i(82639),u=i(5174),d=i(31818);let h=a.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),p=new n.Z,c=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function y(t,r,i){let n="visualVariables"in t&&t.visualVariables?t.visualVariables.find(t=>"color"===t.type):t;if(!n)return;if("esri.renderers.visualVariables.ColorVariable"!==n.declaredClass)return void h.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");let o="number"==typeof r,a=o?null:r,u=a&&a.attributes,d=o?r:null,p=n.field,{ipData:c,hasExpression:f}=n.cache,y=n.cache.compiledFunc;if(!p&&!f){let t=n.stops;return t&&t[0]&&t[0].color}if("number"!=typeof d){if(f){if((0,l.Wi)(i)||(0,l.Wi)(i.arcade))return void h.error("Use of arcade expressions requires an arcade context");let t={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,s=r.getViewInfo(t),o=r.createExecContext(a,s);if(!y){let t=r.createSyntaxTree(n.valueExpression);y=r.createFunction(t),n.cache.compiledFunc=y}d=r.executeFunction(y,o)}else u&&(d=u[p])}let m=n.normalizationField,g=null!=u&&null!=m?parseFloat(u[m]):void 0;if(null!=d&&(!m||o||!isNaN(g)&&0!==g)){isNaN(g)||o||(d/=g);let t=x(d,c);if(t){let r=t[0],o=t[1],a=r===o?n.stops[r].color:s.Z.blendColors(n.stops[r].color,n.stops[o].color,t[2],(0,l.pC)(i)?i.color:void 0);return new s.Z(a)}}}function m(t,r,i){let s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(t=>"opacity"===t.type):t;if(!s)return;if("esri.renderers.visualVariables.OpacityVariable"!==s.declaredClass)return void h.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");let n="number"==typeof r,o=n?null:r,a=o&&o.attributes,u=n?r:null,d=s.field,{ipData:p,hasExpression:c}=s.cache,f=s.cache.compiledFunc;if(!d&&!c){let t=s.stops;return t&&t[0]&&t[0].opacity}if("number"!=typeof u){if(c){if((0,l.Wi)(i)||(0,l.Wi)(i.arcade))return void h.error("Use of arcade expressions requires an arcade context");let t={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,n=r.getViewInfo(t),a=r.createExecContext(o,n);if(!f){let t=r.createSyntaxTree(s.valueExpression);f=r.createFunction(t),s.cache.compiledFunc=f}u=r.executeFunction(f,a)}else a&&(u=a[d])}let y=s.normalizationField,m=null!=a&&null!=y?parseFloat(a[y]):void 0;if(null!=u&&(!y||n||!isNaN(m)&&0!==m)){isNaN(m)||n||(u/=m);let t=x(u,p);if(t){let r=t[0],i=t[1];if(r===i)return s.stops[r].opacity;{let n=s.stops[r].opacity;return n+(s.stops[i].opacity-n)*t[2]}}}}function g(t,r,i){let s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(t=>"rotation"===t.type):t;if(!s)return;if("esri.renderers.visualVariables.RotationVariable"!==s.declaredClass)return void h.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");let n=s.axis||"heading",o="heading"===n&&"arithmetic"===s.rotationType?90:0,a="heading"===n&&"arithmetic"===s.rotationType?-1:1,u="number"==typeof r?null:r,d=u&&u.attributes,p=s.field,{hasExpression:c}=s.cache,f=s.cache.compiledFunc,y=0;if(!p&&!c)return y;if(c){if((0,l.Wi)(i)||(0,l.Wi)(i.arcade))return void h.error("Use of arcade expressions requires an arcade context");let t={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,n=r.getViewInfo(t),o=r.createExecContext(u,n);if(!f){let t=r.createSyntaxTree(s.valueExpression);f=r.createFunction(t),s.cache.compiledFunc=f}y=r.executeFunction(f,o)}else d&&(y=d[p]||0);return"number"!=typeof y||isNaN(y)?null:o+a*y}function _(t,r,i){let s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(t=>"size"===t.type):t;if(!s)return;if("esri.renderers.visualVariables.SizeVariable"!==s.declaredClass)return void h.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");let n=w(function(t,r,i){let s="number"==typeof r,n=s?null:r,o=n&&n.attributes,a=s?r:null,{isScaleDriven:u}=t.cache,p=t.cache.compiledFunc;if(u){let r=(0,l.pC)(i)?i.scale:void 0,s=(0,l.pC)(i)?i.view:void 0;a=null==r||"3d"===s?function(t){let r=null,i=null,s=t.stops;return s?(r=s[0].value,i=s[s.length-1].value):(r=t.minDataValue||0,i=t.maxDataValue||0),(r+i)/2}(t):r}else if(!s)switch(t.inputValueType){case d.RY.Expression:{if((0,l.Wi)(i)||(0,l.Wi)(i.arcade))return void h.error("Use of arcade expressions requires an arcade context");let r={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},s=i.arcade.arcadeUtils,o=s.getViewInfo(r),u=s.createExecContext(n,o);if(!p){let r=s.createSyntaxTree(t.valueExpression);p=s.createFunction(r),t.cache.compiledFunc=p}a=s.executeFunction(p,u);break}case d.RY.Field:o&&(a=o[t.field]);break;case d.RY.Unknown:a=null}if(!(0,d.qh)(a))return null;if(s||!t.normalizationField)return a;let c=o?parseFloat(o[t.normalizationField]):null;return(0,d.qh)(c)&&0!==c?a/c:null}(s,r,i),s,r,i,s.cache.ipData);return null==n||isNaN(n)?0:n}function b(t,r,i){return null==t?null:(0,d.iY)(t)?_(t,r,i):(0,d.qh)(t)?t:null}function v(t,r,i){return(0,d.qh)(i)&&t>i?i:(0,d.qh)(r)&&t<r?r:t}function w(t,r,i,s,n){switch(r.transformationType){case d.hL.Additive:return t+((b(r.minSize,i,s)||r.minDataValue)??0);case d.hL.Constant:return function(t,r,i){let s=t.stops,n=s&&s.length&&s[0].size;return null==n&&(n=t.minSize),b(n,r,i)}(r,i,s);case d.hL.ClampedLinear:return function(t,r,i,s){let n=(t-r.minDataValue)/(r.maxDataValue-r.minDataValue),o=b(r.minSize,i,s),a=b(r.maxSize,i,s),u=(0,l.pC)(s)?s.shape:void 0;if(t<=r.minDataValue)return o;if(t>=r.maxDataValue)return a;if(null==o||null==a)return null;if("area"===r.scaleBy&&u){let t="circle"===u,r=t?c*(o/2)**2:o*o,i=r+n*((t?c*(a/2)**2:a*a)-r);return t?2*Math.sqrt(i/c):Math.sqrt(i)}return o+n*(a-o)}(t,r,i,s);case d.hL.Proportional:return function(t,r,i,s){let n=(0,l.pC)(s)?s.shape:void 0,o=t/r.minDataValue,a=b(r.minSize,i,s),u=b(r.maxSize,i,s);return v("circle"===n?2*Math.sqrt(o*(a/2)**2):"square"===n||"diamond"===n||"image"===n?Math.sqrt(o*a**2):o*a,a,u)}(t,r,i,s);case d.hL.Stops:return function(t,r,i,s,n){let[o,a,l]=x(t,n);if(o===a)return b(r.stops?.[o].size,i,s);{let t=b(r.stops?.[o].size,i,s);return t+(b(r.stops?.[a].size,i,s)-t)*l}}(t,r,i,s,n);case d.hL.RealWorldSize:return function(t,r,i,s){let n=((0,l.pC)(s)&&s.resolution?s.resolution:1)*u.a[r.valueUnit],o=b(r.minSize,i,s),a=b(r.maxSize,i,s),{valueRepresentation:d}=r;return v("area"===d?2*Math.sqrt(t/c)/n:"radius"===d||"distance"===d?2*t/n:t/n,o,a)}(t,r,i,s);case d.hL.Identity:return t;case d.hL.Unknown:return null}}function C(t,r,i){let{isScaleDriven:s}=t.cache;if(!(s&&"3d"===i||r))return null;let n={scale:r,view:i},o=b(t.minSize,p,n),a=b(t.maxSize,p,n);if(null!=o||null!=a){if(o>a){let t=a;a=o,o=t}return{minSize:o,maxSize:a}}}function S(t,r,i){if(!t.visualVariables)return;let s=[],n=[],o=[],a=[],l=[];for(let r of t.visualVariables)switch(r.type){case"color":n.push(r);break;case"opacity":o.push(r);break;case"rotation":l.push(r);break;case"size":a.push(r)}return n.forEach(t=>{let n=y(t,r,i);s.push({variable:t,value:n})}),o.forEach(t=>{let n=m(t,r,i);s.push({variable:t,value:n})}),l.forEach(t=>{let n=g(t,r,i);s.push({variable:t,value:n})}),a.forEach(t=>{let n=_(t,r,i);s.push({variable:t,value:n})}),s.filter(t=>null!=t.value)}function x(t,r){if(!r)return;let i=0,s=r.length-1;return r.some((r,n)=>t<r?(s=n,!0):(i=n,!1)),[i,s,(t-r[i])/(r[s]-r[i])]}function M(t,r,i){let s=["proportional","proportional","proportional"];for(let n of t){let t=n.useSymbolValue?"symbol-value":_(n,r,i);switch(n.axis){case"width":s[0]=t;break;case"depth":s[1]=t;break;case"height":s[2]=t;break;case"width-and-depth":s[0]=t,s[1]=t;break;case"all":case void 0:case null:s[0]=t,s[1]=t,s[2]=t;break;default:(0,o.Bg)(n.axis)}}return s}},57837:(t,r,i)=>{"use strict";let s;i.r(r),i.d(r,{default:()=>m});var n=i(10242),o=i(49869),a=i(12790),l=i(96082),u=i(59118),d=i(82639),h=i(66138),p=i(82583),c=i(36343),f=i(2037),y=i(73322);async function m(t,r){let u=(0,p.HK)(t),c=(0,p.jc)(t);c||u||(t=(0,p.Fv)(t));let b={url:t,requestOptions:{...(0,d.Wg)(r)}},v=(0,p.oh)(t);if(v){let t=await async function(t,r){if(null!=t.responseData)return t.responseData;if(t.headers&&(r.requestOptions.headers={...r.requestOptions.headers,...t.headers}),t.query&&(r.requestOptions.query={...r.requestOptions.query,...t.query}),t.before){let i,s;try{s=await t.before(r)}catch(t){i=M("request:interceptor",t,r)}if((s instanceof Error||s instanceof a.Z)&&(i=M("request:interceptor",s,r)),i)throw t.error&&t.error(i),i;return s}}(v,b);if(null!=t)return{data:t,getHeader:C,requestOptions:b.requestOptions,url:b.url};v.after||v.error||(v=null)}if(t=b.url,"image"===(r=b.requestOptions).responseType){if((0,l.Z)("host-webworker")||(0,l.Z)("host-node"))throw M("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),b)}else if(u)throw M("request:invalid-parameters",Error("Data URLs are not supported for responseType = "+r.responseType),b);if("head"===r.method){if(r.body)throw M("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),b);if(u||c)throw M("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),b)}if(await async function(){(0,l.Z)("host-webworker")?s||(s=await i.e(5934).then(i.bind(i,55934))):m._abortableFetch||(m._abortableFetch=globalThis.fetch.bind(globalThis))}(),s)return s.execute(t,r);let w=new AbortController;(0,h.fu)(r,()=>w.abort());let S={controller:w,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:v,params:b,redoRequest:!1,useIdentity:g.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},x=await async function(t){let r,i;await async function(t){let r=t.params.url,i=t.params.requestOptions,s=t.controller.signal,a=i.body,l=null,u=null;if(_&&"HTMLFormElement"in globalThis&&(a instanceof FormData?l=a:a instanceof HTMLFormElement&&(l=new FormData(a))),"string"==typeof a&&(u=a),t.fetchOptions={cache:i.cacheBust&&!m._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:"head"===i.method?"HEAD":"GET",mode:"cors",priority:g.priority,redirect:"follow",signal:s},(l||u)&&(t.fetchOptions.body=l||u),"anonymous"===i.authMode&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(r)||i.query?.token||l?.get("token")),!t.hasToken&&n.Z.apiKey&&(0,f.r)(r)&&(i.query||(i.query={}),i.query.token=n.Z.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!E(r)&&!(0,h.Hc)(s)){let n;"immediate"===i.authMode?(await I(),n=await o.id.getCredential(r,{signal:s}),t.credential=n):"no-prompt"===i.authMode?(await I(),n=await o.id.getCredential(r,{prompt:!1,signal:s}).catch(()=>{}),t.credential=n):o.id&&(n=o.id.findCredential(r)),n&&(t.credentialToken=n.token,t.useSSL=!!n.ssl)}}(t);try{do[r,i]=await T(t);while(!await A(t,r,i))}catch(s){let i=M("request:server",s,t.params,r);throw i.details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(i),i}let s=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!t.hasToken&&!t.credentialToken&&i.user?.username&&!(0,p.kl)(s)){let t=(0,p.P$)(s,!0);t&&g.trustedServers.push(t)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&(0,y.Hu)(i.authorizedCrossOriginNoCorsDomains)}let a=t.credential;if(a&&o.id){let t=o.id.findServerInfo(a.server),r=t&&t.owningSystemUrl;if(r){r=r.replace(/\/?$/,"/sharing");let t=o.id.findCredential(r,a.userId);t&&-1===o.id._getIdenticalSvcIdx(r,t)&&t.resources.unshift(r)}}return{data:i,getHeader:r?t=>r?.headers.get(t):C,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}(S);return v?.after?.(x),x}let g=n.Z.request,_="FormData"in globalThis,b=[499,498,403,401],v=["COM_0056","COM_0057","SB_0008"],w=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],C=()=>null,S=Symbol();function x(t){let r=(0,p.P$)(t);return!r||r.endsWith(".arcgis.com")||m._corsServers.includes(r)||(0,p.kl)(r)}function M(t,r,i,s){let n="Error",o={url:i.url,requestOptions:i.requestOptions,getHeader:C,ssl:!1};if(r instanceof a.Z)return r.details?(r.details=(0,u.d9)(r.details),r.details.url=i.url,r.details.requestOptions=i.requestOptions):r.details=o,r;if(r){let t=s&&(t=>s.headers.get(t)),i=s&&s.status,a=r.message;a&&(n=a),t&&(o.getHeader=t),o.httpStatus=(null!=r.httpCode?r.httpCode:r.code)||i||0,o.subCode=r.subcode,o.messageCode=r.messageCode,"string"==typeof r.details?o.messages=[r.details]:o.messages=r.details,o.raw=S in r?r[S]:r}return(0,h.D_)(r)?(0,h.zE)():new a.Z(t,n,o)}async function I(){o.id||await i.e(2505).then(i.bind(i,72505))}function E(t){return w.some(r=>r.test(t))}async function T(t){let r=t.params.url,i=t.params.requestOptions,s=t.fetchOptions??{},n=(0,p.jc)(r)||(0,p.HK)(r),a=i.responseType||"json",u=n?0:null!=i.timeout?i.timeout:g.timeout,d=!1;if(!n){let n;t.useSSL&&(r=(0,p.hO)(r)),i.cacheBust&&"default"===s.cache&&(r=(0,p.ZN)(r,"request.preventCache",Date.now()));let a={...i.query};t.credentialToken&&(a.token=t.credentialToken);let u=(0,p.B7)(a);(0,l.Z)("esri-url-encodes-apostrophe")&&(u=u.replace(/'/g,"%27"));let h=r.length+1+u.length;d="delete"===i.method||"post"===i.method||"put"===i.method||!!i.body||h>g.maxUrlLength;let f=i.useProxy||!!(0,p.ed)(r);if(f){let t=(0,p.b7)(r);n=t.path,!d&&n.length+1+h>g.maxUrlLength&&(d=!0),t.query&&(a={...t.query,...a})}if("HEAD"===s.method&&(d||f)){if(d){if(h>g.maxUrlLength)throw M("request:invalid-parameters",Error("URL exceeds maximum length"),t.params);throw M("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),t.params)}if(f)throw M("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),t.params)}if(d?(s.method="delete"===i.method?"DELETE":"put"===i.method?"PUT":"POST",i.body?r=(0,p.fl)(r,a):(s.body=(0,p.B7)(a),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):r=(0,p.fl)(r,a),f&&(t.useProxy=!0,r=`${n}?${r}`),a.token&&_&&s.body instanceof FormData&&!(0,c.P)(r)&&s.body.set("token",a.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!(0,p.D6)(r,(0,p.TI)())){if((0,p.kl)(r))t.withCredentials=!0;else if(o.id){let i=o.id.findServerInfo(r);i&&i.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(s.credentials="include",(0,y.jH)(r)&&await (0,y.jz)(d?(0,p.fl)(r,a):r))}let f,b,v=0,w=!1;u>0&&(v=setTimeout(()=>{w=!0,t.controller.abort()},u));try{if("native-request-init"===i.responseType)(b=s).url=r;else if("image"!==i.responseType||"default"!==s.cache||"GET"!==s.method||d||function(t){if(t){for(let r of Object.getOwnPropertyNames(t))if(t[r])return!0}return!1}(i.headers)||!n&&!t.useProxy&&g.proxyUrl&&!x(r)){if(f=await m._abortableFetch(r,s),t.useProxy||function(t){let r=(0,p.P$)(t);r&&!m._corsServers.includes(r)&&m._corsServers.push(r)}(r),"native"===i.responseType)b=f;else if("HEAD"!==s.method){if(f.ok){switch(a){case"array-buffer":b=await f.arrayBuffer();break;case"blob":case"image":b=await f.blob();break;default:b=await f.text()}if(v&&(clearTimeout(v),v=0),"json"===a||"xml"===a||"document"===a){if(b)switch(a){case"json":b=JSON.parse(b);break;case"xml":b=P(b,"application/xml");break;case"document":b=P(b,"text/html")}else b=null}if(b){if("array-buffer"===a||"blob"===a){let t=f.headers.get("Content-Type");if(t&&/application\/json|text\/plain/i.test(t)&&b["blob"===a?"size":"byteLength"]<=750)try{let t=await new Response(b).json();t.error&&(b=t)}catch{}}"image"===a&&b instanceof Blob&&(b=await k(URL.createObjectURL(b),t,!0))}}else b=await f.text()}}else b=await k(r,t)}catch(s){if("AbortError"===s.name){if(w)throw Error("Timeout exceeded");throw(0,h.zE)("Request canceled")}if(!(!f&&s instanceof TypeError&&g.proxyUrl)||i.body||"delete"===i.method||"head"===i.method||"post"===i.method||"put"===i.method||t.useProxy||x(r))throw s;t.redoRequest=!0,(0,p.tD)({proxyUrl:g.proxyUrl,urlPrefix:(0,p.P$)(r)??""})}finally{v&&clearTimeout(v)}return[f,b]}function P(t,r){let i;try{i=(new DOMParser).parseFromString(t,r)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw SyntaxError("XML Parse error");return i}async function A(t,r,i){let s,n;if(t.redoRequest)return t.redoRequest=!1,!1;let a=t.params.requestOptions;if(!r||"native"===a.responseType||"native-request-init"===a.responseType)return!0;if(!r.ok)throw(s=Error(`Unable to load ${r.url} status: ${r.status}`))[S]=i,s;i&&(i.error?s=i.error:"error"===i.status&&Array.isArray(i.messages)&&((s={...i})[S]=i,s.details=i.messages));let l,u=null;s&&(n=Number(s.code),u=s.hasOwnProperty("subcode")?Number(s.subcode):null,l=(l=s.messageCode)&&l.toUpperCase());let d=a.authMode;if(403===n&&(4===u||s.message&&s.message.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&("no-prompt"!==d||498===n)&&void 0!==n&&b.includes(n)&&!E(t.params.url)&&(403!==n||l&&!v.includes(l)&&(null==u||2===u&&t.credentialToken))){await I();try{let r=await o.id.getCredential(t.params.url,{error:M("request:server",s,t.params),prompt:"no-prompt"!==d,signal:t.controller.signal,token:t.credentialToken});return t.credential=r,t.credentialToken=r.token,t.useSSL=t.useSSL||r.ssl,!1}catch(r){if("no-prompt"===d)return t.credential=void 0,t.credentialToken=void 0,!1;s=r}}if(s)throw s;return!0}function k(t,r,i=!1){let s=r.controller.signal,n=new Image;return r.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=g.priority,n.src=t,(0,y.fY)(n,t,i,s)}m._abortableFetch=null,m._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"]},4756:(t,r,i)=>{"use strict";i.d(r,{F:()=>n,o:()=>o});var s=i(95758);function n(t){return{geometryType:(0,s.Ji)(t[0]),geometries:t.map(t=>t.toJSON())}}function o(t,r,i){let n=(0,s.q9)(r);return t.map(t=>{let r=n.fromJSON(t);return r.spatialReference=i,r})}},92379:(t,r,i)=>{"use strict";i.d(r,{A:()=>function t(r){let i={};for(let s in r){if("declaredClass"===s)continue;let n=r[s];if(null!=n&&"function"!=typeof n){if(Array.isArray(n)){i[s]=[];for(let r=0;r<n.length;r++)i[s][r]=t(n[r])}else"object"==typeof n?n.toJSON&&(i[s]=JSON.stringify(n)):i[s]=n}}return i}})},36834:(t,r,i)=>{"use strict";i.d(r,{F:()=>u,e:()=>l});var s=i(73463),n=i(7255),o=i(55308),a=i(57775);async function l(t,r,i){let s=await u(t,r,i);return o.default.fromJSON(s)}async function u(t,r,i){let o=(0,s.en)(t),l={...i},u=a.Z.from(r),{data:d}=await (0,n.executeQuery)(o,u,u.sourceSpatialReference,l);return d}},7938:(t,r,i)=>{"use strict";i.d(r,{P:()=>l});var s=i(82639),n=i(35562),o=i(32488);function a(t,r,i){if(null==t.hasM||t.hasZ)for(let t of r)for(let r of t)r.length>2&&(r[2]*=i)}function l(t,r,i){if(!t&&!r||!i)return;let s=(0,n._R)(i);u(t,i,s),u(r,i,s)}function u(t,r,i){if(t)for(let l of t)(function(t,r,i){if((0,s.Wi)(t)||!t.spatialReference||(0,o.fS)(t.spatialReference,r))return;let l=(0,n._R)(t.spatialReference)/i;if(1!==l){if("x"in t)null!=t.z&&(t.z*=l);else if("rings"in t)a(t,t.rings,l);else if("paths"in t)a(t,t.paths,l);else if("points"in t&&(null==t.hasM||t.hasZ))for(let r of t.points)r.length>2&&(r[2]*=l)}})(l.geometry,r,i)}},68146:(t,r,i)=>{"use strict";i.d(r,{G$:()=>x,K9:()=>P,O7:()=>p});var s=i(12790),n=i(82639),o=i(61812),a=i(36543),l=i(540);let u=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],d=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],h=["upperLeft","lowerLeft"];function p(t){return t>=u.length?null:u[t]}function c(t){return t>=h.length?null:h[t]}function f(t,r){return r>=t.geometryTypes.length?null:t.geometryTypes[r]}function y(t,r,i){let s=t.asUnsafe(),n=r.createPointGeometry(i);for(;s.next();)if(3===s.tag()){let t=s.getUInt32(),i=s.pos()+t,o=0;for(;s.pos()<i;)r.addCoordinatePoint(n,s.getSInt64(),o++)}else s.skip();return n}function m(t,r,i){let s=t.asUnsafe(),n=r.createGeometry(i),o=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;s.next();)switch(s.tag()){case 2:{let t=s.getUInt32(),i=s.pos()+t,o=0;for(;s.pos()<i;)r.addLength(n,s.getUInt32(),o++);break}case 3:{let t=s.getUInt32(),i=s.pos()+t,a=0;for(r.allocateCoordinates(n);s.pos()<i;)r.addCoordinate(n,s.getSInt64(),a),++a===o&&(a=0);break}default:s.skip()}return n}function g(t){let r=t.asUnsafe(),i=new a.Z,s="esriGeometryPoint";for(;r.next();)switch(r.tag()){case 2:{let t=r.getUInt32(),s=r.pos()+t;for(;r.pos()<s;)i.lengths.push(r.getUInt32());break}case 3:{let t=r.getUInt32(),s=r.pos()+t;for(;r.pos()<s;)i.coords.push(r.getSInt64());break}case 1:s=l.A[r.getEnum()];break;default:r.skip()}return{queryGeometry:i,queryGeometryType:s}}function _(t){let r=t.asUnsafe();for(;r.next();)switch(r.tag()){case 1:return r.getString();case 2:return r.getFloat();case 3:return r.getDouble();case 4:return r.getSInt32();case 5:return r.getUInt32();case 6:return r.getInt64();case 7:return r.getUInt64();case 8:return r.getSInt64();case 9:return r.getBool();default:return r.skip(),null}return null}function b(t){let r=t.asUnsafe(),i={type:p(0)};for(;r.next();)switch(r.tag()){case 1:i.name=r.getString();break;case 2:i.type=p(r.getEnum());break;case 3:i.alias=r.getString();break;case 4:var s;i.sqlType=(s=r.getEnum())>=d.length?null:d[s];break;case 5:default:r.skip();break;case 6:i.defaultValue=r.getString()}return i}function v(t){let r={},i=t.asUnsafe();for(;i.next();)switch(i.tag()){case 1:r.name=i.getString();break;case 2:r.isSystemMaintained=i.getBool();break;default:i.skip()}return r}function w(t,r,i,s){let n=r.createFeature(i),o=0;for(;t.next();)switch(t.tag()){case 1:{let r=s[o++].name;n.attributes[r]=t.processMessage(_);break}case 2:n.geometry=t.processMessageWithArgs(m,r,i);break;case 4:n.centroid=t.processMessageWithArgs(y,r,i);break;default:t.skip()}return n}function C(t){let r=[1,1,1,1],i=t.asUnsafe();for(;i.next();)switch(i.tag()){case 1:r[0]=i.getDouble();break;case 2:r[1]=i.getDouble();break;case 4:r[2]=i.getDouble();break;case 3:r[3]=i.getDouble();break;default:i.skip()}return r}function S(t){let r=[0,0,0,0],i=t.asUnsafe();for(;i.next();)switch(i.tag()){case 1:r[0]=i.getDouble();break;case 2:r[1]=i.getDouble();break;case 4:r[2]=i.getDouble();break;case 3:r[3]=i.getDouble();break;default:i.skip()}return r}function x(t){let r={originPosition:c(0)},i=t.asUnsafe();for(;i.next();)switch(i.tag()){case 1:r.originPosition=c(i.getEnum());break;case 2:r.scale=i.processMessage(C);break;case 3:r.translate=i.processMessage(S);break;default:i.skip()}return r}function M(t){let r={},i=t.asUnsafe();for(;i.next();)switch(i.tag()){case 1:r.shapeAreaFieldName=i.getString();break;case 2:r.shapeLengthFieldName=i.getString();break;case 3:r.units=i.getString();break;default:i.skip()}return r}function I(t,r){let i=r.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:i.wkid=t.getUInt32();break;case 5:i.wkt=t.getString();break;case 2:i.latestWkid=t.getUInt32();break;case 3:i.vcsWkid=t.getUInt32();break;case 4:i.latestVcsWkid=t.getUInt32();break;default:t.skip()}return i}function E(t,r){let i=r.createFeatureResult(),s=t.asUnsafe();i.geometryType=f(r,0);let n=!1;for(;s.next();)switch(s.tag()){case 1:i.objectIdFieldName=s.getString();break;case 3:i.globalIdFieldName=s.getString();break;case 4:i.geohashFieldName=s.getString();break;case 5:i.geometryProperties=s.processMessage(M);break;case 7:i.geometryType=f(r,s.getEnum());break;case 8:i.spatialReference=s.processMessageWithArgs(I,r);break;case 10:i.hasZ=s.getBool();break;case 11:i.hasM=s.getBool();break;case 12:i.transform=s.processMessage(x);break;case 9:{let t=s.getBool();i.exceededTransferLimit=t;break}case 13:r.addField(i,s.processMessage(b));break;case 15:n||(r.prepareFeatures(i),n=!0),r.addFeature(i,s.processMessageWithArgs(w,r,i,i.fields));break;case 2:i.uniqueIdField=s.processMessage(v);break;default:s.skip()}return r.finishFeatureResult(i),i}function T(t,r){let i={},s=null;for(;t.next();)switch(t.tag()){case 4:s=t.processMessageWithArgs(g);break;case 1:i.featureResult=t.processMessageWithArgs(E,r);break;default:t.skip()}return(0,n.pC)(s)&&i.featureResult&&r.addQueryGeometry(i,s),i}function P(t,r){try{let i=new o.Z(new Uint8Array(t),new DataView(t)),s={};for(;i.next();)2===i.tag()?s.queryResult=i.processMessageWithArgs(T,r):i.skip();return s}catch(t){throw new s.Z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:t})}}},540:(t,r,i)=>{"use strict";i.d(r,{A:()=>u,J:()=>d});var s=i(35562),n=i(32488),o=i(77710),a=i(73181),l=i(36543);let u=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class d{constructor(t){this._options=t,this.geometryTypes=u,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new a.Z}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||(0,n.fS)(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;let r=(0,s._R)(this._options.sourceSpatialReference)/(0,s._R)(t.spatialReference);if(1!==r)for(let i of t.features){if(!(0,o.S6)(i))continue;let t=i.geometry.coords;for(let i=2;i<t.length;i+=3)t[i]*=r}}addFeature(t,r){t.features.push(r)}createFeature(){return new o.u_}createSpatialReference(){return{wkid:0}}createGeometry(){return new l.Z}addField(t,r){t.fields.push(r)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((t,r)=>t+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,r){t.coords[this._coordinatePtr++]=r}addCoordinatePoint(t,r){t.coords.push(r)}addLength(t,r){t.lengths.push(r)}addQueryGeometry(t,r){t.queryGeometry=r.queryGeometry,t.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new l.Z}}},90469:(t,r,i)=>{"use strict";i.d(r,{C:()=>n});var s=i(68146);function n(t,r){let i=(0,s.K9)(t,r),n=i.queryResult.featureResult,o=i.queryResult.queryGeometry,a=i.queryResult.queryGeometryType;if(n&&n.features&&n.features.length&&n.objectIdFieldName){let t=n.objectIdFieldName;for(let r of n.features)r.attributes&&(r.objectId=r.attributes[t])}return n&&(n.queryGeometry=o,n.queryGeometryType=a),n}},7255:(t,r,i)=>{"use strict";i.r(r),i.d(r,{encodeGeometry:()=>p,executeQuery:()=>f,executeQueryForCount:()=>_,executeQueryForExtent:()=>b,executeQueryForIds:()=>g,executeQueryPBF:()=>y,executeQueryPBFBuffer:()=>m,queryToQueryStringParameters:()=>c,runQuery:()=>v});var s=i(57837),n=i(82639),o=i(82583),a=i(95758),l=i(80385),u=i(92379),d=i(90469),h=i(83866);function p(t,r){if(r&&"extent"===t.type)return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(r&&"point"===t.type)return`${t.x},${t.y}`;let i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function c(t,r){let i,s,o;let l=t.geometry,u=t.toJSON();if(delete u.compactGeometryEnabled,delete u.defaultSpatialReferenceEnabled,(0,n.pC)(l)&&(s=l.spatialReference,o=l.spatialReference.wkid||JSON.stringify(l.spatialReference),u.geometryType=(0,a.Ji)(l),u.geometry=p(l,t.compactGeometryEnabled),u.inSR=o),u.groupByFieldsForStatistics&&(u.groupByFieldsForStatistics=u.groupByFieldsForStatistics.join(",")),u.objectIds&&(u.objectIds=u.objectIds.join(",")),u.orderByFields&&(u.orderByFields=u.orderByFields.join(",")),!u.outFields||!u.returnDistinctValues&&(r?.returnCountOnly||r?.returnExtentOnly||r?.returnIdsOnly)?delete u.outFields:u.outFields.includes("*")?u.outFields="*":u.outFields=u.outFields.join(","),u.outSR?(u.outSR=u.outSR.wkid||JSON.stringify(u.outSR),i=t.outSpatialReference):l&&(u.returnGeometry||u.returnCentroid)&&(u.outSR=u.inSR,i=s),u.returnGeometry&&delete u.returnGeometry,u.outStatistics&&(u.outStatistics=JSON.stringify(u.outStatistics)),u.fullText&&(u.fullText=JSON.stringify(u.fullText)),u.pixelSize&&(u.pixelSize=JSON.stringify(u.pixelSize)),u.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&(0,n.pC)(s)&&(0,n.pC)(t.quantizationParameters)&&(0,n.pC)(t.quantizationParameters.extent)&&s.equals(t.quantizationParameters.extent.spatialReference)&&delete u.quantizationParameters.extent.spatialReference,u.quantizationParameters=JSON.stringify(u.quantizationParameters)),u.parameterValues&&(u.parameterValues=JSON.stringify(u.parameterValues)),u.rangeValues&&(u.rangeValues=JSON.stringify(u.rangeValues)),u.dynamicDataSource&&(u.layer=JSON.stringify({source:u.dynamicDataSource}),delete u.dynamicDataSource),u.timeExtent){let{start:t,end:r}=u.timeExtent;null==t&&null==r||(u.time=t===r?t:`${t??"null"},${r??"null"}`),delete u.timeExtent}return t.defaultSpatialReferenceEnabled&&(0,n.pC)(s)&&(0,n.pC)(i)&&s.equals(i)&&(u.defaultSR=u.inSR,delete u.inSR,delete u.outSR),u}async function f(t,r,i,s){let o=(0,n.pC)(r.timeExtent)&&r.timeExtent.isEmpty?{data:{features:[]}}:await v(t,r,"json",s);return(0,h.p)(r,i,o.data),o}async function y(t,r,i,s){if((0,n.pC)(r.timeExtent)&&r.timeExtent.isEmpty)return{data:i.createFeatureResult()};let o=await m(t,r,s);return o.data=(0,d.C)(o.data,i),o}function m(t,r,i){return v(t,r,"pbf",i)}function g(t,r,i){return(0,n.pC)(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):v(t,r,"json",i,{returnIdsOnly:!0})}function _(t,r,i){return(0,n.pC)(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):v(t,r,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function b(t,r,i){return(0,n.pC)(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):v(t,r,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(t=>{let r=t.data;if(r.hasOwnProperty("extent"))return t;if(r.features||r.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return t})}function v(t,r,i,a={},d={}){let h="string"==typeof t?(0,o.mN)(t):t,p=r.geometry?[r.geometry]:[];return a.responseType="pbf"===i?"array-buffer":"json",(0,l.aX)(p,null,a).then(t=>{let l=t&&t[0];(0,n.pC)(l)&&((r=r.clone()).geometry=l);let p=(0,u.A)({...h.query,f:i,...d,...c(r,d)});return(0,s.default)((0,o.v_)(h.path,"query"),{...a,query:{...p,...a.query}})})}},83866:(t,r,i)=>{"use strict";i.d(r,{p:()=>o});var s=i(82639),n=i(46262);function o(t,r,i){if(!i||!i.features||!i.hasZ)return;let o=(0,n.k)(i.geometryType,r,t.outSpatialReference);if(!(0,s.Wi)(o))for(let t of i.features)o(t.geometry)}},35052:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314)),u=i(30407);let d={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}},h=s=class extends o.wq{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){let{exifInfo:t}=this;return d[function(t){let{exifInfo:r,exifName:i,tagName:s}=t;if(!r||!i||!s)return null;let n=r.find(t=>t.name===i);return n?function(t){let{tagName:r,tags:i}=t;if(!i||!r)return null;let s=i.find(t=>t.name===r);return s&&s.value||null}({tagName:s,tags:n.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t})]||null}clone(){return new s({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};(0,n._)([(0,a.Cb)({type:String})],h.prototype,"contentType",void 0),(0,n._)([(0,a.Cb)()],h.prototype,"exifInfo",void 0),(0,n._)([(0,a.Cb)({readOnly:!0})],h.prototype,"orientationInfo",null),(0,n._)([(0,a.Cb)({type:l.z8})],h.prototype,"id",void 0),(0,n._)([(0,a.Cb)({type:String})],h.prototype,"globalId",void 0),(0,n._)([(0,a.Cb)({type:String})],h.prototype,"keywords",void 0),(0,n._)([(0,a.Cb)({type:String})],h.prototype,"name",void 0),(0,n._)([(0,a.Cb)({json:{read:!1}})],h.prototype,"parentGlobalId",void 0),(0,n._)([(0,a.Cb)({json:{read:!1}})],h.prototype,"parentObjectId",void 0),(0,n._)([(0,a.Cb)({type:l.z8})],h.prototype,"size",void 0),(0,n._)([(0,a.Cb)({json:{read:!1}})],h.prototype,"url",void 0);let p=h=s=(0,n._)([(0,u.j)("esri.layers.support.AttachmentInfo")],h)},56761:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s,n=i(24765),o=i(55410),a=i(59118),l=i(53919),u=i(21314),d=i(21374),h=i(30407),p=i(47846);let c=s=class extends p.Z{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new s({fromColor:(0,a.d9)(this.fromColor),toColor:(0,a.d9)(this.toColor),algorithm:this.algorithm})}};(0,n._)([(0,d.J)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],c.prototype,"algorithm",void 0),(0,n._)([(0,l.Cb)({type:o.Z,json:{type:[u.z8],write:!0}})],c.prototype,"fromColor",void 0),(0,n._)([(0,l.Cb)({type:o.Z,json:{type:[u.z8],write:!0}})],c.prototype,"toColor",void 0),(0,n._)([(0,l.Cb)({type:["algorithmic"]})],c.prototype,"type",void 0);let f=c=s=(0,n._)([(0,h.j)("esri.rest.support.AlgorithmicColorRamp")],c)},96896:(t,r,i)=>{"use strict";i.d(r,{Z:()=>c});var s,n=i(24765),o=i(72140),a=i(59118),l=i(53919),u=i(21314),d=i(30407),h=i(62300);let p=s=class extends o.wq{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10}clone(){return new s((0,a.d9)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,n._)([(0,l.Cb)({type:[String],json:{write:!0}})],p.prototype,"attachmentTypes",void 0),(0,n._)([(0,l.Cb)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],p.prototype,"attachmentsWhere",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],p.prototype,"cacheHint",void 0),(0,n._)([(0,l.Cb)({type:[String],json:{write:!0}})],p.prototype,"keywords",void 0),(0,n._)([(0,l.Cb)({type:[Number],json:{write:!0}})],p.prototype,"globalIds",void 0),(0,n._)([(0,l.Cb)({json:{write:!0}})],p.prototype,"name",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],p.prototype,"num",void 0),(0,n._)([(0,l.Cb)({type:[Number],json:{write:!0}})],p.prototype,"objectIds",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{default:!1,write:!0}})],p.prototype,"returnMetadata",void 0),(0,n._)([(0,l.Cb)({type:[Number],json:{write:!0}})],p.prototype,"size",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],p.prototype,"start",void 0),(0,n._)([(0,h.c)("start"),(0,h.c)("num")],p.prototype,"writeStart",null),(0,n._)([(0,l.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],p.prototype,"where",void 0),(p=s=(0,n._)([(0,d.j)("esri.rest.support.AttachmentQuery")],p)).from=(0,u.se)(p);let c=p},47846:(t,r,i)=>{"use strict";i.d(r,{Z:()=>u});var s=i(24765),n=i(72140),o=i(53919),a=(i(99950),i(21314),i(30407));let l=class extends n.wq{constructor(t){super(t),this.type=null}};(0,s._)([(0,o.Cb)({readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0);let u=l=(0,s._)([(0,a.j)("esri.rest.support.ColorRamp")],l)},55308:(t,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>w});var s,n=i(24765),o=i(64012),a=i(94323),l=i(84576),u=i(72140),d=i(59118),h=i(82639),p=i(53919),c=(i(21314),i(71169)),f=i(30407),y=i(62300),m=i(371),g=i(95758),_=i(32195);let b=new l.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),v=s=class extends u.wq{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,r){let i=m.Z.fromJSON(r.spatialReference),s=[];for(let r=0;r<t.length;r++){let n=t[r],o=a.Z.fromJSON(n),l=n.geometry&&n.geometry.spatialReference;(0,h.pC)(o.geometry)&&!l&&(o.geometry.spatialReference=i);let u=n.aggregateGeometries,d=o.aggregateGeometries;if(u&&(0,h.pC)(d))for(let t in d){let r=d[t],s=u[t]?.spatialReference;(0,h.pC)(r)&&!s&&(r.spatialReference=i)}s.push(o)}return s}writeGeometryType(t,r,i,s){if(t)return void b.write(t,r,i,s);let{features:n}=this;if(n){for(let t of n)if(t&&(0,h.pC)(t.geometry))return void b.write(t.geometry.type,r,i,s)}}readQueryGeometry(t,r){if(!t)return null;let i=!!t.spatialReference,s=(0,g.im)(t);return s&&!i&&r.spatialReference&&(s.spatialReference=m.Z.fromJSON(r.spatialReference)),s}writeSpatialReference(t,r){if(t)return void(r.spatialReference=t.toJSON());let{features:i}=this;if(i){for(let t of i)if(t&&(0,h.pC)(t.geometry)&&t.geometry.spatialReference)return void(r.spatialReference=t.geometry.spatialReference.toJSON())}}clone(){return new s(this.cloneProperties())}cloneProperties(){return(0,d.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){let r=this.write();if(r.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<r.features.length;i++){let s=r.features[i];if(s.geometry){let r=t&&t[i];s.geometry=r&&r.toJSON()||s.geometry}}return r}quantize(t){let{scale:[r,i],translate:[s,n]}=t,o=this.features,a=this._getQuantizationFunction(this.geometryType,t=>Math.round((t-s)/r),t=>Math.round((n-t)/i));for(let t=0,r=o.length;t<r;t++)a?.(h.Wg(o[t].geometry))||(o.splice(t,1),t--,r--);return this.transform=t,this}unquantize(){let{geometryType:t,features:r,transform:i}=this;if(!i)return this;let{translate:[s,n],scale:[o,a]}=i,l=this._getHydrationFunction(t,t=>t*o+s,t=>n-t*a);for(let{geometry:t}of r)(0,h.pC)(t)&&l&&l(t);return this.transform=null,this}_quantizePoints(t,r,i){let s,n;let o=[];for(let a=0,l=t.length;a<l;a++){let l=t[a];if(a>0){let t=r(l[0]),a=i(l[1]);t===s&&a===n||(o.push([t-s,a-n]),s=t,n=a)}else s=r(l[0]),n=i(l[1]),o.push([s,n])}return o.length>0?o:null}_getQuantizationFunction(t,r,i){return"point"===t?t=>(t.x=r(t.x),t.y=i(t.y),t):"polyline"===t||"polygon"===t?t=>{let s=(0,g.oU)(t)?t.rings:t.paths,n=[];for(let t=0,o=s.length;t<o;t++){let o=s[t],a=this._quantizePoints(o,r,i);a&&n.push(a)}return n.length>0?((0,g.oU)(t)?t.rings=n:t.paths=n,t):null}:"multipoint"===t?t=>{let s=this._quantizePoints(t.points,r,i);return s&&s.length>0?(t.points=s,t):null}:"extent"===t?t=>t:null}_getHydrationFunction(t,r,i){return"point"===t?t=>{t.x=r(t.x),t.y=i(t.y)}:"polyline"===t||"polygon"===t?t=>{let s,n;let o=(0,g.oU)(t)?t.rings:t.paths;for(let t=0,a=o.length;t<a;t++){let a=o[t];for(let t=0,o=a.length;t<o;t++){let o=a[t];t>0?(s+=o[0],n+=o[1]):(s=o[0],n=o[1]),o[0]=r(s),o[1]=i(n)}}}:"extent"===t?t=>{t.xmin=r(t.xmin),t.ymin=i(t.ymin),t.xmax=r(t.xmax),t.ymax=i(t.ymax)}:"multipoint"===t?t=>{let s,n;let o=t.points;for(let t=0,a=o.length;t<a;t++){let a=o[t];t>0?(s+=a[0],n+=a[1]):(s=a[0],n=a[1]),a[0]=r(s),a[1]=i(n)}}:null}};(0,n._)([(0,p.Cb)({type:String,json:{write:!0}})],v.prototype,"displayFieldName",void 0),(0,n._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],v.prototype,"exceededTransferLimit",void 0),(0,n._)([(0,p.Cb)({type:[a.Z],json:{write:!0}})],v.prototype,"features",void 0),(0,n._)([(0,c.r)("features")],v.prototype,"readFeatures",null),(0,n._)([(0,p.Cb)({type:[_.Z],json:{write:!0}})],v.prototype,"fields",void 0),(0,n._)([(0,p.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:b.read}}})],v.prototype,"geometryType",void 0),(0,n._)([(0,y.c)("geometryType")],v.prototype,"writeGeometryType",null),(0,n._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],v.prototype,"hasM",void 0),(0,n._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],v.prototype,"hasZ",void 0),(0,n._)([(0,p.Cb)({types:o.qM,json:{write:!0}})],v.prototype,"queryGeometry",void 0),(0,n._)([(0,c.r)("queryGeometry")],v.prototype,"readQueryGeometry",null),(0,n._)([(0,p.Cb)({type:m.Z,json:{write:!0}})],v.prototype,"spatialReference",void 0),(0,n._)([(0,y.c)("spatialReference")],v.prototype,"writeSpatialReference",null),(0,n._)([(0,p.Cb)({json:{write:!0}})],v.prototype,"transform",void 0),(v=s=(0,n._)([(0,f.j)("esri.rest.support.FeatureSet")],v)).prototype.toJSON.isDefaultToJSON=!0;let w=v},23088:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s,n=i(24765),o=i(59118),a=i(53919),l=(i(21314),i(30407)),u=i(56761),d=i(47846);let h=s=class extends d.Z{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new s({colorRamps:(0,o.d9)(this.colorRamps)})}};(0,n._)([(0,a.Cb)({type:[u.Z],json:{write:!0}})],h.prototype,"colorRamps",void 0),(0,n._)([(0,a.Cb)({type:["multipart"]})],h.prototype,"type",void 0);let p=h=s=(0,n._)([(0,l.j)("esri.rest.support.MultipartColorRamp")],h)},60831:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s,n=i(24765),o=(i(64012),i(84576)),a=i(72140),l=i(59118),u=i(53919),d=(i(21314),i(30407)),h=i(18721);let p=new o.X({upperLeft:"upper-left",lowerLeft:"lower-left"}),c=s=class extends a.wq{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new s((0,l.d9)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,n._)([(0,u.Cb)({type:h.Z,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],c.prototype,"extent",void 0),(0,n._)([(0,u.Cb)({type:["view","edit"],json:{write:!0}})],c.prototype,"mode",void 0),(0,n._)([(0,u.Cb)({type:String,json:{read:p.read,write:p.write}})],c.prototype,"originPosition",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],c.prototype,"tolerance",void 0);let f=c=s=(0,n._)([(0,d.j)("esri.rest.support.QuantizationParameters")],c)},57775:(t,r,i)=>{"use strict";i.d(r,{Z:()=>A});var s=i(24765),n=i(64012),o=i(67005),a=i(84576),l=i(72140),u=i(59118),d=i(82639),h=i(53919),p=i(36844),c=i(21374),f=i(30407),y=i(62300),m=i(21314),g=i(95758),_=i(93948),b=i(34577);i(99950);let v=class extends(0,b.J)(l.wq){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};(0,s._)([(0,h.Cb)({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,d.pC)(this.onFields)&&this.onFields.length>0}}}}})],v.prototype,"onFields",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],v.prototype,"operator",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],v.prototype,"searchTerm",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],v.prototype,"searchType",void 0);let w=v=(0,s._)([(0,f.j)("esri.rest.support.FullTextSearch")],v);var C,S=i(60831),x=i(81174),M=i(371),I=i(46472);let E=new a.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),T=new a.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),P=C=class extends l.wq{constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(t){return(0,m.TJ)(C,t)}castDatumTransformation(t){return"number"==typeof t||"object"==typeof t?t:null}writeHistoricMoment(t,r){r.historicMoment=t&&t.getTime()}writeParameterValues(t,r){if(t){let i={};for(let r in t){let s=t[r];Array.isArray(s)?i[r]=s.map(t=>t instanceof Date?t.getTime():t):s instanceof Date?i[r]=s.getTime():i[r]=s}r.parameterValues=i}}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,r.where="1=1"}writeWhere(t,r){r.where=t||"1=1"}clone(){return new C((0,u.d9)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:(0,d.pC)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};P.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,s._)([(0,h.Cb)({json:{write:!0}})],P.prototype,"aggregateIds",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],P.prototype,"cacheHint",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"compactGeometryEnabled",void 0),(0,s._)([(0,h.Cb)({json:{write:!0}})],P.prototype,"datumTransformation",void 0),(0,s._)([(0,p.p)("datumTransformation")],P.prototype,"castDatumTransformation",null),(0,s._)([(0,h.Cb)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"defaultSpatialReferenceEnabled",void 0),(0,s._)([(0,h.Cb)({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],P.prototype,"distance",void 0),(0,s._)([(0,h.Cb)({type:_.n,json:{write:!0}})],P.prototype,"dynamicDataSource",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"formatOf3DObjects",void 0),(0,s._)([(0,h.Cb)({type:[w],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,d.pC)(this.fullText)&&this.fullText.length>0}}}}})],P.prototype,"fullText",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"gdbVersion",void 0),(0,s._)([(0,h.Cb)({types:n.qM,json:{read:g.im,write:!0}})],P.prototype,"geometry",void 0),(0,s._)([(0,h.Cb)({type:Number,json:{write:!0}})],P.prototype,"geometryPrecision",void 0),(0,s._)([(0,h.Cb)({type:[String],json:{write:!0}})],P.prototype,"groupByFieldsForStatistics",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"having",void 0),(0,s._)([(0,h.Cb)({type:Date})],P.prototype,"historicMoment",void 0),(0,s._)([(0,y.c)("historicMoment")],P.prototype,"writeHistoricMoment",null),(0,s._)([(0,h.Cb)({type:Number,json:{write:!0}})],P.prototype,"maxAllowableOffset",void 0),(0,s._)([(0,h.Cb)({type:Number,cast:t=>t<1?1:t>C.MAX_MAX_RECORD_COUNT_FACTOR?C.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],P.prototype,"maxRecordCountFactor",void 0),(0,s._)([(0,h.Cb)({type:["xyFootprint"],json:{write:!0}})],P.prototype,"multipatchOption",void 0),(0,s._)([(0,h.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],P.prototype,"num",void 0),(0,s._)([(0,h.Cb)({json:{write:!0}})],P.prototype,"objectIds",void 0),(0,s._)([(0,h.Cb)({type:[String],json:{write:!0}})],P.prototype,"orderByFields",void 0),(0,s._)([(0,h.Cb)({type:[String],json:{write:!0}})],P.prototype,"outFields",void 0),(0,s._)([(0,h.Cb)({type:M.Z,json:{name:"outSR",write:!0}})],P.prototype,"outSpatialReference",void 0),(0,s._)([(0,h.Cb)({type:[x.Z],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,d.pC)(this.outStatistics)&&this.outStatistics.length>0}}}}})],P.prototype,"outStatistics",void 0),(0,s._)([(0,h.Cb)({json:{write:!0}})],P.prototype,"parameterValues",void 0),(0,s._)([(0,y.c)("parameterValues")],P.prototype,"writeParameterValues",null),(0,s._)([(0,h.Cb)({type:I.Z,json:{write:!0}})],P.prototype,"pixelSize",void 0),(0,s._)([(0,h.Cb)({type:S.Z,json:{write:!0}})],P.prototype,"quantizationParameters",void 0),(0,s._)([(0,h.Cb)({type:[Object],json:{write:!0}})],P.prototype,"rangeValues",void 0),(0,s._)([(0,h.Cb)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],P.prototype,"relationParameter",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"resultType",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"returnCentroid",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"returnDistinctValues",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{default:!0,write:!0}})],P.prototype,"returnExceededLimitFeatures",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{write:!0}})],P.prototype,"returnGeometry",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"returnQueryGeometry",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"returnM",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],P.prototype,"returnZ",void 0),(0,s._)([(0,h.Cb)({type:M.Z,json:{write:!0}})],P.prototype,"sourceSpatialReference",void 0),(0,s._)([(0,c.J)(E,{ignoreUnknown:!1,name:"spatialRel"})],P.prototype,"spatialRelationship",void 0),(0,s._)([(0,h.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],P.prototype,"start",void 0),(0,s._)([(0,y.c)("start"),(0,y.c)("num")],P.prototype,"writeStart",null),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"sqlFormat",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:!0}})],P.prototype,"text",void 0),(0,s._)([(0,h.Cb)({type:o.Z,json:{write:!0}})],P.prototype,"timeExtent",void 0),(0,s._)([(0,h.Cb)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"timeReferenceUnknownClient",void 0),(0,s._)([(0,c.J)(T,{ignoreUnknown:!1}),(0,h.Cb)({json:{write:{overridePolicy(t){return{enabled:!!t&&null!=this.distance&&this.distance>0}}}}})],P.prototype,"units",void 0),(0,s._)([(0,h.Cb)({type:String,json:{write:{overridePolicy(t){return{enabled:null!=t||null!=this.start&&this.start>0}}}}})],P.prototype,"where",void 0),(0,s._)([(0,y.c)("where")],P.prototype,"writeWhere",null);let A=P=C=(0,s._)([(0,f.j)("esri.rest.support.Query")],P)},58531:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s,n=i(24765),o=(i(64012),i(72140)),a=i(59118),l=i(53919),u=i(21314),d=i(30407),h=i(62300),p=i(93948),c=i(371);let f=s=class extends o.wq{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,r){r.historicMoment=t&&t.getTime()}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(r.definitionExpression="1=1")}clone(){return new s((0,a.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,n._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"cacheHint",void 0),(0,n._)([(0,l.Cb)({type:p.n,json:{write:!0}})],f.prototype,"dynamicDataSource",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],f.prototype,"gdbVersion",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],f.prototype,"geometryPrecision",void 0),(0,n._)([(0,l.Cb)({type:Date})],f.prototype,"historicMoment",void 0),(0,n._)([(0,h.c)("historicMoment")],f.prototype,"_writeHistoricMoment",null),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0}})],f.prototype,"maxAllowableOffset",void 0),(0,n._)([(0,l.Cb)({type:[Number],json:{write:!0}})],f.prototype,"objectIds",void 0),(0,n._)([(0,l.Cb)({type:[String],json:{write:!0}})],f.prototype,"orderByFields",void 0),(0,n._)([(0,l.Cb)({type:[String],json:{write:!0}})],f.prototype,"outFields",void 0),(0,n._)([(0,l.Cb)({type:c.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],f.prototype,"outSpatialReference",void 0),(0,n._)([(0,l.Cb)({json:{write:!0}})],f.prototype,"relationshipId",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],f.prototype,"start",void 0),(0,n._)([(0,h.c)("start"),(0,h.c)("num")],f.prototype,"writeStart",null),(0,n._)([(0,l.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],f.prototype,"num",void 0),(0,n._)([(0,l.Cb)({json:{write:!0}})],f.prototype,"returnGeometry",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],f.prototype,"returnM",void 0),(0,n._)([(0,l.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],f.prototype,"returnZ",void 0),(0,n._)([(0,l.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],f.prototype,"where",void 0),(f=s=(0,n._)([(0,d.j)("esri.rest.support.RelationshipQuery")],f)).from=(0,u.se)(f);let y=f},81174:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s,n=i(24765),o=i(84576),a=i(72140),l=i(59118),u=i(53919),d=(i(21314),i(30407)),h=i(62300);let p=new o.X({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"}),c=s=class extends a.wq{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,r){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(r.statisticParameters=(0,l.d9)(t))}clone(){return new s({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,l.d9)(this.statisticParameters)})}};(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],c.prototype,"maxPointCount",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],c.prototype,"maxRecordCount",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],c.prototype,"maxVertexCount",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"onStatisticField",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"outStatisticFieldName",void 0),(0,n._)([(0,u.Cb)({type:String,json:{read:{source:"statisticType",reader:p.read},write:{target:"statisticType",writer:p.write}}})],c.prototype,"statisticType",void 0),(0,n._)([(0,u.Cb)({type:Object})],c.prototype,"statisticParameters",void 0),(0,n._)([(0,h.c)("statisticParameters")],c.prototype,"writeStatisticParameters",null);let f=c=s=(0,n._)([(0,d.j)("esri.rest.support.StatisticDefinition")],c)},88794:(t,r,i)=>{"use strict";i.d(r,{Z:()=>x});var s,n=i(24765),o=i(64012),a=i(67005),l=i(84576),u=i(72140),d=i(59118),h=i(82639),p=i(53919),c=i(21314),f=i(30407),y=i(62300),m=i(95758);i(99950);let g=s=class extends u.wq{constructor(t){super(t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new s({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,n._)([(0,p.Cb)({type:[String],json:{write:!0}})],g.prototype,"groupByFields",void 0),(0,n._)([(0,p.Cb)({type:Number,json:{write:!0}})],g.prototype,"topCount",void 0),(0,n._)([(0,p.Cb)({type:[String],json:{write:!0}})],g.prototype,"orderByFields",void 0);let _=g=s=(0,n._)([(0,f.j)("esri.rest.support.TopFilter")],g);var b,v=i(371);let w=new l.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),C=new l.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),S=b=class extends u.wq{constructor(t){super(t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(t,r){r.resultOffset=this.start,r.resultRecordCount=this.num||10}clone(){return new b((0,d.d9)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,n._)([(0,p.Cb)({type:Boolean,json:{write:!0}})],S.prototype,"cacheHint",void 0),(0,n._)([(0,p.Cb)({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],S.prototype,"distance",void 0),(0,n._)([(0,p.Cb)({types:o.qM,json:{read:m.im,write:!0}})],S.prototype,"geometry",void 0),(0,n._)([(0,p.Cb)({type:Number,json:{write:!0}})],S.prototype,"geometryPrecision",void 0),(0,n._)([(0,p.Cb)({type:Number,json:{write:!0}})],S.prototype,"maxAllowableOffset",void 0),(0,n._)([(0,p.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],S.prototype,"num",void 0),(0,n._)([(0,p.Cb)({json:{write:!0}})],S.prototype,"objectIds",void 0),(0,n._)([(0,p.Cb)({type:[String],json:{write:!0}})],S.prototype,"orderByFields",void 0),(0,n._)([(0,p.Cb)({type:[String],json:{write:!0}})],S.prototype,"outFields",void 0),(0,n._)([(0,p.Cb)({type:v.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],S.prototype,"outSpatialReference",void 0),(0,n._)([(0,p.Cb)({type:String,json:{write:!0}})],S.prototype,"resultType",void 0),(0,n._)([(0,p.Cb)({json:{write:!0}})],S.prototype,"returnGeometry",void 0),(0,n._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],S.prototype,"returnM",void 0),(0,n._)([(0,p.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],S.prototype,"returnZ",void 0),(0,n._)([(0,p.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],S.prototype,"start",void 0),(0,n._)([(0,y.c)("start"),(0,y.c)("num")],S.prototype,"writeStart",null),(0,n._)([(0,p.Cb)({type:String,json:{read:{source:"spatialRel",reader:w.read},write:{target:"spatialRel",writer:w.write}}})],S.prototype,"spatialRelationship",void 0),(0,n._)([(0,p.Cb)({type:a.Z,json:{write:!0}})],S.prototype,"timeExtent",void 0),(0,n._)([(0,p.Cb)({type:_,json:{write:!0}})],S.prototype,"topFilter",void 0),(0,n._)([(0,p.Cb)({type:String,json:{read:C.read,write:{writer:C.write,overridePolicy(t){return{enabled:(0,h.pC)(t)&&(0,h.pC)(this.distance)&&this.distance>0}}}}})],S.prototype,"units",void 0),(0,n._)([(0,p.Cb)({type:String,json:{write:!0}})],S.prototype,"where",void 0),(S=b=(0,n._)([(0,f.j)("esri.rest.support.TopFeaturesQuery")],S)).from=(0,c.se)(S);let x=S},41691:(t,r,i)=>{"use strict";i.d(r,{V:()=>a,i:()=>l});var s=i(56761),n=i(47846),o=i(23088);let a={key:"type",base:n.Z,typeMap:{algorithmic:s.Z,multipart:o.Z}};function l(t){return t&&t.type?"algorithmic"===t.type?s.Z.fromJSON(t):"multipart"===t.type?o.Z.fromJSON(t):null:null}},73463:(t,r,i)=>{"use strict";i.d(r,{cv:()=>function t(r,i,s){let n={};for(let o in r){if("declaredClass"===o)continue;let a=r[o];if(null!=a&&"function"!=typeof a){if(Array.isArray(a)){n[o]=[];for(let r=0;r<a.length;r++)n[o][r]=t(a[r])}else if("object"==typeof a){if(a.toJSON){let t=a.toJSON(s&&s[o]);n[o]=i?t:JSON.stringify(t)}else n[o]=i?a:JSON.stringify(a)}else n[o]=a}}return n},en:()=>a,lA:()=>o}),i(10242),i(49869);var s=i(59118),n=i(82583);function o(t,r){return r?{...r,query:{...t,...r.query}}:{query:t}}function a(t){return"string"==typeof t?(0,n.mN)(t):(0,s.d9)(t)}i(2037)},47349:(t,r,i)=>{"use strict";i.d(r,{J:()=>d});var s=i(24765),n=i(94323),o=(i(66150),i(21314)),a=(i(99950),i(12790),i(96082),i(10861)),l=i(30407),u=i(59181);let d=class extends u.a{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};(0,s._)([(0,a.c)({Type:n.Z,ensureType:(0,o.se)(n.Z)})],d.prototype,"itemType",void 0),d=(0,s._)([(0,l.j)("esri.support.GraphicsCollection")],d)},90944:(t,r,i)=>{"use strict";i.d(r,{K:()=>c});var s=i(24765),n=i(51084),o=i(58493),a=i(66150),l=i(66138),u=i(53919),d=(i(99950),i(21314),i(30407)),h=i(75737);function p(t,r,i){let s,n;if(t)for(let o=0,a=t.length;o<a;o++){if((s=t.getItemAt(o))[r]===i)return s;if("group"===s?.type&&(n=p(s.layers,r,i)))return n}}let c=t=>{let r=class extends t{constructor(...t){super(...t),this.layers=new n.Z;let r=t=>{t.parent=this,this.layerAdded(t),"elevation"!==t.type&&"base-elevation"!==t.type||a.Z.getLogger(this.declaredClass).error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as an operational layer and will therefore be ignored.`)},i=t=>{t.parent=null,this.layerRemoved(t)};this.layers.on("before-add",t=>{var r;(r=t.item).parent&&"remove"in r.parent&&r.parent.remove(r)}),this.layers.on("after-add",t=>r(t.item)),this.layers.on("after-remove",t=>i(t.item))}destroy(){for(let t of this.layers.removeAll())this.layerRemoved(t),t.destroy();this.layers.destroy()}set layers(t){this._set("layers",(0,o.Z)(t,this._get("layers")))}add(t,r){let i=this.layers;(r=i.getNextIndex(r),t instanceof h.Z)?t.parent===this?this.reorder(t,r):i.add(t,r):(0,l.y8)(t)?t.then(t=>{this.destroyed||this.add(t,r)}):a.Z.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(t,r){let i=this.layers;r=i.getNextIndex(r),t.slice().forEach(t=>{t.parent!==this?(i.add(t,r),r+=1):this.reorder(t,r)})}findLayerById(t){return p(this.layers,"id",t)}findLayerByUid(t){return p(this.layers,"uid",t)}remove(t){return this.layers.remove(t)}removeMany(t){return this.layers.removeMany(t)}removeAll(){return this.layers.removeAll()}reorder(t,r){return this.layers.reorder(t,r)}layerAdded(t){}layerRemoved(t){}};return(0,s._)([(0,u.Cb)()],r.prototype,"layers",null),r=(0,s._)([(0,d.j)("esri.support.LayersMixin")],r)}},84999:(t,r,i)=>{"use strict";i.d(r,{Q:()=>h});var s=i(24765),n=i(51084),o=i(58493),a=i(66150),l=i(53919),u=(i(99950),i(21314),i(30407));function d(t,r,i){if(t)for(let s=0,n=t.length;s<n;s++){let n=t.getItemAt(s);if(n[r]===i)return n;if("group"===n?.type){let t=d(n.tables,r,i);if(t)return t}}}let h=t=>{let r=class extends t{constructor(...t){super(...t),this.tables=new n.Z,this.tables.on("after-add",t=>{let r=t.item;r.parent&&r.parent!==this&&"tables"in r.parent&&r.parent.tables.remove(r),r.parent=this,"feature"!==r.type&&a.Z.getLogger(this.declaredClass).error(`Layer 'title:${r.title}, id:${r.id}' of type '${r.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",t=>{t.item.parent=null})}destroy(){for(let t of this.tables.removeAll())t.destroy();this.tables.destroy()}set tables(t){this._set("tables",(0,o.Z)(t,this._get("tables")))}findTableById(t){return d(this.tables,"id",t)}findTableByUid(t){return d(this.tables,"uid",t)}};return(0,s._)([(0,l.Cb)()],r.prototype,"tables",null),r=(0,s._)([(0,u.j)("esri.support.TablesMixin")],r)}},34133:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(53306),a=i(18372),l=i(53919),u=(i(99950),i(21314),i(30407));let d=s=class extends(0,a.IG)(o.Z){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};(0,n._)([(0,l.Cb)()],d.prototype,"active",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"className",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"disabled",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"id",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"indicator",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"title",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"type",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"visible",void 0);let h=d=s=(0,n._)([(0,u.j)("esri.support.actions.ActionBase")],d)},7823:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(34133);let u=s=class extends l.Z{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};(0,n._)([(0,o.Cb)()],u.prototype,"image",void 0);let d=u=s=(0,n._)([(0,a.j)("esri.support.Action.ActionButton")],u)},41207:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(34133);let u=s=class extends l.Z{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new s({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};(0,n._)([(0,o.Cb)()],u.prototype,"image",void 0),(0,n._)([(0,o.Cb)()],u.prototype,"value",void 0);let d=u=s=(0,n._)([(0,a.j)("esri.support.Action.ActionToggle")],u)},2037:(t,r,i)=>{"use strict";i.d(r,{r:()=>o});var s=i(82583);let n=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function o(t){let r=(0,s.P$)(t,!0);return!!r&&r.endsWith(".arcgis.com")&&!n.includes(r)&&!t.endsWith("/sharing/rest/generateToken")}},79286:(t,r,i)=>{"use strict";let s;i.d(r,{LC:()=>d,WW:()=>h,Yi:()=>p,mz:()=>f,pp:()=>c}),i(64012);var n=i(12790),o=i(66150),a=i(82639),l=i(371);let u=o.Z.getLogger("esri.support.arcadeOnDemand");function d(){return s||(s=(async()=>{let t=await i.e(2468).then(i.bind(i,72468));return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),s}let h=(t,r,i)=>f.create(t,r,i,null,["$feature"]),p=(t,r,i)=>f.create(t,r,i,null,["$feature","$view"]),c=(t,r,i,s)=>f.create(t,r,i,s,["$feature","$view"]);class f{constructor(t,r,i,s,n,o,a,l){this.script=t,this.evaluate=n;let u=Array.isArray(a)?a:a.fields;this.fields=u,this._syntaxTree=s,this._arcade=r,this._arcadeDictionary=i,this._arcadeFeature=o,this._spatialReference=l,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,s,o,h){let{arcade:p,Feature:c,Dictionary:y}=await d(),m=l.Z.fromJSON(r),g=null;try{g=p.parseScript(t,h)}catch(r){return u.error(new n.Z("arcade-bad-expression","Failed to parse arcade script",{script:t,error:r})),null}let _=o.reduce((t,r)=>({...t,[r]:null}),{}),b=null;(0,a.pC)(s)&&((b=new y(s)).immutable=!0,_.$config=null);let v=p.scriptUsesGeometryEngine(g),w=v&&p.enableGeometrySupport(),C=p.scriptUsesFeatureSet(g)&&p.enableFeatureSetSupport(),S=p.scriptIsAsync(g),x=S&&p.enableAsyncSupport();await Promise.all([w,C,x]);let M=new Set;await p.loadDependentModules(M,g,null,S,v);let I=new y;I.immutable=!1,I.setField("scale",0);let E=p.compileScript(g,{vars:_,spatialReference:m,useAsync:!!x});return new f(t,p,y,g,t=>("$view"in t&&t.$view&&(I.setField("scale",t.$view.scale),t.$view=I),b&&(t.$config=b),E({vars:t,spatialReference:m})),new c,i,m)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}},30903:(t,r,i)=>{"use strict";i.d(r,{g:()=>o,s:()=>a});var s=i(6487),n=i(48463);async function o(t){if(!t)return;let r=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await (0,n.ME)("esri/t9n/basemaps");return i[t]||i[r]}let a={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return(0,s.V)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}}},86060:(t,r,i)=>{"use strict";i.d(r,{a:()=>n});var s=i(42589);function n(t){return new s.Z({getCollections:()=>[t.tables,t.layers],getChildrenFunction:t=>{let r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{let r=t.parent;return r&&"tables"in r&&r.tables.includes(t)}})}},50445:(t,r,i)=>{"use strict";i.d(r,{K3:()=>n,Rx:()=>o});var s=i(96082);let n=()=>!!(0,s.Z)("enable-feature:force-wosr"),o=()=>!!(0,s.Z)("enable-feature:SceneLayer-editing")},37004:(t,r,i)=>{"use strict";i.d(r,{eZ:()=>p});var s=i(19047),n=i(99444),o=i(86780),a=(i(97663),i(67530),i(87086),i(86288)),l=(i(38488),i(29978),i(65081),i(85200)),u=i(71624);let d=["oid","global-id"],h=["oid","global-id","guid"];function p({displayField:t,editFieldsInfo:r,fields:i,objectIdField:d,title:p},c){if(!i)return null;let g=function({editFieldsInfo:t,fields:r,objectIdField:i},s){return(function(t,r){let i=t;return r&&(t=t.filter(t=>!r.includes(t.type))),t===i&&(t=t.slice()),t.sort(y),t})(r??[],s?.ignoreFieldTypes||_).map(r=>new l.Z({fieldName:r.name,isEditable:r.editable&&!h.includes(r.type)&&!m(r.name,t),label:r.alias,format:function(t){switch(t.type){case"small-integer":case"integer":case"single":return new u.Z({digitSeparator:!0,places:0});case"double":return new u.Z({digitSeparator:!0,places:2});case"date":return new u.Z({dateFormat:"long-month-day-year"});default:return"string"===t.type&&(0,n.Ec)(t.name)?new u.Z({digitSeparator:!0,places:0}):null}}(r),visible:f(r,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:s?.visibleFieldNames})}))}({editFieldsInfo:r,fields:i,objectIdField:d},c);if(!g.length)return null;let b=function(t){let r=(0,n.O5)(t),{titleBase:i}=t;return r?`${i}: {${r.trim()}}`:i??""}({titleBase:p,fields:i,displayField:t}),v=[new a.Z,new o.Z];return new s.Z({title:b,content:v,fieldInfos:g})}let c=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],f=(t,{editFieldsInfo:r,objectIdField:i,visibleFieldNames:s})=>s?s.has(t.name):!(m(t.name,r)||i&&t.name===i||d.includes(t.type)||c.some(r=>r.test(t.name)));function y(t,r){return"oid"===t.type?-1:"oid"===r.type?1:g(t)?-1:g(r)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((r.alias||r.name).toLocaleLowerCase())}function m(t,r){if(!t||!r)return!1;let{creationDateField:i,creatorField:s,editDateField:n,editorField:o}=r;return[i&&i.toLowerCase(),s&&s.toLowerCase(),n&&n.toLowerCase(),o&&o.toLowerCase()].includes(t.toLowerCase())}function g(t){return"name"===(t.name&&t.name.toLowerCase())||"name"===(t.alias&&t.alias.toLowerCase())}let _=["geometry","blob","raster","guid","xml"]},73322:(t,r,i)=>{"use strict";i.d(r,{Hu:()=>h,fY:()=>u,jH:()=>p,jz:()=>c});var s=i(10242),n=i(96082),o=i(82639),a=i(66138),l=i(82583);function u(t,r,i=!1,s){return new Promise((l,u)=>{if((0,a.Hc)(s))return void u(d());let h=()=>{f(),u(Error(`Unable to load ${r}`))},p=()=>{let r=t;f(),l(r)},c=()=>{if(!t)return;let r=t;f(),r.src="",u(d())},f=()=>{(0,n.Z)("esri-image-decode")||(t.removeEventListener("error",h),t.removeEventListener("load",p)),h=null,p=null,t=null,(0,o.pC)(s)&&s.removeEventListener("abort",c),c=null,i&&URL.revokeObjectURL(r)};(0,o.pC)(s)&&s.addEventListener("abort",c),(0,n.Z)("esri-image-decode")?t.decode().then(p,h):(t.addEventListener("error",h),t.addEventListener("load",p))})}function d(){try{return new DOMException("Aborted","AbortError")}catch{let t=Error();return t.name="AbortError",t}}function h(t){s.Z.request.crossOriginNoCorsDomains||(s.Z.request.crossOriginNoCorsDomains={});let r=s.Z.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?r[(0,l.P$)(i)??""]=0:(r[(0,l.P$)("http://"+i)??""]=0,r[(0,l.P$)("https://"+i)??""]=0)}function p(t){let r=s.Z.request.crossOriginNoCorsDomains;if(r){let i=(0,l.P$)(t);if(i)return i=i.toLowerCase(),!(0,l.D6)(i,(0,l.TI)())&&r[i]<Date.now()-36e5}return!1}async function c(t){let r=s.Z.request.crossOriginNoCorsDomains,i=(0,l.P$)(t);r&&i&&(r[i.toLowerCase()]=Date.now());let n=(0,l.mN)(t);t=n.path,"json"===n.query?.f&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}},29562:(t,r,i)=>{"use strict";i.d(r,{$:()=>n,r:()=>s});let s="20221116",n="c99cca5ea449339768164a82fc9ad4e384e5826d"},98402:(t,r,i)=>{"use strict";i.d(r,{se:()=>Z,cT:()=>A,dU:()=>k,S9:()=>L,LB:()=>O,AH:()=>R,yK:()=>N,S6:()=>D,QT:()=>F,f_:()=>j});var s,n=i(21314),o=i(51609),a=i(11560),l=(i(70126),i(59511)),u=(i(5775),i(84468),i(64482),i(5680)),d=i(11795),h=(i(68714),i(62414),i(25131)),p=(i(65548),i(87264),i(24765)),c=i(59118),f=i(85098),y=i(53919),m=i(21374),g=i(30407),_=i(32616);let b=s=class extends l.Z{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,r,i,s){if(t&&"string"!=typeof t&&null==t.imageData)return t;let n={};return t&&(n.url=t),r&&(n.outline=r),null!=i&&(n.width=(0,f.t_)(i)),null!=s&&(n.height=(0,f.t_)(s)),n}clone(){let t=new s({color:(0,c.d9)(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",(0,c.d9)(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};(0,p._)([(0,m.J)({esriPFS:"picture-fill"},{readOnly:!0})],b.prototype,"type",void 0),(0,p._)([(0,y.Cb)(_.KA)],b.prototype,"url",void 0),(0,p._)([(0,y.Cb)({type:Number,json:{write:!0}})],b.prototype,"xscale",void 0),(0,p._)([(0,y.Cb)({type:Number,json:{write:!0}})],b.prototype,"yscale",void 0),(0,p._)([(0,y.Cb)({type:Number,cast:f.t_,json:{write:!0}})],b.prototype,"width",void 0),(0,p._)([(0,y.Cb)({type:Number,cast:f.t_,json:{write:!0}})],b.prototype,"height",void 0),(0,p._)([(0,y.Cb)({type:Number,cast:f.t_,json:{write:!0}})],b.prototype,"xoffset",void 0),(0,p._)([(0,y.Cb)({type:Number,cast:f.t_,json:{write:!0}})],b.prototype,"yoffset",void 0),(0,p._)([(0,y.Cb)(_.Ds)],b.prototype,"source",void 0);let v=b=s=(0,p._)([(0,g.j)("esri.symbols.PictureFillSymbol")],b);var w=i(94974),C=i(83629),S=i(71905),x=i(59572),M=i(13395),I=i(11149),E=i(80629),T=(i(40079),i(40049),i(41719)),P=(i(51200),i(98775),i(21950));function A(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function k(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}i(35424),i(27405);let O={base:E.Z,key:"type",typeMap:{"simple-fill":x.Z,"picture-fill":v,"picture-marker":w.Z,"simple-line":M.Z,"simple-marker":I.Z,text:T.Z,"label-3d":u.Z,"line-3d":d.Z,"mesh-3d":h.Z,"point-3d":C.Z,"polygon-3d":S.Z,"web-style":P.Z,cim:a.Z},errorContext:"symbol"},R={base:E.Z,key:"type",typeMap:{"picture-marker":w.Z,"simple-marker":I.Z,text:T.Z,"web-style":P.Z,cim:a.Z},errorContext:"symbol"},L=(0,o.d)({types:O}),F={base:E.Z,key:"type",typeMap:{"simple-fill":x.Z,"picture-fill":v,"picture-marker":w.Z,"simple-line":M.Z,"simple-marker":I.Z,text:T.Z,"line-3d":d.Z,"mesh-3d":h.Z,"point-3d":C.Z,"polygon-3d":S.Z,"web-style":P.Z,cim:a.Z},errorContext:"symbol"},N={base:E.Z,key:"type",typeMap:{text:T.Z,"label-3d":u.Z},errorContext:"symbol"},j=(E.Z,u.Z,d.Z,h.Z,C.Z,S.Z,P.Z,{base:E.Z,key:"type",typeMap:{"line-3d":d.Z,"mesh-3d":h.Z,"point-3d":C.Z,"polygon-3d":S.Z,"web-style":P.Z,cim:a.Z},errorContext:"symbol"}),D={base:E.Z,key:"type",typeMap:{"label-3d":u.Z},errorContext:"symbol"},Z=(0,n.N7)(O)},11560:(t,r,i)=>{"use strict";i.d(r,{Z:()=>m});var s,n=i(24765),o=i(59118),a=i(32121),l=i(53919),u=(i(21314),i(21374)),d=i(71169),h=i(30407),p=i(62300),c=i(99444),f=i(80629);let y=s=class extends f.Z{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,r){return r}writeData(t,r){if(t)for(let i in t)r[i]=t[i]}async collectRequiredFields(t,r){if("CIMSymbolReference"===this.data?.type){let i=this.data.primitiveOverrides;if(i){let s=i.map(i=>{let s=i.valueExpressionInfo;return(0,c.io)(t,r,s.expression)});await Promise.all(s)}}}clone(){return new s({data:(0,o.d9)(this.data)})}hash(){return(0,a.hP)(JSON.stringify(this.data)).toString()}};(0,n._)([(0,l.Cb)({json:{write:!1}})],y.prototype,"color",void 0),(0,n._)([(0,l.Cb)({json:{write:!0}})],y.prototype,"data",void 0),(0,n._)([(0,d.r)("data",["symbol"])],y.prototype,"readData",null),(0,n._)([(0,p.c)("data",{})],y.prototype,"writeData",null),(0,n._)([(0,u.J)({CIMSymbolReference:"cim"},{readOnly:!0})],y.prototype,"type",void 0);let m=y=s=(0,n._)([(0,h.j)("esri.symbols.CIMSymbol")],y)},70126:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s,n=i(24765),o=i(82639),a=i(53919),l=(i(99950),i(21314),i(21374)),u=i(30407),d=i(40049),h=i(52165),p=i(31394);let c=s=class extends d.Z{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new s({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:(0,o.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};(0,n._)([(0,l.J)({Extrude:"extrude"},{readOnly:!0})],c.prototype,"type",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],c.prototype,"size",void 0),(0,n._)([(0,a.Cb)({type:p.b,json:{write:!0}})],c.prototype,"material",void 0),(0,n._)([(0,a.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c.prototype,"castShadows",void 0),(0,n._)([(0,a.Cb)(h.Z)],c.prototype,"edges",void 0);let f=c=s=(0,n._)([(0,u.j)("esri.symbols.ExtrudeSymbol3DLayer")],c)},59511:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s=i(24765),n=i(53919),o=(i(99950),i(21314),i(30407)),a=i(13395),l=i(80629);let u=class extends l.Z{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};(0,s._)([(0,n.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":a.Z}},json:{default:null,write:!0}})],u.prototype,"outline",void 0),(0,s._)([(0,n.Cb)({type:["simple-fill","picture-fill"],readOnly:!0})],u.prototype,"type",void 0);let d=u=(0,s._)([(0,o.j)("esri.symbols.FillSymbol")],u)},5775:(t,r,i)=>{"use strict";i.d(r,{Z:()=>E});var s,n,o=i(24765),a=i(82639),l=i(53919),u=(i(99950),i(21314),i(21374)),d=i(30407),h=i(40049),p=i(52165),c=i(33813),f=i(3598),y=i(7429),m=i(85932),g=(i(66150),i(12790),i(96082),i(31394));let _=n=class extends g.b{constructor(t){super(t),this.colorMixMode=null}clone(){let t={color:(0,a.pC)(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new n(t)}};(0,o._)([(0,u.J)({multiply:"multiply",replace:"replace",tint:"tint"})],_.prototype,"colorMixMode",void 0),_=n=(0,o._)([(0,d.j)("esri.symbols.support.Symbol3DFillMaterial")],_);var b,v=i(55410),w=i(72140),C=i(85098),S=i(58244),x=i(79005);let M=b=class extends w.wq{constructor(t){super(t),this.color=new v.Z([0,0,0,1]),this.size=(0,C.Wz)(1),this.pattern=null,this.patternCap="butt"}clone(){let t={color:(0,a.pC)(this.color)?this.color.clone():null,size:this.size,pattern:(0,a.pC)(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new b(t)}};(0,o._)([(0,l.Cb)(S.a)],M.prototype,"color",void 0),(0,o._)([(0,l.Cb)(S.y)],M.prototype,"size",void 0),(0,o._)([(0,l.Cb)(y.D)],M.prototype,"pattern",void 0),(0,o._)([(0,l.Cb)({type:x.Hc,json:{default:"butt",write:{overridePolicy(){return{enabled:(0,a.pC)(this.pattern)}}}}})],M.prototype,"patternCap",void 0),M=b=(0,o._)([(0,d.j)("esri.symbols.support.Symbol3DOutline")],M);let I=s=class extends h.Z{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){let t={edges:(0,a.pC)(this.edges)?this.edges.clone():null,enabled:this.enabled,material:(0,a.pC)(this.material)?this.material.clone():null,pattern:(0,a.pC)(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:(0,a.pC)(this.outline)?this.outline.clone():null};return new s(t)}static fromSimpleFillSymbol(t){let r=t.outline&&t.outline.style&&"inside-frame"!==t.outline.style&&"solid"!==t.outline.style?new c.Z({style:t.outline.style}):null,i={size:t.outline?.width??0,color:(t.outline?.color??m.ix).clone(),pattern:r};return r&&t.outline?.cap&&(i.patternCap=t.outline.cap),new s({material:new _({color:(t.color??m.l9).clone()}),pattern:t.style&&"solid"!==t.style?new f.Z({style:t.style}):null,outline:i})}};(0,o._)([(0,u.J)({Fill:"fill"},{readOnly:!0})],I.prototype,"type",void 0),(0,o._)([(0,l.Cb)({type:_,json:{write:!0}})],I.prototype,"material",void 0),(0,o._)([(0,l.Cb)(y.q)],I.prototype,"pattern",void 0),(0,o._)([(0,l.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],I.prototype,"castShadows",void 0),(0,o._)([(0,l.Cb)({type:M,json:{write:!0}})],I.prototype,"outline",void 0),(0,o._)([(0,l.Cb)(p.Z)],I.prototype,"edges",void 0);let E=I=s=(0,o._)([(0,d.j)("esri.symbols.FillSymbol3DLayer")],I)},84468:(t,r,i)=>{"use strict";i.d(r,{Z:()=>c});var s,n=i(24765),o=i(72140),a=i(85098),l=i(53919),u=(i(99950),i(36844)),d=i(30407),h=i(44267);let p=s=class extends o.wq{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return(0,a.t_)(t)}clone(){return new s({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};(0,n._)([(0,l.Cb)({type:h.JT,json:{default:"none",write:!0}})],p.prototype,"decoration",void 0),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],p.prototype,"family",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:{overridePolicy:(t,r,i)=>({enabled:!i||!i.textSymbol3D})}}})],p.prototype,"size",void 0),(0,n._)([(0,u.p)("size")],p.prototype,"castSize",null),(0,n._)([(0,l.Cb)({type:h.g6,json:{default:"normal",write:!0}})],p.prototype,"style",void 0),(0,n._)([(0,l.Cb)({type:h.vC,json:{default:"normal",write:!0}})],p.prototype,"weight",void 0);let c=p=s=(0,n._)([(0,d.j)("esri.symbols.Font")],p)},64482:(t,r,i)=>{"use strict";i.d(r,{Z:()=>T});var s,n=i(24765),o=i(66150),a=i(82639),l=i(82583),u=i(53919),d=(i(99950),i(21314),i(21374)),h=i(30407),p=i(40049),c=i(85932),f=i(48866),y=i(58244),m=i(33178),g=i(55410),_=i(72140),b=i(85098);let v=s=class extends _.wq{constructor(t){super(t),this.color=new g.Z([0,0,0,1]),this.size=(0,b.Wz)(1)}clone(){let t={color:(0,a.pC)(this.color)?this.color.clone():null,size:this.size};return new s(t)}};(0,n._)([(0,u.Cb)(y.a)],v.prototype,"color",void 0),(0,n._)([(0,u.Cb)(y.y)],v.prototype,"size",void 0),v=s=(0,n._)([(0,h.j)("esri.symbols.support.Symbol3DIconOutline")],v);var w,C=i(31394);let S="esri.symbols.IconSymbol3DLayer",x=w=class extends p.Z{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new w({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:(0,a.pC)(this.material)?this.material.clone():null,outline:(0,a.pC)(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){var r;let i=t.color||c.ix,s=M(t),n=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||c.ix).clone()}:null;return new w({size:t.size,resource:{primitive:E[r=t.style]||(o.Z.getLogger(S).warn(`${r} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")},material:{color:i},outline:n,anchor:s?"relative":void 0,anchorPosition:s})}static fromPictureMarkerSymbol(t){let r=!t.color||(0,c.rx)(t.color)?c.ix:t.color,i=M(t);return new w({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:r.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new w({resource:{href:(0,l._l)({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function M(t){let r="width"in t?t.width:t.size,i="height"in t?t.height:t.size,s=I(t.xoffset),n=I(t.yoffset);return(s||n)&&r&&i?{x:-s/r,y:n/i}:null}function I(t){return isFinite(t)?t:0}(0,n._)([(0,u.Cb)({type:C.b,json:{write:!0}})],x.prototype,"material",void 0),(0,n._)([(0,u.Cb)({type:f.b,json:{write:!0}})],x.prototype,"resource",void 0),(0,n._)([(0,d.J)({Icon:"icon"},{readOnly:!0})],x.prototype,"type",void 0),(0,n._)([(0,u.Cb)(y.y)],x.prototype,"size",void 0),(0,n._)([(0,d.J)({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),(0,u.Cb)({json:{default:"center"}})],x.prototype,"anchor",void 0),(0,n._)([(0,u.Cb)({type:m.e,json:{type:[Number],read:{reader:t=>new m.e({x:t[0],y:t[1]})},write:{writer:(t,r)=>{r.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],x.prototype,"anchorPosition",void 0),(0,n._)([(0,u.Cb)({type:v,json:{write:!0}})],x.prototype,"outline",void 0);let E={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null},T=x=w=(0,n._)([(0,h.j)(S)],x)},5680:(t,r,i)=>{"use strict";i.d(r,{Z:()=>g});var s,n=i(24765),o=i(51084),a=i(59118),l=i(53919),u=(i(21314),i(21374)),d=i(30407),h=i(40079),p=i(51200),c=i(38135),f=i(21324);let y=o.Z.ofType({base:null,key:"type",typeMap:{text:p.Z}}),m=s=class extends h.Z{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new y,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return(0,c.gv)(this)}hasVisibleVerticalOffset(){return(0,c.Uy)(this)}clone(){return new s({styleOrigin:(0,a.d9)(this.styleOrigin),symbolLayers:(0,a.d9)(this.symbolLayers),thumbnail:(0,a.d9)(this.thumbnail),callout:(0,a.d9)(this.callout),verticalOffset:(0,a.d9)(this.verticalOffset)})}static fromTextSymbol(t){return new s({symbolLayers:[p.Z.fromTextSymbol(t)]})}};(0,n._)([(0,l.Cb)({type:f.Z,json:{write:!0}})],m.prototype,"verticalOffset",void 0),(0,n._)([(0,l.Cb)(c.Y2)],m.prototype,"callout",void 0),(0,n._)([(0,l.Cb)({json:{read:!1,write:!1}})],m.prototype,"styleOrigin",void 0),(0,n._)([(0,l.Cb)({type:y})],m.prototype,"symbolLayers",void 0),(0,n._)([(0,u.J)({LabelSymbol3D:"label-3d"},{readOnly:!0})],m.prototype,"type",void 0);let g=m=s=(0,n._)([(0,d.j)("esri.symbols.LabelSymbol3D")],m)},11795:(t,r,i)=>{"use strict";i.d(r,{Z:()=>g});var s,n=i(24765),o=i(51084),a=i(59118),l=i(53919),u=(i(21314),i(21374)),d=i(30407),h=i(68714),p=i(87264),c=i(40079);let f=o.Z.ofType({base:null,key:"type",typeMap:{line:h.Z,path:p.Z}}),y=o.Z.ofType({base:null,key:"type",typeMap:{line:h.Z,path:p.Z}}),m=s=class extends c.Z{constructor(t){super(t),this.symbolLayers=new f,this.type="line-3d"}clone(){return new s({styleOrigin:(0,a.d9)(this.styleOrigin),symbolLayers:(0,a.d9)(this.symbolLayers),thumbnail:(0,a.d9)(this.thumbnail)})}static fromSimpleLineSymbol(t){return new s({symbolLayers:[h.Z.fromSimpleLineSymbol(t)]})}};(0,n._)([(0,l.Cb)({type:f,json:{type:y}})],m.prototype,"symbolLayers",void 0),(0,n._)([(0,u.J)({LineSymbol3D:"line-3d"},{readOnly:!0})],m.prototype,"type",void 0);let g=m=s=(0,n._)([(0,d.j)("esri.symbols.LineSymbol3D")],m)},68714:(t,r,i)=>{"use strict";i.d(r,{Z:()=>I});var s=i(24765),n=i(82639),o=i(85098),a=i(53919),l=(i(99950),i(21314)),u=i(21374),d=i(30407),h=i(55410),p=i(34577),c=i(72140),f=i(23812);let y=class extends(0,p.J)(c.wq){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return(0,n.pC)(t)&&t.placement===this.placement&&t.style===this.style&&((0,n.Wi)(this.color)&&(0,n.Wi)(t.color)||(0,n.pC)(this.color)&&(0,n.pC)(t.color)&&this.color.toJSON()===t.color.toJSON())}};(0,s._)([(0,a.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],y.prototype,"type",void 0),(0,s._)([(0,a.Cb)({type:f.J,json:{default:"begin-end",write:!0}})],y.prototype,"placement",void 0),(0,s._)([(0,a.Cb)({type:f.k,json:{default:"arrow",write:!0}})],y.prototype,"style",void 0),(0,s._)([(0,a.Cb)({type:h.Z,json:{type:[l.z8],default:null,write:!0}})],y.prototype,"color",void 0);let m=y=(0,s._)([(0,d.j)("esri.symbols.LineStyleMarker3D")],y);var g,_=i(40049),b=i(33813),v=i(7429),w=i(85932),C=i(58244),S=i(31394),x=i(79005);let M=g=class extends _.Z{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=(0,o.Wz)(1),this.pattern=null,this.marker=null}clone(){let t={enabled:this.enabled,material:(0,n.pC)(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:(0,n.pC)(this.pattern)?this.pattern.clone():null,marker:(0,n.pC)(this.marker)?this.marker.clone():null};return new g(t)}static fromSimpleLineSymbol(t){let r={enabled:!0,size:t.width??(0,o.Wz)(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&"inside-frame"!==t.style?new b.Z({style:t.style}):null,material:new S.b({color:(t.color||w.ix).clone()}),marker:t.marker?new m({placement:t.marker.placement,style:t.marker.style,color:t.marker.color?.clone()??null}):null};return new g(r)}};(0,s._)([(0,a.Cb)({type:S.b,json:{write:!0}})],M.prototype,"material",void 0),(0,s._)([(0,u.J)({Line:"line"},{readOnly:!0})],M.prototype,"type",void 0),(0,s._)([(0,a.Cb)({type:x.w2,json:{write:!0,default:"miter"}})],M.prototype,"join",void 0),(0,s._)([(0,a.Cb)({type:x.Hc,json:{write:!0,default:"butt"}})],M.prototype,"cap",void 0),(0,s._)([(0,a.Cb)(C.y)],M.prototype,"size",void 0),(0,s._)([(0,a.Cb)(v.D)],M.prototype,"pattern",void 0),(0,s._)([(0,a.Cb)({types:{key:"type",base:m,typeMap:{style:m}},json:{write:!0}})],M.prototype,"marker",void 0);let I=M=g=(0,s._)([(0,d.j)("esri.symbols.LineSymbol3DLayer")],M)},62414:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s=i(24765),n=i(85098),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(80629);let u=class extends l.Z{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};(0,s._)([(0,o.Cb)({type:Number,json:{read:t=>t&&-1*t,write:(t,r)=>r.angle=t&&-1*t}})],u.prototype,"angle",void 0),(0,s._)([(0,o.Cb)({type:["simple-marker","picture-marker"],readOnly:!0})],u.prototype,"type",void 0),(0,s._)([(0,o.Cb)({type:Number,cast:n.t_,json:{write:!0}})],u.prototype,"xoffset",void 0),(0,s._)([(0,o.Cb)({type:Number,cast:n.t_,json:{write:!0}})],u.prototype,"yoffset",void 0),(0,s._)([(0,o.Cb)({type:Number,cast:t=>"auto"===t?t:(0,n.t_)(t),json:{write:!0}})],u.prototype,"size",void 0);let d=u=(0,s._)([(0,a.j)("esri.symbols.MarkerSymbol")],u)},25131:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s,n=i(24765),o=i(51084),a=i(59118),l=i(53919),u=(i(21314),i(21374)),d=i(30407),h=i(5775),p=i(40079);let c=o.Z.ofType({base:null,key:"type",typeMap:{fill:h.Z}}),f=s=class extends p.Z{constructor(t){super(t),this.symbolLayers=new c,this.type="mesh-3d"}clone(){return new s({styleOrigin:(0,a.d9)(this.styleOrigin),symbolLayers:(0,a.d9)(this.symbolLayers),thumbnail:(0,a.d9)(this.thumbnail)})}static fromSimpleFillSymbol(t){return new s({symbolLayers:[h.Z.fromSimpleFillSymbol(t)]})}};(0,n._)([(0,l.Cb)({type:c})],f.prototype,"symbolLayers",void 0),(0,n._)([(0,u.J)({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],f.prototype,"type",void 0);let y=f=s=(0,n._)([(0,d.j)("esri.symbols.MeshSymbol3D")],f)},65548:(t,r,i)=>{"use strict";i.d(r,{Z:()=>g});var s,n=i(24765),o=i(82639),a=i(53919),l=(i(99950),i(21314),i(21374)),u=i(30407),d=i(40049),h=i(58572),p=i(53306);let c=s=class extends p.Z{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new s({x:this.x,y:this.y,z:this.z})}};(0,n._)([(0,a.Cb)({type:Number})],c.prototype,"x",void 0),(0,n._)([(0,a.Cb)({type:Number})],c.prototype,"y",void 0),(0,n._)([(0,a.Cb)({type:Number})],c.prototype,"z",void 0),c=s=(0,n._)([(0,u.j)("esri.symbols.support.Symbol3DAnchorPosition3D")],c);var f,y=i(31394);let m=f=class extends d.Z{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new f({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:(0,o.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}};(0,n._)([(0,a.Cb)({type:y.b,json:{write:!0}})],m.prototype,"material",void 0),(0,n._)([(0,a.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],m.prototype,"castShadows",void 0),(0,n._)([(0,a.Cb)({type:h.k,json:{write:!0}})],m.prototype,"resource",void 0),(0,n._)([(0,l.J)({Object:"object"},{readOnly:!0})],m.prototype,"type",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],m.prototype,"width",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],m.prototype,"height",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],m.prototype,"depth",void 0),(0,n._)([(0,l.J)({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),(0,a.Cb)({json:{default:"origin"}})],m.prototype,"anchor",void 0),(0,n._)([(0,a.Cb)({type:c,json:{type:[Number],read:{reader:t=>new c({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,r)=>{r.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],m.prototype,"anchorPosition",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],m.prototype,"heading",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],m.prototype,"tilt",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],m.prototype,"roll",void 0),(0,n._)([(0,a.Cb)({readOnly:!0})],m.prototype,"isPrimitive",null);let g=m=f=(0,n._)([(0,u.j)("esri.symbols.ObjectSymbol3DLayer")],m)},87264:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s,n=i(24765),o=i(82639),a=i(53919),l=(i(99950),i(21314),i(21374)),u=i(71169),d=i(30407),h=i(40049),p=i(31394),c=i(79005);let f=s=class extends h.Z{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,r){return null!=t?t:null==r.height&&null!=r.size?r.size:void 0}readHeight(t,r){return null!=t?t:null==r.width&&null!=r.size?r.size:void 0}clone(){return new s({enabled:this.enabled,material:(0,o.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};(0,n._)([(0,a.Cb)({type:p.b,json:{write:!0}})],f.prototype,"material",void 0),(0,n._)([(0,a.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],f.prototype,"castShadows",void 0),(0,n._)([(0,l.J)({Path:"path"},{readOnly:!0})],f.prototype,"type",void 0),(0,n._)([(0,a.Cb)({type:["circle","quad"],json:{write:!0,default:"circle"}})],f.prototype,"profile",void 0),(0,n._)([(0,a.Cb)({type:c.w2,json:{write:!0,default:"miter"}})],f.prototype,"join",void 0),(0,n._)([(0,a.Cb)({type:c.KW,json:{write:!0,default:"butt"}})],f.prototype,"cap",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],f.prototype,"width",void 0),(0,n._)([(0,u.r)("width",["width","size","height"])],f.prototype,"readWidth",null),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],f.prototype,"height",void 0),(0,n._)([(0,u.r)("height",["height","size","width"])],f.prototype,"readHeight",null),(0,n._)([(0,a.Cb)({type:["center","bottom","top"],json:{write:!0,default:"center"}})],f.prototype,"anchor",void 0),(0,n._)([(0,a.Cb)({type:["heading","all"],json:{write:!0,default:"all"}})],f.prototype,"profileRotation",void 0);let y=f=s=(0,n._)([(0,d.j)("esri.symbols.PathSymbol3DLayer")],f)},94974:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s,n=i(24765),o=i(59118),a=i(85098),l=i(53919),u=(i(21314),i(21374)),d=i(71169),h=i(30407),p=i(62414),c=i(32616);let f=s=class extends p.Z{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,r,i){if(t&&"string"!=typeof t&&null==t.imageData)return t;let s={};return t&&(s.url=t),null!=r&&(s.width=(0,a.t_)(r)),null!=i&&(s.height=(0,a.t_)(i)),s}readHeight(t,r){return r.size||t}readWidth(t,r){return r.size||t}clone(){let t=new s({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",(0,o.d9)(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};(0,n._)([(0,l.Cb)({json:{write:!1}})],f.prototype,"color",void 0),(0,n._)([(0,u.J)({esriPMS:"picture-marker"},{readOnly:!0})],f.prototype,"type",void 0),(0,n._)([(0,l.Cb)(c.KA)],f.prototype,"url",void 0),(0,n._)([(0,l.Cb)(c.Ds)],f.prototype,"source",void 0),(0,n._)([(0,l.Cb)({type:Number,cast:a.t_,json:{write:!0}})],f.prototype,"height",void 0),(0,n._)([(0,d.r)("height",["height","size"])],f.prototype,"readHeight",null),(0,n._)([(0,l.Cb)({type:Number,cast:a.t_,json:{write:!0}})],f.prototype,"width",void 0),(0,n._)([(0,l.Cb)({json:{write:!1}})],f.prototype,"size",void 0);let y=f=s=(0,n._)([(0,h.j)("esri.symbols.PictureMarkerSymbol")],f)},83629:(t,r,i)=>{"use strict";i.d(r,{Z:()=>b});var s,n=i(24765),o=i(51084),a=i(59118),l=i(53919),u=(i(21314),i(21374)),d=i(30407),h=i(64482),p=i(65548),c=i(40079),f=i(51200),y=i(38135),m=i(21324);let g=o.Z.ofType({base:null,key:"type",typeMap:{icon:h.Z,object:p.Z,text:f.Z}}),_=s=class extends c.Z{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new g,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(let t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return(0,y.gv)(this)}hasVisibleVerticalOffset(){return(0,y.Uy)(this)}clone(){return new s({verticalOffset:(0,a.d9)(this.verticalOffset),callout:(0,a.d9)(this.callout),styleOrigin:(0,a.d9)(this.styleOrigin),symbolLayers:(0,a.d9)(this.symbolLayers),thumbnail:(0,a.d9)(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new s({symbolLayers:[h.Z.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new s({symbolLayers:[h.Z.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){if("CIMPointSymbol"!==t.data?.symbol?.type)return null;let r=t.data.symbol;return new s(r?.callout?{symbolLayers:[h.Z.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[h.Z.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new s({symbolLayers:[f.Z.fromTextSymbol(t)]})}};(0,n._)([(0,l.Cb)({type:m.Z,json:{write:!0}})],_.prototype,"verticalOffset",void 0),(0,n._)([(0,l.Cb)(y.Y2)],_.prototype,"callout",void 0),(0,n._)([(0,l.Cb)({type:g,json:{origins:{"web-scene":{write:!0}}}})],_.prototype,"symbolLayers",void 0),(0,n._)([(0,u.J)({PointSymbol3D:"point-3d"},{readOnly:!0})],_.prototype,"type",void 0);let b=_=s=(0,n._)([(0,d.j)("esri.symbols.PointSymbol3D")],_)},71905:(t,r,i)=>{"use strict";i.d(r,{Z:()=>C});var s,n=i(24765),o=i(51084),a=i(59118),l=i(82639),u=i(53919),d=(i(21314),i(21374)),h=i(30407),p=i(70126),c=i(5775),f=i(64482),y=i(68714),m=i(65548),g=i(40079),_=i(51200),b=i(98775);let v=o.Z.ofType({base:null,key:"type",typeMap:{extrude:p.Z,fill:c.Z,icon:f.Z,line:y.Z,object:m.Z,text:_.Z,water:b.Z}}),w=s=class extends g.Z{constructor(t){super(t),this.symbolLayers=new v,this.type="polygon-3d"}clone(){return new s({styleOrigin:(0,a.d9)(this.styleOrigin),symbolLayers:(0,a.d9)(this.symbolLayers),thumbnail:(0,a.d9)(this.thumbnail)})}static fromJSON(t){let r=new s;if(r.read(t),2===r.symbolLayers.length&&"fill"===r.symbolLayers.getItemAt(0).type&&"line"===r.symbolLayers.getItemAt(1).type){let i=r.symbolLayers.getItemAt(0),s=r.symbolLayers.getItemAt(1);!s.enabled||t.symbolLayers&&t.symbolLayers[1]&&!1===t.symbolLayers[1].enable||(i.outline={size:s.size,color:(0,l.pC)(s.material)?s.material.color:null}),r.symbolLayers.removeAt(1)}return r}static fromSimpleFillSymbol(t){return new s({symbolLayers:[c.Z.fromSimpleFillSymbol(t)]})}};(0,n._)([(0,u.Cb)({type:v,json:{write:!0}})],w.prototype,"symbolLayers",void 0),(0,n._)([(0,d.J)({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],w.prototype,"type",void 0);let C=w=s=(0,n._)([(0,h.j)("esri.symbols.PolygonSymbol3D")],w)},59572:(t,r,i)=>{"use strict";i.d(r,{Z:()=>m});var s,n=i(24765),o=i(55410),a=i(84576),l=i(59118),u=i(53919),d=(i(21314),i(21374)),h=i(30407),p=i(59511),c=i(13395);let f=new a.X({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"}),y=s=class extends p.Z{constructor(...t){super(...t),this.color=new o.Z([0,0,0,.25]),this.outline=new c.Z,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,r,i){if(t&&"string"!=typeof t)return t;let s={};return t&&(s.style=t),r&&(s.outline=r),i&&(s.color=i),s}clone(){return new s({color:(0,l.d9)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};(0,n._)([(0,u.Cb)()],y.prototype,"color",void 0),(0,n._)([(0,u.Cb)()],y.prototype,"outline",void 0),(0,n._)([(0,d.J)({esriSFS:"simple-fill"},{readOnly:!0})],y.prototype,"type",void 0),(0,n._)([(0,u.Cb)({type:f.apiValues,json:{read:f.read,write:f.write}})],y.prototype,"style",void 0);let m=y=s=(0,n._)([(0,h.j)("esri.symbols.SimpleFillSymbol")],y)},13395:(t,r,i)=>{"use strict";i.d(r,{Z:()=>M});var s,n=i(24765),o=i(84576),a=i(59118),l=i(85098),u=i(53919),d=(i(21314),i(21374)),h=i(30407),p=(i(99950),i(80629));let c=class extends p.Z{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};(0,n._)([(0,d.J)({esriSLS:"simple-line"},{readOnly:!0})],c.prototype,"type",void 0),(0,n._)([(0,u.Cb)({type:Number,cast:l.t_,json:{write:!0}})],c.prototype,"width",void 0);let f=c=(0,n._)([(0,h.j)("esri.symbols.LineSymbol")],c);var y,m=i(55410),g=i(72140),_=i(71169),b=i(62300),v=i(23812);let w=y=class extends g.wq{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,r,i,s){r[i]="web-map"===s?.origin?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&null!=t[0]?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,r,i,s){"web-map"===s?.origin||(r[i]=t)}clone(){return new y({color:(0,a.d9)(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};(0,n._)([(0,u.Cb)({type:["begin","end","begin-end"],json:{write:!0}})],w.prototype,"placement",void 0),(0,n._)([(0,d.J)({"line-marker":"line-marker"},{readOnly:!0}),(0,u.Cb)({json:{origins:{"web-map":{write:!1}}}})],w.prototype,"type",void 0),(0,n._)([(0,u.Cb)({type:v.k})],w.prototype,"style",void 0),(0,n._)([(0,b.c)("style")],w.prototype,"writeStyle",null),(0,n._)([(0,u.Cb)({type:m.Z,value:null,json:{write:{allowNull:!0}}})],w.prototype,"color",null),(0,n._)([(0,_.r)("color")],w.prototype,"readColor",null),(0,n._)([(0,b.c)("color")],w.prototype,"writeColor",null);let C=w=y=(0,n._)([(0,h.j)("esri.symbols.LineSymbolMarker")],w),S=new o.X({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"}),x=s=class extends f{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,r,i,s,n,o){if(t&&"string"!=typeof t)return t;let a={};return null!=t&&(a.style=t),null!=r&&(a.color=r),null!=i&&(a.width=(0,l.t_)(i)),null!=s&&(a.cap=s),null!=n&&(a.join=n),null!=o&&(a.miterLimit=(0,l.t_)(o)),a}clone(){return new s({color:(0,a.d9)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};(0,n._)([(0,d.J)({esriSLS:"simple-line"},{readOnly:!0})],x.prototype,"type",void 0),(0,n._)([(0,u.Cb)({type:S.apiValues,json:{read:S.read,write:S.write}})],x.prototype,"style",void 0),(0,n._)([(0,u.Cb)({type:["butt","round","square"],json:{write:{overridePolicy:(t,r,i)=>({enabled:"round"!==t&&(null==i||null==i.origin)})}}})],x.prototype,"cap",void 0),(0,n._)([(0,u.Cb)({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,r,i)=>({enabled:"round"!==t&&(null==i||null==i.origin)})}}})],x.prototype,"join",void 0),(0,n._)([(0,u.Cb)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":C}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],x.prototype,"marker",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{read:!1,write:!1}})],x.prototype,"miterLimit",void 0);let M=x=s=(0,n._)([(0,h.j)("esri.symbols.SimpleLineSymbol")],x)},11149:(t,r,i)=>{"use strict";i.d(r,{Z:()=>_});var s,n=i(24765),o=i(55410),a=i(84576),l=i(59118),u=i(85098),d=i(53919),h=(i(21314),i(21374)),p=i(30407),c=i(62300),f=i(62414),y=i(13395);let m=new a.X({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"}),g=s=class extends f.Z{constructor(...t){super(...t),this.color=new o.Z([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new y.Z}normalizeCtorArgs(t,r,i,s){if(t&&"string"!=typeof t)return t;let n={};return t&&(n.style=t),null!=r&&(n.size=(0,u.t_)(r)),i&&(n.outline=i),s&&(n.color=s),n}writeColor(t,r){t&&"x"!==this.style&&"cross"!==this.style&&(r.color=t.toJSON()),null===t&&(r.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new s({angle:this.angle,color:(0,l.d9)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};(0,n._)([(0,d.Cb)()],g.prototype,"color",void 0),(0,n._)([(0,c.c)("color")],g.prototype,"writeColor",null),(0,n._)([(0,h.J)({esriSMS:"simple-marker"},{readOnly:!0})],g.prototype,"type",void 0),(0,n._)([(0,d.Cb)()],g.prototype,"size",void 0),(0,n._)([(0,d.Cb)({type:m.apiValues,json:{read:m.read,write:m.write}})],g.prototype,"style",void 0),(0,n._)([(0,d.Cb)({type:String,json:{write:!0}})],g.prototype,"path",null),(0,n._)([(0,d.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":y.Z}},json:{default:null,write:!0}})],g.prototype,"outline",void 0);let _=g=s=(0,n._)([(0,p.j)("esri.symbols.SimpleMarkerSymbol")],g)},80629:(t,r,i)=>{"use strict";i.d(r,{Z:()=>f});var s=i(24765),n=i(55410),o=i(84576),a=i(72140),l=i(53919),u=(i(99950),i(21314),i(71169)),d=i(30407);let h=new o.X({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"}),p=0,c=class extends a.wq{constructor(t){super(t),this.id="sym"+p++,this.type=null,this.color=new n.Z([0,0,0,1])}readColor(t){return t&&null!=t[0]?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,s._)([(0,l.Cb)({type:h.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:h.write}}})],c.prototype,"type",void 0),(0,s._)([(0,l.Cb)({type:n.Z,json:{write:{allowNull:!0}}})],c.prototype,"color",void 0),(0,s._)([(0,u.r)("color")],c.prototype,"readColor",null);let f=c=(0,s._)([(0,d.j)("esri.symbols.Symbol")],c)},40079:(t,r,i)=>{"use strict";i.d(r,{Z:()=>O});var s=i(24765),n=i(51084),o=i(58493),a=i(66150),l=i(82583),u=i(19687),d=i(53919),h=(i(99950),i(36844)),p=i(71169),c=i(30407),f=i(62300),y=i(13725),m=i(80038),g=i(70126),_=i(5775),b=i(64482),v=i(68714),w=i(65548),C=i(87264),S=i(80629),x=i(40049),M=i(51200),I=i(98775),E=i(40786),T=i(86958);let P={icon:b.Z,object:w.Z,line:v.Z,path:C.Z,fill:_.Z,extrude:g.Z,text:M.Z,water:I.Z},A=n.Z.ofType({base:x.Z,key:"type",typeMap:P,errorContext:"symbol-layer"}),k=class extends S.Z{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;let r=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=r&&r.type||n.Z;this._set("symbolLayers",new i)}get color(){return null}set color(t){this.constructed&&a.Z.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){(0,o.Z)(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){let r=(0,m.f)(t.styleUrl,i);return new E.Z({styleUrl:r,name:t.name})}if(t.styleName&&t.name)return new E.Z({portal:i&&i.portal||y.Z.getDefault(),styleName:t.styleName,name:t.name});i&&i.messages&&i.messages.push(new u.Z("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,s){if(t.styleUrl&&t.name){let i=(0,m.t)(t.styleUrl,s);(0,l.YP)(i)&&(i=(0,l.Fv)(i)),r.styleOrigin={styleUrl:i,name:t.name}}else t.styleName&&t.name&&(t.portal&&s&&s.portal&&!(0,l.tm)(t.portal.restUrl,s.portal.restUrl)?s&&s.messages&&s.messages.push(new u.Z("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof x.Z||t&&P[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};(0,s._)([(0,d.Cb)({json:{read:!1,write:!1}})],k.prototype,"color",null),(0,s._)([(0,d.Cb)({type:A,nonNullable:!0,json:{write:!0}}),(0,h.p)(o.R)],k.prototype,"symbolLayers",null),(0,s._)([(0,d.Cb)({type:E.Z})],k.prototype,"styleOrigin",void 0),(0,s._)([(0,p.r)("styleOrigin")],k.prototype,"readStyleOrigin",null),(0,s._)([(0,f.c)("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k.prototype,"writeStyleOrigin",null),(0,s._)([(0,d.Cb)({type:T.p,json:{read:!1}})],k.prototype,"thumbnail",void 0),(0,s._)([(0,d.Cb)({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k.prototype,"type",void 0);let O=k=(0,s._)([(0,c.j)("esri.symbols.Symbol3D")],k)},40049:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s=i(24765),n=i(72140),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(62300);let u=class extends n.wq{constructor(t){super(t),this.enabled=!0,this.type=null}writeEnabled(t,r,i){t||(r[i]=t)}};(0,s._)([(0,o.Cb)({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],u.prototype,"enabled",void 0),(0,s._)([(0,l.c)("enabled")],u.prototype,"writeEnabled",null),(0,s._)([(0,o.Cb)({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],u.prototype,"type",void 0);let d=u=(0,s._)([(0,a.j)("esri.symbols.Symbol3DLayer")],u)},41719:(t,r,i)=>{"use strict";i.d(r,{Z:()=>_});var s,n=i(24765),o=i(55410),a=i(59118),l=i(85098),u=i(53919),d=i(36844),h=i(21374),p=i(30407),c=i(62300),f=i(84468),y=i(80629),m=i(44267);let g=s=class extends y.Z{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new f.Z,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,r,i){if(t&&"string"!=typeof t)return t;let s={};return t&&(s.text=t),r&&(s.font=r),i&&(s.color=i),s}writeLineWidth(t,r,i,s){s&&"string"!=typeof s?s.origin:r[i]=t}castLineWidth(t){return(0,l.t_)(t)}writeLineHeight(t,r,i,s){s&&"string"!=typeof s?s.origin:r[i]=t}clone(){return new s({angle:this.angle,backgroundColor:(0,a.d9)(this.backgroundColor),borderLineColor:(0,a.d9)(this.borderLineColor),borderLineSize:this.borderLineSize,color:(0,a.d9)(this.color),font:this.font&&this.font.clone(),haloColor:(0,a.d9)(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};(0,n._)([(0,u.Cb)({type:o.Z,json:{write:!0}})],g.prototype,"backgroundColor",void 0),(0,n._)([(0,u.Cb)({type:o.Z,json:{write:!0}})],g.prototype,"borderLineColor",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],g.prototype,"borderLineSize",void 0),(0,n._)([(0,u.Cb)({type:f.Z,json:{write:!0}})],g.prototype,"font",void 0),(0,n._)([(0,u.Cb)({...m.x0,json:{write:!0}})],g.prototype,"horizontalAlignment",void 0),(0,n._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"kerning",void 0),(0,n._)([(0,u.Cb)({type:o.Z,json:{write:!0}})],g.prototype,"haloColor",void 0),(0,n._)([(0,u.Cb)({type:Number,cast:l.t_,json:{write:!0}})],g.prototype,"haloSize",void 0),(0,n._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"rightToLeft",void 0),(0,n._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"rotated",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],g.prototype,"text",void 0),(0,n._)([(0,h.J)({esriTS:"text"},{readOnly:!0})],g.prototype,"type",void 0),(0,n._)([(0,u.Cb)({...m.Nj,json:{write:!0}})],g.prototype,"verticalAlignment",void 0),(0,n._)([(0,u.Cb)({type:Number,cast:l.t_,json:{write:!0}})],g.prototype,"xoffset",void 0),(0,n._)([(0,u.Cb)({type:Number,cast:l.t_,json:{write:!0}})],g.prototype,"yoffset",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{read:t=>t&&-1*t,write:(t,r)=>r.angle=t&&-1*t}})],g.prototype,"angle",void 0),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],g.prototype,"width",void 0),(0,n._)([(0,u.Cb)({type:Number})],g.prototype,"lineWidth",void 0),(0,n._)([(0,c.c)("lineWidth")],g.prototype,"writeLineWidth",null),(0,n._)([(0,d.p)("lineWidth")],g.prototype,"castLineWidth",null),(0,n._)([(0,u.Cb)(m.Ck)],g.prototype,"lineHeight",void 0),(0,n._)([(0,c.c)("lineHeight")],g.prototype,"writeLineHeight",null);let _=g=s=(0,n._)([(0,p.j)("esri.symbols.TextSymbol")],g)},51200:(t,r,i)=>{"use strict";i.d(r,{Z:()=>x});var s,n=i(24765),o=i(59118),a=i(82639),l=i(53919),u=(i(21314),i(21374)),d=i(30407),h=i(62300),p=i(84468),c=i(40049),f=i(58244),y=i(55410),m=i(72140);let g=s=class extends m.wq{constructor(){super(...arguments),this.color=new y.Z([0,0,0,1]),this.size=0}clone(){let t={color:(0,o.d9)(this.color),size:this.size};return new s(t)}};(0,n._)([(0,l.Cb)(f.a)],g.prototype,"color",void 0),(0,n._)([(0,l.Cb)(f.y)],g.prototype,"size",void 0),g=s=(0,n._)([(0,d.j)("esri.symbols.support.Symbol3DHalo")],g);var _=i(31394),b=i(34577);i(99950);let v=class extends(0,b.J)(m.wq){constructor(t){super(t),this.color=null}};(0,n._)([(0,l.Cb)(f.a)],v.prototype,"color",void 0),v=(0,n._)([(0,d.j)("esri.symbols.support.Symbol3DTextBackground")],v);var w,C=i(44267);let S=w=class extends c.Z{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){(0,a.pC)(t)&&(0,a.pC)(this._userSize)&&(t.size=this._userSize),this._set("font",t)}writeFont(t,r,i,s){let n={...s,textSymbol3D:!0};r.font=t.write({},n),delete r.font.size}get size(){return(0,a.pC)(this._userSize)?this._userSize:(0,a.pC)(this.font)&&null!=this.font.size?this.font.size:9}set size(t){this._userSize=t,(0,a.pC)(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){let t=new w({enabled:this.enabled,font:this.font&&(0,o.d9)(this.font),halo:this.halo&&(0,o.d9)(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:(0,a.pC)(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:(0,o.d9)(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){var r,i;return new w({font:(0,a.pC)(t.font)?t.font.clone():new p.Z,halo:(r=t.haloColor,i=t.haloSize,r&&null!=i&&i>0?new g({color:(0,o.d9)(r),size:i}):null),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new _.b({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new v({color:t.backgroundColor.clone()}):null})}};(0,n._)([(0,l.Cb)({type:p.Z,json:{write:!0}})],S.prototype,"font",null),(0,n._)([(0,h.c)("font")],S.prototype,"writeFont",null),(0,n._)([(0,l.Cb)({type:g,json:{write:!0}})],S.prototype,"halo",void 0),(0,n._)([(0,l.Cb)({...C.x0,json:{default:"center",write:!0}})],S.prototype,"horizontalAlignment",void 0),(0,n._)([(0,l.Cb)({...C.Ck,json:{default:1,write:!0}})],S.prototype,"lineHeight",void 0),(0,n._)([(0,l.Cb)({type:_.b,json:{write:!0}})],S.prototype,"material",void 0),(0,n._)([(0,l.Cb)({type:v,json:{write:!0}})],S.prototype,"background",void 0),(0,n._)([(0,l.Cb)(f.y)],S.prototype,"size",null),(0,n._)([(0,l.Cb)({type:String,json:{write:!0}})],S.prototype,"text",void 0),(0,n._)([(0,u.J)({Text:"text"},{readOnly:!0})],S.prototype,"type",void 0),(0,n._)([(0,l.Cb)({...C.Nj,json:{default:"baseline",write:!0}})],S.prototype,"verticalAlignment",void 0);let x=S=w=(0,n._)([(0,d.j)("esri.symbols.TextSymbol3DLayer")],S)},98775:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s,n=i(24765),o=i(55410),a=i(59118),l=i(53919),u=i(21314),d=i(21374),h=i(30407),p=i(40049);let c=s=class extends p.Z{constructor(t){super(t),this.color=f.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new s({color:(0,a.d9)(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};(0,n._)([(0,l.Cb)({type:o.Z,nonNullable:!0,json:{type:[u.z8],write:(t,r,i)=>r[i]=t.toArray(o.Z.AlphaMode.UNLESS_OPAQUE),default:()=>f.clone(),defaultEquals:t=>t.toCss(!0)===f.toCss(!0)}})],c.prototype,"color",void 0),(0,n._)([(0,d.J)({Water:"water"},{readOnly:!0})],c.prototype,"type",void 0),(0,n._)([(0,l.Cb)({type:["small","medium","large"],json:{write:!0,default:"medium"}})],c.prototype,"waterbodySize",void 0),(0,n._)([(0,l.Cb)({type:Number,json:{write:!0,default:null}})],c.prototype,"waveDirection",void 0),(0,n._)([(0,l.Cb)({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],c.prototype,"waveStrength",void 0),c=s=(0,n._)([(0,h.j)("esri.symbols.WaterSymbol3DLayer")],c);let f=new o.Z([0,119,190]),y=c},21950:(t,r,i)=>{"use strict";i.d(r,{Z:()=>g});var s,n=i(24765),o=i(66150),a=i(82639),l=i(66138),u=i(53919),d=(i(99950),i(21314),i(21374)),h=i(30407),p=i(13725),c=i(80038),f=i(80629),y=i(86958);let m=s=class extends f.Z{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){let t=(0,a.pC)(this.portal)?this.portal:p.Z.getDefault(),r=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${r}:${t.url}`}read(t,r){this.portal=r?r.portal:void 0,super.read(t,r)}clone(){return new s({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,r){let s=(0,a.pC)(r)?r.cache:null,n=s?this._fetchCacheKey:null;if((0,a.pC)(s)){let t=n&&s.get(n);if(t)return t.clone()}let u=await i.e(551).then(i.bind(i,70551));(0,l.k_)(r);let d=u.resolveWebStyleSymbol(this,{portal:this.portal},t,r);d.catch(t=>{o.Z.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",t)});let h=await d;return"webRef"===t&&"point-3d"===h.type||"cimRef"===t&&"cim"===h.type?((0,a.pC)(s)&&s.set(n,h.clone()),h):null}};(0,n._)([(0,u.Cb)({json:{write:!1}})],m.prototype,"color",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],m.prototype,"styleName",void 0),(0,n._)([(0,u.Cb)({type:p.Z,json:{write:!1}})],m.prototype,"portal",void 0),(0,n._)([(0,u.Cb)({type:String,json:{read:c.r,write:c.w}})],m.prototype,"styleUrl",void 0),(0,n._)([(0,u.Cb)({type:y.p,json:{read:!1}})],m.prototype,"thumbnail",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,n._)([(0,d.J)({styleSymbolReference:"web-style"},{readOnly:!0})],m.prototype,"type",void 0),(0,n._)([(0,u.Cb)()],m.prototype,"_fetchCacheKey",null);let g=m=s=(0,n._)([(0,h.j)("esri.symbols.WebStyleSymbol")],m)},61355:(t,r,i)=>{"use strict";i.d(r,{Z:()=>u});var s=i(24765),n=i(72140),o=i(53919),a=(i(99950),i(21314),i(30407));let l=class extends n.wq{constructor(t){super(t),this.visible=!0}clone(){}};(0,s._)([(0,o.Cb)({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],l.prototype,"type",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],l.prototype,"visible",void 0);let u=l=(0,s._)([(0,a.j)("esri.symbols.callouts.Callout3D")],l)},35424:(t,r,i)=>{"use strict";i.d(r,{Z:()=>g});var s,n=i(24765),o=i(55410),a=i(59118),l=i(82639),u=i(85098),d=i(53919),h=(i(21314),i(21374)),p=i(30407),c=i(61355),f=i(27405),y=i(58244);let m=s=class extends c.Z{constructor(t){super(t),this.type="line",this.color=new o.Z([0,0,0,1]),this.size=(0,u.Wz)(1),this.border=null}get visible(){return this.size>0&&(0,l.pC)(this.color)&&this.color.a>0}clone(){return new s({color:(0,a.d9)(this.color),size:this.size,border:(0,a.d9)(this.border)})}};(0,n._)([(0,h.J)({line:"line"},{readOnly:!0})],m.prototype,"type",void 0),(0,n._)([(0,d.Cb)(y.a)],m.prototype,"color",void 0),(0,n._)([(0,d.Cb)(y.y)],m.prototype,"size",void 0),(0,n._)([(0,d.Cb)({type:f.a,json:{write:!0}})],m.prototype,"border",void 0),(0,n._)([(0,d.Cb)({readOnly:!0})],m.prototype,"visible",null);let g=m=s=(0,n._)([(0,p.j)("esri.symbols.callouts.LineCallout3D")],m)},38135:(t,r,i)=>{"use strict";i.d(r,{Uy:()=>a,Y2:()=>u,gv:()=>l});var s=i(82639),n=i(61355),o=i(35424);function a(t){if(!t)return!1;let r=t.verticalOffset;return!!r&&!(r.screenLength<=0||(0,s.pC)(r.maxWorldLength)&&r.maxWorldLength<=0)}function l(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;let r=t.callout;return!!r&&!!r.visible&&!!a(t)}let u={types:{key:"type",base:n.Z,typeMap:{line:o.Z}},json:{write:!0}}},39263:(t,r,i)=>{"use strict";function s(t,r,i,s){return"function"==typeof t?t(r,i,s):t}function n(t){return[t.r,t.g,t.b,t.a]}function o(t){let r=t.length;for(;r--;)if(!" /-,\n".includes(t.charAt(r)))return!1;return!0}function a(t,r){let i=[],s=0,n=-1;do if((n=t.indexOf("[",s))>=s){if(n>s){let r=t.substr(s,n-s);i.push([r,null,o(r)])}if(s=n+1,(n=t.indexOf("]",s))>=s){if(n>s){let o=r[t.substr(s,n-s)];o&&i.push([null,o,!1])}s=n+1}}while(-1!==n);if(s<t.length-1){let r=t.substr(s);i.push([r,null,o(r)])}return i}function l(t,r,i){let s="",n=null;for(let i of r){let[r,o,a]=i;if(r)a?n=r:(n&&(s+=n,n=null),s+=r);else{let r=t.attributes[o];r&&(n&&(s+=n,n=null),s+=r)}}return d(s,i)}function u(t,r,i){let s=a(r,t);return t=>l(t,s,i)}function d(t,r){switch("string"!=typeof t&&(t=String(t)),r){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function h(t,r,i,s,n,o,a=!0){let l=r/n,u=i/o,d=Math.ceil(l/2),h=Math.ceil(u/2);for(let i=0;i<o;i++)for(let p=0;p<n;p++){let c=4*(p+(a?o-i-1:i)*n),f=0,y=0,m=0,g=0,_=0,b=0,v=0,w=(i+.5)*u;for(let s=Math.floor(i*u);s<(i+1)*u;s++){let i=Math.abs(w-(s+.5))/h,n=(p+.5)*l,o=i*i;for(let i=Math.floor(p*l);i<(p+1)*l;i++){let a=Math.abs(n-(i+.5))/d,l=Math.sqrt(o+a*a);l>=-1&&l<=1&&(f=2*l*l*l-3*l*l+1)>0&&(v+=f*t[(a=4*(i+s*r))+3],m+=f,t[a+3]<255&&(f=f*t[a+3]/250),g+=f*t[a],_+=f*t[a+1],b+=f*t[a+2],y+=f)}}s[c]=g/y,s[c+1]=_/y,s[c+2]=b/y,s[c+3]=v/m}}function p(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function c(t){return t.data?.symbol??null}function f(t){return"CIMVectorMarker"===t.type||"CIMPictureMarker"===t.type||"CIMBarChartMarker"===t.type||"CIMCharacterMarker"===t.type||"CIMPieChartMarker"===t.type||"CIMStackedBarChartMarker"===t.type}function y(t){return"CIMGradientStroke"===t.type||"CIMPictureStroke"===t.type||"CIMSolidStroke"===t.type}function m(t){return"CIMMarkerPlacementAlongLineRandomSize"===t.type||"CIMMarkerPlacementAlongLineSameSize"===t.type||"CIMMarkerPlacementAlongLineVariableSize"===t.type||"CIMMarkerPlacementAtExtremities"===t.type||"CIMMarkerPlacementAtMeasuredUnits"===t.type||"CIMMarkerPlacementAtRatioPositions"===t.type||"CIMMarkerPlacementOnLine"===t.type||"CIMMarkerPlacementOnVertices"===t.type}i.d(r,{$Z:()=>function t(r){if(r)switch(r.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(r.symbolLayers)for(let i of r.symbolLayers){let r=t(i);if(void 0!==r)return r}break;case"CIMTextSymbol":return t(r.symbol);case"CIMSolidStroke":case"CIMSolidFill":return r.color}},BX:()=>S,Cc:()=>_,E_:()=>l,F:()=>function t(r){if(r)switch(r.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(r.symbolLayers)for(let i of r.symbolLayers){let r=t(i);if(void 0!==r)return r}break;case"CIMTextSymbol":return t(r.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return r.width}},FG:()=>M,H1:()=>a,JW:()=>T,NA:()=>g,NO:()=>p,On:()=>w,QI:()=>d,Qf:()=>I,Qs:()=>u,RI:()=>b,TB:()=>E,TT:()=>h,W7:()=>function t(r){if(!r)return null;switch(r.type){case"CIMPolygonSymbol":if(r.symbolLayers)for(let i of r.symbolLayers){let r=t(i);if(null!=r)return r}break;case"CIMTextSymbol":return t(r.symbol);case"CIMSolidFill":return r.color}},X_:()=>x,be:()=>c,gJ:()=>m,hf:()=>s,nn:()=>n,pJ:()=>v,wi:()=>C,yL:()=>y,zL:()=>f});let g=(t,r=0)=>isNaN(t)||null==t?r:t,_=t=>{if(!t)return!1;for(let r of t)switch(r.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function b(){return Promise.all([i.e(962),i.e(3247)]).then(i.bind(i,93247))}function v(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function w(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function C(t){let r="",i="";if(t){let s=t.toLowerCase();s.includes("italic")?r="italic":s.includes("oblique")&&(r="oblique"),s.includes("bold")?i="bold":s.includes("light")&&(i="lighter")}return{style:r,weight:i}}function S(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function x(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function M(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function I(t){return(t?Object.keys(t):[]).map(r=>({name:r,alias:r,type:"string"==typeof t[r]?"esriFieldTypeString":"esriFieldTypeDouble"}))}let E=t=>t.includes("data:image/svg+xml");function T(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}},52165:(t,r,i)=>{"use strict";i.d(r,{Z:()=>v});var s,n=i(24765),o=i(55410),a=i(72140),l=i(59118),u=i(85098),d=i(53919),h=(i(21314),i(30407)),p=i(58244);let c=class extends a.wq{constructor(t){super(t),this.color=new o.Z([0,0,0,1]),this.extensionLength=0,this.size=(0,u.Wz)(1)}clone(){}cloneProperties(){return{color:(0,l.d9)(this.color),size:this.size,extensionLength:this.extensionLength}}};(0,n._)([(0,d.Cb)({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],c.prototype,"type",void 0),(0,n._)([(0,d.Cb)(p.a)],c.prototype,"color",void 0),(0,n._)([(0,d.Cb)({...p.y,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],c.prototype,"extensionLength",void 0),(0,n._)([(0,d.Cb)(p.y)],c.prototype,"size",void 0);let f=c=(0,n._)([(0,h.j)("esri.symbols.edges.Edges3D")],c);i(66150),i(99950),i(12790),i(96082);var y,m=i(21374);let g=y=class extends f{constructor(t){super(t),this.type="sketch"}clone(){return new y(this.cloneProperties())}};(0,n._)([(0,m.J)({sketch:"sketch"},{readOnly:!0})],g.prototype,"type",void 0);let _=g=y=(0,n._)([(0,h.j)("esri.symbols.edges.SketchEdges3D")],g),b=s=class extends f{constructor(t){super(t),this.type="solid"}clone(){return new s(this.cloneProperties())}};(0,n._)([(0,m.J)({solid:"solid"},{readOnly:!0})],b.prototype,"type",void 0);let v={types:{key:"type",base:f,typeMap:{solid:b=s=(0,n._)([(0,h.j)("esri.symbols.support.SolidEdges3D")],b),sketch:_}},json:{write:!0}}},38156:(t,r,i)=>{"use strict";i.d(r,{Z:()=>u});var s=i(24765),n=i(72140),o=i(53919),a=(i(99950),i(21314),i(30407));let l=class extends n.wq{constructor(t){super(t)}clone(){}};(0,s._)([(0,o.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],l.prototype,"type",void 0);let u=l=(0,s._)([(0,a.j)("esri.symbols.patterns.LinePattern3D")],l)},33813:(t,r,i)=>{"use strict";i.d(r,{Z:()=>c});var s,n=i(24765),o=i(84576),a=i(53919),l=(i(99950),i(21314),i(21374)),u=i(30407),d=i(38156);let h=(0,o.w)()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"}),p=s=class extends d.Z{constructor(t){super(t),this.type="style",this.style="solid"}clone(){let t={style:this.style};return new s(t)}};(0,n._)([(0,a.Cb)({type:["style"]})],p.prototype,"type",void 0),(0,n._)([(0,l.J)(h),(0,a.Cb)({type:["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"]})],p.prototype,"style",void 0);let c=p=s=(0,n._)([(0,u.j)("esri.symbols.patterns.LineStylePattern3D")],p)},43363:(t,r,i)=>{"use strict";i.d(r,{Z:()=>u});var s=i(24765),n=i(72140),o=i(53919),a=(i(99950),i(21314),i(30407));let l=class extends n.wq{constructor(t){super(t)}clone(){}};(0,s._)([(0,o.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],l.prototype,"type",void 0);let u=l=(0,s._)([(0,a.j)("esri.symbols.patterns.Pattern3D")],l)},3598:(t,r,i)=>{"use strict";i.d(r,{Z:()=>d});var s,n=i(24765),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(43363);let u=s=class extends l.Z{constructor(t){super(t),this.type="style",this.style="solid"}clone(){let t={style:this.style};return new s(t)}};(0,n._)([(0,o.Cb)({type:["style"]})],u.prototype,"type",void 0),(0,n._)([(0,o.Cb)({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],u.prototype,"style",void 0);let d=u=s=(0,n._)([(0,a.j)("esri.symbols.patterns.StylePattern3D")],u)},7429:(t,r,i)=>{"use strict";i.d(r,{D:()=>u,q:()=>l});var s=i(38156),n=i(33813),o=i(43363),a=i(3598);let l={types:{key:"type",base:o.Z,typeMap:{style:a.Z}},json:{write:!0}},u={types:{key:"type",base:s.Z,typeMap:{style:n.Z}},json:{write:!0}}},3667:(t,r,i)=>{"use strict";i.d(r,{Z:()=>w});var s,n=i(24765),o=i(84576),a=i(72140),l=i(82639),u=i(53919),d=(i(99950),i(21314),i(71169)),h=i(30407),p=i(62300),c=i(99444);let f=s=class extends a.wq{constructor(t){super(t)}async collectRequiredFields(t,r){return(0,c.io)(t,r,this.expression)}clone(){return new s({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],f.prototype,"expression",void 0),(0,n._)([(0,u.Cb)({type:String,json:{write:!0}})],f.prototype,"title",void 0);let y=f=s=(0,n._)([(0,h.j)("esri.layers.support.FeatureExpressionInfo")],f);var m,g=i(70774);let _=(0,o.w)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),b=new o.X({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),v=m=class extends a.wq{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,r){return null!=t?t:r.featureExpression&&0===r.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(t,r,i,s){r[i]=t.write({},s),"0"===t.expression&&(r.featureExpression={value:0})}get mode(){let{offset:t,featureExpressionInfo:r}=this;return this._isOverridden("mode")?this._get("mode"):(0,l.pC)(t)||r?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,r):null}clone(){return new m({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&(0,l._W)(this.featureExpressionInfo,t.featureExpressionInfo)}};(0,n._)([(0,u.Cb)({type:y,json:{write:!0}})],v.prototype,"featureExpressionInfo",void 0),(0,n._)([(0,d.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],v.prototype,"readFeatureExpressionInfo",null),(0,n._)([(0,p.c)("featureExpressionInfo",{featureExpressionInfo:{type:y},"featureExpression.value":{type:[0]}})],v.prototype,"writeFeatureExpressionInfo",null),(0,n._)([(0,u.Cb)({type:_.apiValues,nonNullable:!0,json:{type:_.jsonValues,read:_.read,write:{writer:_.write,isRequired:!0}}})],v.prototype,"mode",null),(0,n._)([(0,u.Cb)({type:Number,json:{write:!0}})],v.prototype,"offset",void 0),(0,n._)([(0,u.Cb)({type:g.f9,json:{type:String,read:b.read,write:b.write}})],v.prototype,"unit",null);let w=v=m=(0,n._)([(0,h.j)("esri.layers.support.ElevationInfo")],v)},48866:(t,r,i)=>{"use strict";i.d(r,{S:()=>g,b:()=>m});var s,n=i(24765),o=i(84576),a=i(72140),l=i(82583),u=i(53919),d=(i(99950),i(21314),i(21374)),h=i(71169),p=i(30407),c=i(62300),f=i(80038);let y=(0,o.w)()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"}),m=s=class extends a.wq{constructor(t){super(t)}readHref(t,r,i){return t?(0,f.f)(t,i):r.dataURI}writeHref(t,r,i,s){t&&((0,l.HK)(t)?r.dataURI=t:(r.href=(0,f.t)(t,s),(0,l.YP)(r.href)&&(r.href=(0,l.Fv)(r.href))))}clone(){return new s({href:this.href,primitive:this.primitive})}};(0,n._)([(0,u.Cb)({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],m.prototype,"href",void 0),(0,n._)([(0,h.r)("href")],m.prototype,"readHref",null),(0,n._)([(0,c.c)("href",{href:{type:String},dataURI:{type:String}})],m.prototype,"writeHref",null),(0,n._)([(0,d.J)(y)],m.prototype,"primitive",void 0),m=s=(0,n._)([(0,p.j)("esri.symbols.support.IconSymbol3DLayerResource")],m);let g="circle"},58572:(t,r,i)=>{"use strict";i.d(r,{S:()=>f,k:()=>c});var s,n=i(24765),o=i(84576),a=i(72140),l=i(53919),u=(i(99950),i(21314),i(21374)),d=i(30407),h=i(80038);let p=(0,o.w)()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"}),c=s=class extends a.wq{clone(){return new s({href:this.href,primitive:this.primitive})}};(0,n._)([(0,l.Cb)({type:String,json:{read:h.r,write:h.w}})],c.prototype,"href",void 0),(0,n._)([(0,u.J)(p)],c.prototype,"primitive",void 0),c=s=(0,n._)([(0,d.j)("esri.symbols.support.ObjectSymbol3DLayerResource")],c);let f="sphere"},40786:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(53306),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(13725);let d=s=class extends o.Z{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new s({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};(0,n._)([(0,a.Cb)({type:String})],d.prototype,"name",void 0),(0,n._)([(0,a.Cb)({type:String})],d.prototype,"styleUrl",void 0),(0,n._)([(0,a.Cb)({type:String})],d.prototype,"styleName",void 0),(0,n._)([(0,a.Cb)({type:u.Z})],d.prototype,"portal",void 0);let h=d=s=(0,n._)([(0,l.j)("esri.symbols.support.StyleOrigin")],d)},33178:(t,r,i)=>{"use strict";i.d(r,{e:()=>u});var s,n=i(24765),o=i(53306),a=i(53919),l=(i(99950),i(21314),i(30407));let u=s=class extends o.Z{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new s({x:this.x,y:this.y})}};(0,n._)([(0,a.Cb)({type:Number})],u.prototype,"x",void 0),(0,n._)([(0,a.Cb)({type:Number})],u.prototype,"y",void 0),u=s=(0,n._)([(0,l.j)("esri.symbols.support.Symbol3DAnchorPosition2D")],u)},31394:(t,r,i)=>{"use strict";i.d(r,{b:()=>h});var s,n=i(24765),o=i(72140),a=i(82639),l=i(53919),u=(i(99950),i(21314),i(30407)),d=i(58244);let h=s=class extends o.wq{constructor(t){super(t),this.color=null}clone(){let t={color:(0,a.pC)(this.color)?this.color.clone():null};return new s(t)}};(0,n._)([(0,l.Cb)(d.a)],h.prototype,"color",void 0),h=s=(0,n._)([(0,u.j)("esri.symbols.support.Symbol3DMaterial")],h)},21324:(t,r,i)=>{"use strict";i.d(r,{Z:()=>h});var s,n=i(24765),o=i(72140),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(58244);let d=s=class extends o.wq{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new s({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};(0,n._)([(0,a.Cb)(u.y)],d.prototype,"screenLength",void 0),(0,n._)([(0,a.Cb)({type:Number,nonNullable:!0,json:{write:!0,default:0}})],d.prototype,"minWorldLength",void 0),(0,n._)([(0,a.Cb)({type:Number,json:{write:!0}})],d.prototype,"maxWorldLength",void 0);let h=d=s=(0,n._)([(0,l.j)("esri.symbols.support.Symbol3DVerticalOffset")],d)},86958:(t,r,i)=>{"use strict";i.d(r,{p:()=>u});var s,n=i(24765),o=i(53306),a=i(53919),l=(i(99950),i(21314),i(30407));let u=s=class extends o.Z{constructor(){super(...arguments),this.url=""}clone(){return new s({url:this.url})}};(0,n._)([(0,a.Cb)({type:String})],u.prototype,"url",void 0),u=s=(0,n._)([(0,l.j)("esri.symbols.support.Thumbnail")],u)},40076:(t,r,i)=>{"use strict";i.d(r,{FW:()=>function t(r,i,s){if(r&&(r.markerPlacement&&function(t,r){switch((0,n.gJ)(t)&&t.offset&&(t.offset*=r),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=r),t.offsetAlongLine&&(t.offsetAlongLine*=r),t.placementTemplate&&t.placementTemplate.length){let i=t.placementTemplate.map(t=>t*r);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=r),t.placementTemplate&&t.placementTemplate.length){let i=t.placementTemplate.map(t=>t*r);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=r);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=r);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=r),t.endPosition&&(t.endPosition*=r);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=r),t.offsetY&&(t.offsetY*=r);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=r),t.offsetY&&(t.offsetY*=r),t.stepX&&(t.stepX*=r),t.stepY&&(t.stepY*=r)}}(r.markerPlacement,i),r.offsetX&&(r.offsetX*=i),r.offsetY&&(r.offsetY*=i),r.anchorPoint&&"Absolute"===r.anchorPointUnits&&(r.anchorPoint={x:r.anchorPoint.x*i,y:r.anchorPoint.y*i}),r.size=null!=r.size?r.size*i:0,"CIMVectorMarker"===r.type&&r.markerGraphics))for(let n of r.markerGraphics)r.scaleSymbolsProportionally||function r(i,s,n,o){if(i){if("CIMTextSymbol"!==i.type){if(n&&i.effects)for(let t of i.effects)(function(t,r){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=r);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=r);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=r),t.endCut&&(t.endCut*=r),t.middleCut&&(t.middleCut*=r);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=r),t.offsetAlongLine&&(t.offsetAlongLine*=r),t.dashTemplate&&t.dashTemplate.length){let i=t.dashTemplate.map(t=>t*r);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=r);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=r),t.offsetY&&(t.offsetY*=r);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=r);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=r);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=r),t.length&&(t.length*=r),t.toWidth&&(t.toWidth*=r);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=r),t.period&&(t.period*=r)}})(t,s);if(i.symbolLayers)for(let n of i.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":t(n,s,o);break;case"CIMPictureStroke":case"CIMSolidStroke":!o?.preserveOutlineWidth&&n.width&&(n.width*=s);break;case"CIMPictureFill":n.height&&(n.height*=s),n.offsetX&&(n.offsetX*=s),n.offsetY&&(n.offsetY*=s);break;case"CIMHatchFill":r(n.lineSymbol,s,!0,{...o,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=s),n.offsetY&&(n.offsetY*=s),n.separation&&(n.separation*=s)}}else null!=i.height&&(i.height*=s)}}(n.symbol,i,!0,s)},iW:()=>o});var s=i(55410),n=i(39263);function o(t){let r=[];return function t(r,i){let s;if(!r)return;s="CIMTextSymbol"===r.type?r.symbol:r;let o="CIMPolygonSymbol"===r.type;if(s?.symbolLayers){for(let r of s.symbolLayers)if(!(r.colorLocked||o&&((0,n.yL)(r)||(0,n.zL)(r)&&r.markerPlacement&&(0,n.gJ)(r.markerPlacement))))switch(r.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":r.tintColor&&a(i,r.tintColor);break;case"CIMVectorMarker":r.markerGraphics?.forEach(r=>{t(r.symbol,i)});break;case"CIMSolidStroke":case"CIMSolidFill":a(i,r.color);break;case"CIMHatchFill":t(r.lineSymbol,i)}}}((0,n.be)(t),r),r.length?new s.Z((0,n.NO)(r[0])):null}function a(t,r){for(let i of t)if(i.join(".")===r.join("."))return;t.push(r)}},85932:(t,r,i)=>{"use strict";i.d(r,{ix:()=>n,l9:()=>o,rx:()=>a});var s=i(55410);let n=new s.Z("white"),o=(new s.Z("black"),new s.Z([255,255,255,0]));function a(t){return 0===t.r&&0===t.g&&0===t.b}},65910:(t,r,i)=>{"use strict";i.d(r,{CJ:()=>d,G:()=>c,Rz:()=>p,kD:()=>y,mW:()=>f,xA:()=>u,z3:()=>h}),i(96082);var s=i(59572),n=i(13395),o=i(11149),a=i(41719),l=i(56232);let u=o.Z.fromJSON(l.I4),d=n.Z.fromJSON(l.ET),h=s.Z.fromJSON(l.lF),p=a.Z.fromJSON(l.qP),c=o.Z.fromJSON(l.eG),f=n.Z.fromJSON(l.wW),y=s.Z.fromJSON(l.lj)},56232:(t,r,i)=>{"use strict";i.d(r,{ET:()=>o,I4:()=>n,eG:()=>u,lF:()=>a,lj:()=>h,qP:()=>l,wW:()=>d});let s=[252,146,31,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:s,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:s},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},d={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},h={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},13364:(t,r,i)=>{"use strict";i.d(r,{Ne:()=>g,Od:()=>y,Sp:()=>m,_M:()=>f,mx:()=>function t(r){if(!r)return null;let i=null;switch(r.type){case h:case d:case p:i=t(r.outline);break;case"simple-line":{let t=(0,l.F2)(r.width);null!=r.style&&"none"!==r.style&&0!==t&&(i={color:r.color,style:m(r.style),width:t,cap:r.cap,join:"miter"===r.join?(0,l.F2)(r.miterLimit):r.join});break}default:i=null}return i}});var s=i(6487),n=i(55410),o=i(57837),a=i(86214),l=i(85098),u=i(40076);let d="picture-fill",h="simple-fill",p="simple-marker",c=new a.Z(1e3);function f(t){let r=t.style,i=null;if(t)switch(t.type){case p:"cross"!==r&&"x"!==r&&(i=t.color);break;case h:"solid"===r?i=t.color:"none"!==r&&(i={type:"pattern",x:0,y:0,src:(0,s.V)(`esri/symbols/patterns/${r}.png`),width:5,height:5});break;case d:i={type:"pattern",src:t.url,width:(0,l.F2)(t.width)*t.xscale,height:(0,l.F2)(t.height)*t.yscale,x:(0,l.F2)(t.xoffset),y:(0,l.F2)(t.yoffset)};break;case"text":i=t.color;break;case"cim":i=(0,u.iW)(t)}return i}function y(t,r){let i=t+"-"+r;return void 0!==c.get(i)?Promise.resolve(c.get(i)):(0,o.default)(t,{responseType:"image"}).then(t=>{let s=t.data,n=s.naturalWidth,o=s.naturalHeight,a=document.createElement("canvas");a.width=n,a.height=o;let l=a.getContext("2d");l.fillStyle=r,l.fillRect(0,0,n,o),l.globalCompositeOperation="destination-in",l.drawImage(s,0,0);let u=a.toDataURL();return c.put(i,u),u})}let m=(()=>{let t={};return r=>{if(t[r])return t[r];let i=r.replace(/-/g,"");return t[r]=i,i}})(),g=new n.Z([128,128,128])},62888:(t,r,i)=>{"use strict";i.d(r,{im:()=>M,cW:()=>w,vX:()=>C});var s=i(98402),n=i(12790),o=i(82639),a=i(40079),l=i(21950),u=i(83629),d=i(13395),h=i(11795),p=i(11149),c=i(94974),f=i(59572),y=i(25131),m=i(71905),g=i(41719),_=i(5680);let b={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0},v=["building-scene","integrated-mesh","point-cloud","scene"];function w(t,r,i,s){let n=x(t,{},{context:s,isLabelSymbol:!1});(0,o.pC)(n)&&(r[i]=n)}function C(t,r,i,s){let n=x(t,{},{context:s,isLabelSymbol:!0});(0,o.pC)(n)&&(r[i]=n)}function S(t){return t instanceof a.Z||t instanceof l.Z}function x(t,r,i){if((0,o.Wi)(t))return null;let{context:a,isLabelSymbol:w}=i,C=a?.origin,x=a?.messages;if("web-scene"===C&&!S(t)){let i=function(t,r=b){if(!t)return{symbol:null};let{retainId:i=b.retainId,ignoreDrivers:o=b.ignoreDrivers,hasLabelingContext:a=b.hasLabelingContext,retainCIM:v=b.retainCIM}=r,w=null;if((0,s.dU)(t)||t instanceof l.Z)w=t.clone();else if("cim"===t.type){let r=t.data?.symbol?.type;if("CIMPointSymbol"!==r)return{error:new n.Z("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${r||"unknown"}' is unsupported in 3D`,{symbol:t})};w=v?t.clone():u.Z.fromCIMSymbol(t)}else if(t instanceof d.Z)w=h.Z.fromSimpleLineSymbol(t);else if(t instanceof p.Z)w=u.Z.fromSimpleMarkerSymbol(t);else if(t instanceof c.Z)w=u.Z.fromPictureMarkerSymbol(t);else if(t instanceof f.Z)w=r.geometryType&&"mesh"===r.geometryType?y.Z.fromSimpleFillSymbol(t):m.Z.fromSimpleFillSymbol(t);else{if(!(t instanceof g.Z))return{error:new n.Z("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};w=a?_.Z.fromTextSymbol(t):u.Z.fromTextSymbol(t)}if(i&&w&&"cim"!==w.type&&(w.id=t.id),o&&(0,s.dU)(w))for(let t=0;t<w.symbolLayers.length;++t)w.symbolLayers.getItemAt(t)._ignoreDrivers=!0;return{symbol:w}}(t,{retainCIM:!0,hasLabelingContext:w});return(0,o.pC)(i.symbol)?i.symbol.write(r,a):(x?.push(new n.Z("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:a,error:i.error})),null)}let M=a?.layer?.type;return"web-map"!==C&&("portal-item"!==C||M&&v.includes(M))||!S(t)?t.write(r,a):(x?.push(new n.Z("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:a})),null)}function M(t,r){return(0,s.S9)(t,null,r)}},23812:(t,r,i)=>{"use strict";i.d(r,{J:()=>s,k:()=>n});let s=["begin","end","begin-end"],n=["arrow","circle","square","diamond","cross","x"]},58244:(t,r,i)=>{"use strict";i.d(r,{a:()=>l,y:()=>u});var s=i(55410),n=i(85098),o=i(21314),a=i(59534);let l={type:s.Z,json:{type:[o.z8],default:null,read:{source:["color","transparency"],reader:function(t,r){let i=null!=r.transparency?(0,a.b)(r.transparency):1,n=r.color;return n&&Array.isArray(n)?new s.Z([n[0]||0,n[1]||0,n[2]||0,i]):null}},write:{target:{color:{type:[o.z8]},transparency:{type:o.z8}},writer:function(t,r){r.color=t.toJSON().slice(0,3);let i=(0,a.a)(t.a);0!==i&&(r.transparency=i)}}}},u={type:Number,cast:n.t_,json:{write:!0}}},39501:(t,r,i)=>{"use strict";i.d(r,{DY:()=>f,EB:()=>p,EV:()=>u,JZ:()=>a,Pc:()=>h,TE:()=>c,XX:()=>y,b_:()=>s,dc:()=>_,eb:()=>l,ht:()=>d,tp:()=>m,uH:()=>g});var s,n,o=i(55410);(n=s||(s={}))[n.size=22]="size",n[n.lineWidth=50]="lineWidth",n[n.maxSize=120]="maxSize",n[n.maxOutlineSize=80]="maxOutlineSize",n[n.tallSymbolWidth=20]="tallSymbolWidth";let a={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function l(t,r,i){let n=s.size,o=n,a=n;t<1?o*=.75:t>1&&(a*=1.25);let l=n,u=n;return r&&i&&(o=a=l=u=0),[{type:"path",path:[{command:"M",values:[l,0]},{command:"L",values:[i?l:.875*l,0]},{command:"L",values:[i?o-.5*l:0,a-.5*u]},{command:"L",values:[o-.5*l,a-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,0]},{command:"L",values:[l,r?0:.125*u]},{command:"L",values:[o-.5*l,r?a-.5*u:u]},{command:"L",values:[o-.5*l,a-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o-.5*l,a-.5*u]},{command:"L",values:[i?o-.5*l:0,a-.5*u]},{command:"L",values:[i?o-.5*l:0,r?a-.5*u:u]},{command:"L",values:[o-.5*l,r?a-.5*u:u]},{command:"Z",values:[]}]}]}function u(t){let r=s.size,i=.5*t;return[{type:"path",path:[{command:"M",values:[0,.7*r*.5]},{command:"L",values:[.3*r,.7*r]},{command:"L",values:[.3*r,.7*r+i]},{command:"L",values:[0,.7*r+i-.7*r*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*r,.7*r]},{command:"L",values:[.3*r,.7*r+i]},{command:"L",values:[r,i]},{command:"L",values:[r,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*r,0]},{command:"L",values:[r,0]},{command:"L",values:[.3*r,.7*r]},{command:"L",values:[0,.7*r*.5]},{command:"Z",values:[]}]}]}function d(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function h(t,r){let i=r?s.tallSymbolWidth:t,n=r?4:6;i<=s.size?i-=.5*n:i-=n;let o=r?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,.5*o]},{command:"L",values:[.5*i,o]},{command:"L",values:[0,.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*o]},{command:"L",values:[.5*i,o]},{command:"L",values:[.5*i,t]},{command:"L",values:[0,t-.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,o]},{command:"L",values:[.5*i,t]},{command:"L",values:[i,t-.5*o]},{command:"L",values:[i,.5*o]},{command:"Z",values:[]}]}]}function p(t,r){let i=r?s.tallSymbolWidth:t,n=r?4:6;i<=s.size?i-=.5*n:i-=n;let o=.5*i,a=.15*i,l=t-a;return[{type:"ellipse",cx:.5*i,cy:l,rx:o,ry:a},{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,l]},{command:"L",values:[i,l]},{command:"L",values:[i,a]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:a,rx:o,ry:a}]}function c(t,r){let i=r?s.tallSymbolWidth:t,n=r?4:6;i<=s.size?i-=.5*n:i-=n;let o=.15*i,a=t-o;return[{type:"ellipse",cx:.5*i,cy:a,rx:.5*i,ry:o},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,a]},{command:"L",values:[0,a]},{command:"Z",values:[]}]}]}function f(t){let r=t;r<s.size?r-=3:r-=6;let i=.15*r;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[r,0]},{command:"L",values:[.5*r,t-i]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*r,cy:0,rx:.5*r,ry:i}]}function y(t){let r=t;r<s.size?r-=2:r-=4;let i=r,n=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*i,0]},{command:"L",values:[i,.5*t-n]},{command:"L",values:[.45*i-n,.5*t+n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*i,0]},{command:"L",values:[.45*i-n,.5*t+n]},{command:"L",values:[0,.5*t-n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*t-n]},{command:"L",values:[.45*i-n,.5*t+n]},{command:"L",values:[.45*i,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*i,t]},{command:"L",values:[i,.5*t-n]},{command:"L",values:[.45*i-n,.5*t+n]},{command:"Z",values:[]}]}]}function m(t){let r=t;return r<s.size?r-=1:r-=2,[{type:"path",path:[{command:"M",values:[.45*t,0]},{command:"L",values:[t,r]},{command:"L",values:[.45*t,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,0]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[0,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,r]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[t,r]},{command:"Z",values:[]}]}]}function g(t,r){return Math.round(Math.min(Math.max(t+255*r*.75,0),255))}function _(t,r){if(null==t)return new o.Z;if("type"in t&&("linear"===t.type||"pattern"===t.type))return t;let i=new o.Z(t);return new o.Z([g(i.r,r),g(i.g,r),g(i.b,r),i.a])}},57135:(t,r,i)=>{"use strict";i.d(r,{w:()=>V,r:()=>z});var s=i(49869),n=i(57837),o=i(36164),a=i(12790),l=i(96082),u=(i(70992),i(31088)),d=i(55410),h=i(82639),p=i(60013),c=i(50088),f=(i(93381),i(73568));let y=0,m=0,g=(0,l.Z)("android"),_=(0,l.Z)("chrome")||g&&g>=4?"auto":"optimizeLegibility",b={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},v=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,w={},C={},S={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},x=Math.PI,M=1;function I(t,r){let i=x/180*t;return Math.abs(r*Math.sin(i))+Math.abs(r*Math.cos(i))}function E(t){return t.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function T(t,r,i,s){if(t){if("circle"===t.type)return(0,f.u)("circle",{fill:r,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,r:t.r});if("ellipse"===t.type)return(0,f.u)("ellipse",{fill:r,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,rx:t.rx,ry:t.ry});if("rect"===t.type)return(0,f.u)("rect",{fill:r,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:t.x,y:t.y,width:t.width,height:t.height});if("image"===t.type)return(0,f.u)("image",{href:t.src,x:t.x,y:t.y,width:t.width,height:t.height,preserveAspectRatio:"none"});if("path"===t.type){let s="string"!=typeof t.path?E(t.path):t.path;return(0,f.u)("path",{fill:r,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:s})}if("text"===t.type)return(0,h.O3)(s),(0,f.u)("text",{"dominant-baseline":s.dominantBaseline,fill:r,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":s.align,"text-decoration":s.decoration,kerning:s.kerning,rotate:s.rotate,"text-rendering":_,"font-style":s.font.style,"font-variant":s.font.variant,"font-weight":s.font.weight,"font-size":s.font.size,"font-family":s.font.family,x:t.x,y:t.y},t.text)}return null}function P(t){let r={fill:"none",pattern:null,linearGradient:null};if(t){if("type"in t&&"pattern"===t.type){let i="patternId-"+ ++y;r.fill=`url(#${i})`,r.pattern={id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}}}else if("type"in t&&"linear"===t.type){let i="linearGradientId-"+ ++m;r.fill=`url(#${i})`,r.linearGradient={id:i,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(t=>({offset:t.offset,color:t.color&&new d.Z(t.color).toString()}))}}else if(t){let i=new d.Z(t);r.fill=i.toString()}}return r}function A(t){let r={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(t&&(null!=t.width&&(r.width=t.width),t.cap&&(r.cap=t.cap),t.join&&(r.join=t.join.toString()),t.color&&(r.color=new d.Z(t.color).toString()),t.dashArray&&(r.dashArray=t.dashArray),t.dashArray&&(r.dashOffset=t.dashoffset),t.style)){let i=null;if(t.style in S&&(i=S[t.style]),Array.isArray(i)){i=i.slice(0);let r=t.width??0;for(let t=0;t<i.length;++t)i[t]*=r;if("butt"!==t.cap){for(let t=0;t<i.length;t+=2)i[t]-=r,i[t]<1&&(i[t]=1);for(let t=1;t<i.length;t+=2)i[t]+=r}i=i.join(",")}r.dashArray=i}return r}function k(t,r){let i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){let s=t.alignBaseline;i.align=t.align,i.dominantBaseline="baseline"===s?"auto":"top"===s?"text-top":"bottom"===s?"hanging":s,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",(0,h.O3)(r),i.font.style=r.style||"normal",i.font.variant=r.variant||"normal",i.font.weight=r.weight||"normal",i.font.size=r.size&&r.size.toString()||"10pt",i.font.family=r.family||"serif"}return i}function O(t,r,i){return(0,c.t)(t,(0,c.i)(t),[r,i])}function R(t,r,i,s,n){return(0,c.s)(t,(0,c.i)(t),[r,i]),t[4]=t[4]*r-s*r+s,t[5]=t[5]*i-n*i+n,t}function L(t,r){w&&"left"in w?(null!=w.left&&w.left>t&&(w.left=t),(null==w.right||w.right<t)&&(w.right=t),(null==w.top||w.top>r)&&(w.top=r),(null==w.bottom||w.bottom<r)&&(w.bottom=r)):w={left:t,bottom:r,right:t,top:r}}function F(t){let r;let i=t.args,s=i.length;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<s;r+=2)L(i[r],i[r+1]);C.x=i[s-2],C.y=i[s-1];break;case"H":for(r=0;r<s;++r)L(i[r],C.y);C.x=i[s-1];break;case"V":for(r=0;r<s;++r)L(C.x,i[r]);C.y=i[s-1];break;case"m":{let t=0;for(("x"in C)||(L(C.x=i[0],C.y=i[1]),t=2),r=t;r<s;r+=2)L(C.x+=i[r],C.y+=i[r+1]);break}case"l":case"t":for(r=0;r<s;r+=2)L(C.x+=i[r],C.y+=i[r+1]);break;case"h":for(r=0;r<s;++r)L(C.x+=i[r],C.y);break;case"v":for(r=0;r<s;++r)L(C.x,C.y+=i[r]);break;case"c":for(r=0;r<s;r+=6)L(C.x+i[r],C.y+i[r+1]),L(C.x+i[r+2],C.y+i[r+3]),L(C.x+=i[r+4],C.y+=i[r+5]);break;case"s":case"q":for(r=0;r<s;r+=4)L(C.x+i[r],C.y+i[r+1]),L(C.x+=i[r+2],C.y+=i[r+3]);break;case"A":for(r=0;r<s;r+=7)L(i[r+5],i[r+6]);C.x=i[s-2],C.y=i[s-1];break;case"a":for(r=0;r<s;r+=7)L(C.x+=i[r+5],C.y+=i[r+6])}}function N(t,r,i){let s;let n=b[t.toLowerCase()];"number"==typeof n&&(n?r.length>=n&&(s={action:t,args:r.slice(0,r.length-r.length%n)},i.push(s),F(s)):(s={action:t,args:[]},i.push(s),F(s)))}function j(t,r,i,s={}){let n=[],o=[],a=++M,l=function(t,r,i){let s=t?.effects.find(t=>"bloom"===t.type);if(!s)return null;let{strength:n,radius:o}=s,a=n>0?o:0,l=(n+a)*r,u=4*n+1;return(0,f.u)("filter",{id:`bloom${i}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},(0,f.u)("feMorphology",{operator:"dilate",radius:5**(r/100)*(.4+r/100)*(n+.5*a),in:"SourceGraphic",result:"dilate"}),(0,f.u)("feGaussianBlur",{in:"dilate",stdDeviation:l/25,result:"blur"}),(0,f.u)("feGaussianBlur",{in:"blur",stdDeviation:l/50,result:"intensityBlur"}),(0,f.u)("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},(0,f.u)("feFuncR",{type:"linear",slope:u}),(0,f.u)("feFuncG",{type:"linear",slope:u}),(0,f.u)("feFuncB",{type:"linear",slope:u})),(0,f.u)("feMerge",null,(0,f.u)("feMergeNode",{in:"intensityBlur"}),(0,f.u)("feMergeNode",{in:"intensityBrightness"}),(0,f.u)("feGaussianBlur",{stdDeviation:n/10})))}(s.effectView,r,a),u=null;if(l){let t=s.effectView?.effects.find(t=>"bloom"===t.type),n=(t.strength?t.strength+t.radius/2:0)/3;u=[Math.max(r+r*n,10),Math.max(i+i*n,10)]}for(let a=0;a<t.length;a++){let l=t[a],d=[],y=[],m=0,g=0,_=0;for(let t of l){let{shape:r,fill:i,stroke:o,font:a,offset:l}=t;s.ignoreStrokeWidth||(m+=o&&o.width||0);let u=P(i),p=A(o),c="text"===r.type?k(r,a):null;n.push(function(t){let{pattern:r,linearGradient:i}=t;if(r)return(0,f.u)("pattern",{id:r.id,patternUnits:"userSpaceOnUse",x:r.x,y:r.y,width:r.width,height:r.height},(0,f.u)("image",{x:r.image.x,y:r.image.y,width:r.image.width,height:r.image.height,href:r.image.href}));if(i){let t=i.stops.map((t,r)=>(0,f.u)("stop",{key:`${r}-stop`,offset:t.offset,"stop-color":t.color}));return(0,f.u)("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},t)}return null}(u)),d.push(T(r,u.fill,p,c)),y.push(function(t){let r={x:0,y:0,width:0,height:0};if("circle"===t.type)r.x=t.cx-t.r,r.y=t.cy-t.r,r.width=2*t.r,r.height=2*t.r;else if("ellipse"===t.type)r.x=t.cx-t.rx,r.y=t.cy-t.ry,r.width=2*t.rx,r.height=2*t.ry;else if("image"===t.type||"rect"===t.type)r.x=t.x,r.y=t.y,r.width=t.width,r.height=t.height;else if("path"===t.type){let i=(0,h.s3)(function(t){let r=("string"!=typeof t.path?E(t.path):t.path).match(v),i=[];if(w={},C={},!r)return null;let s="",n=[],o=r.length;for(let t=0;t<o;++t){let o=r[t],a=parseFloat(o);isNaN(a)?(s&&N(s,n,i),n=[],s=o):n.push(a)}N(s,n,i);let a={x:0,y:0,width:0,height:0};return w&&"left"in w&&(a.x=w.left,a.y=w.top,a.width=w.right-w.left,a.height=w.bottom-w.top),a}(t));r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height}return r}(r)),l&&(g+=l[0],_+=l[1])}let b=function(t,r,i,s,n,o,a,l,u){let d=(a&&o?I(o,r):r)/2,h=(a&&o?I(o,i):i)/2;if(u){let t=u[0],r=u[1];d=(a&&o?I(o,t):t)/2,h=(a&&o?I(o,r):r)/2}let f=t.width+s,y=t.height+s,m=(0,p.c)(),g=(0,p.c)(),_=!1;if(n&&0!==f&&0!==y){let t=r!==i?r/i:f/y,s=r>i?r:i,n=1,o=1;isNaN(s)||(t>1?(n=s/f,o=s/t/y):(o=s/y,n=s*t/f)),(0,c.m)(g,g,R(m,n,o,d,h)),_=!0}let b=t.x+(f-s)/2,v=t.y+(y-s)/2;if((0,c.m)(g,g,O(m,d-b,h-v)),!_&&(f>r||y>i)){let t=f/r>y/i,s=(t?r:i)/(t?f:y);(0,c.m)(g,g,R(m,s,s,b,v))}return o&&(0,c.m)(g,g,function(t,r,i,s){let n=r%360*Math.PI/180;(0,c.r)(t,(0,c.i)(t),n);let o=Math.cos(n),a=Math.sin(n),l=t[4],u=t[5];return t[4]=l*o-u*a+s*a-i*o+i,t[5]=u*o+l*a-i*a-s*o+s,t}(m,o,b,v)),l&&(0,c.m)(g,g,O(m,l[0],l[1])),`matrix(${g[0]},${g[1]},${g[2]},${g[3]},${g[4]},${g[5]})`}((0,h.s3)(function(t){let r={x:0,y:0,width:0,height:0},i=null,s=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(let o of t)i?(i.x=Math.min(i.x,o.x),i.y=Math.min(i.y,o.y),s=Math.max(s,o.x+o.width),n=Math.max(n,o.y+o.height)):((i=r).x=o.x,i.y=o.y,s=o.x+o.width,n=o.y+o.height);return i&&(i.width=s-i.x,i.height=n-i.y),i}(y)),r,i,m,s.scale??!1,s.rotation,s.useRotationSize??!1,[g,_],u),S=null;if(s.masking){let t=`mask-${a}`,r=s.masking[a];n.push(function(t,r){if(!t)return null;let i=[];for(let r of t){let{shape:t,fill:s,stroke:n,font:o}=r,a=P(s),l=A(n),u="text"===t.type?k(t,o):null,d=T(t,a.fill,l,u);d&&i.push(d)}return(0,f.u)("mask",{id:r,maskUnits:"userSpaceOnUse"},(0,f.u)("g",null,i))}(r,t)),S=`url(#${t})`}o.push(S?(0,f.u)("g",{mask:S},(0,f.u)("g",{transform:b},d)):(0,f.u)("g",{transform:b},d))}return s.useRotationSize&&s.rotation&&(r=I(s.rotation,r),i=I(s.rotation,i)),l&&((0,h.O3)(u),r=u[0],i=u[1]),(0,f.u)("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:i,style:"display: block;"},l,(0,f.u)("defs",null,n),l?(0,f.u)("g",{filter:`url(#bloom${a})`},o):o)}var D=i(75138);let Z=(0,u.E)();function V(t,r,i){let s=Math.ceil(r[0]),n=Math.ceil(r[1]);if(!t.some(t=>!!t.length))return null;let o=i&&i.node||document.createElement("div");return null!=i.opacity&&(o.style.opacity=i.opacity.toString()),null!=i.effectView&&(o.style.filter=(0,D.wJ)(i.effectView)),Z.append(o,j.bind(null,t,s,n,i)),o}function z(t,r,i,u,d){var h;return((h=t)?(0,n.default)(h,{responseType:"image"}).then(t=>{let i=t.data,s=i.width,n=i.height,o=s/n,a=r;return d&&(a=Math.min(a,Math.max(s,n))),{image:i,width:o<=1?Math.ceil(a*o):a,height:o<=1?a:Math.ceil(a/o)}}):Promise.reject(new a.Z("renderUtils: imageDataSize","href not provided."))).then(n=>{let a=n.width?n.width:r,d=n.height?n.height:r;if(n.image&&!(!i||"ignore"===u||"multiply"===u&&255===i.r&&255===i.g&&255===i.b&&1===i.a)){let r=n.image.width,s=n.image.height;(0,l.Z)("edge")&&/\.svg$/i.test(t)&&(r-=1,s-=1);let h=function(t,r){t=Math.ceil(t),r=Math.ceil(r);let i=document.createElement("canvas");i.width=t,i.height=r,i.style.width=t+"px",i.style.height=r+"px";let s=i.getContext("2d");return s.clearRect(0,0,t,r),s}(a,d);h.drawImage(n.image,0,0,r,s,0,0,a,d);let p=h.getImageData(0,0,a,d),c=[i.r/255,i.g/255,i.b/255,i.a],f=(0,o._Y)(i);for(let t=0;t<p.data.length;t+=4)!function(t,r,i,s,n){if("multiply"===n)t[r+0]*=i[0],t[r+1]*=i[1],t[r+2]*=i[2],t[r+3]*=i[3];else{let n=(0,o._Y)({r:t[r+0],g:t[r+1],b:t[r+2]});n.h=s.h,n.s=s.s,n.v=n.v/100*s.v;let a=(0,o.xr)(n);t[r+0]=a.r,t[r+1]=a.g,t[r+2]=a.b,t[r+3]*=i[3]}}(p.data,t,c,f,u);h.putImageData(p,0,0),t=h.canvas.toDataURL("image/png")}else{let r=s.id&&s.id.findCredential(t);if(r&&r.token){let i=t.includes("?")?"&":"?";t=`${t}${i}token=${r.token}`}}return{url:t,width:a,height:d}}).catch(()=>({url:t,width:r,height:r}))}},16433:(t,r,i)=>{"use strict";i.d(r,{EJ:()=>m,KV:()=>f,n2:()=>c,v9:()=>y,wm:()=>b});var s=i(57837),n=i(12790),o=i(82639),a=i(66138),l=i(82583),u=i(13725),d=i(75032),h=i(50445);let p={};function c(t,r,i){return t&&(0,o.pC)(t.styleUrl)?async function(t,r){try{return{data:(await m(t,r)).data,baseUrl:(0,l.Yd)(t),styleUrl:t}}catch(t){return(0,a.r9)(t),null}}(t.styleUrl,i):t&&(0,o.pC)(t.styleName)?function(t,r,i){let s;let a=(0,o.pC)(r.portal)?r.portal:u.Z.getDefault(),l=`${a.url} - ${a.user&&a.user.username} - ${t}`;return p[l]||(p[l]=a.load(i).then(()=>{let r=new d.Z({disableExtraQuery:!0,query:`owner:${g} AND type:${_} AND typekeywords:"${t}"`});return a.queryItems(r,i)}).then(({results:r})=>{let s=null,o=t.toLowerCase();if(r&&Array.isArray(r)){for(let t of r)if(t.typeKeywords?.some(t=>t.toLowerCase()===o)&&t.type===_&&t.owner===g){s=t;break}}if(!s)throw new n.Z("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(i)}).then(t=>(s=t,t.fetchData())).then(r=>({data:r,baseUrl:s.itemUrl??"",styleName:t}))),p[l]}(t.styleName,r,i):Promise.reject(new n.Z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function f(t){return null===t||"CIMSymbolReference"===t.type?t:{type:"CIMSymbolReference",symbol:t}}function y(t,r){if("cimRef"===r)return t.cimRef;if(t.formatInfos&&!(0,h.K3)()){for(let r of t.formatInfos)if("gltf"===r.type)return r.href}return t.webRef}function m(t,r){let i={responseType:"json",query:{f:"json"},...r};return(0,s.default)((0,l.Fv)(t),i)}let g="esri_en",_="Style",b="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},79005:(t,r,i)=>{"use strict";i.d(r,{$K:()=>o,Hc:()=>h,KW:()=>p,Uz:()=>d,w2:()=>c}),i(96082);var s=i(63462),n=i(18211);function o(t,{isPrimitive:r,width:i,depth:n,height:o}){let a;let l=r?10:1;if(null==i&&null==o&&null==n)return[l*t[0],l*t[1],l*t[2]];let u=(0,s.f)(i,n,o);for(let r=0;r<3;r++){let i=u[r];if(null!=i){a=i/t[r];break}}for(let r=0;r<3;r++)null==u[r]&&(u[r]=t[r]*a);return u}let a=(0,n.al)(-.5,-.5,-.5,.5,.5,.5),l=(0,n.al)(-.5,-.5,0,.5,.5,1),u=(0,n.al)(-.5,-.5,0,.5,.5,.5);function d(t){switch(t){case"sphere":case"cube":case"diamond":return a;case"cylinder":case"cone":case"inverted-cone":return l;case"tetrahedron":return u;default:return}}let h=["butt","square","round"],p=[...h,"none"],c=["miter","bevel","round"]},44267:(t,r,i)=>{"use strict";i.d(r,{Ck:()=>u,JT:()=>o,Nj:()=>h,g6:()=>a,vC:()=>l,x0:()=>d});var s=i(5047),n=i(21314);let o=["none","underline","line-through"],a=["normal","italic","oblique"],l=["normal","lighter","bold","bolder"],u={type:Number,cast:t=>{let r=(0,n.q9)(t);return 0===r?1:(0,s.uZ)(r,.1,4)},nonNullable:!0},d={type:["left","right","center"],nonNullable:!0},h={type:["baseline","top","middle","bottom"],nonNullable:!0}},70774:(t,r,i)=>{"use strict";i.d(r,{Z7:()=>n,f9:()=>o});var s=i(5174);function n(t){return 1/(s.a[t]||1)}let o=function(){let t=Object.keys(s.a);return t.sort(),t}()},32616:(t,r,i)=>{"use strict";i.d(r,{Ds:()=>l,KA:()=>a});var s=i(82583),n=i(80038);function o(t,r){return!(null==r||"service"!==r.origin&&"portal-item"!==r.origin||"feature"!==r.layer?.type&&"stream"!==r.layer?.type)&&!(0,s.YP)(t)&&r?.layer?.parsedUrl?(0,s.v_)(r.layer.parsedUrl.path,"images",t):(0,n.f)(t,r)}let a={json:{read:{source:["imageData","url"],reader:function(t,r,i){return r.imageData?(0,s._l)({mediaType:r.contentType||"image/png",isBase64:!0,data:r.imageData}):o(r.url,i)}},write:{writer(t,r,i,o){!function(t,r,i,o){if((0,s.HK)(t)){let a=(0,s.sJ)(t);a&&(r.contentType=a.mediaType,r.imageData=a.data,i&&i.imageData===r.imageData&&i.url&&(0,n.w)(i.url,r,"url",o))}else(0,n.w)(t,r,"url",o)}(t,r,this.source,o)}}}},l={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,r,i){let s={};return r.imageData&&(s.imageData=r.imageData),r.contentType&&(s.contentType=r.contentType),r.url&&(s.url=o(r.url,i)),s}}}}},75138:(t,r,i)=>{"use strict";i.d(r,{BR:()=>S,YW:()=>f,_h:()=>m,e3:()=>C,nf:()=>y,tb:()=>_,wJ:()=>x});var s=i(55410),n=i(98402),o=i(95894),a=i(96082),l=i(82639),u=i(63462),d=i(62913),h=(i(13364),i(31394));let p=/\/resource\/(.*?)\.svg$/,c=new s.Z("white");function f(t){if((0,l.Wi)(t)||!("symbolLayers"in t)||(0,l.Wi)(t.symbolLayers))return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(t=>"object"===t.type);case"line-3d":return t.symbolLayers.some(t=>"path"===t.type);case"polygon-3d":return t.symbolLayers.some(t=>"object"===t.type||"extrude"===t.type);default:return!1}}function y(t,r){let i=(0,l.s3)(r.resource).href;return!(0,a.Z)("esri-canvas-svg-support")&&t.styleOrigin&&p.test(i)?i.replace(p,"/resource/png/$1.png"):i}function m(t,r){if(!t)return null;let i=null;return(0,n.dU)(t)?i=function(t){let r=t.symbolLayers;if(!r)return null;let i=null;return r.forEach(t=>{"object"===t.type&&null!=t.resource?.href||(i="water"===t.type?(0,l.Wg)(t.color):(0,l.pC)(t.material)?(0,l.Wg)(t.material.color):null)}),i?new s.Z(i):null}(t):(0,n.cT)(t)&&(i=t.color?new s.Z(t.color):null),i?g(i,r):null}function g(t,r){if(null==r||null==t)return t;let i=t.toRgba();return i[3]=i[3]*r,new s.Z(i)}function _(t,r,i){var o;t&&(r||null!=i)&&(r&&(r=new s.Z(r)),(0,n.dU)(t)?function(t,r,i){let s=t.symbolLayers;if(!s)return;let n=t=>{let s=(0,l.pC)(t)?t:null;return g(r=r??s??(null!=i?c:null),i)};s.forEach(t=>{if("object"!==t.type||null==t.resource?.href||r){if("water"===t.type)t.color=n(t.color);else{let r=n((0,l.pC)(t.material)?t.material.color:null);(0,l.Wi)(t.material)?t.material=new h.b({color:r}):t.material.color=r,null!=i&&"outline"in t&&(0,l.pC)(t.outline)&&(0,l.pC)(t.outline.color)&&(t.outline.color=g(t.outline.color,i))}}})}(t,r,i):(0,n.cT)(t)&&((o=(o=r)??t.color)&&(t.color=g(o,i)),null!=i&&"outline"in t&&t.outline&&t.outline.color&&(t.outline.color=g(t.outline.color,i))))}function b(t){for(let r of t)if("number"==typeof r)return r;return null}function v(t,r,i){for(let s=0;s<3;s++){let n=t[s];switch(n){case"symbol-value":{let t=i[s];return null!=t?t/r[s]:1}case"proportional":break;default:if(n&&r[s])return n/r[s]}}return 1}function w(t,r,i,s){switch(t){case"proportional":return i*s;case"symbol-value":return null!=r?r:i;default:return t}}async function C(t,r){if(t&&r)return(0,n.dU)(t)?async function(t,r){let s=t.symbolLayers;s&&await (0,o.Ed)(s,async t=>(async function(t,r){switch(t.type){case"extrude":t.size="number"==typeof r[2]?r[2]:0;break;case"icon":case"line":case"text":!function(t,r){let i=b(r);(0,l.pC)(i)&&(t.size=i)}(t,r);break;case"path":!function(t,r){let i=v(r,u.O,[t.width,void 0,t.height]);t.width=w(r[0],t.width,1,i),t.height=w(r[2],t.height,1,i)}(t,r);break;case"object":await async function(t,r){let{resourceSize:s,symbolSize:n}=await async function(t){let r=await i.e(240).then(i.bind(i,60240)),s=await r.computeObjectLayerResourceSize(t,10),{width:n,height:o,depth:a}=t,l=[n,a,o],u=1;for(let t=0;t<3;t++){let r=l[t];if(null!=r){u=r/s[t];break}}for(let t=0;t<3;t++)null==l[t]&&(l[t]=s[t]*u);return{resourceSize:s,symbolSize:l}}(t),o=v(r,s,n);t.width=w(r[0],n[0],s[0],o),t.depth=w(r[1],n[1],s[1],o),t.height=w(r[2],n[2],s[2],o)}(t,r)}})(t,r))}(t,r):void((0,n.cT)(t)&&function(t,r){let i=b(r);if(!(0,l.Wi)(i))switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{let r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}(t,r))}function S(t,r,i){if(t&&null!=r){if((0,n.dU)(t)){let s=t.symbolLayers;s&&s.forEach(t=>{if(t&&"object"===t.type)switch(i){case"tilt":t.tilt=r;break;case"roll":t.roll=r;break;default:t.heading=r}})}else(0,n.cT)(t)&&("simple-marker"!==t.type&&"picture-marker"!==t.type&&"text"!==t.type||(t.angle=r))}}function x(t){if(!t)return null;let r=t.effects.filter(t=>"bloom"!==t.type).map(t=>t.toJSON());return(0,d.rM)(r)}},22232:(t,r,i)=>{"use strict";i.d(r,{n:()=>u});var s=i(14963),n=i(18721),o=i(8865),a=i(60831),l=i(19702);class u{constructor(t,r){this.key=new l.Z(0,0,0,0),this.bounds=(0,o.Ue)(),this.objectIds=new Set,this.key.set(r);let i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level}get id(){return this.key.id}get extent(){return n.Z.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){let t=this.key.getChildKeys(),r=s.Z.acquire();for(let i=0;i<t.length;i++)r[i]=new u(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return a.Z.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}},44535:(t,r,i)=>{"use strict";i.d(r,{Z:()=>c});var s=i(88832),n=i(96082),o=i(74529),a=i(22232),l=i(86348),u=i(19702);let d={added:[],removed:[]},h=new Set,p=new u.Z(0,0,0,0);class c extends s.Z{constructor(t){super(),this._tiles=new Map,this._index=(0,o.r)(9,(0,n.Z)("esri-csp-restrictions")?t=>({minX:t.bounds[0],minY:t.bounds[1],maxX:t.bounds[2],maxY:t.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){let r={added:[],removed:[]};for(let i of t.added)if(!this.has(i)){let t=new a.n(this.tileScheme,i);this._tiles.set(i,t),this._index.insert(t),r.added.push(t)}for(let i of t.removed)if(this.has(i)){let t=this.get(i);this._tiles.delete(i),this._index.remove(t),r.removed.push(t)}this.tiles.length=0,this._tiles.forEach(t=>this.tiles.push(t)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){let r=this.tileScheme.getTileCoverage(t,0);if(!r)return;let{spans:i,lodInfo:s}=r,{level:n}=s;if(i.length>0)for(let{row:t,colFrom:r,colTo:o}of i)for(let i=r;i<=o;i++){let r=p.set(n,t,s.normalizeCol(i),s.getWorldForColumn(i)).id;if(h.add(r),!this.has(r)){let t=new a.n(this.tileScheme,r);this._tiles.set(r,t),this._index.insert(t),this.tiles.push(t),d.added.push(t)}}for(let t=this.tiles.length-1;t>=0;t--){let r=this.tiles[t];h.has(r.id)||(this._tiles.delete(r.id),this.tiles.splice(t,1),this._index.remove(r),d.removed.push(r))}(d.added.length||d.removed.length)&&this.emit("update",d),l.Z.pool.release(r),h.clear(),d.added.length=0,d.removed.length=0}}},87702:(t,r,i)=>{"use strict";i.d(r,{aV:()=>T,S1:()=>x,os:()=>M,st:()=>I,yR:()=>P});var s,n=i(12790),o=i(96082),a=i(66150),l=i(82639),u=i(33283),d=i(73151),h=i(10977),p=i(17225),c=i(10821),f=i(84061),y=i(24765),m=i(59118),g=i(53919),_=(i(21314),i(30407)),b=i(62300),v=i(31818);let w=s=class extends c.Z{writeLevels(t,r,i){for(let i in t){let t=this.levels[i];return void(r.stops=t)}}clone(){return new s({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,v.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,v.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:(0,m.d9)(this.levels)})}};(0,y._)([(0,g.Cb)()],w.prototype,"levels",void 0),(0,y._)([(0,b.c)("levels")],w.prototype,"writeLevels",null),w=s=(0,y._)([(0,_.j)("esri.views.2d.engine.LevelDependentSizeVariable")],w);let C=a.Z.getLogger("esri.views.2d.layers.support.clusterUtils");o.Z.add("esri-cluster-arcade-enabled",!0);let S=(0,o.Z)("esri-cluster-arcade-enabled"),x=(t,r,i,s,n)=>{let o=r.clone();if(!P(o))return o;if(o.authoringInfo||(o.authoringInfo=new p.Z),o.authoringInfo.isAutoGenerated=!0,"visualVariables"in o){let r=(o.visualVariables||[]).filter(t=>"$view.scale"!==t.valueExpression),a=M(r);r.forEach(r=>{"rotation"===r.type?r.field?r.field=k(t,r.field,"avg_angle","number"):r.valueExpression&&(r.field=A(t,r.valueExpression,"avg_angle","number"),r.valueExpression=null):r.normalizationField?(r.field=k(t,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=k(t,r.field,"avg","number"):r.valueExpression&&(r.field=A(t,r.valueExpression,"avg","number"),r.valueExpression=null)}),(0,l.Wi)(a)&&!E(r)&&n&&(r.push(T(i,s)),o.dynamicClusterSize=!0),o.visualVariables=r}switch(o.type){case"simple":break;case"pie-chart":for(let r of o.attributes)r.field?r.field=k(t,r.field,"sum","number"):r.valueExpression&&(r.field=A(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":o.field?o.field=k(t,o.field,"mode","string"):o.valueExpression&&(o.field=A(t,o.valueExpression,"mode","string"),o.valueExpression=null);break;case"class-breaks":o.normalizationField?(o.field=k(t,o.field,"avg_norm","number",o.normalizationField),o.normalizationField=null):o.field?o.field=k(t,o.field,"avg","number"):o.valueExpression&&(o.field=A(t,o.valueExpression,"avg","number"),o.valueExpression=null)}return o},M=t=>{for(let r of t)if("size"===r.type)return r;return null};function I(t,r,i){let s=t.clone(),n=!1;if("visualVariables"in s){let t=M((s.visualVariables||[]).filter(t=>"$view.scale"!==t.valueExpression));(0,l.Wi)(t)&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.push(T(r,i)),s.dynamicClusterSize=!0,n=!0)}return{renderer:s,didInject:n}}let E=t=>{for(let r of t)if("cluster_count"===r.field)return!0;return!1},T=(t,r)=>{let i=[new f.Z({value:0,size:0}),new f.Z({value:1})];if((0,l.Wi)(r))return new c.Z({field:"cluster_count",stops:[...i,new f.Z({value:2,size:0})]});let s=Object.keys(r).reduce((s,n)=>({...s,[n]:[...i,new f.Z({value:Math.max(2,r[n].minValue),size:t.clusterMinSize}),new f.Z({value:Math.max(3,r[n].maxValue),size:t.clusterMaxSize})]}),{});return new w({field:"cluster_count",levels:s})},P=t=>{let r=r=>C.error(new n.Z("Unsupported-renderer",r,{renderer:t}));switch(t.type){case"unique-value":if(t.field2||t.field3)return r("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){let i=t.normalizationType;if("field"!==i)return r(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1;break}case"simple":case"pie-chart":break;default:return r(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!S){if("valueExpression"in t&&t.valueExpression)return r("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(t=>!(!("valueExpression"in t)||!t.valueExpression)))return r("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function A(t,r,i,s){let n=(0,u.F)(r),o="mode"===i?`cluster_type_${n}`:"sum"===i?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(t=>t.name===o)||t.push(new d.Z({name:o,isAutoGenerated:!0,onStatisticExpression:new h.Z({expression:r,returnType:s}),statisticType:i})),o}function k(t,r,i,s,n){if("cluster_count"===r||t.some(t=>t.name===r))return r;let o=function(t,r,i){switch(t){case"sum":return`cluster_sum_${r}`;case"avg":case"avg_angle":return`cluster_avg_${r}`;case"mode":return`cluster_type_${r}`;case"avg_norm":{let t=r.toLowerCase()+",norm:field,"+i.toLowerCase();return"cluster_avg_"+(0,u.F)(t)}}}(i,r,n);return t.some(t=>t.name===o)||("avg_norm"===i?t.push(new d.Z({name:o,isAutoGenerated:!0,onStatisticExpression:new h.Z({expression:`$feature.${r} / $feature.${n}`,returnType:s}),statisticType:"avg"})):t.push(new d.Z({name:o,isAutoGenerated:!0,onStatisticField:r,statisticType:i}))),o}},9710:(t,r,i)=>{"use strict";i.d(r,{T:()=>s});class s{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),t.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}},86046:(t,r,i)=>{"use strict";var s=i(24765),n=i(53306),o=i(82639),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(44514),d=i(54685);let h=new Set,p=[],c=new Map,f=[0,0],y=class extends n.Z{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){let{concurrency:t,process:r}=this;this._queue=new d.e({concurrency:t,process:(t,i)=>r(this._keyToItem.get(t),{signal:i}),peeker:t=>t.values().next().value})}destroy(){this.clear(),this._queue=(0,o.SC)(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){let r="string"==typeof t?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return"string"==typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){let r="string"==typeof t?t:t.id;return this.has(r)&&this._queue.isOngoing(r)}pause(){this._queue.pause()}push(t,r){let i=t.key.id+"-"+r;if(this.has(i))return this.get(i);let s=this._queue.push(i),n=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,t),s.then(n,n),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;let r=this.tileInfoView,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;t.forEach(t=>{let r=this._keyToItem.get(t),n=this.tileInfoView.getTileScale(r.key);c.has(n)||(c.set(n,[]),i=Math.max(n,i),s=Math.min(n,s)),c.get(n).push(r.key),h.add(n)});let n=this.state.scale;c.has(n)||(p.length=0,h.forEach(t=>p.push(t)),p.sort((t,r)=>t-r),n=p.reduce((t,r)=>Math.abs(r-n)<Math.abs(t-n)?r:t,p[0])),n=Math.max(n=Math.min(n,i),s);let o=c.get(n),a=r.getClosestInfoForScale(n),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((t,r)=>{let i=a.denormalizeCol(t.col,t.world),s=a.denormalizeCol(r.col,r.world);return Math.sqrt((l-i)*(l-i)+(u-t.row)*(u-t.row))-Math.sqrt((l-s)*(l-s)+(u-r.row)*(u-r.row))}),h.clear(),c.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;let r=this.tileInfoView,i=this.state.center,s,n=Number.POSITIVE_INFINITY;return t.forEach(t=>{let o=this._keyToItem.get(t);r.getTileCoords(f,o.key);let a=(0,u.d)(f,i);a<n&&(n=a,s=o.key)}),s.id}};(0,s._)([(0,a.Cb)({constructOnly:!0})],y.prototype,"concurrency",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],y.prototype,"process",void 0),(0,s._)([(0,a.Cb)()],y.prototype,"state",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],y.prototype,"strategy",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],y.prototype,"tileInfoView",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],y.prototype,"updating",null),y=(0,s._)([(0,l.j)("esri.views.2d.tiling.PagedTileQueue")],y)},86348:(t,r,i)=>{"use strict";i.d(r,{Z:()=>n});var s=i(35461);class n{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,r){let{spans:i,lodInfo:s}=this,{level:n}=s;if(0!==i.length)for(let{row:o,colFrom:a,colTo:l}of i)for(let i=a;i<=l;i++)t.call(r,n,o,s.normalizeCol(i),s.getWorldForColumn(i))}}n.pool=new s.Z(n)},34322:(t,r,i)=>{"use strict";i.d(r,{Z:()=>y});var s=i(32488),n=i(82639),o=i(19702);function a(t,r,i){return t[0]=r,t[1]=i,t}let l=new o.Z("0/0/0/0");class u{constructor(t,r,i,s,n,o,a,l,u,d,h,p){this.level=t,this.resolution=r,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=d,this.worldSize=h,this.wrap=p}static create(t,r,i=null){let o,l,d,h;let p=(0,s.C5)(t.spatialReference),c=r.origin||[t.origin.x,t.origin.y],f=[t.size[0]*r.resolution,t.size[1]*r.resolution],y=[-1/0,-1/0],m=[1/0,1/0],g=[1/0,1/0];(0,n.pC)(i)&&(a(y,Math.max(0,Math.floor((i.xmin-c[0])/f[0])),Math.max(0,Math.floor((c[1]-i.ymax)/f[1]))),a(m,Math.max(0,Math.floor((i.xmax-c[0])/f[0])),Math.max(0,Math.floor((c[1]-i.ymin)/f[1]))),a(g,m[0]-y[0]+1,m[1]-y[1]+1));let{cols:_,rows:b}=r;return!i&&_&&b&&(a(y,_[0],b[0]),a(m,_[1],b[1]),a(g,_[1]-_[0]+1,b[1]-b[0]+1)),t.isWrappable?(o=[Math.ceil(Math.round((p.valid[1]-p.valid[0])/r.resolution)/t.size[0]),g[1]],l=[Math.floor((p.origin[0]-c[0])/f[0]),y[1]],d=[o[0]+l[0]-1,m[1]],h=!0):(l=y,d=m,o=g,h=!1),new u(r.level,r.resolution,r.scale,c,y,m,g,f,l,d,o,h)}normalizeCol(t){if(!this.wrap)return t;let r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){var s,n,o,a;l.set(r);let u=i?l.col:this.denormalizeCol(l.col,l.world),d=l.row;return s=this.getXForColumn(u),n=this.getYForRow(d+1),o=this.getXForColumn(u+1),a=this.getYForRow(d),t[0]=s,t[1]=n,t[2]=o,t[3]=a,t}getTileCoords(t,r,i=!1){l.set(r);let s=i?l.col:this.denormalizeCol(l.col,l.world);return Array.isArray(t)?a(t,this.getXForColumn(s),this.getYForRow(l.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(l.row)),t}}var d=i(86348);class h{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}}let p=new o.Z("0/0/0/0");class c{constructor(t,r,i,s,n,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);let[i,s]=t,[n,o]=r,a=n-i,l=o-s,u=0!==l?a/l:0,d=(Math.ceil(s)-s)*u,h=(Math.floor(s)-s)*u;return new c(i,Math.floor(s),Math.ceil(o),u,a<0?d:h,a<0?h:d,a<0?n:i,a<0?i:n)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}let f=[[0,0],[0,0],[0,0],[0,0]];class y{constructor(t,r=null){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};let i=t.lods.slice();i.sort((t,r)=>r.scale-t.scale);let s=this._lodInfos=i.map(i=>u.create(t,i,r));i.forEach((t,r)=>{this._infoByLevel[t.level]=s[r],this._infoByScale[t.scale]=s[r],this.scales[r]=t.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel["number"==typeof t?t:t.level]}getTileBounds(t,r,i=!1){p.set(r);let s=this._infoByLevel[p.level];return s?s.getTileBounds(t,p,i):t}getTileCoords(t,r,i=!1){p.set(r);let s=this._infoByLevel[p.level];return s?s.getTileCoords(t,p,i):t}getTileCoverage(t,r=192,i="closest"){let s="closest"===i?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),n=d.Z.pool.acquire(s),o=this._wrap,a,l,u,p=1/0,y=-1/0,m=n.spans;for(let i of(f[0][0]=f[0][1]=f[1][1]=f[3][0]=-r,f[1][0]=f[2][0]=t.size[0]+r,f[2][1]=f[3][1]=t.size[1]+r,f))t.toMap(i,i),i[0]=s.getColumnForX(i[0]),i[1]=s.getRowForY(i[1]);let g=[],_=3;for(let t=0;t<4;t++){if(f[t][1]===f[_][1]){_=t;continue}let r=c.create(f[t],f[_]);p=Math.min(r.ymin,p),y=Math.max(r.ymax,y),void 0===g[r.ymin]&&(g[r.ymin]=[]),g[r.ymin].push(r),_=t}if(null==p||null==y||y-p>100)return null;let b=[];for(a=p;a<y;){null!=g[a]&&(b=b.concat(g[a])),l=1/0,u=-1/0;for(let t=b.length-1;t>=0;t--){let r=b[t];l=Math.min(l,r.getLeftCol()),u=Math.max(u,r.getRightCol())}if(l=Math.floor(l),u=Math.floor(u),a>=s.first[1]&&a<=s.last[1]){if(o){if(s.size[0]<s.worldSize[0]){let t=Math.floor(u/s.worldSize[0]);for(let r=Math.floor(l/s.worldSize[0]);r<=t;r++)m.push(new h(a,Math.max(s.getFirstColumnForWorld(r),l),Math.min(s.getLastColumnForWorld(r),u)))}else m.push(new h(a,l,u))}else l>s.last[0]||u<s.first[0]||(l=Math.max(l,s.first[0]),u=Math.min(u,s.last[0]),m.push(new h(a,l,u)))}a+=1;for(let t=b.length-1;t>=0;t--){let r=b[t];r.ymax>=a?r.incrRow():b.splice(t,1)}}return n}getTileParentId(t){p.set(t);let r=this._infoByLevel[p.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(p,this._lodInfos[i],p),p.id)}getTileResolution(t){let r=this._infoByLevel["object"==typeof t?t.level:t];return r?r.resolution:-1}getTileScale(t){let r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){p.set(r);let i=this._infoByLevel[p.level],s=t.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(p,s,p);let r=s.denormalizeCol(p.col,p.world);for(let i of t.spans)if(i.row===p.row&&i.colFrom<=r&&i.colTo>=r)return!0}if(s.resolution<i.resolution){let[r,n,o,a]=t.spans.reduce((t,r)=>(t[0]=Math.min(t[0],r.row),t[1]=Math.max(t[1],r.row),t[2]=Math.min(t[2],r.colFrom),t[3]=Math.max(t[3],r.colTo),t),[1/0,-1/0,1/0,-1/0]),l=i.denormalizeCol(p.col,p.world),u=s.getColumnForX(i.getXForColumn(l)),d=s.getRowForY(i.getYForRow(p.row)),h=s.getColumnForX(i.getXForColumn(l+1))-1,c=s.getRowForY(i.getYForRow(p.row+1))-1;return!(u>a||h<o||d>n||c<r)}let n=s.denormalizeCol(p.col,p.world);return t.spans.some(t=>t.row===p.row&&t.colFrom<=n&&t.colTo>=n)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){let r=(0,s.C5)(this.tileInfo.spatialReference),n=-i*(r.valid[1]-r.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){let r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+1e-6)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){let r=this.scales;return this._infoByScale[t]||(t=r.reduce((r,i)=>Math.abs(i-t)<Math.abs(r-t)?i:r,r[0])),this._infoByScale[t]}scaleToLevel(t){let r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,r,i){let s=this._infoByLevel[i.level];return t.set(i),r.resolution<s.resolution?null:(r.resolution===s.resolution||(t.level=r.level,t.col=Math.floor(i.col*s.resolution/r.resolution+.01),t.row=Math.floor(i.row*s.resolution/r.resolution+.01)),t)}}},19702:(t,r,i)=>{"use strict";i.d(r,{Z:()=>n});var s=i(35461);class n{constructor(t,r,i,s){this.set(t,r,i,s)}static getId(t,r,i,s){return"object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){let t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,s){this.set(t,r,i,s)}contains(t){let r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new n(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,s){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){let[r,i,s,n]=t.split("/");this.level=parseFloat(r),this.row=parseFloat(i),this.col=parseFloat(s),this.world=parseFloat(n)}else this.level=+t,this.row=+r,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new n(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){let t=this.level+1,r=this.row<<1,i=this.col<<1,s=this.world;return[new n(t,r,i,s),new n(t,r,i+1,s),new n(t,r+1,i,s),new n(t,r+1,i+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}n.pool=new s.Z(n,null,null,25,50)},66415:(t,r,i)=>{"use strict";i.d(r,{Z:()=>m});var s=i(24765),n=i(53306),o=i(82639),a=i(53919),l=(i(99950),i(21314),i(30407)),u=i(44514),d=i(54685);let h=new Set,p=[],c=new Map,f=[0,0],y=class extends n.Z{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){let{concurrency:t,process:r,strategy:i}=this;this._queue=new d.e({concurrency:t,process:(t,i)=>r(this._keyToItem.get(t),{signal:i}),peeker:"scale-first"===i?t=>this._peekByScaleFirst(t):t=>this._peekByCenterFirst(t)})}destroy(){this.clear(),this._queue=(0,o.SC)(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){let r="string"==typeof t?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return"string"==typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){let r="string"==typeof t?t:t.id;return this.has(r)&&this._queue.isOngoing(r)}pause(){this._queue.pause()}push(t){let r=t.key.id;if(this._queue.has(r))return this._queue.get(r);let i=this._queue.push(r),s=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,t),i.then(s,s),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;let r=this.tileInfoView,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;t.forEach(t=>{let r=this._keyToItem.get(t),n=this.tileInfoView.getTileScale(r.key);c.has(n)||(c.set(n,[]),i=Math.max(n,i),s=Math.min(n,s)),c.get(n).push(r.key),h.add(n)});let n=this.state.scale;c.has(n)||(p.length=0,h.forEach(t=>p.push(t)),p.sort((t,r)=>t-r),n=p.reduce((t,r)=>Math.abs(r-n)<Math.abs(t-n)?r:t,p[0])),n=Math.max(n=Math.min(n,i),s);let o=c.get(n),a=r.getClosestInfoForScale(n),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((t,r)=>{let i=a.denormalizeCol(t.col,t.world),s=a.denormalizeCol(r.col,r.world);return Math.sqrt((l-i)*(l-i)+(u-t.row)*(u-t.row))-Math.sqrt((l-s)*(l-s)+(u-r.row)*(u-r.row))}),h.clear(),c.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;let r=this.tileInfoView,i=this.state.center,s,n=Number.POSITIVE_INFINITY;return t.forEach(t=>{let o=this._keyToItem.get(t);r.getTileCoords(f,o.key);let a=(0,u.d)(f,i);a<n&&(n=a,s=o.key)}),s.id}};(0,s._)([(0,a.Cb)({constructOnly:!0})],y.prototype,"concurrency",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],y.prototype,"process",void 0),(0,s._)([(0,a.Cb)()],y.prototype,"state",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],y.prototype,"strategy",void 0),(0,s._)([(0,a.Cb)({constructOnly:!0})],y.prototype,"tileInfoView",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],y.prototype,"updating",null);let m=y=(0,s._)([(0,l.j)("esri.views.2d.tiling.TileQueue")],y)},9925:(t,r,i)=>{"use strict";i.d(r,{Z:()=>p});var s=i(8865),n=i(44514);class o{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){let r=this._tilePerId.get(t);if(!r)return;let i=r.key.level,s=this._tileKeysPerLevel[i];(function(t,r){t.delete(r)})(this._tilePerId,t);for(let r=0;r<s.length;r++)if(s[r].id===t){s.splice(r,1);break}return r.visible=!0,r}add(t){t.visible=!1;let r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);let s=r.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(r)}prune(t,r,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,r,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,r,i,t))}_pruneAroundCenterTile(t,r,i,s){let o=this._tileKeysPerLevel[s];if(!o||0===o.length)return t;let{size:a,origin:l}=this._tileInfoView.tileInfo,u=i*a[0],d=i*a[1],h=[0,0],p=[0,0];for(o.sort((t,i)=>(h[0]=l.x+u*(t.col+.5),h[1]=l.y-d*(t.row+.5),p[0]=l.x+u*(i.col+.5),p[1]=l.y-d*(i.row+.5),(0,n.k)(h,r)-(0,n.k)(p,r)));o.length>0;){let r=o.pop();if(this._removeTile(r.id),--t===this.maxSize)break}return t}_removeTile(t){let r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),function(t,r){t.delete(r)}(this._tilePerId,t)}}var a=i(86348);let l=new(i(19702)).Z(0,0,0,0),u=new Map,d=[],h=[];class p{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=null==t.resampling||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),null!=t.buffer&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new o(t.cacheSize,this.tileInfoView,t=>{this.releaseTile(t)}))}destroy(){this.tileIndex.clear()}update(t){let{resampling:r,tileIndex:i}=this,s=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(h.length=0,d.length=0,u.clear(),!s)return;let{minScale:n,maxScale:o}=this.tileInfoView.tileInfo,{spans:p,lodInfo:c}=s,{level:f}=c,{scale:y,center:m,resolution:g}=t.state,_=!t.stationary&&y>this._previousScale;if(this._previousScale=y,this.tiles.length=0,!r&&(y>n||y<o))return this.tiles.length=0,u.clear(),i.forEach(t=>{this.releaseTile(t)}),i.clear(),h.length=0,d.length=0,u.clear(),a.Z.pool.release(s),!0;i.forEach(t=>t.visible=!0);let b=0,v=0;if(p.length>0)for(let{row:t,colFrom:r,colTo:s}of p)for(let n=r;n<=s;n++){b++;let r=l.set(f,t,c.normalizeCol(n),c.getWorldForColumn(n)).id;if(i.has(r)){let t=i.get(r);t.isReady?(u.set(r,t),v++):_||this._addParentTile(r,u)}else{let t;if(this._tileCache&&this._tileCache.has(r)){if(t=this._tileCache.pop(r),this.tileIndex.set(r,t),t.isReady){u.set(r,t),v++;continue}}else t=this.acquireTile(l),this.tileIndex.set(r,t);_||this._addParentTile(r,u)}}let w=v===b;for(let t of(i.forEach((t,r)=>{if(l.set(r),u.has(r))return;let i=this.tileInfoView.intersects(s,l),n="purge"===this.cachePolicy?l.level!==f:l.level>f;i&&(_||!w)?t.isReady?n&&"purge"===this.cachePolicy&&this._hasReadyAncestor(l,f)?d.push(r):h.push(r):n&&d.push(r):!n&&i||d.push(r)}),h)){let r=i.get(t);r&&r.isReady&&u.set(t,r)}for(let t of d){let r=i.get(t);this._tileCache?this._tileCache.add(r):this.releaseTile(r),i.delete(t)}return u.forEach(t=>this.tiles.push(t)),i.forEach(t=>{u.has(t.key.id)||(t.visible=!1)}),this._tileCache&&this._tileCache.prune(f,m,g),a.Z.pool.release(s),u.clear(),w}clear(t=!0){let{tileIndex:r}=this;t&&r.forEach(t=>{this.releaseTile(t)}),r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){let i=t,s=null;for(;i=this.tileInfoView.getTileParentId(i);)if(this.tileIndex.has(i)){if((s=this.tileIndex.get(i))&&s.isReady){r.has(s.key.id)||r.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s&&s.isReady)){r.has(s.key.id)||r.set(s.key.id,s);break}}_hasReadyAncestor(t,r){let i=(0,s.Ue)();for(let n of(this.tileInfoView.getTileBounds(i,t,!0),this.tileIndex.values()))if(n.isReady&&n.key.level>=r&&n.key.level<t.level){let t=(0,s.Ue)();if(this.tileInfoView.getTileBounds(t,n.key,!0),(0,s.r3)(t,i))return!0}return!1}}},70262:(t,r,i)=>{"use strict";function s(t,r,i,s){let n=3*t,o=3*(i-t)-n,a=1-n-o,l=3*r,u=3*(s-r)-l,d=1-l-u;return function(t,r=1e-6){var i;return((d*(i=function(t,r){var i,s,l;let u,d,h,p,c,f;for(h=t,f=0;f<8;f++){if(Math.abs(p=((a*(i=h)+o)*i+n)*i-t)<r)return h;if(1e-6>Math.abs(c=(3*a*(s=h)+2*o)*s+n))break;h-=p/c}if(u=0,d=1,(h=t)<u)return u;if(h>d)return d;for(;u<d&&!(Math.abs((p=((a*(l=h)+o)*l+n)*l)-t)<r);)t>p?u=h:d=h,h=.5*(d-u)+u;return h}(t,r))+u)*i+l)*i}}i.d(r,{LI:()=>o,Qc:()=>a,n_:()=>s});let n=/^cubic-bezier\((.*)\)/,o={};function a(t){let r=o[t]||null;if(!r){let i=n.exec(t);if(i){let t=i[1].split(",").map(t=>parseFloat(t.trim()));4!==t.length||t.some(t=>isNaN(t))||(r=s.apply(s,t))}}return r}o.ease=s(.25,.1,.25,1),o.linear=s(0,0,1,1),o.easeIn=o["ease-in"]=s(.42,0,1,1),o.easeOut=o["ease-out"]=s(0,0,.58,1),o.easeInOut=o["ease-in-out"]=s(.42,0,.58,1)},32049:(t,r,i)=>{"use strict";i.d(r,{$H:()=>G,Ck:()=>F,Dq:()=>A,EK:()=>C,H4:()=>V,Hy:()=>B,JG:()=>I,Jp:()=>N,L2:()=>D,Rb:()=>L,Rx:()=>K,SI:()=>U,UZ:()=>W,Ue:()=>M,YQ:()=>q,bk:()=>T,dI:()=>Z,gG:()=>H,ni:()=>E,o2:()=>z,qf:()=>P,uG:()=>O,ut:()=>j});var s=i(99836),n=i(51084),o=i(82639),a=i(35562),l=i(20917),u=i(50088),d=i(48458),h=i(44514),p=i(5793),c=i(18721),f=i(29098),y=i(46472),m=i(972),g=i(371),_=i(32488);let b=180/Math.PI;function v(t){return t.wkid?t:t.spatialReference||g.Z.WGS84}function w(t,r){return r.type?(0,h.s)(t,r.x,r.y):(0,h.c)(t,r)}function C(t,r){var i;let s=Math.max(1,r[0]),n=Math.max(1,r[1]);return Math.max(t.width/s,t.height/n)*(i=t.spatialReference,(0,_.JY)(i)?39.37*(0,a.c9)(i)*96:1)}async function S(t,r,i,s){let a,l;if(!t||Array.isArray(t)&&!t.length)return null;if(n.Z.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&"object"==typeof t[0]){let n=t.every(t=>"attributes"in t),a=t.some(t=>!t.geometry),l=t;if(n&&a&&r&&r.allLayerViews){let i=new Map;for(let r of t){let t=r.layer,s=i.get(t)||[],n=r.attributes[t.objectIdField];null!=n&&s.push(n),i.set(t,s)}let s=[];i.forEach((t,i)=>{let n=r.allLayerViews.find(t=>t.layer.id===i.id);if("queryFeatures"in n){let r=i.createQuery();r.objectIds=t,r.returnGeometry=!0,s.push(n.queryFeatures(r))}});let n=await Promise.all(s),a=[];for(let t of n)if(t&&t.features&&t.features.length)for(let r of t.features)(0,o.pC)(r.geometry)&&a.push(r.geometry);l=a}for(let t of l)s=await S(t,r,i,s);return s}if(Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1])a=new y.Z(t);else if(t instanceof f.Z)a=t;else if("geometry"in t){if(t.geometry)a=t.geometry;else if(t.layer){let i=t.layer,s=r.allLayerViews.find(t=>t.layer.id===i.id);if("queryFeatures"in s){let r=i.createQuery();r.objectIds=[t.attributes[i.objectIdField]],r.returnGeometry=!0;let n=await s.queryFeatures(r);a=(0,o.U2)(n,"features",0,"geometry")}}}if((0,o.Wi)(a)||!(l="point"===a.type?new c.Z({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference}):a.extent))return null;(0,m.kR)()||(0,m.Up)(l.spatialReference,i)||await (0,m.zD)();let u=(0,m.iV)(l,i);return u?s=s?s.union(u):u:null}function x(t,r){return(0,_.fS)(v(t),r)?t:(0,m.iV)(t,r)}async function M(t,r){if(!t||!r)return new s.Z({targetGeometry:new y.Z,scale:0,rotation:0});let i=r.spatialReference,{constraints:n,padding:a,viewpoint:l,size:u}=r,d=[a?u[0]-a.left-a.right:u[0],a?u[1]-a.top-a.bottom:u[1]],h=null;t instanceof s.Z?h=t:t.viewpoint?h=t.viewpoint:t.target&&"esri.Viewpoint"===t.target.declaredClass&&(h=t.target);let p=null;h&&h.targetGeometry?p=h.targetGeometry:t instanceof c.Z?p=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(p=await S(t.center,r,i)||await S(t.extent,r,i)||await S(t.target,r,i)||await S(t,r,i)),!p&&l&&l.targetGeometry?p=l.targetGeometry:!p&&r.extent&&(p=r.extent),i||(i=v(r.spatialReference||r.extent||p)),(0,m.kR)()||(0,_.fS)(p.spatialReference,i)||(0,m.Up)(p,i)||await (0,m.zD)();let f=x(p.center?p.center:p,i),g=null;if(h&&(0,o.pC)(h.targetGeometry)&&"point"===h.targetGeometry.type)g=h.scale;else if("scale"in t&&t.scale)g=t.scale;else if("zoom"in t&&-1!==t.zoom&&n&&n.effectiveLODs)g=n.zoomToScale(t.zoom);else if(Array.isArray(p)||"point"===p.type||"extent"===p.type&&0===p.width&&0===p.height){let t=x(r.extent,i);g=(0,o.pC)(t)?C(t,d):r.extent?C(r.extent,d):l.scale}else g=C(x(p.extent,i),d);let b=function(t){if(t&&(!Array.isArray(t)||"number"!=typeof t[0])&&("object"==typeof t||Array.isArray(t)&&"object"==typeof t[0])){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){let r=t.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(t)&&t.length&&t.every(t=>"layer"in t)){let r=0,i=0;for(let s of t){let t=s.layer;t&&t.minScale&&t.maxScale&&(r=t.minScale<r?t.minScale:r,i=t.maxScale>i?t.maxScale:i)}return r&&i?{min:r,max:i}:null}}}(t);b&&(b.min&&b.min>g?g=b.min:b.max&&b.max<g&&(g=b.max));let w=0;h?w=h.rotation:t.hasOwnProperty("rotation")?w=t.rotation:l&&(w=l.rotation);let M=new s.Z({targetGeometry:f,scale:g,rotation:w});return n&&(M=n.fit(M),n.constrainByGeometry(M),n.rotationEnabled||(M.rotation=w)),M}function I(t,r){let i=t.targetGeometry,s=r.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,t.scale=r.scale,t.rotation=r.rotation,t}function E(t,r,i){return i?(0,h.s)(t,.5*(r[0]-i.right+i.left),.5*(r[1]-i.bottom+i.top)):(0,h.b)(t,r,.5)}let T=function(){let t=(0,p.a)();return function(r,i,s){let n=i.targetGeometry;w(t,n);let o=.5*O(i);return r.xmin=t[0]-o*s[0],r.ymin=t[1]-o*s[1],r.xmax=t[0]+o*s[0],r.ymax=t[1]+o*s[1],r.spatialReference=n.spatialReference,r}}();function P(t,r,i,s,n){return z(t,r,i.center),t.scale=C(i,s),n&&n.constraints&&n.constraints.constrain(t),t}let A=function(){let t=(0,p.a)();return function(r,i,s){return(0,h.e)(r,(0,h.b)(r,i,.5),E(t,i,s))}}(),k=function(){let t=(0,d.c)(),r=(0,p.a)();return function(i,s,n,o){let a=O(s),l=R(s);return(0,h.s)(r,a,a),(0,u.f)(t,r),(0,u.r)(t,t,l),(0,u.t)(t,t,A(r,n,o)),(0,u.t)(t,t,[0,o.top-o.bottom]),(0,h.s)(i,t[4],t[5])}}();function O(t){var r,i;return t.scale*(r=t.targetGeometry,(0,o.pC)(r)&&(0,_.JY)(r.spatialReference)?1/(39.37*(i=r.spatialReference,(0,a.c9)(i))*96):1)}function R(t){return(0,l.t)(t.rotation)||0}let L=function(){let t=(0,p.a)(),r=(0,p.a)(),i=(0,p.a)();return function(s,n,o,a,l,d){return(0,h.n)(t,n),(0,h.b)(r,o,.5*d),(0,h.s)(i,1/a*d,-1/a*d),(0,u.a)(s,r),l&&(0,u.r)(s,s,l),(0,u.s)(s,s,i),(0,u.t)(s,s,t),s}}(),F=function(){let t=(0,p.a)();return function(r,i,s,n){let o=O(i),a=R(i);return w(t,i.targetGeometry),L(r,t,s,o,a,n)}}(),N=function(){let t=(0,p.a)();return function(r,i,s,n){let o=O(i);return w(t,i.targetGeometry),L(r,t,s,o,0,n)}}();function j(t){let r=(0,_.C5)(t);return r?r.valid[1]-r.valid[0]:0}function D(t,r){return Math.round(j(t)/r)}let Z=function(){let t=(0,p.a)(),r=(0,p.a)(),i=[0,0,0];return function(s,n,o){(0,h.a)(t,s,n),(0,h.f)(t,t),(0,h.a)(r,s,o),(0,h.f)(r,r),(0,h.g)(i,t,r);let a=Math.acos((0,h.h)(t,r)/((0,h.i)(t)*(0,h.i)(r)))*b;return i[2]<0&&(a=-a),isNaN(a)&&(a=0),a}}(),V=function(){let t=(0,p.a)();return function(r,i,s,n){let o=r.targetGeometry;return I(r,i),k(t,i,s,n),o.x+=t[0],o.y+=t[1],r}}(),z=function(t,r,i){I(t,r);let s=t.targetGeometry;return s.x=i.x,s.y=i.y,s.spatialReference=i.spatialReference,t},U=function(){let t=(0,p.a)();return function(r,i,s,n,o){o||(o="center"),(0,h.e)(t,s,n),(0,h.b)(t,t,.5);let a=t[0],l=t[1];switch(o){case"center":(0,h.s)(t,0,0);break;case"left":(0,h.s)(t,-a,0);break;case"top":(0,h.s)(t,0,l);break;case"right":(0,h.s)(t,a,0);break;case"bottom":(0,h.s)(t,0,-l);break;case"top-left":(0,h.s)(t,-a,l);break;case"bottom-left":(0,h.s)(t,-a,-l);break;case"top-right":(0,h.s)(t,a,l);break;case"bottom-right":(0,h.s)(t,a,-l)}return K(r,i,t),r}}();function G(t,r,i){return I(t,r),t.rotation+=i,t}function q(t,r,i){return I(t,r),t.rotation=i,t}let $=function(){let t=(0,p.a)();return function(r,i,s,n,o){return I(r,i),isNaN(s)||0===s||(J(t,n,i,o),r.scale=i.scale*s,Y(t,t,r,o),K(r,r,(0,h.s)(t,t[0]-n[0],n[1]-t[1]))),r}}();function B(t,r,i){return I(t,r),t.scale=i,t}let W=function(){let t=(0,p.a)();return function(r,i,s,n,o,a){return I(r,i),isNaN(s)||0===s||(J(t,o,i,a),r.scale=i.scale*s,r.rotation+=n,Y(t,t,r,a),K(r,r,(0,h.s)(t,t[0]-o[0],o[1]-t[1]))),r}}(),H=function(){let t=(0,p.a)(),r=(0,p.a)();return function(i,s,n,o,a,l,u){return A(r,l,u),(0,h.j)(t,a,r),o?W(i,s,n,o,t,l):$(i,s,n,t,l)}}(),J=function(){let t=(0,d.c)();return function(r,i,s,n){return(0,h.t)(r,i,(F(t,s,n,1),(0,u.c)(t,t)))}}(),Y=function(){let t=(0,d.c)();return function(r,i,s,n){return(0,h.t)(r,i,F(t,s,n,1))}}(),K=function(){let t=(0,p.a)(),r=(0,d.c)();return function(i,s,n){I(i,s);let o=O(s),a=i.targetGeometry;return(0,u.b)(r,R(s)),(0,u.s)(r,r,(0,p.f)(o,o)),(0,h.t)(t,n,r),a.x+=t[0],a.y+=t[1],i}}()},63449:(t,r,i)=>{"use strict";let s,n;i.r(r),i.d(r,{default:()=>o7});var o=i(24765),a=i(94323),l=i(99836),u=i(51084),d=i(42589),h=i(12790),p=i(96082),c=i(20341),f=i(66150),y=i(82639),m=i(66138),g=i(67844),_=i(85098),b=i(19687),v=i(40655),w=i(53919),C=i(99950),S=(i(21314),i(30407)),x=i(18721),M=i(46472),I=i(972),E=i(32488),T=i(19708),P=i(14963),A=i(46366);let k={widthBreakpoint:{getValue(t){let r=t.viewSize[0],i=t.breakpoints,s=this.values;return r<=i.xsmall?s.xsmall:r<=i.small?s.small:r<=i.medium?s.medium:r<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){let r=t.viewSize[1],i=t.breakpoints,s=this.values;return r<=i.xsmall?s.xsmall:r<=i.small?s.small:r<=i.medium?s.medium:r<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){let r=t.viewSize,i=r[0],s=r[1],n=this.values;return s>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},O={xsmall:544,small:768,medium:992,large:1200};function R(t,r){return r?k[t].valueToClassName[r].split(" "):[]}let L=t=>{let r=class extends t{constructor(...t){super(...t),this._breakpointsHandles=new A.Z,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=O}initialize(){this._breakpointsHandles.add((0,g.YP)(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),g.nn))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=(0,y.SC)(this._breakpointsHandles))}set breakpoints(t){var r;if(t===this._get("breakpoints"))return;let i=(r=t)&&r.xsmall<r.small&&r.small<r.medium&&r.medium<r.large;i||console.warn("provided breakpoints are not valid, using defaults:"+JSON.stringify(O,null,2)),t=i?t:O,this._set("breakpoints",{...t})}_updateClassNames(){if(!this.container)return;let t=P.Z.acquire(),r=P.Z.acquire(),i,s=!1;for(i in k){let n=this[i],o=k[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});n!==o&&(s=!0,this[i]=o,R(i,n).forEach(t=>r.push(t)),R(i,o).forEach(r=>t.push(r)))}s&&(this._applyClassNameChanges(t,r),P.Z.release(t),P.Z.release(r))}_applyClassNameChanges(t,r){let i=this.container;i&&(r.forEach(t=>i.classList.remove(t)),t.forEach(t=>i.classList.add(t)))}_removeActiveClassNames(){let t;let r=this.container;if(r)for(t in k)R(t,this[t]).forEach(t=>r.classList.remove(t))}};return(0,o._)([(0,w.Cb)()],r.prototype,"breakpoints",null),(0,o._)([(0,w.Cb)()],r.prototype,"orientation",void 0),(0,o._)([(0,w.Cb)()],r.prototype,"widthBreakpoint",void 0),(0,o._)([(0,w.Cb)()],r.prototype,"heightBreakpoint",void 0),r=(0,o._)([(0,S.j)("esri.views.BreakpointsOwner")],r)};var F=i(19016),N=i(57446),j=i(53306),D=i(99447),Z=(i(70992),i(31088));let V=class extends j.Z{constructor(){super(...arguments),this.items=new u.Z,this._watchUpdatingTracking=new D.t,this._callbacks=new Map,this._projector=(0,Z.E)(),this._hiddenProjector=(0,Z.E)()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){let t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(let r of t.added){let t=()=>r.render();this._callbacks.set(r,t),this._projector.append(this.surface,t)}for(let r of t.removed){let t=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(t.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){let r=this._hiddenSurface,i=this._hiddenProjector,s=null,n=()=>s=t.render();i.append(r,n),i.renderNow();let o={left:0,top:0,right:0,bottom:0};if(s&&s.domNode){let t=s.domNode.getBoundingClientRect();o.left=t.left,o.top=t.top,o.right=t.right,o.bottom=t.bottom}for(i.detach(n);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){let i=this.computeBoundingRect(t),s=this.computeBoundingRect(r);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t){if(!this.items.some(t=>t.visible))return;let r=t.getContext("2d");r.save(),r.font=this._fontString(),this.items.forEach(t=>{r.save(),t.renderCanvas(r),r.restore()}),r.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};(0,o._)([(0,w.Cb)({readOnly:!0})],V.prototype,"surface",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],V.prototype,"items",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],V.prototype,"needsRender",null),(0,o._)([(0,w.Cb)({readOnly:!0})],V.prototype,"_watchUpdatingTracking",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],V.prototype,"updating",null);let z=V=(0,o._)([(0,S.j)("esri.views.overlay.ViewOverlay")],V);i(92886);var U=i(47845),G=i(76539),q=i(36844),$=i(87291),B=i(8451),W=(i(2951),i(5047)),H=i(32121),J=(i(35562),i(90631));let Y=["B","kB","MB","GB","TB"];var K=i(35052),X=i(96896),Q=i(18368),ee=i(99444),et=i(71624),er=i(79286);let ei=f.Z.getLogger("esri.widgets.Feature.support.featureUtils"),es=/href=(""|'')/gi,en=/(\{([^\{\r\n]+)\})/g,eo=/\'/g,ea=/^\s*expression\//i,el=/(\n)/gi,eu=/[\u00A0-\u9999<>\&]/gim,ed=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,eh=/^(?:mailto:|tel:)/,ep="relationships/",ec=(0,Q.Ze)("short-date-short-time");function ef(t){if(!(0,y.Wi)(t))return t.get("sourceLayer")||t.get("layer")}async function ey(t,r){return"function"==typeof t?t.call(null,r):t}function em(t=""){if(t)return!eh.test(t.trim().toLowerCase())}function eg(t){return!!t&&ea.test(t)}function e_(t,r){let i=function(t,r){let i;if(!eg(r)||!t)return null;let s=r.replace(ea,"").toLowerCase();return t.some(t=>t.name.toLowerCase()===s&&(i=t,!0)),i}(r,t?.fieldName);return i?i.title||null:t?t.label||t.fieldName:null}function eb(t,r){let i=ev(r,t);return i?i.name:t}function ev(t,r){return t&&"function"==typeof t.getField?t.getField(r):null}function ew(t){return`${t}`.trim()}function eC({attributes:t,globalAttributes:r,layer:i,text:s,expressionAttributes:n,fieldInfoMap:o}){return s?eS({formattedAttributes:r,template:function(t,r,i){let s=ex(t,i);return s?s.replace(ed,(t,i,s)=>(function(t,r,i){let s=(r=ew(r))&&"{"!==r[0];return(0,H.gx)(t,function(t,r=!1){let i={...t};return Object.keys(i).forEach(t=>(function(t,r,i=!1){let s=r[t];if("string"==typeof s){let n=(i?encodeURIComponent(s):s).replace(eo,"%27");r[t]=n}})(t,i,r)),i}(i,s))})(t,i||s,r)):s}(s,{...r,...n,...t},i),fieldInfoMap:o}):""}function eS({formattedAttributes:t,template:r,fieldInfoMap:i}){return ew((0,H.gx)((0,H.gx)(r,t=>(function(t,r){let i=r.get(t.toLowerCase());return`{${i&&i.fieldName||t}}`})(t,i)),t).replace(es,""))}function ex(t,r){return t.replace(en,(t,i,s)=>{let n=ev(r,s);return n?`{${n.name}}`:i})}function eM(t,r){let i;if(!t||!t.length||!r)return;let s=r.toLowerCase();return t.some(t=>!(!t.fieldName||t.fieldName.toLowerCase()!==s||(i=t,0))),i}function eI(t){let r=[];if(!t)return r;let{fieldInfos:i,content:s}=t;return i&&r.push(...i),s&&Array.isArray(s)&&s.forEach(t=>{if("fields"===t.type){let i=t&&t.fieldInfos;i&&r.push(...i)}}),r}function eE(t){return t.replace(eu,t=>`&#${t.charCodeAt(0)};`)}function eT(t){return"string"==typeof t?t.replace(el,'<br class="esri-text-new-line" />'):t}function eP(t){let{value:r,fieldName:i,fieldInfos:s,fieldInfoMap:n,layer:o,graphic:a}=t;if(null==r)return"";let l=function({fieldName:t,value:r,graphic:i,layer:s}){if(ek(t)||!s||"function"!=typeof s.getFieldDomain)return null;let n=s.getFieldDomain(t,{feature:i});return n&&"coded-value"===n.type?n.getName(r):null}({fieldName:i,value:r,graphic:a,layer:o});if(l)return l;let u=function({fieldName:t,graphic:r,layer:i}){if(ek(t)||!i||"function"!=typeof i.getFeatureType)return null;let{typeIdField:s}=i;if(!s||t!==s)return null;let n=i.getFeatureType(r);return n?n.name:null}({fieldName:i,graphic:a,layer:o});if(u)return u;if(n.get(i.toLowerCase()))return function(t,r){let i=r.fieldInfos,s=r.fieldName,n=eM(i,s)?.clone(),o=r.preventPlacesFormatting,a=r.layer,l=ev(a,s);if(n&&"date"===l?.type){var u;let t=n.format||new et.Z;t.dateFormat=t.dateFormat||"short-date-short-time",t.dateTimeFormatOptions=!a?.layer&&"feature"===a?.type&&a.datesInUnknownTimezone||a?.layer&&(u=a.layer,"map-image"===u?.type)&&a.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=t}let d=n&&n.format;return"string"==typeof t&&(0,ee.Ec)(s)&&d?d.formatRasterPixelValue(t):"string"==typeof(t=function(t,r){if("string"==typeof t&&r&&null==r.dateFormat&&(null!=r.places||null!=r.digitSeparator)){let r=Number(t);if(!isNaN(r))return r}return t}(t,d))||null==t||null==d?eT(t):o?(0,J.uf)(t,{...(0,J.sh)(d),minimumFractionDigits:0,maximumFractionDigits:20}):d.format(t)}(r,{fieldInfos:s||Array.from(n.values()),fieldName:i,layer:o});let d=o&&o.fieldsIndex;return d&&d.isDateField(i)?(0,Q.p6)(r,ec):eT(r)}function eA({fieldInfos:t,attributes:r,layer:i,graphic:s,fieldInfoMap:n,relatedInfos:o}){let a={};return o?.forEach(r=>(function({attributes:t,relatedInfo:r,fieldInfoMap:i,fieldInfos:s,layer:n}){t&&r&&(r.relatedFeatures&&r.relatedFeatures&&r.relatedFeatures.forEach(o=>eO({attributes:t,graphic:o,relatedInfo:r,fieldInfoMap:i,fieldInfos:s,layer:n})),r.relatedStatsFeatures&&r.relatedStatsFeatures&&r.relatedStatsFeatures.forEach(o=>eO({attributes:t,graphic:o,relatedInfo:r,fieldInfoMap:i,fieldInfos:s,layer:n})))})({attributes:a,relatedInfo:r,fieldInfoMap:n,fieldInfos:t,layer:i})),Object.keys(r).forEach(o=>{let l=r[o];a[o]=eP({fieldName:o,fieldInfos:t,fieldInfoMap:n,layer:i,value:l,graphic:s})}),a}function ek(t=""){return!!t&&t.includes(ep)}function eO({attributes:t,graphic:r,relatedInfo:i,fieldInfos:s,fieldInfoMap:n,layer:o}){t&&r&&i&&Object.keys(r.attributes).forEach(a=>{var l;let u=(l={layerId:i.relation.id.toString(),fieldName:a},`${ep}${l.layerId}/${l.fieldName}`),d=r.attributes[a];t[u]=eP({fieldName:u,fieldInfos:s,fieldInfoMap:n,layer:o,value:d,graphic:r})})}let eR=t=>{if(!t)return!1;let r=t.toUpperCase();return r.includes("CURRENT_TIMESTAMP")||r.includes("CURRENT_DATE")||r.includes("CURRENT_TIME")},eL=({layer:t,method:r,query:i,definitionExpression:s})=>{if(!t.capabilities?.query?.supportsCacheHint||"attachments"===r)return;let n=(0,y.pC)(i.where)&&i.where,o=(0,y.pC)(i.geometry)&&i.geometry;eR(s)||eR(n)||"extent"===o?.type||"tile"===i.resultType||(i.cacheHint=!0)};function eF(t,r,i){return t.find(t=>t!==r&&"feature"===t.type&&t.url===r.url&&t.layerId===i.relatedTableId)}let eN={editing:!1,operations:{add:!0,update:!0,delete:!0}},ej=u.Z.ofType(K.Z),eD=class extends j.Z{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...eN},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new ej,this.fileInfos=new u.Z,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles((0,g.YP)(()=>this.graphic,()=>this._graphicChanged(),g.nn))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(t){return{...eN,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){let{graphic:t}=this;if(!t)return!1;let r=t.layer||t.sourceLayer;return r?.loaded&&"capabilities"in r&&"operations"in r.capabilities&&"supportsResizeAttachments"in r.capabilities.operations&&r.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){let{_attachmentLayer:t,attachmentInfos:r}=this;if(!t||"function"!=typeof t.queryAttachments)throw new h.Z("invalid-layer","getAttachments(): A valid layer is required.");let i=this._getObjectId(),s=new X.Z({objectIds:[i],returnMetadata:!0}),n=[],o=t.queryAttachments(s).then(t=>t[i]||n).catch(()=>n);this._getAttachmentsPromise=o,this.notifyChange("state");let a=await o;return r.removeAll(),a.length&&r.addMany(a),this._getAttachmentsPromise=null,this.notifyChange("state"),a}async addAttachment(t,r=this.graphic){let{_attachmentLayer:i,attachmentInfos:s,abilities:n}=this;if(!r)throw new h.Z("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:r});if(!t)throw new h.Z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!n.operations.add)throw new h.Z("invalid-abilities","addAttachment(): add abilities are required.");if(!i||"function"!=typeof i.addAttachment)throw new h.Z("invalid-layer","addAttachment(): A valid layer is required.");let o=i.addAttachment(r,t).then(t=>this._queryAttachment(t.objectId,r)),a=await o;return s.add(a),a}async deleteAttachment(t){let{_attachmentLayer:r,attachmentInfos:i,graphic:s,abilities:n}=this;if(!t)throw new h.Z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!n.operations.delete)throw new h.Z("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!r||"function"!=typeof r.deleteAttachments)throw new h.Z("invalid-layer","deleteAttachment(): A valid layer is required.");let o=r.deleteAttachments(s,[t.id]).then(()=>t),a=await o;return i.remove(a),a}async updateAttachment(t,r=this.activeAttachmentInfo){let{_attachmentLayer:i,attachmentInfos:s,graphic:n,abilities:o}=this;if(!t)throw new h.Z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!r)throw new h.Z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:r});if(!o.operations.update)throw new h.Z("invalid-abilities","updateAttachment(): Update abilities are required.");let a=s.findIndex(t=>t===r);if(!i||"function"!=typeof i.updateAttachment)throw new h.Z("invalid-layer","updateAttachment(): A valid layer is required.");let l=i.updateAttachment(n,r.id,t).then(t=>this._queryAttachment(t.objectId)),u=await l;return s.splice(a,1,u),u}async commitFiles(){return await Promise.all(this.fileInfos.items.map(t=>this.addAttachment(t.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(t,r){if(!t||!r)return null;let i={file:t,form:r};return this.fileInfos.add(i),i}updateFile(t,r,i=this.activeFileInfo){if(!t||!r||!i)return null;let s=this.fileInfos.findIndex(t=>i===t);return s>-1&&this.fileInfos.splice(s,1,{file:t,form:r}),this.fileInfos.items[s]}deleteFile(t){let r=this.fileInfos.find(r=>r.file===t);return this.fileInfos.remove(r)??null}async _queryAttachment(t,r){if(!t)throw new h.Z("invalid-attachment-id","Could not query attachment.");let{_attachmentLayer:i}=this,s=this._getObjectId(r),n=new X.Z({objectIds:[s],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return i.queryAttachments(n).then(t=>t[s][0])}_getObjectId(t=this.graphic){return t?.getObjectId()??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){let{graphic:t}=this,r=ef(t);this._attachmentLayer=r?"scene"===r.type&&(0,y.pC)(r.associatedLayer)?r.associatedLayer:r:null}};(0,o._)([(0,w.Cb)()],eD.prototype,"abilities",void 0),(0,o._)([(0,q.p)("abilities")],eD.prototype,"castAbilities",null),(0,o._)([(0,w.Cb)()],eD.prototype,"activeAttachmentInfo",void 0),(0,o._)([(0,w.Cb)()],eD.prototype,"activeFileInfo",void 0),(0,o._)([(0,w.Cb)({readOnly:!0,type:ej})],eD.prototype,"attachmentInfos",void 0),(0,o._)([(0,w.Cb)()],eD.prototype,"fileInfos",void 0),(0,o._)([(0,w.Cb)({type:a.Z})],eD.prototype,"graphic",void 0),(0,o._)([(0,w.Cb)()],eD.prototype,"mode",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],eD.prototype,"state",null),(0,o._)([(0,w.Cb)()],eD.prototype,"filesEnabled",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],eD.prototype,"supportsResizeAttachments",null);let eZ=eD=(0,o._)([(0,S.j)("esri.widgets.Attachments.AttachmentsViewModel")],eD);var eV=i(6487);function ez(t){let r=t.toLowerCase();return"image/bmp"===r||"image/emf"===r||"image/exif"===r||"image/gif"===r||"image/x-icon"===r||"image/jpeg"===r||"image/png"===r||"image/tiff"===r||"image/x-wmf"===r}var eU=i(93381),eG=i(69034),eq=i(73568);let e$={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},eB="esri-attachments__items",eW="esri-attachments__item",eH="esri-attachments__item-button",eJ="esri-attachments__item-mask",eY="esri-attachments__image",eK="esri-attachments__image--resizable",eX="esri-attachments__label",eQ="esri-attachments__filename",e0="esri-attachments__item-chevron-icon",e1="esri-attachments__form-node",e2="esri-attachments__file-fieldset",e3="esri-attachments__file-label",e5="esri-attachments__file-name",e4="esri-attachments__file-input",e9="esri-attachments__metadata-fieldset",e6="esri-button",e8="esri-button--disabled",e7="esri-button--secondary",te="esri-button--tertiary",tt="esri-button--third",tr="esri-button--small",ti="esri-button--half",ts="esri-icon-right",tn="esri-icon-left",to=window.CSS,ta=class extends $.Z{constructor(t,r){super(t,r),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new eZ,this.visibleElements={...e$},this._supportsImageOrientation=to&&to.supports&&to.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.addHandles([(0,g.on)(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),(0,g.on)(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),(0,g.YP)(()=>this.viewModel?.mode,()=>this._modeChanged(),g.nn)])}loadDependencies(){return Promise.all([i.e(4918).then(i.bind(i,54918))])}get abilities(){return this.viewModel.abilities}set abilities(t){this.viewModel.abilities=t}get effectiveDisplayType(){let{displayType:t}=this;return t&&"auto"!==t?t:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}castVisibleElements(t){return{...e$,...t}}addAttachment(){let{_addAttachmentForm:t,viewModel:r}=this;return this._set("submitting",!0),this._set("error",null),r.addAttachment(t).then(t=>(this._set("submitting",!1),this._set("error",null),r.mode="view",t)).catch(t=>{throw this._set("submitting",!1),this._set("error",new h.Z("attachments:add-attachment",this.messages.addErrorMessage,t)),t})}deleteAttachment(t){let{viewModel:r}=this;return this._set("submitting",!0),this._set("error",null),r.deleteAttachment(t).then(t=>(this._set("submitting",!1),this._set("error",null),r.mode="view",t)).catch(t=>{throw this._set("submitting",!1),this._set("error",new h.Z("attachments:delete-attachment",this.messages.deleteErrorMessage,t)),t})}updateAttachment(){let{viewModel:t}=this,{_updateAttachmentForm:r}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(r).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(t=>{throw this._set("submitting",!1),this._set("error",new h.Z("attachments:update-attachment",this.messages.updateErrorMessage,t)),t})}addFile(){let t=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",t}updateFile(){let{viewModel:t}=this,r=t.updateFile(this.selectedFile,this._updateAttachmentForm,t.activeFileInfo);return t.mode="view",r}deleteFile(t){let r=this.viewModel.deleteFile(t||this.viewModel.activeFileInfo.file);return this.viewModel.mode="view",r}render(){let{submitting:t,viewModel:r}=this,{state:i}=r;return(0,eq.u)("div",{class:this.classes("esri-attachments","esri-widget")},t?this.renderProgressBar():null,"loading"===i?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){let{error:t,visibleElements:r}=this;return t&&r.errorMessage?(0,eq.u)("div",{key:"error-message",class:"esri-attachments__error-message"},t.message):null}renderAttachments(){let{activeFileInfo:t,mode:r,activeAttachmentInfo:i}=this.viewModel;return"add"===r?this.renderAddForm():"edit"===r?this.renderDetailsForm(i||t):this.renderAttachmentContainer()}renderLoading(){return(0,eq.u)("div",{class:"esri-attachments__loader-container",key:"loader"},(0,eq.u)("div",{class:"esri-attachments__loader"}))}renderProgressBar(){return this.visibleElements.progressBar?(0,eq.u)("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null}renderAddForm(){let{submitting:t,selectedFile:r}=this,i=t||!r,s=this.visibleElements.cancelAddButton?(0,eq.u)("button",{type:"button",bind:this,disabled:t,onclick:this._cancelForm,class:this.classes(e6,te,tr,ti,t&&e8)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?(0,eq.u)("button",{type:"submit",disabled:i,class:this.classes(e6,e7,tr,ti,{[e8]:i})},this.messages.add):null,o=r?(0,eq.u)("span",{key:"file-name",class:e5},r.name):null,a=(0,eq.u)("form",{bind:this,afterCreate:eU.Yo,afterRemoved:eU.pV,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},(0,eq.u)("fieldset",{class:e2},o,(0,eq.u)("label",{class:this.classes(e3,e6,e7)},r?this.messages.changeFile:this.messages.selectFile,(0,eq.u)("input",{class:e4,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,s);return(0,eq.u)("div",{key:"add-form-container",class:e1},a)}renderDetailsForm(t){let r,i,s,n;let{visibleElements:o,viewModel:a,selectedFile:l,submitting:u}=this,{abilities:d}=a,h=u||!l;l?(r=l.type,i=l.name,s=l.size):"file"in t?(r=t.file.type,i=t.file.name,s=t.file.size):(r=t.contentType,i=t.name,s=t.size,n=t.url);let p=d.editing&&d.operations.delete&&o.deleteButton?(0,eq.u)("button",{key:"delete-button",type:"button",disabled:u,bind:this,onclick:r=>this._submitDeleteAttachment(r,t),class:this.classes(e6,tr,te,"esri-attachments__delete-button",{[e8]:u})},this.messages.delete):void 0,c=d.editing&&d.operations.update&&o.updateButton?(0,eq.u)("button",{disabled:h,key:"update-button",type:"submit",class:this.classes(e6,tr,tt,{[e8]:h})},this.messages.update):void 0,f=this.visibleElements.cancelUpdateButton?(0,eq.u)("button",{disabled:u,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(e6,tr,te,tt,{[e8]:u})},this.messages.cancel):void 0,m=d.editing&&d.operations.update?(0,eq.u)("fieldset",{key:"file",class:e2},(0,eq.u)("span",{key:"file-name",class:e5},i),(0,eq.u)("label",{class:this.classes(e3,e6,e7)},this.messages.changeFile,(0,eq.u)("input",{class:e4,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,g=(0,eq.u)("fieldset",{key:"size",class:e9},(0,eq.u)("label",null,function(t,r){let i=0===r?0:Math.floor(Math.log(r)/Math.log(B.Y8.KILOBYTES));i=(0,W.uZ)(i,0,Y.length-1);let s=(0,J.uf)(r/B.Y8.KILOBYTES**i,{maximumFractionDigits:2});return(0,H.gx)(t.units.bytes[Y[i]],{fileSize:s})}(this.messagesUnits,s))),_=(0,eq.u)("fieldset",{key:"content-type",class:e9},(0,eq.u)("label",null,r)),b=(0,y.pC)(n)?(0,eq.u)("a",{class:"esri-attachments__item-link",href:n,rel:"noreferrer",target:"_blank"},this.renderImageMask(t,400),(0,eq.u)("div",{class:"esri-attachments__item-link-overlay"},(0,eq.u)("span",{class:"esri-attachments__item-link-overlay-icon"},(0,eq.u)("calcite-icon",{icon:"launch"})))):this.renderImageMask(t,400),v=(0,eq.u)("form",{bind:this,afterCreate:eU.Yo,afterRemoved:eU.pV,"data-node-ref":"_updateAttachmentForm",onsubmit:r=>this._submitUpdateAttachment(r,t)},(0,eq.u)("div",{class:"esri-attachments__metadata"},g,_),m,(0,eq.u)("div",{class:"esri-attachments__actions"},p,f,c));return(0,eq.u)("div",{key:"edit-form-container",class:e1},b,v)}renderImageMask(t,r){return"file"in t?this.renderGenericImageMask(t.file.name,t.file.type):this.renderImageMaskForAttachment(t,r)}renderGenericImageMask(t,r){let{supportsResizeAttachments:i}=this.viewModel,s=function(t){let r=(0,eV.V)("esri/themes/base/images/files/");return t?"text/plain"===t?`${r}text-32.svg`:"application/pdf"===t?`${r}pdf-32.svg`:"text/csv"===t?`${r}csv-32.svg`:"application/gpx+xml"===t?`${r}gpx-32.svg`:"application/x-dwf"===t?`${r}cad-32.svg`:"application/postscript"===t||"application/json"===t||"text/xml"===t||"model/vrml"===t?`${r}code-32.svg`:"application/x-zip-compressed"===t||"application/x-7z-compressed"===t||"application/x-gzip"===t||"application/x-tar"===t||"application/x-gtar"===t||"application/x-bzip2"===t||"application/gzip"===t||"application/x-compress"===t||"application/x-apple-diskimage"===t||"application/x-rar-compressed"===t||"application/zip"===t?`${r}zip-32.svg`:t.includes("image/")?`${r}image-32.svg`:t.includes("audio/")?`${r}sound-32.svg`:t.includes("video/")?`${r}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${r}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${r}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${r}report-32.svg`:`${r}generic-32.svg`:`${r}generic-32.svg`}(r);return(0,eq.u)("div",{class:this.classes("esri-attachments__item-mask--icon",eJ)},(0,eq.u)("img",{title:t,alt:t,src:s,class:this.classes({[eK]:i},eY)}))}renderImageMaskForAttachment(t,r){let{supportsResizeAttachments:i}=this.viewModel,{contentType:s,name:n,url:o}=t;if(!i||!ez(s))return this.renderGenericImageMask(n,s);let a=this._getCSSTransform(t),l=`${o}${o.includes("?")?"&":"?"}w=${r}`;return(0,eq.u)("div",{class:this.classes(eJ)},(0,eq.u)("img",{styles:a?{transform:a,"image-orientation":"none"}:{},alt:n,title:n,src:l,class:this.classes({[eK]:i},eY)}))}renderFile(t){let{file:r}=t;return(0,eq.u)("li",{class:eW,key:r},(0,eq.u)("button",{key:"details-button",bind:this,class:eH,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(t),type:"button"},this.renderImageMask(t),(0,eq.u)("label",{class:eX},(0,eq.u)("span",{class:eQ},r.name||this.messages.noTitle),(0,eq.u)("span",{"aria-hidden":"true",class:this.classes(e0,(0,eU.dZ)(this.container)?tn:ts)}))))}renderAttachmentInfo({attachmentInfo:t,displayType:r}){let{viewModel:i,effectiveDisplayType:s}=this,{abilities:n,supportsResizeAttachments:o}=i,{contentType:a,name:l,url:u}=t,d=this.renderImageMask(t,"list"===r?48:400),h=n.editing?(0,eq.u)("span",{"aria-hidden":"true",class:this.classes(e0,(0,eU.dZ)(this.container)?tn:ts)}):null,p=[d,"preview"===s&&o&&ez(a)?null:(0,eq.u)("label",{class:eX},(0,eq.u)("span",{class:eQ},l||this.messages.noTitle),h)],c=n.editing?(0,eq.u)("button",{key:"details-button",bind:this,class:eH,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":t.id,onclick:()=>this._startEditAttachment(t),type:"button"},p):(0,eq.u)("a",{key:"details-link",class:eH,href:u,target:"_blank"},p);return(0,eq.u)("li",{class:eW,key:t},c)}renderAttachmentContainer(){let{effectiveDisplayType:t,viewModel:r,visibleElements:i}=this,{attachmentInfos:s,abilities:n,fileInfos:o}=r,a=!!s?.length,l=!!o?.length,u=n.editing&&n.operations.add&&i.addButton?(0,eq.u)("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(e6,te,"esri-attachments__add-attachment-button"),type:"button"},(0,eq.u)("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):void 0,d=a?(0,eq.u)("ul",{key:"attachments-list",class:eB},s.toArray().map(r=>this.renderAttachmentInfo({attachmentInfo:r,displayType:t}))):void 0,h=l?(0,eq.u)("ul",{key:"file-list",class:eB},o.toArray().map(t=>this.renderFile(t))):void 0,p=l||a?void 0:(0,eq.u)("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return(0,eq.u)("div",{key:"attachments-container",class:this.classes("esri-attachments__container",{"esri-attachments__container--list":"preview"!==t,"esri-attachments__container--preview":"preview"===t})},d,h,p,u)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(t){let r=t.target,i=r&&r.files&&r.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(t,r){t.preventDefault(),"file"in r?this.deleteFile(r.file):this.deleteAttachment(r)}_submitAddAttachment(t){t.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(t,r){t.preventDefault(),"file"in r?this.updateFile():this.updateAttachment()}_startEditAttachment(t){let{viewModel:r}=this;r.activeFileInfo=null,r.activeAttachmentInfo=t,r.mode="edit"}_startEditFile(t){let{viewModel:r}=this;r.activeAttachmentInfo=null,r.activeFileInfo=t,r.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(t){let{orientationInfo:r}=t;return!this._supportsImageOrientation&&r?[r.rotation?`rotate(${r.rotation}deg)`:"",r.mirrored?"scaleX(-1)":""].join(" "):""}};(0,o._)([(0,w.Cb)()],ta.prototype,"abilities",null),(0,o._)([(0,w.Cb)()],ta.prototype,"displayType",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],ta.prototype,"effectiveDisplayType",null),(0,o._)([(0,w.Cb)()],ta.prototype,"graphic",null),(0,o._)([(0,w.Cb)()],ta.prototype,"label",null),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/Attachments/t9n/Attachments")],ta.prototype,"messages",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/core/t9n/Units")],ta.prototype,"messagesUnits",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],ta.prototype,"selectedFile",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],ta.prototype,"submitting",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],ta.prototype,"error",void 0),(0,o._)([(0,w.Cb)({type:eZ})],ta.prototype,"viewModel",void 0),(0,o._)([(0,w.Cb)()],ta.prototype,"visibleElements",void 0),(0,o._)([(0,q.p)("visibleElements")],ta.prototype,"castVisibleElements",null);let tl=ta=(0,o._)([(0,S.j)("esri.widgets.Attachments")],ta),tu=class extends eZ{constructor(t){super(t),this.description=null,this.title=null}};(0,o._)([(0,w.Cb)()],tu.prototype,"description",void 0),(0,o._)([(0,w.Cb)()],tu.prototype,"title",void 0);let td=tu=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],tu);function th(t,r){var i;let s=(i=t.level,(0,W.uZ)(Math.ceil(i),1,6)),n=`h${s}`;return delete t.level,(0,eq.u)(n,{...t,class:(0,eU.Sh)("esri-widget__heading",t.class),role:"heading","aria-level":String(s)},r)}let tp=class extends $.Z{constructor(t,r){super(t,r),this.description=null,this.headingLevel=2,this.title=null}render(){return(0,eq.u)("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())}renderTitle(){let{title:t}=this;return t?(0,eq.u)(th,{level:this.headingLevel,class:"esri-feature-element-info__title"},t):null}renderDescription(){let{description:t}=this;return t?(0,eq.u)("div",{key:"description",class:"esri-feature-element-info__description"},t):null}};(0,o._)([(0,w.Cb)()],tp.prototype,"description",void 0),(0,o._)([(0,w.Cb)()],tp.prototype,"headingLevel",void 0),(0,o._)([(0,w.Cb)()],tp.prototype,"title",void 0);let tc=tp=(0,o._)([(0,S.j)("esri.widgets.Feature.support.FeatureElementInfo")],tp),tf=class extends $.Z{constructor(t,r){super(t,r),this._featureElementInfo=null,this.attachmentsWidget=new tl,this.headingLevel=2,this.viewModel=new td}initialize(){this._featureElementInfo=new tc,this.addHandles([(0,g.YP)(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),g.nn),(0,g.YP)(()=>this.viewModel?.graphic,t=>this.attachmentsWidget.graphic=t,g.nn)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get displayType(){return this.attachmentsWidget.displayType}set displayType(t){this.attachmentsWidget.displayType=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){let{attachmentsWidget:t}=this;return(0,eq.u)("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),t?.render())}_setupFeatureElementInfo(){let{description:t,title:r,headingLevel:i}=this;this._featureElementInfo.set({description:t,title:r,headingLevel:i})}};(0,o._)([(0,w.Cb)({readOnly:!0})],tf.prototype,"attachmentsWidget",void 0),(0,o._)([(0,w.Cb)()],tf.prototype,"description",null),(0,o._)([(0,w.Cb)()],tf.prototype,"displayType",null),(0,o._)([(0,w.Cb)()],tf.prototype,"graphic",null),(0,o._)([(0,w.Cb)()],tf.prototype,"headingLevel",void 0),(0,o._)([(0,w.Cb)()],tf.prototype,"title",null),(0,o._)([(0,w.Cb)({type:td})],tf.prototype,"viewModel",void 0);let ty=tf=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureAttachments")],tf);var tm=i(57107);let tg=class extends(0,tm.p)(j.Z){constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add((0,g.YP)(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},g.nn))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){let{created:t,graphic:r,destroyer:i}=this;t&&(ey(i,{graphic:r}).catch(()=>null),this._set("created",null))}async _createContent(t){let{graphic:r}=this,i=ey(t,{graphic:r}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");let s=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};(0,o._)([(0,w.Cb)({readOnly:!0})],tg.prototype,"created",void 0),(0,o._)([(0,w.Cb)()],tg.prototype,"creator",void 0),(0,o._)([(0,w.Cb)()],tg.prototype,"destroyer",void 0),(0,o._)([(0,w.Cb)({type:a.Z})],tg.prototype,"graphic",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],tg.prototype,"state",null);let t_=tg=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],tg);var tb=i(20316);let tv=class extends $.Z{constructor(t,r){super(t,r),this.viewModel=null,this._addTargetToAnchors=t=>{Array.from(t.querySelectorAll("a")).forEach(t=>{em(t.href)&&!t.hasAttribute("target")&&t.setAttribute("target","_blank")})}}get creator(){return this.viewModel.creator}set creator(t){this.viewModel.creator=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}renderLoading(){return(0,eq.u)("div",{class:"esri-feature-content__loader-container",key:"loader"},(0,eq.u)("div",{class:"esri-feature-content__loader"}))}renderCreated(){let t=this.viewModel?.created;return t?t instanceof HTMLElement?(0,eq.u)("div",{key:t,bind:t,afterCreate:this._attachToNode}):(0,tb.Qd)(t)?(0,eq.u)("div",{key:t},!t.destroyed&&t.render()):(0,eq.u)("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}render(){let t=this.viewModel?.state;return(0,eq.u)("div",{class:"esri-feature-content"},"loading"===t?this.renderLoading():this.renderCreated())}_attachToNode(t){t.appendChild(this)}};(0,o._)([(0,w.Cb)()],tv.prototype,"creator",null),(0,o._)([(0,w.Cb)()],tv.prototype,"graphic",null),(0,o._)([(0,w.Cb)({type:t_})],tv.prototype,"viewModel",void 0);let tw=tv=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureContent")],tv);var tC=i(89845),tS=i(85200);let tx=class extends j.Z{constructor(t){super(t),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){let{expressionInfos:t,fieldInfos:r}=this,i=[];return r?.forEach(r=>{if(r.hasOwnProperty("visible")&&!r.visible)return;let s=r.clone();s.label=e_(s,t),i.push(s)}),i}};(0,o._)([(0,w.Cb)()],tx.prototype,"attributes",void 0),(0,o._)([(0,w.Cb)({type:[tC.Z]})],tx.prototype,"expressionInfos",void 0),(0,o._)([(0,w.Cb)()],tx.prototype,"description",void 0),(0,o._)([(0,w.Cb)({type:[tS.Z]})],tx.prototype,"fieldInfos",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],tx.prototype,"formattedFieldInfos",null),(0,o._)([(0,w.Cb)()],tx.prototype,"title",void 0);let tM=tx=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],tx),tI=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}],tE=class extends $.Z{constructor(t,r){super(t,r),this._featureElementInfo=null,this.viewModel=new tM,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new tc,this.addHandles((0,g.YP)(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),g.nn))}destroy(){this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(t){this.viewModel.expressionInfos=t}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(t){this.viewModel.fieldInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}renderFieldInfo(t,r){let{attributes:i}=this.viewModel,s=t.fieldName,n=t.label||s,o=i?null==i[s]?"":i[s]:"",a=!(!t.format||!t.format.dateFormat),l="number"!=typeof o||a?function(t,r){let i;if("string"!=typeof r||!r)return r;let s=(i=null,tI.some(t=>(t.pattern.test(r)&&(i=t),!!i)),i);if(!s)return r;let n=r.match(s.pattern),o=n&&n[2],a=(0,H.gx)((0,H.gx)(s.label,{messages:t,hierPart:o}),{appName:s.appName}),l=s.target?` target="${s.target}"`:"",u="_blank"===s.target?' rel="noreferrer"':"";return r.replace(s.pattern,`<a${l} href="$1"${u}>${a}</a>`)}(this.messagesURIUtils,o):this._forceLTR(o);return(0,eq.u)("tr",{key:`fields-element-info-row-${s}-${r}`},(0,eq.u)("th",{key:`fields-element-info-row-header-${s}-${r}`,class:"esri-feature-fields__field-header",innerHTML:n}),(0,eq.u)("td",{key:`fields-element-info-row-data-${s}-${r}`,class:this.classes("esri-feature-fields__field-data",{"esri-feature-fields__field-data--date":a}),innerHTML:l}))}renderFields(){let{formattedFieldInfos:t}=this.viewModel;return t?.length?(0,eq.u)("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},(0,eq.u)("tbody",null,t.map((t,r)=>this.renderFieldInfo(t,r)))):null}render(){return(0,eq.u)("div",{class:"esri-feature-fields"},this._featureElementInfo?.render(),this.renderFields())}_setupFeatureElementInfo(){let{description:t,title:r}=this;this._featureElementInfo.set({description:t,title:r})}_forceLTR(t){return`&lrm;${t}`}};(0,o._)([(0,w.Cb)()],tE.prototype,"attributes",null),(0,o._)([(0,w.Cb)()],tE.prototype,"description",null),(0,o._)([(0,w.Cb)()],tE.prototype,"expressionInfos",null),(0,o._)([(0,w.Cb)()],tE.prototype,"fieldInfos",null),(0,o._)([(0,w.Cb)()],tE.prototype,"title",null),(0,o._)([(0,w.Cb)({type:tM,nonNullable:!0})],tE.prototype,"viewModel",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/Feature/t9n/Feature")],tE.prototype,"messages",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/support/t9n/uriUtils")],tE.prototype,"messagesURIUtils",void 0);let tT=tE=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureFields")],tE);var tP=i(39013);let tA={maximumFractionDigits:20};i(95632);var tk=i(75138),tO=i(55410);i(98402),i(13395);let tR=(0,Q.Ze)("short-date"),tL=new tO.Z([64,64,64]);async function tF(t,r,s){let n=!1,o=[],a=[];if(t.stops){let r=t.stops;o=r.map(t=>t.value),(n=r.some(t=>!!t.label))&&(a=r.map(t=>t.label))}let l=o[0],u=o[o.length-1];if(null==l&&null==u)return null;let d=n?null:function(t,r){let i=[],s=t.length-1;return 5===t.length?i.push(0,2,4):i.push(0,s),t.map((t,n)=>{let o;return i.includes(n)?(o="",0===n?o="< ":n===s&&(o="> "),o+(r?(0,Q.p6)(t,tR):(0,J.uf)(t,tA))):null})}(o,s);return(await Promise.all(o.map(async(s,o)=>({value:s,color:"opacity"===t.type?await tN(s,t,r):(await Promise.resolve().then(i.bind(i,43730))).getColor(t,s),label:n?a[o]:d[o]})))).reverse()}async function tN(t,r,s=tL){let n=new tO.Z(s),o=(await Promise.resolve().then(i.bind(i,43730))).getOpacity(r,t);return null!=o&&(n.a=o),n}var tj=i(72332);async function tD(t,r,i){(0,tP.s1)(t,r,()=>[]).push(...i)}f.Z.getLogger("esri.renderers.support.utils"),(0,Q.Ze)("short-date");var tZ=i(8330),tV=i(57837),tz=(i(93948),i(36834)),tU=(i(10242),i(49869),i(82583),i(55309),i(29098),i(13345),i(24539)),tG=(i(39442),i(80385),i(61812),i(55308),i(57775)),tq=(i(64012),i(58531)),t$=(i(88794),i(81174));let tB=f.Z.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),tW=new Map;function tH(t){if(!ek(t))return null;let[r,i]=t.split("/").slice(1);return{layerId:r,fieldName:i}}let tJ={chartAnimation:!0},tY=class extends j.Z{constructor(t){super(t),this.abilities={...tJ},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(t){return{...tJ,...t}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(t){let{formattedMediaInfoCount:r}=this;this.activeMediaInfoIndex=(t+r)%r}_pageContentElementMedia(t){let{activeMediaInfoIndex:r}=this;this._setContentElementMedia(r+t)}_formatMediaInfos(){let{attributes:t,mediaInfos:r,formattedAttributes:i,expressionAttributes:s,fieldInfoMap:n,layer:o}=this;return r?.map(r=>{let a=r?.clone();if(!a)return null;if(a.title=eC({attributes:t,fieldInfoMap:n,globalAttributes:i,expressionAttributes:s,layer:o,text:a.title}),a.caption=eC({attributes:t,fieldInfoMap:n,globalAttributes:i,expressionAttributes:s,layer:o,text:a.caption}),a.altText=eC({attributes:t,fieldInfoMap:n,globalAttributes:i,expressionAttributes:s,layer:o,text:a.altText}),"image"===a.type){let{value:t}=a;return this._setImageValue({value:t,formattedAttributes:i,layer:o}),a.value.sourceURL?a:void 0}if("pie-chart"===a.type||"line-chart"===a.type||"column-chart"===a.type||"bar-chart"===a.type){let{value:r}=a;return this._setChartValue({value:r,chartType:a.type,attributes:t,formattedAttributes:i,layer:o,expressionAttributes:s}),a}return null}).filter(Boolean)}_setImageValue(t){let{fieldInfoMap:r}=this,{value:i,formattedAttributes:s,layer:n}=t,{linkURL:o,sourceURL:a}=i;if(a){let t=ex(a,n);i.sourceURL=eS({formattedAttributes:s,template:t,fieldInfoMap:r})}if(o){let t=ex(o,n);i.linkURL=eS({formattedAttributes:s,template:t,fieldInfoMap:r})}}_setChartValue(t){let{value:r,attributes:i,formattedAttributes:s,chartType:n,layer:o,expressionAttributes:a}=t,{popupTemplate:l,relatedInfos:u}=this,{fields:d,normalizeField:h}=r;if(r.fields=d&&d.map(t=>eb(t,o)),h&&(r.normalizeField=eb(h,o)),!d.some(t=>!!(null!=s[t]||ek(t)&&u.size)))return;let p=l?.fieldInfos;d.forEach(t=>{if(ek(t))return void(r.series=[...r.series,...this._getRelatedChartInfos({fieldInfos:p,fieldName:t,formattedAttributes:s,chartType:n,value:r})]);let o=this._getChartOption({value:r,attributes:i,chartType:n,formattedAttributes:s,expressionAttributes:a,fieldName:t,fieldInfos:p});r.series.push(o)})}_getRelatedChartInfos(t){let{fieldInfos:r,fieldName:i,formattedAttributes:s,chartType:n,value:o}=t,a=[],{layerId:l,fieldName:u}=tH(i),d=this.relatedInfos?.get(l.toString());if(!d)return a;let{relatedFeatures:h,relation:p}=d;if(!p||!h)return a;let{cardinality:c}=p;return h.forEach(t=>{let{attributes:l}=t;l&&Object.keys(l).forEach(t=>{t===u&&a.push(this._getChartOption({value:o,attributes:l,formattedAttributes:s,fieldName:i,chartType:n,relatedFieldName:t,fieldInfos:r}))})}),"one-to-many"===c||"many-to-many"===c?a:[a[0]]}_getTooltip({label:t,value:r,chartType:i}){return"pie-chart"===i?`${t}`:`${t}: ${r}`}_getChartOption(t){let{value:r,attributes:i,formattedAttributes:s,expressionAttributes:n,fieldName:o,relatedFieldName:a,fieldInfos:l,chartType:u}=t,{layer:d,fieldInfoMap:h}=this,{normalizeField:p,tooltipField:c}=r,f=p?ek(p)?i[tH(p).fieldName]:i[p]:null,y=eg(o)&&n&&void 0!==n[o]?n[o]:a&&void 0!==i[a]?i[a]:void 0!==i[o]?i[o]:s[o],m=new tZ.Z({fieldName:o,value:void 0===y?null:y&&f?y/f:y});if(ek(o)){let t=h.get(o.toLowerCase()),r=h.get(c.toLowerCase()),i=t?.fieldName??o,n=s[r?.fieldName??c]??t?.label??t?.fieldName??a,l=s[i];return m.tooltip=this._getTooltip({label:n,value:l,chartType:u}),m}let g=eM(l,o),_=eb(o,d),b=c&&void 0!==s[c]?s[c]:e_(g||new tS.Z({fieldName:_}),this.popupTemplate?.expressionInfos),v=s[_];return m.tooltip=this._getTooltip({label:b,value:v,chartType:u}),m}};(0,o._)([(0,w.Cb)()],tY.prototype,"abilities",void 0),(0,o._)([(0,q.p)("abilities")],tY.prototype,"castAbilities",null),(0,o._)([(0,w.Cb)()],tY.prototype,"activeMediaInfoIndex",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],tY.prototype,"activeMediaInfo",null),(0,o._)([(0,w.Cb)()],tY.prototype,"attributes",void 0),(0,o._)([(0,w.Cb)()],tY.prototype,"description",void 0),(0,o._)([(0,w.Cb)()],tY.prototype,"fieldInfoMap",void 0),(0,o._)([(0,w.Cb)()],tY.prototype,"formattedAttributes",void 0),(0,o._)([(0,w.Cb)()],tY.prototype,"expressionAttributes",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],tY.prototype,"formattedMediaInfos",null),(0,o._)([(0,w.Cb)()],tY.prototype,"layer",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],tY.prototype,"formattedMediaInfoCount",null),(0,o._)([(0,w.Cb)()],tY.prototype,"mediaInfos",void 0),(0,o._)([(0,w.Cb)()],tY.prototype,"popupTemplate",void 0),(0,o._)([(0,w.Cb)()],tY.prototype,"relatedInfos",void 0),(0,o._)([(0,w.Cb)()],tY.prototype,"title",void 0);let tK=tY=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],tY);var tX=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],tQ=[{name:"default",colors:[].concat(tX.slice(30,39),tX.slice(28,30).reverse())},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],t0=i(11284);let t1="en-us",t2=new Map([["ar",()=>i.e(7750).then(i.bind(i,7750)).then(t=>t.a)],["bg-bg",()=>i.e(3847).then(i.bind(i,83847)).then(t=>t.b)],["bs-ba",()=>i.e(1756).then(i.bind(i,91756)).then(t=>t.b)],["ca-es",()=>i.e(5265).then(i.bind(i,66193)).then(t=>t.c)],["cs-cz",()=>i.e(5585).then(i.bind(i,65585)).then(t=>t.c)],["da-dk",()=>i.e(404).then(i.bind(i,90404)).then(t=>t.d)],["de-de",()=>i.e(2627).then(i.bind(i,52627)).then(t=>t.d)],["de-ch",()=>i.e(7535).then(i.bind(i,97535)).then(t=>t.d)],["el-gr",()=>i.e(4775).then(i.bind(i,84775)).then(t=>t.e)],["en-us",()=>i.e(3803).then(i.bind(i,83803)).then(t=>t.e)],["en-ca",()=>i.e(6508).then(i.bind(i,46508)).then(t=>t.e)],["es-es",()=>i.e(9137).then(i.bind(i,89137)).then(t=>t.e)],["et-ee",()=>i.e(7236).then(i.bind(i,17236)).then(t=>t.e)],["fi-fi",()=>i.e(7101).then(i.bind(i,77101)).then(t=>t.f)],["fr-fr",()=>i.e(3295).then(i.bind(i,63295)).then(t=>t.f)],["he-il",()=>i.e(2007).then(i.bind(i,72007)).then(t=>t.h)],["hr-hr",()=>i.e(7257).then(i.bind(i,47257)).then(t=>t.h)],["hu-hu",()=>i.e(4956).then(i.bind(i,74956)).then(t=>t.h)],["id-id",()=>i.e(3460).then(i.bind(i,13460)).then(t=>t.i)],["it-it",()=>i.e(7673).then(i.bind(i,47673)).then(t=>t.i)],["ja-jp",()=>i.e(5).then(i.bind(i,80005)).then(t=>t.j)],["ko-kr",()=>i.e(6437).then(i.bind(i,90240)).then(t=>t.k)],["lt-lt",()=>i.e(2630).then(i.bind(i,92630)).then(t=>t.l)],["lv-lv",()=>i.e(8394).then(i.bind(i,88032)).then(t=>t.l)],["nb-no",()=>i.e(9978).then(i.bind(i,9978)).then(t=>t.n)],["nl-nl",()=>i.e(7706).then(i.bind(i,47706)).then(t=>t.n)],["pl-pl",()=>i.e(3886).then(i.bind(i,83886)).then(t=>t.p)],["pt-br",()=>i.e(3108).then(i.bind(i,23108)).then(t=>t.p)],["pt-pt",()=>i.e(5817).then(i.bind(i,75817)).then(t=>t.p)],["ro-ro",()=>i.e(9943).then(i.bind(i,59943)).then(t=>t.r)],["ru-ru",()=>i.e(5108).then(i.bind(i,35108)).then(t=>t.r)],["sk-sk",()=>i.e(2022).then(i.bind(i,72022)).then(t=>t.s)],["sl-sl",()=>i.e(8693).then(i.bind(i,37662)).then(t=>t.s)],["sr-rs",()=>i.e(525).then(i.bind(i,30525)).then(t=>t.s)],["sv-se",()=>i.e(5661).then(i.bind(i,15661)).then(t=>t.s)],["th-th",()=>i.e(93).then(i.bind(i,70093)).then(t=>t.t)],["tr-tr",()=>i.e(2225).then(i.bind(i,2225)).then(t=>t.t)],["uk-ua",()=>i.e(8119).then(i.bind(i,28119)).then(t=>t.u)],["vi-vn",()=>i.e(6456).then(i.bind(i,26456)).then(t=>t.v)],["zh-cn",()=>i.e(5830).then(i.bind(i,75830)).then(t=>t.z)],["zh-hk",()=>i.e(9806).then(i.bind(i,39806)).then(t=>t.z)],["zh-tw",()=>i.e(9806).then(i.bind(i,39806)).then(t=>t.z)]]);function t3(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"").startsWith("dark")}let t5="esri-feature-media__button",t4="esri-feature-media__icon",t9="esri-icon-left-triangle-arrow",t6="esri-icon-right-triangle-arrow",t8="color",t7="tooltip",re="value",rt="default-line-value",rr=class extends $.Z{constructor(t,r){super(t,r),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new tK,this.messages=null,this._getChartDependencies=async t=>{let r=await async function(t=(0,t0.Kd)()){var r;if(t=(r=t)?t2.has(r.toLowerCase())?r.toLowerCase():function(t){let r=t.split("-")[0].toLowerCase(),i=null;for(let t of t2.keys())if(t.startsWith(r)){i=t;break}return i}(r)||t1:t1,s&&t===n)return s;s=i.e(2762).then(i.bind(i,82762)).then(t=>t.i),n=t;try{let[r,i]=await Promise.all([s,t2.get(n)()]);n===t&&(r.am4core.options.defaultLocale=i.default),r.am4core.options.suppressWarnings=!0,r.am4core.options.autoDispose=!0}catch{return s=null,n=null,null}return s}(),{destroyed:o,viewModel:a}=this;if(o||!a||!t)return;let{activeMediaInfo:l}=a,u=await this._getRendererColors(r);this._renderChart({chartDiv:t,mediaInfo:l,chartsModule:r,colorMap:u})}}initialize(){this._featureElementInfo=new tc,this.addHandles([(0,g.YP)(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),g.nn),(0,g.YP)(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),g.nn)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(t){this.viewModel.attributes=t}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(t){this.viewModel.activeMediaInfoIndex=t}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(t){this.viewModel.fieldInfoMap=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(t){this.viewModel.mediaInfos=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(t){this.viewModel.relatedInfos=t}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}render(){return(0,eq.u)("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())}renderMedia(){let{formattedMediaInfoCount:t}=this.viewModel;return t?(0,eq.u)("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(t){let{_refreshIntervalInfo:r}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:s}=this.viewModel,{value:n,refreshInterval:o,altText:a,title:l,type:u}=t,{sourceURL:d,linkURL:h}=n,p=em(h)?"_blank":"_self",c=o?r:null,f=c?c.timestamp:0,y=c?c.sourceURL:d,m=(0,eq.u)("img",{alt:a||l,key:`media-${u}-${i}-${s}-${f}`,src:y});return(h?(0,eq.u)("a",{title:l,href:h,rel:"_blank"===p?"noreferrer":"",target:p},m):null)||m}renderChartMediaInfo(t){let{activeMediaInfoIndex:r,formattedMediaInfoCount:i}=this.viewModel;return(0,eq.u)("div",{key:`media-${t.type}-${r}-${i}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})}renderMediaInfoType(){let{activeMediaInfo:t}=this.viewModel;return t?"image"===t.type?this.renderImageMediaInfo(t):t.type.includes("chart")?this.renderChartMediaInfo(t):null:null}renderMediaInfo(){let{activeMediaInfo:t}=this.viewModel;if(!t)return null;let r=t.title?(0,eq.u)("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:t.title}):null,i=t.caption?(0,eq.u)("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:t.caption}):null;return(0,eq.u)("div",{key:"media-container",class:"esri-feature-media__item-container"},(0,eq.u)("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),r,i)}renderMediaPageButton(t){if(this.viewModel.formattedMediaInfoCount<2)return null;let r="previous"===t,i=r?this.messages.previous:this.messages.next,s=r?this.classes(t5,"esri-feature-media__previous"):this.classes(t5,"esri-feature-media__next"),n=r?this.classes(t4,"esri-feature-media__previous-icon",t9):this.classes(t4,"esri-feature-media__next-icon",t6),o=r?this.classes(t4,"esri-feature-media__previous-icon--rtl",t6):this.classes(t4,"esri-feature-media__next-icon--rtl",t9),a=r?this._previous:this._next;return(0,eq.u)("button",{type:"button",key:r?"media-previous":"media-next",title:i,"aria-label":i,tabIndex:0,class:s,bind:this,onclick:a},(0,eq.u)("span",{"aria-hidden":"true",class:n}),(0,eq.u)("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){let{description:t,title:r}=this;this._featureElementInfo.set({description:t,title:r})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(t){let{am4core:r}=t,i=new Map,s=this.viewModel?.layer?.renderer;if(!s)return i;let n=await async function(t){let r=new Map;if(!t)return r;if("visualVariables"in t&&t.visualVariables)for(let i of t.visualVariables.filter(t=>"color"===t.type)){let t=(await tF(i)).map(t=>t.color);await tD(r,i.field||i.valueExpression,t)}if("heatmap"===t.type){let i=(function(t){if(!t.colorStops)return[];let r=[...t.colorStops].filter(t=>t.color?.a>0),i=r.length-1;if(r&&r[0]){let t=r[i];t&&1!==t.ratio&&(r.push(new tj.Z({ratio:1,color:t.color})),i++)}return r.map((r,s)=>{let n="";return 0===s?n=t.legendOptions?.minLabel||"low":s===i&&(n=t.legendOptions?.maxLabel||"high"),{color:r.color,label:n,ratio:r.ratio}}).reverse()})(t).map(t=>t.color);await tD(r,t.field||t.valueExpression,i)}else if("pie-chart"===t.type){for(let i of t.attributes)await tD(r,i.field||i.valueExpression,[i.color]);await tD(r,"default",[t?.othersCategory?.color,(0,tk._h)(t.backgroundFillSymbol,null)])}else if("dot-density"===t.type){for(let i of t.attributes)await tD(r,i.field||i.valueExpression,[i.color]);await tD(r,"default",[t.backgroundColor])}else if("unique-value"===t.type){if("predominance"===t.authoringInfo?.type)for(let i of t.uniqueValueInfos??[])await tD(r,i.value.toString(),[(0,tk._h)(i.symbol,null)]);else{let i=(t.uniqueValueInfos??[]).map(t=>(0,tk._h)(t.symbol,null)),{field:s,field2:n,field3:o,valueExpression:a}=t;(s||a)&&await tD(r,s||a,i),n&&await tD(r,n,i),o&&await tD(r,o,i)}}else if("class-breaks"===t.type){let i=t.classBreakInfos.map(t=>(0,tk._h)(t.symbol,null)),{field:s,valueExpression:n}=t;await tD(r,s??n,i)}else"simple"===t.type&&await tD(r,"default",[(0,tk._h)(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await tD(r,"default",[(0,tk._h)(t.defaultSymbol,null)]),r.forEach((t,i)=>{let s=(0,C.Tw)(t.filter(Boolean),(t,r)=>JSON.stringify(t)===JSON.stringify(r));r.set(i,s)}),r}(s);return n.delete("default"),Array.from(n.values()).every(t=>1===t?.length)&&(i.set(rt,r.color({r:50,g:50,b:50,a:1})),Array.from(n.keys()).forEach(t=>{t&&i.set(t,r.color(n.get(t)[0].toCss(!0)))})),i}_handleMediaKeyup(t){let r=(0,U.kK)(t);"ArrowLeft"===r&&(t.stopPropagation(),this.viewModel.previous()),"ArrowRight"===r&&(t.stopPropagation(),this.viewModel.next())}_renderChart(t){let{abilities:r}=this.viewModel,{chartsModule:i,chartDiv:s,mediaInfo:n,colorMap:o}=t,{value:a,type:l}=n,{am4core:u}=i,d=function(t,r="default"){let i=tQ.find(t=>t.name===r);return i?i.colors.map(r=>t.color(r)):null}(u);t3()&&u.useTheme(i.am4themes_dark);let h=window.matchMedia("(prefers-reduced-motion: reduce)");r.chartAnimation&&!h.matches?u.useTheme(i.am4themes_animated):u.unuseTheme(i.am4themes_animated),u.useTheme(function(t){t instanceof u.ColorSet&&d&&(t.list=d)});let p="pie-chart"===l?this._createPieChart(t):this._createXYChart(t);s.setAttribute("aria-label",n.altText||n.title),p.data=a.series.map(t=>({[t7]:t.tooltip,[re]:t.value,[t8]:o.get(t.fieldName)})).filter(t=>"pie-chart"!==l||t.value>0)}_customizeChartTooltip(t,r){t.label.wrap=!0,t.label.maxWidth=200,t.autoTextColor=!1,t.getFillFromObject=!1,t.label.fill=r.color("#ffffff"),t.background.fill=r.color({r:0,g:0,b:0,a:.7})}_createPieChart(t){let{chartDiv:r,chartsModule:i}=t,{am4core:s,am4charts:n}=i,o=s.create(r,n.PieChart);o.rtl=(0,eU.dZ)(this.container);let a=o.series.push(new n.PieSeries);return a.labels.template.disabled=!0,a.ticks.template.disabled=!0,a.dataFields.value=re,a.dataFields.category=t7,this._customizeChartTooltip(a.tooltip,s),a.slices.template.propertyFields.fill=t8,a.slices.template.propertyFields.stroke=t8,o}_getMinSeriesValue(t){let r=0;return t.forEach(t=>r=Math.min(t.value,r)),r}_createColumnChart(t,r){let{chartsModule:i,mediaInfo:s}=r,{value:n}=s,{am4core:o,am4charts:a}=i,l=t.xAxes.push(new a.CategoryAxis);l.dataFields.category=t7,l.renderer.labels.template.disabled=!0,this._customizeChartTooltip(l.tooltip,o),l.tooltip.events.on("sizechanged",()=>{l.tooltip.dy=-l.tooltip.contentHeight});let u=t.yAxes.push(new a.ValueAxis),d=u.renderer.labels.template;u.renderer.minLabelPosition=.05,u.renderer.maxLabelPosition=.95,u.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(u.tooltip,o),d.wrap=!0;let h=t.series.push(new a.ColumnSeries);h.dataFields.valueY=re,h.dataFields.categoryX=t7,h.columns.template.propertyFields.fill=t8,h.columns.template.propertyFields.stroke=t8,t.cursor=new a.XYCursor,n.series.length>15&&(t.scrollbarX=new o.Scrollbar)}_createBarChart(t,r){let{chartsModule:i,mediaInfo:s}=r,{value:n}=s,{am4core:o,am4charts:a}=i,l=t.yAxes.push(new a.CategoryAxis);l.dataFields.category=t7,l.renderer.inversed=!0,l.renderer.labels.template.disabled=!0,this._customizeChartTooltip(l.tooltip,o),l.tooltip.events.on("sizechanged",()=>{l.tooltip.dx=l.tooltip.contentWidth});let u=t.xAxes.push(new a.ValueAxis),d=u.renderer.labels.template;u.renderer.minLabelPosition=.05,u.renderer.maxLabelPosition=.95,u.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(u.tooltip,o),d.wrap=!0;let h=t.series.push(new a.ColumnSeries);h.dataFields.valueX=re,h.dataFields.categoryY=t7,h.columns.template.propertyFields.fill=t8,h.columns.template.propertyFields.stroke=t8,t.cursor=new a.XYCursor,n.series.length>15&&(t.scrollbarY=new o.Scrollbar)}_createLineChart(t,r){let{chartsModule:i,mediaInfo:s,colorMap:n}=r,{value:o}=s,{am4core:a,am4charts:l}=i,u=t.xAxes.push(new l.CategoryAxis);u.dataFields.category=t7,u.renderer.labels.template.disabled=!0,this._customizeChartTooltip(u.tooltip,a),u.tooltip.events.on("sizechanged",()=>{u.tooltip.dy=-u.tooltip.contentHeight});let d=t.yAxes.push(new l.ValueAxis),h=d.renderer.labels.template;d.renderer.minLabelPosition=.05,d.renderer.maxLabelPosition=.95,d.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(d.tooltip,a),h.wrap=!0;let p=t.series.push(new l.LineSeries);p.dataFields.categoryX=t7,p.dataFields.valueY=re,p.strokeWidth=1;let c=n.get(rt);c&&(p.stroke=c);let f=p.bullets.push(new l.CircleBullet);f.propertyFields.fill=t8,f.propertyFields.stroke=t8,t.cursor=new l.XYCursor,o.series.length>15&&(t.scrollbarX=new a.Scrollbar)}_createXYChart(t){let{chartDiv:r,chartsModule:i,mediaInfo:s}=t,{type:n}=s,{am4core:o,am4charts:a}=i,l=o.create(r,a.XYChart);return l.rtl=(0,eU.dZ)(this.container),"column-chart"===n&&this._createColumnChart(l,t),"bar-chart"===n&&this._createBarChart(l,t),"line-chart"===n&&this._createLineChart(l,t),l}_clearMediaRefreshTimer(){let{_refreshTimer:t}=this;t&&(clearTimeout(t),this._refreshTimer=null)}_updateMediaInfoTimestamp(t){let r=Date.now();this._refreshIntervalInfo={timestamp:r,sourceURL:this._getImageSource(t,r)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();let{activeMediaInfo:t}=this.viewModel;t&&"image"===t.type&&t.refreshInterval&&this._setRefreshTimeout(t)}_setRefreshTimeout(t){let{refreshInterval:r,value:i}=t;if(!r)return;this._updateMediaInfoTimestamp(i.sourceURL);let s=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},6e4*r);this._refreshTimer=s}_getImageSource(t,r){let i=t.includes("?")?"&":"?",[s,n=""]=t.split("#");return`${s}${i}timestamp=${r}${n?"#":""}${n}`}};(0,o._)([(0,w.Cb)()],rr.prototype,"attributes",null),(0,o._)([(0,w.Cb)()],rr.prototype,"activeMediaInfoIndex",null),(0,o._)([(0,w.Cb)()],rr.prototype,"description",null),(0,o._)([(0,w.Cb)()],rr.prototype,"fieldInfoMap",null),(0,o._)([(0,w.Cb)()],rr.prototype,"layer",null),(0,o._)([(0,w.Cb)()],rr.prototype,"mediaInfos",null),(0,o._)([(0,w.Cb)()],rr.prototype,"popupTemplate",null),(0,o._)([(0,w.Cb)()],rr.prototype,"relatedInfos",null),(0,o._)([(0,w.Cb)()],rr.prototype,"title",null),(0,o._)([(0,w.Cb)({type:tK})],rr.prototype,"viewModel",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/Feature/t9n/Feature")],rr.prototype,"messages",void 0);let ri=rr=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureMedia")],rr);i(86780),i(97663),i(67530),i(87086);var rs=i(86288),rn=i(38488),ro=(i(29978),i(65081)),ra=i(22776),rl=i(88622);let ru=["$datastore","$map","$layer","$aggregatedfeatures"],rd=f.Z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function rh(){return i.e(2468).then(i.bind(i,72468))}async function rp({graphic:t,view:r}){let{isAggregate:i,layer:s}=t;if(!i||!s||"2d"!==r?.type)return[];let n=await r.whenLayerView(s);if(!("createQuery"in n&&"queryFeatures"in n))return[];let o=n.createQuery();o.aggregateIds=[t.getObjectId()];let{features:a}=await n.queryFeatures(o);return a}async function rc({expressionInfo:t,arcadeUtils:r,interceptor:i,spatialReference:s,map:n,graphic:o,view:a}){if(!t||!t.expression)return null;let l=r.createSyntaxTree(t.expression),u=ru.filter(t=>r.hasVariable(l,t)),[d]=await Promise.all([rp({graphic:o,view:a}),r.loadScriptDependencies(l,!0,u)]),h=r.getViewInfo({spatialReference:s}),p=r.createExecContext(o,h);p.interceptor=i,p.useAsync=!0,function({aggregatedFeatures:t,arcadeUtils:r,featureSetVars:i,context:s,viewInfo:n,map:o,graphic:a,interceptor:l}){i.forEach(i=>{let u=i.toLowerCase(),d={map:o,spatialReference:n.sr,interceptor:l};if("$map"===u&&(s.vars[u]=r.convertMapToFeatureSetCollection(d)),"$layer"===u&&(s.vars[u]=r.convertFeatureLayerToFeatureSet({layer:a.sourceLayer,spatialReference:n.sr,interceptor:l})),"$datastore"===u&&(s.vars[u]=r.convertServiceUrlToWorkspace({url:a.sourceLayer.url,spatialReference:n.sr,interceptor:l})),"$aggregatedfeatures"===u){let i=a.layer,{fields:o,objectIdField:d,geometryType:h,spatialReference:p,displayField:c}=i,f=new rl.default({fields:o,objectIdField:d,geometryType:h,spatialReference:p,displayField:c,..."feature"===i.type?{templates:i.templates,typeIdField:i.typeIdField,types:i.types}:null,source:t});s.vars[u]=r.convertFeatureLayerToFeatureSet({layer:f,spatialReference:n.sr,interceptor:l})}})}({aggregatedFeatures:d,arcadeUtils:r,featureSetVars:u,context:p,viewInfo:h,map:n,graphic:o,interceptor:i});let c=r.createFunction(l,p);return r.executeAsyncFunction(c,p).catch(r=>rd.error("arcade-execution-error",{error:r,graphic:o,expressionInfo:t}))}async function rf({expressionInfos:t,spatialReference:r,graphic:i,interceptor:s,map:n,view:o}){if(!t||!t.length)return{};let a=await rh(),l={};for(let u of t)l[`expression/${u.name}`]=rc({expressionInfo:u,arcadeUtils:a,interceptor:s,spatialReference:r,map:n,graphic:i,view:o});let u=await (0,m.as)(l),d={};for(let t in u)d[t]=function(t){return"string"==typeof t?eT(eE(t)):Array.isArray(t)?`<ul class="esri-widget__list">${t.map(t=>`<li>${"string"==typeof t?eT(eE(t)):t}</li>`).join("")}</ul>`:"esri.arcade.Dictionary"===t?.declaredClass?`<table class="esri-widget__table">${t.keys().map(r=>{let i=t.field(r);return`<tr><th>${r}</th><td>${"string"==typeof i?eT(eE(i)):i}</td></tr>`}).join("")}</table>`:t}(u[t].value);return d}let ry=class extends(0,tm.p)(j.Z){constructor(t){super(t),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{let{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{let t=this.contentElement?.type;this.contentElementViewModel?.destroy();let r="fields"===t?new tM:"media"===t?new tK:"text"===t?new t_:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();let t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=(0,G.P)(this._compile,1,this),this._compileExpression=async()=>{let{expressionInfo:t,graphic:r,interceptor:i,spatialReference:s,map:n,view:o,_abortController:a}=this;if(!(t&&r&&s&&n))return void this._set("contentElement",null);let l=await rh();if(a!==this._abortController)return;let u=await rc({arcadeUtils:l,expressionInfo:t,graphic:r,interceptor:i,map:n,spatialReference:s,view:o});if(!u||"esri.arcade.Dictionary"!==u.declaredClass)return void this._set("contentElement",null);let d=await u.castAsJsonAsync(a.signal),h=d?.type,p="media"===h?rn.Z.fromJSON(d):"text"===h?ro.Z.fromJSON(d):"fields"===h?rs.Z.fromJSON(d):null;this._set("contentElement",p)},this.handles.add([(0,g.YP)(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),g.nn),(0,g.YP)(()=>[this.contentElement],()=>this._createVM(),g.nn)])}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(t){this._override("spatialReference",t)}get state(){let{_abortController:t,contentElement:r,contentElementViewModel:i}=this;return t?"loading":r||i?"ready":"disabled"}get map(){return this.view?.map??null}set map(t){this._override("map",t)}};(0,o._)([(0,w.Cb)()],ry.prototype,"_abortController",void 0),(0,o._)([(0,w.Cb)({type:ra.Z})],ry.prototype,"expressionInfo",void 0),(0,o._)([(0,w.Cb)({type:a.Z})],ry.prototype,"graphic",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],ry.prototype,"contentElement",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],ry.prototype,"contentElementViewModel",void 0),(0,o._)([(0,w.Cb)()],ry.prototype,"interceptor",void 0),(0,o._)([(0,w.Cb)()],ry.prototype,"spatialReference",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ry.prototype,"state",null),(0,o._)([(0,w.Cb)()],ry.prototype,"map",null),(0,o._)([(0,w.Cb)()],ry.prototype,"view",void 0);let rm=ry=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],ry),rg=class extends $.Z{constructor(t,r){super(t,r),this.viewModel=new rm}initialize(){this.addHandles((0,g.YP)(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),g.nn))}destroy(){this._destroyContentWidget()}renderLoading(){return(0,eq.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},(0,eq.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}render(){let{state:t}=this.viewModel;return(0,eq.u)("div",{class:"esri-feature-expression"},"loading"===t?this.renderLoading():"disabled"===t?null:this._contentWidget?.render())}_destroyContentWidget(){let{_contentWidget:t}=this;t&&(t.viewModel=null,t.destroy()),this._contentWidget=null}_setupExpressionWidget(){let{contentElementViewModel:t,contentElement:r}=this.viewModel,i=r?.type;this._destroyContentWidget();let s=t?"fields"===i?new tT({viewModel:t}):"media"===i?new ri({viewModel:t}):"text"===i?new tw({viewModel:t}):null:null;this._contentWidget=s,this.scheduleRender()}};(0,o._)([(0,w.Cb)({type:rm})],rg.prototype,"viewModel",void 0);let r_=rg=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureExpression")],rg);var rb=i(34577),rv=i(18372);let rw=class extends(0,rb.J)((0,rv.IG)((0,tm.p)(j.Z))){constructor(t){super(t),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{let{_queryAbortController:t}=this;t&&t.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{let{_queryFeatureCountAbortController:t}=this;t&&t.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{let{_queryPageAbortController:t}=this;t&&t.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();let t=new AbortController;this._queryAbortController=t,await (0,m.R8)(this._query()),this._queryAbortController===t&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();let t=new AbortController;this._queryFeatureCountAbortController=t,await (0,m.R8)(this._queryFeatureCount()),this._queryFeatureCountAbortController===t&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{let t=new AbortController;this._queryPageAbortController=t,await (0,m.R8)(this._queryPage()),this._queryPageAbortController===t&&(this._queryPageAbortController=null)},this._queryThrottled=(0,G.P)(this._queryController,100,this),this._queryFeatureCountThrottled=(0,G.P)(this._queryFeatureCountController,100,this),this._queryPageThrottled=(0,G.P)(this._queryPageController,100,this),this._query=async()=>{let{_queryAbortController:t,relatedFeatures:r}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,r.removeAll(),r.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:t?.signal})))},this.handles.add([(0,g.YP)(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled],()=>this._queryThrottled(),g.nn),(0,g.YP)(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),(0,g.YP)(()=>[this.layer,this.relationshipId,this.objectId],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(t){let{featuresPerPage:r,featureCount:i}=this;this._set("featurePage",Math.min(Math.max(t,1),Math.ceil(i/r)||1))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){let{orderByFields:t,relatedLayer:r}=this;return t&&r?.loaded?t.map(t=>{let i=t.clone(),s=eb(t.field,r);return i.field=s,i}):t}get itemDescriptionFieldName(){return this.orderByFieldsFixedCasing?.[0]?.field||null}set displayCount(t){this._set("displayCount",Math.min(Math.max(t,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){return this.graphic?.attributes?.[this.objectIdField]??null}get objectIdField(){return this.layer?.objectIdField||null}get relatedFeatures(){return this._get("relatedFeatures")||new u.Z}get relatedLayer(){let{layer:t,map:r,relationship:i}=this;return t?.loaded&&r&&t&&i?eF(r.allLayers,t,i)||eF(r.allTables,t,i):null}get relationship(){let{relationshipId:t,layer:r}=this;return"number"==typeof t?r?.relationships?.find(({id:r})=>r===t)??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new u.Z}get state(){let{_queryAbortController:t,_queryFeatureCountAbortController:r,_queryPageAbortController:i,graphic:s,relatedLayer:n}=this;return r?"loading":t||i?"querying":s&&n?"ready":"disabled"}_destroyRelatedFeatureViewModels(){this.relatedFeatureViewModels?.forEach(t=>!t.destroyed&&t.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){let{layer:t,relatedLayer:r,relationshipId:i,objectId:s,_queryFeatureCountAbortController:n}=this;if(await t?.load(),!r||"number"!=typeof s||!t?.capabilities?.queryRelated?.supportsCount)return void this._set("featureCount",0);await r.load();let o=r.createQuery(),a=t.capabilities?.queryRelated?.supportsCacheHint??!1,l=new tq.Z({cacheHint:a,relationshipId:i,returnGeometry:!1,objectIds:[s],where:o.where}),u=await t.queryRelatedFeaturesCount(l,{signal:n?.signal});this._set("featureCount",u[s]||0)}_sliceFeatures(t){let{showAllEnabled:r,displayCount:i}=this;return r?t:i?t.slice(0,i):[]}async _queryPage(){let{relatedFeatures:t,featurePage:r,showAllEnabled:i,_queryPageAbortController:s}=this;!i||r<2||t.addMany(await this._queryRelatedFeatures({signal:s?.signal}))}async _queryRelatedFeatures(t){let{orderByFieldsFixedCasing:r,showAllEnabled:i,featuresPerPage:s,displayCount:n,layer:o,relationshipId:a,featurePage:l,featureCount:u,relatedLayer:d}=this;await o?.load();let{relationship:h,objectId:p}=this;if(!h||"number"!=typeof p||!o?.capabilities?.queryRelated?.supportsPagination||!d)return[];await d.load();let c=d.objectIdField,f=[...r?.map(t=>t.field),c],y=r?.map(t=>`${t.field} ${t.order}`),m=o.capabilities?.queryRelated?.supportsCacheHint||!1,g=d.createQuery(),_=new tq.Z({orderByFields:y,start:i?((l-1)*s+u)%u:0,num:i?s:n,outFields:f,cacheHint:m,relationshipId:a,returnGeometry:!1,objectIds:[p],where:g.where}),b=(await o.queryRelatedFeatures(_,{signal:t?.signal}))[p]?.features||[];return b.forEach(t=>t.sourceLayer=d),b}};(0,o._)([(0,w.Cb)()],rw.prototype,"_queryAbortController",void 0),(0,o._)([(0,w.Cb)()],rw.prototype,"_queryPageAbortController",void 0),(0,o._)([(0,w.Cb)()],rw.prototype,"_queryFeatureCountAbortController",void 0),(0,o._)([(0,w.Cb)({value:1})],rw.prototype,"featurePage",null),(0,o._)([(0,w.Cb)()],rw.prototype,"featuresPerPage",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"orderByFieldsFixedCasing",null),(0,o._)([(0,w.Cb)()],rw.prototype,"description",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"itemDescriptionFieldName",null),(0,o._)([(0,w.Cb)({value:3})],rw.prototype,"displayCount",null),(0,o._)([(0,w.Cb)({type:a.Z})],rw.prototype,"graphic",void 0),(0,o._)([(0,w.Cb)()],rw.prototype,"layer",void 0),(0,o._)([(0,w.Cb)()],rw.prototype,"map",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"objectId",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"objectIdField",null),(0,o._)([(0,w.Cb)()],rw.prototype,"orderByFields",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"relatedFeatures",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"relatedLayer",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"relationship",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"featureCount",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"relatedFeatureViewModels",null),(0,o._)([(0,w.Cb)()],rw.prototype,"relationshipId",void 0),(0,o._)([(0,w.Cb)()],rw.prototype,"showAllEnabled",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rw.prototype,"state",null),(0,o._)([(0,w.Cb)()],rw.prototype,"title",void 0);let rC=rw=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],rw);var rS=i(63727);let rx={title:!0,description:!0},rM=class extends $.Z{constructor(t,r){super(t,r),this._featureElementInfo=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([t])=>{t?.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new rC,this.messages=null,this.messagesCommon=null,this.visibleElements={...rx},this._increaseFeaturePage=()=>{let{state:t,showAllEnabled:r,relatedFeatures:i,featuresPerPage:s,featurePage:n}=this.viewModel;"ready"===t&&r&&i.length>=s*n&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new tc,this.addHandles([(0,g.YP)(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),g.nn),(0,g.YP)(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),(0,g.on)(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([i.e(2806).then(i.bind(i,82806)),i.e(1130).then(i.bind(i,1130)),i.e(4918).then(i.bind(i,54918)),i.e(762).then(i.bind(i,60762))])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=(0,y.SC)(this._featureElementInfo)}get displayShowAllButton(){let{showAllEnabled:t,featureCount:r,displayCount:i}=this.viewModel;return!t&&(r>i||0===i)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(t){this.viewModel.description=t}get featureCountDescription(){let{messages:t}=this,{featureCount:r}=this.viewModel;return(0,rS.n)(1===r?t?.numberRecord:t?.numberRecords,{number:r})}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}castVisibleElements(t){return{...rx,...t}}renderStickyLoading(){return"querying"===this.viewModel.state?(0,eq.u)("div",{key:"sticky-loader",class:"esri-feature__sticky-loading-container"},this.renderLoadingIcon()):null}renderLoadingIcon(){return(0,eq.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")})}renderLoading(){return(0,eq.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},this.renderLoadingIcon())}renderShowAllIconNode(){return(0,eq.u)("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){let t=(0,eU.dZ)(this.container)?"chevron-left":"chevron-right";return(0,eq.u)("calcite-icon",{scale:"s",icon:t,slot:"content-end"})}renderRelatedFeature(t){let{itemDescriptionFieldName:r}=this.viewModel,i=t.title;t.description=r&&t.formattedAttributes?.global[r];let s="loading"===t.state;return(0,eq.u)("calcite-list-item",{key:t.uid,label:s?`${this.messagesCommon?.loading}`:i,description:s?"":t.description,onclick:()=>this.emit("select-record",{featureViewModel:t})},this.renderChevronIconNode())}renderShowAllListItem(){return this.displayShowAllButton?(0,eq.u)("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,onclick:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){return(0,eq.u)("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,color:"blue",scale:"s",width:"full"},(0,eq.u)("div",{slot:"message"},this.messages?.noRelatedFeatures))}renderFeatureObserver(){return(0,eq.u)("div",{key:"feature-observer",class:"esri-feature__feature-observer",bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){let{relatedFeatureViewModels:t}=this.viewModel;return(0,eq.u)("calcite-list",null,t.toArray().map(t=>this.renderRelatedFeature(t)),this.renderShowAllListItem())}renderRelatedFeatures(){let{displayListItems:t}=this,{state:r}=this.viewModel;return(0,eq.u)("div",{key:"list-container",class:this.classes("esri-feature-relationship__list",{"esri-feature-relationship__list--querying":"querying"===r})},t?this.renderList():"ready"===r?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){return(0,eq.u)("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,color:"red",scale:"s",width:"full"},(0,eq.u)("div",{slot:"message"},this.messages?.relationshipNotFound))}render(){let{state:t}=this.viewModel;return(0,eq.u)("div",{class:this.classes("esri-feature-relationship","esri-widget")},this._featureElementInfo?.render(),"loading"===t?this.renderLoading():"disabled"===t?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){let{relatedFeatureViewModels:t}=this.viewModel,r="related-feature-viewmodels";this.removeHandles(r),t?.forEach(t=>{this.addHandles(g.YP(()=>[t.title,t.state],()=>this.scheduleRender(),g.nn),r)}),this.scheduleRender()}_setupFeatureElementInfo(){let{headingLevel:t,visibleElements:r}=this,i=r.description&&this.description,s=r.title&&this.title;this._featureElementInfo.set({description:i,title:s,headingLevel:t})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();let{state:t,showAllEnabled:r}=this.viewModel;await (0,m.e4)(0),this._relatedFeatureIntersectionObserverNode&&"ready"===t&&r&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(t){this._relatedFeatureIntersectionObserverNode=t}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};(0,o._)([(0,w.Cb)()],rM.prototype,"_relatedFeatureIntersectionObserverNode",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rM.prototype,"displayShowAllButton",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rM.prototype,"displayListItems",null),(0,o._)([(0,w.Cb)()],rM.prototype,"description",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rM.prototype,"featureCountDescription",null),(0,o._)([(0,w.Cb)()],rM.prototype,"headingLevel",void 0),(0,o._)([(0,w.Cb)()],rM.prototype,"title",null),(0,o._)([(0,w.Cb)({type:rC})],rM.prototype,"viewModel",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/Feature/t9n/Feature")],rM.prototype,"messages",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/t9n/common")],rM.prototype,"messagesCommon",void 0),(0,o._)([(0,w.Cb)()],rM.prototype,"visibleElements",void 0),(0,o._)([(0,q.p)("visibleElements")],rM.prototype,"castVisibleElements",null);let rI=rM=(0,o._)([(0,S.j)("esri.widgets.Feature.FeatureRelationship")],rM),rE="content-view-models",rT="relationship-view-models",rP={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0},rA=rZ=class extends(0,rv.IG)(j.Z){constructor(t){super(t),this._handles=new A.Z,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=(0,G.P)(this._graphicChanged,1,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...rP},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{let{abilities:r}=this;return"attachments"===t.type&&r.attachmentsContent||"custom"===t.type&&r.customContent||"fields"===t.type&&r.fieldsContent||"media"===t.type&&r.mediaContent||"text"===t.type&&r.textContent||"expression"===t.type&&r.expressionContent||"relationship"===t.type&&r.relationshipContent},this._handles.add((0,g.YP)(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),g.nn))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return(0,y.pC)(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return function(t,r){let i=new Map;return t&&t.forEach(t=>{let s=eb(t.fieldName,r);t.fieldName=s,i.set(s.toLowerCase(),t)}),i}(eI(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return ef(this.graphic)}castAbilities(t){return{...rP,...t}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._set("graphic",t?t.clone():null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(t){this._override("spatialReference",t)}get map(){return this.view?.map||null}set map(t){this._override("map",t)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(t,r){let i=this.contentViewModels[t];i instanceof tK&&i.setActiveMedia(r)}nextMedia(t){let r=this.contentViewModels[t];r instanceof tK&&r.next()}previousMedia(t){let r=this.contentViewModels[t];r instanceof tK&&r.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();let{graphic:t}=this;if(!t)return;let r=new AbortController;this._featureAbortController=r;try{await this._queryFeature({signal:r.signal})}catch(r){(0,m.D_)(r)||(this._error=r,f.Z.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===r&&(this._featureAbortController=null)}_cancelFeatureQuery(){let{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,r){return"attachments"===t.type?this._compileAttachments(t,r):"custom"===t.type?this._compileCustom(t,r):"fields"===t.type?this._compileFields(t,r):"media"===t.type?this._compileMedia(t,r):"text"===t.type?this._compileText(t,r):"expression"===t.type?this._compileExpression(t,r):"relationship"===t.type?this._compileRelationship(t,r):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((t,r)=>this._compileContentElement(t,r)):"string"==typeof t?this._compileText(new ro.Z({text:t}),0).text:t}_destroyContentViewModels(){this._handles?.remove(rT),this._handles?.remove(rE),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_matchesFeature(t,r){let i=t?.graphic?.getObjectId(),s=r?.getObjectId();return(0,y.pC)(i)&&(0,y.pC)(s)&&i===s}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:r,map:i}){r?.filter(Boolean).forEach(r=>{t.find(t=>this._matchesFeature(t,r))||t.add(new rZ({abilities:{relationshipContent:!1},map:i,graphic:r}))}),t.forEach(i=>{r?.find(t=>this._matchesFeature(i,t))||t.remove(i)})}_setExpressionContentVM(t,r){let{formattedAttributes:i}=this,{contentElement:s,contentElementViewModel:n}=t,o=s?.type;n&&o&&("fields"===o&&(this._createFieldsFormattedAttributes({contentElement:s,contentElementIndex:r,formattedAttributes:i}),n.set(this._createFieldsVMParams(s,r))),"media"===o&&(this._createMediaFormattedAttributes({contentElement:s,contentElementIndex:r,formattedAttributes:i}),n.set(this._createMediaVMParams(s,r))),"text"===o&&n.set(this._createTextVMParams(s)))}_compileRelationship(t,r){let{displayCount:i,orderByFields:s,relationshipId:n,title:o,description:a}=t,{_sourceLayer:l,graphic:u,map:d}=this,h=new rC({displayCount:i,graphic:u,orderByFields:s,relationshipId:n,layer:l,map:d,...this._compileTitleAndDesc({title:o,description:a})});return this.contentViewModels[r]=h,this._handles.add((0,g.on)(()=>h.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(h)),rT),t}_compileExpression(t,r){let{expressionInfo:i}=t,{graphic:s,map:n,spatialReference:o,view:a}=this,l=new rm({expressionInfo:i,graphic:s,interceptor:rZ.interceptor,map:n,spatialReference:o,view:a});return this.contentViewModels[r]=l,this._handles.add((0,g.YP)(()=>l.contentElementViewModel,()=>this._setExpressionContentVM(l,r),g.nn),rE),t}_compileAttachments(t,r){let{graphic:i}=this,{description:s,title:n}=t;return this.contentViewModels[r]=new td({graphic:i,...this._compileTitleAndDesc({title:n,description:s})}),t}_compileCustom(t,r){let{graphic:i}=this,{creator:s,destroyer:n}=t;return this.contentViewModels[r]=new t_({graphic:i,creator:s,destroyer:n}),t}_compileTitleAndDesc({title:t,description:r}){let{_fieldInfoMap:i,_sourceLayer:s,graphic:n,formattedAttributes:o,_expressionAttributes:a}=this,{attributes:l}=n,u=o.global;return{title:eC({attributes:l,fieldInfoMap:i,globalAttributes:u,expressionAttributes:a,layer:s,text:t}),description:eC({attributes:l,fieldInfoMap:i,globalAttributes:u,expressionAttributes:a,layer:s,text:r})}}_createFieldsVMParams(t,r){let{_effectivePopupTemplate:i,formattedAttributes:s}=this,n={...s.global,...s.content[r]},o=(t?.fieldInfos||i?.fieldInfos)?.filter(({fieldName:t})=>eg(t)||ek(t)||n.hasOwnProperty(t)),a=i?.expressionInfos,{description:l,title:u}=t;return{attributes:n,expressionInfos:a,fieldInfos:o,...this._compileTitleAndDesc({title:u,description:l})}}_compileFields(t,r){let i=t.clone(),s=new tM(this._createFieldsVMParams(t,r));return this.contentViewModels[r]=s,i.fieldInfos=s.formattedFieldInfos.slice(0),i}_createMediaVMParams(t,r){let{abilities:i,graphic:s,_fieldInfoMap:n,formattedAttributes:o,_effectivePopupTemplate:a,relatedInfos:l,_sourceLayer:u,_expressionAttributes:d}=this,{attributes:h}=s,{description:p,mediaInfos:c,title:f}=t;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:h,layer:u,fieldInfoMap:n,formattedAttributes:{...o.global,...o.content[r]},expressionAttributes:d,mediaInfos:c,popupTemplate:a,relatedInfos:l,...this._compileTitleAndDesc({title:f,description:p})}}_compileMedia(t,r){let i=t.clone(),s=new tK(this._createMediaVMParams(t,r));return i.mediaInfos=s.formattedMediaInfos.slice(0),this.contentViewModels[r]=s,i}_createTextVMParams(t){let{graphic:r,_fieldInfoMap:i,_sourceLayer:s,_expressionAttributes:n}=this;if(t&&t.text){let{attributes:o}=r,a=this.formattedAttributes.global;t.text=eC({attributes:o,fieldInfoMap:i,globalAttributes:a,expressionAttributes:n,layer:s,text:t.text})}return{graphic:r,creator:t.text}}_compileText(t,r){let i=t.clone();return this.contentViewModels[r]=new t_(this._createTextVMParams(i)),i}_compileLastEditInfo(){let{_effectivePopupTemplate:t,_sourceLayer:r,graphic:i}=this;if(!t)return;let{lastEditInfoEnabled:s}=t,n=r?.editFieldsInfo;return s&&n?function(t,r){let{creatorField:i,creationDateField:s,editorField:n,editDateField:o}=t;if(!r)return;let a=r[o];if("number"==typeof a){let t=r[n];return{type:"edit",date:(0,Q.p6)(a,ec),user:t}}let l=r[s];if("number"==typeof l){let t=r[i];return{type:"create",date:(0,Q.p6)(l,ec),user:t}}return null}(n,i.attributes):void 0}_compileTitle(t){let{_fieldInfoMap:r,_sourceLayer:i,graphic:s,_expressionAttributes:n}=this,{attributes:o}=s;return eC({attributes:o,fieldInfoMap:r,globalAttributes:this.formattedAttributes.global,expressionAttributes:n,layer:i,text:t})}async _getTitle(){let{_effectivePopupTemplate:t,graphic:r}=this;return ey(t?.title,{graphic:r})}async _getContent(){let{_effectivePopupTemplate:t,graphic:r}=this;return ey(t?.content,{graphic:r})}async _queryFeature(t){let{_featureAbortController:r,_sourceLayer:i,graphic:s,_effectivePopupTemplate:n,spatialReference:o,map:a,view:l}=this;if(r!==this._featureAbortController||!s)return;await async function({graphic:t,popupTemplate:r,layer:i,spatialReference:s},n){if(!i||!r||("function"==typeof i.load&&await i.load(n),!t.attributes))return;let o=t.attributes[i.objectIdField];if(null==o)return;let a=await r.getRequiredFields(i.fieldsIndex),l=(0,ee.R9)(a,t),u=l?[]:a,d=r.returnGeometry||await async function(t){if(!t.expressionInfos?.length)return!1;let{arcadeUtils:{hasGeometryFunctions:r}}=await (0,er.LC)();return r(t)}(r);if(l&&!d)return;let h=await async function(t,r){let{layer:i,graphic:s,outFields:n,objectIds:o,returnGeometry:a,spatialReference:l}=t,u=o[0];if("number"!=typeof u&&"string"!=typeof u)return ei.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:i,graphic:s,objectId:u,requiredFields:n}),null;if(!i.capabilities?.operations?.supportsQuery)return ei.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:i,graphic:s,requiredFields:n,returnGeometry:a}),null;let d=i.createQuery();return d.objectIds=o,d.outFields=n?.length?n:[i.objectIdField],d.returnGeometry=!!a,d.returnZ=!!a,d.returnM=!!a,d.outSpatialReference=l,(await i.queryFeatures(d,r)).features[0]}({layer:i,graphic:t,outFields:u,objectIds:[o],returnGeometry:d,spatialReference:s},n);h&&(h.geometry&&(t.geometry=h.geometry),h.attributes&&(t.attributes={...t.attributes,...h.attributes}))}({graphic:s,popupTemplate:n,layer:i,spatialReference:o},t);let{content:{value:u},title:{value:d}}=await (0,m.as)({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:h}}=await (0,m.as)({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:rf({expressionInfos:n?.expressionInfos,spatialReference:o,graphic:s,map:a,interceptor:rZ.interceptor,view:l})});r===this._featureAbortController&&s&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...s.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(u)),this._set("title",this._compileTitle(d)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(u)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:r,formattedAttributes:i}){let{_effectivePopupTemplate:s,graphic:n,relatedInfos:o,_sourceLayer:a,_fieldInfoMap:l,_graphicExpressionAttributes:u}=this;i.content[r]=eA({fieldInfos:s?.fieldInfos,graphic:n,attributes:{...u,...t.attributes},layer:a,fieldInfoMap:l,relatedInfos:o})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:r,formattedAttributes:i}){if(t.fieldInfos){let{graphic:s,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;i.content[r]=eA({fieldInfos:t.fieldInfos,graphic:s,attributes:{...l,...t.attributes},layer:o,fieldInfoMap:a,relatedInfos:n})}}_createFormattedAttributes(t){let{_effectivePopupTemplate:r,graphic:i,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this,l={global:eA({fieldInfos:r?.fieldInfos,graphic:i,attributes:a,layer:n,fieldInfoMap:o,relatedInfos:s}),content:[]};return Array.isArray(t)&&t.forEach((t,r)=>{"fields"===t.type&&this._createFieldsFormattedAttributes({contentElement:t,contentElementIndex:r,formattedAttributes:l}),"media"===t.type&&this._createMediaFormattedAttributes({contentElement:t,contentElementIndex:r,formattedAttributes:l})}),l}_checkForRelatedFeatures(t){let{graphic:r,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(r,eI(i),t)}async _queryRelatedInfos(t,r,i){let{relatedInfos:s,_sourceLayer:n}=this;s.clear();let o=(0,y.pC)(n.associatedLayer)?await n.associatedLayer.load(i):n;if(!o)return;let a=r.filter(t=>t&&ek(t.fieldName));if(!a||!a.length)return;r.forEach(t=>this._configureRelatedInfo(t,o));let l=await function({relatedInfos:t,layer:r},i){let s={};return t.forEach((t,n)=>{let{relation:o}=t;if(!o){let t=new h.Z("relation-required","A relation is required on a layer to retrieve related records.");throw tB.error(t),t}let{relatedTableId:a}=o;if("number"!=typeof a){let t=new h.Z("A related table ID is required on a layer to retrieve related records.");throw tB.error(t),t}let l=`${r.url}/${a}`,u=tW.get(l),d=u||(0,tV.default)(l,{query:{f:"json"},signal:i&&i.signal});u||tW.set(l,d),s[n]=d}),(0,m.as)(s)}({relatedInfos:s,layer:o},i);Object.keys(l).forEach(t=>{let r=s.get(t.toString()),i=l[t]?.value;r&&i&&(r.layerInfo=i.data)});let u=await function({graphic:t,relatedInfos:r,layer:i},s){let n={};return r.forEach((r,o)=>{r.layerInfo&&(n[o]=async function(t,r,i,s){let n=i.layerId.toString(),{layerInfo:o,relation:a,relatedFields:l,outStatistics:u,url:d,sourceSpatialReference:h}=r,p=function({originRelationship:t,relationships:r,layerId:i}){let s;return r&&r.some(r=>(`${r.relatedTableId}`===i&&r.id===t.id&&(s=r),!!s)),s}({originRelationship:a,relationships:o.relationships,layerId:n});if(p.relationshipTableId&&p.keyFieldInRelationshipTable){let r=(await function(t,r,i,s){let n=new tq.Z;return n.outFields=["*"],n.relationshipId="number"==typeof r.id?r.id:parseInt(r.id,10),n.objectIds=[t.attributes[i.objectIdField]],i.queryRelatedFeatures(n,s)}(t,p,i,s))[t.attributes[i.objectIdField]];if(!r)return null;let n=r.features.map(t=>t.attributes[o.objectIdField]);if(u?.length>0&&o.supportsStatistics){let t=new tG.Z;t.where=function(t,r,i){let s=0,n=[];for(;s<r.length;)n.push(`${t} IN (${r.slice(s,1e3+s)})`),s+=1e3;return n.join(" OR ")}(o.objectIdField,n),t.outFields=l,t.outStatistics=u,t.sourceSpatialReference=h;let i={features:Promise.resolve(r),statsFeatures:(0,tz.e)(d,t)};return(0,m.as)(i)}}let c=p?.keyField;if(c){let i=(0,ee.H7)(function(t,r){if(null!=t){for(let i of(r=r.toLowerCase(),t))if(i&&i.name.toLowerCase()===r)return i}return null}(o.fields,c)),n=function(t,r){let i=r.toLowerCase();for(let r in t)if(r.toLowerCase()===i)return t[r];return null}(t.attributes,a.keyField),l=i?`${c}=${n}`:`${c}='${n}'`,u=(0,tz.e)(d,new tG.Z({where:l,outFields:r.relatedFields,sourceSpatialReference:h}),s),p=r.outStatistics&&r.outStatistics.length>0&&o.supportsStatistics?(0,tz.e)(d,new tG.Z({where:l,outFields:r.relatedFields,outStatistics:r.outStatistics,sourceSpatialReference:h}),s):null,f={features:u};return p&&(f.statsFeatures=p),(0,m.as)(f)}return null}(t,r,i,s))}),(0,m.as)(n)}({graphic:t,relatedInfos:s,layer:o},i);Object.keys(u).forEach(t=>{!function(t,r){if(!r||!t)return;let{features:i,statsFeatures:s}=t,n=i&&i.value;r.relatedFeatures=n?n.features:[];let o=s&&s.value;r.relatedStatsFeatures=o?o.features:[]}(u[t]?.value,s.get(t.toString()))})}_configureRelatedInfo(t,r){let{relatedInfos:i}=this,s=tH(t.fieldName);if(!s)return;let{layerId:n,fieldName:o}=s;if(!n)return;let a=i.get(n.toString())||function(t,r){let i=function(t,r){if(!r.relationships)return null;let i=null,{relationships:s}=r;return s.some(r=>r.id===parseInt(t,10)&&(i=r,!0)),i}(t,r);if(i)return{url:`${r.url}/${i.relatedTableId}`,sourceSpatialReference:r.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}(n,r);a&&(function({relatedInfo:t,fieldName:r,fieldInfo:i}){if(t.relatedFields.push(r),i.statisticType){let s=new t$.Z({statisticType:i.statisticType,onStatisticField:r,outStatisticFieldName:r});t.outStatistics.push(s)}}({relatedInfo:a,fieldName:o,fieldInfo:t}),this.relatedInfos.set(n,a))}};rA.interceptor=new class{constructor(t,r){this.preLayerQueryCallback=t,this.preRequestCallback=r,this.preLayerQueryCallback||(this.preLayerQueryCallback=t=>{}),this.preRequestCallback||(this.preLayerQueryCallback=t=>{})}}(({query:t,layer:r,method:i})=>{eL({layer:r,method:i,query:t,definitionExpression:`${r.definitionExpression} ${r.serviceDefinitionExpression}`})},({queryPayload:t,layer:r,method:i})=>{eL({layer:r,method:i,query:t,definitionExpression:`${r.definitionExpression} ${r.serviceDefinitionExpression}`})}),(0,o._)([(0,w.Cb)()],rA.prototype,"_error",void 0),(0,o._)([(0,w.Cb)()],rA.prototype,"_featureAbortController",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"_effectivePopupTemplate",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"_fieldInfoMap",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"_sourceLayer",null),(0,o._)([(0,w.Cb)()],rA.prototype,"abilities",void 0),(0,o._)([(0,q.p)("abilities")],rA.prototype,"castAbilities",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"content",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"contentViewModels",void 0),(0,o._)([(0,w.Cb)()],rA.prototype,"description",void 0),(0,o._)([(0,w.Cb)({type:Boolean})],rA.prototype,"defaultPopupTemplateEnabled",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"state",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"formattedAttributes",void 0),(0,o._)([(0,w.Cb)({type:a.Z,value:null})],rA.prototype,"graphic",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"lastEditInfo",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"relatedInfos",void 0),(0,o._)([(0,w.Cb)()],rA.prototype,"spatialReference",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"title",void 0),(0,o._)([(0,w.Cb)()],rA.prototype,"map",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rA.prototype,"waitingForContent",null),(0,o._)([(0,w.Cb)()],rA.prototype,"view",void 0);let rk=rA=rZ=(0,o._)([(0,S.j)("esri.widgets.FeatureViewModel")],rA),rO="esri-feature__content-node",rR="esri-feature__content-element",rL=t=>{let r=class extends t{constructor(){super(...arguments),this.renderNodeContent=t=>(0,tb.Qd)(t)&&!t.destroyed?(0,eq.u)("div",{class:rO,key:t},t.render()):t instanceof HTMLElement?(0,eq.u)("div",{class:rO,key:t,bind:t,afterCreate:this._attachToNode}):(0,tb.o)(t)?(0,eq.u)("div",{class:rO,key:t,bind:t.domNode,afterCreate:this._attachToNode}):null}_attachToNode(t){t.appendChild(this)}};return(0,o._)([(0,S.j)("esri.widgets.Feature.ContentMixin")],r)},rF={title:!0,content:!0,lastEditedInfo:!0},rN="relationship-handles",rj=rV=class extends rL($.Z){constructor(t,r){super(t,r),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...rF},this.viewModel=new rk}initialize(){this.addHandles((0,g.YP)(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),g.nn))}loadDependencies(){return i.e(762).then(i.bind(i,60762))}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...rF,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){let{state:t}=this.viewModel,r=(0,eq.u)("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===t?this.renderError():"loading"===t?this.renderLoading():this.renderContentContainer());return(0,eq.u)("div",{class:this.classes("esri-feature","esri-widget")},r)}setActiveMedia(t,r){return this.viewModel.setActiveMedia(t,r)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}renderError(){let{messagesCommon:t,messages:r,visibleElements:i}=this;return(0,eq.u)("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?(0,eq.u)("div",{key:"error-title",slot:"title"},t.errorMessage):null,(0,eq.u)("div",{key:"error-message",slot:"message"},r.loadingError))}renderLoading(){return(0,eq.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},(0,eq.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}renderContentContainer(){let{visibleElements:t}=this;return t.content?(0,eq.u)("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){let{visibleElements:t,title:r}=this;return t.title?(0,eq.u)(th,{level:this.headingLevel,class:"esri-feature__title",innerHTML:r}):null}renderContent(){let t=this.viewModel.content,r="content";if(!t)return null;if(Array.isArray(t))return t.length?(0,eq.u)("div",{class:rO,key:`${r}-content-elements`},t.map(this.renderContentElement,this)):null;if("string"==typeof t){let t=this._contentWidgets[0];return!t||t.destroyed?null:(0,eq.u)("div",{class:rO,key:`${r}-content`},t.render())}return this.renderNodeContent(t)}renderContentElement(t,r){let{visibleElements:i}=this;if("boolean"!=typeof i.content&&!i.content[t.type])return null;switch(t.type){case"attachments":return this.renderAttachments(r);case"custom":return this.renderCustom(t,r);case"fields":return this.renderFields(r);case"media":return this.renderMedia(r);case"text":return this.renderText(t,r);case"expression":return this.renderExpression(r);case"relationship":return this.renderRelationship(r);default:return null}}renderAttachments(t){let r=this._contentWidgets[t];if(!r||r.destroyed)return null;let{state:i,attachmentInfos:s}=r.viewModel;return"loading"===i||s.length>0?(0,eq.u)("div",{key:this._buildKey("attachments-element",t),class:this.classes(rR)},r.render()):null}renderRelationship(t){let r=this._contentWidgets[t];return r&&!r.destroyed&&this.flowItems?(0,eq.u)("div",{key:this._buildKey("relationship-element",t),class:rR},r.render()):null}renderExpression(t){let r=this._contentWidgets[t];return!r||r.destroyed?null:(0,eq.u)("div",{key:this._buildKey("expression-element",t),class:rR},r.render())}renderCustom(t,r){let{creator:i}=t,s=this._contentWidgets[r];return!s||s.destroyed?null:i?(0,eq.u)("div",{key:this._buildKey("custom-element",r),class:rR},s.render()):null}renderFields(t){let r=this._contentWidgets[t];return!r||r.destroyed?null:(0,eq.u)("div",{key:this._buildKey("fields-element",t),class:rR},r.render())}renderMedia(t){let r=this._contentWidgets[t];return!r||r.destroyed?null:(0,eq.u)("div",{key:this._buildKey("media-element",t),class:rR},r.render())}renderLastEditInfo(){let{visibleElements:t,messages:r}=this,{lastEditInfo:i}=this.viewModel;if(!i||!t.lastEditedInfo)return null;let{date:s,user:n}=i,o="edit"===i.type?n?r.lastEditedByUser:r.lastEdited:n?r.lastCreatedByUser:r.lastCreated,a=(0,rS.n)(o,{date:s,user:n});return(0,eq.u)("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info",rR)},a)}renderText(t,r){let i=t.text,s=this._contentWidgets[r];return!s||s.destroyed?null:i?(0,eq.u)("div",{key:this._buildKey("text-element",r),class:this.classes(rR,"esri-feature__text")},s.render()):null}_buildKey(t,...r){return`${t}__${this.get("viewModel.graphic.uid")||"0"}-${r.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,t.destroyed||t.destroy())}_destroyContentWidgets(){this.removeHandles(rN),this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_addFeatureRelationshipHandles(t){let{flowItems:r,visibleElements:i}=this;this.addHandles([(0,g.on)(()=>t,"select-record",({featureViewModel:t})=>{r&&(t.abilities={relationshipContent:!0},r.push(new rV({flowItems:r,viewModel:t,visibleElements:i})))}),(0,g.on)(()=>t,"show-all-records",()=>{if(!r)return;let{viewModel:i}=t;i.showAllEnabled=!0;let s=new rI({visibleElements:{title:!1,description:!1},viewModel:i});this._addFeatureRelationshipHandles(s),r.push(s)})],rN)}_setupContentWidgets(){this._destroyContentWidgets();let{headingLevel:t,visibleElements:r}=this,i=this.get("viewModel.content"),{contentViewModels:s}=this.viewModel;if(Array.isArray(i))i.forEach((i,n)=>{if("attachments"===i.type&&(this._contentWidgets[n]=new ty({displayType:i.displayType,headingLevel:r.title?t+1:t,viewModel:s[n]})),"fields"===i.type&&(this._contentWidgets[n]=new tT({viewModel:s[n]})),"media"===i.type&&(this._contentWidgets[n]=new ri({viewModel:s[n]})),"text"===i.type&&(this._contentWidgets[n]=new tw({viewModel:s[n]})),"custom"===i.type&&(this._contentWidgets[n]=new tw({viewModel:s[n]})),"expression"===i.type&&(this._contentWidgets[n]=new r_({viewModel:s[n]})),"relationship"===i.type){let t=new rI({viewModel:s[n]});this._addFeatureRelationshipHandles(t),this._contentWidgets[n]=t}},this);else{let t=s[0];t&&!t.destroyed&&(this._contentWidgets[0]=new tw({viewModel:t}))}this.scheduleRender()}};(0,o._)([(0,w.Cb)()],rj.prototype,"graphic",null),(0,o._)([(0,w.Cb)()],rj.prototype,"defaultPopupTemplateEnabled",null),(0,o._)([(0,w.Cb)()],rj.prototype,"flowItems",void 0),(0,o._)([(0,w.Cb)()],rj.prototype,"headingLevel",void 0),(0,o._)([(0,w.Cb)()],rj.prototype,"label",null),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/Feature/t9n/Feature")],rj.prototype,"messages",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/t9n/common")],rj.prototype,"messagesCommon",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/support/t9n/uriUtils")],rj.prototype,"messagesURIUtils",void 0),(0,o._)([(0,w.Cb)()],rj.prototype,"spatialReference",null),(0,o._)([(0,w.Cb)({readOnly:!0})],rj.prototype,"title",null),(0,o._)([(0,w.Cb)()],rj.prototype,"visibleElements",void 0),(0,o._)([(0,q.p)("visibleElements")],rj.prototype,"castVisibleElements",null),(0,o._)([(0,w.Cb)()],rj.prototype,"map",null),(0,o._)([(0,w.Cb)()],rj.prototype,"view",null),(0,o._)([(0,w.Cb)({type:rk})],rj.prototype,"viewModel",void 0);let rD=rj=rV=(0,o._)([(0,S.j)("esri.widgets.Feature")],rj);var rZ,rV,rz,rU=i(88832);let rG=Symbol("anchorHandles"),rq=class extends rU.Z.EventedAccessor{constructor(t){super(t),this[rz]=new A.Z,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[rG].add([(0,g.gx)(()=>(0,y.yw)(this.screenLocationEnabled?this.view:null,t=>[t.size,"3d"===t.type?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),(0,g.YP)(()=>this.screenLocation,(t,r)=>{(0,y.pC)(t)&&(0,y.pC)(r)&&this.emit("view-change")})])}destroy(){this.view=null,this[rG]=(0,y.SC)(this[rG])}get screenLocation(){let{location:t,view:r,screenLocationEnabled:i}=this;return i&&(0,y.pC)(t)&&(0,y.pC)(r)&&r.ready?r.toScreen(t):null}};rz=rG,(0,o._)([(0,w.Cb)()],rq.prototype,"location",void 0),(0,o._)([(0,w.Cb)()],rq.prototype,"screenLocation",null),(0,o._)([(0,w.Cb)()],rq.prototype,"screenLocationEnabled",void 0),(0,o._)([(0,w.Cb)()],rq.prototype,"view",void 0);let r$=rq=(0,o._)([(0,S.j)("esri.widgets.support.AnchorElementViewModel")],rq),rB=class extends r${constructor(t){super(t),this.visible=!1}};(0,o._)([(0,w.Cb)()],rB.prototype,"visible",void 0);let rW=rB=(0,o._)([(0,S.j)("esri.widgets.CompassViewModel")],rB),rH=class extends $.Z{constructor(t,r){super(t,r),this._animationDelay=500,this._animationPromise=null,this.viewModel=new rW}initialize(){this.addHandles((0,g.YP)(()=>this.visible,t=>this._visibleChange(t)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}show(t){let{location:r,promise:i}=t;r&&(this.viewModel.location=r),this.visible=!0,i&&i.catch(()=>{}).then(()=>this.hide())}hide(){this.visible=!1}render(){let{visible:t}=this,{screenLocation:r}=this.viewModel,i=!!r,s=this._getPositionStyles();return(0,eq.u)("div",{class:this.classes("esri-spinner",{"esri-spinner--start":t&&i,"esri-spinner--finish":!t&&i}),styles:s})}_visibleChange(t){if(t)return void(this.viewModel.screenLocationEnabled=!0);let r=(0,m.e4)(this._animationDelay);this._animationPromise=r,r.catch(()=>{}).then(()=>{this._animationPromise===r&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){let{screenLocation:t,view:r}=this.viewModel;if((0,y.Wi)(r)||(0,y.Wi)(t))return{};let{padding:i}=r;return{left:t.x-i.left+"px",top:t.y-i.top+"px"}}};(0,o._)([(0,w.Cb)()],rH.prototype,"location",null),(0,o._)([(0,w.Cb)()],rH.prototype,"view",null),(0,o._)([(0,w.Cb)({type:rW})],rH.prototype,"viewModel",void 0),(0,o._)([(0,w.Cb)()],rH.prototype,"visible",null);let rJ=rH=(0,o._)([(0,S.j)("esri.widgets.Spinner")],rH);var rY=i(77056),rK=i(75737),rX=i(34133),rQ=i(7823),r0=i(41207);i(13364),i(39501),i(57135);var r1=i(5525);function r2(t){return t&&"function"==typeof t.highlight}let r3="esri-icon-zoom-in-magnifying-glass",r5=new rQ.Z({id:"zoom-to-feature",title:"{messages.zoom}",className:r3}),r4=new rQ.Z({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),r9=new rQ.Z({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:r3}),r6=new rQ.Z({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"}),r8=f.Z.getLogger("esri.widgets.Popup.PopupViewModel");function r7(t){let{selectedFeature:r,location:i,view:s}=t;return s?"3d"===s.type?r||i:t.get("selectedFeature.geometry")||i:null}function ie(t){return t?.isAggregate&&"cluster"===t?.sourceLayer?.featureReduction?.type}let it=t=>{let r=class extends t{constructor(...t){super(...t),this.goToOverride=null,this.view=null}callGoTo(t){let{view:r}=this;return this.goToOverride?this.goToOverride(r,t):r.goTo(t.target,t.options)}};return(0,o._)([(0,w.Cb)()],r.prototype,"goToOverride",void 0),(0,o._)([(0,w.Cb)()],r.prototype,"view",void 0),r=(0,o._)([(0,S.j)("esri.widgets.support.GoTo")],r)};var ir=i(59572);let ii=u.Z.ofType({key:"type",defaultKeyValue:"button",base:rX.Z,typeMap:{button:rQ.Z,toggle:r0.Z}}),is=class extends it(r$){constructor(t){super(t),this._handles=new A.Z,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new ii,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new a.Z({symbol:new ir.Z({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(t=>t.waitingForContent)}initialize(){this._handles.add([(0,g.YP)(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),(0,g.YP)(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),(0,g.YP)(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),(0,g.YP)(()=>this.view?.animation?.state,t=>this._animationStateChange(t)),(0,g.YP)(()=>this.location,t=>this._locationChange(t)),(0,g.YP)(()=>this.selectedFeature,t=>this._selectedFeatureChange(t)),(0,g.YP)(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),(0,g.YP)(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),(0,g.YP)(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",t=>(t=>{let{event:r,view:i}=t,{action:s}=r,n=i&&i.popup;if(!s)return Promise.reject(new h.Z("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new h.Z("trigger-action:missing-arguments","view.popup is missing"));let{disabled:o,id:a}=s;if(!a)return Promise.reject(new h.Z("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new h.Z("trigger-action:invalid-action","Action is disabled"));if(a===r5.id)return(async function(t){let{location:r,selectedFeature:i,view:s,zoomFactor:n}=t,o=r7(t);if(!o){let t=new h.Z("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:s});throw r8.error(t),t}let a=s.scale/n,l=t.get("selectedFeature.geometry")||r,u=l&&"point"===l.type&&await async function(t,r){if("3d"!==r?.type||!t||"esri.Graphic"!==t.declaredClass)return!0;let i=r.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(t,{useViewElevation:!0})}catch(t){}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}(i,s);r5.active=!0,r5.disabled=!0;try{await t.zoomTo({target:{target:o,scale:u?a:void 0}})}catch(r){let t=new h.Z("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});r8.error(t)}finally{r5.active=!1,r5.disabled=!1,t.zoomToLocation=null,u&&(t.location=l)}})(n.viewModel).catch(m.H9);if(a===r9.id)return async function(t){let{selectedFeature:r,view:i}=t;if("2d"!==i?.type){let t=new h.Z("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw r8.error(t),t}if(!ie(r)){let t=new h.Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:r});throw r8.error(t),t}let s=r.sourceLayer,n=await i.whenLayerView(s),o=n.createQuery();o.aggregateIds=[r.getObjectId()],r9.active=!0,r9.disabled=!0;let{extent:a}=await n.queryExtent(o);await t.zoomTo({target:a}),r9.active=!1,r9.disabled=!1}(n.viewModel);if(a===r6.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,a===r4.id){n.close();let{selectedFeature:t}=n;if(!t)return Promise.reject(new h.Z(`trigger-action:${r4.id}`,"selectedFeature is required",{selectedFeature:t}));let{sourceLayer:r}=t;return r?r.remove(t):i.graphics.remove(t),Promise.resolve()}return Promise.resolve()})({event:t,view:this.view})),(0,g.gx)(()=>!this.waitingForResult,()=>this._waitingForResultChange(),g.Z_),(0,g.YP)(()=>[this.features,this.view?.map,this.view?.spatialReference],()=>this._updateFeatureVMs()),(0,g.YP)(()=>this.view?.scale,()=>this._viewScaleChange()),(0,g.gx)(()=>!this.visible,()=>this.browseClusterEnabled=!1),(0,g.YP)(()=>this.browseClusterEnabled,t=>t?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){let t=this._get("allActions")||new ii;t.removeAll();let{actions:r,defaultActions:i,defaultPopupTemplateEnabled:s,includeDefaultActions:n,selectedFeature:o}=this,a=n?i.concat(r):r,l=o&&("function"==typeof o.getEffectivePopupTemplate&&o.getEffectivePopupTemplate(s)||o.popupTemplate),u=l&&l.actions,d=l&&l.overwriteActions?u:u?u.concat(a):a;return d&&d.filter(Boolean).forEach(r=>t.add(r)),t}get defaultActions(){let t=this._get("defaultActions")||new ii;return t.removeAll(),t.addMany(ie(this.selectedFeature)?[r9.clone(),r6.clone()]:[r5.clone()]),t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(t){let r=t||[];this._set("features",r);let{pendingPromisesCount:i,promiseCount:s,selectedFeatureIndex:n}=this,o=s&&r.length;o&&i&&-1===n?this.selectedFeatureIndex=0:o&&-1!==n||(this.selectedFeatureIndex=r.length?0:-1)}get location(){return this._get("location")||null}set location(t){let r=this.get("view.spatialReference.isWebMercator");t&&t.get("spatialReference.isWGS84")&&r&&(t=(0,rY.$)(t)),this._set("location",t)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(t){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(t)||!t.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",t),(t=t.slice(0)).forEach(t=>{this._pendingPromises.add(t),t.then(r=>{this._pendingPromises.has(t)&&this._updateFeatures(r),this._updatePendingPromises(t)},()=>this._updatePendingPromises(t))}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){let{features:t,selectedFeatureIndex:r}=this;return -1===r?null:t[r]||null}get selectedFeatureIndex(){let t=this._get("selectedFeatureIndex");return"number"==typeof t?t:-1}set selectedFeatureIndex(t){let{featureCount:r}=this;t=isNaN(t)||t<-1||!r?-1:(t+r)%r,this.activeFeature=null,this._set("selectedFeatureIndex",t)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){let{view:t}=this,r=r7(this);return r?this.callGoTo({target:{target:r,scale:t.scale}}):Promise.reject(new h.Z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:r,view:t}))}zoomTo(t){return this.callGoTo(t)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(t,r){let{view:i}=this;if(!i||!t)throw new h.Z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:t,view:i});return i.fetchPopupFeatures(t,{event:r&&r.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:r&&r.signal})}open(t){let r={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...t,visible:!0},{fetchFeatures:i}=r;for(let t of(delete r.fetchFeatures,i&&this._setFetchFeaturesPromises(r.location),["actionsMenuOpen","collapsed","featureMenuOpen"]))delete r[t];this.set(r)}triggerAction(t){let r=this.allActions.getItemAt(t);r&&!r.disabled&&this.emit("trigger-action",{action:r})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){(function(t){let r=t.features.filter(t=>ie(t));r.length&&(t.features=r)})(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){let{view:t,selectedFeature:r}=this;"2d"===t?.type?ie(r)?(await async function(t){let{selectedFeature:r,view:i}=t,s=r.sourceLayer,n=await i.whenLayerView(s),o=n.createQuery();o.aggregateIds=[r.getObjectId()];let{extent:a}=await n.queryExtent(o);t.selectedClusterBoundaryFeature.geometry=a,i.graphics.add(t.selectedClusterBoundaryFeature)}(this),await async function(t){let{selectedFeature:r,view:i}=t,s=r.sourceLayer,n=await i.whenLayerView(s),o=n.createQuery();o.aggregateIds=[r.getObjectId()],r6.active=!0,r6.disabled=!0;let{features:a}=await n.queryFeatures(o);r6.active=!1,r6.disabled=!1,i.popup.open({features:[r].concat(a),featureMenuOpen:!0})}(this)):f.Z.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",r):f.Z.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",r)}_animationStateChange(t){this.zoomToLocation||(r5.disabled="waiting-for-target"===t)}_clearBrowsedClusterGraphics(){let t=this.view?.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(ie(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(t){let{selectedFeature:r,updateLocationEnabled:i}=this;i&&t&&(!r||r.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){let{features:t,featureCount:r,featurePage:i,featuresPerPage:s,featureViewModels:n}=this;if(null===i)return;let o=((i-1)*s+r)%r;n.slice(o,o+s).forEach((r,i)=>{r&&!r.graphic&&(r.graphic=t[o+i])})}async _selectedFeatureChange(t){if(!t)return;let{location:r,updateLocationEnabled:s,view:n}=this;if(this.browseClusterEnabled){if(this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),ie(t))return;return t.symbol=await async function(t,r){if(!t)return;let s=t.sourceLayer,n=((0,y.pC)(r)&&r.useSourceLayer?s:t.layer)??s,o=function t(r){return r&&"opacity"in r?r.opacity*t(r.parent):1}(n);if((0,y.pC)(t.symbol)&&(!(0,y.pC)(r)||!0!==r.ignoreGraphicSymbol)){let i="web-style"===t.symbol.type?await t.symbol.fetchSymbol({...r,cache:(0,y.pC)(r)?r.webStyleCache:null}):t.symbol.clone();return(0,tk.tb)(i,null,o),i}let a=((0,y.pC)(r)?r.renderer:null)??(n&&"renderer"in n?n.renderer:null),l=a&&"getSymbolAsync"in a?await a.getSymbolAsync(t,r):null;if(!l)return;if(l="web-style"===l.type?await l.fetchSymbol({...r,cache:(0,y.pC)(r)?r.webStyleCache:null}):l.clone(),!(a&&"visualVariables"in a&&a.visualVariables&&a.visualVariables.length))return(0,tk.tb)(l,null,o),l;if("arcadeRequiredForVisualVariables"in a&&a.arcadeRequiredForVisualVariables&&((0,y.Wi)(r)||(0,y.Wi)(r.arcade))){let t={...(0,y.Wg)(r)};t.arcade=await (0,er.LC)(),r=t}let u=await Promise.resolve().then(i.bind(i,43730)),d=[],h=[],p=[],c=[];for(let t of a.visualVariables)switch(t.type){case"color":d.push(t);break;case"opacity":h.push(t);break;case"rotation":c.push(t);break;case"size":t.target||p.push(t)}let f=!!d.length&&d[d.length-1],m=f?u.getColor(f,t,r):null,g=!!h.length&&h[h.length-1],_=g?u.getOpacity(g,t,r):null;if(null!=o&&(_=null!=_?_*o:o),(0,tk.tb)(l,m,_),p.length){let i=u.getAllSizes(p,t,r);await (0,tk.e3)(l,i)}for(let i of c)(0,tk.BR)(l,u.getRotationAngle(i,t,r),i.axis);return l}(t),this._selectedClusterFeature=t,void n.graphics.add(this._selectedClusterFeature)}(s||!r)&&t.geometry?this.location=(0,y.Wg)(this._getPointFromGeometry(t.geometry)):s&&!t.geometry&&this.centerAtLocation().then(()=>{this.location=n.center.clone()})}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(t){return this._fetchFeaturesWithController(this._getScreenPoint(t||this.location)).then(t=>{let{clientOnlyGraphics:r,promisesPerLayerView:i}=t,s=Promise.resolve(r),n=i.map(t=>t.promise);this.promises=[s,...n]})}_destroyFeatureVMs(){this.featureViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){let{selectedFeature:t,features:r,featureViewModels:i}=this;if(ie(t)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!r||!r.length)return;let s=i.slice(0),n=[];r.forEach((r,i)=>{if(!r)return;let o=null;if(s.some((t,i)=>(t&&t.graphic===r&&(o=t,s.splice(i,1)),!!o)),o)n[i]=o;else{let s=new rk({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:this.view?.spatialReference,graphic:r===t?r:null,map:this.view?.map,view:this.view});n[i]=s}}),s.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("featureViewModels",n)}_getScreenPoint(t){let{view:r}=this;return r&&t&&"function"==typeof r.toScreen?r.toScreen(t):null}_autoOpenEnabledChange(){let t="auto-fetch-features",{_handles:r,autoOpenEnabled:i}=this;if(r.remove(t),i&&this.view){let i=this.view.on("click",t=>{"mouse"===t.pointerType&&0!==t.button||this._fetchFeaturesAndOpen(t)},r1.f.WIDGET);r.add(i,t)}}_cancelFetchingFeatures(){let t=this._fetchFeaturesController;t&&t.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(t,r){this._cancelFetchingFeatures();let i=new AbortController,{signal:s}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");let n=this.fetchFeatures(t,{signal:s,event:r});return n.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),n}_fetchFeaturesAndOpen(t){let{screenPoint:r,mapPoint:i}=t,{view:s}=this;this._fetchFeaturesWithController(r,t).then(t=>{let{clientOnlyGraphics:r,promisesPerLayerView:n,location:o}=t,a=[Promise.resolve(r),...n.map(t=>t.promise)];return s.popup.open({location:o||i,promises:a}),t})}_updatePendingPromises(t){t&&this._pendingPromises.has(t)&&(this._pendingPromises.delete(t),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(t){return(0,y.Wi)(t)?null:"point"===t.type?t:"extent"===t.type?t.center:"polygon"===t.type?t.centroid:"multipoint"===t.type||"polyline"===t.type?t.extent?.center:null}async _getLayerView(t,r){return await t.when(),t.whenLayerView(r)}_getHighlightLayer(t){let{layer:r,sourceLayer:i}=t;return i&&"layer"in i&&i.layer?i.layer:"map-notes"===i?.type||"subtype-group"===i?.type?i:r}_getHighlightTarget(t,r){let i="imagery"===r.type?void 0:"objectIdField"in r?r.objectIdField||"OBJECTID":null,s=t.attributes;return s&&i&&s[i]||t}async _highlightActiveFeature(){let t="highlight-active-feature";this._handles.remove(t);let{highlightEnabled:r,view:i,activeFeature:s,visible:n}=this;if(!(s&&i&&r&&n))return;let o=this._getHighlightLayer(s);if(!(o&&o instanceof rK.Z))return;let a=this._getLayerView(i,o);this._highlightActiveFeaturePromise=a;let l=await a;if(!(l&&r2(l)&&this._highlightActiveFeaturePromise===a&&this.activeFeature&&this.highlightEnabled))return;let u=l.highlight(this._getHighlightTarget(s,o));this._handles.add(u,t)}async _highlightSelectedFeature(){let t="highlight-selected-feature";this._handles.remove(t);let{selectedFeature:r,highlightEnabled:i,view:s,visible:n}=this;if(!(r&&s&&i&&n))return;let o=this._getHighlightLayer(r);if(!(o&&o instanceof rK.Z))return;let a=this._getLayerView(s,o);this._highlightSelectedFeaturePromise=a;let l=await a;if(!(l&&r2(l)&&this._highlightSelectedFeaturePromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;let u=l.highlight(this._getHighlightTarget(r,o));this._handles.add(u,t)}_updateFeatures(t){let{features:r}=this;if(!t||!t.length)return;if(!r.length)return void(this.features=t);let i=t.filter(t=>!r.includes(t));this.features=r.concat(i)}};(0,o._)([(0,w.Cb)()],is.prototype,"featurePage",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"isLoadingFeature",null),(0,o._)([(0,w.Cb)({type:ii})],is.prototype,"actions",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"active",null),(0,o._)([(0,w.Cb)()],is.prototype,"activeFeature",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"allActions",null),(0,o._)([(0,w.Cb)({type:Boolean})],is.prototype,"defaultPopupTemplateEnabled",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"autoCloseEnabled",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"autoOpenEnabled",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"browseClusterEnabled",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"content",void 0),(0,o._)([(0,w.Cb)({type:ii,readOnly:!0})],is.prototype,"defaultActions",null),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"featureCount",null),(0,o._)([(0,w.Cb)()],is.prototype,"features",null),(0,o._)([(0,w.Cb)()],is.prototype,"featuresPerPage",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"featureViewModelAbilities",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"featureViewModels",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"highlightEnabled",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"includeDefaultActions",void 0),(0,o._)([(0,w.Cb)({type:M.Z})],is.prototype,"location",null),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"pendingPromisesCount",null),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"selectedClusterBoundaryFeature",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"waitingForResult",null),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"promiseCount",null),(0,o._)([(0,w.Cb)()],is.prototype,"promises",null),(0,o._)([(0,w.Cb)({value:null,readOnly:!0})],is.prototype,"selectedFeature",null),(0,o._)([(0,w.Cb)({value:-1})],is.prototype,"selectedFeatureIndex",null),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"selectedFeatureViewModel",null),(0,o._)([(0,w.Cb)({readOnly:!0})],is.prototype,"state",null),(0,o._)([(0,w.Cb)()],is.prototype,"title",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"updateLocationEnabled",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"view",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"visible",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"zoomFactor",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"zoomToLocation",void 0),(0,o._)([(0,w.Cb)()],is.prototype,"centerAtLocation",null);let io=is=(0,o._)([(0,S.j)("esri.widgets.Popup.PopupViewModel")],is);var ia=i(16333);let il="selected-index",iu="popup-spinner",id="calcite-theme-light",ih="calcite-theme-dark",ip="esri-icon-left-triangle-arrow",ic="esri-icon-right-triangle-arrow",iy="esri-icon-loading-indicator",im="esri-rotating",ig="esri-popup--shadow",i_="esri-popup__header-container",ib="esri-popup__button",iv="esri-popup__icon",iw={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};function iC(t,r){return void 0===r?`esri-popup__${t}`:`esri-popup__${t}-${r}`}let iS={closeButton:!0,featureNavigation:!0},ix=class extends rL($.Z){constructor(t,r){super(t,r),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new A.Z,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([t])=>{t?.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=(0,G.P)(()=>this._displaySpinner(),0),this._exitRelatedRecordsActions=new WeakMap,this._flowItems=new u.Z,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new io,this.visibleElements={...iS},this._addSelectedFeatureIndexHandle(),this.addHandles([(0,g.YP)(()=>this.viewModel?.screenLocation,()=>this._positionContainer()),(0,g.YP)(()=>[this.viewModel?.active,this.dockEnabled],()=>this._toggleScreenLocationEnabled()),(0,g.YP)(()=>this.viewModel?.screenLocation,(t,r)=>{!!t!=!!r&&this.reposition()}),(0,g.YP)(()=>[this.viewModel?.view?.padding,this.viewModel?.view?.size,this.viewModel?.active,this.viewModel?.location,this.alignment],()=>this.reposition()),(0,g.YP)(()=>this.spinnerEnabled,t=>this._spinnerEnabledChange(t)),(0,g.YP)(()=>this.viewModel?.view?.size,(t,r)=>this._updateDockEnabledForViewSize(t,r)),(0,g.YP)(()=>this.viewModel?.view,(t,r)=>this._viewChange(t,r)),(0,g.YP)(()=>this.viewModel?.view?.ready,(t,r)=>this._viewReadyChange(t,r)),(0,g.YP)(()=>[this.viewModel?.waitingForResult,this.viewModel?.location],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),(0,g.YP)(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),(0,g.YP)(()=>[this.selectedFeatureWidget?.viewModel?.title,this.selectedFeatureWidget?.viewModel?.state],()=>this._setTitleFromFeatureWidget()),(0,g.YP)(()=>[this.selectedFeatureWidget?.viewModel?.content,this.selectedFeatureWidget?.viewModel?.state],()=>this._setContentFromFeatureWidget()),(0,g.gx)(()=>!this.collapsed,()=>{"xsmall"===this.viewModel?.view?.widthBreakpoint&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),(0,g.on)(()=>this.viewModel?.allActions,"change",()=>this._watchActions()),(0,g.YP)(()=>this.viewModel?.allActions,()=>this._watchActions(),g.nn),(0,g.YP)(()=>this.viewModel?.featureViewModels,()=>this._featureMenuViewportScrollTop()),(0,g.on)(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),(0,g.YP)(()=>[this._activeFlowItemWidget?.viewModel?.state,this._activeFlowItemWidget?.viewModel?.title],()=>this.scheduleRender())])}loadDependencies(){return Promise.all([i.e(8421).then(i.bind(i,88421)),Promise.all([i.e(1996),i.e(5444),i.e(2168)]).then(i.bind(i,32168)),Promise.all([i.e(5444),i.e(9826)]).then(i.bind(i,28283)),Promise.all([i.e(1996),i.e(9198)]).then(i.bind(i,69198)),i.e(4918).then(i.bind(i,54918))])}destroy(){this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._handles?.destroy(),this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver?.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){let{selectedFeatureWidget:t,viewModel:r}=this;if(!t)return!!r?.content;let i=t.viewModel;if(i?.waitingForContent||"error"===i?.state)return!0;let s=i?.content;return Array.isArray(s)?!!s.length:!!s}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){let{_flowItems:t}=this;return t.getItemAt(t.length-1)||null}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}set actionsMenuOpen(t){this._set("actionsMenuOpen",!!t)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(t){this.viewModel.autoCloseEnabled=t}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(t){this.viewModel.autoOpenEnabled=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get content(){return this.viewModel.content}set content(t){this.viewModel.content=t}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||iw}set dockOptions(t){let r={...iw},i=this.get("viewModel.view.breakpoints"),s={};i&&(s.width=i.xsmall,s.height=i.xsmall);let n={...r,...t},o={...r.breakpoint,...s},{breakpoint:a}=n;!0===a?n.breakpoint=o:"object"==typeof a&&(n.breakpoint={...o,...a}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(t){this.viewModel.features=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get promises(){return this.viewModel.promises}set promises(t){this.viewModel.promises=t}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(t){this.viewModel.selectedFeatureIndex=t}get selectedFeatureWidget(){let{_feature:t,visibleElements:r,headingLevel:i,_flowItems:s}=this,{selectedFeatureViewModel:n}=this.viewModel,o={...r,title:!1};return n?(t?(t.viewModel=n,t.visibleElements=o):this._feature=new rD({flowItems:s,headingLevel:i+1,viewModel:n,visibleElements:o}),this._feature):null}get title(){return this.viewModel.title}set title(t){this.viewModel.title=t}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(t){this.viewModel.updateLocationEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}castVisibleElements(t){return{...iS,...t}}blur(){let{active:t}=this.viewModel;t||f.Z.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(t,r){return this.viewModel.fetchFeatures(t,r)}focus(){let{active:t}=this.viewModel;t||f.Z.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(t){this._handles.remove(il);let r=!!t&&!!t.featureMenuOpen,i=!!t&&!!t.actionsMenuOpen,s={collapsed:!!t&&!!t.collapsed,actionsMenuOpen:i,featureMenuOpen:r};"xsmall"===this.viewModel?.view?.widthBreakpoint&&(s.collapsed=!0),this.set(s),this.viewModel.open(t),this._shouldFocus(t),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(t){return this.viewModel.triggerAction(t)}render(){let{actionsMenuOpen:t,dockEnabled:r,featureMenuVisible:i,dividedActions:s,currentAlignment:n,currentDockPosition:o}=this,{active:a}=this.viewModel,{menuActions:l}=s,u=a&&l.length>1&&t,d=this.selectedFeature?.layer?.title,h=this.selectedFeature?.layer?.id;return(0,eq.u)("div",{class:this.classes("esri-popup",{"esri-popup--aligned-top-center":"top-center"===n,"esri-popup--aligned-bottom-center":"bottom-center"===n,"esri-popup--aligned-top-left":"top-left"===n,"esri-popup--aligned-bottom-left":"bottom-left"===n,"esri-popup--aligned-top-right":"top-right"===n,"esri-popup--aligned-bottom-right":"bottom-right"===n,"esri-popup--is-docked":a&&r,[ig]:a&&!r,"esri-popup--is-docked-top-left":"top-left"===o,"esri-popup--is-docked-top-center":"top-center"===o,"esri-popup--is-docked-top-right":"top-right"===o,"esri-popup--is-docked-bottom-left":"bottom-left"===o,"esri-popup--is-docked-bottom-center":"bottom-center"===o,"esri-popup--is-docked-bottom-right":"bottom-right"===o,"esri-popup--feature-menu-open":i,"esri-popup--actions-menu-open":u}),role:"presentation","data-layer-title":d,"data-layer-id":h,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},a?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return(0,eq.u)("span",{"aria-hidden":"true",class:this.classes(iv,iy,im)})}renderNavigationLoading(){let{messagesCommon:t}=this;return this.viewModel.pendingPromisesCount?(0,eq.u)("div",{key:iC("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":t.loading,title:t.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){let t=(0,eU.dZ)(this.container);return(0,eq.u)("span",{"aria-hidden":"true",class:this.classes(iv,{[ic]:t,"esri-popup__pagination-previous-icon--rtl":t,[ip]:!t,"esri-popup__pagination-previous-icon":!t})})}renderPreviousButton(){let{messages:t}=this;return(0,eq.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(ib,"esri-popup__pagination-previous"),"aria-label":t.previous,title:t.previous},this.renderPreviousIcon())}renderNextIcon(){let t=(0,eU.dZ)(this.container);return(0,eq.u)("span",{"aria-hidden":"true",class:this.classes(iv,{[ip]:t,"esri-popup__pagination-next-icon--rtl":t,[ic]:!t,"esri-popup__pagination-next-icon":!t})})}renderNextButton(){let{messages:t}=this;return(0,eq.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(ib,"esri-popup__pagination-next"),"aria-label":t.next,title:t.next},this.renderNextIcon())}renderFeatureMenuButton(){let{featureMenuOpen:t,featureMenuId:r,messagesCommon:i}=this,{featureCount:s,selectedFeatureIndex:n}=this.viewModel;return(0,eq.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(ib,"esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":r,"aria-expanded":t.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(s,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){let{dockEnabled:t}=this,r=this._wouldDockTo();return(0,eq.u)("span",{"aria-hidden":"true",class:this.classes({"esri-icon-minimize":t,"esri-popup__icon--dock-icon":!t,"esri-icon-dock-right":!t&&("top-right"===r||"bottom-right"===r),"esri-icon-dock-left":!t&&("top-left"===r||"bottom-left"===r),"esri-icon-maximize":!t&&"top-center"===r,"esri-icon-dock-bottom":!t&&"bottom-center"===r},iv)})}renderDockButton(){let{dockEnabled:t,messages:r}=this,i=this.viewModel?.view?.widthBreakpoint,s=t?r.undock:r.dock;return"xsmall"!==i&&this.dockOptions?.buttonEnabled?(0,eq.u)("div",{role:"button","aria-label":s,title:s,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(ib,"esri-popup__button--dock")},this.renderDockIcon()):null}renderTitle(){let{title:t}=this.viewModel,{titleId:r,collapsible:i,contentCollapsed:s,messagesCommon:n}=this,o={"esri-popup__header-container--button":i},a=(0,eq.u)(th,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:t}),l=i?(0,eq.u)("button",{key:`${t}--collapsible`,id:r,title:s?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(i_,o),"aria-expanded":s?"false":"true",onclick:this._toggleCollapsed,type:"button"},a,(0,eq.u)("calcite-icon",{class:"esri-popup__collapse-icon",key:"collapse-icon",icon:s?"chevron-down":"chevron-up",scale:"m"})):(0,eq.u)("div",{key:t,id:r,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(i_,o)},a);return t?l:null}renderCloseIcon(){return(0,eq.u)("span",{"aria-hidden":"true",class:this.classes(iv,"esri-icon-close")})}renderCloseButton(){let{visibleElements:t,messagesCommon:r}=this;return t.closeButton?(0,eq.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:ib,"aria-label":r.close,title:r.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return(0,eq.u)("header",{class:"esri-popup__header"},this.renderTitle(),(0,eq.u)("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){let{contentId:t,hasContent:r,contentCollapsed:i,_flowItems:s,messagesCommon:n}=this,{content:o}=this.viewModel,a=s.toArray(),l={"esri-content--has-flows":!!a.length};return r&&!i?(0,eq.u)("div",{key:o,enterAnimation:this._createFeatureUpdatedAnimation(),id:t,class:this.classes("esri-popup__content",l)},(0,eq.u)("calcite-flow",{bind:this,onCalciteFlowItemBack:this._handleBackClick},(0,eq.u)("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode","intl-back":n.back,afterCreate:eU.Yo,key:"root-flow-item"},this.renderContent()),a.map(t=>this.renderFlowItem(t))),a.map(t=>this.renderFlowItemTooltip(t))):null}renderFlowItem(t){let{messages:r,messagesCommon:i}=this,s=t3();return(0,eq.u)("calcite-flow-item",{class:this.classes({[ih]:!s,[id]:s}),heading:t.title,"intl-back":i.back,description:this._getFlowItemDescription(t),key:`flow-item-${t.viewModel.uid}`},(0,eq.u)("calcite-action",{class:"esri-popup__action--exit",icon:"move-up",label:r?.exitRelatedRecords,text:r?.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:r=>this._storeExitRelatedRecordsAction(t,r),onclick:this._destroyFlowItemWidgets}),(0,eq.u)("div",{class:this.classes("esri-content__flow-item",{[ih]:s,[id]:!s})},t.render()))}renderFlowItemTooltip(t){let{messages:r,_exitRelatedRecordsActions:i}=this,s=t3();return(0,eq.u)("calcite-tooltip",{class:this.classes({[ih]:!s,[id]:s}),key:`exit-related-records-tooltip-${t.viewModel.uid}`,label:r?.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:i.get(t),placement:"top"},r?.exitRelatedRecords)}renderActionsMenuButton(){let{actionsMenuId:t,actionsMenuButtonId:r,actionsMenuOpen:i,dividedActions:s,messagesCommon:n}=this,o=i?n.close:n.open,{menuActions:a}=s;return a.length?(0,eq.u)("div",{key:iC("actions-menu-button"),class:this.classes(ib,"esri-popup__actions-menu-button"),role:"button",id:r,"aria-haspopup":"true","aria-controls":i?t:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},(0,eq.u)("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null}renderMenuActions(){let{actionsMenuId:t,actionsMenuButtonId:r,actionsMenuOpen:i,dividedActions:s}=this,{menuActions:n}=s;return n.length&&i?(0,eq.u)("ul",{id:t,role:"menu","aria-labelledby":r,key:iC("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(t=>this.renderAction({action:t,type:"menu-item"}))):null}renderInlineActions(){let{inlineActions:t}=this.dividedActions;return!!t.length&&t.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){let{inlineActions:t,menuActions:r}=this.dividedActions,i=!!t.length,s=!!r.length;return i||s?(0,eq.u)("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":s.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?(0,eq.u)("section",{key:iC("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null}renderFooter(){let{featureNavigationVisible:t,dividedActions:r}=this,{inlineActions:i,menuActions:s}=r,n=!!i.length,o={"esri-popup__footer--has-pagination":t,"esri-popup__footer--has-actions":n,"esri-popup__footer--has-actions-menu":!!s.length};return t||n?(0,eq.u)("div",{key:iC("feature-buttons"),class:this.classes("esri-popup__footer",o)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){let{messages:t}=this,{featureViewModels:r,isLoadingFeature:i}=this.viewModel,s=(0,rS.n)(t.selectedFeatures,{total:r.length});return(0,eq.u)("section",{key:iC("menu"),class:"esri-popup__feature-menu"},(0,eq.u)("strong",{class:"esri-popup__feature-menu-header"},s),(0,eq.u)("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:eU.Yo},this.renderFeatureMenu(),(0,eq.u)("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?(0,eq.u)("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:(0,eq.u)("div",{key:iC("pointer"),class:"esri-popup__pointer",role:"presentation"},(0,eq.u)("div",{class:this.classes("esri-popup__pointer-direction",ig)}))}renderMainContainer(){let{dockEnabled:t,currentAlignment:r,currentDockPosition:i,titleId:s,contentId:n,collapsible:o,hasContent:a,contentCollapsed:l,visibleElements:u}=this,{title:d}=this.viewModel,h="bottom-left"===r||"bottom-center"===r||"bottom-right"===r||"top-left"===i||"top-center"===i||"top-right"===i,p="top-left"===r||"top-center"===r||"top-right"===r||"bottom-left"===i||"bottom-center"===i||"bottom-right"===i;return(0,eq.u)("div",{class:this.classes("esri-popup__main-container","esri-widget",{[ig]:t,"esri-popup--is-collapsible":o,"esri-popup--is-collapsed":l}),tabIndex:u.closeButton?null:-1,role:"dialog","aria-labelledby":d?s:"","aria-describedby":a&&!l?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),p?this.renderFooter():null,p?this.renderFeatureMenuContainer():null)}renderContent(){let t=this.viewModel?.content;return t?"string"==typeof t?(0,eq.u)("div",{class:rO,key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(t){return(0,eq.u)("span",{key:"text",class:"esri-popup__action-text"},t)}renderActionIcon(t){let r=this._getActionClass(t),i=this._getActionImage(t),s={[iy]:t.active,[im]:t.active,[iv]:!!r,"esri-popup__action-image":!t.active&&!!i};return r&&(s[r]=!t.active),(0,eq.u)("span",{key:"icon","aria-hidden":"true",class:this.classes(iv,s),styles:this._getIconStyles(i)})}renderAction(t){let{action:r,type:i}=t,s=this._getActionTitle(r),n={"esri-popup__action":"toggle"!==r.type,"esri-popup__action-toggle":"toggle"===r.type,"esri-popup__action-toggle--on":"toggle"===r.type&&r.value,"esri-popup__button--disabled":r.disabled},o=[this.renderActionIcon(r),this.renderActionText(s)],a="menu-item"===i?(0,eq.u)("li",{key:r.uid,role:"menuitem",tabIndex:0,title:s,"aria-label":s,class:this.classes(ib,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":r.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):(0,eq.u)("div",{key:r.uid,role:"button",tabIndex:0,title:s,"aria-label":s,class:this.classes(ib,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":r.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return r.visible?a:null}renderFeatureMenuItem(t,r){let{messages:i,messagesCommon:s}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:o}=this.viewModel,a=t===o,l=a?(0,eq.u)("span",{key:iC(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:"esri-icon-check-mark"}):null,u=(0,eq.u)("span",{innerHTML:t.title||s.untitled});return(0,eq.u)("li",{role:"menuitem",tabIndex:-1,key:iC(`feature-menu-feature-${n}`),class:this.classes({"esri-popup__feature-menu-item--selected":a},"esri-popup__feature-menu-item"),bind:this,"data-feature-index":r,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},(0,eq.u)("span",{class:"esri-popup__feature-menu-title"},u,l))}renderFeatureMenu(){let{featureMenuId:t}=this,{featureViewModels:r}=this.viewModel;return r.length>1?(0,eq.u)("ol",{class:"esri-popup__feature-menu-list",id:t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},r.filter(t=>!!t.graphic).map((t,r)=>this.renderFeatureMenuItem(t,r))):null}_storeExitRelatedRecordsAction(t,r){this._exitRelatedRecordsActions.set(t,r),this.scheduleRender()}_getFlowItemDescription(t){return"featureCountDescription"in t?t.featureCountDescription:t.viewModel.description}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(t=>{"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t.viewModel=null,t.destroy()})}_handleBackClick(){let t=this._flowItems.pop();this._exitRelatedRecordsActions.delete(t),"showAllEnabled"in t.viewModel&&(t.viewModel.showAllEnabled=!1),t&&(t.viewModel=null,t.destroy())}_getActionTitle(t){let{messages:r,selectedFeature:i,messagesCommon:s}=this,{id:n}=t,o=i?.attributes,a="zoom-to-feature"===n?(0,rS.n)(t.title,{messages:r}):"remove-selected-feature"===n?(0,rS.n)(t.title,{messages:s}):"zoom-to-clustered-features"===n||"browse-clustered-features"===n?(0,rS.n)(t.title,{messages:r}):t.title;return a&&o?(0,rS.n)(a,o):a}_getActionClass(t){let{selectedFeature:r}=this,i=r?.attributes,{className:s,image:n}=t,o=n||s?s:"esri-icon-default-action";return o&&i?(0,rS.n)(o,i):o}_getActionImage(t){let{selectedFeature:r}=this,i=r?.attributes,{image:s}=t;return s&&i?(0,rS.n)(s,i):s}_createFeatureUpdatedAnimation(){return(0,eU.vU)("enter","esri-popup--feature-updated")}_getInlineActionCount(){let{maxInlineActions:t,featureNavigationVisible:r}=this;if("number"!=typeof t)return null;let i=Math.round(t);return Math.max(r?i-1:i,0)}_watchActions(){let{allActions:t}=this.viewModel;this.notifyChange("dividedActions");let r="actions";this._handles.remove(r),t&&t.forEach(t=>{this._handles.add((0,g.YP)(()=>[t.uid,t.active,t.className,t.disabled,t.id,t.title,t.image,t.visible],()=>this.scheduleRender()),r)})}_divideActions(){let{allActions:t}=this.viewModel,r=t.filter(t=>t.visible),i=this._getInlineActionCount(),s=null===i,n=0===i;return{inlineActions:s?r.slice(0):n?new u.Z:r.slice(0,i),menuActions:s?new u.Z:n?r.slice(0):r.slice(i)}}_featureMenuOpenChanged(t){t?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(t){t?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){let{selectedFeatureWidget:t,messagesCommon:r}=this;t&&(this.viewModel.title="error"===t.viewModel?.state?r.errorMessage:t.viewModel?.title||"")}_setContentFromFeatureWidget(){let{selectedFeatureWidget:t}=this;t&&(this.viewModel.content=t)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(t){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(t),this._featureMenuIntersectionObserverNode=t}_handleFeatureMenuKeyup(t){"Escape"===(0,U.kK)(t)&&(t.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(t){"Escape"===(0,U.kK)(t)&&(t.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(t){let{viewModel:r}=this,i=t.currentTarget["data-feature-index"];r.activeFeature=r.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(t){let r=(0,U.kK)(t),{_featureMenuNode:i}=this,s=t.currentTarget["data-feature-index"];if(!i)return;let n=i.querySelectorAll("li"),o=n.length;"ArrowUp"!==r?"ArrowDown"!==r?"Home"!==r?"End"!==r||(t.stopPropagation(),n[n.length-1].focus()):(t.stopPropagation(),n[0].focus()):(t.stopPropagation(),n[(s+1+o)%o].focus()):(t.stopPropagation(),n[(s-1+o)%o].focus())}_handleActionMenuItemKeyup(t){let r=(0,U.kK)(t),{_actionsMenuNode:i}=this,s=t.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,o=n.findIndex(t=>t.uid===s);if(!i)return;let a=i.querySelectorAll("li"),l=a.length;"ArrowUp"!==r?"ArrowDown"!==r?"Home"!==r?"End"!==r||(t.stopPropagation(),a[a.length-1].focus()):(t.stopPropagation(),a[0].focus()):(t.stopPropagation(),a[(o+1+l)%l].focus()):(t.stopPropagation(),a[(o-1+l)%l].focus())}_handleMainKeyup(t){let r=(0,U.kK)(t);"ArrowLeft"===r&&(t.stopPropagation(),this.previous()),"ArrowRight"===r&&(t.stopPropagation(),this.next())}_spinnerEnabledChange(t){if(this._destroySpinner(),!t)return;let r=this.get("viewModel.view");this._createSpinner(r)}_hideSpinner(){let{_spinner:t}=this;t&&(t.location=null,t.hide())}_displaySpinner(){let{_spinner:t}=this;if(!t)return;let{location:r,waitingForResult:i}=this.viewModel;i?t.show({location:r}):t.hide()}_getIconStyles(t){return{"background-image":t?`url(${t})`:""}}async _shouldFocus(t){t.shouldFocus&&(await (0,g.N1)(()=>!0===this.viewModel?.active),this.focus())}_addSelectedFeatureIndexHandle(){let t=(0,g.YP)(()=>this.viewModel?.selectedFeatureIndex,(t,r)=>this._selectedFeatureIndexUpdated(t,r));this._handles.add(t,il)}_selectedFeatureIndexUpdated(t,r){let{featureCount:i}=this;i&&t!==r&&-1!==t&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){let{_feature:t}=this;t&&(t.viewModel=null,t&&!t.destroyed&&t.destroy()),this._feature=null}_isScreenLocationWithinView(t,r){return t.x>-1&&t.y>-1&&t.x<=r.width&&t.y<=r.height}_isOutsideView(t){let{popupHeight:r,popupWidth:i,screenLocation:s,side:n,view:o}=t;if(isNaN(i)||isNaN(r)||!o||!s)return!1;let a=o.padding;return"right"===n&&s.x+i/2>o.width-a.right||"left"===n&&s.x-i/2<a.left||"top"===n&&s.y-r<a.top||"bottom"===n&&s.y+r>o.height-a.bottom}_calculateAutoAlignment(t){if("auto"!==t)return t;let{_pointerOffsetInPx:r,_containerNode:i,_mainContainerNode:s,viewModel:n}=this,{screenLocation:o,view:a}=n;if((0,y.Wi)(o)||!a||!i)return"top-center";if(!this._isScreenLocationWithinView(o,a))return this._get("currentAlignment")||"top-center";function l(t){return parseInt(t.replace(/[^-\d\.]/g,""),10)}let u=s?window.getComputedStyle(s,null):null,d=u?l(u.getPropertyValue("max-height")):0,h=u?l(u.getPropertyValue("height")):0,{height:p,width:c}=i.getBoundingClientRect(),f=c+r,m=Math.max(p,d,h)+r,g=this._isOutsideView({popupHeight:m,popupWidth:f,screenLocation:o,side:"right",view:a}),_=this._isOutsideView({popupHeight:m,popupWidth:f,screenLocation:o,side:"left",view:a}),b=this._isOutsideView({popupHeight:m,popupWidth:f,screenLocation:o,side:"top",view:a}),v=this._isOutsideView({popupHeight:m,popupWidth:f,screenLocation:o,side:"bottom",view:a});return _?b?"bottom-right":"top-right":g?b?"bottom-left":"top-left":b?v?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(t){return"function"==typeof t?t.call(this):t}_getCurrentAlignment(){let{alignment:t,dockEnabled:r}=this;return r||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(t){let r=["left","right"];return(0,eU.dZ)(this.container)&&r.reverse(),t.replace(/leading/gi,r[0]).replace(/trailing/gi,r[1])}_callDockPosition(t){return"function"==typeof t?t.call(this):t}_getDockPosition(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(t){if("auto"!==t)return t;let r=this.viewModel?.view,i=(0,eU.dZ)(this.container)?"top-left":"top-right";if(!r)return i;let s=r.padding||{left:0,right:0,top:0,bottom:0},n=r.width-s.left-s.right,{breakpoints:o}=r;return o&&n<=o.xsmall?"bottom-center":i}_positionContainer(t=this._containerNode){if(t&&(this._containerNode=t),!t)return;let{screenLocation:r}=this.viewModel,{width:i}=t.getBoundingClientRect(),s=this._calculatePositionStyle(r,i);s&&(t.style.top=s.top,t.style.left=s.left,t.style.bottom=s.bottom,t.style.right=s.right)}_calculateFullWidth(t){let{currentAlignment:r,_pointerOffsetInPx:i}=this;return"top-left"===r||"bottom-left"===r||"top-right"===r||"bottom-right"===r?t+i:t}_calculateAlignmentPosition(t,r,i,s){let{currentAlignment:n,_pointerOffsetInPx:o}=this,a=s/2,l=i.height-r,u=i.width-t,{padding:d}=this.view;return"bottom-center"===n?{top:r+o-d.top,left:t-a-d.left}:"top-left"===n?{bottom:l+o-d.bottom,right:u+o-d.right}:"bottom-left"===n?{top:r+o-d.top,right:u+o-d.right}:"top-right"===n?{bottom:l+o-d.bottom,left:t+o-d.left}:"bottom-right"===n?{top:r+o-d.top,left:t+o-d.left}:"top-center"===n?{bottom:l+o-d.bottom,left:t-a-d.left}:void 0}_calculatePositionStyle(t,r){let{dockEnabled:i,view:s}=this;if(!s)return;if(i)return{left:"",top:"",right:"",bottom:""};if((0,y.Wi)(t)||!r)return;let n=this._calculateFullWidth(r),o=this._calculateAlignmentPosition(t.x,t.y,s,n);return o?{top:void 0!==o.top?`${o.top}px`:"auto",left:void 0!==o.left?`${o.left}px`:"auto",bottom:void 0!==o.bottom?`${o.bottom}px`:"auto",right:void 0!==o.right?`${o.right}px`:"auto"}:void 0}_viewChange(t,r){t&&r&&(this.close(),this.clear())}_viewReadyChange(t,r){if(t){let t=this.get("viewModel.view");this._wireUpView(t)}else r&&(this.close(),this.clear())}_wireUpView(t){if(this._destroySpinner(),!t)return;let{spinnerEnabled:r}=this;r&&this._createSpinner(t),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(t,r,i){let[s,n]=t,[o,a]=r,{width:l,height:u}=i;return s<=l&&o>l||s>l&&o<=l||n<=u&&a>u||n>u&&a<=u}_updateDockEnabledForViewSize(t,r){if(!t||!r)return;let i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},s=i.left+i.right,n=i.top+i.bottom,o=[],a=[];o[0]=t[0]-s,o[1]=t[1]-n,a[0]=r[0]-s,a[1]=r[1]-n;let{dockOptions:l}=this,u=l.breakpoint;this._dockingThresholdCrossed(o,a,u)&&this._setDockEnabledForViewSize(l),this._setCurrentDockPosition()}_focusDockButtonNode(t){this._focusDockButton&&(this._focusDockButton=!1,t.focus())}_closeButtonNodeUpdated(t){return this._focusClose?(this._focusClose=!1,void t.focus()):this._blurClose?(this._blurClose=!1,void t.blur()):void 0}_mainContainerNodeUpdated(t){return this._mainContainerNode=t,this._focusContainer?(this._focusContainer=!1,void t.focus()):this._blurContainer?(this._blurContainer=!1,void t.blur()):void 0}_featureMenuNodeUpdated(t){if(this._featureMenuNode=t,!t||!this._focusFirstFeature)return;this._focusFirstFeature=!1;let r=t.querySelectorAll("li");r.length&&r[0].focus()}_actionsMenuNodeUpdated(t){if(this._actionsMenuNode=t,!t||!this._focusFirstAction)return;this._focusFirstAction=!1;let r=t.querySelectorAll("li");r.length&&r[0].focus()}_focusFeatureMenuButtonNode(t){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,t.focus())}_focusActionsMenuButtonNode(t){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,t.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){let{dockEnabled:t,viewModel:r}=this;if(!r)return;let i=r.active&&!t;r.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(t){let r=t.breakpoint,i=this.viewModel?.view?.ui;if(!i)return!1;let{width:s,height:n}=i;if(isNaN(s)||isNaN(n))return!1;let o=r.hasOwnProperty("width")&&s<=r.width,a=r.hasOwnProperty("height")&&n<=r.height;return o||a}_setDockEnabledForViewSize(t){t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(t))}_getPageText(t,r){return this.featureNavigationVisible?(0,rS.n)(this.messages.pageText,{index:r+1,total:t}):null}_destroySpinner(){let{_spinner:t,view:r}=this;t&&(r&&r.ui&&r.ui.remove(this._spinner,iu),t.destroy(),this._spinner=null)}_createSpinner(t){t&&(this._spinner=new rJ({view:t}),t.ui.add(this._spinner,{key:iu,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){let t=!this.featureMenuOpen;this._featureMenuOpenChanged(t),this.actionsMenuOpen=!1,this.featureMenuOpen=t}_toggleActionsMenu(){let t=!this.actionsMenuOpen;this._actionsMenuOpenChanged(t),this.featureMenuOpen=!1,this.actionsMenuOpen=t}_triggerAction(t){let r=t.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,s=i.findIndex(t=>t.uid===r),n=i.getItemAt(s);n&&"toggle"===n.type&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(s)}_selectFeature(t){let r=t.currentTarget["data-feature-index"];isNaN(r)||(this.viewModel.selectedFeatureIndex=r),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"actionsMenuId",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"actionsMenuButtonId",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"featureMenuId",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"titleId",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"contentId",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"hasContent",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"featureNavigationVisible",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"collapsible",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"featureMenuVisible",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"contentCollapsed",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"dividedActions",null),(0,o._)([(0,w.Cb)({readOnly:!0,dependsOn:["_flowItems.length"]})],ix.prototype,"_activeFlowItemWidget",null),(0,o._)([(0,w.Cb)()],ix.prototype,"actions",null),(0,o._)([(0,w.Cb)()],ix.prototype,"actionsMenuOpen",null),(0,o._)([(0,w.Cb)()],ix.prototype,"alignment",void 0),(0,o._)([(0,w.Cb)()],ix.prototype,"autoCloseEnabled",null),(0,o._)([(0,w.Cb)()],ix.prototype,"autoOpenEnabled",null),(0,o._)([(0,w.Cb)()],ix.prototype,"defaultPopupTemplateEnabled",null),(0,o._)([(0,w.Cb)()],ix.prototype,"content",null),(0,o._)([(0,w.Cb)()],ix.prototype,"collapsed",void 0),(0,o._)([(0,w.Cb)()],ix.prototype,"collapseEnabled",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"currentAlignment",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"currentDockPosition",null),(0,o._)([(0,w.Cb)()],ix.prototype,"dockOptions",null),(0,o._)([(0,w.Cb)()],ix.prototype,"dockEnabled",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"featureCount",null),(0,o._)([(0,w.Cb)()],ix.prototype,"featureMenuOpen",void 0),(0,o._)([(0,w.Cb)()],ix.prototype,"features",null),(0,o._)([(0,w.Cb)()],ix.prototype,"goToOverride",null),(0,o._)([(0,w.Cb)()],ix.prototype,"headingLevel",void 0),(0,o._)([(0,w.Cb)()],ix.prototype,"highlightEnabled",null),(0,o._)([(0,w.Cb)()],ix.prototype,"location",null),(0,o._)([(0,w.Cb)()],ix.prototype,"label",null),(0,o._)([(0,w.Cb)()],ix.prototype,"maxInlineActions",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/Popup/t9n/Popup")],ix.prototype,"messages",void 0),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/t9n/common")],ix.prototype,"messagesCommon",void 0),(0,o._)([(0,w.Cb)()],ix.prototype,"promises",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"selectedFeature",null),(0,o._)([(0,w.Cb)()],ix.prototype,"selectedFeatureIndex",null),(0,o._)([(0,w.Cb)({readOnly:!0})],ix.prototype,"selectedFeatureWidget",null),(0,o._)([(0,w.Cb)()],ix.prototype,"spinnerEnabled",void 0),(0,o._)([(0,w.Cb)()],ix.prototype,"title",null),(0,o._)([(0,w.Cb)()],ix.prototype,"updateLocationEnabled",null),(0,o._)([(0,w.Cb)()],ix.prototype,"view",null),(0,o._)([(0,w.Cb)({type:io}),(iJ=["triggerAction","trigger-action"],t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);let r=t._delegatedEventNames,i=Array.isArray(iJ)?iJ:iJ.split(",").map(t=>t.trim());r.push(...i)})],ix.prototype,"viewModel",void 0),(0,o._)([(0,w.Cb)()],ix.prototype,"visible",null),(0,o._)([(0,w.Cb)()],ix.prototype,"visibleElements",void 0),(0,o._)([(0,q.p)("visibleElements")],ix.prototype,"castVisibleElements",null),(0,o._)([(0,ia.h)()],ix.prototype,"_close",null),(0,o._)([(0,ia.h)()],ix.prototype,"_toggleDockEnabled",null),(0,o._)([(0,ia.h)()],ix.prototype,"_toggleFeatureMenu",null),(0,o._)([(0,ia.h)()],ix.prototype,"_toggleActionsMenu",null),(0,o._)([(0,ia.h)()],ix.prototype,"_triggerAction",null),(0,o._)([(0,ia.h)()],ix.prototype,"_selectFeature",null),(0,o._)([(0,ia.h)()],ix.prototype,"_next",null),(0,o._)([(0,ia.h)()],ix.prototype,"_previous",null);let iM=ix=(0,o._)([(0,S.j)("esri.widgets.Popup")],ix),iI=[0,0];function iE(t){t&&((0,F.cS)(t),t.parentNode&&t.parentNode.removeChild(t))}let iT=t=>{let r=class extends t{constructor(...t){super(...t),this._freqInfo={freq:16,time:750},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,0!==t.length&&void 0!==t[0]?.popup||(this.popup=new iM({view:this})),this.handles.add([(0,g.YP)(()=>this.cursor,t=>{let{surface:r}=this;r&&r.setAttribute("data-cursor",t)}),(0,g.YP)(()=>this.interacting,t=>{let{surface:r}=this;r&&r.setAttribute("data-interacting",t.toString())})])}initialize(){this.handles.add((0,g.YP)(()=>this.ui,(t,r)=>this._handleUIChange(t,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=(0,y.SC)(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(t){let r=this._get("container"),i=(0,F.L7)(t),s=i instanceof HTMLDivElement?i:null;if(s||"string"!=typeof t||f.Z.getLogger(this.declaredClass).error("#container",`element with id '${t}' not found`),r===s)return;let n="dom-size";if(this.handles.remove(n),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(iE(this.root),this._set("root",null)),this.userContent&&((0,F.YD)(this.userContent,r),iE(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");let o=document.createElement("div");o.className="esri-view-user-storage",(0,F.YD)(s,o),s.appendChild(o),this._set("userContent",o);let a=document.createElement("div");a.className="esri-view-root",s.insertBefore(a,s.firstChild),this._set("root",a);let l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);let u=new z;a.appendChild(u.surface),this._set("overlay",u),(0,g.YP)(()=>u.needsRender,t=>{t&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=(0,N.A)({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=(0,y.hw)(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add((0,g.YP)(()=>this.size,t=>{let[r,i]=t,s="esri-view-surface--inset-outline";r>=document.body.clientWidth||i>=document.body.clientHeight?l.classList.add(s):l.classList.remove(s)},g.nn),n),this._set("container",s),this._startMeasuring()}get focused(){let t=document.activeElement===this.surface;return document.hasFocus()&&t}set popup(t){let r=this._get("popup");r&&r!==t&&r.destroy(),this._set("popup",t)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(t,r,i){let s=this.position;return t-=s?s[0]:0,r-=s?s[1]:0,i?(i[0]=t,i[1]=r):i=[t,r],i}containerToPage(t,r,i){let s=this.position;return t+=s?s[0]:0,r+=s?s[1]:0,i?(i[0]=t,i[1]=r):i=[t,r],i}_handleUIChange(t,r){r&&(this.handles.remove("ui"),r.destroy()),t&&this._wireUI(t),this._set("ui",t)}_wireUI(t){this.handles.remove("ui"),t&&(t.view=this,this.handles.add([(0,g.YP)(()=>this.root,r=>{t.container=r?function(t){let r=document.createElement("div");return t.appendChild(r),r}(r):null},g.nn),(0,g.YP)(()=>this.popup,(r,i)=>{let s="popup";i&&t.remove(i,s),r&&(r.view=t.view,t.add(r,{key:s,position:"manual"}))},g.nn)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){let t=this._freqInfo;t.freq=16,t.time=750,this.handles.add([(()=>{let r=()=>{t.freq=16,t.time=750};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),(0,N.A)({prepare:t=>{let r=this._measure(),i=this._freqInfo;if(i.time+=t.deltaTime,r&&(i.freq=16,this._get("resizing")||this._set("resizing",!0)),i.time<i.freq)return;i.time=0;let s=this._position();i.freq=s||r?16:Math.min(750,2*i.freq),!r&&i.freq>=512&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){let t=this.container,r=t?t.clientWidth:0,i=t?t.clientHeight:0;if(0===r||0===i)return this.suspended||this._set("suspended",!0),!1;let s=this.width,n=this.height;return r===s&&i===n?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",i),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:n,width:r,height:i}),!0)}_position(){let t=this.container,r=this.position,i=t&&function(t){let r=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return iI[0]=i.left+(r?.pageXOffset??0),iI[1]=i.top+(r?.pageYOffset??0),iI}(t);return!(!i||r&&i[0]===r[0]&&i[1]===r[1]||(this._set("position",[i[0],i[1]]),0))}forceDOMReadyCycle(){}};return(0,o._)([(0,w.Cb)()],r.prototype,"container",null),(0,o._)([(0,w.Cb)({readOnly:!0})],r.prototype,"focused",null),(0,o._)([(0,w.Cb)({readOnly:!0})],r.prototype,"height",void 0),(0,o._)([(0,w.Cb)({type:iM})],r.prototype,"popup",null),(0,o._)([(0,w.Cb)({type:z})],r.prototype,"overlay",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],r.prototype,"position",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],r.prototype,"resizing",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],r.prototype,"root",void 0),(0,o._)([(0,w.Cb)({value:null,readOnly:!0})],r.prototype,"size",null),(0,o._)([(0,w.Cb)({readOnly:!0})],r.prototype,"surface",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],r.prototype,"suspended",void 0),(0,o._)([(0,w.Cb)()],r.prototype,"ui",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],r.prototype,"userContent",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],r.prototype,"width",void 0),(0,o._)([(0,w.Cb)()],r.prototype,"widthBreakpoint",void 0),r=(0,o._)([(0,S.j)("esri.views.DOMContainer")],r)},iP=t=>{let r=class extends t{async fetchPopupFeatures(t,r){await this.when();let{location:i,queryArea:s,layerViewsAndGraphics:n,clientOnlyGraphics:o}=await this._prepareFetchPopupFeatures(t,r),a=Promise.resolve(o),l=this._queryLayerPopupFeatures(s,n,r),u=l.map(t=>t.promise);return{location:i,clientOnlyGraphics:o,allGraphicsPromise:(0,m.WW)([a,...u]).then(t=>Array.from(new Set(t.flat()))),promisesPerLayerView:l}}_queryLayerPopupFeatures(t,r,i){return r.map(({layerView:r,graphics:s})=>{let n={clientGraphics:s,event:(0,y.pC)(i)?i.event:null,signal:(0,y.pC)(i)?i.signal:null,defaultPopupTemplateEnabled:!!(0,y.pC)(i)&&!!i.defaultPopupTemplateEnabled},o=r.fetchPopupFeatures(t,n);return{layerView:r,promise:o}})}_isValidPopupGraphic(t,r){return t&&!!t.getEffectivePopupTemplate((0,y.pC)(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(t,r){let{clientGraphics:i,queryArea:s,location:n}=await this._popupHitTestGraphics(t,r),o=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:a,clientOnlyGraphics:l}=this._graphicsPerFetchPopupLayerView(i,o);return{clientOnlyGraphics:l,layerViewsAndGraphics:a,queryArea:s,location:n}}async _popupHitTestGraphics(t,r){let{results:i,mapPoint:s}=await this.popupHitTest(t),n=i.filter(t=>"graphic"===t.type&&this._isValidPopupGraphic(t.graphic,r)),o=n.length?n[0].mapPoint:null;return{clientGraphics:n.map(t=>t.graphic),queryArea:s,location:s||o}}_getFetchPopupLayerViews(){let t=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&t.push(r)}),(0,y.pC)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&t.push(this.graphicsView),t.reverse()}_isValidPopupLayerView(t){return(0,y.pC)(t)&&(!("layer"in t)||!t.suspended)&&"fetchPopupFeatures"in t}_graphicsPerFetchPopupLayerView(t,r){let i=[],s=new Map,n=r.map(t=>{let r=[];return"layer"in t?s.set(t.layer,r):s.set(t.graphics,r),{layerView:t,graphics:r}});for(let r of t){let t=s.get(r.layer)||s.get(r.sourceLayer)||null;t?t.push(r):i.push(r)}return{layerViewsAndGraphics:n,clientOnlyGraphics:i}}};return(0,o._)([(0,S.j)("esri.views.PopupView")],r)};var iA=i(46615),ik=i(67005),iO=i(95894),iR=i(31015),iL=i(63878),iF=i(3832),iN=i(59181),ij=i(20681),iD=i(371);let iZ=class extends iN.a{constructor(t){super(t),this.handles.add(this.on("before-add",t=>{(0,y.Wi)(t.item)||t.item.parent===this.owner&&(f.Z.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};iZ=(0,o._)([(0,S.j)("esri.support.AnalysesCollection")],iZ);var iV=i(47349);let iz=class extends j.Z{constructor(t){super(t),this.view=null,this.baseLayerViews=new u.Z,this.referenceLayerViews=new u.Z,this._loadingHandle=(0,g.YP)(()=>this.view?.map?.basemap,t=>{t&&t.load().catch(()=>{})},g.nn)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;let t=this.view?.map?.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(t=>t.updating)||this.referenceLayerViews.some(t=>t.updating))}};(0,o._)([(0,w.Cb)({constructOnly:!0})],iz.prototype,"view",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],iz.prototype,"baseLayerViews",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],iz.prototype,"referenceLayerViews",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],iz.prototype,"suspended",null),(0,o._)([(0,w.Cb)({type:Boolean,readOnly:!0})],iz.prototype,"updating",null),iz=(0,o._)([(0,S.j)("esri.views.BasemapView")],iz);class iU{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=(0,m.dD)(),this._started=!1,this.done=!1,(0,m.fu)(this._controller.signal,()=>{let r=new h.Z("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(r)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();let{layerView:t}=this;if(!t)return;let{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){if(this._started)return;this._started=!0;let{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let s,n;if(await r.load({signal:t}),"prefetchResources"in r&&await r.prefetchResources({signal:t}),r.createLayerView)s=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new h.Z("layer:view-not-supported","No layerview implementation was found");let n=await this.layerViewImporter.importLayerView(r);(0,m.k_)(t),s="default"in n?new n.default({layer:r,view:i}):new n({layer:r,view:i})}let o=()=>{n=(0,y.hw)(n),s.destroyed||s.destroy(),s.layer=null,s.parent=null,s.view=null,this.done=!0};n=(0,m.fu)(t,o),(0,m.k_)(t);try{await s.when()}catch(t){throw o(),t}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred.reject(new h.Z("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=s,r.emit("layerview-create",{view:i,layerView:s}),i.emit("layerview-create",{layer:r,layerView:s}),this.done=!0,this._deferred.resolve(s)}catch(t){r.emit("layerview-create-error",{view:i,error:t}),i.emit("layerview-create-error",{layer:r,error:t}),this.done=!0,this._deferred.reject(new h.Z("layerview:create-error","layerview creation failed",{layer:r,error:t}))}}}let iG=class extends j.Z{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new D.t,this.supportsGround=!0,this._preloadLayerViewModules=()=>{let t=this.view.map?.allLayers;if(t)for(let r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>((0,y.Wi)(this._workPromise)&&(this._workPromise=(0,m.dD)(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles((0,N.Os)(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{let t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),(0,y.Wi)(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");let r=[],i=t=>{if(!(0,y.Wi)(t))for(let s of t)s&&(r.push(s),this._createLayerView(s),"layers"in s&&s.layers&&i(s.layers))};for(let t of this._rootCollectionNames)i(this.get(t));for(let[t,i]of(this._refreshCollections(),this._layerLayerViewInfoMap))r.includes(t)||(this._layerLayerViewInfoMap.delete(i.layer),i.destroy());let s=r.filter(t=>"group"===t.type).map(t=>t.layers),n=[t?.ground?.layers,t?.basemap?.baseLayers,t?.basemap?.referenceLayers,t?.layers,...s].filter(t=>!!t);this.addHandles(n.map(t=>this._watchUpdatingTracking.addOnCollectionChange(()=>t,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([(0,g.on)(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),(0,g.YP)(()=>{let t=this.view,r=t?.map;return[r?.basemap,r?.ground,r?.layers,t?.ready]},()=>this._reschedule(),g.tX)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,(0,y.pC)(this._workPromise)&&(this._workPromise.reject((0,m.zE)()),this._workPromise=null)}get _layersToLayerViews(){let t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return(0,y.pC)(this._workPromise)||this._watchUpdatingTracking.updating||(0,tP.oE)(this._layerLayerViewInfoMap,t=>!t.done)}get updatingRemaining(){let t=0;for(let r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){if(!this.destroyed){for(let t of this._layerLayerViewInfoMap.values())t.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t))throw new h.Z("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t});return this._layerLayerViewInfoMap.get(t).promise}_refreshCollections(){for(let[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(t),this.get(r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let s=0;for(let n of t){let t=this._layerLayerViewInfoMap.get(n);if(!t||!t.layerView)continue;let o=t.layerView;o.layer=n,o.parent=i,r.getItemAt(s)!==o&&r.splice(s,0,o),n.layers&&this._populateLayerViewsOwners(n.layers,o.layerViews,o),s+=1}s<r.length&&r.splice(s,r.length)}_createLayerView(t){if(this._layerLayerViewInfoMap.has(t))return this.view.ready&&this._layerLayerViewInfoMap.get(t).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);let r=new iU(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),r=>{r&&((0,m.D_)(r)||"cancelled:layerview-create"===r.name)||f.Z.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};(0,o._)([(0,w.Cb)()],iG.prototype,"_workPromise",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],iG.prototype,"_watchUpdatingTracking",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],iG.prototype,"_layersToLayerViews",null),(0,o._)([(0,w.Cb)({readOnly:!0})],iG.prototype,"_rootCollectionNames",null),(0,o._)([(0,w.Cb)()],iG.prototype,"layerViewImporter",void 0),(0,o._)([(0,w.Cb)()],iG.prototype,"supportsGround",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],iG.prototype,"updating",null),(0,o._)([(0,w.Cb)({readOnly:!0})],iG.prototype,"updatingRemaining",null),(0,o._)([(0,w.Cb)({constructOnly:!0})],iG.prototype,"view",void 0);let iq=iG=(0,o._)([(0,S.j)("esri.views.LayerViewManager")],iG),i$=class extends j.Z{constructor(t){super(t),this.factor=1.5,this.offset=(0,_.vW)(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};(0,o._)([(0,w.Cb)({type:Number})],i$.prototype,"factor",void 0),(0,o._)([(0,w.Cb)({nonNullable:!0})],i$.prototype,"offset",void 0),(0,o._)([(0,w.Cb)()],i$.prototype,"position",void 0),(0,o._)([(0,w.Cb)({type:Number,range:{min:0}})],i$.prototype,"size",void 0),(0,o._)([(0,w.Cb)()],i$.prototype,"maskUrl",void 0),(0,o._)([(0,w.Cb)()],i$.prototype,"maskEnabled",void 0),(0,o._)([(0,w.Cb)()],i$.prototype,"overlayUrl",void 0),(0,o._)([(0,w.Cb)()],i$.prototype,"overlayEnabled",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],i$.prototype,"version",null),(0,o._)([(0,w.Cb)({type:Boolean})],i$.prototype,"visible",void 0);let iB=i$=(0,o._)([(0,S.j)("esri.views.Magnifier")],i$);var iW=i(80236);let iH=class extends j.Z{constructor(t,r){super({}),this._stage=t,this._textureRequests=new Map,this._frameTask=r?.registerTask(iW.T8.TEXTURE_UNLOAD)??iW.sq}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(t=>this._releaseTextureRequest(t)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(t,r,i){let s=this.makeUid(t),n=this._textureRequests.get(s);return n||(n={referenceCount:0,texture:r(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(n.texture),this._stage.loadImmediate(n.texture)),this._textureRequests.set(s,n)),n.referenceCount++,{uid:s,texture:n.texture,release:()=>this._release(s)}}_release(t){let r=this._textureRequests.get(t);r?(r.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+t),r.referenceCount--,r.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(t))):console.warn(`TextureCollection: texture doesn't exist: '${t}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(t){if(!this._textureRequests)return;let r=this._textureRequests.get(t);!r||r.referenceCount>0||(this._releaseTextureRequest(r),this._textureRequests.delete(t))}_releaseTextureRequest(t){t.onRemove&&t.onRemove(),t.texture?this._stage?.remove(t.texture):t.abortController&&(t.abortController.abort(),t.abortController=null)}makeUid(t,r=null){return(0,y.pC)(r)?`${t}.${r}px`:t}};(0,o._)([(0,w.Cb)()],iH.prototype,"_frameTask",void 0),(0,o._)([(0,w.Cb)()],iH.prototype,"updating",null),iH=(0,o._)([(0,S.j)("esri.views.3d.support.TextureCollection")],iH);var iJ,iY,iK,iX=i(82676);(iK=iY||(iY={}))[iK.Left=0]="Left",iK[iK.Middle=1]="Middle",iK[iK.Right=2]="Right";let iQ=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],i0={};function i1(t){return!!i0[t]}iQ.forEach(t=>{i0[t]=!0});class i2{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:t,priority:r},i)=>this.inputManager.installHandlers(i,[t],r))}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>this.inputManager.uninstallHandlers(r)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,s){let n,o;let a=Array.isArray(t)?t:t.split(",");if(!function(t){for(let r of t)if(!i1(r))return!1;return!0}(a))return a.some(i1)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;Array.isArray(r)?o=r:(n=r,o=[]),"function"==typeof i?n=i:s=i,s=null!=s?s:r1.f.DEFAULT;let l=this._createUniqueGroupName(),u=new i3(this.view,a,o,n);for(let t of(this._handlers.set(l,{handler:u,priority:s}),a)){let r=this._handlerCounts.get(t)||0;this._handlerCounts.set(t,r+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],s),{remove:()=>this._removeHandler(l,a)}}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t))for(let i of(this._handlers.delete(t),r)){let t=this._handlerCounts.get(i);void 0===t?console.error("Trying to remove handler for event that has no handlers registered: ",i):1===t?this._handlerCounts.delete(i):this._handlerCounts.set(i,t-1)}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class i3 extends iX.a{constructor(t,r,i,s){for(let n of(super(!0),this.view=t,r))switch(n){case"click":this.registerIncoming("click",i,t=>s(this._wrapClick(t)));break;case"double-click":this.registerIncoming("double-click",i,t=>s(this._wrapDoubleClick(t)));break;case"immediate-click":this.registerIncoming("immediate-click",i,t=>s(this._wrapImmediateClick(t)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,t=>s(this._wrapImmediateDoubleClick(t)));break;case"hold":this.registerIncoming("hold",i,t=>s(this._wrapHold(t)));break;case"drag":this.registerIncoming("drag",i,t=>{let r=this._wrapDrag(t);r&&s(r)});break;case"key-down":this.registerIncoming("key-down",i,t=>s(this._wrapKeyDown(t)));break;case"key-up":this.registerIncoming("key-up",i,t=>s(this._wrapKeyUp(t)));break;case"pointer-down":this.registerIncoming("pointer-down",i,t=>s(this._wrapPointer(t,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,t=>s(this._wrapPointer(t,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,t=>s(this._wrapPointer(t,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,t=>s(this._wrapPointerDrag(t)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,t=>s(this._wrapMouseWheel(t)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,t=>s(this._wrapPointer(t,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,t=>s(this._wrapPointer(t,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,t=>{s(this._wrapGamepad(t))});break;case"focus":this.registerIncoming("focus",i,t=>{s(this._wrapFocus(t))});break;case"blur":this.registerIncoming("blur",i,t=>{s(this._wrapBlur(t))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapClick(t){let{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:d}=t;return{type:"click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:d,screenPoint:(0,_.vW)(n,o),mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){let{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:d}=t;return{type:"double-click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:d,mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){let{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:d,timestamp:h}=t;return{type:"immediate-click",pointerId:u,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){let{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:d,timestamp:h}=t;return{type:"immediate-double-click",pointerId:u,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(n,o),eventId:l,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapHold(t){let{pointerType:r,button:i,buttons:s,x:n,y:o,native:a}=t.data,{cancelable:l,timestamp:u}=t;return{type:"hold",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:u,mapPoint:this._getMapPoint(n,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,r){return this.view.toMap((0,_.vW)(t,r),{exclude:[]})}_wrapDrag(t){let r=t.data,{x:i,y:s}=r.center,{action:n,pointerType:o,button:a}=r;if("start"===n&&(this._latestDragStart=r),!this._latestDragStart)return;let l=r.pointer.native,u=r.buttons,{cancelable:d,timestamp:h}=t,p={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return"end"===n&&(this._latestDragStart=void 0),{type:"drag",action:n,x:i,y:s,origin:p,pointerType:o,button:a,buttons:u,radius:r.radius,angle:(0,W.BV)(r.angle),native:l,timestamp:h,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){let{key:r,repeat:i,native:s}=t.data,{cancelable:n,timestamp:o}=t;return{type:"key-down",key:r,repeat:i,native:s,timestamp:o,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){let{key:r,native:i}=t.data,{cancelable:s,timestamp:n}=t;return{type:"key-up",key:r,native:i,timestamp:n,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,r){let{x:i,y:s,button:n,buttons:o,native:a,eventId:l}=t.data,u=a.pointerId,d=a.pointerType,{cancelable:h,timestamp:p}=t;return{type:r,x:i,y:s,pointerId:u,pointerType:d,button:n,buttons:o,native:a,timestamp:p,eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){let{x:r,y:i,buttons:s,native:n,eventId:o}=t.data.currentEvent,{button:a}=t.data.startEvent,l=t.data.startEvent.native.pointerId,u=t.data.startEvent.native.pointerType,d=t.data.action,h={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:p,timestamp:c}=t;return{type:"pointer-drag",x:r,y:i,pointerId:l,pointerType:u,button:a,buttons:s,action:d,origin:h,native:n,timestamp:c,eventId:o,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){let{cancelable:r,data:i,timestamp:s}=t,{x:n,y:o,deltaY:a,native:l}=i;return{type:"mouse-wheel",x:n,y:o,deltaY:a,native:l,timestamp:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){let{action:r,state:i,device:s}=t.data,{cancelable:n,timestamp:o}=t,{buttons:a,axes:l}=i;return{type:"gamepad",device:s,timestamp:o,action:r,buttons:a,axes:l,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}}function i5(t){return t.visible&&t.getEditableFlag(sb.USER)&&t.getEditableFlag(sb.MANAGER)}function i4(t){return(0,_.vW)(t.x,t.y)}function i9(t,r){let i=(t instanceof HTMLElement?t:t.surface).getBoundingClientRect();return(0,_.vW)(r.clientX-i.left,r.clientY-i.top)}function i6(t,r){return r instanceof Event?i9(t,r):i4(r)}function i8(t){if(t instanceof Event)return!0;if("object"==typeof t&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0}return!1}(sC=sb||(sb={}))[sC.USER=0]="USER",sC[sC.MANAGER=1]="MANAGER",(sg=sv||(sv={}))[sg.None=0]="None",sg[sg.Unfocused=1]="Unfocused",sg[sg.Focused=2]="Focused",sg[sg.Unselected=4]="Unselected",sg[sg.Selected=8]="Selected",sg[sg.All=15]="All",(s_=sw||(sw={}))[s_.None=0]="None",s_[s_.Custom1=16]="Custom1",s_[s_.Custom2=32]="Custom2",s_[s_.Custom3=64]="Custom3",s_[s_.Custom4=128]="Custom4",s_[s_.Custom5=256]="Custom5",s_[s_.Custom6=512]="Custom6",s_[s_.Custom7=1024]="Custom7",s_[s_.Custom8=2048]="Custom8",s_[s_.Custom9=4096]="Custom9",s_[s_.Custom10=8192]="Custom10",s_[s_.Custom11=16384]="Custom11",s_[s_.Custom12=32768]="Custom12",s_[s_.All=65520]="All";class i7{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,r){let i=()=>t.stopPropagation();switch(t.type){case"pointer-move":"mouse"===t.pointerType&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),"end"===t.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!se(t))break;let s=i4(t),n=this._intersect(s,t.pointerType,r.forEachTool);if((0,y.Wi)(n))break;let o=n.manipulator,a=n.tool;!((0,y.pC)(o)&&(0,y.pC)(a)&&o.interactive)||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,t,r),(0,y.pC)(o)&&(0,y.pC)(a)&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:s,pointerType:t.pointerType}),1===this._grabbedManipulators.size&&(0,y.Wi)(r.activeTool)&&(this._revertToNullActiveTool=!0,r.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!se(t))break;let s=this._grabbedManipulators.get(t.pointerId),n=(0,y.yw)(s,({manipulator:t})=>t),o=(0,y.yw)(s,({tool:t})=>t);if((0,y.Wi)(n)||(0,y.Wi)(o))break;let a=i4(t);a.x=(0,W.uZ)(a.x,0,r.view.width),a.y=(0,W.uZ)(a.y,0,r.view.height);let l=(0,y.Wg)(s).start,u=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":"update"!==t.action&&1!==this._grabbedManipulators.size||(n.dragging=!0,u?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,u&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{let s=i4(t),n=this._intersect(s,t.pointerType,r.forEachTool);if(t.native.shiftKey||r.forEachTool(t=>{if((!(0,y.pC)(n)||n.tool!==t||t.automaticManipulatorSelection)&&t.manipulators){let r=!1;t.manipulators.forEach(({manipulator:t})=>{t.selected&&(t.selected=!1,r=!0)}),r&&t.onManipulatorSelectionChanged&&t.onManipulatorSelectionChanged()}}),(0,y.Wi)(n))break;let{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());let l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i});break}case"click":{let s=i4(t),n=this._intersect(s,t.pointerType,r.forEachTool),o=(0,y.pC)(n)?n.manipulator:null;if((0,y.Wi)(o)||!o.interactive)break;let a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{let s=i4(t),n=this._intersect(s,t.pointerType,r.forEachTool),o=(0,y.pC)(n)?n.manipulator:null;if((0,y.Wi)(o)||!o.interactive)break;let a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i});break}case"immediate-double-click":{let s=i4(t),n=this._intersect(s,t.pointerType,r.forEachTool),o=(0,y.pC)(n)?n.manipulator:null;if((0,y.Wi)(o)||!o.interactive)break;let a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i})}}this._onFocusChange(r.forEachTool)}_ungrabManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:i4(r)}),this._grabbedManipulators.forEach(({manipulator:r},i)=>{r===t&&this._grabbedManipulators.delete(i)}),this._afterManipulatorUngrab(i.setActiveTool)}_handlePointerEnd(t,r){let i=(0,y.yw)(this._grabbedManipulators.get(t.pointerId),({manipulator:t})=>t);(0,y.Wi)(i)||i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:i4(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(r.setActiveTool))}_cursorFromMap(t){let r=null;return(0,tP.oE)(t,({manipulator:t})=>!((0,y.Wi)(t)||!t.interactive||(t.grabbing&&t.grabCursor?(r=t.grabCursor,0):!t.cursor||(r=t.cursor,0)))),r}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){let r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:t})=>{r.add(t)}),this._hoveredManipulators.forEach(({tool:t})=>{i.add(t)}),t(t=>{t.hasGrabbedManipulators=r.has(t),t.hasHoveredManipulators=i.has(t);let s=this._grabbedManipulators.values(),n=(0,c.sE)(s,({tool:r})=>r===t);t.firstGrabbedManipulator=(0,y.pC)(n)?n.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},s=!0,n){let o=(r,i)=>r===t&&((0,y.Wi)(n)||n===i);this._grabbedManipulators.forEach(({tool:t,manipulator:r,pointerType:i},s)=>{o(t,r)&&(this._grabbedManipulators.delete(s),r.grabbing=!1,r.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:i}))}),this._draggedManipulators.forEach(({tool:t,manipulator:r},i)=>{o(t,r)&&(this._draggedManipulators.delete(i),r.dragging=!1,r.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:t,manipulator:r},i)=>{o(t,r)&&(this._hoveredManipulators.delete(i),r.hovering=!1)}),this._afterManipulatorUngrab(i),this._onFocusChange(r)}_intersect(t,r,i){let s=null;return i(i=>{if(null==i.manipulators||!i5(i))return!1;let n=i.manipulators.intersect(t,r);return!(0,y.Wi)(n)&&(s={tool:i,manipulator:n},!0)}),s}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition((0,_.vW)(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){("pointer-up"===t.type||"immediate-click"===t.type||"pointer-move"===t.type)&&"mouse"===t.pointerType&&this._updateHoveredStateForPointerAtScreenPosition(i4(t),t.pointerId,t.pointerType,r)}_updateHoveredStateForPointerAtScreenPosition(t,r,i,s){let n=this._intersect(t,i,s),o=(0,y.yw)(this._hoveredManipulators.get(r),({manipulator:t})=>t);(0,y.pC)(n)&&!n.manipulator.interactive&&(n=null),(0,y.pC)(n)&&o===n.manipulator||((0,y.pC)(o)&&(o.hovering=!1),(0,y.pC)(n)?(n.manipulator.hovering=!0,this._hoveredManipulators.set(r,n)):this._hoveredManipulators.delete(r),this._onFocusChange(s))}_afterManipulatorUngrab(t){0===this._grabbedManipulators.size&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}}function se(t){return"mouse"!==t.pointerType||0===t.button}let st="attached",sr="tools",si=class extends tm.r{constructor(t){super(t),this._manipulatorState=new i7,this.tools=new u.Z,this.cursor=null,this._forEachTool=t=>{for(let r of this.tools.items)if(t(r))return}}initialize(){var t;this.handles.add([this.view.on(iQ,t=>{this._handleInputEvent(t)},r1.f.TOOL),(t=this.tools).on("before-add",r=>{let i=r.item;if(null==i||t.includes(i))return f.Z.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void r.preventDefault();i.onAdd()}),t.on("after-remove",t=>{let r=t.item;r.active&&(r.view.activeTool=null),r.destroy()}),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if((0,y.pC)(t)&&!this.view.ready)return void f.Z.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;let r=this.activeTool;for(let i of(this._set("activeTool",t),(0,y.pC)(r)&&r.deactivate(),(0,y.pC)(t)&&t.activate(),this._removeIncompleteTools(t),this.tools)){this._updateToolEditableFlag(i);let t=i5(i);!(0,y.Wi)(this.activeTool)&&t||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!t)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some(t=>t.updating)||(this.textures?.updating??!1)}attach(){"3d"===this.view.type?(this._set("textures",new iH(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([(0,g.YP)(()=>{let{state:t}=this.view;return"camera"in t&&t.camera},()=>{this._forEachManipulator(t=>{null!=t.onViewChange&&t.onViewChange()})}),this.view.elevationProvider.on("elevation-change",t=>{this._forEachManipulator(r=>{null!=r.onElevationChange&&r.onElevationChange(t)})}),(0,iR.kB)(()=>this._set("textures",(0,y.SC)(this.textures)))],st)):this.handles.add((0,g.YP)(()=>this.view.extent,()=>{this._forEachManipulator(t=>{null!=t.onViewChange&&t.onViewChange()})}))}detach(){(0,y.pC)(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(st)}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1,i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};(0,y.pC)(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(t=>{!r&&t.visible&&t.handleInputEvent(i)}),!r&&"key-down"===t.type&&"Escape"===t.key&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),!r&&(0,y.pC)(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(sr),this._forEachTool(t=>{if(t instanceof j.Z){let r=(0,g.YP)(()=>[t.cursor,t.visible,t.editable],()=>{i5(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(r,sr)}t.manipulators&&this.handles.add([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],sr)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){t.setEditableFlag(sb.MANAGER,(0,y.Wi)(this.activeTool)||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;(0,y.Wi)(t)&&this._forEachTool(r=>!(!(0,y.pC)(r.cursor)||!r.visible||(t=r.cursor,0))),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>((0,y.Wi)(t)||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};(0,o._)([(0,w.Cb)({constructOnly:!0,nonNullable:!0})],si.prototype,"view",void 0),(0,o._)([(0,w.Cb)({readOnly:!0,nonNullable:!0})],si.prototype,"textures",void 0),(0,o._)([(0,w.Cb)({value:null})],si.prototype,"activeTool",null),(0,o._)([(0,w.Cb)({readOnly:!0,type:u.Z})],si.prototype,"tools",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],si.prototype,"cursor",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],si.prototype,"updating",null);let ss=si=(0,o._)([(0,S.j)("esri.views.ToolViewManager")],si),sn=class extends j.Z{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===t.mapping?this._detectedDeviceType="standard":so.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){let t=navigator.getGamepads?navigator.getGamepads():[];return null!=this.nativeIndex&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return sa[this.deviceType]}};(0,o._)([(0,w.Cb)({nonNullable:!0,readOnly:!0})],sn.prototype,"nativeIndex",void 0),(0,o._)([(0,w.Cb)({type:String,readOnly:!0})],sn.prototype,"deviceType",null),(0,o._)([(0,w.Cb)({type:Number,readOnly:!0})],sn.prototype,"axisThreshold",null),sn=(0,o._)([(0,S.j)("esri.views.input.gamepad.GamepadInputDevice")],sn);let so=RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),sa={standard:.15,spacemouse:.025,unknown:0},sl=sn,su=class extends j.Z{constructor(...t){super(...t),this.devices=new u.Z,this.enabledFocusMode="document"}};(0,o._)([(0,w.Cb)({type:u.Z.ofType(sl),readOnly:!0})],su.prototype,"devices",void 0),(0,o._)([(0,w.Cb)({type:["document","view","none"]})],su.prototype,"enabledFocusMode",void 0);let sd=su=(0,o._)([(0,S.j)("esri.views.input.gamepad.GamepadSettings")],su),sh=class extends j.Z{constructor(){super(...arguments),this.gamepad=new sd}};(0,o._)([(0,w.Cb)({readOnly:!0})],sh.prototype,"gamepad",void 0);let sp=sh=(0,o._)([(0,S.j)("esri.views.input.Input")],sh),sc=class extends j.Z{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};(0,o._)([(0,w.Cb)({type:Boolean,nonNullable:!0})],sc.prototype,"enabled",void 0),(0,o._)([(0,w.Cb)({type:sl})],sc.prototype,"device",void 0),(0,o._)([(0,w.Cb)({type:["pan","zoom"],nonNullable:!0})],sc.prototype,"mode",void 0),(0,o._)([(0,w.Cb)({type:["forward-down","forward-up"],nonNullable:!0})],sc.prototype,"tiltDirection",void 0),(0,o._)([(0,w.Cb)({type:Number,nonNullable:!0})],sc.prototype,"velocityFactor",void 0);let sf=sc=(0,o._)([(0,S.j)("esri.views.navigation.gamepad.GamepadSettings")],sc),sy=class extends j.Z{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new sf,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};(0,o._)([(0,w.Cb)({type:Boolean})],sy.prototype,"browserTouchPanEnabled",void 0),(0,o._)([(0,w.Cb)({type:sf,nonNullable:!0})],sy.prototype,"gamepad",void 0),(0,o._)([(0,w.Cb)({type:Boolean})],sy.prototype,"momentumEnabled",void 0),(0,o._)([(0,w.Cb)({type:Boolean})],sy.prototype,"mouseWheelZoomEnabled",void 0);let sm=sy=(0,o._)([(0,S.j)("esri.views.navigation.Navigation")],sy);var sg,s_,sb,sv,sw,sC,sS,sx=i(15463);function sM(t){return"heightModelInfo"in t}function sI(t){if("unknown"===t.type||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":return!0;default:return!1}}function sE(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0}return!1}(sJ=sS||(sS={}))[sJ.Ok=0]="Ok",sJ[sJ.Units=1]="Units",sJ[sJ.HeightModel=2]="HeightModel",sJ[sJ.CRS=3]="CRS",sJ[sJ.Unsupported=4]="Unsupported";let sT=new ij.Z({heightModel:"gravity-related-height"});var sP=i(69280);let sA,sk=null;async function sO(t){sk||(sk=i.e(2077).then(i.bind(i,62077)).then(t=>sA=t)),await sk,(0,m.k_)(t)}async function sR(t,r,i,s){if(!t)return null;let n=t.spatialReference;return(0,I.kR)()||(0,I.Up)(n,r)?(0,I.iV)(t,r):sA?sA.projectGeometry(t,r,i,s):(await Promise.race([sO(s),(0,I.zD)(s)]),sR(t,r,i,s))}let sL=class extends j.Z{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=(0,y.IM)(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return(0,y.pC)(this.userSpatialReference)?this.userSpatialReference:(0,y.Wg)(this._spatialReferenceTask.spatialReference)}get extent(){return(0,y.Wg)(this._extentTask.extent)}get heightModelInfo(){return(0,y.Wg)(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return(0,y.Wg)(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return(0,y.Wg)(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return(0,y.Wi)(this.userSpatialReference)||this.userSpatialReference.equals((0,y.Wg)(this._spatialReferenceTask.spatialReference))?(0,y.Wg)(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return(0,y.Wg)(this._tileInfoTask.tileInfo)}get mapCollections(){let t=this.map?.(),r=[];return(0,y.pC)(this.priorityCollection)&&r.push(this.priorityCollection),r.push({parent:t?.basemap,layers:t?.basemap?.baseLayers},{layers:t?.layers},{parent:t?.ground,layers:t?.ground?.layers},{parent:t?.basemap,layers:t?.basemap?.referenceLayers}),r}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let{layers:t,updating:r}=this._allLayers,i=null;for(let r of t){let t=this._getSupportedSpatialReferences(r);if(t.length>0){let r=this._narrowDownSpatialReferenceCandidates(i,t);(0,y.pC)(r)&&(i=r)}if((0,y.pC)(i)&&1===i.length)break}if(r&&((0,y.Wi)(i)||1!==i.length))return{updating:!0};let s=this._pickSpatialReferenceCandidate(i);return{spatialReference:(0,y.pC)(s)?s.spatialReference:null,viewingMode:(0,y.pC)(s)?s.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let{layers:t,updating:r}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){let r=t[0].tileInfo;return{tileInfo:r&&r.spatialReference.equals(this.spatialReference)?r:null,updating:!1}}return{updating:r}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let{layers:t,updating:r}=this._allLayers;for(let r of t)if(null!=r.layers||sE(r)||sI(r)||sM(r)){let t=function(t){let r=t.url?(0,sx.Qc)(t.url):void 0;return null==t.spatialReference?.vcsWkid&&(0,y.pC)(r)&&"ImageServer"===r.serverType||!sM(t)||!t.heightModelInfo?(sI(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):sE(t))?ij.Z.deriveUnitFromSR(sT,t.spatialReference):null:t.heightModelInfo}(r);if(t)return{heightModelInfo:t,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid,updating:!1}}return{updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let t=this._allLayers,r=t.updating,i=[];for(let r of t.layers){let t="fullExtents"in r&&r.fullExtents||((0,y.pC)(r.fullExtent)?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:t[0],n=t.find(t=>t.spatialReference.equals(this.spatialReference))??s;if(n)return{candidates:[{extent:n,layer:r}],updating:!1};if(this._getSupportedSpatialReferences(r).length>0)for(let s of t)i.push({extent:s,layer:r})}return{candidates:i,updating:r}}get _extentTask(){let{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if((0,y.Wi)(t)||0===t.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let i=this._pickExtentCandidate(t),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:(0,y.pC)(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:((0,y.pC)(this._projectExtentTask.task)&&(this._projectExtentTask.task=(0,y.IM)(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:(0,iO.vr)(async t=>{try{let r=await sR(i.extent,s,i.layer.portalItem,t);this._projectExtentTask={...this._projectExtentTask,task:null,output:r}}catch(r){if((0,m.Hc)(t))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if((0,y.Wi)(t))return r;let i=[],s=(t,r)=>(0,y.pC)(t)?(0,y.pC)(r)?t===r&&t:t:r;for(let n of t)for(let t of r){if(!n.spatialReference.equals(t.spatialReference))continue;let r=s(n.viewingMode,t.viewingMode);if(!1!==r){i.push({spatialReference:n.spatialReference,viewingMode:r});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){let r=this.defaultSpatialReference;return(0,y.Wi)(t)||t.length<1?(0,y.pC)(r)?{spatialReference:r,viewingMode:null}:null:((0,y.pC)(r)&&t.length>1&&t.some(({spatialReference:t})=>t.equals(r))&&(t=t.filter(({spatialReference:t})=>t.equals(r))),t.length>1&&t.some(({viewingMode:t})=>t!==sP.JY.Local)&&(t=t.filter(({viewingMode:t})=>t!==sP.JY.Local)),t[0])}_getSupportedSpatialReferences(t){let r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(0===r.length)return[];let i=[];for(let s of r){let r=this.getSpatialReferenceSupport({spatialReference:s,layer:t});if((0,y.pC)(r))for(let{spatialReference:t,viewingMode:n}of(0,y.pC)(r.constraints)?r.constraints:[{spatialReference:s,viewingMode:null}])(!this.requiresExtentInSpatialReference||(0,y.Wi)(this.userSpatialReference)||t.equals(this.userSpatialReference))&&i.push({spatialReference:t,viewingMode:n})}return i}_pickExtentCandidate(t){let r=this.spatialReference;return t.find(({extent:t})=>r.equals(t.spatialReference))||t[0]}_collectLayers(t){if("loaded"!==this._loadMaybe(this.map?.()))return{layers:[],updating:!0};let r={layers:[],preloading:-1,updating:!1};for(let i of t)if(this._collectCollection(i,r),r.preloading===this.sourcePreloadCount)break;return{layers:r.layers,updating:r.updating}}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(let i of t.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":r.updating||r.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t?"not-loaded"===t.loadStatus?(t.load().catch(()=>{}),"loading"):t.loadStatus:"loaded"}};(0,o._)([(0,w.Cb)()],sL.prototype,"required",void 0),(0,o._)([(0,w.Cb)({constructOnly:!0})],sL.prototype,"map",void 0),(0,o._)([(0,w.Cb)({constructOnly:!0})],sL.prototype,"getSpatialReferenceSupport",void 0),(0,o._)([(0,w.Cb)()],sL.prototype,"defaultSpatialReference",void 0),(0,o._)([(0,w.Cb)()],sL.prototype,"userSpatialReference",void 0),(0,o._)([(0,w.Cb)()],sL.prototype,"sourcePreloadCount",void 0),(0,o._)([(0,w.Cb)()],sL.prototype,"priorityCollection",void 0),(0,o._)([(0,w.Cb)()],sL.prototype,"requiresExtentInSpatialReference",void 0),(0,o._)([(0,w.Cb)()],sL.prototype,"suspended",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"ready",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"heightModelInfoReady",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"spatialReference",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"extent",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"heightModelInfo",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"vcsWkid",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"latestVcsWkid",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"viewingMode",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"tileInfo",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"mapCollections",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"_allLayers",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"_spatialReferenceTask",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"_tileInfoTask",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"_heightModelInfoTask",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sL.prototype,"_extentCandidatesTask",null),(0,o._)([(0,w.Cb)()],sL.prototype,"_extentTask",null),(0,o._)([(0,w.Cb)()],sL.prototype,"_projectExtentTask",void 0),sL=(0,o._)([(0,S.j)("esri.views.support.DefaultsFromMap")],sL);let sF=sY=class extends(0,tm.p)(rU.Z.EventedMixin((0,iF.v)(j.Z))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new d.Z({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new iV.J,this.analyses=new iZ,this.typeSpecificPreconditionsReady=!0,this.layerViews=new u.Z,this.magnifier=new iB,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new sp,this.navigation=new sm,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new i2(this),this.persistableViewModels=new u.Z,this._isValid=!1,this._readyCycleForced=!1,this.handles.add((0,g.YP)(()=>this.preconditionsReady,t=>{t?(this._currentSpatialReference=this.spatialReference,sY.views.add(this)):(this._currentSpatialReference=null,sY.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?(this.toolViewManager?.detach(),(0,y.pC)(this.analysisViewManager)&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown()):t&&!this.ready&&(this._startup(),(0,y.pC)(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},g.Z_))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,(0,g.N1)(()=>this.ready)))),this.basemapView=new iz({view:this}),this.layerViewManager=new iq({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new ss({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([(0,g.YP)(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),(0,g.YP)(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),(0,g.YP)(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([(0,g.YP)(()=>this.defaultsFromMap?.ready,r=>{let i=this.map?.allLayers.length>0;if(r&&!this.spatialReference&&i){if((0,y.pC)(t))return;let r=(0,iR.kB)(()=>t=(0,y.IM)(t));t=(0,iO.vr)(async r=>{try{await (0,m.e4)(this.spatialReferenceWarningDelay,null,r)}catch{return}finally{t=null}f.Z.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(r,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=(0,y.SC)(this.graphics),this.analyses=(0,y.SC)(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),(0,y.SC)(this.analysisViewManager),this.toolViewManager=(0,y.SC)(this.toolViewManager),this.layerViewManager=(0,y.SC)(this.layerViewManager),this.basemapView=(0,y.SC)(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();let t=this.map;this.map=null,t?.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return f.Z.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new sL({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||iL.Z.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}set map(t){t!==this._get("map")&&(t?.destroyed&&(f.Z.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:t}),t=null),iL.Z.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&this.defaultsFromMap?.required?.heightModelInfo&&((t=t.clone()).vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){let r=!(0,E.fS)(t,this._get("spatialReference"));this._set("_userSpatialReference",t),r&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){let t=this.toolViewManager?this.toolViewManager.cursor:null;return(0,y.pC)(t)?t:this._cursor||"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){return this.layerViewManager.whenLayerView(t)}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}importLayerView(t){throw new h.Z("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return(0,y.pC)(this.getSpatialReferenceSupport({spatialReference:t}))}when(t,r){return this.isResolved()&&!this.ready&&f.Z.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,r)}forceReadyCycle(){this.ready&&((0,g.gx)(()=>!1===this.preconditionsReady,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};sF.views=new u.Z,(0,o._)([(0,w.Cb)()],sF.prototype,"_userSpatialReference",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"activeTool",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"allLayerViews",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"groundView",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"animation",null),(0,o._)([(0,w.Cb)()],sF.prototype,"basemapView",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"_defaultsFromMapSettings",null),(0,o._)([(0,w.Cb)()],sF.prototype,"defaultsFromMap",null),(0,o._)([(0,w.Cb)()],sF.prototype,"fatalError",void 0),(0,o._)([(0,w.Cb)({type:x.Z})],sF.prototype,"extent",null),(0,o._)([(0,w.Cb)((0,iN.z)(iV.J,"graphics"))],sF.prototype,"graphics",void 0),(0,o._)([(0,w.Cb)((0,iN.z)(iZ,"analyses"))],sF.prototype,"analyses",void 0),(0,o._)([(0,w.Cb)({readOnly:!0,type:ij.Z})],sF.prototype,"heightModelInfo",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"interacting",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"navigating",null),(0,o._)([(0,w.Cb)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],sF.prototype,"preconditionsReady",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"typeSpecificPreconditionsReady",void 0),(0,o._)([(0,w.Cb)({type:u.Z,readOnly:!0})],sF.prototype,"layerViews",void 0),(0,o._)([(0,w.Cb)({type:iB})],sF.prototype,"magnifier",void 0),(0,o._)([(0,w.Cb)({value:null,type:iA.default})],sF.prototype,"map",null),(0,o._)([(0,w.Cb)()],sF.prototype,"padding",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"ready",void 0),(0,o._)([(0,w.Cb)({type:iD.Z})],sF.prototype,"spatialReference",null),(0,o._)([(0,w.Cb)()],sF.prototype,"spatialReferenceWarningDelay",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"stationary",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"supportsGround",void 0),(0,o._)([(0,w.Cb)({type:ik.Z})],sF.prototype,"timeExtent",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"tools",null),(0,o._)([(0,w.Cb)()],sF.prototype,"toolViewManager",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"type",void 0),(0,o._)([(0,w.Cb)({type:Number})],sF.prototype,"scale",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"updating",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"initialExtentRequired",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"initialExtent",null),(0,o._)([(0,w.Cb)()],sF.prototype,"cursor",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"input",void 0),(0,o._)([(0,w.Cb)({type:sm,nonNullable:!0})],sF.prototype,"navigation",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"layerViewManager",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"analysisViewManager",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"width",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"height",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"resizing",void 0),(0,o._)([(0,w.Cb)({value:null,readOnly:!0})],sF.prototype,"size",null),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"suspended",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"viewEvents",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],sF.prototype,"persistableViewModels",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"_isValid",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"_readyCycleForced",void 0),(0,o._)([(0,w.Cb)()],sF.prototype,"_currentSpatialReference",void 0);let sN=sF=sY=(0,o._)([(0,S.j)("esri.views.View")],sF),sj=class extends iF.D{constructor(t){super(t),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((t,r)=>this._dfd={resolve:t,reject:r}))}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd?.reject(new h.Z("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd?.resolve())}update(t,r){r||(r=(0,m.y8)(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};(0,o._)([(0,w.Cb)({readOnly:!0})],sj.prototype,"done",null),(0,o._)([(0,w.Cb)({readOnly:!0,type:String})],sj.prototype,"state",void 0),(0,o._)([(0,w.Cb)()],sj.prototype,"target",void 0),((sj=(0,o._)([(0,S.j)("esri.views.ViewAnimation")],sj))||(sj={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};let sD=sj;var sZ=i(70262),sV=i(32049);class sz{constructor(t,r,i,s){let n=t.targetGeometry,o=r.targetGeometry;s?"string"==typeof s&&(s=(0,sZ.Qc)(s)||sZ.LI.ease):s=sZ.LI.ease,this.easing=s,this.duration=i,this.sCenterX=n.x,this.sCenterY=n.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=r.scale,this.tRotation=r.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,r){let i,s,n,o;let a=this.easing(r);r>=1?(i=this.tCenterX,s=this.tCenterY,n=this.tRotation,o=this.tScale):(i=this.sCenterX+a*this.dCenterX,s=this.sCenterY+a*this.dCenterY,n=this.sRotation+a*this.dRotation,o=this.sScale+a*this.dScale),t.targetGeometry.x=i,t.targetGeometry.y=s,t.scale=o,t.rotation=n}}let sU=class extends j.Z{constructor(t){super(t),this.duration=200,this.transition=null,this.easing=sZ.LI.ease,this.view=null,this.viewpoint=null,this.viewpoint=new l.Z({targetGeometry:new M.Z,scale:0,rotation:0}),this._updateTask=(0,N.A)({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(t,r,i){this.stop();let s=this.viewpoint;(0,sV.JG)(s,r),this.transition=new sz(this.viewpoint,t.target,i&&i.duration||this.duration,i&&i.easing||this.easing);let n=()=>{this.animation===t&&this._updateTask&&("finished"===t.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;let i=new sD({target:t.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){let r=this.animation;if(r&&r.state!==sD.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{let t=(performance.now()-this._startTime)/this.transition.duration,r=t>=1;this.transition.applyRatio(this.viewpoint,t),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,o._)([(0,w.Cb)()],sU.prototype,"animation",void 0),(0,o._)([(0,w.Cb)()],sU.prototype,"duration",void 0),(0,o._)([(0,w.Cb)()],sU.prototype,"transition",void 0),(0,o._)([(0,w.Cb)()],sU.prototype,"easing",void 0),(0,o._)([(0,w.Cb)()],sU.prototype,"view",void 0),(0,o._)([(0,w.Cb)()],sU.prototype,"viewpoint",void 0);let sG=sU=(0,o._)([(0,S.j)("esri.views.2d.AnimationManager")],sU);class sq{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;let{basemapView:t,graphicsView:r,labelManager:i,layerViews:s,state:{id:n}}=this.view;t.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),t.referenceLayerViews.forEach(this._updateLayerView,this),(0,y.pC)(i)&&(i.lastUpdateId!==n&&(i.viewChange(),i.lastUpdateId=n),i.updateRequested&&i.processUpdate(this._updateParameters)),(0,y.pC)(r)&&(r.lastUpdateId!==n&&(r.viewChange(),r.lastUpdateId=n),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;let t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=(0,g.YP)(()=>t.stationary,t=>{this.stationary=t,this.requestFrame()}),this._frameTaskHandle=(0,N.A)(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){let r=this.view.state,i=t.lastUpdateId;null!=i&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function s$(){return Promise.all([Promise.all([i.e(6057),i.e(6223),i.e(1938),i.e(3392)]).then(i.bind(i,23392)),Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9957),i.e(5428),i.e(78),i.e(6873),i.e(4742),i.e(6063),i.e(8293),i.e(4773),i.e(4708)]).then(i.bind(i,94708))])}let sB=()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9312),i.e(130)]).then(i.bind(i,30130))),sW=()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(3524),i.e(9957),i.e(5428),i.e(942)]).then(i.bind(i,80942))),sH={"base-dynamic":()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9536),i.e(7708)]).then(i.bind(i,27708))),"base-tile":sB,"bing-maps":sB,csv:sW,"geo-rss":()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9957),i.e(5428),i.e(78),i.e(6873),i.e(4742),i.e(6063),i.e(5367)]).then(i.bind(i,85367))),feature:sW,geojson:sW,graphics:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9957),i.e(5428),i.e(78),i.e(6873),i.e(4742),i.e(6063),i.e(164)]).then(i.bind(i,40164))),group:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(5259)]).then(i.bind(i,75259))),imagery:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9957),i.e(5428),i.e(78),i.e(6873),i.e(4742),i.e(6063),i.e(9536),i.e(84),i.e(2946)]).then(i.bind(i,2946))),"imagery-tile":()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(84),i.e(3364)]).then(i.bind(i,53364))),kml:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9957),i.e(5428),i.e(78),i.e(6873),i.e(4742),i.e(6063),i.e(8293),i.e(8501)]).then(i.bind(i,68501))),"map-image":()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9957),i.e(5428),i.e(78),i.e(6873),i.e(4742),i.e(6063),i.e(9536),i.e(6759)]).then(i.bind(i,36759))),"map-notes":()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9957),i.e(5428),i.e(78),i.e(6873),i.e(4742),i.e(6063),i.e(1041)]).then(i.bind(i,51041))),media:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(2567)]).then(i.bind(i,72567))),"ogc-feature":()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(3524),i.e(9957),i.e(5428),i.e(942),i.e(8091)]).then(i.bind(i,28091))),"open-street-map":sB,"oriented-imagery":sW,route:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9957),i.e(5428),i.e(78),i.e(6873),i.e(4742),i.e(6063),i.e(7002),i.e(7766)]).then(i.bind(i,37766))),stream:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(3524),i.e(9957),i.e(5428),i.e(942),i.e(8225)]).then(i.bind(i,48225))),"subtype-group":()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(3524),i.e(9957),i.e(5428),i.e(942),i.e(7671)]).then(i.bind(i,7671))),tile:sB,"vector-tile":()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(8008),i.e(9240)]).then(i.bind(i,49240))),wcs:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(84),i.e(3364)]).then(i.bind(i,53364))),"web-tile":sB,wfs:sW,wms:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9536),i.e(1208)]).then(i.bind(i,11208))),wmts:()=>s$().then(()=>Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9312),i.e(2865)]).then(i.bind(i,2865))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};var sJ,sY,sK,sX=i(24780),sQ=i(35864),s0=i(44514),s1=i(48498);let s2=sK=class extends(0,rv.iv)(j.Z){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if((0,y.Wi)(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return(0,I.iV)(this.geometry,this.spatialReference)}catch(t){return f.Z.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,r){if((0,y.Wi)(this.normalizedGeometry))return t;let i=t.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,sQ.aV)(this.normalizedGeometry,i):(0,sQ.CI)(this.normalizedGeometry,i))return t;let{coordinate:s}=function(t,r){let{spatialReference:i}=r,s=[r.x,r.y],n=Number.POSITIVE_INFINITY,o=0,a=0,l=[0,0];for(let r of"extent"===t.type?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings)for(let t=0;t<r.length-1;t++){(0,s1.Tx)(l,s,r,t);let i=(0,s0.d)(s,l);i<n&&(n=i,o=l[0],a=l[1])}return{coordinate:new M.Z({x:o,y:a,spatialReference:i}),distance:n}}(this.normalizedGeometry,i);return s&&(t.targetGeometry=s),t}clone(){return new sK({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};(0,o._)([(0,w.Cb)({constructOnly:!0})],s2.prototype,"geometry",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],s2.prototype,"normalizedGeometry",null),(0,o._)([(0,w.Cb)({constructOnly:!0})],s2.prototype,"spatialReference",void 0),s2=sK=(0,o._)([(0,S.j)("esri.views.2d.constraints.GeometryConstraint")],s2);let s3=ne=class extends(0,rv.iv)(j.Z){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,r){return this.enabled&&r&&(this.rotationEnabled||(t.rotation=r.rotation)),t}clone(){return new ne({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,o._)([(0,w.Cb)()],s3.prototype,"enabled",void 0),(0,o._)([(0,w.Cb)()],s3.prototype,"rotationEnabled",void 0);let s5=s3=ne=(0,o._)([(0,S.j)("esri.views.2d.constraints.RotationConstraint")],s3),s4=nt=class extends(0,rv.iv)(j.Z){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:r,minScale:i,maxScale:s,minZoom:n,maxZoom:o}=this,a=-1,l=-1,u=!1,d=!1;if(0!==i&&0!==s&&i<s&&([i,s]=[s,i]),!r||!r.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);for(let n of((r=r.map(t=>t.clone())).sort((t,r)=>r.scale-t.scale),r.forEach((t,r)=>t.level=r),r))!u&&i>0&&i>=n.scale&&(a=n.level,u=!0),!d&&s>0&&s>=n.scale&&(l=t?t.level:-1,d=!0),t=n;-1===n&&(n=0===i?0:a),-1===o&&(o=0===s?r.length-1:l),(n=Math.min(n=Math.max(n,0),r.length-1))>(o=Math.min(o=Math.max(o,0),r.length-1))&&([n,o]=[o,n]),i=r[n].scale,s=r[o].scale,r.splice(0,n),r.splice(o-n+1,r.length),r.forEach((t,r)=>{this._lodByScale[t.scale]=t,this._scales[r]=t.scale}),this._set("effectiveLODs",r),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(t,r){if(r&&t.scale===r.scale)return t;let i=this.effectiveMinScale,s=this.effectiveMaxScale,n=t.targetGeometry,o=r&&r.targetGeometry,a=0!==s&&t.scale<s,l=0!==i&&t.scale>i;if(a||l){let a=l?i:s;if(r&&o){let i=(a-r.scale)/(t.scale-r.scale);n.x=o.x+(n.x-o.x)*i,n.y=o.y+(n.y-o.y)*i}t.scale=a}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);let r=this.scaleToZoom(t.scale);return t.scale=this.zoomToScale(Math.abs(r-Math.floor(r))>.99?Math.round(r):Math.floor(r)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);let r=this._scales;if(t<=0)return r[0];if(t>=r.length)return r[r.length-1];let i=Math.round(t-.5),s=Math.round(t);return r[s]+(s-t)*(r[i]-r[s])}scaleToZoom(t){let r,i;if(!this.effectiveLODs)return -1;let s=this._scales;if(t>=s[0])return this.effectiveMinZoom;if(t<=s[s.length-1])return this.effectiveMaxZoom;for(let n=0;n<s.length-1;n++){if(r=s[n],(i=s[n+1])===t)return n+this.effectiveMinZoom+1;if(r>t&&i<t)return n+this.effectiveMinZoom+1-(t-i)/(r-i)}return -1}snapToClosestScale(t){if(!this.effectiveLODs)return t;let r=this.scaleToZoom(t);return this.zoomToScale(Math.round(r))}snapToNextScale(t,r=.5){if(!this.effectiveLODs)return t*r;let i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,r=2){if(!this.effectiveLODs)return t*r;let i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new nt({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((r,i)=>Math.abs(i-t)<=Math.abs(r-t)?i:r,this._scales[0])),this._lodByScale[t].scale}};(0,o._)([(0,w.Cb)({readOnly:!0})],s4.prototype,"effectiveLODs",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],s4.prototype,"effectiveMinZoom",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],s4.prototype,"effectiveMaxZoom",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],s4.prototype,"effectiveMinScale",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],s4.prototype,"effectiveMaxScale",void 0),(0,o._)([(0,w.Cb)()],s4.prototype,"lods",void 0),(0,o._)([(0,w.Cb)()],s4.prototype,"minZoom",void 0),(0,o._)([(0,w.Cb)()],s4.prototype,"maxZoom",void 0),(0,o._)([(0,w.Cb)()],s4.prototype,"minScale",void 0),(0,o._)([(0,w.Cb)()],s4.prototype,"maxScale",void 0),(0,o._)([(0,w.Cb)()],s4.prototype,"snapToZoom",void 0);let s9=s4=nt=(0,o._)([(0,S.j)("esri.views.2d.constraints.ZoomConstraint")],s4),s6={base:null,key:"type",typeMap:{extent:x.Z,polygon:tU.Z}},s8=class extends j.Z{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _defaultLODs(){let t=this.view?.defaultsFromMap?.tileInfo,r=this.view?.spatialReference;return t&&r&&t.spatialReference.equals(r)?t.lods:null}get _geometry(){return new s2({geometry:this.geometry,spatialReference:this.view?.spatialReference})}get _rotation(){return new s5({rotationEnabled:this.rotationEnabled})}get _zoom(){let t=this._get("_zoom"),r=this.lods||this._defaultLODs,i=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===s&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===a?t:new s9({lods:r,minZoom:i,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(t){let r=this.effectiveMaxScale;return 0===r||t>=r}canZoomOutTo(t){let r=this.effectiveMinScale;return 0===r||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),t}constrainByGeometry(t){return this._geometry.constrain(t)}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};(0,o._)([(0,w.Cb)({readOnly:!0})],s8.prototype,"effectiveLODs",null),(0,o._)([(0,w.Cb)({readOnly:!0})],s8.prototype,"effectiveMinScale",null),(0,o._)([(0,w.Cb)({readOnly:!0})],s8.prototype,"effectiveMaxScale",null),(0,o._)([(0,w.Cb)({readOnly:!0})],s8.prototype,"effectiveMinZoom",null),(0,o._)([(0,w.Cb)({readOnly:!0})],s8.prototype,"effectiveMaxZoom",null),(0,o._)([(0,w.Cb)({types:s6,value:null})],s8.prototype,"geometry",null),(0,o._)([(0,w.Cb)({type:[sX.Z]})],s8.prototype,"lods",void 0),(0,o._)([(0,w.Cb)()],s8.prototype,"minScale",void 0),(0,o._)([(0,w.Cb)()],s8.prototype,"maxScale",void 0),(0,o._)([(0,w.Cb)()],s8.prototype,"minZoom",void 0),(0,o._)([(0,w.Cb)()],s8.prototype,"maxZoom",void 0),(0,o._)([(0,w.Cb)()],s8.prototype,"rotationEnabled",void 0),(0,o._)([(0,w.Cb)()],s8.prototype,"snapToZoom",void 0),(0,o._)([(0,w.Cb)()],s8.prototype,"view",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],s8.prototype,"version",null),(0,o._)([(0,w.Cb)()],s8.prototype,"_defaultLODs",null),(0,o._)([(0,w.Cb)({type:s2})],s8.prototype,"_geometry",null),(0,o._)([(0,w.Cb)({type:s5})],s8.prototype,"_rotation",null),(0,o._)([(0,w.Cb)({readOnly:!0,type:s9})],s8.prototype,"_zoom",null);let s7=s8=(0,o._)([(0,S.j)("esri.views.2d.MapViewConstraints")],s8);var ne,nt,nr,ni=i(5793),ns=i(72140),nn=i(20917),no=i(50088),na=i(60013),nl=i(48458),nu=i(34035),nd=i(28477),nh=i(75028);function np(t){return t instanceof Float32Array&&t.length>=2||Array.isArray(t)&&t.length>=2}let nc=[0,0],nf=nr=class extends ns.wq{constructor(t){super(t),this._viewpoint2D={center:(0,ni.a)(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new x.Z,this.id=0,this.inverseTransform=(0,nl.c)(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=(0,nl.c)(),this.transformNoRotation=(0,nl.c)(),this.displayMat3=(0,nd.c)(),this.displayViewMat3=(0,nd.c)(),this.viewMat3=(0,nd.c)(),this.viewMat2d=(0,na.c)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){let r=this._viewpoint2D,i=t.targetGeometry;r.center[0]=i.x,r.center[1]=i.y,r.rotation=t.rotation,r.scale=t.scale,r.spatialReference=i.spatialReference}this._update()}copy(t){let r=this.size,i=this.viewpoint;return i&&r?(this.viewpoint=(0,sV.JG)(i,t.viewpoint),this._set("size",(0,s0.c)(r,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new nr({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,r,i){return np(r)?(0,s0.t)(t,r,this.inverseTransform):(nc[0]=r,nc[1]=i,(0,s0.t)(t,nc,this.inverseTransform))}toScreen(t,r,i){return np(r)?(0,s0.t)(t,r,this.transform):(nc[0]=r,nc[1]=i,(0,s0.t)(t,nc,this.transform))}toScreenNoRotation(t,r,i){return np(r)?(0,s0.t)(t,r,this.transformNoRotation):(nc[0]=r,nc[1]=i,(0,s0.t)(t,nc,this.transformNoRotation))}getScreenTransform(t,r){let{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size");return(0,sV.Rb)(t,i,n,r,0,s),t}_update(){let{center:t,spatialReference:r,scale:i,rotation:s}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),a=new l.Z({targetGeometry:new M.Z(t[0],t[1],r),scale:i,rotation:s});if(this._set("viewpoint",a),!o||!r||!i)return;this.resolution=(0,sV.uG)(a),this.rotation=s,this.scale=i,this.spatialReference=r,(0,s0.c)(this.center,t);let u=0!==o[0]?2/o[0]:0,d=0!==o[1]?-2/o[1]:0;(0,nu.s)(this.displayMat3,u,0,0,0,d,0,-1,1,1);let h=(0,nu.g)(this.viewMat3),p=(0,nh.f)(o[0]/2,o[1]/2),c=(0,nh.f)(-o[0]/2,-o[1]/2),f=(0,nn.t)(s);(0,nu.h)(h,h,p),(0,nu.r)(h,h,f),(0,nu.h)(h,h,c),(0,nu.m)(this.displayViewMat3,this.displayMat3,h);let y=(0,no.a)(this.viewMat2d,p);return(0,no.r)(y,y,f),(0,no.t)(y,y,c),(0,sV.bk)(this.extent,a,o),(0,sV.Ck)(this.transform,a,o,n),(0,no.c)(this.inverseTransform,this.transform),(0,sV.Jp)(this.transformNoRotation,a,o,n),this.worldScreenWidth=(0,sV.L2)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};(0,o._)([(0,w.Cb)({readOnly:!0})],nf.prototype,"id",void 0),(0,o._)([(0,w.Cb)({value:1,json:{write:!0}})],nf.prototype,"pixelRatio",null),(0,o._)([(0,w.Cb)({json:{write:!0}})],nf.prototype,"size",null),(0,o._)([(0,w.Cb)()],nf.prototype,"spatialReference",void 0),(0,o._)([(0,w.Cb)({type:l.Z,json:{write:!0}})],nf.prototype,"viewpoint",null);let ny=nf=nr=(0,o._)([(0,S.j)("esri.views.2d.ViewState")],nf),nm=n2=class extends j.Z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new n2({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};(0,o._)([(0,w.Cb)()],nm.prototype,"left",void 0),(0,o._)([(0,w.Cb)()],nm.prototype,"top",void 0),(0,o._)([(0,w.Cb)()],nm.prototype,"right",void 0),(0,o._)([(0,w.Cb)()],nm.prototype,"bottom",void 0),nm=n2=(0,o._)([(0,S.j)("esri.views.2d.PaddedViewState.Padding")],nm);let ng=n3=class extends ny{constructor(...t){super(...t),this.paddedViewState=new ny,this._updateContent=(()=>{let t=(0,ni.a)();return()=>{let r=this._get("size"),i=this._get("padding");if(!r||!i)return;let s=this.paddedViewState;(0,s0.s)(t,i.left+i.right,i.top+i.bottom),(0,s0.a)(t,r,t),(0,s0.c)(s.size,t);let n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles((0,g.YP)(()=>[this.size,this.padding],()=>this._updateContent(),g.Z_)),this.padding=new nm,this.size=[0,0]}set padding(t){this._set("padding",t||new nm)}set viewpoint(t){if(t){let r=t.clone();this.paddedViewState.viewpoint=t,(0,sV.H4)(r,t,this._get("size"),this._get("padding"));let i=this._viewpoint2D,s=r.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=r.rotation,i.scale=r.scale,i.spatialReference=s.spatialReference,this._update()}}clone(){return new n3({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};(0,o._)([(0,w.Cb)()],ng.prototype,"paddedViewState",void 0),(0,o._)([(0,w.Cb)({type:nm})],ng.prototype,"padding",null),(0,o._)([(0,w.Cb)()],ng.prototype,"viewpoint",null);let n_=ng=n3=(0,o._)([(0,S.j)("esri.views.2d.PaddedViewState")],ng);i(86046);var nb=i(34322);function nv(t,r){switch(r){case"primary":return"touch"===t.pointerType||0===t.button;case"secondary":return"touch"!==t.pointerType&&2===t.button;case"tertiary":return"touch"!==t.pointerType&&1===t.button}}i(19702),i(66415),i(9925);class nw extends iX.a{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,t=>this._handleDoubleClick(t,r))}_handleDoubleClick(t,r){nv(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class nC extends iX.a{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,t=>this._handleDoubleTapDrag(t))}_handleDoubleTapDrag(t){let{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();let{action:s,delta:n}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{let{scale:t}=o;this._startScale=t,this._currentScale=t,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;let t=1.015**n.y,r=this._startScale*t,i=r/this._currentScale;a.setViewpointImmediate(i),this._currentScale=r;break}case"end":{let{constraints:t}=o,{effectiveLODs:r,snapToZoom:i}=t;if(!i||!r)return void a.end();let s=t.snapScale(this._currentScale),l=(n.y>0?Math.max(s,t.snapToPreviousScale(this._startScale)):Math.min(s,t.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(l)}}}}class nS{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){let r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}}class nx extends iX.a{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",i,t=>this._handleDrag(t)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new nS({start:(t,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(t,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(t,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(t,r)=>1===t&&nv(r.data,this.pointerAction)})}_handleDrag(t){let r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class nM extends iX.a{constructor(t,r,i){super(!0),this._view=t,this.pointerAction=r;let s=this._view.mapViewNavigation;this._dragEventSeparator=new nS({start:(t,r)=>{s.rotate.begin(this._view,r.data),r.stopPropagation()},update:(t,r)=>{s.rotate.update(this._view,r.data),r.stopPropagation()},end:(t,r)=>{s.rotate.end(),r.stopPropagation()},condition:(t,r)=>1===t&&nv(r.data,this.pointerAction)}),this.registerIncoming("drag",i,t=>this._dragEventSeparator.handle(t))}}var nI=i(44834);function nE(t){let r=t*t;return t<0&&(r*=-1),r}class nT extends iX.a{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new A.Z,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",t=>this._handleGamePadEvent(t)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([(0,g.YP)(()=>this._view.navigation.gamepad?.enabled,t=>{t?(this._handle.resume(),this._frameTask||(this._frameTask=(0,N.A)({update:t=>this._frameUpdate(t.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},g.nn)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var r;let i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||("end"===t.data.action?(this._currentDevice=null,(r=this._transformation).translation[0]=0,r.translation[1]=0,r.translation[2]=0,r.heading=0,r.tilt=0):(this._currentDevice=t.data.device,function(t,r,i){let s=t.state,n=t.device,o="forward-down"===r.tiltDirection?1:-1;"standard"===n.deviceType?(i.translation[0]=nE(s.axes[0]),i.translation[1]=nE(s.axes[1]),i.translation[2]=nE(s.buttons[7])-nE(s.buttons[6]),i.heading=nE(s.axes[2]),i.tilt=nE(s.axes[3])):"spacemouse"===n.deviceType&&(i.translation[0]=1.2*nE(s.axes[0]),i.translation[1]=1.2*nE(s.axes[1]),i.translation[2]=-(2*nE(s.axes[2])),i.heading=1.2*nE(s.axes[5]),i.tilt=1.2*nE(s.axes[3])),i.tilt*=o,(0,nI.g)(i.translation,i.translation,1)}(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){let r=this._transformation;if(0===r.translation[0]&&0===r.translation[1]&&0===r.translation[2]&&0===r.heading&&0===r.tilt&&0===r.zoom)return;let i=this._view.viewpoint.clone(),s=nA*this._view.navigation.gamepad.velocityFactor*t;(0,sV.Rx)(i,i,[r.translation[0]*s,-r.translation[1]*s]);let n=1+r.translation[2]*nk*t,o=this._view.constraints.rotationEnabled?-r.heading*nP*t:0,a=this._view.size,l=[a[0]/2,a[1]];(0,sV.UZ)(i,i,n,o,l,a);let u=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=u}}let nP=.06,nA=.7,nk=6e-4;class nO extends iX.a{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,t=>this._handleKeyDown(t)),this.registerIncoming("key-up",i,t=>this._handleKeyUp(t)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){let i=this._keyMap[t.data.key];if(this._pressed=null!=i,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class nR extends iX.a{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,t=>this._handleKeyDown(t)),this.registerIncoming("key-up",i,t=>this._handleKeyUp(t)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){let i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;let s=this._keyToDirection[t.data.key];if(this._pressed=null!=s,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}(n1=n5||(n5={}))[n1.IN=0]="IN",n1[n1.OUT=1]="OUT";class nL extends iX.a{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,t=>this._handleKeyDown(t)),r.zoomIn.forEach(t=>this._keysToZoomAction[t]=n5.IN),r.zoomOut.forEach(t=>this._keysToZoomAction[t]=n5.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){let r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;let{key:i}=t.data;if(!(i in this._keysToZoomAction))return;let s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view,o=null;switch(s){case n5.IN:o=n.zoomIn();break;case n5.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}}class nF extends iX.a{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,t=>this._handleMouseWheel(t))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;let r=this._view.mapViewNavigation,{x:i,y:s,deltaY:n}=t.data,o=r.zoom(1/.6**(1/60*n),[i,s]);o&&(this._canZoom=!1,o.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}}class nN extends iX.a{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",t=>this._handleDrag(t)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());let r=this.view.mapViewNavigation;this._dragEventSeparator=new nS({start:(t,i)=>{r.pinch.begin(this.view,i.data),i.stopPropagation()},update:(t,i)=>{r.pinch.update(this.view,i.data),i.stopPropagation()},end:(t,i)=>{r.pinch.end(this.view),i.stopPropagation()},condition:t=>t>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}var nj=i(30312);function nD(t){let r=t.native;return r?{buttons:r.buttons.map(t=>t.pressed?t.value?t.value:1:0),axes:r.axes.map(r=>(function(t,r){let i=Math.abs(t);return i<r?0:Math.sign(t)*(i-r)/(1-r)})(r,t.axisThreshold))}:{buttons:[],axes:[]}}class nZ{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=t=>{this._connectGamepad(t.gamepad)},this._onDisconnectGamepad=t=>{let r=t.gamepad,i=r.index,s=this._inputDevices[i];s&&(this._emitGamepadEvent(r,nD(s),!1),this._inputDevices.splice(i,1),this._latestUpdate.splice(i,1),this._input.gamepad.devices.remove(s),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=[],this._inputDevices=[],this._callback=null;let i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(this._forEachGamepad(t=>this._connectGamepad(t)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){let r=new sl(t);"unknown"!==r.deviceType&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=(0,N.A)({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=[])}_readGamepadState(){let t=document.hasFocus(),r=this._element.contains(document.activeElement),i="document"===this._input.gamepad.enabledFocusMode&&!t||"view"===this._input.gamepad.enabledFocusMode&&!r;this._forEachGamepad(t=>{let r=this._inputDevices[t.index];if(!r)return;let s=this._latestUpdate[t.index],n=nD(r),o=i||function(t){for(let r=0;r<t.axes.length;r++)if(0!==t.axes[r])return!1;for(let r=0;r<t.buttons.length;r++)if(0!==t.buttons[r])return!1;return!0}(n);s&&(s.timestamp===t.timestamp||!s.active&&o||function(t,r){if(t.axes.length!==r.axes.length||t.buttons.length!==r.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==r.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==r.buttons[i])return!1;return!0}(s.state,n))||this._emitGamepadEvent(t,n,!o)})}_forEachGamepad(t){let r=window.navigator.getGamepads();for(let i=0;i<r.length;i++){let s=r[i];this._validate(s)&&t(s)}}_emitGamepadEvent(t,r,i){let s=this._latestUpdate[t.index],n=s&&s.active;(n||i)&&(this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:!n&&i?"start":n&&i?"update":"end"}))}_validate(t){if(!t||!t.connected)return!1;for(let r=0;r<t.axes.length;r++)if(isNaN(t.axes[r]))return!1;return!0}}let nV=(0,p.Z)("trident"),nz=(0,p.Z)("edge"),nU=(0,p.Z)("chrome"),nG=(0,p.Z)("ff"),nq=(0,p.Z)("safari"),n$="esri-view-surface--touch-none",nB="esri-view-surface--touch-pan";class nW{constructor(t,r){this._input=r,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new nZ(t,this._input),this._gamepadSource.onEvent=t=>this._callback("gamepad",t)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=(0,y.SC)(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(let r in this._active)if(!t||!t.has(r)){let t=this._active[r];this._element.removeEventListener(nH[r],t),delete this._active[r]}t&&t.forEach(t=>{if(!this._active[t]&&nH[t]){let r=(this._eventHandlers[t]||this._handleDefault).bind(this,t);this._element.addEventListener(nH[t],r),this._active[t]=r}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,r){r?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?n$:nB),this._element.classList.add(this._browserTouchPanningEnabled?nB:n$)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(n$),this._element.classList.remove(nB),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch(t){}}_updateNormalizedPointerLikeEvent(t,r){let i=i9(this._element,t);return nW.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){let i=(0,nj.kK)(r);i&&"key-up"===t&&this._keyDownState.delete(i);let s={native:r,key:i,repeat:i&&this._keyDownState.has(i)};i&&"key-down"===t&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,r){let i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){let i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_handleMouseWheel(t,r){let i=r.deltaY;switch(r.deltaMode){case 0:(nV||nz)&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}nV||nz?i*=.7:nU||nq?i*=.6:nG&&(i*=1.375);let s=Math.abs(i);s>100&&(i=i/s*200/(1+Math.exp(-.02*(s-100))));let n=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,n)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){r.preventDefault(),this._callback(t,{native:r})}_preventAltKeyDefault(t){"Alt"===t.key&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}nW.test={disableSubpixelCoordinates:!1};let nH={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class nJ extends iX.a{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}var nY=i(67220);function nK(t,r){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)}function nX(t){let{native:r}=t,{pointerId:i,button:s,pointerType:n}=r;return"mouse"===n?`${i}:${s}`:`${n}`}class nQ extends iX.a{constructor(t=250,r=10,i=350,s=35,n=nY.m){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=(0,y.hw)(t.doubleClickTimer))}get hasPendingInputs(){return(0,tP.oE)(this._pointerState,t=>null!=t.doubleClickTimer)}_clearDoubleClickTimer(t,r){let i=this._pointerState.get(t);i&&(i.doubleClickTimer=(0,y.hw)(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){let r=this._pointerState.get(t);1===r.pointerDownCount&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){let{pointerId:r,pointerType:i,button:s}=t.native;return"mouse"===i?`${r}:${s}`:`${i}`}_handleImmediateClick(t){let r=t.data,{pointerType:i}=r.native,s=this._getPointerId(r);if(!this._pointerState.has(s))return void this._startClick(t);let n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l="touch"===i?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;nK(o,r)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),2===n.pointerDownCount&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){let r=nX(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){let{data:r}=t,{native:{pointerType:i}}=r,s=nX(r),n="touch"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}}class n0 extends iX.a{constructor(t=250,r=10,i=350,s=35,n=nY.m){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,_.vW)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new nS({start:(t,r)=>this._dragStart(t,r),update:(t,r)=>this._dragUpdate(r),end:(t,r)=>this._dragEnd(r)}),this.registerIncoming("drag",t=>this._dragEventSeparator.handle(t)),this.registerIncoming("pointer-down",t=>this._handlePointerDown(t)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=(0,y.hw)(t.doubleTapTimeout)})}get hasPendingInputs(){return(0,tP.oE)(this._pointerState,t=>null!=t.doubleTapTimeout)}_clearPointerDown(t){let r=this._pointerState.get(t);r&&(r.doubleTapTimeout=(0,y.hw)(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,r,i){let{button:s,buttons:n,pointer:o,pointers:a,pointerType:l,timestamp:u}=i;return{action:t,delta:r,button:s,buttons:n,pointer:o,pointers:a,pointerType:l,timestamp:u}}_dragStart(t,r){if(!this._doubleTapDragReady||1!==t)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;let{data:i,modifiers:s}=r,{center:n}=i;this._dragStartCenter=n;let o=this._createDoubleTapDragData("begin",(0,_.vW)(0,0),i);this._doubleTapDrag.emit(o,void 0,s),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;let{data:r,modifiers:i}=t,{center:s}=r,n=(0,_.vW)(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",n,r);this._doubleTapDrag.emit(o,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;let{data:r,modifiers:i}=t,{center:s}=r,n=(0,_.vW)(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",n,r);this._doubleTapDrag.emit(o,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){let{data:r}=t,i=nX(r),s=this._pointerState.get(i),{pointerType:n}=r.native;if(s){let o="touch"===n?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),nK(s.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){let{data:r}=t,{pointerType:i}=r.native,s=nX(r),n="touch"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}var n1,n2,n3,n5,n4,n9=i(63441);class n6 extends iX.a{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:s,pointers:function(t){let r=new Map;return t.forEach((t,i)=>r.set(i,t.event)),r}(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){let r=t.native.pointerId,i=n7(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,s);let n=oe(s,n8(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(t){if(t&&null==t.x&&null==t.y)return;let r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){let r=n7(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){let r=n7(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=oe(i,r)-t,i.lastAngle=oe(i,r)-t})}_emitEvent(t,r,i){let s=n7(this._activePointerMap);this._drag.emit(this._createPayload(t,r,s,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){let r=t.data.native.pointerId,i=(0,n9.HA)(t.timestamp);this._activePointerMap.get(r)&&(1===this._activePointerMap.size?(this._updatePointer(t.data),this._isCurrentDragSuppressed||this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,(0,n9.HA)(t.timestamp))))}_handlePointerDrag(t){let r=t.data,i=r.currentEvent,s=(0,n9.HA)(t.timestamp);switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),this._isCurrentDragSuppressed||this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,this._isCurrentDragSuppressed||this._emitEvent("start",i,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}function n8(t){let r=[];return t.forEach(t=>{r.push((0,_.vW)(t.event.x,t.event.y))}),function(t,r){if(r?(r.radius=0,r.center.x=0,r.center.y=0):r={radius:0,center:(0,_.vW)()},0===t.length)return r;if(1===t.length)return r.center.x=t[0].x,r.center.y=t[0].y,r;if(2===t.length){let[i,s]=t,[n,o]=[s.x-i.x,s.y-i.y];return r.radius=Math.sqrt(n*n+o*o)/2,r.center.x=(i.x+s.x)/2,r.center.y=(i.y+s.y)/2,r}let i=0,s=0;for(let r=0;r<t.length;r++)i+=t[r].x,s+=t[r].y;i/=t.length,s/=t.length;let n=t.map(t=>t.x-i),o=t.map(t=>t.y-s),a=0,l=0,u=0,d=0,h=0,p=0,c=0;for(let t=0;t<n.length;t++){let r=n[t],i=o[t],s=r*r,f=i*i;a+=s,l+=f,u+=r*i,d+=s*r,h+=f*i,p+=r*f,c+=i*s}let f=.5*(d+p),y=.5*(h+c),m=a*l-u*u,g=(f*l-y*u)/m,b=(a*y-u*f)/m,v=(0,_.vW)(g+i,b+s);return{radius:Math.sqrt(g*g+b*b+(a+l)/t.length),center:v}}(r)}function n7(t){let r=n8(t),i=0;return t.forEach(t=>{let s=oe(t,r),n=s-t.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=t.lastAngle+n,t.lastAngle=s;let o=s-t.initialAngle;i+=o}),{angle:i/=t.size||1,radius:r.radius,center:r.center}}function oe(t,r){let i=t.event,s=i.x-r.center.x;return Math.atan2(i.y-r.center.y,s)}(oK=n4||(n4={}))[oK.Left=0]="Left",oK[oK.Middle=1]="Middle",oK[oK.Right=2]="Right",oK[oK.Back=3]="Back",oK[oK.Forward=4]="Forward",oK[oK.Undefined=-1]="Undefined";class ot extends iX.a{constructor(t=250,r=10,i=350,s=35,n=nY.m){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){let r=t.data,i=nX(r);if(!this._pointerState.has(i)){let t={downButton:r.native.button,immediateDoubleClick:null};this._pointerState.set(i,t),this.startCapturingPointer(r.native)}}_handlePointerUp(t){let r=t.data,i=nX(r),s=this._pointerState.get(i);if(s&&s.downButton===r.native.button){let i=s.immediateDoubleClick;if(i){i.timeoutHandle.remove();let n="touch"===t.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;nK(i,t.data)>n?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,i.modifiers),this._removeState(r))}else this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,r){let i="touch"===t.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){let r=nX(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}class or extends iX.a{constructor(t=300,r=1.5,i=6,s=6,n=500,o=nY.m){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=s,this._holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",t=>{this._handlePointerLoss(t,"pointer-up")}),this.registerIncoming("pointer-capture-lost",t=>{this._handlePointerLoss(t,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",t=>{this._handlePointerLoss(t,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=(0,y.hw)(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){let r=t.data,i=r.native.pointerId,s=null;0===this._pointerState.size&&(s=this._clock.setTimeout(()=>{let r=this._pointerState.get(i);if(r){if(!r.isDragging){let i=r.previousEvent;this._pointerHold.emit(i,void 0,t.modifiers),r.holdEmitted=!0}r.holdTimeout=null}},this._holdDelay));let n={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,r,i){return{action:t,startEvent:r.startEvent,previousEvent:r.previousEvent,currentEvent:i}}_handlePointerMove(t){let r=t.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,r),void 0,s.modifiers):function(t,r){let i=r.x-t.x,s=r.y-t.y;return Math.sqrt(i*i+s*s)}(r,s.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),s.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){let r=t.data,i=r.native.pointerId;this._pointerState.forEach(s=>{null!=s.holdTimeout&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,r)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){let i=t.data,s=i.native.pointerId,n=this._pointerState.get(s);n&&(null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",n,"pointer-up"===r?i:n.previousEvent),void 0,n.modifiers):"pointer-up"===r&&n.downButton===i.native.button&&t.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause())}}let oi={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},os={zoomIn:["=","+"],zoomOut:["-","_"]},on={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"},oo=class extends j.Z{constructor(){super(...arguments),this._handles=new A.Z}initialize(){let t=()=>this.view?.ready;this._handles.add([(0,g.gx)(()=>!t(),()=>this._disconnect()),(0,g.gx)(t,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=(0,y.SC)(this._inputManager)}_connect(){let t=new nW(this.view.surface,this.view.input),r=[new ot,new or,new nQ,new n6(this.view.navigation),new n0],i=new r1.$({eventSource:t,recognizers:r});i.installHandlers("prevent-context-menu",[new nJ],r1.f.INTERNAL),i.installHandlers("navigation",[new nN(this.view),new nT(this.view),new nF(this.view),new nw(this.view),new nw(this.view,["Ctrl"]),new nx(this.view,"primary"),new nO(this.view,oi),new nL(this.view,os),new nR(this.view,on),new nM(this.view,"secondary"),new nC(this.view,"touch")],r1.f.INTERNAL),this.view.viewEvents.connect(i),this._source=t,this._inputManager=i,(0,g.YP)(()=>this.view?.navigation?.browserTouchPanEnabled,t=>{this._source&&(this._source.browserTouchPanningEnabled=!t)},g.nn)}get test(){return{inputManager:this._inputManager}}};(0,o._)([(0,w.Cb)()],oo.prototype,"view",void 0),(0,o._)([(0,w.Cb)()],oo.prototype,"latestPointerType",null),(0,o._)([(0,w.Cb)()],oo.prototype,"latestPointerLocation",null),(0,o._)([(0,w.Cb)()],oo.prototype,"multiTouchActive",null);let oa=oo=(0,o._)([(0,S.j)("esri.views.2d.input.MapViewInputManager")],oo);var ol=i(44535);let ou=0,od=class extends j.Z{constructor(){super(...arguments),this.color=new tO.Z([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return ou++}};(0,o._)([(0,w.Cb)({readOnly:!0})],od.prototype,"version",null),(0,o._)([(0,w.Cb)({type:tO.Z})],od.prototype,"color",void 0),(0,o._)([(0,w.Cb)({type:tO.Z})],od.prototype,"haloColor",void 0),(0,o._)([(0,w.Cb)()],od.prototype,"haloOpacity",void 0),(0,o._)([(0,w.Cb)()],od.prototype,"fillOpacity",void 0);let oh=od=(0,o._)([(0,S.j)("esri.views.2d.support.HighlightOptions")],od);var op=i(9710),oc=i(20522),of=i(84564),oy=i(74062);let om="esri-component",og=class extends j.Z{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(t){let r=this._get("node");t!==r&&(t&&t.classList.add(om),r&&r.classList.remove(om),this._set("node",t))}castNode(t){return t?"string"==typeof t||t&&"nodeType"in t?(this._set("widget",null),(0,F.L7)(t)):(t&&"function"==typeof t.render&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};(0,o._)([(0,w.Cb)({dependsOn:[]})],og.prototype,"id",null),(0,o._)([(0,w.Cb)()],og.prototype,"node",null),(0,o._)([(0,q.p)("node")],og.prototype,"castNode",null),(0,o._)([(0,w.Cb)({readOnly:!0})],og.prototype,"widget",void 0);let o_=og=(0,o._)([(0,S.j)("esri.views.ui.Component")],og),ob={left:0,top:0,bottom:0,right:0},ov={bottom:30,top:15,right:15,left:15},ow="manual",oC="esri-ui",oS="esri-ui-corner",ox="esri-ui-inner-container";function oM(t){let r="object"==typeof t&&null!==t&&Object.getPrototypeOf(t);return(null===r||r===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function oI(t,{top:r,bottom:i,left:s,right:n}){t.style.top=r,t.style.bottom=i,t.style.left=s,t.style.right=n}let oE=class extends rU.Z.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=[],this._componentToKey=new Map,this._handles=new A.Z,this.view=null,this._applyViewPadding=()=>{let t=this.container;t&&oI(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{let t=this._innerContainer;t&&oI(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([(0,g.YP)(()=>[this.view?.padding,this.container],this._applyViewPadding,g.nn),(0,g.YP)(()=>this.padding,this._applyUIPadding,g.nn)])}destroy(){for(let t of(this.container=null,this._components))t.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(t){let r=this._get("container");t!==r&&(t&&(t.classList.add(oC),Array.from(t.classList).forEach(r=>{r.startsWith("calcite-theme-")&&t.classList.remove(r)}),t.classList.add("calcite-theme-"+(t3()?"dark":"light")),this._attachContainers(t)),r&&(r.classList.remove(oC),oI(r,{top:"",bottom:"",left:"",right:""}),(0,F.cS)(r)),this._set("container",t))}get height(){let t=this.get("view.height")||0;if(0===t)return t;let r=this._getViewPadding();return Math.max(t-(r.top+r.bottom),0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return"number"==typeof t?{bottom:t,top:t,right:t,left:t}:{...ov,...t}}get width(){let t=this.get("view.width")||0;if(0===t)return t;let r=this._getViewPadding();return Math.max(t-(r.left+r.right),0)}add(t,r){let i,s;if(Array.isArray(t))return void t.forEach(t=>this.add(t,r));let n=oM(t);n&&({index:i,position:r,component:t,key:s}=n),r&&"object"==typeof r&&({index:i,key:s,position:r}=r),t&&(!r||this._isValidPosition(r))&&this._add(t,r,i,s)}remove(t,r){if(!t)return;if(Array.isArray(t))return t.map(t=>this.remove(t,r));let i=this._find(t);if(i){let s=this._componentToKey;if(s.has(t)&&s.get(t)!==r)return;let n=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(t),this._components.splice(n,1)[0]}}empty(t){return Array.isArray(t)?t.map(t=>this.empty(t)).reduce((t,r)=>t.concat(r)):(t=t||ow)===ow?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(oS)).map(t=>this.remove(t)):this._isValidPosition(t)?Array.prototype.slice.call(this._cornerNameToContainerLookup[t].children).map(this.remove,this):null}move(t,r){let i;if(Array.isArray(t)&&t.forEach(t=>this.move(t,r)),!t)return;let s=oM(t)||oM(r);if(s&&(i=s.index,r=s.position,t=s.component||t),r&&!this._isValidPosition(r))return;let n=this.remove(t);n&&this.add(n,{position:r,index:i})}find(t){if(!t)return null;let r=this._findById(t);return r&&(r.widget||r.node)}getPosition(t){for(let r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,s){t instanceof o_||(t=new o_({node:t})),this._place({component:t,position:r,index:i}),this._components.push(t),s&&this._componentToKey.set(t,s)}_find(t){return t?t instanceof o_?this._findByComponent(t):"string"==typeof t?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.get("view.padding")||ob}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){let t=document.createElement("div");t.classList.add(ox),t.classList.add("esri-ui-corner-container");let r=document.createElement("div");r.classList.add(ox),r.classList.add("esri-ui-manual-container");let i=document.createElement("div");i.classList.add("esri-ui-top-left"),i.classList.add(oS),t.appendChild(i);let s=document.createElement("div");s.classList.add("esri-ui-top-right"),s.classList.add(oS),t.appendChild(s);let n=document.createElement("div");n.classList.add("esri-ui-bottom-left"),n.classList.add(oS),t.appendChild(n);let o=document.createElement("div");o.classList.add("esri-ui-bottom-right"),o.classList.add(oS),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;let a=(0,eU.dZ)();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":a?s:i,"top-trailing":a?i:s,"bottom-leading":a?o:n,"bottom-trailing":a?n:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var r;let i=t.component,s=t.position||ow,n=t.index,o=this._positionNameToContainerLookup[s];if((r=i.widget)&&!r._started&&"function"==typeof r.postMixInProperties&&"function"==typeof r.buildRendering&&"function"==typeof r.postCreate&&"function"==typeof r.startup&&i.widget.startup(),!(n>-1))return void o.appendChild(i.node);let a=Array.prototype.slice.call(o.children);0!==n?n>=a.length?o.appendChild(i.node):(0,F.Vt)(i.node,a[n]):o.firstChild?(0,F.Vt)(i.node,o.firstChild):o.appendChild(i.node)}_toPxPosition(t){return{top:this._toPxUnit(t.top),left:this._toPxUnit(t.left),right:this._toPxUnit(t.right),bottom:this._toPxUnit(t.bottom)}}_toPxUnit(t){return 0===t?"0":t+"px"}_findByComponent(t){let r,i=null;return this._components.some(s=>((r=s===t)&&(i=s),r)),i}_findById(t){let r,i=null;return this._components.some(s=>((r=s.id===t)&&(i=s),r)),i}_findByNode(t){let r,i=null;return this._components.some(s=>((r=s.node===t)&&(i=s),r)),i}};(0,o._)([(0,w.Cb)()],oE.prototype,"container",null),(0,o._)([(0,w.Cb)()],oE.prototype,"height",null),(0,o._)([(0,w.Cb)({value:ov})],oE.prototype,"padding",null),(0,o._)([(0,q.p)("padding")],oE.prototype,"castPadding",null),(0,o._)([(0,w.Cb)()],oE.prototype,"view",void 0),(0,o._)([(0,w.Cb)()],oE.prototype,"width",null);let oT=oE=(0,o._)([(0,S.j)("esri.views.ui.UI")],oE);function oP(t,r){return t&&"copyright"in t&&(!r||"function"==typeof t.originOf&&"user"===t.originOf("copyright"))}function oA(t,r,i){i&&r&&(t.find(t=>t.layerView===r&&t.text===i)||t.push({text:i,layerView:r}))}let ok=[],oO=class extends tm.r{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new u.Z,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");let r=this.get("view.allLayerViews");r&&this.handles.add(r.map(t=>(0,g.YP)(()=>[t.suspended,t.layer?.attributionVisible],()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(t=>{this._pendingAttributions.delete(t),this._fetchedAttributionData.delete(t)}),this._updateAttributionItems()},this.handles.add([(0,g.on)(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),(0,g.gx)(()=>!0===this.view?.stationary,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){var t;let r=this.get("view.allLayerViews");ok.length=0,r?(r.forEach(t=>{if(t.suspended||!t.layer?.attributionVisible)return;let r=t.layer;if(oP(r,"user"))return void oA(ok,t,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(t)){let i=this._fetchedAttributionData.get(t);return void(i?oA(ok,t,this._getDynamicAttribution(i,this.view,r)):oP(r)&&oA(ok,t,r.copyright))}return void this._fetchAttributionData(t)}oA(ok,t,r.get("portalItem.accessInformation")||r.copyright)}),((t=this.items).length!==ok.length||t.some((t,r)=>t.text!==ok[r].text))&&(this.items.removeAll(),this.items.addMany(ok)),ok.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);let r=await (0,iO.q6)(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){let i=r.ok?this._createContributionIndex(r.value,"bing-maps"===t.layer.type):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,r){let i=t.contributors,s={};if(!i)return s;for(let t=0;t<i.length;t++){let n=i[t],o=n.coverageAreas;if(!o)return;for(let i of o){let o=i.bbox,a=i.zoomMin-(r&&i.zoomMin?1:0),l=i.zoomMax-(r&&i.zoomMax?1:0),u={xmin:o[1],ymin:o[0],xmax:o[3],ymax:o[2],spatialReference:iD.Z.WGS84},d={extent:(0,rY.$)(u),attribution:n.attribution||"",score:null!=i.score?i.score:100,id:t};for(let t=a;t<=l;t++)s[t]=s[t]||[],s[t].push(d)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(t,r,i){let{extent:s,scale:n}=r,o=i.tileInfo.scaleToZoom(n);if(o=Math.min(t.maxKey,Math.round(o)),!s||null==o||o<=-1)return"";let a=t[o],l=(0,rY.iV)(s.center.clone().normalize(),r.spatialReference),u={};return a?a.filter(t=>{let r=!u[t.id]&&l&&(0,sQ.aV)(t.extent,l);return r&&(u[t.id]=!0),r}).sort((t,r)=>r.score-t.score||t.objectId-r.objectId).map(t=>t.attribution).join(", "):""}};(0,o._)([(0,w.Cb)({readOnly:!0,type:u.Z})],oO.prototype,"items",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],oO.prototype,"state",null),(0,o._)([(0,w.Cb)()],oO.prototype,"view",void 0);let oR=oO=(0,o._)([(0,S.j)("esri.widgets.Attribution.AttributionViewModel")],oO),oL=class extends $.Z{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(t=>t.forEach(({target:t})=>this._checkSourceTextOverflow(t))),this.iconClass="esri-icon-description",this.itemDelimiter=" | ",this.messages=null,this.viewModel=new oR}initialize(){this.addHandles((0,g.on)(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){let t={"esri-attribution--open":this._isOpen};return(0,eq.u)("div",{bind:this,class:this.classes("esri-attribution esri-widget",t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return(0,eq.u)("div",{class:"esri-attribution__powered-by"},"Powered by"," ",(0,eq.u)("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){let t=this._isOpen,r=this._isInteractive,{attributionText:i}=this;return(0,eq.u)("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",{"esri-attribution__sources--open":t,"esri-interactive":r}),innerHTML:i,tabindex:r?"0":""})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1,{clientHeight:i,clientWidth:s,scrollWidth:n}=t,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){let t=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,t&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};(0,o._)([(0,w.Cb)()],oL.prototype,"_isOpen",void 0),(0,o._)([(0,w.Cb)()],oL.prototype,"_isInteractive",null),(0,o._)([(0,w.Cb)()],oL.prototype,"_attributionTextOverflowed",void 0),(0,o._)([(0,w.Cb)()],oL.prototype,"_prevSourceNodeHeight",void 0),(0,o._)([(0,w.Cb)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],oL.prototype,"attributionText",null),(0,o._)([(0,w.Cb)()],oL.prototype,"iconClass",void 0),(0,o._)([(0,w.Cb)()],oL.prototype,"itemDelimiter",void 0),(0,o._)([(0,w.Cb)()],oL.prototype,"label",null),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/Attribution/t9n/Attribution")],oL.prototype,"messages",void 0),(0,o._)([(0,w.Cb)()],oL.prototype,"view",null),(0,o._)([(0,w.Cb)({type:oR})],oL.prototype,"viewModel",void 0),(0,o._)([(0,ia.h)()],oL.prototype,"_toggleState",null);let oF=oL=(0,o._)([(0,S.j)("esri.widgets.Attribution")],oL),oN=class extends it(j.Z){constructor(t){super(t),this._handles=new A.Z,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add((0,g.YP)(()=>this.view,this._updateRotationWatcher,g.nn))}destroy(){this._handles=(0,y.hw)(this._handles),this.view=null}get canShowNorth(){let t=this.get("view.spatialReference");return!(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;let t={};"2d"===this.view.type?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){null!=t&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;let r=-t.heading;this.orientation={x:0,y:0,z:r}}_updateRotationWatcher(t){this._handles.removeAll(),t&&this._handles.add("2d"===t.type?(0,g.YP)(()=>t?.rotation,this._updateForRotation,g.nn):(0,g.YP)(()=>t?.camera,this._updateForCamera,g.nn))}};(0,o._)([(0,w.Cb)({readOnly:!0})],oN.prototype,"canShowNorth",null),(0,o._)([(0,w.Cb)()],oN.prototype,"orientation",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],oN.prototype,"state",null),(0,o._)([(0,w.Cb)()],oN.prototype,"view",void 0);let oj=oN=(0,o._)([(0,S.j)("esri.widgets.CompassViewModel")],oN),oD=class extends $.Z{constructor(t,r){super(t,r),this.iconClass="esri-icon-locate-circled",this.messages=null,this.viewModel=new oj}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){let{orientation:t,state:r}=this.viewModel,i="disabled"===r,s="compass"==("rotation"===r?"rotation":"compass"),{messages:n}=this;return(0,eq.u)("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",{"esri-disabled":i,"esri-interactive":!i}),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:i?-1:0,"aria-label":n.reset,title:n.reset},(0,eq.u)("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",{"esri-icon-compass":s,"esri-icon-dial":!s}),styles:this._toRotationTransform(t)}),(0,eq.u)("span",{class:"esri-icon-font-fallback-text"},n.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(t){return{transform:`rotateZ(${t.z}deg)`}}};(0,o._)([(0,w.Cb)()],oD.prototype,"goToOverride",null),(0,o._)([(0,w.Cb)()],oD.prototype,"iconClass",void 0),(0,o._)([(0,w.Cb)()],oD.prototype,"label",null),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/Compass/t9n/Compass")],oD.prototype,"messages",void 0),(0,o._)([(0,w.Cb)()],oD.prototype,"view",null),(0,o._)([(0,w.Cb)({type:oj})],oD.prototype,"viewModel",void 0),(0,o._)([(0,ia.h)()],oD.prototype,"_reset",null);let oZ=oD=(0,o._)([(0,S.j)("esri.widgets.Compass")],oD),oV=class extends j.Z{constructor(t){super(t),this.navigationMode="pan",this.view=null}initialize(){this.own((0,g.gx)(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};(0,o._)([(0,w.Cb)({readOnly:!0})],oV.prototype,"state",null),(0,o._)([(0,w.Cb)()],oV.prototype,"navigationMode",void 0),(0,o._)([(0,w.Cb)()],oV.prototype,"view",void 0);let oz=oV=(0,o._)([(0,S.j)("esri.widgets.NavigationToggleViewModel")],oV),oU="esri-navigation-toggle__button esri-widget--button",oG="esri-navigation-toggle__button--active",oq=class extends $.Z{constructor(t,r){super(t,r),this.iconClass="esri-icon-pan2",this.messages=null,this.viewModel=new oz}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){"horizontal"!==t&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}toggle(){return this.viewModel.toggle()}render(){let t="disabled"===this.get("viewModel.state"),r="pan"===this.get("viewModel.navigationMode"),i={"esri-disabled":t,"esri-navigation-toggle--horizontal":"horizontal"===this.layout},s=this.messages.toggle;return(0,eq.u)("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:t?-1:0,"aria-label":s,title:s},(0,eq.u)("div",{class:this.classes(oU,"esri-navigation-toggle__button--pan",{[oG]:r})},(0,eq.u)("span",{class:"esri-icon-pan"})),(0,eq.u)("div",{class:this.classes(oU,"esri-navigation-toggle__button--rotate",{[oG]:!r})},(0,eq.u)("span",{class:"esri-icon-rotate"})))}_toggle(){this.toggle()}};(0,o._)([(0,w.Cb)()],oq.prototype,"iconClass",void 0),(0,o._)([(0,w.Cb)()],oq.prototype,"label",null),(0,o._)([(0,w.Cb)({value:"vertical"})],oq.prototype,"layout",null),(0,o._)([(0,w.Cb)(),(0,eG.H)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],oq.prototype,"messages",void 0),(0,o._)([(0,w.Cb)()],oq.prototype,"view",null),(0,o._)([(0,w.Cb)({type:oz})],oq.prototype,"viewModel",void 0),(0,o._)([(0,ia.h)()],oq.prototype,"_toggle",null);let o$=oq=(0,o._)([(0,S.j)("esri.widgets.NavigationToggle")],oq);var oB=i(33355);let oW=class extends oT{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([(0,g.YP)(()=>this.components,this._componentsWatcher.bind(this),g.nn),(0,g.YP)(()=>this.view,this._updateViewAwareWidgets.bind(this),g.nn)])}_add(t,r,i,s){if("string"==typeof t&&this._defaultPositionLookup[t]){if(this._find(t))return;t=this._createComponent(t)}super._add(t,r,i,s)}_removeComponents(t){t.forEach(t=>{let r=this._find(t);r&&(this.remove(r),r.destroy())})}_updateViewAwareWidgets(t){this.components.forEach(r=>{let i=this._find(r),s=i&&i.widget;s&&void 0!==s.view&&(s.view=t)})}_componentsWatcher(t,r){this._removeComponents(r),this._addComponents(t),this._adjustPadding(t)}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){let{top:t}=this.padding;this.padding=t}}_addComponents(t){this.constructed&&t.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(t){let r=this._createWidget(t);if(r)return new o_({id:t,node:r})}_createWidget(t){return"attribution"===t?this._createAttribution():"compass"===t?this._createCompass():"navigation-toggle"===t?this._createNavigationToggle():"zoom"===t?this._createZoom():void 0}_createAttribution(){return new oF({view:this.view})}_createCompass(){return new oZ({view:this.view})}_createNavigationToggle(){return new o$({view:this.view})}_createZoom(){return new oB.default({view:this.view})}};(0,o._)([(0,w.Cb)()],oW.prototype,"components",void 0);let oH=oW=(0,o._)([(0,S.j)("esri.views.ui.DefaultUI")],oW),oJ=class extends oH{constructor(t){super(t),this.components=["attribution","zoom"]}};(0,o._)([(0,w.Cb)()],oJ.prototype,"components",void 0);let oY=oJ=(0,o._)([(0,S.j)("esri.views.ui.2d.DefaultUI2D")],oJ);var oK,oX,oQ=i(59118);let o0=oX=class extends ns.wq{constructor(t){super(t),this.color=new tO.Z([0,0,0,1])}clone(){return new oX((0,oQ.d9)({color:this.color}))}};(0,o._)([(0,w.Cb)({type:tO.Z,json:{write:!0}})],o0.prototype,"color",void 0);let o1=o0=oX=(0,o._)([(0,S.j)("esri.webmap.background.ColorBackground")],o0),o2,o3,o5,o4,o9,o6,o8=class extends L(iT(iP(sN))){constructor(t){super(t),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new d.Z({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new sq(this),this._pePromise=null,this.floors=new u.Z,this.highlightOptions=new oh,this.inputManager=new oa({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new op.T,this.type="2d",this.ui=new oY,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new s7,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([(0,g.YP)(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160)},g.Z_),this.on("resize",t=>this._resizeHandler(t)),(0,g.YP)(()=>this.animationManager?.animation,t=>{this.animation=t})]),(0,v.j2)()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new ol.Z(this.featuresTilingScheme)}get initialExtentRequired(){let{scale:t,constraints:r,center:i,viewpoint:s,extent:n}=this,o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||n||(r?.effectiveLODs||(o=-1),i&&(0!==t||-1!==o)||s&&(0,y.pC)(s.targetGeometry)&&("extent"===s.targetGeometry.type||s.scale)))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!(0,I.kR)()||(this._pePromise||(this._pePromise=(0,I.zD)().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){let t=this._getDefaultViewpoint();if(!t)return!1;let r=this.spatialReference,i=(0,y.Wg)(t.targetGeometry);return!!(0,I.Up)(i.spatialReference,r)||this._projectionEngineLoaded}set animation(t){let r=this._get("animation");if(t===r)return;if(r&&r.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;let i=()=>{t===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};t.when(i,i)}get background(){var t;return(t=this.map,"esri.WebMap"===t?.declaredClass)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){if(!this.ready)return this._get("center");let{center:t,spatialReference:r}=this.state.paddedViewState;return new M.Z({x:t[0],y:t[1],spatialReference:r})}set center(t){let r;if(null==t)return;if(!this.ready)return this._set("center",t),void this.notifyChange("initialExtentRequired");try{r=this._project(t,this.spatialReference)}catch(r){return void f.Z.getLogger(this.declaredClass).error(new h.Z("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:r}))}let i=this.viewpoint;(0,sV.o2)(i,i,r),this.viewpoint=i}set constraints(t){let r=this._get("constraints");r&&(this.handles.remove("map-view-constraints"),r.destroy()),this._set("constraints",t),t&&(t.view=this,this.ready&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint)),this.handles.add((0,g.YP)(()=>t.version,()=>{this.ready&&this.state&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint))},g.Z_),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(t){let r;if(null==t)return;if(!t.width||!t.height)return void f.Z.getLogger(this.declaredClass).error(new h.Z("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");try{r=this._project(t,this.spatialReference)}catch(t){return void f.Z.getLogger(this.declaredClass).error(new h.Z("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:t}))}let i=this.viewpoint;(0,sV.qf)(i,i,r,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);let r=this.viewpoint;(0,sV.YQ)(r,r,t),this.viewpoint=r}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",-1);let r=this._get("extent");return r&&(this._set("extent",null),this._set("center",r.center)),void this.notifyChange("initialExtentRequired")}let r=this.viewpoint;(0,sV.Hy)(r,r,t),this.viewpoint=r}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){let t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(t=>!t.destroyed&&!("layerViews"in t)&&!0===t.updating));if((0,p.Z)("esri-2d-log-updating")){let r=this.allLayerViews.reduce((t,r)=>({...t,[r.layer.id]:!r.destroyed&&!("layerViews"in r)&&r.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
`)}return t}get viewpoint(){if(!this.ready)return this._get("viewpoint");let t=this.state.paddedViewState;return t&&t.viewpoint.clone()}set viewpoint(t){let r,i;if(null==t)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");try{r=this._project(t,this.spatialReference),!t.scale||isNaN(t.scale)?i=new h.Z("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):(0,y.Wi)(t.targetGeometry)&&(i=new h.Z("mapview:invalid-viewpoint","geometry not defined"))}catch(t){i=new h.Z("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:t})}if(i)return void f.Z.getLogger(this.declaredClass).error(i);this._scaleBeforeChangingSpatialReference=null;let s=new l.Z({targetGeometry:new M.Z,scale:0,rotation:0});(0,sV.JG)(s,r),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(t){if(null==t)return;if(!this.ready){this._set("zoom",t),this._set("scale",0);let r=this._get("extent");return r&&(this._set("extent",null),this._set("center",r.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);let r=this.viewpoint;(0,sV.Hy)(r,r,this.constraints.zoomToScale(t)),this.viewpoint=r,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(t,r){if(t)return this.animation&&(this.animation=null),this._createAnimation(),(0,g.N1)(()=>this.ready,r).then(()=>{let i={animate:!0,...r},s=(0,sV.Ue)(t,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)});f.Z.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(t,r){let i=i8(t)?i6(this,t):t;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set,n=!1,o=null,a=null;r?.include?ar(r.include,at(this,t=>s.add(t),t=>{o||(o=new Set),o.add(t)},t=>s.add(t),()=>n=!0)):(n=!0,s=new Set(this.allLayerViews)),r?.exclude&&ar(r.exclude,at(this,t=>s.delete(t),t=>{a||(a=new Set),a.add(t)}));let l=this.allLayerViews.filter(t=>!t.suspended&&s.has(t)).reverse(),u=this.toMap(i),d=[...n?this.graphicsView.hitTest(u).map(t=>({type:"graphic",graphic:t,layer:null,mapPoint:u})):[],...await Promise.all(l.map(t=>t.hitTest(u,i)).toArray())].filter(y.pC).flat().filter(y.pC);return o&&(d=d.filter(t=>!("graphic"in t)||!t.graphic||o.has(ae(t.graphic)))),a&&(d=d.filter(t=>!("graphic"in t)||!t.graphic||a.has(ae(t.graphic)))),{screenPoint:i,results:d}}async takeScreenshot(t){let r=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(r);return(0,oc.cv)(i,{format:r.format,quality:r.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(t){let r=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(r);return(0,oc.v8)(i,this._pixelFormat)}_createScreenshotPlan(t){let r;t=t||{};let i=this.supersampleScreenshotsEnabled?Math.min(4,(0,oc.RZ)(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;t.layers?(r=[],t.layers.forEach(t=>{let i=this.allLayerViews.find(r=>r.layer.id===t.id);i&&"container"in i&&i.container&&r.push(i.container)})):r=this._stage.children;let{format:s,quality:n}=(0,oc.LI)(t.format,t.quality);return function(t,r,i,s,n,o,a,l){let u;t.ignorePadding&&(s={left:0,right:0,top:0,bottom:0}),null!=t.width&&null!=t.height?u=[t.width,t.height]:null==t.width&&null!=t.height?u=[t.height,t.height]:null!=t.width&&null==t.height?u=[t.width,t.width]:null==t.width&&null==t.height&&(u=null);let d=i[0]-(s.left+s.right),h=i[1]-(s.top+s.bottom),p,c,f=t.area||{x:0,y:0,width:d,height:h};if(u){let t=u[0]/u[1];if(t>d/h){let r=f.width/t;f={x:f.x,y:Math.round(f.y+(f.height-r)/2),width:f.width,height:Math.round(r)}}else{let r=f.height*t;f={x:Math.round(f.x+(f.width-r)/2),y:f.y,width:Math.round(r),height:f.height}}}else u=[f.width,f.height];return u[0]>f.width?(p=Math.min(u[0]/f.width,r),c=u[0]/f.width/p):(p=1,c=u[0]/f.width),{resolutionScale:p,cropArea:{x:Math.round((f.x+s.left)*p),y:Math.round((f.y+s.top)*p),width:Math.round(f.width*p),height:Math.round(f.height*p)},outputScale:c,format:n,quality:o,children:a,rotation:l}}(t,i,this.size,this.padding,s,n,r,t.rotation)}get test(){return{takeScreenshot:t=>this._takeScreenshot(t)}}toMap(t){if(!this.ready)return null;let r=i8(t)?i6(this,t):t,[i,s]=this.state.toMap([0,0],[r.x,r.y]),n=this.spatialReference;return new M.Z({x:i,y:s,spatialReference:n})}toScreen(t){if(!this.ready)return null;let r=this._project(t,this.spatialReference),i=[r.x,r.y];return this.state.toScreen(i,i),(0,_.vW)(i[0],i[1])}on(t,r,i,s){return this.inputManager&&this.viewEvents.on(t,r,i,s)||super.on(t,r)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}hasLayerViewModule(t){return(0,y.pC)(sH[t.type])}importLayerView(t){return(t=>{let r=sH[t.type];if((0,y.Wi)(r))throw function(t){let r=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new h.Z(`${i}:view-not-supported`,`${r} is not supported in 2D`)}(t);return r(t)})(t)}pixelSizeAt(){return this.ready?this.state.resolution:(f.Z.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(t){return this.hitTest(t).then(r=>({...r,mapPoint:this.toMap(t)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let t=function(t){let r=(0,of.hc)(t);if(!r.available)return new h.Z("webgl:required","WebGL is required but not supported.");if("3d"===t&&r.majorPerformanceCaveat)return new h.Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!r.supportsHighPrecisionFragment)return new h.Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!r.supportsVertexShaderSamplers)return new h.Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(r.type===oy.zO.WEBGL1){if(!r.supportsElementIndexUint)return new h.Z("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!r.supportsStandardDerivatives)return new h.Z("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!r.supportsInstancedArrays)return new h.Z("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}(this.type);return(0,p.Z)("safari")&&9>(0,p.Z)("safari")&&(t=new h.Z("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,p.Z)("safari")})),(0,y.pC)(t)?(f.Z.getLogger(this.declaredClass).warn("#validate()",t.message),Promise.reject(t)):async function(){let[,{GraphicsView2D:t,GraphicContainer:r,LabelManager:s,MapViewNavigation:n,MagnifierView2D:o,Stage:a}]=await Promise.all([Promise.all([i.e(6057),i.e(6223),i.e(1938),i.e(3392)]).then(i.bind(i,23392)),Promise.all([i.e(6057),i.e(4813),i.e(8073),i.e(6223),i.e(3524),i.e(1938),i.e(3377),i.e(9957),i.e(5428),i.e(78),i.e(6873),i.e(4742),i.e(6063),i.e(8293),i.e(4773),i.e(4708)]).then(i.bind(i,94708))]);o3=t,o5=r,o4=s,o9=n,o6=o,o2=a}()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new sD),this.animation}_cancellableGoTo(t,r,i){let s=()=>t===this._gotoTask,n=i.then(()=>{s()&&(this.animation=null)}).catch(t=>{throw s()&&(this.animation=null,r.done||(r.stop(),this.frameTask.animationInProgress=!1)),t}),o=new Promise(t=>t(n));return r.when().catch(()=>{s()&&o.cancel&&o.cancel()}),o}_gotoImmediate(t,r){let i=this._gotoTask,s=this.animation,n=t.then(t=>{if((0,m.k_)(r),i!==this._gotoTask)throw new h.Z("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=t,s.finish()});return this._cancellableGoTo(i,s,n)}_flipStationary(t){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;let t=performance.now()-this._lastStationaryEventTimestamp;t<160&&(this._stationaryTimer=this._flipStationary(t))},t)),this._stationaryTimer}_getDefaultViewpoint(){let{constraints:t,initialExtent:r,map:i,padding:s,size:n}=this;if(!t)return null;let o=i&&"initialViewProperties"in i&&i.initialViewProperties,a={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};t.effectiveLODs?-1!==a.zoom&&(a.scale=t.zoomToScale(a.zoom)):a.zoom=-1;let u=null,d=null,h=0,p=a.viewpoint&&a.viewpoint.rotation,c=a.viewpoint&&a.viewpoint.targetGeometry;(0,y.pC)(c)&&("extent"===c.type?u=c:"point"===c.type&&(d=c,h=a.viewpoint.scale));let f=a.extent||u||y.Wg(o?.viewpoint?.targetGeometry)?.extent||r,m=a.center||d||f?.center,g=a.scale||h||o?.viewpoint?.scale||f&&(0,sV.EK)(f,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),_=a.rotation||p||o?.viewpoint?.rotation||0;return m&&g?new l.Z({targetGeometry:m,scale:g,rotation:_}):null}_gotoAnimated(t,r){let i=this._gotoTask,s=this.animation,n=t.then(t=>{if((0,m.k_)(r),i!==this._gotoTask)throw new h.Z("view:goto-interrupted","Goto was interrupted");return s.update(t),this.animationManager.animate(s,this.viewpoint,r),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,n)}_project(t,r){let i=t&&t.targetGeometry||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem||(0,E.fS)(r,i.spatialReference))return t;let s=(0,I.iV)(i,r);if(!s)throw new h.Z("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return t&&"esri.Viewpoint"===t.declaredClass?(t.targetGeometry=s,t):s}_resizeHandler(t){if(!this.ready)return;let r=this.state,i=this.state.paddedViewState.viewpoint,s=this.state.paddedViewState.size.concat();r.size=[t.width,t.height],(0,sV.SI)(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){this.timeline.begin("MapView Startup");let t=this._getDefaultViewpoint(),r=t.targetGeometry;try{this._project(t,this.spatialReference)}catch(i){f.Z.getLogger(this.declaredClass).warn(new b.Z("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:r.toJSON(),spatialReference:this.spatialReference,error:i})),t.targetGeometry=this.defaultsFromMap.extent?.center||new M.Z({x:0,y:0,spatialReference:this.spatialReference})}this.constraints?.fit(t),this._set("state",new n_({padding:this._get("padding"),size:this.size,viewpoint:t})),this.graphics.owner=this;let i=new o2(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new o6,this._magnifierView.magnifier=this.magnifier;let s=new o4({view:this});this._set("labelManager",s);let n=new sG({view:this});this._set("animationManager",n);let o=new o9({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",t=>this.fatalError=t.error),(0,g.YP)(()=>this.stationary,t=>i.stationary=t,g.tX),(0,g.YP)(()=>this.background,t=>{i.background=t,this._magnifierView.background=t},g.tX),(0,g.YP)(()=>this.magnifier,t=>this._magnifierView.magnifier=t,g.tX),(0,g.YP)(()=>this.renderingOptions,t=>i.renderingOptions=t,g.tX),(0,g.YP)(()=>this.highlightOptions,t=>i.highlightOptions=t,g.tX),(0,g.YP)(()=>this.state.id,()=>i.state=this.state,g.tX)],"map-view"),this._updateStageChildren();let a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(t=>t(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);let{center:[t,r],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new M.Z({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});let t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){let t=new nb.Z(T.Z.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);let r=new o3({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new o5(t)});this.frameTask.graphicsView=r,this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){let t=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,t.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(t){if(!this.ready)return;for(let t of(this.frameTask.stop(),this.allLayerViews))t.processDetach();this._destroySpatialReferenceDependentProperties();let r=this.state.paddedViewState.clone();if((0,y.Wi)(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=r.scale;else{let t=r.viewpoint.clone();t.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=t}let i=r.clone(),[s,n]=r.center,o=null;try{o=this._project(new M.Z({x:s,y:n,spatialReference:r.spatialReference}),t)}catch(r){(0,I.kR)()||f.Z.getLogger(this.declaredClass).warn(new b.Z("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o.toJSON(),spatialReference:t,error:r}))}o||(o=new M.Z({x:0,y:0,spatialReference:t}));let a=(0,sV.o2)(new l.Z({targetGeometry:new M.Z,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{let s=[r.size[0]/2,r.size[1]/2],n=[s[0]+20,s[1]],o=r.toMap([0,0],n),{x:l,y:u}=this._project(new M.Z({x:o[0],y:o[1],spatialReference:r.spatialReference}),t);o[0]=l,o[1]=u,i.toScreen(o,o);let d=(0,sV.dI)(s,o,n),h=Math.hypot(o[0]-s[0],o[1]-s[1])/20;!Number.isFinite(h)||Math.abs(h)>4?(a.rotation=0,a.targetGeometry=new M.Z({x:0,y:0,spatialReference:t})):(a.scale*=h,a.scale>(0,p.Z)("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(d)?d:0)}catch{}for(let t of(this._get("constraints").constrain(a,null),this._get("state").viewpoint=a,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties(),this.allLayerViews))t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};o8.type="2d",(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"animationManager",void 0),(0,o._)([(0,w.Cb)({constructOnly:!0})],o8.prototype,"deactivatedWebGLExtensions",void 0),(0,o._)([(0,w.Cb)({constructOnly:!0})],o8.prototype,"debugWebGLExtensions",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"featuresTilingScheme",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"fullOpacity",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"graphicsTileStore",null),(0,o._)([(0,w.Cb)()],o8.prototype,"graphicsView",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"state",void 0),(0,o._)([(0,w.Cb)()],o8.prototype,"initialExtentRequired",null),(0,o._)([(0,w.Cb)()],o8.prototype,"labelManager",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"resourceManager",null),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"textureManager",null),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"mapViewNavigation",void 0),(0,o._)([(0,w.Cb)({constructOnly:!0})],o8.prototype,"renderCanvas",void 0),(0,o._)([(0,w.Cb)()],o8.prototype,"renderingOptions",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"rendering",void 0),(0,o._)([(0,w.Cb)({constructOnly:!0})],o8.prototype,"supersampleScreenshotsEnabled",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"supportsGround",void 0),(0,o._)([(0,w.Cb)()],o8.prototype,"_stationaryTimer",void 0),(0,o._)([(0,w.Cb)()],o8.prototype,"_defaultsFromMapSettings",null),(0,o._)([(0,w.Cb)()],o8.prototype,"_pePromise",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"typeSpecificPreconditionsReady",null),(0,o._)([(0,w.Cb)()],o8.prototype,"animation",null),(0,o._)([(0,w.Cb)({type:o1})],o8.prototype,"background",null),(0,o._)([(0,w.Cb)({value:null,type:M.Z,dependsOn:["state.id","ready"]})],o8.prototype,"center",null),(0,o._)([(0,w.Cb)({type:s7})],o8.prototype,"constraints",null),(0,o._)([(0,w.Cb)({value:null,type:x.Z,dependsOn:["state.id","ready"]})],o8.prototype,"extent",null),(0,o._)([(0,w.Cb)()],o8.prototype,"floors",void 0),(0,o._)([(0,w.Cb)({type:oh})],o8.prototype,"highlightOptions",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"inputManager",void 0),(0,o._)([(0,w.Cb)()],o8.prototype,"map",void 0),(0,o._)([(0,w.Cb)({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],o8.prototype,"padding",null),(0,o._)([(0,w.Cb)()],o8.prototype,"resizeAlign",void 0),(0,o._)([(0,w.Cb)({readOnly:!0,dependsOn:["state.id"]})],o8.prototype,"resolution",null),(0,o._)([(0,w.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],o8.prototype,"rotation",null),(0,o._)([(0,w.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],o8.prototype,"scale",null),(0,o._)([(0,w.Cb)({constructOnly:!0})],o8.prototype,"spatialReferenceLocked",void 0),(0,o._)([(0,w.Cb)()],o8.prototype,"stationary",null),(0,o._)([(0,w.Cb)({type:op.T,readOnly:!0})],o8.prototype,"timeline",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"type",void 0),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"updating",null),(0,o._)([(0,w.Cb)({value:null,type:l.Z,dependsOn:["state.id","ready"]})],o8.prototype,"viewpoint",null),(0,o._)([(0,w.Cb)({value:-1,dependsOn:["state.id","ready"]})],o8.prototype,"zoom",null),(0,o._)([(0,w.Cb)({readOnly:!0})],o8.prototype,"navigating",null),(0,o._)([(0,w.Cb)({type:oY})],o8.prototype,"ui",void 0);let o7=o8=(0,o._)([(0,S.j)("esri.views.MapView")],o8);function ae(t){let r=t.getObjectId();return r?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${r}`:`"MapView/${t.uid}`}function at(t,r,i,s,n){return o=>{if(o instanceof a.Z){if(o.layer===t)n?.();else{let r=t.allLayerViews.find(t=>t.layer===o.layer);r&&s?.(r)}i(ae(o))}else{let i=t.allLayerViews.find(t=>t.layer===o);i&&r(i)}}}function ar(t,r){if(t){if((0,c.TW)(t))for(let i of t)if((0,c.TW)(i))for(let t of i)r(t);else r(i);else r(t)}}},69280:(t,r,i)=>{"use strict";var s,n;i.d(r,{JY:()=>s}),(n=s||(s={}))[n.Global=1]="Global",n[n.Local=2]="Local"},82676:(t,r,i)=>{"use strict";i.d(r,{a:()=>a});var s=i(66150);class n{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;let r=t.modifiers;for(let t of this.keyModifiers)if(!r.has(t))return!1;return!0}}let o=s.Z.getLogger("esri.views.input.InputHandler");class a{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches)for(let t in this._incomingEventMatches=[],this._incoming)for(let r of this._incoming[t])this._incomingEventMatches.push(r.match);return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?o.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(t=>this._handleEvent(t)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let s;"function"==typeof r?(i=r,s=[]):s=r||[];let o="string"==typeof t?new n(t,s):t,a=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},u=t=>{let r=this._incoming[t.match.eventType];if(r){let i=r.indexOf(t);r.splice(i,1),a(),this._manager&&this._manager.updateDependencies()}},d=new l(o,i,{onPause:u,onRemove:u,onResume:t=>{let r=this._incoming[t.match.eventType];r&&!r.includes(t)&&(r.push(t),a(),this._manager&&this._manager.updateDependencies())}}),h=this._incoming[o.eventType];return h||(h=[],this._incoming[o.eventType]=h),h.push(d),a(),this._manager&&this._manager.updateDependencies(),d}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);let r=new u(t,{onEmit:(t,r,i,s)=>{this._manager?.emit(t.eventType,r,i,s)},onRemove:t=>{delete this._outgoing[t.eventType],this._manager?.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){this._manager?.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager?.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):o.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){let r=this._incoming[t.type];if(r){for(let i of r)if(i.match.matches(t)&&(i.callback?.(t),t.shouldStopPropagation()))break}}}class l{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class u{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}}},5525:(t,r,i)=>{"use strict";i.d(r,{$:()=>w,f:()=>S});var s,n,o=i(24765),a=i(53306),l=i(66150),u=i(82639),d=i(91425),h=i(53919),p=(i(99950),i(21314),i(30407)),c=i(50719),f=i(42169);class y{constructor(t,r){for(let i in this._owner=r,this._properties={},this._afterDispatchHandle=null,t){let r=t[i],s=new c.e(r,void 0,void 0,2,2);this._properties[i]={pool:s,acquired:[]}}this._afterDispatchHandle=(0,f.Fs)(()=>this._release())}destroy(){for(let t in this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null),this._properties){let r=this._properties[t];for(let t of r.acquired)(0,f.NC)(t)||r.pool.release(t);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){let r=this._owner._get(t),i=this._properties[t],s=i.pool.acquire();for(i.acquired.push(s);s===r;)i.acquired.push(s),s=i.pool.acquire();return s}_release(){for(let t in this._properties){let r=this._properties[t],i=0;for(let t of r.acquired)(0,f.NC)(t)?r.acquired[i++]=t:r.pool.release(t);r.acquired.length=i}}}var m=i(30312),g=i(82676);class _ extends g.a{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",t=>{this._update(t.data)})}_update(t){let r="touch"===t.native.pointerType?"touch":"mouse",{x:i,y:s}=t;r===this._value&&this._x===i&&this._y===s||(this._value=r,this._x=i,this._y=s,this._onChange(r,i,s))}}var b=i(85224);class v extends g.a{constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new b.f(!1),this._onPointerAdd=({data:t})=>{"touch"===t.pointerType&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{"touch"===t.pointerType&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}get multiTouchActive(){return this._multiTouchActive.get()}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}}let w=class extends a.Z{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=m.CK,this._latestPointerType="mouse",this._propertiesPool=new y({latestPointerLocation:x},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){for(let t of Object.keys(this._nameToGroup))this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(t,r,i=S.INTERNAL){if(this._nameToGroup[t])return void l.Z.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+t+"`");if(0===r.length)return void l.Z.getLogger(this.declaredClass).error("Can't register a group of zero handlers");let s={name:t,handlers:r.map(t=>({handler:t,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=s;for(let t=s.handlers.length-1;t>=0;t--){let r=s.handlers[t];this._handlers.push(r),r.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(t,i,s,n,o)=>{this._emitInputEvent(r.priorityIndex+1,t,i,s,o,n)},setPointerCapture:(t,i)=>{this._setPointerCapture(s,r,t,i)},setEventCallback:t=>{r.eventCallback=t},setUninstallCallback:t=>{r.uninstallCallback=t},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){let r=this._nameToGroup[t];r?(r.handlers.forEach(t=>{t.removed=!0,t.uninstallCallback?.()}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):l.Z.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return void 0!==this._nameToGroup[t]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;let t=new Set,r=new Set;this._handlersPriority=[];for(let t=this._handlers.length-1;t>=0;t--){let r=this._handlers[t];r.priorityIndex=t,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){let s=this._handlersPriority[i];s.priorityIndex=i;let n=s.handler.hasSideEffects;if(!n){for(let r of s.handler.outgoingEventTypes)if(t.has(r)){n=!0;break}}if(n)for(let i of s.handler.incomingEventMatches)for(let s of(t.add(i.eventType),i.keyModifiers))(0,m.wj)(s)||r.add(s);s.active=n}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;let s=this._get("latestPointerLocation");if((0,u.Wi)(s)||s.x!==r||s.y!==i){let t=this._propertiesPool.get("latestPointerLocation");t.x=r,t.y=i,this._set("latestPointerLocation",t)}}_onEventReceived(t,r){"pointer-capture-lost"===t&&this._pointerCaptures.delete(r.native.pointerId),this._updateKeyModifiers(t,r);let i=null!=this.test.timestamp?this.test.timestamp:r.native?r.native.timestamp:void 0,s=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,s)}_updateKeyModifiers(t,r){if(!r)return;let i=!1,s=()=>{if(!i){let t=new Set;this._activeKeyModifiers.forEach(r=>{t.add(r)}),this._activeKeyModifiers=t,i=!0}},n=(t,r)=>{r&&!this._activeKeyModifiers.has(t)?(s(),this._activeKeyModifiers.add(t)):!r&&this._activeKeyModifiers.has(t)&&(s(),this._activeKeyModifiers.delete(t))};if("key-down"===t||"key-up"===t){let i=r.key;this._keyModifiers.has(i)&&n(i,"key-down"===t)}let o=r.native;n("Alt",!(!o||!o.altKey)),n("Ctrl",!(!o||!o.ctrlKey)),n("Shift",!(!o||!o.shiftKey)),n("Meta",!(!o||!o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new _((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new v,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],S.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,S.INTERNAL)}_setPointerCapture(t,r,i,s){let n=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),s?(o.add(n),1===o.size&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),0===o.size&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,s){this._emitInputEvent(0,t,r,i,s)}_emitInputEvent(t,r,i,s,n,o){let a={event:new C(r,i,void 0!==s?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),o||this._activeKeyModifiers,void 0!==n&&n),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(a):this._doNewPropagation(a)}_doNewPropagation(t){this._currentPropagation={events:new d.Z,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){let t=(0,u.s3)(this._currentPropagation);for(;t.events.length>0;){let{event:r,priorityIndex:i}=t.events.pop(),s=r.data&&r.data.eventId;if(null==s||!this._stoppedPropagationEventIds.has(s))for(t.currentHandler=this._handlersPriority[i];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!r.shouldStopPropagation()&&t.currentHandler.eventCallback?.(r),r.shouldStopPropagation()){null!=s&&this._stoppedPropagationEventIds.add(s);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(t){let r=new d.Z;r.push(t);let i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(let i of t.handler.incomingEventMatches)for(let t of r.handler.incomingEventMatches){if(i.eventType!==t.eventType)continue;let r=i.keyModifiers.filter(r=>t.keyModifiers.includes(r));if(r.length===i.keyModifiers.length!=(r.length===t.keyModifiers.length))return i.keyModifiers.length>t.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){let r=[];for(let i of t){let t=0;for(;t<r.length&&this._compareHandlerPriority(i,r[t])>=0;)t++;r.splice(t,0,i)}return r}get debug(){let t=t=>{let r=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=r};return{injectEvent:(r,i)=>{t(()=>{this._onEventReceived(r,i)})},disablePointerCapture:t}}};(0,o._)([(0,h.Cb)({readOnly:!0})],w.prototype,"hasPendingInputs",null),(0,o._)([(0,h.Cb)({constructOnly:!0})],w.prototype,"eventSource",void 0),(0,o._)([(0,h.Cb)({constructOnly:!0})],w.prototype,"recognizers",void 0),(0,o._)([(0,h.Cb)()],w.prototype,"_latestPointerType",void 0),(0,o._)([(0,h.Cb)()],w.prototype,"latestPointerType",null),(0,o._)([(0,h.Cb)()],w.prototype,"multiTouchActive",null),(0,o._)([(0,h.Cb)({readOnly:!0})],w.prototype,"latestPointerLocation",void 0),w=(0,o._)([(0,p.j)("esri.views.input.InputManager")],w);class C{constructor(t,r,i,n,o){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=o,this._propagationState=s.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=s.STOPPED}shouldStopPropagation(){return 0!=(this._propagationState&s.STOPPED)}async(t){this._propagationState|=s.PAUSED;let r=(t,r)=>{this._propagationState&=~s.PAUSED;let i=this._resumeCallback;if(this._resumeCallback=null,i&&i(),r)throw t;return t};return("function"==typeof t?t():t).then(t=>r(t,!1),t=>r(t,!0))}shouldPausePropagation(t){return!!(this._propagationState&s.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}(n=s||(s={}))[n.NONE=0]="NONE",n[n.STOPPED=1]="STOPPED",n[n.PAUSED=2]="PAUSED";let S={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class x{}},30312:(t,r,i)=>{"use strict";i.d(r,{CK:()=>n,kK:()=>a,wj:()=>l});var s=i(47845);let n=(0,i(96082).Z)("mac")?"Meta":"Ctrl",o={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)o[t]=String.fromCharCode(t);for(let t=1;t<25;t++)o[111+t]=`F${t}`;for(let t=65;t<91;t++)o[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function a(t){if(void 0!==t.key)return(0,s.kK)(t);let r=o[t.keyCode];return Array.isArray(r)?t.shiftKey?r[1]:r[0]:r}function l(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}},54685:(t,r,i)=>{"use strict";i.d(r,{e:()=>u});var s=i(82639),n=i(66138),o=i(91425),a=i(57446);class l{constructor(t,r){this.item=t,this.controller=r,this.promise=null}}class u{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new o.Z(t.peeker),this.process=t.process;let r=t.scheduler;t.priority&&(0,s.pC)(r)&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){let r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();let t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(t=>t.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){let r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,r){let i=this.get(t);if(i)return i;let o=new AbortController,a=null;r&&(a=(0,n.fu)(r,()=>o.abort()));let l=()=>{u.remove(),(0,s.pC)(a)&&a.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},u=(0,n.$F)(o.signal,()=>{let r=this._processingItems.get(t);r&&r.controller.abort(),l(),d.reject((0,n.zE)())}),d=(0,n.dD)();return this._deferreds.set(t,d),this._controllers.set(t,o),d.promise.then(l,l),this._queue.push(t),this._scheduleNext(),d.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){let t=[];for(let r of(this._processingItems.forEach(r=>t.push(r)),this._processingItems.clear(),t))this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){let t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=(0,a.Os)(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){let r;if((0,s.Wi)(t))return;let i=new AbortController,o=new l(t,i);this._processingItems.set(t,o);try{r=this.process(t,i.signal)}catch(t){this._processError(o,t)}(0,n.y8)(r)?(o.promise=r,r.then(t=>this._processResult(o,t),t=>this._processError(o,t))):this._processResult(o,r)}get test(){return{update:t=>this.runTask(t)}}}},80236:(t,r,i)=>{"use strict";i.d(r,{sq:()=>N,T8:()=>a,G5:()=>F});var s,n,o,a,l,u,d,h=i(46366),p=i(66150),c=i(82639),f=i(63979),y=i(71937),m=i(66138),g=i(67844),_=i(63441),b=i(85224);class v{constructor(){this._tasks=[],this._running=new b.f(!1)}get length(){return this._tasks.length}get running(){return this._running.get()}destroy(){this.cancelAll()}runTask(t){for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,i){return this._running.set(!0),new Promise((s,n)=>this._tasks.push(new w(s,n,t,r,i)))}unshift(t,r,i){return this._running.set(!0),new Promise((s,n)=>this._tasks.unshift(new w(s,n,t,r,i)))}_process(t){if(0===this._tasks.length)return!1;let r=this._tasks.shift();try{let i=(0,m.Hc)(r.signal);if(i&&!r.abortCallback)r.reject((0,m.zE)());else{let s=i?r.abortCallback?.(m.zE()):r.callback(t);(0,m.y8)(s)?s.then(r.resolve,r.reject):r.resolve(s)}}catch(t){r.reject(t)}return this._running.set(this._tasks.length>0),!0}cancelAll(){let t=(0,m.zE)();for(let r of this._tasks)if(r.abortCallback){let i=r.abortCallback(t);r.resolve(i)}else r.reject(t);this._tasks.length=0,this._running.set(!1)}}class w{constructor(t,r,i,s,n){this.resolve=t,this.reject=r,this.callback=i,this.signal=s,this.abortCallback=n}}var C=i(24765),S=i(53306),x=i(53919),M=(i(99950),i(21314),i(30407));let I=class extends S.Z{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,C._)([(0,x.Cb)()],I.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,C._)([(0,x.Cb)()],I.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);let E=new(I=(0,C._)([(0,M.j)("esri.views.support.DebugFlags")],I));(s=o||(o={}))[s.ANIMATING=0]="ANIMATING",s[s.INTERACTING=1]="INTERACTING",s[s.IDLE=2]="IDLE",(l=a||(a={})).RESOURCE_CONTROLLER="schedule",l.SLIDE="slide",l.STREAM_DATA_LOADER="stream loader",l.ELEVATION_QUERY="elevation query",l.TERRAIN_SURFACE="terrain",l.SURFACE_GEOMETRY_UPDATES="surface geometry updates",l.GRAPHICS_CORE="Graphics3D",l.I3S_CONTROLLER="I3S",l.POINT_CLOUD_LAYER="point cloud",l.FEATURE_TILE_FETCHER="feature fetcher",l.OVERLAY="overlay",l.STAGE="stage",l.GRAPHICS_DECONFLICTOR="graphics deconflictor",l.FILTER_VISIBILITY="Graphics3D filter visibility",l.SCALE_VISIBILITY="Graphics3D scale visibility",l.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",l.POINT_OF_INTEREST_FREQUENT="POI frequent",l.POINT_OF_INTEREST_INFREQUENT="POI infrequent",l.LABELER="labeler",l.FEATURE_QUERY_ENGINE="feature query",l.FEATURE_TILE_TREE="feature tile tree",l.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",l.ELEVATION_ALIGNMENT="elevation alignment",l.TEXT_TEXTURE_ATLAS="text texture atlas",l.TEXTURE_UNLOAD="texture unload",l.LINE_OF_SIGHT_TOOL="line of sight tool",l.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",l.ELEVATION_PROFILE="elevation profile",l.SNAPPING="snapping",l.SHADOW_ACCUMULATOR="shadow accumulator",l.CLOUDS_GENERATOR="cloud generator",l[l.TEST_PRIO=1]="TEST_PRIO";let T=new Map([[a.RESOURCE_CONTROLLER,0],[a.SLIDE,0],[a.STREAM_DATA_LOADER,0],[a.ELEVATION_QUERY,0],[a.TERRAIN_SURFACE,1],[a.SURFACE_GEOMETRY_UPDATES,1],[a.GRAPHICS_CORE,2],[a.I3S_CONTROLLER,2],[a.POINT_CLOUD_LAYER,2],[a.FEATURE_TILE_FETCHER,2],[a.OVERLAY,4],[a.STAGE,4],[a.GRAPHICS_DECONFLICTOR,4],[a.FILTER_VISIBILITY,4],[a.SCALE_VISIBILITY,4],[a.FRUSTUM_VISIBILITY,4],[a.CLOUDS_GENERATOR,4],[a.POINT_OF_INTEREST_FREQUENT,6],[a.POINT_OF_INTEREST_INFREQUENT,30],[a.LABELER,8],[a.FEATURE_QUERY_ENGINE,8],[a.FEATURE_TILE_TREE,16],[a.FEATURE_TILE_TREE_ACTIVE,0],[a.ELEVATION_ALIGNMENT,12],[a.TEXT_TEXTURE_ATLAS,12],[a.TEXTURE_UNLOAD,12],[a.LINE_OF_SIGHT_TOOL,16],[a.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[a.SNAPPING,0],[a.SHADOW_ACCUMULATOR,30]]);function P(t){return T.has(t)?T.get(t):"number"==typeof t?t:1}let A=(0,_.HA)(6.5),k=(0,_.HA)(1),O=(0,_.HA)(30),R=(0,_.HA)(1e3/30),L=(0,_.HA)(100);(function(t){t.Scheduler=class{constructor(){for(let t of(this._updating=new b.f(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new f.Z("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=o.INTERACTING,this._tasks=new y.Z,this._runQueue=new y.Z,this._load=0,this._idleStateCallbacks=new y.Z,this._idleUpdatesStartFired=!1,this._maxReschedule=32,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,g.YP)(()=>E.SCHEDULER_LOG_SLOW_TASKS,t=>this._debug=t,g.nn),Object.keys(a)))this.performanceInfo.tasks.set(a[t],new f.Z(a[t]));let t=this;this._test={FRAME_SAFETY_BUDGET:A,INTERACTING_BUDGET:R,IDLE_BUDGET:L,get availableBudget(){return t._budget.budget},usedBudget:0,getBudget:()=>t._budget,setBudget:r=>t._budget=r,updateTask:t=>this._updateTask(t),getState:t=>this._getState(t),getRuntime:t=>this._getRuntime(t),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}get updating(){return this._updating.get()}set updating(t){this._updating.set(t)}destroy(){this._tasks.toArray().forEach(t=>t.remove()),this._tasks.clear(),(0,c.hw)(this._debugHandle),this._microTaskQueued=!1,this._updating.set(!1)}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=32,this._schedule(),this.frame()))}))}registerTask(t,i){let s=P(t),n=new r(this,t,i,s);return this._tasks.push(n),this.performanceInfo.tasks.has(t)||this.performanceInfo.tasks.set(t,new f.Z(t)),n}registerIdleStateCallbacks(t,r){let i={idleBegin:t,idleEnd:r};this._idleStateCallbacks.push(i),this.state===o.IDLE&&this._idleUpdatesStartFired&&i.idleBegin();let s=this;return{remove:()=>this._removeIdleStateCallbacks(i),set idleBegin(e){s._idleUpdatesStartFired&&(i.idleEnd(),s._state===o.IDLE&&e()),i.idleBegin=e},set idleEnd(e){i.idleEnd=e}}}get load(){return this._load}set state(t){this._state!==t&&(this._state=t,this.state!==o.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(t=>t.idleEnd())))}get state(){return this._state}updateBudget(t){this._test.usedBudget=0,++this._frameNumber;let r=A,i=t.frameDuration,s=k;switch(this.state){case o.IDLE:r=(0,_.HA)(0),i=(0,_.HA)(Math.max(L,t.frameDuration)),s=O;break;case o.INTERACTING:i=(0,_.HA)(Math.max(R,t.frameDuration));case o.ANIMATING:}return i=(0,_.HA)(i-t.elapsedFrameTime-r),this.state!==o.IDLE&&i<k&&!this._forceTask?(this._forceTask=!0,!1):(i=(0,_.HA)(Math.max(i,s)),this._budget.reset(i,this.state),this._maxReschedule=32,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case o.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(t=>t.idleBegin())),this._runIdle();break;case o.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset((0,_.HA)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(t){this._idleUpdatesStartFired&&t.idleEnd(),this._idleStateCallbacks.removeUnordered(t)}removeTask(t){this._tasks.removeUnordered(t),this._runQueue.removeUnordered(t)}_updateTask(t){this._tasks.forAll(r=>{r.name===t&&r.setPriority(t)})}_getState(t){if(this._runQueue.some(r=>r.name===t))return d.SCHEDULED;let r=d.IDLE;return this._tasks.forAll(i=>{i.name===t&&i.needsUpdate&&(i.schedulePriority<=1?r=d.READY:r!==d.READY&&(r=d.WAITING))}),r}_getRuntime(t){let r=0;return this._tasks.forAll(i=>{i.name===t&&(r+=i.runtime)}),r}_resetRuntimes(){this._tasks.forAll(t=>t.runtime=0)}_getRunning(){let t=new Map;if(this._tasks.forAll(r=>{r.needsUpdate&&t.set(r.name,(t.get(r.name)||0)+1)}),0===t.size)return null;let r="";return t.forEach((t,i)=>{r+=t>1?` ${t}x ${i}`:` ${i}`}),r}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){let t=this._tasks.reduce((t,r)=>r.needsUpdate?++t:t,0);this._load=.9*this._load+t*(1-.9)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(t=>!!t.needsUpdate||(t.schedulePriority=t.basePriority,!1)),this._tasks.forAll(t=>{0===t.basePriority&&t.needsUpdate&&!this._runQueue.includes(t)&&this._runQueue.unshift(t)});0===this._runQueue.length;){let t=!1,r=0;if(this._tasks.forAll(i=>{!i.needsUpdate||0===i.schedulePriority||0===i.basePriority||i.task.runOncePerFrame&&i.lastFrameRun===this._frameNumber||(t=!0,r=Math.max(r,i.basePriority),1===i.schedulePriority?(i.schedulePriority=0,this._runQueue.push(i)):--i.schedulePriority)}),!t)return this._updating.set(!1),!1;--this._maxReschedule}return this._updating.set(!0),!0}_run(){let t=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){let r=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)}catch(t){p.Z.getLogger("esri.views.support.Scheduler").error(`Exception in task "${i.name}"`,t)}i.schedulePriority=i.basePriority,i.lastFrameRun=this._frameNumber;let s=this._budget.now()-r;if(i.runtime+=s,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+s),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",i.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updating.set(this._tasks.some(t=>t.needsUpdate)),void this._recordFrameTaskTimes(this._budget.now()-t)}while(this._schedule());this._updating.set(this._tasks.some(t=>t.needsUpdate)),this._recordFrameTaskTimes(this._budget.now()-t)}_startFrameTaskTimes(){for(let t of Object.keys(a))this._frameTaskTimes.set(a[t],0)}_recordFrameTaskTimes(t){this._frameTaskTimes.forEach((t,r)=>this.performanceInfo.tasks.get(r).record(t)),this.performanceInfo.total.record(t)}get test(){return this._test}};class r{constructor(t,r,i,s){this._scheduler=t,this.name=r,this._basePriority=s,this.lastFrameRun=0,this.runtime=0,this._queue=new v,this._handles=new h.Z,this.schedulePriority=this._basePriority,this._task=new b.f((0,c.pC)(i)?i:this._queue),this._handles.add((0,g.gx)(()=>this.task.running,()=>t.activate()))}get task(){return this._task.get()}get updating(){return this._queue.running}remove(){this.processQueue(F),this._scheduler.removeTask(this),this.schedule=N.schedule,this.reschedule=N.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(t){this.name=t;let r=P(t);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=r),this._basePriority=r}get priority(){return this.name}set priority(t){this.setPriority(t)}get needsUpdate(){return this.updating||this.task.running}schedule(t,r,i){return this._queue.push(t,r,i)}reschedule(t,r,i){return this._queue.unshift(t,r,i)}processQueue(t){this._queue.runTask(t)}}class i{constructor(){this._begin="undefined"!=typeof performance?performance.now():0,this._budget=0,this._state=o.IDLE,this._done=!1,this._enabled=!0}run(t){return!this.done&&(!0===t()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(t){this._enabled=t}reset(t,r){this._begin=this.now(),this._budget=t,this._state=r,this._done=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=!1}get hasProgressed(){return this._done}}t.Budget=i})(u||(u={})),(n=d||(d={})).SCHEDULED="s",n.READY="r",n.WAITING="w",n.IDLE="i";let F=(()=>{let t=new u.Budget;return t.enabled=!1,t})(),N=new class{remove(){}processQueue(){}schedule(t,r,i){try{if((0,m.Hc)(r)){let t=(0,m.zE)();return i?Promise.resolve(i(t)):Promise.reject(t)}return(0,m.gx)(t(F))}catch(t){return Promise.reject(t)}}reschedule(t,r,i){return this.schedule(t,r,i)}}},20522:(t,r,i)=>{"use strict";i.d(r,{LI:()=>h,RZ:()=>p,TT:()=>c,cv:()=>o,v8:()=>a}),i(96082);var s=i(5047),n=i(82639);function o(t,r,i){let{ctx:s,canvas:n}=l(t,i),o=s.getImageData(0,0,t.width,t.height),a=function(t,r){let i=f[r.format],s=r.quality/100;return t.toDataURL(i,s)}(n,r);return u(n),{dataUrl:a,data:o}}function a(t,r){let{ctx:i,canvas:s}=l(t,r),n=i.getImageData(0,0,t.width,t.height);return u(s),n}function l(t,r){let i=((0,n.Wi)(d)&&(d=document.createElement("canvas")),d);r.premultipliedAlpha&&function(t){let r=t.data,i=r.length;for(let t=0;t<i;t+=4){let i=r[t+3];if(255!==i&&i>0){let s=255/i;r[t+0]=r[t+0]*s,r[t+1]=r[t+1]*s,r[t+2]=r[t+2]*s}}}(t),i.width=t.width,i.height=t.height;let s=i.getContext("2d");return s.putImageData(t,0,0),r.flipY&&(s.save(),s.globalCompositeOperation="copy",s.scale(1,-1),s.translate(0,-s.canvas.height),s.drawImage(s.canvas,0,0),s.restore()),{ctx:s,canvas:i}}function u(t){t.width=0,t.height=0}let d=null;function h(t,r){let i=function(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return y}}(t),n=m[i];return{format:i,quality:(0,s.uZ)(null!=r?r:n,0,100)}}function p(t,r){return r/Math.max(t[0],t[1])}function c(t,r,i,s=0,n=0,o=t.width-s,a=t.height-n,l=!1){let{data:u}=t,{width:d,height:h,data:p}=r,c=o/d,f=a/h,y=Math.ceil(c/2),m=Math.ceil(f/2),g=t.width;for(let t=0;t<h;t++)for(let r=0;r<d;r++){let o=4*(r+(l?h-t-1:t)*d),a=0,_=0,b=0,v=0,w=0,C=0,S=(t+.5)*f;for(let o=Math.floor(t*f);o<(t+1)*f;o++){let t=Math.abs(S-(o+.5))/m,l=(r+.5)*c,d=t*t;for(let t=Math.floor(r*c);t<(r+1)*c;t++){let r=Math.abs(l-(t+.5))/y,h=Math.sqrt(d+r*r);if(h>=1)continue;let p=2*h*h*h-3*h*h+1,c=4*(s+t+(n+o)*g);C+=p*u[c+3],_+=p,!i&&u[c+3]<255&&(p=p*u[c+3]/255),b+=p*u[c],v+=p*u[c+1],w+=p*u[c+2],a+=p}}p[o]=b/a,p[o+1]=v/a,p[o+2]=w/a,p[o+3]=C/_}return r}let f={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},y="png",m={png:100,jpg:98,jpeg:98}},84564:(t,r,i)=>{"use strict";let s,n;i.d(r,{hc:()=>l});var o=i(82639),a=i(74062);function l(t){let r=(0,a.Sh)(t);for(;r.length>1;){let t=u(r.shift());if(t.available)return t}return u(r.shift())}function u(t){switch(t){case a.zO.WEBGL1:return s||(s=function(){let t=new h,r=c(a.zO.WEBGL1,t);return(0,o.Wi)(r)||(t.supportsElementIndexUint=null!==r.getExtension("OES_element_index_uint"),t.supportsStandardDerivatives=null!==r.getExtension("OES_standard_derivatives"),t.supportsInstancedArrays=null!==r.getExtension("ANGLE_instanced_arrays"),t.supportsTextureFloat=null!==r.getExtension("OES_texture_float"),t.supportsTextureHalfFloat=null!==r.getExtension("OES_texture_half_float"),t.supportsColorBufferFloat=null!==r.getExtension("WEBGL_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==r.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=null!==r.getExtension("EXT_color_buffer_half_float")),t}()),s;case a.zO.WEBGL2:return n||(n=function(){let t=new p,r=c(a.zO.WEBGL2,t);return(0,o.Wi)(r)||(t.supportsColorBufferFloat=null!==r.getExtension("EXT_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==r.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||null!==r.getExtension("EXT_color_buffer_half_float")),t}()),n}}class d{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class h extends d{constructor(){super(...arguments),this.type=a.zO.WEBGL1}}class p extends d{constructor(){super(...arguments),this.type=a.zO.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function c(t,r){if(t===a.zO.WEBGL1&&"undefined"==typeof WebGLRenderingContext||t===a.zO.WEBGL2&&"undefined"==typeof WebGL2RenderingContext)return null;let i=document.createElement("canvas");if(!i)return null;let s=(0,a.kr)(i,t,{failIfMajorPerformanceCaveat:!0});if((0,o.Wi)(s)&&(s=(0,a.kr)(i,t),(0,o.pC)(s)&&(r.majorPerformanceCaveat=!0)),(0,o.Wi)(s))return s;if(t===a.zO.WEBGL1){let t=s.getParameter(s.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(t){let i=parseFloat(t[1]);r.available=i>=.94}}else r.available=!0;r.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),r.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;let n=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return n&&(r.supportsHighPrecisionFragment=n.precision>0),s}},74062:(t,r,i)=>{"use strict";i.d(r,{Sh:()=>u,kr:()=>d,sj:()=>l,zO:()=>s});var s,n,o=i(96082),a=i(82639);function l(t,r,i={}){let s=u(t);for(;s.length>1;){let t=d(r,s.shift(),i);if((0,a.pC)(t))return t}return function(t,r,i={}){if(!window.WebGLRenderingContext)return h(t,p),null;let s=d(t,r,i);return(0,a.Wi)(s)&&h(t,c),s}(r,s.shift(),i)}function u(t){let r=(0,o.Z)("esri-force-webgl");if(r===s.WEBGL1||r===s.WEBGL2)return[r];switch(t){case"2d":return(0,o.Z)("mac")&&(0,o.Z)("chrome")?[s.WEBGL1,s.WEBGL2]:[s.WEBGL2,s.WEBGL1];case"3d":return[s.WEBGL2,s.WEBGL1]}}function d(t,r,i={}){let n=r===s.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"],o=null;for(let r of n){try{o=t.getContext(r,i)}catch(t){}if(o)break}return o}function h(t,r){let i=t.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+r+"</div></div></td></tr></table>")}(n=s||(s={}))[n.WEBGL1=1]="WEBGL1",n[n.WEBGL2=2]="WEBGL2";let p='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',c='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},59534:(t,r,i)=>{"use strict";i.d(r,{a:()=>n,b:()=>o});var s=i(21314);function n(t){return Math.max(0,Math.min((0,s.vU)(100*(1-t)),100))}function o(t){return Math.max(0,Math.min(1-t/100,1))}},91594:(t,r,i)=>{"use strict";i.d(r,{Nw:()=>c});var s=i(12790),n=i(59118),o=i(82639),a=i(12619),l=i(32802),u=i(39574);let d=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),h=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function p(t,r){"maxScale"in t&&(r.maxScale=(0,l.k)(t.maxScale)),"minScale"in t&&(r.minScale=(0,l.k)(t.minScale))}function c(t,r,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new s.Z("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(function(t,r){if(r.restrictedWebMapWriting){let i="basemap"===r.layerContainerType?d:"operational-layers"===r.layerContainerType?h:null;return!(0,o.pC)(i)||i.has(t.type)&&!(0,u.rQ)(t)}return!0}(t,i)){let r={};return t.write(r,i)?r:null}return(0,o.pC)(r)&&function(t,r){if(function(t,r){if((0,u.rQ)(t)){let i=(0,a.hS)("featureCollection.layers",r),s=i&&i[0]&&i[0].layerDefinition;s&&p(t,s)}else"stream"===t.type?p(t,r.layerDefinition=r.layerDefinition||{}):"group"!==t.type&&p(t,r)}(t,r),"blendMode"in t&&(r.blendMode=t.blendMode,"normal"===r.blendMode&&delete r.blendMode),r.opacity=(0,l.k)(t.opacity),r.title=t.title||"Layer",r.visibility=t.visible,"legendEnabled"in t&&"wmts"!==t.type){if((0,u.rQ)(t)){let i=r.featureCollection;i&&(i.showLegend=t.legendEnabled)}else r.showLegend=t.legendEnabled}}(t,r=(0,n.d9)(r)),r}},87291:(t,r,i)=>{"use strict";i.d(r,{Z:()=>V});var s=i(24765),n=(i(92886),i(19016)),o=i(88832),a=i(47845),l=i(46366),u=(i(96082),i(59118)),d=i(66150),h=i(82639),p=i(3832),c=i(66138),f=i(67844),y=i(16743),m=i(53919),g=i(36844),_=i(30407),b=i(11918),v=i(62783),w=i(2162);i(31088);let C={handleInterceptedEvent:(t,r,i,s)=>(t.scheduleRender(),r.properties[`on${s.type}`].apply(r.properties.bind||i,[s]))},S={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,r,i)=>{t.style[r]=i}},x=(t,r,i=!1)=>{let s=t;return r.forEach((t,n)=>{let o,a;let l=s?.children?(o=s.children,a=r=>r.domNode===t,o.find(a)):void 0;i&&!l&&n!==r.length-1||(s=l)}),s};var M=i(87611),I=i(34517);function E(){let{classList:t}=document.body,r=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(I.d)||t.contains(I.a)&&r?"dark":"light",s=t=>document.body.dispatchEvent(new CustomEvent("calciteThemeChange",{bubbles:!0,detail:{theme:t}})),n=t=>{o!==t&&s(t),o=t},o=i();s(o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>n(t.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}"undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document&&("interactive"===document.readyState?E():document.addEventListener("DOMContentLoaded",()=>E(),{once:!0}));var T=i(6487),P=i(82583),A=i(57872);let k=new Set;var O=i(90522),R=i(93381),L=i(11284),F=i(48463);let N=0,j=(t=>{let r;let i={...C,...t},s={...S,...i},n=s.performanceLogger,o,a=!0,l=!1,u=[],d=[],h=(t,o,a)=>{let l;s.eventHandlerInterceptor=(t,s,o,a)=>function(t){let s,o;n("domEvent",t);let a=((t,r)=>{let i=[];for(;t&&t!==r;)i.push(t),t=t.parentNode;return i})(t.currentTarget,l.domNode),u=a.some(t=>customElements.get(t?.tagName?.toLowerCase()));if(t.eventPhase!==Event.CAPTURING_PHASE&&u){let r=t.composedPath(),i=r.slice(r.indexOf(t.currentTarget),r.indexOf(l.domNode)).filter(t=>t.getRootNode()===t.ownerDocument).reverse();s=x(l.getLastRender(),i,!0)}else a.reverse(),s=x(l.getLastRender(),a);return s&&(o=i.handleInterceptedEvent(r,s,this,t)),n("domEventProcessed",t),o},i.postProcessProjectionOptions?.(s);let h=a();l=t(o,h,s),u.push(l),d.push(a),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(l,h)},p=()=>{if(o=void 0,a){a=!1,n("renderStart",void 0);for(let t=0;t<u.length;t++){let r=d[t]();n("rendered",void 0),u[t].update(r),n("patched",void 0)}n("renderDone",void 0),a=!0}};return i.modifyDoRenderImplementation&&(p=i.modifyDoRenderImplementation(p,u,d)),r={renderNow:p,scheduleRender:()=>{o||l||(o=requestAnimationFrame(p))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),l=!0},resume:()=>{l=!1,a=!0,r.scheduleRender()},append:(t,r)=>{h(w.v.append,t,r)},insertBefore:(t,r)=>{h(w.v.insertBefore,t,r)},merge:(t,r)=>{h(w.v.merge,t,r)},replace:(t,r)=>{h(w.v.replace,t,r)},detach:t=>{for(let r=0;r<d.length;r++)if(d[r]===t)return d.splice(r,1),u.splice(r,1)[0];throw Error("renderFunction was not found")}}})({postProcessProjectionOptions(t){let r=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(t,s,n,o)=>{let a=r?.(t,s,n,o),l=i.test(t);if(!((t=t.replace(i,"")).toLowerCase() in n)||l){let r=t[2].toLowerCase()+t.slice(3),i=t=>a?.call(n,t);n.addEventListener(r,i,l);let s=()=>n.removeEventListener(r,i,l),u=o.afterRemoved;o.afterRemoved=t=>{u?.(t),s()}}return a}},handleInterceptedEvent(t,r,i,s){let{eventPhase:n,type:o}=s,a=n===Event.CAPTURING_PHASE,l=`on${o}${a?"capture":""}`,u=r.properties;(u&&l in u||(l=`on${o[0].toUpperCase()}${o.slice(1)}${a?"Capture":""}`,u&&l in u))&&((0,O.Uy)(),t.scheduleRender(),u[l].call(u.bind||i,s))}}),D=!1,Z=class extends(0,p.v)(o.Z.EventedAccessor){constructor(t,r){var i;super(t,r),this._attached=!1,this._internalHandles=new l.Z,this._projector=j,this._readyForTrueRender=!1,this.iconClass="esri-icon-checkbox-unchecked",this.key=this,this._loadLocale=(0,c.Ds)(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length)for(let t of(await (0,c.as)(this._messageBundleProps.map(async({bundlePath:t,propertyName:r})=>{let i=await (0,F.ME)(t);this.uiStrings&&Object.keys(this.uiStrings)&&(i=function t(r,i){for(let s in i)null!=r[s]&&("object"==typeof r[s]&&"object"==typeof i[s]?t(r[s],i?.[s]):r[s]=i[s]);return r}((0,u.d9)(i),this.uiStrings)),this[r]=i}))))t.error&&d.Z.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,t.error);await this.loadLocale()}),(0,M.YY)((0,P.hF)((0,T.V)("components/assets")));let s="esri-widget-uid-"+(0,y.D)(),n=this.render.bind(this);this._trackingTarget=new v.M(()=>this.scheduleRender());let o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:s,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};let t=n(),{properties:r}=t;r||(t.properties=r={});let{key:i,styles:o}=r;i||(r.key=s),o||(r.styles=o={}),o.display||(o.display="");let a=0;return t.children?.forEach(t=>{if(A.ZJ(t.vnodeSelector))return;let{properties:r}=t;r||(t.properties=r={}),r.key||(r.key=`${this.id}--${a++}`)}),(0,A.dh)(this,t)};this.render=()=>{if(D)return o();let t=(0,O.O9)(this)??null;if(t)return t;this._trackingTarget.clear(),D=!0;try{t=(0,b.LJ)(this._trackingTarget,o)}catch(t){throw console.error(t),t}finally{D=!1}return t&&(0,O.KF)(this,t),t},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),i=this._resourcesFetch,k.add(i),i.finally(()=>k.delete(i))}normalizeCtorArgs(t,r){let i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(c.H9)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||((0,h.SC)(this._trackingTarget),(0,h.SC)(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,(0,O.w7)(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return(0,n.L7)(t)}get domNode(){return this.container}set domNode(t){this.container=t}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+N++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get test(){return{projector:this._projector}}render(){throw Error("not implemented")}scheduleRender(){this.destroyed||((0,O.w7)(this),this._projector.scheduleRender())}classes(...t){return R.Sh.apply(this,t)}renderNow(){(0,O.w7)(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this._internalHandles.add((0,f.YP)(()=>this.viewModel,(t,r)=>{r&&this._internalHandles.remove("delegated-events"),t&&(0,a.vT)(t)&&this._internalHandles.add(this._delegatedEventNames.map(r=>(0,a.on)(t,r,t=>{this.emit(r,t)})),"delegated-events")},f.nn)),this.postInitialize();let t=async()=>{await this._loadLocale().catch(c.H9),this.scheduleRender()};this._internalHandles.add([(0,L.qe)(t),(0,f.YP)(()=>this.uiStrings,t),(0,f.gx)(()=>this.container,t=>{this.destroyed||this._attach(t)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){this._attached&&(this._projector.detach(this.render),this._attached=!1),t?.parentNode?.removeChild(t)}};Z[A.$X]=!0,(0,s._)([(0,m.Cb)()],Z.prototype,"_readyForTrueRender",void 0),(0,s._)([(0,m.Cb)({value:null})],Z.prototype,"container",null),(0,s._)([(0,g.p)("container")],Z.prototype,"castContainer",null),(0,s._)([(0,m.Cb)()],Z.prototype,"domNode",null),(0,s._)([(0,m.Cb)()],Z.prototype,"iconClass",void 0),(0,s._)([(0,m.Cb)()],Z.prototype,"id",null),(0,s._)([(0,m.Cb)()],Z.prototype,"label",null),(0,s._)([(0,m.Cb)()],Z.prototype,"renderable",null),(0,s._)([(0,m.Cb)()],Z.prototype,"uiStrings",void 0),(0,s._)([(0,m.Cb)()],Z.prototype,"viewModel",void 0),(0,s._)([(0,m.Cb)({value:!0})],Z.prototype,"visible",null),(0,s._)([(0,m.Cb)()],Z.prototype,"key",void 0),(0,s._)([(0,m.Cb)()],Z.prototype,"children",void 0),(0,s._)([(0,m.Cb)()],Z.prototype,"afterCreate",void 0),(0,s._)([(0,m.Cb)()],Z.prototype,"afterUpdate",void 0),(0,s._)([(0,m.Cb)()],Z.prototype,"afterRemoved",void 0);let V=Z=(0,s._)([(0,_.j)("esri.widgets.Widget")],Z)},33355:(t,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>S});var s=i(24765),n=i(82639),o=i(53919),a=(i(99950),i(21314),i(30407)),l=i(87291),u=(i(93381),i(69034)),d=i(73568),h=i(16333);let p=class extends l.Z{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){let t=this.enabled?0:-1,r={"esri-disabled":!this.enabled,"esri-interactive":this.enabled},i={[this.iconClass]:!!this.iconClass};return(0,d.u)("div",{bind:this,class:this.classes("esri-widget--button esri-widget",r),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},(0,d.u)("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",i)}),(0,d.u)("span",{class:"esri-icon-font-fallback-text"},this.title))}_triggerAction(){this.action.call(this)}};(0,s._)([(0,o.Cb)()],p.prototype,"action",void 0),(0,s._)([(0,o.Cb)()],p.prototype,"enabled",void 0),(0,s._)([(0,o.Cb)()],p.prototype,"iconClass",void 0),(0,s._)([(0,o.Cb)()],p.prototype,"title",void 0),(0,s._)([(0,h.h)()],p.prototype,"_triggerAction",null);let c=p=(0,s._)([(0,a.j)("esri.widgets.IconButton")],p);var f=i(53306),y=i(66138);let m=class extends f.Z{get canZoomIn(){if(!this.get("view.ready"))return!1;let t=this.get("view.animation.target.scale")||this.get("view.scale"),r=this.get("view.constraints.effectiveMaxScale");return 0===r||t>r}get canZoomOut(){if(!this.get("view.ready"))return!1;let t=this.get("view.animation.target.scale")||this.get("view.scale"),r=this.get("view.constraints.effectiveMinScale");return 0===r||t<r}};(0,s._)([(0,o.Cb)({readOnly:!0})],m.prototype,"canZoomIn",null),(0,s._)([(0,o.Cb)({readOnly:!0})],m.prototype,"canZoomOut",null),(0,s._)([(0,o.Cb)()],m.prototype,"view",void 0);let g=m=(0,s._)([(0,a.j)("esri.widgets.Zoom.ZoomConditions2D")],m),_=class extends f.Z{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};(0,s._)([(0,o.Cb)({readOnly:!0})],_.prototype,"canZoomIn",null),(0,s._)([(0,o.Cb)({readOnly:!0})],_.prototype,"canZoomOut",null),(0,s._)([(0,o.Cb)()],_.prototype,"view",void 0);let b=_=(0,s._)([(0,a.j)("esri.widgets.Zoom.ZoomConditions3D")],_),v=class extends f.Z{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return(0,n.pC)(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){return(0,n.pC)(this._zoomConditions)&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(t){t?"2d"===t.type?this._zoomConditions=new g({view:t}):"3d"===t.type&&(this._zoomConditions=new b({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;let t=this.view;"2d"===t.type?t.mapViewNavigation.zoomIn():(0,y.R8)(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;let t=this.view;"2d"===t.type?t.mapViewNavigation.zoomOut():(0,y.R8)(t.goTo({zoomFactor:.5}))}};(0,s._)([(0,o.Cb)()],v.prototype,"_zoomConditions",void 0),(0,s._)([(0,o.Cb)()],v.prototype,"canZoomIn",null),(0,s._)([(0,o.Cb)()],v.prototype,"canZoomOut",null),(0,s._)([(0,o.Cb)({readOnly:!0})],v.prototype,"state",null),(0,s._)([(0,o.Cb)()],v.prototype,"view",null);let w=v=(0,s._)([(0,a.j)("esri.widgets.Zoom.ZoomViewModel")],v),C=class extends l.Z{constructor(t,r){super(t,r),this.iconClass="esri-icon-zoom-in-magnifying-glass",this.messages=null,this.viewModel=new w}initialize(){this._zoomInButton=new c({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"}),this._zoomOutButton=new c({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})}destroy(){this._zoomInButton=(0,n.SC)(this._zoomInButton),this._zoomOutButton=(0,n.SC)(this._zoomOutButton)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){"horizontal"!==t&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){let t=this.viewModel,r={"esri-zoom--horizontal":"horizontal"===this.layout},{canZoomIn:i,canZoomOut:s}=t;this._zoomInButton.enabled=i,this._zoomOutButton.enabled=s;let{zoomIn:n,zoomOut:o}=this.messages;return this._zoomInButton.title=n,this._zoomOutButton.title=o,(0,d.u)("div",{class:this.classes("esri-zoom esri-widget",r)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};(0,s._)([(0,o.Cb)()],C.prototype,"iconClass",void 0),(0,s._)([(0,o.Cb)()],C.prototype,"label",null),(0,s._)([(0,o.Cb)({value:"vertical"})],C.prototype,"layout",null),(0,s._)([(0,o.Cb)(),(0,u.H)("esri/widgets/Zoom/t9n/Zoom")],C.prototype,"messages",void 0),(0,s._)([(0,o.Cb)()],C.prototype,"view",null),(0,s._)([(0,o.Cb)({type:w})],C.prototype,"viewModel",void 0);let S=C=(0,s._)([(0,a.j)("esri.widgets.Zoom")],C)},16333:(t,r,i)=>{"use strict";i.d(r,{h:()=>n});var s=i(93381);function n(){return function(t,r){var i;if(!t[r])throw TypeError(`Cannot auto bind undefined function '${r}'`);return{value:(i=t[r],function(t,...r){(function(t){let{type:r}=t;return t instanceof KeyboardEvent||"keyup"===r||"keydown"===r||"keypress"===r})(t)?(0,s.pf)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):i.call(this,t,...r)})}}}},69034:(t,r,i)=>{"use strict";function s(t){return(r,i)=>{r.hasOwnProperty("_messageBundleProps")||(r._messageBundleProps=r._messageBundleProps?r._messageBundleProps.slice():[]),r._messageBundleProps.push({bundlePath:t,propertyName:i})}}i.d(r,{H:()=>s})},73568:(t,r,i)=>{"use strict";i.d(r,{u:()=>a});var s=i(57872),n=function(t,r){for(var i=0,s=t.length;i<s;i++){var o=t[i];Array.isArray(o)?n(o,r):null!=o&&!1!==o&&(o.hasOwnProperty("vnodeSelector")||(o={vnodeSelector:"",properties:void 0,children:void 0,text:o.toString(),domNode:null}),r.push(o))}},o=function(t,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(1===i.length&&"string"==typeof i[0])return{vnodeSelector:t,properties:r||void 0,children:void 0,text:i[0],domNode:null};var o=[];return n(i,o),{vnodeSelector:t,properties:r||void 0,children:o,text:void 0,domNode:null}};function a(t,r,...i){return"function"!=typeof t||(0,s.ZJ)(t)?o(t,r,...i):t(r,...i)}},57872:(t,r,i)=>{"use strict";i.d(r,{$X:()=>n,ZJ:()=>p,dh:()=>function t(r,i){let s=i.children;if(s&&s.length)for(let i=0;i<s.length;++i)s[i]=t(r,s[i]);else s=o;let n=i.vnodeSelector;if(p(n)){let t=i.properties||a,o=t.key||n;return{vnodeSelector:"div",properties:{key:o,afterCreate:u,afterUpdate:d,afterRemoved:h,parentWidget:r,widgetConstructor:n,widgetProperties:{...t,key:o,children:s}},children:void 0,text:void 0,domNode:null}}return i}});var s=i(31015);let n=Symbol("widget"),o=[],a={},l=new WeakMap;function u(t,r,i,{parentWidget:n,widgetConstructor:o,widgetProperties:a}){let u=new o(a);u.container=t,l.set(t,u),u.afterCreate?.(u,t),n._internalHandles.add((0,s.kB)(()=>h(t)))}function d(t,r,i,{widgetProperties:s}){let n=l.get(t);n&&(n.set(s),n.afterUpdate?.(n,t))}function h(t){let r=l.get(t);r&&(r.destroy(),l.delete(t))}function p(t){return"function"==typeof t&&t[n]}},90522:(t,r,i)=>{"use strict";i.d(r,{KF:()=>a,O9:()=>o,Uy:()=>n,w7:()=>l});let s=new Map;function n(){s.clear()}function o(t){return s.get(t)}function a(t,r){s.set(t,r)}function l(t){s.delete(t)}},20316:(t,r,i)=>{"use strict";function s(t){return t&&"function"==typeof t.render}function n(t){return t&&"function"==typeof t.postMixInProperties&&"function"==typeof t.buildRendering&&"function"==typeof t.postCreate&&"function"==typeof t.startup}i.d(r,{Qd:()=>s,o:()=>n}),i(16333),i(73568),i(93381)},93381:(t,r,i)=>{"use strict";i.d(r,{Sh:()=>H,vU:()=>X,pV:()=>Y,pf:()=>er,dZ:()=>J,w3:()=>et,Yo:()=>K});var s={exports:{}},n={},o={exports:{}},a={},l=/javascript\s*\:/gim;a.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},a.getDefaultWhiteList=function(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}},a.onAttr=function(t,r,i){},a.onIgnoreAttr=function(t,r,i){},a.safeAttrValue=function(t,r){return l.test(r)?"":r};var u=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},d=function(t,r){";"!==(i=t,t=String.prototype.trimRight?i.trimRight():i.replace(/(\s*$)/g,""))[t.length-1]&&(t+=";");var i,s=t.length,n=!1,o=0,a=0,l="";function d(){if(!n){var i=u(t.slice(o,a)),s=i.indexOf(":");if(-1!==s){var d=u(i.slice(0,s)),h=u(i.slice(s+1));if(d){var p=r(o,l.length,d,h,i);p&&(l+=p+"; ")}}}o=a+1}for(;a<s;a++){var h=t[a];if("/"===h&&"*"===t[a+1]){var p=t.indexOf("*/",a+2);if(-1===p)break;o=(a=p+1)+1,n=!1}else"("===h?n=!0:")"===h?n=!1:";"===h?n||d():"\n"===h&&d()}return u(l)};function h(t){(t=function(t){var r={};for(var i in t)r[i]=t[i];return r}(t||{})).whiteList=t.whiteList||a.whiteList,t.onAttr=t.onAttr||a.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||a.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||a.safeAttrValue,this.options=t}h.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var r=this.options,i=r.whiteList,s=r.onAttr,n=r.onIgnoreAttr,o=r.safeAttrValue;return d(t,function(t,r,a,l,u){var d=i[a],h=!1;if(!0===d?h=d:"function"==typeof d?h=d(l):d instanceof RegExp&&(h=d.test(l)),!0!==h&&(h=!1),l=o(a,l)){var p,c={position:r,sourcePosition:t,source:u,isWhite:h};return h?null==(p=s(a,l,c))?a+":"+l:p:null==(p=n(a,l,c))?void 0:p}})},function(t,r){for(var i in(r=t.exports=function(t,r){return new h(r).process(t)}).FilterCSS=h,a)r[i]=a[i]}(o,o.exports);var p={indexOf:function(t,r){var i,s;if(Array.prototype.indexOf)return t.indexOf(r);for(i=0,s=t.length;i<s;i++)if(t[i]===r)return i;return -1},forEach:function(t,r,i){var s,n;if(Array.prototype.forEach)return t.forEach(r,i);for(s=0,n=t.length;s<n;s++)r.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var r=/\s|\n|\t/.exec(t);return r?r.index:-1}},c=o.exports.FilterCSS,f=o.exports.getDefaultWhiteList,y=new c;function m(t){return t.replace(g,"&lt;").replace(_,"&gt;")}var g=/</g,_=/>/g,b=/"/g,v=/&quot;/g,w=/&#([a-zA-Z0-9]*);?/gim,C=/&colon;?/gim,S=/&newline;?/gim,x=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,M=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,I=/u\s*r\s*l\s*\(.*/gi;function E(t){return t.replace(b,"&quot;")}function T(t){return t.replace(v,'"')}function P(t){return t.replace(w,function(t,r){return"x"===r[0]||"X"===r[0]?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function A(t){return t.replace(C,":").replace(S," ")}function k(t){for(var r="",i=0,s=t.length;i<s;i++)r+=32>t.charCodeAt(i)?" ":t.charAt(i);return p.trim(r)}function O(t){return k(t=A(t=P(t=T(t))))}function R(t){return m(t=E(t))}n.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},n.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},n.onTag=function(t,r,i){},n.onIgnoreTag=function(t,r,i){},n.onTagAttr=function(t,r,i){},n.onIgnoreTagAttr=function(t,r,i){},n.safeAttrValue=function(t,r,i,s){if(i=O(i),"href"===r||"src"===r){if("#"===(i=p.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"data:image/"!==i.substr(0,11)&&"ftp://"!==i.substr(0,6)&&"./"!==i.substr(0,2)&&"../"!==i.substr(0,3)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===r){if(x.lastIndex=0,x.test(i))return""}else if("style"===r){if(M.lastIndex=0,M.test(i)||(I.lastIndex=0,I.test(i)&&(x.lastIndex=0,x.test(i))))return"";!1!==s&&(i=(s=s||y).process(i))}return R(i)},n.escapeHtml=m,n.escapeQuote=E,n.unescapeQuote=T,n.escapeHtmlEntities=P,n.escapeDangerHtml5Entities=A,n.clearNonPrintableCharacter=k,n.friendlyAttrValue=O,n.escapeAttrValue=R,n.onIgnoreTagStripAll=function(){return""},n.StripTagBody=function(t,r){"function"!=typeof r&&(r=function(){});var i=!Array.isArray(t),s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(i||-1!==p.indexOf(t,o)){if(l.isClosing){var u="[/removed]",d=l.position+u.length;return s.push([!1!==n?n:l.position,d]),n=!1,u}return n||(n=l.position),"[removed]"}return r(o,a,l)},remove:function(t){var r="",i=0;return p.forEach(s,function(s){r+=t.slice(i,s[0]),i=s[1]}),r+=t.slice(i)}}},n.stripCommentTag=function(t){for(var r="",i=0;i<t.length;){var s=t.indexOf("<!--",i);if(-1===s){r+=t.slice(i);break}r+=t.slice(i,s);var n=t.indexOf("-->",s);if(-1===n)break;i=n+3}return r},n.stripBlankChar=function(t){var r=t.split("");return(r=r.filter(function(t){var r=t.charCodeAt(0);return!(127===r||r<=31&&10!==r&&13!==r)})).join("")},n.cssFilter=y,n.getDefaultCSSWhiteList=f;var L={},F=/[^a-zA-Z0-9\\_:.-]/gim;function N(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]?t.substr(1,t.length-2):t}L.parseTag=function(t,r,i){var s="",n=0,o=!1,a=!1,l=0,u=t.length,d="",h="";e:for(l=0;l<u;l++){var c=t.charAt(l);if(!1===o){if("<"===c){o=l;continue}}else if(!1===a){if("<"===c){s+=i(t.slice(n,l)),o=l,n=l;continue}if(">"===c){s+=i(t.slice(n,o)),d=function(t){var r,i=p.spaceIndex(t);return r=-1===i?t.slice(1,-1):t.slice(1,i+1),"/"===(r=p.trim(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}(h=t.slice(o,l+1)),s+=r(o,s.length,d,h,"</"===h.slice(0,2)),n=l+1,o=!1;continue}if('"'===c||"'"===c)for(var f=1,y=t.charAt(l-f);""===y.trim()||"="===y;){if("="===y){a=c;continue e}y=t.charAt(l-++f)}}else if(c===a){a=!1;continue}}return n<t.length&&(s+=i(t.substr(n))),s},L.parseAttr=function(t,r){var i=0,s=0,n=[],o=!1,a=t.length;function l(t,i){if(!((t=(t=p.trim(t)).replace(F,"").toLowerCase()).length<1)){var s=r(t,i||"");s&&n.push(s)}}for(var u=0;u<a;u++){var d,h=t.charAt(u);if(!1!==o||"="!==h){if(!1===o||u!==s){if(/\s|\n|\t/.test(h)){if(t=t.replace(/\s|\n|\t/g," "),!1===o){if(-1===(d=function(t,r){for(;r<t.length;r++){var i=t[r];if(" "!==i)return"="===i?r:-1}}(t,u))){l(p.trim(t.slice(i,u))),o=!1,i=u+1;continue}u=d-1;continue}if(-1===(d=function(t,r){for(;r>0;r--){var i=t[r];if(" "!==i)return"="===i?r:-1}}(t,u-1))){l(o,N(p.trim(t.slice(i,u)))),o=!1,i=u+1;continue}}}else{if(-1===(d=t.indexOf(h,u+1)))break;l(o,p.trim(t.slice(s+1,d))),o=!1,i=(u=d)+1}}else o=t.slice(i,u),i=u+1,s='"'===t.charAt(i)||"'"===t.charAt(i)?i:function(t,r){for(;r<t.length;r++){var i=t[r];if(" "!==i)return"'"===i||'"'===i?r:-1}}(t,u+1)}return i<t.length&&(!1===o?l(t.slice(i)):l(o,N(p.trim(t.slice(i))))),p.trim(n.join(" "))};var j=o.exports.FilterCSS,D=L.parseTag,Z=L.parseAttr;function V(t){(t=function(t){var r={};for(var i in t)r[i]=t[i];return r}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=n.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=function(t){var r={};for(var i in t)Array.isArray(t[i])?r[i.toLowerCase()]=t[i].map(function(t){return t.toLowerCase()}):r[i.toLowerCase()]=t[i];return r}(t.whiteList||t.allowList):t.whiteList=n.whiteList,t.onTag=t.onTag||n.onTag,t.onTagAttr=t.onTagAttr||n.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||n.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||n.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||n.safeAttrValue,t.escapeHtml=t.escapeHtml||n.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new j(t.css))}V.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var r=this.options,i=r.whiteList,s=r.onTag,o=r.onIgnoreTag,a=r.onTagAttr,l=r.onIgnoreTagAttr,u=r.safeAttrValue,d=r.escapeHtml,h=this.cssFilter;r.stripBlankChar&&(t=n.stripBlankChar(t)),r.allowCommentTag||(t=n.stripCommentTag(t));var c=!1;r.stripIgnoreTagBody&&(o=(c=n.StripTagBody(r.stripIgnoreTagBody,o)).onIgnoreTag);var f=D(t,function(t,r,n,c,f){var y={sourcePosition:t,position:r,isClosing:f,isWhite:Object.prototype.hasOwnProperty.call(i,n)},m=s(n,c,y);if(null!=m)return m;if(y.isWhite){if(y.isClosing)return"</"+n+">";var g=function(t){var r=p.spaceIndex(t);if(-1===r)return{html:"",closing:"/"===t[t.length-2]};var i="/"===(t=p.trim(t.slice(r+1,-1)))[t.length-1];return i&&(t=p.trim(t.slice(0,-1))),{html:t,closing:i}}(c),_=i[n],b=Z(g.html,function(t,r){var i=-1!==p.indexOf(_,t),s=a(n,t,r,i);return null==s?i?(r=u(n,t,r,h))?t+'="'+r+'"':t:null==(s=l(n,t,r,i))?void 0:s:s});return c="<"+n,b&&(c+=" "+b),g.closing&&(c+=" /"),c+">"}return null==(m=o(n,c,y))?d(c):m},d);return c&&(f=c.remove(f)),f},function(t,r){function i(t,r){return new V(r).process(t)}(r=t.exports=i).filterXSS=i,r.FilterXSS=V,function(){for(var t in n)r[t]=n[t];for(var i in L)r[i]=L[i]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=t.exports)}(s,s.exports);var z,U,G=function(){function t(t,r){var i,n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(t,r,i,o){return"a"===t&&"href"===r||("img"===t||"source"===t)&&"src"===r?n.sanitizeUrl(i):s.exports.safeAttrValue(t,r,i,o)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"},t&&!r?i=t:t&&r?(i=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(r){"whiteList"===r?i.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,t.whiteList||{}]):i[r]=t[r]})):(i=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=i,this._xssFilter=new s.exports.FilterXSS(i)}return t.prototype.sanitize=function(t,r){switch(void 0===r&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:if(r.allowUndefined&&void 0===t)return;return null}},t.prototype.sanitizeUrl=function(t,r){var i=(null!=r?r:{}).isProtocolRequired,n=this._trim(t.substring(0,t.indexOf(":"))),o="/"===t,a=/^#/.test(t),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?s.exports.escapeAttrValue(t):n||void 0===i||i?"":s.exports.escapeAttrValue("https://".concat(t))},t.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(t,r,i,n):s.exports.safeAttrValue(t,r,i,n)},t.prototype.validate=function(t,r){void 0===r&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},t.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(t){return r._entityMap[t]})},t.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,s){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(t){Object.keys(t).forEach(function(i){Array.isArray(t[i])&&Array.isArray(r[i])?r[i]=r[i].concat(t[i]):r[i]=t[i]})}),r},t.prototype._iterateOverObject=function(t,r){var i=this;void 0===r&&(r={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(t,n){var o=i.validate(n,r);return o.isValid?t.concat([n]):(s=!0,t.concat([o.sanitized]))},[]);else{if(!function(t){if("object"!=typeof t||null===t||"[object Object]"!==Object.prototype.toString.call(t))return!1;var r=Object.getPrototypeOf(t);if(null===r)return!0;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}(t)){if(r.allowUndefined&&void 0===t)return;return null}n=Object.keys(t).reduce(function(n,o){var a=t[o],l=i.validate(a,r);return l.isValid?n[o]=a:(s=!0,n[o]=l.sanitized),n},{})}return s?n:t}catch(t){return null}},t.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},t}(),q=i(14963),$=(i(31015),i(96082),i(66150)),B=i(90522),W=function(t){z||function(t){if("WebkitTransition"in t.style)z="webkitTransitionEnd",U="webkitAnimationEnd";else{if(!("transition"in t.style))throw Error("Your browser is not supported!");z="transitionend",U="animationend"}}(t)};function H(t){let r=q.Z.acquire();for(let t=0;t<arguments.length;t++){let i=arguments[t],s=typeof i;if("string"===s)r.push(i);else if(Array.isArray(i))r.push.apply(r,i);else if("object"===s)for(let t in i)i[t]&&r.push(t)}let i=r.join(" ");return q.Z.release(r),i}function J(t){let r=t?.closest("[dir]");return null!==r&&r instanceof HTMLElement&&"rtl"===r.dir||"rtl"===document.dir}function Y(t){this[t.getAttribute("data-node-ref")]=null}function K(t){this[t.getAttribute("data-node-ref")]=t}function X(t,r){return("enter"===t?function(t,r){return void 0===r&&(r=t+"-active"),function(i){W(i);var s=!1,n=function(o){s||(s=!0,i.removeEventListener(z,n),i.removeEventListener(U,n),i.classList.remove(t),i.classList.remove(r))};i.classList.add(t),i.addEventListener(z,n),i.addEventListener(U,n),requestAnimationFrame(function(){i.classList.add(r)})}}:function(t,r){return void 0===r&&(r=t+"-active"),function(i,s){W(i);var n=!1,o=function(t){n||(n=!0,i.removeEventListener(z,o),i.removeEventListener(U,o),s())};i.classList.add(t),i.addEventListener(z,o),i.addEventListener(U,o),requestAnimationFrame(function(){i.classList.add(r)})}})(r)}$.Z.getLogger("esri.widgets.support.widgetUtils"),(()=>{let t=new Map;new ResizeObserver(r=>{for(let i of((0,B.Uy)(),r))t.get(i.target)?.(i)})})();let Q=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce((t,r)=>(t[r]=[],t),{}),ee=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],et=new G({whiteList:Q,onTagAttr:(t,r,i)=>{let s=`${r}="${i}"`;if(ee.includes(r))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function er(t){return"Enter"===t||" "===t}},34517:(t,r,i)=>{"use strict";i.d(r,{a:()=>s,b:()=>c,c:()=>o,d:()=>n,f:()=>h,i:()=>g,o:()=>d,q:()=>u,s:()=>y,t:()=>m});let s="calcite-theme-auto",n="calcite-theme-dark";function o(t){let r=d(t,"[dir]");return r?r.getAttribute("dir"):"ltr"}function a(t){return t.getRootNode()}function l(t){return t.host||null}function u(t,{selector:r,id:i}){return function t(s){if(!s)return null;s.assignedSlot&&(s=s.assignedSlot);let n=a(s),o=i?"getElementById"in n?n.getElementById(i):null:r?n.querySelector(r):null,u=l(n);return o||(u?t(u):null)}(t)}function d(t,r){return function t(i){return i?i.closest(r)||t(l(a(i))):null}(t)}async function h(t){if(t)return"function"==typeof(null==t?void 0:t.setFocus)?t.setFocus():t.focus()}let p=":not([slot])";function c(t,r,i){r&&!Array.isArray(r)&&"string"!=typeof r&&(i=r,r=null);let s=r?Array.isArray(r)?r.map(t=>`[slot="${t}"]`).join(","):`[slot="${r}"]`:p;return(null==i?void 0:i.all)?function(t,r,i){let s=r===p?f(t,p):Array.from(t.querySelectorAll(r));s=i&&!1===i.direct?s:s.filter(r=>r.parentElement===t),s=(null==i?void 0:i.matches)?s.filter(t=>null==t?void 0:t.matches(i.matches)):s;let n=null==i?void 0:i.selector;return n?s.map(t=>Array.from(t.querySelectorAll(n))).reduce((t,r)=>[...t,...r],[]).filter(t=>!!t):s}(t,s,i):function(t,r,i){let s=r===p?f(t,p)[0]||null:t.querySelector(r);s=i&&!1===i.direct||(null==s?void 0:s.parentElement)===t?s:null,s=(null==i?void 0:i.matches)?(null==s?void 0:s.matches(i.matches))?s:null:s;let n=null==i?void 0:i.selector;return n?null==s?void 0:s.querySelector(n):s}(t,s,i)}function f(t,r){return t?Array.from(t.children||[]).filter(t=>null==t?void 0:t.matches(r)):[]}function y(t,r,i){return"string"==typeof r&&""!==r?r:""===r?t[i]:void 0}function m(t){return(!!t).toString()}function g(t){return!(!t.isPrimary||0!==t.button)}}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return s[t].call(i.exports,i,i.exports,o),i.exports}return o.m=s,o.d=(t,r)=>{for(var i in r)o.o(r,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((r,i)=>(o.f[i](t,r),r),[])),o.u=t=>t+".index.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),t={},r="MyLibrary:",o.l=(i,s,n,a)=>{if(t[i])t[i].push(s);else{if(void 0!==n)for(var l,u,d=document.getElementsByTagName("script"),h=0;h<d.length;h++){var p=d[h];if(p.getAttribute("src")==i||p.getAttribute("data-webpack")==r+n){l=p;break}}l||(u=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.setAttribute("data-webpack",r+n),l.src=i),t[i]=[s];var c=(r,s)=>{l.onerror=l.onload=null,clearTimeout(f);var n=t[i];if(delete t[i],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach(t=>t(s)),r)return r(s)},f=setTimeout(c.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=c.bind(null,l.onerror),l.onload=c.bind(null,l.onload),u&&document.head.appendChild(l)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{o.g.importScripts&&(t=o.g.location+"");var t,r=o.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var i=r.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={4826:0};o.f.j=(r,i)=>{var s=o.o(t,r)?t[r]:void 0;if(0!==s){if(s)i.push(s[2]);else{var n=new Promise((i,n)=>s=t[r]=[i,n]);i.push(s[2]=n);var a=o.p+o.u(r),l=Error();o.l(a,i=>{if(o.o(t,r)&&(0!==(s=t[r])&&(t[r]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;l.message="Loading chunk "+r+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,s[1](l)}},"chunk-"+r,r)}}};var r=(r,i)=>{var s,n,[a,l,u]=i,d=0;if(a.some(r=>0!==t[r])){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);u&&u(o)}for(r&&r(i);d<a.length;d++)n=a[d],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0},i=this.webpackChunkMyLibrary=this.webpackChunkMyLibrary||[];i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i))})(),o(4507)})(),t.exports=s()}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18245],{18245:function(t,e,s){s.r(e),s.d(e,{LandBox:function(){return D},Solution:function(){return L}});class i{constructor(){}}class h{constructor(t){this.app=t}}var r,o,a=s(97776),n=s(78252),c=s(8483);(r=o||(o={})).PERSPECTIVE="PERSPECTIVE",r.ORTHOGRAPHIC="ORTHOGRAPHIC",r.STEREO="STEREO";class p{GetStereo(){}set aspect(t){"PERSPECTIVE"===this.type?this.cameraP.aspect=t:this.type}get aspect(){return this.width/this.height}get camera(){return"PERSPECTIVE"===this.type?this.cameraP:"ORTHOGRAPHIC"===this.type?this.cameraO:this.cameraP}GetPerspective(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.cameraP=new a.cPb(45,this.width/this.height,.01,1e4),this.cameraP.position.set(t,e,s),this.InitOrbitController()}GetOrthographic(){this.cameraO=new a.iKG(-(this.frustumSize*this.aspect/2),this.frustumSize*this.aspect/2,this.frustumSize/2,-(this.frustumSize/2),.01,5e4),this.cameraO.position.set(0,1,0),this.InitOrbitController()}InitOrbitController(){"PERSPECTIVE"===this.type?this.controls=new n.OrbitControls(this.cameraP,this.canvas.renderer.domElement):"ORTHOGRAPHIC"===this.type&&(this.controls=new n.OrbitControls(this.cameraO,this.canvas.renderer.domElement)),this.controls.minDistance=.01,this.controls.maxDistance=500,this.controls.enablePan=!0,this.controls.enableZoom=!0,this.yRotRate=this.rotateRate/this.width*Math.PI/90,this.xRotRate=this.rotateRate/this.height*Math.PI/180,this.xPanRate=this.panRate/this.width*this.zoomFactor,this.yPanRate=this.panRate/this.height*this.zoomFactor,this.zPanRate=this.zoomRate/this.height}EnableDamping(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.35;this.controls.enableDamping=t,this.controls.dampingFactor=e}MouseDown(t,e){this.initX=this.prevX=t,this.initY=this.prevY=e}MouseMove(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.ableToMove)return;let i=t-this.prevX,h=e-this.prevY;s?(this.controls.panLeft(i*this.xPanRate,this.cameraP.matrix),this.controls.panUp(h*this.yPanRate,this.cameraP.matrix)):(this.controls.rotateLeft(i*this.xRotRate),this.controls.rotateUp(h*this.yRotRate)),this.prevX=t,this.prevY=e}MouseWheel(t){this.controls.enableZoom=!0,t*=.1;let e=100*this.cameraP.position.length();this.zoomFactor=e,t>0?(this.cameraP.position.x*=.9,this.cameraP.position.y*=.9,this.cameraP.position.z*=.9):(this.cameraP.position.x*=1.1,this.cameraP.position.y*=1.1,this.cameraP.position.z*=1.1)}ShiftCamera(){this.cameraShift++,2===this.cameraShift&&(this.cameraShift=0),0===this.cameraShift?this.GetPerspective():1===this.cameraShift&&this.GetOrthographic()}MouseEventController(t){t.CLICK_TYPE===c.uh.DOWN&&this.MouseDown(t.x,t.y),t.CLICK_TYPE===c.uh.DRAG&&this.MouseMove(t.x,t.y,t.pressedShift),t.CLICK_TYPE===c.uh.WHEEL&&this.MouseWheel(t.wheel)}constructor(t,e,s,i="PERSPECTIVE"){this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.rotateRate=150,this.panRate=50,this.zoomRate=200,this.zoomFactor=1,this.frustumSize=.001,this.cameraShift=0,this.ableToMove=!0,this.canvas=t,this.type=i,this.width=e,this.height=s,"PERSPECTIVE"===this.type?this.GetPerspective(0,10,50):"ORTHOGRAPHIC"===this.type?this.GetOrthographic():"STEREO"===this.type&&this.GetStereo(),this.stereoCamera=new a.u37}}class l{Init(){let t=this.hostDiv.clientWidth,e=this.hostDiv.clientHeight;this.renderer=new a.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(t/e),this.camera=new p(this,t,e),this.scene=new a.xsS,this.renderer.domElement.id="dynamic-spring",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.pointerEvents="none",this.renderer.setSize(t,e),this.hostDiv.appendChild(this.renderer.domElement),this.RenderLoop(this)}RenderLoop(t){this.isActive&&(requestAnimationFrame(()=>{this.RenderLoop(this)}),this.UpdateBinding(),this.camera.controls.update(),this.renderer.render(this.scene,this.camera.camera))}UpdateBinding(){}ResizeCanvas(t,e){this.camera.aspect=t/e,this.camera.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)}ResizeEffect(t,e){}Remove(){for(;this.scene.children.length;)this.scene.remove(this.scene.children[0])}constructor(t,e){this.bg=0,this.isActive=!0,this.canvasWrapper=t,this.hostDiv=e,this.Init()}}class u{constructor(t){this.graphicsCoreWrapper=t,this.canvasThree=new l(this,this.graphicsCoreWrapper.app.divHost)}}class m{Resize(t,e){this.canvasWrapper.canvasThree.ResizeCanvas(t,e)}Dispose(){this.canvasWrapper.canvasThree.isActive=!1}constructor(t){this.app=t,this.canvasWrapper=new u(this)}}class d{MouseEventController(t){if(this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.MouseEventController(t),t.CLICK_TYPE===c.uh.LEFT){this.MouseLeftClickPre(t);return}if(t.CLICK_TYPE===c.uh.MIDDLE){this.MouseMiddleClickPre(t);return}if(t.CLICK_TYPE===c.uh.DOWN_RIGHT){this.MouseRightClickPre(t);return}if(t.CLICK_TYPE===c.uh.DOUBLE){this.MouseDoubleClickPre(t);return}if(t.CLICK_TYPE===c.uh.MOVE){this.MouseMovePre(t);return}if(t.CLICK_TYPE===c.uh.DRAG){this.MouseDragPre(t);return}if(t.CLICK_TYPE===c.uh.DOWN){this.MouseDownPre(t);return}else if(t.CLICK_TYPE===c.uh.UP){this.MouseUpPre(t);return}}MouseDown(t){}MouseDownPre(t){this.scene.MouseDown(t.x,t.y),this.MouseDown(t)}MouseLeftClick(t){}MouseLeftClickPre(t){this.MouseLeftClick(t)}MouseMiddleClick(t){}MouseMiddleClickPre(t){this.MouseMiddleClick(t)}MouseRightClick(t){}MouseRightClickPre(t){this.MouseRightClick(t)}MouseUp(t){}MouseUpPre(t){this.scene.MouseUp(t.x,t.y),this.MouseUp(t)}MouseDoubleClick(t){}MouseDoubleClickPre(t){this.MouseDoubleClick(t)}MouseMove(t){}MouseMovePre(t){this.scene.MouseMove(t.x,t.y),this.MouseMove(t)}MouseDrag(t){}MouseDragPre(t){this.scene.MouseDrag(t.x,t.y),this.MouseDrag(t)}constructor(t){this.scene=t}}class C{Raycast(t,e,s){this.m.x=t/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth*2-1,this.m.y=-(e/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight*2)+1,this.raycaster.setFromCamera(this.m,this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);let i=this.raycaster.intersectObjects(s);i.length>0&&console.log(i[0].point)}RaycastPoint(t,e,s){this.raycaster.params.Points={threshold:5},this.m.x=t/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth*2-1,this.m.y=-(e/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight*2)+1,this.raycaster.setFromCamera(this.m,this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);let i=this.raycaster.intersectObjects(s);if(i.length>0){let t=i[0];return[t.point.x,t.point.y,t.point.z]}return null}constructor(t){this.listMesh=[],this.raycaster=new a.iMs,this.m=new a.FM8(0,0),this.scene=t,this.raycaster.params.Points={threshold:.1}}}class v{Init(){this.hemiLight=new a.vmT(16777215,16777215,.6),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.sceneWrapper.scene.add(this.hemiLight),this.dirLight=new a.Ox3(16777215,1),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(-1,1.75,1),this.dirLight.position.multiplyScalar(30),this.dirLight.castShadow=!0,this.dirLight.shadow.mapSize.width=4096,this.dirLight.shadow.mapSize.height=4096,this.dirLight.shadow.camera.left=-50,this.dirLight.shadow.camera.right=50,this.dirLight.shadow.camera.top=50,this.dirLight.shadow.camera.bottom=-50,this.dirLight.shadow.bias=-.0001,this.dirLight.shadow.camera.near=.001,this.dirLight.shadow.camera.far=350,this.sceneWrapper.scene.add(this.dirLight)}Dispose(){this.dirLight.visible=!1,this.hemiLight.visible=!1,this.sceneWrapper.scene.remove(this.dirLight),this.sceneWrapper.scene.remove(this.hemiLight)}constructor(t){this.sceneWrapper=t,this.Init()}}class g{Init(){let t=new Image;t.src="https://upload.wikimedia.org/wikipedia/commons/5/57/Heightmap.png",t.crossOrigin="Anonymous",t.onload=()=>{console.log("LandboxByImage")}}get capture(){return this._capture}set capture(t){}GetPointForRaycast(){}Update(){}MouseMove(t,e,s){this.capture&&console.log(this.capture)}MouseDrag(t,e){this.capture}MouseDown(t,e,s){}MouseUp(){this.capture=void 0}Dispose(){}constructor(t){this.damping=.96,this.gravity=-.032,this.timeStep=.316,this.groundZ=-9.26,this.m=new c.h9(0,0,0),this.scene=t;var e=new a.VLJ(10,10);this.scene.add(e),this.Init()}}class E{Init(){this.definition=new g(this.scene)}Update(){this.definition.Update()}MouseMove(t,e){}MouseDown(t,e){}MouseUp(t,e){this.definition.MouseUp(),this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.ableToMove=!0}MouseDrag(t,e){}Dispose(){this.definition.Dispose()}constructor(t){this.app=t,this.activeCommandController=new d(this),this.scene=this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.scene,this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.UpdateBinding=()=>{this.Update()},this.lightingController=new v(this),this.geometryCommon=new C(this),this.Init()}}class P{DeepCopy(){let t=new P(this.app);return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.pressedAlt=this.pressedAlt,t.pressedShift=this.pressedShift,t.pressedCtrl=this.pressedCtrl,t.isDoubleClick=this.isDoubleClick,t.isDown=this.isDown,t.isMove=this.isMove,t.lat=this.lat,t.long=this.long,t.wheel=this.wheel,t.preWheel=this.preWheel,t.yGLPicking=this.yGLPicking,t.CLICK_TYPE=this.CLICK_TYPE,t.native=this.native,t}constructor(t){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.CLICK_TYPE=c.uh.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.isActive=!0,null!=t&&(this.app=t)}}class M{InitNativeMouseEvent(t){t.onclick=t=>{this.prevent=!1,this.timer=setTimeout(()=>{this.prevent||(this.MouseClick(t),t.stopPropagation()),this.prevent=!1},this.delay)},t.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},t.onmousedown=t=>{this.MouseDown(t),t.stopPropagation()},t.onmouseup=t=>{this.MouseUp(t),t.stopPropagation()},t.onmousemove=t=>{this.MouseMove(t),t.stopPropagation()},t.addEventListener("wheel",t=>{this.MouseWheel(t,t.deltaY),t.stopPropagation()})}MouseDown(t){this.click=!0,this.down=!0;let e=this.CommonEventBuilder(t);e.CLICK_TYPE=c.uh.DOWN,e.isDown=!0,this.MouseEvenEmitting(e)}MouseClick(t){if(!this.click)return;let e=this.CommonEventBuilder(t);0===t.button?e.CLICK_TYPE=c.uh.LEFT:1===t.button?e.CLICK_TYPE=c.uh.MIDDLE:2===t.button&&(e.CLICK_TYPE=c.uh.RIGHT),this.MouseEvenEmitting(e)}MouseDoubleClick(t){let e=this.CommonEventBuilder(t);e.CLICK_TYPE=c.uh.DOUBLE,this.MouseEvenEmitting(e)}MouseDrag(t){this.click=!1,this.prevent=!0;let e=this.CommonEventBuilder(t);e.CLICK_TYPE=c.uh.DRAG,e.isDown=!0,1===t.buttons?e.CLICK_TYPE=c.uh.DRAG:4===t.buttons?e.CLICK_TYPE=c.uh.DRAG_MIDDLE:2===t.buttons&&(e.CLICK_TYPE=c.uh.DRAG_RIGHT),this.MouseEvenEmitting(e)}MouseMove(t){if(this.down){this.MouseDrag(t);return}let e=this.CommonEventBuilder(t);e.CLICK_TYPE=c.uh.MOVE,e.isDown=!0,this.prevent=!0,this.MouseEvenEmitting(e)}MouseUp(t){this.down=!1,this.click=!0;let e=this.CommonEventBuilder(t);e.CLICK_TYPE=c.uh.UP,e.isDown=!1,this.MouseEvenEmitting(e)}MouseWheel(t,e){let s=this.CommonEventBuilder(t);s.wheel=e,s.CLICK_TYPE=c.uh.WHEEL,this.MouseEvenEmitting(s)}CommonEventBuilder(t){let e=new P(this.app);return e.preX=this.mouseEventDataPre.x,e.preY=this.mouseEventDataPre.y,e.pressedShift=t.shiftKey,e.pressedAlt=t.altKey,e.pressedCtrl=t.ctrlKey,e.x=t.offsetX,e.y=t.offsetY,e.preWheel=this.mouseEventDataPre.wheel,e.wheel=0,e.native=t,this.mouseEventDataPre=e,this.e=e,e}get stopPropagation(){return this._stopPropagation}set stopPropagation(t){t?this._stopPropagation=t:setTimeout(()=>{this._stopPropagation=t},500)}MouseEvenEmitting(t){this.app.MouseEventController(t)}constructor(t){this.mouseEventDataPre=new P,this.isEnable=!0,this.clickCount=0,this.click=!1,this.prevent=!1,this.delay=250,this.down=!1,this._stopPropagation=!1,this.app=t}}class w{constructor(t){this.app=t,this.mouseInteraction=new M(this.app),this.mouseInteraction.InitNativeMouseEvent(this.app.divHost)}}class D{static Init(t){new D(t)}MouseEventController(t){this.sceneWrapper.activeCommandController.MouseEventController(t)}Resize(t,e){this.graphicsCoreWrapper.Resize(t,e)}Dispose(){this.graphicsCoreWrapper.Dispose(),this.sceneWrapper.Dispose()}Dummy(){}constructor(t){let e=document.getElementById(t);e&&(this.divHost=e),this.asset=new i,this.viewWrapper=new h(this),this.graphicsCoreWrapper=new m(this),this.sceneWrapper=new E(this),this.io=new w(this)}}class L{destroy(){if(this.divHost)try{for(;this.divHost.firstChild;)this.divHost.removeChild(this.divHost.firstChild)}catch(t){console.error("Error in destroy method:",t)}else console.warn("divHost is undefined in destroy method")}constructor(t){this.divHost=document.getElementById(t),D.Init(t)}}}}]);
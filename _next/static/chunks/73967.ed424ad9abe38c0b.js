"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73967],{73967:function(t,e,i){i.r(e),i.d(e,{Demo300GA:function(){return W},Solution:function(){return O}});class s{constructor(){}}class h{constructor(t){this.app=t}}var r,o,n=i(97776),a=i(78252),c=i(74087),l=i(8483);(r=o||(o={})).PERSPECTIVE="PERSPECTIVE",r.ORTHOGRAPHIC="ORTHOGRAPHIC",r.STEREO="STEREO";class p{GetStereo(){}set aspect(t){"PERSPECTIVE"===this.type?this.cameraP.aspect=t:this.type}get aspect(){return this.width/this.height}get camera(){return"PERSPECTIVE"===this.type?this.cameraP:"ORTHOGRAPHIC"===this.type?this.cameraO:this.cameraP}GetPerspective(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.cameraP=new n.cPb(45,this.width/this.height,.01,1e4),this.cameraP.position.set(t,e,i),this.InitOrbitController()}GetOrthographic(){this.cameraO=new n.iKG(-(this.frustumSize*this.aspect/2),this.frustumSize*this.aspect/2,this.frustumSize/2,-(this.frustumSize/2),.01,5e4),this.cameraO.position.set(0,1,0),this.InitOrbitController()}InitOrbitController(){"PERSPECTIVE"===this.type?this.controls=new a.OrbitControls(this.cameraP,this.canvas.renderer.domElement):"ORTHOGRAPHIC"===this.type&&(this.controls=new a.OrbitControls(this.cameraO,this.canvas.renderer.domElement)),this.controls.minDistance=.01,this.controls.maxDistance=500,this.controls.enablePan=!0,this.controls.enableZoom=!0,this.yRotRate=this.rotateRate/this.width*Math.PI/90,this.xRotRate=this.rotateRate/this.height*Math.PI/180,this.xPanRate=this.panRate/this.width*this.zoomFactor,this.yPanRate=this.panRate/this.height*this.zoomFactor,this.zPanRate=this.zoomRate/this.height}EnableDamping(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.35;this.controls.enableDamping=t,this.controls.dampingFactor=e}MouseDown(t,e){this.initX=this.prevX=t,this.initY=this.prevY=e}MouseMove(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=t-this.prevX,h=e-this.prevY;i?(this.controls.panLeft(s*this.xPanRate,this.cameraP.matrix),this.controls.panUp(h*this.yPanRate,this.cameraP.matrix)):(this.controls.rotateLeft(s*this.xRotRate),this.controls.rotateUp(h*this.yRotRate)),this.prevX=t,this.prevY=e}MouseWheel(t){this.controls.enableZoom=!0,t*=.1;let e=100*this.cameraP.position.length();this.zoomFactor=e,t>0?(this.cameraP.position.x*=.9,this.cameraP.position.y*=.9,this.cameraP.position.z*=.9):(this.cameraP.position.x*=1.1,this.cameraP.position.y*=1.1,this.cameraP.position.z*=1.1)}ShiftCamera(){this.cameraShift++,2===this.cameraShift&&(this.cameraShift=0),0===this.cameraShift?this.GetPerspective():1===this.cameraShift&&this.GetOrthographic()}MouseEventController(t){t.CLICK_TYPE===l.uh.DOWN&&this.MouseDown(t.x,t.y),t.CLICK_TYPE===l.uh.DRAG&&this.MouseMove(t.x,t.y,t.pressedShift),t.CLICK_TYPE===l.uh.WHEEL&&this.MouseWheel(t.wheel)}constructor(t,e,i,s="PERSPECTIVE"){this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.rotateRate=150,this.panRate=50,this.zoomRate=200,this.zoomFactor=1,this.frustumSize=.001,this.cameraShift=0,this.ableToMove=!0,this.canvas=t,this.type=s,this.width=e,this.height=i,"PERSPECTIVE"===this.type?this.GetPerspective(0,10,50):"ORTHOGRAPHIC"===this.type?this.GetOrthographic():"STEREO"===this.type&&this.GetStereo(),this.stereoCamera=new n.u37}}class d{Init(){let t=this.hostDiv.clientWidth,e=this.hostDiv.clientHeight;this.renderer=new n.CP7,this.renderer.setPixelRatio(t/e),this.camera=new p(this,t,e),this.scene=new n.xsS,this.renderer.domElement.id="dynamic-spring",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.pointerEvents="none",this.renderer.setSize(t,e),this.hostDiv.appendChild(this.renderer.domElement),this.RenderLoop(this)}RenderLoop(t){this.isActive&&(requestAnimationFrame(()=>{this.RenderLoop(this)}),this.UpdateBinding(),this.camera.controls.update(),this.renderer.render(this.scene,this.camera.camera))}UpdateBinding(){}ResizeCanvas(t,e){this.camera.aspect=t/e,this.camera.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)}ResizeEffect(t,e){}Remove(){for(;this.scene.children.length;)this.scene.remove(this.scene.children[0])}constructor(t,e){this.bg=0,this.isActive=!0,this.canvasWrapper=t,this.hostDiv=e,this.Init()}}class u{constructor(t){this.graphicsCoreWrapper=t,this.canvasThree=new d(this,this.graphicsCoreWrapper.app.divHost)}}class m{Resize(t,e){this.canvasWrapper.canvasThree.ResizeCanvas(t,e)}Dispose(){this.canvasWrapper.canvasThree.isActive=!1}constructor(t){this.app=t,this.canvasWrapper=new u(this)}}class v{MouseEventController(t){if(this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.MouseEventController(t),t.CLICK_TYPE===l.uh.LEFT){this.MouseLeftClickPre(t);return}if(t.CLICK_TYPE===l.uh.MIDDLE){this.MouseMiddleClickPre(t);return}if(t.CLICK_TYPE===l.uh.DOWN_RIGHT){this.MouseRightClickPre(t);return}if(t.CLICK_TYPE===l.uh.DOUBLE){this.MouseDoubleClickPre(t);return}if(t.CLICK_TYPE===l.uh.MOVE){this.MouseMovePre(t);return}if(t.CLICK_TYPE===l.uh.DRAG){this.MouseDragPre(t);return}if(t.CLICK_TYPE===l.uh.DOWN){this.MouseDownPre(t);return}else if(t.CLICK_TYPE===l.uh.UP){this.MouseUpPre(t);return}}MouseDown(t){}MouseDownPre(t){this.scene.MouseDown(t.x,t.y),this.MouseDown(t)}MouseLeftClick(t){}MouseLeftClickPre(t){this.MouseLeftClick(t)}MouseMiddleClick(t){}MouseMiddleClickPre(t){this.MouseMiddleClick(t)}MouseRightClick(t){}MouseRightClickPre(t){this.MouseRightClick(t)}MouseUp(t){}MouseUpPre(t){this.scene.MouseUp(t.x,t.y),this.MouseUp(t)}MouseDoubleClick(t){}MouseDoubleClickPre(t){this.MouseDoubleClick(t)}MouseMove(t){}MouseMovePre(t){this.scene.MouseMove(t.x,t.y),this.MouseMove(t)}MouseDrag(t){}MouseDragPre(t){this.scene.MouseDrag(t.x,t.y),this.MouseDrag(t)}constructor(t){this.scene=t}}class E{Raycast(t,e,i){this.m.x=t/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth*2-1,this.m.y=-(e/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight*2)+1,this.raycaster.setFromCamera(this.m,this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);let s=this.raycaster.intersectObjects(i);s.length>0&&console.log(s[0].point)}RaycastPoint(t,e,i){this.raycaster.params.Points={threshold:5},this.m.x=t/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth*2-1,this.m.y=-(e/this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight*2)+1,this.raycaster.setFromCamera(this.m,this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);let s=this.raycaster.intersectObjects(i);if(s.length>0){let t=s[0];return[t.point.x,t.point.y,t.point.z]}return null}constructor(t){this.listMesh=[],this.raycaster=new n.iMs,this.m=new n.FM8(0,0),this.scene=t,this.raycaster.params.Points={threshold:.1}}}class g{Init(){this.hemiLight=new n.vmT(16777215,16777215,.6),this.hemiLight.color.setHSL(.6,1,.6),this.hemiLight.groundColor.setHSL(.095,1,.75),this.hemiLight.position.set(0,50,0),this.sceneWrapper.scene.add(this.hemiLight),this.dirLight=new n.Ox3(16777215,1),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(-1,1.75,1),this.dirLight.position.multiplyScalar(30),this.dirLight.castShadow=!0,this.dirLight.shadow.mapSize.width=4096,this.dirLight.shadow.mapSize.height=4096,this.dirLight.shadow.camera.left=-50,this.dirLight.shadow.camera.right=50,this.dirLight.shadow.camera.top=50,this.dirLight.shadow.camera.bottom=-50,this.dirLight.shadow.bias=-.0001,this.dirLight.shadow.camera.near=.001,this.dirLight.shadow.camera.far=350,this.sceneWrapper.scene.add(this.dirLight)}Dispose(){this.dirLight.visible=!1,this.hemiLight.visible=!1,this.sceneWrapper.scene.remove(this.dirLight),this.sceneWrapper.scene.remove(this.hemiLight)}constructor(t){this.sceneWrapper=t,this.Init()}}class C{AddPolyline(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"red",i=new n.u9r,s=new Float32Array(t.flatMap(t=>t));i.setAttribute("position",new n.TlE(s,3));let h=new n.nls({color:e,linewidth:1,transparent:!0,opacity:.55}),r=new n.x12(i,h);this.definition.scene.add(r)}AddRect(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"red",i=new n.u9r,s=new Float32Array(t.flatMap(t=>t));i.setAttribute("position",new n.TlE(s,3));let h=new n.nls({color:e,linewidth:5}),r=new n.x12(i,h);this.definition.scene.add(r)}AddRectMesh(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let e=new n.u9r,i=new Float32Array(t.flatMap(t=>t));e.setAttribute("position",new n.TlE(i,3));let s=new Uint16Array([0,1,2,0,2,3]);e.setIndex(new n.TlE(s,1));let h=new n.vBJ({color:16776960,side:n.ehD}),r=new n.Kj0(e,h);this.definition.scene.add(r)}AddPoint(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#00afaf",i=new n.u9r;i.setAttribute("position",new n.a$l(t,3));let s=new n.UY4({size:4,sizeAttenuation:!1,color:e}),h=new n.woe(i,s);this.definition.scene.add(h)}constructor(t){this.definition=t}}class w{Update(t){this.min=new l.h9(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.max=new l.h9(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let e=0;e<t.length;++e)t[e].x<this.min.x&&(this.min.x=t[e].x),t[e].y<this.min.y&&(this.min.y=t[e].y),t[e].z<this.min.z&&(this.min.z=t[e].z),t[e].x>this.max.x&&(this.max.x=t[e].x),t[e].y>this.max.y&&(this.max.y=t[e].y),t[e].z>this.max.z&&(this.max.z=t[e].z)}constructor(){this.min=new l.h9(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.max=new l.h9(Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER)}}class y{static GetPolylineTemp(){let t=new y;return t.Add(10,10),t.Add(-5,8),t.Add(-7,-10),t.Add(-1,-8),t.Add(10,10),t}Add(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.vertices.push(new l.h9(t,e,i)),this.boundingBox.Update(this.vertices)}GetVerticesForThree(){let t=[];return this.vertices.forEach(e=>{t.push([e.x,e.z,e.y])}),t}GetCenterVec(){let t=new l.h9(0,0,0);for(let e=0;e<this.vertices.length-1;++e)t.x+=this.vertices[e].x,t.y+=this.vertices[e].y,t.z+=this.vertices[e].z;return t.x/=this.vertices.length-1,t.y/=this.vertices.length-1,t.z/=this.vertices.length-1,t}constructor(){this.vertices=[],this.boundingBox=new w}}let P=(t,e)=>{for(let i=0;i<t.length;++i)M(t[i],e)},M=(t,e)=>{let i=Math.cos(.017453292519943278*e),s=Math.sin(.017453292519943278*e);t.x=t.x*i-t.y*s,t.y=t.x*s+t.y*i};class f{GetVerticesForThree(){return[[this.vertices[0].x,this.vertices[0].z,this.vertices[0].y],[this.vertices[1].x,this.vertices[1].z,this.vertices[1].y],[this.vertices[2].x,this.vertices[2].z,this.vertices[2].y],[this.vertices[3].x,this.vertices[3].z,this.vertices[3].y],[this.vertices[0].x,this.vertices[0].z,this.vertices[0].y]]}constructor(t,e,i,s){this.vertices=[],this.color="green",this.vertices=[t,e,i,s]}}class I{GetVerticesForThree(){return this.rect.GetVerticesForThree()}Rotate(t){P([this.v,...this.rect.vertices],t)}get color(){return this.rect.color}constructor(t,e,i,s,h,r){this.isInside=!0,this.grid=t,this.i=e,this.j=i,this.v=s,this.width=h,this.height=r,this.rect=new f(new l.h9(this.v.x-.5*this.width,this.v.y-.5*this.height),new l.h9(this.v.x+.5*this.width,this.v.y-.5*this.height),new l.h9(this.v.x+.5*this.width,this.v.y+.5*this.height),new l.h9(this.v.x-.5*this.width,this.v.y+.5*this.height))}}class R{Init(t,e){this.rx=t,this.ry=e,this.intervalX=(this.max.x-this.min.x)/(this.rx-1),this.intervalY=(this.max.y-this.min.y)/(this.ry-1),this.cells=[],this.InitCell(),this.Rotate(),this.UpdateInside()}InitCell(){for(let t=0;t<this.ry;++t){let e=this.min.y+t*this.intervalY,i=[];for(let s=0;s<this.rx;++s){let h=this.min.x+s*this.intervalX,r=new l.h9(h,e);this.pts.push(r),i.push(new I(this,s,t,r,this.intervalX,this.intervalY))}this.cells.push(i)}}Rotate(){for(let t=0;t<this.ry;++t)for(let e=0;e<this.rx;++e)this.cells[t][e].Rotate(15)}UpdateInside(){for(let t=0;t<this.ry;++t)for(let e=0;e<this.rx;++e){let i=this.cells[t][e];l.h9.IsInsideOfVecsWtihVecs(i.rect.vertices,this.optimizer.polyline.vertices)?(i.rect.color="black",i.v.color="black",i.isInside=!0):(i.rect.color="#efefef",i.v.color="efefef",i.isInside=!1,i.rect.vertices.forEach(t=>{t.x-=.1}))}}constructor(t,e,i){this.pts=[],this.cells=[],this.optimizer=t,this.min=e,this.max=i}}class x{InitPolyline(){this.polyline=y.GetPolylineTemp()}InitGridSyste(){this.gridSystem=new R(this,this.polyline.boundingBox.min,this.polyline.boundingBox.max),this.gridSystem.Init(this.rx,this.ry)}constructor(t,e,i){this.gridOptimizerApp=t,this.rx=e,this.ry=i,this.InitPolyline(),this.InitGridSyste()}}class T{AddPolyline(){this.definition.renderer.AddPolyline(this.optimizer.polyline.GetVerticesForThree())}AddPoints(){this.optimizer.gridSystem.pts.forEach(t=>{this.definition.renderer.AddPoint([t.x,t.z,t.y],t.color)})}AddRects(){for(let t=0;t<this.optimizer.gridSystem.cells.length;++t)for(let e=0;e<this.optimizer.gridSystem.cells[t].length;++e){let i=this.optimizer.gridSystem.cells[t][e].GetVerticesForThree();i&&this.definition.renderer.AddRect(i,this.optimizer.gridSystem.cells[t][e].color)}}constructor(t){this.definition=t,this.optimizer=new x(this,15,8),this.AddPolyline(),this.AddPoints(),this.AddRects()}}class A{GetInitPoint(){return this.cv=this.appRectOptimizer.polyline.GetCenterVec(),this.cv}InitAgent(){this.rectAgent=new D(this.cv),this.rectAgent.Update(this.appRectOptimizer.polyline.vertices)}AddRenderer(){this.appRectOptimizer.definition.renderer.AddPoint([this.cv.x,this.cv.z,this.cv.y]),this.appRectOptimizer.definition.renderer.AddRect(this.rectAgent.GetVerticesForThree())}constructor(t){this.appRectOptimizer=t,this.cv=this.GetInitPoint(),this.InitAgent(),this.AddRenderer()}}class D{Update(t){let e=this.vs[1],i=this.vs[2],s=0,h=[];for(let r=0;r<360;r+=5){s=r,this.Rotation(r);let o=0;for(;this.Check(t)&&(this.RotateVec(e,r,1.1,1),this.RotateVec(i,r,1.1,1),e.x+=.1,i.x+=.1,!(o++>1e3)););h.push(this.GetArea())}console.log(h),this.Rotation(s)}GetArea(){return l.h9.GetArea(this.vs)}Rotation(t){this.vs=l.h9.RotateVecsLoal(this.vs,t)}RotateVec(t,e,i,s){let h=Math.cos(.017453292519943278*e),r=Math.sin(.017453292519943278*e);t.x=t.x*i*h-t.y*r,t.y=t.x*s*r+t.y*h}Check(t){return l.h9.IsInsideOfVecsWtihVecs(this.vs,t)}GetVerticesForThree(){return[[this.vs[0].x,0,this.vs[0].y],[this.vs[1].x,0,this.vs[1].y],[this.vs[2].x,0,this.vs[2].y],[this.vs[3].x,0,this.vs[3].y],[this.vs[0].x,0,this.vs[0].y]]}constructor(t){this.vs=[],this.widthHalf=2,this.heighthHalf=2,this.v=t,this.vs.push(new l.h9(t.x-this.widthHalf,t.y-this.heighthHalf),new l.h9(t.x+this.widthHalf,t.y-this.heighthHalf),new l.h9(t.x+this.widthHalf,t.y+this.heighthHalf),new l.h9(t.x-this.widthHalf,t.y+this.heighthHalf))}}class L{AddPolyline(){this.polyline=y.GetPolylineTemp(),this.definition.renderer.AddPolyline(this.polyline.GetVerticesForThree())}Init(){this.optimizer=new A(this)}constructor(t){this.definition=t,this.AddPolyline(),this.Init()}}class z{init(){this.gridOptimizerApp=new T(this),this.appRectOptimizer=new L(this)}update(){}mouseMove(t,e,i){}mouseDrag(t,e){}mouseDown(t,e,i){}mouseUp(){}dispose(){}constructor(t){this.m=new l.h9(0,0,0),this.scene=t,this.renderer=new C(this),this.init()}}class b{Init(){this.definition=new z(this.scene);let t=new n.VLJ(10,10,13421772,15658734);this.scene.add(t)}Update(){this.definition.update()}MouseMove(t,e){this.definition.mouseMove(t,e,0)}MouseDown(t,e){this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.ableToMove=!1,this.definition.mouseDown(t,e,0)}MouseUp(t,e){this.definition.mouseUp(),this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.ableToMove=!0}MouseDrag(t,e){this.definition.mouseDrag(t,e)}Dispose(){this.definition.dispose()}constructor(t){this.app=t,this.activeCommandController=new v(this),this.scene=this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.scene,this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.UpdateBinding=()=>{this.Update()},this.lightingController=new g(this),this.geometryCommon=new E(this),this.Init()}}class S{DeepCopy(){let t=new S(this.app);return t.x=this.x,t.y=this.y,t.z=this.z,t.preX=this.preX,t.preY=this.preY,t.preZ=this.preZ,t.pressedAlt=this.pressedAlt,t.pressedShift=this.pressedShift,t.pressedCtrl=this.pressedCtrl,t.isDoubleClick=this.isDoubleClick,t.isDown=this.isDown,t.isMove=this.isMove,t.lat=this.lat,t.long=this.long,t.wheel=this.wheel,t.preWheel=this.preWheel,t.yGLPicking=this.yGLPicking,t.CLICK_TYPE=this.CLICK_TYPE,t.native=this.native,t}constructor(t){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.CLICK_TYPE=l.uh.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.isActive=!0,null!=t&&(this.app=t)}}class _{InitNativeMouseEvent(t){t.onclick=t=>{this.prevent=!1,this.timer=setTimeout(()=>{this.prevent||(this.MouseClick(t),t.stopPropagation()),this.prevent=!1},this.delay)},t.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},t.onmousedown=t=>{this.MouseDown(t),t.stopPropagation()},t.onmouseup=t=>{this.MouseUp(t),t.stopPropagation()},t.onmousemove=t=>{this.MouseMove(t),t.stopPropagation()},t.addEventListener("wheel",t=>{this.MouseWheel(t,t.deltaY),t.stopPropagation()})}MouseDown(t){this.click=!0,this.down=!0;let e=this.CommonEventBuilder(t);e.CLICK_TYPE=l.uh.DOWN,e.isDown=!0,this.MouseEvenEmitting(e)}MouseClick(t){if(!this.click)return;let e=this.CommonEventBuilder(t);0===t.button?e.CLICK_TYPE=l.uh.LEFT:1===t.button?e.CLICK_TYPE=l.uh.MIDDLE:2===t.button&&(e.CLICK_TYPE=l.uh.RIGHT),this.MouseEvenEmitting(e)}MouseDoubleClick(t){let e=this.CommonEventBuilder(t);e.CLICK_TYPE=l.uh.DOUBLE,this.MouseEvenEmitting(e)}MouseDrag(t){this.click=!1,this.prevent=!0;let e=this.CommonEventBuilder(t);e.CLICK_TYPE=l.uh.DRAG,e.isDown=!0,1===t.buttons?e.CLICK_TYPE=l.uh.DRAG:4===t.buttons?e.CLICK_TYPE=l.uh.DRAG_MIDDLE:2===t.buttons&&(e.CLICK_TYPE=l.uh.DRAG_RIGHT),this.MouseEvenEmitting(e)}MouseMove(t){if(this.down){this.MouseDrag(t);return}let e=this.CommonEventBuilder(t);e.CLICK_TYPE=l.uh.MOVE,e.isDown=!0,this.prevent=!0,this.MouseEvenEmitting(e)}MouseUp(t){this.down=!1,this.click=!0;let e=this.CommonEventBuilder(t);e.CLICK_TYPE=l.uh.UP,e.isDown=!1,this.MouseEvenEmitting(e)}MouseWheel(t,e){let i=this.CommonEventBuilder(t);i.wheel=e,i.CLICK_TYPE=l.uh.WHEEL,this.MouseEvenEmitting(i)}CommonEventBuilder(t){let e=new S(this.app);return e.preX=this.mouseEventDataPre.x,e.preY=this.mouseEventDataPre.y,e.pressedShift=t.shiftKey,e.pressedAlt=t.altKey,e.pressedCtrl=t.ctrlKey,e.x=t.offsetX,e.y=t.offsetY,e.preWheel=this.mouseEventDataPre.wheel,e.wheel=0,e.native=t,this.mouseEventDataPre=e,this.e=e,e}get stopPropagation(){return this._stopPropagation}set stopPropagation(t){t?this._stopPropagation=t:setTimeout(()=>{this._stopPropagation=t},500)}MouseEvenEmitting(t){this.app.MouseEventController(t)}constructor(t){this.mouseEventDataPre=new S,this.isEnable=!0,this.clickCount=0,this.click=!1,this.prevent=!1,this.delay=250,this.down=!1,this._stopPropagation=!1,this.app=t}}class G{constructor(t){this.app=t,this.mouseInteraction=new _(this.app),this.mouseInteraction.InitNativeMouseEvent(this.app.divHost)}}class W{static Init(t){new W(t)}MouseEventController(t){this.sceneWrapper.activeCommandController.MouseEventController(t)}Resize(t,e){this.graphicsCoreWrapper.Resize(t,e)}Dispose(){this.graphicsCoreWrapper.Dispose(),this.sceneWrapper.Dispose()}Dummy(){}constructor(t){let e=document.getElementById(t);e&&(this.divHost=e),this.asset=new s,this.viewWrapper=new h(this),this.graphicsCoreWrapper=new m(this),this.sceneWrapper=new b(this),this.io=new G(this),(0,c.zH)("NJ3N6am8j"),(0,c.Uh)(4),(0,c.vk)()}}class O{destroy(){if(this.divHost)try{for(;this.divHost.firstChild;)this.divHost.removeChild(this.divHost.firstChild)}catch(t){console.error("Error in destroy method:",t)}else console.warn("divHost is undefined in destroy method")}constructor(t){this.divHost=document.getElementById(t),W.Init(t)}}}}]);
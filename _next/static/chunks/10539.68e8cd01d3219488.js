"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10539],{10539:function(t,e,i){i.r(e),i.d(e,{SceneCreativeCoding:function(){return H}});var s=i(28685);class h{InitIndeCanvas(){this.indeCanvas=new s.Dz(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,100,100,600,350,!0),this.indeCanvas.title="Circle Grid with Attractors 2",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=t=>this.RenderIndependentCanvas(t)}get width(){return this.indeCanvas.canvas.width}get height(){return this.indeCanvas.canvas.height}Init(t){}RenderIndependentCanvas(t){}MouseMove(t,e){}MouseMovePre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseMove(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDown(t,e){}MouseDownPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDown(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseUp(t,e){}MouseUpPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseUp(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDrag(t,e){}MouseDragPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDrag(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseLeftClick(t,e){}MouseLeftClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseLeftClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseMiddleClick(t,e){}MouseMiddleClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseMiddleClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseRightClick(t,e){}MouseRightClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseRightClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDoubleClick(t,e){}MouseDoubleClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDoubleClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseWheel(t,e,i){}MouseWheelPre(t,e,i){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseWheel(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,i)}constructor(t){this.mOffX=-12,this.mOffY=-12,this.scene=t,this.scene.definitions.push(this),this.InitIndeCanvas()}}class o extends h{Init(){}RenderIndependentCanvas(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseDown(t,e){this.p=[t,e]}constructor(t){super(t),this.p=[0,0]}}var n=i(21229);class r{MouseEventController(t){if(t.CLICK_TYPE===n.uh.LEFT){this.MouseLeftClickPre(t);return}if(t.CLICK_TYPE===n.uh.MIDDLE){this.MouseMiddleClickPre(t);return}if(t.CLICK_TYPE===n.uh.DOWN_RIGHT){this.MouseRightClickPre(t);return}if(t.CLICK_TYPE===n.uh.DOUBLE){this.MouseDoubleClickPre(t);return}if(t.CLICK_TYPE===n.uh.MOVE){this.MouseMovePre(t);return}if(t.CLICK_TYPE===n.uh.DRAG){this.MouseDragPre(t);return}if(t.CLICK_TYPE===n.uh.DOWN){this.MouseDownPre(t);return}else if(t.CLICK_TYPE===n.uh.WHEEL){this.MouseWheelPre(t);return}else if(t.CLICK_TYPE===n.uh.UP){this.MouseUpPre(t);return}}MouseDown(t){}MouseDownPre(t){this.scene.MouseDown(t.x,t.y),this.MouseDown(t)}MouseLeftClick(t){}MouseLeftClickPre(t){this.scene.MouseLeftClick(t.x,t.y),this.MouseLeftClick(t)}MouseMiddleClick(t){}MouseMiddleClickPre(t){this.scene.MouseMiddleClick(t.x,t.y),this.MouseMiddleClick(t)}MouseRightClick(t){}MouseRightClickPre(t){this.scene.MouseRightClick(t.x,t.y),this.MouseRightClick(t)}MouseUp(t){}MouseUpPre(t){this.scene.MouseUp(t.x,t.y),this.MouseUp(t)}MouseDoubleClick(t){}MouseDoubleClickPre(t){this.scene.MouseDoubleClick(t.x,t.y),this.MouseDoubleClick(t)}MouseMove(t){}MouseMovePre(t){this.scene.MouseMove(t.x,t.y),this.MouseMove(t)}MouseDrag(t){}MouseDragPre(t){this.scene.MouseDrag(t.x,t.y),this.MouseDrag(t)}MouseWheel(t){}MouseWheelPre(t){this.scene.MouseWheel(t.x,t.y,t.wheel),this.MouseWheel(t)}constructor(t){this.scene=t}}class l{constructor(t){this.scene=t}}class a extends h{Init(){}RenderIndependentCanvas(t){this.xpos=this.xpos+this.xspeed*this.xdirection,this.ypos=this.ypos+this.yspeed*this.ydirection,(this.xpos>this.width-this.rad||this.xpos<this.rad)&&(this.xdirection*=-1),(this.ypos>this.height-this.rad||this.ypos<this.rad)&&(this.ydirection*=-1),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.xpos,this.ypos,this.rad,0,6.28),t.closePath(),t.fill()}constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50}}class c extends h{RenderIndependentCanvas(t){for(let e of this.Balls)e.Render(t)}MouseDown(t,e){this.Balls.push(new d(this,t,e))}constructor(t){super(t),this.Balls=[]}}class d{static GetRandomHex(){return this.RGBToHex(Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()))}static RGBToHex(t,e,i){return"#"+[Math.round(t),Math.round(e),Math.round(i)].map(t=>{let e=t.toString(16);return 1===e.length?"0"+e:e}).join("")}Render(t){this.xpos=this.xpos+this.xspeed*this.xdirection,this.ypos=this.ypos+this.yspeed*this.ydirection,(this.xpos>this.BallBounceClass.width-this.rad||this.xpos<this.rad)&&(this.xdirection*=-1),(this.ypos>this.BallBounceClass.height-this.rad||this.ypos<this.rad)&&(this.ydirection*=-1),t.fillStyle=this.color,t.beginPath(),t.arc(this.xpos,this.ypos,this.rad,0,6.28),t.closePath(),t.fill()}constructor(t,e,i){this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.BallBounceClass=t,this.xpos=e,this.ypos=i,this.xdirection=2*Math.random()-1,this.ydirection=2*Math.random()-1,this.rad=50*Math.random()+10,this.color=d.GetRandomHex()}}class y extends h{Init(){this.mouse=[0,0]}RenderIndependentCanvas(t){this.pts=[];let e=this.width/40,i=this.height/40;for(let t=0;t<40;t+=1)for(let s=0;s<40;s+=1)this.pts.push([s*e,t*i]);let s=0;for(let e of this.pts){if(s%2==0){let i=[50,50,50,1],s=this.Distance(e[0],e[1],this.mouse[0],this.mouse[1]);i[0]=s,t.strokeStyle="rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",").concat(i[3],")"),t.beginPath(),t.arc(e[0],e[1],s/10,0,6.28),t.stroke()}s++}}Distance(t,e,i,s){return Math.sqrt((t-i)*(t-i)+(e-s)*(e-s))}MouseMove(t,e){this.mouse=[t,e]}constructor(t){super(t),this.mouse=[0,0],this.Init()}}class p extends h{Init(){this.mouse=[0,0]}RenderIndependentCanvas(t){this.pts=[];let e=this.width/40,i=this.height/40;for(let t=0;t<40;t+=1)for(let s=0;s<40;s+=1)this.pts.push([s*e,t*i]);let s=0;for(let e of this.pts){if(s%2==0){let i=[50,255,0,1],s=0;for(let t of this.attrs){let i=this.Attractor(e,t,this.strength,this.falloff);s<i&&(s=i)}i[2]+=3*s,t.strokeStyle="rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",").concat(i[3],")"),t.beginPath(),t.arc(e[0],e[1],10+s,0,6.28),t.stroke()}s++}}Attractor(t,e,i,s){let h=this.Sub(t,e),o=this.Length(h);return i*Math.exp(-s*o*o)}Sub(t,e){return[t[0]-e[0],t[1]-e[1]]}Unitize(t){let e=this.Length(t);return[t[0]/e,t[1]/e]}Length(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}MouseMove(t,e){this.attrs[this.attrs.length-1]=[t,e]}MouseDown(t,e){this.attrs.push([t,e])}MouseWheel(t,e,i){this.falloff+=1e-7*i}constructor(t){super(t),this.mouse=[0,0],this.attrs=[[0,0]],this.strength=50,this.falloff=5e-5,this.Init()}}class u extends h{Init(){this.mouse=[0,0]}RenderIndependentCanvas(t){this.pts=[];let e=this.width/20,i=this.height/20;for(let t=0;t<20;t+=1)for(let s=0;s<20;s+=1)this.pts.push([s*e,t*i]);let s=0;for(let e of this.pts){if(s%2==0){let i=[0,20,0,1],s=0;for(let t of this.attrs){let i=this.Attractor(e,t,this.strength,this.falloff);s<i&&(s=i)}i[2]+=3*s,t.strokeStyle="rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",").concat(i[3],")"),t.beginPath(),t.arc(e[0],e[1],10+s,0,6.28),t.stroke()}s++}}Attractor(t,e,i,s){let h=this.Sub(t,e),o=this.Length(h);return i*Math.exp(-s*o*o)}Sub(t,e){return[t[0]-e[0],t[1]-e[1]]}Unitize(t){let e=this.Length(t);return[t[0]/e,t[1]/e]}Length(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}MouseMove(t,e){this.attrs[this.attrs.length-1]=[t,e]}MouseDown(t,e){this.attrs.push([t,e])}MouseWheel(t,e,i){this.falloff+=1e-7*i}constructor(t){super(t),this.mouse=[0,0],this.attrs=[[0,0]],this.strength=50,this.falloff=5e-5,this.Init()}}class v extends h{Init(){this.lines.push(new x(10,10,50,50))}RenderIndependentCanvas(t){for(let e of this.lines)e.Render(t)}MouseMove(t,e){this.mouse=[t,e]}MouseDown(){let t=this.lines[this.lines.length-1].p1;this.lines.push(new x(t[0],t[1],this.mouse[0],this.mouse[1]))}constructor(t){super(t),this.mouse=[0,0],this.lines=[],this.indeCanvas.title="Line",this.Init()}}class x{Render(t){t.strokeStyle="red",t.beginPath(),t.moveTo(this.p0[0],this.p0[1]),t.lineTo(this.p1[0],this.p1[1]),t.closePath(),t.stroke()}constructor(t,e,i,s){this.p0=[t,e],this.p1=[i,s]}}class g extends h{Init(){this.lines.push(new m(10,10,50,50))}RenderIndependentCanvas(t){for(let e of this.lines)e.Render(t)}MouseMove(t,e){this.mouse=[t,e]}MouseDown(){this.lines.length>5&&this.lines.shift();let t=this.lines[this.lines.length-1].p1;this.lines.push(new m(t[0],t[1],this.mouse[0],this.mouse[1]))}constructor(t){super(t),this.mouse=[0,0],this.lines=[],this.indeCanvas.title="Line",this.Init()}}class m{Render(t){t.strokeStyle="red",t.beginPath(),t.moveTo(this.p0[0],this.p0[1]),t.lineTo(this.p1[0],this.p1[1]),t.closePath(),t.stroke()}constructor(t,e,i,s){this.p0=[t,e],this.p1=[i,s]}}class C{static GetRandomPath(t,e,i,s){let h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,o=[];for(let r=0;r<h;++r){let h=n.$H.GetRandomIntInclusive(t,i),r=n.$H.GetRandomIntInclusive(e,s);o.push(new n.h9(h,r,0))}return o}constructor(){}}class M{AddAgent(t,e){let i=new f(new n.h9(t,e));i.InitTarget(this.targets),this.boids.push(i)}Update(){for(let t of(this.Col(),this.boids))t.Update()}Col(){for(let t of this.boids)t.col=!1;for(let t=0;t<this.boids.length;++t){let e=this.boids[t];if(!e.isRenderable)break;for(let i=t+1;i<this.boids.length;++i){let t=this.boids[i];if(30>e.p.Distance(t.p)){t.col=!0;break}}}}GetPoint(){let t=[];for(let e of this.boids)e.isRenderable&&t.push(e.p);return t}Render(t){this.boids.forEach(e=>{e.Render(t)})}constructor(t){this.boids=[],this.boids=[],this.targets=t}}class f{InitTarget(t){this.targets=t,this.target=this.targets[this.targetID]}Update(){this.UpdateTarget(),this.UpdateVecSlowDown2()}UpdateTarget(){9>this.p.Distance(this.target)&&(this.targetID++,this.targetID<this.targets.length&&(this.target=this.targets[this.targetID],this.targetID,this.targets.length))}UpdateVec0(){this.desiredVelocity=new n.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x<this.maxForce?this.desiredVelocity.x-this.velocity.x:this.maxForce,e=this.desiredVelocity.y-this.velocity.y<this.maxForce?this.desiredVelocity.y-this.velocity.y:this.maxForce,i=this.desiredVelocity.z-this.velocity.z<this.maxForce?this.desiredVelocity.z-this.velocity.z:this.maxForce;this.steering=new n.h9(t/this.mass,e/this.mass,i/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.col?(this.p.x+=-(.8*this.steering.x),this.p.y+=-(.8*this.steering.y),this.p.z+=-(.8*this.steering.z)):(this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z)}UpdateVec1(){this.desiredVelocity=new n.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x,e=this.desiredVelocity.y-this.velocity.y,i=this.desiredVelocity.z-this.velocity.z;this.steering=new n.h9(t/this.mass,e/this.mass,i/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.col?(this.p.x+=-(.8*this.steering.x),this.p.y+=-(.8*this.steering.y),this.p.z+=-(.8*this.steering.z)):(this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z)}UpdateVecSlowDown1(){this.desiredVelocity=new n.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x,e=this.desiredVelocity.y-this.velocity.y,i=this.desiredVelocity.z-this.velocity.z;if(this.steering=new n.h9(t/this.mass,e/this.mass,i/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.col)this.p.x+=-(.8*this.steering.x),this.p.y+=-(.8*this.steering.y),this.p.z+=-(.8*this.steering.z);else{let t=this.maxSpeed/this.velocity.Length();t=t<1?t:1,this.p.x+=this.velocity.x*t,this.p.y+=this.velocity.y*t,this.p.z+=this.velocity.z*t}}UpdateVecSlowDown2(){this.desiredVelocity=new n.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z);let t=this.desiredVelocity.Length();t<150?(this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity*(t/150),this.desiredVelocity.y*=this.maxVelocity*(t/150),this.desiredVelocity.z*=this.maxVelocity*(t/150)):(this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity);let e=this.desiredVelocity.x-this.velocity.x,i=this.desiredVelocity.y-this.velocity.y,s=this.desiredVelocity.z-this.velocity.z;if(this.steering=new n.h9(e,i,s),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.col)this.p.x+=-(.8*this.steering.x),this.p.y+=-(.8*this.steering.y),this.p.z+=-(.8*this.steering.z);else{let t=this.maxSpeed/this.velocity.Length();t=t<1?t:1,this.p.x+=this.velocity.x*t,this.p.y+=this.velocity.y*t,this.p.z+=this.velocity.z*t}}Render(t){this.RenderDesiredVelocity(t),this.RenderCurrentVelocity(t),this.RenderCircle(t)}RenderDesiredVelocity(t){t.lineWidth=.5,t.strokeStyle="#00ff00",t.beginPath(),t.moveTo(this.p.x,this.p.y),t.lineTo(this.p.x+20*this.desiredVelocity.x,this.p.y+20*this.desiredVelocity.y),t.closePath(),t.stroke()}RenderCurrentVelocity(t){t.lineWidth=.5,t.strokeStyle="#ff0000",t.beginPath(),t.moveTo(this.p.x,this.p.y),t.lineTo(this.p.x+20*this.velocity.x,this.p.y+20*this.velocity.y),t.closePath(),t.stroke()}RenderCircle(t){t.strokeStyle="#000000",t.lineWidth=.5,t.beginPath(),t.moveTo(this.targets[0].x,this.targets[0].y);for(let e=1;e<this.targets.length;++e)t.lineTo(this.targets[e].x,this.targets[e].y);t.closePath(),t.stroke(),t.beginPath(),t.arc(this.p.x,this.p.y,10,0,6.28),t.closePath(),t.stroke()}constructor(t){this.maxForce=5,this.maxVelocity=5,this.maxSpeed=5,this.mass=10.2,this.isRenderable=!0,this.targetID=0,this.col=!1,this.velocity=new n.h9(0,0,0),this.p=t,this.target=new n.h9(t.x,t.y,t.z)}}f.list=[];class w extends h{Init(){let t=C.GetRandomPath(0,0,this.width,this.height);this.BoidContoller1=new M(t)}RenderIndependentCanvas(t){this.BoidContoller1.Update(),this.BoidContoller1.Render(t),this.Circle(t)}MouseMove(t,e){this.mouse=[t,e]}MouseDown(){this.BoidContoller1.AddAgent(this.mouse[0],this.mouse[1])}Circle(t){for(let e=0;e<6.28;e+=.5)for(let i=0;i<3.14;i+=.5){let s=50*Math.cos(e)*Math.sin(i),h=50*Math.sin(e)*Math.sin(i);t.beginPath(),t.arc(s,h,2,0,6.28),t.closePath(),t.fill()}}constructor(t){super(t),this.mouse=[0,0],this.indeCanvas.title="BoidSystem01",this.Init()}}class I{AddAgent(t,e,i,s){let h=new S(new n.h9(t,e),new n.h9(0,0),new n.h9(i,s));this.boids.push(h)}Update(){for(let t of this.boids)t.Update()}GetPoint(){let t=[];for(let e of this.boids)e.isRenderable&&t.push(e.p);return t}Render(t){this.boids.forEach(e=>{e.Render(t)})}constructor(){this.boids=[],this.boids=[]}}class S{Update(){this.UpdateVec1()}UpdateTarget(){let t=n.$H.GetRandomInt(this.p0.x,this.p1.x),e=n.$H.GetRandomInt(this.p0.y,this.p1.y);this.target=new n.h9(t,e)}UpdateVec1(){this.desiredVelocity=new n.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x<this.maxForce?this.desiredVelocity.x-this.velocity.x:this.maxForce,e=this.desiredVelocity.y-this.velocity.y<this.maxForce?this.desiredVelocity.y-this.velocity.y:this.maxForce,i=this.desiredVelocity.z-this.velocity.z<this.maxForce?this.desiredVelocity.z-this.velocity.z:this.maxForce;this.steering=new n.h9(t/this.mass,e/this.mass,i/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.Queue(),this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z,this.t+=.01,this.t>3&&(this.t=0,this.UpdateTarget())}UpdateVec0(){this.steering=this.Wander(new n.h9(this.velocity.x,this.velocity.y,this.velocity.z)),this.steering.x=this.steering.x<this.maxForce?this.steering.x:this.maxForce,this.steering.y=this.steering.y<this.maxForce?this.steering.y:this.maxForce,this.steering.z=this.steering.z<this.maxForce?this.steering.z:this.maxForce,this.steering.x/=this.mass,this.steering.y/=this.mass,this.steering.z/=this.mass,this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x=this.velocity.x+this.steering.x:this.velocity.x=this.maxSpeed,this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y=this.velocity.y+this.steering.y:this.velocity.y=this.maxSpeed,this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z=this.velocity.z+this.steering.z:this.velocity.z=this.maxSpeed,this.Queue(),console.log(this.maxSpeed),this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z}Wander(t){let e=new n.h9(t.x,t.y,t.z);e.Normalize(),e.Scale(this.CIRCLE_DISTANCE);let i=new n.h9(0,-1);return i.Scale(this.CIRCLE_RADIUS),i=this.SetAngle(i,this.wanderAngle),this.wanderAngle+=Math.random()*this.ANGLE_CHANGE-.5*this.ANGLE_CHANGE,e.Add(i)}SetAngle(t,e){let i=t.Length();return t.x=Math.cos(e)*i,t.y=Math.sin(e)*i,t}GetNeighborAhead(){var t=void 0,e=this.velocity.Clone();e.Normalize(),e.Scale(this.MAX_QUEUE_AHEAD);let i=this.p.Clone().Add(e);for(let e=0;e<S.list.length;e++){let s=S.list[e],h=n.h9.Distance(i,s.p);if(s!==this&&h<=this.MAX_QUEUE_RADIUS){t=s;break}}return t}Queue(){return void 0!==this.GetNeighborAhead()&&this.velocity.Scale(.3),new n.h9(0,0)}Render(t){this.RenderCircle(t)}RenderDesiredVelocity(t){}RenderCurrentVelocity(t){}RenderCircle(t){t.strokeStyle="#000000",t.lineWidth=.5,t.beginPath(),t.arc(this.p.x,this.p.y,10,0,6.28),t.closePath(),t.stroke()}constructor(t,e,i){this.maxForce=2,this.maxVelocity=2,this.maxSpeed=.9,this.mass=100.2,this.isRenderable=!0,this.targetID=0,this.col=!1,this.velocity=new n.h9(0,0,0),this.wanderAngle=0,this.CIRCLE_DISTANCE=50,this.CIRCLE_RADIUS=50,this.ANGLE_CHANGE=15,this.t=0,this.MAX_QUEUE_AHEAD=15,this.MAX_QUEUE_RADIUS=10,S.list.push(this),this.p=t,this.p0=e,this.p1=i,this.UpdateTarget()}}S.list=[];class z extends h{Init(){this.BoidContoller=new I}RenderIndependentCanvas(t){this.BoidContoller.Update(),this.BoidContoller.Render(t)}MouseMove(t,e){this.mouse=[t,e]}MouseDown(){this.BoidContoller.AddAgent(this.mouse[0],this.mouse[1],this.width,this.height)}constructor(t){super(t),this.mouse=[0,0],this.indeCanvas.title="BoidSystem01",this.Init()}}class D{AddAgent(t,e,i,s){let h=new R(new n.h9(t,e),new n.h9(0,0),new n.h9(i,s));this.boids.push(h)}Update(){for(let t of this.boids)t.Update()}UpdateTarget(t,e){for(let i of this.boids)i.target.x=t,i.target.y=e}GetPoint(){let t=[];for(let e of this.boids)e.isRenderable&&t.push(e.p);return t}Render(t){this.boids.forEach(e=>{e.Render(t)})}constructor(){this.boids=[],this.boids=[]}}class R{Update(){this.UpdateVec1()}UpdateTarget(){let t=n.$H.GetRandomInt(this.p0.x,this.p1.x),e=n.$H.GetRandomInt(this.p0.y,this.p1.y);this.target=new n.h9(t,e)}UpdateVec1(){this.desiredVelocity=new n.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x<this.maxForce?this.desiredVelocity.x-this.velocity.x:this.maxForce,e=this.desiredVelocity.y-this.velocity.y<this.maxForce?this.desiredVelocity.y-this.velocity.y:this.maxForce,i=this.desiredVelocity.z-this.velocity.z<this.maxForce?this.desiredVelocity.z-this.velocity.z:this.maxForce;this.steering=new n.h9(t/this.mass,e/this.mass,i/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.Queue(),this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z,this.t+=.01,this.t>3&&(this.t=0)}Queue(){var t=this.GetNeighborAhead();return void 0!==t&&this.BrakingForceOverlap(t),new n.h9(0,0)}BrakingForceOverlap(t){let e=new n.h9(0,0);if(e.x=-(.8*this.steering.x),e.y=-(.8*this.steering.y),this.velocity.Scale(-1),e=e.Add(this.velocity),n.h9.Distance(this.p,t.p)<=this.MAX_QUEUE_RADIUS){this.velocity.Scale(.3);return}this.velocity=e}HardStop(){this.velocity.Scale(.3)}BrakingForce(){let t=new n.h9(0,0);t.x=-(.8*this.steering.x),t.y=-(.8*this.steering.y),this.velocity.Scale(-1),t=t.Add(this.velocity),this.velocity=t}GetNeighborAhead(){var t=void 0,e=this.velocity.Clone();e.Normalize(),e.Scale(this.MAX_QUEUE_AHEAD);let i=this.p.Clone().Add(e);for(let e=0;e<R.list.length;e++){let s=R.list[e],h=n.h9.Distance(i,s.p);if(s!==this&&h<=this.MAX_QUEUE_RADIUS){t=s;break}}return t}Separation(){let t=new n.h9(0,0),e=0;for(let i=0;i<R.list.length;i++){let s=R.list[i];s!==this&&n.h9.Distance(s.p,this.p)<=this.SEPARATION_RADIUS&&(t.x+=s.p.x-this.p.x,t.y+=s.p.y-this.p.y,t.z+=s.p.z-this.p.z,e++)}return 0!==e&&(t.x/=e,t.y/=e,t.z/=e,t.Scale(-1)),t.Normalize(),t.Scale(this.MAX_SEPARATION),t}Render(t){this.RenderCircle(t)}RenderDesiredVelocity(t){}RenderCurrentVelocity(t){}RenderCircle(t){t.strokeStyle="#000000",t.lineWidth=.5,t.beginPath(),t.arc(this.p.x,this.p.y,10,0,6.28),t.closePath(),t.stroke()}constructor(t,e,i){this.maxForce=2,this.maxVelocity=2,this.maxSpeed=.9,this.mass=100.2,this.isRenderable=!0,this.targetID=0,this.col=!1,this.velocity=new n.h9(0,0,0),this.wanderAngle=0,this.CIRCLE_DISTANCE=50,this.CIRCLE_RADIUS=50,this.ANGLE_CHANGE=15,this.t=0,this.MAX_QUEUE_AHEAD=15,this.MAX_QUEUE_RADIUS=15,this.SEPARATION_RADIUS=10,this.MAX_SEPARATION=.5,R.list.push(this),this.p=t,this.p0=e,this.p1=i,this.UpdateTarget()}}R.list=[];class V extends h{Init(){this.BoidContoller=new D}RenderIndependentCanvas(t){this.BoidContoller.Update(),this.BoidContoller.Render(t)}MouseMove(t,e){this.mouse=[t,e],this.BoidContoller.UpdateTarget(t,e)}MouseDown(){this.BoidContoller.AddAgent(this.mouse[0],this.mouse[1],this.width,this.height)}constructor(t){super(t),this.mouse=[0,0],this.indeCanvas.title="BoidSystem01",this.Init()}}class P extends h{Init(){this.lines.push(new U(10,10,50,50))}RenderIndependentCanvas(t){for(let e of this.lines)e.Render(t)}MouseMove(t,e){this.mouse=[t,e]}MouseDown(){this.lines.length>5&&this.lines.shift();let t=this.lines[this.lines.length-1].p1;this.lines.push(new U(t[0],t[1],this.mouse[0],this.mouse[1]))}constructor(t){super(t),this.mouse=[0,0],this.lines=[],this.indeCanvas.title="BoidSystem04",this.Init()}}class U{Render(t){t.strokeStyle="red",t.beginPath(),t.moveTo(this.p0[0],this.p0[1]),t.lineTo(this.p1[0],this.p1[1]),t.closePath(),t.stroke()}constructor(t,e,i,s){this.p0=[t,e],this.p1=[i,s]}}class A{Update(t,e,i,s){this.velocity.Add(this.gravity),this.velocity.Mult(s),this.force.Mult(i/this.m),this.velocity.Add(this.force),this.v.x+=this.velocity.x*i,this.v.y+=this.velocity.y*i,this.v.z+=this.velocity.z*i,console.log(this.velocity.x,this.velocity.y),this.UpdateEdge(t,e)}UpdateEdge(t,e){(this.v.x>t||this.v.x<0)&&(this.velocity.x=-1*this.velocity.x),this.v.y>e&&(this.velocity.y=-.95*this.velocity.y,this.v.y=e)}Render(t){t.beginPath(),t.arc(this.v.x,this.v.y,this.r,0,2*Math.PI),t.closePath(),t.fill()}constructor(t,e,i,s=1){this.velocity=new n.h9(0,0,0),this.force=new n.h9(0,.01,0),this.gravity=new n.h9(0,.95,0),this.v=new n.h9(0,0,0),this.r=10,this.m=.1,this.v=new n.h9(t,e,0),this.m=s}}class b{Update(){this.dNode.Update(this.Dynamic01.width,this.Dynamic01.height,this.t,.9),this.t+=.1}Render(t){this.dNode.Render(t)}constructor(t){this.t=0,this.Dynamic01=t,this.dNode=new A(100,100,0)}}class k extends h{Init(){this.DynamicSystem=new b(this)}RenderIndependentCanvas(t){this.DynamicSystem.Update(),this.DynamicSystem.Render(t)}MouseMove(t,e){this.mouse=[t,e]}MouseDown(){console.log(this.mouse)}constructor(t){super(t),this.mouse=[0,0],this.indeCanvas.title="Dynamic01",console.log("init Dynamic01"),this.Init()}}class E extends h{Init(){this.DynamicSystem=new b(this)}RenderIndependentCanvas(t){this.DynamicSystem.Update(),this.DynamicSystem.Render(t)}MouseMove(t,e){this.mouse=[t,e]}MouseDown(){}constructor(t){super(t),this.mouse=[0,0],this.indeCanvas.title="Dynamic02",console.log("init Dynamic02"),this.Init()}}class L extends h{Init(){this.DynamicSystem=new b(this)}RenderIndependentCanvas(t){this.DynamicSystem.Update(),this.DynamicSystem.Render(t)}MouseMove(t,e){this.mouse=[t,e]}MouseDown(){}constructor(t){super(t),this.mouse=[0,0],this.indeCanvas.title="Dynamic03",this.Init()}}class _ extends h{Init(){this.p=new T(100,100,10),console.log("oop init")}RenderIndependentCanvas(t){console.log("oop loop"),this.p.Render(t),console.log(this.p.age)}MouseMove(t,e){this.mouse=[t,e]}MouseDown(){}constructor(t){super(t),this.mouse=[0,0],this.indeCanvas.title="OOP",this.Init()}}class T{Render(t){t.beginPath(),t.arc(this.age,this.height,this.weight,0,6.28),t.closePath(),t.fill(),this.age+=.01,this.age>102&&this.Compute()}Compute(){this.height+=.1}constructor(t,e,i){this.age=t,this.height=e,this.weight=i}}class H{Init(){this.definitions=[]}get width(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.width}get height(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.height}InitDefinition(){for(let t of this.definitions)t.Init(this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.ctx)}Render(t){}MouseMove(t,e){for(let i of this.definitions)i.MouseMovePre(t,e)}MouseLeftClick(t,e){for(let i of this.definitions)i.MouseLeftClickPre(t,e)}MouseDown(t,e){for(let i of this.definitions)i.MouseDownPre(t,e)}MouseUp(t,e){for(let i of this.definitions)i.MouseUpPre(t,e)}MouseDrag(t,e){for(let i of this.definitions)i.MouseDragPre(t,e)}MouseMiddleClick(t,e){for(let i of this.definitions)i.MouseMiddleClickPre(t,e)}MouseRightClick(t,e){for(let i of this.definitions)i.MouseRightClickPre(t,e)}MouseDoubleClick(t,e){for(let i of this.definitions)i.MouseDoubleClickPre(t,e)}MouseWheel(t,e,i){for(let s of this.definitions)s.MouseWheelPre(t,e,i)}Dispose(){this.definitions=[]}LoadDefinition(t){"Blank"===t&&console.log(new o(this)),"BallBounce"===t&&console.log(new a(this)),"BallBounceClass"===t&&console.log(new c(this)),"CircleGrid"===t&&console.log(new y(this)),"CircleGridAttractors1"===t&&console.log(new p(this)),"CircleGridAttractors2"===t&&console.log(new u(this)),"Line"===t&&console.log(new v(this)),"Line2"===t&&console.log(new g(this)),"BoidSystem01"===t&&console.log(new w(this)),"BoidSystem02"===t&&console.log(new z(this)),"BoidSystem03"===t&&console.log(new V(this)),"BoidSystem04"===t&&console.log(new P(this)),"DynamicSystem01"===t&&console.log(new k(this)),"DynamicSystem02"===t&&console.log(new E(this)),"DynamicSystem03"===t&&console.log(new L(this)),"OOP01"===t&&console.log(new _(this))}constructor(t){this.definitions=[],this.implementation=t,this.canvas=t.app.model.graphicsCoreWrapper.canvasWrapper.canvas,this.activeCommandController=new r(this),this.geomeetryCommon=new l(this),this.Init(),this.InitDefinition()}}}}]);
{"version":3,"file":"static/js/64748.352449d1.chunk.js","mappings":"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","sources":["njslab/Infrastructure/AppDrawingBlock/EventInteraction/MouseInteraction.ts","njslab/Infrastructure/AppDrawingBlock/EventInteraction/KeyboardInteraction.ts","njslab/Infrastructure/AppDrawingBlock/lib/MouseInteraction.ts","njslab/Infrastructure/AppDrawingBlock/lib/KeyboardInteraction.ts","njslab/Infrastructure/AppDrawingBlock/CUIBlock/Block/base/CBlockBase.ts","njslab/Infrastructure/AppDrawingBlock/lib/NVector3.ts","njslab/Infrastructure/AppDrawingBlock/Core/CBlockRenderer.ts","njslab/Infrastructure/AppDrawingBlock/lib/MathUtility.ts","njslab/Infrastructure/AppDrawingBlock/CBlock/Core/Base/CBlockBase.ts","njslab/Infrastructure/AppDrawingBlock/lib/ColorUtility.ts","njslab/Infrastructure/AppDrawingBlock/CBlock/Core/Base/CBlockIO.ts","njslab/Infrastructure/AppDrawingBlock/CBlock/Core/CBlockPreset.ts","njslab/Infrastructure/AppDrawingBlock/lib/NumericalMotion.ts","njslab/Infrastructure/AppDrawingBlock/CBlock/Core/CBlockBody.ts","njslab/Infrastructure/AppDrawingBlock/Core/ActiveCommandDrawingBlock.ts","njslab/Infrastructure/AppDrawingBlock/Core/CBCanvas.ts","njslab/Infrastructure/AppDrawingBlock/AppDrawingBlock.ts"],"sourcesContent":["// import { CActiveCommandNone } from '../../AppDrawing/Core/CActiveCommands';\n\n// import { CGeometry } from '../AppDrawing/Canvas/CGeometry/CoreBase/CGeometryCommon';\n// import { NVector3 } from '../Core/Geometry/NVector3';\n// import { ActiveCommand } from './ActiveCommands';\n// import { CGeometry } from '../Canvas/CGeometry/CGeometryCommon';\n// / <reference path='../../types/arcgis-js-api.d.ts' />\n\nexport enum CLICKTYPE {\n  LEFT = 'LEFT', MIDDLE = 'MIDDLE', RIGHT = 'RIGHT', WHEEL = 'WHEEL',\n  DRAG = 'DRAG', DRAG_LEFT = 'DRAG_LEFT', DRAG_MIDDLE = 'DRAG_MIDDLE', DRAG_RIGHT = 'DRAG_RIGHT',\n  MOVE = 'MOVE', DOUBLE = 'DOUBLE', UP = 'UP',\n  DOWN = 'DOWN', DOWN_MIDDLE = 'DOWN_MIDDLE', DOWN_RIGHT = 'DOWN_RIGHT'\n}\n\nexport class MouseEventData {\n  x: number = -1; y: number = -1; z: number = -1;\n  preX: number = -1; preY: number = -1; preZ: number = -1;\n  yGLPicking: number;\n  // command: CActiveCommandNone; // = new CActiveCommandNone(this.graphicApp.activeCommands);\n  CLICKTYPE: CLICKTYPE = CLICKTYPE.MOVE;\n  isDown: boolean = false;\n  isDoubleClick: boolean = false;\n  isMove: boolean = false;\n  pressedShift: boolean = false;\n  pressedAlt: boolean = false;\n  pressedCtrl: boolean = false;\n\n  lat: number = -1;\n  long: number = -1;\n  wheel: number = 0;\n  preWheel: number = 0;\n\n  premEvent: MouseEventData;\n  native: MouseEvent;\n  constructor() {\n\n  }\n}\nexport class MouseInteraction {\n  static mouseEventDataPre: MouseEventData; // = new MouseEventData();\n\n  isEnable: boolean = true;\n\n  click: boolean = false;\n  prevent: boolean = false;\n  delay: number = 100;\n  timer: NodeJS.Timer | number;\n  down: boolean = false;\n  e: MouseEventData;\n\n  static MouseEvent(mouseEventData: MouseEventData) {\n    if (mouseEventData.isMove) {\n      // console.log(mouseEventData);\n    }\n    // MouseInteraction.graphicApp.ACController.MouseEventControl(mouseEventData);\n    // mouseEventData.graphicApp.appDrawing.activeCommands.activeCommand.MouseEventControl(mouseEventData);\n  }\n\n  constructor() {\n\n\n    MouseInteraction.mouseEventDataPre = new MouseEventData();\n\n    // this.InitNativeMouseWheelEvent(this.graphicApp.divGraphicApp);\n  }\n  // ................................................................ event from native\n  InitNativeMouseWheelEvent(div: HTMLElement) {\n    // div.onwheel = (e: WheelEvent) => { this.MouseWheel(e, e.wheelDelta); };\n  }\n  InitNativeMouseEvent(div?: HTMLElement | undefined) {\n    if (div === undefined || div === null) {\n      document.onclick = (e: MouseEvent) => {\n        this.timer = setTimeout(\n          () => {\n            if (!this.prevent) { this.MouseClick(e); }\n            this.prevent = false;\n          },\n          this.delay);\n      };\n      document.ondblclick = (e: MouseEvent) => {\n        clearTimeout(this.timer as any);\n        this.prevent = true;\n        this.MouseDoubleClick(e);\n      };\n      document.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\n      document.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\n      document.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\n    } else {\n      div.onclick = (e: MouseEvent) => {\n        this.timer = setTimeout(\n          () => {\n            if (!this.prevent) { this.MouseClick(e); }\n            this.prevent = false;\n          },\n          this.delay);\n      };\n      div.ondblclick = (e: MouseEvent) => {\n        clearTimeout(this.timer as number);\n        this.prevent = true;\n        this.MouseDoubleClick(e);\n      };\n      div.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\n      div.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\n      div.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\n    }\n  }\n  MouseDown(e: MouseEvent) {\n    this.click = true;\n    this.down = true;\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.DOWN;\n    mEvent.isDown = true;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseClick(e: MouseEvent) {\n    if (!this.click) { return; }\n    let mEvent = this.CommonEventBuilder(e);\n    if (e.button === 0) {\n      mEvent.CLICKTYPE = CLICKTYPE.LEFT;\n    } else if (e.button === 1) {\n      mEvent.CLICKTYPE = CLICKTYPE.MIDDLE;\n    } else if (e.button === 2) {\n      mEvent.CLICKTYPE = CLICKTYPE.RIGHT;\n    }\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseDoubleClick(e: MouseEvent) {\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.DOUBLE;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseDrag(e: MouseEvent) {\n    this.click = false;\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.DRAG;\n    mEvent.isDown = true;\n    if (e.buttons === 1) {\n      mEvent.CLICKTYPE = CLICKTYPE.DRAG;\n    } else if (e.buttons === 4) {\n      mEvent.CLICKTYPE = CLICKTYPE.DRAG_MIDDLE;\n    } else if (e.buttons === 2) {\n      mEvent.CLICKTYPE = CLICKTYPE.DRAG_RIGHT;\n    }\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseMove(e: MouseEvent) {\n    if (this.down) { this.MouseDrag(e); return; }\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.MOVE;\n    mEvent.isDown = false;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseUp(e: MouseEvent) {\n    this.down = false;\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.UP;\n    mEvent.isDown = false;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseWheel(e: MouseEvent, v: number) {\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.wheel = v;\n    mEvent.CLICKTYPE = CLICKTYPE.WHEEL;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  AppendDownEvent(e: MouseEvent) {\n    // let e: any = MouseEventListener.mouseClick;\n\n    // document.onmousedown = (e) => {\n    //   let mEvent = this.CommonEventBuilder(e);\n    //   if (e.button === 0) mEvent.CLICKTYPE = CLICKTYPE.LEFT;\n    //   else if (e.button === 1) mEvent.CLICKTYPE = CLICKTYPE.MIDDLE;\n    //   else if (e.button === 2) mEvent.CLICKTYPE = CLICKTYPE.RIGHT;\n    //   mEvent.isDown = true;\n    //   //mEvent.FROM = FROM.NATIVE;\n    //   mEvent.CLICKTYPE = CLICKTYPE.DOWN;\n    //   \n    // };\n  }\n  AppendUpEvent() {\n    document.onmouseup = (e: MouseEvent) => {\n      let mEvent = this.CommonEventBuilder(e);\n      if (e.button === 0) {\n        mEvent.CLICKTYPE = CLICKTYPE.LEFT;\n      } else if (e.button === 1) {\n        mEvent.CLICKTYPE = CLICKTYPE.MIDDLE;\n      } else if (e.button === 2) {\n        mEvent.CLICKTYPE = CLICKTYPE.RIGHT;\n      }\n      mEvent.isDown = false;\n      // mEvent.FROM = FROM.NATIVE;\n      mEvent.CLICKTYPE = CLICKTYPE.UP;\n      MouseInteraction.MouseEvent(mEvent);\n    };\n  }\n  // ................................................................... ArcGIS\n  // }\n\n  // InitArcGISMapEventV3x() {\n  // .................................................................\n  // this.map.on('click', (e: any) => {\n  //   if (e.button == 0) { this.MouseClickLeftArcGIS(e.screenPoint.x, e.screenPoint.y); }\n  //   else if (e.button == 1) this.MouseClickMiddleArcGIS(e.screenPoint.x, e.screenPoint.y);\n  //   else this.MouseClickRightArcGIS(e.screenPoint.x, e.screenPoint.y);\n  // });\n  // this.map.on('dbl-click', (e: any) => {this.MouseDoubleClickArcGIS(e.screenPoint.x, e.screenPoint.y);});\n  // this.map.on('mouse-wheel', (e: any) => { console.log('mouse wheel'); });\n  // this.map.on('mouse-down', (e: any) => { this.MouseDownArcGIS(e.screenPoint.x, e.screenPoint.y); });\n  // this.map.on('mouse-drag', (e: any) => { this.MouseDragClickArcGIS(e.screenPoint.x, e.screenPoint.y); });\n  // this.map.on('mouse-move', (e: any) => { this.MouseMoveArcGIS(e.screenPoint.x, e.screenPoint.y); });\n  // this.map.on('mouse-up', (e: any) => { this.MouseUpArcGIS(e.screenPoint.x, e.screenPoint.y); });\n  // .................................................................\n  //   this.map.on('key-down', (e: any) => { this.graphicApp.keyBoard.KeyDown(e); });\n  //   this.map.on('key-up', (e: any) => { this.graphicApp.keyBoard.KeyUp(e); });\n  //   this.map.on('resize', (e: any) => {\n  //   });\n  //   this.map.on('pan', (e: any) => {\n  //     this.graphicApp.screen.xOffCurrent = e.delta.x;\n  //     this.graphicApp.screen.yOffCurrent = e.delta.y;\n  //     // this.graphicApp.activeCommands.isPan = true;\n  //   });\n  //   this.map.on('pan-start', (e: any) => {\n  //     // this.graphicApp.screen.xOffPre = e.delta.x;\n  //     // this.graphicApp.screen.yOffPre = e.delta.x;\n  //     this.graphicApp.activeCommands.isPan = true;\n  //   });\n  //   this.map.on('pan-end', (e: any) => {\n  //     this.graphicApp.screen.xOffCurrent = 0\n  //     this.graphicApp.screen.yOffCurrent = 0;\n  //     this.graphicApp.screen.xOffPre = 0\n  //     this.graphicApp.screen.yOffPre = 0;\n  //     this.graphicApp.activeCommands.isPan = false;\n  //     this.graphicApp.activeCommands.isPanEnd = true;\n  //   });\n  //   this.map.on('zoom', (e: any) => {\n  //     this.graphicApp.screen.zoomFactorCurrent = e.zoomFactor\n  //     // this.graphicApp.screen.yOffCurrent = e.delta.y;\n  //     // console.log(this.graphicApp.screen.zoomFactor)\n  //     // this.graphicApp.activeCommands.isZoom = false;\n  //     // this.graphicApp.activeCommands.isZoom = true;\n  //   });\n  //   this.map.on('zoom-start', (e: any) => {\n  //     this.graphicApp.screen.anchor = new NVector3(e.anchor.x, e.anchor.y);\n  //     this.graphicApp.screen.zoomFactorCurrent = 0;\n  //     this.graphicApp.screen.zoomFactorPre = 0;\n  //     this.graphicApp.activeCommands.isZoom = true;\n  //     this.graphicApp.activeCommands.isZoomRecoverForlocal = false;\n  //   });\n  //   this.map.on('zoom-end', (e: any) => {\n  //     this.graphicApp.screen.zoomFactorCurrent = 0;\n  //     this.graphicApp.screen.zoomFactorPre = 0;\n  //     this.graphicApp.activeCommands.isZoom = false;\n  //     this.graphicApp.activeCommands.isZoomRecoverForlocal = true;\n  //     this.graphicApp.activeCommands.isZoomEnd = true;\n  //   });\n  // }\n  // DisablelMapView() {\n  //   console.log('disalbe for map control');\n  //   // this.isEnable = false;\n  //   this.map.disablePan();\n  //   this.map.disableDoubleClickZoom();\n  //   this.map.disableScrollWheel();\n  // }\n  // EnablelMapView() {\n  //   // this.isEnable = true;\n  //   this.map.enablePan();\n  //   this.map.enableDoubleClickZoom();\n  //   this.map.enableScrollWheel();\n  //   // console.log('enalbe for map control');\n  // }\n  // MousePanArcGIS(e: any) {\n  //   // console.log(e.delta);\n  //   // CGeometry.ScreenOffset = e.delta;\n  // }\n  // ................................................................ event from ArcGIS\n  \n  CommonEventBuilder(e: MouseEvent): MouseEventData {\n    let mEvent: MouseEventData = new MouseEventData();\n    mEvent.preX = MouseInteraction.mouseEventDataPre.x;\n    mEvent.preY = MouseInteraction.mouseEventDataPre.y;\n    mEvent.premEvent = MouseInteraction.mouseEventDataPre;\n\n    mEvent.pressedShift = e.shiftKey;\n    mEvent.pressedAlt = e.altKey;\n    mEvent.pressedCtrl = e.ctrlKey;\n\n    mEvent.x = e.offsetX;\n    mEvent.y = e.offsetY;\n    mEvent.preWheel = MouseInteraction.mouseEventDataPre.wheel;\n    mEvent.wheel = 0;\n    mEvent.native = e;\n    MouseInteraction.mouseEventDataPre = mEvent;\n    this.e = mEvent;\n    return mEvent;\n  }\n}\n// ....................................................................\nexport class MouseEventListener {\n  static click: boolean = false;\n  static prevent: boolean = false;\n  static delay: number = 200;\n  static timer: NodeJS.Timer | number;\n  static down: boolean = false;\n\n  static mouseDown(e: MouseEvent) { /* */ }\n  static MouseDown(e: MouseEvent) {\n    MouseEventListener.click = true;\n    MouseEventListener.down = true;\n    MouseEventListener.mouseDown(e);\n  }\n  static mouseClick(e: MouseEvent) { /* */ }\n  static MouseClick(e: MouseEvent) {\n    if (!MouseEventListener.click) { return; }\n    MouseEventListener.mouseClick(e);\n  }\n  static mouseDoubleClick(e: MouseEvent) { /* */ }\n  static MouseDoubleClick(e: MouseEvent) {\n    MouseEventListener.mouseDoubleClick(e);\n  }\n  static mouseDrag(e: MouseEvent) { /* */ }\n  static MouseDrag(e: MouseEvent) {\n    MouseEventListener.click = true;\n    MouseEventListener.mouseDrag(e);\n  }\n  static mouseMove(e: MouseEvent) { /* */ }\n  static MouseMove(e: MouseEvent) {\n    if (MouseEventListener.down) { MouseEventListener.MouseDrag(e); return; }\n    MouseEventListener.mouseMove(e);\n  }\n  static mouseUp(e: MouseEvent) { /* */ }\n  static MouseUp(e: MouseEvent) {\n    MouseEventListener.down = false;\n    MouseEventListener.mouseUp(e);\n  }\n\n  static Init(div?: HTMLElement | undefined) {\n    if (div === undefined || div === null) {\n      document.onclick = (e: MouseEvent) => {\n        MouseEventListener.timer = setTimeout(\n          () => {\n            if (!MouseEventListener.prevent) { MouseEventListener.MouseClick(e); }\n            MouseEventListener.prevent = false;\n          },\n          MouseEventListener.delay\n        );\n      };\n      document.ondblclick = (e: MouseEvent) => {\n        clearTimeout(MouseEventListener.timer as number);\n        MouseEventListener.prevent = true;\n        MouseEventListener.MouseDoubleClick(e);\n      };\n      document.onmousedown = (e: MouseEvent) => { MouseEventListener.MouseDown(e); };\n      document.onmouseup = (e: MouseEvent) => { MouseEventListener.MouseUp(e); };\n      document.onmousemove = (e: MouseEvent) => { MouseEventListener.MouseMove(e); };\n    } else {\n      div.onclick = (e) => {\n        MouseEventListener.timer = setTimeout(\n          () => {\n            if (!MouseEventListener.prevent) { MouseEventListener.MouseClick(e); }\n            MouseEventListener.prevent = false;\n          },\n          MouseEventListener.delay\n        );\n      };\n      div.ondblclick = (e) => {\n        clearTimeout(MouseEventListener.timer as number);\n        MouseEventListener.prevent = true;\n        MouseEventListener.MouseDoubleClick(e);\n      };\n      div.onmousedown = (e: MouseEvent) => { MouseEventListener.MouseDown(e); };\n      div.onmouseup = (e: MouseEvent) => { MouseEventListener.MouseUp(e); };\n      div.onmousemove = (e: MouseEvent) => { MouseEventListener.MouseMove(e); };\n    }\n  }\n}","\n\nexport enum PRESSTYPE { UP = 'UP', DOWN = 'DOWN' }\n\nexport class KeyboardEventData {\n    // graphicApp: GraphicApp;\n    preEvent: KeyboardEventData;\n    key: string;\n    hasAltKey: boolean;\n    hasCtrlKey: boolean;\n    hasShiftKey: boolean;\n    hasMetaCommand: boolean;\n    code: string;\n    keyCode: number;\n    PRESSTYPE: PRESSTYPE;\n    constructor() {\n\n    }\n}\n\nexport class KeyboardInteraction {\n    static MouseEventDataPre: KeyboardEventData;\n\n\n    isUp: boolean;\n\n    static KeyEvent(keyboardEventData: KeyboardEventData) {\n        // keyboardEventData.graphicApp.ACController.KeyboardEventControl(keyboardEventData);\n    }\n    constructor() {\n\n        this.isUp = false;\n\n        this.Init();\n        KeyboardInteraction.MouseEventDataPre = new KeyboardEventData();\n\n\n    }\n    Init() {\n        // this.graphicApp.appDrawing.div.onkeydown = (k) => { this.KeyDown(k); };\n        // this.graphicApp.appDrawing.div.onkeyup = (k) => { this.KeyUp(k); };\n        document.onkeydown = (k) => { this.KeyDown(k); };\n        document.onkeypress = (k) => { this.KeyPress(k); };\n        document.onkeyup = (k) => { this.KeyUp(k); };\n    }\n    KeyDown(k: KeyboardEvent) {\n        let kEventData: KeyboardEventData = this.CommonEventBuilder(k);\n        kEventData.PRESSTYPE = PRESSTYPE.DOWN;\n        KeyboardInteraction.KeyEvent(kEventData);\n    }\n    KeyPress(k: KeyboardEvent) {\n        let kEventData: KeyboardEventData = this.CommonEventBuilder(k);\n        kEventData.PRESSTYPE = PRESSTYPE.DOWN;\n        KeyboardInteraction.KeyEvent(kEventData);\n    }\n    KeyUp(k: KeyboardEvent) {\n        let kEventData: KeyboardEventData = this.CommonEventBuilder(k);\n        kEventData.PRESSTYPE = PRESSTYPE.UP;\n        KeyboardInteraction.KeyEvent(kEventData);\n    }\n    KeyUpJSAPI4X(k: KeyboardEvent) {\n        let kEventData: KeyboardEventData = this.CommonEventBuilder(k);\n        kEventData.PRESSTYPE = PRESSTYPE.UP;\n        KeyboardInteraction.KeyEvent(kEventData);\n    }\n    // ............................................................. builder\n    CommonEventBuilder(k: KeyboardEvent): KeyboardEventData {\n        let kEvent: KeyboardEventData = new KeyboardEventData();\n        kEvent.preEvent = KeyboardInteraction.MouseEventDataPre;\n        kEvent.key = k.key;\n        kEvent.keyCode = k.keyCode;\n        kEvent.code = k.code;\n        kEvent.hasCtrlKey = k.ctrlKey;\n        kEvent.hasShiftKey = k.shiftKey;\n        kEvent.hasAltKey = k.altKey;\n        kEvent.hasMetaCommand = k.metaKey;\n        KeyboardInteraction.MouseEventDataPre = kEvent;\n        return kEvent;\n    }\n\n}\n","// import { GraphicApp } from '../../index';\n// import { CActiveCommandNone } from '../../AppDrawing/Core/CActiveCommands';\n\n// import { CGeometry } from '../AppDrawing/Canvas/CGeometry/CoreBase/CGeometryCommon';\n// import { NVector3 } from '../Core/Geometry/NVector3';\n// import { ActiveCommand } from './ActiveCommands';\n// import { CGeometry } from '../Canvas/CGeometry/CGeometryCommon';\n// / <reference path='../../types/arcgis-js-api.d.ts' />\n\nexport enum CLICKTYPE {\n  LEFT = 'LEFT', MIDDLE = 'MIDDLE', RIGHT = 'RIGHT', WHEEL = 'WHEEL',\n  DRAG = 'DRAG', DRAG_LEFT = 'DRAG_LEFT', DRAG_MIDDLE = 'DRAG_MIDDLE', DRAG_RIGHT = 'DRAG_RIGHT',\n  MOVE = 'MOVE', DOUBLE = 'DOUBLE', UP = 'UP',\n  DOWN = 'DOWN', DOWN_MIDDLE = 'DOWN_MIDDLE', DOWN_RIGHT = 'DOWN_RIGHT'\n}\n\nexport class MouseEventData {\n  // graphicApp: GraphicApp;\n  x: number = -1; y: number = -1; z: number = -1;\n  preX: number = -1; preY: number = -1; preZ: number = -1;\n  yGLPicking: number;\n  // command: CActiveCommandNone; // = new CActiveCommandNone(this.graphicApp.activeCommands);\n  CLICKTYPE: CLICKTYPE = CLICKTYPE.MOVE;\n  isDown: boolean = false;\n  isDoubleClick: boolean = false;\n  isMove: boolean = false;\n  pressedShift: boolean = false;\n  pressedAlt: boolean = false;\n  pressedCtrl: boolean = false;\n\n  lat: number = -1;\n  long: number = -1;\n  wheel: number = 0;\n  preWheel: number = 0;\n\n  premEvent: MouseEventData;\n  native: MouseEvent;\n  constructor() {\n    // if (graphicApp !== null && graphicApp !== undefined) { ; }\n  }\n}\nexport class MouseInteraction {\n  static mouseEventDataPre: MouseEventData; // = new MouseEventData();\n\n  isEnable: boolean = true;\n\n  click: boolean = false;\n  prevent: boolean = false;\n  delay: number = 100;\n  timer: NodeJS.Timer | number;\n  down: boolean = false;\n  e: MouseEventData;\n\n  static MouseEvent(mouseEventData: MouseEventData) {\n    if (mouseEventData.isMove) {\n      // console.log(mouseEventData);\n    }\n    // MouseInteraction.graphicApp.ACController.MouseEventControl(mouseEventData);\n    // mouseEventData.graphicApp.appDrawing.activeCommands.activeCommand.MouseEventControl(mouseEventData);\n  }\n\n  constructor() {\n    // MouseInteraction.graphicApp = graphicApp;\n    // this.graphicApp = graphicApp;\n\n    MouseInteraction.mouseEventDataPre = new MouseEventData();\n    // if (!this.graphicApp.isStandalone) {\n      // this.InitArcGISMapEventV4x();\n      // this.InitArcGISMapEventV3x();\n    // } else {\n      this.InitNativeMouseEvent();\n    // }\n    // this.InitNativeMouseWheelEvent();\n  }\n  // ................................................................ event from native\n  InitNativeMouseWheelEvent(div: HTMLElement) {\n    // div.onwheel = (e: WheelEvent) => { this.MouseWheel(e, e.wheelDelta); };\n  }\n  InitNativeMouseEvent(div?: HTMLElement | undefined) {\n    if (div === undefined || div === null) {\n      document.onclick = (e: MouseEvent) => {\n        this.timer = setTimeout(\n          () => {\n            if (!this.prevent) { this.MouseClick(e); }\n            this.prevent = false;\n          },\n          this.delay);\n      };\n      document.ondblclick = (e: MouseEvent) => {\n        clearTimeout(this.timer as any);\n        this.prevent = true;\n        this.MouseDoubleClick(e);\n      };\n      document.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\n      document.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\n      document.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\n    } else {\n      div.onclick = (e: MouseEvent) => {\n        this.timer = setTimeout(\n          () => {\n            if (!this.prevent) { this.MouseClick(e); }\n            this.prevent = false;\n          },\n          this.delay);\n      };\n      div.ondblclick = (e: MouseEvent) => {\n        clearTimeout(this.timer as number);\n        this.prevent = true;\n        this.MouseDoubleClick(e);\n      };\n      div.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\n      div.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\n      div.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\n    }\n  }\n  MouseDown(e: MouseEvent) {\n    this.click = true;\n    this.down = true;\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.DOWN;\n    mEvent.isDown = true;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseClick(e: MouseEvent) {\n    if (!this.click) { return; }\n    let mEvent = this.CommonEventBuilder(e);\n    if (e.button === 0) {\n      mEvent.CLICKTYPE = CLICKTYPE.LEFT;\n    } else if (e.button === 1) {\n      mEvent.CLICKTYPE = CLICKTYPE.MIDDLE;\n    } else if (e.button === 2) {\n      mEvent.CLICKTYPE = CLICKTYPE.RIGHT;\n    }\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseDoubleClick(e: MouseEvent) {\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.DOUBLE;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseDrag(e: MouseEvent) {\n    this.click = false;\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.DRAG;\n    mEvent.isDown = true;\n    if (e.buttons === 1) {\n      mEvent.CLICKTYPE = CLICKTYPE.DRAG;\n    } else if (e.buttons === 4) {\n      mEvent.CLICKTYPE = CLICKTYPE.DRAG_MIDDLE;\n    } else if (e.buttons === 2) {\n      mEvent.CLICKTYPE = CLICKTYPE.DRAG_RIGHT;\n    }\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseMove(e: MouseEvent) {\n    if (this.down) { this.MouseDrag(e); return; }\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.MOVE;\n    mEvent.isDown = false;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseUp(e: MouseEvent) {\n    this.down = false;\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.CLICKTYPE = CLICKTYPE.UP;\n    mEvent.isDown = false;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  MouseWheel(e: MouseEvent, v: number) {\n    let mEvent = this.CommonEventBuilder(e);\n    mEvent.wheel = v;\n    mEvent.CLICKTYPE = CLICKTYPE.WHEEL;\n    MouseInteraction.MouseEvent(mEvent);\n  }\n  AppendDownEvent(e: MouseEvent) {\n    // let e: any = MouseEventListener.mouseClick;\n\n    // document.onmousedown = (e) => {\n    //   let mEvent = this.CommonEventBuilder(e);\n    //   if (e.button === 0) mEvent.CLICKTYPE = CLICKTYPE.LEFT;\n    //   else if (e.button === 1) mEvent.CLICKTYPE = CLICKTYPE.MIDDLE;\n    //   else if (e.button === 2) mEvent.CLICKTYPE = CLICKTYPE.RIGHT;\n    //   mEvent.isDown = true;\n    //   //mEvent.FROM = FROM.NATIVE;\n    //   mEvent.CLICKTYPE = CLICKTYPE.DOWN;\n    //   \n    // };\n  }\n  AppendUpEvent() {\n    document.onmouseup = (e: MouseEvent) => {\n      let mEvent = this.CommonEventBuilder(e);\n      if (e.button === 0) {\n        mEvent.CLICKTYPE = CLICKTYPE.LEFT;\n      } else if (e.button === 1) {\n        mEvent.CLICKTYPE = CLICKTYPE.MIDDLE;\n      } else if (e.button === 2) {\n        mEvent.CLICKTYPE = CLICKTYPE.RIGHT;\n      }\n      mEvent.isDown = false;\n      // mEvent.FROM = FROM.NATIVE;\n      mEvent.CLICKTYPE = CLICKTYPE.UP;\n      MouseInteraction.MouseEvent(mEvent);\n    };\n  }\n\n  // InitArcGISMapEventV3x() {\n  // .................................................................\n  // this.map.on('click', (e: any) => {\n  //   if (e.button == 0) { this.MouseClickLeftArcGIS(e.screenPoint.x, e.screenPoint.y); }\n  //   else if (e.button == 1) this.MouseClickMiddleArcGIS(e.screenPoint.x, e.screenPoint.y);\n  //   else this.MouseClickRightArcGIS(e.screenPoint.x, e.screenPoint.y);\n  // });\n  // this.map.on('dbl-click', (e: any) => {this.MouseDoubleClickArcGIS(e.screenPoint.x, e.screenPoint.y);});\n  // this.map.on('mouse-wheel', (e: any) => { console.log('mouse wheel'); });\n  // this.map.on('mouse-down', (e: any) => { this.MouseDownArcGIS(e.screenPoint.x, e.screenPoint.y); });\n  // this.map.on('mouse-drag', (e: any) => { this.MouseDragClickArcGIS(e.screenPoint.x, e.screenPoint.y); });\n  // this.map.on('mouse-move', (e: any) => { this.MouseMoveArcGIS(e.screenPoint.x, e.screenPoint.y); });\n  // this.map.on('mouse-up', (e: any) => { this.MouseUpArcGIS(e.screenPoint.x, e.screenPoint.y); });\n  // .................................................................\n  //   this.map.on('key-down', (e: any) => { this.graphicApp.keyBoard.KeyDown(e); });\n  //   this.map.on('key-up', (e: any) => { this.graphicApp.keyBoard.KeyUp(e); });\n  //   this.map.on('resize', (e: any) => {\n  //   });\n  //   this.map.on('pan', (e: any) => {\n  //     this.graphicApp.screen.xOffCurrent = e.delta.x;\n  //     this.graphicApp.screen.yOffCurrent = e.delta.y;\n  //     // this.graphicApp.activeCommands.isPan = true;\n  //   });\n  //   this.map.on('pan-start', (e: any) => {\n  //     // this.graphicApp.screen.xOffPre = e.delta.x;\n  //     // this.graphicApp.screen.yOffPre = e.delta.x;\n  //     this.graphicApp.activeCommands.isPan = true;\n  //   });\n  //   this.map.on('pan-end', (e: any) => {\n  //     this.graphicApp.screen.xOffCurrent = 0\n  //     this.graphicApp.screen.yOffCurrent = 0;\n  //     this.graphicApp.screen.xOffPre = 0\n  //     this.graphicApp.screen.yOffPre = 0;\n  //     this.graphicApp.activeCommands.isPan = false;\n  //     this.graphicApp.activeCommands.isPanEnd = true;\n  //   });\n  //   this.map.on('zoom', (e: any) => {\n  //     this.graphicApp.screen.zoomFactorCurrent = e.zoomFactor\n  //     // this.graphicApp.screen.yOffCurrent = e.delta.y;\n  //     // console.log(this.graphicApp.screen.zoomFactor)\n  //     // this.graphicApp.activeCommands.isZoom = false;\n  //     // this.graphicApp.activeCommands.isZoom = true;\n  //   });\n  //   this.map.on('zoom-start', (e: any) => {\n  //     this.graphicApp.screen.anchor = new NVector3(e.anchor.x, e.anchor.y);\n  //     this.graphicApp.screen.zoomFactorCurrent = 0;\n  //     this.graphicApp.screen.zoomFactorPre = 0;\n  //     this.graphicApp.activeCommands.isZoom = true;\n  //     this.graphicApp.activeCommands.isZoomRecoverForlocal = false;\n  //   });\n  //   this.map.on('zoom-end', (e: any) => {\n  //     this.graphicApp.screen.zoomFactorCurrent = 0;\n  //     this.graphicApp.screen.zoomFactorPre = 0;\n  //     this.graphicApp.activeCommands.isZoom = false;\n  //     this.graphicApp.activeCommands.isZoomRecoverForlocal = true;\n  //     this.graphicApp.activeCommands.isZoomEnd = true;\n  //   });\n  // }\n  // DisablelMapView() {\n  //   console.log('disalbe for map control');\n  //   // this.isEnable = false;\n  //   this.map.disablePan();\n  //   this.map.disableDoubleClickZoom();\n  //   this.map.disableScrollWheel();\n  // }\n  // EnablelMapView() {\n  //   // this.isEnable = true;\n  //   this.map.enablePan();\n  //   this.map.enableDoubleClickZoom();\n  //   this.map.enableScrollWheel();\n  //   // console.log('enalbe for map control');\n  // }\n  // MousePanArcGIS(e: any) {\n  //   // console.log(e.delta);\n  //   // CGeometry.ScreenOffset = e.delta;\n  // }\n  // ................................................................ event from ArcGIS\n  CommonEventBuilder(e: MouseEvent): MouseEventData {\n    let mEvent: MouseEventData = new MouseEventData();\n    mEvent.preX = MouseInteraction.mouseEventDataPre.x;\n    mEvent.preY = MouseInteraction.mouseEventDataPre.y;\n    mEvent.premEvent = MouseInteraction.mouseEventDataPre;\n\n    mEvent.pressedShift = e.shiftKey;\n    mEvent.pressedAlt = e.altKey;\n    mEvent.pressedCtrl = e.ctrlKey;\n\n    mEvent.x = e.offsetX;\n    mEvent.y = e.offsetY;\n    mEvent.preWheel = MouseInteraction.mouseEventDataPre.wheel;\n    mEvent.wheel = 0;\n    mEvent.native = e;\n    MouseInteraction.mouseEventDataPre = mEvent;\n    this.e = mEvent;\n    return mEvent;\n  }\n}\n// ....................................................................\nexport class MouseEventListener {\n  static click: boolean = false;\n  static prevent: boolean = false;\n  static delay: number = 200;\n  static timer: NodeJS.Timer | number;\n  static down: boolean = false;\n\n  static mouseDown(e: MouseEvent) { /* */ }\n  static MouseDown(e: MouseEvent) {\n    MouseEventListener.click = true;\n    MouseEventListener.down = true;\n    MouseEventListener.mouseDown(e);\n  }\n  static mouseClick(e: MouseEvent) { /* */ }\n  static MouseClick(e: MouseEvent) {\n    if (!MouseEventListener.click) { return; }\n    MouseEventListener.mouseClick(e);\n  }\n  static mouseDoubleClick(e: MouseEvent) { /* */ }\n  static MouseDoubleClick(e: MouseEvent) {\n    MouseEventListener.mouseDoubleClick(e);\n  }\n  static mouseDrag(e: MouseEvent) { /* */ }\n  static MouseDrag(e: MouseEvent) {\n    MouseEventListener.click = true;\n    MouseEventListener.mouseDrag(e);\n  }\n  static mouseMove(e: MouseEvent) { /* */ }\n  static MouseMove(e: MouseEvent) {\n    if (MouseEventListener.down) { MouseEventListener.MouseDrag(e); return; }\n    MouseEventListener.mouseMove(e);\n  }\n  static mouseUp(e: MouseEvent) { /* */ }\n  static MouseUp(e: MouseEvent) {\n    MouseEventListener.down = false;\n    MouseEventListener.mouseUp(e);\n  }\n\n  static Init(div?: HTMLElement | undefined) {\n    if (div === undefined || div === null) {\n      document.onclick = (e: MouseEvent) => {\n        MouseEventListener.timer = setTimeout(\n          () => {\n            if (!MouseEventListener.prevent) { MouseEventListener.MouseClick(e); }\n            MouseEventListener.prevent = false;\n          },\n          MouseEventListener.delay\n        );\n      };\n      document.ondblclick = (e: MouseEvent) => {\n        clearTimeout(MouseEventListener.timer as number);\n        MouseEventListener.prevent = true;\n        MouseEventListener.MouseDoubleClick(e);\n      };\n      document.onmousedown = (e: MouseEvent) => { MouseEventListener.MouseDown(e); };\n      document.onmouseup = (e: MouseEvent) => { MouseEventListener.MouseUp(e); };\n      document.onmousemove = (e: MouseEvent) => { MouseEventListener.MouseMove(e); };\n    } else {\n      div.onclick = (e) => {\n        MouseEventListener.timer = setTimeout(\n          () => {\n            if (!MouseEventListener.prevent) { MouseEventListener.MouseClick(e); }\n            MouseEventListener.prevent = false;\n          },\n          MouseEventListener.delay\n        );\n      };\n      div.ondblclick = (e) => {\n        clearTimeout(MouseEventListener.timer as number);\n        MouseEventListener.prevent = true;\n        MouseEventListener.MouseDoubleClick(e);\n      };\n      div.onmousedown = (e: MouseEvent) => { MouseEventListener.MouseDown(e); };\n      div.onmouseup = (e: MouseEvent) => { MouseEventListener.MouseUp(e); };\n      div.onmousemove = (e: MouseEvent) => { MouseEventListener.MouseMove(e); };\n    }\n  }\n}","\nexport enum EVENT_LISTENER_TYPE { NATIVE = 'NATIVE', JSAPI4X = 'JSAPI4X' }\nexport enum PRESSTYPE { UP = 'UP', DOWN = 'DOWN' }\n\nexport class KeyboardEventData {\n    // graphicApp: GraphicApp;\n    preEvent: KeyboardEventData;\n    key: string;\n    hasAltKey: boolean;\n    hasCtrlKey: boolean;\n    hasShiftKey: boolean;\n    hasMetaCommand: boolean;\n    code: string;\n    keyCode: number;\n    PRESSTYPE: PRESSTYPE;\n    constructor() {\n \n    }\n}\n\nexport class KeyboardInteraction {\n    static MouseEventDataPre: KeyboardEventData;\n\n    // graphicApp: GraphicApp;\n    type: EVENT_LISTENER_TYPE;\n    isUp: boolean;\n\n    static KeyEvent(keyboardEventData: KeyboardEventData) {\n        // keyboardEventData.graphicApp.ACController.KeyboardEventControl(keyboardEventData);\n    }\n    constructor() {\n        // this.type = type;\n        this.isUp = false;\n\n        this.Init();\n        KeyboardInteraction.MouseEventDataPre = new KeyboardEventData();\n        return;\n        \n    }\n    Init() {\n        // this.graphicApp.appDrawing.div.onkeydown = (k) => { this.KeyDown(k); };\n        // this.graphicApp.appDrawing.div.onkeyup = (k) => { this.KeyUp(k); };\n        document.onkeydown = (k) => { this.KeyDown(k); };\n        document.onkeypress = (k) => { this.KeyPress(k); };\n        document.onkeyup = (k) => { this.KeyUp(k); };\n    }\n    KeyDown(k: KeyboardEvent) {\n        let kEventData: KeyboardEventData = this.CommonEventBuilder(k);\n        kEventData.PRESSTYPE = PRESSTYPE.DOWN;\n        KeyboardInteraction.KeyEvent(kEventData);\n    }\n    KeyPress(k: KeyboardEvent) {\n        let kEventData: KeyboardEventData = this.CommonEventBuilder(k);\n        kEventData.PRESSTYPE = PRESSTYPE.DOWN;\n        KeyboardInteraction.KeyEvent(kEventData);\n    }\n    KeyUp(k: KeyboardEvent) {\n        let kEventData: KeyboardEventData = this.CommonEventBuilder(k);\n        kEventData.PRESSTYPE = PRESSTYPE.UP;\n        KeyboardInteraction.KeyEvent(kEventData);\n    }\n    // ............................................................. builder\n    CommonEventBuilder(k: KeyboardEvent): KeyboardEventData {\n        let kEvent: KeyboardEventData = new KeyboardEventData();\n        kEvent.preEvent = KeyboardInteraction.MouseEventDataPre;\n        kEvent.key = k.key;\n        kEvent.keyCode = k.keyCode;\n        kEvent.code = k.code;\n        kEvent.hasCtrlKey = k.ctrlKey;\n        kEvent.hasShiftKey = k.shiftKey;\n        kEvent.hasAltKey = k.altKey;\n        kEvent.hasMetaCommand = k.metaKey;\n        KeyboardInteraction.MouseEventDataPre = kEvent;\n        return kEvent;\n    }\n\n}\n","import { NVector3 } from '../../../lib/NVector3';\nimport { MouseEventData } from '../../../lib/MouseInteraction';\n\nimport { CBlockRenderer } from '../../../Core/CBlockRenderer';\n// import { CGeometry } from '../../../../AppDrawing/Canvas/CGeometry/CoreBase/CGeometryCommon';\n// import { CBlockController } from '../CBlockController';\n// import { CGeometryBase } from '../../Canvas/CGeometry/CGeometryBase';\n\nexport enum BLOCK_TYPE {\n    DRAWING = 'DRAWING',\n    CONTROL_PANEL = 'CONTROL_PANEL'\n}\n\nexport abstract class CBlockBase {\n    type: BLOCK_TYPE;\n    value: number;\n    vec: NVector3;\n    boundarVecs: NVector3[];\n    isHidden: boolean;\n    div: HTMLElement;\n    height: number;\n    width: number;\n    divID: string;\n    xOff: number;\n    yOff: number;\n    isSelected: boolean;\n    isOver: boolean;\n    isMoveable: boolean;\n    style: number;\n    filletR: number;\n    title: string;\n    colorBase: string;\n    colorOver: string;\n    colorText: string;\n    isRender: boolean;\n    transparent: number;\n\n    constructor(width: number = 100, height: number = 20) {\n        CBlockRenderer.Add(this);\n        this.width = width;\n        this.height = height;\n        this.xOff = 10;\n        this.yOff = 50;\n        this.isHidden = false;\n        this.isSelected = false;\n        this.isOver = false;\n        this.isMoveable = true;\n        this.style = 0;\n        this.filletR = 3;\n        this.isRender = true;\n        this.vec = new NVector3(100, 100, 0);\n        this.title = 'Drawing Block';\n        this.boundarVecs = [];\n        this.colorBase = '#ffffff';\n        this.transparent = 1.0;\n        // this.mapContainer = <HTMLElement>document.getElementById('mapContainer');\n\n    }\n    Remove() {\n        CBlockRenderer.Remove(this);\n    }\n    RemovePanel() {\n        /* */\n    }\n    DeepCopy() {\n        /* */\n    }\n    Dummy() {\n        /* */\n    }\n    get IsHidden() {\n        return this.isHidden;\n    }\n    set IsHidden(v: boolean) {\n        this.isHidden = v;\n    }\n    get IsHover() {\n        return this.isOver;\n    }\n    set IsHover(v: boolean) {\n        this.isOver = v;\n    }\n    get IsSelected() { return this.isSelected; }\n    set IsSelected(v: boolean) {\n        this.isSelected = v;\n\n    }\n    GetBoundaryVecs() {\n        let theHeight = this.height * 0.5;\n        let theWidth = this.width * 0.5;\n        let v0 = new NVector3(this.vec.x - theWidth, this.vec.y - theHeight);\n        let v1 = new NVector3(this.vec.x + theWidth, this.vec.y + theHeight);\n        this.boundarVecs = NVector3.GetBoundingVecs(v0, v1);\n        return this.boundarVecs;\n    }\n    ComputeBoundary() {\n        this.boundarVecs = [];\n\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y, this.vec.z));\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y, this.vec.z));\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y + this.height, this.vec.z));\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y + this.height, this.vec.z));\n        return this.boundarVecs;\n    }\n    IsMouseInside(x: number, y: number) {\n        let v = NVector3.IsInsideOfVecs(new NVector3(x, y), this.ComputeBoundary());\n        this.isOver = v;\n        if (v) {\n            // CGeometry.appDrawing.activeCommands.isReturn = true;\n        } else {\n            // CGeometry.appDrawing.activeCommands.isReturn = false;\n        }\n        return v;\n    }\n    Translate(e: MouseEventData): void {\n        if (!this.isMoveable) { return; }\n        let xo = e.x - e.preX;\n        let yo = e.y - e.preY;\n        this.vec.x += xo;\n        this.vec.y += yo;\n        for (let i = 0; i < this.boundarVecs.length; ++i) { this.boundarVecs[i].x += xo; this.boundarVecs[i].y += yo; }\n    }\n    Move(x: number, y: number) {\n        this.vec.x = x; this.vec.y = y;\n    }\n    HideToogle() {\n        this.IsHidden = !this.IsHidden;\n        this.Hide();\n    }\n    Hide() {\n        /* */\n    }\n    MouseDown(e: MouseEventData) {\n        /* */\n    }\n    MouseUp(e: MouseEventData) {\n        /* */\n    }\n    MouseDrag(e: MouseEventData) {\n        this.Translate(e);\n    }\n    MouseDouble(e: MouseEventData) {\n        /* */\n    }\n    MouseLeft(e: MouseEventData) {\n        /* */\n    }\n    MouseRight(e: MouseEventData) {\n        /* */\n    }\n    Render(ctx: CanvasRenderingContext2D) {\n        if (this.isHidden) { return; }\n        this.RenderPost(ctx);\n    }\n    abstract RenderPost(ctx: CanvasRenderingContext2D): void;\n\n}","// import { ConcaveCore } from './ConcaveCore';\n// import { CPoint } from '../../AppDrawing/Canvas/CGeometry/CPoint';\n\nexport class NVector3 {\n  static eps: number = 0.0000001;\n  static origin: NVector3 = new NVector3(0, 0, 0);\n\n  x: number = 0.0;\n  y: number = 0.0;\n  z: number = 0.0;\n  w: number = 0.0;\n  long: number = 0.0;\n  lat: number = 0.0;\n  ele: number = 0.0;\n  proX: number = 0.0;\n  proY: number = 0.0;\n  proZ: number = 0.0;\n  alt: number = 0.0;\n  d: boolean = true;\n  isModified: boolean = false;\n\n  static GetVecforGraphicApp(long: number, lat: number, ele: number, proX: number, proY: number, proZ: number) {\n    let v = new NVector3(0, 0, 0);\n    v.long = long; v.lat = lat; v.ele = ele; v.proX = proX; v.proY = proY; v.proZ = proZ;\n    return v;\n  }\n  static DeepCopy(v: NVector3): NVector3 {\n    if (v.z === undefined) {\n      return new NVector3(v.x, v.y, 0);\n    } else { return new NVector3(v.x, v.y, v.z); }\n  }\n  static Dot(a: NVector3, b: NVector3) {\n    return a.x * b.x + a.y * b.y + a.z * b.z;\n  }\n  static ScalarRev_V_S_OUT(v: NVector3, s: number, out: NVector3) {\n    out.x = s * v.x;\n    out.y = s * v.y;\n    out.z = s * v.z;\n    return out;\n  }\n  static Sub(v0: NVector3, v1: NVector3): NVector3 {\n    return new NVector3(v1.x - v0.x, v1.y - v0.y, v1.z - v0.z);\n  }\n  static Clone(v: NVector3): NVector3 {\n    return NVector3.DeepCopy(v);\n  }\n  static zAxis(): NVector3 {\n    return new NVector3(0, 0, 1);\n  }\n  static zero(): NVector3 {\n    return new NVector3(0, 0, 0);\n  }\n  static Origin(): NVector3 {\n    return new NVector3(0, 0, 0);\n  }\n  static Plus(v1: NVector3, v2: NVector3): NVector3 {\n    return new NVector3(v1.x + v2.x, v1.y + v2.y, v1.z + v2.z);\n  }\n  static Scale(v: NVector3, s: number): NVector3 {\n    return new NVector3(v.x * s, v.y * s, v.z * s);\n  }\n  static MidVec(v1: NVector3, v2: NVector3): NVector3 {\n    return new NVector3(\n      (v1.x + v2.x) * 0.5,\n      (v1.y + v2.y) * 0.5,\n      (v1.z + v2.z) * 0.5\n    );\n  }\n  static CompareTwoVectors(v0: NVector3, v1: NVector3): boolean {\n    if (v0.x !== v1.x || v0.y !== v1.y || v0.z !== v1.z) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n  static Length(v: NVector3): number {\n    return Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n  }\n  static Normalize(v: NVector3): NVector3 {\n    let len: number = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n    return new NVector3(v.x / len, v.y / len, v.z / len);\n  }\n  // https://web.archive.org/web/20090214201206/http://valis.cs.uiuc.edu:80/~sariel/research/CG/compgeom/msg00827.html\n  static GetArea(vs: NVector3[]) {\n    let area = 0;\n    // double center2dx = 0;\n    // double center2dy = 0;\n    for (let i = 0; i < vs.length - 1; i++) {\n      // tmreal t = 2 * vs[i].X * vs[i + 0].Y + vs[i].Y * vs[i + 1].X + vs[i].X * vs[i + 1].Y + 2 * vs[i + 1].X * vs[i + 1].Y;\n      area += (vs[i].x - vs[i + 1].x) * (vs[i].y + vs[i + 1].y);\n      // center2d.x += (+vs[i].X - vs[i + 1].X) * t;\n      // center2d.y += (-vs[i].Y + vs[i + 1].Y) * t;\n    }\n    area *= 0.5;\n    // center2dx *= 1 / (6 * area);\n    // center2dy *= 1 / (6 * area);\n    return area;\n  }\n  static GetAreaByLongLat(vs: NVector3[]) {\n    let area = 0;\n    // double center2dx = 0;\n    // double center2dy = 0;\n    for (let i = 0; i < vs.length - 1; i++) {\n      // tmreal t = 2 * vs[i].X * vs[i + 0].Y + vs[i].Y * vs[i + 1].X + vs[i].X * vs[i + 1].Y + 2 * vs[i + 1].X * vs[i + 1].Y;\n      area += (vs[i].long - vs[i + 1].long) * (vs[i].lat + vs[i + 1].lat);\n      // center2d.x += (+vs[i].X - vs[i + 1].X) * t;\n      // center2d.y += (-vs[i].Y + vs[i + 1].Y) * t;\n    }\n    area *= 0.5;\n    // center2dx *= 1 / (6 * area);\n    // center2dy *= 1 / (6 * area);\n    return area;\n  }\n  static GetGeoArea(vs: NVector3[]) {\n    let area = 0;\n    for (let i = 0; i < vs.length - 1; i++) {\n      area += (vs[i].x - vs[i + 1].x) * (vs[i].y + vs[i + 1].y);\n    }\n    area *= 0.5;\n    return Math.abs(area);\n  }\n  static Distance(v0: NVector3, v1: NVector3): number {\n    return Math.sqrt((v0.x - v1.x) * (v0.x - v1.x) + (v0.y - v1.y) * (v0.y - v1.y) + (v0.z - v1.z) * (v0.z - v1.z));\n  }\n  static Distance2(v1: NVector3, v2: NVector3): number {\n    let d: number =\n      (v1.x - v2.x) * (v1.x - v2.x) +\n      (v1.y - v2.y) * (v1.y - v2.y) +\n      (v1.z - v2.z) * (v1.z - v2.z);\n    return d;\n  }\n  static DotProduct(v1: NVector3, v2: NVector3): number {\n    return v1.x * v2.x + v1.y * v2.y + v1.z * v2.z;\n  }\n  static CrossProduct(v1: NVector3, v2: NVector3): NVector3 {\n    return new NVector3(\n      v1.y * v2.z - v1.z * v2.y,\n      v1.z * v2.x - v1.x * v2.z,\n      v1.x * v2.y - v1.y * v2.x\n    );\n  }\n  static DivideByNum(v0: NVector3, v1: NVector3, n: number = 5): NVector3[] {\n    let vs: NVector3[] = [];\n    let xOff = (v1.x - v0.x) / n;\n    let yOff = (v1.y - v0.y) / n;\n    let zOff = (v1.z - v0.z) / n;\n    for (let j = 0; j < n; ++j) {\n      let x = v0.x + xOff * j;\n      let y = v0.y + yOff * j;\n      let z = v0.z + zOff * j;\n      vs.push(new NVector3(x, y, z));\n    }\n    return vs;\n  }\n  static KMeterFromGeoGPSPos(gV0: NVector3, gV1: NVector3): number {\n    let R = 6378.137; // Radius of earth in KM // a = Equatorial radius (6,378.1370 km) // b = Polar radius (6,356.7523 km)\n    let dLat = gV1.lat * Math.PI / 180 - gV0.lat * Math.PI / 180;\n    let dLon = gV1.long * Math.PI / 180 - gV0.long * Math.PI / 180;\n    let a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(gV0.lat * Math.PI / 180) *\n      Math.cos(gV1.lat * Math.PI / 180) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    let d = R * c;\n    return d; // * 1000; // meters\n  }\n  static KMeterFromGPSPos(gV0: NVector3, gV1: NVector3): number {\n    let R = 6378.137; // Radius of earth in KM // a = Equatorial radius (6,378.1370 km) // b = Polar radius (6,356.7523 km)\n    let dLat = gV1.y * Math.PI / 180 - gV0.y * Math.PI / 180;\n    let dLon = gV1.x * Math.PI / 180 - gV0.x * Math.PI / 180;\n    let a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(gV0.y * Math.PI / 180) *\n      Math.cos(gV1.y * Math.PI / 180) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    let d = R * c;\n    return d; // * 1000; // meters\n  }\n  static Get1KM_Long_ByGeoUnit(long: number = 0, lat: number = 0): number {\n    let v = new NVector3(long, lat, 0);\n    let addition = 0.0;\n    for (let i = 0; i < 10000; ++i) {\n      let dis = NVector3.KMeterFromGPSPos(v, new NVector3(v.x + addition, v.y, v.z));\n      if (1 < dis && dis < 1.001) {\n        // console.log('result long', i, dis);\n        return v.x + addition;\n      }\n      addition += 0.00001;\n    }\n    return -1;\n  }\n  static Get1KM_lat_ByGeoUnit(long: number = 0, lat: number = 0): number {\n    let v = new NVector3(long, lat, 0);\n    let addition = 0.0;\n    for (let i = 0; i < 10000; ++i) {\n      let dis = NVector3.KMeterFromGPSPos(v, new NVector3(v.x, v.y + addition, v.z));\n      if (1 < dis && dis < 1.001) {\n        // console.log('result lat', i, dis);\n        return v.y + addition;\n      }\n      addition += 0.00001;\n    }\n    return -1;\n  }\n  static Get1KM_Lat_Long_GeoUnit(long: number = 0, lat: number = 0): NVector3 {\n    let lng = NVector3.Get1KM_Long_ByGeoUnit(long, lat);\n    let la = NVector3.Get1KM_lat_ByGeoUnit(long, lat);\n    return new NVector3(lng, la, 0);\n  }\n  // ............................................................................ vec compute\n  static CalculateFalloff(pt: NVector3, attractor: NVector3, strength: number, falloff: number): number {\n    let v: NVector3 = attractor.Sub(pt);\n    let dist: number = v.Length();\n    return dist * (strength * Math.exp(-falloff * dist * dist));\n  }\n  static Attractor(pt: NVector3, attractor: NVector3, strength: number, falloff: number): NVector3 {\n    let v: NVector3 = attractor.Sub(pt);\n    v.Unitize();\n    let dist = v.Length();\n    return v.Mult(strength * Math.exp(-falloff * dist * dist));\n  }\n  static Explosion(pt: NVector3, Explosion: NVector3, strength: number, falloff: number): NVector3 {\n    let v = Explosion.Sub(pt);\n    v.Unitize();\n    let dist = v.Length();\n    return v.Mult(-(strength * Math.exp(-falloff * dist * dist)));\n  }\n  static Rotor(pt: NVector3, rotor: NVector3, strength: number, falloff: number): NVector3 {\n    let v = rotor.Sub(pt);\n    v.Unitize();\n    // v.Rotate(3.141592 / 2, NVector3.zAxis);\n    // let dist: number = v.Length;\n    // return (v.Mult (strength * (Math.exp(-falloff * dist * dist))));\n    return NVector3.Origin();\n  }\n\n  // ............................................................................ vec angle\n  static GetCosAngleByTwoVectors(v0: NVector3, v1: NVector3): number {\n    return NVector3.DotProduct(NVector3.Normalize(v0), NVector3.Normalize(v1));\n  }\n  static GetAngleByTwoVectorsRadian(v0: NVector3, v1: NVector3): number {\n    return Math.acos(NVector3.GetCosAngleByTwoVectors(v0, v1));\n  }\n  static GetAngleByTwoVectors(v0: NVector3, v1: NVector3): number {\n    return NVector3.GetAngleByTwoVectorsRadian(v0, v1) * 180.0 / Math.PI;\n  }\n  static GetRotationByWorldCoodinate(v: NVector3): number {\n    let origin = new NVector3(1, 0, 0);\n    return NVector3.GetAngleByTwoVectors(origin, v);\n  }\n  static GetRotationByWorldCoodinateByTwo(v0: NVector3, v1: NVector3): number {\n    // mercator ctx\n    let v = v1.Sub(v0);\n    let origin = new NVector3(1, 0, 0);\n    if (v.y > 0) {\n      return NVector3.GetAngleByTwoVectors(origin, v) * -1;\n    } else {\n      return NVector3.GetAngleByTwoVectors(origin, v);\n    }\n  }\n  // ............................................................................\n  // static ToJSon(v){\n  // var p = {\n  //             'point': [],\n  //             'primitive': 'point',\n  //             'units': {\n  //             'point': 'meters'\n  //         }\n  // }\n  // p.point = [v.x , v.y, v.z];\n  // return p;\n  // }\n\n  static DistanceMouseWithTwoVecs(m: NVector3, v0: NVector3, v1: NVector3): number {\n    v0.x += 0.00001;\n    v0.y += 0.00001;\n    let boundary = NVector3.GetBoundingVecs(v0, v1);\n    let vec = NVector3.GetCloseVec(v0, v1, m.x, m.y, boundary, true);\n    return NVector3.Distance(m, vec);\n  }\n  static GetCloseVec(p0: NVector3, p1: NVector3, x: number, y: number, vecsBound: NVector3[], OnLine: boolean = true): NVector3 {\n    let pp1: NVector3 = new NVector3(p0.x, p0.y, p0.z);\n    let pp2: NVector3 = new NVector3(p1.x, p1.y, p1.z);\n    let v1: NVector3 = pp2.Sub(pp1);\n    let p: NVector3 = new NVector3(x, y, 0);\n    let v2: NVector3 = p.Sub(pp1);\n    v1.Unitize();\n    let cp = pp1.Add(v1.Mult(v2.DotProduct(v1)));\n    if (OnLine) {\n      if (NVector3.IsInsideOfVecs(cp, vecsBound)) {\n        return cp;\n      } else {\n        if (p0.Distance(cp) < p1.Distance(cp)) {\n          return new NVector3(p0.x, p0.y, p0.z);\n        } else {\n          return new NVector3(p1.x, p1.y, p1.z);\n        }\n      }\n    } else {\n      return cp;\n    }\n  }\n  static GetBoundingVecs(v0: NVector3, v1: NVector3): NVector3[] {\n    let listOfVec: NVector3[] = [];\n    let x: number = 0;\n    let y: number = 0;\n    let z: number = 0;\n    if (v0.x < v1.x) { x = v0.x; } else { x = v1.x; }\n    if (v0.y < v1.y) { y = v0.y; } else { y = v1.y; }\n    if (v0.z < v1.z) { z = v0.z; } else { z = v1.z; }\n    let nv0 = new NVector3(x, y, z);\n    if (v0.x > v1.x) { x = v0.x; } else { x = v1.x; }\n    if (v0.y > v1.y) { y = v0.y; } else { y = v1.y; }\n    if (v0.z > v1.z) { z = v0.z; } else { z = v1.z; }\n    let nv1 = new NVector3(x, y, z);\n    listOfVec.push(new NVector3(nv0.x, nv0.y, nv0.z));\n    listOfVec.push(new NVector3(nv1.x, nv0.y, nv0.z));\n    listOfVec.push(new NVector3(nv1.x, nv1.y, nv0.z));\n    listOfVec.push(new NVector3(nv0.x, nv1.y, nv0.z));\n    return listOfVec;\n  }\n  static GetBoundaryByVecWidthHeight(v: NVector3, width: number, height: number): NVector3[] {\n    let boundarVecsSub = [];\n    boundarVecsSub.push(new NVector3(v.x, v.y, v.z));\n    boundarVecsSub.push(new NVector3(v.x + width, v.y, v.z));\n    boundarVecsSub.push(new NVector3(v.x + width, v.y + height, v.z));\n    boundarVecsSub.push(new NVector3(v.x, v.y + height, v.z));\n    return boundarVecsSub;\n  }\n  static GetBoundingByVecs(vs: NVector3[]): NVector3[] {\n    let listOfVec: NVector3[] = [];\n    let xMin: number = Number.MAX_SAFE_INTEGER;\n    let yMin: number = Number.MAX_SAFE_INTEGER;\n    let zMin: number = Number.MAX_SAFE_INTEGER;\n\n    let xMax: number = Number.MIN_SAFE_INTEGER;\n    let yMax: number = Number.MIN_SAFE_INTEGER;\n    let zMax: number = Number.MIN_SAFE_INTEGER;\n    for (let i = 0; i < vs.length; ++i) {\n\n      if (xMin > vs[i].x) { xMin = vs[i].x; }\n      if (yMin > vs[i].y) { yMin = vs[i].y; }\n      if (zMin > vs[i].z) { zMin = vs[i].z; }\n\n      if (xMax < vs[i].x) { xMax = vs[i].x; }\n      if (yMax < vs[i].y) { yMax = vs[i].y; }\n      if (zMax < vs[i].z) { zMax = vs[i].z; }\n\n    }\n    listOfVec.push(new NVector3(xMin, yMin, zMin));\n    listOfVec.push(new NVector3(xMax, yMax, zMax));\n    return listOfVec;\n  }\n  static GetMinMaxVecFromVecs(vec: NVector3[]): NVector3[] {\n    let minX = Number.MAX_VALUE, minY = Number.MAX_VALUE, minZ = Number.MAX_VALUE;\n    let maxX = Number.MIN_VALUE, maxY = Number.MIN_VALUE, maxZ = Number.MIN_VALUE;\n    for (let v of vec) {\n      if (minX > v.x) { minX = v.x; } if (minY > v.y) { minY = v.y; } if (minZ > v.z) { minZ = v.z; }\n      if (maxX < v.x) { maxX = v.x; } if (maxY < v.y) { maxY = v.y; } if (maxZ < v.z) { maxZ = v.z; }\n    }\n    return [new NVector3(minX, minY, minZ), new NVector3(maxX, maxY, maxZ)];\n  }\n  static RemoveVecsWithinDis(vs: NVector3[], tor: number = 10): NVector3[] {\n    let vecs: NVector3[] = [];\n    for (let i = 0; i < vs.length - 1; ++i) {\n      let v0 = vs[i];\n      if (v0.d === false) { continue; }\n      for (let j = i + 1; j < vs.length; ++j) {\n        if (NVector3.Distance(v0, vs[j]) < tor) { vs[j].d = false; }\n      }\n    }\n    for (let i = 0; i < vs.length; ++i) { if (vs[i].d === true) { vecs.push(vs[i]); } }\n    // vecs.push(vs[vs.length - 1]);\n    return vecs;\n  }\n  // ...............................................................................\n  static IsInsideOfVecsWtihVecs(vs: NVector3[], vecs: NVector3[]): boolean {\n    let inside: boolean = true;\n    for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n      inside = NVector3.IsInsideOfVecs(vs[i], vecs);\n      if (!inside) {\n        return false;\n      }\n    }\n    return true;\n  }\n  static IsInsideOfVecs(v: NVector3, vecs: NVector3[]): boolean {\n    // ray-casting algorithm based on https://github.com/substack/point-in-polygon\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n    let x = v.x, y = v.y;\n    let inside = false;\n    for (let i = 0, j = vecs.length - 1; i < vecs.length; j = i++) {\n      let xi = vecs[i].x,\n        yi = vecs[i].y;\n      let xj = vecs[j].x,\n        yj = vecs[j].y;\n      let intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  }\n  static IsInsideOfVecsByConcaveHull(v: NVector3, vs: NVector3[]) {\n    // let vsNum: number[][] = [];\n    // for (let i = 0; i < vs.length; ++i) {\n    //   vsNum.push([vs[i].x, vs[i].y]);\n    // }\n\n    // let result = ConcaveCore.hull(vsNum, 20)\n    // console.log(vs.length);\n    // console.log(result);\n\n    // for (let i = 0; i < result.length; ++i) {\n    //   new CPoint(result[i][0], result[i][1]);\n    // }\n  }\n  // Convex hull\n  // https://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain\n  static IsInsideOfVecsByConvexHull(v: NVector3, vecs: NVector3[]): boolean {\n    vecs = NVector3.ConvexHull(vecs);\n    if (NVector3.IsInsideOfVecs(v, vecs)) { return true; } else { return false; }\n  }\n  static ConvexHull(vs: NVector3[]): NVector3[] {\n    vs.sort(function (a: NVector3, b: NVector3) {\n      return a.x === b.x ? a.y - b.y : a.x - b.x;\n    });\n    let lower: NVector3[] = [];\n    for (let i = 0; i < vs.length; i++) {\n      while (lower.length >= 2 && NVector3.Cross(lower[lower.length - 2], lower[lower.length - 1], vs[i]) <= 0) { lower.pop(); }\n      lower.push(vs[i]);\n    }\n    let upper: NVector3[] = [];\n    for (let i = vs.length - 1; i >= 0; i--) {\n      while (upper.length >= 2 && NVector3.Cross(upper[upper.length - 2], upper[upper.length - 1], vs[i]) <= 0) { upper.pop(); }\n      upper.push(vs[i]);\n    }\n    upper.pop(); lower.pop();\n    for (let i = 0; i < upper.length; ++i) { lower.push(upper[i]); }\n    return lower;\n  }\n  static Cross(O: NVector3, A: NVector3, B: NVector3): number {\n    return (A.x - O.x) * (B.y - O.y) - (A.y - O.y) * (B.x - O.x);\n  }\n  static Cross_A_B_OUT(a: NVector3, b: NVector3, out: NVector3) {\n    const ax = a.x, ay = a.y, az = a.z, bx = b.x, by = b.y, bz = b.z;\n    out.x = ay * bz - az * by;\n    out.y = az * bx - ax * bz;\n    out.z = ax * by - ay * bx;\n    return out;\n  }\n\n  // http://jsfiddle.net/justin_c_rounds/Gd2S2/light/\n  static CheckLineIntersection(p0: NVector3, p1: NVector3, p2: NVector3, p3: NVector3) {\n    // if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point\n    let denominator: number = 0, a: number = 0, b: number = 0, numerator1: number = 0, numerator2: number = 0;\n    let onLine0: boolean = false, onLine1: boolean = false;\n    denominator = ((p3.y - p2.y) * (p1.x - p0.x)) - ((p3.x - p2.x) * (p1.y - p0.y));\n    let result: NVector3 = new NVector3(0, 0, 0);\n    if (denominator === 0) { return undefined; }\n    a = p0.y - p2.y;\n    b = p0.x - p2.x;\n    numerator1 = ((p3.x - p2.x) * a) - ((p3.y - p2.y) * b);\n    numerator2 = ((p1.x - p0.x) * a) - ((p1.y - p0.y) * b);\n    a = numerator1 / denominator;\n    b = numerator2 / denominator;\n\n    // if we cast these lines infinitely in both directions, they intersect here:\n    result.x = p0.x + (a * (p1.x - p0.x));\n    result.y = p0.y + (a * (p1.y - p0.y));\n    /*\n            // it is worth noting that this should be the same as:\n            x = p2.x + (b * (p3.x - p2.x));\n            y = p2.x + (b * (p3.y - p2.y));\n            */\n    // if line1 is a segment and line2 is infinite, they intersect if:\n    if (a > 0 && a < 1) {\n      onLine0 = true;\n    }\n    // if line2 is a segment and line1 is infinite, they intersect if:\n    if (b > 0 && b < 1) {\n      onLine1 = true;\n    }\n    // if line1 and line2 are segments, they intersect if both of the above are true\n    if (onLine0 && onLine1) {\n      return result;\n    } else { return undefined; }\n  }\n  // http://www.sunshine2k.de/coding/java/Polygon/Convex/polygon.htm\n  static CheckConvexity(vs: NVector3[]) {\n    if (vs.length < 3) { return false; }\n\n    let p: NVector3;\n    let v: NVector3;\n    let u: NVector3;\n    let res = 0;\n\n    for (let i = 0; i < vs.length; i++) {\n      p = vs[i];\n      let tmp = vs[(i + 1) % vs.length];\n      v = new NVector3(tmp.x - p.x, tmp.y - p.y, 0);\n      u = vs[(i + 2) % vs.length];\n\n      if (i === 0) { // in first loop direction is unknown, so save it in res\n        res = u.x * v.y - u.y * v.x + v.x * p.y - v.y * p.x;\n      } else {\n        let newres = u.x * v.y - u.y * v.x + v.x * p.y - v.y * p.x;\n        if ((newres > 0 && res < 0) || (newres < 0 && res > 0)) { return false; }\n      }\n    }\n    return true;\n  }\n  //////////////////////////////////////////////////////////////////////////////// translation Utility\n  static MoveVecs(vecs: NVector3[], dir: NVector3): NVector3[] {\n    let temp: NVector3[] = [];\n    for (let i = 0; i < vecs.length; ++i) {\n      //\n      temp.push(NVector3.MoveVec(vecs[i], dir));\n    }\n    return temp;\n  }\n  static MoveVec(v: NVector3, dir: NVector3): NVector3 {\n    return new NVector3(v.x + dir.x, v.y + dir.y, v.z + dir.z);\n  }\n  static RotateVecsLoal(vecs: NVector3[], angle: number): NVector3[] {\n    let cptToLocal = NVector3.GetCenterVecFromVecs(vecs);\n    let cptToWorld = new NVector3(-cptToLocal.x, -cptToLocal.y, -cptToLocal.z);\n    let temp: NVector3[] = NVector3.MoveVecs(vecs, cptToWorld);\n    temp = NVector3.RotateVecs(temp, angle);\n    temp = NVector3.MoveVecs(temp, cptToLocal);\n    return temp;\n  }\n  static RotateVecs(vecs: NVector3[], angle: number) {\n    let temp: NVector3[] = [];\n    for (let i = 0; i < vecs.length; ++i) {\n      temp.push(NVector3.RotateVec(vecs[i], angle));\n    }\n    return temp;\n  }\n  static RotateVec(v: NVector3, angle: number): NVector3 {\n    let cos = Math.cos(angle * (3.14159265358979 / 180.0));\n    let sin = Math.sin(angle * (3.14159265358979 / 180.0));\n    let x = v.x * cos - v.y * sin;\n    let y = v.x * sin + v.y * cos;\n    return new NVector3(x, y, v.z);\n  }\n  static GetCenterVecFromVecs(vecs: NVector3[]): NVector3 {\n    let nv = new NVector3(0, 0, 0);\n    for (let i = 0, c = vecs.length; i < c; ++i) {\n      nv.Add(vecs[i]);\n    }\n    nv.Mult(1.0 / vecs.length);\n    return nv;\n  }\n\n  // .............................................................................\n  static MidVecGeo(p1: NVector3, p2: NVector3): NVector3 {\n    // return new NVector3(p1.screenX + p2.screenX * 0.5, p1.screenY + p2.screenY * 0.5, 0);\n    return new NVector3(p1.x + p2.x * 0.5, p1.y + p2.y * 0.5, 0);\n  }\n\n  // intersection // https://gist.github.com/gordonwoodhull/50eb65d2f048789f9558 \n  // https://stackoverflow.com/questions/563198/whats-the-most-efficent-way-to-calculate-where-two-line-segments-intersect/1968345#1968345\n  static GetVecFromIntersection(vs: NVector3[]): NVector3[] | undefined {\n    let newVes: NVector3[] = [];\n    for (let j = 0; j < vs.length - 1; ++j) {\n      for (let k = j + 1; k < vs.length - 1; ++k) {\n        let v = NVector3.CheckLineIntersection(vs[j], vs[j + 1], vs[k], vs[k + 1]);\n        if (v) { newVes.push(v); }\n      }\n    }\n    if (newVes.length === 0) { return undefined; } else { return newVes; }\n  }\n  static between(a: number, b: number, c: number) {\n    return a - NVector3.eps <= b && b <= c + NVector3.eps;\n  }\n  static segment_intersection(v0: NVector3, v1: NVector3, v2: NVector3, v3: NVector3) {\n    var x = ((v0.x * v1.y - v0.y * v1.x) * (v2.x - v3.x) - (v0.x - v1.x) * (v2.x * v3.y - v2.y * v3.x)) /\n      ((v0.x - v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x - v3.x));\n    var y = ((v0.x * v1.y - v0.y * v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x * v3.y - v2.y * v3.x)) /\n      ((v0.x - v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x - v3.x));\n    if (isNaN(x) || isNaN(y)) {\n      return false;\n    } else {\n      if (v0.x >= v1.x) {\n        if (!NVector3.between(v1.x, x, v0.x)) { return false; }\n      } else {\n        if (!NVector3.between(v0.x, x, v1.x)) { return false; }\n      }\n      if (v0.y >= v1.y) {\n        if (!NVector3.between(v1.y, y, v0.y)) { return false; }\n      } else {\n        if (!NVector3.between(v0.y, y, v1.y)) { return false; }\n      }\n      if (v2.x >= v3.x) {\n        if (!NVector3.between(v3.x, x, v2.x)) { return false; }\n      } else {\n        if (!NVector3.between(v2.x, x, v3.x)) { return false; }\n      }\n      if (v2.y >= v3.y) {\n        if (!NVector3.between(v3.y, y, v2.y)) { return false; }\n      } else {\n        if (!NVector3.between(v2.y, y, v3.y)) { return false; }\n      }\n    }\n    return new NVector3(x, y);\n  }\n  // ............................................................................. end static\n\n  constructor(x: number, y: number, z: number = 0) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n  Set(x: number, y: number, z: number): NVector3 {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  Scale(v: number): NVector3 {\n    this.x *= v;\n    this.y *= v;\n    this.z *= v;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  Mult(v: number): NVector3 {\n    this.x *= v;\n    this.y *= v;\n    this.z *= v;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  Div(v: number): NVector3 {\n    this.x /= v;\n    this.y /= v;\n    this.z /= v;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  Add(v: NVector3): NVector3 {\n    this.x += v.x;\n    this.y += v.y;\n    this.z += v.z;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  Sub(v: NVector3): NVector3 {\n    this.x -= v.x;\n    this.y -= v.y;\n    this.z -= v.z;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  Negate() {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  Equals(v: NVector3) {\n    return this.x === v.x && this.y === v.y && this.z === v.z;\n  }\n  Clone(): NVector3 {\n    return new NVector3(this.x, this.y, this.z);\n  }\n  Length(): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  }\n  Unitize(): NVector3 {\n    return this.Normalize();\n  }\n  Normalize(): NVector3 {\n    let len: number = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    this.x = this.x / len;\n    this.y = this.y / len;\n    this.z = this.z / len;\n    return new NVector3(this.x, this.y, this.z);\n  }\n  Distance(v: NVector3): number {\n    return NVector3.Distance(new NVector3(this.x, this.y, this.z), v);\n  }\n  Distance2(v: NVector3): number {\n    return NVector3.Distance2(new NVector3(this.x, this.y, this.z), v);\n  }\n  DotProduct(v: NVector3): number {\n    return NVector3.DotProduct(new NVector3(this.x, this.y, this.z), v);\n  }\n  CrossProduct(v: NVector3): NVector3 {\n    return NVector3.CrossProduct(new NVector3(this.x, this.y, this.z), v);\n  }\n  SquareLength(): number {\n    let len: number = NVector3.Length(new NVector3(this.x, this.y, this.z));\n    return len * len;\n  }\n  FadeExp(attr: NVector3, dVal: number) {\n    let v = new NVector3(this.x, this.y, this.z);\n    v.Sub(attr);\n    return Math.exp(-dVal * v.SquareLength());\n  }\n  GetAngle(): number {\n    return Math.atan2(this.y, this.x);\n  }\n  GetAngleDegree() {\n    return 180 * this.GetAngle() / Math.PI;\n  }\n  ToJSON() {\n    /* */\n  }\n  ToString(): string {\n    let t: string = 'x: ' + this.x.toFixed(3).toString() + ' , y: ' + this.y.toFixed(3).toString() + ', z: ' + this.z.toFixed(3).toString();\n    return t;\n  }\n  ToFloat32Array() {\n    return new Float32Array([this.x, this.y, this.z]);\n  }\n}","import { MouseEventData } from '../lib/MouseInteraction';\n// import { CGeometry } from '../../AppDrawing/Canvas/CGeometry/CoreBase/CGeometryCommon';\nimport { CBCanvas } from './CBCanvas';\n// import { MercatorGraphic } from '../../../MercatorGraphic';\n\nimport { CBlockBase, BLOCK_TYPE } from '../CUIBlock/Block/base/CBlockBase';\nimport { NVector3 } from '../lib/NVector3';\n\nexport class CBlockRenderer {\n    static list: CBlockBase[] = [];\n    static isHidden: boolean = false;\n    static capture: CBlockBase | undefined = undefined;\n    static m: NVector3 = new NVector3(-1, -1);\n    cBCanvas: CBCanvas;\n\n    static Add(g: CBlockBase) {\n        // CBlockRenderer.app.eventListener.AddGeometryStack(g.GetRGeometry());\n        CBlockRenderer.list.push(g);\n    }\n    static Remove(g: CBlockBase) {\n        CBlockRenderer.list.splice(CBlockRenderer.list.indexOf(g), 1);\n    }\n    static RemoveAllCapturedBlock() {\n        if (CBlockRenderer.capture === undefined) { return; }\n        if (CBlockRenderer.capture.type === BLOCK_TYPE.CONTROL_PANEL) {\n            CBlockRenderer.capture.RemovePanel(); return;\n        }\n        CBlockRenderer.capture.Remove();\n    }\n    static CheckOvered(e: MouseEventData) {\n        let i = CBlockRenderer.list.length;\n        // let mouseHoverUI = false;\n        while (i--) {\n            if (CBlockRenderer.list[i].IsMouseInside(e.x, e.y)) {\n                CBlockRenderer.list[i].IsHover = true;\n                // mouseHoverUI = true;\n            } else {\n                CBlockRenderer.list[i].IsHover = false;\n            }\n        }\n        // if (mouseHoverUI) {\n        //     MercatorGraphic.app.ACController.stoppropagation = true;\n        // } else { MercatorGraphic.app.ACController.stoppropagation = false; }\n    }\n    static FindAtPoint(e: MouseEventData) {\n        let i = CBlockRenderer.list.length;\n        while (i--) {\n            if (CBlockRenderer.list[i].isHidden) { continue; }\n            if (CBlockRenderer.list[i].IsMouseInside(e.x, e.y)) {\n                return CBlockRenderer.list[i];\n            }\n        }\n        return undefined;\n    }\n    static MouseDown(e: MouseEventData) {\n        if (CBlockRenderer.isHidden) { return; }\n        let ui = CBlockRenderer.FindAtPoint(e);\n        if (ui !== undefined) {\n            // CGeometry.appDrawing.graphicApp.ACController.enablePan = false;\n            ui.MouseDown(e);\n\n            // if (CGeometry.capture) { CGeometry.capture.isCaptured = false; CGeometry.capture = undefined; }\n\n            CBlockRenderer.capture = ui;\n        } else {\n            CBlockRenderer.capture = undefined;\n        }\n    }\n    static MouseLeft(e: MouseEventData) {\n        if (CBlockRenderer.isHidden) { return; }\n        let ui = CBlockRenderer.FindAtPoint(e);\n        if (ui !== undefined) {\n            // CGeometry.appDrawing.graphicApp.ACController.enablePan = false;\n            ui.MouseLeft(e);\n            CBlockRenderer.capture = ui;\n        } else {\n            CBlockRenderer.capture = undefined;\n        }\n    }\n    static MouseRight(e: MouseEventData) {\n        if (CBlockRenderer.isHidden) { return; }\n        let ui = CBlockRenderer.FindAtPoint(e);\n        if (ui !== undefined) {\n            // CGeometry.appDrawing.graphicApp.ACController.enablePan = false;\n            ui.MouseRight(e);\n            CBlockRenderer.capture = ui;\n        } else {\n            CBlockRenderer.capture = undefined;\n        }\n    }\n    static MouseDrag(e: MouseEventData) {\n        if (CBlockRenderer.isHidden) { return; }\n        if (CBlockRenderer.capture !== undefined) {\n            CBlockRenderer.capture.MouseDrag(e);\n        }\n    }\n    static MouseDouble(e: MouseEventData) {\n        if (CBlockRenderer.isHidden) { return; }\n        let ui = CBlockRenderer.FindAtPoint(e);\n        if (ui !== undefined) {\n            // CGeometry.appDrawing.graphicApp.ACController.enablePan = false;\n            ui.MouseDouble(e);\n            // CBlockRenderer.capture = ui;\n        }\n        // if (CBlockRenderer.capture !== undefined) { }\n    }\n    static MouseMove(e: MouseEventData) {\n        CBlockRenderer.m.x = e.x; CBlockRenderer.m.y = e.y;\n        if (CBlockRenderer.isHidden) { return; }\n        CBlockRenderer.CheckOvered(e);\n        CBlockRenderer.FindAtPoint(e);\n    }\n    static MouseUp(e: MouseEventData) {\n        if (CBlockRenderer.isHidden) { return; }\n        if (CBlockRenderer.capture !== undefined) {\n            CBlockRenderer.capture.MouseUp(e);\n            // CBlockRenderer.capture = undefined;\n        }\n        // CGeometry.appDrawing.graphicApp.ACController.enablePan = true;\n    }\n    static CopyBlock() {\n        /* */\n    }\n    static PasteBlock() {\n        let db = CBlockRenderer.capture;\n        if (db !== undefined) {\n            // if (db.title === '+') { let ndb = db as BlockPlus; ndb.DeepCopy(); }\n        }\n    }\n\n    constructor(cBCanvas: CBCanvas) {\n        this.cBCanvas = cBCanvas;\n    }\n    Render(ctx: CanvasRenderingContext2D) {\n        if (CBlockRenderer.isHidden) { return; }\n        // let i = CBlockRenderer.list.length;\n        // while (i--) {\n        for (let i = 0; i < CBlockRenderer.list.length; ++i) {\n            CBlockRenderer.list[i].Render(ctx);\n        }\n    }\n}","export const GetUUID = () => {   // reference : https://jsfiddle.net/briguy37/2MVFd/\n    let d = new Date().getTime();\n    let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c: string) {\n        // eslint-disable-next-line\n        let r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        // eslint-disable-next-line\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n    return uuid;\n}\nexport const GetIndexBySort = (d: number[]) => {\n    let len = d.length;\n    let indices = new Array(len);\n    for (var i = 0; i < len; ++i) { indices[i] = i; }\n    indices.sort((a, b) => { return d[a] < d[b] ? -1 : d[a] > d[b] ? 1 : 0; });\n    return indices;\n}\nexport const ReMapNomalize = (CValue: number[]) => {\n    let valueOut: number[] = [];\n    let domain: number[] = GetDomain(CValue);\n    for (let d of CValue) { valueOut.push(((d - domain[0]) / (domain[1] - domain[0]))); }\n    return valueOut;\n}\nexport const Remaps = (CValue: number[], OldMin: number, OldMax: number, NewMin: number, NewMax: number) => {\n    let temp: number[] = [];\n    for (let d of CValue) {  temp.push(Remap(d, OldMin, OldMax, NewMin, NewMax)); }\n    return temp;\n}\nexport const  Remap = (CValue: number, OldMin: number, OldMax: number, NewMin: number, NewMax: number) => {\n    return (((CValue - OldMin) * (NewMax - NewMin)) / (OldMax - OldMin)) + NewMin;\n}\nexport const  GetDomain = (doubleList: number[]) => {\n    let Min: number = Number.MAX_VALUE; let Max: number = Number.MIN_VALUE;\n    for (let d of doubleList) { if (Min > d) { Min = d; } if (Max < d) { Max = d; } }\n    return [Min, Max];\n}\n","import { NVector3 } from '../../../lib/NVector3';\nimport { MouseEventData } from '../../../lib/MouseInteraction';\nimport { GetUUID } from '../../../lib/MathUtility';\n\nimport { CBlockRenderer } from '../../../Core/CBlockRenderer';\n// import { CGeometry } from '../../../../AppDrawing/Canvas/CGeometry/CoreBase/CGeometryCommon';\n// import { CBlockController } from '../CBlockController';\n// import { CGeometryBase } from '../../Canvas/CGeometry/CGeometryBase';\nexport enum BLOCK_TYPE {\n    DRAWING = 'DRAWING',\n    CONTROL_PANEL = 'CONTROL_PANEL'\n}\nexport abstract class CBlockBase {\n    type: BLOCK_TYPE;\n    id: string;\n    value: number;\n    vec: NVector3;\n    boundarVecs: NVector3[];\n    isHidden: boolean;\n    div: HTMLElement;\n    height: number;\n    width: number;\n    divID: string;\n    xOff: number;\n    yOff: number;\n    isSelected: boolean;\n    isOver: boolean;\n    toggle: boolean;\n    isMoveable: boolean;\n    style: number;\n    filletR: number;\n    title: string;\n    colorBase: string;\n    colorOver: string;\n    colorText: string;\n    isRender: boolean;\n    transparent: number;\n    heightPanel: number;\n    vecsPanel: NVector3[];\n    constructor(width: number = 100, height: number = 20) {\n        CBlockRenderer.Add(this);\n        this.width = width;\n        this.height = height;\n        this.heightPanel = 50;\n        this.xOff = 10;\n        this.yOff = 50;\n        this.isHidden = false;\n        this.isSelected = false;\n        this.isOver = false;\n        this.isMoveable = true;\n        this.style = 0;\n        this.filletR = 3;\n        this.isRender = true;\n        this.vec = new NVector3(100, 100, 0);\n        this.title = 'Drawing Block';\n        this.boundarVecs = [];\n        this.colorBase = '#907BD2';\n        this.transparent = 1.0;\n        this.toggle = true;\n        this.id = GetUUID();\n\n    }\n    Remove() {\n        CBlockRenderer.Remove(this);\n    }\n    RemovePanel() {\n        /* */\n    }\n    DeepCopy() {\n        /* */\n    }\n    Dummy() {\n        /* */\n    }\n    get Toggle() {\n        return this.toggle;\n    }\n    set Toggle(v: boolean) {\n        this.toggle = v;\n        console.log('dd');\n        // this.panel.isHidden = v;\n    }\n    get IsHidden() {\n        return this.isHidden;\n    }\n    set IsHidden(v: boolean) {\n        this.isHidden = v;\n    }\n    get IsHover() {\n        return this.isOver;\n    }\n    set IsHover(v: boolean) {\n        this.isOver = v;\n    }\n    get IsSelected() { return this.isSelected; }\n    set IsSelected(v: boolean) { this.isSelected = v; }\n    GetBoundaryVecs() {\n        let theHeight = this.height * 0.5;\n        let theWidth = this.width * 0.5;\n        let v0 = new NVector3(this.vec.x - theWidth, this.vec.y - theHeight);\n        let v1 = new NVector3(this.vec.x + theWidth, this.vec.y + theHeight);\n        this.boundarVecs = NVector3.GetBoundingVecs(v0, v1);\n        return this.boundarVecs;\n    }\n    ComputeBoundary() {\n        this.boundarVecs = [];\n\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y, this.vec.z));\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y, this.vec.z));\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y + this.height, this.vec.z));\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y + this.height, this.vec.z));\n        return this.boundarVecs;\n    }\n    GetBoundaryPanelVecs() {\n        let theHeight = this.height;\n        let theWidth = this.width;\n        let v0 = new NVector3(this.vec.x, this.vec.y + theHeight + 2);\n        let v1 = new NVector3(this.vec.x + theWidth, this.vec.y + theHeight + this.heightPanel);\n        this.vecsPanel = NVector3.GetBoundingVecs(v0, v1);\n        return this.vecsPanel;\n    }\n    IsMouseInside(x: number, y: number) {\n        let v = NVector3.IsInsideOfVecs(new NVector3(x, y), this.ComputeBoundary());\n        this.isOver = v;\n        if (v) {\n            // CGeometry.appDrawing.activeCommands.isReturn = true;\n        } else {\n            // CGeometry.appDrawing.activeCommands.isReturn = false;\n        }\n        return v;\n    }\n    Translate(e: MouseEventData): void {\n        if (!this.isMoveable) { return; }\n        let xo = e.x - e.preX;\n        let yo = e.y - e.preY;\n        this.vec.x += xo;\n        this.vec.y += yo;\n        for (let i = 0; i < this.boundarVecs.length; ++i) { this.boundarVecs[i].x += xo; this.boundarVecs[i].y += yo; }\n    }\n    Move(x: number, y: number) {\n        this.vec.x = x; this.vec.y = y;\n    }\n    HideToogle() {\n        this.IsHidden = !this.IsHidden;\n        this.Hide();\n    }\n    Hide() {\n        /* */\n    }\n    MouseDown(e: MouseEventData) {\n        /* */\n    }\n    MouseUp(e: MouseEventData) {\n        /* */\n    }\n    MouseDrag(e: MouseEventData) {\n        this.Translate(e);\n    }\n    MouseDouble(e: MouseEventData) {\n        /* */\n    }\n    MouseLeft(e: MouseEventData) {\n        console.log('eeeeee');\n        this.IsSelected = !this.IsSelected;\n    }\n    MouseRight(e: MouseEventData) {\n        /* */\n    }\n    Render(ctx: CanvasRenderingContext2D) {\n        if (this.isHidden) { return; }\n        this.RenderPost(ctx);\n    }\n    abstract RenderPost(ctx: CanvasRenderingContext2D): void;\n\n}","\nexport enum COLORBLENDING {\n    SOURCE_OVER = 'source-over',\n    SOURCE_IN = 'source-in',\n    SOURCE_OUT = 'source-out',\n    SOURCE_ATOP = 'source-atop',\n    COPY = 'copy',\n\n    DESTAINATION_OVER = 'destination-over',\n    DESTAINATION_IN = 'destination-in',\n    DESTAINATION_OUT = 'destination-out',\n    DESTAINATION_ATOP = 'destination-atop',\n\n    LIGHTER = 'lighter',\n    MULTIPLY = 'multiply',\n    SCREEN = 'screen',\n    OVERLAY = 'overlay',\n    DARKEN = 'darken',\n    LIGHTEN = 'lighten',\n    COLOR_DODGE = 'color-dodge',\n    COLOR_BURN = 'color-burn',\n    HARD_LIGHT = 'hard-light',\n    SOFT_LIGHT = 'soft-light',\n    DIFFERENCE = 'difference',\n    EXCLUSION = 'exclusion',\n    HUE = 'hue',\n    SATURATION = 'saturation',\n    COLOR = 'color',\n    LUMINOSITY = 'luminosity'\n}\n\nexport class ColorUtility {\n    static modeList = [\n        'source-over', 'source-in', 'source-out', 'source-atop', 'copy',\n        'destination-over', 'destination-in', 'destination-out', 'destination-atop',\n        'lighter', 'multiply', 'screen',\n        'overlay', 'darken', 'lighten', 'color-dodge',\n        'color-burn', 'hard-light', 'soft-light',\n        'difference', 'exclusion', 'hue',\n        'saturation', 'color', 'luminosity'\n    ];\n    static modeListGL = [\n        'source-over',\n        'lighter', 'multiply', 'screen',\n        'overlay', 'darken', 'lighten', 'color-dodge',\n        'color-burn', 'hard-light', 'soft-light',\n        'difference', 'exclusion', 'hue',\n        'saturation', 'color', 'luminosity'\n    ];\n    static ColorPreset = {\n        shadow: 'rgba(10,10,10,0.5)'\n    };\n    static ShiftBlendingMode(v: number) { // 0 to 1\n        let num = v % ColorUtility.modeListGL.length;\n        console.log(ColorUtility.modeListGL[num] + ' mode for WebGL');\n        return ColorUtility.modeListGL[num] as COLORBLENDING;\n    }\n    static RGBtoGray(r: number, g: number, b: number) {\n        return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n    }\n    // reference http://scaledinnovation.com/analytics/splines/aboutSplines.html\n    static HSVtoRGB(h: number, s: number, v: number, visibility: number) {\n        // inputs h=hue=0-360, s=saturation=0-1, v=value=0-1;\n        // algorithm from Wikipedia on HSV conversion;\n        const toHex = function (decimalValue: number, places: number = 2) {\n            if (places === undefined || isNaN(places)) { places = 2; }\n            let hex = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'];\n            let next = 0;\n            let hexidecimal = '';\n            decimalValue = Math.floor(decimalValue);\n            while (decimalValue > 0) {\n                next = decimalValue % 16;\n                decimalValue = Math.floor((decimalValue - next) / 16);\n                hexidecimal = hex[next] + hexidecimal;\n            }\n            while (hexidecimal.length < places) { hexidecimal = '0' + hexidecimal; }\n            return hexidecimal;\n        };\n        let hi = Math.floor(h / 60) % 6;\n        let f = h / 60 - Math.floor(h / 60);\n        let p = v * (1 - s);\n        let q = v * (1 - f * s);\n        let t = v * (1 - (1 - f) * s);\n        let r = v; // case hi===0 below\n        let g = t;\n        let b = p;\n        switch (hi) {\n            case 1: r = q; g = v; b = p; break;\n            case 2: r = p; g = v; b = t; break;\n            case 3: r = p; g = q; b = v; break;\n            case 4: r = t; g = p; b = v; break;\n            case 5: r = v; g = p; b = q; break;\n            default:\n                break;\n        }\n        //  At this point r,g,b are in 0...1 range.  Now convert into rgba or #FFFFFF notation\n        if (visibility) {\n            return `rgba( ${Math.round(255 * r)},${Math.round(255 * g)},${Math.round(255 * b)},${visibility})`;\n        } else {\n            return '#' + toHex(r * 255) + toHex(g * 255) + toHex(b * 255);\n        }\n    }\n    static GetRandomHex() {\n        return ColorUtility.RGBToHex(Math.round(Math.random() * 255), Math.round(Math.random() * 255), Math.round(Math.random() * 255));\n    }\n    static GetRandomRGB() {\n        return `rgb(${Math.round(Math.random() * 255)},${Math.round(Math.random() * 255)},${Math.round(Math.random() * 255)})`;\n    }\n    static GetRandomRGBArray() {\n        return [(Math.round(Math.random() * 255)), (Math.round(Math.random() * 255)), (Math.round(Math.random() * 255))];\n    }\n    static GetRandomColor() {\n        let letters = '0123456789ABCDEF';\n        let color = '#';\n        for (let i = 0; i < 6; i++) {\n            color += letters[Math.floor(Math.random() * 16)];\n        }\n        return color;\n    }\n    // https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n    static RGBToHex(r: number, g: number, b: number) {\n        return '#' + [Math.round(r), Math.round(g), Math.round(b)].map(x => {\n            const hex = x.toString(16);\n            return hex.length === 1 ? '0' + hex : hex;\n        }).join('');\n    }\n    static HexToCanvasColor(hex: string, visibility: number | string = 0, isGray: boolean = false) {\n        // if (hex[0] !== '#') {\n        //     let col = hex.split('(')[1].split(')')[0].split(',');\n        //     hex = this.RGBToHex(parseInt(col[0]), parseInt(col[1]), parseInt(col[2]));\n        // }\n        // Convert #AA77CC to rbga() format for Firefox\n        let thecol;\n        visibility = visibility || '1.0';\n        hex = hex.replace('#', '');\n        let r = parseInt(hex.substring(0, 2), 16);\n        let g = parseInt(hex.substring(2, 4), 16);\n        let b = parseInt(hex.substring(4, 6), 16);\n        if (isGray) {\n            // let v = (0.58 * (r / 255)) + (0.17 * (g / 255)) + (0.8 * (b / 255));\n            let v = (0.58 * r) + (0.17 * g) + (0.8 * b);\n            thecol = 'rgba(' + v + ',' + v + ',' + v + ',' + visibility + ')';\n        } else {\n            thecol = 'rgba(' + r + ',' + g + ',' + b + ',' + visibility + ')';\n        }\n        return thecol;\n    }\n    static Dec2hex(i: number) {\n        return (i + 0x10000).toString(16).substr(-4).toUpperCase();\n    }\n    static Hex2Dec(hex: string) {\n        return parseInt(hex, 16);\n    }\n    static RGB_by_A(c: string, visiblity: number) {\n        let col = c.split(',');\n        return col[0] + ',' + col[1] + ',' + col[2] + ',' + visiblity + ')';\n    }\n    static HexToRGBA(hex: string, visibility: number = 1, isGray: boolean = false) {\n        hex = hex.replace('#', '');\n        let r = parseInt(hex.substring(0, 2), 16);\n        let g = parseInt(hex.substring(2, 4), 16);\n        let b = parseInt(hex.substring(4, 6), 16);\n        if (isGray) {\n            // let v = (0.58 * (r / 255)) + (0.17 * (g / 255)) + (0.8 * (b / 255));\n            let v = (0.58 * r) + (0.17 * g) + (0.8 * b);\n            return [v, v, v, visibility];\n        } else {\n            return [r, g, b, visibility];\n        }\n    }\n    static HexToRGBANormalized(hex: string, visibility: number = 1, isGray: boolean = false) {\n        hex = hex.replace('#', '');\n        let r = parseInt(hex.substring(0, 2), 16);\n        let g = parseInt(hex.substring(2, 4), 16);\n        let b = parseInt(hex.substring(4, 6), 16);\n        if (isGray) {\n            // let v = (0.58 * (r / 255)) + (0.17 * (g / 255)) + (0.8 * (b / 255));\n            let v = (0.58 * r) + (0.17 * g) + (0.8 * b);\n            return [v, v, v, visibility];\n        } else {\n            return [r / 255, g / 255, b / 255, visibility / 255];\n        }\n    }\n    // https://gist.github.com/mjackson/5311256\n    static RGB2HSL(r: number, g: number, b: number) { // 0 to 255\n        r /= 255; g /= 255; b /= 255;\n\n        let max = Math.max(r, g, b), min = Math.min(r, g, b);\n        let h = (max + min) / 2, s = (max + min) / 2, l = (max + min) / 2;\n\n        if (max === min) {\n            h = s = 0; // achromatic\n        } else {\n            let d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n                default: break;\n            }\n            h /= 6;\n        }\n        return [h, s, l]; // 0 to 1\n    }\n    static HSL2RGB(h: number, s: number, l: number) { // 0 to 1\n        let r, g, b;\n\n        if (s === 0) {\n            r = g = b = l; // achromatic\n        } else {\n            const hue2rgb = (pp: number, qq: number, t: number) => {\n                if (t < 0) { t += 1; }\n                if (t > 1) { t -= 1; }\n                if (t < 1 / 6) { return pp + (qq - pp) * 6 * t; }\n                if (t < 1 / 2) { return qq; }\n                if (t < 2 / 3) { return pp + (qq - pp) * (2 / 3 - t) * 6; }\n                return pp;\n            };\n\n            let q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            let p = 2 * l - q;\n\n            r = hue2rgb(p, q, h + 1 / 3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1 / 3);\n        }\n        return [\n            Math.max(0, Math.min(Math.round(r * 255), 255))\n            , Math.max(0, Math.min(Math.round(g * 255), 255))\n            , Math.max(0, Math.min(Math.round(b * 255), 255))\n        ];\n    }\n    static RGB2HSV(r: number, g: number, b: number) { // 0 to 255\n        r /= 255; g /= 255; b /= 255;\n\n        let max = Math.max(r, g, b), min = Math.min(r, g, b);\n        let h = max, s = max, v = max;\n\n        let d = max - min;\n        s = max === 0 ? 0 : d / max;\n\n        if (max === min) {\n            h = 0; // achromatic\n        } else {\n            switch (max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n                default: break;\n            }\n\n            h /= 6;\n        }\n        return [h, s, v]; // 0 to 1\n    }\n    static HSV2RGB(h: number, s: number, v: number) { // 0 to 1\n        let r = 0, g = 0, b = 0;\n\n        let i = Math.floor(h * 6);\n        let f = h * 6 - i;\n        let p = v * (1 - s);\n        let q = v * (1 - f * s);\n        let t = v * (1 - (1 - f) * s);\n\n        switch (i % 6) {\n            case 0: r = v; g = t; b = p; break;\n            case 1: r = q; g = v; b = p; break;\n            case 2: r = p; g = v; b = t; break;\n            case 3: r = p; g = q; b = v; break;\n            case 4: r = t; g = p; b = v; break;\n            case 5: r = v; g = p; b = q; break;\n            default: break;\n        }\n\n        return [r * 255, g * 255, b * 255];\n    }\n    // ... interpolation\n    // https://graphicdesign.stackexchange.com/questions/83866/generating-a-series-of-colors-between-two-colors\n    static InterpolateColor(colA: number[], colB: number[], factor: number = 0.5): number[] {\n        let result = [colA[0], colA[1], colA[2]]; // ;colA.slice();\n        for (let i = 0; i < 3; i++) {\n            // result[i] = Math.round(result[i] + factor * (colB[i] - colA[i]));\n            result[i] = (result[i] * 255 + factor * (colB[i] * 255 - colA[i] * 255));\n        }\n        // console.log(result);\n        return result;\n    }\n    static InterpolateColorsByArray(cA: number[], cB: number[], steps: number): number[][] {\n        const step = 1. / (steps - 1.), interpolatedColors = [];\n        for (let i = 0; i < steps; i++) {\n            interpolatedColors.push(ColorUtility.InterpolateColor(cA, cB, step * i));\n        }\n        // console.log(interpolatedColors);\n        return interpolatedColors;\n    }\n    static InterpolateColors(rgb0: string, rgb1: string, steps: number): number[][] {\n        const step = 1 / (steps - 1), interpolatedColors = [];\n\n        let cA = ColorUtility.RBGToArray(rgb0);\n        let cB = ColorUtility.RBGToArray(rgb1);\n\n        if (cA && cB) {\n            for (let i = 0; i < steps; i++) {\n                interpolatedColors.push(ColorUtility.InterpolateColor(cA, cB, step * i));\n            }\n        }\n        return interpolatedColors;\n    }\n    static RBGToArray(rgb: string): number[] | undefined {\n        const c = rgb.match(/\\d+/g);\n        if (c) { return c.map(Number); }\n        return undefined;\n    }\n    // ............................................................................ blender\n    //      blendFunc blender = funcs[mode % 7];\n    // public delegate  blendFunc( a,  b,  c);\n    //     public blendFunc[] funcs = new blendFunc[]{\n    //     Blend, Addition, Subtraction, Multiply, Screen, Overlay, SoftLight\n    // };\n    static Blend(vA: number, vB: number, blend: number) {\n        return vA * (1.0 - blend) + vB * blend;\n    }\n    static Addition(vA: number, vB: number, blend: number) {\n        return vA * (1.0 - blend) + blend * (vA + vB) * 0.5;\n    }\n    static Subtraction(vA: number, vB: number, blend: number) {\n        return vA * (1.0 - blend) + blend * (vA - vB) * 2;\n    }\n    static Multiply(vA: number, vB: number, blend: number) {\n        return vA * (1.0 - blend) + blend * (vA * vB) * 0.5;\n    }\n    static Screen(vA: number, vB: number, blend: number) {\n        return vA * (1.0 - blend) + blend * (1 - (1 - vA) * (1 - vB));\n    }\n    static Overlay(vA: number, vB: number, blend: number) {\n        let val = 0;\n        if (vA < 0.5) { val = 2 * vA * vB; } else { val = 1 - 2 * (1 - vA) * (1 - vB); }\n        val = vA * (1.0 - blend) + blend * val;\n        return val;\n    }\n    static SoftLight(vA: number, vB: number, blend: number) {\n        let val = 0;\n        if (vB < 0.5) { val = 2 * vA * vB + vA * vA * (1 - 2 * vB); } else { val = 2 * vA * (1 - vB) + Math.sqrt(vA) * (2 * vB - 1); }\n        val = vA * (1.0 - blend) + blend * val;\n        return val;\n    }\n}","import { NVector3 } from '../../../lib/NVector3';\nimport { MouseEventData } from '../../../lib/MouseInteraction';\nimport { NumericalMotion } from '../../../lib/NumericalMotion';\n\nimport { CBlockBase } from './CBlockBase';\nimport { CBlockRenderer } from '../../../Core/CBlockRenderer';\n// import { CBlockRenderer } in './CBlockRenderer'\n\nexport enum TYPE {\n    IN = 'IN',\n    OUT = 'OUT'\n}\n\nexport class CBlockIO extends CBlockBase {\n    public static list: CBlockIO[] = [];\n\n    isDown: boolean;\n    vecs: NVector3[];\n    r: number;\n    typeIO: TYPE;\n    host: CBlockBase;\n    isConnected: boolean;\n    in: CBlockIO[];\n    out: CBlockIO[];\n    hasError: boolean;\n    name: string;\n\n    io: CBlockIO;\n\n    static FindAtPoint(x: number, y: number) {\n        for (var i = CBlockIO.list.length - 1; i >= 0; --i) {\n            if (CBlockIO.list[i].isHidden) { continue; }\n            if (CBlockIO.list[i].IsMouseInside(x, y)) {\n                return CBlockIO.list[i];\n            }\n        }\n        return undefined;\n    }\n    static Add(g: CBlockIO) {\n        CBlockIO.list.push(g);\n    }\n    static Remove(g: CBlockIO) {\n        CBlockIO.list.splice(CBlockIO.list.indexOf(g), 1);\n\n    }\n\n    constructor(host: CBlockBase, type: TYPE, name: string, x: number, y: number) {\n        super();\n        this.name = name;\n        this.title = host.title;\n        this.vec = new NVector3(x, y);\n        this.host = host;\n        this.typeIO = type;\n        this.r = 5;\n        this.isDown = false;\n        this.isConnected = false;\n        this.hasError = false;\n\n        this.in = [];\n        this.out = [];\n        this.vecs = [];\n        this.vecs.push(new NVector3(x, y, 0));\n        this.vecs.push(new NVector3(x, y, 0));\n        this.vecs.push(new NVector3(x, y, 0));\n        this.vecs.push(new NVector3(x, y, 0));\n        CBlockIO.Add(this);\n    }\n    Remove() {\n        if (this.in.length !== 0) {\n            for (let i = 0; i < this.in.length; ++i) {\n                this.in[i].RemoveLink(this);\n                console.log('in', this.in);\n            }\n        }\n        if (this.out.length !== 0) {\n            for (let i = 0; i < this.out.length; ++i) {\n                this.out[i].RemoveLink(this);\n                console.log('out', this.out);\n            }\n        }\n        CBlockIO.Remove(this);\n        CBlockRenderer.Remove(this);\n    }\n    Distance(x: number, y: number) { return Math.sqrt((this.vec.x - x) * (this.vec.x - x) + (this.vec.y - y) * (this.vec.y - y)); }\n    IsMouseInside(x: number, y: number) { return this.Distance(x, y) <= this.r + 3; }\n    Translate(e: MouseEventData): void { return; }\n    UpdatePosByHost(x: number, y: number) {\n        // this.Move(x, y);\n    }\n    UpdateWirePos() {\n        if (this.isConnected) {\n            /* */\n        } else {\n            for (let i = 0; i < this.vecs.length; ++i) { this.vecs[i] = this.vec; }\n        }\n\n    }\n    RemoveLink(ic: CBlockIO) {\n        this.isConnected = false;\n        if (this.in.length !== 0) { this.in.splice(this.in.indexOf(ic), 1); }\n        if (this.out.length !== 0) { this.out.splice(this.out.indexOf(ic), 1); }\n    }\n    SetLink(ic: CBlockIO) {\n        if (this.typeIO === TYPE.OUT) {\n            if (this.in.length === 0) { this.in = []; }\n            this.in.push(ic);\n            console.log(ic);\n        } else {\n            if (this.out.length === 0) { this.out = []; }\n            this.out.push(ic);\n            console.log(ic);\n        }\n        this.io = ic;\n\n    }\n    UpdateToOtherLinks(n: number) {\n        // console.log(this.title, n);\n        // console.log(this.io);\n        if (this.typeIO === TYPE.OUT) {\n            for (let i = 0; i < this.out.length; ++i) {\n                this.out.length[i].UpdateByinOut(n);\n            }\n            // console.log(n, this.host.title, this.out.length);\n        }\n        if (this.io) {\n            this.io.UpdateByinOut(n);\n        }\n    }\n    UpdateByinOut(n: number) {\n\n        console.log(this.host.title, n);\n    }\n    MouseDown(e: MouseEventData) {\n        this.isRender = true;\n        this.isDown = true;\n    }\n    MouseUp(e: MouseEventData) {\n\n        this.isDown = false;\n        let i = CBlockIO.FindAtPoint(e.x, e.y);\n        if (i !== undefined) {\n            i.SetLink(this);\n            i.isConnected = true;\n            this.isConnected = true;\n            this.isRender = true;\n        } else {\n            this.UpdateWirePos();\n            this.isRender = false;\n        }\n    }\n    MouseDrag(e: MouseEventData) {\n        if (this.isDown) {\n            if (this.typeIO === TYPE.IN) {\n                this.out = [];\n            } else {\n                this.in = [];\n            }\n            this.vecs[3] = new NVector3(e.x, e.y);\n        }\n    }\n    MouseDouble(e: MouseEventData) {\n        // this.IsPin = !this.IsPin;\n    }\n\n    RenderPost(ctx: CanvasRenderingContext2D) {\n        if (this.in.length !== 0) {\n            for (let i = 0; i < this.in.length; ++i) {\n                this.in[i].vecs[3] = this.vec;\n            }\n\n        } else {\n            this.vecs[0] = this.vec;\n            if (this.isRender) { this.RenderWire(ctx); }\n        }\n        if (this.out.length !== 0) {\n            for (let i = 0; i < this.out.length; ++i) {\n                this.out[i].vecs[3] = this.vec;\n            }\n\n        } else {\n            this.vecs[0] = this.vec;\n            if (this.isRender) { this.RenderWire(ctx); }\n        }\n\n        ctx.beginPath();\n        ctx.strokeStyle = 'rgba(255,255,255,0.2)';\n        if (this.isOver) {\n            ctx.fillStyle = 'white';\n            if (this.typeIO === TYPE.IN) {\n                ctx.arc(this.vec.x, this.vec.y, NumericalMotion.Scale(this.r + 3), 0.5 * 3.14, 3.14 * 1.5);\n            } else {\n                ctx.arc(this.vec.x, this.vec.y, NumericalMotion.Scale(this.r + 3), 1.5 * 3.14, 3.14 * 0.5);\n            }\n        } else {\n            ctx.fillStyle = '#333333';\n            if (this.typeIO === TYPE.IN) {\n                ctx.arc(this.vec.x, this.vec.y, this.r, 0.5 * 3.14, 3.14 * 1.5);\n            } else {\n                ctx.arc(this.vec.x, this.vec.y, this.r, 1.5 * 3.14, 3.14 * 0.5);\n            }\n        }\n        ctx.closePath();\n        ctx.shadowColor = 'rgba(0,0,0,0.3)';\n        ctx.shadowBlur = 2;\n        ctx.shadowOffsetX = 0;\n        ctx.shadowOffsetY = 2;\n        ctx.fill();\n        ctx.restore();\n        ctx.stroke();\n\n    }\n    RenderWire(ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        ctx.strokeStyle = '#333333';\n        if (!this.isConnected) { ctx.setLineDash([2, 2]); }\n\n        ctx.lineWidth = 1;\n        let dis = Math.abs(this.vecs[3].y - this.vecs[0].y);\n\n        if (this.typeIO === TYPE.OUT) {\n            this.vecs[1] = new NVector3(this.vecs[0].x + dis, this.vecs[0].y); // NVector3.MidVec(vs[0], vs[1]);\n            this.vecs[2] = new NVector3(this.vecs[3].x - dis, this.vecs[3].y); // NVector3.MidVec(vs[2], vs[3]);\n        } else {\n            this.vecs[1] = new NVector3(this.vecs[0].x - dis, this.vecs[0].y); // NVector3.MidVec(vs[0], vs[1]);\n            this.vecs[2] = new NVector3(this.vecs[3].x + dis, this.vecs[3].y); // NVector3.MidVec(vs[2], vs[3]);              \n        }\n        ctx.beginPath();\n        ctx.moveTo(this.vecs[0].x, this.vecs[0].y);\n        ctx.bezierCurveTo(this.vecs[1].x, this.vecs[1].y, this.vecs[2].x, this.vecs[2].y, this.vecs[3].x, this.vecs[3].y);\n        ctx.stroke();\n        ctx.setLineDash([0, 0]);\n        ctx.restore();\n    }\n\n}","import { ColorUtility } from '../../lib/ColorUtility';\nimport { NVector3 } from '../../lib/NVector3';\n\nexport class CBlockPreset {\n    static styleStroke: string = 'white';\n    static styleFill: string = 'gray';\n    static stylefillSelected: string = 'red';\n\n    static RoundedRectFill(ctx: CanvasRenderingContext2D, s: number, vs: NVector3[], r: number, xOff: number = 0, isOver: boolean = false, isSel: Boolean = false) {\n        // let color = s.backgroundColor;\n        let radius = r; // parseFloat(s.borderRadius);\n        // console.log(color);\n        ctx.save();\n        ctx.beginPath();\n\n        ctx.moveTo(vs[0].x + xOff + radius, vs[0].y);\n        ctx.lineTo(vs[1].x - xOff - radius, vs[1].y);\n\n        ctx.arcTo(vs[1].x - xOff, vs[1].y, vs[1].x - xOff, vs[1].y + radius, radius);\n        ctx.lineTo(vs[2].x - xOff, vs[2].y - radius);\n\n        ctx.arcTo(vs[2].x - xOff, vs[2].y, vs[2].x - xOff - radius, vs[2].y, radius);\n        ctx.lineTo(vs[3].x + xOff + radius, vs[3].y);\n\n        ctx.arcTo(vs[3].x + xOff, vs[3].y, vs[3].x + xOff, vs[3].y - radius, radius);\n        ctx.lineTo(vs[0].x + xOff, vs[0].y + radius);\n        ctx.arcTo(vs[0].x + xOff, vs[0].y, vs[0].x + xOff + radius, vs[0].y, radius);\n        ctx.closePath();\n        ctx.fillStyle = CBlockPreset.styleFill;\n\n        if (isSel) { ctx.fillStyle = CBlockPreset.stylefillSelected; }\n        if (isOver) {\n            ctx.strokeStyle = CBlockPreset.styleStroke;\n            ctx.lineWidth = 1;\n            ctx.stroke();\n        }\n\n        ctx.shadowBlur = 4;\n        ctx.shadowColor = ColorUtility.ColorPreset.shadow;\n        ctx.shadowOffsetY = 2;\n        ctx.shadowOffsetX = 2;\n        ctx.fill();\n        ctx.restore();\n    }\n\n    static Title(ctx: CanvasRenderingContext2D, vec: NVector3, width: number, height: number, title: string, isOver: boolean) {\n        ctx.save();\n\n        if (isOver) {\n            ctx.fillStyle = 'white';\n        } else {\n            ctx.fillStyle = '#AFAFAF';\n        }\n        ctx.textBaseline = 'top';\n        ctx.textAlign = 'center';\n        ctx.font = '100 15px Sans-serif';\n        ctx.fillText(title, vec.x + (width * 0.5), vec.y + (height * 0.5) - 8);\n        ctx.restore();\n    }\n    constructor() {\n        /* */\n    }\n}","export class NumericalMotion {\n    static t: number = 0.0;\n\n    static Scale(r: number) { return (Math.sin(NumericalMotion.t) + 5.0) * 0.2 * r; }\n    static ScaleLocalT(r: number, t: number) { return (Math.sin(t) + 5.0) * 0.2 * r; }\n    static ScaleMin(r: number) { return ((Math.sin(NumericalMotion.t) + 5.0) * 0.02 + 0.9) * r; }\n    static ScaleMinOfMin(t: number) {\n        return Math.cos(t);\n    }\n    static ScaleMinLocalT(r: number, t: number) { return ((Math.sin(t) + 5.0) * 0.02 + 0.9) * r; }\n\n    // reference for easing motion.\n    // https://codepen.io/xerxesnoble/pen/JNgmJR?editors=0010\n    static linear(t: number) { return t; }\n    // accelerating from zero velocity\n    static EaseInQuad(t: number) { return t * t; }\n    // decelerating to zero velocity\n    static EaseOutQuad(t: number) { return t * (2 - t); }\n    // acceleration until halfway, then deceleration\n    static EaseInOutQuad(t: number) { return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t; }\n    // accelerating from zero velocity \n    static EaseInCubic(t: number) { return t * t * t; }\n    // decelerating to zero velocity \n    static EaseOutCubic(t: number) { return (--t) * t * t + 1; }\n    // acceleration until halfway, then deceleration \n    static EaseInOutCubic(t: number) { return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; }\n    // accelerating from zero velocity \n    static EaseInQuart(t: number) { return t * t * t * t; }\n    // decelerating to zero velocity \n    static EaseOutQuart(t: number) { return 1 - (--t) * t * t * t; }\n    // acceleration until halfway, then deceleration\n    static EaseInOutQuart(t: number) { return t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t; }\n    // accelerating from zero velocity\n    static EaseInQuint(t: number) { return t * t * t * t * t; }\n    // decelerating to zero velocity\n    static EaseOutQuint(t: number) { return 1 + (--t) * t * t * t * t; }\n    // acceleration until halfway, then deceleration \n    static EaseInOutQuint(t: number) { return t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t; }\n    // elastic bounce effect at the beginning\n    static EaseInElastic(t: number) { return (.04 - .04 / t) * Math.sin(25 * t) + 1; }\n    // elastic bounce effect at the end\n    static EaseOutElastic(t: number) { return .04 * t / (--t) * Math.sin(25 * t); }\n    // elastic bounce effect at the beginning and end\n    static EaseInOutElastic(t: number) { return (t -= .5) < 0 ? (.01 + .01 / t) * Math.sin(50 * t) : (.02 - .01 / t) * Math.sin(50 * t) + 1; }\n\n    // https://joshondesign.com/2013/03/01/improvedEasingEquations\n    static easeOutElastic2(t: number) { var p = 0.3; return Math.pow(2, -10 * t) * Math.sin((t - p / 4) * (2 * Math.PI) / p) + 1; }\n\n    // https://github.com/AndrewRayCode/easing-utils/blob/master/src/easing.js\n    // Slight acceleration from zero to full speed\n    static easeInSine(t: number) { return -1 * Math.cos(t * (Math.PI / 2)) + 1; }\n    // Slight deceleration at the end\n    static easeOutSine(t: number) { return Math.sin(t * (Math.PI / 2)); }\n    // Slight acceleration at beginning and slight deceleration at end\n    static easeInOutSine(t: number) { return -0.5 * (Math.cos(Math.PI * t) - 1); }\n    // Accelerating from zero velocity\n    static easeInQuad(t: number) { return t * t; }\n    // Decelerating to zero velocity\n    static easeOutQuad(t: number) { return t * (2 - t); }\n    // Acceleration until halfway, then deceleration\n    static easeInOutQuad(t: number) { return t < 0.5 ? 2 * t * t : - 1 + (4 - 2 * t) * t; }\n    // Accelerating from zero velocity\n    static easeInCubic(t: number) { return t * t * t; }\n    // Decelerating to zero velocity\n    static easeOutCubic(t: number) { const t1 = t - 1; return t1 * t1 * t1 + 1; }\n    // Acceleration until halfway, then deceleration\n    static easeInOutCubic(t: number) { return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; }\n    // Accelerating from zero velocity\n    static easeInQuart(t: number) { return t * t * t * t; }\n    // Decelerating to zero velocity\n    static easeOutQuart(t: number) { const t1 = t - 1; return 1 - t1 * t1 * t1 * t1; }\n    // Acceleration until halfway, then deceleration\n    static easeInOutQuart(t: number) { const t1 = t - 1; return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * t1 * t1 * t1 * t1; }\n    // Accelerating from zero velocity\n    static easeInQuint(t: number) { return t * t * t * t * t; }\n    // Decelerating to zero velocity\n    static easeOutQuint(t: number) { const t1 = t - 1; return 1 + t1 * t1 * t1 * t1 * t1; }\n    // Acceleration until halfway, then deceleration\n    static easeInOutQuint(t: number) { const t1 = t - 1; return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * t1 * t1 * t1 * t1 * t1; }\n    // Accelerate exponentially until finish\n    static easeInExpo(t: number) { if (t === 0) { return 0; } return Math.pow(2, 10 * (t - 1)); }\n    // Initial exponential acceleration slowing to stop\n    static easeOutExpo(t: number) { if (t === 1) { return 1; } return (-Math.pow(2, -10 * t) + 1); }\n    // Exponential acceleration and deceleration\n    static easeInOutExpo(t: number) {\n        if (t === 0 || t === 1) { return t; }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        if (scaledTime < 1) { return 0.5 * Math.pow(2, 10 * (scaledTime1)); } return 0.5 * (-Math.pow(2, -10 * scaledTime1) + 2);\n    }\n    // Increasing velocity until stop\n    static easeInCirc(t: number) { const scaledTime = t / 1; return -1 * (Math.sqrt(1 - scaledTime * t) - 1); }\n    // Start fast, decreasing velocity until stop\n    static easeOutCirc(t: number) { const t1 = t - 1; return Math.sqrt(1 - t1 * t1); }\n    // Fast increase in velocity, fast decrease in velocity\n    static easeInOutCirc(t: number) {\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 2;\n        if (scaledTime < 1) { return -0.5 * (Math.sqrt(1 - scaledTime * scaledTime) - 1); }\n        return 0.5 * (Math.sqrt(1 - scaledTime1 * scaledTime1) + 1);\n    }\n    // Slow movement backwards then fast snap to finish\n    static easeInBack(t: number, magnitude: number = 1.70158) { return t * t * ((magnitude + 1) * t - magnitude); }\n    // Fast snap to backwards point then slow resolve to finish\n    static easeOutBack(t: number, magnitude: number = 1.70158) {\n        const scaledTime = (t / 1) - 1; return (scaledTime * scaledTime * ((magnitude + 1) * scaledTime + magnitude)) + 1;\n    }\n    // Slow movement backwards, fast snap to past finish, slow resolve to finish\n    static easeInOutBack(t: number, magnitude: number = 1.70158) {\n        const scaledTime = t * 2;\n        const scaledTime2 = scaledTime - 2;\n        const s = magnitude * 1.525;\n        if (scaledTime < 1) { return 0.5 * scaledTime * scaledTime * (((s + 1) * scaledTime) - s); }\n        return 0.5 * (scaledTime2 * scaledTime2 * ((s + 1) * scaledTime2 + s) + 2);\n    }\n    // Bounces slowly then quickly to finish\n    static easeInElastic(t: number, magnitude: number = 0.7) {\n        if (t === 0 || t === 1) { return t; }\n        const scaledTime = t / 1;\n        const scaledTime1 = scaledTime - 1;\n        const p = 1 - magnitude;\n        const s = p / (2 * Math.PI) * Math.asin(1);\n        return -(Math.pow(2, 10 * scaledTime1) * Math.sin((scaledTime1 - s) * (2 * Math.PI) / p));\n    }\n    // Fast acceleration, bounces to zero\n    static easeOutElastic(t: number, magnitude: number = 0.7) {\n        const p = 1 - magnitude;\n        const scaledTime = t * 2;\n        if (t === 0 || t === 1) { return t; }\n        const s = p / (2 * Math.PI) * Math.asin(1);\n        return (Math.pow(2, -10 * scaledTime) * Math.sin((scaledTime - s) * (2 * Math.PI) / p)) + 1;\n    }\n    // Slow start and end, two bounces sandwich a fast motion\n    static easeInOutElastic(t: number, magnitude: number = 0.65) {\n        const p = 1 - magnitude;\n        if (t === 0 || t === 1) { return t; }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        const s = p / (2 * Math.PI) * Math.asin(1);\n        if (scaledTime < 1) {\n            return -0.5 * (Math.pow(2, 10 * scaledTime1) * Math.sin((scaledTime1 - s) * (2 * Math.PI) / p));\n        } else { return (Math.pow(2, -10 * scaledTime1) * Math.sin((scaledTime1 - s) * (2 * Math.PI) / p) * 0.5) + 1; }\n    }\n    // Bounce to completion\n    static easeOutBounce(t: number) {\n        const scaledTime = t / 1;\n        if (scaledTime < (1 / 2.75)) {\n            return 7.5625 * scaledTime * scaledTime;\n        } else if (scaledTime < (2 / 2.75)) {\n            const scaledTime2 = scaledTime - (1.5 / 2.75); return (7.5625 * scaledTime2 * scaledTime2) + 0.75;\n        } else if (scaledTime < (2.5 / 2.75)) {\n            const scaledTime2 = scaledTime - (2.25 / 2.75); return (7.5625 * scaledTime2 * scaledTime2) + 0.9375;\n        } else { const scaledTime2 = scaledTime - (2.625 / 2.75); return (7.5625 * scaledTime2 * scaledTime2) + 0.984375; }\n    }\n    // Bounce increasing in velocity until completion\n    static easeInBounce(t: number) { return 1 - NumericalMotion.easeOutBounce(1 - t); }\n    // Bounce in and bounce out\n    static easeInOutBounce(t: number) { if (t < 0.5) { return NumericalMotion.easeInBounce(t * 2) * 0.5; } return (NumericalMotion.easeOutBounce((t * 2) - 1) * 0.5) + 0.5; }\n    static Easing() {\n        // let r0 =0\n        // let r1 =0\n        // if(this.r <= this.rOrigin){\n        //     r0 = this.rOrigin;\n        //     r1 = this.rTaget;\n        // } else{\n        //     r1 = this.rOrigin;\n        //     r0 = this.rTaget;\n        // }\n        // this.vec * 0.95+(tVec * 0.05);\n        //     if(this.isAniScale){\n        //         r * 0.95+(rt * 0.05);\n        //         if(r >rt) {\n        //             this.isAniScale=!this.isAniScale;\n        //         }\n        //     }\n    }\n    static Update() {\n        NumericalMotion.t += 0.05;\n    }\n\n}","// import { MouseEventData } from '../../../AppCore/MouseInteraction';\nimport { GetUUID } from '../../lib/MathUtility';\nimport { NVector3 } from '../../lib/NVector3';\n\nimport { CBlockBase } from './Base/CBlockBase';\nimport { CBlockPreset } from './CBlockPreset';\nimport { CBlockIO, TYPE } from './Base/CBlockIO';\n// import { DBPanel } from './DBPanel';\n// import { CBlockRenderer } from '../../Core/CBlockRenderer';\n// import { BlockPointRgular } from '../../Block/BlockPointRgular';\n// import { BlockBase } from './Base/BlockBase';\n\nexport class DataParam {\n    cBlockBody: CBlockBody;\n    cBlockIO: CBlockIO[] = [];\n    type: TYPE;\n    constructor(cBlockBody: CBlockBody, type: TYPE) {\n        this.cBlockBody = cBlockBody;\n        this.type = type;\n    }\n    AddNumberParameter(title: string, min: number, max: number, val: number) {\n        this.cBlockIO.push(new CBlockIO(this.cBlockBody, this.type, title, this.cBlockBody.vec.x, this.cBlockBody.vec.y));\n    }\n    AddGeometryParameter() {\n        /* */\n    }\n}\nexport interface CBlockInitInterface {\n    title: string;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\nexport class CBlockBody extends CBlockBase {\n\n    uuid: string;\n    in: CBlockIO[];\n    out: CBlockIO[];\n\n    // panel: DBPanel;\n    heightPanel: number;\n    vecsPanel: NVector3[];\n    // block: BlockBase;\n    inData: DataParam;\n    outData: DataParam;\n    constructor(title: string = 'header', x: number = 100, y: number = 100) {\n        super();\n        this.title = title;\n        this.width = 100;\n        this.height = 50;\n        this.heightPanel = 50;\n        this.uuid = GetUUID();\n        this.vec = new NVector3(x, y, 0);\n        this.in = [];\n        this.out = [];\n        this.inData = new DataParam(this, TYPE.IN);\n        this.outData = new DataParam(this, TYPE.OUT);\n        this.SetInput(this.inData);\n        this.SetOutPut(this.outData);\n    }\n    // Init() {\n    //     // this.panel = new DBPanel(this);\n    //     this.UpdateIOPos();\n    // }\n    // SetWidth(v: number) {\n    //     this.width = v;\n    //     for (let i = 0; i < this.out.length; ++i) {\n    //         this.out[i].vec = new NVector3(this.vec.x + this.width, this.vec.y + (this.height * 0.5));\n    //     }\n    //     this.UpdateIOPos();\n    // }\n    AddInput(name: string) {\n        this.in.push(new CBlockIO(this, TYPE.IN, name, this.vec.x, this.vec.y + (this.height * 0.5)));\n        this.UpdateIOPos();\n    }\n    AddOutput(name: string) {\n        this.out.push(new CBlockIO(this, TYPE.OUT, name, this.vec.x + this.width, this.vec.y + (this.height * 0.5)));\n        this.UpdateIOPos();\n    }\n    UpdateIOPos() {\n        let inLength = this.in.length; let outLength = this.out.length;\n        let theHeight = 0;\n\n        if (inLength < outLength) {\n            theHeight = 20 * outLength + 1;\n        } else { theHeight = 20 * inLength + 1; }\n\n        for (let i = 0; i < this.in.length; ++i) {\n            this.in[i].vec = new NVector3(this.vec.x, this.vec.y + i * 20 + 10);\n            this.in[i].UpdateWirePos();\n        }\n        for (let i = 0; i < this.out.length; ++i) {\n            this.out[i].vec = new NVector3(this.vec.x + this.width, this.vec.y + i * 20 + 10);\n            this.out[i].UpdateWirePos();\n        }\n        this.height = theHeight;\n    }\n    // Remove() {\n    //     for (let i = 0; i < this.in.length; ++i) {\n    //         this.in[i].Remove();\n    //     }\n    //     for (let i = 0; i < this.out.length; ++i) {\n    //         this.out[i].Remove();\n    //     }\n    //     CBlockRenderer.Remove(this);\n    // }\n    // MouseDouble(e: MouseEventData) {\n    //     this.Toggle = !this.Toggle;\n    // }\n    // Solver() {\n    //     /* */\n    // }\n    // Translate(e: MouseEventData): void {\n    //     if (!this.isMoveable) { return; }\n    //     let xo = e.x - e.preX;\n    //     let yo = e.y - e.preY;\n    //     this.vec.x += xo;\n    //     this.vec.y += yo;\n    //     for (let i = 0; i < this.boundarVecs.length; ++i) { this.boundarVecs[i].x += xo; this.boundarVecs[i].y += yo; }\n    //     // this.in.vec = new NVector3(this.vec.x, this.vec.y + (this.height * 0.5));\n    //     // this.out.vec = new NVector3(this.vec.x + this.width, this.vec.y + (this.height * 0.5));\n    //     // this.in.UpdateWirePos();\n    //     // this.out.UpdateWirePos();\n    //     // this.panel.UpdatePos();\n    //     this.UpdateIOPos();\n    // }\n    DeepCopy() {\n        // let db = new DBHeader(this.vec.x + 20, this.vec.y + 20, 0);\n        // db.title = this.title;\n        // db.width = this.width;\n        // db.uuid = MathUtility.GetUUID();\n    }\n    RenderPost(ctx: CanvasRenderingContext2D): void {\n        this.ComputeBoundary();\n        CBlockPreset.RoundedRectFill(ctx, this.style, this.boundarVecs, this.filletR, 0, this.isOver, this.isSelected);\n        CBlockPreset.Title(ctx, this.vec, this.width, this.height, this.title, this.isOver);\n        if (this.isSelected) { CBlockPreset.RoundedRectFill(ctx, this.style, this.GetBoundaryPanelVecs(), this.filletR); }\n    }\n    // ....................................................\n    Icon() {\n        /* */\n    }\n    SetInput(data: DataParam) {\n        data.AddNumberParameter('x', 0, 10, 5);\n    }\n    SetOutPut(data: DataParam) {\n        /* */\n    }\n    Solver() {\n        /* */\n    }\n}","import { MouseEventData, CLICKTYPE } from '../lib/MouseInteraction';\nimport { KeyboardEventData, PRESSTYPE } from '../lib/KeyboardInteraction';\n\nimport { AppDrawingBlock } from '../AppDrawingBlock';\n\n// import { GraphicApp } from '../../index';\n\nimport { CBlockRenderer } from './CBlockRenderer';\n\nimport { BlockArithmetic } from '../CUIBlock/Block/BlockArithmetic';\nimport { BlockPointRgular } from '../CUIBlock/Block/BlockPointRgular';\nimport { BlockCircle } from '../CUIBlock/Block/BlockCircle';\nimport { BlockSliderNumber } from '../CUIBlock/Block/BlockSliderNumber';\nimport { BlockColorPalette } from '../CUIBlock/Block/BlockColorPalette';\nimport { BlockNGon } from '../CUIBlock/Block/BlockNGon';\n\nimport { BlockACircle } from '../CUIBlock/Block/BlockACircle';\n\nimport { BlockColorRemap } from '../CUIBlock/Block/BlockColorRemap';\nimport { BlockTimeSlider } from '../CUIBlock/Block/BlockTimeSlider';\n\nimport { GraphChartFramerate } from '../CChart/GraphChartFramerate';\nimport { CHistogram } from '../CChart/CHistogram';\nimport { CDescribe } from '../CChart/CDescribe';\nimport { CScatter } from '../CChart/CScatter';\nimport { CPieChart } from '../CChart/CPieChart';\nimport { CLineChart } from '../CChart/CLineChart';\nimport { CBarChart } from '../CChart/CBarChart';\nimport { CAreaChart } from '../CChart/CAreaChart';\n\nimport { CBlockBody } from '../CBlock/Core/CBlockBody';\n\nimport { BlockFeatureLayer } from '../CUIBlock/Block/BlockFeatureLayer';\n\nexport class ActiveCommandDrawingBlock {\n    appDrawingBlock: AppDrawingBlock;\n\n    constructor(appDrawingBlock: AppDrawingBlock) {\n        this.appDrawingBlock = appDrawingBlock;\n    }\n    MouseEventControl(e: MouseEventData) {\n        // console.log(e.CLICKTYPE);\n        if (e.CLICKTYPE === CLICKTYPE.LEFT) {\n            this.MouseLeftClickPre(e); return;\n        } else if (e.CLICKTYPE === CLICKTYPE.MIDDLE) {\n            this.MouseMiddleClickPre(e); return;\n        } else if (e.CLICKTYPE === CLICKTYPE.RIGHT) {\n            this.MouseRightClickPre(e); return;\n        } else if (e.CLICKTYPE === CLICKTYPE.DOUBLE) {\n            this.MouseDoubleClickPre(e); return;\n        } else if (e.CLICKTYPE === CLICKTYPE.MOVE) {\n            this.MouseMovePre(e); return;\n        } else if (e.CLICKTYPE === CLICKTYPE.DRAG) {\n            this.MouseDragPre(e); return;\n        } else if (e.CLICKTYPE === CLICKTYPE.DOWN) {\n            this.MouseDownPre(e); return;\n        } else if (e.CLICKTYPE === CLICKTYPE.UP) { this.MouseUpPre(e); return; }\n    }\n    KeyboardEventControl(k: KeyboardEventData) {\n\n        if (k.PRESSTYPE === PRESSTYPE.DOWN) {\n            if (k.keyCode === 8) {\n                CBlockRenderer.RemoveAllCapturedBlock();\n            }\n            this.keydownPre(k);\n        } else if (k.PRESSTYPE === PRESSTYPE.UP) { this.keyUpPre(k); }\n    }\n    // ........................................................................\n    MouseLeftClick(e: MouseEventData) { /* */ }\n    MouseLeftClickPre(e: MouseEventData) {\n        CBlockRenderer.MouseLeft(e);\n        this.MouseLeftClick(e);\n    }\n    MouseMiddleClick(e: MouseEventData) { /* */ }\n    MouseMiddleClickPre(e: MouseEventData) {\n        // CBlockRenderer.MouseMiddle(e);\n        this.MouseMiddleClick(e);\n    }\n    MouseRightClick(e: MouseEventData) { /* */ }\n    MouseRightClickPre(e: MouseEventData) {\n        this.MouseRightClick(e);\n    }\n    MouseDoubleClick(e: MouseEventData) { /* */ }\n    MouseDoubleClickPre(e: MouseEventData) {\n        CBlockRenderer.MouseDouble(e);\n        this.MouseDoubleClick(e);\n    }\n    MouseMove(e: MouseEventData) { /* */ }\n    MouseMovePre(e: MouseEventData) {\n        CBlockRenderer.MouseMove(e);\n        this.MouseMove(e);\n    }\n    MouseDrag(e: MouseEventData) { /* */ }\n    MouseDragPre(e: MouseEventData) {\n        CBlockRenderer.MouseDrag(e);\n        this.MouseDrag(e);\n    }\n    MouseDown(e: MouseEventData) { /* */ }\n    MouseDownPre(e: MouseEventData) {\n        CBlockRenderer.MouseDown(e);\n        this.MouseDown(e);\n    }\n    MouseUp(e: MouseEventData) { /* */ }\n    MouseUpPre(e: MouseEventData) {\n        CBlockRenderer.MouseUp(e);\n        this.MouseUp(e);\n    }\n    // ........................................................................\n    keydown(k: KeyboardEventData) { /* */ }\n    keydownPre(k: KeyboardEventData) {\n        // ............................................... keyboard disable\n        if (!k.hasCtrlKey && !k.hasShiftKey) { return; }\n\n        this.keydown(k);\n    }\n    keyUp(k: KeyboardEventData) { /* */ }\n    keyUpPre(k: KeyboardEventData) {\n        // if (k.keyCode === 66) { this.acs.appDrawing.cBlockController.IsHidden = !this.acs.appDrawing.cBlockController.IsHidden; } // b for block menu\n        // if (k.keyCode === 70) { CBlockRenderer.isHidden = !CBlockRenderer.isHidden; }\n        this.keyUp(k);\n    }\n\n    GetColorRamp() { let d = new BlockColorRemap(100, 100); d.Dummy(); }\n    GetColorPalette() { let d = new BlockColorPalette(100, 100); d.Dummy(); }\n\n    GetTimeslider() { let d = new BlockTimeSlider(100, 100); d.Dummy(); }\n\n    GetFramerate() { let d = new GraphChartFramerate(100, 100); d.Dummy(); }\n\n    // ................................................................. chart\n    GetSeries() { let d = new CBlockBody('Series', 100, 100); d.Dummy(); }\n\n    // ................................................................. chart\n    GetChartSummary() { let d = new CDescribe(100, 100); d.Dummy(); }\n    GetChartHistogram() { let d = new CHistogram(100, 100); d.Dummy(); }\n    GetChartBar() { let d = new CBarChart(100, 100); d.Dummy(); }\n    GetChartArea() { let d = new CAreaChart(100, 100); d.Dummy(); }\n    GetChartLine() { let d = new CLineChart(100, 100); d.Dummy(); }\n    GetChartPie() { let d = new CPieChart(100, 100); d.Dummy(); }\n    GetChartScatter() { let d = new CScatter(100, 100); d.Dummy(); }\n\n    // ................................................................. data processing\n    GetDataFeatureLayer() { let d = new BlockFeatureLayer(); d.Dummy(); }\n    // GetChartHistogram() { let d = new CHistogram(100, 100); d.Dummy(); }\n    // GetChartBar() { let d = new CBarChart(100, 100); d.Dummy(); }\n    // GetChartArea() { let d = new CAreaChart(100, 100); d.Dummy(); }\n    // GetChartLine() { let d = new CLineChart(100, 100); d.Dummy(); }\n    // GetChartPie() { let d = new CPieChart(100, 100); d.Dummy(); }\n    // GetChartScatter() { let d = new CScatter(100, 100); d.Dummy(); }\n\n    // // ................................................................. Math\n    // GetMathPlus() { let d = new BlockArithmetic(GraphicApp.app.width * 0.5, GraphicApp.app.height * 0.5, '+'); d.Dummy(); }\n    // GetMathMinus() { let d = new BlockArithmetic(GraphicApp.app.width * 0.5, GraphicApp.app.height * 0.5, '-'); d.Dummy(); }\n    // GetMathMultply() { let d = new BlockArithmetic(GraphicApp.app.width * 0.5, GraphicApp.app.height * 0.5, 'X'); d.Dummy(); }\n    // GetMathDivision() { let d = new BlockArithmetic(GraphicApp.app.width * 0.5, GraphicApp.app.height * 0.5, '/'); d.Dummy(); }\n\n    // // ................................................................. Drawing \n    // GetGeometryACircle() { let d = new BlockACircle(GraphicApp.app.width * 0.5, GraphicApp.app.height * 0.5); d.Dummy(); }\n\n    // // ................................................................. Drawing\n    // GetGeometryRPoint() { let d = new BlockPointRgular(GraphicApp.app.width * 0.5, GraphicApp.app.height * 0.5); d.Dummy(); }\n    // GetGeometryCircle() { let d = new BlockCircle(GraphicApp.app.width * 0.5, GraphicApp.app.height * 0.5); d.Dummy(); }\n    // GetGeometryNGon() { let d = new BlockNGon(GraphicApp.app.width * 0.5, GraphicApp.app.height * 0.5); d.Dummy(); }\n\n    // // ................................................................. params\n    // GetParamsSlider() { let d = new BlockSliderNumber(GraphicApp.app.width * 0.5, GraphicApp.app.height * 0.5); d.Dummy(); }\n\n}","\nimport { NVector3 } from '../lib/NVector3';\n\nimport { Solution } from '../AppDrawingBlock';\nimport { CBlockRenderer } from './CBlockRenderer';\n// import { CVisualizationCommon } from '../CVisualization/CVisCommon';\n\n// import { COLORBLENDING } from '../../AppCore/Color/ColorUtility';\n// // import { CPoint } from './CGeometry/CPoint';\n\nexport class CBCanvas {\n    appDrawingBlock: Solution;\n    t: number;\n    canvasDynamic: HTMLCanvasElement;\n    canvasStatic: HTMLCanvasElement;\n    hostDiv: HTMLElement;\n    id: string;\n    ctxDynamic: CanvasRenderingContext2D;\n    ctxStatic: CanvasRenderingContext2D;\n    xOff: number;\n    yOff: number;\n    xOffCurrent: number;\n    yOffCurrent: number;\n    xOffPre: number;\n    yOffPre: number;\n    anchor: NVector3;\n    zoomFactor: number;\n    zoomFactorPre: number;\n    zoomFactorCurrent: number;\n    // theContext: CanvasRenderingContext2D;\n    // cGeometryRender: CGeometryRender;\n    div3d: HTMLDivElement;\n    smoothingEnabled: boolean = true;\n\n    cBlockRenderer: CBlockRenderer;\n\n    constructor(appDrawingBlock: Solution) {\n        this.appDrawingBlock = appDrawingBlock;\n        this.t = 0.0;\n        this.xOff = 0;\n        this.yOff = 0;\n        this.xOffCurrent = 0;\n        this.yOffCurrent = 0;\n        this.xOffPre = 0;\n        this.yOffPre = 0;\n        this.anchor = new NVector3(0, 0, 0);\n        this.Init(this.appDrawingBlock.divHost);\n    }\n    Init(hostDiv: HTMLElement) { //  esri-view-surface\n        this.hostDiv = hostDiv;\n        this.canvasDynamic = document.createElement('canvas');\n        this.canvasDynamic.id = 'CanvasBlock';\n        this.canvasDynamic.style.zIndex = '7';\n        this.canvasDynamic.style.position = 'absolute';\n        this.canvasDynamic.className = 'esri-display-object';\n        // this.canvasDynamic.style[`mixBlendMode`] = COLORBLENDING.HARD_LIGHT;\n        this.ctxDynamic = this.canvasDynamic.getContext('2d') as CanvasRenderingContext2D;\n        this.hostDiv.appendChild(this.canvasDynamic);\n        // this.canvasDynamic.width = this.appDrawingBlock.graphicApp.width;\n        // this.canvasDynamic.height = this.appDrawingBlock.graphicApp.height;\n\n        this.InitPost();\n    }\n    InitWithCustomContext(ctx: CanvasRenderingContext2D) { //  esri-view-surface\n        // this.canvas = document.createElement('canvas');\n        // this.context = ctx\n        // this.context.globalCompositeOperation = 'source-over';\n        this.InitPost();\n    }\n    InitPost() {\n        window.onresize = event => {\n            // this.canvasDynamic.width = this.appDrawingBlock.graphicApp.width;\n            // this.canvasDynamic.height = this.appDrawingBlock.graphicApp.height;\n\n            // this.canvasStatic.width = this.hostDiv.clientWidth;\n            // this.canvasStatic.height = this.hostDiv.clientHeight;\n        };\n\n        this.cBlockRenderer = new CBlockRenderer(this);\n        // this.cVisualization = new CVisualization(this);\n        this.Start(this.ctxDynamic);\n        this.Draw(this);\n        // setInterval(function () { self.Draw(self); }, this.frameRate);\n        // setInterval(() => { this.Draw(this); }, this.frameRate);\n    }\n    Draw(self: CBCanvas) {\n        // console.log('rendering...'); console.log('done');\n        // this.ctxDynamic.clearRect(0, 0, this.appDrawingBlock.graphicApp.width, this.appDrawingBlock.graphicApp.height);\n        this.Update(this.ctxDynamic);\n        this.cBlockRenderer.Render(this.ctxDynamic);\n        requestAnimationFrame(() => { this.Draw(this); });\n    }\n    Start(ctx: CanvasRenderingContext2D) {\n        // console.log('canvas start')\n        /* */\n    }\n    Update(ctx: CanvasRenderingContext2D) {\n        // /* sample!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n          ctx.globalAlpha=0.8;\n          ctx.fillStyle='red';\n        //   ctx.fillRect(20+self.t,20,75,50);\n          // Turn transparency on\n        //   ctx.opacity =0.2;\n          ctx.fillStyle='blue';\n          ctx.fillRect(500+this.t,500+this.t,750,500);\n          ctx.fillStyle='green';\n          ctx.fillRect(80,80,75+this.t,50);\n        //   for(let i = 0; i < CPoint.list.length; ++i){\n        //       CPoint.list[i].Render(ctx);\n        //   }\n        //   CDrawing.PointGrid(this);\n          //CDrawing.PanBG(self);\n          this.t+=0.001;\n        //   */\n    }\n    //   OnMouseDown(e) {}\n    //   OnMouseUp(e) {}\n    //   OnMouseMove(e) {}\n    // ................................................ static\n    Destroy() {\n        console.log('destroy')\n        CBlockRenderer.list = [];\n        if (this.canvasDynamic.parentNode) { this.canvasDynamic.parentNode.removeChild(this.canvasDynamic); }\n    }\n}","// import { GraphicApp } from '../index';\nimport { ACControllerInterface } from './lib/ACController';\nimport { MouseInteraction, MouseEventData } from './EventInteraction/MouseInteraction';\nimport { KeyboardInteraction, KeyboardEventData } from './EventInteraction/KeyboardInteraction';\n\nimport { ActiveCommandDrawingBlock } from './Core/ActiveCommandDrawingBlock';\n\nimport { CBCanvas } from './Core/CBCanvas';\n\nimport { CBlockRenderer } from './Core/CBlockRenderer';\n\nexport interface AppDrawingBlockInterface {\n    // static app: AppDrawing;\n    // graphicApp: GraphicApp;\n    mouseInteraction: MouseInteraction;\n    keyboardInteraction: KeyboardInteraction;\n    activeCommandDrawingBlock: ActiveCommandDrawingBlock;\n\n    MouseInteraction(m: MouseEventData): void;\n    KeyboardInteraction(k: KeyboardEventData): void;\n    Destroy(): void;\n}\n\nexport class Solution implements ACControllerInterface, AppDrawingBlockInterface {\n    static app: Solution;\n\n    divHost: HTMLDivElement;\n    // graphicApp: GraphicApp;\n    mouseInteraction: MouseInteraction;\n    keyboardInteraction: KeyboardInteraction;\n    activeCommandDrawingBlock: ActiveCommandDrawingBlock;\n\n    canvasDB: CBCanvas;\n    cBlockRenderer: CBlockRenderer;\n    // .................................................. this is the app instance\n    static Init(id: string) {\n        Solution.app = new Solution(id);\n    }\n    // .................................................. end the app instance\n\n    constructor(id: string) {\n        const div = document.getElementById(id);\n        this.divHost = div as HTMLDivElement;\n        // this.graphicApp = graphicApp;\n        // this.graphicApp.appDrawingBlock = this;\n        this.canvasDB = new CBCanvas(this);\n        this.activeCommandDrawingBlock = new ActiveCommandDrawingBlock(this);\n        // this.graphicApp.ACController.AddController(this);\n        // console.log('done');\n\n    }\n    Render(ctx: CanvasRenderingContext2D) {\n        this.cBlockRenderer.Render(ctx);\n    }\n    MouseInteraction(m: MouseEventData): void {\n        this.activeCommandDrawingBlock.MouseEventControl(m);\n    }\n    KeyboardInteraction(k: KeyboardEventData): void {\n        this.activeCommandDrawingBlock.KeyboardEventControl(k);\n    }\n    Destroy() {\n        // this.graphicApp.ACController.RemoveController(this);\n        \n    }\n    public destroy() {\n        // window.removeEventListener('resize', this.resize);\n        this.canvasDB.Destroy();\n        try {\n            while (this.divHost !== undefined && this.divHost.lastElementChild !== undefined) {\n                this.divHost.removeChild(this.divHost.lastElementChild);\n            }\n        } catch (error) { }\n    }\n}"],"names":["CLICKTYPE","PRESSTYPE","EVENT_LISTENER_TYPE","BLOCK_TYPE","MouseEventData","constructor","x","y","z","preX","preY","preZ","yGLPicking","MOVE","isDown","isDoubleClick","isMove","pressedShift","pressedAlt","pressedCtrl","lat","long","wheel","preWheel","premEvent","native","MouseInteraction","static","mouseEventData","isEnable","click","prevent","delay","timer","down","e","mouseEventDataPre","InitNativeMouseWheelEvent","div","InitNativeMouseEvent","undefined","document","onclick","this","setTimeout","MouseClick","ondblclick","clearTimeout","MouseDoubleClick","onmousedown","MouseDown","onmouseup","MouseUp","onmousemove","MouseMove","mEvent","CommonEventBuilder","DOWN","MouseEvent","button","LEFT","MIDDLE","RIGHT","DOUBLE","MouseDrag","DRAG","buttons","DRAG_MIDDLE","DRAG_RIGHT","UP","MouseWheel","v","WHEEL","AppendDownEvent","AppendUpEvent","shiftKey","altKey","ctrlKey","offsetX","offsetY","MouseEventListener","mouseDown","mouseClick","mouseDoubleClick","mouseDrag","mouseMove","mouseUp","KeyboardEventData","preEvent","key","hasAltKey","hasCtrlKey","hasShiftKey","hasMetaCommand","code","keyCode","KeyboardInteraction","keyboardEventData","isUp","Init","MouseEventDataPre","onkeydown","k","KeyDown","onkeypress","KeyPress","onkeyup","KeyUp","kEventData","KeyEvent","KeyUpJSAPI4X","kEvent","metaKey","type","NVector3","ele","proX","proY","proZ","a","b","s","out","v0","v1","DeepCopy","v2","Math","sqrt","len","vs","area","i","length","abs","n","xOff","yOff","zOff","j","push","gV0","gV1","dLat","PI","dLon","sin","cos","atan2","addition","dis","KMeterFromGPSPos","lng","Get1KM_Long_ByGeoUnit","la","Get1KM_lat_ByGeoUnit","pt","attractor","strength","falloff","dist","Sub","Length","exp","Unitize","Mult","Explosion","rotor","Origin","DotProduct","Normalize","acos","GetCosAngleByTwoVectors","GetAngleByTwoVectorsRadian","origin","GetAngleByTwoVectors","m","boundary","GetBoundingVecs","vec","GetCloseVec","Distance","p0","p1","vecsBound","OnLine","pp1","cp","Add","IsInsideOfVecs","listOfVec","nv0","nv1","width","height","boundarVecsSub","xMin","Number","MAX_SAFE_INTEGER","yMin","zMin","xMax","MIN_SAFE_INTEGER","yMax","zMax","minX","MAX_VALUE","minY","minZ","maxX","MIN_VALUE","maxY","maxZ","tor","vecs","d","inside","xi","yi","xj","yj","ConvexHull","sort","lower","Cross","pop","upper","O","A","B","ax","ay","az","bx","by","bz","p2","p3","denominator","numerator1","numerator2","onLine0","onLine1","result","p","u","res","tmp","newres","dir","temp","MoveVec","angle","cptToLocal","GetCenterVecFromVecs","cptToWorld","MoveVecs","RotateVecs","RotateVec","nv","c","newVes","CheckLineIntersection","eps","v3","isNaN","between","w","alt","isModified","Set","Scale","Div","Negate","Equals","Clone","Distance2","CrossProduct","SquareLength","FadeExp","attr","dVal","GetAngle","GetAngleDegree","ToJSON","ToString","toFixed","toString","ToFloat32Array","Float32Array","CBlockRenderer","g","list","splice","indexOf","capture","CONTROL_PANEL","Remove","RemovePanel","IsMouseInside","IsHover","isHidden","ui","FindAtPoint","MouseLeft","MouseRight","MouseDouble","CheckOvered","cBCanvas","Render","ctx","GetUUID","Date","getTime","replace","r","random","floor","COLORBLENDING","TYPE","CBlockBase","id","value","boundarVecs","divID","isSelected","isOver","toggle","isMoveable","style","filletR","title","colorBase","colorOver","colorText","isRender","transparent","heightPanel","vecsPanel","Dummy","Toggle","console","log","IsHidden","IsSelected","GetBoundaryVecs","theHeight","theWidth","ComputeBoundary","GetBoundaryPanelVecs","Translate","xo","yo","Move","HideToogle","Hide","RenderPost","ColorUtility","num","modeListGL","h","visibility","toHex","decimalValue","places","hex","next","hexidecimal","hi","f","q","t","round","RGBToHex","color","map","join","thecol","isGray","parseInt","substring","substr","toUpperCase","visiblity","col","split","max","min","l","hue2rgb","pp","qq","colA","colB","factor","cA","cB","steps","step","interpolatedColors","InterpolateColor","rgb0","rgb1","RBGToArray","rgb","match","vA","vB","blend","val","modeList","ColorPreset","shadow","CBlockPreset","isSel","radius","save","beginPath","moveTo","lineTo","arcTo","closePath","fillStyle","styleFill","stylefillSelected","strokeStyle","styleStroke","lineWidth","stroke","shadowBlur","shadowColor","shadowOffsetY","shadowOffsetX","fill","restore","textBaseline","textAlign","font","fillText","NumericalMotion","pow","t1","scaledTime","scaledTime1","magnitude","scaledTime2","asin","easeOutBounce","easeInBounce","CBlockIO","host","name","super","typeIO","isConnected","in","hasError","io","RemoveLink","UpdatePosByHost","UpdateWirePos","ic","SetLink","OUT","UpdateToOtherLinks","UpdateByinOut","IN","RenderWire","arc","setLineDash","bezierCurveTo","DataParam","cBlockBody","cBlockIO","AddNumberParameter","AddGeometryParameter","CBlockBody","uuid","inData","outData","SetInput","SetOutPut","AddInput","UpdateIOPos","AddOutput","inLength","outLength","RoundedRectFill","Title","Icon","data","Solver","ActiveCommandDrawingBlock","appDrawingBlock","MouseEventControl","MouseUpPre","MouseDownPre","MouseDragPre","MouseMovePre","MouseDoubleClickPre","MouseRightClickPre","MouseMiddleClickPre","MouseLeftClickPre","KeyboardEventControl","keydownPre","keyUpPre","MouseLeftClick","MouseMiddleClick","MouseRightClick","keydown","keyUp","GetColorRamp","BlockColorRemap","GetColorPalette","BlockColorPalette","GetTimeslider","BlockTimeSlider","GetFramerate","GraphChartFramerate","GetSeries","GetChartSummary","CDescribe","GetChartHistogram","CHistogram","GetChartBar","CBarChart","GetChartArea","CAreaChart","GetChartLine","CLineChart","GetChartPie","CPieChart","GetChartScatter","CScatter","GetDataFeatureLayer","BlockFeatureLayer","CBCanvas","canvasDynamic","canvasStatic","hostDiv","ctxDynamic","ctxStatic","xOffCurrent","yOffCurrent","xOffPre","yOffPre","anchor","zoomFactor","zoomFactorPre","zoomFactorCurrent","div3d","smoothingEnabled","cBlockRenderer","divHost","createElement","zIndex","position","className","getContext","appendChild","InitPost","InitWithCustomContext","window","onresize","event","Start","Draw","self","Update","requestAnimationFrame","globalAlpha","fillRect","Destroy","parentNode","removeChild","Solution","app","mouseInteraction","keyboardInteraction","activeCommandDrawingBlock","canvasDB","getElementById","destroy","lastElementChild","error"],"sourceRoot":""}
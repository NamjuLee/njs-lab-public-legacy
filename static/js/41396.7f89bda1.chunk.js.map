{"version":3,"file":"static/js/41396.7f89bda1.chunk.js","mappings":"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","sources":["njslab/Workshop/workshop-graph/05_Graph-edge-connection/index.ts"],"sourcesContent":["import { RendererCanvas } from '../../../../lib';\r\n\r\nexport class Solution extends RendererCanvas {\r\n\r\n    graph: Graph;\r\n    m = new Vector3(0,0,0)\r\n\r\n    needPopulate = false\r\n    constructor(id: string) {\r\n        super(document.getElementById(id) as HTMLDivElement);\r\n        this.canvas.style.position = 'absolute'\r\n\r\n        const divBtn = document.createElement('button');\r\n        divBtn.textContent = 'run'\r\n        divBtn.style.position = 'absolute'\r\n        divBtn.onclick = () => {\r\n            this.needPopulate = !this.needPopulate;\r\n        }\r\n        this.divHost.appendChild(divBtn);\r\n\r\n        const divText = document.createElement('div');\r\n        divText.style.top = '25px';\r\n        divText.style.position = 'absolute'\r\n        divText.innerHTML = '1 Graph Object <br> 2 Graph with edge by closest nodes';\r\n        this.divHost.appendChild(divText);\r\n\r\n        this.init();\r\n    }\r\n    public init() {\r\n        // TODO\r\n        this.graph = new Graph();\r\n        this.mouseClick(100, 100);\r\n        \r\n        this.start()\r\n    }\r\n    public populate() {\r\n        const x = Math.random() * this.canvas.width\r\n        const y = Math.random() * this.canvas.height\r\n        this.mouseClick(x, y);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n        if(this.needPopulate) {\r\n            this.populate()\r\n        }\r\n        \r\n        this.graph.render(ctx);\r\n\r\n        ctx.beginPath();\r\n        ctx.arc(this.m.x, this.m.y, 2, 0, 3.14 * 2)\r\n        ctx.closePath();\r\n        ctx.fillStyle = '#888';\r\n        ctx.fill();\r\n    }\r\n    public mouseClick(x: number, y: number): void {\r\n        this.graph.addNode(x, y, 0);\r\n    }\r\n    public mouseMove(x: number, y: number): void {\r\n        this.m.x = x;\r\n        this.m.y = y;\r\n    }\r\n}\r\n\r\n\r\nclass Graph {\r\n\r\n    nodes = []\r\n    constructor() {\r\n\r\n    }\r\n    public addNode(x: number, y: number, z: number) {\r\n        const node = new Node(x, y, 0);\r\n        this.nodes.push(node);\r\n\r\n        this.computeEdge(node);\r\n    }\r\n    public computeEdge(node: Node) {\r\n        let dis = Number.MAX_VALUE;\r\n        let n0 = node;\r\n        let n1 = undefined;\r\n\r\n        for(let i = 0 ; i < this.nodes.length; ++i) {\r\n            let node = this.nodes[i];\r\n            if (n0 !== node ) {\r\n                let theDis = distance(n0.vec, node.vec);\r\n                if (dis > theDis) {\r\n                    dis = theDis;\r\n                    n1 = node;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (n0 && n1) {\r\n            n0.addEdge(n1);\r\n        }\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n        this.nodes.forEach((n: Node) => {n.render(ctx);})\r\n    }\r\n}\r\n\r\n\r\n\r\nclass Node {\r\n    public vec: Vector3;\r\n    public r: number = 5;\r\n    public nNode: Node[] = []\r\n    constructor(x: number, y: number, z:number = 0) {\r\n        this.vec = new Vector3(x, y, z)\r\n    }\r\n    public addEdge(n: Node) {\r\n        const node = this.findNeighborNode(n)\r\n        if (node === undefined) {\r\n            this.nNode.push(n)\r\n        }\r\n    }\r\n    public findNeighborNode(n: Node): undefined | Node  {\r\n        this.nNode.forEach( (n0: Node) => {\r\n            if (n0 === n) {\r\n                return n\r\n            }\r\n        })\r\n        return undefined;\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n                \r\n        this.nNode.forEach( (n: Node) => {\r\n            ctx.beginPath();\r\n            ctx.moveTo(this.vec.x, this.vec.y)\r\n            ctx.lineTo(n.vec.x, n.vec.y)\r\n            ctx.strokeStyle = '#0f0';\r\n            ctx.stroke();\r\n        })\r\n\r\n        ctx.beginPath();\r\n        ctx.arc(this.vec.x, this.vec.y, this.r, 0, 3.14 * 2)\r\n        ctx.closePath();\r\n        ctx.fillStyle = '#ff0000';\r\n        ctx.fill();\r\n    }\r\n}\r\n\r\nclass Vector3 {\r\n    public x: number;\r\n    public y: number;\r\n    public z: number;\r\n    constructor(x: number, y: number, z:number = 0){\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z\r\n    }\r\n}\r\n\r\nconst distance = (v0: Vector3, v1: Vector3) => {\r\n    return Math.sqrt(distance2(v0, v1));\r\n}\r\nconst distance2 = (v0: Vector3, v1: Vector3) => {\r\n    return (v0.x - v1.x) * (v0.x - v1.x) + (v0.y - v1.y) * (v0.y - v1.y) + (v0.z - v1.z) * (v0.z - v1.z);\r\n}\r\n"],"names":["Solution","RendererCanvas","constructor","id","super","document","getElementById","graph","m","Vector3","needPopulate","this","canvas","style","position","divBtn","createElement","textContent","onclick","divHost","appendChild","divText","top","innerHTML","init","Graph","mouseClick","start","populate","x","Math","random","width","y","height","render","ctx","beginPath","arc","closePath","fillStyle","fill","addNode","mouseMove","nodes","z","node","Node","push","computeEdge","n1","dis","Number","MAX_VALUE","n0","i","length","theDis","distance","vec","addEdge","forEach","n","r","nNode","undefined","findNeighborNode","moveTo","lineTo","strokeStyle","stroke","v0","v1","sqrt","distance2"],"sourceRoot":""}
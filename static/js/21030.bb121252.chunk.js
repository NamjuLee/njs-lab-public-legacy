"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[21030],{21030:(s,e,t)=>{t.r(e),t.d(e,{ExpressImageViewer:()=>a});var i=t(51703);class h{constructor(s,e){this.app=void 0,this.div=void 0,this.ctx=void 0,this.canvas=void 0,this._numMaxFrame=120,this._mode=i.An.ObserveViewer,this._numFrame=0,this.app=s,this.div=e,this.canvas=document.createElement("canvas"),this.div.appendChild(this.canvas),this.updateCanvasSize(this.div.clientWidth,this.div.clientHeight),this.canvas.style.position="absolute",this.ctx=this.canvas.getContext("2d"),this.app.debugMode&&(this.canvas.style.background="rgba(255, 0, 0, 0.3)"),this.init()}get mode(){return this._mode}set mode(s){this._mode=s,this._numFrame=0,this._mode===i.An.InteractiveViewer?(this.canvas.onmouseenter=s=>{this._numFrame=0,this.loop()},this.canvas.onmousemove=s=>{this._numFrame>this._numMaxFrame&&(this._numFrame=0,this.loop())},this.loop()):(this.canvas.onmouseenter=s=>{},this.canvas.onmousemove=s=>{})}updateCanvasSize(s,e){this.canvas.width=s,this.canvas.height=e}init(){this.loop()}loop(){this._numFrame++<=this._numMaxFrame&&this._mode===i.An.InteractiveViewer&&requestAnimationFrame((()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.loop()})),this.render()}render(){this.app.scene.render(this.ctx)}destroy(){this.div.removeChild(this.canvas)}}class o{constructor(s){this.app=void 0,this.projection=void 0,this.scale=1,this.index=0,this.svgRPoint=void 0,this.svgNPoint=void 0,this.scaleByRatio=1,this.app=s,this.projection=new n,this.svgRPoint=new Path2D("M9 0a9.022 9.022 0 00-9 9.041c0 4.992 5 11.761 9 19.421 4-7.659 9-14.428 9-19.42A9.022 9.022 0 009 .001V0zm0 12.652a3.85 3.85 0 113.833-3.85A3.841 3.841 0 019 12.652z"),this.svgNPoint=new Path2D("M26 2a2 2 0 00-2-2H2a2 2 0 00-2 2v17a2 2 0 002 2h6.757l4.276 6.33L17.31 21H24a2 2 0 002-2V2z")}render(s){this.projection.widthDisplay=s.canvas.width,this.projection.heightDisplay=s.canvas.height;let e,t=0,h=[];const o=[0,0];if(this.app.data)for(this.index=this.app.data.length;this.index--;){const n=this.app.data[this.index],a=n.styles.width*this.scaleByRatio*n.styles.scale;switch(n.type){case i.zq.POINT_REGULAR:case i.zq.POINT_NUMBERED:e=n.nodes[0].sx,t=n.nodes[0].sy,[e,t]=this.projection.toScreen(e,t),(0,i.ld)(s,n.nodes,this.svgNPoint,n.styles.colorRgba,[0,0],this.scaleByRatio*n.styles.scale);break;case i.zq.POLYLINE_BENDING:h=[];for(let s=0;s<n.nodes.length;++s)[e,t]=this.projection.toScreen(n.nodes[s].sx,n.nodes[s].sy),h.push({sx:e,sy:t});(0,i.JV)(s,h,n.styles.colorRgba,o,a);break;case i.zq.POLYGON_GRAPH:h=[];for(let s=0;s<n.nodes.length;++s)[e,t]=this.projection.toScreen(n.nodes[s].sx,n.nodes[s].sy),h.push({sx:e,sy:t});(0,i.xG)(s,h,n.styles.colorRgba,o,a);break;case i.zq.RECTANGLE:h=[];for(let s=0;s<n.nodes.length;++s)[e,t]=this.projection.toScreen(n.nodes[s].sx,n.nodes[s].sy),h.push({sx:e,sy:t});(0,i.xG)(s,h,n.styles.colorRgba,o,a);break;case i.zq.CIRCLE:h=[];for(let s=0;s<n.nodes.length;++s)[e,t]=this.projection.toScreen(n.nodes[s].sx,n.nodes[s].sy),h.push({sx:e,sy:t});(0,i.wq)(s,h,n.styles.colorRgba,o,a);break;case i.zq.ARROW_SINGLE:h=[];for(let s=0;s<n.nodes.length;++s)[e,t]=this.projection.toScreen(n.nodes[s].sx,n.nodes[s].sy),h.push({sx:e,sy:t});(0,i.nq)(s,h,n.styles.colorRgba,o,a);break;case i.zq.ARROW_DOUBLE:h=[];for(let s=0;s<n.nodes.length;++s)[e,t]=this.projection.toScreen(n.nodes[s].sx,n.nodes[s].sy),h.push({sx:e,sy:t});(0,i.aK)(s,h,n.styles.colorRgba,o,a)}}}}class n{constructor(){this.xCropped=0,this.yCropped=0,this.widthCropped=0,this.heightCropped=0,this.widthDisplay=0,this.heightDisplay=0,this.remap=(s,e,t)=>s*t/e}toScreen(s,e){let t=s-this.xCropped,i=e-this.yCropped;return t=this.remap(t,this.widthCropped,this.widthDisplay),i=this.remap(i,this.heightCropped,this.heightDisplay),[t,i]}}class a{constructor(s,e,t){this.data=[],this.div=void 0,this.renderer=void 0,this.scene=void 0,this.width=0,this.height=0,this.debugMode=!1,this.div=s,this.width=e,this.height=t,this.scene=new o(this),this.renderer=new h(this,s)}getCanvas(){return this.renderer.canvas}updateMode(s){this.renderer.mode=s}render(){this.renderer.render()}updateCanvasSize(s,e){this.renderer.updateCanvasSize(s,e),this.render()}updateScale(s){this.scene.scale=s}updateExtent(s,e,t){this.scene.projection.xCropped=s.x,this.scene.projection.yCropped=s.y,this.scene.projection.widthCropped=s.width,this.scene.projection.heightCropped=s.height,this.scene.projection.widthDisplay=e,this.scene.projection.heightDisplay=t}updateGeometry(s){s&&(this.data=s,this.render())}destroy(){this.renderer.destroy()}}},51703:(s,e,t)=>{t.d(e,{An:()=>o.An,Bm:()=>i.Bm,JV:()=>i.JV,Kz:()=>i.Kz,_y:()=>i._y,aK:()=>i.aK,ld:()=>i.ld,nq:()=>i.nq,wq:()=>i.wq,xG:()=>i.xG,zq:()=>h.zq});var i=t(11548),h=(t(49384),t(6986)),o=(t(64768),t(22970));t(17874)}}]);
//# sourceMappingURL=21030.bb121252.chunk.js.map
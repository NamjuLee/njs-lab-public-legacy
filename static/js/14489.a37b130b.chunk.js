"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[14489,58602,21543,48575,80222],{21543:(t,i,s)=>{s.r(i),s.d(i,{Canvas:()=>e});class e{constructor(t){this.app=void 0,this.gl=void 0,this.canvas=void 0,this.app=t,this.canvas=document.createElement("canvas"),this.app.host&&(this.app.host.appendChild(this.canvas),this.canvas.width=this.app.host.clientWidth,this.canvas.height=this.app.host.clientHeight);const i=this.canvas.getContext("webgl2");null!==i&&(this.gl=i,this.gl.cullFace(i.BACK),this.gl.frontFace(i.CCW),this.gl.enable(i.DEPTH_TEST),this.gl.enable(i.CULL_FACE),this.gl.depthFunc(i.LEQUAL),this.gl.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA)),this.loop()}loop(){this.clear(this.gl),requestAnimationFrame((()=>{this.loop()})),this.app.renderer.render()}clear(t){t.cullFace(t.BACK),t.frontFace(t.CCW),t.enable(t.DEPTH_TEST),t.enable(t.CULL_FACE),t.depthFunc(t.LEQUAL),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.clearColor(1,1,1,1)}}},48575:(t,i,s)=>{s.r(i),s.d(i,{Renderer:()=>e});class e{constructor(t){this.app=void 0,this.app=t}render(){this.app.camera&&this.app.camera.updateViewMatrix(),this.app.scene.geometries.forEach((t=>{t.render()}))}}},80222:(t,i,s)=>{s.r(i),s.d(i,{Scene:()=>e});class e{constructor(t){this.NGL3dApp=void 0,this.geometries=[],this.NGL3dApp=t}add(t){this.geometries.push(t)}}},31683:(t,i,s)=>{s.r(i),s.d(i,{Texture:()=>r,uvGrid:()=>a});var e=s(49359);const a=s(58602);class r{constructor(t){this.app=void 0,this.uvGridWebGLTexture=void 0,this.app=t}async UploadTexture(t){return this.LoadTexture(t).then((t=>{const i=e.ShaderUtility.LoadTexture(this.app.canvas.gl,t,!1);i&&(this.uvGridWebGLTexture=i)}))}async LoadTexture(t){return new Promise(((i,s)=>{let e=new Image;e.onload=()=>i(e),e.onerror=s,e.src=t}))}}},49394:(t,i,s)=>{s.r(i),s.d(i,{GridAxis:()=>h});var e=s(44518),a=s(87634),r=s(49359),o=s(51914);class n extends r.Shader{constructor(t,i,s,e,a){if(super(t,i,s),this.uPointSize=void 0,this.uAngle=void 0,this.program){this.setPerspective(a),t.useProgram(this.program);let i=t.getUniformLocation(this.program,"uColor");t.uniform3fv(i,e)}}renderModel(t){return this.setModelMatrix(t.transform.getViewMatrix()),this.gl.bindVertexArray(t.vao.vao),t.vao.indexCount?this.gl.drawElements(t.vao.drawMode,t.vao.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(t.vao.drawMode,0,t.vao.vertexCount),this.gl.bindVertexArray(null),this}}class h extends o.MeshBase{constructor(t){super(t.scene),this.v="#version 300 es\n    in vec3 a_position;\t//Standard position data.\n    layout(location=4) in float a_color;\t//Will hold the 4th custom position of the custom position buffer.\n\n    uniform mat4 uPMatrix;\n    uniform mat4 uMVMatrix;\n    uniform mat4 uCameraMatrix;\n\n    uniform vec3 uColor[4];\t//Color Array\n\n    out lowp vec4 color;\t//Color to send to fragment shader.\n\n    void main(void) {\n        color = vec4(uColor[ int(a_color) ],1.0); //Using the 4th float as a color index.\n        gl_Position = uPMatrix * uCameraMatrix * uMVMatrix * vec4(a_position, 1.0);\n    }\n    ",this.f="#version 300 es\n    precision mediump float;\n\n    in vec4 color;\n    out vec4 finalColor;\n\n    void main(void) { finalColor = color; }\n    ",this.app=void 0,this.gl=void 0,this.vao=void 0,this.model=void 0,this.shader=void 0,this.ro=0,this.t=0,this.app=t,this.gl=t.canvas.gl,this.initShader(this.gl)}GetVAO(){let t,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=[],a=.9;for(let e=0;e<=10;e++)t=.18*e-.9,s.push(t),s.push(0),s.push(a),s.push(0),s.push(t),s.push(0),s.push(-.9),s.push(0),t=a-.18*e,s.push(-.9),s.push(0),s.push(t),s.push(0),s.push(a),s.push(0),s.push(t),s.push(0);i&&(s.push(-1.1),s.push(0),s.push(0),s.push(1),s.push(1.1),s.push(0),s.push(0),s.push(1),s.push(0),s.push(-1.1),s.push(0),s.push(2),s.push(0),s.push(1.1),s.push(0),s.push(2),s.push(0),s.push(0),s.push(-1.1),s.push(3),s.push(0),s.push(0),s.push(1.1),s.push(3)),this.vao=new e.VAO(this.gl,"grid",s),this.vao.drawMode=this.gl.LINES,this.vao.vao=this.gl.createVertexArray(),this.vao.vertexComponentLen=4,this.vao.vertexCount=s.length/this.vao.vertexComponentLen;let o=Float32Array.BYTES_PER_ELEMENT*this.vao.vertexComponentLen;return this.vao.bufVertices=this.gl.createBuffer(),this.gl.bindVertexArray(this.vao.vao),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vao.bufVertices),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(s),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(r.ATTR.ATTR_POSITION_LOC),this.gl.enableVertexAttribArray(r.ATTR.ATTR_COLOR_LOC),this.gl.vertexAttribPointer(r.ATTR.ATTR_POSITION_LOC,3,this.gl.FLOAT,!1,o,0),this.gl.vertexAttribPointer(r.ATTR.ATTR_COLOR_LOC,1,this.gl.FLOAT,!1,o,3*Float32Array.BYTES_PER_ELEMENT),this.gl.bindVertexArray(null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.vao}initShader(t){this.shader=new n(t,this.v,this.f,[.8,.8,.8,1,0,0,0,1,0,0,0,1],this.app.camera.projectionMatrix),this.vao=this.GetVAO(),this.model=new a.Model(this.vao)}render(){this.shader.activate().setCameraMatrix(this.app.camera.viewMatrix).renderModel(this.model.preRender()),this.t=.01}}},25990:(t,i,s)=>{s.r(i),s.d(i,{MulitQuad:()=>v});var e=s(36328),a=s(44518),r=s(87634),o=s(20542),n=s(49359),h=s(51914);class d extends n.Shader{constructor(t,i,s,e){super(t,i,s),this.uPointSize=void 0,this.uAngle=void 0,this.pMatrix=void 0,this.pMatrix=e,this.program&&(this.setPerspective(e),this.uPointSize=t.getUniformLocation(this.program,"uPointSize"),this.uAngle=t.getUniformLocation(this.program,"uAngle"),t.useProgram(null))}set(t,i){return this.gl.uniform1f(this.uAngle,i),this.gl.uniform1f(this.uPointSize,t),this}}class v extends h.MeshBase{constructor(t){super(t.scene),this.v="#version 300 es\n\n        in vec3 a_position;\t//Standard position data.\n        in vec2 a_uv;\n\n        uniform mat4 uPMatrix;\n        uniform mat4 uMVMatrix;\n        uniform mat4 uCameraMatrix;\n\n        out vec2 uv;\n\n        void main(void) {\n            uv = a_uv;\n            gl_Position = uPMatrix * uCameraMatrix * uMVMatrix * vec4(a_position, 1.0);\n        }\n    ",this.f="#version 300 es\n\n    precision mediump float;\n    in vec2 uv;\n\n    out vec4 finalColor;\n\n    void main(void) {\n\n        //Square Border\n        // float c = (uv.x <= 0.1 || uv.x >=0.9 || uv.y <= 0.1 || uv.y >= 0.9)? 0.0 : 1.0;\n\n        // finalColor = vec4(c,c,c,1.0-c);\n        // finalColor = vec4(1.0, 0.0, 1.0, 1.0);\n\n        // //Circle\n        // //  /*\n        vec2 delta = uv - vec2(0.5,0.5); //delta position from center;\n        float dist = 0.5 - sqrt(delta.x*delta.x + delta.y*delta.y);\n\n        float border = 0.01;\n        float a = 0.0;\n\n        if(dist > border) a = 1.0;\n        else if(dist > 0.0) a = dist / border;\n\n        finalColor = vec4(0.0, 0.0, 0.0, a);\n        // //  */\n    }\n    ",this.app=void 0,this.vao=void 0,this.shader=void 0,this.model=void 0,this.geometry=void 0,this.size=20.5,this.rotation=0,this.app=t,this.geometry=o.Geometry.GetMulitQuad(),this.shader=new d(this.app.canvas.gl,this.v,this.f,this.app.camera.projectionMatrix),this.vao=new a.VAO(t.canvas.gl,"MultiQuad",this.geometry.vert,this.geometry.index,void 0,this.geometry.UV),this.vao.noCulling=!0,this.vao.doBlending=!0,this.model=new r.Model(this.vao)}render(){this.size+=.01,this.model.transform.position=new e.Vector3(0,0,this.model.transform.position.z+-.01),this.shader.activate(),this.shader.setPerspective(this.shader.pMatrix),this.shader.setCameraMatrix(this.app.camera.viewMatrix),this.shader.renderModel(this.model.preRender())}}},18457:(t,i,s)=>{s.r(i),s.d(i,{CAMERA_MODE:()=>r,Camera:()=>o,CameraController:()=>n});var e=s(74061),a=s(85363);let r;!function(t){t[t.FREE=0]="FREE",t[t.ORBIT=1]="ORBIT"}(r||(r={}));class o{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:45,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.projectionMatrix=void 0,this.viewMatrix=void 0,this.transform=void 0,this.mode=void 0,this.projectionMatrix=new Float32Array(16);let n=t.canvas.width/t.canvas.height;e.Matrix4.perspective(this.projectionMatrix,i||45,n,s||.1,o||100),this.transform=new a.Transform,this.viewMatrix=new Float32Array(16),this.mode=r.ORBIT}panX(t){this.mode!==r.ORBIT&&(this.updateViewMatrix(),this.transform.position.x+=this.transform.right[0]*t,this.transform.position.y+=this.transform.right[1]*t,this.transform.position.z+=this.transform.right[2]*t)}panY(t){this.updateViewMatrix(),this.transform.position.y+=this.transform.up[1]*t,this.mode!==r.ORBIT&&(this.transform.position.x+=this.transform.up[0]*t,this.transform.position.z+=this.transform.up[2]*t)}panZ(t){this.updateViewMatrix(),this.mode===r.ORBIT?this.transform.position.z+=t:(this.transform.position.x+=this.transform.forward[0]*t,this.transform.position.y+=this.transform.forward[1]*t,this.transform.position.z+=this.transform.forward[2]*t)}updateViewMatrix(){return this.mode===r.FREE?this.transform.matView.reset().vtranslate(this.transform.position).rotateX(this.transform.rotation.x*a.Transform.deg2Rad).rotateY(this.transform.rotation.y*a.Transform.deg2Rad):this.transform.matView.reset().rotateX(this.transform.rotation.x*a.Transform.deg2Rad).rotateY(this.transform.rotation.y*a.Transform.deg2Rad).vtranslate(this.transform.position),this.transform.updateDirection(),e.Matrix4.invert(this.viewMatrix,this.transform.matView.raw),this.viewMatrix}GetTranslatelessMatrix(){let t=new Float32Array(this.viewMatrix);return t[12]=t[13]=t[14]=0,t}}class n{constructor(t,i){this.canvas=void 0,this.camera=void 0,this.rotateRate=void 0,this.yRotateRate=void 0,this.xRotateRate=void 0,this.xPanRate=void 0,this.yPanRate=void 0,this.zPanRate=void 0,this.panRate=void 0,this.zoomRate=void 0,this.offsetX=void 0,this.offsetY=void 0,this.initX=void 0,this.initY=void 0,this.prevX=void 0,this.prevY=void 0,this.euler=void 0,this.onUpHandler=void 0,this.onMoveHandler=void 0,this.canvas=t.canvas,this.camera=i,this.rotateRate=-300,this.panRate=5,this.zoomRate=200,this.yRotateRate=this.rotateRate/this.canvas.width*Math.PI/180,this.xRotateRate=this.rotateRate/this.canvas.height*Math.PI/180,this.xPanRate=this.panRate/this.canvas.width,this.yPanRate=this.panRate/this.canvas.height,this.zPanRate=this.zoomRate/this.canvas.height,this.offsetX=10,this.offsetY=10,this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.onUpHandler=t=>this.onMouseUp(t),this.onMoveHandler=t=>{this.onMouseMove(t)},this.canvas.addEventListener("mousedown",(t=>{this.onMouseDown(t)})),this.canvas.addEventListener("mousewheel",(t=>{this.onMouseWheel(t)}))}getMouseVec2(t){return{x:t.pageX-this.offsetX,y:t.pageY-this.offsetY}}setEulerDegrees(t,i,s){return this.euler.set(t*a.Transform.deg2Rad,i*a.Transform.deg2Rad,s*a.Transform.deg2Rad),this}onMouseDown(t){this.initX=this.prevX=t.pageX-this.offsetX,this.initY=this.prevY=t.pageY-this.offsetY,this.canvas.addEventListener("mouseup",this.onUpHandler),this.canvas.addEventListener("mousemove",this.onMoveHandler)}onMouseUp(t){this.canvas.removeEventListener("mouseup",this.onUpHandler),this.canvas.removeEventListener("mousemove",this.onMoveHandler)}onMouseWheel(t){let i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));this.camera.panZ(i*(this.zoomRate/this.canvas.height))}onMouseMove(t){let i=t.pageX-this.offsetX,s=t.pageY-this.offsetY,e=i-this.prevX,a=s-this.prevY;t.shiftKey?(this.camera.panX(-e*(this.panRate/this.canvas.width)),this.camera.panY(a*(this.panRate/this.canvas.height))):(this.camera.transform.rotation.y+=e*(this.rotateRate/this.canvas.width),this.camera.transform.rotation.x+=a*(this.rotateRate/this.canvas.height)),this.prevX=i,this.prevY=s}}},14489:(t,i,s)=>{s.r(i),s.d(i,{NGL3dApp:()=>l});var e=s(21543),a=s(48575),r=s(80222),o=s(18457),n=s(31683),h=s(49394),d=s(25990),v=s(21717);class l{constructor(t){this.host=void 0,this.canvas=void 0,this.renderer=void 0,this.scene=void 0,this.texture=void 0,this.camera=void 0,this.cameraCtrl=void 0;const i=document.getElementById(t);i&&(this.host=i),this.scene=new r.Scene(this),this.renderer=new a.Renderer(this),this.canvas=new e.Canvas(this),this.texture=new n.Texture(this),this.texture.UploadTexture(n.uvGrid).then((()=>{this.camera=new o.Camera(this.canvas.gl),this.camera.transform.position.set(0,1,3),this.cameraCtrl=new o.CameraController(this.canvas.gl,this.camera),this.Init()}))}Init(){new h.GridAxis(this),new d.MulitQuad(this),new v.Cube(this)}}},58602:(t,i,s)=>{t.exports=s.p+"static/media/UV_Grid_Lrg.35909733fe8b440ed3fb.jpg"}}]);
//# sourceMappingURL=14489.a37b130b.chunk.js.map
{"version":3,"file":"static/js/11394.69b2880e.chunk.js","mappings":"kJAcO,MAAMA,EAAU,CAACC,EAAWC,EAAiBC,EAAkBC,EAAcC,EAAYC,EAAWC,EAAcC,KACrH,IAAIC,EAAIJ,EAAKD,GAAQE,EAAI,IAAMA,EAAI,GACnCI,EAAUT,EAAGC,EAAGC,EAAIM,EAAG,EAAI,EAAIA,EAAGH,EAAGC,EAAMC,EAAI,EAWtCE,EAAY,CAACT,EAAWC,EAAiBC,EAAkBM,EAAWE,EAAWL,EAAWC,EAAcC,KACnH,IAAII,EAAS,EAAMD,EACnB,IAAK,IAAIE,EAAI,EAAGA,EAAIN,EAAMM,IAAK,CAC7B,IAAK,IAAIC,EAAI,EAAGA,EAAIR,EAAI,EAAGQ,IACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIT,EAAI,EAAGS,IACzBb,EAAEc,EAAGD,EAAGD,EAAGR,KAAOH,EAAGa,EAAGD,EAAGD,EAAGR,IAAMG,GAAKP,EAAEc,EAAGD,EAAI,EAAGD,EAAGR,IAAMJ,EAAEc,EAAGD,EAAI,EAAGD,EAAGR,IAAMJ,EAAEc,EAAGD,EAAGD,EAAI,EAAGR,IAAMJ,EAAEc,EAAGD,EAAGD,EAAI,EAAGR,MAAQM,EAGnIK,EAAQhB,EAAGC,EAAGI,EAAGE,EACnB,GAGSQ,EAAK,CAACd,EAAWgB,EAAWZ,IAC9BJ,EAAIgB,EAAIZ,EASNa,EAAU,CAACC,EAAsBC,EAAsBC,EAAiBC,EAAmBjB,EAAWC,EAAcC,KAC7H,IAAK,IAAIM,EAAI,EAAGA,EAAIR,EAAI,EAAGQ,IACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIT,EAAI,EAAGS,IACzBQ,EAAIP,EAAGD,EAAGD,EAAGR,KAAQ,IAAOc,EAAOJ,EAAGD,EAAI,EAAGD,EAAGR,IAAMc,EAAOJ,EAAGD,EAAI,EAAGD,EAAGR,IAAMe,EAAOL,EAAGD,EAAGD,EAAI,EAAGR,IAAMe,EAAOL,EAAGD,EAAGD,EAAI,EAAGR,KAAQA,EACtIgB,EAAEN,EAAGD,EAAGD,EAAGR,IAAM,EAIrBW,EAAQ,EAAGM,EAAKjB,EAAGE,GACnBS,EAAQ,EAAGK,EAAGhB,EAAGE,GACjBE,EAAU,EAAGY,EAAGC,EAAK,EAAG,EAAGjB,EAAGC,EAAMC,GAEpC,IAAK,IAAIM,EAAI,EAAGA,EAAIR,EAAI,EAAGQ,IACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIT,EAAI,EAAGS,IACzBK,EAAOJ,EAAGD,EAAGD,EAAGR,KAAO,IAAOgB,EAAEN,EAAGD,EAAI,EAAGD,EAAGR,IAAMgB,EAAEN,EAAGD,EAAI,EAAGD,EAAGR,KAAOA,EACzEe,EAAOL,EAAGD,EAAGD,EAAGR,KAAO,IAAOgB,EAAEN,EAAGD,EAAGD,EAAI,EAAGR,IAAMgB,EAAEN,EAAGD,EAAGD,EAAI,EAAGR,KAAOA,EAI7EW,EAAQ,EAAGG,EAAQd,EAAGE,GACtBS,EAAQ,EAAGI,EAAQf,EAAGE,EAAI,EAajBgB,EAAS,CAACvB,EAAWwB,EAAiBC,EAAkBN,EAAsBC,EAAsBhB,EAAYC,EAAWE,KACpI,IAAImB,EAAIC,EAAIC,EAAIC,EAKZC,EAAIC,EAAIC,EAAIC,EACZC,EAAMC,EAAMlC,EAAGgB,EAGfmB,EAAQC,EACRvB,EAAGD,EARHyB,EAAMlC,GAAMC,EAAI,GAChBkC,EAAMnC,GAAMC,EAAI,GAKhBmC,EAASnC,EAAI,EAKjB,IAAKQ,EAAI,EAAGwB,EAAS,EAAGxB,EAAIR,EAAI,EAAGQ,IAAKwB,IACtC,IAAKvB,EAAI,EAAGsB,EAAS,EAAGtB,EAAIT,EAAI,EAAGS,IAAKsB,IAAU,CAChDF,EAAOI,EAAMnB,EAAOJ,EAAGD,EAAGD,EAAGR,IAC7B8B,EAAOI,EAAMnB,EAAOL,EAAGD,EAAGD,EAAGR,IAC7BJ,EAAImC,EAASF,EACbjB,EAAIoB,EAASF,EAETlC,EAAI,KAAKA,EAAI,IACbA,EAAIuC,EAAS,KAAKvC,EAAIuC,EAAS,IACnCd,EAAKe,KAAKC,MAAMzC,GAChB0B,EAAKD,EAAK,EACNT,EAAI,KAAKA,EAAI,IACbA,EAAIuB,EAAS,KAAKvB,EAAIuB,EAAS,IACnCZ,EAAKa,KAAKC,MAAMzB,GAChBY,EAAKD,EAAK,EAEVG,EAAK9B,EAAIyB,EACTI,EAAK,EAAMC,EACXE,EAAKhB,EAAIW,EACTI,EAAK,EAAMC,EAEX,IAAIU,EAAMjB,EACNkB,EAAMjB,EACNkB,EAAMjB,EACNkB,EAAMjB,EAEVL,EAAET,EAAGD,EAAGD,EAAGR,IAAMyB,GAAME,EAAKP,EAAGV,EAAG4B,EAAKE,EAAKxC,IAAM4B,EAAKR,EAAGV,EAAG4B,EAAKG,EAAKzC,KAAO0B,GAAMC,EAAKP,EAAGV,EAAG6B,EAAKC,EAAKxC,IAAM4B,EAAKR,EAAGV,EAAG6B,EAAKE,EAAKzC,IACtI,CAGFW,EAAQhB,EAAGwB,EAAGnB,EAAGE,EAAI,EAOZS,EAAU,CAAChB,EAAWC,EAAiBI,EAAWE,KAC3D,IAAK,IAAIO,EAAI,EAAGA,EAAIT,EAAI,EAAGS,IACzBb,EAAEc,EAAGD,EAAG,EAAGT,IAAY,IAANL,GAAWC,EAAEc,EAAGD,EAAG,EAAGT,IAAMJ,EAAEc,EAAGD,EAAG,EAAGT,IACxDJ,EAAEc,EAAGD,EAAGT,EAAI,EAAGA,IAAY,IAANL,GAAWC,EAAEc,EAAGD,EAAGT,EAAI,EAAGA,IAAMJ,EAAEc,EAAGD,EAAGT,EAAI,EAAGA,IAEtE,IAAK,IAAIQ,EAAI,EAAGA,EAAIR,EAAI,EAAGQ,IACzBZ,EAAEc,EAAG,EAAGF,EAAGR,IAAY,IAANL,GAAWC,EAAEc,EAAG,EAAGF,EAAGR,IAAMJ,EAAEc,EAAG,EAAGF,EAAGR,IACxDJ,EAAEc,EAAGV,EAAI,EAAGQ,EAAGR,IAAY,IAANL,GAAWC,EAAEc,EAAGV,EAAI,EAAGQ,EAAGR,IAAMJ,EAAEc,EAAGV,EAAI,EAAGQ,EAAGR,IAGtEJ,EAAEc,EAAG,EAAG,EAAGV,IAAM,IAAOJ,EAAEc,EAAG,EAAG,EAAGV,IAAMJ,EAAEc,EAAG,EAAG,EAAGV,KACpDJ,EAAEc,EAAG,EAAGV,EAAI,EAAGA,IAAM,IAAOJ,EAAEc,EAAG,EAAGV,EAAI,EAAGA,IAAMJ,EAAEc,EAAG,EAAGV,EAAI,EAAGA,KAChEJ,EAAEc,EAAGV,EAAI,EAAG,EAAGA,IAAM,IAAOJ,EAAEc,EAAGV,EAAI,EAAG,EAAGA,IAAMJ,EAAEc,EAAGV,EAAI,EAAG,EAAGA,KAChEJ,EAAEc,EAAGV,EAAI,EAAGA,EAAI,EAAGA,IAAM,IAAOJ,EAAEc,EAAGV,EAAI,EAAGA,EAAI,EAAGA,IAAMJ,EAAEc,EAAGV,EAAI,EAAGA,EAAI,EAAGA,KAE5EJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAU,EAAGA,IAAM,EACnCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAU,EAAGA,IAAM,EACnCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAU,EAAGA,IAAM,EACnCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAU,EAAGA,IAAM,EACnCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAU,EAAGA,IAAM,EACnCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAU,EAAGA,IAAM,EACnCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAU,EAAGA,IAAM,EACnCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAU,EAAGA,IAAM,EAEnCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAUA,EAAI,EAAGA,IAAM,EACvCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAUA,EAAI,EAAGA,IAAM,EACvCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAUA,EAAI,EAAGA,IAAM,EACvCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAUA,EAAI,EAAGA,IAAM,EACvCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAUA,EAAI,EAAGA,IAAM,EACvCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAUA,EAAI,EAAGA,IAAM,EACvCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAUA,EAAI,EAAGA,IAAM,EACvCJ,EAAEc,EAAG0B,KAAKC,MAAU,GAAJrC,GAAUA,EAAI,EAAGA,IAAM,EAEvC,IAAK,IAAIS,EAAI,EAAIA,EAAIP,EAAIwC,SAAUjC,EACjCb,EAAEc,EAAGR,EAAIO,GAAG,GAAIP,EAAIO,GAAG,GAAIT,IAAM,CACnC,E,eCpKG,MAAM2C,EAuBXC,YAAY7C,EAAY8C,EAAmBC,GAAoB,KArBxD9C,EAAI,IAAI,KACRC,KAAO,GAAG,KACV8C,MAAQ,EAAE,KACVxC,EAAI,EAAE,KAENyC,SAAW,IAAK,KAGhBjD,QAAE,OACFD,UAAI,OACJmD,UAAI,OAEJC,OAAC,OACDC,aAAO,OACPC,QAAE,OACFC,QAAE,OACFC,SAAG,OACHC,SAAG,OAEHC,UAAwB,GAI7BC,KAAK1D,GAAKA,EACV0D,KAAK3D,KAAO+C,EACZY,KAAKR,KAAOH,EAEZW,KAAKP,EAAI,IAAIQ,aAAaD,KAAKzD,EAAIyD,KAAKzD,GAAG2D,KAAK,GAChDF,KAAKN,QAAU,IAAIO,aAAaD,KAAKzD,EAAIyD,KAAKzD,GAAG2D,KAAK,KAEtDF,KAAKL,GAAK,IAAIM,aAAaD,KAAKzD,EAAIyD,KAAKzD,GAAG2D,KAAK,GACjDF,KAAKH,IAAM,IAAII,aAAaD,KAAKzD,EAAIyD,KAAKzD,GAAG2D,KAAK,GAElDF,KAAKJ,GAAK,IAAIK,aAAaD,KAAKzD,EAAIyD,KAAKzD,GAAG2D,KAAK,GACjDF,KAAKF,IAAM,IAAIG,aAAaD,KAAKzD,EAAIyD,KAAKzD,GAAG2D,KAAK,EACpD,CAEOC,OAEL,IAAIX,EAAOQ,KAAKR,KACZnD,EAAO2D,KAAK3D,KACZC,EAAK0D,KAAK1D,GACVqD,EAAKK,KAAKL,GACVC,EAAKI,KAAKJ,GACVC,EAAMG,KAAKH,IACXC,EAAME,KAAKF,IACXL,EAAIO,KAAKP,EACTC,EAAUM,KAAKN,QAEnBzD,EAAQ,EAAG4D,EAAKF,EAAIH,EAAMlD,EAAI0D,KAAKzD,EAAGyD,KAAKxD,KAAMwD,KAAKD,WACtD9D,EAAQ,EAAG6D,EAAKF,EAAIJ,EAAMlD,EAAI0D,KAAKzD,EAAGyD,KAAKxD,KAAMwD,KAAKD,WAEtD3C,EAAQyC,EAAKC,EAAKH,EAAIC,EAAII,KAAKzD,EAAGyD,KAAKxD,KAAMwD,KAAKD,WAElDtC,EAAO,EAAGkC,EAAIE,EAAKA,EAAKC,EAAKxD,EAAI0D,KAAKzD,EAAGyD,KAAKD,WAC9CtC,EAAO,EAAGmC,EAAIE,EAAKD,EAAKC,EAAKxD,EAAI0D,KAAKzD,EAAGyD,KAAKD,WAE9C3C,EAAQuC,EAAIC,EAAIC,EAAKC,EAAKE,KAAKzD,EAAGyD,KAAKxD,KAAMwD,KAAKD,WAClD9D,EAAQ,EAAGwD,EAAGC,EAASrD,EAAMC,EAAI0D,KAAKzD,EAAGyD,KAAKxD,KAAMwD,KAAKD,WACzDtC,EAAO,EAAGiC,EAASD,EAAGE,EAAIC,EAAItD,EAAI0D,KAAKzD,EAAGyD,KAAKD,UAEjD,CAGOK,WAAWjE,EAAWgB,EAAWkD,GACtC,IAAIC,EAAQrD,EAAGd,EAAGgB,EAAG6C,KAAKzD,GAC1ByD,KAAKN,QAAQY,IAAUD,CACzB,CAEOE,YAAYpE,EAAWgB,EAAWqD,EAAiBC,GACxD,IAAIH,EAAQrD,EAAGd,EAAGgB,EAAG6C,KAAKzD,GAC1ByD,KAAKL,GAAGW,IAAUE,EAClBR,KAAKJ,GAAGU,IAAUG,CACpB,CAEOC,QAAQC,GACb,IAAK,IAAI3D,EAAI,EAAGA,EAAIgD,KAAKzD,EAAGS,IAC1B,IAAK,IAAID,EAAI,EAAGA,EAAIiD,KAAKzD,EAAGQ,IAAK,CAC/B,IAAIZ,EAAIa,EAAIgD,KAAKV,MACbnC,EAAIJ,EAAIiD,KAAKV,MACb5B,EAAIsC,KAAKN,QAAQzC,EAAGD,EAAGD,EAAGiD,KAAKzD,IASnC,GAAU,IAANmB,EACFiD,EAAIC,UAAS,yBACR,CACL,MAAMC,GAAMC,EAAAA,EAAAA,eAAcpD,EAAIsC,KAAKT,UACnCoB,EAAIC,UAAS,cAAUC,EAAI,GAAE,aAAKA,EAAI,GAAE,YAAIA,EAAI,GAAE,IACpD,CACAF,EAAII,YACJJ,EAAIK,KAAK7E,EAAGgB,EAAG6C,KAAKV,MAAOU,KAAKV,OAChCqB,EAAIT,OACJS,EAAIM,UAAY,GAChBN,EAAIO,YAAc,SAEpB,CAEJ,CAGOC,QAAQR,GACb,IAAK,IAAI3D,EAAI,EAAGA,EAAIgD,KAAKzD,EAAGS,IAC1B,IAAK,IAAID,EAAI,EAAGA,EAAIiD,KAAKzD,EAAGQ,IAAK,CAC/B,IAAIZ,EAAIa,EAAIgD,KAAKV,MACbnC,EAAIJ,EAAIiD,KAAKV,MAGb8B,EAAKpB,KAAKL,GAAG1C,EAAGD,EAAGD,EAAGiD,KAAKzD,IAC3B8E,EAAKrB,KAAKJ,GAAG3C,EAAGD,EAAGD,EAAGiD,KAAKzD,IAGzBoC,KAAK2C,IAAIF,GAAM,IAAOzC,KAAK2C,IAAID,IAAO,KAC1CV,EAAIM,UAAY,EAChBN,EAAII,YACJJ,EAAIY,OAAOpF,EAAGgB,GACdwD,EAAIa,OAAOrF,EAAIiF,EAAKpB,KAAKV,MAAOnC,EAAIkE,EAAKrB,KAAKV,OAC9CqB,EAAIc,SAIR,CAEJ,E,eC/HK,MAAMC,EAqBTvC,YAAY3B,EAAKmE,GAMb,IAAIC,EANiB,KAnBlBC,aAAO,OACPC,WAAK,OACLC,SAAG,OAEHC,WAAK,OAELlF,EAAI,EAAI,KAERmF,KAAmB,GAAG,KAEtBC,SAAuB,GAAG,KAC1BC,GAAK,EAAE,KACPC,GAAK,EAAE,KAEPC,SAAG,OACHC,WAAY,EAAM,KAClBC,SAAU,EAAM,KAChBX,IAAc,GAKjB5B,KAAKwC,OACLxC,KAAKyC,OAAOd,GAWZC,EAAM,2EAEN5B,KAAK0C,UAFC,2EAGV,CACOA,UAAUd,GACb5B,KAAK4B,IAAMA,GAEXe,EAAAA,EAAAA,IAAcf,GAAKgB,MAAMP,IACrBrC,KAAKqC,IAAMA,EAWXA,EAAIQ,OAAS,KAOT,MACMlC,EADSmC,SAASC,cAAc,UACnBC,WAAW,MAE9B,GAAIrC,EAAK,CACLA,EAAIsC,UAAUjD,KAAKqC,IAAK,EAAG,EAAGrC,KAAKgC,MAAMzF,EAAGyD,KAAKgC,MAAMzF,GAEvD,MAAM2G,EAA8BvC,EAAIwC,aAAa,EAAG,EAAGnD,KAAKgC,MAAMzF,EAAGyD,KAAKgC,MAAMzF,GAGpF,GAAI2G,EAEA,IAAK,IAAI/F,EAAI,EAAGA,EAAI6C,KAAKgC,MAAMzF,IAAKY,EAChC,IAAK,IAAIhB,EAAI,EAAGA,EAAI6D,KAAKgC,MAAMzF,IAAKJ,EAAG,CACzB+G,EAAKA,KAAgC,GAA1B/G,EAAK6D,KAAKgC,MAAMzF,EAAIY,IACjC,KAEJ6C,KAAKgC,MAAMjC,UAAUqD,KAAK,CAACjH,EAAGgB,GAGtC,CAMZ,GAIJ6C,KAAKwC,MAAM,GAEnB,CACOC,OAAOd,GCnGI,EAAC0B,EAAcC,KACnC,IAAIC,EAAUT,SAASC,cAAc,OACrCQ,EAAQC,MAAMC,SAAW,WAGzBJ,EAAaK,YAAYH,GAEzB,IAAII,EAASb,SAASC,cAAc,UACpCY,EAAOC,YAAc,QACrBD,EAAOH,MAAMK,MAAQ,OACrBF,EAAOH,MAAMM,OAAS,OACtBH,EAAOI,QAAU,KACfT,EAAgBd,MAAM,EAExBe,EAAQG,YAAYC,GAEpB,IAAIK,EAAWlB,SAASC,cAAc,OAClCkB,EAAWnB,SAASC,cAAc,SACtCkB,EAASC,MAAQ,sFACjBD,EAASE,iBAAiB,WAAYC,IACrB,UAAXA,EAAEC,MACJf,EAAgBZ,UAAUuB,EAASC,MACrC,IAEFF,EAASN,YAAYO,GACrBV,EAAQG,YAAYM,GAEpB,IAAIM,EAAOxB,SAASC,cAAc,OAClCuB,EAAKC,UAAY,OACjBD,EAAKd,MAAMM,OAAS,OACpBQ,EAAKd,MAAMK,MAAQ,QACnBN,EAAQG,YAAYY,GAEpB,IAAIE,EAAU1B,SAASC,cAAc,SACrCyB,EAAQC,KAAO,QACfD,EAAQE,IAAM,SACdF,EAAQG,IAAM,MACdH,EAAQrE,KAAO,SACfqE,EAAQI,QAAU,KAChB,MAAMC,GAAOL,EAAQN,MACrBZ,EAAgBtB,MAAM1F,GAAKuI,CAAG,EAGhCP,EAAKZ,YAAYc,GAEjB,IAAIhH,EAAMsF,SAASC,cAAc,OACjCvF,EAAI+G,UAAY,YAChB/G,EAAIgG,MAAMM,OAAS,OACnBtG,EAAIgG,MAAMK,MAAQ,QAClBN,EAAQG,YAAYlG,GAEpB,IAAIsH,EAAUhC,SAASC,cAAc,SACrC+B,EAAQL,KAAO,QACfK,EAAQJ,IAAM,WACdI,EAAQH,IAAM,MACdG,EAAQ3E,KAAO,UACf2E,EAAQF,QAAU,KAChB,MAAMC,GAAOC,EAAQZ,MACrBZ,EAAgBtB,MAAMzC,SAAWsF,CAAG,EAGtCrH,EAAIkG,YAAYoB,GAEhB,MAAMC,EAAOjC,SAASC,cAAc,OACpCgC,EAAKR,UAAY,YAEjBQ,EAAKvB,MAAMM,OAAS,OACpBiB,EAAKvB,MAAMK,MAAQ,QAEnBN,EAAQG,YAAYqB,GAEpB,MAAMC,EAAUlC,SAASC,cAAc,SACvCiC,EAAQP,KAAO,QACfO,EAAQN,IAAM,WACdM,EAAQL,IAAM,SACdK,EAAQ7E,KAAO,YACf6E,EAAQJ,QAAU,KAChB,MAAMC,GAAOG,EAAQd,MACrBZ,EAAgBtB,MAAMxC,KAAOqF,CAAG,EAGlCE,EAAKrB,YAAYsB,GAEjB,MAAMC,EAAOnC,SAASC,cAAc,OACpCkC,EAAKV,UAAY,WAEjBU,EAAKzB,MAAMM,OAAS,OACpBmB,EAAKzB,MAAMK,MAAQ,QAEnBN,EAAQG,YAAYuB,GAEpB,MAAMC,EAAUpC,SAASC,cAAc,SACvCmC,EAAQT,KAAO,QACfS,EAAQR,IAAM,WACdQ,EAAQP,IAAM,MACdO,EAAQ/E,KAAO,YACf+E,EAAQN,QAAU,KAChB,MAAMC,GAAOK,EAAQhB,MACrBZ,EAAgB6B,SAASN,EAAI,EAG/BI,EAAKvB,YAAYwB,GAEjB,MAAMrD,EAAUiB,SAASC,cAAc,OACvClB,EAAQ0C,UAAY,WAEpB1C,EAAQ2B,MAAMM,OAAS,OACvBjC,EAAQ2B,MAAMK,MAAQ,QACtBP,EAAgBzB,QAAUA,EAC1B0B,EAAQG,YAAY7B,GAGpB,MAAMuD,EAAYtC,SAASC,cAAc,OACzCqC,EAAUb,UAAY,WAEtBa,EAAU5B,MAAMM,OAAS,OACzBsB,EAAU5B,MAAMK,MAAQ,QAExBN,EAAQG,YAAY0B,GAEpB,MAAMC,EAAYvC,SAASC,cAAc,SACzCsC,EAAUZ,KAAO,WACjBY,EAAUC,SAAW,KACnBhC,EAAgBf,SAAWe,EAAgBf,OAAO,EAEpD6C,EAAU1B,YAAY2B,GAEtB,MAAME,EAAYzC,SAASC,cAAc,UACzCwC,EAAUhB,UAAY,OAEtBgB,EAAU/B,MAAMM,OAAS,OACzByB,EAAU/B,MAAMK,MAAQ,OACxB0B,EAAUxB,QAAU,KAClBT,EAAgBkC,QAAQ,EAE1BjC,EAAQG,YAAY6B,GAEpB,MAAME,EAAW3C,SAASC,cAAc,UACxC0C,EAASlB,UAAY,MAErBkB,EAASjC,MAAMM,OAAS,OACxB2B,EAASjC,MAAMK,MAAQ,OACvB4B,EAAS1B,QAAU,KACjBT,EAAgBoC,OAAO,EAEzBnC,EAAQG,YAAY+B,GAEpB,MAAME,EAAW7C,SAASC,cAAc,UACxC4C,EAASpB,UAAY,MAErBoB,EAASnC,MAAMM,OAAS,OACxB6B,EAASnC,MAAMK,MAAQ,OACvB8B,EAAS5B,QAAU,KACjBT,EAAgBsC,OAAO,EAEzBrC,EAAQG,YAAYiC,GAEpB,MAAME,EAAW/C,SAASC,cAAc,OACxC8C,EAAStB,UAAY,kDAErBsB,EAASrC,MAAMM,OAAS,OACxB+B,EAASrC,MAAMK,MAAQ,QACvBgC,EAASrC,MAAMsC,SAAW,OAC1BvC,EAAQG,YAAYmC,EAAS,ED/DvBpD,CAAOd,EAAO3B,MAGdA,KAAKkC,SAASkB,KAAK,CAACzE,KAAKC,MAAM,GAAMoB,KAAKgC,MAAMzF,GAAIoC,KAAKC,MAAM,GAAMoB,KAAKgC,MAAMzF,IACpF,CACOiG,OACHxC,KAAKgC,MAAQ,IAAI9C,EAAM,IAAM,EAAG,MAChCc,KAAKkC,SAAW,GAChBlC,KAAKkC,SAASkB,KAAK,CAACzE,KAAKC,MAAM,GAAMoB,KAAKgC,MAAMzF,GAAIoC,KAAKC,MAAM,GAAMoB,KAAKgC,MAAMzF,KAChFyD,KAAKsC,WAAY,CAIrB,CACOyD,OAAOpF,GACVX,KAAKsC,WAAatC,KAAKgG,wBAAwBrF,EACnD,CACOqF,wBAAwBrF,GAG3B,IAAK,IAAIsF,EAAI,EAAGA,EAAIjG,KAAKkC,SAASjD,SAAUgH,EAAG,CAC3C,IAAIC,EAAKlG,KAAKkC,SAAS+D,GAAG,GACtBE,EAAKnG,KAAKkC,SAAS+D,GAAG,GAE1B,IAAK,IAAIjJ,GAAK,EAAGA,GAAK,EAAGA,IACrB,IAAK,IAAID,GAAK,EAAGA,GAAK,EAAGA,IAGrBiD,KAAKgC,MAAM5B,WAAW8F,EAAKlJ,EAAGmJ,EAAKpJ,EAAoB,EAAhB4B,KAAKyH,SAGxD,CAEA,IAAK,IAAIH,EAAI,EAAGA,EAAIjG,KAAKkC,SAASjD,SAAUgH,EAAG,CAC3C,IAAIC,EAAKlG,KAAKkC,SAAS+D,GAAG,GACtBE,EAAKnG,KAAKkC,SAAS+D,GAAG,GAC1B,IAAK,IAAIjJ,EAAI,EAAGA,EAAI,EAAGA,IAMnBgD,KAAKgC,MAAMzB,YAAY2F,EAAIC,EAAInG,KAAKmC,GAAInC,KAAKoC,GAGrD,CAEApC,KAAKgC,MAAM7B,OACXH,KAAKgC,MAAMtB,QAAQC,GACnBX,KAAKuC,SAAWvC,KAAKgC,MAAMb,QAAQR,EAKvC,CACO0F,WAAWlK,EAAWgB,GACzB,MAAMgF,EAAKxD,KAAKC,MAAMzC,EAAI6D,KAAKgC,MAAM1C,OAC/B8C,EAAKzD,KAAKC,MAAMzB,EAAI6C,KAAKgC,MAAM1C,OACrCU,KAAKkC,SAASkB,KAAK,CAACjB,EAAIC,GAC5B,CACOkE,UAAUnK,EAAWgB,GACxB,MAAMgF,EAAKxD,KAAKC,MAAMzC,EAAI6D,KAAKgC,MAAM1C,OAC/B8C,EAAKzD,KAAKC,MAAMzB,EAAI6C,KAAKgC,MAAM1C,OACrCU,KAAKgC,MAAMjC,UAAUqD,KAAK,CAACjB,EAAIC,GACnC,CACO+C,SAASoB,GACZ,MAAMC,EAAQD,EAAQ5H,KAAK8H,GAAK,IAChCzG,KAAKmC,GAAKxD,KAAK+H,IAAIF,GACnBxG,KAAKoC,GAAKzD,KAAKgI,IAAIH,EACvB,CACOI,UAAUzK,EAAWgB,GACxB,MAAMgF,EAAKxD,KAAKC,MAAMzC,EAAI6D,KAAKgC,MAAM1C,OAC/B8C,EAAKzD,KAAKC,MAAMzB,EAAI6C,KAAKgC,MAAM1C,OAC/B5B,EAAIsC,KAAKgC,MAAMtC,QAAQyC,EAAKC,EAAKpC,KAAKgC,MAAMzF,GAC9CmB,IACAsC,KAAK6B,QAAQ0C,UAAS,UAAM7G,GAEpC,CACO8H,SAGH,MAAMtC,EAAO,GAEb,IAAK,IAAIlG,EAAI,EAAGA,EAAIgD,KAAKgC,MAAMzF,EAAGS,IAC9B,IAAK,IAAID,EAAI,EAAGA,EAAIiD,KAAKgC,MAAMzF,EAAGQ,IAAK,CACnC,IAAI2C,EAAUM,KAAKgC,MAAMtC,QAAQzC,EAAGD,EAAGD,EAAGiD,KAAKgC,MAAMzF,IACjDJ,EAAIa,EAAIgD,KAAKgC,MAAM1C,MACnBnC,EAAIJ,EAAIiD,KAAKgC,MAAM1C,MACvB4D,EAAKE,KAAK,CACNjH,IAAGgB,IAAGuC,WAEd,CAIJmH,EAAaC,KAAKC,UAAU7D,GAChC,CACO0C,QACH,CAEGF,QACH,EAKR,MAAMmB,EAAe,SAACG,GAAoC,IAAxBC,EAAI,uDAAG,WACrC,MAAMC,EAAOpE,SAASC,cAAc,KACpCmE,EAAKC,KAAO,uCAAyCC,mBAAmBJ,GACxEE,EAAKG,SAAQ,UAAMJ,GACnBC,EAAKI,OACT,EE7MO,MAAMC,EAKXpI,YAAYqI,GAAa,KAJlBjE,aAAO,OAEdkE,cAAQ,EAGNzH,KAAKuD,QAAUT,SAAS4E,eAAeF,GAGvCxH,KAAKuD,QAAQC,MAAMmE,QAAU,OAC7B3H,KAAKuD,QAAQC,MAAMoE,WAAa,SAEhC,MAAMpK,EAAMsF,SAASC,cAAc,OACnCvF,EAAIgG,MAAMqE,WAAa,OACvBrK,EAAIgG,MAAMsE,YAAc,OACxBtK,EAAIgG,MAAMuE,gBAAkB,kBAE5BvK,EAAIgG,MAAMK,MAAQ,OAClBrG,EAAIgG,MAAMM,OAAS,QACnBtG,EAAIgG,MAAMmE,QAAU,OACpB3H,KAAKuD,QAAQG,YAAYlG,GAKzB,MAAMmE,EAAQmB,SAASC,cAAc,OACrCpB,EAAM6B,MAAMqE,WAAa,OACzBlG,EAAM6B,MAAMsE,YAAc,OAE1BnG,EAAM6B,MAAMK,MAAQ,QACpBlC,EAAM6B,MAAMM,OAAS,QACrBnC,EAAM6B,MAAMqE,WAAa,OACzBrK,EAAIkG,YAAY/B,GAEhB,MAAMqG,EAAYlF,SAASC,cAAc,OACzCiF,EAAUxE,MAAMqE,WAAa,OAC7BG,EAAUxE,MAAMsE,YAAc,OAE9BE,EAAUxE,MAAMK,MAAQ,OACxBmE,EAAUxE,MAAMM,OAAS,QACzBtG,EAAIkG,YAAYsE,GAEhBhI,KAAKyH,SAAW,IAAIQ,EAASD,EAAWrG,EAO1C,CACOuG,UAEL,KAAOlI,KAAKuD,QAAQ4E,kBAClBnI,KAAKuD,QAAQ6E,YAAYpI,KAAKuD,QAAQ4E,iBAE1C,EAGK,MAAMF,UAAiBI,EAAAA,GAE5BlJ,YAAY3B,EAAUmE,GAClB2G,MAAM9K,GAAK,KAFR+K,iBAAW,EAGdvI,KAAKwI,OAAOhF,MAAMC,SAAW,WAC7BzD,KAAKwI,OAAOhF,MAAMK,MAAQ,OAC1B7D,KAAKwI,OAAOhF,MAAMM,OAAS,OAE3B9D,KAAKuI,YAAc,IAAI7G,EAAYlE,EAAKmE,GACxC3B,KAAKyI,OACT,CACO1C,OAAOpF,GACZX,KAAKuI,YAAYxC,OAAOpF,EAC1B,CACO0F,WAAWlK,EAAWgB,GACzB6C,KAAKuI,YAAYlC,WAAWlK,EAAGgB,EACnC,CACOmJ,UAAUnK,EAAWgB,GACxB6C,KAAKuI,YAAYjC,UAAUnK,EAAGgB,EAClC,CACOyJ,UAAUzK,EAAWgB,GAC1B6C,KAAKuI,YAAY3B,UAAUzK,EAAGgB,EAClC,E","sources":["njslab/Tools/FluidSimulation/FluidSystem/Core/Utility.ts","njslab/Tools/FluidSimulation/FluidSystem/Core/Fluid.ts","njslab/Tools/FluidSimulation/FluidSystem/index.ts","njslab/Tools/FluidSimulation/FluidSystem/UI/index.ts","njslab/Tools/FluidSimulation/index.ts"],"sourcesContent":["// let N = 25;\r\n// let iter = 16;\r\n// let SCALE = 4;\r\n// let t = 0;\r\n\r\n\r\n/*\r\n    Function of diffuse\r\n    - b : int\r\n    - x : float[]\r\n    - x0 : float[]\r\n    - diff : float\r\n    - dt : flaot\r\n*/\r\nexport const diffuse = (b: number, x: Float32Array, x0: Float32Array, diff: number, dt: number, N: number, iter: number, ids: number[][]) => {\r\n    let a = dt * diff * (N - 2) * (N - 2);\r\n    lin_solve(b, x, x0, a, 1 + 6 * a, N, iter, ids);\r\n  };\r\n\r\n  /*\r\n      Function of solving linear differential equation\r\n      - b : int\r\n      - x : float[]\r\n      - x0 : float[]\r\n      - a : float\r\n      - c : float\r\n  */\r\nexport const lin_solve = (b: number, x: Float32Array, x0: Float32Array, a: number, c: number, N: number, iter: number, ids: number[][]) => {\r\n    let cRecip = 1.0 / c;\r\n    for (let t = 0; t < iter; t++) {\r\n      for (let j = 1; j < N - 1; j++) {\r\n        for (let i = 1; i < N - 1; i++) {\r\n          x[IX(i, j, N)] = (x0[IX(i, j, N)] + a * (x[IX(i + 1, j, N)] + x[IX(i - 1, j, N)] + x[IX(i, j + 1, N)] + x[IX(i, j - 1, N)])) * cRecip;\r\n        }\r\n      }\r\n      set_bnd(b, x, N, ids);\r\n    }\r\n};\r\n  // function to use 1D array and fake the extra two dimensions --> 3D\r\nexport const IX = (x: number, y: number, N: number) => {\r\n    return x + y * N;\r\n};\r\n  /*\r\n      Function of project : This operation runs through all the cells and fixes them up so everything is in equilibrium.\r\n      - velocX : float[]\r\n      - velocY : float[]\r\n      = p : float[]\r\n      - div : float[]\r\n  */\r\nexport const project = (velocX: Float32Array, velocY: Float32Array, p: Float32Array, div: Float32Array, N: number, iter: number, ids: number[][]) => {\r\n    for (let j = 1; j < N - 1; j++) {\r\n      for (let i = 1; i < N - 1; i++) {\r\n        div[IX(i, j, N)] = (-0.5 * (velocX[IX(i + 1, j, N)] - velocX[IX(i - 1, j, N)] + velocY[IX(i, j + 1, N)] - velocY[IX(i, j - 1, N)])) / N;\r\n        p[IX(i, j, N)] = 0;\r\n      }\r\n    }\r\n\r\n    set_bnd(0, div, N, ids);\r\n    set_bnd(0, p, N, ids);\r\n    lin_solve(0, p, div, 1, 6, N, iter, ids);\r\n\r\n    for (let j = 1; j < N - 1; j++) {\r\n      for (let i = 1; i < N - 1; i++) {\r\n        velocX[IX(i, j, N)] -= 0.5 * (p[IX(i + 1, j, N)] - p[IX(i - 1, j, N)]) * N;\r\n        velocY[IX(i, j, N)] -= 0.5 * (p[IX(i, j + 1, N)] - p[IX(i, j - 1, N)]) * N;\r\n      }\r\n    }\r\n\r\n    set_bnd(1, velocX, N, ids);\r\n    set_bnd(2, velocY, N, ids);\r\n};\r\n\r\n  /*\r\n      Function of advect: responsible for actually moving things around\r\n      - b : int\r\n      - d : float[]\r\n      - d0 : float[]\r\n      - velocX : float[]\r\n      - velocY : float[]\r\n      - velocZ : float[]\r\n      - dt : float[]\r\n  */\r\nexport const advect = (b: number, d: Float32Array, d0: Float32Array, velocX: Float32Array, velocY: Float32Array, dt: number, N: number, ids: number[][]) => {\r\n    let i0, i1, j0, j1;\r\n\r\n    let dtx = dt * (N - 2);\r\n    let dty = dt * (N - 2);\r\n\r\n    let s0, s1, t0, t1;\r\n    let tmp1, tmp2, x, y;\r\n\r\n    let Nfloat = N - 2;\r\n    let ifloat, jfloat;\r\n    let i, j;\r\n    // let temp3, k;\r\n\r\n    for (j = 1, jfloat = 1; j < N - 1; j++, jfloat++) {\r\n      for (i = 1, ifloat = 1; i < N - 1; i++, ifloat++) {\r\n        tmp1 = dtx * velocX[IX(i, j, N)];\r\n        tmp2 = dty * velocY[IX(i, j, N)];\r\n        x = ifloat - tmp1;\r\n        y = jfloat - tmp2;\r\n\r\n        if (x < 0.5) x = 0.5;\r\n        if (x > Nfloat + 0.5) x = Nfloat + 0.5;\r\n        i0 = Math.floor(x);\r\n        i1 = i0 + 1.0;\r\n        if (y < 0.5) y = 0.5;\r\n        if (y > Nfloat + 0.5) y = Nfloat + 0.5;\r\n        j0 = Math.floor(y);\r\n        j1 = j0 + 1.0;\r\n\r\n        s1 = x - i0;\r\n        s0 = 1.0 - s1;\r\n        t1 = y - j0;\r\n        t0 = 1.0 - t1;\r\n\r\n        let i0i = i0; // parseInt(i0);\r\n        let i1i = i1; // parseInt(i1);\r\n        let j0i = j0; // parseInt(j0);\r\n        let j1i = j1; // parseInt(j1);\r\n\r\n        d[IX(i, j, N)] = s0 * (t0 * d0[IX(i0i, j0i, N)] + t1 * d0[IX(i0i, j1i, N)]) + s1 * (t0 * d0[IX(i1i, j0i, N)] + t1 * d0[IX(i1i, j1i, N)]);\r\n      }\r\n    }\r\n\r\n    set_bnd(b, d, N, ids);\r\n};\r\n  /*\r\n      Function of dealing with situation with boundary cells.\r\n      - b : int\r\n      - x : float[]\r\n  */\r\nexport const set_bnd = (b: number, x: Float32Array, N: number, ids: number[][]) => {\r\n    for (let i = 1; i < N - 1; i++) {\r\n      x[IX(i, 0, N)] = b === 2 ? -x[IX(i, 1, N)] : x[IX(i, 1, N)];\r\n      x[IX(i, N - 1, N)] = b === 2 ? -x[IX(i, N - 2, N)] : x[IX(i, N - 2, N)];\r\n    }\r\n    for (let j = 1; j < N - 1; j++) {\r\n      x[IX(0, j, N)] = b === 1 ? -x[IX(1, j, N)] : x[IX(1, j, N)];\r\n      x[IX(N - 1, j, N)] = b === 1 ? -x[IX(N - 2, j, N)] : x[IX(N - 2, j, N)];\r\n    }\r\n\r\n    x[IX(0, 0, N)] = 0.5 * (x[IX(1, 0, N)] + x[IX(0, 1, N)]);\r\n    x[IX(0, N - 1, N)] = 0.5 * (x[IX(1, N - 1, N)] + x[IX(0, N - 2, N)]);\r\n    x[IX(N - 1, 0, N)] = 0.5 * (x[IX(N - 2, 0, N)] + x[IX(N - 1, 1, N)]);\r\n    x[IX(N - 1, N - 1, N)] = 0.5 * (x[IX(N - 2, N - 1, N)] + x[IX(N - 1, N - 2, N)]);\r\n\r\n    x[IX(Math.floor(N * 0.5), 0, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), 1, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), 2, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), 3, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), 4, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), 5, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), 6, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), 7, N)] = 0;\r\n\r\n    x[IX(Math.floor(N * 0.5), N - 1, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), N - 2, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), N - 3, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), N - 4, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), N - 5, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), N - 6, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), N - 7, N)] = 0;\r\n    x[IX(Math.floor(N * 0.5), N - 8, N)] = 0;\r\n\r\n    for (let i = 0 ; i < ids.length; ++i) {\r\n      x[IX(ids[i][0], ids[i][1], N)] = 0;\r\n    }\r\n};","import { diffuse, project, advect, IX } from './Utility';\r\n\r\nimport { getFalseColor } from 'njscore';\r\n// Fluid cube class\r\nexport class Fluid {\r\n\r\n  public N = 100;\r\n  public iter = 16;\r\n  public SCALE = 4;\r\n  public t = 0;\r\n\r\n  public visScale = 0.01;\r\n\r\n  // size: number;\r\n  public dt: number;\r\n  public diff: number;\r\n  public visc: number;\r\n\r\n  public s: Float32Array;\r\n  public density: Float32Array;\r\n  public Vx: Float32Array;\r\n  public Vy: Float32Array;\r\n  public Vx0: Float32Array;\r\n  public Vy0: Float32Array;\r\n\r\n  public cellFixed: number[][] = [];\r\n\r\n  constructor(dt: number, diffusion: number, viscosity: number) {\r\n    // this.size = this.SCALE;\r\n    this.dt = dt;\r\n    this.diff = diffusion;\r\n    this.visc = viscosity;\r\n\r\n    this.s = new Float32Array(this.N * this.N).fill(0);\r\n    this.density = new Float32Array(this.N * this.N).fill(0.01);\r\n\r\n    this.Vx = new Float32Array(this.N * this.N).fill(0);\r\n    this.Vx0 = new Float32Array(this.N * this.N).fill(0);\r\n\r\n    this.Vy = new Float32Array(this.N * this.N).fill(0);\r\n    this.Vy0 = new Float32Array(this.N * this.N).fill(0);\r\n  }\r\n  // step method\r\n  public step() {\r\n    // let N = this.size;\r\n    let visc = this.visc;\r\n    let diff = this.diff;\r\n    let dt = this.dt;\r\n    let Vx = this.Vx;\r\n    let Vy = this.Vy;\r\n    let Vx0 = this.Vx0;\r\n    let Vy0 = this.Vy0;\r\n    let s = this.s;\r\n    let density = this.density;\r\n\r\n    diffuse(1, Vx0, Vx, visc, dt, this.N, this.iter, this.cellFixed);\r\n    diffuse(2, Vy0, Vy, visc, dt, this.N, this.iter, this.cellFixed);\r\n\r\n    project(Vx0, Vy0, Vx, Vy, this.N, this.iter, this.cellFixed);\r\n\r\n    advect(1, Vx, Vx0, Vx0, Vy0, dt, this.N, this.cellFixed);\r\n    advect(2, Vy, Vy0, Vx0, Vy0, dt, this.N, this.cellFixed);\r\n\r\n    project(Vx, Vy, Vx0, Vy0, this.N, this.iter, this.cellFixed);\r\n    diffuse(0, s, density, diff, dt, this.N, this.iter, this.cellFixed);\r\n    advect(0, density, s, Vx, Vy, dt, this.N, this.cellFixed);\r\n\r\n  }\r\n\r\n  // method to add density\r\n  public addDensity(x: number, y: number, amount: number) {\r\n    let index = IX(x, y, this.N);\r\n    this.density[index] += amount;\r\n  }\r\n  // method to add velocity\r\n  public addVelocity(x: number, y: number, amountX: number, amountY: number) {\r\n    let index = IX(x, y, this.N);\r\n    this.Vx[index] += amountX;\r\n    this.Vy[index] += amountY;\r\n  }\r\n  // function to render density\r\n  public renderD(ctx: CanvasRenderingContext2D) {\r\n    for (let i = 0; i < this.N; i++) {\r\n      for (let j = 0; j < this.N; j++) {\r\n        let x = i * this.SCALE;\r\n        let y = j * this.SCALE;\r\n        let d = this.density[IX(i, j, this.N)];\r\n\r\n        // let col = `rgb(${(d + 50) % 255}, 200,${d})`;\r\n        // console.log('ddd', `${(d + 50) % 255}, 200,${d}`);\r\n        // console.log(this.density);\r\n        // fill(d);\r\n        // noStroke();\r\n        // rect(x, y, this.SCALE, this.SCALE);\r\n        // console.log(d);\r\n        if (d === 0) {\r\n          ctx.fillStyle = `rgb(255, 255, 255)`;\r\n        } else {\r\n          const col = getFalseColor(d * this.visScale);\r\n          ctx.fillStyle = `rgb(${col[0]}, ${col[1]},${col[2]})`;\r\n        }\r\n        ctx.beginPath();\r\n        ctx.rect(x, y, this.SCALE, this.SCALE);\r\n        ctx.fill();\r\n        ctx.lineWidth = 0.2;\r\n        ctx.strokeStyle = '#ff0000';\r\n        // ctx.stroke()\r\n      }\r\n    }\r\n  }\r\n\r\n  // function to render velocity\r\n  public renderV(ctx: CanvasRenderingContext2D) {\r\n    for (let i = 0; i < this.N; i++) {\r\n      for (let j = 0; j < this.N; j++) {\r\n        let x = i * this.SCALE;\r\n        let y = j * this.SCALE;\r\n        // let vx = this.Vx[IX(i, j, k)];\r\n        // let vy = this.Vy[IX(i, j, k)];\r\n        let vx = this.Vx[IX(i, j, this.N)];\r\n        let vy = this.Vy[IX(i, j, this.N)];\r\n        // this.canvas.stroke(0);\r\n\r\n        if (!(Math.abs(vx) < 0.1 && Math.abs(vy) <= 0.1)) {\r\n          ctx.lineWidth = 2;\r\n          ctx.beginPath();\r\n          ctx.moveTo(x, y);\r\n          ctx.lineTo(x + vx * this.SCALE, y + vy * this.SCALE);\r\n          ctx.stroke();\r\n        //   line(x, y, x + vx * this.SCALE, y + vy * this.SCALE);\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n}","import { Fluid } from './Core/Fluid';\nimport { initUI } from './UI';\n\nimport { IX } from './Core/Utility'\n\nimport { getImgFromURL } from '../../../../lib'\n\nexport class FluidSystem {\n\n    public divText: HTMLElement;\n    public mouse: number[];\n    public pts: number[][];\n\n    public fluid: Fluid;\n\n    public t = 0.0;\n\n    public vecs: number[][] = [];\n\n    public emmiters: number[][] = [];\n    public xx = 1;\n    public yy = 1;\n\n    public img: HTMLImageElement;\n    public activated = false;\n    public showVec = false;\n    public url: string = ''\n\n    constructor(div, divUI) {\n        //   super(div)\n        // super(SceneCreativeCoding);\n        this.init();\n        this.initUI(divUI);\n\n        let url\n        // url = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint_01.jpg'\n        // url = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint_01.jpg';\n        // url = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png';\n        // url = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.jpg';\n        // url = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint_02.jpg';\n        // url = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint_03.jpg';\n        // url = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint_04.jpg';\n        // url = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/Boston.jpg'\n        url = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/Boston_02.jpg';\n        // url = '';\n        this.importImg(url);\n    }\n    public importImg(url: string) {\n        this.url = url;\n\n        getImgFromURL(url).then((img: HTMLImageElement) => {\n            this.img = img;\n\n            // console.log(img, img.width, img.height)\n\n\n\n            // console.log(img)\n            // this.img.onload = (ev) => {\n            // this.update(img);\n\n\n            img.onload = () => {\n                // this.img = img;\n                // console.log('ddd', this.img)\n\n                //   this.ctx.canvas.width = img.width;\n                //   this.ctx.canvas.height = img.height;\n\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n                if (ctx) {\n                    ctx.drawImage(this.img, 0, 0, this.fluid.N, this.fluid.N);\n\n                    const data: ImageData | undefined = ctx.getImageData(0, 0, this.fluid.N, this.fluid.N);\n                    // const width = ctx.canvas.width;\n\n                    if (data) {\n\n                        for (let y = 0; y < this.fluid.N; ++y) {\n                            for (let x = 0; x < this.fluid.N; ++x) {\n                                const d = data.data[(x + (this.fluid.N * y)) * 4];\n                                if (d < 200) {\n\n                                    this.fluid.cellFixed.push([x, y]);\n                                }\n\n                            }\n                        }\n\n                    }\n                    // console.log(this.fluid)\n\n                }\n\n            };\n\n            this.init();\n        });\n    }\n    public initUI(divUI) {\n        initUI(divUI, this);\n        //   initUI(this.divHost, this);\n\n        this.emmiters.push([Math.floor(0.5 * this.fluid.N), Math.floor(0.5 * this.fluid.N)]);\n    }\n    public init() {\n        this.fluid = new Fluid(0.02, 0, 0.0000001);\n        this.emmiters = [];\n        this.emmiters.push([Math.floor(0.5 * this.fluid.N), Math.floor(0.5 * this.fluid.N)]);\n        this.activated = true;\n\n        //   this.isStatic = false;\n        //   this.start();\n    }\n    public render(ctx: CanvasRenderingContext2D): void {\n        this.activated && this.RenderIndependentCanvas(ctx);\n    }\n    public RenderIndependentCanvas(ctx: CanvasRenderingContext2D) {\n\n\n        for (let k = 0; k < this.emmiters.length; ++k) {\n            let cx = this.emmiters[k][0];\n            let cy = this.emmiters[k][1];\n            // console.log('cx, cy', cx, cy)\n            for (let i = -1; i <= 1; i++) {\n                for (let j = -1; j <= 1; j++) {\n                    // this.fluid.addDensity(cx + i, cy + j, random(50, 150));\n                    // console.log((Math.random() * 100) + 50)\n                    this.fluid.addDensity(cx + i, cy + j, (Math.random() * 5));\n                }\n            }\n        }\n\n        for (let k = 0; k < this.emmiters.length; ++k) {\n            let cx = this.emmiters[k][0];\n            let cy = this.emmiters[k][1];\n            for (let i = 0; i < 2; i++) {\n                // let angle = noise(t) * Math.PI * 2;\n                // let v = p5.Vector.fromAngle(angle);\n                // v.mult(0.2);\n                // this.t += 0.01;\n                // this.fluid.addVelocity(cx, cy, v.x, v.y);\n                this.fluid.addVelocity(cx, cy, this.xx, this.yy);\n                // this.fluid.addVelocity(cx, cy, 1 , 1);\n            }\n        }\n\n        this.fluid.step();\n        this.fluid.renderD(ctx);\n        this.showVec && this.fluid.renderV(ctx);\n\n        // if (this.img) {\n        //   ctx.drawImage(this.img, 0, 0);\n        // }\n    }\n    public mouseClick(x: number, y: number): void {\n        const xx = Math.floor(x / this.fluid.SCALE);\n        const yy = Math.floor(y / this.fluid.SCALE);\n        this.emmiters.push([xx, yy]);\n    }\n    public mouseDrag(x: number, y: number) {\n        const xx = Math.floor(x / this.fluid.SCALE);\n        const yy = Math.floor(y / this.fluid.SCALE);\n        this.fluid.cellFixed.push([xx, yy]);\n    }\n    public rotation(angle: number) {\n        const theta = angle * Math.PI / 180;\n        this.xx = Math.cos(theta);\n        this.yy = Math.sin(theta);\n    }\n    public mouseMove(x: number, y: number) {\n        const xx = Math.floor(x / this.fluid.SCALE);\n        const yy = Math.floor(y / this.fluid.SCALE);\n        const d = this.fluid.density[xx + yy * this.fluid.N];\n        if (d) {\n            this.divText.innerHTML = `${d}`;\n        }\n    }\n    public toJson() {\n        // this.fluid.toJson();\n\n        const data = []\n\n        for (let i = 0; i < this.fluid.N; i++) {\n            for (let j = 0; j < this.fluid.N; j++) {\n                let density = this.fluid.density[IX(i, j, this.fluid.N)];\n                let x = i * this.fluid.SCALE;\n                let y = j * this.fluid.SCALE;\n                data.push({\n                    x, y, density\n                })\n            }\n        }\n\n        // console.log(data)\n        downloadJson(JSON.stringify(data));\n    }\n    public toPng() {\n        // console.log('png');\n    }\n    public toObj() {\n        // console.log('obj');\n\n    }\n}\n\nconst downloadJson = (collection, name = 'download',) => {\n    const link = document.createElement('a');\n    link.href = 'data:application/json;charset=utf-8,' + encodeURIComponent(collection);\n    link.download = `${name}`;\n    link.click();\n};","import { FluidSystem } from '../';\n\nexport const initUI = (divContainer, fluidSimulation: FluidSystem) => {\n  let divHost = document.createElement('div');\n  divHost.style.position = 'absolute';\n  // divHost.style.left = '450px';\n  // divHost.style.height = '50px';\n  divContainer.appendChild(divHost);\n\n  let divBtn = document.createElement('button');\n  divBtn.textContent = 'Reset';\n  divBtn.style.width = '60px';\n  divBtn.style.height = '20px';\n  divBtn.onclick = () => {\n    fluidSimulation.init();\n  };\n  divHost.appendChild(divBtn);\n\n  let divInput = document.createElement('div');\n  let inputURL = document.createElement('input');\n  inputURL.value = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.jpg';\n  inputURL.addEventListener('keydown', (e: KeyboardEvent) => {\n    if (e.code === 'Enter') {\n      fluidSimulation.importImg(inputURL.value);\n    }\n  });\n  divInput.appendChild(inputURL);\n  divHost.appendChild(divInput);\n\n  let div5 = document.createElement('div');\n  div5.innerHTML = 'time';\n  div5.style.height = '50px';\n  div5.style.width = '100px';\n  divHost.appendChild(div5);\n\n  let sliderD = document.createElement('input');\n  sliderD.type = 'range';\n  sliderD.min = '0.0001';\n  sliderD.max = '0.7';\n  sliderD.step = '0.0001';\n  sliderD.oninput = () => {\n    const val = +sliderD.value as number;\n    fluidSimulation.fluid.dt = val;\n    // console.log('fd.fluid.visScale', fluidSimulation.fluid.visScale);\n  };\n  div5.appendChild(sliderD);\n\n  let div = document.createElement('div');\n  div.innerHTML = 'Vis Scale';\n  div.style.height = '50px';\n  div.style.width = '100px';\n  divHost.appendChild(div);\n\n  let sliderA = document.createElement('input');\n  sliderA.type = 'range';\n  sliderA.min = '0.000001';\n  sliderA.max = '0.8';\n  sliderA.step = '0.00001';\n  sliderA.oninput = () => {\n    const val = +sliderA.value as number;\n    fluidSimulation.fluid.visScale = val;\n    // console.log('fd.fluid.visScale', fluidSimulation.fluid.visScale);\n  };\n  div.appendChild(sliderA);\n\n  const div2 = document.createElement('div');\n  div2.innerHTML = 'Viscosity';\n  // div2.style.backgroundColor = '#ff0000';\n  div2.style.height = '50px';\n  div2.style.width = '100px';\n\n  divHost.appendChild(div2);\n\n  const sliderB = document.createElement('input');\n  sliderB.type = 'range';\n  sliderB.min = '0.000000';\n  sliderB.max = '0.0001';\n  sliderB.step = '0.0000001';\n  sliderB.oninput = () => {\n    const val = +sliderB.value as number;\n    fluidSimulation.fluid.visc = val;\n    // console.log('fd.fluid.visScale', fluidSimulation.fluid.visScale);\n  };\n  div2.appendChild(sliderB);\n\n  const div3 = document.createElement('div');\n  div3.innerHTML = 'rotation';\n  // div3.style.backgroundColor = '#ff0000';\n  div3.style.height = '50px';\n  div3.style.width = '100px';\n\n  divHost.appendChild(div3);\n\n  const sliderC = document.createElement('input');\n  sliderC.type = 'range';\n  sliderC.min = '0.000000';\n  sliderC.max = '360';\n  sliderC.step = '0.0000001';\n  sliderC.oninput = () => {\n    const val = +sliderC.value as number;\n    fluidSimulation.rotation(val);\n    // console.log('val', val);\n  };\n  div3.appendChild(sliderC);\n\n  const divText = document.createElement('div');\n  divText.innerHTML = 'rotation';\n  // divText.style.backgroundColor = '#ff0000';\n  divText.style.height = '50px';\n  divText.style.width = '100px';\n  fluidSimulation.divText = divText;\n  divHost.appendChild(divText);\n\n\n  const divVecViz = document.createElement('div');\n  divVecViz.innerHTML = 'Show Vec';\n  // divVecViz.style.backgroundColor = '#ff0000';\n  divVecViz.style.height = '50px';\n  divVecViz.style.width = '100px';\n  // fluidSimulation.divVecViz = divVecViz;\n  divHost.appendChild(divVecViz);\n\n  const inputFile = document.createElement('input');\n  inputFile.type = 'checkbox';\n  inputFile.onchange = () => {\n    fluidSimulation.showVec = !fluidSimulation.showVec;\n  }\n  divVecViz.appendChild(inputFile);\n\n  const divToJson = document.createElement('button');\n  divToJson.innerHTML = 'Json';\n  // divToJson.style.backgroundColor = '#ff0000';\n  divToJson.style.height = '20px';\n  divToJson.style.width = '50px';\n  divToJson.onclick = () => {\n    fluidSimulation.toJson();\n  }\n  divHost.appendChild(divToJson);\n\n  const divToObj = document.createElement('button');\n  divToObj.innerHTML = 'obj';\n  // divToObj.style.backgroundColor = '#ff0000';\n  divToObj.style.height = '20px';\n  divToObj.style.width = '50px';\n  divToObj.onclick = () => {\n    fluidSimulation.toObj();\n  }\n  divHost.appendChild(divToObj);\n\n  const divToPng = document.createElement('button');\n  divToPng.innerHTML = 'png';\n  // divToPng.style.backgroundColor = '#ff0000';\n  divToPng.style.height = '20px';\n  divToPng.style.width = '50px';\n  divToPng.onclick = () => {\n    fluidSimulation.toPng();\n  }\n  divHost.appendChild(divToPng);\n\n  const divRefer = document.createElement('div');\n  divRefer.innerHTML = 'Ref:<br>Fluid Simulation <br>By Daniel Shiffman';\n  // divRefer.style.backgroundColor = '#ff0000';\n  divRefer.style.height = '50px';\n  divRefer.style.width = '300px';\n  divRefer.style.fontSize = '14px';\n  divHost.appendChild(divRefer);\n\n}","// import { DefinitionIndeCanvasCore } from '../../Core/DefinitionIndeCanvasCore';\r\n// import { SceneCreativeCoding } from '../..';\r\n\r\nimport { FluidSystem } from './FluidSystem';\r\n\r\n\r\nimport { RendererCanvas, getImgFromURL } from '../../../lib'\r\n\r\nexport class Solution {\r\n  public divHost: HTMLElement;\r\n\r\n  renderer: Renderer;\r\n\r\n  constructor(id: string) {\r\n    this.divHost = document.getElementById(id)\r\n\r\n    // Center align\r\n    this.divHost.style.display = 'flex';\r\n    this.divHost.style.alignItems = 'center';\r\n\r\n    const div = document.createElement('div');\r\n    div.style.marginLeft = 'auto';\r\n    div.style.marginRight = 'auto';\r\n    div.style.backgroundColor = 'rgba(0,0,0,0.1)';\r\n    // div.style.backgroundColor = '#555';\r\n    div.style.width = '100%';\r\n    div.style.height = '600px';\r\n    div.style.display = 'flex';\r\n    this.divHost.appendChild(div);\r\n\r\n    // TODO\r\n    // You code goes here for one time operation\r\n\r\n    const divUI = document.createElement('div');\r\n    divUI.style.marginLeft = 'auto';\r\n    divUI.style.marginRight = 'auto';\r\n    // divUI.style.backgroundColor = 'rgba(0,0,0)';\r\n    divUI.style.width = '200px';\r\n    divUI.style.height = '600px';\r\n    divUI.style.marginLeft = '50px';\r\n    div.appendChild(divUI);\r\n\r\n    const divCanvas = document.createElement('div');\r\n    divCanvas.style.marginLeft = 'auto';\r\n    divCanvas.style.marginRight = 'auto';\r\n    // divCanvas.style.backgroundColor = '#222';\r\n    divCanvas.style.width = '100%';\r\n    divCanvas.style.height = '600px';\r\n    div.appendChild(divCanvas);\r\n\r\n    this.renderer = new Renderer(divCanvas, divUI);\r\n\r\n    // this.fluidSystem = new FluidSimulation(div)\r\n\r\n    // console.log(this.renderer);\r\n    // !! you should execute it for rendering\r\n    // this.start();\r\n  }\r\n  public destroy() {\r\n    // this.fluidSystem.destroy();\r\n    while (this.divHost.lastElementChild) {\r\n      this.divHost.removeChild(this.divHost.lastElementChild);\r\n    }\r\n  }\r\n}\r\n\r\nexport class Renderer extends RendererCanvas {\r\n  public fluidSystem: FluidSystem;\r\n  constructor(div: any, divUI: any) {\r\n      super(div);\r\n      this.canvas.style.position = 'relative';\r\n      this.canvas.style.width = '100%';\r\n      this.canvas.style.height = '100%';\r\n\r\n      this.fluidSystem = new FluidSystem(div, divUI);\r\n      this.start();\r\n  }\r\n  public render(ctx: CanvasRenderingContext2D): void {\r\n    this.fluidSystem.render(ctx);\r\n  }\r\n  public mouseClick(x: number, y: number): void {\r\n      this.fluidSystem.mouseClick(x, y);\r\n  }\r\n  public mouseDrag(x: number, y: number): void {\r\n      this.fluidSystem.mouseDrag(x, y)\r\n  }\r\n  public mouseMove(x: number, y: number): void {\r\n    this.fluidSystem.mouseMove(x, y)\r\n}\r\n}\r\n"],"names":["diffuse","b","x","x0","diff","dt","N","iter","ids","a","lin_solve","c","cRecip","t","j","i","IX","set_bnd","y","project","velocX","velocY","p","div","advect","d","d0","i0","i1","j0","j1","s0","s1","t0","t1","tmp1","tmp2","ifloat","jfloat","dtx","dty","Nfloat","Math","floor","i0i","i1i","j0i","j1i","length","Fluid","constructor","diffusion","viscosity","SCALE","visScale","visc","s","density","Vx","Vy","Vx0","Vy0","cellFixed","this","Float32Array","fill","step","addDensity","amount","index","addVelocity","amountX","amountY","renderD","ctx","fillStyle","col","getFalseColor","beginPath","rect","lineWidth","strokeStyle","renderV","vx","vy","abs","moveTo","lineTo","stroke","FluidSystem","divUI","url","divText","mouse","pts","fluid","vecs","emmiters","xx","yy","img","activated","showVec","init","initUI","importImg","getImgFromURL","then","onload","document","createElement","getContext","drawImage","data","getImageData","push","divContainer","fluidSimulation","divHost","style","position","appendChild","divBtn","textContent","width","height","onclick","divInput","inputURL","value","addEventListener","e","code","div5","innerHTML","sliderD","type","min","max","oninput","val","sliderA","div2","sliderB","div3","sliderC","rotation","divVecViz","inputFile","onchange","divToJson","toJson","divToObj","toObj","divToPng","toPng","divRefer","fontSize","render","RenderIndependentCanvas","k","cx","cy","random","mouseClick","mouseDrag","angle","theta","PI","cos","sin","mouseMove","downloadJson","JSON","stringify","collection","name","link","href","encodeURIComponent","download","click","Solution","id","renderer","getElementById","display","alignItems","marginLeft","marginRight","backgroundColor","divCanvas","Renderer","destroy","lastElementChild","removeChild","RendererCanvas","super","fluidSystem","canvas","start"],"sourceRoot":""}
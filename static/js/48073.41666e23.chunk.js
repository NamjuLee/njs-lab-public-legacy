"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[48073],{48073:(e,t,i)=>{i.r(t),i.d(t,{Solution:()=>n});class n{constructor(e){this.divHost=void 0,this.canvas=void 0,this.ctx=void 0,this.device=void 0,this.format=void 0,this.size=void 0,this.pipelineObj=void 0,this.divHost=document.getElementById(e),this.canvas=document.createElement("canvas"),this.divHost.appendChild(this.canvas),this.initWebGPU()}async initWebGPU(){if(!navigator.gpu)throw new Error("Not Support WebGPU");const e=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!e)throw new Error("No Adapter Found");const t=await e.requestDevice();this.ctx=this.canvas.getContext("webgpu");const i=navigator.gpu.getPreferredCanvasFormat?navigator.gpu.getPreferredCanvasFormat():this.ctx.getPreferredFormat(e);window.devicePixelRatio;this.canvas.width=this.divHost.clientWidth,this.canvas.height=this.divHost.clientHeight,this.ctx.configure({device:t,format:i,alphaMode:"opaque"}),this.size={width:this.canvas.width,height:this.canvas.height},this.device=t,this.format=i,this.initPipeline(this.device,this.format)}async initPipeline(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"line-list";"line-strip"===n&&(i="uint32");const a=(e=>{let t="";for(let i=0;i<e;i++){let e=2*Math.random()-1,i=2*Math.random()-1;t+="vec2<f32>(".concat(e,", ").concat(i,"),")}return console.log(t),{vertex:"\n        @vertex\n        fn main(@builtin(vertex_index) VertexIndex: u32) -> @builtin(position) vec4<f32> {\n            var pos = array<vec2<f32>, ".concat(e,">(\n                ").concat(t,"           \n                // vec2<f32>(-0.5,  0.7),\n                // vec2<f32>( 0.3,  0.6),\n                // vec2<f32>( 0.5,  0.3),\n                // vec2<f32>( 0.4, -0.5),\n                // vec2<f32>(-0.4, -0.4),\n                // vec2<f32>(-0.3,  0.2)\n            );\n            return vec4<f32>(pos[VertexIndex], 0.0, 1.0);\n        }"),fragment:"\n        @fragment\n        fn main() ->  @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 1.0, 1.0, 1.0);\n        }"}})(10),r=e.createRenderPipeline({layout:"auto",vertex:{module:e.createShaderModule({code:a.vertex}),entryPoint:"main"},fragment:{module:e.createShaderModule({code:a.fragment}),entryPoint:"main",targets:[{format:t}]},primitive:{topology:n,stripIndexFormat:i}}),o=e.createCommandEncoder(),s=this.ctx.getCurrentTexture().createView(),c=o.beginRenderPass({colorAttachments:[{view:s,clearValue:[0,0,0,1],loadOp:"clear",storeOp:"store"}]});c.setPipeline(r),c.draw(10),c.end(),e.queue.submit([o.finish()])}destroy(){for(this.device.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}}}]);
//# sourceMappingURL=48073.41666e23.chunk.js.map
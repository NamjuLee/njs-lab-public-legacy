{"version":3,"file":"static/js/19866.306dbf46.chunk.js","mappings":"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","sources":["njslab/Workshop/workshop-pixel/04_pixelMapConnection/index.ts","njslab/Workshop/workshop-vector/base/RendererCanvas.ts"],"sourcesContent":["import { RendererCanvas } from '../../workshop-vector/base/RendererCanvas';\r\n\r\nexport class Solution extends RendererCanvas {\r\n    t: number = 0.0;\r\n    pMap: PixelMap = undefined;\r\n    constructor(id: string) {\r\n        super(document.getElementById(id) as HTMLDivElement);\r\n        this.ctx.translate(this.ctx.canvas.width * 0.5, this.ctx.canvas.height * 0.5);\r\n        this.init();\r\n    }\r\n    public init() {\r\n        const size = 300;\r\n        this.pMap = new PixelMap(new Vector3(-size, -size, 0), new Vector3(size, size, 0) ,5, 5);\r\n        this.start();\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n\r\n        this.pMap.render(ctx);\r\n    }\r\n    public mouseMove(x: number, y: number): void {\r\n        this.pMap.picking(x - this.ctx.canvas.width * 0.5, y - this.ctx.canvas.height * 0.5);\r\n    }\r\n\r\n    public mouseClick(x: number, y: number): void {\r\n        //\r\n    }\r\n}\r\n\r\nclass PixelMap {\r\n    public pixelList: Pixel[] = []\r\n    public minV: Vector3;\r\n    public maxV: Vector3;\r\n    public rx = 10;\r\n    public ry = 10;\r\n    public intervalX;\r\n    public intervalY;\r\n    constructor(minV: Vector3, maxV: Vector3, rx: number, ry: number) {\r\n        this.minV = minV;\r\n        this.maxV = maxV;\r\n        this.rx = rx;\r\n        this.ry = ry;\r\n        this.init()\r\n        this.initGridNeighbor();\r\n    }\r\n    public init(){\r\n        this.pixelList = []\r\n        const x = this.minV.x\r\n        const y = this.minV.y\r\n\r\n        this.intervalX = (this.maxV.x - this.minV.x) / (this.rx - 1)\r\n        this.intervalY = (this.maxV.y - this.minV.y) / (this.ry - 1)\r\n        \r\n        for(let j = 0 ; j < this.ry; j++) {\r\n            for(let i = 0 ; i < this.rx; i++) {\r\n                const xV = x + i * this.intervalX;\r\n                const yV = y + j * this.intervalY;\r\n\r\n                let pix = new Pixel(this, xV , yV , 0);\r\n                pix.xi = i;\r\n                pix.yi = j;\r\n                this.pixelList.push(pix);\r\n            }\r\n        }\r\n\r\n    }\r\n    private initGridNeighbor() {\r\n        for (let j = 0; j < this.ry; ++j) {\r\n            for (let i = 0; i < this.rx; ++i) {\r\n                let k = i + j * this.rx;\r\n                let px = this.pixelList[k];\r\n                if (i > 0) { px.nPix.push(this.pixelList[k - 1]); }\r\n                if (i < this.rx - 1) { px.nPix.push(this.pixelList[k + 1]); }\r\n                if (j > 0) { px.nPix.push(this.pixelList[k - this.rx]); }\r\n                if (j < this.ry - 1) { px.nPix.push(this.pixelList[k + this.rx]); }\r\n                if ((i > 0) && (j < this.ry - 1)) { px.nPix.push(this.pixelList[k + this.rx - 1]); }\r\n                if ((i > 0) && (j > 0)) { px.nPix.push(this.pixelList[k - this.rx - 1]); }\r\n                if ((i < this.rx - 1) && (j < this.ry - 1)) { px.nPix.push(this.pixelList[k + this.rx + 1]); }\r\n                if ((i < this.rx - 1) && (j > 0)) { px.nPix.push(this.pixelList[k - this.rx + 1]); }\r\n            }\r\n        }\r\n    }\r\n    public picking(x: number, y: number) {\r\n        const mv = new Vector3(x,y,0)\r\n        let dis = Number.MAX_VALUE;\r\n        let id = -1\r\n        for(let i = 0 ; i < this.pixelList.length; ++i) {\r\n           const theDis = distance(this.pixelList[i].vec, mv)\r\n           if (dis > theDis) {\r\n            dis = theDis\r\n            id = i;\r\n           }\r\n           this.pixelList[i].hover = false\r\n        }\r\n        if (id > -1) {\r\n            this.pixelList[id].hover = true\r\n        }\r\n    }\r\n    public render(ctx) {\r\n        this.pixelList.forEach((p: Pixel) => {\r\n            p.render(ctx);\r\n        })\r\n    }\r\n}\r\n\r\nclass Pixel {\r\n    public xi: number\r\n    public yi: number\r\n    public pMap: PixelMap;\r\n    public vec: Vector3;\r\n    public hover: boolean = false;\r\n    public nPix: Pixel[] = [];\r\n    constructor(pMap: PixelMap, x: number, y: number, z: number) {\r\n        this.pMap = pMap;\r\n        this.vec = new Vector3(x,y,z);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        const width = this.pMap.intervalX \r\n        const height = this.pMap.intervalY\r\n\r\n        ctx.beginPath()\r\n        ctx.rect(this.vec.x - width * 0.5, this.vec.y - height * 0.5, width, height)\r\n        ctx.closePath()\r\n        ctx.stroke()\r\n        if (this.hover) {\r\n            ctx.fillStyle = '#555';\r\n            ctx.fill()\r\n        } \r\n\r\n        ctx.beginPath();\r\n        ctx.arc(this.vec.x, this.vec.y, this.vec.r, 0, Math.PI * 2.0);\r\n        ctx.closePath();\r\n        if (this.hover) {\r\n            ctx.fillStyle = '#999';\r\n        } else {\r\n            ctx.fillStyle = '#333';\r\n        }\r\n        ctx.fill();\r\n\r\n        if (this.hover) {\r\n            for(let i = 0 ; i < this.nPix.length; ++i) {\r\n                ctx.beginPath();\r\n                ctx.moveTo(this.vec.x, this.vec.y)\r\n                ctx.lineTo(this.nPix[i].vec.x, this.nPix[i].vec.y)\r\n                ctx.closePath();\r\n                ctx.stroke()\r\n            }\r\n\r\n            ctx.strokeText(`x: ${this.xi}, y: ${this.yi}` ,this.vec.x, this.vec.y)\r\n        }\r\n\r\n        \r\n    }\r\n}\r\n\r\nclass Vector3 {\r\n    public x: number = 0.0;\r\n    public y: number = 0.0;\r\n    public z: number = 0.0;\r\n    public r: number = 3\r\n    constructor(x,y,z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n}\r\n\r\n\r\nconst distance = (v0: Vector3, v1: Vector3) => {\r\n    return Math.sqrt(distance2(v0, v1));\r\n}\r\nconst distance2 = (v0: Vector3, v1: Vector3) => {\r\n    return (v0.x - v1.x) * (v0.x - v1.x) + (v0.y - v1.y) * (v0.y - v1.y) + (v0.z - v1.z) * (v0.z - v1.z);\r\n}","export class RendererCanvas {\r\n    public divHost: HTMLDivElement;\r\n    public canvas: HTMLCanvasElement;\r\n    public ctx: CanvasRenderingContext2D;\r\n    public isDown: boolean = false;\r\n    public debugMode: boolean = false;\r\n    public isStatic: boolean = false;\r\n    public m: number[] = [0,0];\r\n\r\n    private prevent: boolean = false;\r\n    private delay: number = 250;\r\n    private timer: NodeJS.Timer | number;\r\n    private isDrag: boolean = false;\r\n\r\n    constructor(div: HTMLDivElement) {\r\n        this.divHost = div;\r\n        const bounding = this.divHost.getBoundingClientRect();\r\n        this.canvas = document.createElement('canvas') as HTMLCanvasElement;\r\n        // this.canvas.style.position = 'absolute';\r\n        this.canvas.width = bounding.width;\r\n        this.canvas.height = bounding.height;\r\n        this.divHost.appendChild(this.canvas);\r\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n        this.canvas.onclick = (e: MouseEvent) => {\r\n            this.timer = setTimeout(() => {\r\n                if (!this.prevent) {\r\n                    this.mouseClick(e.offsetX, e.offsetY);\r\n                }\r\n                this.isDrag = false;\r\n                this.prevent = false;\r\n            },\r\n                this.delay);\r\n        };\r\n        this.canvas.onwheel = (e: WheelEvent) => {\r\n            this.mouseWheel(e);\r\n        };\r\n        this.canvas.ondblclick = (e: MouseEvent) => {\r\n            this.mouseUpdate(e.offsetX, e.offsetY);\r\n            clearTimeout(this.timer as number);\r\n            this.prevent = true;\r\n            this.mouseDoubleClick(e.offsetX, e.offsetY);\r\n        };\r\n        this.canvas.onmousedown = (e: MouseEvent) => {\r\n            this.mouseUpdate(e.offsetX, e.offsetY);\r\n            this.isDown = true;\r\n            this.mouseDown(e.offsetX, e.offsetY);\r\n        };\r\n        this.canvas.onmouseup = (e: MouseEvent) => {\r\n            this.mouseUpdate(e.offsetX, e.offsetY);\r\n            this.isDown = false;\r\n            this.isDrag = false;\r\n            this.mouseUp(e.offsetX, e.offsetY);\r\n        };\r\n        this.canvas.onmousemove = (e: MouseEvent) => {\r\n            this.mouseUpdate(e.offsetX, e.offsetY);\r\n            if (this.isDown) {\r\n                this.isDrag = true;\r\n                this.prevent = true;\r\n                this.mouseDrag(e.offsetX, e.offsetY);\r\n            } else {\r\n                this.mouseMove(e.offsetX, e.offsetY);\r\n            }\r\n        };\r\n        window.addEventListener('resize', this.resize);\r\n        // this.loop(this.ctx);\r\n    }\r\n    public start() {\r\n        this.loop(this.ctx);\r\n    }\r\n    private resize = () => {\r\n        const bounding = this.divHost.getBoundingClientRect();\r\n        this.canvas.width = bounding.width;\r\n        this.canvas.height = bounding.height;\r\n    }\r\n    public destroy() {\r\n        window.removeEventListener('resize', this.resize);\r\n        this.isStatic = true;\r\n        try {\r\n            while (this.divHost !== undefined && this.divHost.lastElementChild !== undefined) {\r\n                this.divHost.removeChild(this.divHost.lastElementChild);\r\n            }\r\n        } catch (error) { }\r\n        this.destroyPost();\r\n    }\r\n    public destroyPost() {\r\n\r\n    }\r\n    public loop(ctx: CanvasRenderingContext2D) {\r\n        if (this.isStatic) { return; }\r\n        requestAnimationFrame(() => { this.loop(ctx); });\r\n        ctx.clearRect(ctx.canvas.width * -0.5, ctx.canvas.height * -0.5, ctx.canvas.width, ctx.canvas.height);\r\n        this.render(ctx);\r\n        this.renderPost();\r\n    }\r\n    public renderPost() {\r\n        this.renderMouse(this.ctx, this.m[0], this.m[1]);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // Binding needed\r\n    }\r\n    public mouseClick(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('click'); }\r\n    }\r\n    public mouseDoubleClick(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('d-click'); }\r\n    }\r\n    public mouseDown(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('down'); }\r\n    }\r\n    public mouseUp(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('up'); }\r\n    }\r\n    public mouseMove(x: number, y: number) {\r\n\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('move'); }\r\n    }\r\n    public mouseDrag(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('drag'); }\r\n    }\r\n    public mouseWheel(v: WheelEvent) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('wheel', v); }\r\n    }\r\n    public renderMouse(ctx: CanvasRenderingContext2D, x: number, y: number) {\r\n        ctx.fillStyle = '#f00';\r\n        ctx.beginPath();\r\n        ctx.arc(this.m[0], this.m[1], 3, 0, Math.PI * 2.0)\r\n        ctx.fillText(`x: ${this.m[0]}, y:${this.m[1]}`,this.m[0] - 15, this.m[1] - 8)\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    public mouseUpdate(x: number, y: number): void {\r\n        this.m[0] = Math.floor(x - this.canvas.width * 0.5);\r\n        this.m[1] = Math.floor(y - this.canvas.height * 0.5);\r\n    }\r\n}"],"names":["Solution","RendererCanvas","constructor","id","super","document","getElementById","t","pMap","undefined","this","ctx","translate","canvas","width","height","init","size","PixelMap","Vector3","start","render","mouseMove","x","y","picking","mouseClick","minV","maxV","rx","ry","pixelList","intervalX","intervalY","initGridNeighbor","j","i","xV","yV","pix","Pixel","xi","yi","push","k","px","nPix","mv","dis","Number","MAX_VALUE","length","theDis","distance","vec","hover","forEach","p","z","beginPath","rect","closePath","stroke","fillStyle","fill","arc","r","Math","PI","moveTo","lineTo","strokeText","v0","v1","sqrt","distance2","div","divHost","isDown","debugMode","isStatic","m","prevent","delay","timer","isDrag","resize","bounding","getBoundingClientRect","createElement","appendChild","getContext","onclick","e","setTimeout","offsetX","offsetY","onwheel","mouseWheel","ondblclick","mouseUpdate","clearTimeout","mouseDoubleClick","onmousedown","mouseDown","onmouseup","mouseUp","onmousemove","mouseDrag","window","addEventListener","loop","destroy","removeEventListener","lastElementChild","removeChild","error","destroyPost","requestAnimationFrame","clearRect","renderPost","renderMouse","console","log","v","fillText","floor"],"sourceRoot":""}
"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[27716],{27716:(e,a,s)=>{s.r(a),s.d(a,{Solution:()=>n});var t=s(65812),r=s(30386);s(57980);class n{destroy(){}constructor(e){o()}}const o=async()=>{const e=await i();l(e);const a=await c(e),s=p();await u(s,a.inputs,a.labels),d(s,e,a)},i=async()=>{const e=await fetch("https://storage.googleapis.com/tfjs-tutorials/carsData.json");return(await e.json()).map((e=>({mpg:e.Miles_per_Gallon,horsepower:e.Horsepower}))).filter((e=>null!=e.mpg&&null!=e.horsepower))},l=async e=>{const a=e.map((e=>({x:e.horsepower,y:e.mpg})));r.render.scatterplot({name:"Horsepower v MPG"},{values:a},{xLabel:"Horsepower",yLabel:"MPG",height:300})},p=()=>{const e=t.sequential();return e.add(t.layers.dense({inputShape:[1],units:1,useBias:!0})),e.add(t.layers.dense({units:1,useBias:!0})),e},c=async e=>t.tidy((()=>{t.util.shuffle(e);const a=e.map((e=>e.horsepower)),s=e.map((e=>e.mpg)),r=t.tensor2d(a,[a.length,1]),n=t.tensor2d(s,[s.length,1]),o=r.max(),i=r.min(),l=n.max(),p=n.min();return{inputs:r.sub(i).div(o.sub(i)),labels:n.sub(p).div(l.sub(p)),inputMax:o,inputMin:i,labelMax:l,labelMin:p}})),u=async(e,a,s)=>{e.compile({optimizer:t.train.adam(),loss:t.losses.meanSquaredError,metrics:["mse"]});return await e.fit(a,s,{batchSize:32,epochs:30,shuffle:!0,callbacks:r.show.fitCallbacks({name:"Training Performance"},["loss","mse"],{height:200,callbacks:["onEpochEnd"]})})},d=(e,a,s)=>{const{inputMax:n,inputMin:o,labelMin:i,labelMax:l}=s,[p,c]=t.tidy((()=>{const a=t.linspace(0,1,100),s=e.predict(a.reshape([100,1])),r=a.mul(n.sub(o)).add(o),p=s.mul(l.sub(i)).add(i);return[r.dataSync(),p.dataSync()]})),u=Array.from(p).map(((e,a)=>({x:e,y:c[a]}))),d=a.map((e=>({x:e.horsepower,y:e.mpg})));r.render.scatterplot({name:"Model Predictions vs Original Data"},{values:[d,u],series:["original","predicted"]},{xLabel:"Horsepower",yLabel:"MPG",height:300})}}}]);
//# sourceMappingURL=27716.28e368ec.chunk.js.map
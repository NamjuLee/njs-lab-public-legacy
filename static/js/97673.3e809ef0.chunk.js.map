{"version":3,"file":"static/js/97673.3e809ef0.chunk.js","mappings":"oLACO,IAAKA,GAqBX,SArBWA,GAAAA,EAAM,gBAANA,EAAM,kCAANA,EAAM,kCAANA,EAAM,kCAANA,EAAM,oBAANA,EAAM,8BAANA,EAAM,gBAANA,EAAM,sBAANA,EAAM,wBAANA,EAAM,kBAANA,EAAM,oCAANA,EAAM,oCAANA,EAAM,oCAANA,EAAM,oCAANA,EAAM,oCAANA,EAAM,oCAANA,EAAM,oCAANA,EAAM,gCAANA,EAAM,sCAANA,EAAM,kCAqBjB,CArBWA,IAAAA,EAAM,KAsBX,MAAMC,EAAuB,CAEhCC,OAAS,CAAG,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAElBC,gBAAkB,CACN,KAAO,KAAO,KACd,KAAO,KAAO,KACd,KAAO,KAAO,MAE1BC,gBAAiB,CACL,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAElBC,gBAAiB,CACL,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAElBC,SAAU,CACE,KAAO,KAAO,KACd,KAAO,KAAO,KACd,KAAO,KAAO,MAE1BC,cAAe,CACH,MAAQ,KAAO,MACf,KAAO,IAAM,KACb,MAAQ,KAAO,OAE3BC,OAAQ,EACK,GAAI,EAAG,GACP,EAAG,EAAG,EACP,EAAG,EAAG,GAElBC,UAAW,EACE,GAAI,GAAI,GACR,EAAG,GAAI,GACP,GAAI,GAAI,GAErBC,WAAY,CACA,GAAI,EAAG,GACN,EAAG,GAAI,EACR,GAAI,EAAG,GAEnBC,QAAS,EACI,GAAI,GAAI,GACR,EAAG,IAAK,GACR,GAAI,GAAI,GAErBC,iBAAkB,EACL,MAAQ,MAAQ,MAChB,KAAO,GAAI,MACX,MAAQ,MAAQ,MAE7BC,iBAAkB,EACL,GAAI,GAAI,GACR,EAAG,GAAI,GACP,GAAI,GAAI,GAErBC,iBAAkB,EACL,EAAG,EAAG,EACP,EAAG,EAAG,EACN,EAAG,EAAG,GAElBC,iBAAkB,EACL,GAAI,GAAI,EACT,EAAG,EAAG,EACN,EAAG,EAAG,GAElBC,iBAAkB,EACL,GAAI,GAAI,EACT,EAAG,EAAG,GACL,GAAI,GAAI,GAErBC,iBAAkB,EACL,GAAI,GAAI,GACR,EAAG,IAAK,GACR,GAAI,GAAI,GAErBC,iBAAkB,CACN,EAAG,EAAG,EACN,EAAG,EAAG,GACL,GAAI,GAAI,GAErBC,eAAgB,CACJ,EAAG,GAAI,EACP,EAAG,GAAI,EACP,EAAG,GAAI,GAEnBC,kBAAmB,CACP,EAAG,EAAG,EACN,EAAG,EAAG,GACL,GAAI,GAAI,GAErBC,gBAAiB,CACL,EAAG,GAAI,EACP,EAAG,GAAI,EACP,EAAG,GAAI,IAIhB,MAAMC,EASFC,YAAYC,GAA6C,IAA1BC,EAAe,wDAAQ,KARtDC,YAAM,OACNF,YAAM,OACNG,kBAAY,OACZC,QAAU,EAAE,KACZC,OAAS,EAAE,KAEXJ,QAAS,EAGZK,KAAKL,OAASA,EAGdK,KAAKN,OAASA,EACdM,KAAKJ,OAAS,GAEdI,KAAKF,OAASJ,EAAOI,OACrBE,KAAKD,MAAQL,EAAOK,MAEpB,IAAIE,EAAI,EACJC,GAAK,EACLC,EAAI,EACR,GAAIH,KAAKL,OACL,IAAK,IAAIS,EAAI,EAAGA,EAAIJ,KAAKN,OAAOW,KAAKC,OAAQF,GAAK,EAAI,CAE9CD,IAAMH,KAAKN,OAAOK,QAAU,GAC5BE,EAAI,EACJC,KAEAD,IAGJ,IAAIM,EAAI,IAAIC,EAAMR,KAAKN,OAAOW,KAAKD,EAAI,GAAIJ,KAAKN,OAAOW,KAAKD,EAAI,GAAIJ,KAAKN,OAAOW,KAAKD,EAAI,GAAIJ,KAAKN,OAAOW,KAAKD,EAAI,IAC9GK,EAAMC,EAAAA,GAAAA,UAAuBH,EAAEI,EAAGJ,EAAEK,EAAGL,EAAEM,GACzCC,EAAKN,EAAMO,SAAS,IAAKC,KAAKC,MAAMR,GAAMO,KAAKC,MAAMR,GAAMO,KAAKC,MAAMR,IACtES,EAAI,IAAIC,EAAMnB,KAAMC,EAAGD,KAAKF,OAASI,EAAI,EAAGY,GAChDd,KAAKJ,OAAOwB,KAAKF,EACrB,MAEA,IAAK,IAAId,EAAI,EAAGA,EAAIJ,KAAKN,OAAOW,KAAKC,OAAQF,GAAK,EAAI,CAE9CA,EAAIJ,KAAKN,OAAOK,QAAU,GAC1BE,EAAI,EACJC,KAEAD,IAIJ,IAAIM,EAAI,IAAIC,EAAMR,KAAKN,OAAOW,KAAKD,EAAI,GAAIJ,KAAKN,OAAOW,KAAKD,EAAI,GAAIJ,KAAKN,OAAOW,KAAKD,EAAI,GAAIJ,KAAKN,OAAOW,KAAKD,EAAI,IAC9Gc,EAAI,IAAIC,EAAMnB,KAAMC,EAAGD,KAAKF,OAASI,EAAI,EAAGK,GAChDP,KAAKJ,OAAOwB,KAAKF,EACrB,CAEJlB,KAAKqB,kBACT,CACOA,mBACH,IAAK,IAAIlB,EAAI,EAAGA,EAAIH,KAAKF,SAAUK,EAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,KAAKD,QAASK,EAAG,CACjC,IAAIkB,EAAInB,EAAIH,KAAKD,MAAQK,EACrBmB,EAAavB,KAAKJ,OAAO0B,GAExBlB,EAAI,GAAOD,EAAIH,KAAKF,OAAS,IAC9ByB,EAAIC,KAAKJ,KAAKpB,KAAKJ,OAAO0B,EAAItB,KAAKD,MAAQ,IAC3CwB,EAAIE,QAAUzB,KAAKJ,OAAO0B,EAAItB,KAAKD,MAAQ,IAE3CI,EAAIH,KAAKF,OAAS,IAClByB,EAAIC,KAAKJ,KAAKpB,KAAKJ,OAAO0B,EAAItB,KAAKD,QACnCwB,EAAIG,UAAY1B,KAAKJ,OAAO0B,EAAItB,KAAKD,QAGpCK,EAAIJ,KAAKD,MAAQ,GAAOI,EAAIH,KAAKF,OAAS,IAC3CyB,EAAIC,KAAKJ,KAAKpB,KAAKJ,OAAO0B,EAAItB,KAAKD,MAAQ,IAC3CwB,EAAII,SAAW3B,KAAKJ,OAAO0B,EAAItB,KAAKD,MAAQ,IAG5CK,EAAI,IACJmB,EAAIC,KAAKJ,KAAKpB,KAAKJ,OAAO0B,EAAI,IAC9BC,EAAIK,YAAc5B,KAAKJ,OAAO0B,EAAI,IAGlClB,EAAIJ,KAAKD,MAAQ,IACjBwB,EAAIC,KAAKJ,KAAKpB,KAAKJ,OAAO0B,EAAI,IAC9BC,EAAIM,aAAe7B,KAAKJ,OAAO0B,EAAI,IAGlClB,EAAI,GAAOD,EAAI,IAChBoB,EAAIC,KAAKJ,KAAKpB,KAAKJ,OAAO0B,EAAItB,KAAKD,MAAQ,IAC3CwB,EAAIO,UAAY9B,KAAKJ,OAAO0B,EAAItB,KAAKD,MAAQ,IAG7CI,EAAI,IACJoB,EAAIC,KAAKJ,KAAKpB,KAAKJ,OAAO0B,EAAItB,KAAKD,QACnCwB,EAAIQ,YAAc/B,KAAKJ,OAAO0B,EAAItB,KAAKD,QAEtCK,EAAIJ,KAAKD,MAAQ,GAAOI,EAAI,IAC7BoB,EAAIC,KAAKJ,KAAKpB,KAAKJ,OAAO0B,EAAItB,KAAKD,MAAQ,IAC3CwB,EAAIS,WAAahC,KAAKJ,OAAO0B,EAAItB,KAAKD,MAAQ,GAEtD,CAER,CACOkC,OAAOvC,GACVM,KAAKN,OAASA,EAEd,IAAIwC,EAAQ,EAEZ,IAAK,IAAI9B,EAAI,EAAGA,EAAIJ,KAAKN,OAAOW,KAAKC,OAAQF,GAAK,EAC9CJ,KAAKJ,OAAOsC,GAAOC,MAAMxB,EAAIX,KAAKN,OAAOW,KAAKD,EAAI,GAClDJ,KAAKJ,OAAOsC,GAAOC,MAAMvB,EAAIZ,KAAKN,OAAOW,KAAKD,EAAI,GAClDJ,KAAKJ,OAAOsC,GAAOC,MAAMtB,EAAIb,KAAKN,OAAOW,KAAKD,EAAI,GAClDJ,KAAKJ,OAAOsC,GAAOC,MAAMC,EAAIpC,KAAKN,OAAOW,KAAKD,EAAI,GAClD8B,GAER,CACOG,mBAAmBC,GAEtB,IAAK,IAAIpB,KAAKlB,KAAKJ,OACfsB,EAAEqB,oBAAoBD,EAE9B,CAaOE,YAGHxC,KAAKH,aAAe,IAAI4C,UAAUzC,KAAKN,OAAOK,MAAOC,KAAKN,OAAOI,QACjE,IAAIwB,EAAI,EAER,IAAK,IAAIlB,EAAI,EAAGA,EAAIJ,KAAKH,aAAaQ,KAAKC,OAAQF,GAAK,EAAG,CACvD,IAAIK,EAAMT,KAAKJ,OAAO0B,GAAGoB,OACzB1C,KAAKH,aAAaQ,KAAKD,EAAI,GAAKK,EAAIE,EACpCX,KAAKH,aAAaQ,KAAKD,EAAI,GAAKK,EAAIG,EACpCZ,KAAKH,aAAaQ,KAAKD,EAAI,GAAKK,EAAII,EACpCb,KAAKH,aAAaQ,KAAKD,EAAI,GAAKK,EAAI2B,EACpCd,GACJ,CAUA,OAAOtB,KAAKH,YAChB,EAGG,MAAMsB,EA+BT1B,YAAakD,EAAoB1C,EAAWC,EAAWK,GAAW,KA9B3DoC,QAAE,OACFC,QAAE,OACFC,QAAE,OACF3B,OAAC,OAEDnB,MAAQ,GAAI,KACZD,OAAS,GAAI,KAEbgD,KAAO,EAAI,KAEX1C,OAAC,OACDD,OAAC,OAEDsB,aAAO,OACPC,eAAS,OACTC,cAAQ,OAERC,iBAAW,OACXC,kBAAY,OAEZC,eAAS,OACTC,iBAAW,OACXC,gBAAU,OAEVe,IAAM,EAAI,KACVvB,KAAgB,GAAG,KAEnBW,WAAK,OACLO,YAAM,EAGT1C,KAAK2C,GAAKA,EACV3C,KAAKmC,MAAQ3B,EAAMO,SAAS,IAAKR,EAAEI,EAAGJ,EAAEK,EAAGL,EAAEM,GAC7Cb,KAAK0C,OAASlC,EAAMO,SAAS,IAAKR,EAAEI,EAAGJ,EAAEK,EAAGL,EAAEM,GAC9Cb,KAAKkB,EAAI,IAAI8B,EAAAA,GAAS/C,EAAGC,EAAG,EAChC,CACOqC,oBAAoBD,GAEvB,IAAIW,EAAS,EACTC,EAAI,EACJC,EAAI,EACJC,EAAI,OAEaC,IAAjBrD,KAAKyB,UACLyB,GAAKlD,KAAKyB,QAAQU,MAAMxB,EAAI2B,EAAO,GACnCa,GAAKnD,KAAKyB,QAAQU,MAAMvB,EAAI0B,EAAO,GACnCc,GAAKpD,KAAKyB,QAAQU,MAAMtB,EAAIyB,EAAO,GACnCW,GAAUX,EAAO,SAEEe,IAAnBrD,KAAK0B,YACLwB,GAAKlD,KAAK0B,UAAUS,MAAMxB,EAAI2B,EAAO,GACrCa,GAAKnD,KAAK0B,UAAUS,MAAMvB,EAAI0B,EAAO,GACrCc,GAAKpD,KAAK0B,UAAUS,MAAMtB,EAAIyB,EAAO,GACrCW,GAAUX,EAAO,SAECe,IAAlBrD,KAAK2B,WACLuB,GAAKlD,KAAK2B,SAASQ,MAAMxB,EAAI2B,EAAO,GACpCa,GAAKnD,KAAK2B,SAASQ,MAAMvB,EAAI0B,EAAO,GACpCc,GAAKpD,KAAK2B,SAASQ,MAAMtB,EAAIyB,EAAO,GACpCW,GAAUX,EAAO,SAGIe,IAArBrD,KAAK4B,cACLsB,GAAKlD,KAAK4B,YAAYO,MAAMxB,EAAI2B,EAAO,GACvCa,GAAKnD,KAAK4B,YAAYO,MAAMvB,EAAI0B,EAAO,GACvCc,GAAKpD,KAAK4B,YAAYO,MAAMtB,EAAIyB,EAAO,GACvCW,GAAUX,EAAO,IAGrBY,GAAKlD,KAAKmC,MAAMxB,EAAI2B,EAAO,GAC3Ba,GAAKnD,KAAKmC,MAAMvB,EAAI0B,EAAO,GAC3Bc,GAAKpD,KAAKmC,MAAMtB,EAAIyB,EAAO,GAC3BW,GAAUX,EAAO,QAESe,IAAtBrD,KAAK6B,eACLqB,GAAKlD,KAAK6B,aAAaM,MAAMxB,EAAI2B,EAAO,GACxCa,GAAKnD,KAAK6B,aAAaM,MAAMvB,EAAI0B,EAAO,GACxCc,GAAKpD,KAAK6B,aAAaM,MAAMtB,EAAIyB,EAAO,GACxCW,GAAUX,EAAO,SAEEe,IAAnBrD,KAAK8B,YACLoB,GAAKlD,KAAK8B,UAAUK,MAAMxB,EAAI2B,EAAO,GACrCa,GAAKnD,KAAK8B,UAAUK,MAAMvB,EAAI0B,EAAO,GACrCc,GAAKpD,KAAK8B,UAAUK,MAAMtB,EAAIyB,EAAO,GACrCW,GAAUX,EAAO,SAEIe,IAArBrD,KAAK+B,cACLmB,GAAKlD,KAAK+B,YAAYI,MAAMxB,EAAI2B,EAAO,GACvCa,GAAKnD,KAAK+B,YAAYI,MAAMvB,EAAI0B,EAAO,GACvCc,GAAKpD,KAAK+B,YAAYI,MAAMtB,EAAIyB,EAAO,GACvCW,GAAUX,EAAO,SAEGe,IAApBrD,KAAKgC,aACLkB,GAAKlD,KAAKgC,WAAWG,MAAMxB,EAAI2B,EAAO,GACtCa,GAAKnD,KAAKgC,WAAWG,MAAMvB,EAAI0B,EAAO,GACtCc,GAAKpD,KAAKgC,WAAWG,MAAMtB,EAAIyB,EAAO,GACtCW,GAAUX,EAAO,IAEjBW,GAAU,IAAKA,EAAS,GAE5BjD,KAAK0C,OAASlC,EAAMO,SAAS,IAAKf,KAAKsD,cAAcJ,EAAID,GAASjD,KAAKsD,cAAcH,EAAIF,GAASjD,KAAKsD,cAAcF,EAAIH,GAC7H,CACOM,oBAAoBjB,GACvB,IAAIW,EAAS,EACb,IAAK,IAAIO,KAAKlB,EAAUW,GAAUO,EAClC,OAAIP,GAAU,EAAW,EAClBA,CACX,CACOK,cAAcG,GACjB,OAAIA,EAAI,EAAa,EAAc,IAAMA,EAAW,IAAoBzC,KAAKC,MAAMwC,EACvF,EAuBG,MAAMjD,EAKT,gBAAuBkD,EAAWR,EAAWC,EAAWC,GACpD,OAAO,IAAI5C,EAAM0C,EAAGC,EAAGC,EAAGM,EAC9B,CACAjE,YAAYyD,EAAWC,EAAWC,EAAWM,GAAY,KAPzD/C,OAAC,OACDC,OAAC,OACDC,OAAC,OACDuB,OAAC,EAKGpC,KAAKW,EAAIuC,EACTlD,KAAKY,EAAIuC,EACTnD,KAAKa,EAAIuC,EACTpD,KAAKoC,EAAIsB,CACb,EC7aG,MAAMC,EAoBTlE,YAAYmE,EAA0BC,GAAmB,KAnBzDD,cAAQ,OACRC,SAAG,OACHC,YAAM,OACNC,SAAG,OACHC,UAAoB,EAAM,KAC1BC,MAAgB,GAAI,KACpBC,YAAwB,CAAC,EAAG,GAAG,KAC/BC,gBAA4B,CAAC,EAAG,GAAG,KACnCC,eAAS,OACTC,0BAAoB,OAEpBC,SAAG,OAEHC,gBAA0B,EAAM,KAChCC,QAAkB,EAAE,KACpBC,gBAA0B,EAAK,KAE/BC,SAAmB,EAAK,KACxBC,OAAiB,EAEb3E,KAAK4D,SAAWA,EAChB5D,KAAK6D,IAAMA,EACX7D,KAAK4E,MACT,CACQA,OACJ,MAAMd,EAASe,SAASC,cAAc,UACtC,GAAIhB,EAAQ,CACR9D,KAAK8D,OAASA,EACd9D,KAAK8D,OAAO/D,MAAQC,KAAK6D,IAAIkB,YAC7B/E,KAAK8D,OAAOhE,OAASE,KAAK6D,IAAImB,aAC9BhF,KAAK6D,IAAIoB,OAAOjF,KAAK8D,QACrB,MAAMC,EAAM/D,KAAK8D,OAAOoB,WAAW,MAC/BnB,IACA/D,KAAK+D,IAAMA,EACX/D,KAAKgE,UAAW,EAExB,CACAhE,KAAKoE,UAAY,IAAIe,EAAAA,GACrBnF,KAAKqE,qBAAuB,IAAIe,EAAAA,GAAqB,GACzD,CACOC,WACHrF,KAAKkE,YAAY,GAA6B,GAAxBlE,KAAK+D,IAAID,OAAO/D,MACtCC,KAAKkE,YAAY,GAA8B,GAAzBlE,KAAK+D,IAAID,OAAOhE,OAGtCE,KAAKsF,YACLtF,KAAKuF,WAAWvF,KAAK+D,KACrB/D,KAAKwF,MACT,CACOA,OACH,IAAIC,EAASC,YAAYC,MAGzB,GAFA3F,KAAKoE,UAAUwB,YAEX5F,KAAKqE,qBAAqBwB,MAAQ,GAClC,GAAwC,IAApC7F,KAAKqE,qBAAqBwB,MAC1BC,uBAAsB,KAAQ9F,KAAKwF,MAAM,IAEzCxF,KAAK+F,UAAU/F,KAAK+D,UACjB,GAAwC,IAApC/D,KAAKqE,qBAAqBwB,MAC7B7F,KAAKuE,eACLuB,uBAAsB,KAAQ9F,KAAKwF,MAAM,IAO7CxF,KAAK+F,UAAU/F,KAAK+D,UACjB,GAAwC,IAApC/D,KAAKqE,qBAAqBwB,MAAa,CAQ9C,GAPI7F,KAAKuE,eACLuB,uBAAsB,KAAQ9F,KAAKwF,MAAM,IAMxCxF,KAAKqE,qBAAqB2B,KAI3B,OAHAhG,KAAK+F,UAAU/F,KAAK+D,KACpB/D,KAAKqE,qBAAqB4B,cAIlC,OAE2C,IAApCjG,KAAKqE,qBAAqBwB,OAC7B7F,KAAKuE,gBAQTvE,KAAK+F,UAAU/F,KAAK+D,KAExB,IAAImC,EAAQR,YAAYC,MACxB3F,KAAKsE,IAAG,kBAActE,KAAKqE,qBAAqBwB,MAAK,2BAAmB7F,KAAKwE,UAAS,kBAAUxE,KAAKoE,UAAU+B,UAAUC,QAAQ,GAAE,4BAAoBF,EAAQT,GAAQW,QAAQ,GAAE,kBAErL,CACOC,YAAcrG,KAAKqE,qBAAqBwB,MAAQ,EAAG7F,KAAKwF,MAAQ,CAChEc,YAActG,KAAKqE,qBAAqBwB,MAAQ,EAAG7F,KAAKwF,MAAQ,CAChEe,YAAcvG,KAAKqE,qBAAqBwB,MAAQ,EAAG7F,KAAKwF,MAAQ,CAChEgB,kBACHxG,KAAKqE,qBAAqB2B,MAAO,CACrC,CACOV,YACHtF,KAAKqE,qBAAqBoC,QAC1BC,YAAW,KACP1G,KAAKqE,qBAAqBwB,MAAQ,EAClC7F,KAAKwF,MAAM,GACZ,IACP,CACOmB,YACH3G,KAAKqE,qBAAqBoC,QAC1BC,YAAW,KACP1G,KAAKqE,qBAAqBwB,MAAQ,EAClC7F,KAAKwF,MAAM,GACZ,IACP,CACOoB,YACH5G,KAAKqE,qBAAqB2B,MAAO,EACjChG,KAAKqE,qBAAqBoC,QAC1BC,YAAW,KACP1G,KAAKqE,qBAAqBwB,MAAQ,EAClC7F,KAAKwF,MAAM,GACZ,IACP,CACOqB,MAAM9C,GAET/D,KAAK+D,IAAI+C,UAAU,EAAG,EAAG9G,KAAK+D,IAAID,OAAO/D,MAAOC,KAAK+D,IAAID,OAAOhE,OAEpE,CACOiH,KAAKC,GAKJA,EAAEC,MAAQ,EACVjH,KAAKiE,OAAsB,IAAbjE,KAAKiE,MAQnBjE,KAAKiE,OAAsB,IAAbjE,KAAKiE,KAc3B,CACOiD,YAAYF,GAGf,OAFAA,EAAE/G,GAAM+G,EAAEG,GAAKnH,KAAKkE,YAAY,IAAMlE,KAAKiE,MAC3C+C,EAAE9G,GAAM8G,EAAEI,GAAKpH,KAAKkE,YAAY,IAAMlE,KAAKiE,MACpC+C,CACX,CACOK,IAAIL,GAEP,IAAKhH,KAAK0E,QAAW,OACrB,MAAM4C,EAAON,EAAEG,GAAKH,EAAEO,MAChBC,EAAOR,EAAEI,GAAKJ,EAAES,MACtBzH,KAAKkE,YAAY,IAAMoD,EACvBtH,KAAKkE,YAAY,IAAMsD,CAC3B,CACOE,cACH1H,KAAKqE,qBAAqB2B,MAAO,CACrC,CACOD,UAAUhC,GACb,GAAK/D,KAAKgE,SAAV,CACAhE,KAAK6G,MAAM7G,KAAK+D,KAChB/D,KAAK+D,IAAI4D,OACT3H,KAAK+D,IAAI6D,UAAU5H,KAAKkE,YAAY,GAAIlE,KAAKkE,YAAY,IACzDlE,KAAK+D,IAAIE,MAAMjE,KAAKiE,MAAOjE,KAAKiE,OAKhC,IAAK,IAAI7D,GAAK,GAAIA,EAAI,KAAMA,EACxB,IAAK,IAAID,GAAK,GAAIA,EAAI,KAAMA,EACxB4D,EAAI8D,YACJ9D,EAAI+D,UAAY,uBAChB/D,EAAIgE,IAAQ,GAAJ3H,EAAY,GAAJD,EAAQ,EAAG,EAAa,EAAVa,KAAKgH,IACnCjE,EAAIkE,YACJlE,EAAImE,OAIZlI,KAAKmI,aAAapE,GAElB/D,KAAK+D,IAAIqE,SArBqB,CAsBlC,CACO7C,WAAWxB,GAElB,CACOoE,aAAapE,GAEpB,EC/LG,IAAKsE,GAKX,SALWA,GAAAA,EAAU,YAAVA,EAAU,gBAAVA,EAAU,cAAVA,EAAU,cAAVA,EAAU,YAAVA,EAAU,sBAAVA,EAAU,0BAAVA,EAAU,wBAAVA,EAAU,YAAVA,EAAU,gBAAVA,EAAU,QAAVA,EAAU,YAAVA,EAAU,0BAAVA,EAAU,wBAKrB,CALWA,IAAAA,EAAU,KAMf,MAAMC,EAmBX7I,cAAe,KAlBfQ,GAAa,EAAE,KAACC,GAAa,EAAE,KAACqI,GAAa,EAAE,KAC/CC,MAAgB,EAAE,KAACC,MAAgB,EAAE,KAACC,MAAgB,EAAE,KACxDvB,IAAc,EAAE,KAACC,IAAc,EAAE,KACjCG,OAAiB,EAAE,KAACE,OAAiB,EAAE,KACvCkB,gBAAU,OACVC,aAAO,OACPP,WAAyBA,EAAWQ,KAAK,KACzCC,QAAkB,EAAM,KACxBC,eAAyB,EAAM,KAC/BC,QAAkB,EAAM,KACxBC,cAAwB,EAAM,KAC9BC,YAAsB,EAAM,KAC5BC,aAAuB,EAAM,KAC7BlC,MAAgB,EAAE,KAClBmC,SAAmB,EAAE,KACrBpF,UAAoB,EAAK,KAEzBqF,YAAM,CAGN,CACOC,WACH,IAAIC,EAAS,IAAIjB,EAYjB,OAXAiB,EAAOtJ,EAAID,KAAKC,EAAGsJ,EAAOrJ,EAAIF,KAAKE,EAAGqJ,EAAOhB,EAAIvI,KAAKuI,EACtDgB,EAAOf,KAAOxI,KAAKwI,KAAMe,EAAOd,KAAOzI,KAAKyI,KAAMc,EAAOb,KAAO1I,KAAK0I,KACrEa,EAAOpC,GAAKnH,KAAKC,EAAGsJ,EAAOnC,GAAKpH,KAAKE,EACrCqJ,EAAOhC,MAAQvH,KAAKuH,MAAOgC,EAAO9B,MAAQzH,KAAKyH,MAC/C8B,EAAOL,WAAalJ,KAAKkJ,WAAYK,EAAON,aAAejJ,KAAKiJ,aAAcM,EAAOJ,YAAcnJ,KAAKmJ,YACxGI,EAAOR,cAAgB/I,KAAK+I,cAAeQ,EAAOT,OAAS9I,KAAK8I,OAAQS,EAAOP,OAAShJ,KAAKgJ,OAC7FO,EAAOtC,MAAQjH,KAAKiH,MAAOsC,EAAOH,SAAWpJ,KAAKoJ,SAClDG,EAAOZ,WAAa3I,KAAK2I,WACzBY,EAAOlB,WAAarI,KAAKqI,WACzBkB,EAAOX,QAAU5I,KAAK4I,QACtBW,EAAOF,OAASrJ,KAAKqJ,OACdE,CACX,EAMK,MAAMC,EAYX/J,cAAe,KAXfgK,wBAAkB,OAClBC,kBAAoC,IAAIpB,EAAiB,KACzDqB,UAAoB,EAAK,KACzBC,WAAqB,EAAE,KACvBC,OAAiB,EAAM,KACvBC,SAAmB,EAAM,KACzBC,MAAgB,IAAI,KACpBC,WAAK,OACLC,MAAgB,EAAM,KACtBjD,OAAC,OACOkD,kBAA4B,CAGpC,CACOC,qBAAqBtG,GAC1BA,EAAIuG,QAAWpD,IACbhH,KAAK8J,SAAU,EACf9J,KAAKgK,MAAQtD,YACX,KACO1G,KAAK8J,SACR9J,KAAKqK,WAAWrD,GAElBhH,KAAK8J,SAAU,CAAK,GAEtB9J,KAAK+J,MAAM,EAEflG,EAAIyG,WAActD,IAChBuD,aAAavK,KAAKgK,OAClBhK,KAAK8J,SAAU,EACf9J,KAAKwK,iBAAiBxD,EAAE,EAE1BnD,EAAI4G,YAAezD,IAAoBhH,KAAK0K,UAAU1D,EAAE,EACxDnD,EAAI8G,UAAa3D,IAAoBhH,KAAK4K,QAAQ5D,EAAE,EACpDnD,EAAIgH,YAAe7D,IAAoBhH,KAAK8K,UAAU9D,EAAE,EACxDnD,EAAIkH,iBAAiB,SAAU/D,GAAkBhH,KAAKgL,WAAWhE,EAAGA,EAAEiE,SACxE,CACOP,UAAU1D,GACfhH,KAAK6J,OAAQ,EACb7J,KAAKiK,MAAO,EACZ,IAAIV,EAASvJ,KAAKkL,mBAAmBlE,GACrCuC,EAAOlB,WAAaA,EAAW8C,KAC/B5B,EAAOT,QAAS,EAChB9I,KAAKoL,kBAAkB7B,EACzB,CACOc,WAAWrD,GAChB,IAAKhH,KAAK6J,MAAS,OACnB,IAAIN,EAASvJ,KAAKkL,mBAAmBlE,GACpB,IAAbA,EAAEqE,OACJ9B,EAAOlB,WAAaA,EAAWiD,KACT,IAAbtE,EAAEqE,OACX9B,EAAOlB,WAAaA,EAAWkD,OACT,IAAbvE,EAAEqE,SACX9B,EAAOlB,WAAaA,EAAWmD,OAEjCxL,KAAKoL,kBAAkB7B,EACzB,CACOiB,iBAAiBxD,GACtB,IAAIuC,EAASvJ,KAAKkL,mBAAmBlE,GACrCuC,EAAOlB,WAAaA,EAAWoD,OAC/BzL,KAAKoL,kBAAkB7B,EACzB,CACOmC,UAAU1E,GACfhH,KAAK6J,OAAQ,EACb7J,KAAK8J,SAAU,EACf,IAAIP,EAASvJ,KAAKkL,mBAAmBlE,GACrCuC,EAAOlB,WAAaA,EAAWsD,KAC/BpC,EAAOT,QAAS,EACE,IAAd9B,EAAE4E,QACJrC,EAAOlB,WAAaA,EAAWsD,KACR,IAAd3E,EAAE4E,QACXrC,EAAOlB,WAAaA,EAAWwD,YACR,IAAd7E,EAAE4E,UACXrC,EAAOlB,WAAaA,EAAWyD,YAEjC9L,KAAKoL,kBAAkB7B,EACzB,CACOuB,UAAU9D,GACf,GAAIhH,KAAKiK,KAA2B,YAAnBjK,KAAK0L,UAAU1E,GAChC,IAAIuC,EAASvJ,KAAKkL,mBAAmBlE,GACrCuC,EAAOlB,WAAaA,EAAWQ,KAC/BU,EAAOT,QAAS,EAChB9I,KAAK8J,SAAU,EACf9J,KAAKoL,kBAAkB7B,EACzB,CACOqB,QAAQ5D,GACbhH,KAAKiK,MAAO,EACZjK,KAAK6J,OAAQ,EACb,IAAIN,EAASvJ,KAAKkL,mBAAmBlE,GACrCuC,EAAOlB,WAAaA,EAAW0D,GAC/BxC,EAAOT,QAAS,EAChB9I,KAAKoL,kBAAkB7B,EACzB,CACOyB,WAAWhE,EAAevD,GAC/B,IAAI8F,EAASvJ,KAAKkL,mBAAmBlE,GACrCuC,EAAOtC,MAAQxD,EACf8F,EAAOlB,WAAaA,EAAW2D,MAC/BhM,KAAKoL,kBAAkB7B,EACzB,CACO2B,mBAAmBlE,GACxB,IAAIuC,EAAyB,IAAIjB,EAkBjC,OAjBAiB,EAAOhC,MAAQvH,KAAK0J,kBAAkBvC,GACtCoC,EAAO9B,MAAQzH,KAAK0J,kBAAkBtC,GACtCmC,EAAOf,KAAOxI,KAAK0J,kBAAkBzJ,EACrCsJ,EAAOd,KAAOzI,KAAK0J,kBAAkBxJ,EAGrCqJ,EAAON,aAAejC,EAAEiF,SACxB1C,EAAOL,WAAalC,EAAEkF,OACtB3C,EAAOJ,YAAcnC,EAAEmF,QAEvB5C,EAAOpC,GAAKH,EAAEoF,QACd7C,EAAOnC,GAAKJ,EAAEqF,QACd9C,EAAOH,SAAWpJ,KAAK0J,kBAAkBzC,MACzCsC,EAAOtC,MAAQ,EACfsC,EAAOF,OAASrC,EAChBhH,KAAK0J,kBAAoBH,EACzBvJ,KAAKgH,EAAIuC,EACFA,CACT,CACW+C,sBACT,OAAOtM,KAAKkK,gBACd,CACWoC,oBAAgB7I,GACrBA,EACFzD,KAAKkK,iBAAmBzG,EAExBiD,YAAW,KAAQ1G,KAAKkK,iBAAmBzG,CAAC,GAAK,IAErD,CACQ2H,kBAAkBmB,GACxBvM,KAAKwM,oCAAoCD,GACrCvM,KAAKkK,kBACTlK,KAAKyM,yBAAyBF,EAChC,CACQC,oCAAoCD,GACtCvM,KAAKyJ,oBAAsBzJ,KAAKyJ,mBAAmBiD,qBAAqBH,EAC9E,CACOE,yBAAyBF,GAE9B,EC3MG,MAAMI,EAITlN,YAAYmE,GAA2B,KAHvCA,cAAQ,OACRgJ,MAAkB,IAAI5J,EAAAA,GAAS,EAAG,GAG9BhD,KAAK4D,SAAWA,CACpB,CACOiJ,qBAAqB7F,GACxB,MAAM8F,EAAM9F,EAAEsC,WACdwD,EAAI7M,EAAI+G,EAAEG,GACV2F,EAAI5M,EAAI8G,EAAEI,GAEVpH,KAAK4D,SAASE,OAAO4D,cAEjBV,EAAEqB,aAAeA,EAAAA,GAAAA,KAEVrB,EAAEqB,aAAeA,EAAAA,GAAAA,OAEjBrB,EAAEqB,aAAeA,EAAAA,GAAAA,WAEjBrB,EAAEqB,aAAeA,EAAAA,GAAAA,OAEjBrB,EAAEqB,aAAeA,EAAAA,GAAAA,KAEjBrB,EAAEqB,aAAeA,EAAAA,GAAAA,KAEjBrB,EAAEqB,aAAeA,EAAAA,GAAAA,KAEjBrB,EAAEqB,aAAeA,EAAAA,GAAAA,MAEjBrB,EAAEqB,aAAeA,EAAAA,GAAAA,IAAiBrI,KAAK+M,WAAW/F,GADzDhH,KAAKgN,cAAchG,GAFnBhH,KAAKiN,aAAajG,GAFlBhH,KAAKkN,aAAalG,GAFlBhH,KAAKmN,aAAanG,GAFlBhH,KAAKoN,oBAAoBpG,GAFzBhH,KAAKqN,mBAAmBrG,GAFxBhH,KAAKsN,oBAAoBtG,GAFzBhH,KAAKuN,kBAAkBvG,EAiB/B,CAGO0D,UAAU1D,GAAyB,CACnCiG,aAAajG,GAChBhH,KAAK0K,UAAU1D,EACnB,CACOwG,eAAexG,GAAyB,CACxCuG,kBAAkBvG,GAErBhH,KAAKwN,eAAexG,EACxB,CACOyG,iBAAiBzG,GAAyB,CAC1CsG,oBAAoBtG,GAEvBhH,KAAKyN,iBAAiBzG,EAC1B,CACO0G,gBAAgB1G,GAA0B,CAC1CqG,mBAAmBrG,GAEtBhH,KAAK0N,gBAAgB1G,EACzB,CACO4D,QAAQ5D,GAA0B,CAClC+F,WAAW/F,GAEdhH,KAAK4K,QAAQ5D,EAEjB,CACOwD,iBAAiBxD,GAAyB,CAC1CoG,oBAAoBpG,GAEvBhH,KAAKwK,iBAAiBxD,EAC1B,CACO8D,UAAU9D,GAAyB,CACnCmG,aAAanG,GAGhBhH,KAAK8K,UAAU9D,EACnB,CACO0E,UAAU1E,GAAyB,CACnCkG,aAAalG,GAChBhH,KAAK4M,MAAM3M,EAAI+G,EAAE/G,EACjBD,KAAK4M,MAAM1M,EAAI8G,EAAE9G,EAEjBF,KAAK4D,SAASE,OAAOuD,IAAIL,GAEzBhH,KAAK0L,UAAU1E,EACnB,CACOgE,WAAWhE,GAAyB,CACpCgG,cAAchG,GACjBhH,KAAK4D,SAASE,OAAOiD,KAAKC,GAC1BhH,KAAKgL,WAAWhE,EACpB,CACO2G,uBAAuBlK,GACVA,EAAEmK,MAAM,KACR,EASpB,EClGG,MAAMC,EAKTpO,YAAYqO,GAAiC,KAJ7CC,WAAK,OACLC,gBAAU,OACVC,kBAAY,OACZH,oBAAc,EAEV9N,KAAK8N,eAAiBA,EACtB9N,KAAKiO,aAAejO,KAAK8N,eAAeI,QAExClO,KAAKmO,QACT,CACAA,SACI,MAAMJ,EAAQlJ,SAASC,cAAc,OACrC,IAAKiJ,EAAS,OAAU/N,KAAK+N,MAAQA,EACrC/N,KAAKiO,aAAahJ,OAAO8I,GACzB/N,KAAK+N,MAAMK,MAAMC,WAAa,OAC9BrO,KAAK+N,MAAMK,MAAMrO,MAAQ,OAGzB,MAAMuO,EAAMzJ,SAASC,cAAc,UACnCwJ,EAAIC,YAAc,SAClBD,EAAIlE,QAAU,KACVpK,KAAK8N,eAAeU,cAAcC,QAAQ,EAE9CzO,KAAK+N,MAAM9I,OAAOqJ,GAElB,IAAII,EAAQ7J,SAASC,cAAc,SACnC4J,EAAMC,QAAU,KACZ,MAAM5L,GAAO2L,EAAME,MACnBC,QAAQvK,IAAIvB,GAIZ,IAAIT,EAASpE,EAAOE,OAER,IAAR2E,EAAaT,EAASpE,EAAOE,OAChB,IAAR2E,EAAaT,EAASpE,EAAOM,SACrB,IAARuE,EAAaT,EAASpE,EAAOY,iBACrB,IAARiE,EAAaT,EAASpE,EAAOa,iBACrB,IAARgE,EAAaT,EAASpE,EAAOc,iBACrB,IAAR+D,EAAaT,EAASpE,EAAOe,iBACrB,IAAR8D,EAAaT,EAASpE,EAAOgB,iBACrB,IAAR6D,EAAaT,EAASpE,EAAOiB,iBACrB,IAAR4D,EAAaT,EAASpE,EAAOQ,OACrB,IAARqE,EAAaT,EAASpE,EAAOG,gBACrB,KAAR0E,EAAcT,EAASpE,EAAOI,gBACtB,KAARyE,EAAcT,EAASpE,EAAOK,gBACtB,KAARwE,EAAcT,EAASpE,EAAOoB,kBACtB,KAARyD,EAAcT,EAASpE,EAAOqB,gBACtB,KAARwD,EAAcT,EAASpE,EAAOW,QACtB,KAARkE,EAAcT,EAASpE,EAAOU,WACtB,KAARmE,EAAcT,EAASpE,EAAOkB,iBACtB,KAAR2D,EAAcT,EAASpE,EAAOmB,eACtB,KAAR0D,EAAcT,EAASpE,EAAOO,cACtB,KAARsE,IAAcT,EAASpE,EAAOS,WAEvCqB,KAAKgO,WAAWc,UAAY,yBAA2BxM,EAEvDtC,KAAK8N,eAAeU,cAAcO,UAAUzM,EAAO,EAGvDoM,EAAMM,KAAO,QACbN,EAAMO,IAAM,IACZP,EAAMQ,IAAM,OACZR,EAAMS,KAAO,MACbT,EAAME,MAAQ,IACd5O,KAAK+N,MAAM9I,OAAOyJ,GAElB,IAAIU,EAAWvK,SAASC,cAAc,SACtCsK,EAAST,QAAU,KACf,MAAM5L,GAAOqM,EAASR,MACtBC,QAAQvK,IAAIvB,EAAI,EAGpBqM,EAASJ,KAAO,QAChBI,EAASH,IAAM,IACfG,EAASF,IAAM,OACfE,EAASR,MAAQ,IACjB5O,KAAK+N,MAAM9I,OAAOmK,GAalBpP,KAAKgO,WAAanJ,SAASC,cAAc,KACpC9E,KAAKgO,aAAwBhO,KAAK+N,MAAM9I,OAAOjF,KAAKgO,YACzDhO,KAAKgO,WAAWI,MAAMrO,MAAQ,cAC9BC,KAAKgO,WAAWc,UAAY,+BAGhC,ECjGG,MAAMO,EAWT5P,YAAY+O,EAA8Bc,GAAyB,KAVnExL,YAAM,OACNC,SAAG,OAEHyK,mBAAa,OAEbc,SAAG,OACHC,mBAAa,OAEbC,oBAAc,EAGVxP,KAAKwO,cAAgBA,EACrBxO,KAAKsP,IAAMA,EAEXtP,KAAK8D,OAASe,SAASC,cAAc,UACrC9E,KAAK8D,OAAO/D,MAAQC,KAAKsP,IAAIvP,MAC7BC,KAAK8D,OAAOhE,OAASE,KAAKsP,IAAIxP,OAC9BE,KAAK+D,IAAM/D,KAAK8D,OAAOoB,WAAW,MAElClF,KAAK+D,IAAI0L,UAAUzP,KAAKsP,IAAK,EAAG,EAAGtP,KAAKsP,IAAIvP,MAAOC,KAAKsP,IAAIxP,QAE5DE,KAAKuP,cAAgBvP,KAAK+D,IAAI2L,aAAa,EAAG,EAAG1P,KAAKsP,IAAIvP,MAAOC,KAAKsP,IAAIxP,OAG9E,CACOiP,UAAUzN,GACbtB,KAAKwP,eAAiB,IAAIhQ,EAAeQ,KAAKuP,eAC9CvP,KAAKwP,eAAenN,mBAAmBlE,EAAqBmD,IAC5D,MAAMjB,EAAOL,KAAKwP,eAAehN,YAEjCxC,KAAK+D,IAAI4L,aAAatP,EAAM,EAAG,EAAG,EAAG,EAAGL,KAAKsP,IAAIvP,MAAOC,KAAKsP,IAAIxP,OACrE,CACO8P,OAAO7L,GAEVA,EAAI0L,UAAUzP,KAAK8D,OAA2B,IAAjB9D,KAAKsP,IAAIvP,MAAiC,IAAlBC,KAAKsP,IAAIxP,OAAcE,KAAKsP,IAAIvP,MAAOC,KAAKsP,IAAIxP,OAKzG,ECvCG,MAAM+P,EAkBTpQ,YAAY+O,EAA8BN,GAAyB,KAjBnEpK,YAAM,OACNC,SAAG,OAEHyK,mBAAa,OAEbc,SAAG,OACHC,mBAAa,OAEbC,oBAAc,OAEPM,WAAK,OAEZ/P,MAAQ,IAAI,KACZD,OAAS,IAAI,KAEbwC,OAAmBnE,EAAqBC,OAGpC4B,KAAKwO,cAAgBA,EACrBxO,KAAKsP,IAAM,IAAIS,MAEf,MAAMhQ,EAAQ,IACRD,EAAS,IAEfE,KAAKD,MAAQA,EACbC,KAAKF,OAASA,EAEdE,KAAK8D,OAASe,SAASC,cAAc,UACrC9E,KAAK8D,OAAO/D,MAAQA,EACpBC,KAAK8D,OAAOhE,OAASA,EACrBE,KAAK+D,IAAM/D,KAAK8D,OAAOoB,WAAW,MAGlC,MAAM4K,EAAQjL,SAASC,cAAc,SACrCgL,EAAME,GAAKhQ,KAAKwO,cAAcN,QAAQ8B,GAAK,SAC3CF,EAAMG,aAAa,cAAe,IAClCH,EAAMG,aAAa,WAAY,IAC/BH,EAAMG,aAAa,QAAS,IAC5BH,EAAMG,aAAa,QAAQ,GAAD,OAAKlQ,EAAK,OACpC+P,EAAMG,aAAa,SAAS,GAAD,OAAKnQ,EAAM,OAKtCgQ,EAAM1B,MAAMrO,MAAK,UAAMA,EAAK,MAC5B+P,EAAM1B,MAAMtO,OAAM,UAAMA,EAAM,MAE1BoQ,UAAUC,aAAaC,cACvBF,UAAUC,aAAaC,aAAa,CAAEN,OAAO,IAC1CO,MAAOC,IACNR,EAAMS,UAAYD,CAAM,IAEzBE,OAAQC,IACP5B,QAAQ6B,MAAM,0BAA2BD,EAAM,IAIvDzQ,KAAK8P,MAAQA,EAETA,GAAS5B,GACTA,EAAQyC,YAAYb,GAExB9P,KAAKwP,eAAiB,IAAIhQ,EAAeQ,KAAK+D,IAAI2L,aAAa,EAAG,EAAG1P,KAAKD,MAAOC,KAAKF,QAC1F,CACOiP,UAAUzN,GACbtB,KAAKsC,OAASnE,EAAqBmD,EACvC,CACOsO,OAAO7L,GAEN/D,KAAK8P,QAEL9P,KAAK+D,IAAI0L,UAAUzP,KAAK8P,MAAO,EAAG,EAAG9P,KAAK8P,MAAM/P,MAAOC,KAAK8P,MAAMhQ,QAElEE,KAAKwP,eAAevN,OAAOjC,KAAK+D,IAAI2L,aAAa,EAAG,EAAI1P,KAAK8P,MAAM/P,MAAOC,KAAK8P,MAAMhQ,SACrFE,KAAKwP,eAAenN,mBAAmBrC,KAAKsC,QAC5CtC,KAAKuP,cAAgBvP,KAAKwP,eAAehN,YAEzCxC,KAAK+D,IAAI4L,aAAa3P,KAAKuP,cAAe,EAAG,GAE7CxL,EAAI0L,UAAUzP,KAAK8D,OAA4B,IAAnB9D,KAAK8P,MAAM/P,MAAkC,IAApBC,KAAK8P,MAAMhQ,OAAcE,KAAK8P,MAAM/P,MAAOC,KAAK8P,MAAMhQ,QAGnH,ECzEG,MAAM8Q,EAQTnR,YAAYyO,GAAuB,KAP5BA,aAAO,OAEP2C,oBAAc,OACdC,oBAAc,OAEbC,IAAM,EAGV/Q,KAAKkO,QAAUA,CACnB,CACA,WAAkBnK,GAEd,MAAMuL,QAvBiB0B,iBAAwH,IAAjHC,EAAW,uDAAG,8FAChD,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACzB,MAAM9B,EAAM,IAAIS,MAChBT,EAAI2B,IAAMA,EACV3B,EAAI+B,YAAc,YAClB/B,EAAIgC,OAAS,IAAMH,EAAQ7B,GAC3BA,EAAIiC,QAAU,IAAMH,EAAO,IAAII,MAAM,kCAAkC,GAE/E,CAe0BC,GACZC,EAAQpC,EAEdtP,KAAK6Q,eAAiB,IAAIxB,EAAerP,KAAM0R,GAC/C1R,KAAK8Q,eAAiB,IAAIjB,EAAe7P,KAAMA,KAAKkO,QACxD,CACOO,SAEHzO,KAAK+Q,KACT,CACOhC,UAAUzN,GACTtB,KAAK+Q,IAAM,IAAM,EACjB/Q,KAAK8Q,eAAe/B,UAAUzN,GAE9BtB,KAAK6Q,eAAe9B,UAAUzN,EAEtC,CACOsO,OAAO7L,GAEN/D,KAAK+Q,IAAM,IAAM,EACb/Q,KAAK8Q,gBACL9Q,KAAK8Q,eAAelB,OAAO7L,GAG3B/D,KAAK6Q,gBACL7Q,KAAK6Q,eAAejB,OAAO7L,EAIvC,EChDG,MAAM4N,EAWTC,cACI,IAAID,EADc,uDAAG,UAEzB,CACAlS,cAAqC,IAAzBuQ,EAAU,uDAAG,UAAS,KAb3BA,QAAE,OACF9B,aAAO,OACPrK,SAAG,OAEHC,YAAM,OACN+N,6BAAuB,OACvBC,sBAAgB,OAChBtD,mBAAa,OACbuD,UAAI,EAMP/R,KAAKgQ,GAAKA,EACVhQ,KAAK4E,OACLoN,OAAY,IAAIhS,IACpB,CACQ4E,OACJ,MAAMqN,EAAUpN,SAASqN,eAAelS,KAAKgQ,IAC7C,IAAIiC,EAA4C,OAAjCjS,KAAKkO,QAAU+D,EAE9B,MAAMpO,EAAMgB,SAASC,cAAc,OAC/BjB,IACA7D,KAAK6D,IAAMA,EACX7D,KAAK6D,IAAIuK,MAAMrO,MAAQ,QACvBC,KAAK6D,IAAIuK,MAAMtO,OAAS,QACxBE,KAAK6D,IAAIuK,MAAM+D,WAAa,UAC5BnS,KAAKkO,QAAQjJ,OAAOjF,KAAK6D,MAE7B7D,KAAKwO,cAAgB,IAAIoC,EAAc5Q,KAAKkO,SAC5ClO,KAAK8D,OAAS,IAAIH,EAAO3D,KAAM6D,GAE/B7D,KAAK8D,OAAOyB,WAAcxB,GAAkC/D,KAAKoS,WAAWrO,GAC5E/D,KAAK8D,OAAOqE,aAAgBpE,GAAkC/D,KAAKqS,OAAOtO,GAC1E/D,KAAK6R,wBAA0B,IAAIlF,EAAwB3M,MAC3DA,KAAK8R,iBAAmB,IAAItI,EAC5BxJ,KAAKsS,kBAAkBzO,GACvB7D,KAAK+R,KAAO,IAAIlE,EAAK7N,MACrBA,KAAK8D,OAAOuB,WACZrF,KAAK8D,OAAO8C,WAChB,CACO0L,kBAAkBzO,GACrB7D,KAAK8R,iBAAiB3H,qBAAqBtG,GAC3C7D,KAAK8R,iBAAiBrF,yBAA4BzF,IAC9ChH,KAAK6R,wBAAwBhF,qBAAqB7F,EAAE,EAExDgL,OAAOjH,iBAAiB,UAAW/D,IAC/BhH,KAAKuS,OAAOvL,EAAGhH,KAAKkO,QAAQnJ,YAAa/E,KAAKkO,QAAQlJ,aAAa,GAG3E,CACOuN,OAAOvL,EAAYjH,EAAeD,GACrC,CAEGsS,WAAWrO,GACd/D,KAAKwO,cAAcgE,KAAKzO,EAC5B,CACOsO,OAAOtO,GACV/D,KAAKwO,cAAcoB,OAAO7L,EAC9B,ECpEG,MAAM0O,EAMTb,cACI,IAAIa,EADc,uDAAG,UACK,EAC9B,CACAhT,cAA0D,IAA9CuQ,EAAU,uDAAG,UAAW0C,EAAe,uDAAG,EAAC,KARvD1C,QAAE,OACFpM,cAAQ,OACRsK,aAAO,OACPrK,SAAG,OACH6O,QAAkB,EAKd1S,KAAKgQ,GAAKA,EACVhQ,KAAK0S,QAAUA,EACf1S,KAAK4E,MACT,CACQA,OAEJ,GACS,IADD5E,KAAK0S,QAEL1S,KAAK4D,SAAW,IAAI+N,EAAe3R,KAAKgQ,GAQpD,ECxBG,MAAM2C,EACTf,YAAY5B,GACE,IAAI2C,EAAqB3C,GACjC4C,OACN,CACAnT,cACI,IAAIgT,EADc,uDAAG,UAEzB,CACAG,QACI,EAID,MAAMC,EAGTpT,YAAYuQ,GAAc,KAFnB8C,aAAO,EAGV9S,KAAK8S,QAAUjO,SAASqN,eAAelC,GAEvC2C,EAAqB/N,KAAKoL,EAC9B,CACO+C,UACH,GAAI/S,KAAK8S,QACL,IACI,KAAO9S,KAAK8S,QAAQE,YAChBhT,KAAK8S,QAAQG,YAAYjT,KAAK8S,QAAQE,WAI9C,CAFE,MAAOE,GACLrE,QAAQqE,MAAM,2BAA4BA,EAC9C,MAEArE,QAAQsE,KAAK,yCAErB,E","sources":["lib/NJSCore/CV/ConvolutionalFilter/PixelMapFilter.ts","njslab/Raster/Image-filter-app/AppImageProcessor/CanvasRanderer/Canvas/Canvas.ts","njslab/Raster/Image-filter-app/AppImageProcessor/CanvasRanderer/EventInteraction/MouseInteraction.ts","njslab/Raster/Image-filter-app/AppImageProcessor/CanvasRanderer/ActiveCommandController/ActiveCommandController.ts","njslab/Raster/Image-filter-app/AppImageProcessor/CanvasRanderer/View/index.ts","njslab/Raster/Image-filter-app/AppImageProcessor/CanvasRanderer/Implmentation/ImageProcessor/index.ts","njslab/Raster/Image-filter-app/AppImageProcessor/CanvasRanderer/Implmentation/VideoProcessor/index.ts","njslab/Raster/Image-filter-app/AppImageProcessor/CanvasRanderer/Implmentation/index.ts","njslab/Raster/Image-filter-app/AppImageProcessor/CanvasRanderer/index.ts","njslab/Raster/Image-filter-app/AppImageProcessor/index.ts","njslab/Raster/Image-filter-app/index.ts"],"sourcesContent":["import { NVector3, ColorUtility } from '../../';\nexport enum KERNEL {\n    NORMAL = 'NORMAL',\n    GAUSSIAN_BLUR_1 = 'GAUSSIAN_BLUR_1',\n    GAUSSIAN_BLUR_2 = 'GAUSSIAN_BLUR_2',\n    GAUSSIAN_BLUR_3 = 'GAUSSIAN_BLUR_3',\n    BOX_BLUR = 'BOX_BLUR',\n    TRIANGLE_BLUR = 'TRIANGLE_BLUR',\n    EMBOSS = 'EMBOSS',\n    UNSHARPEN = 'UNSHARPEN',\n    SHARPENESS = 'SHARPENESS',\n    SHARPEN = 'SHARPEN',\n    EDGE_DETECTION_1 = 'EDGE_DETECTION_1',\n    EDGE_DETECTION_2 = 'EDGE_DETECTION_2',\n    EDGE_DETECTION_3 = 'EDGE_DETECTION_3',\n    EDGE_DETECTION_4 = 'EDGE_DETECTION_4',\n    EDGE_DETECTION_5 = 'EDGE_DETECTION_5',\n    EDGE_DETECTION_6 = 'EDGE_DETECTION_6',\n    SOBEL_HORIZONTAL = 'SOBEL_HORIZONTAL',\n    SOBEL_VERTICAL = 'SOBEL_VERTICAL',\n    PREVIT_HORIZONTAL = 'PREVIT_HORIZONTAL',\n    PREVIT_VERTICAL = 'PREVIT_VERTICAL',\n}\nexport const CONVOLUTIONAL_KERNEL = {\n\n    NORMAL : [  0, 0, 0,\n                0, 1, 0,\n                0, 0, 0],\n\n    GAUSSIAN_BLUR_1 : [\n                0.045, 0.122, 0.045,\n                0.122, 0.332, 0.122,\n                0.045, 0.122, 0.045],\n\n    GAUSSIAN_BLUR_2: [\n                1, 2, 1,\n                2, 4, 2,\n                1, 2, 1],\n\n    GAUSSIAN_BLUR_3: [\n                0, 1, 0,\n                1, 1, 1,\n                0, 1, 0 ],\n\n    BOX_BLUR: [\n                0.111, 0.111, 0.111,\n                0.111, 0.111, 0.111,\n                0.111, 0.111, 0.111],\n\n    TRIANGLE_BLUR: [\n                0.0625, 0.125, 0.0625,\n                0.125, 0.25, 0.125,\n                0.0625, 0.125, 0.0625],\n\n    EMBOSS: [\n                -2, -1, 0,\n                -1, 1, 1,\n                0, 1, 2],\n\n    UNSHARPEN: [\n                -1, -1, -1,\n                -1, 9, -1,\n                -1, -1, -1 ],\n\n    SHARPENESS: [\n                0, -1, 0,\n                -1, 5, -1,\n                0, -1, 0 ],\n\n    SHARPEN: [\n                -1, -1, -1,\n                -1, 16, -1,\n                -1, -1, -1 ],\n\n    EDGE_DETECTION_1: [\n                -0.125, -0.125, -0.125,\n                -0.125, 1, -0.125,\n                -0.125, -0.125, -0.125],\n\n    EDGE_DETECTION_2: [\n                -1, -1, -1,\n                -1, 8, -1,\n                -1, -1, -1],\n\n    EDGE_DETECTION_3: [\n                -5, 0, 0,\n                0, 0, 0,\n                0, 0, 5],\n\n    EDGE_DETECTION_4: [\n                -1, -1, -1,\n                0, 0, 0,\n                1, 1, 1],\n\n    EDGE_DETECTION_5: [\n                -1, -1, -1,\n                2, 2, 2,\n                -1, -1, -1],\n\n    EDGE_DETECTION_6: [\n                -5, -5, -5,\n                -5, 39, -5,\n                -5, -5, -5],\n\n    SOBEL_HORIZONTAL: [\n                1, 2, 3,\n                0, 0, 0,\n                -1, -2, -1],\n\n    SOBEL_VERTICAL: [\n                1, 0, -1,\n                2, 0, -2,\n                1, 0, -1],\n\n    PREVIT_HORIZONTAL: [\n                1, 1, 1,\n                0, 0, 0,\n                -1, -1, -1],\n\n    PREVIT_VERTICAL: [\n                1, 0, -1,\n                1, 0, -1,\n                1, 0, -1],\n\n};\n\nexport class PixelMapFilter {\n    public pixels: Pixel[];\n    public bitmap: ImageData;\n    public bitmapResult: ImageData;\n    public height = -1;\n    public width = -1;\n\n    public isGray = false;\n\n    public constructor(bitmap: ImageData, isGray: boolean = false) {\n        this.isGray = isGray;\n\n        // this.bitmap = new ImageData(bitmap.width, bitmap.height);\n        this.bitmap = bitmap;\n        this.pixels = [];\n\n        this.height = bitmap.height;\n        this.width = bitmap.width;\n        // console.log(this.width, this.height);\n        let x = 0;\n        let y = -1;\n        let j = 0;\n        if (this.isGray) {\n            for (let i = 0; i < this.bitmap.data.length; i += 4 ) {\n\n                if (j++ % this.bitmap.width === 0) {\n                    x = 0;\n                    y++;\n                } else {\n                    x++;\n                }\n                // console.log('x: ', x, 'y:', y);\n                let c = new Color(this.bitmap.data[i + 0], this.bitmap.data[i + 1], this.bitmap.data[i + 2], this.bitmap.data[i + 3]);\n                let col = ColorUtility.RGBtoGray(c.R, c.G, c.B);\n                let nc = Color.FromArgb(255, Math.floor(col), Math.floor(col), Math.floor(col));\n                let p = new Pixel(this, x, this.height - y - 1, nc);\n                this.pixels.push(p);\n            }\n        } else {\n            for (let i = 0; i < this.bitmap.data.length; i += 4 ) {\n\n                if (i % this.bitmap.width === 0) {\n                    x = 0;\n                    y++;\n                } else {\n                    x++;\n                }\n                // console.log('x: ', x, 'y:', y);\n\n                let c = new Color(this.bitmap.data[i + 0], this.bitmap.data[i + 1], this.bitmap.data[i + 2], this.bitmap.data[i + 3]);\n                let p = new Pixel(this, x, this.height - y - 1, c);\n                this.pixels.push(p);\n            }\n        }\n        this.InitGridNeighbor();\n    }\n    public InitGridNeighbor() {\n        for (let j = 0; j < this.height; ++j) {\n            for (let i = 0; i < this.width; ++i) {\n                let k = j * this.width + i;\n                let px0: Pixel = this.pixels[k];\n\n                if ((i > 0) && (j < this.height - 1)) {\n                    px0.npix.push(this.pixels[k + this.width - 1]);\n                    px0.UP_LEFT = this.pixels[k + this.width - 1];\n                }\n                if (j < this.height - 1) {\n                    px0.npix.push(this.pixels[k + this.width]);\n                    px0.UP_MIDDLE = this.pixels[k + this.width];\n                }\n\n                if ((i < this.width - 1) && (j < this.height - 1)) {\n                    px0.npix.push(this.pixels[k + this.width + 1]);\n                    px0.UP_RIGHT = this.pixels[k + this.width + 1];\n                }\n\n                if (i > 0) {\n                    px0.npix.push(this.pixels[k - 1]);\n                    px0.MIDDLE_LEFT = this.pixels[k - 1];\n                }\n\n                if (i < this.width - 1) {\n                    px0.npix.push(this.pixels[k + 1]);\n                    px0.MIDDLE_RIGHT = this.pixels[k + 1];\n                }\n\n                if ((i > 0) && (j > 0)) {\n                    px0.npix.push(this.pixels[k - this.width - 1]);\n                    px0.DOWN_LEFT = this.pixels[k - this.width - 1];\n                }\n\n                if (j > 0) {\n                    px0.npix.push(this.pixels[k - this.width]);\n                    px0.DOWN_MIDDLE = this.pixels[k - this.width];\n                }\n                if ((i < this.width - 1) && (j > 0)) {\n                    px0.npix.push(this.pixels[k - this.width + 1]);\n                    px0.DOWN_RIGHT = this.pixels[k - this.width + 1];\n                }\n            }\n        }\n    }\n    public update(bitmap: ImageData) {\n        this.bitmap = bitmap;\n\n        let index = 0;\n\n        for (let i = 0; i < this.bitmap.data.length; i += 4 ) {\n            this.pixels[index].color.R = this.bitmap.data[i + 0];\n            this.pixels[index].color.G = this.bitmap.data[i + 1];\n            this.pixels[index].color.B = this.bitmap.data[i + 2];\n            this.pixels[index].color.A = this.bitmap.data[i + 3];\n            index++;\n        }\n    }\n    public computeConvolution(kernel: number[]) {\n    //     console.log(kernel);\n        for (let p of this.pixels) {\n            p.ComputeByKernelList(kernel);\n        }\n    }\n\n    // public GetPts() {\n    //     List<NVector3> pts = new List<NVector3>();\n    //     foreach (Pixel p in this.pixels) { pts.Add(p.p); }\n    //     return pts;\n    // }\n    // public List<Mesh> GetMesh(bool isGray) {\n    //     List<Mesh> mesh = new List<Mesh>();\n    //     foreach (Pixel p in this.pixels) { mesh.Add(p.GetMesh(isGray)); }\n    //     return mesh;\n    // }\n\n    public getBitmap() {\n        // Bitmap bitmap = new Bitmap(this.width, this.height);\n\n        this.bitmapResult = new ImageData(this.bitmap.width, this.bitmap.height);\n        let k = 0;\n\n        for (let i = 0; i < this.bitmapResult.data.length; i += 4) {\n            let col = this.pixels[k].colNew;\n            this.bitmapResult.data[i + 0] = col.R;\n            this.bitmapResult.data[i + 1] = col.G;\n            this.bitmapResult.data[i + 2] = col.B;\n            this.bitmapResult.data[i + 3] = col.A;\n            k++;\n        }\n        // for (int y = 0; y < this.height; y++)\n        // {\n        //     for (int x = 0; x < this.width; x++)\n        //     {\n        //         int k = y * width + x;\n        //         bitmap.SetPixel(x, y, this.pixels[k].colNew);\n        //     }\n        // }\n\n        return this.bitmapResult;\n    }\n\n}\nexport class Pixel {\n    public pm: PixelMapFilter;\n    public p0: NVector3;\n    public p1: NVector3 ;\n    public p: NVector3 ;\n\n    public width = 0.5;\n    public height = 0.5;\n\n    public temp = 0.0;\n\n    public i: number;\n    public j: number;\n\n    public UP_LEFT: Pixel;\n    public UP_MIDDLE: Pixel;\n    public UP_RIGHT: Pixel;\n\n    public MIDDLE_LEFT: Pixel;\n    public MIDDLE_RIGHT: Pixel;\n\n    public DOWN_LEFT: Pixel;\n    public DOWN_MIDDLE: Pixel;\n    public DOWN_RIGHT: Pixel;\n\n    public val = 0.0;\n    public npix: Pixel[] = [];\n\n    public color: Color;\n    public colNew: Color;\n\n    constructor( pm: PixelMapFilter, x: number, y: number, c: Color) {\n        this.pm = pm;\n        this.color = Color.FromArgb(255, c.R, c.G, c.B);\n        this.colNew = Color.FromArgb(255, c.R, c.G, c.B);\n        this.p = new NVector3(x, y, 0);\n    }\n    public ComputeByKernelList(kernel: number[]) {\n\n        let weight = 0.0;\n        let r = 0;\n        let g = 0;\n        let b = 0;\n\n        if (this.UP_LEFT !== undefined) {\n            r += this.UP_LEFT.color.R * kernel[0];\n            g += this.UP_LEFT.color.G * kernel[0];\n            b += this.UP_LEFT.color.B * kernel[0];\n            weight += kernel[0];\n        }\n        if (this.UP_MIDDLE !== undefined) {\n            r += this.UP_MIDDLE.color.R * kernel[1];\n            g += this.UP_MIDDLE.color.G * kernel[1];\n            b += this.UP_MIDDLE.color.B * kernel[1];\n            weight += kernel[1];\n        }\n        if (this.UP_RIGHT !== undefined) {\n            r += this.UP_RIGHT.color.R * kernel[2];\n            g += this.UP_RIGHT.color.G * kernel[2];\n            b += this.UP_RIGHT.color.B * kernel[2];\n            weight += kernel[2];\n        }\n\n        if (this.MIDDLE_LEFT !== undefined) {\n            r += this.MIDDLE_LEFT.color.R * kernel[3];\n            g += this.MIDDLE_LEFT.color.G * kernel[3];\n            b += this.MIDDLE_LEFT.color.B * kernel[3];\n            weight += kernel[3];\n        }\n\n        r += this.color.R * kernel[4];\n        g += this.color.G * kernel[4];\n        b += this.color.B * kernel[4];\n        weight += kernel[4];\n\n        if (this.MIDDLE_RIGHT !== undefined) {\n            r += this.MIDDLE_RIGHT.color.R * kernel[5];\n            g += this.MIDDLE_RIGHT.color.G * kernel[5];\n            b += this.MIDDLE_RIGHT.color.B * kernel[5];\n            weight += kernel[5];\n        }\n        if (this.DOWN_LEFT !== undefined) {\n            r += this.DOWN_LEFT.color.R * kernel[6];\n            g += this.DOWN_LEFT.color.G * kernel[6];\n            b += this.DOWN_LEFT.color.B * kernel[6];\n            weight += kernel[6];\n        }\n        if (this.DOWN_MIDDLE !== undefined) {\n            r += this.DOWN_MIDDLE.color.R * kernel[7];\n            g += this.DOWN_MIDDLE.color.G * kernel[7];\n            b += this.DOWN_MIDDLE.color.B * kernel[7];\n            weight += kernel[7];\n        }\n        if (this.DOWN_RIGHT !== undefined) {\n            r += this.DOWN_RIGHT.color.R * kernel[8];\n            g += this.DOWN_RIGHT.color.G * kernel[8];\n            b += this.DOWN_RIGHT.color.B * kernel[8];\n            weight += kernel[8];\n        }\n        if (weight <= 0) { weight = 1; }\n\n        this.colNew = Color.FromArgb(255, this.CutColorValue(r / weight), this.CutColorValue(g / weight), this.CutColorValue(b / weight));\n    }\n    public ComputeKernelWeight(kernel: number[]) {\n        let weight = 0;\n        for (let d of kernel) { weight += d; }\n        if (weight <= 0) {return 1; }\n        return weight;\n    }\n    public CutColorValue(v: number) {\n        if (v < 0.0) {return 0; } else if (255 < v) {return 255; } else {return Math.floor(v); }\n    }\n\n    // public GetMesh(bool isGray)\n    // {\n    //     Mesh mesh = new Mesh();\n    //     mesh.Vertices.Add(p.X - this.width, p.Y - this.height, 0);\n    //     mesh.Vertices.Add(p.X + this.width, p.Y - this.height, 0);\n    //     mesh.Vertices.Add(p.X + this.width, p.Y + this.height, 0);\n    //     mesh.Vertices.Add(p.X - this.width, p.Y + this.height, 0);\n\n    //     mesh.VertexColors.Add(this.colNew);\n    //     mesh.VertexColors.Add(this.colNew);\n    //     mesh.VertexColors.Add(this.colNew);\n    //     mesh.VertexColors.Add(this.colNew);\n\n    //     mesh.Faces.AddFace(0, 1, 3);\n    //     mesh.Faces.AddFace(1, 2, 3);\n    //     mesh.Normals.ComputeNormals();\n    //     mesh.Compact();\n\n    //     return mesh;\n    // }\n}\nexport class Color {\n    R: number;\n    G: number;\n    B: number;\n    A: number;\n    public static FromArgb(a: number, r: number, g: number, b: number) {\n        return new Color(r, g, b, a);\n    }\n    constructor(r: number, g: number, b: number, a: number) {\n        this.R = r;\n        this.G = g;\n        this.B = b;\n        this.A = a;\n    }\n}","import { Deltatime, CanvasLoopController } from '../../../lib';\r\nimport { MouseEventData } from '../EventInteraction/MouseInteraction';\r\nimport { CanvasRanderer } from '..';\r\n\r\nexport class Canvas {\r\n    renderer: CanvasRanderer;\r\n    div: HTMLElement;\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n    isActive: boolean = false;\r\n    scale: number = 0.5;\r\n    translation: number[] = [0, 0];\r\n    translationZoom: number[] = [0, 0];\r\n    deltaTime: Deltatime;\r\n    canvasLoopController: CanvasLoopController;\r\n\r\n    log: string;\r\n    // frameRate: number = 60;\r\n    isViewChanging: boolean = false;\r\n    loopNum: number = 0;\r\n    needRenderloop: boolean = true;\r\n\r\n    ablePan: boolean = true;\r\n    pause: boolean = false;\r\n    constructor(renderer: CanvasRanderer, div: HTMLElement) {\r\n        this.renderer = renderer;\r\n        this.div = div;\r\n        this.Init();\r\n    }\r\n    private Init() {\r\n        const canvas = document.createElement('canvas');\r\n        if (canvas) {\r\n            this.canvas = canvas;\r\n            this.canvas.width = this.div.clientWidth;\r\n            this.canvas.height = this.div.clientHeight;\r\n            this.div.append(this.canvas);\r\n            const ctx = this.canvas.getContext('2d');\r\n            if (ctx) {\r\n                this.ctx = ctx;\r\n                this.isActive = true;\r\n            }\r\n        }\r\n        this.deltaTime = new Deltatime();\r\n        this.canvasLoopController = new CanvasLoopController(60);\r\n    }\r\n    public LoopInit() {\r\n        this.translation[0] = this.ctx.canvas.width * 0.5;\r\n        this.translation[1] = this.ctx.canvas.height * 0.5;\r\n\r\n\r\n        this.SetLevel4();\r\n        this.initBinder(this.ctx);\r\n        this.Loop();\r\n    }\r\n    public Loop() {\r\n        let before = performance.now();\r\n        this.deltaTime.UpdateFPS();\r\n\r\n        if (this.canvasLoopController.level > 3) {\r\n            if (this.canvasLoopController.level === 6) { // level 6\r\n                requestAnimationFrame(() => { this.Loop(); });\r\n                // this.Clear(this.ctx);\r\n                this.RenderPre(this.ctx);\r\n            } else if (this.canvasLoopController.level === 5) {\r\n                if (this.isViewChanging) {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                } else {\r\n                    // setTimeout(() => {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                    // }, 1000 / this.frameRate);\r\n                }\r\n                // this.Clear(this.ctx);\r\n                this.RenderPre(this.ctx);\r\n            } else if (this.canvasLoopController.level === 4) {\r\n                if (this.isViewChanging) {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                } else {\r\n                    // setTimeout(() => {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                    // }, 1000 / this.frameRate);\r\n                }\r\n                if (!this.canvasLoopController.stop) {\r\n                    this.RenderPre(this.ctx);\r\n                    this.canvasLoopController.TimerForStop();\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n        } else if (this.canvasLoopController.level === 1) { // level 1 - 3\r\n            if (this.isViewChanging) {\r\n                // this.Clear(this.ctx);\r\n            } else {\r\n                // this.Clear(this.ctx);\r\n                this.RenderPre(this.ctx);\r\n            }\r\n        } else {\r\n            // this.Clear(this.ctx);\r\n            this.RenderPre(this.ctx);\r\n        }\r\n        let after = performance.now();\r\n        this.log = `level:  ${this.canvasLoopController.level}, total frames: ${this.loopNum++} (FPS: ${this.deltaTime.frameRate.toFixed(0)}), a loop took: ${(after - before).toFixed(2)} ms to execute.`;\r\n        // this.LogOut();\r\n    }\r\n    public SetLevel1() { this.canvasLoopController.level = 1; this.Loop(); }\r\n    public SetLevel2() { this.canvasLoopController.level = 2; this.Loop(); }\r\n    public SetLevel3() { this.canvasLoopController.level = 3; this.Loop(); }\r\n    public RenderSetLevel4() {\r\n        this.canvasLoopController.stop = true;\r\n    }\r\n    public SetLevel4() {\r\n        this.canvasLoopController.Reset();\r\n        setTimeout(() => {\r\n            this.canvasLoopController.level = 4;\r\n            this.Loop();\r\n        }, 500);\r\n    }\r\n    public SetLevel5() {\r\n        this.canvasLoopController.Reset();\r\n        setTimeout(() => {\r\n            this.canvasLoopController.level = 5;\r\n            this.Loop();\r\n        }, 500);\r\n    }\r\n    public SetLevel6() {\r\n        this.canvasLoopController.stop = false;\r\n        this.canvasLoopController.Reset();\r\n        setTimeout(() => {\r\n            this.canvasLoopController.level = 6;\r\n            this.Loop();\r\n        }, 500);\r\n    }\r\n    public Clear(ctx: CanvasRenderingContext2D) {\r\n        // this.ctx.clearRect(-this.translation[0], -this.translation[1], this.ctx.canvas.width, this.ctx.canvas.height);\r\n        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n\r\n    }\r\n    public Zoom(e: MouseEventData) {\r\n        // const offsetX = (e.xs);\r\n        // const offsetY = (e.ys);\r\n        // console.log(offsetX, this.translation[0]);\r\n\r\n        if (e.wheel < 0) {\r\n            this.scale += this.scale * 0.09;\r\n            // console.log('in', this.zoom);\r\n            // this.translation[0] += (this.ctx.canvas.width * 0.5 - offsetX) / this.zoom;\r\n            // this.translation[1] += (this.ctx.canvas.height * 0.5 - offsetY) / this.zoom;\r\n            // this.translationZoom[0] = (offsetX);\r\n            // this.translationZoom[1] = (offsetY);\r\n        } else {\r\n            // console.log('out', this.zoom);\r\n            this.scale -= this.scale * 0.09;\r\n\r\n            // this.translation[0] -= (this.ctx.canvas.width * 0.5 - offsetX) / this.zoom;\r\n            // this.translation[1] -= (this.ctx.canvas.height * 0.5 - offsetY) / this.zoom;\r\n            // this.translation[0] -= (this.translation[0]) - offsetX;\r\n            // this.translation[1] -= (this.translation[1]) - offsetY;\r\n            // this.translation[0] += (offsetX / this.zoom);\r\n            // this.translation[1] += (offsetY / this.zoom);\r\n            // this.translationZoom[0] = (offsetX);\r\n            // this.translationZoom[1] = (offsetY);\r\n            // this.translation[0] += offsetX / this.zoom;\r\n            // this.translation[1] += offsetY / this.zoom;\r\n        }\r\n\r\n    }\r\n    public RemapByZoom(e: MouseEventData) {\r\n        e.x = ((e.xs - this.translation[0]) / this.scale);\r\n        e.y = ((e.ys - this.translation[1]) / this.scale);\r\n        return e;\r\n    }\r\n    public Pan(e: MouseEventData) {\r\n        // console.log(e);\r\n        if (!this.ablePan) { return; }\r\n        const xOff = e.xs - e.preXs;\r\n        const yOff = e.ys - e.preYs;\r\n        this.translation[0] += xOff;\r\n        this.translation[1] += yOff;\r\n    }\r\n    public RenderForce() {\r\n        this.canvasLoopController.stop = false;\r\n    }\r\n    public RenderPre(ctx: CanvasRenderingContext2D) {\r\n        if (!this.isActive) { return; }\r\n        this.Clear(this.ctx);\r\n        this.ctx.save();\r\n        this.ctx.translate(this.translation[0], this.translation[1]);\r\n        this.ctx.scale(this.scale, this.scale);\r\n\r\n        // this.ctx.translate(this.translationZoom[0], this.translationZoom[1]);\r\n        // this.translationZoom[0] = this.translationZoom[1] = 0;\r\n\r\n        for (let i = -10; i < 10; ++i) {\r\n            for (let j = -10; j < 10; ++j) {\r\n                ctx.beginPath();\r\n                ctx.fillStyle = 'rgba(255, 0, 0, 0.9)';\r\n                ctx.arc(i * 10, j * 10, 2, 0, Math.PI * 2);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n            }\r\n        }\r\n\r\n        this.RenderBinder(ctx);\r\n\r\n        this.ctx.restore();\r\n    }\r\n    public initBinder(ctx: CanvasRenderingContext2D) {\r\n\r\n    }\r\n    public RenderBinder(ctx: CanvasRenderingContext2D) {\r\n\r\n    }\r\n}","\r\nexport class ActiveCommandBase {\r\n  constructor() { /*.*/ }\r\n  public MouseEventController(e: any) {/*.*/ }\r\n  public KeyboardEventController(k: any) {/*.*/ }\r\n  public TouchEventController(t: any) {/*.*/ }\r\n  public GestureEventController(j: any) {/*.*/ }\r\n  public mouseLeftClick(e: any) {/*.*/ }\r\n  public mouseMiddleClick(e: any) {/*.*/ }\r\n  public mouseRightClick(e: any) {/*.*/ }\r\n  public mouseDoubleClick(e: any) {/*.*/ }\r\n  // .........................................\r\n  public mouseMove(e: any) {/*.*/ }\r\n  public mouseDrag(e: any) {/*.*/ }\r\n  public mouseDown(e: any) {/*.*/ }\r\n  public mouseUp(e: any) {/*.*/ }\r\n  public keydown(k: any) {/*.*/ }\r\n  public keyUp(k: any) {/*.*/ }\r\n}\r\n\r\nexport enum CLICK_TYPE {\r\n  LEFT = 'LEFT', MIDDLE = 'MIDDLE', RIGHT = 'RIGHT', WHEEL = 'WHEEL',\r\n  DRAG = 'DRAG', DRAG_LEFT = 'DRAG_LEFT', DRAG_MIDDLE = 'DRAG_MIDDLE', DRAG_RIGHT = 'DRAG_RIGHT',\r\n  MOVE = 'MOVE', DOUBLE = 'DOUBLE', UP = 'UP',\r\n  DOWN = 'DOWN', DOWN_MIDDLE = 'DOWN_MIDDLE', DOWN_RIGHT = 'DOWN_RIGHT'\r\n}\r\nexport class MouseEventData {\r\n  x: number = -1; y: number = -1; z: number = -1;\r\n  preX: number = -1; preY: number = -1; preZ: number = -1;\r\n  xs: number = -1; ys: number = -1;\r\n  preXs: number = -1; preYs: number = -1;\r\n  yGLPicking: number;\r\n  command: ActiveCommandBase; // = new CActiveCommandNone(this.app.activeCommands);\r\n  CLICK_TYPE: CLICK_TYPE = CLICK_TYPE.MOVE;\r\n  isDown: boolean = false;\r\n  isDoubleClick: boolean = false;\r\n  isMove: boolean = false;\r\n  pressedShift: boolean = false;\r\n  pressedAlt: boolean = false;\r\n  pressedCtrl: boolean = false;\r\n  wheel: number = 0;\r\n  preWheel: number = 0;\r\n  isActive: boolean = true;\r\n  // premEvent: MouseEventData;\r\n  native: MouseEvent;\r\n  constructor() {\r\n      //\r\n  }\r\n  public DeepCopy() {\r\n      let mEvent = new MouseEventData();\r\n      mEvent.x = this.x; mEvent.y = this.y; mEvent.z = this.z;\r\n      mEvent.preX = this.preX; mEvent.preY = this.preY; mEvent.preZ = this.preZ;\r\n      mEvent.xs = this.x; mEvent.ys = this.y;\r\n      mEvent.preXs = this.preXs; mEvent.preYs = this.preYs;\r\n      mEvent.pressedAlt = this.pressedAlt; mEvent.pressedShift = this.pressedShift; mEvent.pressedCtrl = this.pressedCtrl;\r\n      mEvent.isDoubleClick = this.isDoubleClick; mEvent.isDown = this.isDown; mEvent.isMove = this.isMove;\r\n      mEvent.wheel = this.wheel; mEvent.preWheel = this.preWheel;\r\n      mEvent.yGLPicking = this.yGLPicking;\r\n      mEvent.CLICK_TYPE = this.CLICK_TYPE;\r\n      mEvent.command = this.command;\r\n      mEvent.native = this.native;\r\n      return mEvent;\r\n  }\r\n}\r\n\r\nexport interface IMouseInteractionMenu {\r\n  MouseInteractionMenu: (mouseEventData: MouseEventData) => void;\r\n}\r\nexport class MouseInteraction {\r\n  mouseInteractionUI: IMouseInteractionMenu;\r\n  mouseEventDataPre: MouseEventData = new MouseEventData();\r\n  isEnable: boolean = true;\r\n  clickCount: number = 0;\r\n  click: boolean = false;\r\n  prevent: boolean = false;\r\n  delay: number = 250;\r\n  timer: NodeJS.Timer | number;\r\n  down: boolean = false;\r\n  e: MouseEventData;\r\n  private _stopPropagation: boolean = false;\r\n  constructor() {\r\n\r\n  }\r\n  public InitNativeMouseEvent(div: HTMLElement) {\r\n    div.onclick = (e: MouseEvent) => {\r\n      this.prevent = false;\r\n      this.timer = setTimeout(\r\n        () => {\r\n          if (!this.prevent) {\r\n            this.MouseClick(e);\r\n          }\r\n          this.prevent = false;\r\n        },\r\n        this.delay);\r\n    };\r\n    div.ondblclick = (e: MouseEvent) => {\r\n      clearTimeout(this.timer as number);\r\n      this.prevent = true;\r\n      this.MouseDoubleClick(e);\r\n    };\r\n    div.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\r\n    div.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\r\n    div.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\r\n    div.addEventListener('wheel', (e: WheelEvent) => this.MouseWheel(e, e.deltaY));\r\n  }\r\n  public MouseDown(e: MouseEvent) {\r\n    this.click = true;\r\n    this.down = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOWN;\r\n    mEvent.isDown = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseClick(e: MouseEvent) {\r\n    if (!this.click) { return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    if (e.button === 0) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.LEFT;\r\n    } else if (e.button === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.MIDDLE;\r\n    } else if (e.button === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseDoubleClick(e: MouseEvent) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOUBLE;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseDrag(e: MouseEvent) {\r\n    this.click = false;\r\n    this.prevent = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    mEvent.isDown = true;\r\n    if (e.buttons === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    } else if (e.buttons === 4) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_MIDDLE;\r\n    } else if (e.buttons === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseMove(e: MouseEvent) {\r\n    if (this.down) { this.MouseDrag(e); return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.MOVE;\r\n    mEvent.isDown = true;\r\n    this.prevent = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseUp(e: MouseEvent) {\r\n    this.down = false;\r\n    this.click = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.UP;\r\n    mEvent.isDown = false;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseWheel(e: MouseEvent, v: number) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.wheel = v;\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.WHEEL;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public CommonEventBuilder(e: MouseEvent): MouseEventData {\r\n    let mEvent: MouseEventData = new MouseEventData();\r\n    mEvent.preXs = this.mouseEventDataPre.xs;\r\n    mEvent.preYs = this.mouseEventDataPre.ys;\r\n    mEvent.preX = this.mouseEventDataPre.x;\r\n    mEvent.preY = this.mouseEventDataPre.y;\r\n    // mEvent.premEvent = this.mouseEventDataPre;\r\n\r\n    mEvent.pressedShift = e.shiftKey;\r\n    mEvent.pressedAlt = e.altKey;\r\n    mEvent.pressedCtrl = e.ctrlKey;\r\n\r\n    mEvent.xs = e.offsetX;\r\n    mEvent.ys = e.offsetY;\r\n    mEvent.preWheel = this.mouseEventDataPre.wheel;\r\n    mEvent.wheel = 0;\r\n    mEvent.native = e;\r\n    this.mouseEventDataPre = mEvent;\r\n    this.e = mEvent;\r\n    return mEvent;\r\n  }\r\n  public get stopPropagation() {\r\n    return this._stopPropagation;\r\n  }\r\n  public set stopPropagation(v: boolean) {\r\n    if (v) {\r\n      this._stopPropagation = v;\r\n    } else {\r\n      setTimeout(() => { this._stopPropagation = v; }, 500);\r\n    }\r\n  }\r\n  private MouseEvenEmitting(mouseEventData: MouseEventData) {\r\n    this.MouseEventEmittingForViewController(mouseEventData);\r\n    if (this._stopPropagation) { return; }\r\n    this.MouseEventEmittingBinder(mouseEventData);\r\n  }\r\n  private MouseEventEmittingForViewController(mouseEventData: MouseEventData) {\r\n    if (this.mouseInteractionUI) { this.mouseInteractionUI.MouseInteractionMenu(mouseEventData); }\r\n  }\r\n  public MouseEventEmittingBinder(mouseEventData: MouseEventData) {\r\n    // binding needed\r\n    // this.ioWrapper.core.activeCommandController.MouseEventController(mouseEventData);\r\n  }\r\n}","import { CLICK_TYPE, NVector3 } from '../../../lib';\r\nimport { MouseEventData } from '../EventInteraction/MouseInteraction';\r\n// import { MouseEventData } from '../../AppCoreWrapper/IOWrapper/EventInteraction/MouseInteraction';\r\nimport { CanvasRanderer } from '..';\r\n\r\nexport class ActiveCommandController {\r\n    renderer: CanvasRanderer;\r\n    mouse: NVector3 = new NVector3(0, 0);\r\n\r\n    constructor(renderer: CanvasRanderer) {\r\n        this.renderer = renderer;\r\n    }\r\n    public MouseEventController(e: MouseEventData) {\r\n        const eUI = e.DeepCopy();\r\n        eUI.x = e.xs;\r\n        eUI.y = e.ys;\r\n\r\n        this.renderer.canvas.RenderForce();\r\n\r\n        if (e.CLICK_TYPE === CLICK_TYPE.LEFT) {\r\n            this.MouseLeftClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MIDDLE) {\r\n            this.MouseMiddleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN_RIGHT) {\r\n            this.MouseRightClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOUBLE) {\r\n            this.MouseDoubleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MOVE) {\r\n            this.MouseMovePre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DRAG) {\r\n            this.MouseDragPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN) {\r\n            this.MouseDownPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.WHEEL) {\r\n            this.MouseWheelPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.UP) { this.MouseUpPre(e); return; }\r\n\r\n    }\r\n\r\n    // .......................................................\r\n    public MouseDown(e: MouseEventData) {/* */ }\r\n    public MouseDownPre(e: MouseEventData) {\r\n        this.MouseDown(e);\r\n    }\r\n    public MouseLeftClick(e: MouseEventData) {/* */ }\r\n    public MouseLeftClickPre(e: MouseEventData) {\r\n        // console.log('left click');\r\n        this.MouseLeftClick(e);\r\n    }\r\n    public MouseMiddleClick(e: MouseEventData) {/* */ }\r\n    public MouseMiddleClickPre(e: MouseEventData) {\r\n\r\n        this.MouseMiddleClick(e);\r\n    }\r\n    public MouseRightClick(e: MouseEventData) { /* */ }\r\n    public MouseRightClickPre(e: MouseEventData) {\r\n\r\n        this.MouseRightClick(e);\r\n    }\r\n    public MouseUp(e: MouseEventData) { /* */ }\r\n    public MouseUpPre(e: MouseEventData) {\r\n\r\n        this.MouseUp(e);\r\n\r\n    }\r\n    public MouseDoubleClick(e: MouseEventData) {/* */ }\r\n    public MouseDoubleClickPre(e: MouseEventData) {\r\n        // console.log('d click');\r\n        this.MouseDoubleClick(e);\r\n    }\r\n    public MouseMove(e: MouseEventData) {/* */ }\r\n    public MouseMovePre(e: MouseEventData) {\r\n        // console.log('move');\r\n\r\n        this.MouseMove(e);\r\n    }\r\n    public MouseDrag(e: MouseEventData) {/* */ }\r\n    public MouseDragPre(e: MouseEventData) {\r\n        this.mouse.x = e.x;\r\n        this.mouse.y = e.y;\r\n\r\n        this.renderer.canvas.Pan(e);\r\n\r\n        this.MouseDrag(e);\r\n    }\r\n    public MouseWheel(e: MouseEventData) {/* */ }\r\n    public MouseWheelPre(e: MouseEventData) {\r\n        this.renderer.canvas.Zoom(e);\r\n        this.MouseWheel(e);\r\n    }\r\n    public pushActionFromPulldown(v: string) {\r\n        const command = v.split('@');\r\n        switch (command[0]) {\r\n            case '':\r\n                //\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n}","import { KERNEL } from '../../../lib'\r\n\r\nimport { CanvasRanderer } from '..';\r\nexport class View {\r\n    divUI: HTMLElement;\r\n    divConsole: HTMLElement;\r\n    divLocalMain: HTMLElement;\r\n    canvasRanderer: CanvasRanderer;\r\n    constructor(canvasRanderer: CanvasRanderer) {\r\n        this.canvasRanderer = canvasRanderer;\r\n        this.divLocalMain = this.canvasRanderer.hostDiv;\r\n\r\n        this.initUI();\r\n    }\r\n    initUI() {\r\n        const divUI = document.createElement('div');\r\n        if (!divUI) { return; } this.divUI = divUI;\r\n        this.divLocalMain.append(divUI);\r\n        this.divUI.style.marginLeft = '10px';\r\n        this.divUI.style.width = '100%';\r\n        // this.divUI.style.display = 'grid';\r\n\r\n        const btn = document.createElement('button');\r\n        btn.textContent = 'toggle';\r\n        btn.onclick = () => {\r\n            this.canvasRanderer.implmentation.toggle();\r\n        };\r\n        this.divUI.append(btn);\r\n\r\n        let input = document.createElement('input');\r\n        input.oninput = () => {\r\n            const val = +input.value as number;\r\n            console.log(val);\r\n\r\n\r\n\r\n            let kernel = KERNEL.NORMAL;\r\n\r\n            if (val === 0) { kernel = KERNEL.NORMAL; }\r\n            else if (val === 1) { kernel = KERNEL.BOX_BLUR; }\r\n            else if (val === 2) { kernel = KERNEL.EDGE_DETECTION_1; }\r\n            else if (val === 3) { kernel = KERNEL.EDGE_DETECTION_2; }\r\n            else if (val === 4) { kernel = KERNEL.EDGE_DETECTION_3; }\r\n            else if (val === 5) { kernel = KERNEL.EDGE_DETECTION_4; }\r\n            else if (val === 6) { kernel = KERNEL.EDGE_DETECTION_5; }\r\n            else if (val === 7) { kernel = KERNEL.EDGE_DETECTION_6; }\r\n            else if (val === 8) { kernel = KERNEL.EMBOSS; }\r\n            else if (val === 9) { kernel = KERNEL.GAUSSIAN_BLUR_1; }\r\n            else if (val === 10) { kernel = KERNEL.GAUSSIAN_BLUR_2; }\r\n            else if (val === 11) { kernel = KERNEL.GAUSSIAN_BLUR_3; }\r\n            else if (val === 12) { kernel = KERNEL.PREVIT_HORIZONTAL; }\r\n            else if (val === 13) { kernel = KERNEL.PREVIT_VERTICAL; }\r\n            else if (val === 14) { kernel = KERNEL.SHARPEN; }\r\n            else if (val === 15) { kernel = KERNEL.SHARPENESS; }\r\n            else if (val === 16) { kernel = KERNEL.SOBEL_HORIZONTAL; }\r\n            else if (val === 17) { kernel = KERNEL.SOBEL_VERTICAL; }\r\n            else if (val === 18) { kernel = KERNEL.TRIANGLE_BLUR; }\r\n            else if (val === 19) { kernel = KERNEL.UNSHARPEN; }\r\n\r\n            this.divConsole.innerHTML = 'Convolutional filter: ' + kernel ;\r\n\r\n            this.canvasRanderer.implmentation.setFilter(kernel);\r\n            // this.app.appCore.updateOptionA(val);\r\n        };\r\n        input.type = 'range';\r\n        input.min = '0';\r\n        input.max = '19.0';\r\n        input.step = '1.0';\r\n        input.value = '0';\r\n        this.divUI.append(input);\r\n\r\n        let inputOff = document.createElement('input');\r\n        inputOff.oninput = () => {\r\n            const val = +inputOff.value as number;\r\n            console.log(val);\r\n            // this.app.appCore.updateOptionB(val);\r\n        };\r\n        inputOff.type = 'range';\r\n        inputOff.min = '1';\r\n        inputOff.max = '10.0';\r\n        inputOff.value = '4';\r\n        this.divUI.append(inputOff);\r\n\r\n        // let inputOpt = document.createElement('input');\r\n        // inputOpt.oninput = () => {\r\n        //     const val = +inputOpt.value as number;\r\n        //     this.app.appCore.updateOptionC(val);\r\n        // };\r\n        // inputOpt.type = 'range';\r\n        // inputOpt.min = '1';\r\n        // inputOpt.max = '8';\r\n        // inputOpt.value = '4';\r\n        // this.divUI.append(inputOpt);\r\n\r\n        this.divConsole = document.createElement('p');\r\n        if (!this.divConsole) { return; } this.divUI.append(this.divConsole);\r\n        this.divConsole.style.width = 'max-content';\r\n        this.divConsole.innerHTML = 'Convolutional filter: Normal';\r\n        // this.divConsole.innerHTML += '4. third slider for Opti level! <br> ';\r\n        // this.divConsole.innerHTML += '* num of node: ';\r\n    }\r\n}","import { PixelMapFilter, CONVOLUTIONAL_KERNEL, KERNEL } from '../../../../lib';\r\n\r\nimport { Implmentation } from '..';\r\nexport class ImageProcessor {\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    implmentation: Implmentation;\r\n\r\n    img: HTMLImageElement;\r\n    imgDataOrigin: ImageData;\r\n\r\n    pixelMapFilter: PixelMapFilter;\r\n\r\n    constructor(implmentation: Implmentation, img: HTMLImageElement ) {\r\n        this.implmentation = implmentation;\r\n        this.img = img;\r\n\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.width = this.img.width;\r\n        this.canvas.height = this.img.height;\r\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n        this.ctx.drawImage(this.img, 0, 0, this.img.width, this.img.height);\r\n        // console.log('this.img.width, this.img.height', this.img.width, this.img.height);\r\n        this.imgDataOrigin = this.ctx.getImageData(0, 0, this.img.width, this.img.height);\r\n\r\n\r\n    }\r\n    public setFilter(k: KERNEL) {\r\n        this.pixelMapFilter = new PixelMapFilter(this.imgDataOrigin);\r\n        this.pixelMapFilter.computeConvolution(CONVOLUTIONAL_KERNEL[k]);\r\n        const data = this.pixelMapFilter.getBitmap();\r\n\r\n        this.ctx.putImageData(data, 0, 0, 0, 0, this.img.width, this.img.height);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // ctx.drawImage(this.img, 0, 0, this.img.width, this.img.height);\r\n        ctx.drawImage(this.canvas, - this.img.width * 0.5, - this.img.height * 0.5, this.img.width, this.img.height);\r\n\r\n        // ctx.putImageData(this.imgDataOrigin, 0, 0, 0, 0, this.img.width, this.img.height);\r\n        // ctx.putImageData(this.imgDataOrigin, - this.img.width * 0.5, - this.img.height * 0.5);\r\n\r\n    }\r\n\r\n}","import { PixelMapFilter, CONVOLUTIONAL_KERNEL, KERNEL } from '../../../../lib';\r\n\r\nimport { Implmentation } from '..';\r\n\r\nexport class VideoProcessor {\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    implmentation: Implmentation;\r\n\r\n    img: HTMLImageElement;\r\n    imgDataOrigin: ImageData;\r\n\r\n    pixelMapFilter: PixelMapFilter;\r\n\r\n    public video: HTMLVideoElement;\r\n\r\n    width = 200;\r\n    height = 200;\r\n\r\n    kernel: number[] = CONVOLUTIONAL_KERNEL.NORMAL;\r\n\r\n    constructor(implmentation: Implmentation, hostDiv?: HTMLElement ) {\r\n        this.implmentation = implmentation;\r\n        this.img = new Image();\r\n\r\n        const width = 300;\r\n        const height = 300;\r\n\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n\r\n        const video = document.createElement('video');\r\n        video.id = this.implmentation.hostDiv.id + 'camera';\r\n        video.setAttribute('playsinline', '');\r\n        video.setAttribute('autoplay', '');\r\n        video.setAttribute('muted', '');\r\n        video.setAttribute('width', `${width}px`);\r\n        video.setAttribute('height', `${height}px`);\r\n        // video.setAttribute('frameRate', '');\r\n        // video.className = Camera.FILTERS[2];\r\n        // video.style.filter = 'blur(3px)';\r\n        // video.style.filter = 'contrast(150%)';\r\n        video.style.width = `${width}px`;\r\n        video.style.height = `${height}px`;\r\n\r\n        if (navigator.mediaDevices.getUserMedia) {\r\n            navigator.mediaDevices.getUserMedia({ video: true })\r\n              .then( (stream) => {\r\n                video.srcObject = stream;\r\n              })\r\n              .catch( (err0r) => {\r\n                console.debug('something went wrong...', err0r);\r\n              });\r\n        }\r\n\r\n        this.video = video;\r\n\r\n        if (video && hostDiv) {\r\n            hostDiv.appendChild(video);\r\n        }\r\n        this.pixelMapFilter = new PixelMapFilter(this.ctx.getImageData(0, 0, this.width, this.height));\r\n    }\r\n    public setFilter(k: KERNEL) {\r\n        this.kernel = CONVOLUTIONAL_KERNEL[k];\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n\r\n        if (this.video) {\r\n\r\n            this.ctx.drawImage(this.video, 0, 0, this.video.width, this.video.height);\r\n\r\n            this.pixelMapFilter.update(this.ctx.getImageData(0, 0,  this.video.width, this.video.height));\r\n            this.pixelMapFilter.computeConvolution(this.kernel);\r\n            this.imgDataOrigin = this.pixelMapFilter.getBitmap();\r\n\r\n            this.ctx.putImageData(this.imgDataOrigin, 0, 0);\r\n\r\n            ctx.drawImage(this.canvas, -this.video.width * 0.5, -this.video.height * 0.5, this.video.width, this.video.height);\r\n        }\r\n\r\n    }\r\n\r\n}","import { KERNEL } from '../../../../../../NJSCore/CV/ConvolutionalFilter/PixelMapFilter';\r\nimport { ImageProcessor } from './ImageProcessor';\r\nimport { VideoProcessor } from './VideoProcessor';\r\n\r\nexport const getImageFromURL = async (src: string = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg') => {\r\n    return new Promise((resolve, reject) => {\r\n        const img = new Image();\r\n        img.src = src;\r\n        img.crossOrigin = 'Anonymous';\r\n        img.onload = () => resolve(img);\r\n        img.onerror = () => reject(new Error('cannot loade the img by url...'));\r\n    });\r\n};\r\n\r\nexport class Implmentation {\r\n    public hostDiv: HTMLElement;\r\n\r\n    public imageProcessor: ImageProcessor;\r\n    public videoProcessor: VideoProcessor;\r\n\r\n    private num = 0;\r\n\r\n    constructor(hostDiv: HTMLElement) {\r\n        this.hostDiv = hostDiv;\r\n    }\r\n    public async init(ctx: CanvasRenderingContext2D) {\r\n\r\n        const img = await getImageFromURL();\r\n        const image = img as HTMLImageElement;\r\n\r\n        this.imageProcessor = new ImageProcessor(this, image);\r\n        this.videoProcessor = new VideoProcessor(this, this.hostDiv);\r\n    }\r\n    public toggle() {\r\n        // console.log('dddd');\r\n        this.num++;\r\n    }\r\n    public setFilter(k: KERNEL) {\r\n        if (this.num % 2 === 0) {\r\n            this.videoProcessor.setFilter(k);\r\n        } else {\r\n            this.imageProcessor.setFilter(k);\r\n        }\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n\r\n        if (this.num % 2 === 0) {\r\n            if (this.videoProcessor) {\r\n                this.videoProcessor.render(ctx);\r\n            }\r\n        } else {\r\n            if (this.imageProcessor) {\r\n                this.imageProcessor.render(ctx);\r\n            }\r\n        }\r\n\r\n    }\r\n}","import { Canvas } from './Canvas/Canvas';\r\nimport { MouseInteraction, MouseEventData } from './EventInteraction/MouseInteraction';\r\nimport { ActiveCommandController } from './ActiveCommandController/ActiveCommandController';\r\nimport { View } from './View';\r\nimport { Implmentation } from './Implmentation';\r\n\r\n\r\n\r\nexport class CanvasRanderer {\r\n    public id: string;\r\n    public hostDiv: HTMLElement;\r\n    public div: HTMLElement;\r\n\r\n    public canvas: Canvas;\r\n    public activeCommandController: ActiveCommandController;\r\n    public mouseInteraction: MouseInteraction;\r\n    public implmentation: Implmentation;\r\n    public view: View;\r\n\r\n    static Init(id: string = 'SandBox') {\r\n        new CanvasRanderer(id);\r\n    }\r\n    constructor(id: string = 'SandBox') {\r\n        this.id = id;\r\n        this.Init();\r\n        window['app'] = this;\r\n    }\r\n    private Init() {\r\n        const hostdiv = document.getElementById(this.id);\r\n        if (hostdiv) { this.hostDiv = hostdiv; } else { return; }\r\n\r\n        const div = document.createElement('div');\r\n        if (div) {\r\n            this.div = div;\r\n            this.div.style.width = '400px'; // '100%';\r\n            this.div.style.height = '300px'; // '100%';\r\n            this.div.style.background = '#dddddd';\r\n            this.hostDiv.append(this.div);\r\n        }\r\n        this.implmentation = new Implmentation(this.hostDiv);\r\n        this.canvas = new Canvas(this, div);\r\n\r\n        this.canvas.initBinder = (ctx: CanvasRenderingContext2D) => this.InitRender(ctx);\r\n        this.canvas.RenderBinder = (ctx: CanvasRenderingContext2D) => this.Render(ctx);\r\n        this.activeCommandController = new ActiveCommandController(this);\r\n        this.mouseInteraction = new MouseInteraction();\r\n        this.InitEventListener(div as HTMLDivElement);\r\n        this.view = new View(this);\r\n        this.canvas.LoopInit();\r\n        this.canvas.SetLevel6();\r\n    }\r\n    public InitEventListener(div: HTMLDivElement) {\r\n        this.mouseInteraction.InitNativeMouseEvent(div);\r\n        this.mouseInteraction.MouseEventEmittingBinder = (e: MouseEventData) => {\r\n            this.activeCommandController.MouseEventController(e);\r\n        };\r\n        window.addEventListener('resize', (e: UIEvent) => {\r\n            this.Resize(e, this.hostDiv.clientWidth, this.hostDiv.clientHeight);\r\n        });\r\n\r\n    }\r\n    public Resize(e: UIEvent, width: number, height: number) {\r\n        // console.log(width, height);\r\n    }\r\n    public InitRender(ctx: CanvasRenderingContext2D) {\r\n        this.implmentation.init(ctx);\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        this.implmentation.render(ctx);\r\n    }\r\n\r\n}","import { CanvasRanderer } from './CanvasRanderer';\r\nexport class AppImageProcessor {\r\n    id: string;\r\n    renderer: CanvasRanderer;\r\n    hostDiv: HTMLElement;\r\n    div: HTMLElement;\r\n    version: number = 1;\r\n    static Init(id: string = 'SandBox') {\r\n        new AppImageProcessor(id, 1);\r\n    }\r\n    constructor(id: string = 'SandBox', version: number = 1) {\r\n        this.id = id;\r\n        this.version = version;\r\n        this.Init();\r\n    }\r\n    private Init() {\r\n\r\n        switch (this.version) {\r\n            case 1:\r\n                this.renderer = new CanvasRanderer(this.id);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n\r\n\r\n    }\r\n}","import { AppImageProcessor } from './AppImageProcessor';\r\n// import { AppThreeTemplate } from './AppThreeTemplate';\r\n\r\nexport class Demo60ImageProcessor {\r\n    static Init(id: string) {\r\n        const n = new Demo60ImageProcessor(id);\r\n        n.Dummy();\r\n    }\r\n    constructor(id: string = 'SandBox') {\r\n        new AppImageProcessor(id);\r\n    }\r\n    Dummy() {\r\n        // console.log('working');\r\n    }\r\n}\r\n\r\nexport class Solution {\r\n    public divHost: HTMLElement;\r\n\r\n    constructor(id: string ) {\r\n        this.divHost = document.getElementById(id);\r\n\r\n        Demo60ImageProcessor.Init(id)\r\n    }\r\n    public destroy() {\r\n        if (this.divHost) {\r\n            try {\r\n                while (this.divHost.firstChild) {\r\n                    this.divHost.removeChild(this.divHost.firstChild);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error in destroy method:', error);\r\n            }\r\n        } else {\r\n            console.warn('divHost is undefined in destroy method');\r\n        }\r\n    }\r\n}"],"names":["KERNEL","CONVOLUTIONAL_KERNEL","NORMAL","GAUSSIAN_BLUR_1","GAUSSIAN_BLUR_2","GAUSSIAN_BLUR_3","BOX_BLUR","TRIANGLE_BLUR","EMBOSS","UNSHARPEN","SHARPENESS","SHARPEN","EDGE_DETECTION_1","EDGE_DETECTION_2","EDGE_DETECTION_3","EDGE_DETECTION_4","EDGE_DETECTION_5","EDGE_DETECTION_6","SOBEL_HORIZONTAL","SOBEL_VERTICAL","PREVIT_HORIZONTAL","PREVIT_VERTICAL","PixelMapFilter","constructor","bitmap","isGray","pixels","bitmapResult","height","width","this","x","y","j","i","data","length","c","Color","col","ColorUtility","R","G","B","nc","FromArgb","Math","floor","p","Pixel","push","InitGridNeighbor","k","px0","npix","UP_LEFT","UP_MIDDLE","UP_RIGHT","MIDDLE_LEFT","MIDDLE_RIGHT","DOWN_LEFT","DOWN_MIDDLE","DOWN_RIGHT","update","index","color","A","computeConvolution","kernel","ComputeByKernelList","getBitmap","ImageData","colNew","pm","p0","p1","temp","val","NVector3","weight","r","g","b","undefined","CutColorValue","ComputeKernelWeight","d","v","a","Canvas","renderer","div","canvas","ctx","isActive","scale","translation","translationZoom","deltaTime","canvasLoopController","log","isViewChanging","loopNum","needRenderloop","ablePan","pause","Init","document","createElement","clientWidth","clientHeight","append","getContext","Deltatime","CanvasLoopController","LoopInit","SetLevel4","initBinder","Loop","before","performance","now","UpdateFPS","level","requestAnimationFrame","RenderPre","stop","TimerForStop","after","frameRate","toFixed","SetLevel1","SetLevel2","SetLevel3","RenderSetLevel4","Reset","setTimeout","SetLevel5","SetLevel6","Clear","clearRect","Zoom","e","wheel","RemapByZoom","xs","ys","Pan","xOff","preXs","yOff","preYs","RenderForce","save","translate","beginPath","fillStyle","arc","PI","closePath","fill","RenderBinder","restore","CLICK_TYPE","MouseEventData","z","preX","preY","preZ","yGLPicking","command","MOVE","isDown","isDoubleClick","isMove","pressedShift","pressedAlt","pressedCtrl","preWheel","native","DeepCopy","mEvent","MouseInteraction","mouseInteractionUI","mouseEventDataPre","isEnable","clickCount","click","prevent","delay","timer","down","_stopPropagation","InitNativeMouseEvent","onclick","MouseClick","ondblclick","clearTimeout","MouseDoubleClick","onmousedown","MouseDown","onmouseup","MouseUp","onmousemove","MouseMove","addEventListener","MouseWheel","deltaY","CommonEventBuilder","DOWN","MouseEvenEmitting","button","LEFT","MIDDLE","RIGHT","DOUBLE","MouseDrag","DRAG","buttons","DRAG_MIDDLE","DRAG_RIGHT","UP","WHEEL","shiftKey","altKey","ctrlKey","offsetX","offsetY","stopPropagation","mouseEventData","MouseEventEmittingForViewController","MouseEventEmittingBinder","MouseInteractionMenu","ActiveCommandController","mouse","MouseEventController","eUI","MouseUpPre","MouseWheelPre","MouseDownPre","MouseDragPre","MouseMovePre","MouseDoubleClickPre","MouseRightClickPre","MouseMiddleClickPre","MouseLeftClickPre","MouseLeftClick","MouseMiddleClick","MouseRightClick","pushActionFromPulldown","split","View","canvasRanderer","divUI","divConsole","divLocalMain","hostDiv","initUI","style","marginLeft","btn","textContent","implmentation","toggle","input","oninput","value","console","innerHTML","setFilter","type","min","max","step","inputOff","ImageProcessor","img","imgDataOrigin","pixelMapFilter","drawImage","getImageData","putImageData","render","VideoProcessor","video","Image","id","setAttribute","navigator","mediaDevices","getUserMedia","then","stream","srcObject","catch","err0r","debug","appendChild","Implmentation","imageProcessor","videoProcessor","num","async","src","Promise","resolve","reject","crossOrigin","onload","onerror","Error","getImageFromURL","image","CanvasRanderer","static","activeCommandController","mouseInteraction","view","window","hostdiv","getElementById","background","InitRender","Render","InitEventListener","Resize","init","AppImageProcessor","version","Demo60ImageProcessor","Dummy","Solution","divHost","destroy","firstChild","removeChild","error","warn"],"sourceRoot":""}
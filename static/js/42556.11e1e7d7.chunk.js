"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[42556,57061],{57061:(e,t,r)=>{let i;r.r(t),r.d(t,{ATTR:()=>i,AttribLocations:()=>a,Shader:()=>n,ShaderUtility:()=>s,UniformLocations:()=>o}),function(e){e.ATTR_POSITION_NAME="a_position",e[e.ATTR_POSITION_LOC=0]="ATTR_POSITION_LOC",e.ATTR_NORMAL_NAME="a_norm",e[e.ATTR_NORMAL_LOC=1]="ATTR_NORMAL_LOC",e.ATTR_UV_NAME="a_uv",e[e.ATTR_UV_LOC=2]="ATTR_UV_LOC",e.ATTR_COLOR_NAME="a_color",e[e.ATTR_COLOR_LOC=4]="ATTR_COLOR_LOC"}(i||(i={}));class a{constructor(e,t){this.position=void 0,this.norm=void 0,this.uv=void 0,this.position=e.getAttribLocation(t,i.ATTR_POSITION_NAME),this.norm=e.getAttribLocation(t,i.ATTR_NORMAL_NAME),this.uv=e.getAttribLocation(t,i.ATTR_UV_NAME)}}class o{constructor(e,t){this.perspective=void 0,this.modelMatrix=void 0,this.cameraMatrix=void 0,this.mainTexture=void 0,this.perspective=e.getUniformLocation(t,"uPMatrix"),this.modelMatrix=e.getUniformLocation(t,"uMVMatrix"),this.cameraMatrix=e.getUniformLocation(t,"uCameraMatrix"),this.mainTexture=e.getUniformLocation(t,"uMainTex")}}class n{constructor(e,t,r){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this.gl=void 0,this.program=void 0,this.attribLoc=void 0,this.uniformLoc=void 0,this.vShader=void 0,this.fShader=void 0,this.gl=e,this.vShader=s.CreateShader(e,e.VERTEX_SHADER,t),this.fShader=s.CreateShader(e,e.FRAGMENT_SHADER,r),this.vShader&&this.fShader){let t=s.CreateProgram(e,this.vShader,this.fShader,i);return t?(this.program=t,e.useProgram(this.program),this.attribLoc=new a(e,this.program),void(this.uniformLoc=new o(e,this.program))):void console.error("vertex fragment shader error")}console.error("vertex fragment shader error")}activate(){return this.gl.useProgram(this.program),this}deactivate(){return this.gl.useProgram(null),this}dispose(){this.gl.getParameter(this.gl.CURRENT_PROGRAM)===this.program&&this.gl.useProgram(null),this.gl.deleteProgram(this.program)}setPerspective(e){return this.gl.uniformMatrix4fv(this.uniformLoc.perspective,!1,e),this}setModelMatrix(e){return this.gl.uniformMatrix4fv(this.uniformLoc.modelMatrix,!1,e),this}setCameraMatrix(e){return this.gl.uniformMatrix4fv(this.uniformLoc.cameraMatrix,!1,e),this}preRender(){}renderModel(e){return this.setModelMatrix(e.transform.getViewMatrix()),this.gl.bindVertexArray(e.vao.vao),e.vao.noCulling&&this.gl.disable(this.gl.CULL_FACE),e.vao.doBlending&&this.gl.enable(this.gl.BLEND),e.vao.indexCount?this.gl.drawElements(e.vao.drawMode,e.vao.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(e.vao.drawMode,0,e.vao.vertexCount),this.gl.bindVertexArray(null),e.vao.noCulling&&this.gl.enable(this.gl.CULL_FACE),e.vao.doBlending&&this.gl.disable(this.gl.BLEND),this}}class s{static CreateProgram(e,t,r){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=e.createProgram();if(null===o)return null;if(e.attachShader(o,t),e.attachShader(o,r),e.bindAttribLocation(o,i.ATTR_POSITION_LOC,i.ATTR_POSITION_NAME),e.bindAttribLocation(o,i.ATTR_NORMAL_LOC,i.ATTR_NORMAL_NAME),e.bindAttribLocation(o,i.ATTR_UV_LOC,i.ATTR_UV_NAME),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){const i=e.getProgramInfoLog(o);return console.log("Failed to link program: "+i),e.deleteProgram(o),e.deleteShader(r),e.deleteShader(t),null}return a&&(e.validateProgram(o),!e.getProgramParameter(o,e.VALIDATE_STATUS))?(console.error("Failed to validate program",e.getProgramInfoLog(o)),e.deleteProgram(o),e.deleteShader(r),e.deleteShader(t),null):(e.deleteShader(r),e.deleteShader(t),o)}static CreateShader(e,t,r){const i=e.createShader(t);if(null===i)return null;e.shaderSource(i,r),e.compileShader(i);return e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.log(e.getShaderInfoLog(i)),e.deleteShader(i),null)}static LoadTexture(e,t,r){let i=e.createTexture();return!0===r&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),!0===r&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),i}}},42556:(e,t,r)=>{r.r(t),r.d(t,{DRAW_MODE:()=>a,VAO:()=>o});var i=r(57061);let a;a||(a={});class o{constructor(e,t,r,a,o,n){this.name=void 0,this.noCulling=!0,this.doBlending=!0,this.vao=void 0,this.bufVertices=void 0,this.bufNormals=void 0,this.bufUV=void 0,this.bufIndex=void 0,this.vertexComponentLen=void 0,this.vertexCount=void 0,this.indexCount=void 0,this.drawMode=void 0,this.name=t,this.drawMode=e.TRIANGLES,this.vao=e.createVertexArray(),e.bindVertexArray(this.vao),void 0!==r&&null!=r&&(this.bufVertices=e.createBuffer(),this.vertexComponentLen=3,this.vertexCount=r.length/this.vertexComponentLen,e.bindBuffer(e.ARRAY_BUFFER,this.bufVertices),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.enableVertexAttribArray(i.ATTR.ATTR_POSITION_LOC),e.vertexAttribPointer(i.ATTR.ATTR_POSITION_LOC,3,e.FLOAT,!1,0,0)),void 0!==o&&null!==o&&(this.bufNormals=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.bufNormals),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),e.enableVertexAttribArray(i.ATTR.ATTR_NORMAL_LOC),e.vertexAttribPointer(i.ATTR.ATTR_NORMAL_LOC,3,e.FLOAT,!1,0,0)),void 0!==n&&null!==n&&(this.bufUV=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.bufUV),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.enableVertexAttribArray(i.ATTR.ATTR_UV_LOC),e.vertexAttribPointer(i.ATTR.ATTR_UV_LOC,2,e.FLOAT,!1,0,0)),void 0!==a&&null!==a&&(this.bufIndex=e.createBuffer(),this.indexCount=a.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.bufIndex),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),e.STATIC_DRAW)),e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null)}}}}]);
//# sourceMappingURL=42556.11e1e7d7.chunk.js.map
"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[19731],{49193:(t,e,i)=>{i.r(e),i.d(e,{ActiveCommandController:()=>h});var s=i(75975);class h{constructor(t){this.scene=void 0,this.scene=t}MouseEventController(t){t.CLICK_TYPE!==s.CLICK_TYPE.LEFT?t.CLICK_TYPE!==s.CLICK_TYPE.MIDDLE?t.CLICK_TYPE!==s.CLICK_TYPE.DOWN_RIGHT?t.CLICK_TYPE!==s.CLICK_TYPE.DOUBLE?t.CLICK_TYPE!==s.CLICK_TYPE.MOVE?t.CLICK_TYPE!==s.CLICK_TYPE.DRAG?t.CLICK_TYPE!==s.CLICK_TYPE.DOWN?t.CLICK_TYPE!==s.CLICK_TYPE.WHEEL?t.CLICK_TYPE!==s.CLICK_TYPE.UP||this.MouseUpPre(t):this.MouseWheelPre(t):this.MouseDownPre(t):this.MouseDragPre(t):this.MouseMovePre(t):this.MouseDoubleClickPre(t):this.MouseRightClickPre(t):this.MouseMiddleClickPre(t):this.MouseLeftClickPre(t)}MouseDown(t){}MouseDownPre(t){this.scene.MouseDown(t.x,t.y),this.MouseDown(t)}MouseLeftClick(t){}MouseLeftClickPre(t){this.scene.MouseLeftClick(t.x,t.y),this.MouseLeftClick(t)}MouseMiddleClick(t){}MouseMiddleClickPre(t){this.scene.MouseMiddleClick(t.x,t.y),this.MouseMiddleClick(t)}MouseRightClick(t){}MouseRightClickPre(t){this.scene.MouseRightClick(t.x,t.y),this.MouseRightClick(t)}MouseUp(t){}MouseUpPre(t){this.scene.MouseUp(t.x,t.y),this.MouseUp(t)}MouseDoubleClick(t){}MouseDoubleClickPre(t){this.scene.MouseDoubleClick(t.x,t.y),this.MouseDoubleClick(t)}MouseMove(t){}MouseMovePre(t){this.scene.MouseMove(t.x,t.y),this.MouseMove(t)}MouseDrag(t){}MouseDragPre(t){this.scene.MouseDrag(t.x,t.y),this.MouseDrag(t)}MouseWheel(t){}MouseWheelPre(t){this.scene.MouseWheel(t.x,t.y,t.wheel),this.MouseWheel(t)}}},31560:(t,e,i)=>{i.r(e),i.d(e,{Blank:()=>n});var s=i(97795),h=i(65812);class n extends s.DefinitionIndeCanvasCore{constructor(t){super(t),this.p=[0,0],this.Init()}Init(){console.log(h.version)}RenderIndependentCanvas(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseDown(t,e){this.p=[t,e]}MouseMove(t,e){this.p=[t,e]}}},32872:(t,e,i)=>{i.r(e),i.d(e,{JSLinearRegression01:()=>n});var s=i(97795),h=i(75975);class n extends s.DefinitionIndeCanvasCore{constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.a=1,this.bias=0,this.indeCanvas.title="LinearRegression",this.Init()}Init(){}MouseDown(t,e){this.vs.push(new h.NVector3(this.MapX(t),this.MapY(e)))}MapX(t){return h.MathUtility.Remap(t,0,this.width,0,1)}MapY(t){return h.MathUtility.Remap(t,0,this.height,1,0)}RenderIndependentCanvas(t){t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.LinearRegression(),this.RenderLine(t),t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(h.MathUtility.Remap(this.vs[e].x,0,1,0,this.width),h.MathUtility.Remap(this.vs[e].y,0,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill()}RenderLine(t){let e=0*this.a+this.bias,i=1*this.a+this.bias;t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(h.MathUtility.Remap(0,0,1,0,this.width),h.MathUtility.Remap(e,0,1,this.height,0)),t.lineTo(h.MathUtility.Remap(1,0,1,0,this.width),h.MathUtility.Remap(i,0,1,this.height,0)),t.stroke()}LinearRegression(){let t=0,e=0;for(let o=0;o<this.vs.length;++o)t+=this.vs[o].x,e+=this.vs[o].y;let i=t/this.vs.length,s=e/this.vs.length,h=0,n=0;for(let o=0;o<this.vs.length;++o)h+=(this.vs[o].x-i)*(this.vs[o].y-s),n+=(this.vs[o].x-i)*(this.vs[o].x-i);this.a=h/n,this.bias=s-this.a*i}}},91648:(t,e,i)=>{i.r(e),i.d(e,{JSLinearRegressionGradientDescent02:()=>n});var s=i(97795),h=i(75975);class n extends s.DefinitionIndeCanvasCore{constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.weight=1,this.bias=0,this.indeCanvas.title="LinearRegression",this.Init()}Init(){}MouseDown(t,e){this.vs.push(new h.NVector3(this.MapX(t),this.MapY(e)))}MapX(t){return h.MathUtility.Remap(t,0,this.width,0,1)}MapY(t){return h.MathUtility.Remap(t,0,this.height,1,0)}RenderIndependentCanvas(t){t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GradientDescent(),this.vs.length>1&&this.RenderLine(t),t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(h.MathUtility.Remap(this.vs[e].x,0,1,0,this.width),h.MathUtility.Remap(this.vs[e].y,0,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill()}RenderLine(t){let e=0*this.weight+this.bias,i=1*this.weight+this.bias;t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(h.MathUtility.Remap(0,0,1,0,this.width),h.MathUtility.Remap(e,0,1,this.height,0)),t.lineTo(h.MathUtility.Remap(1,0,1,0,this.width),h.MathUtility.Remap(i,0,1,this.height,0)),t.stroke()}GradientDescent(){for(let t=0;t<this.vs.length;++t){let e=this.vs[t].x,i=this.vs[t].y-(this.weight*e+this.bias);this.weight=this.weight+i*e*.1,this.bias=this.bias+.1*i}}}},67001:(t,e,i)=>{i.r(e),i.d(e,{TFLinearRegressionGradientDescent01:()=>a});var s=i(65812),h=i(97795),n=i(75975),o=i(83797);class a extends h.DefinitionIndeCanvasCore{constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.vsTemp=[],this.tfLinearRegression=void 0,this.t=0,this.indeCanvas.title="TF LinearRegression GradientDescent 01",this.Init()}Init(){this.tfLinearRegression=new r,this.InitData(),this.InitUI()}InitUI(){const t=document.createElement("div");t.style.position="absolute",t.style.left="400px",t.style.color="#ffffff";const e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e);const i=document.getElementById("indePanel");i&&i.append(t)}InitData(){o.fK.getData().then((t=>{let e=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;t.map((t=>{let n=t.horsepower;n>i&&(i=n),n<e&&(e=n);let o=t.mpg;return o>h&&(h=o),o<s&&(s=o),0}));for(let o of t){let t=o.horsepower,a=o.mpg;this.vsTemp.push(new n.NVector3(n.MathUtility.Remap(t,e,i,.1,.9),n.MathUtility.Remap(a,s,h,.1,.9)))}}))}MouseDown(t,e){this.vs.push(new n.NVector3(this.MapX(t),this.MapY(e)))}MapX(t){return n.MathUtility.Remap(t,0,this.width,0,1)}MapY(t){return n.MathUtility.Remap(t,0,this.height,1,0)}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),0===(2&this.t)){const t=this.vsTemp.pop();t&&this.vs.push(t)}if(this.vs.length>1){const e=[],i=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),i.push(this.vs[t].y);this.tfLinearRegression.train(e,i),this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(n.MathUtility.Remap(this.vs[e].x,0,1,0,this.width),n.MathUtility.Remap(this.vs[e].y,0,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.t+=.3}RenderLine(t){const e=[0,1],i=s.tidy((()=>this.tfLinearRegression.predict(s.tensor1d(e))));let h=i.dataSync();i.dispose();let o=h[0],a=h[1];t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(n.MathUtility.Remap(0,0,1,0,this.width),n.MathUtility.Remap(o,0,1,this.height,0)),t.lineTo(n.MathUtility.Remap(1,0,1,0,this.width),n.MathUtility.Remap(a,0,1,this.height,0)),t.stroke()}}class r{constructor(){this.weight=void 0,this.bias=void 0,this.leraningRate=.5,this.optimizer=void 0,this.weight=s.variable(s.scalar(Math.random())),this.bias=s.variable(s.scalar(Math.random())),this.optimizer=s.train.sgd(this.leraningRate)}predict(t){return t.mul(this.weight).add(this.bias)}loss(t,e){return t.sub(e).square().mean()}train(t,e){s.tidy((()=>{const i=s.tensor1d(t),h=s.tensor1d(e);this.optimizer.minimize((()=>this.loss(this.predict(i),h)))}))}}},46446:(t,e,i)=>{i.r(e),i.d(e,{TFModel01:()=>o});var s=i(65812),h=i(97795),n=i(75975);class o extends h.DefinitionIndeCanvasCore{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.tfModel=void 0,this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}Init(){this.tfModel=new a}MouseDown(t,e){const i=new n.NVector3(this.MapX(t),this.MapY(e));for(let s=0;s<this.vs.length;++s)if(n.NVector3.Distance(i,this.vs[s])<.05)return void(this.selVec=this.vs[s]);this.vs.push(new n.NVector3(this.MapX(t),this.MapY(e)))}MouseMove(t,e){let i;const s=new n.NVector3(this.MapX(t),this.MapY(e));for(let h=0;h<this.vs.length;++h){n.NVector3.Distance(s,this.vs[h])<.05&&(i=this.vs[h])}this.selVec=i||void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return n.MathUtility.Remap(t,0,this.width,-1,1)}MapY(t){return n.MathUtility.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";const e=this.width/20-1,i=this.height/20-1;for(let s=0;s<20;s+=1){t.lineWidth=10===s?3:1;let h=e*s,n=0,o=h,a=this.height;t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke(),h=0,n=i*s,o=this.width,a=n,t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){const e=[],i=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),i.push(this.vs[t].y);this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(n.MathUtility.Remap(this.vs[e].x,-1,1,0,this.width),n.MathUtility.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),n.MathUtility.Remap(this.selVec.x,-1,1,0,this.width),n.MathUtility.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){}}class a{constructor(){this.model=void 0,this.model=s.sequential();const t=s.layers.dense({inputShape:[2],units:4,activation:"sigmoid"}),e=s.layers.dense({units:1,activation:"sigmoid"});this.model.add(t),this.model.add(e);const i={optimizer:s.train.sgd(.1),loss:s.losses.meanSquaredError};this.model.compile(i),this.train1().then((()=>{const t=s.tensor2d([[0,0],[.5,.5],[1,1]]);this.model.predict(t).print()}))}train0(){const t=s.tensor2d([[0,0],[.5,.5],[1,1]]),e=s.tensor2d([[1],[.5],[0]]);this.model.fit(t,e,{epochs:10}).then((t=>console.log(t.history)));this.model.predict(t).print()}async train1(){const t=s.tensor2d([[0,0],[.5,.5],[1,1]]),e=s.tensor2d([[1],[.5],[0]]),i={epochs:10,shuffle:!0};for(let s=0;s<500;++s){const h=await this.model.fit(t,e,i);console.log(s,h.history.loss)}}}},44101:(t,e,i)=>{i.r(e),i.d(e,{TFModel01HorsepowerAndMilesPerGallon:()=>r,convertToTensor:()=>d,createModel:()=>l});var s=i(65812),h=i(30386),n=i(97795),o=i(75975),a=i(83797);class r extends n.DefinitionIndeCanvasCore{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}Init(){a.fK.getData().then((t=>{this.train(t)}))}async train(t){const e=d(t),{inputs:i,labels:n}=e,o=l();h.show.modelSummary({name:"Model Summary"},o),await async function(t,e,i){t.compile({optimizer:s.train.adam(),loss:s.losses.meanSquaredError,metrics:["mse"]});const n=32,o=50;return await t.fit(e,i,{batchSize:n,epochs:o,shuffle:!0,callbacks:h.show.fitCallbacks({name:"Training Performance"},["loss","mse"],{height:200,callbacks:["onEpochEnd"]})})}(o,i,n),function(t,e,i){const{inputMax:n,inputMin:o,labelMin:a,labelMax:r}=i,[l,d]=s.tidy((()=>{const e=s.linspace(0,1,100),i=t.predict(e.reshape([100,1])),h=e.mul(n.sub(o)).add(o),l=i.mul(r.sub(a)).add(a);return[h.dataSync(),l.dataSync()]})),p=Array.from(l).map(((t,e)=>({x:t,y:d[e]}))),c=e.map((t=>({x:t.horsepower,y:t.mpg})));h.render.scatterplot({name:"Model Predictions vs Original Data"},{values:[c,p],series:["original","predicted"]},{xLabel:"Horsepower",yLabel:"MPG",height:300})}(o,t,e)}MouseDown(t,e){const i=new o.NVector3(this.MapX(t),this.MapY(e));for(let s=0;s<this.vs.length;++s)if(o.NVector3.Distance(i,this.vs[s])<.05)return void(this.selVec=this.vs[s]);this.vs.push(new o.NVector3(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MouseMove(t,e){let i;const s=new o.NVector3(this.MapX(t),this.MapY(e));for(let h=0;h<this.vs.length;++h){o.NVector3.Distance(s,this.vs[h])<.05&&(i=this.vs[h])}this.selVec=i||void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return o.MathUtility.Remap(t,0,this.width,-1,1)}MapY(t){return o.MathUtility.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";const e=this.width/20-1,i=this.height/20-1;for(let s=0;s<20;s+=1){t.lineWidth=10===s?3:1;let h=e*s,n=0,o=h,a=this.height;t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke(),h=0,n=i*s,o=this.width,a=n,t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){const e=[],i=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),i.push(this.vs[t].y);this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(o.MathUtility.Remap(this.vs[e].x,-1,1,0,this.width),o.MathUtility.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),o.MathUtility.Remap(this.selVec.x,-1,1,0,this.width),o.MathUtility.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){const e=[];for(let i=-1;i<=1;i+=.05)e.push(i)}}const l=()=>{const t=s.sequential();return t.add(s.layers.dense({inputShape:[1],units:16,useBias:!0})),t.add(s.layers.dense({units:1,useBias:!0})),t},d=t=>s.tidy((()=>{s.util.shuffle(t);const e=t.map((t=>t.horsepower)),i=t.map((t=>t.mpg)),h=s.tensor2d(e,[e.length,1]),n=s.tensor2d(i,[i.length,1]),o=h.max(),a=h.min(),r=n.max(),l=n.min();return{inputs:h.sub(a).div(o.sub(a)),labels:n.sub(l).div(r.sub(l)),inputMax:o,inputMin:a,labelMax:r,labelMin:l}}))},31703:(t,e,i)=>{i.r(e),i.d(e,{TFModel02XOR:()=>o});var s=i(65812),h=i(97795),n=i(75975);class o extends h.DefinitionIndeCanvasCore{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.tfModel=void 0,this.xPredict=void 0,this.inputs=[],this.indeCanvas.title="TF XOR",this.Init(),this.InitUI()}InitUI(){const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.color="#ffffff";const e=document.createElement("p");e.textContent="ref: Coding Challenge #106: XOR Problem with TensorFlow.js by The Cording Train",e.style.fontSize="11px",t.append(e);const i=document.getElementById("indePanel");i&&i.append(t)}Init(){this.tfModel=new a;let t=[];for(let e=0;e<=10;++e)for(let i=0;i<=10;++i)t.push([.1*i,.1*e]);this.xPredict=s.tensor2d(t)}MouseDown(t,e){const i=new n.NVector3(this.MapX(t),this.MapY(e));for(let s=0;s<this.vs.length;++s)if(n.NVector3.Distance(i,this.vs[s])<.05)return void(this.selVec=this.vs[s]);this.vs.push(new n.NVector3(this.MapX(t),this.MapY(e)))}MouseMove(t,e){let i;const s=new n.NVector3(this.MapX(t),this.MapY(e));for(let h=0;h<this.vs.length;++h){n.NVector3.Distance(s,this.vs[h])<.05&&(i=this.vs[h])}this.selVec=i||void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return n.MathUtility.Remap(t,0,this.width,-1,1)}MapY(t){return n.MathUtility.Remap(t,0,this.height,1,-1)}RenderIndependentCanvas(t){s.tidy((()=>{const e=this.tfModel.model.predict(this.xPredict).dataSync();t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill();let i=0;for(let s=0;s<=10;s++)for(let h=0;h<=10;h++){this.inputs.push(s);let n=42,o=s*n,a=h*n;const r=e[i];t.fillStyle="rgba(".concat(255*r,",",0,",",0,",1)"),t.beginPath(),t.rect(o,a,n,n),t.closePath(),t.fill(),i++}}))}}class a{constructor(){this.model=void 0,this.xTrain=s.tensor2d([[0,0],[1,0],[0,1],[1,1]]),this.yTrain=s.tensor2d([[0],[1],[1],[0]]),this.model=s.sequential();const t=s.layers.dense({inputShape:[2],units:16,activation:"sigmoid"}),e=s.layers.dense({units:1,activation:"sigmoid"});this.model.add(t),this.model.add(e),this.model.compile({optimizer:s.train.adam(.05),loss:s.losses.meanSquaredError}),this.trainLoop()}trainLoop(){this.train().then((t=>{setTimeout((()=>this.trainLoop()),1)}))}async train(){return await this.model.fit(this.xTrain,this.yTrain,{epochs:10,shuffle:!0})}}},21950:(t,e,i)=>{i.r(e),i.d(e,{TFModel03Iris:()=>o});var s=i(65812),h=i(97795),n=i(83797);class o extends h.DefinitionIndeCanvasCore{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.tfModel=void 0,this.xPredict=void 0,this.inputs=[],this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}Init(){this.tfModel=new a}RenderIndependentCanvas(t){s.tidy((()=>{}))}}class a{constructor(){this.model=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0;const t=n.fK.GetIrisData();s.util.shuffle(t);const e=[];for(let s=0;s<t.length;++s){let i=[];for(let e=0;e<t[s].length-1;++e)i.push(t[s][e]);e.push(i)}const i=[];for(let s=0;s<t.length;++s)0===t[s][t[s].length-1]?i.push([1,0,0]):1===t[s][t[s].length-1]?i.push([0,1,0]):2===t[s][t[s].length-1]&&i.push([0,0,1]);this.inputsTensor=s.tensor2d(e),this.labelsTensor=s.tensor2d(i),this.inputsTensor.print(),this.labelsTensor.print(),this.model=s.sequential();const h=s.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:10,activation:"sigmoid"}),o=s.layers.dense({units:3,activation:"softmax"});this.model.add(h),this.model.add(o),this.model.compile({optimizer:s.train.adam(),loss:s.losses.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}async trainLoop(){await this.model.save("downloads://my-model");const t=await this.model.save("localstorage://ml/my-model-1");console.log(t),this.train().then((t=>{console.log(t.history.loss[0]),setTimeout((()=>this.trainLoop()),1)}))}async train(){return await this.model.fit(this.inputsTensor,this.labelsTensor,{epochs:50,shuffle:!0,validationData:[this.inputsTensor,this.labelsTensor]})}}},96086:(t,e,i)=>{i.r(e),i.d(e,{TFModel03SmartDrawing:()=>n});var s=i(65812),h=i(97795);class n extends h.DefinitionIndeCanvasCore{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.tfModel=void 0,this.xPredict=void 0,this.inputs=[],this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}async Init(){const t=new o;await t.Init().then((()=>{this.tfModel=new a("model1",t.inputsTensor,t.labelsTensor),this.tfModel.CreateModel01(),this.tfModel=new a("model2",t.inputsTensor,t.labelsTensor),this.tfModel.CreateModel02()}))}RenderIndependentCanvas(t){s.tidy((()=>{}))}}class o{constructor(){this.raw=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0}async Init(){const t=await this.OpenCSV();if(t){this.raw=this.processData(t),s.util.shuffle(this.raw);const e=[],i=[];for(let t=0;t<this.raw.length;++t){let s=[];for(let e=0;e<this.raw[t].length-1;++e)s.push(this.raw[t][e]);e.push(s),i.push(this.raw[t][this.raw[t].length-1])}console.log(e),console.log(i);const h=s.max(i).dataSync(),n=[];for(let t=0;t<i.length;++t){const e=[];for(let s=0;s<=h[0];++s)s===i[t]?e.push(1):e.push(0);n.push(e)}console.log(n),this.inputsTensor=s.tensor2d(e),this.labelsTensor=s.tensor2d(n),this.inputsTensor.print(),this.labelsTensor.print()}}processData(t){const e=t.split(/\r\n|\n/),i=e[0].split(","),s=[];for(let h=1;h<e.length;h++){const t=e[h].split(",");if(t.length===i.length){const e=[];for(let s=0;s<i.length;s++){const i=+t[s];isNaN(i)?e.push(t[s]):e.push(i)}s.push(e)}}return s}async OpenCSV(){return fetch("njslabSandboxStatic/ML/SmartDrawing/".concat("smartDrawingTrainData.csv")).then((t=>(console.log(t),t.text()))).catch((t=>{console.log(t)}))}}class a{constructor(t,e,i){this.t0=void 0,this.t1=void 0,this.name=void 0,this.model=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0,this.name=t,this.inputsTensor=e,this.labelsTensor=i}CreateModel01(){this.model=s.sequential();const t=s.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),e=s.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(t),this.model.add(e),this.Compile()}CreateModel02(){this.model=s.sequential();const t=s.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),e=s.layers.dense({units:15,activation:"sigmoid"}),i=s.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(t),this.model.add(e),this.model.add(i),this.Compile()}Compile(){this.model.compile({optimizer:s.train.adam(),loss:s.losses.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}async trainLoop(){this.t0=performance.now(),await this.model.save("downloads://my-model"),this.train().then((t=>{this.t1=performance.now(),console.log("".concat(this.name,": ").concat(t.history.loss[0],", ").concat(this.t1-this.t0," ")),setTimeout((()=>this.trainLoop()),1)}))}async train(){}}},37042:(t,e,i)=>{i.r(e),i.d(e,{TFPlayground01:()=>n});var s=i(97795),h=i(83797);class n extends s.DefinitionIndeCanvasCore{constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.a=1,this.bias=0,this.indeCanvas.title="TF Playground",this.Init()}Init(){h.c4.Playground()}MouseDown(t,e){}RenderIndependentCanvas(t){t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill()}}},11807:(t,e,i)=>{i.r(e),i.d(e,{TFPolynomialRegressionGradientDescent02:()=>a});var s=i(65812),h=i(97795),n=i(75975),o=i(83797);class a extends h.DefinitionIndeCanvasCore{constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.vsTemp=[],this.selVec=void 0,this.tfLinearRegression=void 0,this.t=0,this.indeCanvas.title="TF LinearRegression GradientDescent 01",this.Init(),this.InitData(),this.InitUI()}InitUI(){const t=document.createElement("div");t.style.position="absolute",t.style.left="400px",t.style.color="#ffffff";const e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e);const i=document.getElementById("indePanel");if(i){i.append(t);const e=document.createElement("button");e.textContent="run",e.style.position="absolute",e.style.left="650px",e.onclick=()=>{console.log(this)},this.scene.implementation.app.model.modelViewCoreWrapper.viewWrapper.div.append(e)}}InitData(){o.fK.getData().then((t=>{let e=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;t.map((t=>{let n=t.horsepower;n>i&&(i=n),n<e&&(e=n);let o=t.mpg;return o>h&&(h=o),o<s&&(s=o),0}));for(let o of t){let t=o.horsepower,a=o.mpg;this.vsTemp.push(new n.NVector3(n.MathUtility.Remap(t,e,i,-.9,.9),n.MathUtility.Remap(a,s,h,-.9,.9)))}}))}Init(){console.log(s.version),this.tfLinearRegression=new r}MouseDown(t,e){this.vs.push(new n.NVector3(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MapX(t){return n.MathUtility.Remap(t,0,this.width,-1,1)}MapY(t){return n.MathUtility.Remap(t,0,this.height,1,-1)}Grid(t){}RenderIndependentCanvas(t){if(this.Grid(t),t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),0===(2&this.t)){const t=this.vsTemp.pop();t&&this.vs.push(t)}if(this.vs.length>1){const e=[],i=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),i.push(this.vs[t].y);this.tfLinearRegression.train(e,i),this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(n.MathUtility.Remap(this.vs[e].x,-1,1,0,this.width),n.MathUtility.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.t+=.3}RenderLine(t){const e=[];for(let s=-1;s<=1;s+=.05)e.push(s);const i=s.tidy((()=>this.tfLinearRegression.predict2d(s.tensor1d(e))));let h=i.dataSync();i.dispose(),t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(n.MathUtility.Remap(e[0],-1,1,0,this.width),n.MathUtility.Remap(h[0],-1,1,this.height,0));for(let s=1;s<e.length;++s)t.lineTo(n.MathUtility.Remap(e[s],-1,1,0,this.width),n.MathUtility.Remap(h[s],-1,1,this.height,0));t.stroke()}}class r{constructor(){this.weights=[],this.bias=void 0,this.dim=1,this.leraningRate=.2,this.optimizer=void 0;for(let t=0;t<5;++t){const t=s.variable(s.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=s.variable(s.scalar(2*Math.random()-1)),this.optimizer=s.train.adam(this.leraningRate)}predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(s.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(s.scalar(4)).mul(this.weights[3]).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(s.scalar(5)).mul(this.weights[4]).add(t.pow(s.scalar(4)).mul(this.weights[3])).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):this.predict1d(t)}loss(t,e){return t.sub(e).square().mean()}train(t,e){s.tidy((()=>{const i=s.tensor1d(t),h=s.tensor1d(e);this.optimizer.minimize((()=>this.loss(this.predict(i),h)))})),console.log(s.memory().numTensors)}}},31102:(t,e,i)=>{i.r(e),i.d(e,{TFPolynomialRegressionGradientDescent03Interaction:()=>a});var s=i(65812),h=i(97795),n=i(75975),o=i(83797);class a extends h.DefinitionIndeCanvasCore{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.tfLinearRegression=void 0,this.indeCanvas.title="TF LinearRegression GradientDescent 01",this.Init()}Init(){this.tfLinearRegression=new r,this.indeCanvas.canvas.style.zIndex="-1",o.fK.getData().then((t=>{}))}MouseDown(t,e){const i=new n.NVector3(this.MapX(t),this.MapY(e));for(let s=0;s<this.vs.length;++s)if(n.NVector3.Distance(i,this.vs[s])<.05)return void(this.selVec=this.vs[s]);this.vs.push(new n.NVector3(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MouseMove(t,e){let i;const s=new n.NVector3(this.MapX(t),this.MapY(e));for(let h=0;h<this.vs.length;++h){n.NVector3.Distance(s,this.vs[h])<.05&&(i=this.vs[h])}this.selVec=i||void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return n.MathUtility.Remap(t,0,this.width,-1,1)}MapY(t){return n.MathUtility.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";const e=this.width/20-1,i=this.height/20-1;for(let s=0;s<20;s+=1){t.lineWidth=10===s?3:1;let h=e*s,n=0,o=h,a=this.height;t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke(),h=0,n=i*s,o=this.width,a=n,t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){const e=[],i=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),i.push(this.vs[t].y);this.tfLinearRegression.train(e,i),this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(n.MathUtility.Remap(this.vs[e].x,-1,1,0,this.width),n.MathUtility.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),n.MathUtility.Remap(this.selVec.x,-1,1,0,this.width),n.MathUtility.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){const e=[];for(let s=-1;s<=1;s+=.05)e.push(s);const i=s.tidy((()=>this.tfLinearRegression.predict(s.tensor1d(e))));let h=i.dataSync();i.dispose(),t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(n.MathUtility.Remap(e[0],-1,1,0,this.width),n.MathUtility.Remap(h[0],-1,1,this.height,0));for(let s=1;s<e.length;++s)t.lineTo(n.MathUtility.Remap(e[s],-1,1,0,this.width),n.MathUtility.Remap(h[s],-1,1,this.height,0));t.stroke()}}class r{constructor(){this.weights=[],this.bias=void 0,this.dim=3,this.leraningRate=.2,this.optimizer=void 0;for(let t=0;t<5;++t){const t=s.variable(s.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=s.variable(s.scalar(2*Math.random()-1)),this.optimizer=s.train.adam(this.leraningRate)}predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(s.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(s.scalar(4)).mul(this.weights[3]).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(s.scalar(5)).mul(this.weights[4]).add(t.pow(s.scalar(4)).mul(this.weights[3])).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):this.predict1d(t)}loss(t,e){return t.sub(e).square().mean()}train(t,e){s.tidy((()=>{const i=s.tensor1d(t),h=s.tensor1d(e);this.optimizer.minimize((()=>this.loss(this.predict(i),h)))}))}}},4021:(t,e,i)=>{i.r(e),i.d(e,{TFPolynomialRegressionGradientDescent04TFHorsepowerAndMilesPerGallon:()=>a});var s=i(65812),h=i(97795),n=i(75975),o=i(83797);class a extends h.DefinitionIndeCanvasCore{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.tfLinearRegression=void 0,this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}Init(){this.tfLinearRegression=new r,this.indeCanvas.canvas.style.zIndex="-1",o.fK.getData().then((t=>{let e=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;t.map((t=>{let n=t.horsepower;n>i&&(i=n),n<e&&(e=n);let o=t.mpg;return o>h&&(h=o),o<s&&(s=o),0}));for(let o of t){let t=o.horsepower,a=o.mpg;this.vs.push(new n.NVector3(n.MathUtility.Remap(t,e,i,-.9,.9),n.MathUtility.Remap(a,s,h,-.9,.9)))}}))}MouseDown(t,e){const i=new n.NVector3(this.MapX(t),this.MapY(e));for(let s=0;s<this.vs.length;++s)if(n.NVector3.Distance(i,this.vs[s])<.05)return void(this.selVec=this.vs[s]);this.vs.push(new n.NVector3(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MouseMove(t,e){let i;const s=new n.NVector3(this.MapX(t),this.MapY(e));for(let h=0;h<this.vs.length;++h){n.NVector3.Distance(s,this.vs[h])<.05&&(i=this.vs[h])}this.selVec=i||void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return n.MathUtility.Remap(t,0,this.width,-1,1)}MapY(t){return n.MathUtility.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";const e=this.width/20-1,i=this.height/20-1;for(let s=0;s<20;s+=1){t.lineWidth=10===s?3:1;let h=e*s,n=0,o=h,a=this.height;t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke(),h=0,n=i*s,o=this.width,a=n,t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){const e=[],i=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),i.push(this.vs[t].y);this.tfLinearRegression.train(e,i),this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(n.MathUtility.Remap(this.vs[e].x,-1,1,0,this.width),n.MathUtility.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),n.MathUtility.Remap(this.selVec.x,-1,1,0,this.width),n.MathUtility.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){const e=[];for(let s=-1;s<=1;s+=.05)e.push(s);const i=s.tidy((()=>this.tfLinearRegression.predict(s.tensor1d(e))));let h=i.dataSync();i.dispose(),t.lineWidth=3,t.strokeStyle="#00fff0",t.beginPath(),t.moveTo(n.MathUtility.Remap(e[0],-1,1,0,this.width),n.MathUtility.Remap(h[0],-1,1,this.height,0));for(let s=1;s<e.length;++s)t.lineTo(n.MathUtility.Remap(e[s],-1,1,0,this.width),n.MathUtility.Remap(h[s],-1,1,this.height,0));t.stroke()}}class r{constructor(){this.weights=[],this.bias=void 0,this.dim=3,this.leraningRate=.2,this.optimizer=void 0;for(let t=0;t<5;++t){const t=s.variable(s.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=s.variable(s.scalar(2*Math.random()-1)),this.optimizer=s.train.adam(this.leraningRate)}predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(s.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(s.scalar(4)).mul(this.weights[3]).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(s.scalar(5)).mul(this.weights[4]).add(t.pow(s.scalar(4)).mul(this.weights[3])).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):this.predict1d(t)}loss(t,e){return t.sub(e).square().mean()}train(t,e){s.tidy((()=>{const i=s.tensor1d(t),h=s.tensor1d(e);this.optimizer.minimize((()=>this.loss(this.predict(i),h)))}))}}},611:(t,e,i)=>{i.r(e),i.d(e,{TFPolynomialRegressionGradientDescent05Interaction:()=>a});var s=i(65812),h=i(97795),n=i(75975),o=i(83797);class a extends h.DefinitionIndeCanvasCore{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.col=["#ff0000","#00ff00","#0000ff","#00fff0","#ff0000","#fff000","#0fff00"],this.tfLinearRegression=[],this.indeCanvas.title="TF Regression ",this.Init(),this.InitUI()}Init(){this.tfLinearRegression.push(new r(1)),this.tfLinearRegression.push(new r(2)),this.tfLinearRegression.push(new r(3)),this.tfLinearRegression.push(new r(4)),this.indeCanvas.canvas.style.zIndex="-1",o.fK.getData().then((t=>{}))}InitUI(){const t=document.createElement("div");t.style.position="absolute",t.style.left="40px",t.style.color="#ffffff";let e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e),e=document.createElement("p"),e.textContent="LinearRegression",e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[0],t.append(e),e=document.createElement("p"),e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[1],e.textContent="Degree of polynomial - 2",t.append(e),e=document.createElement("p"),e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[2],e.textContent="Degree of polynomial - 3",t.append(e),e=document.createElement("p"),e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[3],e.textContent="Degree of polynomial - 4",t.append(e);const i=document.getElementById("indePanel");i&&i.append(t)}MouseDown(t,e){const i=new n.NVector3(this.MapX(t),this.MapY(e));for(let s=0;s<this.vs.length;++s)if(n.NVector3.Distance(i,this.vs[s])<.05)return void(this.selVec=this.vs[s]);this.vs.push(new n.NVector3(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MouseMove(t,e){let i;const s=new n.NVector3(this.MapX(t),this.MapY(e));for(let h=0;h<this.vs.length;++h){n.NVector3.Distance(s,this.vs[h])<.05&&(i=this.vs[h])}this.selVec=i||void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return n.MathUtility.Remap(t,0,this.width,-1,1)}MapY(t){return n.MathUtility.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";const e=this.width/20-1,i=this.height/20-1;for(let s=0;s<20;s+=1){t.lineWidth=10===s?3:1;let h=e*s,n=0,o=h,a=this.height;t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke(),h=0,n=i*s,o=this.width,a=n,t.beginPath(),t.moveTo(h,n),t.lineTo(o,a),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1)for(let e=0;e<this.tfLinearRegression.length;++e){const i=[],s=[];for(let t=0;t<this.vs.length;++t)i.push(this.vs[t].x),s.push(this.vs[t].y);this.tfLinearRegression[e].train(i,s),this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(n.MathUtility.Remap(this.vs[e].x,-1,1,0,this.width),n.MathUtility.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),n.MathUtility.Remap(this.selVec.x,-1,1,0,this.width),n.MathUtility.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){for(let e=0;e<this.tfLinearRegression.length;++e){const i=[];for(let t=-1;t<=1;t+=.08)i.push(t);const h=s.tidy((()=>this.tfLinearRegression[e].predict(s.tensor1d(i))));let o=h.dataSync();h.dispose(),t.lineWidth=1,t.strokeStyle=this.col[e],t.beginPath(),t.moveTo(n.MathUtility.Remap(i[0],-1,1,0,this.width),n.MathUtility.Remap(o[0],-1,1,this.height,0));for(let e=1;e<i.length;++e)t.lineTo(n.MathUtility.Remap(i[e],-1,1,0,this.width),n.MathUtility.Remap(o[e],-1,1,this.height,0));t.stroke()}}}class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.weights=[],this.bias=void 0,this.dim=3,this.leraningRate=.2,this.optimizer=void 0,this.dim=t;for(let e=0;e<5;++e){const t=s.variable(s.scalar(2*Math.random()-1));t.print(),this.weights.push(t)}this.bias=s.variable(s.scalar(2*Math.random()-1)),this.optimizer=s.train.adam(this.leraningRate)}predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(s.scalar(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(s.scalar(4)).mul(this.weights[3]).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(s.scalar(5)).mul(this.weights[4]).add(t.pow(s.scalar(4)).mul(this.weights[3])).add(t.pow(s.scalar(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict(t){return 5===this.dim?this.predict5d(t):4===this.dim?this.predict4d(t):3===this.dim?this.predict3d(t):2===this.dim?this.predict2d(t):(this.dim,this.predict1d(t))}loss(t,e){return t.sub(e).square().mean()}train(t,e){s.tidy((()=>{const i=s.tensor1d(t),h=s.tensor1d(e);this.optimizer.minimize((()=>this.loss(this.predict(i),h)))}))}}},19731:(t,e,i)=>{i.r(e),i.d(e,{TFProject:()=>y});var s=i(49193),h=i(32872),n=i(91648),o=i(37042),a=i(67001),r=i(11807),l=i(31102),d=i(4021),p=i(46446),c=i(31703),u=i(21950),m=i(96086),g=i(44101),f=i(611),v=i(88220),M=i(31560);class y{constructor(t){this.implementation=void 0,this.canvas=void 0,this.activeCommandController=void 0,this.definitions=[],this.implementation=t,this.canvas=t.app.model.graphicsCoreWrapper.canvasWrapper.canvas,console.log("--"),this.activeCommandController=new s.ActiveCommandController(this),this.Init(),this.InitDefinition(),this.InitDefault(),this.InitPullDown()}Init(){this.definitions=[]}get width(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.width}get height(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.height}InitDefinition(){for(let t of this.definitions)t.Init(this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.ctx)}Render(t){}MouseMove(t,e){for(let i of this.definitions)i.MouseMovePre(t,e)}MouseLeftClick(t,e){for(let i of this.definitions)i.MouseLeftClickPre(t,e)}MouseDown(t,e){for(let i of this.definitions)i.MouseDownPre(t,e)}MouseUp(t,e){for(let i of this.definitions)i.MouseUpPre(t,e)}MouseDrag(t,e){for(let i of this.definitions)i.MouseDragPre(t,e)}MouseMiddleClick(t,e){for(let i of this.definitions)i.MouseMiddleClickPre(t,e)}MouseRightClick(t,e){for(let i of this.definitions)i.MouseRightClickPre(t,e)}MouseDoubleClick(t,e){for(let i of this.definitions)i.MouseDoubleClickPre(t,e)}MouseWheel(t,e,i){for(let s of this.definitions)s.MouseWheelPre(t,e,i)}Dispose(){this.definitions=[]}InitDefault(){}LoadDefinition(t){console.log("project code",t),"blank"===t&&new M.Blank(this),"TFPlayground01"===t&&new o.TFPlayground01(this),"TFModel02XOR"===t&&new c.TFModel02XOR(this,480,500),"TFModel03Iris"===t&&new u.TFModel03Iris(this,480,500),"TFModel03SmartDrawing"===t&&new m.TFModel03SmartDrawing(this,480,500),"TFModel01HorsepowerAndMilesPerGallon"===t&&new g.TFModel01HorsepowerAndMilesPerGallon(this,500,500),"TFModel01"===t&&new p.TFModel01(this,500,500),"JSLinearRegression"===t&&new h.JSLinearRegression01(this),"JSLinearRegressionGD"===t&&new n.JSLinearRegressionGradientDescent02(this),"TFLinearRegressionGD"===t&&new a.TFLinearRegressionGradientDescent01(this),"TFPolynomialRegression GD"===t&&new r.TFPolynomialRegressionGradientDescent02(this),"TFPolyRegress Interaction"===t&&new l.TFPolynomialRegressionGradientDescent03Interaction(this,500,500),"TFPolyRegress Miles/Gallon"===t&&new d.TFPolynomialRegressionGradientDescent04TFHorsepowerAndMilesPerGallon(this,500,500),"TF Regression"===t&&new f.TFPolynomialRegressionGradientDescent05Interaction(this,500,500),"TFMnist"===t&&new v.TFMnist(this,500,500),console.log(t)}InitPullDown(){this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel01"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel02XOR"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel03Iris"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@--"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel03SmartDrawing"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel01HorsepowerAndMilesPerGallon"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPlayground01"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@JSLinearRegression"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@JSLinearRegressionGD"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFLinearRegressionGD"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@--"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPolynomialRegression GD"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPolyRegress Interaction"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPolyRegress Miles/Gallon"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@--"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TF Regression")}}}}]);
//# sourceMappingURL=19731.6856ab38.chunk.js.map
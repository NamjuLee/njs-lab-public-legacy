{"version":3,"file":"static/js/25304.dc1ad12a.chunk.js","mappings":"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","sources":["njslab/LabStarter/AppNGL3d/NGL3dApp_07-1/Utility/Matrix4.ts","njslab/LabStarter/AppNGL3d/NGL3dApp_07-1/Utility/Vector3.ts","njslab/LabStarter/AppNGL3d/NGL3dApp_07-1/WebGL/Camera.ts","njslab/LabStarter/AppNGL3d/NGL3dApp_07-1/WebGL/Transform.ts"],"sourcesContent":["import { Vector3 } from './Vector3';\r\n\r\nexport class Matrix4 {\r\n    raw: Float32Array;\r\n    // ....................................................................\r\n    // Static Data Methods\r\n    static identity() {\r\n        let a = new Float32Array(16);\r\n        a[0] = a[5] = a[10] = a[15] = 1;\r\n        return a;\r\n    }\r\n\r\n    // from glMatrix\r\n    static perspective(out: Float32Array, fovy: number, aspect: number , near: number, far: number ) {\r\n        let f = 1.0 / Math.tan(fovy / 2), nf = 1 / (near - far);\r\n        out[0] = f / aspect;\r\n        out[1] = 0;\r\n        out[2] = 0;\r\n        out[3] = 0;\r\n        out[4] = 0;\r\n        out[5] = f;\r\n        out[6] = 0;\r\n        out[7] = 0;\r\n        out[8] = 0;\r\n        out[9] = 0;\r\n        out[10] = (far + near) * nf;\r\n        out[11] = -1;\r\n        out[12] = 0;\r\n        out[13] = 0;\r\n        out[14] = (2 * far * near) * nf;\r\n        out[15] = 0;\r\n    }\r\n\r\n    static ortho(out: number[], left: number, right: number, bottom: number, top: number, near: number, far: number) {\r\n        let lr = 1 / (left - right),\r\n            bt = 1 / (bottom - top),\r\n            nf = 1 / (near - far);\r\n        out[0] = -2 * lr;\r\n        out[1] = 0;\r\n        out[2] = 0;\r\n        out[3] = 0;\r\n        out[4] = 0;\r\n        out[5] = -2 * bt;\r\n        out[6] = 0;\r\n        out[7] = 0;\r\n        out[8] = 0;\r\n        out[9] = 0;\r\n        out[10] = 2 * nf;\r\n        out[11] = 0;\r\n        out[12] = (left + right) * lr;\r\n        out[13] = (top + bottom) * bt;\r\n        out[14] = (far + near) * nf;\r\n        out[15] = 1;\r\n    }\r\n    // https:// github.com/toji/gl-matrix/blob/master/src/gl-matrix/mat4.js\r\n    // make the rows into the columns\r\n    static transpose(out: number[], a: number[]) {\r\n        // If we are transposing ourselves we can skip a few steps but have to cache some values\r\n        if (out === a) {\r\n            let a01 = a[1], a02 = a[2], a03 = a[3], a12 = a[6], a13 = a[7], a23 = a[11];\r\n            out[1] = a[4];\r\n            out[2] = a[8];\r\n            out[3] = a[12];\r\n            out[4] = a01;\r\n            out[6] = a[9];\r\n            out[7] = a[13];\r\n            out[8] = a02;\r\n            out[9] = a12;\r\n            out[11] = a[14];\r\n            out[12] = a03;\r\n            out[13] = a13;\r\n            out[14] = a23;\r\n        } else {\r\n            out[0] = a[0];\r\n            out[1] = a[4];\r\n            out[2] = a[8];\r\n            out[3] = a[12];\r\n            out[4] = a[1];\r\n            out[5] = a[5];\r\n            out[6] = a[9];\r\n            out[7] = a[13];\r\n            out[8] = a[2];\r\n            out[9] = a[6];\r\n            out[10] = a[10];\r\n            out[11] = a[14];\r\n            out[12] = a[3];\r\n            out[13] = a[7];\r\n            out[14] = a[11];\r\n            out[15] = a[15];\r\n        }\r\n\r\n        return out;\r\n    }\r\n\r\n    // Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n    static normalMat3(out: Float32Array, a: Float32Array) {\r\n        let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\r\n            a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\r\n            a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\r\n            a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\r\n\r\n            b00 = a00 * a11 - a01 * a10,\r\n            b01 = a00 * a12 - a02 * a10,\r\n            b02 = a00 * a13 - a03 * a10,\r\n            b03 = a01 * a12 - a02 * a11,\r\n            b04 = a01 * a13 - a03 * a11,\r\n            b05 = a02 * a13 - a03 * a12,\r\n            b06 = a20 * a31 - a21 * a30,\r\n            b07 = a20 * a32 - a22 * a30,\r\n            b08 = a20 * a33 - a23 * a30,\r\n            b09 = a21 * a32 - a22 * a31,\r\n            b10 = a21 * a33 - a23 * a31,\r\n            b11 = a22 * a33 - a23 * a32,\r\n\r\n        //  Calculate the determinant\r\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n        if (!det) {return null; }\r\n\r\n        det = 1.0 / det;\r\n\r\n        out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n        out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n        out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n\r\n        out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n        out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n        out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n\r\n        out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n        out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n        out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n        return out;\r\n    }\r\n\r\n    // ....................................................................\r\n    // Static Operation\r\n\r\n    // https:// github.com/gregtatum/mdn-model-view-projection/blob/master/shared/matrices.js\r\n    static multiplyVector(mat4: Matrix4 , v: number[]) {\r\n        let x = v[0], y = v[1], z = v[2], w = v[3];\r\n        let c1r1 = mat4[ 0], c2r1 = mat4[ 1], c3r1 = mat4[ 2], c4r1 = mat4[ 3],\r\n            c1r2 = mat4[ 4], c2r2 = mat4[ 5], c3r2 = mat4[ 6], c4r2 = mat4[ 7],\r\n            c1r3 = mat4[ 8], c2r3 = mat4[ 9], c3r3 = mat4[10], c4r3 = mat4[11],\r\n            c1r4 = mat4[12], c2r4 = mat4[13], c3r4 = mat4[14], c4r4 = mat4[15];\r\n\r\n        return [\r\n            x * c1r1 + y * c1r2 + z * c1r3 + w * c1r4,\r\n            x * c2r1 + y * c2r2 + z * c2r3 + w * c2r4,\r\n            x * c3r1 + y * c3r2 + z * c3r3 + w * c3r4,\r\n            x * c4r1 + y * c4r2 + z * c4r3 + w * c4r4\r\n        ];\r\n    }\r\n\r\n    // https:// github.com/toji/gl-matrix/blob/master/src/gl-matrix/vec4.js, vec4.transformMat4\r\n    static transformVec4(out: Float32Array, v: number[], m: Float32Array) {\r\n        out[0] = m[0] * v[0] + m[4] * v[1] + m[8]\t* v[2] + m[12] * v[3];\r\n        out[1] = m[1] * v[0] + m[5] * v[1] + m[9]\t* v[2] + m[13] * v[3];\r\n        out[2] = m[2] * v[0] + m[6] * v[1] + m[10]\t* v[2] + m[14] * v[3];\r\n        out[3] = m[3] * v[0] + m[7] * v[1] + m[11]\t* v[2] + m[15] * v[3];\r\n        return out;\r\n    }\r\n\r\n    // From glMatrix\r\n    // Multiple two mat4 together\r\n    static mult(out: Float32Array, a: Float32Array, b: Float32Array) { \r\n        let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\r\n            a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\r\n            a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\r\n            a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\r\n\r\n        //  Cache only the current line of the second matrix\r\n        let b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\r\n        out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n        out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n        out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n        out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n        b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\r\n        out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n        out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n        out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n        out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n        b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\r\n        out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n        out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n        out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n        out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n        b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\r\n        out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n        out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n        out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n        out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n        return out;\t\r\n    }\r\n\r\n    // ....................................................................\r\n    // Static Transformation\r\n    static scale(out: Float32Array, x: number, y: number, z: number) {\r\n        out[0] *= x;\r\n        out[1] *= x;\r\n        out[2] *= x;\r\n        out[3] *= x;\r\n        out[4] *= y;\r\n        out[5] *= y;\r\n        out[6] *= y;\r\n        out[7] *= y;\r\n        out[8] *= z;\r\n        out[9] *= z;\r\n        out[10] *= z;\r\n        out[11] *= z;\r\n        return out;\r\n    }\r\n\r\n    static rotateY(out: Float32Array, rad: number) {\r\n        let s = Math.sin(rad),\r\n            c = Math.cos(rad),\r\n            a00 = out[0],\r\n            a01 = out[1],\r\n            a02 = out[2],\r\n            a03 = out[3],\r\n            a20 = out[8],\r\n            a21 = out[9],\r\n            a22 = out[10],\r\n            a23 = out[11];\r\n\r\n        //  Perform axis-specific matrix multiplication\r\n        out[0] = a00 * c - a20 * s;\r\n        out[1] = a01 * c - a21 * s;\r\n        out[2] = a02 * c - a22 * s;\r\n        out[3] = a03 * c - a23 * s;\r\n        out[8] = a00 * s + a20 * c;\r\n        out[9] = a01 * s + a21 * c;\r\n        out[10] = a02 * s + a22 * c;\r\n        out[11] = a03 * s + a23 * c;\r\n        return out;\r\n    }\r\n\r\n    static rotateX(out: Float32Array, rad: number) {\r\n        let s = Math.sin(rad),\r\n            c = Math.cos(rad),\r\n            a10 = out[4],\r\n            a11 = out[5],\r\n            a12 = out[6],\r\n            a13 = out[7],\r\n            a20 = out[8],\r\n            a21 = out[9],\r\n            a22 = out[10],\r\n            a23 = out[11];\r\n\r\n        //  Perform axis-specific matrix multiplication\r\n        out[4] = a10 * c + a20 * s;\r\n        out[5] = a11 * c + a21 * s;\r\n        out[6] = a12 * c + a22 * s;\r\n        out[7] = a13 * c + a23 * s;\r\n        out[8] = a20 * c - a10 * s;\r\n        out[9] = a21 * c - a11 * s;\r\n        out[10] = a22 * c - a12 * s;\r\n        out[11] = a23 * c - a13 * s;\r\n        return out;\r\n    }\r\n\r\n    static rotateZ(out: Float32Array, rad: number) {\r\n        let s = Math.sin(rad),\r\n            c = Math.cos(rad),\r\n            a00 = out[0],\r\n            a01 = out[1],\r\n            a02 = out[2],\r\n            a03 = out[3],\r\n            a10 = out[4],\r\n            a11 = out[5],\r\n            a12 = out[6],\r\n            a13 = out[7];\r\n\r\n        //  Perform axis-specific matrix multiplication\r\n        out[0] = a00 * c + a10 * s;\r\n        out[1] = a01 * c + a11 * s;\r\n        out[2] = a02 * c + a12 * s;\r\n        out[3] = a03 * c + a13 * s;\r\n        out[4] = a10 * c - a00 * s;\r\n        out[5] = a11 * c - a01 * s;\r\n        out[6] = a12 * c - a02 * s;\r\n        out[7] = a13 * c - a03 * s;\r\n        return out;\r\n    }\r\n\r\n    static rotate(out: Float32Array , rad: number, axis: number) {\r\n        let x = axis[0], y = axis[1], z = axis[2],\r\n            len = Math.sqrt(x * x + y * y + z * z),\r\n            s, c, t,\r\n            a00, a01, a02, a03,\r\n            a10, a11, a12, a13,\r\n            a20, a21, a22, a23,\r\n            b00, b01, b02,\r\n            b10, b11, b12,\r\n            b20, b21, b22;\r\n\r\n        if (Math.abs(len) < 0.000001) { return null; }\r\n\r\n        len = 1 / len;\r\n        x *= len;\r\n        y *= len;\r\n        z *= len;\r\n\r\n        s = Math.sin(rad);\r\n        c = Math.cos(rad);\r\n        t = 1 - c;\r\n\r\n        a00 = out[0]; a01 = out[1]; a02 = out[2]; a03 = out[3];\r\n        a10 = out[4]; a11 = out[5]; a12 = out[6]; a13 = out[7];\r\n        a20 = out[8]; a21 = out[9]; a22 = out[10]; a23 = out[11];\r\n\r\n        //  Construct the elements of the rotation matrix\r\n        b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\r\n        b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\r\n        b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\r\n\r\n        //  Perform rotation-specific matrix multiplication\r\n        out[0] = a00 * b00 + a10 * b01 + a20 * b02;\r\n        out[1] = a01 * b00 + a11 * b01 + a21 * b02;\r\n        out[2] = a02 * b00 + a12 * b01 + a22 * b02;\r\n        out[3] = a03 * b00 + a13 * b01 + a23 * b02;\r\n        out[4] = a00 * b10 + a10 * b11 + a20 * b12;\r\n        out[5] = a01 * b10 + a11 * b11 + a21 * b12;\r\n        out[6] = a02 * b10 + a12 * b11 + a22 * b12;\r\n        out[7] = a03 * b10 + a13 * b11 + a23 * b12;\r\n        out[8] = a00 * b20 + a10 * b21 + a20 * b22;\r\n        out[9] = a01 * b20 + a11 * b21 + a21 * b22;\r\n        out[10] = a02 * b20 + a12 * b21 + a22 * b22;\r\n        out[11] = a03 * b20 + a13 * b21 + a23 * b22;\r\n        return out;\r\n    }\r\n\r\n    static invert(out: Float32Array, mat?: Float32Array ) {\r\n        if (mat === undefined) { mat = out; }// If input isn't sent, then output is also input\r\n\r\n        let a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3],\r\n            a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7],\r\n            a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11],\r\n            a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15],\r\n\r\n            b00 = a00 * a11 - a01 * a10,\r\n            b01 = a00 * a12 - a02 * a10,\r\n            b02 = a00 * a13 - a03 * a10,\r\n            b03 = a01 * a12 - a02 * a11,\r\n            b04 = a01 * a13 - a03 * a11,\r\n            b05 = a02 * a13 - a03 * a12,\r\n            b06 = a20 * a31 - a21 * a30,\r\n            b07 = a20 * a32 - a22 * a30,\r\n            b08 = a20 * a33 - a23 * a30,\r\n            b09 = a21 * a32 - a22 * a31,\r\n            b10 = a21 * a33 - a23 * a31,\r\n            b11 = a22 * a33 - a23 * a32,\r\n\r\n            //  Calculate the determinant\r\n            det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n        if (!det) {return false; }\r\n        det = 1.0 / det;\r\n\r\n        out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n        out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n        out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n        out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\r\n        out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n        out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n        out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n        out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\r\n        out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n        out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n        out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n        out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\r\n        out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\r\n        out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\r\n        out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\r\n        out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\r\n\r\n        return true;\r\n    }\r\n\r\n    // https:// github.com/toji/gl-matrix/blob/master/src/gl-matrix/mat4.js  mat4.scalar.translate = function (out, a, v) {\r\n    static translate(out: Float32Array, x: number, y: number, z: number) {\r\n        out[12] = out[0] * x + out[4] * y + out[8]\t* z + out[12];\r\n        out[13] = out[1] * x + out[5] * y + out[9]\t* z + out[13];\r\n        out[14] = out[2] * x + out[6] * y + out[10]\t* z + out[14];\r\n        out[15] = out[3] * x + out[7] * y + out[11]\t* z + out[15];\r\n    }\r\n    constructor() { \r\n        this.raw = Matrix4.identity(); \r\n    }\r\n    // ....................................................................\r\n    // Transformations Methods\r\n    vtranslate(v: Vector3) {\r\n        Matrix4.translate(this.raw, v.x, v.y, v.z);\r\n        return this; \r\n    }\r\n    translate(x: number, y: number, z: number) {\r\n        Matrix4.translate(this.raw, x, y, z); \r\n        return this;\r\n    }\r\n    rotateY(rad: number) {\t\tMatrix4.rotateY(this.raw, rad); return this; }\r\n    rotateX(rad: number) {\t\tMatrix4.rotateX(this.raw, rad); return this; }\r\n    rotateZ(rad: number) {\t\tMatrix4.rotateZ(this.raw, rad); return this; }\r\n\r\n    vscale(vec3: Vector3) {\t\tMatrix4.scale(this.raw, vec3.x, vec3.y, vec3.z); return this; }\r\n    scale(x: number, y: number, z: number) {\r\n        Matrix4.scale(this.raw, x, y, z); \r\n        return this; \r\n    }\r\n\r\n    invert() {\r\n        Matrix4.invert(this.raw); \r\n        return this; \r\n    }\r\n\r\n    // ....................................................................\r\n    // Methods\r\n    // Bring is back to identity without changing the transform values.\r\n    resetRotation() {\t\r\n        for (let i = 0; i < this.raw.length; i++) {\r\n            if (i >= 12 && i <= 14) {continue; }\r\n            this.raw[i] = (i % 5 === 0) ? 1 : 0;  // only positions 0,5,10,15 need to be 1 else 0.\r\n        }\r\n        return this;\r\n    }\r\n\r\n    // reset data back to identity.\r\n    reset() { \r\n        for (let i = 0; i < this.raw.length; i++) { this.raw[i] = (i % 5 === 0) ? 1 : 0; } // only positions 0,5,10,15 need to be 1 else 0.\r\n        return this;\r\n    }\r\n}","\r\nexport class Vector3 {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n    constructor(x: number = 0, y: number = 0, z: number = 0 ) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n    magnitude(v?: Vector3) {\r\n        if (v === undefined) {return Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z ); }\r\n        let x = v.x - this.x, y = v.y - this.y, z = v.y - this.z;\r\n        return Math.sqrt( x * x + y * y + z * z );\r\n    }\r\n\r\n    normalize() { \r\n        let mag = this.magnitude(); \r\n        this.x /= mag; this.y /= mag; this.z /= mag; \r\n        return this;\r\n    }\r\n    set(x: number, y: number, z: number) {\r\n         this.x = x; this.y = y; this.z = z;\t\r\n         return this;\r\n    }\r\n    multiScalar(v: number) { \r\n        this.x *= v; this.y *= v; this.z *= v; return this; \r\n    }\r\n    getArray() {\r\n         return [this.x, this.y, this.z]; }\r\n    getFloatArray() {\r\n         return new Float32Array([this.x, this.y, this.z]); }\r\n    clone() {\r\n         return new Vector3(this.x, this.y, this.z); \r\n    }\r\n} ","import { Matrix4 } from '../Utility/Matrix4';\r\nimport { Transform } from './Transform';\r\n\r\nexport enum CAMERA_MODE {\r\n    FREE = 0,\r\n    ORBIT = 1\r\n\r\n}\r\n\r\nexport class Camera {\r\n\r\n    projectionMatrix: Float32Array;\r\n    viewMatrix: Float32Array;\r\n    transform: Transform;\r\n\r\n    mode: CAMERA_MODE;\r\n\r\n    constructor(gl: WebGL2RenderingContext, fov: number = 45, near: number = 0.1, far: number = 100) {\r\n        // Setup the perspective matrix\r\n        this.projectionMatrix = new Float32Array(16);\r\n        var ratio = gl.canvas.width / gl.canvas.height;\r\n        Matrix4.perspective(this.projectionMatrix, fov || 45, ratio, near || 0.1, far || 100.0);\r\n\r\n        this.transform = new Transform();\t\t// Setup transform to control the position of the camera\r\n        this.viewMatrix = new Float32Array(16);\t// Cache the matrix that will hold the inverse of the transform.\r\n\r\n        this.mode = CAMERA_MODE.ORBIT;\t\t// Set what sort of control mode to use.\r\n    }\r\n\r\n    panX(v: number) {\r\n        if (this.mode === CAMERA_MODE.ORBIT) { return; } //  Panning on the X Axis is only allowed when in free mode\r\n        this.updateViewMatrix();\r\n        this.transform.position.x += this.transform.right[0] * v;\r\n        this.transform.position.y += this.transform.right[1] * v;\r\n        this.transform.position.z += this.transform.right[2] * v;\r\n    }\r\n\r\n    panY(v: number) {\r\n        this.updateViewMatrix();\r\n        this.transform.position.y += this.transform.up[1] * v;\r\n        if (this.mode === CAMERA_MODE.ORBIT) { return; }// Can only move up and down the y axix in orbit mode\r\n        this.transform.position.x += this.transform.up[0] * v;\r\n        this.transform.position.z += this.transform.up[2] * v;\r\n    }\r\n\r\n    panZ(v: number) {\r\n        this.updateViewMatrix();\r\n        if (this.mode === CAMERA_MODE.ORBIT) {\r\n            this.transform.position.z += v; // orbit mode does translate after rotate, so only need to set Z, the rotate will handle the rest.\r\n        } else {\r\n            // in freemode to move forward, we need to move based on our forward which is relative to our current rotation\r\n            this.transform.position.x += this.transform.forward[0] * v;\r\n            this.transform.position.y += this.transform.forward[1] * v;\r\n            this.transform.position.z += this.transform.forward[2] * v;\r\n        }\r\n    }\r\n\r\n    // To have different modes of movements, this function handles the view matrix update for the transform object.\r\n    updateViewMatrix() {\r\n        // Optimize camera transform update, no need for scale nor rotateZ\r\n        if (this.mode === CAMERA_MODE.FREE) {\r\n            this.transform.matView.reset()\r\n                .vtranslate(this.transform.position)\r\n                .rotateX(this.transform.rotation.x * Transform.deg2Rad)\r\n                .rotateY(this.transform.rotation.y * Transform.deg2Rad);\r\n\r\n        } else {\r\n            this.transform.matView.reset()\r\n                .rotateX(this.transform.rotation.x * Transform.deg2Rad)\r\n                .rotateY(this.transform.rotation.y * Transform.deg2Rad)\r\n                .vtranslate(this.transform.position);\r\n\r\n        }\r\n\r\n        this.transform.updateDirection();\r\n\r\n        // Cameras work by doing the inverse transformation on all meshes, the camera itself is a lie :)\r\n        Matrix4.invert(this.viewMatrix, this.transform.matView.raw);\r\n        return this.viewMatrix;\r\n    }\r\n}\r\n\r\nexport class CameraController {\r\n    canvas: HTMLCanvasElement;\r\n    camera: Camera;\r\n    rotateRate: number;\r\n    panRate: number;\r\n    zoomRate: number;\r\n    offsetX: number;\r\n    offsetY: number;\r\n    initX: number;\r\n    initY: number;\r\n    prevX: number;\r\n    prevY: number;\r\n\r\n    onUpHandler: (e: MouseEvent) => void;\r\n    onMoveHandler: (e: MouseEvent) => void;\r\n\r\n    constructor(gl: WebGL2RenderingContext, camera: Camera) {\r\n        // var box = gl.canvas.getBoundingClientRect();\r\n        this.canvas = gl.canvas as HTMLCanvasElement;\t\t\t\t\t\t// Need access to the canvas html element, main to access events\r\n        this.camera = camera;\t\t\t\t\t\t\t// Reference to the camera to control\r\n\r\n        this.rotateRate = -300;\t\t\t\t\t\t\t// How fast to rotate, degrees per dragging delta\r\n        this.panRate = 5;\t\t\t\t\t\t\t\t// How fast to pan, max unit per dragging delta\r\n        this.zoomRate = 200;\t\t\t\t\t\t\t// How fast to zoom or can be viewed as forward/backward movement\r\n\r\n        this.offsetX = 10; // box.left;\t\t\t\t\t\t// Help calc global x,y mouse cords.\r\n        this.offsetY = 10; // box.top;\r\n\r\n        this.initX = 0;\t\t\t\t\t\t\t\t\t// Starting X,Y position on mouse down\r\n        this.initY = 0;\r\n        this.prevX = 0;\t\t\t\t\t\t\t\t\t// Previous X,Y position on mouse move\r\n        this.prevY = 0;\r\n\r\n        // // tslint:disable-next-line:no-any\r\n        this.onUpHandler = (e: MouseEvent) => (this.onMouseUp(e));\t// Cache func reference that gets bound and unbound a lot\r\n        this.onMoveHandler = (e: MouseEvent) => { this.onMouseMove(e); };\r\n\r\n        this.canvas.addEventListener('mousedown', (e) => { this.onMouseDown(e); });\t\t// Initializes the up and move events\r\n        this.canvas.addEventListener('mousewheel', (e) => { this.onMouseWheel(e); });\t// Handles zoom/forward movement\r\n    }\r\n\r\n    // Transform mouse x,y cords to something useable by the canvas.\r\n    // tslint:disable-next-line:no-any\r\n    getMouseVec2(e: any) {\r\n        return { x: e.pageX - this.offsetX, y: e.pageY - this.offsetY };\r\n    }\r\n\r\n    // Begin listening for dragging movement\r\n    // tslint:disable-next-line:no-any\r\n    onMouseDown(e: any) {\r\n        this.initX = this.prevX = e.pageX - this.offsetX;\r\n        this.initY = this.prevY = e.pageY - this.offsetY;\r\n\r\n        this.canvas.addEventListener('mouseup', this.onUpHandler);\r\n        this.canvas.addEventListener('mousemove', this.onMoveHandler);\r\n    }\r\n\r\n    // End listening for dragging movement\r\n    // tslint:disable-next-line:no-any\r\n    onMouseUp(e: any) {\r\n        this.canvas.removeEventListener('mouseup', this.onUpHandler);\r\n        this.canvas.removeEventListener('mousemove', this.onMoveHandler);\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    onMouseWheel(e: any) {\r\n        var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))); // Try to map wheel movement to a number between -1 and 1\r\n        this.camera.panZ(delta * (this.zoomRate / this.canvas.height));\t\t// Keep the movement speed the same, no matter the height diff\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    onMouseMove(e: any) {\r\n        var x = e.pageX - this.offsetX,\t// Get X,y where the canvas's position is origin.\r\n            y = e.pageY - this.offsetY,\r\n            dx = x - this.prevX,\t\t// Difference since last mouse move\r\n            dy = y - this.prevY;\r\n\r\n        // When shift is being helt down, we pan around else we rotate.\r\n        if (!e.shiftKey) {\r\n            this.camera.transform.rotation.y += dx * (this.rotateRate / this.canvas.width);\r\n            this.camera.transform.rotation.x += dy * (this.rotateRate / this.canvas.height);\r\n        } else {\r\n            this.camera.panX(-dx * (this.panRate / this.canvas.width));\r\n            this.camera.panY(dy * (this.panRate / this.canvas.height));\r\n        }\r\n\r\n        this.prevX = x;\r\n        this.prevY = y;\r\n    }\r\n}","import { Vector3 } from '../Utility/Vector3';\r\nimport { Matrix4 } from '../Utility/Matrix4';\r\n\r\nexport class Transform {\r\n    static deg2Rad = Math.PI / 180; // Cache result, one less operation to do for each update.\r\n\r\n    position: Vector3;\r\n    scale: Vector3;\r\n    rotation: Vector3;\r\n    matView: Matrix4;\r\n    matNormal: Float32Array;\r\n\r\n    forward: Float32Array;\r\n    up: Float32Array;\r\n    right: Float32Array;\r\n\r\n    constructor() {\r\n        this.position = new Vector3(0, 0, 0);\t// Traditional X,Y,Z 3d position\r\n        this.scale = new Vector3(1, 1, 1);\t// How much to scale a mesh. Having a 1 means no scaling is done.\r\n        this.rotation = new Vector3(0, 0, 0);\t// Hold rotation values based on degrees, Object will translate it to radians\r\n        this.matView = new Matrix4();\t\t// Cache the results when calling updateMatrix\r\n        this.matNormal = new Float32Array(9);\t// This is a Mat3, raw array to hold the values is enough for what its used for\r\n\r\n        // Direction Vectors\r\n        this.forward = new Float32Array(4);\t// When rotating, keep track of what the forward direction is\r\n        this.up = new Float32Array(4);\t// what the up direction is, invert to get bottom\r\n        this.right = new Float32Array(4);\t// what the right direction is, invert to get left\r\n    }\r\n    updateMatrix() {\r\n        this.matView.reset() // Order is very important!!\r\n            .vtranslate(this.position)\r\n            .rotateX(this.rotation.x * Transform.deg2Rad)\r\n            .rotateZ(this.rotation.z * Transform.deg2Rad)\r\n            .rotateY(this.rotation.y * Transform.deg2Rad)\r\n            .vscale(this.scale);\r\n\r\n        // Calcuate the Normal Matrix which doesn't need translate, then transpose and inverses the mat4 to mat3\r\n        Matrix4.normalMat3(this.matNormal, this.matView.raw);\r\n\r\n        // Determine Direction after all the transformations.\r\n        Matrix4.transformVec4(this.forward, [0, 0, 1, 0], this.matView.raw); // Z\r\n        Matrix4.transformVec4(this.up, [0, 1, 0, 0], this.matView.raw); // Y\r\n        Matrix4.transformVec4(this.right, [1, 0, 0, 0], this.matView.raw); // X\r\n\r\n        return this.matView.raw;\r\n    }\r\n\r\n    updateDirection() {\r\n        Matrix4.transformVec4(this.forward, [0, 0, 1, 0], this.matView.raw);\r\n        Matrix4.transformVec4(this.up, [0, 1, 0, 0], this.matView.raw);\r\n        Matrix4.transformVec4(this.right, [1, 0, 0, 0], this.matView.raw);\r\n        return this;\r\n    }\r\n\r\n    getViewMatrix() { return this.matView.raw; }\r\n    getNormalMatrix() { return this.matNormal; }\r\n\r\n    reset() {\r\n        this.position.set(0, 0, 0);\r\n        this.scale.set(1, 1, 1);\r\n        this.rotation.set(0, 0, 0);\r\n    }\r\n}\r\n"],"names":["Matrix4","static","a","Float32Array","out","fovy","aspect","near","far","f","Math","tan","nf","left","right","bottom","top","lr","bt","a01","a02","a03","a12","a13","a23","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","mat4","v","x","y","z","w","c1r1","c2r1","c3r1","c4r1","c1r2","c2r2","c3r2","c4r2","c1r3","c2r3","c3r3","c4r3","m","b","b0","b1","b2","b3","rad","s","sin","c","cos","axis","t","b12","b20","b21","b22","len","sqrt","abs","mat","undefined","constructor","raw","this","identity","vtranslate","translate","rotateY","rotateX","rotateZ","vscale","vec3","scale","invert","resetRotation","i","length","reset","Vector3","magnitude","normalize","mag","set","multiScalar","getArray","getFloatArray","clone","CAMERA_MODE","Camera","gl","fov","projectionMatrix","viewMatrix","transform","mode","ratio","canvas","width","height","Transform","ORBIT","panX","updateViewMatrix","position","panY","up","panZ","forward","FREE","matView","rotation","updateDirection","CameraController","camera","rotateRate","panRate","zoomRate","offsetX","offsetY","initX","initY","prevX","prevY","onUpHandler","onMoveHandler","e","onMouseUp","onMouseMove","addEventListener","onMouseDown","onMouseWheel","getMouseVec2","pageX","pageY","removeEventListener","delta","max","min","wheelDelta","detail","dx","dy","shiftKey","matNormal","updateMatrix","deg2Rad","getViewMatrix","getNormalMatrix","PI"],"sourceRoot":""}
{"version":3,"file":"static/js/17330.ff05c768.chunk.js","mappings":"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","sources":["njslab/Tools/BezierCurveControl/Arrow.ts","njslab/Tools/BezierCurveControl/index.ts"],"sourcesContent":["export const getArrow = ({ x0, y0, x1, y1, x2, y2, resolution=7}) => {\n    return arrow( [x0, y0, x1, y1, x2, y2], resolution )\n};\nconst arrow = (arrayVertices: number[] , resolution = 5) => {\n    const pts: number[] = [];\n    for (const ii of arrayVertices) {\n      pts.push(ii);\n    }\n    let arrayControlPoint: number[] = [];\n    for (let i = 0; i < pts.length - 4; i += 2) {\n      arrayControlPoint = arrayControlPoint.concat(\n          computeControlPoints( pts[i], pts[i + 1], pts[i + 2], pts[i + 3], pts[i + 4], pts[i + 5], 0.5)\n      );\n    }\n    return getSpline(arrayVertices, arrayControlPoint, resolution);\n};\nconst computeControlPoints = (x0: number, y0: number, x1: number, y1: number, x2: number, y2: number, w: number) => {\n    const d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n    const d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    const fa = (w * d01) / (d01 + d12);\n    const fb = w - fa;\n    const p1x = x1 + fa * (x0 - x2);\n    const p1y = y1 + fa * (y0 - y2);\n    const p2x = x1 - fb * (x0 - x2);\n    const p2y = y1 - fb * (y0 - y2);\n    return [p1x, p1y, p2x, p2y];\n};\nconst getSpline = (APoints: number[], cps: number[], resolution = 5) => {\n    const pts = APoints;\n    const cp = cps;\n    const n = pts.length;\n\n    const vs = []\n    vs.push(...curveQuadraticArrow(pts[n - 2], pts[n - 1], cp[2 * n - 10], cp[2 * n - 9], pts[n - 4], pts[n - 3], resolution, true));\n    vs.push(...curveQuadraticArrow(pts[0], pts[1], cp[0], cp[1], pts[2], pts[3], resolution));\n    \n    return vs;\n};\nconst curveQuadraticArrow = (x0: number, y0: number, x1: number, y1: number, x2: number, y2: number, resolution = 3, reverse = false) => {\n    const vertex = []\n    if (reverse) {\n        vertex.push(x0, y0)\n        for (let i = resolution - 1; i > -1; i--) {\n            const t = i / resolution;\n            const xt = (1 - t) * (1 - t) * x2 + 2 * (1 - t) * t * x1 + t * t * x0;\n            const yt = (1 - t) * (1 - t) * y2 + 2 * (1 - t) * t * y1 + t * t * y0;\n            vertex.push(xt, yt)\n        }\n    } else {\n        for (let i = 1; i <= resolution; i++) {\n            const t = i / resolution;\n            const xt = (1 - t) * (1 - t) * x2 + 2 * (1 - t) * t * x1 + t * t * x0;\n            const yt = (1 - t) * (1 - t) * y2 + 2 * (1 - t) * t * y1 + t * t * y0;\n            vertex.push(xt, yt)\n        }\n    }\n    return vertex\n};","import { RendererCanvas } from '../../../lib'\r\n\r\nimport {getArrow} from './Arrow'\r\n\r\nexport class Solution {\r\n    public divHost: HTMLElement;\r\n    public renderer: Renderer;\r\n    constructor(id: string) {\r\n        this.divHost = document.getElementById(id)\r\n        // Center align\r\n        this.divHost.style.display = 'flex';\r\n        this.divHost.style.alignItems = 'center';\r\n\r\n        const div = document.createElement('div');\r\n        div.style.marginLeft = 'auto';\r\n        div.style.marginRight = 'auto';\r\n        div.style.backgroundColor = '#555';\r\n        div.style.width = '1000px';\r\n        div.style.height = '600px';\r\n\r\n        this.divHost.appendChild(div);\r\n\r\n        // TODO\r\n        // You code goes here for one time operation\r\n\r\n        this.renderer = new Renderer(div);\r\n\r\n        // console.log(this.renderer);\r\n        // !! you should execute it for rendering\r\n        // this.start();\r\n    }\r\n    public destroy() {\r\n        this.renderer.destroy();\r\n        while (this.divHost.lastElementChild) {\r\n            this.divHost.removeChild(this.divHost.lastElementChild);\r\n        }\r\n    }\r\n}\r\n\r\nexport class Renderer extends RendererCanvas {\r\n    p0: Vector;\r\n    p1: Vector;\r\n    p2: Vector;\r\n\r\n    N = 3;\r\n\r\n    m: Vector = new Vector(0,0);\r\n    capture = undefined;\r\n\r\n    ptsList: Vector[] = [];\r\n\r\n    arrayControlPoint: number[] = []\r\n\r\n    constructor(div: any) {\r\n        super(div);\r\n        this.canvas.style.position = 'relative';\r\n        this.canvas.style.width = '100%';\r\n        this.canvas.style.height = '100%';\r\n\r\n        this.p0 = new Vector(80, 120);\r\n        this.p1 = new Vector(180, 50);\r\n        this.p2 = new Vector(250, 120);\r\n        this.ptsList = [this.p0, this.p1, this.p2];\r\n\r\n        const slider = getSlider('N', 1, 10);\r\n        this.divHost.appendChild(slider.div);\r\n        slider.slider.oninput = () => {\r\n            this.N = +slider.slider.value\r\n            slider.text.innerText = 'N: ' + this.N;\r\n        }\r\n\r\n        this.start();\r\n    }\r\n    public mouseDown(x: number, y: number): void {\r\n        this.m.x = x;\r\n        this.m.y = y;\r\n        for (let i = 0; i < this.ptsList.length; ++i) {\r\n            const dis = this.ptsList[i].distanceTo(this.m);\r\n            if (dis < 10) {\r\n                this.capture = this.ptsList[i];\r\n            }\r\n        }\r\n    }\r\n\r\n    public mouseUp(x: number, y: number): void {\r\n        this.capture = undefined;\r\n    }\r\n\r\n    public mouseDrag(x: number, y: number): void {\r\n        if (this.capture) {\r\n            this.capture.x = x;\r\n            this.capture.y = y;\r\n        }\r\n    }\r\n\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        this.ptsList.forEach(p => p.draw(ctx));\r\n\r\n\r\n        // const dataDrawing = getArrow({\r\n        //     ctx, \r\n        //     x0: this.p0.x, y0: this.p0.y,\r\n        //     x1: this.p1.x, y1: this.p1.y,\r\n        //     x2: this.p2.x, y2: this.p2.y,\r\n        //     resolution: this.N,\r\n        //     scaleHead: 2.5\r\n        // })\r\n\r\n        // console.log({dataDrawing})\r\n\r\n\r\n        // ctx.beginPath();\r\n        // ctx.moveTo(dataDrawing.line[0], dataDrawing.line[1]);\r\n        // for(let i = 2 ; i < dataDrawing.line.length; i+=2) {\r\n        //     ctx.lineTo(dataDrawing.line[i], dataDrawing.line[1+i]);\r\n        // }\r\n        // ctx.stroke();\r\n\r\n\r\n        const dataDrawing = getArrow({\r\n            x0: this.p0.x, y0: this.p0.y,\r\n            x1: this.p1.x, y1: this.p1.y,\r\n            x2: this.p2.x, y2: this.p2.y,\r\n            resolution: this.N,\r\n        })\r\n\r\n        // console.log({dataDrawing})\r\n\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(dataDrawing[0], dataDrawing[1]);\r\n        for(let i = 2 ; i < dataDrawing.length; i+=2) {\r\n            ctx.lineTo(dataDrawing[i], dataDrawing[1+i]);\r\n        }\r\n        ctx.stroke();\r\n        \r\n    }\r\n\r\n}\r\n\r\n// https://codepen.io/NJStudio/pen/zYwZmEL?editors=1010\r\nclass Vector {\r\n    x = 0;\r\n    y = 0;\r\n    constructor(x = 0, y = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    distanceTo(other: Vector) {\r\n        return Math.sqrt((other.x - this.x) * (other.x - this.x) + (other.y - this.y) * (other.y - this.y));\r\n    }\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.beginPath();\r\n        ctx.arc(this.x, this.y, 5.0, 0.0, 3.14159 * 2)\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n}\r\n\r\nconst getSlider = (title: string, min: number, max: number) => {\r\n    // <input type=\"range\" min=\"1\" max=\"100\" value=\"50\" class=\"slider\" id=\"myRange\">\r\n    const div = document.createElement('div');\r\n    div.style.display = 'flex';\r\n\r\n    const slider = document.createElement('input');\r\n    slider.type = 'range';\r\n    slider.min = `${min}`;\r\n    slider.max = `${max}`;\r\n    slider.value = '3'\r\n\r\n    const text = document.createElement('div');\r\n    text.innerText = title;\r\n    text.style.color = '#aaa';\r\n    div.appendChild(slider);\r\n    div.appendChild(text);\r\n\r\n    return {\r\n        div, slider, text\r\n    };\r\n};\r\n"],"names":["arrow","arrayVertices","resolution","pts","ii","push","arrayControlPoint","i","length","concat","computeControlPoints","getSpline","x0","y0","x1","y1","x2","y2","w","d01","Math","sqrt","pow","fa","fb","APoints","cps","cp","n","vs","curveQuadraticArrow","vertex","t","xt","yt","Solution","constructor","id","divHost","renderer","this","document","getElementById","style","display","alignItems","div","createElement","marginLeft","marginRight","backgroundColor","width","height","appendChild","Renderer","destroy","lastElementChild","removeChild","RendererCanvas","super","p0","p1","p2","N","m","Vector","capture","undefined","ptsList","canvas","position","slider","getSlider","oninput","value","text","innerText","start","mouseDown","x","y","distanceTo","mouseUp","mouseDrag","render","ctx","clearRect","forEach","p","draw","dataDrawing","getArrow","beginPath","moveTo","lineTo","stroke","other","fillStyle","arc","closePath","fill","title","min","max","type","color"],"sourceRoot":""}
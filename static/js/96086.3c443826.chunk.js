"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[96086,97795],{97795:(s,e,i)=>{i.r(e),i.d(e,{DefinitionIndeCanvasCore:()=>n});var t=i(12850);class n{constructor(s){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;this.scene=void 0,this.indeCanvas=void 0,this.mOffX=-12,this.mOffY=-12,this.scene=s,this.scene.definitions.push(this),this.InitIndeCanvas(e,i)}InitIndeCanvas(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:650,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;this.scene.implementation.app.needUI?this.indeCanvas=new t.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,50,50,s,e,!0):this.indeCanvas=new t.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,1,-25,s,e,!0),this.indeCanvas.title="TF Env",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=s=>this.RenderIndependentCanvas(s)}get width(){return this.indeCanvas.canvas.width}get height(){return this.indeCanvas.canvas.height}Init(s){}RenderIndependentCanvas(s){}MouseMove(s,e){}MouseMovePre(s,e){this.indeCanvas.IsMouseInsidePanel(s,e)&&this.MouseMove(s-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDown(s,e){}MouseDownPre(s,e){this.indeCanvas.IsMouseInsidePanel(s,e)&&this.MouseDown(s-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseUp(s,e){}MouseUpPre(s,e){this.indeCanvas.IsMouseInsidePanel(s,e)&&this.MouseUp(s-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDrag(s,e){}MouseDragPre(s,e){this.indeCanvas.IsMouseInsidePanel(s,e)&&this.MouseDrag(s-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseLeftClick(s,e){}MouseLeftClickPre(s,e){this.indeCanvas.IsMouseInsidePanel(s,e)&&this.MouseLeftClick(s-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseMiddleClick(s,e){}MouseMiddleClickPre(s,e){this.indeCanvas.IsMouseInsidePanel(s,e)&&this.MouseMiddleClick(s-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseRightClick(s,e){}MouseRightClickPre(s,e){this.indeCanvas.IsMouseInsidePanel(s,e)&&this.MouseRightClick(s-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDoubleClick(s,e){}MouseDoubleClickPre(s,e){this.indeCanvas.IsMouseInsidePanel(s,e)&&this.MouseDoubleClick(s-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseWheel(s,e,i){}MouseWheelPre(s,e,i){this.indeCanvas.IsMouseInsidePanel(s,e)&&this.MouseWheel(s-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,i)}}},96086:(s,e,i)=>{i.r(e),i.d(e,{TFModel03SmartDrawing:()=>a});var t=i(65812),n=i(97795);class a extends n.DefinitionIndeCanvasCore{constructor(s){super(s,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.tfModel=void 0,this.xPredict=void 0,this.inputs=[],this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}async Init(){const s=new o;await s.Init().then((()=>{this.tfModel=new h("model1",s.inputsTensor,s.labelsTensor),this.tfModel.CreateModel01(),this.tfModel=new h("model2",s.inputsTensor,s.labelsTensor),this.tfModel.CreateModel02()}))}RenderIndependentCanvas(s){t.tidy((()=>{}))}}class o{constructor(){this.raw=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0}async Init(){const s=await this.OpenCSV();if(s){this.raw=this.processData(s),t.util.shuffle(this.raw);const e=[],i=[];for(let s=0;s<this.raw.length;++s){let t=[];for(let e=0;e<this.raw[s].length-1;++e)t.push(this.raw[s][e]);e.push(t),i.push(this.raw[s][this.raw[s].length-1])}console.log(e),console.log(i);const n=t.max(i).dataSync(),a=[];for(let s=0;s<i.length;++s){const e=[];for(let t=0;t<=n[0];++t)t===i[s]?e.push(1):e.push(0);a.push(e)}console.log(a),this.inputsTensor=t.tensor2d(e),this.labelsTensor=t.tensor2d(a),this.inputsTensor.print(),this.labelsTensor.print()}}processData(s){const e=s.split(/\r\n|\n/),i=e[0].split(","),t=[];for(let n=1;n<e.length;n++){const s=e[n].split(",");if(s.length===i.length){const e=[];for(let t=0;t<i.length;t++){const i=+s[t];isNaN(i)?e.push(s[t]):e.push(i)}t.push(e)}}return t}async OpenCSV(){return fetch("njslabSandboxStatic/ML/SmartDrawing/".concat("smartDrawingTrainData.csv")).then((s=>(console.log(s),s.text()))).catch((s=>{console.log(s)}))}}class h{constructor(s,e,i){this.t0=void 0,this.t1=void 0,this.name=void 0,this.model=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0,this.name=s,this.inputsTensor=e,this.labelsTensor=i}CreateModel01(){this.model=t.sequential();const s=t.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),e=t.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(s),this.model.add(e),this.Compile()}CreateModel02(){this.model=t.sequential();const s=t.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),e=t.layers.dense({units:15,activation:"sigmoid"}),i=t.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(s),this.model.add(e),this.model.add(i),this.Compile()}Compile(){this.model.compile({optimizer:t.train.adam(),loss:t.losses.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}async trainLoop(){this.t0=performance.now(),await this.model.save("downloads://my-model"),this.train().then((s=>{this.t1=performance.now(),console.log("".concat(this.name,": ").concat(s.history.loss[0],", ").concat(this.t1-this.t0," ")),setTimeout((()=>this.trainLoop()),1)}))}async train(){}}}}]);
//# sourceMappingURL=96086.3c443826.chunk.js.map
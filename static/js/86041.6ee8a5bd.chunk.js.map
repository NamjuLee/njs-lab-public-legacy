{"version":3,"file":"static/js/86041.6ee8a5bd.chunk.js","mappings":"yJAEO,MAAMA,EAETC,YAAYC,GAAuB,KAD5BA,SAAG,EAENC,KAAKD,IAAMA,CACf,CACWE,4BAAwBC,GAC/BF,KAAKD,IAAII,KAAKC,OAAOC,qBAAuBH,CAChD,CACOI,iBAAiBJ,GACpBF,KAAKD,IAAIQ,MAAMC,YAAcN,EAC7BF,KAAKD,IAAII,KAAKM,MAAMH,iBAAiBJ,GACrCF,KAAKD,IAAII,KAAKC,OAAOM,aACzB,CACOC,iBACHX,KAAKD,IAAII,KAAKS,UAEd,IACQZ,KAAKD,IAAIc,GACTb,KAAKD,IAAIc,GAAGC,8BAA8BC,WAAWC,YAAYhB,KAAKD,IAAIc,GAAGC,+BAE7Ed,KAAKD,IAAII,KAAKc,IAAIF,WAAWC,YAAYhB,KAAKD,IAAII,KAAKc,IAI/D,CAFE,MAAOC,GACLC,QAAQC,MAAMF,EAClB,CACAlB,KAAKD,IAAIsB,WAAW,UACxB,CACOC,kBAAkBC,GACrBvB,KAAKD,IAAII,KAAKqB,cAAcF,kBAAkBC,EAClD,CACOE,sBACHzB,KAAKD,IAAII,KAAKqB,cAAcC,qBAChC,CACOC,eAEH1B,KAAKD,IAAII,KAAKqB,cAAcG,iBAC5B3B,KAAKW,gBACT,CACOiB,gBACH5B,KAAKW,gBACT,CACOkB,eACH,CAEGC,cACH9B,KAAKD,IAAII,KAAKM,MAAMsB,MACxB,CACOC,cACHhC,KAAKD,IAAII,KAAKM,MAAMwB,MACxB,CACOC,0BACHlC,KAAKD,IAAII,KAAKqB,cAAcW,kBAChC,CACOC,kBACH,CAEGC,iBACH,CAEGC,WAAWC,GACdvC,KAAKD,IAAII,KAAKqB,cAAcgB,aAAaD,GAAG,GAC5CvC,KAAKD,IAAII,KAAKsC,OAAOC,gBACzB,CACOF,aAAaD,GAAqC,IAA7BI,IAAmB,yDAC3C3C,KAAKD,IAAII,KAAKqB,cAAcgB,aAAaD,EAAGI,EAChD,CACOC,oBACH,OAAO5C,KAAKD,IAAII,KAAKM,MAAMoC,eAAeC,MAC9C,CACOC,gBACH/C,KAAKD,IAAII,KAAK6C,MAAMC,SAASC,WACjC,CACOC,eACH,OAAOnD,KAAKD,IAAII,KAAK6C,MAAMI,SAC/B,CACOC,kBAAkBC,GACrBtD,KAAKD,IAAII,KAAK6C,MAAMO,eAAiBD,EACrCtD,KAAKD,IAAII,KAAK8C,SAASO,gBACvBxD,KAAKD,IAAII,KAAKsD,OAAOC,cACzB,CACOC,uBAAuBL,GAC1BtD,KAAKD,IAAII,KAAK6C,MAAMY,eAAiBN,EACrCtD,KAAKD,IAAII,KAAK8C,SAASY,iBAAkB,EACzC7D,KAAKD,IAAII,KAAK8C,SAASO,gBACvBxD,KAAKD,IAAII,KAAKsD,OAAOC,cACzB,CACOI,iBAAiBC,GACpB/D,KAAKD,IAAII,KAAKsD,OAAOO,iBAAiBD,EAC1C,CACOE,aAAa/D,GAChBF,KAAKD,IAAII,KAAKsD,OAAOS,OAAOhE,EAChC,CACOiE,WAAWjE,GACdF,KAAKD,IAAII,KAAKsD,OAAOW,MAAMlE,EAC/B,CACOmE,YAAYC,GACftE,KAAKD,IAAII,KAAKsD,OAAOc,aAAaD,EACtC,CACOE,iBAAiBtE,GACpBF,KAAKD,IAAII,KAAKsD,OAAOgB,QACrBzE,KAAKD,IAAII,KAAKuE,YAAYxE,EAC9B,CACOyE,UAAUC,EAAWC,EAAWC,EAAeC,EAAgBX,EAAeY,EAAkBC,EAA2BC,GAC9HlF,KAAKmF,YAAYP,EAAGC,EAAGC,EAAOC,EAAQX,EAAOY,EAAUC,EAAWC,GAClElF,KAAKD,IAAII,KAAKsC,OAAO2C,QAAO,GAC5BpF,KAAKD,IAAII,KAAKM,MAAMiD,cACxB,CACOyB,YAAYP,EAAWC,EAAWC,EAAeC,EAAgBX,EAAeY,EAAkBC,EAA2BC,GAEhIlF,KAAKD,IAAII,KAAK6C,MAAMmC,YAAYP,EAAGC,EAAGC,EAAOC,EAAQX,EAAOY,EAAUC,EAAWC,GACjFlF,KAAKD,IAAII,KAAKC,OAAOM,aACzB,CACO2E,iBAAiBT,EAAWC,EAAWC,EAAeC,EAAgBX,EAAeY,EAAkBC,EAA2BC,GACrIlF,KAAKD,IAAII,KAAK6C,MAAMqC,iBAAiBT,EAAGC,EAAGC,EAAOC,EAAQX,EAAOY,EAAUC,EAAWC,GACtFlF,KAAKD,IAAII,KAAK8C,SAASO,eAC3B,CACO8B,iBAAiBC,GACpBvF,KAAKD,IAAII,KAAKM,MAAMoC,eAAiB0C,CACzC,CACOC,kBAAkBC,GACrBzF,KAAKD,IAAII,KAAKsC,OAAOiD,oBAAoBD,EAC7C,CACOE,eAAevB,GAClBpE,KAAKD,IAAII,KAAKM,MAAMmF,aAAexB,CACvC,CACOyB,UAKH,OAL4B,yDAExB7F,KAAKD,IAAII,KAAKqB,cAAcsE,wBAGzB,CACHC,IAAK/F,KAAKgG,SACVC,YAAajG,KAAKkG,iBAClBC,OAAQnG,KAAKoG,YACbC,QAASrG,KAAKsG,aACdC,UAAWvG,KAAKwG,eAGxB,CACOA,eAEH,OAAOxG,KAAKD,IAAII,KAAKsC,OAAOoD,SAChC,CACOS,aACH,OAAOtG,KAAKD,IAAII,KAAKM,MAAMoC,cAC/B,CACOuD,YACH,OAAOpG,KAAKD,IAAII,KAAKqB,cAAciF,mBACvC,CACOC,WACH,OAAO1G,KAAKD,IAAII,KAAKC,OAAOuG,SAChC,CACOX,SACH,OAAOhG,KAAKD,IAAII,KAAKC,OAAOwG,YAChC,CACOV,iBACH,OAAOlG,KAAKD,IAAII,KAAKC,OAAOyG,oBAChC,CACOC,iBAAiB5G,GAGpB,MAAM6G,EAAS,EAACC,EAAAA,EAAAA,IAAS9G,IAInB+G,EAAY,CAACF,EAAO,GAAG,GAAIA,EAAO,GAAG,GAAIA,EAAO,GAAG,IACzD,IAAIG,GAAOC,EAAAA,EAAAA,IAAQF,EAAU,GAAIA,EAAU,GAAIA,EAAU,IACrDG,EAAO,IAAIF,GAGfA,EAAK,IAAM,EACXA,EAAK,KAAO,IACRA,EAAK,GAAK,IAAKA,EAAK,GAAK,GAC7BA,EAAK,IAAM,EAQXE,EAAK,IAAM,EACXA,EAAK,IAAM,EACPA,EAAK,GAAK,IAAKA,EAAK,GAAK,GAC7BA,EAAK,KAAO,IACZ,IAAIC,GAAOC,EAAAA,EAAAA,IAAQF,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAK1CpH,KAAKD,IAAII,KAAK6C,MAAMuE,cAAcF,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAC7D,EChMG,MAAMG,EAKT1H,YAAY2H,GAA8B,KAJnCA,gBAAU,OAGVC,SAAqB,EAAE,KAAM,KAAK,KAIlCC,WAAcC,IACjB5H,KAAKyH,WAAWrH,OAAOD,KAAK8C,SAAS4E,EAAI,EAGzC,IAAIC,EAAO9H,KAAKyH,WAAWrH,OAAOA,OAAO2H,wBACzC,MAAMC,EAAMJ,EAAEK,cAAc,GAAGC,MAAQJ,EAAKK,KACtCC,EAAMR,EAAEK,cAAc,GAAGI,MAAQP,EAAKQ,IAC5CtI,KAAK0H,SAAS,GAAKM,EACnBhI,KAAK0H,SAAS,GAAKU,EACnBpI,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAc+G,oBAAqB,EAC/DvI,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcgH,iBAAkB,EAE5DxI,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAciH,UAAUb,EAAEK,cAAc,GAAGS,QAASd,EAAEK,cAAc,GAAGU,QAAQ,EAE9G,KACMC,UAAahB,IAEhB,GAAGA,EAAEK,cAAcnF,OAAS,EAGxB,OAFA9C,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcqH,gBAAgBjB,QAC1D5H,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcsH,aAAalB,GAU3D5H,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcuH,UAAUnB,EAAEK,cAAc,GAAGS,QAASd,EAAEK,cAAc,GAAGU,QAAQ,EAE9G,KACMK,YAAepB,IAElB5H,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAc+G,oBAAqB,EAC/DvI,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcgH,iBAAkB,EAC5DZ,EAAEqB,gBAAgB,EACrB,KACMC,SAAYtB,IACf5H,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAc2H,SAAS,GAAI,EAAE,EAzCzDnJ,KAAKyH,WAAaA,CACtB,ECPG,MAAM2B,EAETtJ,YAAYK,GAAwB,KAD7BsH,gBAAU,OAIV4B,UAAazB,IAChB5H,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAciH,UAAUb,EAAEc,QAASd,EAAEe,QAAQ,EAC5E,KACMW,QAAW1B,IACd5H,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAc2H,QAAQvB,EAAEc,QAASd,EAAEe,QAAQ,EAC1E,KACMY,WAAa,CAAC3B,EAAe1H,KAChCF,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcgI,KAAK5B,EAAE6B,OAAO,EAC3D,KACMC,UAAa9B,IACZ5H,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcmI,OAC1C3J,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcuH,UAAUnB,EAAEc,QAASd,EAAEe,SAEjE3I,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcoI,UAAUhC,EAAEc,QAASd,EAAEe,QACrE,EAhBA3I,KAAKyH,WAAatH,CACtB,ECJG,MAAM0J,EAET/J,YAAY2H,GAA8B,KADnCA,gBAAU,OAIVqC,QAAWlC,IACd5H,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcuI,SAAWnC,EAAEoC,QAAQ,EAElE,KACMC,MAASrC,IACZ5H,KAAKyH,WAAWrH,OAAOD,KAAKqB,cAAcuI,SAAWnC,EAAEoC,QAAQ,EAP/DhK,KAAKyH,WAAaA,CACtB,ECAG,MAAMyC,EAKTpK,YAAYM,GAAiB,KAJtBA,YAAM,OACN+J,sBAAgB,OAChBC,sBAAgB,OAChBC,yBAAmB,OA8CnBC,aAAe,KAClBtK,KAAKI,OAAOD,KAAKJ,IAAIwK,IAAIxH,gBACzB/C,KAAKI,OAAOM,aAAa,EA9CzBV,KAAKI,OAASA,EAEdJ,KAAKmK,iBAAmB,IAAI3C,EAAiBxH,MAC7CA,KAAKoK,iBAAmB,IAAIhB,EAAiBpJ,MAC7CA,KAAKqK,oBAAsB,IAAIR,EAAoB7J,KACvD,CACOwK,cACH,MAAMC,EAAOzK,KAGb0K,SAASC,KAAKC,iBAAiB,UAAWH,EAAKJ,oBAAoBP,SAAS,GAC5EY,SAASC,KAAKC,iBAAiB,QAASH,EAAKJ,oBAAoBJ,OAAO,GAExES,SAASC,KAAKC,iBAAiB,YAAcH,EAAKL,iBAAiBf,WAAW,GAC9EqB,SAASC,KAAKC,iBAAiB,UAAYH,EAAKL,iBAAiBd,SAAS,GAC1EoB,SAASC,KAAKC,iBAAiB,YAAaH,EAAKL,iBAAiBV,WAAW,GAE7E1J,KAAKI,OAAOA,OAAOwK,iBAAiB,SAAUhD,GAAkB6C,EAAKL,iBAAiBb,WAAW3B,EAAGA,EAAE6B,UAAS,GAE/GiB,SAASC,KAAKC,iBAAiB,aAAaH,EAAKN,iBAAiBxC,YAAY,GAC9E+C,SAASC,KAAKC,iBAAiB,YAAaH,EAAKN,iBAAiBvB,WAAW,GAC7E8B,SAASC,KAAKC,iBAAiB,cAAcH,EAAKN,iBAAiBnB,aAAa,GAChF0B,SAASC,KAAKC,iBAAiB,WAAWH,EAAKN,iBAAiBjB,UAAU,GAE1E2B,OAAOD,iBAAiB,SAAUH,EAAKH,cAAc,EACzD,CACOQ,cACH,MAAML,EAAOzK,KAEb0K,SAASC,KAAKI,oBAAoB,UAAWN,EAAKJ,oBAAoBP,SAAS,GAC/EY,SAASC,KAAKI,oBAAoB,QAASN,EAAKJ,oBAAoBJ,OAAO,GAE3ES,SAASC,KAAKI,oBAAoB,YAAcN,EAAKL,iBAAiBf,WAAW,GACjFqB,SAASC,KAAKI,oBAAoB,UAAYN,EAAKL,iBAAiBd,SAAS,GAC7EoB,SAASC,KAAKI,oBAAoB,YAAaN,EAAKL,iBAAiBV,WAAW,GAGhFgB,SAASC,KAAKI,oBAAoB,aAAcN,EAAKN,iBAAiBxC,YAAY,GAClF+C,SAASC,KAAKI,oBAAoB,YAAaN,EAAKN,iBAAiBvB,WAAW,GAChF8B,SAASC,KAAKI,oBAAoB,cAAeN,EAAKN,iBAAiBnB,aAAa,GACpF0B,SAASC,KAAKI,oBAAoB,WAAYN,EAAKN,iBAAiBjB,UAAU,GAE9E2B,OAAOE,oBAAoB,SAAUN,EAAKH,cAAc,EAC5D,ECnDG,MAAMU,EAyBTlL,YAAYK,GAAc,KAxBnBA,UAAI,OACJ8K,qBAAe,OACf7K,YAAM,OACN2F,SAAG,OACHmF,UAAoB,EAAM,KAE1BC,SAAG,OACHC,gBAA0B,EAAM,KAChCC,QAAkB,EAAE,KACpBC,gBAA0B,EAAK,KAC/BC,SAAmB,EAAK,KAGxBC,uBAAiB,OACjBC,oBAAc,OACdC,eAAS,OACTC,YAAM,OACNC,YAAa,EAAM,KAEnBvL,qBAAkCwL,EAAAA,GAAAA,IAAa,KAC9CC,WAAa,GAAG,KAChBC,4BAA6B,EAAM,KAEnCC,YAAM,EAEVhM,KAAKG,KAAOA,EACZH,KAAK4L,YAAa,EAClB5L,KAAKiL,gBAAkB,IAAIf,EAAgBlK,MAC3CA,KAAKgM,OAAS,IAAIC,MAClBjM,KAAKgM,OAAOE,YAAc,YAG1BlM,KAAKmM,OACLnM,KAAKoM,UACT,CACQD,OACJ,MAAM/L,EAASsK,SAAS2B,cAAc,UAChCC,EAAkB5B,SAAS2B,cAAc,UACzCX,EAAYhB,SAAS2B,cAAc,UACzC,GAAIjM,GAAUkM,GAAmBZ,EAAW,CACxC1L,KAAKI,OAASA,EACdJ,KAAKI,OAAOmM,GAAK,eAEjBvM,KAAKI,OAAO0E,MAAQ9E,KAAKG,KAAKc,IAAIuL,YAClCxM,KAAKI,OAAO2E,OAAS/E,KAAKG,KAAKc,IAAIwL,aAInCzM,KAAKI,OAAOsM,MAAM5H,MAAQ,OAC1B9E,KAAKI,OAAOsM,MAAM3H,OAAS,OACvB/E,KAAK+L,6BACL/L,KAAKI,OAAOsM,MAAMC,WAAa,4EAEnC3M,KAAKG,KAAKc,IAAI2L,OAAO5M,KAAKI,QAE1BJ,KAAKwL,kBAAoBc,EACzBtM,KAAKwL,kBAAkBkB,MAAMG,OAAS,MACtC7M,KAAKyL,eAAiBzL,KAAKwL,kBAAkBsB,WAAW,MAGxD9M,KAAK0L,UAAYA,EACjB1L,KAAK2L,OAAS3L,KAAK0L,UAAUoB,WAAW,MAExC,MAAM/G,EAAM/F,KAAKI,OAAO0M,WAAW,MAC/B/G,IACA/F,KAAK+F,IAAMA,EACX/F,KAAKkL,UAAW,EAChBlL,KAAK+M,YAEb,CACJ,CACOA,YACH/M,KAAKiL,gBAAgBT,aACzB,CACO7D,UAMH,OAHA3G,KAAKgM,OAAOgB,IAAMhN,KAAKwL,kBAAkByB,UAAU,SAAD,OAAUjN,KAAKK,sBAAwB,IAGlFL,KAAKgM,MAChB,CACOnF,qBACH,OAAO7G,KAAKyL,cAChB,CACO7E,aACH,OAAO5G,KAAK2L,MAChB,CACQS,WACJpM,KAAKsL,gBAAiB,EACtBtL,KAAKkN,MACT,CACOC,SACHnN,KAAKI,OAAO0E,MAAQ9E,KAAKG,KAAKc,IAAIuL,YAClCxM,KAAKI,OAAO2E,OAAS/E,KAAKG,KAAKc,IAAIwL,YACvC,CACOS,OACH,GAAKlN,KAAKsL,iBACV8B,uBAAsB,KAAQpN,KAAKkN,MAAM,IAErClN,KAAKqL,UAAY,KACbrL,KAAKqL,UAAYrL,KAAK8L,YAAY,CAClC,IAAIuB,EAASC,YAAYC,MACzBvN,KAAKwN,UAAUxN,KAAK+F,KACpB,IAAI0H,EAAQH,YAAYC,MACxBvN,KAAKmL,IAAG,iCAA6BnL,KAAKqL,UAAS,mCAA2BoC,EAAQJ,GAAQK,QAAQ,GAAE,kBAE5G,CAER,CACOC,MAAMC,GACTA,EAAQC,UAAU,EAAG,EAAG7N,KAAK+F,IAAI3F,OAAO0E,MAAO9E,KAAK+F,IAAI3F,OAAO2E,OACnE,CACO+I,oBAAoBF,GACnB5N,KAAKK,qBAAyBwL,EAAAA,GAAAA,IAqBtC,CACOnL,cAIHV,KAAKqL,QAAU,CAEnB,CACOmC,UAAUI,GACR5N,KAAKkL,WACVlL,KAAK2N,MAAMC,GACX5N,KAAK8N,oBAAoBF,GACzB5N,KAAK+N,OAAOH,GAChB,CACOG,OAAOhI,GAIV,CAGGnF,UACHZ,KAAKsL,gBAAiB,EACtBtL,KAAKqL,QAAUrL,KAAK8L,WACpB9L,KAAKiL,gBAAgBH,cACrB,IACI9K,KAAKG,KAAKc,IAAID,YAAYhB,KAAKI,OAE/B,CADF,MAAOc,GACL,CAGR,ECxKG,MAAM8M,EAETlO,YAAYK,GAAa,KADlBA,UAAI,EAEPH,KAAKG,KAAOA,CAChB,CACO4B,OACHZ,QAAQgK,IAAI,OAChB,CACOlJ,OACHd,QAAQgK,IAAI,OAEhB,CACO8C,OAAOC,GACVlO,KAAKyE,OACT,CACOA,QACHzE,KAAKG,KAAKsE,OACd,CACO0J,eACCnO,KAAKG,KAAK6C,MAAMoL,SAEiB,IAA7BpO,KAAKG,KAAK6C,MAAMqL,QAChBrO,KAAKG,KAAKqB,cAAc8M,aAAaC,WACF,IAA5BvO,KAAKG,KAAK6C,MAAMqL,SAA6C,IAA5BrO,KAAKG,KAAK6C,MAAMqL,QACxDrO,KAAKG,KAAKqB,cAAc8M,aAAaE,kBACF,IAA5BxO,KAAKG,KAAK6C,MAAMqL,SAA6C,IAA5BrO,KAAKG,KAAK6C,MAAMqL,QACxDrO,KAAKG,KAAKqB,cAAc8M,aAAaG,kBACF,IAA5BzO,KAAKG,KAAK6C,MAAMqL,SAA6C,IAA5BrO,KAAKG,KAAK6C,MAAMqL,QACxDrO,KAAKG,KAAKqB,cAAc8M,aAAaI,gBACF,IAA5B1O,KAAKG,KAAK6C,MAAMqL,SAA6C,IAA5BrO,KAAKG,KAAK6C,MAAMqL,SACxDrO,KAAKG,KAAKqB,cAAc8M,aAAaK,gBAGzC3O,KAAKG,KAAKqB,cAAc8M,aAAaM,SAE7C,CACOC,mBAAmB3O,GAClBA,EAAIF,KAAKG,KAAK6C,MAAM8L,SACpB9O,KAAKG,KAAK6C,MAAM8B,MAAQ9E,KAAKG,KAAK6C,MAAM8L,SACjC5O,EAAIF,KAAKG,KAAK6C,MAAM4B,EAAI5E,KAAKG,KAAK4O,aAAaC,IAAIlK,MAC1D9E,KAAKG,KAAK6C,MAAM8B,MAAQ9E,KAAKG,KAAK4O,aAAaC,IAAIlK,MAAQ9E,KAAKG,KAAK6C,MAAM4B,EAE3E5E,KAAKG,KAAK6C,MAAM8B,MAAQ5E,EAE5BF,KAAKiP,uBACT,CACOC,oBAAoBhP,GACnBA,EAAIF,KAAKG,KAAK6C,MAAMmM,UACpBnP,KAAKG,KAAK6C,MAAM+B,OAAS/E,KAAKG,KAAK6C,MAAMmM,UAClCjP,EAAIF,KAAKG,KAAK6C,MAAM6B,EAAI7E,KAAKG,KAAK4O,aAAaC,IAAIjK,OAC1D/E,KAAKG,KAAK6C,MAAM+B,OAAS/E,KAAKG,KAAK4O,aAAaC,IAAIjK,OAAS/E,KAAKG,KAAK6C,MAAM6B,EAE7E7E,KAAKG,KAAK6C,MAAM+B,OAAS7E,EAE7BF,KAAKiP,uBACT,CACQA,wBACJjP,KAAKG,KAAK6C,MAAMoC,SAChBpF,KAAKG,KAAKC,OAAOM,cACjBV,KAAKG,KAAKC,OAAOoL,kBAAkB1G,MAAQ9E,KAAKG,KAAK6C,MAAM8B,MAC3D9E,KAAKG,KAAKC,OAAOoL,kBAAkBzG,OAAS/E,KAAKG,KAAK6C,MAAM+B,MAChE,CACOqK,cAAclP,GAGkB,IAA/BF,KAAKG,KAAK6C,MAAMqM,YAAmD,IAA/BrP,KAAKG,KAAK6C,MAAMqM,YAAmD,IAA/BrP,KAAKG,KAAK6C,MAAMqM,aACxFnP,IAAM,GAGVF,KAAKG,KAAK6C,MAAMsM,mBAAmBtP,KAAKG,KAAK6C,MAAMqM,WAAYnP,EAAGA,EACtE,CACOgE,OAAOhE,GACVF,KAAKG,KAAKqB,cAAc+N,eAAiBrP,EACzCF,KAAKwP,YACT,CACOxL,iBAAiBD,GACpB/D,KAAKG,KAAKqB,cAAc+N,iBAAkBE,EAAAA,EAAAA,IAAU1L,GACpD/D,KAAKwP,YACT,CACOpL,MAAMlE,GACTF,KAAKG,KAAKqB,cAAckO,UAAYxP,EACpCF,KAAKwP,YACT,CACOjL,aAAaD,GAGhBA,GADAA,GADAA,GAAStE,KAAKG,KAAKqB,cAAckO,WACjB,IAAO,IAAOpL,GACd,KAAO,KAAOA,EAC9BtE,KAAKG,KAAKqB,cAAckO,UAAYpL,EACpCtE,KAAKwP,YACT,CACOG,cAAcX,GAEjB,MAAMY,EAAIlF,SAAS2B,cAAc,KAE7BuD,EAAEC,KADFb,EACSA,EAAIhC,IAEJhN,KAAKG,KAAKC,OAAOoL,kBAAkByB,YAEhD2C,EAAEE,SAAW,YACbpF,SAASC,KAAKoF,YAAYH,GAC1BA,EAAEI,QACFtF,SAASC,KAAK3J,YAAY4O,EAC9B,CACOJ,aACHxP,KAAKG,KAAKsC,OAAOwN,YAAc,EAC/BjQ,KAAKG,KAAKsC,OAAO2C,QAAO,GAAO,GAC/BpF,KAAKG,KAAKC,OAAOM,aACrB,CACOgD,eACH1D,KAAKG,KAAKM,MAAMiD,cACpB,EC9GG,MAAMwM,EAwBTpQ,YAAYK,GAAa,KAvBlBA,UAAI,OACJmO,kBAAY,OAEZ3E,QAAS,EAAM,KACfwG,QAAS,EAAM,KAEfC,SAAW,CAAC,EAAG,GAAG,KAClBC,MAAQ,CAAC,EAAG,GAAG,KACfC,gBAAkB,CAAC,EAAG,GAAG,KACzBC,oBAAc,OACdb,UAAoB,EAAE,KACtBH,eAAyB,EAAE,KAI3BiB,SAAW,EAAE,KACbC,SAAW,EAAE,KACblI,oBAAqB,EAAM,KAC3BC,iBAAkB,EAAM,KACxBuB,UAAW,EAAM,KACjB2G,SAAU,EAAM,KACfC,wBAA0B,GAAG,KA4F9BC,cAAgB,CAAChM,EAAWC,KAG/B7E,KAAKG,KAAK6C,MAAM6N,UAAU7Q,KAAKqQ,MAAM,GAAIrQ,KAAKqQ,MAAM,IAapDrQ,KAAKoQ,SAAS,GAAKpQ,KAAKqQ,MAAM,GAC9BrQ,KAAKoQ,SAAS,GAAKpQ,KAAKqQ,MAAM,EAAE,EAEnC,KACMS,aAAe,CAAClM,EAAWC,KAC9B7E,KAAK+Q,IAAI/Q,KAAKqQ,MAAM,GAAIrQ,KAAKqQ,MAAM,GAAG,EA9GtCrQ,KAAKG,KAAOA,EACZH,KAAKsO,aAAe,IAAI0C,EAAAA,EAC5B,CACOC,SAASC,EAAgBC,GAC5B,MAAO,CAAED,EAASlR,KAAKG,KAAKqB,cAAc8O,gBAAgB,GAAIa,EAASnR,KAAKG,KAAKqB,cAAc8O,gBAAgB,GACnH,CACOc,iBAAiBxM,EAAWC,GAC/B7E,KAAKuQ,eAAiBvQ,KAAKG,KAAKC,OAAOA,OAAO2H,wBAE9C/H,KAAKsQ,gBAAgB,GAAKtQ,KAAKG,KAAK4O,aAAaC,IAAIlK,MAAQ9E,KAAKuQ,eAAezL,MAEjF9E,KAAKsQ,gBAAgB,GAAKtQ,KAAKG,KAAK4O,aAAaC,IAAIjK,OAAS/E,KAAKuQ,eAAexL,OAElF/E,KAAKqQ,MAAM,IAAMzL,EAAI5E,KAAKuQ,eAAepI,MAAQnI,KAAKG,KAAK4O,aAAaC,IAAIlK,MAAQ9E,KAAKuQ,eAAezL,MACxG9E,KAAKqQ,MAAM,IAAMxL,EAAI7E,KAAKuQ,eAAejI,KAAOtI,KAAKG,KAAK4O,aAAaC,IAAIjK,OAAS/E,KAAKuQ,eAAexL,OAOnGF,EAAI7E,KAAKuQ,eAAejI,IAAMtI,KAAK2Q,uBACpC3Q,KAAK0Q,SAAU,EAEf1Q,KAAK0Q,SAAU,CAIvB,CACOjI,UAAU7D,EAAWC,GACxB7E,KAAKoR,iBAAiBxM,EAAGC,GACzB7E,KAAK2J,QAAS,EACd3J,KAAKG,KAAK6C,MAAMqO,aAAarR,KAAKqQ,MAAM,GAAIrQ,KAAKqQ,MAAM,IACvDrQ,KAAKG,KAAK6C,MAAMsO,eAChBtR,KAAKoQ,SAAS,GAAKpQ,KAAKqQ,MAAM,GAC9BrQ,KAAKoQ,SAAS,GAAKpQ,KAAKqQ,MAAM,GAE9BrQ,KAAKG,KAAKsD,OAAO+L,YACrB,CACOrG,QAAQvE,EAAWC,GACtB7E,KAAKoR,iBAAiBxM,EAAGC,GACzB7E,KAAKmQ,QAAS,EACdnQ,KAAK2J,QAAS,EACd3J,KAAKG,KAAK6C,MAAMsG,UAChBtJ,KAAKG,KAAKsD,OAAO+L,aAKbxP,KAAKG,KAAK6C,MAAMuO,YAChBvR,KAAKG,KAAKsD,OAAOC,eACjB1D,KAAKG,KAAK8C,SAASO,gBAE3B,CASOoG,UAAUhF,EAAWC,GACxB7E,KAAKoR,iBAAiBxM,EAAGC,GAEzB7E,KAAKG,KAAK6C,MAAMqO,aAAarR,KAAKqQ,MAAM,GAAIrQ,KAAKqQ,MAAM,IAEvDrQ,KAAKoQ,SAAS,GAAKpQ,KAAKqQ,MAAM,GAC9BrQ,KAAKoQ,SAAS,GAAKpQ,KAAKqQ,MAAM,GAE9BrQ,KAAKG,KAAKsD,OAAO0K,eAEjBnO,KAAKG,KAAKsD,OAAO+L,YACrB,CACOzG,UAAUnE,EAAWC,GACxB7E,KAAKmQ,QAAS,EACdnQ,KAAKoR,iBAAiBxM,EAAGC,GAIrB7E,KAAKG,KAAK6C,MAAMoL,QAChBpO,KAAK4Q,cAAc5Q,KAAKqQ,MAAM,GAAIrQ,KAAKqQ,MAAM,IAE7CrQ,KAAK8Q,aAAa9Q,KAAKqQ,MAAM,GAAIrQ,KAAKqQ,MAAM,IAIhDrQ,KAAKG,KAAKsD,OAAO+L,YACrB,CAwBOhG,KAAKtJ,GAWZ,CAMO6Q,IAAInM,EAAWC,GAMlB,CAEG1C,mBACHnC,KAAKG,KAAK8C,SAASO,gBACnBxD,KAAKG,KAAK6C,MAAMb,mBAChBnC,KAAKG,KAAKC,OAAOuG,SACrB,CACOb,wBACH9F,KAAKG,KAAK8C,SAASuO,gBACvB,CACO3I,gBAAgBjB,GAGnB,IAAI6J,EACAC,EAHJ1R,KAAKG,KAAKC,OAAOM,cAIbkH,EAAEK,cAAc,GAAGU,QAAUf,EAAEK,cAAc,GAAGU,SAChD8I,EAAK7J,EAAEK,cAAc,GACrByJ,EAAK9J,EAAEK,cAAc,KAErBwJ,EAAK7J,EAAEK,cAAc,GACrByJ,EAAK9J,EAAEK,cAAc,IAGzB,MAAM0J,EAAQC,KAAKC,MAAMH,EAAGhJ,QAAU+I,EAAG/I,QAASgJ,EAAG/I,QAAU8I,EAAG9I,SAC5DmJ,EAAY9R,KAAKyQ,SAAWkB,EAGlC,GAAI3R,KAAKuI,mBAIL,OAHAvI,KAAKyQ,SAAWzQ,KAAKuP,eACrBvP,KAAKuI,oBAAqB,OAC1BvI,KAAKyQ,SAAWkB,GAIpB3R,KAAKuP,gBAAkBuC,EACvB9R,KAAKyQ,SAAWkB,CACpB,CACO7I,aAAalB,GAGhB,IAAI6J,EACAC,EAHJ1R,KAAKG,KAAKC,OAAOM,cAIbkH,EAAEK,cAAc,GAAGU,QAAUf,EAAEK,cAAc,GAAGU,SAChD8I,EAAK7J,EAAEK,cAAc,GACrByJ,EAAK9J,EAAEK,cAAc,KAErBwJ,EAAK7J,EAAEK,cAAc,GACrByJ,EAAK9J,EAAEK,cAAc,IAGzB,MAAM8J,EAAWH,KAAKI,MACjBN,EAAGhJ,QAAU+I,EAAG/I,UAAYgJ,EAAGhJ,QAAU+I,EAAG/I,UAC5CgJ,EAAG/I,QAAU8I,EAAG9I,UAAY+I,EAAG/I,QAAU8I,EAAG9I,UAgBjD,GAbI3I,KAAKwQ,SAAWuB,EACZ/R,KAAK0P,UAAY,KACjB1P,KAAK0P,WAAa,MAGlB1P,KAAK0P,UAAY,IACjB1P,KAAK0P,WAAa,MAOtB1P,KAAKwI,gBAIL,OAHAxI,KAAKwQ,SAAWxQ,KAAK0P,UACrB1P,KAAKwI,iBAAkB,OACvBxI,KAAKwQ,SAAWuB,GAQpB/R,KAAKwQ,SAAWuB,CACpB,CACOtL,oBACH,MAAO,CACH7B,EAAGgN,KAAKK,MAAMjS,KAAKG,KAAK6C,MAAM4B,GAC9BC,EAAG+M,KAAKK,MAAMjS,KAAKG,KAAK6C,MAAM6B,GAC9BC,MAAQ8M,KAAKK,MAAMjS,KAAKG,KAAK6C,MAAM8B,OACnCC,OAAQ6M,KAAKK,MAAMjS,KAAKG,KAAK6C,MAAM+B,QACnCX,MAAOpE,KAAKG,KAAKqB,cAAckO,UAC/BH,eAAgBvP,KAAKG,KAAKqB,cAAc+N,eACxC2C,MAAOlS,KAAKG,KAAK6C,MAAMO,eACvB4O,YAAanS,KAAKG,KAAK6C,MAAMY,eAErC,CACOwO,kBACH,OAAOpS,KAAKG,KAAKsC,OAAOoD,SAC5B,CACOlE,iBACH,MAAM4D,EAAO,CACT,KAAQvF,KAAKyG,oBACb,OAAUzG,KAAKoS,mBAEnBpS,KAAKG,KAAKJ,IAAIsB,WAAW,UAAD,OAAWgR,KAAKC,UAAU/M,IACtD,CACOgN,oBAAoBhN,GACvB,MAAMiN,EAAO,kBAAcH,KAAKC,UAAU/M,IAC1CvF,KAAKG,KAAKJ,IAAIsB,WAAWmR,EAC7B,CACOhQ,aAAaD,GAAqC,IAA7BI,IAAmB,yDAC3C3C,KAAKG,KAAKsC,OAAOD,aAAaD,EAAGI,EACrC,CACOrB,kBAAkBC,GACL,WAAZA,GACAvB,KAAKG,KAAKM,MAAMgS,aAEpBzS,KAAKG,KAAKsC,OAAOnB,oBACjBtB,KAAKG,KAAK6C,MAAMC,SAASyP,MAAO,EAChC1S,KAAKG,KAAKJ,IAAIsB,WAAW,eAC7B,CACOI,sBACHzB,KAAKG,KAAKM,MAAMgS,aAChBzS,KAAKG,KAAKsC,OAAOhB,sBACjBzB,KAAKG,KAAK6C,MAAMC,SAASyP,MAAO,EAGhC1S,KAAKG,KAAKJ,IAAIsB,WAAW,aAC7B,EC7RG,MAAMsR,EAoBT7S,YAAYmD,GAAqB,KAnB1BA,cAAQ,OACP2P,qBAAe,OACfC,qBAAe,OACfC,qBAAe,OACfC,qBAAe,OAEfC,qBAAe,OACfC,qBAAe,OACfC,qBAAe,OACfC,qBAAe,OAEfC,kBAAY,OACZC,YAAM,OAENC,YAAM,OACNC,YAAM,OACNC,YAAM,OACNC,YAAM,EAGVzT,KAAKiD,SAAWA,EAGhBjD,KAAKoT,aAAe1I,SAASgJ,gBAAgB,6BAA8B,OAC3E1T,KAAKoT,aAAaO,aAAa,QAAQ,GAAD,OAAK,MAC3C3T,KAAKoT,aAAaO,aAAa,SAAS,GAAD,OAAK,MAC5C3T,KAAKoT,aAAaO,aAAa,eAAe,GAAD,OAAK,IAClD3T,KAAKoT,aAAa1G,MAAMkH,SAAW,WACnC5T,KAAKiD,SAASD,MAAM7C,KAAKc,IAAI8O,YAAY/P,KAAKoT,cAE9C,MAAMS,EAAc,UACd/L,EAAO4C,SAASgJ,gBAAgB,6BAA8B,QACpE5L,EAAK6L,aAAa,IAAI,KACtB7L,EAAK6L,aAAa,IAAI,KACtB7L,EAAK6L,aAAa,eAAe,GAAD,OAZZ,IAapB7L,EAAK6L,aAAa,SAAS,GAAD,OAAKE,IAC/B7T,KAAKqT,OAASvL,EACd9H,KAAKoT,aAAarD,YAAYjI,GAG9B9H,KAAKsT,OAAS5I,SAASgJ,gBAAgB,6BAA8B,QACrE1T,KAAKsT,OAAOK,aAAa,eAAe,GAAD,OAnBnB,IAoBpB3T,KAAKsT,OAAOK,aAAa,SAAS,GAAD,OAAKE,IACtC7T,KAAKoT,aAAarD,YAAY/P,KAAKsT,QAEnCtT,KAAKuT,OAAS7I,SAASgJ,gBAAgB,6BAA8B,QACrE1T,KAAKuT,OAAOI,aAAa,eAAe,GAAD,OAxBnB,IAyBpB3T,KAAKuT,OAAOI,aAAa,SAAS,GAAD,OAAKE,IACtC7T,KAAKoT,aAAarD,YAAY/P,KAAKuT,QAEnCvT,KAAKwT,OAAS9I,SAASgJ,gBAAgB,6BAA8B,QACrE1T,KAAKwT,OAAOG,aAAa,eAAe,GAAD,OA7BnB,IA8BpB3T,KAAKwT,OAAOG,aAAa,SAAS,GAAD,OAAKE,IACtC7T,KAAKoT,aAAarD,YAAY/P,KAAKwT,QAEnCxT,KAAKyT,OAAS/I,SAASgJ,gBAAgB,6BAA8B,QACrE1T,KAAKyT,OAAOE,aAAa,eAAe,GAAD,OAlCnB,IAmCpB3T,KAAKyT,OAAOE,aAAa,SAAS,GAAD,OAAKE,IACtC7T,KAAKoT,aAAarD,YAAY/P,KAAKyT,QAInCzT,KAAK4S,iBAAkBkB,EAAAA,EAAAA,MACvB9T,KAAKiD,SAASD,MAAM7C,KAAKc,IAAI8O,YAAY/P,KAAK4S,iBAE9C5S,KAAK6S,iBAAkBiB,EAAAA,EAAAA,MACvB9T,KAAKiD,SAASD,MAAM7C,KAAKc,IAAI8O,YAAY/P,KAAK6S,iBAE9C7S,KAAK8S,iBAAkBgB,EAAAA,EAAAA,MACvB9T,KAAKiD,SAASD,MAAM7C,KAAKc,IAAI8O,YAAY/P,KAAK8S,iBAE9C9S,KAAK+S,iBAAkBe,EAAAA,EAAAA,MACvB9T,KAAKiD,SAASD,MAAM7C,KAAKc,IAAI8O,YAAY/P,KAAK+S,iBAG9C/S,KAAKgT,iBAAkBc,EAAAA,EAAAA,IAAW,EAAG,IACrC9T,KAAKiD,SAASD,MAAM7C,KAAKc,IAAI8O,YAAY/P,KAAKgT,iBAE9ChT,KAAKiT,iBAAkBa,EAAAA,EAAAA,IAAW,IAClC9T,KAAKiD,SAASD,MAAM7C,KAAKc,IAAI8O,YAAY/P,KAAKiT,iBAE9CjT,KAAKkT,iBAAkBY,EAAAA,EAAAA,IAAW,EAAG,IACrC9T,KAAKiD,SAASD,MAAM7C,KAAKc,IAAI8O,YAAY/P,KAAKkT,iBAE9ClT,KAAKmT,iBAAkBW,EAAAA,EAAAA,IAAW,IAClC9T,KAAKiD,SAASD,MAAM7C,KAAKc,IAAI8O,YAAY/P,KAAKmT,gBAClD,CACOY,YACH,IAAK/T,KAAKiD,SAASD,MAAM7C,KAAKC,SAAWJ,KAAKiD,SAASD,MAAM7C,KAAKC,OAAO2F,IAAO,OAChF,MAAMA,EAAM/F,KAAKiD,SAASD,MAAM7C,KAAKC,OAAO2F,IAC5C,QAAiCiO,IAA7BjO,EAAI3F,OAAO6T,cAAgC,OAC/C,QAA+CD,IAA3CjO,EAAI3F,OAAO6T,cAAcA,cAAgC,OAE7D,MAAMC,EAAwBnO,EAAI3F,OAAO2H,wBACnCoM,EAAeD,EAAsBnP,OAGrCG,EADYa,EAAI3F,OAAO6T,cAAcA,cAAcA,cAAcA,cAAclM,wBAAwBhD,OACnFoP,EAE1B,IAAIC,EAAgB,EAChBlP,EAAQ,IACRkP,EAAwB,GAARlP,GAYpB,MAAMmP,GAAQ,GACRC,GAAQ,EAAIF,EAOlBpU,KAAK4S,gBAAgBlG,MAAMvE,KAAO+L,EAAsBtP,EAAIyP,EAAQrU,KAAKiD,SAASD,MAAM4B,EAAIsP,EAAsBpP,MAAQiB,EAAI3F,OAAO0E,MAAS,EAAI,KAElJ9E,KAAK4S,gBAAgBlG,MAAMpE,IAAMgM,EAAQtU,KAAKiD,SAASD,MAAM6B,EAAIqP,EAAsBnP,OAASgB,EAAI3F,OAAO2E,OAAU,KAErH/E,KAAK6S,gBAAgBnG,MAAMvE,KAAO+L,EAAsBtP,EAAIyP,GAASrU,KAAKiD,SAASD,MAAM4B,EAAI5E,KAAKiD,SAASD,MAAM8B,OAASoP,EAAsBpP,MAAQiB,EAAI3F,OAAO0E,MAAS,KAE5K9E,KAAK6S,gBAAgBnG,MAAMpE,IAAMgM,EAAQtU,KAAKiD,SAASD,MAAM6B,EAAIqP,EAAsBnP,OAASgB,EAAI3F,OAAO2E,OAAU,KAErH/E,KAAK8S,gBAAgBpG,MAAMvE,KAAO+L,EAAsBtP,EAAIyP,GAASrU,KAAKiD,SAASD,MAAM4B,EAAI5E,KAAKiD,SAASD,MAAM8B,OAASoP,EAAsBpP,MAAQiB,EAAI3F,OAAO0E,MAAS,KAE5K9E,KAAK8S,gBAAgBpG,MAAMpE,IAAOgM,GAAStU,KAAKiD,SAASD,MAAM6B,EAAI7E,KAAKiD,SAASD,MAAM+B,QAAUmP,EAAsBnP,OAASgB,EAAI3F,OAAO2E,OAAU,KAErJ/E,KAAK+S,gBAAgBrG,MAAMvE,KAAO+L,EAAsBtP,EAAIyP,EAAQrU,KAAKiD,SAASD,MAAM4B,EAAIsP,EAAsBpP,MAAQiB,EAAI3F,OAAO0E,MAAS,EAAI,KAElJ9E,KAAK+S,gBAAgBrG,MAAMpE,IAAOgM,GAAStU,KAAKiD,SAASD,MAAM6B,EAAI7E,KAAKiD,SAASD,MAAM+B,QAAUmP,EAAsBnP,OAASgB,EAAI3F,OAAO2E,OAAU,KAIrJ/E,KAAKgT,gBAAgBtG,MAAMvE,KAAO+L,EAAsBtP,EAAIyP,EAAQrU,KAAKiD,SAASD,MAAM4B,EAAIsP,EAAsBpP,MAAQiB,EAAI3F,OAAO0E,MAAS,EAAI,KAElJ9E,KAAKgT,gBAAgBtG,MAAMpE,KAxBR,EAwB4BiM,SAASvU,KAAK4S,gBAAgBlG,MAAMpE,KAAgG,IAAvFiM,SAASvU,KAAK8S,gBAAgBpG,MAAMpE,KAAOiM,SAASvU,KAAK4S,gBAAgBlG,MAAMpE,MAAc,KAEzLtI,KAAKiT,gBAAgBvG,MAAMvE,KAAqH,IAAzFoM,SAASvU,KAAK4S,gBAAgBlG,MAAMvE,MAAQoM,SAASvU,KAAK8S,gBAAgBpG,MAAMvE,OAArGkM,EAAoH,KAEtJrU,KAAKiT,gBAAgBvG,MAAMpE,IAAOgM,EAAQtU,KAAKiD,SAASD,MAAM6B,EAAIqP,EAAsBnP,OAASgB,EAAI3F,OAAO2E,OAAU,KAGtH/E,KAAKkT,gBAAgBxG,MAAMvE,KAAO+L,EAAsBtP,EAAIyP,GAASrU,KAAKiD,SAASD,MAAM4B,EAAI5E,KAAKiD,SAASD,MAAM8B,OAASoP,EAAsBpP,MAAQiB,EAAI3F,OAAO0E,MAAS,KAE5K9E,KAAKkT,gBAAgBxG,MAAMpE,KAjCR,EAiC4BiM,SAASvU,KAAK4S,gBAAgBlG,MAAMpE,KAAgG,IAAvFiM,SAASvU,KAAK8S,gBAAgBpG,MAAMpE,KAAOiM,SAASvU,KAAK4S,gBAAgBlG,MAAMpE,MAAc,KAEzLtI,KAAKmT,gBAAgBzG,MAAMvE,KAAqH,IAAzFoM,SAASvU,KAAK4S,gBAAgBlG,MAAMvE,MAAQoM,SAASvU,KAAK8S,gBAAgBpG,MAAMvE,OAArGkM,EAAoH,KAEtJrU,KAAKmT,gBAAgBzG,MAAMpE,IAAOgM,GAAStU,KAAKiD,SAASD,MAAM6B,EAAI7E,KAAKiD,SAASD,MAAM+B,QAAUmP,EAAsBnP,OAASgB,EAAI3F,OAAO2E,OAAU,KAMrJ/E,KAAKoT,aAAa1G,MAAMvE,KAAOoM,SAASvU,KAAK4S,gBAAgBlG,MAAMvE,MAHhD,EAGqE,KACxFnI,KAAKoT,aAAa1G,MAAMpE,IAAMiM,SAASvU,KAAK4S,gBAAgBlG,MAAMpE,KAJ/C,EAImE,EAAI,KAC1FtI,KAAKoT,aAAa1G,MAAM5H,MAAQyP,SAASvU,KAAK6S,gBAAgBnG,MAAMvE,MAAQoM,SAASvU,KAAKoT,aAAa1G,MAAMvE,MAL1F,EAK+G,EAAI,KACtInI,KAAKoT,aAAa1G,MAAM3H,OAASwP,SAASvU,KAAK8S,gBAAgBpG,MAAMpE,KAAOiM,SAASvU,KAAKoT,aAAa1G,MAAMpE,KAN1F,EAM8G,EAAI,KAGrItI,KAAKqT,OAAO3G,MAAM5H,MAAQyP,SAASvU,KAAK6S,gBAAgBnG,MAAMvE,MAAQoM,SAASvU,KAAKoT,aAAa1G,MAAMvE,MATpF,EASyG,KAC5HnI,KAAKqT,OAAO3G,MAAM3H,OAASwP,SAASvU,KAAK8S,gBAAgBpG,MAAMpE,KAAOiM,SAASvU,KAAKoT,aAAa1G,MAAMpE,KAVpF,EAUwG,KAG3HtI,KAAKsT,OAAOK,aAAa,KAAK,KAC9B3T,KAAKsT,OAAOK,aAAa,KAAK,GAAD,OAAgD,IAA3CY,SAASvU,KAAKoT,aAAa1G,MAAM3H,UACnE/E,KAAKsT,OAAOK,aAAa,KAAK,GAAD,OAAKY,SAASvU,KAAKoT,aAAa1G,MAAM5H,SACnE9E,KAAKsT,OAAOK,aAAa,KAAK,GAAD,OAAgD,IAA3CY,SAASvU,KAAKoT,aAAa1G,MAAM3H,QAAiB,IAEpF/E,KAAKuT,OAAOI,aAAa,KAAK,KAC9B3T,KAAKuT,OAAOI,aAAa,KAAK,GAAD,OAAgD,IAA3CY,SAASvU,KAAKoT,aAAa1G,MAAM3H,UACnE/E,KAAKuT,OAAOI,aAAa,KAAK,GAAD,OAAKY,SAASvU,KAAKoT,aAAa1G,MAAM5H,SACnE9E,KAAKuT,OAAOI,aAAa,KAAK,GAAD,OAAgD,IAA3CY,SAASvU,KAAKoT,aAAa1G,MAAM3H,QAAiB,IAEpF/E,KAAKwT,OAAOG,aAAa,KAAK,GAAD,OAA+C,IAA1CY,SAASvU,KAAKoT,aAAa1G,MAAM5H,SACnE9E,KAAKwT,OAAOG,aAAa,KAAK,KAC9B3T,KAAKwT,OAAOG,aAAa,KAAK,GAAD,OAA+C,IAA1CY,SAASvU,KAAKoT,aAAa1G,MAAM5H,SACnE9E,KAAKwT,OAAOG,aAAa,KAAK,GAAD,OAAKY,SAASvU,KAAKoT,aAAa1G,MAAM3H,QAAU,IAE7E/E,KAAKyT,OAAOE,aAAa,KAAK,GAAD,OAA+C,IAA1CY,SAASvU,KAAKoT,aAAa1G,MAAM5H,SACnE9E,KAAKyT,OAAOE,aAAa,KAAK,KAC9B3T,KAAKyT,OAAOE,aAAa,KAAK,GAAD,OAA+C,IAA1CY,SAASvU,KAAKoT,aAAa1G,MAAM5H,SACnE9E,KAAKyT,OAAOE,aAAa,KAAK,GAAD,OAAKY,SAASvU,KAAKoT,aAAa1G,MAAM3H,QAAU,GACjF,CACW2N,SAAKxS,GACZ,MAAMsU,GAAc,IAANtU,EAAa,OAAS,QAEpCF,KAAK4S,gBAAgBlG,MAAM+H,QAAUD,EACrCxU,KAAK6S,gBAAgBnG,MAAM+H,QAAUD,EACrCxU,KAAK8S,gBAAgBpG,MAAM+H,QAAUD,EACrCxU,KAAK+S,gBAAgBrG,MAAM+H,QAAUD,EACrCxU,KAAKgT,gBAAgBtG,MAAM+H,QAAUD,EACrCxU,KAAKiT,gBAAgBvG,MAAM+H,QAAUD,EACrCxU,KAAKkT,gBAAgBxG,MAAM+H,QAAUD,EACrCxU,KAAKmT,gBAAgBzG,MAAM+H,QAAUD,EAErCxU,KAAKqT,OAAO3G,MAAM+H,QAAUD,EAC5BxU,KAAKsT,OAAO5G,MAAM+H,QAAUD,EAC5BxU,KAAKuT,OAAO7G,MAAM+H,QAAUD,EAC5BxU,KAAKwT,OAAO9G,MAAM+H,QAAUD,EAC5BxU,KAAKyT,OAAO/G,MAAM+H,QAAUD,CAEhC,EC9MG,MAAME,EAmBT5U,YAAYkD,GAAe,KAlBpBA,WAAK,OAEJ2R,SAAW,EAAI,KAChBC,MAAQ,EAAI,KACXC,MAAQ,EAAE,KAGVC,kBAAoB,GAAG,KAEvBC,WAAa,CAAC,IAAK,IAAK,IAAK,GAAK,KAClCC,gBAAkB,CAAC,IAAK,IAAK,IAAK,IAAK,KAEvCC,WAAqB,EAAE,KACvBC,cAAwB,EAAE,KAC1BC,iBAAW,OACXjK,UAAoB,EAAM,KAC1BkK,eAAyB,EAG7BpV,KAAKgD,MAAQA,CAMjB,CACOqS,WACErV,KAAKkL,WACNlL,KAAKmV,YAAc,IAAIxC,EAAY3S,MAC/BA,KAAKoV,gBACLpV,KAAKmV,YAAYzC,MAAO,IAGhC1S,KAAKkL,UAAW,CACpB,CACIoK,gBACA,OAAOtV,KAAKiV,UAChB,CACIM,mBACA,OAAOvV,KAAKkV,aAChB,CACO3N,cAAciO,EAAWC,EAAWC,GAEvC1V,KAAK+U,WAAW,GAAKS,EACrBxV,KAAK+U,WAAW,GAAKU,EACrBzV,KAAK+U,WAAW,GAAKW,EAErB1V,KAAKgV,gBAAgB,GAAKQ,EAC1BxV,KAAKgV,gBAAgB,GAAKS,EAC1BzV,KAAKgV,gBAAgB,GAAKU,CAC9B,CACO3H,OAAOhI,GACL/F,KAAKkL,WAEVlL,KAAK2V,qBACD3V,KAAKgD,MAAMoL,QACXrI,EAAI6P,UAAY5V,KAAK8U,kBAIzB9U,KAAK6V,mBAAmB9P,GAAK,GAC7B/F,KAAK8V,WAAW/P,GAChB/F,KAAK4U,OAAS,IAElB,CACOiB,mBAAmB9P,GAA+C,IAAhBgQ,IAAM,0DAC3DF,EAAAA,EAAAA,IAAmB9P,EAAK/F,KAAKgD,MAAMO,eAAgBvD,KAAKgD,MAAM4B,EAAG5E,KAAKgD,MAAM6B,EAAG7E,KAAKgD,MAAM8B,MAAO9E,KAAKgD,MAAM+B,OAAQgR,EACxH,CACO7S,YACElD,KAAKkL,WACVlL,KAAK6U,MAAQ,EACjB,CACOiB,WAAW/P,GA4Cd,GAAI/F,KAAKgD,MAAMoL,QACX,IAAK,IAAI4H,EAAI,EAAIA,EAAIhW,KAAKgD,MAAMiT,OAAOnT,SAAUkT,GAOjDhW,KAAK6U,QAAU,IACf7U,KAAKmV,YAAYpB,WAEzB,CACQ4B,qBAEA3V,KAAKgD,MAAMoL,QACXpO,KAAK2U,UAAY,KAEjB3U,KAAK2U,UAAY,KAGjB3U,KAAK2U,SAAW,KAChB3U,KAAK2U,SAAW,IAEhB3U,KAAK2U,SAAW,MAChB3U,KAAK2U,SAAW,KAGpB,MAAMuB,GAAMC,EAAAA,EAAAA,IAAyBnW,KAAK+U,WAAY/U,KAAKgV,gBAAiBhV,KAAK2U,UAEjF3U,KAAK8U,kBAAiB,eAAWoB,EAAI,GAAE,aAAKA,EAAI,GAAE,aAAKA,EAAI,GAAE,aAAKA,EAAI,GAAE,IAC5E,CACOE,eAAe7Q,GAClB,CAEOmN,SAAKxS,GACPF,KAAKkL,WACVlL,KAAKmV,YAAYzC,KAAOxS,EAC5B,EC3JG,IAAKmW,GAGX,SAHWA,GAAAA,EAAO,oBAAPA,EAAO,oBAGlB,CAHWA,IAAAA,EAAO,KAIZ,MAAMC,EAMTxW,YAAYkD,EAAcuJ,EAAYjJ,GAAgB,KAL/CsB,OAAC,OACDC,OAAC,OACD7B,WAAK,OACLuJ,QAAE,OACFjJ,UAAI,EAEPtD,KAAKgD,MAAQA,EACbhD,KAAKuM,GAAKA,EACVvM,KAAKsD,KAAOA,EACZtD,KAAKoF,QACT,CACOiM,aAAazM,EAAWC,GAC3B,MAAO0R,EAAKC,GAAOxW,KAAKgD,MAAM7C,KAAKqB,cAAcyP,SAASjR,KAAK4E,EAAG5E,KAAK6E,IAChE4R,EAAKC,GAAO1W,KAAKgD,MAAM7C,KAAKqB,cAAcyP,SAASrM,EAAGC,GAE7D,OAAIkN,EAAAA,EAAAA,IAASwE,EAAKC,EAAKC,EAAKC,GAAO1W,KAAKgD,MAAMwS,EACnCxV,KAAKuM,IAER,CACZ,CACOnH,SACCpF,KAAKsD,OAAS+S,EAAQM,SACN,IAAZ3W,KAAKuM,IACLvM,KAAK4E,EAAI5E,KAAKgD,MAAM4B,EACpB5E,KAAK6E,EAAI7E,KAAKgD,MAAM6B,GACD,IAAZ7E,KAAKuM,IACZvM,KAAK4E,EAAI5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACnC9E,KAAK6E,EAAI7E,KAAKgD,MAAM6B,GACD,IAAZ7E,KAAKuM,IACZvM,KAAK4E,EAAI5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACnC9E,KAAK6E,EAAI7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,QAChB,IAAZ/E,KAAKuM,KACZvM,KAAK4E,EAAI5E,KAAKgD,MAAM4B,EACpB5E,KAAK6E,EAAI7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,QAEhC/E,KAAKsD,OAAS+S,EAAQO,WACb,IAAZ5W,KAAKuM,IACLvM,KAAK4E,EAAI5E,KAAKgD,MAAM4B,EAAuB,GAAnB5E,KAAKgD,MAAM8B,MACnC9E,KAAK6E,EAAI7E,KAAKgD,MAAM6B,GACD,IAAZ7E,KAAKuM,IACZvM,KAAK4E,EAAI5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACnC9E,KAAK6E,EAAI7E,KAAKgD,MAAM6B,EAAwB,GAApB7E,KAAKgD,MAAM+B,QAChB,IAAZ/E,KAAKuM,IACZvM,KAAK4E,EAAI5E,KAAKgD,MAAM4B,EAAuB,GAAnB5E,KAAKgD,MAAM8B,MACnC9E,KAAK6E,EAAI7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,QAChB,IAAZ/E,KAAKuM,KACZvM,KAAK4E,EAAI5E,KAAKgD,MAAM4B,EACpB5E,KAAK6E,EAAI7E,KAAKgD,MAAM6B,EAAwB,GAApB7E,KAAKgD,MAAM+B,QAI/C,CACOgJ,OAAOhI,GAQN/F,KAAKsD,OAAS+S,EAAQM,SACN,IAAZ3W,KAAKuM,IACLsK,EAAAA,EAAAA,IAAa9Q,EAAK/F,KAAKgD,MAAM4B,EAAG5E,KAAKgD,MAAM6B,EAAG7E,KAAKgD,MAAMC,SAASqS,UAAWtV,KAAKgD,MAAMC,SAASqS,WAC9E,IAAZtV,KAAKuM,IACZsK,EAAAA,EAAAA,IAAa9Q,EAAK/F,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAO9E,KAAKgD,MAAM6B,EAAG7E,KAAKgD,MAAMC,SAASqS,UAAWtV,KAAKgD,MAAMC,SAASqS,WACjG,IAAZtV,KAAKuM,IACZsK,EAAAA,EAAAA,IAAa9Q,EAAK/F,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAO9E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAAQ/E,KAAKgD,MAAMC,SAASqS,UAAWtV,KAAKgD,MAAMC,SAASqS,WACrH,IAAZtV,KAAKuM,KACZsK,EAAAA,EAAAA,IAAa9Q,EAAK/F,KAAKgD,MAAM4B,EAAG5E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAAQ/E,KAAKgD,MAAMC,SAASqS,UAAWtV,KAAKgD,MAAMC,SAASqS,WAElHtV,KAAKsD,OAAS+S,EAAQO,WACb,IAAZ5W,KAAKuM,IACLsK,EAAAA,EAAAA,IAAa9Q,EAAK/F,KAAKgD,MAAM4B,EAAuB,GAAnB5E,KAAKgD,MAAM8B,MAAa9E,KAAKgD,MAAM6B,EAAsC,EAAnC7E,KAAKgD,MAAMC,SAASsS,aAAkBvV,KAAKgD,MAAMC,SAASsS,cAC9G,IAAZvV,KAAKuM,IACZsK,EAAAA,EAAAA,IAAa9Q,EAAK/F,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAO9E,KAAKgD,MAAM6B,EAAwB,GAApB7E,KAAKgD,MAAM+B,OAAc/E,KAAKgD,MAAMC,SAASsS,aAAiD,EAAnCvV,KAAKgD,MAAMC,SAASsS,cAC9H,IAAZvV,KAAKuM,IACZsK,EAAAA,EAAAA,IAAa9Q,EAAK/F,KAAKgD,MAAM4B,EAAuB,GAAnB5E,KAAKgD,MAAM8B,MAAa9E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAA2C,EAAnC/E,KAAKgD,MAAMC,SAASsS,aAAkBvV,KAAKgD,MAAMC,SAASsS,cAClI,IAAZvV,KAAKuM,KACZsK,EAAAA,EAAAA,IAAa9Q,EAAK/F,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM6B,EAAwB,GAApB7E,KAAKgD,MAAM+B,OAAc/E,KAAKgD,MAAMC,SAASsS,aAAiD,EAAnCvV,KAAKgD,MAAMC,SAASsS,cAG3I,ECxFG,MAAMuB,EAGThX,YAAYkD,GAAe,KAFpBA,WAAK,OACJ+T,iCAAkC,EAEtC/W,KAAKgD,MAAQA,CACjB,CACOgU,qBAAqBzK,EAAY3H,EAAWC,GAM/C,IAAIwP,EACAC,EAJJ1P,EAAIA,EAAI,EAAI,EAAIA,EAChBC,EAAIA,EAAI,EAAI,EAAIA,EAKhB,IACIoS,EADA/R,EAAQ,CAAClF,KAAKgD,MAAM8B,MAAO9E,KAAKgD,MAAM+B,QAG1C,OAAQwH,GACJ,KAAK,EAKD,GAJA8H,EAAOrU,KAAKgD,MAAM4B,EAAIA,EACtBqS,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAGzDrU,KAAKgD,MAAM6B,EAAIK,EAAM,GAAK+R,EAAS,IAAM,EAAG,CAC5C,GAAIjX,KAAK+W,gCAAiC,CACtC,GAAI/W,KAAKgD,MAAM6B,EAAI,EACf,MAEJwP,EAAO,EACP4C,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAE7DrU,KAAKgD,MAAM4B,GAAK,EAChB5E,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM6B,GAAKK,EAAM,GAAK+R,EAAS,GACpCjX,KAAKgD,MAAM+B,OAASkS,EAAS,EACjC,CACA,KACJ,CAGA,GAAIjX,KAAKgD,MAAM8L,SAAWmI,EAAS,IAAMjX,KAAKgD,MAAMmM,UAAY8H,EAAS,GACrE,MAGJjX,KAAKgD,MAAM4B,EAAIA,EACf5E,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM6B,GAAKK,EAAM,GAAK+R,EAAS,GACpCjX,KAAKgD,MAAM+B,OAASkS,EAAS,GAC7B,MACJ,KAAK,EAKD,GAJA5C,EAAOzP,EAAI5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACrCmS,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAGzDrU,KAAKgD,MAAM6B,EAAIK,EAAM,GAAK+R,EAAS,IAAM,GAAKjX,KAAKgD,MAAM4B,EAAIqS,EAAS,GAAKjX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAQ,CACjH,GAAI9E,KAAK+W,gCAAiC,CAEtC,GAAI/W,KAAKgD,MAAM6B,GAAK,GAAK7E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MACrF,MAEJuP,EAAO,EACP4C,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAE7DrU,KAAKgD,MAAM6B,GAAKK,EAAM,GAAK+R,EAAS,GACpCjX,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,OAASkS,EAAS,EACjC,CACA,KACJ,CAGA,GAAIjX,KAAKgD,MAAM8L,SAAWmI,EAAS,IAAMjX,KAAKgD,MAAMmM,UAAY8H,EAAS,GACrE,MAGJjX,KAAKgD,MAAM6B,GAAKK,EAAM,GAAK+R,EAAS,GACpCjX,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,OAASkS,EAAS,GAC7B,MACJ,KAAK,EAKD,GAJA5C,EAAOzP,EAAI5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACrCmS,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAGzDrU,KAAKgD,MAAM4B,EAAIqS,EAAS,GAAKjX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,OAAS9E,KAAKgD,MAAM6B,EAAIoS,EAAS,GAAKjX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAQ,CACvI,GAAI/E,KAAK+W,gCAAiC,CACtC,GAAI/W,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,OAAS9E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAC1I,MAEJsP,EAAO,EACP4C,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAC7DrU,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,QAAUG,EAAM,GAAK+R,EAAS,EAC7C,CACA,KACJ,CAGA,GAAIjX,KAAKgD,MAAM8L,SAAWmI,EAAS,IAAMjX,KAAKgD,MAAMmM,UAAY8H,EAAS,GACrE,MAGJjX,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,QAAUG,EAAM,GAAK+R,EAAS,GACzC,MACJ,KAAK,EAKD,GAJA5C,EAAOrU,KAAKgD,MAAM4B,EAAIA,EACtBqS,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAGzDrU,KAAKgD,MAAM4B,EAAIyP,EAAO,GAAKrU,KAAKgD,MAAM6B,EAAIoS,EAAS,GAAKjX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAQ,CAC9F,GAAI/E,KAAK+W,gCAAiC,CACtC,GAAI/W,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAAS,EAAI/E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAGrE,MAEJsP,EAAO,EACP4C,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAC7DrU,KAAKgD,MAAM4B,GAAKqS,EAAS,GAAK/R,EAAM,GACpClF,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,QAAUG,EAAM,GAAK+R,EAAS,EAC7C,CACA,KACJ,CAGIjX,KAAKgD,MAAM8L,SAAWmI,EAAS,IAAMjX,KAAKgD,MAAMmM,UAAY8H,EAAS,KACrEjX,KAAKgD,MAAM4B,EAAIA,EACf5E,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,QAAUG,EAAM,GAAK+R,EAAS,IAE7C,MACJ,KAAK,EAKD,GAJA3C,EAAOtU,KAAKgD,MAAM6B,EAAIA,EACtBoS,GAAWE,EAAAA,EAAAA,IAAoBjS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKoP,GAGzDtU,KAAKgD,MAAM4B,EAA+B,IAA1BM,EAAM,GAAK+R,EAAS,IAAa,GAAKjX,KAAKgD,MAAM4B,EAAIqS,EAAS,GAAKjX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAQ,CAC1H,GAAI9E,KAAK+W,gCAAiC,CACtC,GAAI/W,KAAKgD,MAAM4B,EAAI,GAAK5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQ,EAAI9E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MACxF,MAEJwP,EAAO,EACP2C,GAAWE,EAAAA,EAAAA,IAAoBjS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKoP,GAC9DtU,KAAKgD,MAAM4B,GAAgC,IAA1BM,EAAM,GAAK+R,EAAS,IACrCjX,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM6B,IAAM,EACjB7E,KAAKgD,MAAM+B,QAAUuP,CACzB,CACA,KACJ,CAGItU,KAAKgD,MAAM+B,OAASuP,GAAQtU,KAAKgD,MAAMmM,YACvCnP,KAAKgD,MAAM4B,GAAgC,IAA1BM,EAAM,GAAK+R,EAAS,IACrCjX,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM6B,EAAIA,EACf7E,KAAKgD,MAAM+B,QAAUuP,GAEzB,MACJ,KAAK,EAKD,GAJAD,EAAOzP,EAAI5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACrCmS,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAGzDrU,KAAKgD,MAAM6B,EAA+B,IAA1BK,EAAM,GAAK+R,EAAS,IAAY,GAAKjX,KAAKgD,MAAM6B,EAAIoS,EAAS,GAAKjX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAQ,CACxH,GAAI/E,KAAK+W,gCAAiC,CACtC,GAAI/W,KAAKgD,MAAM6B,EAAI,GAAK7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,QACrF/E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAChE,MAEJuP,EAAO,EACP4C,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAC7DrU,KAAKgD,MAAM6B,GAAgC,IAA1BK,EAAM,GAAK+R,EAAS,IACrCjX,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,OAASkS,EAAS,EACjC,CACA,KACJ,CAGIjX,KAAKgD,MAAM8L,UAAYmI,EAAS,IAAMjX,KAAKgD,MAAMmM,WAAa8H,EAAS,IACpErS,GAAK5E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,QAEtC9E,KAAKgD,MAAM6B,GAAgC,IAA1BK,EAAM,GAAK+R,EAAS,IACrCjX,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,OAASkS,EAAS,IAEjC,MACJ,KAAK,EAKD,GAJA3C,EAAOzP,EAAI7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OACrCkS,GAAWE,EAAAA,EAAAA,IAAoBjS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKoP,GAGzDtU,KAAKgD,MAAM4B,EAA+B,IAA1BM,EAAM,GAAK+R,EAAS,IAAa,GAAKjX,KAAKgD,MAAM4B,EAAIqS,EAAS,GAAKjX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAQ,CAC1H,GAAI9E,KAAK+W,gCAAiC,CACtC,GAAI/W,KAAKgD,MAAM4B,GAAK,GAChB5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,OAChE9E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OACjE,MAEJuP,EAAO,EACP2C,GAAWE,EAAAA,EAAAA,IAAoBjS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKoP,GAC9DtU,KAAKgD,MAAM4B,GAAgC,IAA1BM,EAAM,GAAK+R,EAAS,IACrCjX,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,QAAUuP,CACzB,CACA,KACJ,CAGItU,KAAKgD,MAAM+B,OAASuP,GAAQtU,KAAKgD,MAAMmM,WAAatK,GAAK7E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,SACvF/E,KAAKgD,MAAM4B,GAAgC,IAA1BM,EAAM,GAAK+R,EAAS,IACrCjX,KAAKgD,MAAM8B,MAAQmS,EAAS,GAC5BjX,KAAKgD,MAAM+B,QAAUuP,GAEzB,MACJ,KAAK,EAKD,GAJAD,EAAOrU,KAAKgD,MAAM4B,EAAIA,EACtBqS,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAGzDrU,KAAKgD,MAAM6B,EAA+B,IAA1BK,EAAM,GAAK+R,EAAS,IAAY,GAAKjX,KAAKgD,MAAM6B,EAAIoS,EAAS,GAAKjX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAQ,CACxH,GAAI/E,KAAK+W,gCAAiC,CACtC,GAAI/W,KAAKgD,MAAM6B,EAAI,GAAK7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OACrF,MAEJsP,EAAO,EACP4C,GAAWC,EAAAA,EAAAA,IAAmBhS,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAKmP,GAC7DrU,KAAKgD,MAAM4B,GAAKqS,EAAS,GAAK/R,EAAM,GACpClF,KAAKgD,MAAM8B,OAASuP,EACpBrU,KAAKgD,MAAM6B,GAAgC,IAA1BK,EAAM,GAAK+R,EAAS,IACrCjX,KAAKgD,MAAM+B,OAASkS,EAAS,EACjC,CACA,KACJ,CAGIjX,KAAKgD,MAAM8B,MAAQuP,GAAQrU,KAAKgD,MAAM8L,UAAY9O,KAAKgD,MAAM+B,QAAU/E,KAAKgD,MAAMmM,YAClFnP,KAAKgD,MAAM4B,EAAIA,EACf5E,KAAKgD,MAAM8B,OAASuP,EACpBrU,KAAKgD,MAAM6B,GAAgC,IAA1BK,EAAM,GAAK+R,EAAS,IACrCjX,KAAKgD,MAAM+B,OAASkS,EAAS,IAEjC,MACJ,QAQI,GANA5C,EAAOzP,EAAI5E,KAAKgD,MAAM7C,KAAKqB,cAAc4O,SAAS,GAClDkE,EAAOzP,EAAI7E,KAAKgD,MAAM7C,KAAKqB,cAAc4O,SAAS,GAGlDiE,EAAOrU,KAAKgD,MAAM4B,EAAIyP,EAAO,EAAI,EAAIA,EACrCC,EAAOtU,KAAKgD,MAAM6B,EAAIyP,EAAO,EAAI,EAAIA,EAC3B,IAAN1P,EAAU,CACV5E,KAAKgD,MAAM4B,EAAI,EACf,KACJ,CACA,GAAU,IAANC,EAAU,CACV7E,KAAKgD,MAAM6B,EAAI,EACf,KACJ,CAGA,GAAI7E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQuP,EAAOrU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAO,CAC9E9E,KAAKgD,MAAM4B,GAAK5E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAQ9E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAChF,KACJ,CACA,GAAI9E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAASuP,EAAOtU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAQ,CAChF/E,KAAKgD,MAAM6B,GAAK7E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAS/E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OACjF,KACJ,CAGA/E,KAAKgD,MAAM4B,GAAKyP,EAChBrU,KAAKgD,MAAM6B,GAAKyP,EAGxBtU,KAAKoX,YACT,CACO9H,mBAAmB/C,EAAY3H,EAAWC,GAC7C,GAAI7E,KAAKgD,MAAM7C,KAAKqB,cAAcuI,SAE9B,YADA/J,KAAKgX,qBAAqBzK,EAAI3H,EAAGC,GAOrC,IAAIwP,EACAC,EAEJ,OANA1P,EAAIA,EAAI,EAAI,EAAIA,EAChBC,EAAIA,EAAI,EAAI,EAAIA,EAKR0H,GACJ,KAAK,EACD8H,EAAOrU,KAAKgD,MAAM4B,EAAIA,EAClB5E,KAAKgD,MAAM8B,MAAQuP,GAAQrU,KAAKgD,MAAM8L,WACtC9O,KAAKgD,MAAM4B,EAAIA,EACf5E,KAAKgD,MAAM8B,OAASuP,GAGxBC,EAAOtU,KAAKgD,MAAM6B,EAAIA,EAClB7E,KAAKgD,MAAM+B,OAASuP,GAAQtU,KAAKgD,MAAMmM,YACvCnP,KAAKgD,MAAM6B,EAAIA,EACf7E,KAAKgD,MAAM+B,QAAUuP,GAGzB,MACJ,KAAK,EAGD,GADAD,EAAOzP,EAAI5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACjC9E,KAAKgD,MAAM8B,MAAQuP,GAAQrU,KAAKgD,MAAM8L,SAEtC,GAAI9O,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQuP,EAAOrU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAO,CAC9E,IAAIuS,EAAarX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAQ9E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACjF9E,KAAKgD,MAAM8B,OAASuS,CACxB,MACIrX,KAAKgD,MAAM8B,OAASuP,EAI5BC,EAAOtU,KAAKgD,MAAM6B,EAAIA,EAClB7E,KAAKgD,MAAM+B,OAASuP,GAAQtU,KAAKgD,MAAMmM,YACvCnP,KAAKgD,MAAM6B,EAAIA,EACf7E,KAAKgD,MAAM+B,QAAUuP,GAEzB,MACJ,KAAK,EAGDD,EAAOzP,EAAI5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8L,SAAW9O,KAAKgD,MAAM8L,SAAWlK,EAAI5E,KAAKgD,MAAM4B,EACrF0P,EAAOzP,EAAI7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAMmM,UAAYnP,KAAKgD,MAAMmM,UAAYtK,EAAI7E,KAAKgD,MAAM6B,EAGvFwP,EAAOrU,KAAKgD,MAAM4B,EAAIyP,EAAOrU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAQ9E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAQ9E,KAAKgD,MAAM4B,EAAIyP,EACxHC,EAAOtU,KAAKgD,MAAM6B,EAAIyP,EAAOtU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAS/E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAS/E,KAAKgD,MAAM6B,EAAIyP,EAE1HtU,KAAKgD,MAAM8B,MAAQuP,EACnBrU,KAAKgD,MAAM+B,OAASuP,EACpB,MACJ,KAAK,EACDD,EAAOrU,KAAKgD,MAAM4B,EAAIA,EAClB5E,KAAKgD,MAAM8B,MAAQuP,GAAQrU,KAAKgD,MAAM8L,WACtC9O,KAAKgD,MAAM4B,EAAIA,EACf5E,KAAKgD,MAAM8B,OAASuP,GAGxBC,EAAOzP,EAAI7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAMmM,UAAYnP,KAAKgD,MAAMmM,UAAYtK,EAAI7E,KAAKgD,MAAM6B,EACvF7E,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM6B,EAAIyP,EAAOtU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAS/E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAS/E,KAAKgD,MAAM6B,EAAIyP,EACvI,MACJ,KAAK,EACDA,EAAOtU,KAAKgD,MAAM6B,EAAIA,EAClB7E,KAAKgD,MAAM+B,OAASuP,GAAQtU,KAAKgD,MAAMmM,YACvCnP,KAAKgD,MAAM6B,EAAIA,EACf7E,KAAKgD,MAAM+B,QAAUuP,GAEzB,MACJ,KAAK,EAED,GADAD,EAAOzP,EAAI5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACjC9E,KAAKgD,MAAM8B,MAAQuP,GAAQrU,KAAKgD,MAAM8L,SAEtC,GAAI9O,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQuP,EAAOrU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAO,CAC9E,IAAIuS,EAAarX,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAQ9E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MACjF9E,KAAKgD,MAAM8B,OAASuS,CACxB,MACIrX,KAAKgD,MAAM8B,OAASuP,EAG5B,MACJ,KAAK,EACDC,EAAOzP,EAAI7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAMmM,UAAYnP,KAAKgD,MAAMmM,UAAYtK,EAAI7E,KAAKgD,MAAM6B,EACvF7E,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM6B,EAAIyP,EAAOtU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAS/E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAS/E,KAAKgD,MAAM6B,EAAIyP,EACvI,MACJ,KAAK,EACDD,EAAOrU,KAAKgD,MAAM4B,EAAIA,EAClB5E,KAAKgD,MAAM8B,MAAQuP,GAAQrU,KAAKgD,MAAM8L,WACtC9O,KAAKgD,MAAM4B,EAAIA,EACf5E,KAAKgD,MAAM8B,OAASuP,GAExB,MACJ,QAQI,GANAA,EAAOzP,EAAI5E,KAAKgD,MAAM7C,KAAKqB,cAAc4O,SAAS,GAClDkE,EAAOzP,EAAI7E,KAAKgD,MAAM7C,KAAKqB,cAAc4O,SAAS,GAGlDiE,EAAOrU,KAAKgD,MAAM4B,EAAIyP,EAAO,EAAI,EAAIA,EACrCC,EAAOtU,KAAKgD,MAAM6B,EAAIyP,EAAO,EAAI,EAAIA,EAC3B,IAAN1P,EAAU,CACV5E,KAAKgD,MAAM4B,EAAI,EACf,KACJ,CACA,GAAU,IAANC,EAAU,CACV7E,KAAKgD,MAAM6B,EAAI,EACf,KACJ,CAGA,GAAI7E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQuP,EAAOrU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAO,CAC9E9E,KAAKgD,MAAM4B,GAAK5E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO0E,MAAQ9E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAChF,KACJ,CACA,GAAI9E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAASuP,EAAOtU,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAQ,CAChF/E,KAAKgD,MAAM6B,GAAK7E,KAAKgD,MAAM7C,KAAKC,OAAOA,OAAO2E,OAAS/E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OACjF,KACJ,CAGA/E,KAAKgD,MAAM4B,GAAKyP,EAChBrU,KAAKgD,MAAM6B,GAAKyP,EAGxBtU,KAAKoX,YACT,CACOA,aACHpX,KAAKsX,eACLtX,KAAKgD,MAAMoC,SACXpF,KAAKgD,MAAM7C,KAAKsC,OAAO2C,QAAO,GAC9BpF,KAAKgD,MAAM7C,KAAKC,OAAOM,aAC3B,CACO4W,eACHtX,KAAKgD,MAAMuU,SAAWvX,KAAKgD,MAAM8B,MAAQ,EACzC9E,KAAKgD,MAAMwU,SAAWxX,KAAKgD,MAAM+B,OAAS,EAC1C/E,KAAKyX,gBACT,CACOA,iBACHzX,KAAKgD,MAAM0U,GAAG,GAAK1X,KAAKgD,MAAM4B,EAAuB,GAAnB5E,KAAKgD,MAAM8B,MAC7C9E,KAAKgD,MAAM0U,GAAG,GAAK1X,KAAKgD,MAAM6B,EAAwB,GAApB7E,KAAKgD,MAAM+B,MACjD,EC7aG,MAAM4S,EAGT7X,YAAYkD,GAAe,KAFpBA,WAAK,OACJ4U,UAAoB,IAExB5X,KAAKgD,MAAQA,CACjB,CACOsG,UACHtJ,KAAKgD,MAAMoL,SAAU,GACO,IAAxBpO,KAAKgD,MAAMqL,UACXrO,KAAKgD,MAAMqM,WAAarP,KAAKgD,MAAMqL,SAEvCrO,KAAK6X,qBACT,CACOxG,aAAazM,EAAWC,GAE3B,IAAK,IAAImR,EAAI,EAAGA,EAAIhW,KAAKgD,MAAMiT,OAAOnT,SAAUkT,EAAG,CAC/C,MAAM8B,EAAO9X,KAAKgD,MAAMiT,OAAOD,GAAG3E,aAAazM,EAAGC,GAClD,IAAc,IAAViT,EAGA,OAFA9X,KAAKgD,MAAMoL,SAAU,EACrBpO,KAAKgD,MAAMqL,QAAUyJ,GACd,CAEf,CAEA,OAAI9X,KAAKgD,MAAM4B,EAAIA,GAAM5E,KAAKgD,MAAM4B,EAAI5E,KAAKgD,MAAM8B,MAAQF,GACvD5E,KAAKgD,MAAM6B,EAAIA,GAAM7E,KAAKgD,MAAM6B,EAAI7E,KAAKgD,MAAM+B,OAASF,GACxD7E,KAAKgD,MAAMqL,SAAW,EACtBrO,KAAKgD,MAAMoL,SAAU,GACd,IAGXpO,KAAKgD,MAAMqL,SAAW,EACtBrO,KAAKgD,MAAMoL,SAAU,GACd,EACX,CACQyJ,sBACJ,OACI7X,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIlK,MAAQ9E,KAAK4X,WAAc5X,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIlK,MAAQ9E,KAAK4X,WAChJ5X,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIjK,OAAS/E,KAAK4X,WAAc5X,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIjK,OAAS/E,KAAK4X,WAEhJ5X,KAAKgD,MAAM4B,EAAI,EACf5E,KAAKgD,MAAM6B,EAAI,EACf7E,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIlK,WACpD9E,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIjK,SAGzD/E,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIlK,MAAQ9E,KAAK4X,WAAc5X,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIlK,MAAQ9E,KAAK4X,WAChJ5X,KAAKgD,MAAM4B,EAAI,OACf5E,KAAKgD,MAAM8B,MAAQ9E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIlK,QAGpD9E,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIjK,OAAS/E,KAAK4X,WAAc5X,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIjK,OAAS/E,KAAK4X,WACpJ5X,KAAKgD,MAAM6B,EAAI,OACf7E,KAAKgD,MAAM+B,OAAS/E,KAAKgD,MAAM7C,KAAK4O,aAAaC,IAAIjK,cAFzD,CAKJ,ECnDG,MAAMgT,EA8BTjY,YAAYK,GAAa,KA7BlB8C,cAAQ,OACR+U,eAAS,OACTC,iBAAW,OACX5J,SAAW,EAAE,KACbgB,YAAc,EAAE,KAChBjB,SAAU,EAAM,KAChBxJ,EAAI,IAAI,KACRC,EAAI,IAAI,KACRC,MAAQ,IAAI,KACZC,OAAS,IAAI,KACbX,MAAQ,EAAE,KACVY,SAAW,EAAG,KAEduS,SAAW,EAAE,KACbC,SAAW,EAAE,KAEbhC,EAAI,GAAG,KAEPkC,GAAe,CAAC,EAAG,GAAG,KACtBQ,MAAkB,CAAC,EAAG,GAAG,KACzB/X,UAAI,OAEJ8V,OAAyB,GAAG,KAC3BkC,UAAY,GAAG,KACfC,WAAa,GAAG,KAEhBC,gBAAoCC,EAAAA,GAAAA,SAA0B,KAC9DC,gBAAkCC,EAAAA,GAAAA,UAGtCxY,KAAKG,KAAOA,EACZH,KAAKmM,MACT,CACOA,OACHnM,KAAKuX,SAAWvX,KAAK8E,MAAQ,EAC7B9E,KAAKwX,SAAWxX,KAAK+E,OAAS,EAE9B/E,KAAKiW,OAAS,CACV,IAAIK,EAAatW,KAAM,EAAGqW,EAAQM,UAClC,IAAIL,EAAatW,KAAM,EAAGqW,EAAQM,UAClC,IAAIL,EAAatW,KAAM,EAAGqW,EAAQM,UAClC,IAAIL,EAAatW,KAAM,EAAGqW,EAAQM,UAElC,IAAIL,EAAatW,KAAM,EAAGqW,EAAQO,UAClC,IAAIN,EAAatW,KAAM,EAAGqW,EAAQO,UAClC,IAAIN,EAAatW,KAAM,EAAGqW,EAAQO,UAClC,IAAIN,EAAatW,KAAM,EAAGqW,EAAQO,WAQtC5W,KAAKiY,YAAc,IAAIN,EAAY3X,MACnCA,KAAKgY,UAAY,IAAIlB,EAAU9W,MAC/BA,KAAKiD,SAAW,IAAIyR,EAAS1U,KAGjC,CACW4D,mBAAe1D,GACtBF,KAAKqY,gBAAkBnY,EACvBF,KAAKyY,SAASvY,EAClB,CACW0D,qBACP,OAAO5D,KAAKqY,eAChB,CACWvJ,eACP,OAAO9O,KAAKmY,UAAYnY,KAAKG,KAAK4O,aAAaC,IAAIlK,MAAQ9E,KAAKG,KAAKqB,cAAc+O,eAAezL,KACtG,CACWqK,gBACP,OAAOnP,KAAKoY,WAAapY,KAAKG,KAAK4O,aAAaC,IAAIjK,OAAS/E,KAAKG,KAAKqB,cAAc+O,eAAexL,MACxG,CACO0T,SAASvY,GACZ,IAAI4E,EAAQ9E,KAAKG,KAAKC,OAAOA,OAAO0E,MAChCC,EAAS/E,KAAKG,KAAKC,OAAOA,OAAO2E,OACjCG,EAAQ,EACZ,OAAQlF,KAAKqY,iBACT,KAAKC,EAAAA,GAAAA,OACD,IAAII,EAAc1Y,KAAKG,KAAKC,OAAOA,OAAO0E,MAAQ9E,KAAKG,KAAKC,OAAOA,OAAO2E,OACtE2T,EACA1Y,KAAK2Y,mBAAmB5T,EAAQA,EAAQ2T,GAExC1Y,KAAK2Y,mBAAmB7T,EAAOA,EAAO4T,GAE1C,MACJ,KAAKJ,EAAAA,GAAAA,UACDpT,EAAS,IACLJ,EAAQC,EAASG,EACjBlF,KAAK2Y,mBAAmB7T,EAAQA,EAAQI,GAAQ,GAEhDlF,KAAK2Y,mBAAmB5T,EAASG,EAAOH,GAAQ,GAEpD,MACJ,KAAKuT,EAAAA,GAAAA,UACDpT,EAAS,EAAI,EACTJ,EAAQC,EAASG,EACjBlF,KAAK2Y,mBAAmB7T,EAAQA,EAAQI,GAAQ,GAEhDlF,KAAK2Y,mBAAmB5T,EAASG,EAAOH,GAAQ,GAEpD,MACJ,KAAKuT,EAAAA,GAAAA,WACDpT,EAAQ,GAAK,EACTJ,EAAQC,EAASG,EACjBlF,KAAK2Y,mBAAmB7T,EAAQA,EAAQI,GAAQ,GAEhDlF,KAAK2Y,mBAAmB5T,EAASG,EAAOH,GAAQ,GAEpD,MACJ,KAAKuT,EAAAA,GAAAA,SACDtY,KAAK2E,YAKjB,CACWpB,mBAAeD,GACtBtD,KAAKuY,gBAAkBjV,EACvBtD,KAAKG,KAAKC,OAAOM,aACrB,CACW6C,qBACP,OAAOvD,KAAKuY,eAChB,CACOI,mBAAmB7T,EAAeC,EAAgB6T,GACjDA,EACA5Y,KAAKmF,YAA6C,GAAhCnF,KAAKG,KAAKC,OAAOA,OAAO0E,MAAwB,GAARA,EAAc,EAAGA,EAAOC,EAAQ,EAAG,EAAG/E,KAAKuD,eAAgBvD,KAAK4D,gBAE1H5D,KAAKmF,YAAY,EAAqC,GAAjCnF,KAAKG,KAAKC,OAAOA,OAAO2E,OAA0B,GAATA,EAAeD,EAAOC,EAAQ,EAAG,EAAG/E,KAAKuD,eAAgBvD,KAAK4D,eAEpI,CACOyB,iBAAiBT,EAAWC,EAAWC,EAAeC,EAAgBX,EAAeY,EAAkBC,EAA2BC,GACrIlF,KAAK4E,EAAIA,EACT5E,KAAK6E,EAAIA,EACT7E,KAAK8E,MAAQA,EACb9E,KAAK+E,OAASA,EACd/E,KAAKoE,MAAQA,EACbpE,KAAKgF,SAAWA,EAChBhF,KAAKuD,eAAiB0B,EACtBjF,KAAKqY,gBAAkBnT,CAC3B,CACOC,YAAYP,EAAWC,EAAWC,EAAeC,EAAgBX,EAAeY,EAAkBC,EAA2BC,GAChIlF,KAAKqF,iBAAiBT,EAAGC,EAAGC,EAAOC,EAAQX,EAAOY,EAAUC,EAAWC,GACvElF,KAAKoF,QACT,CACOT,YACH3E,KAAKqY,gBAAkBC,EAAAA,GAAAA,SACvBtY,KAAKuY,gBAAkBC,EAAAA,GAAAA,UACvBxY,KAAK8E,MAAQ,IACb9E,KAAK+E,OAAS,IAEV/E,KAAKG,KAAK4O,aAAaC,MACvBhP,KAAK8E,MAAQ9E,KAAKG,KAAK4O,aAAaC,IAAIlK,MACxC9E,KAAK+E,OAAS/E,KAAKG,KAAK4O,aAAaC,IAAIjK,QAG7C/E,KAAKuX,SAAWvX,KAAK8E,MAAQ,EAC7B9E,KAAKwX,SAAWxX,KAAK+E,OAAS,EAE9B/E,KAAK4E,EAAI,EACT5E,KAAK6E,EAAI,EAKT7E,KAAK0X,GAAG,GAAK1X,KAAK4E,EAAiB,GAAb5E,KAAK8E,MAC3B9E,KAAK0X,GAAG,GAAK1X,KAAK6E,EAAkB,GAAd7E,KAAK+E,OAC3B/E,KAAKkY,MAAM,GAAKlY,KAAK0X,GAAG,GACxB1X,KAAKkY,MAAM,GAAKlY,KAAK0X,GAAG,GAExB1X,KAAKG,KAAKC,OAAOoL,kBAAkB1G,MAAQ9E,KAAKG,KAAK6C,MAAM8B,MAC3D9E,KAAKG,KAAKC,OAAOoL,kBAAkBzG,OAAS/E,KAAKG,KAAK6C,MAAM+B,OAG5D/E,KAAKoF,SACLpF,KAAK6Y,sBACL7Y,KAAKG,KAAK8C,SAASY,iBAAkB,EACrC7D,KAAKiD,SAASoS,UAUlB,CACOlT,mBACHnC,KAAKG,KAAKM,MAAMoC,eAAiB,GACjC7C,KAAKG,KAAKJ,IAAIsB,WAAW,sBAEzBrB,KAAKG,KAAKsC,OAAON,mBACjBnC,KAAK2E,YACL3E,KAAKoF,SACLpF,KAAKG,KAAK8C,SAASO,gBACnBxD,KAAKG,KAAKM,MAAMiD,eAEZ1D,KAAKG,KAAKsC,OAAOqW,UACjB9Y,KAAKG,KAAKJ,IAAIsB,WAAW,iCAEjC,CACOkG,cAAciO,EAAWC,EAAWC,GACvC1V,KAAKiD,SAASsE,cAAciO,EAAGC,EAAGC,EACtC,CACOtQ,SACH,IAAK,IAAI4Q,EAAI,EAAIA,EAAIhW,KAAKiW,OAAOnT,SAAUkT,EACvChW,KAAKiW,OAAOD,GAAG5Q,SAEnBpF,KAAKgY,UAAUV,eACftX,KAAKiD,SAASC,WAClB,CACOmO,aAAazM,EAAWC,GAC3B,OAAO7E,KAAKiY,YAAY5G,aAAazM,EAAGC,EAC5C,CACOyE,UAEH,OADAtJ,KAAKqP,YAAc,EACZrP,KAAKiY,YAAY3O,SAC5B,CACOiI,UACH,OAAIvR,KAAK0X,GAAG,KAAO1X,KAAKkY,MAAM,IAAMlY,KAAK0X,GAAG,KAAO1X,KAAKkY,MAAM,EAMlE,CACO5I,mBAAmB/C,EAAY8H,EAAcC,GAChD,OAAOtU,KAAKgY,UAAU1I,mBAAmB/C,EAAI8H,EAAMC,EACvD,CACOvG,OAAOhI,GACV/F,KAAKiD,SAAS8K,OAAOhI,EACzB,CACO8K,UAAUwD,EAAcC,GAIvB,GAAQtU,KAAKqY,kBACJC,EAAAA,GAAAA,SACDtY,KAAKsP,mBAAmBtP,KAAKqO,QAASgG,EAAMC,QAG5CtU,KAAKgY,UAAUhB,qBAAqBhX,KAAKqO,QAASgG,EAAMC,GAIhEtU,KAAK6Y,qBA6Bb,CACIzV,gBACA,MAAO,CACH0B,MAAO8M,KAAKmH,MAAM/Y,KAAK8E,OACvBC,OAAQ6M,KAAKmH,MAAM/Y,KAAK+E,QAEhC,CACO8T,sBAKH7Y,KAAKoF,SACLpF,KAAKG,KAAKC,OAAOM,aACrB,CAIO4Q,eACHtR,KAAKkY,MAAM,GAAKlY,KAAK0X,GAAG,GACxB1X,KAAKkY,MAAM,GAAKlY,KAAK0X,GAAG,EAC5B,EC7SG,MAAMhD,EAST5U,YAAYK,GAAa,KARlBA,UAAI,OACJ0H,EAAI,EAAI,KACRmR,UAAY,EAAI,KAEhBnV,iBAAkB,EAAK,KACtBoV,eAAgB,EAAM,KACtBC,iBAAW,OACX/M,MAAO,EAEXnM,KAAKG,KAAOA,EACZ,MAAMC,EAASsK,SAAS2B,cAAc,UACtCrM,KAAKkZ,YAAc9Y,EAAO0M,WAAW,MACrC9M,KAAKmF,aACT,CACOA,cACHnF,KAAKgZ,UAAY,EACjBhZ,KAAKG,KAAK6C,MAAMoC,QACpB,CACO2I,OAAOhI,GAuEV,GAtEI/F,KAAKgZ,YAAc,KACnBhZ,KAAKG,KAAK6C,MAAMoC,SA4DpBpF,KAAKG,KAAKsC,OAAOsL,OAAOhI,GAEpB/F,KAAKiZ,eACLjZ,KAAKmZ,sBAMqC,SAA1CnZ,KAAKG,KAAKC,OAAOA,OAAOsM,MAAM+H,QAE9B,OAGJzU,KAAKG,KAAKM,MAAM2Y,2BAA2BrT,GAE3C/F,KAAKG,KAAK6C,MAAM+K,OAAOhI,GAEvB,IAAIsT,EAAK,EAAIrZ,KAAK6H,EAGdwR,EAAM,IACNA,EAAK,GAITtT,EAAIuT,YACJ,MAAMC,EAAKvZ,KAAKG,KAAKC,OAAO6K,gBAAgBd,iBAAiBzC,SAAS,GAChE8R,EAAKxZ,KAAKG,KAAKC,OAAO6K,gBAAgBd,iBAAiBzC,SAAS,GACtE3B,EAAI0T,IAAIF,EAAIC,EAAS,GAALH,EAAU,EAAG,MAC7BtT,EAAI2T,YAKJ3T,EAAI6P,UAAS,8BAA0ByD,EAAE,KACzCtT,EAAI4T,OAGJ5T,EAAI6T,UAMJ5Z,KAAK6H,GAAK,IAed,CACOrE,gBACHxD,KAAKiZ,eAAgB,CACzB,CACQE,sBAEJnZ,KAAK6Z,oBACL7Z,KAAK8Z,oBACL9Z,KAAKiZ,eAAgB,EAEjBjZ,KAAKmM,OACLnM,KAAKG,KAAKJ,IAAIsB,WAAW,gBACzBrB,KAAKmM,MAAO,EAEpB,CACOqF,iBAEHxR,KAAKG,KAAK6C,MAAM2B,YAChB3E,KAAK6Z,oBACL7Z,KAAK8Z,mBACT,CACQD,oBACJ7Z,KAAKG,KAAKC,OAAOoL,kBAAkB1G,MAAQ9E,KAAKG,KAAK6C,MAAM8B,MAC3D9E,KAAKG,KAAKC,OAAOoL,kBAAkBzG,OAAS/E,KAAKG,KAAK6C,MAAM+B,OAE5D/E,KAAKG,KAAKC,OAAOqL,eAAesO,UAAU/Z,KAAKG,KAAKC,OAAOA,QAASJ,KAAKG,KAAK6C,MAAM4B,GAAI5E,KAAKG,KAAK6C,MAAM6B,GACxG7E,KAAKga,kBAAkBha,KAAKG,KAAKC,OAAOqL,eAC5C,CACQqO,oBACJ9Z,KAAKkZ,YAAY9Y,OAAO0E,MAAQ9E,KAAKG,KAAK4O,aAAaC,IAAIlK,MAC3D9E,KAAKkZ,YAAY9Y,OAAO2E,OAAS/E,KAAKG,KAAK4O,aAAaC,IAAIjK,OAC5D/E,KAAKkZ,YAAYa,UAAU/Z,KAAKG,KAAK4O,aAAaC,IAAK,EAAG,GAE1DhP,KAAKG,KAAKC,OAAOsL,UAAU5G,MAAQ9E,KAAKG,KAAK6C,MAAM8B,MACnD9E,KAAKG,KAAKC,OAAOsL,UAAU3G,OAAS/E,KAAKG,KAAK6C,MAAM+B,OACpD/E,KAAKG,KAAKC,OAAOuL,OAAOoO,UAAU/Z,KAAKkZ,YAAY9Y,QAASJ,KAAKG,KAAK6C,MAAM4B,GAAI5E,KAAKG,KAAK6C,MAAM6B,GAChG7E,KAAKga,kBAAkBha,KAAKG,KAAKC,OAAOuL,OAC5C,CACQqO,kBAAkBjU,GACtBA,EAAIkU,yBAA2B,kBAC/BlU,EAAI6P,UAAS,0BACbsE,EAAAA,EAAAA,IAAqBnU,EAAK/F,KAAKG,KAAK6C,MAAMO,eAAgB,EAAG,EAAGvD,KAAKG,KAAK6C,MAAM8B,MAAO9E,KAAKG,KAAK6C,MAAM+B,QAAQ,GAC/GgB,EAAIkU,yBAA2B,aACnC,ECzLG,MAAME,EAGTra,YAAYK,EAAY6O,GAAwB,KAFzC7O,UAAI,OACHia,UAAI,EAERpa,KAAKG,KAAOA,EACZH,KAAKoa,KAAOpL,CAChB,CACIA,UAEA,OAAOhP,KAAKoa,IAChB,CACOC,aAEP,E,eCJG,MAAMC,EAQTxa,YAAYK,GAAa,KAPlBA,UAAI,OACJ0C,eAAsB,GAAG,KACzB0X,MAAgB,EAAE,KACjBC,kBAAY,OACbC,eAAS,OACTC,eAAS,OACT9U,aAAe,EAElB5F,KAAKG,KAAOA,EACZH,KAAKwa,aAAe,IAAIG,EAAAA,GAExB3a,KAAKya,WAAYG,EAAAA,EAAAA,MACjB5a,KAAK0a,WAAYG,EAAAA,EAAAA,KAErB,CACOpI,aACHzS,KAAKwa,aAAa/V,QAClBzE,KAAK0D,cACT,CACOpD,iBAAiBJ,GAChBA,IAAM4a,EAAAA,GAAAA,KACN9a,KAAKya,WAAYM,EAAAA,EAAAA,MAEjB/a,KAAKya,WAAYG,EAAAA,EAAAA,KAEzB,CACOlX,eAEH1D,KAAKwa,aAAaQ,KAAKhb,KAAKG,KAAKJ,IAAIwK,IAAI1E,WACzC,MAAMN,EAAOvF,KAAKwa,aAAaS,kBAC/Bjb,KAAKG,KAAKqB,cAAc+Q,oBAAoBhN,EAEhD,CACOxD,OACH,MAAMwD,EAAOvF,KAAKwa,aAAazY,OAE/B,GAAIwD,GAAQA,EAAKY,OAcb,OAbAnG,KAAKG,KAAKM,MAAMoC,eAAiB0C,EAAKc,QACtCrG,KAAKG,KAAKJ,IAAIwK,IAAIpF,YAAYI,EAAKY,OAAOvB,EAAGW,EAAKY,OAAOtB,EAAGU,EAAKY,OAAOrB,MAAOS,EAAKY,OAAOpB,OAAQQ,EAAKY,OAAO/B,MAAOmB,EAAKY,OAAOnB,SAAUO,EAAKY,OAAO+L,MAAO3M,EAAKY,OAAOgM,aAC3KnS,KAAKG,KAAKJ,IAAIwK,IAAI/H,aAAa+C,EAAKgB,WAAW,GAC/CvG,KAAKG,KAAK8C,SAASO,gBAEfxD,KAAKG,KAAKsC,OAAOqW,UACjB9Y,KAAKG,KAAKJ,IAAIsB,WAAW,0BAE7BrB,KAAKG,KAAKsC,OAAOC,iBAGjB1C,KAAKG,KAAKqB,cAAc+Q,oBAAoBvS,KAAKwa,aAAaS,wBAC9Djb,KAAKG,KAAKqB,cAAcG,iBAK5B3B,KAAKG,KAAKsC,OAAOC,gBACrB,CACOT,OACH,MAAMsD,EAAOvF,KAAKwa,aAAavY,OAE/B,GAAIsD,GAAQA,EAAKY,OAcb,OAbAnG,KAAKG,KAAKM,MAAMoC,eAAiB0C,EAAKc,QACtCrG,KAAKG,KAAKJ,IAAIwK,IAAIpF,YAAYI,EAAKY,OAAOvB,EAAGW,EAAKY,OAAOtB,EAAGU,EAAKY,OAAOrB,MAAOS,EAAKY,OAAOpB,OAAQQ,EAAKY,OAAO/B,MAAOmB,EAAKY,OAAOnB,SAAUO,EAAKY,OAAO+L,MAAO3M,EAAKY,OAAOgM,aAC3KnS,KAAKG,KAAKJ,IAAIwK,IAAI/H,aAAa+C,EAAKgB,WAAW,GAC/CvG,KAAKG,KAAK8C,SAASO,gBAEfxD,KAAKG,KAAKsC,OAAOqW,UACjB9Y,KAAKG,KAAKJ,IAAIsB,WAAW,0BAE7BrB,KAAKG,KAAKsC,OAAOC,iBAGjB1C,KAAKG,KAAKqB,cAAc+Q,oBAAoBvS,KAAKwa,aAAaS,wBAC9Djb,KAAKG,KAAKqB,cAAcG,iBAK5B3B,KAAKG,KAAKsC,OAAOC,gBACrB,CACO0W,2BAA2BrT,GAU9B,MAAMgQ,EAAS,CAVkD,uDAAG,EAAO,uDAAG,GAY9E,GAAI/V,KAAK6C,eAEL,IADA7C,KAAKua,MAAQva,KAAK6C,eAAeC,OAC3B9C,KAAKua,SAAS,CAChB,MAAMhY,EAAIvC,KAAK6C,eAAe7C,KAAKua,OAC7BnW,EAAQ7B,EAAE2Y,OAAOpW,MAAQ9E,KAAK4F,aAAerD,EAAE2Y,OAAO9W,MAE5D,OAAQ7B,EAAEe,MACN,KAAK6X,EAAAA,GAAAA,cACGnb,KAAKG,KAAKJ,IAAIQ,MAAMC,cAAgBsa,EAAAA,GAAAA,MACpCM,EAAAA,EAAAA,IAAsBrV,EAAKxD,EAAE8Y,MAAOrb,KAAKya,UAAUa,OAAQ/Y,EAAE2Y,OAAOK,UAAWxF,EAAQ/V,KAAK4F,aAAerD,EAAE2Y,OAAO9W,OAAO,GAAa,KAExIgX,EAAAA,EAAAA,IAAsBrV,EAAKxD,EAAE8Y,MAAOrb,KAAKya,UAAUa,OAAQ/Y,EAAE2Y,OAAOK,UAAWxF,EAAQ/V,KAAK4F,aAAerD,EAAE2Y,OAAO9W,OAAO,GAAa,IAE5I,MACJ,KAAK+W,EAAAA,GAAAA,eACGnb,KAAKG,KAAKJ,IAAIQ,MAAMC,cAAgBsa,EAAAA,GAAAA,MACpCU,EAAAA,EAAAA,IAAmBzV,EAAKxD,EAAE8Y,MAAO9Y,EAAE2Y,OAAOK,UAAWhZ,EAAE2Y,OAAOO,OAAQ1F,EAAQ/V,KAAK4F,aAAerD,EAAE2Y,OAAO9W,MAAO,EAAG,IAErHsX,EAAAA,EAAAA,IAAa3V,EAAKxD,EAAE8Y,MAAOrb,KAAK0a,UAAUY,OAAQ/Y,EAAE2Y,OAAOK,UAAWhZ,EAAE2Y,OAAOO,OAAQ1F,EAAQ/V,KAAK4F,aAAerD,EAAE2Y,OAAO9W,OAAO,OAAc,IAErJ,MACJ,KAAK+W,EAAAA,GAAAA,kBACDQ,EAAAA,EAAAA,IAAe5V,EAAKxD,EAAE8Y,MAAO9Y,EAAE2Y,OAAOK,UAAWxF,EAAQ3R,GACzD,MACJ,KAAK+W,EAAAA,GAAAA,cAGL,KAAKA,EAAAA,GAAAA,WACDS,EAAAA,EAAAA,IAAc7V,EAAKxD,EAAE8Y,MAAO9Y,EAAE2Y,OAAOK,UAAWxF,EAAQ3R,GACxD,MACJ,KAAK+W,EAAAA,GAAAA,QACDU,EAAAA,EAAAA,IAAa9V,EAAKxD,EAAE8Y,MAAO9Y,EAAE2Y,OAAOK,UAAWxF,EAAQ3R,GACvD,MACJ,KAAK+W,EAAAA,GAAAA,cACDW,EAAAA,EAAAA,IAAkB/V,EAAKxD,EAAE8Y,MAAO9Y,EAAE2Y,OAAOK,UAAWxF,EAAQ3R,GAC5D,MACJ,KAAK+W,EAAAA,GAAAA,cACDY,EAAAA,EAAAA,IAAkBhW,EAAKxD,EAAE8Y,MAAO9Y,EAAE2Y,OAAOK,UAAWxF,EAAQ3R,GAQxE,CAGR,ECrJG,MAAM4X,EAqBTlc,YAAYmc,GAAqB,KApB1BA,cAAQ,OACRC,aAAO,OACPC,aAAO,OAEPC,eAAS,OACTC,gBAAU,OACVC,gBAAU,OACVC,mBAAa,OACbC,qBAAe,OACfC,mBAAa,OACbC,oBAAc,OAEdC,cAAQ,OACRC,aAAO,OACPC,cAAQ,OACRC,iBAAW,OACXC,mBAAa,OACbC,iBAAW,OACXC,mBAAa,EAGhBjd,KAAKic,SAAWA,EAEhBjc,KAAKmc,QAAUzR,SAAS2B,cAAc,OAEtCrM,KAAKmc,QAAQzP,MAAM+H,QAAU,OAC7BzU,KAAKic,SAASiB,KAAKnN,YAAY/P,KAAKmc,QAiBxC,CACOgB,WAEH,MAAMC,EAAS1S,SAAS2B,cAAc,OACtC+Q,EAAO1Q,MAAMC,WAAa,UAC1ByQ,EAAO1Q,MAAM5H,MAAQ,OACrBsY,EAAOC,QAAU,KACblc,QAAQgK,IAAInL,KAAKic,SAASxU,WAAW6V,YAAYzX,UAAU,EAE/D7F,KAAKmc,QAAQpM,YAAYqN,GAEzBpd,KAAKkc,QAAUxR,SAAS2B,cAAc,OACtCrM,KAAKmc,QAAQpM,YAAY/P,KAAKkc,SAC9Blc,KAAKkc,QAAQqB,YAAc,iBAC3Bvd,KAAKkc,QAAQxP,MAAM8Q,MAAQ,OAC3Bxd,KAAKkc,QAAQxP,MAAM5H,MAAQ,QAE3B9E,KAAKkc,QAAQxP,MAAM+Q,SAAW,KAC9Bzd,KAAKkc,QAAQxP,MAAMgR,QAAU,MAa7B,IAWIC,EAXAC,EAAeC,EAAS,gBAAiB,EAAG,EAAK,EAAK,KAC1D7d,KAAKqc,WAAauB,EAAaE,MAC/B9d,KAAK2c,SAAWjS,SAAS2B,cAAc,OACvCrM,KAAK2c,SAASY,YAAc,IAC5BK,EAAa3c,IAAI8O,YAAY/P,KAAK2c,UAClC3c,KAAKqc,WAAW0B,QAAU,KACtB/d,KAAK2c,SAASY,YAAcvd,KAAKqc,WAAW7H,MAC5CxU,KAAKic,SAASxU,WAAWuW,qBAAqBhe,KAAKqc,WAAW7H,MAAM,EAExExU,KAAKmc,QAAQpM,YAAY6N,EAAa3c,KAGtC0c,EAAUE,EAAS,OAAQ,EAAG,GAAI,EAAG,IACrC7d,KAAK4c,QAAUlS,SAAS2B,cAAc,OACtCrM,KAAK4c,QAAQW,YAAc,IAC3BI,EAAQ1c,IAAI8O,YAAY/P,KAAK4c,SAC7B5c,KAAKoc,UAAYuB,EAAQG,MACzB9d,KAAKoc,UAAU2B,QAAU,KACrB/d,KAAK4c,QAAQW,YAAcvd,KAAKoc,UAAU5H,MAC1CxU,KAAKic,SAASxU,WAAWwW,kBAAkB,QAASje,KAAKoc,UAAU5H,OACnExU,KAAKic,SAASxU,WAAWyW,cAAc,EAE3Cle,KAAKmc,QAAQpM,YAAY4N,EAAQ1c,KAEjC0c,EAAUE,EAAS,QAAS,EAAG,EAAK,EAAG,KACvC7d,KAAK6c,SAAWnS,SAAS2B,cAAc,OACvCrM,KAAK6c,SAASU,YAAc,IAC5BI,EAAQ1c,IAAI8O,YAAY/P,KAAK6c,UAC7B7c,KAAKsc,WAAaqB,EAAQG,MAC1B9d,KAAKsc,WAAWyB,QAAU,KACtB/d,KAAK6c,SAASU,YAAcvd,KAAKsc,WAAW9H,MAC5CxU,KAAKic,SAASxU,WAAWwW,kBAAkB,SAAUje,KAAKsc,WAAW9H,OACrExU,KAAKic,SAASxU,WAAWyW,cAAc,EAE3Cle,KAAKmc,QAAQpM,YAAY4N,EAAQ1c,KAEjC0c,EAAUE,EAAS,WAAY,EAAG,EAAK,EAAG,KAC1C7d,KAAK8c,YAAcpS,SAAS2B,cAAc,OAC1CrM,KAAK8c,YAAYS,YAAc,IAC/BI,EAAQ1c,IAAI8O,YAAY/P,KAAK8c,aAC7B9c,KAAKuc,cAAgBoB,EAAQG,MAC7B9d,KAAKuc,cAAcwB,QAAU,KACzB/d,KAAK8c,YAAYS,YAAcvd,KAAKuc,cAAc/H,MAClDxU,KAAKic,SAASxU,WAAWwW,kBAAkB,YAAaje,KAAKuc,cAAc/H,OAC3ExU,KAAKic,SAASxU,WAAWyW,cAAc,EAE3Cle,KAAKmc,QAAQpM,YAAY4N,EAAQ1c,KAEjC0c,EAAUE,EAAS,aAAc,EAAG,EAAK,EAAG,KAC5C7d,KAAK+c,cAAgBrS,SAAS2B,cAAc,OAC5CrM,KAAK+c,cAAcQ,YAAc,IACjCI,EAAQ1c,IAAI8O,YAAY/P,KAAK+c,eAC7B/c,KAAKwc,gBAAkBmB,EAAQG,MAC/B9d,KAAKwc,gBAAgBuB,QAAU,KAC3B/d,KAAK+c,cAAcQ,YAAcvd,KAAKwc,gBAAgBhI,MACtDxU,KAAKic,SAASxU,WAAWwW,kBAAkB,cAAeje,KAAKwc,gBAAgBhI,OAC/ExU,KAAKic,SAASxU,WAAWyW,cAAc,EAE3Cle,KAAKmc,QAAQpM,YAAY4N,EAAQ1c,KAEjC0c,EAAUE,EAAS,WAAY,EAAG,EAAK,EAAG,KAC1C7d,KAAKgd,YAActS,SAAS2B,cAAc,OAC1CrM,KAAKgd,YAAYO,YAAc,IAC/BI,EAAQ1c,IAAI8O,YAAY/P,KAAKgd,aAC7Bhd,KAAKyc,cAAekB,EAAQG,MAC5B9d,KAAKyc,cAAcsB,QAAU,KACzB/d,KAAKgd,YAAYO,YAAcvd,KAAKyc,cAAcjI,MAClDxU,KAAKic,SAASxU,WAAWwW,kBAAkB,YAAaje,KAAKyc,cAAcjI,OAC3ExU,KAAKic,SAASxU,WAAWyW,cAAc,EAE3Cle,KAAKmc,QAAQpM,YAAY4N,EAAQ1c,KAEjC0c,EAAUE,EAAS,aAAc,IAAK,IAAK,EAAG,GAC9C7d,KAAKid,cAAgBvS,SAAS2B,cAAc,OAC5CrM,KAAKid,cAAcM,YAAc,IACjCI,EAAQ1c,IAAI8O,YAAY/P,KAAKid,eAC7Bjd,KAAK0c,eAAiBiB,EAAQG,MAC9B9d,KAAK0c,eAAeqB,QAAU,KAC1B/d,KAAKid,cAAcM,YAAcvd,KAAK0c,eAAelI,MACrDxU,KAAKic,SAASxU,WAAWwW,kBAAkB,cAAeje,KAAK0c,eAAelI,OAC9ExU,KAAKic,SAASxU,WAAWyW,cAAc,EAE3Cle,KAAKmc,QAAQpM,YAAY4N,EAAQ1c,IAErC,CACOkd,gBACCne,KAAKoc,YACLpc,KAAKoc,UAAU5H,MAAK,UAAMxU,KAAKic,SAASxU,WAAW2W,eAAe,SAClEpe,KAAK4c,QAAQW,YAAcvd,KAAKoc,UAAU5H,OAE1CxU,KAAKqc,aACLrc,KAAKqc,WAAW7H,MAAK,UAAMxU,KAAKic,SAASxU,WAAW2W,eAAe,kBACnEpe,KAAK2c,SAASY,YAAcvd,KAAKqc,WAAW7H,OAE5CxU,KAAKsc,aACLtc,KAAKsc,WAAW9H,MAAK,UAAMxU,KAAKic,SAASxU,WAAW2W,eAAe,UACnEpe,KAAK6c,SAASU,YAAcvd,KAAKsc,WAAW9H,OAE5CxU,KAAKuc,gBACLvc,KAAKuc,cAAc/H,MAAK,UAAMxU,KAAKic,SAASxU,WAAW2W,eAAe,aACtEpe,KAAK8c,YAAYS,YAAcvd,KAAKuc,cAAc/H,OAElDxU,KAAKwc,kBACLxc,KAAKwc,gBAAgBhI,MAAK,UAAMxU,KAAKic,SAASxU,WAAW2W,eAAe,eACxEpe,KAAK+c,cAAcQ,YAAcvd,KAAKwc,gBAAgBhI,OAEtDxU,KAAKyc,gBACLzc,KAAKyc,cAAcjI,MAAK,UAAMxU,KAAKic,SAASxU,WAAW2W,eAAe,aACtEpe,KAAKgd,YAAYO,YAAcvd,KAAKyc,cAAcjI,OAElDxU,KAAK0c,iBACL1c,KAAK0c,eAAelI,MAAK,UAAMxU,KAAKic,SAASxU,WAAW2W,eAAe,eACvEpe,KAAKid,cAAcM,YAAcvd,KAAK0c,eAAelI,MAE7D,EAEJ,MAAMqJ,EAAW,CAACQ,EAAeC,EAAaC,EAAa/J,EAAegK,KACtE,IAAIvd,EAAMyJ,SAAS2B,cAAc,OACjCpL,EAAIsc,YAAcc,EAClBpd,EAAIyL,MAAM8Q,MAAQ,UAClBvc,EAAIyL,MAAMkH,SAAW,QACrB,IAAIkK,EAAQpT,SAAS2B,cAAc,SASnC,OARAyR,EAAMpR,MAAM5H,MAAQ,OACpBgZ,EAAMpR,MAAM3H,OAAS,MACrB+Y,EAAMxa,KAAO,QACbwa,EAAMW,aAAY,UAAMjK,GACxBsJ,EAAMQ,IAAG,UAAMA,GACfR,EAAMU,KAAI,UAAMA,GAChBV,EAAMS,IAAG,UAAMA,GACftd,EAAI8O,YAAY+N,GACT,CAAE7c,IAAKA,EAAK6c,MAAOA,EAAM,EC9M7B,MAAeY,EAOlB5e,cAAe,KANRqc,aAAO,OACPwC,cAAQ,OACRN,WAAK,OACLO,UAAoB,EAAE,KACtBC,UAAY,kBAAkB,KAkC9BC,QAAE,EA/BL9e,KAAKmc,QAAUzR,SAAS2B,cAAc,OACtCrM,KAAKmc,QAAQzP,MAAMqS,gBAAkB,UACrC/e,KAAKmc,QAAQzP,MAAMqS,gBAAkB,yBAErC/e,KAAK2e,SAAWjU,SAAS2B,cAAc,OACvCrM,KAAK2e,SAASjS,MAAMG,OAAS,OAC7B7M,KAAK2e,SAASjS,MAAMgR,QAAU,OAC9B1d,KAAK2e,SAASjS,MAAMsS,OAAS,MAE7B,IAAIC,EAAevU,SAAS2B,cAAc,OAC1C4S,EAAavS,MAAM+H,QAAU,OAC7BzU,KAAK2e,SAAS5O,YAAYkP,GAE1Bjf,KAAKqe,MAAQ3T,SAAS2B,cAAc,OACpCrM,KAAKqe,MAAM3R,MAAM3H,OAAS,OAC1B/E,KAAKqe,MAAM3R,MAAM5H,MAAQ,QACzB9E,KAAKqe,MAAM3R,MAAM8Q,MAAQ,OACzBxd,KAAKqe,MAAMd,YAAW,UAAMvd,KAAK6e,UAAS,YAAI7e,KAAK4e,SAAQ,KAC3DK,EAAalP,YAAY/P,KAAKqe,OAE9B,IAAIa,EAAcxU,SAAS2B,cAAc,OACzC6S,EAAYxS,MAAM3H,OAAS,OAC3Bma,EAAYxS,MAAM8Q,MAAQ,OAC1B0B,EAAY3B,YAAW,IACvB2B,EAAY7B,QAAU,KAClBrd,KAAKY,SAAS,EAElBqe,EAAalP,YAAYmP,EAC7B,CAIOrZ,UAAY,CACZjF,UAAW,CACXue,eAAeC,GAClBpf,KAAK4e,SAAWQ,EAChBpf,KAAKqe,MAAMd,YAAW,UAAMvd,KAAK6e,UAAS,YAAI7e,KAAK4e,SAAQ,IAC/D,EC5CG,MAAMS,EAOTvf,YAAYS,GAAgI,KANrIod,aAAO,OACPH,MAAgB,EAAG,KACnB8B,kBAAY,OACZC,cAAQ,OACRrD,aAAO,OACP9E,gBAAU,EAEbpX,KAAKoX,WAAa7W,EAAM6W,WACxBpX,KAAKwd,MAAQjd,EAAMqO,QACnB5O,KAAK2d,QAAUpd,EAAMif,aAErBxf,KAAKsf,aAAe5U,SAAS2B,cAAc,OAC3CrM,KAAKsf,aAAa5S,MAAM+H,QAAU,OAClClU,EAAM2c,KAAKnN,YAAY/P,KAAKsf,cAE5Btf,KAAKkc,QAAUxR,SAAS2B,cAAc,OACtCrM,KAAKkc,QAAQxP,MAAM5H,MAAQ,OAC3B9E,KAAKkc,QAAQqB,YAAW,UAAMhd,EAAMif,aAAY,aAAKjf,EAAMqO,SAC3D5O,KAAKkc,QAAQxP,MAAM8Q,MAAQjd,EAAMkf,UACjCzf,KAAKsf,aAAavP,YAAY/P,KAAKkc,SAEnClc,KAAKuf,SAAW7U,SAAS2B,cAAc,SACvCrM,KAAKuf,SAAS7S,MAAM5H,MAAQ,OAC5B9E,KAAKuf,SAAS7S,MAAM+Q,SAAW,OAC/Bzd,KAAKuf,SAAS7S,MAAM3H,OAAS,MAC7B/E,KAAKuf,SAAS7S,MAAMG,OAAS,MAE7B7M,KAAKuf,SAAS7S,MAAMgT,WAAa,OACjC1f,KAAKuf,SAASjc,KAAO,QACrBtD,KAAKuf,SAAS/K,MAAK,UAAMjU,EAAMqO,SAC/B5O,KAAKuf,SAAShB,IAAG,UAAMhe,EAAMge,KAC7Bve,KAAKuf,SAASxB,QAAU,KACpB/d,KAAKkc,QAAQqB,YAAW,UAAMhd,EAAMif,aAAY,aAAKxf,KAAKuf,SAAS/K,OAEnExU,KAAKwd,OAASxd,KAAKuf,SAAS/K,MAC5BxU,KAAKoX,YAAY,EAErBpX,KAAKsf,aAAavP,YAAY/P,KAAKuf,SACvC,CACOI,YAAYzf,GACfF,KAAKwd,MAAQtd,EACbF,KAAKkc,QAAQqB,YAAW,UAAMvd,KAAK2d,QAAO,aAAKzd,GAC/CF,KAAKuf,SAAS/K,MAAK,UAAMtU,EAC7B,EAGG,MAAM0f,EAGT9f,YAAYS,GAAwD,KAF7Dsf,KAAsBC,EAAAA,GAAAA,QAAsB,KAC5C1I,gBAAU,EAEbpX,KAAKoX,WAAa7W,EAAM6W,WACxB,MAAM2I,EAAqBrV,SAAS2B,cAAc,UAClD9L,EAAM2c,KAAKnN,YAAYgQ,GACvB,IAAK,IAAIC,KAAQF,EAAAA,GAAe,CAC5B,IAAIG,EAASvV,SAAS2B,cAAc,UACpC4T,EAAOzL,MAAQsL,EAAAA,GAAcE,GAC7BC,EAAO1C,YAAcuC,EAAAA,GAAcE,GACnCD,EAAmBhQ,YAAYkQ,EACnC,CACAF,EAAmBvL,MAAQxU,KAAK6f,KAChCE,EAAmBrT,MAAMG,OAAS,MAClCkT,EAAmBrT,MAAM+Q,SAAW,OACpCsC,EAAmBG,SAAYtY,IAC3B,IAAIiY,EAAQjY,EAAEuY,OAAe3L,MAK7BxU,KAAK6f,KAAOA,EACZ7f,KAAKoX,YAAY,CAEzB,EAEG,MAAMgJ,EAETtgB,YAAYS,GAA2E,KADvF4b,aAAO,EAEHnc,KAAKmc,QAAUzR,SAAS2B,cAAc,OACtCrM,KAAKmc,QAAQzP,MAAMqS,gBAAe,eAAWxe,EAAMiV,EAAC,YAAIjV,EAAMkV,EAAC,YAAIlV,EAAMmV,EAAC,YAAInV,EAAMqP,EAAC,KACrF5P,KAAKmc,QAAQzP,MAAM5H,MAAQ,OAC3B9E,KAAKmc,QAAQzP,MAAM3H,OAAS,OAC5B/E,KAAKmc,QAAQzP,MAAM+Q,SAAW,OAC9Bzd,KAAKmc,QAAQzP,MAAM2T,UAAY,MAC/B9f,EAAM2c,KAAKnN,YAAY/P,KAAKmc,QAChC,CACOmE,YAAY/f,GACfP,KAAKmc,QAAQzP,MAAMqS,gBAAe,eAAWxe,EAAMiV,EAAC,YAAIjV,EAAMkV,EAAC,YAAIlV,EAAMmV,EAAC,YAAInV,EAAMqP,EAAC,IACzF,EAEG,MAAM2Q,EAITzgB,YAAYS,GAAuD,KAH5D6W,gBAAU,OACV+E,aAAO,OACPqE,KAAiB,GAEpBxgB,KAAKoX,WAAa7W,EAAM6W,WACxBpX,KAAKmc,QAAUzR,SAAS2B,cAAc,SACtCrM,KAAKmc,QAAQzP,MAAM5H,MAAQ,MAC3B9E,KAAKmc,QAAQzP,MAAM+Q,SAAW,OAC9Bzd,KAAKmc,QAAQzP,MAAMG,OAAS,MAC5B7M,KAAKmc,QAAQzP,MAAM8Q,MAAQ,IAC3Bxd,KAAKmc,QAAQ7Y,KAAO,QACpBtD,KAAKmc,QAAQ4B,QAAU,KACnB,IAAIyC,GAAOxZ,EAAAA,EAAAA,IAAShH,KAAKmc,QAAQ3H,OAEjC,IAAK,IAAIwB,EAAI,EAAIA,EAAIwK,EAAK1d,SAAUkT,EAChC,GAAGyK,MAAMD,EAAKxK,IACV,OAGRhW,KAAKwgB,KAAOA,EACZxgB,KAAKoX,YAAY,EAErB7W,EAAM2c,KAAKnN,YAAY/P,KAAKmc,QAChC,EC/GG,MAAMuE,UAAmBhC,EAU5B5e,YAAY8e,EAAkBE,EAA2Ble,GACrD+f,QAAQ,KATZC,iBAAW,OACXC,gBAAU,OACVC,cAAQ,OACRC,cAAQ,OACRC,cAAQ,OACRC,cAAQ,OAERC,iBAAW,EAGPlhB,KAAK6e,UAAY,eACjB7e,KAAK4e,SAAWA,EAChB5e,KAAKqe,MAAMd,YAAW,UAAMvd,KAAK6e,UAAS,YAAI7e,KAAK4e,SAAQ,KAC3D5e,KAAK8e,GAAKA,EACV9e,KAAKY,QAAUA,EACfZ,KAAKmM,MACT,CACOA,OACH,MAAMwS,EAAW3e,KAAK2e,SAEtB3e,KAAK6gB,WAAa,IAAIN,EAAkB,CACpCrD,KAAMyB,EACNvH,WAAY,KACRpX,KAAK8gB,SAASnB,YAAY3f,KAAK6gB,WAAWL,KAAK,IAC/CxgB,KAAK+gB,SAASpB,YAAY3f,KAAK6gB,WAAWL,KAAK,IAC/CxgB,KAAKghB,SAASrB,YAAY3f,KAAK6gB,WAAWL,KAAK,IAC/CxgB,KAAKoF,QAAQ,IAGrBpF,KAAK8gB,SAAW,IAAIzB,EAAqB,CACrCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAASgD,KAAKmH,MAAsB,IAAhBnH,KAAKuP,UACzB5C,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAK+gB,SAAW,IAAI1B,EAAqB,CACrCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAASgD,KAAKmH,MAAsB,IAAhBnH,KAAKuP,UACzB5C,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAKghB,SAAW,IAAI3B,EAAqB,CACrCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAASgD,KAAKmH,MAAsB,IAAhBnH,KAAKuP,UACzB5C,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAKihB,SAAW,IAAI5B,EAAqB,CACrCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAAS,IACT2P,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAKkhB,YAAc,IAAItB,EAAsB,CACzC1C,KAAMyB,EACNvH,WAAY,KACRpX,KAAKoF,QAAQ,IAIrBpF,KAAK4gB,YAAc,IAAIR,EAAmB,CACtClD,KAAMyB,EACNnJ,EAAGxV,KAAK8gB,SAAStD,MACjB/H,EAAGzV,KAAK+gB,SAASvD,MACjB9H,EAAG1V,KAAKghB,SAASxD,MACjB5N,EAAG5P,KAAKihB,SAASzD,QAGrBxd,KAAKmc,QAAQpM,YAAY4O,GACzB3e,KAAKoF,SACLpF,KAAKohB,WACT,CACOhc,SACHpF,KAAK4gB,YAAYN,YAAY,CAAC9K,EAAGxV,KAAK8gB,SAAStD,MAAO/H,EAAGzV,KAAK+gB,SAASvD,MAAO9H,EAAG1V,KAAKghB,SAASxD,MAAO5N,EAAyB,IAAtB5P,KAAKihB,SAASzD,QACvHxd,KAAK8e,GAAG9e,KAAK6F,UACjB,CACOub,YACHphB,KAAK6gB,WAAW1E,QAAQ3H,OAAQ6M,EAAAA,EAAAA,IAAQrhB,KAAK8gB,SAAStD,MAAOxd,KAAK+gB,SAASvD,MAAOxd,KAAKghB,SAASxD,MACpG,CACO3X,UACH,MAAO,CACHyb,IAAK,CAACthB,KAAK8gB,SAAStD,MAAOxd,KAAK+gB,SAASvD,MAAOxd,KAAKghB,SAASxD,MAA6B,IAAtBxd,KAAKihB,SAASzD,OACnFqC,KAAM7f,KAAKkhB,YAAYrB,KAE/B,EC1GG,MAAM0B,UAA4B7C,EAsBrC5e,YAAY8e,EAAkBE,EAA2Ble,GACrD+f,QAAQ,KAtBZ/B,UAAoB,EAAE,KACtBzC,aAAO,OACP2C,QAAE,OACF0C,iBAAW,OACXC,eAAS,OACTC,eAAS,OACTC,eAAS,OACTC,eAAS,OACTC,kBAAY,OAEZC,iBAAW,OACXC,eAAS,OACTC,eAAS,OACTC,eAAS,OACTC,eAAS,OACTC,kBAAY,OAEZC,kBAAY,OACZC,kBAAY,OAEZnB,iBAAW,EAGPlhB,KAAK6e,UAAY,yBACjB7e,KAAK4e,SAAWA,EAChB5e,KAAKqe,MAAMd,YAAW,UAAMvd,KAAK6e,UAAS,YAAI7e,KAAK4e,SAAQ,KAC3D5e,KAAK8e,GAAKA,EACV9e,KAAKY,QAAUA,EACfZ,KAAKmM,MACT,CACOA,OACH,MAAMwS,EAAW3e,KAAK2e,SAEtB,IAAI2D,EAAY5X,SAAS2B,cAAc,OACvCiW,EAAU5V,MAAM8Q,MAAQ,OACxB8E,EAAU/E,YAAW,uCACrBoB,EAAS5O,YAAYuS,GAErBtiB,KAAKwhB,YAAc,IAAIjB,EAAkB,CACrCrD,KAAMyB,EACNvH,WAAY,KACRpX,KAAKyhB,UAAU9B,YAAY3f,KAAKwhB,YAAYhB,KAAK,IACjDxgB,KAAK0hB,UAAU/B,YAAY3f,KAAKwhB,YAAYhB,KAAK,IACjDxgB,KAAK2hB,UAAUhC,YAAY3f,KAAKwhB,YAAYhB,KAAK,IACjDxgB,KAAKoF,QAAQ,IAIrBpF,KAAKyhB,UAAY,IAAIpC,EAAqB,CACtCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAASgD,KAAKmH,MAAsB,IAAhBnH,KAAKuP,UACzB5C,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAK0hB,UAAY,IAAIrC,EAAqB,CACtCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAASgD,KAAKmH,MAAsB,IAAhBnH,KAAKuP,UACzB5C,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAK2hB,UAAY,IAAItC,EAAqB,CACtCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAASgD,KAAKmH,MAAsB,IAAhBnH,KAAKuP,UACzB5C,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAK4hB,UAAY,IAAIvC,EAAqB,CACtCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAAS,IACT2P,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAIxBphB,KAAK6hB,aAAe,IAAIzB,EAAmB,CACvClD,KAAMyB,EACNnJ,EAAGxV,KAAKyhB,UAAUjE,MAClB/H,EAAGzV,KAAK0hB,UAAUlE,MAClB9H,EAAG1V,KAAK2hB,UAAUnE,MAClB5N,EAAG5P,KAAK4hB,UAAUpE,QAGtB,IAAI+E,EAAY7X,SAAS2B,cAAc,OACvCkW,EAAU7V,MAAM8Q,MAAQ,OACxB+E,EAAUhF,YAAW,uCACrBoB,EAAS5O,YAAYwS,GAErBviB,KAAK8hB,YAAc,IAAIvB,EAAkB,CACrCrD,KAAMyB,EACNvH,WAAY,KACRpX,KAAK+hB,UAAUpC,YAAY3f,KAAK8hB,YAAYtB,KAAK,IACjDxgB,KAAKgiB,UAAUrC,YAAY3f,KAAK8hB,YAAYtB,KAAK,IACjDxgB,KAAKiiB,UAAUtC,YAAY3f,KAAK8hB,YAAYtB,KAAK,IACjDxgB,KAAKoF,QAAQ,IAIrBpF,KAAK+hB,UAAY,IAAI1C,EAAqB,CACtCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAASgD,KAAKmH,MAAsB,IAAhBnH,KAAKuP,UACzB5C,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAKgiB,UAAY,IAAI3C,EAAqB,CACtCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAASgD,KAAKmH,MAAsB,IAAhBnH,KAAKuP,UACzB5C,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAKiiB,UAAY,IAAI5C,EAAqB,CACtCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAASgD,KAAKmH,MAAsB,IAAhBnH,KAAKuP,UACzB5C,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAKkiB,UAAY,IAAI7C,EAAqB,CACtCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAAS,IACT2P,IAAK,IACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAIxBphB,KAAKkhB,YAAc,IAAItB,EAAsB,CACzC1C,KAAMyB,EACNvH,WAAY,KACRpX,KAAKoF,QAAQ,IAKrBpF,KAAKmiB,aAAe,IAAI/B,EAAmB,CACvClD,KAAMyB,EACNnJ,EAAGxV,KAAK+hB,UAAUvE,MAClB/H,EAAGzV,KAAKgiB,UAAUxE,MAClB9H,EAAG1V,KAAKiiB,UAAUzE,MAClB5N,EAAG5P,KAAKkiB,UAAU1E,QAItBxd,KAAKoiB,aAAe,IAAI/C,EAAqB,CACzCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAAS,EACT2P,IAAK,EACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAKoiB,aAAa7C,SAASf,KAAO,QAClCxe,KAAKoiB,aAAalG,QAAQxP,MAAM5H,MAAQ,OAExC9E,KAAKqiB,aAAe,IAAIhD,EAAqB,CACzCnC,KAAMyB,EACNa,aAAc,IACdC,UAAW,OACX7Q,QAAS,EACT2P,IAAK,EACLnH,WAAY,KACRpX,KAAKoF,SACLpF,KAAKohB,WAAW,IAGxBphB,KAAKqiB,aAAa9C,SAASf,KAAO,QAClCxe,KAAKqiB,aAAanG,QAAQxP,MAAM5H,MAAQ,OAGxC9E,KAAKmc,QAAQpM,YAAY4O,GACzB3e,KAAKoF,SACLpF,KAAKohB,WACT,CACOhc,SACHpF,KAAK6hB,aAAavB,YAAY,CAAC9K,EAAGxV,KAAKyhB,UAAUjE,MAAO/H,EAAGzV,KAAK0hB,UAAUlE,MAAO9H,EAAG1V,KAAK2hB,UAAUnE,MAAO5N,EAA0B,IAAvB5P,KAAK4hB,UAAUpE,QAC5Hxd,KAAKmiB,aAAa7B,YAAY,CAAC9K,EAAGxV,KAAK+hB,UAAUvE,MAAO/H,EAAGzV,KAAKgiB,UAAUxE,MAAO9H,EAAG1V,KAAKiiB,UAAUzE,MAAO5N,EAA0B,IAAvB5P,KAAKkiB,UAAU1E,QAC5Hxd,KAAK8e,GAAG9e,KAAK6F,UACjB,CACOub,YACHphB,KAAKwhB,YAAYrF,QAAQ3H,OAAQ6M,EAAAA,EAAAA,IAAQrhB,KAAKyhB,UAAUjE,MAAOxd,KAAK0hB,UAAUlE,MAAOxd,KAAK2hB,UAAUnE,OACpGxd,KAAK8hB,YAAY3F,QAAQ3H,OAAQ6M,EAAAA,EAAAA,IAAQrhB,KAAK+hB,UAAUvE,MAAOxd,KAAKgiB,UAAUxE,MAAOxd,KAAKiiB,UAAUzE,MACxG,CACO3X,UACH,MAAO,CACH2c,GAAIxiB,KAAKoiB,aAAa5E,MACtBiF,IAAKziB,KAAKqiB,aAAa7E,MACvB8D,IAAK,CAACthB,KAAKyhB,UAAUjE,MAAOxd,KAAK0hB,UAAUlE,MAAOxd,KAAK2hB,UAAUnE,MAA8B,IAAvBxd,KAAK4hB,UAAUpE,OACvFkF,IAAK,CAAC1iB,KAAK+hB,UAAUvE,MAAOxd,KAAKgiB,UAAUxE,MAAOxd,KAAKiiB,UAAUzE,MAA8B,IAAvBxd,KAAKkiB,UAAU1E,OACvFqC,KAAM7f,KAAKkhB,YAAYrB,KAE/B,ECtNG,IAAK8C,GAGX,SAHWA,GAAAA,EAAS,0CAATA,EAAS,wBAGpB,CAHWA,IAAAA,EAAS,KAId,MAAMC,EAOT9iB,YAAYmc,GAAqB,KANjCA,cAAQ,OACRE,aAAO,OAEP0G,OAA0B,GAAG,KAC7BC,UAAoB,EAGhB9iB,KAAKic,SAAWA,CAEpB,CACOkB,WACHnd,KAAK+iB,aACL/iB,KAAKgjB,iBACT,CACOD,aACH/iB,KAAKmc,QAAUzR,SAAS2B,cAAc,OACtCrM,KAAKmc,QAAQzP,MAAMkH,SAAW,WAC9B5T,KAAKmc,QAAQzP,MAAMpE,IAAM,OACzBtI,KAAKmc,QAAQzP,MAAM5H,MAAQ,QAC3B9E,KAAKic,SAASiB,KAAKnN,YAAY/P,KAAKmc,QAExC,CACO6G,kBACH,MAAMC,EAAmBvY,SAAS2B,cAAc,OAChD4W,EAAiBvW,MAAM+H,QAAU,OACjCwO,EAAiBvW,MAAM3H,OAAS,OAChC/E,KAAKmc,QAAQpM,YAAYkT,GAEzB,MAAMC,EAAexY,SAAS2B,cAAc,OAC5C6W,EAAaxW,MAAM5H,MAAQ,OAC3Boe,EAAaxW,MAAM8Q,MAAQ,OAC3B0F,EAAa3F,YAAc,gBAC3B2F,EAAa7F,QAAU,KACnBrd,KAAKmjB,SAASR,EAAUjC,WAAW,EAEvCuC,EAAiBlT,YAAYmT,GAE7B,MAAME,EAAe1Y,SAAS2B,cAAc,OAC5C+W,EAAa1W,MAAM8Q,MAAQ,OAC3B4F,EAAa7F,YAAc,oBAC3B6F,EAAa/F,QAAU,KACnBrd,KAAKmjB,SAASR,EAAUpB,oBAAoB,EAEhD0B,EAAiBlT,YAAYqT,EAGjC,CACOD,SAASE,GACZ,IAAIC,EACJ,GAAQD,IACCV,EAAUpB,oBACX+B,EAAQ,IAAI/B,EAAoBvhB,KAAK6iB,OAAO/f,OAAS,GAChDyC,IACGvF,KAAKujB,iBAAiB,IAE1B,KACEvjB,KAAKwjB,YAAYF,EAAM,IAG7BtjB,KAAKmc,QAAQpM,YAAYuT,EAAMnH,SAC/Bnc,KAAK6iB,OAAO7H,KAAKsI,QAIjBA,EAAQ,IAAI5C,EAAW1gB,KAAK6iB,OAAO/f,OAAS,GACvCyC,IACGvF,KAAKujB,iBAAiB,IAE1B,KACEvjB,KAAKwjB,YAAYF,EAAM,IAG7BtjB,KAAKmc,QAAQpM,YAAYuT,EAAMnH,SAC/Bnc,KAAK6iB,OAAO7H,KAAKsI,GAGzBtjB,KAAKujB,iBACT,CACOA,kBACHvjB,KAAKyjB,eACLzjB,KAAKic,SAASxU,WAAWyW,cAC7B,CACOrY,UACH,MAAMN,EAAO,GACb,IAAK,IAAIyQ,EAAI,EAAIA,EAAIhW,KAAK6iB,OAAO/f,SAAUkT,EACvCzQ,EAAKyV,KAAKhb,KAAK6iB,OAAO7M,GAAGnQ,WAE7B,OAAON,CACX,CACOie,YAAYF,GACftjB,KAAK6iB,OAAOa,OAAO1jB,KAAK6iB,OAAOc,QAAQL,GAAQ,GAC/CtjB,KAAKmc,QAAQnb,YAAYsiB,EAAMnH,SAC/Bnc,KAAK4jB,cACL5jB,KAAKujB,iBACT,CACQK,cACJ,IAAK,IAAI5N,EAAI,EAAIA,EAAIhW,KAAK6iB,OAAO/f,SAAUkT,EACvChW,KAAK6iB,OAAO7M,GAAGmJ,eAAenJ,EAAI,EAE1C,CACQyN,eACuB,IAAvBzjB,KAAK6iB,OAAO/f,OACZ9C,KAAK8iB,UAAW,EAEhB9iB,KAAK8iB,UAAW,CAExB,CACOliB,UACH,GAAIZ,KAAKmc,SAAWnc,KAAKmc,QAAQpb,WAC7B,IACI,MAAM8iB,EAAI7jB,KAAKmc,QAAQpb,WACnB8iB,GACJA,EAAE7iB,YAAYhB,KAAKmc,QAIvB,CAFE,MAAOjb,GACLC,QAAQC,MAAMF,EAClB,CAER,ECzIG,MAAM4iB,EASThkB,YAAY2H,GAAyB,KAR9ByV,UAAI,OAEJzV,gBAAU,OAEVsc,cAAQ,OACRC,YAAM,OACN5E,IAAM,EAAI,KACT6E,WAAY,EAAM,KAwCnBC,SAAYC,IACXnkB,KAAKikB,YACS,MAAVE,EAAEC,KACFpkB,KAAKof,KAAO,EAAI,EACZpf,KAAKof,IAAM,IAAKpf,KAAKof,IAAM,GAC3Bpf,KAAKof,IAAM,IAAKpf,KAAKof,IAAM,KAC/Bpf,KAAKyH,WAAW4c,YAAYrkB,KAAKof,MAEhB,MAAV+E,EAAEC,MACTpkB,KAAKof,KAAO,EAAI,EACZpf,KAAKof,IAAM,IAAKpf,KAAKof,IAAM,GAC3Bpf,KAAKof,IAAM,IAAKpf,KAAKof,IAAM,KAC/Bpf,KAAKyH,WAAW4c,YAAYrkB,KAAKof,OAG3B,MAAV+E,EAAEC,KAAeD,EAAEna,UACnBhK,KAAKskB,WACT,EAvDAtkB,KAAKyH,WAAaA,EAClBzH,KAAKmd,UACT,CACOA,WACHnd,KAAKkd,KAAOxS,SAAS2B,cAAc,OACnCrM,KAAKkd,KAAKxQ,MAAM6X,OAAS,IACzBvkB,KAAKkd,KAAKxQ,MAAMkH,SAAW,WAC3B5T,KAAKkd,KAAKxQ,MAAMpE,IAAM,MACtBtI,KAAKkd,KAAKxQ,MAAMvE,KAAO,MAGvBnI,KAAK+jB,SAAW,IAAI/H,EAAShc,MAC7BA,KAAKgkB,OAAS,IAAIpB,EAAO5iB,MAEzB0K,SAASC,KAAKC,iBAAiB,UAAW5K,KAAKkkB,UAI/ClkB,KAAKwkB,iBACLxkB,KAAKykB,cAET,CACOH,YACHtkB,KAAKyH,WAAW6V,YAAYnd,KAAKc,IAAI8O,YAAY/P,KAAKkd,KAC1D,CACOsH,iBACAxkB,KAAKyH,WAAWqR,UACf9Y,KAAK+jB,SAAS5G,UAEtB,CACOsH,eACCzkB,KAAKyH,WAAWqR,UAChB9Y,KAAKgkB,OAAO7G,UAEpB,CACOgB,gBACHne,KAAK+jB,SAAS5F,eAClB,CAoBOvd,UACH8J,SAASC,KAAKI,oBAAoB,UAAW/K,KAAKkkB,UAGlDlkB,KAAKgkB,OAAOpjB,UACZ,MAAMijB,EAAI7jB,KAAKkd,KAAKnc,WAChB8iB,GACAA,EAAE7iB,YAAYhB,KAAKkd,KAG3B,EC9EG,MAAMwH,EAIT5kB,YAAYwd,GAA2B,KAHhCA,iBAAW,OACXwG,cAAQ,OACPa,WAAY,EAAM,KAuElBC,cAAeC,EAAAA,EAAAA,KAAS,KAE5B7kB,KAAKsd,YAAYlY,QAAQ,IAvEzBpF,KAAKsd,YAAcA,EACnBtd,KAAK8jB,SAAW,IAAIA,EAAS9jB,KAEjC,CACW8Y,eACP,OAAO9Y,KAAK2kB,SAChB,CACW7L,aAAS5Y,GAChBF,KAAK2kB,UAAYzkB,EACbA,GACAF,KAAKsd,YAAYwH,WAAWpY,MAAM+H,QAAU,QAC5CzU,KAAKsd,YAAYnd,KAAKC,OAAOA,OAAOsM,MAAM+H,QAAU,OACpDzU,KAAK8jB,SAAS3G,aAEdnd,KAAKsd,YAAYwH,WAAWpY,MAAM+H,QAAU,OAC5CzU,KAAKsd,YAAYnd,KAAKC,OAAOA,OAAOsM,MAAM+H,QAAU,QACpDzU,KAAKY,UAEb,CACOmkB,cAAczhB,GACbtD,KAAK8jB,UAAY9jB,KAAK8jB,SAASC,SAAS7H,UACxClc,KAAK8jB,SAASC,SAAS7H,QAAQqB,YAAc,WAAaja,EAElE,CACO1C,UACCZ,KAAK8jB,UACL9jB,KAAK8jB,SAASljB,SAEtB,CACOokB,mBAAmBzf,GACtBvF,KAAKsd,YAAY2H,QAAU1f,CAE/B,CACO8e,YAAYa,GACfllB,KAAKsd,YAAY6H,YAAaC,EAAAA,EAAAA,IAAwBF,GACtDllB,KAAKsd,YAAY5X,oBAAoB1F,KAAKsd,YAAY6H,WAC1D,CACO/G,eAAegG,QACepQ,IAA7BhU,KAAKsd,YAAY2H,SAEjBjlB,KAAKsd,YAAY7Y,OAAM,GAAO,GAGlC,IAAK,IAAIuR,EAAI,EAAIA,EAAIhW,KAAKsd,YAAY2H,QAAQniB,SAAUkT,EACpD,GAAIoO,IAAQpkB,KAAKsd,YAAY2H,QAAQjP,GAAG,GACpC,OAAOhW,KAAKsd,YAAY2H,QAAQjP,GAAG,GAG3C,GAAY,kBAARoO,EACA,OAAOpkB,KAAKsd,YAAY+H,aAGhC,CACOpH,kBAAkBmG,EAAa5P,GAClC,IAAK,IAAIwB,EAAI,EAAIA,EAAIhW,KAAKsd,YAAY2H,QAAQniB,SAAUkT,EACpD,GAAIoO,IAAQpkB,KAAKsd,YAAY2H,QAAQjP,GAAG,GAEpC,YADAhW,KAAKsd,YAAY2H,QAAQjP,GAAG,GAAKxB,EAI7C,CACOwJ,oBAAoB9d,GACvBF,KAAKsd,YAAY+H,cAAgBnlB,EACjCF,KAAKke,cACT,CACOA,eACHle,KAAKsd,YAAYlY,QAAO,GACxBpF,KAAK4kB,cACT,ECxEG,MAAMU,EAeTxlB,YAAYK,GAAa,KAdlBA,UAAI,OACJsH,gBAAU,OACVrH,YAAM,OACN2F,SAAG,OACH+e,gBAAU,OACVlX,aAAO,OACPuX,WAAa,SAAS,KACtBlV,YAAc,EAAE,KAChBoV,cAAgB,EAAE,KAClBJ,QAAe,GAAG,KAClBM,MAAa,GAAG,KAChBzM,UAAW,EAAM,KAEjB0M,WAAY,EAEfxlB,KAAKG,KAAOA,EACZH,KAAKyE,OAAM,GAAO,GAAO,GAEzBzE,KAAKI,OAASsK,SAAS2B,cAAc,UACrCrM,KAAKI,OAAOsM,MAAM5H,MAAQ,OAC1B9E,KAAKI,OAAOsM,MAAM3H,OAAS,OAC3B/E,KAAK+F,IAAM/F,KAAKI,OAAO0M,WAAW,MAElC9M,KAAK8kB,WAAapa,SAAS2B,cAAc,UACzCrM,KAAK8kB,WAAWpY,MAAM5H,MAAQ,OAC9B9E,KAAK8kB,WAAWpY,MAAM3H,OAAS,OAC/B/E,KAAK8kB,WAAWpY,MAAM+H,QAAU,OAChCzU,KAAK4N,QAAU5N,KAAK8kB,WAAWhY,WAAW,MAC1C9M,KAAKG,KAAKc,IAAI8O,YAAY/P,KAAK8kB,YAE/B9kB,KAAKyH,WAAa,IAAIid,EAAW1kB,KACrC,CAEOylB,0BAA0B5d,GAAwC,IAA7BlF,IAAmB,yDAyB3D3C,KAAKqlB,cAAgBxd,EAMrB7H,KAAKoF,OAAOzC,EAChB,CACOkD,eACkBmO,IAAjBhU,KAAKilB,UAELjlB,KAAKyE,OAAM,GAAO,GAAO,GACzBzE,KAAKiQ,YAAc,EACnBjQ,KAAKoF,QAAO,IAEhB,MAAM6f,EAAUjlB,KAAKilB,QAAQxiB,QAAQ,CAAC,EAAgB8X,KAAmB,IAAjC,CAAC/F,GAAW,EAChD,OAAOkR,EAAAA,GAAAA,OAAAA,QAA4BnL,GAAO,KAAO/F,CAAK,IAE1D,MAAO,CACH2Q,WAAYnlB,KAAKmlB,WACjBF,UACAM,MAAO,IAAKvlB,KAAKulB,OACjBF,cAAerlB,KAAKqlB,cAE5B,CACO7iB,aAAaD,GAAqC,IAA7BI,IAAmB,yDAC3C3C,KAAKmlB,WAAa5iB,EAAE4iB,WACpBnlB,KAAKilB,QAAU1iB,EAAE0iB,QACjBjlB,KAAKulB,MAAQhjB,EAAEgjB,MAYXvlB,KAAKyH,WAAWqc,UAAY9jB,KAAKyH,WAAWqc,SAASC,SAAS7H,UAC9Dlc,KAAKyH,WAAWqc,SAAS3F,gBACzBne,KAAKyH,WAAWsd,cAAc/kB,KAAKmlB,aAIvCnlB,KAAKoF,OAAOzC,EAQhB,CACOR,mBAAgF,IAA/DQ,IAAmB,yDAASR,IAAyB,yDACzEnC,KAAKiQ,YAAc,EACnBjQ,KAAKyE,MAAM9B,EAAYR,EAC3B,CACOsC,QAA6F,IAAvF9B,IAAmB,yDAASR,EAAyB,wDAAUgK,EAAa,wDACrFnM,KAAKmlB,WAAa,SAClBnlB,KAAKqlB,cAAgB,EACrBrlB,KAAKilB,QAAU,CACXA,QAAS,CACP,CAAC,OAAQ,GACT,CAAC,QAAS,GACV,CAAC,WAAY,GACb,CAAC,aAAc,GACf,CAAC,WAAY,GACb,CAAC,aAAc,IAEjBM,MAAO,IAEXvlB,KAAKulB,MAAQ,GACTpZ,IACAnM,KAAKyH,WAAWsd,cAAc/kB,KAAKmlB,YACnCnlB,KAAKoF,OAAOzC,EAAYR,GAEhC,CACOuD,oBAAoByf,GAAkD,IAA9BxiB,IAAmB,yDAG9D3C,KAAKmlB,WAAaA,EAClB,MAAMhF,GAASwF,EAAAA,EAAAA,IAAkBR,GACjCnlB,KAAKilB,QAAU9E,EAAO8E,QACtBjlB,KAAKulB,MAAQpF,EAAOoF,MACpBvlB,KAAKyH,WAAWsd,cAAc/kB,KAAKmlB,YACnCnlB,KAAKoF,OAAOzC,EAChB,CACOyC,SAAuE,IAAhEzC,IAAmB,yDAASR,EAAyB,wDAG/D,GAAInC,KAAKiQ,YAAc,GAAKjQ,KAAK8Y,SAAU,CAEvC9Y,KAAKI,OAAO0E,MAAQ9E,KAAKG,KAAK4O,aAAaC,IAAIlK,MAC/C9E,KAAKI,OAAO2E,OAAS/E,KAAKG,KAAK4O,aAAaC,IAAIjK,OAEhD,MAAM6gB,EAAM5lB,KAAKG,KAAK6C,MAAM0U,GAAG,GAAK1X,KAAKI,OAAO0E,MAC1C+gB,EAAM7lB,KAAKG,KAAK6C,MAAM0U,GAAG,GAAK1X,KAAKI,OAAO2E,OAC1CG,EAAwG,IAA9FlF,KAAKG,KAAK6C,MAAM8B,MAAQ9E,KAAKI,OAAO0E,MAAU9E,KAAKG,KAAK6C,MAAM+B,OAAS/E,KAAKI,OAAO2E,SAEnG+gB,EAAAA,EAAAA,IAAmB9lB,KAAK+F,IAAK/F,KAAKG,KAAK4O,aAAaC,IAAKhP,KAAKilB,QAASjlB,KAAKqlB,eAExErlB,KAAKyH,WAAWqc,SAASE,OAAOlB,WAChC9iB,KAAKulB,MAAQvlB,KAAKyH,WAAWqc,SAASE,OAAOne,YAEjDkgB,EAAAA,EAAAA,IAAU/lB,KAAK+F,IAAK/F,KAAKulB,MAAOK,EAAIC,EAAI3gB,EAAOlF,KAAKqlB,eAGpDrlB,KAAKG,KAAKC,OAAOM,cAGjBV,KAAKG,KAAKC,OAAOqL,eAAesO,UAAU/Z,KAAK+F,IAAI3F,QAASJ,KAAKG,KAAK6C,MAAM4B,GAAK5E,KAAKG,KAAK6C,MAAM6B,GAE7FlC,IACA3C,KAAK0C,iBACAP,GACDnC,KAAKG,KAAKM,MAAMiD,gBAGpB1D,KAAKyH,WAAWqc,UAChB9jB,KAAKyH,WAAWqc,SAAS3F,gBAG7Bne,KAAKG,KAAK8C,SAASO,gBACnBxD,KAAKiQ,aACT,CAGIjQ,KAAKG,KAAKsC,OAAOqW,WACjB9Y,KAAKG,KAAK6C,MAAMC,SAASyP,MAAO,EAExC,CACO3E,OAAOhI,GACVA,EAAIgU,UAAU/Z,KAAKI,OAAQ,EAAG,GAC9BJ,KAAKgmB,YACT,CACOA,aACH,IAAKhmB,KAAKyH,WAAWqR,SACjB,OAGJ,MAAMpN,EAAY1L,KAAKG,KAAKJ,IAAIwK,IAAIvE,SAAS5F,OAC7CJ,KAAK8kB,WAAWpY,MAAM5H,MAAQ,OAC9B9E,KAAK8kB,WAAWpY,MAAM3H,OAAS,OAC/B/E,KAAK8kB,WAAWhgB,MAAQ4G,EAAU5G,MAClC9E,KAAK8kB,WAAW/f,OAAS2G,EAAU3G,OAEnC/E,KAAK4N,QAAQmM,UAAU/Z,KAAKI,QAASJ,KAAKG,KAAK6C,MAAM4B,GAAI5E,KAAKG,KAAK6C,MAAM6B,GAEzE7E,KAAKG,KAAKM,MAAM2Y,2BAA2BpZ,KAAK4N,QAAS5N,KAAKG,KAAK6C,MAAM4B,EAAG5E,KAAKG,KAAK6C,MAAM6B,GAE5F7E,KAAKimB,WAAWjmB,KAAK4N,QAOzB,CACOqY,WAAWlgB,GACdA,EAAIkU,yBAA2B,kBAC/BlU,EAAI6P,UAAS,0BACbsE,EAAAA,EAAAA,IAAqBnU,EAAK/F,KAAKG,KAAK6C,MAAMO,eAAgB,EAAG,EAAGwC,EAAI3F,OAAO0E,MAAOiB,EAAI3F,OAAO2E,QAAQ,GACrGgB,EAAIkU,yBAA2B,aACnC,CACOrZ,UACHZ,KAAKyH,WAAW7G,SACpB,CACO8B,iBAIH1C,KAAKG,KAAKJ,IAAIsB,WAAW,UAAYgR,KAAKC,UAAUtS,KAAK6F,WAC7D,CACOvE,oBACHtB,KAAK8Y,UAAW,EAChB9Y,KAAKyH,WAAWqR,UAAW,CAE/B,CACOrX,sBACHzB,KAAK8Y,UAAW,EAChB9Y,KAAKyH,WAAWqR,UAAW,CAE/B,EC1OG,MAAMoN,EAYTpmB,YAAYC,GAAuB,KAX5BA,SAAG,OACHkB,SAAG,OACH8N,kBAAY,OACZ/L,WAAK,OACLC,cAAQ,OACRxC,WAAK,OACLgC,YAAM,OACNrC,YAAM,OACNqD,YAAM,OACNjC,mBAAa,OACbuE,SAAG,OAmEHuE,aAAe,KAClBtK,KAAKI,OAAOM,aAAa,EAlEzBV,KAAKD,IAAMA,EACX,MAAMkB,EAAMyJ,SAAS2B,cAAc,OACnCrM,KAAKiB,IAAMA,EACXjB,KAAKiB,IAAIsL,GAAK,yBAEdvM,KAAKiB,IAAIyL,MAAM5H,MAAQ,OACvB9E,KAAKiB,IAAIyL,MAAM3H,OAAS,OAEpBhF,EAAIc,GACJb,KAAKD,IAAIc,GAAGslB,kBAAkBvZ,OAAO5M,KAAKiB,KAE1CjB,KAAKD,IAAIoc,QAAQvP,OAAO5M,KAAKiB,KAEjCjB,KAAKyD,OAAS,IAAIuK,EAAOhO,MACzBA,KAAKyC,OAAS,IAAI6iB,EAAYtlB,MAE9BA,KAAKomB,aACLpmB,KAAKqmB,SAET,CACO5hB,QACH,CAEI4hB,UACJrmB,KAAKS,MAAQ,IAAI6Z,EAAMta,MACvBA,KAAKgD,MAAQ,IAAI+U,EAAM/X,MACvBA,KAAKiD,SAAW,IAAIyR,EAAS1U,MAC7BA,KAAKwB,cAAgB,IAAI0O,EAAclQ,KAC3C,CACQomB,aACJpmB,KAAKI,OAAS,IAAI4K,EAAOhL,MACzBA,KAAKI,OAAO2N,OAAUhI,IAAoC/F,KAAKiD,SAAS8K,OAAOhI,EAAI,CACvF,CACOrB,YAAYwJ,GACf,MAAMoY,EAAQ,IAAIra,MAClBqa,EAAMpa,YAAc,YACpBoa,EAAMtZ,IAAMkB,EACZoY,EAAMC,OAAS,KACXvmB,KAAKwmB,mBAAmBF,EAAM,CAEtC,CACOE,mBAAmBF,GACtBtmB,KAAK+O,aAAe,IAAIoL,EAAana,KAAMsmB,GAE3CtmB,KAAKI,OAAOoL,kBAAkB1G,MAAQwhB,EAAMxhB,MAC5C9E,KAAKI,OAAOoL,kBAAkBzG,OAASuhB,EAAMvhB,OAE7C/E,KAAKI,OAAOA,OAAO0E,MAAQwhB,EAAMxhB,MACjC9E,KAAKI,OAAOA,OAAO2E,OAASuhB,EAAMvhB,OAElC/E,KAAKgD,MAAM2B,YAGX3E,KAAKyC,OAAO2C,QAAO,GACnBpF,KAAKI,OAAOM,cACZV,KAAKiD,SAASO,gBAETxD,KAAKyC,OAAOqW,UACb9Y,KAAKD,IAAIsB,WAAW,aAE5B,CACOT,UACHZ,KAAKI,OAAOQ,UACZZ,KAAKyC,OAAO7B,SAChB,ECxFG,MAAM6lB,EAMT3mB,YAAYC,EAAsB2mB,GAAa,KALxC3mB,SAAG,OACHe,mCAA6B,OAC7B6lB,kBAAY,OACZR,uBAAiB,OACjBO,WAAK,EAER1mB,KAAKD,IAAMA,EACXC,KAAK0mB,MAAQA,EACb,MAAM5lB,EAAgC4J,SAAS2B,cAAc,OAC7DvL,EAA8ByL,GAAK,gCACnCzL,EAA8B4L,MAAMkH,SAAW,WAC/C9S,EAA8B4L,MAAM5H,MAAQ,OAC5ChE,EAA8B4L,MAAM3H,OAAS,OAC7CjE,EAA8B4L,MAAM+H,QAAU,OAC9C3T,EAA8B4L,MAAMka,eAAiB,SACrD5mB,KAAKc,8BAAgCA,EACrCd,KAAKD,IAAIoc,QAAQvP,OAAO9L,GAExB,MAAM6lB,EAAejc,SAAS2B,cAAc,OAC5Csa,EAAapa,GAAK,mCAElBoa,EAAaja,MAAM5H,MAAQ,OAC3B6hB,EAAaja,MAAM3H,OAAS2hB,EAAMpe,IAAIvD,OACtC4hB,EAAaja,MAAMgR,QAAUgJ,EAAMpe,IAAIoV,QACvCiJ,EAAaja,MAAMC,WAAa+Z,EAAMpe,IAAIqE,WAC1Cga,EAAaja,MAAMma,aAAeH,EAAMpe,IAAIue,aAC5C7mB,KAAK2mB,aAAeA,EACpB3mB,KAAKc,8BAA8B8L,OAAO5M,KAAK2mB,cAE/C,MAAMG,EAAMpc,SAAS2B,cAAc,KACnCya,EAAIvJ,YAAc,wBAClBuJ,EAAIpa,MAAM+Q,SAAW,QACrBqJ,EAAIpa,MAAM8Q,MAAQ,sBAElBsJ,EAAIpa,MAAMpE,IAAM,MAChBwe,EAAIpa,MAAMvE,KAAO,OACjBnI,KAAK2mB,aAAa/Z,OAAOka,GAEzB,MAAMX,EAAoBzb,SAAS2B,cAAc,OACjD8Z,EAAkB5Z,GAAK,wCACvBvM,KAAKmmB,kBAAoBA,EACzBnmB,KAAKc,8BAA8B8L,OAAO5M,KAAKmmB,mBAI/CnmB,KAAK+mB,SACL/mB,KAAKgnB,QACT,CACOC,YAAYzR,EAAWC,EAAWC,GACrC,CAGGL,WACH,IAAI6R,EAAiBxc,SAAS2B,cAAc,OAC5C6a,EAAexa,MAAMya,UAAY,SAEjCD,EAAexa,MAAMgR,QAAU,OAC/BwJ,EAAe3J,YAAc,OAE7B,IAAI6J,EAAW1c,SAAS2B,cAAc,SACtC+a,EAAS1a,MAAM5H,MAAQ,OACvBsiB,EAASzT,aAAa,OAAQ,QAC9ByT,EAASzT,aAAa,MAAO,OAG7BuT,EAAeta,OAAOwa,GACtBA,EAASrJ,QAAU,KACDsJ,OAAOC,WAAWF,EAAS5S,MAErC,EAIR4S,EAAW1c,SAAS2B,cAAc,SAClC+a,EAAS1a,MAAM5H,MAAQ,OACvBsiB,EAASzT,aAAa,OAAQ,QAC9ByT,EAASzT,aAAa,MAAO,OAG7BuT,EAAeta,OAAOwa,GACtBA,EAASrJ,QAAU,KACDsJ,OAAOC,WAAWF,EAAS5S,MAErC,EAIRxU,KAAK2mB,aAAa/Z,OAAOsa,GAmDzB,IAAIK,EAAiB7c,SAAS2B,cAAc,SAC5Ckb,EAAejkB,KAAO,QACtBikB,EAAejJ,IAAM,QACrBiJ,EAAehJ,IAAM,OACrBgJ,EAAe/I,KAAO,OACtB+I,EAAe/S,MAAQ,IACvB+S,EAAexJ,QAAU,KACrB/d,KAAKD,IAAIwK,IAAItG,cAAcsjB,EAAe/S,MAAM,EAEpDxU,KAAK2mB,aAAa/Z,OAAO2a,GAEzB,IAAIC,EAAc9c,SAAS2B,cAAc,SACzCmb,EAAYlkB,KAAO,QACnBkkB,EAAYlJ,IAAM,MAClBkJ,EAAYjJ,IAAM,IAClBiJ,EAAYhJ,KAAO,OACnBgJ,EAAYhT,MAAQ,IACpBgT,EAAYzJ,QAAU,KAClB/d,KAAKD,IAAIwK,IAAIpG,YAAYqjB,EAAYhT,MAAM,EAE/CxU,KAAK2mB,aAAa/Z,OAAO4a,GAEzB,MAAMC,EAAS/c,SAAS2B,cAAc,SAEtCob,EAAO9T,aAAa,OAAQ,QAC5B8T,EAAO9T,aAAa,QAAS,uFAC7B3T,KAAK2mB,aAAa/Z,OAAO6a,GACzBA,EAAO1J,QAAU,KACb/d,KAAKD,IAAIwK,IAAI/F,iBAAiBijB,EAAOlK,YAAsB,EAE/DkK,EAAO7c,iBAAiB,SAAU8c,IAC1BA,EAAMC,OAGN,IASR,IAAIC,EAAWld,SAAS2B,cAAc,OACtCub,EAASrK,YAAc,WACvBqK,EAASlb,MAAMgR,QAAU,OAEzB,IAAI6B,EAAW7U,SAAS2B,cAAc,SACtCkT,EAAS7S,MAAM5H,MAAQ,OACvBya,EAAS5L,aAAa,OAAQ,QAC9B4L,EAAS5L,aAAa,MAAO,OAC7B4L,EAAS5L,aAAa,MAAO,MAC7B4L,EAAS5L,aAAa,QAAS,MAI/BiU,EAAShb,OAAO2S,GAChBvf,KAAK2mB,aAAa/Z,OAAOgb,GACzBrI,EAAS3U,iBAAiB,SAAU8c,IACV,KAAlBA,EAAMC,SAENxmB,QAAQgK,IAAI,iBAAkBoU,EAAS/K,MAc3C,IASJ,IAAIqT,EAAMnd,SAAS2B,cAAc,UACjCwb,EAAItK,YAAc,KAElBvd,KAAK2mB,aAAa/Z,OAAOib,GACzBA,EAAIxK,QAAU,MAwClB,CAEO0J,SACH,IAAIe,EAAY9nB,KAAK0mB,MAAMpe,IAAIyf,SAC3BC,EAAYtd,SAAS2B,cAAc,OAEvC2b,EAAUtb,MAAMsS,OAAS,MACzBgJ,EAAUtb,MAAMma,aAAe,OAC/B7mB,KAAK2mB,aAAa/Z,OAAOob,GAEzB,IAAI/mB,GAAOgnB,EAAAA,EAAAA,KACP,KACIjoB,KAAKD,IAAIwK,IAAI7I,cAAc,GAC7B,sFAAD,OACsEomB,EAAS,0aAKpF7mB,EAAIyL,MAAMsL,UAAS,gBAAY,IAAG,KAClC/W,EAAIyL,MAAMwb,aAAe,OACzBF,EAAUpb,OAAO3L,GAEjB+mB,EAAUpb,QACNqb,EAAAA,EAAAA,KACI,KACIjoB,KAAKD,IAAIwK,IAAI3I,eAAe,GAC9B,0FAAD,OACsEkmB,EAAS,qTAI9E,MAIVE,EAAUpb,QACNqb,EAAAA,EAAAA,KACI,KACIjoB,KAAKD,IAAIwK,IAAI1I,cAAc,GAC7B,0FAAD,OACsEimB,EAAS,iLAI9E,MAIVE,EAAUpb,QACNqb,EAAAA,EAAAA,KACI,KACIjoB,KAAKD,IAAIwK,IAAInI,iBAAiB,GAChC,0FAAD,OACsE0lB,EAAS,kTAI9E,KAGd,CACOd,SACH,IAAImB,EAAYzd,SAAS2B,cAAc,OAEvCrM,KAAK2mB,aAAa/Z,OAAOub,GAEzB,IAAIL,EAAY9nB,KAAK0mB,MAAMpe,IAAIyf,SAE/BI,EAAUvb,QACNqb,EAAAA,EAAAA,KACI,QAEE,0FAAD,OACsEH,EAAS,oPAOxFK,EAAUvb,QACNqb,EAAAA,EAAAA,KACI,KACIjoB,KAAKD,IAAIwK,IAAIzI,aAAa,GAC5B,0FAAD,OACsEgmB,EAAS,kQAOxFK,EAAUvb,QACNqb,EAAAA,EAAAA,KACI,KACIjoB,KAAKD,IAAIwK,IAAIvI,aAAa,GAC5B,0FAAD,OACsE8lB,EAAS,kQAwD5F,ECnZG,MAAMM,EAOTtoB,YAAYS,GAAiC,KANtC4b,aAAO,OACP5R,SAAG,OACHpK,UAAI,OACJU,QAAE,OACFN,WAAK,OACLc,gBAAU,EAEbrB,KAAKO,MAAQA,EACbP,KAAKmc,QAAUzR,SAAS2d,eAAe9nB,EAAMgM,IAEzCvM,KAAKO,MAAMmmB,QACX1mB,KAAKa,GAAK,IAAI4lB,EAAGzmB,KAAMA,KAAKO,MAAMmmB,QAEtC1mB,KAAKG,KAAO,IAAI+lB,EAAKlmB,MACrBA,KAAKuK,IAAM,IAAI1K,EAAIG,KAEvB,CACOsoB,sBAAsBvoB,GAEzBC,KAAKG,KAAKc,IAAIyL,MAAM5H,MAAQ/E,EAAIwoB,gBAAgBC,aAAaC,oBAAoBC,cAAcC,QAAQvoB,OAAO0E,MAAQ,KAEtH9E,KAAKG,KAAKc,IAAIyL,MAAM3H,OAAShF,EAAIwoB,gBAAgBC,aAAaC,oBAAoBC,cAAcC,QAAQvoB,OAAO2E,OAAS,KAExH/E,KAAKG,KAAKC,OAAO+M,QACrB,CACOyb,eAAe1a,GAClBlO,KAAKG,KAAKuE,YAAYwJ,EAE1B,CACO2a,eAAe7Z,GAClBhP,KAAKG,KAAKqmB,mBAAmBxX,EACjC,CACO8Z,kBAAkB1oB,GACjBA,GACAJ,KAAKG,KAAKc,IAAI8nB,QAAQ3oB,EAG9B,CACO4oB,gBAAgBzjB,GACnBvF,KAAKuK,IAAIjF,iBAAiBC,EAC9B,CACOI,eAAevB,GAClBpE,KAAKuK,IAAI5E,eAAevB,EAC5B,CACOyB,UAAoC,IAA5BojB,EAAiB,wDAC5B,OAAOjpB,KAAKuK,IAAI1E,QAAQojB,EAC5B,CACOviB,WACH,OAAO1G,KAAKuK,IAAI7D,UACpB,CACOwiB,YACH,OAAOlpB,KAAKuK,IAAIvE,SAAS5F,MAC7B,CACOQ,UACHZ,KAAKuK,IAAI5J,gBACb,CACWwoB,eAAWjpB,GAClBF,KAAKuK,IAAIzD,iBAAiB5G,EAC9B,E","sources":["njslab/Raster/AppImage/AppExpressImage/AppImageEditing/API/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Canvas/EventController/Event/TouchInteraction.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Canvas/EventController/Event/MouseInteraction.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Canvas/EventController/Event/KeyboardInteraction.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Canvas/EventController/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Canvas/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Common/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ActiveCommand/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Frame/Core/RendererSVG.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Frame/Core/Renderer.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Frame/Core/ControlPoint.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Frame/Core/Transform.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Frame/Core/Interaction.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Frame/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Renderer/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageWrapper/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/Scene/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageFilter/UI/EffectLayers/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageFilter/UI/TintLayers/Base/AbstractLayer.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageFilter/UI/TintLayers/Base/LayerModule.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageFilter/UI/TintLayers/LayerModule/PlainLayer.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageFilter/UI/TintLayers/LayerModule/RadialGradientLayer.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageFilter/UI/TintLayers/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageFilter/UI/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageFilter/Controller/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/ImageFilter/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/Core/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/UI/index.ts","njslab/Raster/AppImage/AppExpressImage/AppImageEditing/index.ts"],"sourcesContent":["import { rgb2hsl, hsl2rgb, hex2rgba, FrameShapeType, FrameRatioPreset, ImageType, Environment } from '../lib';\nimport { AppImageEditing } from '..';\nexport class API {\n    public app: AppImageEditing;\n    constructor(app: AppImageEditing) {\n        this.app = app;\n    }\n    public set setTypeImageCompression(v: ImageType) {\n        this.app.core.canvas.typeImageCompression = v;\n    }\n    public shiftEnvironment(v: Environment) {\n        this.app.param.environment = v;\n        this.app.core.scene.shiftEnvironment(v);\n        this.app.core.canvas.renderForce();\n    }\n    public onClickDestroy() {\n        this.app.core.destroy();\n\n        try {\n            if (this.app.ui) {\n                this.app.ui.divExpressImageEditingWrapper.parentNode.removeChild(this.app.ui.divExpressImageEditingWrapper);\n            } else {\n                this.app.core.div.parentNode.removeChild(this.app.core.div);\n            }\n        } catch (error) {\n            console.debug(error);\n        }\n        this.app.emitAction('destroy');\n    }\n    public activateEffectEnv(fromApp: string) {\n        this.app.core.activeCommand.activateEffectEnv(fromApp);\n    }\n    public deactivateEffectEnv() {\n        this.app.core.activeCommand.deactivateEffectEnv();\n    }\n    public onClickPlace() {\n        // this.app.core.canvas.capture();\n        this.app.core.activeCommand.emitDataToSave();\n        this.onClickDestroy();\n    }\n    public onClickCancel() {\n        this.onClickDestroy();\n    }\n    public onClickReset() {\n        // TODO:\n    }\n    public onClickUndo() {\n        this.app.core.scene.undo();\n    }\n    public onClickRedo() {\n        this.app.core.scene.redo();\n    }\n    public onClickRevertToOriginal() {\n        this.app.core.activeCommand.revertToOriginal();\n    }\n    public onClickDownload() {\n        // TODO:\n    }\n    public onClickCapture() {\n        // TODO:\n    }\n    public initEffect(d: any) {\n        this.app.core.activeCommand.updateEffect(d, false);\n        this.app.core.filter.emitFilterData();\n    }\n    public updateEffect(d: any, emitNeeded: boolean = true) {\n        this.app.core.activeCommand.updateEffect(d, emitNeeded);\n    }\n    public getGeometryLength() {\n        return this.app.core.scene.dataGeometries.length;\n    }\n    public updateCropDOM() {\n        this.app.core.frame.renderer.updateSVG();\n    }\n    public getFrameSize() {\n        return this.app.core.frame.frameSize;\n    }\n    public onClickShiftShape(type: FrameShapeType) {\n        this.app.core.frame.frameShapeType = type;\n        this.app.core.renderer.captureCanvas();\n        this.app.core.common.captureState();\n    }\n    public onClickShiftShapeRatio(type: FrameRatioPreset) {\n        this.app.core.frame.frameRatioType = type;\n        this.app.core.renderer.initPostSaveImg = true;\n        this.app.core.renderer.captureCanvas();\n        this.app.core.common.captureState();\n    }\n    public onRotateCropping(degree: number) {\n        this.app.core.common.rotationByDegree(degree);\n    }\n    public onDragRotate(v: number) {\n        this.app.core.common.rotate(v);\n    }\n    public onDragZoom(v: number) {\n        this.app.core.common.scale(v);\n    }\n    public onZoomLevel(level: number) {\n        this.app.core.common.scaleByLevel(level);\n    }\n    public inputImportByURL(v: string) {\n        this.app.core.common.reset();\n        this.app.core.importImage(v);\n    }\n    public initFrame(x: number, y: number, width: number, height: number, scale: number, rotation: number, shapeType: FrameShapeType, ratio: FrameRatioPreset) {\n        this.updateFrame(x, y, width, height, scale, rotation, shapeType, ratio)\n        this.app.core.filter.update(false);\n        this.app.core.scene.captureState();\n    }\n    public updateFrame(x: number, y: number, width: number, height: number, scale: number, rotation: number, shapeType: FrameShapeType, ratio: FrameRatioPreset) {\n        // console.log(x, y)\n        this.app.core.frame.updateFrame(x, y, width, height, scale, rotation, shapeType, ratio);\n        this.app.core.canvas.renderForce();\n    }\n    public updateFrameParam(x: number, y: number, width: number, height: number, scale: number, rotation: number, shapeType: FrameShapeType, ratio: FrameRatioPreset) {\n        this.app.core.frame.updateFrameParam(x, y, width, height, scale, rotation, shapeType, ratio);\n        this.app.core.renderer.captureCanvas();\n    }\n    public updateGeometries(data: any) {\n        this.app.core.scene.dataGeometries = data;\n    }\n    public shiftFilterPreset(preset: string) {\n        this.app.core.filter.shiftEffectByPreset(preset);\n    }\n    public setScaleGlobal(scale: number) {\n        this.app.core.scene.scaleByRatio = scale;\n    }\n    public getData(needOriginalImage = false) {\n        if (needOriginalImage) {\n            this.app.core.activeCommand.forceRevertToOriginal();\n        }\n\n        return {\n            ctx: this.getCtx(),\n            ctxFiltered: this.getCtxFiltered(),\n            params: this.getParams(),\n            drawing: this.getDrawing(),\n            effecting: this.getEffecting()\n            // img: this.getImage(), // performance issue as a safeguard\n        }\n    }\n    public getEffecting() {\n        // console.trace();\n        return this.app.core.filter.getData();\n    }\n    public getDrawing() {\n        return this.app.core.scene.dataGeometries;\n    }\n    public getParams() {\n        return this.app.core.activeCommand.getParamsCropping();\n    }\n    public getImage() {\n        return this.app.core.canvas.capture();\n    }\n    public getCtx() {\n        return this.app.core.canvas.captureCtx();\n    }\n    public getCtxFiltered() {\n        return this.app.core.canvas.captureCtxFiltered();\n    }\n    public updateCoverColor(v: string) {\n\n        // const result = process_image(image);\n        const result = [hex2rgba(v)];\n        // console.log(result);\n\n        // // deSaturation\n        const colResult = [result[0][0], result[0][1], result[0][2]];\n        let hls0 = rgb2hsl(colResult[0], colResult[1], colResult[2]);\n        let hls1 = [...hls0];\n\n        // console.log(hls);\n        hls0[0] += 0.0; // Hue;\n        hls0[1] += -0.05; // Saturation;\n        if (hls0[1] < 0) { hls0[1] = 0; }\n        hls0[2] += 0.0; // Lightness;\n        // let col0 = hsl2rgb(hls0[0], hls0[1], hls0[2]);\n        // console.log('col0', col0);\n        // this.app.divHost.style.backgroundColor = `rgb(${col0[0]},${col0[1]},${col0[2]})`;\n        // if (this.ui) {\n        //     this.ui.updateStyle(col0[0], col0[1], col0[2]);\n        // }\n        // this.app.divHost.style.backgroundColor = `rgb(${col0[0]},${col0[1]},${col0[2]})`;\n        hls1[0] += 0.0; // Hue;\n        hls1[1] += 0.0; // Saturation;\n        if (hls1[1] < 0) { hls1[1] = 0; }\n        hls1[2] += -0.02; // Lightness;\n        let col1 = hsl2rgb(hls1[0], hls1[1], hls1[2]);\n        // console.log('col1', col1);\n        // this.frame.updateColorBG(col1[0], col1[1], col1[2]);\n\n\n        this.app.core.frame.updateColorBG(col1[0], col1[1], col1[2]);\n    }\n}\n","import { EventController } from '..';\nexport class TouchInteraction {\n    public controller: EventController;\n    // public down = false;\n    // public zoom: number = 1;\n    public touchPre: number[] = [-100, -100];\n    constructor(controller: EventController) {\n        this.controller = controller;\n    }\n    public touchstart = (e: TouchEvent) => {\n        this.controller.canvas.core.renderer.t = 0.0;\n        // console.log('touchstart', e);\n\n        var rect = this.controller.canvas.canvas.getBoundingClientRect();\n        const evX = e.targetTouches[0].pageX - rect.left;\n        const evY = e.targetTouches[0].pageY - rect.top;\n        this.touchPre[0] = evX;\n        this.touchPre[1] = evY;\n        this.controller.canvas.core.activeCommand.touchStartRotation = true;\n        this.controller.canvas.core.activeCommand.touchStartScale = true;\n        // this.controller.canvas.core.activeCommand.pointDown(evX, evY);\n        this.controller.canvas.core.activeCommand.pointDown(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n        // e.preventDefault();\n    }\n    public touchmove = (e: TouchEvent) => {\n        // console.log('touchmove', e);\n        if(e.targetTouches.length > 1) {\n            this.controller.canvas.core.activeCommand.rotationByTouch(e);\n            this.controller.canvas.core.activeCommand.scaleByTouch(e);\n            return\n        }\n        // var rect = this.controller.canvas.core.canvas.canvas.getBoundingClientRect();\n        // const evX = e.targetTouches[0].pageX - rect.left;\n        // const evY = e.targetTouches[0].pageY - rect.top;\n        // this.touchPre[0] = evX;\n        // this.touchPre[1] = evY;\n        // this.controller.canvas.core.activeCommand.pointDrag(evX, evY)\n\n        this.controller.canvas.core.activeCommand.pointDrag(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n        // e.preventDefault();\n    }\n    public touchcancel = (e: TouchEvent) => {\n        // console.debug('touchcancel', e);\n        this.controller.canvas.core.activeCommand.touchStartRotation = false;\n        this.controller.canvas.core.activeCommand.touchStartScale = false;\n        e.preventDefault();\n    }\n    public touchend = (e: TouchEvent) => {\n        this.controller.canvas.core.activeCommand.pointUp(-1, -1);\n        // this.controller.canvas.core.activeCommand.pointUp(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n        // e.preventDefault();\n    }\n}\n","import { EventController } from '..';\nexport class MouseInteraction {\n    public controller: EventController;\n    constructor(core: EventController) {\n        this.controller = core;\n    }\n    public mouseDown = (e: MouseEvent) => {\n        this.controller.canvas.core.activeCommand.pointDown(e.clientX, e.clientY);\n    }\n    public mouseUp = (e: MouseEvent) => {\n        this.controller.canvas.core.activeCommand.pointUp(e.clientX, e.clientY);\n    }\n    public mouseWheel = (e: WheelEvent, v: number) => {\n        this.controller.canvas.core.activeCommand.zoom(e.deltaY);\n    }\n    public mouseMove = (e: MouseEvent) => {\n        if (this.controller.canvas.core.activeCommand.isDown) {\n            this.controller.canvas.core.activeCommand.pointDrag(e.clientX, e.clientY);\n        } else {\n            this.controller.canvas.core.activeCommand.pointMove(e.clientX, e.clientY);\n        }\n    }\n    // public mouseOut = (e: MouseEvent) => {\n    //     this.controller.canvas.core.activeCommand.pointOut(e.clientX, e.clientY);\n    // }\n}\n","import { EventController } from '..';\nexport class KeyboardInteraction {\n    public controller: EventController;\n    constructor(controller: EventController) {\n        this.controller = controller;\n    }\n    public keyDown = (e: KeyboardEvent) => {\n        this.controller.canvas.core.activeCommand.hasShift = e.shiftKey;\n        // e.preventDefault();\n    }\n    public keyUp = (e: KeyboardEvent) => {\n        this.controller.canvas.core.activeCommand.hasShift = e.shiftKey;\n        // e.preventDefault();\n    }\n}\n","import { Canvas } from '..';\nimport { TouchInteraction } from './Event/TouchInteraction';\nimport { MouseInteraction } from './Event/MouseInteraction';\nimport { KeyboardInteraction } from './Event/KeyboardInteraction';\n\nexport class EventController {\n    public canvas: Canvas;\n    public touchInteraction: TouchInteraction;\n    public mouseInteraction: MouseInteraction;\n    public keyboardInteraction: KeyboardInteraction;\n    constructor(canvas: Canvas) {\n        this.canvas = canvas;\n\n        this.touchInteraction = new TouchInteraction(this);\n        this.mouseInteraction = new MouseInteraction(this);\n        this.keyboardInteraction = new KeyboardInteraction(this);\n    }\n    public appendEvent() {\n        const self = this;\n        // console.log('add e');\n\n        document.body.addEventListener('keydown', self.keyboardInteraction.keyDown, false);\n        document.body.addEventListener('keyup', self.keyboardInteraction.keyUp, false);\n\n        document.body.addEventListener('mousedown',  self.mouseInteraction.mouseDown, false);\n        document.body.addEventListener('mouseup',  self.mouseInteraction.mouseUp, false);\n        document.body.addEventListener('mousemove', self.mouseInteraction.mouseMove, false);\n        // document.body.addEventListener('mouseout',  self.mouseInteraction.mouseOut, false);\n        this.canvas.canvas.addEventListener('wheel', (e: WheelEvent) => self.mouseInteraction.mouseWheel(e, e.deltaY), false);\n\n        document.body.addEventListener('touchstart',self.touchInteraction.touchstart, false);\n        document.body.addEventListener('touchmove', self.touchInteraction.touchmove, false);\n        document.body.addEventListener('touchcancel',self.touchInteraction.touchcancel, false);\n        document.body.addEventListener('touchend',self.touchInteraction.touchend, false);\n\n        window.addEventListener('resize', self.resizeWindow, false);\n    }\n    public removeEvent() {\n        const self = this;\n\n        document.body.removeEventListener('keydown', self.keyboardInteraction.keyDown, false);\n        document.body.removeEventListener('keyup', self.keyboardInteraction.keyUp, false);\n\n        document.body.removeEventListener('mousedown',  self.mouseInteraction.mouseDown, false);\n        document.body.removeEventListener('mouseup',  self.mouseInteraction.mouseUp, false);\n        document.body.removeEventListener('mousemove', self.mouseInteraction.mouseMove, false);\n        // document.body.removeEventListener('mouseout',  self.mouseInteraction.mouseOut, false);\n\n        document.body.removeEventListener('touchstart', self.touchInteraction.touchstart, false);\n        document.body.removeEventListener('touchmove', self.touchInteraction.touchmove, false);\n        document.body.removeEventListener('touchcancel', self.touchInteraction.touchcancel, false);\n        document.body.removeEventListener('touchend', self.touchInteraction.touchend, false);\n\n        window.removeEventListener('resize', self.resizeWindow, false);\n    }\n    public resizeWindow = () => {\n        this.canvas.core.app.api.updateCropDOM();\n        this.canvas.renderForce();\n    }\n}\n","import { Core } from '..';\nimport { ImageType } from '../../lib';\nimport { EventController } from './EventController';\nexport class Canvas {\n    public core: Core;\n    public eventController: EventController;\n    public canvas: HTMLCanvasElement;\n    public ctx: CanvasRenderingContext2D;\n    public isActive: boolean = false;\n\n    public log: string;\n    public isViewChanging: boolean = false;\n    public loopNum: number = 0;\n    public needRenderloop: boolean = true;\n    public ablePan: boolean = true;\n\n    // public mousePre: number [] = [0, 0];\n    public canvasOutFiltered: HTMLCanvasElement;\n    public ctxOutFiltered: CanvasRenderingContext2D;\n    public canvasOut: HTMLCanvasElement;\n    public ctxOut: CanvasRenderingContext2D;\n    public loopNeeded = false;\n\n    public typeImageCompression: ImageType = ImageType.Png\n    private loopNumMax = 90;\n    private needcheckerboardbackground = false;\n\n    private imgOut: HTMLImageElement;\n    constructor(core: Core,) {\n        this.core = core;\n        this.loopNeeded = false;\n        this.eventController = new EventController(this);\n        this.imgOut = new Image();\n        this.imgOut.crossOrigin = 'anonymous';\n        // this.core.app.divHost.append(this.imgOut); // for debugging\n\n        this.init();\n        this.loopInit();\n    }\n    private init() {\n        const canvas = document.createElement('canvas');\n        const canvasOutMerged = document.createElement('canvas');\n        const canvasOut = document.createElement('canvas');\n        if (canvas && canvasOutMerged && canvasOut) {\n            this.canvas = canvas;\n            this.canvas.id = 'editing-view';\n            // this.canvas.style.position = 'absolute';\n            this.canvas.width = this.core.div.clientWidth;\n            this.canvas.height = this.core.div.clientHeight;\n\n            // this.canvasBG.style.width = this.core.div.clientWidth + 'px';\n            // this.canvasBG.style.height = this.core.div.clientHeight + 'px';\n            this.canvas.style.width = '100%';\n            this.canvas.style.height = '100%';\n            if (this.needcheckerboardbackground) {\n                this.canvas.style.background = 'repeating-conic-gradient(#cccccc 0% 25%, #ffffff 0% 50%) 50% / 10px 10px';\n            }\n            this.core.div.append(this.canvas);\n\n            this.canvasOutFiltered = canvasOutMerged;\n            this.canvasOutFiltered.style.border = '5px';\n            this.ctxOutFiltered = this.canvasOutFiltered.getContext('2d') as CanvasRenderingContext2D;\n            // this.core.app.divHost.append(this.canvasOut);\n\n            this.canvasOut = canvasOut;\n            this.ctxOut = this.canvasOut.getContext('2d') as CanvasRenderingContext2D;\n\n            const ctx = this.canvas.getContext('2d');\n            if (ctx) {\n                this.ctx = ctx;\n                this.isActive = true;\n                this.initEvent();\n            }\n        }\n    }\n    public initEvent() {\n        this.eventController.appendEvent();\n    }\n    public capture() {\n        // this.core.renderer.updateCanvasCapture();\n        // this.core.filter.render(this.ctxView);\n        this.imgOut.src = this.canvasOutFiltered.toDataURL(`image/${this.typeImageCompression}`, 0.8);\n        // console.log(this.imgOut)\n        // this.core.common.downloadImage(this.imgOut)\n        return this.imgOut;\n    }\n    public captureCtxFiltered() {\n        return this.ctxOutFiltered;\n    }\n    public captureCtx() {\n        return this.ctxOut;\n    }\n    private loopInit() {\n        this.needRenderloop = true;\n        this.loop();\n    }\n    public resize() {\n        this.canvas.width = this.core.div.clientWidth;\n        this.canvas.height = this.core.div.clientHeight;\n    }\n    public loop() {\n        if (!this.needRenderloop) { return; }\n        requestAnimationFrame(() => { this.loop(); });\n\n        if (this.loopNum++ < 100) {\n            if (this.loopNum++ < this.loopNumMax) {\n                let before = performance.now();\n                this.renderPre(this.ctx);\n                let after = performance.now();\n                this.log = `level: , total frames: ${this.loopNum++} (FPS: ), a loop took: ${(after - before).toFixed(2)} ms to execute.`;\n                // console.debug(this.log);\n            }\n        }\n    }\n    public clear(ctxView: CanvasRenderingContext2D) {\n        ctxView.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    }\n    public drawBackgroundWhite(ctxView: CanvasRenderingContext2D) {\n        if (this.typeImageCompression === ImageType.Jpeg) {\n            // ctxView.beginPath();\n            // ctxView.rect(0,0,ctxView.canvas.width,ctxView.canvas.height);\n            // ctxView.closePath();\n            // ctxView.fillStyle = \"#fff\";\n            // ctxView.fill();\n        }\n\n        // const size = 20;\n        // const rows = Math.floor(ctxView.canvas.width / size) + 1;\n        // const cols = Math.floor(ctxView.canvas.height / size) + 1;\n        // for (let j = 0; j < cols; j++) {\n        //     for (let i = 0; i < rows; i++) {\n        //         if ((i % 2 == 0 && j % 2 == 0) || (i % 2 != 0 && j % 2 != 0)) {\n        //             ctxView.fillStyle = \"#ffffff\";\n        //         } else {\n        //             ctxView.fillStyle = \"#cccccc\"\n        //         }\n        //         ctxView.fillRect(i * size, j * size, size, size)\n        //     }\n        // }\n    }\n    public renderForce() {\n        // if (!this.loopNeeded) {\n            // this.loop();\n        // this.core.renderer.tUpdateCP = 0;\n        this.loopNum = 0;\n        // }\n    }\n    public renderPre(ctxView: CanvasRenderingContext2D) {\n        if (!this.isActive) { return; }\n        this.clear(ctxView);\n        this.drawBackgroundWhite(ctxView)\n        this.render(ctxView);\n    }\n    public render(ctx: CanvasRenderingContext2D) {\n        // ctx.beginPath();\n        // ctx.arc(0, 0, 15, 0, 3.14 * 2);\n        // ctx.closePath()\n        // ctx.fill();\n\n    }\n    public destroy() {\n        this.needRenderloop = false;\n        this.loopNum = this.loopNumMax;\n        this.eventController.removeEvent();\n        try {\n            this.core.div.removeChild(this.canvas);\n        } catch (error) {\n            // TODO:\n        }\n\n    }\n}\n","import { toRadians } from '../../lib';\nimport { Core } from '..';\nexport class Common {\n    public core: Core;\n    constructor(core: Core) {\n        this.core = core;\n    }\n    public undo() {\n        console.log('undo');\n    }\n    public redo() {\n        console.log('undo');\n\n    }\n    public import(url: string) {\n        this.reset();\n    }\n    public reset() {\n        this.core.reset();\n    }\n    public updateCursor() {\n        if (this.core.frame.isHover) {\n            // console.log(this.core.frame.idHover)\n            if (this.core.frame.idHover === -1) {\n                this.core.activeCommand.activeCursor.dragging();\n            } else if (this.core.frame.idHover === 0 || this.core.frame.idHover === 2) {\n                this.core.activeCommand.activeCursor.set_nwse_resize();\n            } else if (this.core.frame.idHover === 1 || this.core.frame.idHover === 3) {\n                this.core.activeCommand.activeCursor.set_nesw_resize();\n            } else if (this.core.frame.idHover === 5 || this.core.frame.idHover === 7) {\n                this.core.activeCommand.activeCursor.set_ew_resize();\n            } else if (this.core.frame.idHover === 4 || this.core.frame.idHover === 6) {\n                this.core.activeCommand.activeCursor.set_ns_resize();\n            }\n        } else {\n            this.core.activeCommand.activeCursor.default();\n        }\n    }\n    public updateWidthByInput(v: number) {\n        if (v < this.core.frame.widthMin) {\n            this.core.frame.width = this.core.frame.widthMin;\n        } else if (v + this.core.frame.x > this.core.imageWrapper.img.width) {\n            this.core.frame.width = this.core.imageWrapper.img.width - this.core.frame.x;\n        } else {\n            this.core.frame.width = v;\n        }\n        this.updateSizeByInputPost();\n    }\n    public updateHeightByInput(v: number) {\n        if (v < this.core.frame.heightMin) {\n            this.core.frame.height = this.core.frame.heightMin;\n        } else if (v + this.core.frame.y > this.core.imageWrapper.img.height) {\n            this.core.frame.height = this.core.imageWrapper.img.height - this.core.frame.y;\n        } else {\n            this.core.frame.height = v;\n        }\n        this.updateSizeByInputPost();\n    }\n    private updateSizeByInputPost() {\n        this.core.frame.update();\n        this.core.canvas.renderForce();\n        this.core.canvas.canvasOutFiltered.width = this.core.frame.width;\n        this.core.canvas.canvasOutFiltered.height = this.core.frame.height;\n    }\n    public offsetByInput(v: number) {\n        // console.log(v, this.core.frame.idSelected);\n\n        if (this.core.frame.idSelected === 0 || this.core.frame.idSelected === 4 || this.core.frame.idSelected === 7 ) {\n            v *= -1;\n        }\n\n        this.core.frame.offsetByIDFreeform(this.core.frame.idSelected, v, v);\n    }\n    public rotate(v: number) {\n        this.core.activeCommand.rotationRadian = v;\n        this.postUpdate();\n    }\n    public rotationByDegree(degree: number) {\n        this.core.activeCommand.rotationRadian += toRadians(degree);\n        this.postUpdate();\n    }\n    public scale(v: number) {\n        this.core.activeCommand.zoomLevel = v;\n        this.postUpdate();\n    }\n    public scaleByLevel(level: number) {\n        level += this.core.activeCommand.zoomLevel;\n        level = level < 0.75 ? 0.75 : level;\n        level = level > 1.25 ? 1.25 : level;\n        this.core.activeCommand.zoomLevel = level;\n        this.postUpdate();\n    }\n    public downloadImage(img?: HTMLImageElement) {\n        // this.core.canvs.canvasOut;\n        const a = document.createElement('a');\n        if (img) {\n            a.href = img.src;\n        } else {\n            a.href = this.core.canvas.canvasOutFiltered.toDataURL();\n        }\n        a.download = 'image.png';\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n    }\n    public postUpdate() {\n        this.core.filter.numRendered = 0;\n        this.core.filter.update(false, false)\n        this.core.canvas.renderForce();\n    }\n    public captureState() {\n        this.core.scene.captureState();\n    }\n}\n","import { Core } from '..';\nimport { ActiveCursor  } from '../../lib';\nexport class ActiveCommand {\n    public core: Core;\n    public activeCursor: ActiveCursor;\n\n    public isDown = false;\n    public isDrag = false;\n\n    public mousePre = [0, 0];\n    public mouse = [0, 0];\n    public mouseRemapValue = [1, 1];\n    public canvasBounding: DOMRect;\n    public zoomLevel: number = 1;\n    public rotationRadian: number = 0;\n    // public translation: number[] = [0, 0];\n\n    // touch for rotation\n    public scalePre = 1;\n    public anglePre = 0;\n    public touchStartRotation = false;\n    public touchStartScale = false;\n    public hasShift = false;\n    public clickUI = false;\n    private topToleranceForClickUI = -25;\n\n    constructor(core: Core) {\n        this.core = core;\n        this.activeCursor = new ActiveCursor();\n    }\n    public toScreen(xPixel: number, yPixel: number) {\n        return [ xPixel / this.core.activeCommand.mouseRemapValue[0], yPixel / this.core.activeCommand.mouseRemapValue[1]];\n    }\n    public mousePostProcess(x: number, y: number) {\n        this.canvasBounding = this.core.canvas.canvas.getBoundingClientRect() as DOMRect;\n        //@ts-ignore\n        this.mouseRemapValue[0] = this.core.imageWrapper.img.width / this.canvasBounding.width\n        //@ts-ignore\n        this.mouseRemapValue[1] = this.core.imageWrapper.img.height / this.canvasBounding.height\n\n        this.mouse[0] = (x - this.canvasBounding.left) * this.core.imageWrapper.img.width / this.canvasBounding.width;\n        this.mouse[1] = (y - this.canvasBounding.top) * this.core.imageWrapper.img.height / this.canvasBounding.height;\n\n        // console.log('ms', this.mouseScreen);\n\n        // this.mouse[0] = x - bounding.left;\n        // this.mouse[1] = y - bounding.top;\n\n        if ( y - this.canvasBounding.top < this.topToleranceForClickUI ) {\n            this.clickUI = true;\n        } else {\n            this.clickUI = false;\n        }\n        // console.log(bounding);\n        // console.log(this.mouse);\n    }\n    public pointDown(x: number, y: number) {\n        this.mousePostProcess(x, y);\n        this.isDown = true;\n        this.core.frame.isHoverCheck(this.mouse[0], this.mouse[1]);\n        this.core.frame.updateVecPre();\n        this.mousePre[0] = this.mouse[0];\n        this.mousePre[1] = this.mouse[1];\n\n        this.core.common.postUpdate();\n    }\n    public pointUp(x: number, y: number) {\n        this.mousePostProcess(x, y);\n        this.isDrag = false;\n        this.isDown = false;\n        this.core.frame.mouseUp();\n        this.core.common.postUpdate();\n\n\n        // console.log( 'idSel', this.core.frame.idSelected, 'hover', this.core.frame.idHover);\n\n        if (this.core.frame.isMoved()) {\n            this.core.common.captureState();\n            this.core.renderer.captureCanvas();\n        }\n    }\n    // public pointOut(x: number, y: number) {\n    //     this.mouseProcess(x, y);\n    //     this.isDown = false;\n    //     this.core.frame.isHover = false;\n    //     this.isDrag = false;\n    //     // this.anglePre = 0.0;\n    //     this.core.common.postUpdate();\n    // }\n    public pointMove(x: number, y: number) {\n        this.mousePostProcess(x, y);\n\n        this.core.frame.isHoverCheck(this.mouse[0], this.mouse[1]);\n\n        this.mousePre[0] = this.mouse[0];\n        this.mousePre[1] = this.mouse[1];\n\n        this.core.common.updateCursor();\n\n        this.core.common.postUpdate();\n    }\n    public pointDrag(x: number, y: number) {\n        this.isDrag = true;\n        this.mousePostProcess(x, y);\n        // this.core.frame.isHover(x, y);\n        // console.log(x, y);\n\n        if (this.core.frame.isHover) {\n            this.mouseDragRect(this.mouse[0], this.mouse[1]);\n        } else {\n            this.mouseDragPan(this.mouse[0], this.mouse[1]);\n        }\n        // return;\n\n        this.core.common.postUpdate();\n    }\n    public mouseDragRect = (x: number, y: number) => {\n        // const xOff = x - this.mousePre[0];\n        // const yOff = y - this.mousePre[1];\n        this.core.frame.translate(this.mouse[0], this.mouse[1]);\n\n\n        // let cos = Math.cos(angle * (3.14159265358979 / 180.0));\n        // let sin = Math.sin(angle * (3.14159265358979 / 180.0));\n        // let x = v.x * cos - v.y * sin;\n        // let y = v.x * sin + v.y * cos;\n\n\n        // this.translation[0] += xOff;\n        // this.translation[1] += yOff;\n\n\n        this.mousePre[0] = this.mouse[0];\n        this.mousePre[1] = this.mouse[1];\n        // this.pointDrag(x, y);\n    }\n    public mouseDragPan = (x: number, y: number) => {\n        this.pan(this.mouse[0], this.mouse[1]);\n    }\n    public zoom(v: number) {\n        return;\n\n        // // console.log(e.deltaY);\n        // if (v < 0) {\n        //     this.zoomLevel += this.zoomLevel * 0.19;\n        // } else {\n        //     this.zoomLevel -= this.zoomLevel * 0.19;\n        // }\n\n        // this.core.common.postUpdate();\n    }\n    // public RemapByZoom(e: MouseEventData) {\n    //     e.x = (e.x - this.translation[0]) / this.zoom;\n    //     e.y = (e.y - this.translation[1]) / this.zoom;\n    //     return e;\n    // }\n    public pan(x: number, y: number) {\n        // if (!this.ablePan) { return;}\n        // const xOff = e.x - this.mousePre[0];\n        // const yOff = e.y - this.mousePre[1];\n        // this.translation[0] += xOff;\n        // this.translation[1] += yOff;\n        // console.log(this.translation);\n    }\n    public revertToOriginal() {\n        this.core.renderer.captureCanvas();\n        this.core.frame.revertToOriginal();\n        this.core.canvas.capture();\n    }\n    public forceRevertToOriginal() {\n        this.core.renderer.updateCtxForce();\n    }\n    public rotationByTouch(e: TouchEvent) {\n        this.core.canvas.renderForce();\n\n        let t0;\n        let t1;\n        if (e.targetTouches[0].clientY < e.targetTouches[1].clientY) {\n            t0 = e.targetTouches[0];\n            t1 = e.targetTouches[1];\n        } else {\n            t0 = e.targetTouches[1];\n            t1 = e.targetTouches[0];\n        }\n\n        const angle = Math.atan2(t1.clientX - t0.clientX, t1.clientY - t0.clientY);\n        const theAngle =  this.anglePre - angle;\n\n        // it happens one time when touch starts\n        if (this.touchStartRotation) {\n            this.anglePre = this.rotationRadian;\n            this.touchStartRotation = false;\n            this.anglePre = angle;\n            return;\n        }\n\n        this.rotationRadian += theAngle;\n        this.anglePre = angle;\n    }\n    public scaleByTouch(e: TouchEvent) {\n        this.core.canvas.renderForce();\n\n        let t0;\n        let t1;\n        if (e.targetTouches[0].clientY < e.targetTouches[1].clientY) {\n            t0 = e.targetTouches[0];\n            t1 = e.targetTouches[1];\n        } else {\n            t0 = e.targetTouches[1];\n            t1 = e.targetTouches[0];\n        }\n\n        const distance = Math.sqrt(\n            (t1.clientX - t0.clientX) * (t1.clientX - t0.clientX) +\n            (t1.clientY - t0.clientY) * (t1.clientY - t0.clientY)\n        );\n\n        if (this.scalePre > distance) {\n            if (this.zoomLevel > 0.4) {\n                this.zoomLevel -= 0.015;\n            }\n        } else {\n            if (this.zoomLevel < 2.0) {\n                this.zoomLevel += 0.015;\n            }\n        }\n\n        // const theZoom = this.scalePre - distance * 0.001;\n\n        // it happens one time when touch starts\n        if (this.touchStartScale) {\n            this.scalePre = this.zoomLevel;\n            this.touchStartScale = false;\n            this.scalePre = distance;\n            return;\n        }\n\n\n\n        // console.log(theZoom);\n        // this.core.canvs.eventController.zoomLevel += theZoom;\n        this.scalePre = distance;\n    }\n    public getParamsCropping() {\n        return {\n            x: Math.round(this.core.frame.x),\n            y: Math.round(this.core.frame.y),\n            width : Math.round(this.core.frame.width),\n            height: Math.round(this.core.frame.height),\n            scale: this.core.activeCommand.zoomLevel,\n            rotationRadian: this.core.activeCommand.rotationRadian,\n            shape: this.core.frame.frameShapeType,\n            aspectRatio: this.core.frame.frameRatioType,\n        }\n    }\n    public getParamsFilter() {\n        return this.core.filter.getData();\n    }\n    public emitDataToSave() {\n        const data = {\n            'crop': this.getParamsCropping(),\n            'filter': this.getParamsFilter(),\n        };\n        this.core.app.emitAction(`update@${JSON.stringify(data)}`);\n    }\n    public emitUndoRedoHistory(data: any) {\n        const dataOut = `history@${JSON.stringify(data)}`;\n        this.core.app.emitAction(dataOut);\n    }\n    public updateEffect(d: any, emitNeeded: boolean = true) {\n        this.core.filter.updateEffect(d, emitNeeded);\n    }\n    public activateEffectEnv(fromApp: string) {\n        if (fromApp !== 'markup') {\n            this.core.scene.resetState();\n        }\n        this.core.filter.activateEffectEnv();\n        this.core.frame.renderer.hide = true;\n        this.core.app.emitAction('ready@filter');\n    }\n    public deactivateEffectEnv() {\n        this.core.scene.resetState();\n        this.core.filter.deactivateEffectEnv();\n        this.core.frame.renderer.hide = false;\n\n        // reactivate the crop app\n        this.core.app.emitAction('ready@crop');\n    }\n\n}\n","import { getRectSVG } from '../../../lib';\nimport { Renderer } from './Renderer';\nexport class RendererSVG {\n    public renderer: Renderer;\n    private svgRectControl0: SVGSVGElement;\n    private svgRectControl1: SVGSVGElement;\n    private svgRectControl2: SVGSVGElement;\n    private svgRectControl3: SVGSVGElement;\n\n    private svgRectControl4: SVGSVGElement;\n    private svgRectControl5: SVGSVGElement;\n    private svgRectControl6: SVGSVGElement;\n    private svgRectControl7: SVGSVGElement;\n\n    private svgRectFrame: SVGSVGElement;\n    private svgRec: SVGRectElement;\n\n    private lineX0: SVGLineElement;\n    private lineX1: SVGLineElement;\n    private lineY0: SVGLineElement;\n    private lineY1: SVGLineElement;\n\n    constructor(renderer: Renderer) {\n        this.renderer = renderer;\n\n        const strokeWidth = 1;\n        this.svgRectFrame = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        this.svgRectFrame.setAttribute('width', `${100 + strokeWidth * 2}`);\n        this.svgRectFrame.setAttribute('height', `${100 + strokeWidth * 2}`);\n        this.svgRectFrame.setAttribute('fill-opacity', `${0}`);\n        this.svgRectFrame.style.position = 'absolute';\n        this.renderer.frame.core.div.appendChild(this.svgRectFrame);\n\n        const strokeStyle = '#CBDAE2';\n        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        rect.setAttribute('x','1');\n        rect.setAttribute('y','1');\n        rect.setAttribute('stroke-width', `${strokeWidth}`);\n        rect.setAttribute('stroke', `${strokeStyle}`);\n        this.svgRec = rect;\n        this.svgRectFrame.appendChild(rect);\n\n        // append guide lines\n        this.lineX0 = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        this.lineX0.setAttribute('stroke-width', `${strokeWidth}`);\n        this.lineX0.setAttribute('stroke', `${strokeStyle}`);\n        this.svgRectFrame.appendChild(this.lineX0);\n\n        this.lineX1 = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        this.lineX1.setAttribute('stroke-width', `${strokeWidth}`);\n        this.lineX1.setAttribute('stroke', `${strokeStyle}`);\n        this.svgRectFrame.appendChild(this.lineX1);\n\n        this.lineY0 = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        this.lineY0.setAttribute('stroke-width', `${strokeWidth}`);\n        this.lineY0.setAttribute('stroke', `${strokeStyle}`);\n        this.svgRectFrame.appendChild(this.lineY0);\n\n        this.lineY1 = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        this.lineY1.setAttribute('stroke-width', `${strokeWidth}`);\n        this.lineY1.setAttribute('stroke', `${strokeStyle}`);\n        this.svgRectFrame.appendChild(this.lineY1);\n\n\n        // append control SVG points for vertices of the frame\n        this.svgRectControl0 = getRectSVG();\n        this.renderer.frame.core.div.appendChild(this.svgRectControl0);\n\n        this.svgRectControl1 = getRectSVG();\n        this.renderer.frame.core.div.appendChild(this.svgRectControl1);\n\n        this.svgRectControl2 = getRectSVG();\n        this.renderer.frame.core.div.appendChild(this.svgRectControl2);\n\n        this.svgRectControl3 = getRectSVG();\n        this.renderer.frame.core.div.appendChild(this.svgRectControl3);\n\n        // append mid-control SVG points for edges of the frame\n        this.svgRectControl4 = getRectSVG(8, 24);\n        this.renderer.frame.core.div.appendChild(this.svgRectControl4);\n\n        this.svgRectControl5 = getRectSVG(24);\n        this.renderer.frame.core.div.appendChild(this.svgRectControl5);\n\n        this.svgRectControl6 = getRectSVG(8, 24);\n        this.renderer.frame.core.div.appendChild(this.svgRectControl6);\n\n        this.svgRectControl7 = getRectSVG(24);\n        this.renderer.frame.core.div.appendChild(this.svgRectControl7);\n    }\n    public updatePos() {\n        if (!this.renderer.frame.core.canvas && !this.renderer.frame.core.canvas.ctx) { return; }\n        const ctx = this.renderer.frame.core.canvas.ctx;\n        if (ctx.canvas.parentElement === undefined ) { return; }\n        if (ctx.canvas.parentElement.parentElement === undefined ) { return; }\n\n        const canvasElementBounding = ctx.canvas.getBoundingClientRect();\n        const heightCanvas = canvasElementBounding.height;\n\n        const heightDiv = ctx.canvas.parentElement.parentElement.parentElement.parentElement.getBoundingClientRect().height;\n        const ratio = heightDiv - heightCanvas;\n\n        let offsetFromDiv = 0;\n        if (ratio > 0) {\n            offsetFromDiv = ratio * 0.5;\n        }\n\n        // for debug\n        // console.log(canvasElementBounding.height)\n        // console.log(ctx.canvas.parentElement.parentElement.parentElement.parentElement.getBoundingClientRect().height)\n        // console.log(ctx.canvas.width , canvasElementBounding);\n        // const divBounding = this.renderer.frame.core.div.getBoundingClientRect();\n        // console.log(divBounding);\n        // console.log(this.renderer.frame.core.div);\n        // console.log(canvasElementBounding.x, this.renderer.frame.x)\n\n        const xOff = -29;\n        const yOff = -5 + offsetFromDiv;\n\n        const xOffMiddle = 22;\n        const yOffMiddle = -8;\n\n        // update control SVG points for vertices of the frame\n        //@ts-ignore\n        this.svgRectControl0.style.left = canvasElementBounding.x + xOff + (this.renderer.frame.x * canvasElementBounding.width / ctx.canvas.width) + 1 + 'px';\n        //@ts-ignore\n        this.svgRectControl0.style.top = yOff + (this.renderer.frame.y * canvasElementBounding.height / ctx.canvas.height) + 'px';\n        //@ts-ignore\n        this.svgRectControl1.style.left = canvasElementBounding.x + xOff + ((this.renderer.frame.x + this.renderer.frame.width) * canvasElementBounding.width / ctx.canvas.width) + 'px';\n        //@ts-ignore\n        this.svgRectControl1.style.top = yOff + (this.renderer.frame.y * canvasElementBounding.height / ctx.canvas.height) + 'px';\n        //@ts-ignore\n        this.svgRectControl2.style.left = canvasElementBounding.x + xOff + ((this.renderer.frame.x + this.renderer.frame.width) * canvasElementBounding.width / ctx.canvas.width) + 'px';\n        //@ts-ignore\n        this.svgRectControl2.style.top =  yOff + ((this.renderer.frame.y + this.renderer.frame.height) * canvasElementBounding.height / ctx.canvas.height) + 'px';\n        //@ts-ignore\n        this.svgRectControl3.style.left = canvasElementBounding.x + xOff + (this.renderer.frame.x * canvasElementBounding.width / ctx.canvas.width) + 1 + 'px';\n        //@ts-ignore\n        this.svgRectControl3.style.top =  yOff + ((this.renderer.frame.y + this.renderer.frame.height) * canvasElementBounding.height / ctx.canvas.height) + 'px';\n\n        // update mid-control SVG points for edges of the frame\n        //@ts-ignore\n        this.svgRectControl4.style.left = canvasElementBounding.x + xOff + (this.renderer.frame.x * canvasElementBounding.width / ctx.canvas.width) + 1 + 'px';\n        //@ts-ignore\n        this.svgRectControl4.style.top =  yOffMiddle + parseInt(this.svgRectControl0.style.top) + ((parseInt(this.svgRectControl2.style.top) - parseInt(this.svgRectControl0.style.top)) * 0.5)+ 'px';\n        //@ts-ignore\n        this.svgRectControl5.style.left = xOff + xOffMiddle + (parseInt(this.svgRectControl0.style.left) + parseInt(this.svgRectControl2.style.left)) * 0.5 + 'px';\n        //@ts-ignore\n        this.svgRectControl5.style.top =  yOff + (this.renderer.frame.y * canvasElementBounding.height / ctx.canvas.height) + 'px';\n\n        //@ts-ignore\n        this.svgRectControl6.style.left = canvasElementBounding.x + xOff + ((this.renderer.frame.x + this.renderer.frame.width) * canvasElementBounding.width / ctx.canvas.width) + 'px';\n        //@ts-ignore\n        this.svgRectControl6.style.top =  yOffMiddle + parseInt(this.svgRectControl0.style.top) + ((parseInt(this.svgRectControl2.style.top) - parseInt(this.svgRectControl0.style.top)) * 0.5)+ 'px';\n        //@ts-ignore\n        this.svgRectControl7.style.left = xOff + xOffMiddle + (parseInt(this.svgRectControl0.style.left) + parseInt(this.svgRectControl2.style.left)) * 0.5 + 'px';\n        //@ts-ignore\n        this.svgRectControl7.style.top =  yOff + ((this.renderer.frame.y + this.renderer.frame.height) * canvasElementBounding.height / ctx.canvas.height) + 'px';\n\n\n        const gridOffset = 4;\n\n        // grid guide view box\n        this.svgRectFrame.style.left = parseInt(this.svgRectControl0.style.left) + gridOffset + 'px';\n        this.svgRectFrame.style.top = parseInt(this.svgRectControl0.style.top) + gridOffset + 1 + 'px';\n        this.svgRectFrame.style.width = parseInt(this.svgRectControl1.style.left) - parseInt(this.svgRectFrame.style.left) + gridOffset + 2 + 'px';\n        this.svgRectFrame.style.height = parseInt(this.svgRectControl2.style.top) - parseInt(this.svgRectFrame.style.top) + gridOffset + 2 + 'px';\n\n        // guide rect\n        this.svgRec.style.width = parseInt(this.svgRectControl1.style.left) - parseInt(this.svgRectFrame.style.left) + gridOffset + 'px';\n        this.svgRec.style.height = parseInt(this.svgRectControl2.style.top) - parseInt(this.svgRectFrame.style.top) + gridOffset + 'px';\n\n        // guide lines\n        this.lineX0.setAttribute('x1', `1`);\n        this.lineX0.setAttribute('y1', `${parseInt(this.svgRectFrame.style.height) * 0.33}`);\n        this.lineX0.setAttribute('x2', `${parseInt(this.svgRectFrame.style.width)}`);\n        this.lineX0.setAttribute('y2', `${parseInt(this.svgRectFrame.style.height) * 0.33 + 1}`);\n\n        this.lineX1.setAttribute('x1', `1`);\n        this.lineX1.setAttribute('y1', `${parseInt(this.svgRectFrame.style.height) * 0.66}`);\n        this.lineX1.setAttribute('x2', `${parseInt(this.svgRectFrame.style.width)}`);\n        this.lineX1.setAttribute('y2', `${parseInt(this.svgRectFrame.style.height) * 0.66 + 1}`);\n\n        this.lineY0.setAttribute('x1', `${parseInt(this.svgRectFrame.style.width) * 0.33}`);\n        this.lineY0.setAttribute('y1', `1`);\n        this.lineY0.setAttribute('x2', `${parseInt(this.svgRectFrame.style.width) * 0.33}`);\n        this.lineY0.setAttribute('y2', `${parseInt(this.svgRectFrame.style.height) - 1}`);\n\n        this.lineY1.setAttribute('x1', `${parseInt(this.svgRectFrame.style.width) * 0.66}`);\n        this.lineY1.setAttribute('y1', `1`);\n        this.lineY1.setAttribute('x2', `${parseInt(this.svgRectFrame.style.width) * 0.66}`);\n        this.lineY1.setAttribute('y2', `${parseInt(this.svgRectFrame.style.height) - 1}`);\n    }\n    public set hide(v: boolean) {\n        const value = v === true ? 'none' : 'block'\n\n        this.svgRectControl0.style.display = value;\n        this.svgRectControl1.style.display = value;\n        this.svgRectControl2.style.display = value;\n        this.svgRectControl3.style.display = value;\n        this.svgRectControl4.style.display = value;\n        this.svgRectControl5.style.display = value;\n        this.svgRectControl6.style.display = value;\n        this.svgRectControl7.style.display = value;\n\n        this.svgRec.style.display = value;\n        this.lineX0.style.display = value;\n        this.lineX1.style.display = value;\n        this.lineY0.style.display = value;\n        this.lineY1.style.display = value;\n\n    }\n}\n","import { linearColorInterpolation } from '../../../lib';\nimport { Frame } from '..';\nimport { RendererSVG } from './RendererSVG';\nimport { trimContextByShape } from '../../../lib';\n// import { ExpressImageViewer } from '../../../../ExpressImageViewer';\nexport class Renderer {\n    public frame: Frame;\n\n    private _opacity = 0.0;\n    public _time = 0.0;\n    private _tSVG = 0;\n\n    // private _strokeStyle = 'rgba(200, 200, 200, 1)';\n    private _fillStyleRuntime = '';\n\n    private _fillStyle = [200, 200, 200, 1.0];\n    private _fillStyleHover = [200, 200, 200, 0.5];\n\n    private _sizePoint: number = 3;\n    private _sizeMidPoint: number = 3;\n    private rendererSVG: RendererSVG;\n    private isActive: boolean = false;\n    private needtoHideSVG: boolean = false;\n\n    constructor(frame: Frame) {\n        this.frame = frame;\n        // svg.style.position = 'absolute';\n        // this.frame.core.div.appendChild(svg);\n        // this.svg = svg;\n\n        // this.ExImageViewer = new ExpressImageViewer(this.frame.core.div, this.frame.width, this.frame.height);\n    }\n    public initPost() {\n        if (!this.isActive) {\n            this.rendererSVG = new RendererSVG(this);\n            if (this.needtoHideSVG) {\n                this.rendererSVG.hide = false;\n            }\n        }\n        this.isActive = true;\n    }\n    get sizePoint() {\n        return this._sizePoint;\n    }\n    get sizeMidPoint() {\n        return this._sizeMidPoint;\n    }\n    public updateColorBG(r: number, g: number, b: number) {\n        // console.log(r, g, b);\n        this._fillStyle[0] = r;\n        this._fillStyle[1] = g;\n        this._fillStyle[2] = b;\n\n        this._fillStyleHover[0] = r;\n        this._fillStyleHover[1] = g;\n        this._fillStyleHover[2] = b;\n    }\n    public render(ctx: CanvasRenderingContext2D) {\n        if (!this.isActive) { return; }\n        // ctx.globalCompositeOperation = 'xor';\n        this.ColorInterpolation();\n        if (this.frame.isHover) {\n            ctx.fillStyle = this._fillStyleRuntime; // this.fillStyleHover;\n        } else {\n            ctx.fillStyle = this._fillStyleRuntime; // this.fillStyle;\n        }\n        this.trimContextByShape(ctx, true);\n        this.renderPost(ctx);\n        this._time += 0.15;\n        // console.log('loop');\n    }\n    public trimContextByShape(ctx: CanvasRenderingContext2D, offset = true) {\n        trimContextByShape(ctx, this.frame.frameShapeType, this.frame.x, this.frame.y, this.frame.width, this.frame.height, offset);\n    }\n    public updateSVG() {\n        if (!this.isActive) { return; }\n        this._tSVG = 0;\n    }\n    public renderPost(ctx: CanvasRenderingContext2D) {\n        // this.ExImageViewer.render();\n        // debuger\n        // ctx.beginPath();\n        // ctx.arc(0, 0, 15, 0, 3.14 * 2);\n        // ctx.closePath()\n        // ctx.fillStyle = '#ff0000';\n        // ctx.fill();\n\n        // guides\n        // ctx.lineWidth = 1;\n        // ctx.lineDashOffset = this._t;\n        // ctx.setLineDash([4, 1]);\n        // ctx.beginPath();\n        // ctx.rect(this.frame.x, this.frame.y, this.frame.width, this.frame.height);\n        // ctx.strokeStyle = this._strokeStyle;\n        // ctx.stroke();\n        // ctx.beginPath();\n        // for (let i = 1 ; i < 3; ++i) {\n        //     ctx.moveTo(this.frame.x + this.frame.xOffGuid * i, this.frame.y);\n        //     ctx.lineTo(this.frame.x + this.frame.xOffGuid * i, this.frame.y + this.frame.height);\n        //     ctx.moveTo(this.frame.x, this.frame.y + this.frame.yOffGuid * i);\n        //     ctx.lineTo(this.frame.x + this.frame.width , this.frame.y + this.frame.yOffGuid * i);\n        // }\n        // ctx.stroke();\n        // ctx.setLineDash([]);\n\n\n        // render the back circle of selected point\n        // if (this.frame.idHover !== -1) {\n        //     ctx.beginPath();\n        //     let p = [0, 0];\n\n        //     p[0] = this.frame.cpList[this.frame.idHover].x;\n        //     p[1] = this.frame.cpList[this.frame.idHover].y;\n\n        //     ctx.arc(p[0], p[1], 8 + 2 * Math.sin(this._t * 0.75), 0, 3.14 * 2);\n        //     ctx.closePath();\n        //     ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';\n        //     ctx.fill();\n        // }\n        // end render the back circle of selected point\n\n        // render each control point of the frame\n        if (this.frame.isHover) {\n            for (let i = 0 ; i < this.frame.cpList.length; ++i) {\n                // do not need to render because SVG shapes will replace them.\n                // this.frame.cpList[i].render(ctx);\n            }\n        }\n        // end render each control point of the frame\n\n        if (this._tSVG++ < 50) {\n            this.rendererSVG.updatePos();\n        }\n    }\n    private ColorInterpolation() {\n        // let opacity = 0;\n        if (this.frame.isHover) {\n            this._opacity += 0.025; // this.tOpacityA;\n        } else {\n            this._opacity -= 0.015; // this.tOpacityB;\n        }\n\n        if (this._opacity > 0.7) {\n            this._opacity = 0.7;\n        }\n        if (this._opacity < 0.35) {\n            this._opacity = 0.35;\n        }\n\n        const col = linearColorInterpolation(this._fillStyle, this._fillStyleHover, this._opacity);\n\n        this._fillStyleRuntime = `rgba(${col[0]}, ${col[1]}, ${col[2]}, ${col[3]})`;\n    }\n    public updateGeometry(data: any) {\n        // this.ExImageViewer.updateGeometry(data);\n    }\n    public set hide(v: boolean) {\n        if (!this.isActive) { return; }\n        this.rendererSVG.hide = v;\n    }\n}\n\n","\nimport { renderVertex, distance } from '../../../lib';\nimport { Frame } from '..';\n\nexport enum CP_TYPE {\n    Endpoint = 'Endpoint',\n    Midpoint = 'Midpoint'\n}\nexport class ControlPoint {\n    public x: number;\n    public y: number;\n    public frame: Frame;\n    public id: number;\n    public type: CP_TYPE;\n    constructor(frame: Frame, id: number, type: CP_TYPE) {\n        this.frame = frame;\n        this.id = id;\n        this.type = type;\n        this.update();\n    }\n    public isHoverCheck(x: number, y: number) {\n        const [xs0, ys0] = this.frame.core.activeCommand.toScreen(this.x, this.y);\n        const [xs1, ys1] = this.frame.core.activeCommand.toScreen(x, y)\n\n        if (distance(xs0, ys0, xs1, ys1) < this.frame.r) {\n            return this.id;\n        }\n        return -1;\n    }\n    public update() {\n        if (this.type === CP_TYPE.Endpoint) {\n            if (this.id === 0) {\n                this.x = this.frame.x;\n                this.y = this.frame.y;\n            } else if (this.id === 1) {\n                this.x = this.frame.x + this.frame.width;\n                this.y = this.frame.y;\n            } else if (this.id === 2) {\n                this.x = this.frame.x + this.frame.width;\n                this.y = this.frame.y + this.frame.height;\n            } else if (this.id === 3) {\n                this.x = this.frame.x;\n                this.y = this.frame.y + this.frame.height;\n            }\n        } else if (this.type === CP_TYPE.Midpoint) {\n            if (this.id === 4) {\n                this.x = this.frame.x + this.frame.width * 0.5;\n                this.y = this.frame.y;\n            } else if (this.id === 5) {\n                this.x = this.frame.x + this.frame.width;\n                this.y = this.frame.y + this.frame.height * 0.5;\n            } else if (this.id === 6) {\n                this.x = this.frame.x + this.frame.width * 0.5;\n                this.y = this.frame.y + this.frame.height;\n            } else if (this.id === 7) {\n                this.x = this.frame.x;\n                this.y = this.frame.y + this.frame.height * 0.5;\n            }\n        }\n\n    }\n    public render(ctx: CanvasRenderingContext2D) {\n        // debugger\n        // ctx.beginPath();\n        // ctx.arc(this.x ,this.y, 10, 0, Math.PI * 2.0);\n        // ctx.closePath();\n        // ctx.fillStyle = '#ff0000';\n        // ctx.fill();\n\n        if (this.type === CP_TYPE.Endpoint) {\n            if (this.id === 0) {\n                renderVertex(ctx, this.frame.x, this.frame.y, this.frame.renderer.sizePoint, this.frame.renderer.sizePoint);\n            } else if (this.id === 1) {\n                renderVertex(ctx, this.frame.x + this.frame.width, this.frame.y, this.frame.renderer.sizePoint, this.frame.renderer.sizePoint);\n            } else if (this.id === 2) {\n                renderVertex(ctx, this.frame.x + this.frame.width, this.frame.y + this.frame.height, this.frame.renderer.sizePoint, this.frame.renderer.sizePoint);\n            } else if (this.id === 3) {\n                renderVertex(ctx, this.frame.x, this.frame.y + this.frame.height, this.frame.renderer.sizePoint, this.frame.renderer.sizePoint);\n            }\n        } else if (this.type === CP_TYPE.Midpoint) {\n            if (this.id === 4) {\n                renderVertex(ctx, this.frame.x + this.frame.width * 0.5, this.frame.y, this.frame.renderer.sizeMidPoint * 4, this.frame.renderer.sizeMidPoint);\n            } else if (this.id === 5) {\n                renderVertex(ctx, this.frame.x + this.frame.width, this.frame.y + this.frame.height * 0.5, this.frame.renderer.sizeMidPoint, this.frame.renderer.sizeMidPoint * 4);\n            } else if (this.id === 6) {\n                renderVertex(ctx, this.frame.x + this.frame.width * 0.5, this.frame.y + this.frame.height, this.frame.renderer.sizeMidPoint * 4, this.frame.renderer.sizeMidPoint);\n            } else if (this.id === 7) {\n                renderVertex(ctx, this.frame.x , this.frame.y + this.frame.height * 0.5, this.frame.renderer.sizeMidPoint, this.frame.renderer.sizeMidPoint * 4);\n            }\n        }\n    }\n}\n","import { getRatioByNewWidth, getRatioByNewHeight } from '../../../lib';\nimport { Frame } from '..';\nexport class Transform {\n    public frame: Frame;\n    private safeguardForDraggingOutOfExtent = true;\n    constructor(frame: Frame) {\n        this.frame = frame;\n    }\n    public offsetByIDConstraint(id: number, x: number, y: number) {\n\n        // safeguard for the min mouse pos x y\n        x = x < 0 ? 0 : x;\n        y = y < 0 ? 0 : y;\n\n        let xOff;\n        let yOff;\n        // let offset;\n        let ratio = [this.frame.width, this.frame.height];\n        let newRatio;\n\n        switch (id) {\n            case 0:\n                xOff = this.frame.x - x;\n                newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n\n                // safeguard out of extent\n                if (this.frame.y + ratio[1] - newRatio[1] < -1) {\n                    if (this.safeguardForDraggingOutOfExtent) {\n                        if (this.frame.y < 1) {\n                            break;\n                        }\n                        xOff = 1;\n                        newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n\n                        this.frame.x -= 1;\n                        this.frame.width = newRatio[0]\n                        this.frame.y += ratio[1] - newRatio[1];\n                        this.frame.height = newRatio[1];\n                    }\n                    break;\n                }\n\n                // safeguard for min\n                if (this.frame.widthMin > newRatio[0] || this.frame.heightMin > newRatio[1]) {\n                    break;\n                }\n\n                this.frame.x = x;\n                this.frame.width = newRatio[0]\n                this.frame.y += ratio[1] - newRatio[1];\n                this.frame.height = newRatio[1];\n                break;\n            case 1:\n                xOff = x - this.frame.x - this.frame.width;\n                newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n\n                // safeguard out of extent\n                if (this.frame.y + ratio[1] - newRatio[1] < -1 || this.frame.x + newRatio[0] > this.frame.core.canvas.canvas.width ) {\n                    if (this.safeguardForDraggingOutOfExtent) {\n                        // console.log(this.frame.y );\n                        if (this.frame.y < -1 || this.frame.x + this.frame.width > this.frame.core.canvas.canvas.width ) {\n                            break;\n                        }\n                        xOff = 1;\n                        newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n\n                        this.frame.y += ratio[1] - newRatio[1];\n                        this.frame.width = newRatio[0]\n                        this.frame.height = newRatio[1];\n                    }\n                    break;\n                }\n\n                // safeguard for min\n                if (this.frame.widthMin > newRatio[0] || this.frame.heightMin > newRatio[1]) {\n                    break;\n                }\n\n                this.frame.y += ratio[1] - newRatio[1];\n                this.frame.width = newRatio[0]\n                this.frame.height = newRatio[1];\n                break;\n            case 2:\n                xOff = x - this.frame.x - this.frame.width;\n                newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n\n                // safeguard out of extent\n                if (this.frame.x + newRatio[0] > this.frame.core.canvas.canvas.width || this.frame.y + newRatio[1] > this.frame.core.canvas.canvas.height) {\n                    if (this.safeguardForDraggingOutOfExtent) {\n                        if (this.frame.x + this.frame.width > this.frame.core.canvas.canvas.width || this.frame.y + this.frame.height > this.frame.core.canvas.canvas.height) {\n                            break;\n                        }\n                        xOff = 1;\n                        newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n                        this.frame.width = newRatio[0]\n                        this.frame.height -= ratio[1] - newRatio[1];\n                    }\n                    break;\n                }\n\n                // safeguard for min\n                if (this.frame.widthMin > newRatio[0] || this.frame.heightMin > newRatio[1]) {\n                    break;\n                }\n\n                this.frame.width = newRatio[0]\n                this.frame.height -= ratio[1] - newRatio[1];\n                break;\n            case 3:\n                xOff = this.frame.x - x;\n                newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n\n                // safeguard out of extent\n                if (this.frame.x - xOff < 0 || this.frame.y + newRatio[1] > this.frame.core.canvas.canvas.height) {\n                    if (this.safeguardForDraggingOutOfExtent) {\n                        if (this.frame.y + this.frame.height + 1 > this.frame.core.canvas.canvas.height\n                            // || this.frame.x < 1\n                            ) {\n                            break;\n                        }\n                        xOff = 1;\n                        newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n                        this.frame.x -= newRatio[0] - ratio[0];\n                        this.frame.width = newRatio[0];\n                        this.frame.height -= ratio[1] - newRatio[1];\n                    }\n                    break;\n                }\n\n                // safeguard for min\n                if (this.frame.widthMin < newRatio[0] && this.frame.heightMin < newRatio[1]) {\n                    this.frame.x = x;\n                    this.frame.width = newRatio[0];\n                    this.frame.height -= ratio[1] - newRatio[1];\n                }\n                break;\n            case 4: // top\n                yOff = this.frame.y - y;\n                newRatio = getRatioByNewHeight(ratio[0], ratio[1], ratio[1] + yOff);\n\n                // safeguard out of extent\n                if ((this.frame.x + (ratio[0] - newRatio[0]) * 0.5) < 0 || this.frame.x + newRatio[0] > this.frame.core.canvas.canvas.width ) {\n                    if (this.safeguardForDraggingOutOfExtent) {\n                        if (this.frame.x < 0 || this.frame.x + this.frame.width - 1 > this.frame.core.canvas.canvas.width) {\n                            break;\n                        }\n                        yOff = 1;\n                        newRatio = getRatioByNewHeight(ratio[0], ratio[1], ratio[1] + yOff);\n                        this.frame.x += (ratio[0] - newRatio[0]) * 0.5;\n                        this.frame.width = newRatio[0];\n                        this.frame.y += -1;\n                        this.frame.height += yOff;\n                    }\n                    break;\n                }\n\n                // safeguard for min\n                if (this.frame.height + yOff >= this.frame.heightMin) {\n                    this.frame.x += (ratio[0] - newRatio[0]) * 0.5;\n                    this.frame.width = newRatio[0];\n                    this.frame.y = y;\n                    this.frame.height += yOff;\n                }\n                break;\n            case 5: // right\n                xOff = x - this.frame.x - this.frame.width;\n                newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n\n                // safeguard out of extent\n                if (this.frame.y + (ratio[1] - newRatio[1]) * 0.5 < 0 || this.frame.y + newRatio[1] > this.frame.core.canvas.canvas.height) {\n                    if (this.safeguardForDraggingOutOfExtent) {\n                        if (this.frame.y < 0 || this.frame.y + this.frame.height > this.frame.core.canvas.canvas.height ||\n                            this.frame.x + this.frame.width > this.frame.core.canvas.canvas.width ) {\n                            break;\n                        }\n                        xOff = 1;\n                        newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n                        this.frame.y += (ratio[1] - newRatio[1]) * 0.5;\n                        this.frame.width = newRatio[0]\n                        this.frame.height = newRatio[1];\n                    }\n                    break;\n                }\n\n                // safeguard for min\n                if (this.frame.widthMin <= newRatio[0] && this.frame.heightMin <= newRatio[1]\n                    && x <= this.frame.core.canvas.canvas.width) {\n                    // console.log(xOff);\n                    this.frame.y += (ratio[1] - newRatio[1]) * 0.5;\n                    this.frame.width = newRatio[0]\n                    this.frame.height = newRatio[1];\n                }\n                break;\n            case 6: // bottom\n                yOff = y - this.frame.y - this.frame.height;\n                newRatio = getRatioByNewHeight(ratio[0], ratio[1], ratio[1] + yOff);\n\n                // safeguard out of extent\n                if ((this.frame.x + (ratio[0] - newRatio[0]) * 0.5) < 0 || this.frame.x + newRatio[0] > this.frame.core.canvas.canvas.width ) {\n                    if (this.safeguardForDraggingOutOfExtent) {\n                        if (this.frame.x < -1 ||\n                            this.frame.x + this.frame.width > this.frame.core.canvas.canvas.width ||\n                            this.frame.y + this.frame.height > this.frame.core.canvas.canvas.height) {\n                            break;\n                        }\n                        yOff = +1\n                        newRatio = getRatioByNewHeight(ratio[0], ratio[1], ratio[1] + yOff);\n                        this.frame.x += (ratio[0] - newRatio[0]) * 0.5;\n                        this.frame.width = newRatio[0];\n                        this.frame.height += yOff;\n                    }\n                    break;\n                }\n\n                // safeguard for min\n                if (this.frame.height + yOff >= this.frame.heightMin && y <= this.frame.core.canvas.canvas.height) {\n                    this.frame.x += (ratio[0] - newRatio[0]) * 0.5;\n                    this.frame.width = newRatio[0];\n                    this.frame.height += yOff;\n                }\n                break;\n            case 7: // left\n                xOff = this.frame.x - x;\n                newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n\n                // safeguard out of extent\n                if (this.frame.y + (ratio[1] - newRatio[1]) * 0.5 < 0 || this.frame.y + newRatio[1] > this.frame.core.canvas.canvas.height) {\n                    if (this.safeguardForDraggingOutOfExtent) {\n                        if (this.frame.y < 1 || this.frame.y + this.frame.height > this.frame.core.canvas.canvas.height) {\n                            break;\n                        }\n                        xOff = 1;\n                        newRatio = getRatioByNewWidth(ratio[0], ratio[1], ratio[0] + xOff);\n                        this.frame.x -= newRatio[0] - ratio[0];\n                        this.frame.width += xOff;\n                        this.frame.y += (ratio[1] - newRatio[1]) * 0.5;\n                        this.frame.height = newRatio[1];\n                    }\n                    break;\n                }\n\n                // safeguard for min\n                if (this.frame.width + xOff >= this.frame.widthMin && this.frame.height >= this.frame.heightMin) {\n                    this.frame.x = x;\n                    this.frame.width += xOff;\n                    this.frame.y += (ratio[1] - newRatio[1]) * 0.5;\n                    this.frame.height = newRatio[1];\n                }\n                break;\n            default:\n\n                xOff = x - this.frame.core.activeCommand.mousePre[0];\n                yOff = y - this.frame.core.activeCommand.mousePre[1];\n\n                // safeguard for min x y offset for pos\n                xOff = this.frame.x + xOff < 0 ? 0 : xOff;\n                yOff = this.frame.y + yOff < 0 ? 0 : yOff;\n                if (x === 0 ) {\n                    this.frame.x = 0;\n                    break;\n                }\n                if (y === 0 ) {\n                    this.frame.y = 0;\n                    break;\n                }\n\n                // safeguard for max x y offset for pos\n                if (this.frame.x + this.frame.width + xOff > this.frame.core.canvas.canvas.width) {\n                    this.frame.x += this.frame.core.canvas.canvas.width - this.frame.x - this.frame.width;\n                    break;\n                }\n                if (this.frame.y + this.frame.height + yOff > this.frame.core.canvas.canvas.height) {\n                    this.frame.y += this.frame.core.canvas.canvas.height - this.frame.y - this.frame.height;\n                    break;\n                }\n\n\n                this.frame.x += xOff;\n                this.frame.y += yOff;\n                break;\n        }\n        this.updatePost();\n    }\n    public offsetByIDFreeform(id: number, x: number, y: number) {\n        if (this.frame.core.activeCommand.hasShift) {\n            this.offsetByIDConstraint(id, x, y );\n            return;\n        }\n        // safeguard for the min mouse pos x y\n        x = x < 0 ? 0 : x;\n        y = y < 0 ? 0 : y;\n\n        let xOff;\n        let yOff;\n\n        switch (id) {\n            case 0:\n                xOff = this.frame.x - x;\n                if (this.frame.width + xOff >= this.frame.widthMin) {\n                    this.frame.x = x;\n                    this.frame.width += xOff;\n                }\n\n                yOff = this.frame.y - y;\n                if (this.frame.height + yOff >= this.frame.heightMin) {\n                    this.frame.y = y;\n                    this.frame.height += yOff;\n                }\n\n                break;\n            case 1:\n\n                xOff = x - this.frame.x - this.frame.width;\n                if (this.frame.width + xOff >= this.frame.widthMin ) {\n                    // safeguard if the xOff is bigger than the canvas's width\n                    if (this.frame.x + this.frame.width + xOff > this.frame.core.canvas.canvas.width) {\n                        let remaining =  this.frame.core.canvas.canvas.width - this.frame.x - this.frame.width;\n                        this.frame.width += remaining;\n                    } else {\n                        this.frame.width += xOff;\n                    }\n                }\n\n                yOff = this.frame.y - y;\n                if (this.frame.height + yOff >= this.frame.heightMin) {\n                    this.frame.y = y;\n                    this.frame.height += yOff;\n                }\n                break;\n            case 2:\n\n                // safeguard for min\n                xOff = x - this.frame.x < this.frame.widthMin ? this.frame.widthMin : x - this.frame.x;\n                yOff = y - this.frame.y < this.frame.heightMin ? this.frame.heightMin : y - this.frame.y;\n\n                // safeguard for max\n                xOff = this.frame.x + xOff > this.frame.core.canvas.canvas.width ? this.frame.core.canvas.canvas.width - this.frame.x : xOff;\n                yOff = this.frame.y + yOff > this.frame.core.canvas.canvas.height ? this.frame.core.canvas.canvas.height - this.frame.y : yOff;\n\n                this.frame.width = xOff\n                this.frame.height = yOff;\n                break;\n            case 3:\n                xOff = this.frame.x - x;\n                if (this.frame.width + xOff >= this.frame.widthMin) {\n                    this.frame.x = x;\n                    this.frame.width += xOff;\n                }\n\n                yOff = y - this.frame.y < this.frame.heightMin ? this.frame.heightMin : y - this.frame.y;\n                this.frame.height = this.frame.y + yOff > this.frame.core.canvas.canvas.height ? this.frame.core.canvas.canvas.height - this.frame.y : yOff;\n                break;\n            case 4:\n                yOff = this.frame.y - y;\n                if (this.frame.height + yOff >= this.frame.heightMin) {\n                    this.frame.y = y;\n                    this.frame.height += yOff;\n                }\n                break;\n            case 5:\n                xOff = x - this.frame.x - this.frame.width;\n                if (this.frame.width + xOff >= this.frame.widthMin ) {\n                    // safeguard if the xOff is bigger than the canvas's width\n                    if (this.frame.x + this.frame.width + xOff > this.frame.core.canvas.canvas.width) {\n                        let remaining =  this.frame.core.canvas.canvas.width - this.frame.x - this.frame.width;\n                        this.frame.width += remaining;\n                    } else {\n                        this.frame.width += xOff;\n                    }\n                }\n                break;\n            case 6:\n                yOff = y - this.frame.y < this.frame.heightMin ? this.frame.heightMin : y - this.frame.y;\n                this.frame.height = this.frame.y + yOff > this.frame.core.canvas.canvas.height ? this.frame.core.canvas.canvas.height - this.frame.y : yOff;\n                break;\n            case 7:\n                xOff = this.frame.x - x;\n                if (this.frame.width + xOff >= this.frame.widthMin) {\n                    this.frame.x = x;\n                    this.frame.width += xOff;\n                }\n                break;\n            default:\n\n                xOff = x - this.frame.core.activeCommand.mousePre[0];\n                yOff = y - this.frame.core.activeCommand.mousePre[1];\n\n                // safeguard for min x y offset for pos\n                xOff = this.frame.x + xOff < 0 ? 0 : xOff;\n                yOff = this.frame.y + yOff < 0 ? 0 : yOff;\n                if (x === 0 ) {\n                    this.frame.x = 0;\n                    break;\n                }\n                if (y === 0 ) {\n                    this.frame.y = 0;\n                    break;\n                }\n\n                // safeguard for max x y offset for pos\n                if (this.frame.x + this.frame.width + xOff > this.frame.core.canvas.canvas.width) {\n                    this.frame.x += this.frame.core.canvas.canvas.width - this.frame.x - this.frame.width;\n                    break;\n                }\n                if (this.frame.y + this.frame.height + yOff > this.frame.core.canvas.canvas.height) {\n                    this.frame.y += this.frame.core.canvas.canvas.height - this.frame.y - this.frame.height;\n                    break;\n                }\n\n\n                this.frame.x += xOff;\n                this.frame.y += yOff;\n                break;\n        }\n        this.updatePost();\n    }\n    public updatePost() {\n        this.updateGuides();\n        this.frame.update();\n        this.frame.core.filter.update(false);\n        this.frame.core.canvas.renderForce();\n    }\n    public updateGuides() {\n        this.frame.xOffGuid = this.frame.width / 3;\n        this.frame.yOffGuid = this.frame.height / 3;\n        this.updateCenterCV();\n    }\n    public updateCenterCV() {\n        this.frame.cv[0] = this.frame.x + this.frame.width * 0.5;\n        this.frame.cv[1] = this.frame.y + this.frame.height * 0.5;\n    }\n    // private resizeConstraintRatio(): number[] {\n    //     const xx = this.host.pts[1].vec.x - this.host.pts[0].vec.x;\n    //     const yy = this.host.pts[2].vec.y - this.host.pts[1].vec.y;\n    //     return [xx, yy];\n    //   }\n}\n","import { Frame } from '..';\nexport class Interaction {\n    public frame: Frame;\n    private tolerance: number = 2.5;\n    constructor(frame: Frame) {\n        this.frame = frame;\n    }\n    public mouseUp() {\n        this.frame.isHover = false;\n        if (this.frame.idHover !== -1) {\n            this.frame.idSelected = this.frame.idHover;\n        }\n        this.checkSizeToOriginal();\n    }\n    public isHoverCheck(x: number, y: number) {\n\n        for (let i = 0; i < this.frame.cpList.length; ++i) {\n            const idCP = this.frame.cpList[i].isHoverCheck(x, y);\n            if (idCP !== -1) {\n                this.frame.isHover = true;\n                this.frame.idHover = idCP;\n                return true;\n            }\n        }\n\n        if (this.frame.x < x  && this.frame.x + this.frame.width > x &&\n            this.frame.y < y  && this.frame.y + this.frame.height > y) {\n            this.frame.idHover = -1;\n            this.frame.isHover = true;\n            return true;\n        }\n\n        this.frame.idHover = -1;\n        this.frame.isHover = false;\n        return false;\n    }\n    private checkSizeToOriginal() {\n        if (\n            this.frame.width < this.frame.core.imageWrapper.img.width + this.tolerance  && this.frame.width > this.frame.core.imageWrapper.img.width - this.tolerance  &&\n            this.frame.height < this.frame.core.imageWrapper.img.height + this.tolerance  && this.frame.height > this.frame.core.imageWrapper.img.height - this.tolerance\n            ) {\n                this.frame.x = 0\n                this.frame.y = 0\n                this.frame.width = this.frame.core.imageWrapper.img.width;\n                this.frame.height = this.frame.core.imageWrapper.img.height;\n                return;\n            }\n        if (this.frame.width < this.frame.core.imageWrapper.img.width + this.tolerance  && this.frame.width > this.frame.core.imageWrapper.img.width - this.tolerance ) {\n            this.frame.x = 0\n            this.frame.width = this.frame.core.imageWrapper.img.width;\n            return;\n        }\n        if (this.frame.height < this.frame.core.imageWrapper.img.height + this.tolerance  && this.frame.height > this.frame.core.imageWrapper.img.height - this.tolerance ) {\n            this.frame.y = 0\n            this.frame.height = this.frame.core.imageWrapper.img.height;\n            return;\n        }\n    }\n}\n","import { FrameShapeType, FrameRatioPreset } from '../../lib';\nimport { Renderer } from './Core/Renderer';\nimport { ControlPoint, CP_TYPE } from './Core/ControlPoint';\nimport { Transform } from './Core/Transform';\nimport { Interaction } from './Core/Interaction';\nimport { Core } from '..';\nexport class Frame {\n    public renderer: Renderer;\n    public transform: Transform;\n    public interaction: Interaction;\n    public idHover = -1;\n    public idSelected = -1;\n    public isHover = false;\n    public x = 100;\n    public y = 100;\n    public width = 300;\n    public height = 300;\n    public scale = 1;\n    public rotation = 0.;\n\n    public xOffGuid = 0;\n    public yOffGuid = 0;\n\n    public r = 19;\n\n    public cv: number[] = [0, 0];\n    public cvPre: number[] = [0, 0];\n    public core: Core;\n\n    public cpList: ControlPoint[] = [];\n    private _widthMin = 40;\n    private _heightMin = 40;\n\n    private _frameRatioType: FrameRatioPreset = FrameRatioPreset.Original;\n    private _frameShapeType: FrameShapeType = FrameShapeType.Rectangle;\n\n    constructor(core: Core) {\n        this.core = core;\n        this.init();\n    }\n    public init() {\n        this.xOffGuid = this.width / 3;\n        this.yOffGuid = this.height / 3;\n\n        this.cpList = [\n            new ControlPoint(this, 0, CP_TYPE.Endpoint),\n            new ControlPoint(this, 1, CP_TYPE.Endpoint),\n            new ControlPoint(this, 2, CP_TYPE.Endpoint),\n            new ControlPoint(this, 3, CP_TYPE.Endpoint),\n\n            new ControlPoint(this, 4, CP_TYPE.Midpoint),\n            new ControlPoint(this, 5, CP_TYPE.Midpoint),\n            new ControlPoint(this, 6, CP_TYPE.Midpoint),\n            new ControlPoint(this, 7, CP_TYPE.Midpoint),\n        ];\n\n        // if (this.core.app.param.colorCover) {\n        //     // this.fillStyle = this.core.app.param.colorCover;\n        //     // this.fillStyleHover = hexToCanvasColor(this.core.app.param.colorCover, 0.5);\n        // }\n\n        this.interaction = new Interaction(this);\n        this.transform = new Transform(this);\n        this.renderer = new Renderer(this);\n        // this.update();\n\n    }\n    public set frameRatioType(v: FrameRatioPreset) {\n        this._frameRatioType = v;\n        this.setRatio(v);\n    }\n    public get frameRatioType() {\n        return this._frameRatioType;\n    }\n    public get widthMin() {\n        return this._widthMin * this.core.imageWrapper.img.width / this.core.activeCommand.canvasBounding.width;\n    }\n    public get heightMin() {\n        return this._heightMin * this.core.imageWrapper.img.height / this.core.activeCommand.canvasBounding.height;\n    }\n    public setRatio(v: FrameRatioPreset) {\n        let width = this.core.canvas.canvas.width;\n        let height = this.core.canvas.canvas.height;\n        let ratio = 0;\n        switch (this._frameRatioType) {\n            case FrameRatioPreset.Square:\n                let isLandscape = this.core.canvas.canvas.width > this.core.canvas.canvas.height ? true : false;\n                if (isLandscape) { // landscape\n                    this.updateFrameByRatio(height, height, isLandscape);\n                } else { // portrait\n                    this.updateFrameByRatio(width, width, isLandscape);\n                }\n                break;\n            case FrameRatioPreset.Fixed_3_2:\n                ratio =  3 / 2;\n                if (width / height < ratio) {\n                    this.updateFrameByRatio(width,  width / ratio , false);\n                } else {\n                    this.updateFrameByRatio(height * ratio, height, true);\n                }\n                break;\n            case FrameRatioPreset.Fixed_4_3:\n                ratio =  4 / 3;\n                if (width / height < ratio) {\n                    this.updateFrameByRatio(width,  width / ratio , false);\n                } else {\n                    this.updateFrameByRatio(height * ratio, height, true);\n                }\n                break;\n            case FrameRatioPreset.Fixed_16_9:\n                ratio = 16 / 9;\n                if (width / height < ratio) {\n                    this.updateFrameByRatio(width,  width / ratio , false);\n                } else {\n                    this.updateFrameByRatio(height * ratio, height, true);\n                }\n                break;\n            case FrameRatioPreset.Original:\n                this.initFrame();\n                break;\n            default:\n                break;\n        }\n    }\n    public set frameShapeType(type: FrameShapeType) {\n        this._frameShapeType = type;\n        this.core.canvas.renderForce();\n    }\n    public get frameShapeType() {\n        return this._frameShapeType;\n    }\n    public updateFrameByRatio(width: number, height: number, landscape: boolean) {\n        if (landscape) { // landscape\n            this.updateFrame((this.core.canvas.canvas.width * 0.5) - (width * 0.5), 0, width, height, 1, 0, this.frameShapeType, this.frameRatioType);\n        } else { // portrait\n            this.updateFrame(0, (this.core.canvas.canvas.height * 0.5) - (height * 0.5), width, height, 1, 0, this.frameShapeType, this.frameRatioType);\n        }\n    }\n    public updateFrameParam(x: number, y: number, width: number, height: number, scale: number, rotation: number, shapeType: FrameShapeType, ratio: FrameRatioPreset) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.scale = scale;\n        this.rotation = rotation;\n        this.frameShapeType = shapeType;\n        this._frameRatioType = ratio;\n    }\n    public updateFrame(x: number, y: number, width: number, height: number, scale: number, rotation: number, shapeType: FrameShapeType, ratio: FrameRatioPreset) {\n        this.updateFrameParam(x, y, width, height, scale, rotation, shapeType, ratio);\n        this.update();\n    }\n    public initFrame() {\n        this._frameRatioType = FrameRatioPreset.Original;\n        this._frameShapeType = FrameShapeType.Rectangle;\n        this.width = 200;\n        this.height = 200;\n\n        if (this.core.imageWrapper.img) {\n            this.width = this.core.imageWrapper.img.width;\n            this.height = this.core.imageWrapper.img.height;\n        }\n\n        this.xOffGuid = this.width / 5;\n        this.yOffGuid = this.height / 5;\n\n        this.x = 0; //this.xOffGuid;\n        this.y = 0; //this.yOffGuid;\n\n        // this.width = Math.floor(this.width - this.xOffGuid * 2);\n        // this.height = Math.floor(this.height - this.yOffGuid * 2);\n\n        this.cv[0] = this.x + this.width * 0.5;\n        this.cv[1] = this.y + this.height * 0.5;\n        this.cvPre[0] = this.cv[0];\n        this.cvPre[1] = this.cv[1];\n\n        this.core.canvas.canvasOutFiltered.width = this.core.frame.width;\n        this.core.canvas.canvasOutFiltered.height = this.core.frame.height;\n\n        //\n        this.update();\n        this.updateUIWidthHeight();\n        this.core.renderer.initPostSaveImg = true;\n        this.renderer.initPost(); // after injecting image, we want to init SVG control points for frame\n\n\n        // this.core.scene.scaleByRatio = ((this.core.img.width / this.core.canvas.canvas.width) +\n        //     (this.core.img.height / this.core.canvas.canvas.height)) * 0.5;\n\n\n        // this.core.scene.scaleByRatio =\n        //     ((this.core.img.width / this.core.div.clientWidth) +\n        //     (this.core.img.height / this.core.div.clientHeight)) * 0.5;\n    }\n    public revertToOriginal() {\n        this.core.scene.dataGeometries = [];\n        this.core.app.emitAction('update-geometry@[]')\n\n        this.core.filter.revertToOriginal();\n        this.initFrame();\n        this.update();\n        this.core.renderer.captureCanvas();\n        this.core.scene.captureState();\n\n        if (this.core.filter.activate) {\n            this.core.app.emitAction(`update-container-size@original`);\n        }\n    }\n    public updateColorBG(r: number, g: number, b: number) {\n        this.renderer.updateColorBG(r, g, b);\n    }\n    public update() {\n        for (let i = 0 ; i < this.cpList.length; ++i) {\n            this.cpList[i].update();\n        }\n        this.transform.updateGuides();\n        this.renderer.updateSVG();\n    }\n    public isHoverCheck(x: number, y: number) {\n        return this.interaction.isHoverCheck(x, y);\n    }\n    public mouseUp() {\n        this.idSelected = -1;\n        return this.interaction.mouseUp();\n    }\n    public isMoved() {\n        if (this.cv[0] === this.cvPre[0] && this.cv[1] === this.cvPre[1]) {\n            return false;\n        } else {\n            return true;\n        }\n\n    }\n    public offsetByIDFreeform(id: number, xOff: number, yOff: number) {\n        return this.transform.offsetByIDFreeform(id, xOff, yOff);\n    }\n    public render(ctx: CanvasRenderingContext2D) {\n        this.renderer.render(ctx);\n    }\n    public translate(xOff: number, yOff: number) {\n        let oldVersion = true;\n        if (oldVersion) {\n\n            switch (this._frameRatioType) {\n                case FrameRatioPreset.Freeform:\n                    this.offsetByIDFreeform(this.idHover, xOff, yOff);\n                    break;\n                default:\n                    this.transform.offsetByIDConstraint(this.idHover, xOff, yOff);\n                    break;\n            }\n\n            this.updateUIWidthHeight();\n            // console.log(this.frameSize);\n            // const xx = -this.x;\n            // const yy = -this.y;\n\n            // this.core.img.style.objectPosition = `${xx}px ${yy}px `;\n\n\n            // this.core.img.width = this.core.frame.width\n            // this.core.img.height = this.core.frame.height\n\n        } else {\n            // console.log(xOff, yOff, this.idHover);\n\n            // if (this.idHover === -1) {\n            //     if (this.x < 0) {\n            //         return;\n            //     }\n            // }\n\n            if (this.idHover === -1) {\n                if (this.x < 0) { this.x  = 0; }\n                if (this.y < 0) { this.y = 0; }\n\n                // if (this.width > this. )\n            }\n\n        }\n\n    }\n    get frameSize() {\n        return {\n            width: Math.floor(this.width),\n            height: Math.floor(this.height),\n        }\n    }\n    public updateUIWidthHeight() {\n        // console.log('updateUIWidthHeight', this.width, this.height);\n\n        // this.core.app.ui.divWidth.value = `${this.width}`;\n        // this.core.app.ui.divHeight.value = `${this.height}`;\n        this.update();\n        this.core.canvas.renderForce();\n    }\n    // private ComputeCenterVec() {\n\n    // }\n    public updateVecPre() {\n        this.cvPre[0] = this.cv[0];\n        this.cvPre[1] = this.cv[1];\n    }\n}\n","import { cutOutContextByShape } from '../../lib';\nimport { Core } from '..';\nexport class Renderer {\n    public core: Core;\n    public t = 0.0;\n    public tUpdateCP = 0.0;\n    // public isCapture = true;\n    public initPostSaveImg = true;\n    private captureNeeded = false;\n    private ctxNoFilter: CanvasRenderingContext2D;\n    private init = true;\n    constructor(core: Core) {\n        this.core = core;\n        const canvas = document.createElement('canvas');\n        this.ctxNoFilter = canvas.getContext('2d');\n        this.updateFrame();\n    }\n    public updateFrame() {\n        this.tUpdateCP = 0;\n        this.core.frame.update();\n    }\n    public render(ctx: CanvasRenderingContext2D) {\n        if (this.tUpdateCP++ < 100) {\n            this.core.frame.update();\n            // const divBounding = this.core.div.getBoundingClientRect();\n            // this.core.canvas.canvas.width = Math.round(divBounding.width);\n            // this.core.canvas.canvas.height = Math.round(divBounding.height);\n        }\n\n        // this.translation[0] = this.rect.cv[0];\n        // this.translation[1] = this.rect.cv[1];\n\n        // console.log(this.translation);\n        // this.ctx.translate(this.translation[0], this.translation[1]);\n        // this.ctx.scale(this.zoom, this.zoom);\n        // this.ctx.rotate(this.rotation)\n        // this.ctx.translate(this.rect.cv[0], this.rect.cv[1]);\n        // this.ctx.translate(100, 100);\n\n        // this.Render(ctx);\n        // console.log(this.core.imageWrapper.img);\n        // if (this.core.imageWrapper.img) {\n        //     ctx.save();\n\n        //     let type = 1;\n        //     switch (type) {\n        //         case 0:\n        //             const mat = new DOMMatrix([1, 0, 0, 1, 0, 0]);\n\n        //             const xPos = this.core.imageWrapper.img.width; // * .5;\n        //             const yPos = this.core.imageWrapper.img.height; // * .5;\n\n        //             const xPosRatio = this.core.frame.cv[0] / this.core.imageWrapper.img.width; // * 0.01;\n        //             const yPosRatio = this.core.frame.cv[1] / this.core.imageWrapper.img.height; // * 0.01;\n\n        //             // console.log(xPosRatio, yPosRatio)\n        //             // console.log(1 - xPosRatio, 1 - yPosRatio)\n\n        //             ctx.setTransform(mat\n        //                 .translate(xPos * xPosRatio, yPos * yPosRatio)\n        //                 .rotate(this.core.activeCommand.rotationRadian)\n        //                 .scale(this.core.activeCommand.zoomLevel)\n        //                 .translate(xPos * (1 - xPosRatio ), yPos * (1 - yPosRatio))\n        //             );\n        //             ctx.drawImage(this.core.imageWrapper.img, -this.core.imageWrapper.img.width, -this.core.imageWrapper.img.height);\n        //             break;\n\n        //         case 1:\n        //             // ctx.translate(this.core.img.width * 0.5, this.core.img.height * 0.5);\n        //             // ctx.rotate(this.core.activeCommand.rotationRadian);\n        //             // ctx.scale(this.core.activeCommand.zoomLevel, this.core.activeCommand.zoomLevel);\n        //             // ctx.drawImage(this.core.img, -this.core.img.width * 0.5, -this.core.img.height * 0.5);\n        //             break;\n        //         default:\n        //             break;\n        //     }\n        //     // ctx.beginPath();\n        //     // ctx.arc(0, 0, 10,  0, 3.14 * 2);\n        //     // ctx.closePath()\n        //     // ctx.fill();\n        //     ctx.restore();\n        // }\n\n        this.core.filter.render(ctx);\n\n        if (this.captureNeeded) {\n            this.updateCanvasCapture();\n        }\n        // this.ctx.restore();\n        // this.ctx.save();\n\n        // for filter env\n        if (this.core.canvas.canvas.style.display === 'none') {\n            // console.log('none');\n            return;\n        }\n\n        this.core.scene.renderBelowFrameGeometries(ctx);\n        // this.ctx.translate(this.translation[0], this.translation[1]);\n        this.core.frame.render(ctx);\n\n        let op = 1 - this.t;\n        // console.log(op);\n\n        if (op <  0) {\n            op = 0;\n        }\n\n        // effect by touch\n        ctx.beginPath();\n        const xx = this.core.canvas.eventController.touchInteraction.touchPre[0];\n        const yy = this.core.canvas.eventController.touchInteraction.touchPre[1];\n        ctx.arc(xx, yy, op * 10,  0, 3.14 * 2);\n        ctx.closePath();\n\n\n        // console.log(`rgba(255, 255, 255, ${op})`)\n\n        ctx.fillStyle = `rgba(255, 255, 255, ${op})`;\n        ctx.fill();\n\n\n        ctx.restore();\n\n        // this.core.scene.renderAboveFrame(ctx);\n        // this.core.filter.render(ctx);\n\n        // this.ctx.restore();\n        this.t += 0.025;\n\n        // for debug\n        // console.log(this.core.activeCommand.mouse);\n        // ctx.beginPath();\n        // ctx.arc(this.core.activeCommand.mouse[0], this.core.activeCommand.mouse[1], 10, 0, Math.PI * 2);\n        // ctx.closePath();\n        // ctx.fillStyle = '#ff0000';\n        // ctx.stroke();\n        // ctx.fill();\n\n        // if (this.initPostSaveImg) {\n        //     this.core.canvas.capture();\n        //     this.initPostSaveImg = false;\n        // }\n    }\n    public captureCanvas() {\n        this.captureNeeded = true;\n    }\n    private updateCanvasCapture() {\n        // console.log('captured!');\n        this.updateCtxFiltered();\n        this.updateCtxNoFilter();\n        this.captureNeeded = false;\n\n        if (this.init) {\n            this.core.app.emitAction('post-update@');\n            this.init = false;\n        }\n    }\n    public updateCtxForce() {\n        // console.log('updateCtxForce');\n        this.core.frame.initFrame();\n        this.updateCtxFiltered();\n        this.updateCtxNoFilter();\n    }\n    private updateCtxFiltered() {\n        this.core.canvas.canvasOutFiltered.width = this.core.frame.width;\n        this.core.canvas.canvasOutFiltered.height = this.core.frame.height;\n        // if (this.isCapture) {\n        this.core.canvas.ctxOutFiltered.drawImage(this.core.canvas.canvas, -this.core.frame.x, -this.core.frame.y);\n        this.trimCanvasByShape(this.core.canvas.ctxOutFiltered);\n    }\n    private updateCtxNoFilter() {\n        this.ctxNoFilter.canvas.width = this.core.imageWrapper.img.width;\n        this.ctxNoFilter.canvas.height = this.core.imageWrapper.img.height;\n        this.ctxNoFilter.drawImage(this.core.imageWrapper.img, 0, 0);\n\n        this.core.canvas.canvasOut.width = this.core.frame.width;\n        this.core.canvas.canvasOut.height = this.core.frame.height;\n        this.core.canvas.ctxOut.drawImage(this.ctxNoFilter.canvas, -this.core.frame.x, -this.core.frame.y);\n        this.trimCanvasByShape(this.core.canvas.ctxOut);\n    }\n    private trimCanvasByShape(ctx: CanvasRenderingContext2D) {\n        ctx.globalCompositeOperation = 'destination-out';\n        ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n        cutOutContextByShape(ctx, this.core.frame.frameShapeType, 0, 0, this.core.frame.width, this.core.frame.height, false);\n        ctx.globalCompositeOperation = 'source-over';\n    }\n}\n","import { Core } from '..';\nexport class ImageWrapper {\n    public core: Core;\n    private _img: HTMLImageElement;\n    constructor(core: Core, img: HTMLImageElement) {\n        this.core = core;\n        this._img = img;\n    }\n    get img() {\n        // console.trace();\n        return this._img;\n    }\n    public updateData() {\n\n    }\n}\n","import {\n    renderRPointProjected, renderNPoint, renderNPointCircle,\n    renderPolyline, renderPolygon, renderCircle,\n    renderArrowSingle, renderArrowDouble, ISvgPin,\n} from '../../../ExpressImageViewer/lib';\nimport {\n    Environment, GType, SceneManager,\n    getNumberedPointSMX, getRegularPointAGSM, getRegularPointSMX,\n} from '../../lib';\nimport { Core } from '..';\nexport class Scene {\n    public core: Core;\n    public dataGeometries: any = [];\n    public index: number = 0;\n    private sceneManager: SceneManager;\n    public svgRPoint: ISvgPin;\n    public svgNPoint: ISvgPin;\n    public scaleByRatio = 1;\n    constructor(core: Core) {\n        this.core = core;\n        this.sceneManager = new SceneManager();\n\n        this.svgRPoint = getRegularPointSMX();\n        this.svgNPoint = getNumberedPointSMX();\n        // console.log(svg);\n    }\n    public resetState() {\n        this.sceneManager.reset();\n        this.captureState();\n    }\n    public shiftEnvironment(v: Environment) {\n        if (v === Environment.AGSM) {\n            this.svgRPoint = getRegularPointAGSM();\n          } else {\n            this.svgRPoint = getRegularPointSMX();\n          }\n    }\n    public captureState() {\n        // console.log('capturing...');\n        this.sceneManager.push(this.core.app.api.getData());\n        const data = this.sceneManager.getCurrentState();\n        this.core.activeCommand.emitUndoRedoHistory(data);\n        // console.log('capture from scene', this.sceneManager);\n    }\n    public undo() {\n        const data = this.sceneManager.undo();\n        // console.log('undo', data);\n        if (data && data.params) {\n            this.core.scene.dataGeometries = data.drawing;\n            this.core.app.api.updateFrame(data.params.x, data.params.y, data.params.width, data.params.height, data.params.scale, data.params.rotation, data.params.shape, data.params.aspectRatio);\n            this.core.app.api.updateEffect(data.effecting, false);\n            this.core.renderer.captureCanvas();\n\n            if (this.core.filter.activate) {\n                this.core.app.emitAction(`update-container-size@`);\n            }\n            this.core.filter.emitFilterData();\n\n            // console.log('undo from scene', this.sceneManager);\n            this.core.activeCommand.emitUndoRedoHistory(this.sceneManager.getCurrentState());\n            this.core.activeCommand.emitDataToSave();\n            return;\n        }\n        // performance issue as a safeguard\n        // this.core.renderer.initPostSaveImg = true;\n        this.core.filter.emitFilterData();\n    }\n    public redo() {\n        const data = this.sceneManager.redo();\n        // console.log('redo', data);\n        if (data && data.params) {\n            this.core.scene.dataGeometries = data.drawing;\n            this.core.app.api.updateFrame(data.params.x, data.params.y, data.params.width, data.params.height, data.params.scale, data.params.rotation, data.params.shape, data.params.aspectRatio);\n            this.core.app.api.updateEffect(data.effecting, false);\n            this.core.renderer.captureCanvas();\n\n            if (this.core.filter.activate) {\n                this.core.app.emitAction(`update-container-size@`);\n            }\n            this.core.filter.emitFilterData();\n\n            // console.log('redo from scene', this.sceneManager);\n            this.core.activeCommand.emitUndoRedoHistory(this.sceneManager.getCurrentState());\n            this.core.activeCommand.emitDataToSave();\n            return;\n        }\n        // performance issue as a safeguard\n        // this.core.renderer.initPostSaveImg = true;\n        this.core.filter.emitFilterData();\n    }\n    public renderBelowFrameGeometries(ctx: CanvasRenderingContext2D, xOff = 0, yOff = 0) {\n        // console.log(this.dataGeometries);\n        // ctx.beginPath();\n        // ctx.arc(100, 200, 10, 0, 3.14 * 2);\n        // ctx.fill();\n\n        // console.log(this.scaleByRatio);\n\n        // this.scaleByRatio = 1;\n\n        const offset = [xOff, yOff];\n\n        if (this.dataGeometries) {\n            this.index = this.dataGeometries.length;\n            while(this.index--) {\n                const d = this.dataGeometries[this.index];\n                const scale = d.styles.width * this.scaleByRatio * d.styles.scale;\n\n                switch (d.type) {\n                    case GType.POINT_REGULAR:\n                        if (this.core.app.param.environment === Environment.AGSM) {\n                            renderRPointProjected(ctx, d.nodes, this.svgRPoint.path2D, d.styles.colorRgba, offset, this.scaleByRatio * d.styles.scale, -32 * 0.25, -30);\n                        } else {\n                            renderRPointProjected(ctx, d.nodes, this.svgRPoint.path2D, d.styles.colorRgba, offset, this.scaleByRatio * d.styles.scale, -36 * 0.25, -28);\n                        }\n                        break;\n                    case GType.POINT_NUMBERED:\n                        if (this.core.app.param.environment === Environment.AGSM) {\n                            renderNPointCircle(ctx, d.nodes, d.styles.colorRgba, d.styles.number, offset, this.scaleByRatio * d.styles.scale, 0, 0);\n                        } else {\n                            renderNPoint(ctx, d.nodes, this.svgNPoint.path2D, d.styles.colorRgba, d.styles.number, offset, this.scaleByRatio * d.styles.scale, -36 * 0.365, -28);\n                        }\n                        break;\n                    case GType.POLYLINE_BENDING:\n                        renderPolyline(ctx, d.nodes, d.styles.colorRgba, offset, scale);\n                        break;\n                    case GType.POLYGON_GRAPH:\n                        renderPolygon(ctx, d.nodes, d.styles.colorRgba, offset, scale);\n                        break;\n                    case GType.RECTANGLE:\n                        renderPolygon(ctx, d.nodes, d.styles.colorRgba, offset, scale);\n                        break;\n                    case GType.CIRCLE:\n                        renderCircle(ctx, d.nodes, d.styles.colorRgba, offset, scale);\n                        break;\n                    case GType.ARROW_SINGLE:\n                        renderArrowSingle(ctx, d.nodes, d.styles.colorRgba, offset, scale);\n                        break;\n                    case GType.ARROW_DOUBLE:\n                        renderArrowDouble(ctx, d.nodes, d.styles.colorRgba, offset, scale);\n                        break;\n                    default:\n                        break;\n\n                }\n\n\n            }\n        }\n\n    }\n}\n// const projection = (x:number, y: number, scene: Scene) => {\n//     // x -= scene.core.frame.x\n//     // y -= scene.core.frame.y\n//     return [x, y]\n// }\n","import { UIFilter } from '..'\nexport class UIEffect {\n    public uiFilter: UIFilter;\n    public divText: HTMLDivElement;\n    public divHost: HTMLDivElement;\n\n    public inputBlur: HTMLInputElement;\n    public inputInter: HTMLInputElement;\n    public inputSepia: HTMLInputElement;\n    public inputContrast: HTMLInputElement;\n    public inputBrightness: HTMLInputElement;\n    public inputSaturate: HTMLInputElement;\n    public inputHueRotate: HTMLInputElement;\n\n    public divInter: HTMLElement;\n    public divBlur: HTMLElement;\n    public divSepia: HTMLElement;\n    public divContrast: HTMLElement;\n    public divBrightness: HTMLElement;\n    public divSaturate: HTMLElement;\n    public divHueRotates: HTMLElement;\n\n    constructor(uiFilter: UIFilter) {\n        this.uiFilter = uiFilter;\n\n        this.divHost = document.createElement('div');\n        // this.divHost.style.position = 'absolute';\n        this.divHost.style.display = 'flex';\n        this.uiFilter.host.appendChild(this.divHost);\n\n        // for debugging purpose\n\n        // const div = document.createElement('div');\n        // div.style.width = '50px';\n        // div.style.height = '50px';\n        // div.style.background = '#ff0000';\n        // div.onclick = () => {\n        //     console.log('d');\n        //     this.controller.activate = !this.controller.activate;\n        // }\n        // container.appendChild(div);\n\n\n        // if (this.controller.imageFilter.modeDebug || this.controller.activate) {\n        // console.log(this.controller.activate);\n    }\n    public appendUI() {\n        // this.core.canvas.canvas.appendChild\n        const divBtn = document.createElement('div');\n        divBtn.style.background = '#ff0000';\n        divBtn.style.width = '10px';\n        divBtn.onclick = () => {\n            console.log(this.uiFilter.controller.imageFilter.getData());\n        }\n        this.divHost.appendChild(divBtn);\n\n        this.divText = document.createElement('div');\n        this.divHost.appendChild(this.divText);\n        this.divText.textContent = 'Filter: normal';\n        this.divText.style.color = '#fff';\n        this.divText.style.width = '150px';\n        // this.divText.style.height = '80px';\n        this.divText.style.fontSize = '30';\n        this.divText.style.padding = '5px';\n        // this.divText.style.position = 'absolute';\n        // div.style.position = 'absolute';\n\n\n        // let element = getInput('Type', 0, 41, 0, 1);\n        // let inputInterType = element.input;\n        // inputInterType.oninput = () => {\n        //     this.controller.shiftEffect(+ inputInterType.value);\n        //     // this.controller.updateInterpolation(+this.inputInter.value);\n        // };\n        // this.container.appendChild(element.div);\n\n        let elementInter = getInput('interpolation', 0, 1.0, 1.0, 0.05);\n        this.inputInter = elementInter.input;\n        this.divInter = document.createElement('div');\n        this.divInter.textContent = '1';\n        elementInter.div.appendChild(this.divInter)\n        this.inputInter.oninput = () => {\n            this.divInter.textContent = this.inputInter.value;\n            this.uiFilter.controller.updateInterpolation(+this.inputInter.value);\n        };\n        this.divHost.appendChild(elementInter.div);\n\n        let element\n        element = getInput('blur', 0, 10, 0, 0.1);\n        this.divBlur = document.createElement('div');\n        this.divBlur.textContent = '0';\n        element.div.appendChild(this.divBlur)\n        this.inputBlur = element.input;\n        this.inputBlur.oninput = () => {\n            this.divBlur.textContent = this.inputBlur.value;\n            this.uiFilter.controller.updateFilterParam('blur', +this.inputBlur.value)\n            this.uiFilter.controller.updateFilter();\n        };\n        this.divHost.appendChild(element.div);\n\n        element = getInput('sepia', 0, 1.0, 0, 0.05);\n        this.divSepia = document.createElement('div');\n        this.divSepia.textContent = '0';\n        element.div.appendChild(this.divSepia)\n        this.inputSepia = element.input;\n        this.inputSepia.oninput = () => {\n            this.divSepia.textContent = this.inputSepia.value;\n            this.uiFilter.controller.updateFilterParam('sepia', +this.inputSepia.value);\n            this.uiFilter.controller.updateFilter();\n        };\n        this.divHost.appendChild(element.div);\n\n        element = getInput('contrast', 0, 2.0, 1, 0.05);\n        this.divContrast = document.createElement('div');\n        this.divContrast.textContent = '0';\n        element.div.appendChild(this.divContrast)\n        this.inputContrast = element.input;\n        this.inputContrast.oninput = () => {\n            this.divContrast.textContent = this.inputContrast.value;\n            this.uiFilter.controller.updateFilterParam('contrast', +this.inputContrast.value);\n            this.uiFilter.controller.updateFilter();\n        };\n        this.divHost.appendChild(element.div);\n\n        element = getInput('brightness', 0, 2.0, 1, 0.05);\n        this.divBrightness = document.createElement('div');\n        this.divBrightness.textContent = '0';\n        element.div.appendChild(this.divBrightness)\n        this.inputBrightness = element.input;\n        this.inputBrightness.oninput = () => {\n            this.divBrightness.textContent = this.inputBrightness.value;\n            this.uiFilter.controller.updateFilterParam('brightness', +this.inputBrightness.value);\n            this.uiFilter.controller.updateFilter();\n        };\n        this.divHost.appendChild(element.div);\n\n        element = getInput('saturate', 0, 2.0, 1, 0.05);\n        this.divSaturate = document.createElement('div');\n        this.divSaturate.textContent = '0';\n        element.div.appendChild(this.divSaturate)\n        this.inputSaturate= element.input;\n        this.inputSaturate.oninput = () => {\n            this.divSaturate.textContent = this.inputSaturate.value;\n            this.uiFilter.controller.updateFilterParam('saturate', +this.inputSaturate.value);\n            this.uiFilter.controller.updateFilter();\n        };\n        this.divHost.appendChild(element.div);\n\n        element = getInput('hueRotate', -180, 180, 0, 1);\n        this.divHueRotates = document.createElement('div');\n        this.divHueRotates.textContent = '0';\n        element.div.appendChild(this.divHueRotates)\n        this.inputHueRotate = element.input;\n        this.inputHueRotate.oninput = () => {\n            this.divHueRotates.textContent = this.inputHueRotate.value;\n            this.uiFilter.controller.updateFilterParam('hue-rotate', +this.inputHueRotate.value);\n            this.uiFilter.controller.updateFilter();\n        };\n        this.divHost.appendChild(element.div);\n\n    }\n    public updateUIValue() {\n        if (this.inputBlur) {\n            this.inputBlur.value = `${this.uiFilter.controller.getFilterParam('blur')}`;\n            this.divBlur.textContent = this.inputBlur.value;\n        }\n        if (this.inputInter) {\n            this.inputInter.value = `${this.uiFilter.controller.getFilterParam('interpolation')}`;\n            this.divInter.textContent = this.inputInter.value;\n        }\n        if (this.inputSepia) {\n            this.inputSepia.value = `${this.uiFilter.controller.getFilterParam('sepia')}`;\n            this.divSepia.textContent = this.inputSepia.value;\n        }\n        if (this.inputContrast) {\n            this.inputContrast.value = `${this.uiFilter.controller.getFilterParam('contrast')}`;\n            this.divContrast.textContent = this.inputContrast.value;\n        }\n        if (this.inputBrightness) {\n            this.inputBrightness.value = `${this.uiFilter.controller.getFilterParam('brightness')}`;\n            this.divBrightness.textContent = this.inputBrightness.value;\n        }\n        if (this.inputSaturate) {\n            this.inputSaturate.value = `${this.uiFilter.controller.getFilterParam('saturate')}`;\n            this.divSaturate.textContent = this.inputSaturate.value;\n        }\n        if (this.inputHueRotate) {\n            this.inputHueRotate.value = `${this.uiFilter.controller.getFilterParam('hue-rotate')}`;\n            this.divHueRotates.textContent = this.inputHueRotate.value;\n        }\n    }\n}\nconst getInput = (title: string, min: number, max: number, value: number, step: number) => {\n    let div = document.createElement('div');\n    div.textContent = title;\n    div.style.color = '#ffffff';\n    div.style.position = 'float';\n    let input = document.createElement('input');\n    input.style.width = '80px';\n    input.style.height = '3px';\n    input.type = 'range';\n    input.defaultValue = `${value}`;\n    input.min = `${min}`;\n    input.step = `${step}`;\n    input.max = `${max}`;\n    div.appendChild(input);\n    return { div: div, input: input};\n}\n","export abstract class AbstractLayer {\n    public divHost: HTMLDivElement;\n    public divLayer: HTMLDivElement;\n    public title: HTMLDivElement;\n    public numLayer: number = -1;\n    public nameLayer = 'Abstract Layer ';\n\n    constructor() {\n        this.divHost = document.createElement('div');\n        this.divHost.style.backgroundColor = '#ffffff';\n        this.divHost.style.backgroundColor = 'rgba(255, 255, 255, 1)';\n        // layer 1\n        this.divLayer = document.createElement('div');\n        this.divLayer.style.border = '10px';\n        this.divLayer.style.padding = '10px';\n        this.divLayer.style.margin = '5px';\n\n        let ditTintTitle = document.createElement('div');\n        ditTintTitle.style.display = 'flex';\n        this.divLayer.appendChild(ditTintTitle);\n\n        this.title = document.createElement('div');\n        this.title.style.height = '28px';\n        this.title.style.width = '132px';\n        this.title.style.color = '#000';\n        this.title.textContent = `${this.nameLayer} ${this.numLayer} `;\n        ditTintTitle.appendChild(this.title);\n\n        let buttonClose = document.createElement('div');\n        buttonClose.style.height = '28px';\n        buttonClose.style.color = '#000';\n        buttonClose.textContent = `X`;\n        buttonClose.onclick = () => {\n            this.destroy();\n        }\n        ditTintTitle.appendChild(buttonClose);\n    }\n    abstract init(): void;\n    abstract update(): void;\n    public fn: (object: any) => any;\n    public getData() { };\n    public destroy() {};\n    public updateLayerNum(num: number) {\n        this.numLayer = num;\n        this.title.textContent = `${this.nameLayer} ${this.numLayer} `;\n    }\n}\n\n","import { ColorBlending, hex2rgba } from '../../../../../lib';\nexport class UIColorSliderElement {\n    public element: string;\n    public color: number = 1.0\n    public divContainer: HTMLDivElement;\n    public divInput: HTMLInputElement;\n    public divText: HTMLDivElement;\n    public updatePost: () => void;\n    constructor(param: {host:HTMLDivElement, colorElement: string , colorText: string, default: number, max: number, updatePost: () => void }) {\n        this.updatePost = param.updatePost;\n        this.color = param.default;\n        this.element = param.colorElement;\n\n        this.divContainer = document.createElement('div');\n        this.divContainer.style.display = 'flex';\n        param.host.appendChild(this.divContainer);\n\n        this.divText = document.createElement('div');\n        this.divText.style.width = '45px';\n        this.divText.textContent = `${param.colorElement}: ${param.default}`;\n        this.divText.style.color = param.colorText;\n        this.divContainer.appendChild(this.divText);\n\n        this.divInput = document.createElement('input');\n        this.divInput.style.width = '100%';\n        this.divInput.style.fontSize = '10px';\n        this.divInput.style.height = '5px';\n        this.divInput.style.border = '0px';\n        //@ts-ignore\n        this.divInput.style.appearance = 'none';\n        this.divInput.type = 'range';\n        this.divInput.value = `${param.default}`;\n        this.divInput.max = `${param.max}`;\n        this.divInput.oninput = () => {\n            this.divText.textContent = `${param.colorElement}: ${this.divInput.value}`;\n            // console.log(this.divInput.value);\n            this.color = +this.divInput.value;\n            this.updatePost();\n        };\n        this.divContainer.appendChild(this.divInput);\n    }\n    public updateValue(v: number) {\n        this.color = v;\n        this.divText.textContent = `${this.element}: ${v}`;\n        this.divInput.value = `${v}`;\n    }\n}\n\nexport class UIBlendingModeElement {\n    public mode: ColorBlending = ColorBlending.Overlay;\n    public updatePost: () => void;\n    constructor(param: {host:HTMLDivElement, updatePost: () => void} ) {\n        this.updatePost = param.updatePost;\n        const optionBlendingMode = document.createElement('select');\n        param.host.appendChild(optionBlendingMode);\n        for (let item in ColorBlending) {\n            let option = document.createElement('option');\n            option.value = ColorBlending[item];\n            option.textContent = ColorBlending[item];\n            optionBlendingMode.appendChild(option);\n        }\n        optionBlendingMode.value = this.mode;\n        optionBlendingMode.style.border = '0px';\n        optionBlendingMode.style.fontSize = '10px';\n        optionBlendingMode.onchange = (e) => {\n            let mode = (e.target as any).value;\n            // console.log(mode)\n            // const index = Object.values(ColorBlending).indexOf(mode as unknown as ColorBlending);\n            // const key = Object.keys(ColorBlending)[index];\n            // this.mode = key as ColorBlending;\n            this.mode = mode;\n            this.updatePost();\n        }\n    }\n}\nexport class ColorCanvasElement {\n    divHost: HTMLDivElement;\n    constructor(param: {host:HTMLDivElement, r: number, g: number, b: number, a: number}) {\n        this.divHost = document.createElement('div');\n        this.divHost.style.backgroundColor = `rgba(${param.r},${param.g},${param.b},${param.a})`;\n        this.divHost.style.width = '100%';\n        this.divHost.style.height = '20px';\n        this.divHost.style.fontSize = '10px';\n        this.divHost.style.marginTop = '5px';\n        param.host.appendChild(this.divHost);\n    }\n    public updateColor(param:{ r: number, g: number, b: number, a: number}) {\n        this.divHost.style.backgroundColor = `rgba(${param.r},${param.g},${param.b},${param.a})`;\n    }\n}\nexport class UIHexInputElement {\n    public updatePost: () => void;\n    public divHost: HTMLInputElement;\n    public rgba: number[] = [];\n    constructor(param: {host:HTMLDivElement, updatePost: () => void}) {\n        this.updatePost = param.updatePost;\n        this.divHost = document.createElement('input');\n        this.divHost.style.width = '95%';\n        this.divHost.style.fontSize = '10px';\n        this.divHost.style.border = '0px';\n        this.divHost.style.color = '#';\n        this.divHost.type = 'input';\n        this.divHost.oninput = () => {\n            let rgba = hex2rgba(this.divHost.value);\n\n            for (let i = 0 ; i < rgba.length; ++i) {\n                if(isNaN(rgba[i])) {\n                    return;\n                }\n            }\n            this.rgba = rgba;\n            this.updatePost();\n        };\n        param.host.appendChild(this.divHost);\n    }\n}\n","import { rgb2Hex } from '../../../../../lib';\nimport { AbstractLayer } from '../Base/AbstractLayer';\nimport { UIColorSliderElement, UIBlendingModeElement, UIHexInputElement, ColorCanvasElement } from '../Base/LayerModule';\nexport class PlainLayer extends AbstractLayer {\n    // mode: string = ColorBlending.SourceOver;\n    colorCanvas: ColorCanvasElement;\n    hexElement: UIHexInputElement;\n    rElement: UIColorSliderElement;\n    gElement: UIColorSliderElement;\n    bElement: UIColorSliderElement;\n    aElement: UIColorSliderElement;\n\n    modeElement: UIBlendingModeElement;\n    constructor(numLayer: number, fn: (object: any) => void, destroy: () => void) {\n        super();\n        this.nameLayer = 'Plain Layer ';\n        this.numLayer = numLayer;\n        this.title.textContent = `${this.nameLayer} ${this.numLayer} `;\n        this.fn = fn;\n        this.destroy = destroy;\n        this.init();\n    }\n    public init() {\n        const divLayer = this.divLayer;\n\n        this.hexElement = new UIHexInputElement({\n            host: divLayer,\n            updatePost: () => {\n                this.rElement.updateValue(this.hexElement.rgba[0]);\n                this.gElement.updateValue(this.hexElement.rgba[1]);\n                this.bElement.updateValue(this.hexElement.rgba[2]);\n                this.update();\n            },\n        });\n        this.rElement = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'r',\n            colorText: '#f00',\n            default: Math.floor(Math.random() * 255),\n            max: 255,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.gElement = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'g',\n            colorText: '#494',\n            default: Math.floor(Math.random() * 255),\n            max: 255,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.bElement = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'b',\n            colorText: '#44a',\n            default: Math.floor(Math.random() * 255),\n            max: 255,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.aElement = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'a',\n            colorText: '#222',\n            default: 100,\n            max: 100,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.modeElement = new UIBlendingModeElement({\n            host: divLayer,\n            updatePost: () => {\n                this.update();\n            },\n        });\n\n        this.colorCanvas = new ColorCanvasElement({\n            host: divLayer,\n            r: this.rElement.color,\n            g: this.gElement.color,\n            b: this.bElement.color,\n            a: this.aElement.color,\n        });\n\n        this.divHost.appendChild(divLayer);\n        this.update();\n        this.updateHex();\n    }\n    public update() {\n        this.colorCanvas.updateColor({r: this.rElement.color, g: this.gElement.color, b: this.bElement.color, a: this.aElement.color * 0.01});\n        this.fn(this.getData());\n    }\n    public updateHex() {\n        this.hexElement.divHost.value = rgb2Hex(this.rElement.color, this.gElement.color, this.bElement.color);\n    }\n    public getData() {\n        return {\n            bg0: [this.rElement.color, this.gElement.color, this.bElement.color, this.aElement.color * 0.01],\n            mode: this.modeElement.mode,\n        }\n    }\n}\n\n","import { rgb2Hex } from '../../../../../lib';\nimport { AbstractLayer } from '../Base/AbstractLayer';\nimport { UIColorSliderElement, UIBlendingModeElement, UIHexInputElement, ColorCanvasElement } from '../Base/LayerModule';\nexport class RadialGradientLayer extends AbstractLayer {\n    numLayer: number = -1;\n    divHost: HTMLDivElement;\n    fn:(object: any) => any;\n    hexElement0: UIHexInputElement;\n    rElement0: UIColorSliderElement;\n    gElement0: UIColorSliderElement;\n    bElement0: UIColorSliderElement;\n    aElement0: UIColorSliderElement;\n    colorCanvas0: ColorCanvasElement;\n\n    hexElement1: UIHexInputElement;\n    rElement1: UIColorSliderElement;\n    gElement1: UIColorSliderElement;\n    bElement1: UIColorSliderElement;\n    aElement1: UIColorSliderElement;\n    colorCanvas1: ColorCanvasElement;\n\n    innerElement: UIColorSliderElement;\n    outerElement: UIColorSliderElement;\n\n    modeElement: UIBlendingModeElement;\n    constructor(numLayer: number, fn: (object: any) => void, destroy: () => void) {\n        super();\n        this.nameLayer = 'Radial Gradient Layer ';\n        this.numLayer = numLayer;\n        this.title.textContent = `${this.nameLayer} ${this.numLayer} `;\n        this.fn = fn;\n        this.destroy = destroy;\n        this.init();\n    }\n    public init() {\n        const divLayer = this.divLayer;\n\n        let innerText = document.createElement('div');\n        innerText.style.color = '#000';\n        innerText.textContent = `inner layer ------------------------`;\n        divLayer.appendChild(innerText);\n\n        this.hexElement0 = new UIHexInputElement({\n            host: divLayer,\n            updatePost: () => {\n                this.rElement0.updateValue(this.hexElement0.rgba[0]);\n                this.gElement0.updateValue(this.hexElement0.rgba[1]);\n                this.bElement0.updateValue(this.hexElement0.rgba[2]);\n                this.update();\n            },\n        });\n\n        this.rElement0 = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'r',\n            colorText: '#f00',\n            default: Math.floor(Math.random() * 255),\n            max: 255,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.gElement0 = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'g',\n            colorText: '#494',\n            default: Math.floor(Math.random() * 255),\n            max: 255,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.bElement0 = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'b',\n            colorText: '#44a',\n            default: Math.floor(Math.random() * 255),\n            max: 255,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.aElement0 = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'a',\n            colorText: '#222',\n            default: 100,\n            max: 100,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n\n        this.colorCanvas0 = new ColorCanvasElement({\n            host: divLayer,\n            r: this.rElement0.color,\n            g: this.gElement0.color,\n            b: this.bElement0.color,\n            a: this.aElement0.color,\n        });\n\n        let outerText = document.createElement('div');\n        outerText.style.color = '#000';\n        outerText.textContent = `outer layer ------------------------`;\n        divLayer.appendChild(outerText);\n\n        this.hexElement1 = new UIHexInputElement({\n            host: divLayer,\n            updatePost: () => {\n                this.rElement1.updateValue(this.hexElement1.rgba[0]);\n                this.gElement1.updateValue(this.hexElement1.rgba[1]);\n                this.bElement1.updateValue(this.hexElement1.rgba[2]);\n                this.update();\n            },\n        });\n\n        this.rElement1 = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'r',\n            colorText: '#f00',\n            default: Math.floor(Math.random() * 255),\n            max: 255,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.gElement1 = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'g',\n            colorText: '#494',\n            default: Math.floor(Math.random() * 255),\n            max: 255,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.bElement1 = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'b',\n            colorText: '#44a',\n            default: Math.floor(Math.random() * 255),\n            max: 255,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.aElement1 = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'a',\n            colorText: '#222',\n            default: 100,\n            max: 100,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n\n        this.modeElement = new UIBlendingModeElement({\n            host: divLayer,\n            updatePost: () => {\n                this.update();\n            },\n        });\n\n\n        this.colorCanvas1 = new ColorCanvasElement({\n            host: divLayer,\n            r: this.rElement1.color,\n            g: this.gElement1.color,\n            b: this.bElement1.color,\n            a: this.aElement1.color,\n        });\n\n\n        this.innerElement = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'a',\n            colorText: '#222',\n            default: 0,\n            max: 1,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.innerElement.divInput.step = '0.025';\n        this.innerElement.divText.style.width = '55px';\n\n        this.outerElement = new UIColorSliderElement({\n            host: divLayer,\n            colorElement: 'a',\n            colorText: '#222',\n            default: 1,\n            max: 1,\n            updatePost: () => {\n                this.update();\n                this.updateHex();\n            },\n        });\n        this.outerElement.divInput.step = '0.025';\n        this.outerElement.divText.style.width = '55px';\n\n\n        this.divHost.appendChild(divLayer);\n        this.update();\n        this.updateHex();\n    }\n    public update() {\n        this.colorCanvas0.updateColor({r: this.rElement0.color, g: this.gElement0.color, b: this.bElement0.color, a: this.aElement0.color * 0.01});\n        this.colorCanvas1.updateColor({r: this.rElement1.color, g: this.gElement1.color, b: this.bElement1.color, a: this.aElement1.color * 0.01});\n        this.fn(this.getData());\n    }\n    public updateHex() {\n        this.hexElement0.divHost.value = rgb2Hex(this.rElement0.color, this.gElement0.color, this.bElement0.color);\n        this.hexElement1.divHost.value = rgb2Hex(this.rElement1.color, this.gElement1.color, this.bElement1.color);\n    }\n    public getData() {\n        return {\n            in: this.innerElement.color,\n            out: this.outerElement.color,\n            bg0: [this.rElement0.color, this.gElement0.color, this.bElement0.color, this.aElement0.color * 0.01],\n            bg1: [this.rElement1.color, this.gElement1.color, this.bElement1.color, this.aElement1.color * 0.01],\n            mode: this.modeElement.mode,\n        }\n    }\n}\n\n","import {\n    PlainLayer,\n} from './LayerModule/PlainLayer';\nimport {\n    RadialGradientLayer,\n} from './LayerModule/RadialGradientLayer';\nimport {\n    AbstractLayer,\n} from './Base/AbstractLayer';\n// import {\n//     LayerType,\n// } from './Base/Utility'\n\n\n\nimport { UIFilter } from '..';\n// import { AbstractLayer, PlainLayer, RadialGradientLayer } from './TintLayers';\n\nexport enum LayerType {\n    RadialGradientLayer = 'radialGradientLayer',\n    PlainLayer = 'plainLayer',\n}\nexport class UITint {\n    uiFilter: UIFilter;\n    divHost: HTMLDivElement;\n\n    layers: AbstractLayer[] = [];\n    isCustom: boolean = false;\n\n    constructor(uiFilter: UIFilter) {\n        this.uiFilter = uiFilter;\n\n    }\n    public appendUI() {\n        this.appendHost();\n        this.appendButtonAdd();\n    }\n    public appendHost() {\n        this.divHost = document.createElement('div');\n        this.divHost.style.position = 'absolute';\n        this.divHost.style.top = '30px';\n        this.divHost.style.width = '160px';\n        this.uiFilter.host.appendChild(this.divHost);\n\n    }\n    public appendButtonAdd() {\n        const divHostAddButton = document.createElement('div');\n        divHostAddButton.style.display = 'flex';\n        divHostAddButton.style.height = '20px';\n        this.divHost.appendChild(divHostAddButton)\n\n        const divAddPLayer = document.createElement('div');\n        divAddPLayer.style.width = '60px';\n        divAddPLayer.style.color = '#fff';\n        divAddPLayer.textContent = '+ Plain Layer';\n        divAddPLayer.onclick = () => {\n            this.addLayer(LayerType.PlainLayer);\n        }\n        divHostAddButton.appendChild(divAddPLayer)\n\n        const divAddGLayer = document.createElement('div');\n        divAddGLayer.style.color = '#fff';\n        divAddGLayer.textContent = '+ Radial Gradient';\n        divAddGLayer.onclick = () => {\n            this.addLayer(LayerType.RadialGradientLayer);\n        }\n        divHostAddButton.appendChild(divAddGLayer)\n\n\n    }\n    public addLayer(typeLayer: LayerType) {\n        let layer: AbstractLayer;\n        switch (typeLayer) {\n            case LayerType.RadialGradientLayer:\n                layer = new RadialGradientLayer(this.layers.length + 1,\n                    (data: any) => {\n                        this.updateRendering();\n                    },\n                    () => {\n                      this.removeLayer(layer);\n                    },\n                );\n                this.divHost.appendChild(layer.divHost);\n                this.layers.push(layer)\n                break;\n\n            default:\n                layer = new PlainLayer(this.layers.length + 1,\n                    (data: any) => {\n                        this.updateRendering();\n                    },\n                    () => {\n                      this.removeLayer(layer);\n                    },\n                );\n                this.divHost.appendChild(layer.divHost);\n                this.layers.push(layer)\n                break;\n        }\n        this.updateRendering();\n    }\n    public updateRendering() {\n        this.updateStatus();\n        this.uiFilter.controller.updateFilter();\n    }\n    public getData() {\n        const data = [];\n        for (let i = 0 ; i < this.layers.length; ++i) {\n            data.push(this.layers[i].getData());\n        }\n        return data;\n    }\n    public removeLayer(layer: AbstractLayer) {\n        this.layers.splice(this.layers.indexOf(layer), 1);\n        this.divHost.removeChild(layer.divHost)\n        this.updateIndex();\n        this.updateRendering();\n    }\n    private updateIndex() {\n        for (let i = 0 ; i < this.layers.length; ++i) {\n            this.layers[i].updateLayerNum(i + 1);\n        }\n    }\n    private updateStatus() {\n        if (this.layers.length === 0 ) {\n            this.isCustom = false;\n        } else {\n            this.isCustom = true;\n        }\n    }\n    public destroy() {\n        if (this.divHost && this.divHost.parentNode) {\n            try {\n                const p = this.divHost.parentNode;\n                if (p) {\n                p.removeChild(this.divHost);\n                }\n            } catch (error) {\n                console.debug(error);\n            }\n        }\n    }\n}\n\n","import { Controller } from '../Controller';\nimport { UIEffect } from './EffectLayers'\nimport { UITint } from './TintLayers';\n\nexport class UIFilter {\n    public host: HTMLDivElement;\n\n    public controller: Controller;\n\n    public uiEffect: UIEffect;\n    public uiTint: UITint;\n    public num = 0.0;\n    private debugMode = false;\n    constructor(controller: Controller) {\n        this.controller = controller;\n        this.appendUI();\n    }\n    public appendUI() {\n        this.host = document.createElement('div');\n        this.host.style.zIndex = '1';\n        this.host.style.position = 'absolute';\n        this.host.style.top = '0px';\n        this.host.style.left = '0px';\n        // this.host.style.display = 'flex';\n\n        this.uiEffect = new UIEffect(this);\n        this.uiTint = new UITint(this);\n\n        document.body.addEventListener('keydown', this.keyEvent);\n\n\n\n        this.appendUIFilter();\n        this.appendUITint();\n        // this.displayUI();\n    }\n    public displayUI() {\n        this.controller.imageFilter.core.div.appendChild(this.host);\n    }\n    public appendUIFilter() {\n       if (this.controller.activate) {\n            this.uiEffect.appendUI();\n        }\n    }\n    public appendUITint() {\n        if (this.controller.activate) {\n            this.uiTint.appendUI();\n        }\n    }\n    public updateUIValue() {\n        this.uiEffect.updateUIValue();\n    }\n    public keyEvent = (k: KeyboardEvent) => {\n        if (this.debugMode) {\n            if (k.key === '[') {\n                this.num -= 1 / 9;\n                if (this.num < 0) { this.num = 0.0; }\n                if (this.num > 1) { this.num = 0.99; }\n                this.controller.shiftEffect(this.num);\n\n            } else if (k.key === ']') {\n                this.num += 1 / 9;\n                if (this.num < 0) { this.num = 0.0; }\n                if (this.num > 1) { this.num = 0.99; }\n                this.controller.shiftEffect(this.num);\n            }\n        }\n        if (k.key === 'P' && k.shiftKey) {\n            this.displayUI()\n        }\n    }\n    public destroy() {\n        document.body.removeEventListener('keydown', this.keyEvent);\n        // console.log(this.container);\n        // console.log(this.controller.imageFilter.core.div);\n        this.uiTint.destroy();\n        const p = this.host.parentNode;\n        if (p) {\n            p.removeChild(this.host)\n            // this.controller.imageFilter.core.div(this.container);\n        }\n    }\n}\n","import { getFilterTypePresetByID, debounce } from '../../../lib';\nimport { ImageFilter } from '..';\nimport { UIFilter } from '../UI';\nexport class Controller {\n    public imageFilter: ImageFilter;\n    public UIFilter: UIFilter;\n    private _activate = false;\n    constructor(imageFilter: ImageFilter) {\n        this.imageFilter = imageFilter;\n        this.UIFilter = new UIFilter(this);\n        // (window as any)['app'] = this;\n    }\n    public get activate() {\n        return this._activate;\n    }\n    public set activate(v: boolean) {\n        this._activate = v;\n        if (v) {\n            this.imageFilter.canvasView.style.display = 'block';\n            this.imageFilter.core.canvas.canvas.style.display = 'none';\n            this.UIFilter.appendUI();\n        } else {\n            this.imageFilter.canvasView.style.display = 'none';\n            this.imageFilter.core.canvas.canvas.style.display = 'block';\n            this.destroy();\n        }\n    }\n    public updateDivText(type: string) {\n        if (this.UIFilter && this.UIFilter.uiEffect.divText) {\n            this.UIFilter.uiEffect.divText.textContent = 'Filter: ' + type;\n        }\n    }\n    public destroy() {\n        if (this.UIFilter) {\n            this.UIFilter.destroy();\n        }\n    }\n    public updateCustomFilter(data: any) {\n        this.imageFilter.filters = data;\n        // console.log(data);\n    }\n    public shiftEffect(n: number, emitNeeded: boolean = true) {\n        this.imageFilter.typePreset = getFilterTypePresetByID(n);\n        this.imageFilter.shiftEffectByPreset(this.imageFilter.typePreset);\n    }\n    public getFilterParam(key: string) {\n        if (this.imageFilter.filters === undefined) {\n            // In case that the filters variable is undefined(by Revert to Original), we need to fill out the filter values by normal to render it.\n            this.imageFilter.reset(false, false);\n        }\n\n        for (let i = 0 ; i < this.imageFilter.filters.length; ++i) {\n            if (key === this.imageFilter.filters[i][0]) {\n                return this.imageFilter.filters[i][1]\n            }\n        }\n        if (key === 'interpolation') {\n            return this.imageFilter.interpolation;\n        }\n        return undefined;\n    }\n    public updateFilterParam(key: string, value: number) {\n        for (let i = 0 ; i < this.imageFilter.filters.length; ++i) {\n            if (key === this.imageFilter.filters[i][0]) {\n                this.imageFilter.filters[i][1] = value;\n                return;\n            }\n        }\n    }\n    public updateInterpolation(v: number) {\n        this.imageFilter.interpolation = v;\n        this.updateFilter();\n    }\n    public updateFilter() {\n        this.imageFilter.update(false);\n        this.checkChanges();\n    }\n    private checkChanges = debounce(() => {\n        // console.debug('emitting for Saving data on server');\n        this.imageFilter.update();\n    })\n}\n","import { imageFilterByArray, imageTint, filterPreset, getParamsByPreset  } from '../../lib';\nimport { Controller } from './Controller';\nimport { cutOutContextByShape } from '../../lib';\nimport { Core } from '..';\nexport class ImageFilter {\n    public core: Core;\n    public controller: Controller;\n    public canvas: HTMLCanvasElement;\n    public ctx: CanvasRenderingContext2D;\n    public canvasView: HTMLCanvasElement;\n    public ctxView: CanvasRenderingContext2D;\n    public typePreset = 'normal';\n    public numRendered = 0;\n    public interpolation = 1;\n    public filters: any = [];\n    public tints: any = [];\n    public activate = false;\n\n    public modeDebug = true;\n    constructor(core: Core) {\n        this.core = core;\n        this.reset(false, false, true);\n\n        this.canvas = document.createElement('canvas');\n        this.canvas.style.width = '100%';\n        this.canvas.style.height = '100%';\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n\n        this.canvasView = document.createElement('canvas');\n        this.canvasView.style.width = '100%';\n        this.canvasView.style.height = '100%';\n        this.canvasView.style.display = 'none'\n        this.ctxView = this.canvasView.getContext('2d') as CanvasRenderingContext2D;\n        this.core.div.appendChild(this.canvasView);\n\n        this.controller = new Controller(this);\n    }\n    // value between 0.0 and 1.0\n    public updateParamsInterpolation(t: number, emitNeeded: boolean = true) {\n\n        // const target = filterPreset[this.typePreset];\n        // const normal = filterPreset['normal'];\n\n        // for (let i = 0; i < target.filters.length; ++i) {\n        //     // if (i !== 'blur') {\n        //         for (let j = 0; j < normal.filters.length; ++j) {\n        //             if (normal.filters[0] === target.filters[i]) {\n        //                 const val  = linearInterpolate(+normal.filters[j][1], +target.filters[i][1], t);\n        //                 for (let k = 0; k < this.filters.length; ++k) {\n        //                  if (this.filters[k][0] === target.filters[i][0]) {\n        //                     this.filters[k][1] = val;\n        //                     break\n        //                  }\n        //                 }\n        //                 break;\n        //                 // this.filters[i] = val;\n        //             }\n        //         }\n        //         // console.log(val, typeof(val))\n        //         // console.log(i, t, normal.filter[i], target.filter[i], this.filter[i])\n        //     // }\n        // }\n        // console.log('interpolation', t)\n        this.interpolation = t;\n\n\n        // console.log('[[[[[[[[[[[[[[[[[[')\n        // console.log('-----------------', this.filter)\n        // console.log(normal);\n        this.update(emitNeeded)\n    }\n    public getData () {\n        if (this.filters === undefined) {\n            // In case that the filters variable is undefined(by Revert to Original), we need to update it with normal param, and need to force to render it on canvas.\n            this.reset(false, false, true);\n            this.numRendered = 0;\n            this.update(false)\n        }\n        const filters = this.filters.filter( ( [,value]: any, index: number )=> {\n            return filterPreset.normal.filters[index][1] !== value;\n        });\n        return {\n            typePreset: this.typePreset,\n            filters,\n            tints: [ ...this.tints],\n            interpolation: this.interpolation,\n        };\n    }\n    public updateEffect(d: any, emitNeeded: boolean = true) {\n        this.typePreset = d.typePreset;\n        this.filters = d.filters;\n        this.tints = d.tints;\n\n        // console.log(this.tint);\n        // console.log(d)\n        // console.trace();\n\n        // if (!this.filter.blur) { this.filter.blur = 0.0; }\n        // if (!this.filter.interpolation) { this.filter.interpolation = 1.0; }\n        // if (this.filter.blur === undefined) { this.filter.blur = 0; }\n        // if (this.filter.interpolation === undefined) { this.filter.interpolation = 0; }\n        // console.log(this.controller.uiEffect.inputBlur, this.filter.blur);\n\n        if (this.controller.UIFilter && this.controller.UIFilter.uiEffect.divText) {\n            this.controller.UIFilter.updateUIValue();\n            this.controller.updateDivText(this.typePreset);\n        //     this.controller.inputBlur.value = `${this.filter.blur}`;\n        }\n\n        this.update(emitNeeded);\n        // console.log('ddddd',d);\n        // imageFilter(this.ctx, this.core.img, this.filter.sepia, this.filter.contrast, this.filter.brightness, this.filter.saturate, this.filter.hueRotate, this.filter.blur);\n        // imageTint(this.ctx, this.typePreset);\n\n        // this.updateFilterCustom(emitNeeded);\n\n\n    }\n    public revertToOriginal(emitNeeded: boolean = true, revertToOriginal: boolean = true) {\n        this.numRendered = 0;\n        this.reset(emitNeeded, revertToOriginal);\n    }\n    public reset(emitNeeded: boolean = true, revertToOriginal: boolean = false, init: boolean = false) {\n        this.typePreset = 'normal'\n        this.interpolation = 1.0;\n        this.filters = {\n            filters: [\n              ['blur', 0],\n              ['sepia', 0],\n              ['contrast', 1],\n              ['brightness', 1],\n              ['saturate', 1],\n              ['hue-rotate', 0],\n            ],\n            tints: [],\n        };\n        this.tints = [ ];\n        if(!init) {\n            this.controller.updateDivText(this.typePreset);\n            this.update(emitNeeded, revertToOriginal);\n        }\n    }\n    public shiftEffectByPreset(typePreset: string, emitNeeded: boolean = true ) {\n        // console.log(typePreset);\n        // console.trace();\n        this.typePreset = typePreset;\n        const target = getParamsByPreset(typePreset);\n        this.filters = target.filters;\n        this.tints = target.tints;\n        this.controller.updateDivText(this.typePreset);\n        this.update(emitNeeded);\n    }\n    public update(emitNeeded: boolean = true, revertToOriginal: boolean = false) {\n        // we want to update and draw the original image one time on crop env (and after revert to original).\n        // console.log('1', this.typePreset)\n        if (this.numRendered < 3 || this.activate) {\n            // console.log('2', this.typePreset)\n            this.canvas.width = this.core.imageWrapper.img.width;\n            this.canvas.height = this.core.imageWrapper.img.height;\n\n            const cx = (this.core.frame.cv[0] / this.canvas.width);\n            const cy = (this.core.frame.cv[1] / this.canvas.height);\n            const ratio = ((this.core.frame.width / this.canvas.width) + (this.core.frame.height / this.canvas.height)) * 0.5;\n\n            imageFilterByArray(this.ctx, this.core.imageWrapper.img, this.filters, this.interpolation);\n\n            if (this.controller.UIFilter.uiTint.isCustom) {\n                this.tints = this.controller.UIFilter.uiTint.getData();\n            }\n            imageTint(this.ctx, this.tints, cx, cy, ratio, this.interpolation);\n\n            // console.log(this.controller.uiEffect.uiTint.isCustom);\n            this.core.canvas.renderForce();\n\n            // drawing the filtered result on the main canvas which will be saved on data model in Express Image\n            this.core.canvas.ctxOutFiltered.drawImage(this.ctx.canvas, -this.core.frame.x , -this.core.frame.y);\n\n            if (emitNeeded) {\n                this.emitFilterData();\n                if (!revertToOriginal) {\n                    this.core.scene.captureState();\n                }\n            }\n            if (this.controller.UIFilter) {\n                this.controller.UIFilter.updateUIValue();\n            }\n            // this.captureNeeded\n            this.core.renderer.captureCanvas();\n            this.numRendered++;\n        }\n\n        // safeguard turn off SVG renderer on filter env\n        if (this.core.filter.activate) {\n            this.core.frame.renderer.hide = true;\n        }\n    }\n    public render(ctx: CanvasRenderingContext2D) {\n        ctx.drawImage(this.canvas, 0, 0);\n        this.renderView();\n    }\n    public renderView() {\n        if (!this.controller.activate) {\n            return;\n        }\n\n        const canvasOut = this.core.app.api.getCtx().canvas;\n        this.canvasView.style.width = '100%';\n        this.canvasView.style.height = '100%';\n        this.canvasView.width = canvasOut.width;\n        this.canvasView.height = canvasOut.height;\n\n        this.ctxView.drawImage(this.canvas, -this.core.frame.x, -this.core.frame.y);\n\n        this.core.scene.renderBelowFrameGeometries(this.ctxView, this.core.frame.x, this.core.frame.y);\n\n        this.trimCanvas(this.ctxView);\n\n        // this.ctxView.beginPath();\n        // this.ctxView.arc(100, 100, 100, 0, 3.14 *2)\n        // this.ctxView.closePath();\n        // this.ctxView.fill();\n        // console.log('view...');\n    }\n    public trimCanvas(ctx: CanvasRenderingContext2D) {\n        ctx.globalCompositeOperation = 'destination-out';\n        ctx.fillStyle = `rgba(255, 255, 255, 1)`;\n        cutOutContextByShape(ctx, this.core.frame.frameShapeType, 0, 0, ctx.canvas.width, ctx.canvas.height, false);\n        ctx.globalCompositeOperation = 'source-over';\n    }\n    public destroy() {\n        this.controller.destroy();\n    }\n    public emitFilterData() {\n        // console.log('emit.....');\n        // console.trace();\n        // console.log(JSON.stringify(this.getData()))\n        this.core.app.emitAction('filter@' + JSON.stringify(this.getData()));\n    }\n    public activateEffectEnv() {\n        this.activate = true;\n        this.controller.activate = true;\n        // console.log('activateEffectEnv');\n    }\n    public deactivateEffectEnv() {\n        this.activate = false;\n        this.controller.activate = false;\n        // console.log('deactivateEffectEnv');\n    }\n}\n","// import { rgb2hsl, hsl2rgb, } from '../lib';\n// import { process_image } from '../lib';\n\nimport { Canvas } from './Canvas';\nimport { Common } from './Common';\nimport { ActiveCommand } from './ActiveCommand';\nimport { Frame } from './Frame';\nimport { Renderer } from './Renderer';\nimport { ImageWrapper } from './ImageWrapper';\nimport { AppImageEditing } from '..';\nimport { Scene } from './Scene';\nimport { ImageFilter } from './ImageFilter';\n\nexport class Core {\n    public app: AppImageEditing;\n    public div: HTMLElement;\n    public imageWrapper: ImageWrapper;\n    public frame: Frame;\n    public renderer: Renderer;\n    public scene: Scene;\n    public filter: ImageFilter;\n    public canvas: Canvas;\n    public common: Common;\n    public activeCommand: ActiveCommand;\n    public ctx: CanvasRenderingContext2D;\n    constructor(app: AppImageEditing) {\n        this.app = app;\n        const div = document.createElement('div');\n        this.div = div;\n        this.div.id = 'express-image-cropping';\n        // this.div.style.position = 'relative';\n        this.div.style.width = '100%';\n        this.div.style.height = '100%';\n\n        if (app.ui) {\n            this.app.ui.divContentWrapper.append(this.div);\n        } else {\n            this.app.divHost.append(this.div);\n        }\n        this.common = new Common(this);\n        this.filter = new ImageFilter(this);\n\n        this.initCanvas();\n        this.initApp();\n        // this.importImage('https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg');\n    }\n    public reset() {\n        //\n    }\n    private initApp() {\n        this.scene = new Scene(this);\n        this.frame = new Frame(this);\n        this.renderer = new Renderer(this);\n        this.activeCommand = new ActiveCommand(this);\n    }\n    private initCanvas() {\n        this.canvas = new Canvas(this);\n        this.canvas.render = (ctx: CanvasRenderingContext2D) => { this.renderer.render(ctx); };\n    }\n    public importImage(url: string) {\n        const image = new Image();\n        image.crossOrigin = 'anonymous';\n        image.src = url;\n        image.onload = () => {\n            this.importImageByImage(image);\n        };\n    }\n    public importImageByImage(image: HTMLImageElement) {\n        this.imageWrapper = new ImageWrapper(this, image);\n\n        this.canvas.canvasOutFiltered.width = image.width;\n        this.canvas.canvasOutFiltered.height = image.height;\n\n        this.canvas.canvas.width = image.width;\n        this.canvas.canvas.height = image.height;\n\n        this.frame.initFrame();\n\n        // this.renderer.isCapture = true;\n        this.filter.update(false);\n        this.canvas.renderForce();\n        this.renderer.captureCanvas();\n\n        if (!this.filter.activate) {\n            this.app.emitAction('ready@crop');\n        }\n    }\n    public destroy() {\n        this.canvas.destroy();\n        this.filter.destroy();\n    }\n    public resizeWindow = () => {\n        this.canvas.renderForce();\n    }\n}\n","import { getBtnBySVGPath } from '../lib';\nimport { AppImageEditing } from '..';\nexport class UI {\n    public app: AppImageEditing;\n    public divExpressImageEditingWrapper: HTMLElement;\n    public divUIWrapper: HTMLElement;\n    public divContentWrapper: HTMLElement;\n    public theme: any;\n    constructor(app: AppImageEditing, theme: any) {\n        this.app = app;\n        this.theme = theme;\n        const divExpressImageEditingWrapper = document.createElement('div') as HTMLElement;\n        divExpressImageEditingWrapper.id = 'express-image-editing-wrapper';\n        divExpressImageEditingWrapper.style.position = 'relative';\n        divExpressImageEditingWrapper.style.width = '100%';\n        divExpressImageEditingWrapper.style.height = '100%';\n        divExpressImageEditingWrapper.style.display = 'flux';\n        divExpressImageEditingWrapper.style.justifyContent = 'center';\n        this.divExpressImageEditingWrapper = divExpressImageEditingWrapper;\n        this.app.divHost.append(divExpressImageEditingWrapper);\n\n        const divUIWrapper = document.createElement('div') as HTMLElement;\n        divUIWrapper.id = 'express-image-editing-ui-wrapper';\n        // divUIWrapper.style.position = 'absolute';\n        divUIWrapper.style.width = '100%';\n        divUIWrapper.style.height = theme.top.height;\n        divUIWrapper.style.padding = theme.top.padding;\n        divUIWrapper.style.background = theme.top.background; //'#ff00f0';\n        divUIWrapper.style.marginBottom = theme.top.marginBottom;\n        this.divUIWrapper = divUIWrapper;\n        this.divExpressImageEditingWrapper.append(this.divUIWrapper);\n\n        const txt = document.createElement('p');\n        txt.textContent = 'Image Cropping App V1';\n        txt.style.fontSize = '12px;';\n        txt.style.color = 'rgba(210, 210, 210)';\n        // txt.style.position = 'absolute';\n        txt.style.top = '0px';\n        txt.style.left = '20px';\n        this.divUIWrapper.append(txt);\n\n        const divContentWrapper = document.createElement('div') as HTMLElement;\n        divContentWrapper.id = 'express-image-editing-content-wrapper';\n        this.divContentWrapper = divContentWrapper;\n        this.divExpressImageEditingWrapper.append(this.divContentWrapper);\n\n        // this.initPost();\n\n        this.Layer0();\n        this.Layer1();\n    }\n    public updateStyle(r: number, g: number, b: number) {\n        // divSizeFrameBG.style.backgroundColor = `rgb(${r},${b},${g})`;\n\n    }\n    public initPost() {\n        let divSizeFrameBG = document.createElement('div');\n        divSizeFrameBG.style.textAlign = 'center';\n        // divSizeFrameBG.style.backgroundColor = '#afafaf';\n        divSizeFrameBG.style.padding = '10px';\n        divSizeFrameBG.textContent = 'Size';\n\n        let divWidth = document.createElement('input');\n        divWidth.style.width = '50px';\n        divWidth.setAttribute('type', 'text');\n        divWidth.setAttribute('min', '100');\n        // divWidth.setAttribute('max', '500');\n        // divWidth.setAttribute('value', '300');\n        divSizeFrameBG.append(divWidth);\n        divWidth.oninput = () => {\n            const value = Number.parseFloat(divWidth.value);\n            if (value) {\n                // this.core.exprssImageApp.core.common.updateWidthByInput(value);\n            }\n        };\n\n        divWidth = document.createElement('input');\n        divWidth.style.width = '50px';\n        divWidth.setAttribute('type', 'text');\n        divWidth.setAttribute('min', '100');\n        // divWidth.setAttribute('max', '50');\n        // divWidth.setAttribute('value', '10');\n        divSizeFrameBG.append(divWidth);\n        divWidth.oninput = () => {\n            const value = Number.parseFloat(divWidth.value);\n            if (value) {\n                // this.core.exprssImageApp.core.common.updateHeightByInput(value);\n            }\n        };\n\n        this.divUIWrapper.append(divSizeFrameBG);\n\n        // let btn = document.createElement('button');\n        // btn.textContent = 'Place';\n        // this.divUIWrapper.append(btn);\n        // btn.onclick = () => {\n        //     this.app.api.onClickPlace();\n        // };\n\n        // btn = document.createElement('button');\n        // btn.textContent = 'Cancel';\n        // this.divUIWrapper.append(btn);\n        // btn.onclick = () => {\n        //     this.app.api.onClickCancel();\n        // };\n\n        // btn = document.createElement('button');\n        // btn.textContent = 'Reset';\n        // this.divUIWrapper.append(btn);\n        // btn.onclick = () => {\n        //     this.app.api.onClickReset();\n        // };\n\n        // btn = document.createElement('button');\n        // btn.textContent = 'Undo';\n        // this.divUIWrapper.append(btn);\n        // btn.onclick = () => {\n        //     this.app.api.onClickUndo();\n        // };\n\n        // btn = document.createElement('button');\n        // btn.textContent = 'Redo';\n        // this.divUIWrapper.append(btn);\n        // btn.onclick = () => {\n        //     this.app.api.onClickRedo();\n        // };\n\n        // btn = document.createElement('button');\n        // btn.textContent = 'Download';\n        // this.divUIWrapper.append(btn);\n        // btn.onclick = () => {\n        //     this.app.api.onClickDownload();\n        // };\n\n        // btn = document.createElement('button');\n        // btn.textContent = 'Capture';\n        // this.divUIWrapper.append(btn);\n        // btn.onclick = () => {\n        //     this.app.api.onClickCapture();\n        // };\n\n        let sliderRotation = document.createElement('input');\n        sliderRotation.type = 'range';\n        sliderRotation.min = '-3.13';\n        sliderRotation.max = '3.13';\n        sliderRotation.step = '0.01';\n        sliderRotation.value = '0';\n        sliderRotation.oninput = () => {\n            this.app.api.onDragRotate(+sliderRotation.value);\n        };\n        this.divUIWrapper.append(sliderRotation);\n\n        let sliderScale = document.createElement('input');\n        sliderScale.type = 'range';\n        sliderScale.min = '0.2';\n        sliderScale.max = '2';\n        sliderScale.step = '0.01';\n        sliderScale.value = '1';\n        sliderScale.oninput = () => {\n            this.app.api.onDragZoom(+sliderScale.value);\n        };\n        this.divUIWrapper.append(sliderScale);\n\n        const divURL = document.createElement('input');\n        // divURL.textContent = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png';\n        divURL.setAttribute('type', 'text');\n        divURL.setAttribute('value', 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png');\n        this.divUIWrapper.append(divURL);\n        divURL.oninput = () => {\n            this.app.api.inputImportByURL(divURL.textContent as string);\n        };\n        divURL.addEventListener('keyup', (event: KeyboardEvent) => {\n            if (event.keyCode === 13) { // Enter\n                // event.preventDefault();\n                // this.core.exprssImageApp.core.common.reset();\n                // this.core.exprssImageApp.core.importImage(divURL.value as string);\n            }\n        });\n\n\n        // var x = document.createElement('INPUT');\n        // x.setAttribute('type', 'text');\n        // x.setAttribute('value', 'Hello World!');\n\n        let divTitle = document.createElement('div');\n        divTitle.textContent = 'Offset: ';\n        divTitle.style.padding = '10px';\n\n        let divInput = document.createElement('input');\n        divInput.style.width = '30px';\n        divInput.setAttribute('type', 'text');\n        divInput.setAttribute('min', '-50');\n        divInput.setAttribute('max', '50');\n        divInput.setAttribute('value', '10');\n\n        // divInput.\n        // divInput.setAttribute('min', '10');\n        divTitle.append(divInput);\n        this.divUIWrapper.append(divTitle);\n        divInput.addEventListener('keyup', (event: KeyboardEvent) => {\n            if (event.keyCode === 13) { // Enter\n                // event.preventDefault();\n                console.log('divInput.value', divInput.value);\n\n                // let value = Number.parseFloat(divInput.value);\n\n                // this.core.exprssImageApp.core.common.offsetByInput(value);\n                // console.log(value);\n                // if(divInput.value.includes('-')) {\n                //     console.log('-', divInput.value.includes('-'));\n\n                //     this.expreeImageTool.core.controller.offsetByInput(Number.parseFloat(divInput.value) * -1);\n                // } else {\n                //     this.expreeImageTool.core.controller.offsetByInput(Number.parseFloat(divInput.value));\n                //     console.log('+', divInput.value.includes('-'));\n                // }\n            }\n        });\n\n\n        // let divRatio = document.createElement('div');\n        // divRatio.textContent = 'ddddd: ';\n        // divRatio.style.padding = '10px';\n        // this.divUIWrapper.append(divRatio)\n\n        let btn = document.createElement('button');\n        btn.textContent = 'dd';\n        // btn.style.float = 'left';\n        this.divUIWrapper.append(btn);\n        btn.onclick = () => {\n            // const img = this.core.exprssImageApp.core.canvas.capture();\n            // // console.log(img);\n            // this.divUIWrapper.append(img);\n        };\n        // // .............................................\n        // divTitle = document.createElement('div');\n        // // divTitle.style.float =\n        // // divTitle.textContent = 'Offset: '\n\n        // let divText= document.createElement('div');\n        // divText.textContent = 'x: ';\n        // divText.style.padding = '10px';\n        // divTitle.append(divText);\n\n        // divInput = document.createElement('input');\n        // // divInput.style.borderLeft = '10px';\n        // divInput.setAttribute('type', 'text');\n        // divInput.setAttribute('value', '5');\n        // divTitle.append(divInput);\n        // this.divUIWrapper.append(divTitle);\n        // divInput.addEventListener('keyup', (event: KeyboardEvent) => {\n        //     if (event.keyCode === 13) { // Enter\n        //         event.preventDefault();\n        //         this.expreeImageTool.core.controller.offsetByInput(+divInput.value);\n        //     }\n        // });\n\n        // divInput = document.createElement('input');\n        // divInput.style.borderLeft = '10px';\n        // divInput.setAttribute('type', 'text');\n        // divInput.setAttribute('value', '5');\n        // this.divUIWrapper.append(divInput);\n        // divInput.addEventListener('keyup', (event: KeyboardEvent) => {\n        //     if (event.keyCode === 13) { // Enter\n        //         event.preventDefault();\n        //         this.expreeImageTool.core.controller.offsetByInput(+divInput.value);\n        //     }\n        // });\n\n    }\n\n    public Layer0() {\n        let colorFill = this.theme.top.iconFill;\n        let divLayer0 = document.createElement('div');\n        // divLayer0.style.background = '#ff0000';\n        divLayer0.style.margin = '5px';\n        divLayer0.style.marginBottom = '20px';\n        this.divUIWrapper.append(divLayer0);\n\n        let div =  getBtnBySVGPath(\n            () => {\n                this.app.api.onClickPlace();\n            },         `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"${colorFill}\" viewBox=\"0 0 20 20\">\n            <path d=\"M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z\"/>\n            </svg>\n            `\n        )\n        div.style.transform = `scale(${1.7})`;\n        div.style.paddingRight = '10px';\n        divLayer0.append(div);\n\n        divLayer0.append(\n            getBtnBySVGPath(\n                () => {\n                    this.app.api.onClickCancel();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"${colorFill}\" viewBox=\"0 0 20 20\">\n                <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z\"/>\n                </svg>\n                `\n                , 1.4\n            )\n        );\n\n        divLayer0.append(\n            getBtnBySVGPath(\n                () => {\n                    this.app.api.onClickReset();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"${colorFill}\" viewBox=\"0 0 20 20\">\n                <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z\"/>\n                </svg>\n                `\n                , 1.4\n            )\n        );\n\n        divLayer0.append(\n            getBtnBySVGPath(\n                () => {\n                    this.app.api.onClickDownload();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"${colorFill}\" viewBox=\"0 0 20 20\">\n                <path d=\"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM8 5a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 9.293V5.5A.5.5 0 0 1 8 5z\"/>\n                </svg>\n                `\n                , 1.4\n            )\n        );\n    }\n    public Layer1() {\n        let divLayer1 = document.createElement('div');\n        // divLayer1.style.background = '#ff00f0';\n        this.divUIWrapper.append(divLayer1);\n\n        let colorFill = this.theme.top.iconFill;\n\n        divLayer1.append(\n            getBtnBySVGPath(\n                () => {\n                    // this.model.app.api.onclickActiveCommand(ActiveCommandMode.SELECT);\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(\n            getBtnBySVGPath(\n                () => {\n                    this.app.api.onClickUndo();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z\"/>\n                </svg>\n                `\n            )\n        );\n\n        divLayer1.append(\n            getBtnBySVGPath(\n                () => {\n                    this.app.api.onClickRedo();\n                },         `\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n                <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z\"/>\n                </svg>\n                `\n            )\n        );\n\n        // divLayer1.append(\n        //     getBtnBySVGPath(\n        //         () => {\n        //             // this.model.app.api.onclickActiveCommand(ActiveCommandMode.POINT_REGULAR);\n        //         },         `\n        //         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n        //         <path d=\"M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\"/>\n        //         </svg>\n        //         `\n        //     )\n        // );\n\n        // divLayer1.append(\n        //     getBtnBySVGPath(\n        //         () => {\n        //             // this.model.app.api.onclickActiveCommand(ActiveCommandMode.POINT_NUMBERED);\n        //         },         `\n        //         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n        //         <circle cx=\"8\" cy=\"8\" r=\"8\"/>\n        //         </svg>\n        //         `\n        //     )\n        // );\n\n        // divLayer1.append(\n        //     getBtnBySVGPath(\n        //         () => {\n        //             // this.model.app.api.onclickActiveCommand(ActiveCommandMode.POLYLINE_BENDING);\n        //         },         `\n        //         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n        //         <path d=\"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z\"/>\n        //         </svg>\n        //         `\n        //     )\n        // );\n\n        // divLayer1.append(\n        //     getBtnBySVGPath(\n        //         () => {\n        //             // this.model.app.api.onclickActiveCommand(ActiveCommandMode.POLYGON_GRAPH);\n        //         },         `\n        //         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"${colorFill}\" viewBox=\"0 0 16 16\">\n        //         <path fill-rule=\"evenodd\" d=\"M8.5.134a1 1 0 0 0-1 0l-6 3.577a1 1 0 0 0-.5.866v6.846a1 1 0 0 0 .5.866l6 3.577a1 1 0 0 0 1 0l6-3.577a1 1 0 0 0 .5-.866V4.577a1 1 0 0 0-.5-.866L8.5.134z\"/>\n        //         </svg>\n        //         `\n        //     )\n        // );\n\n\n    }\n}\n","import { Environment } from './lib';\nimport { AppImageDrawing } from '../AppImageDrawing';\nimport { API } from './API';\nimport { Core } from './Core';\nimport { UI } from './UI';\nexport type IAppImageEditing = {\n    divHost: HTMLElement;\n    core: Core;\n    initImageByURL: (url: string) => void;\n    initImageByImg: (img: HTMLElement) => void;\n    emitAction: (data: any) => void;\n}\nexport interface IAnnotationEditingParam {\n    id: string;\n    UI: boolean;\n    // eslint:disable-next-line:no-any\n    theme?: unknown;\n    themeUI?: any;\n    environment: Environment;\n  }\nexport class AppImageEditing {\n    public divHost: HTMLElement;\n    public api: API;\n    public core: Core;\n    public ui: UI;\n    public param: IAnnotationEditingParam;\n    public emitAction: (data: any) => void;\n    constructor(param: IAnnotationEditingParam) {\n        this.param = param\n        this.divHost = document.getElementById(param.id);\n\n        if (this.param.theme) {\n            this.ui = new UI(this, this.param.theme);\n        }\n        this.core = new Core(this);\n        this.api = new API(this);\n\n    }\n    public initByImageDrawingApp(app: AppImageDrawing) {\n        //@ts-ignore\n        this.core.div.style.width = app.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.aCanvas.canvas.width + 'px';\n        //@ts-ignore\n        this.core.div.style.height = app.implementations.imageAnnoApp.graphicsCoreWrapper.canvasWrapper.aCanvas.canvas.height + 'px';\n\n        this.core.canvas.resize()\n    }\n    public initImageByURL(url: string) {\n        this.core.importImage(url);\n\n    }\n    public initImageByImg(img: HTMLImageElement) {\n        this.core.importImageByImage(img);\n    }\n    public pushCanvasDrawing(canvas: HTMLCanvasElement) {\n        if (canvas) {\n            this.core.div.prepend(canvas);\n        }\n        // this.core.canvas.canvas.append(canvas);\n    }\n    public pushDrawingData(data: any) {\n        this.api.updateGeometries(data);\n    }\n    public setScaleGlobal(scale: number) {\n        this.api.setScaleGlobal(scale);\n    }\n    public getData(needOriginalImage = false) {\n        return this.api.getData(needOriginalImage);\n    }\n    public getImage() {\n        return this.api.getImage();\n    }\n    public getCanvas() {\n        return this.api.getCtx().canvas;\n    }\n    public destroy() {\n        this.api.onClickDestroy();\n    }\n    public set coverColor(v: string) {\n        this.api.updateCoverColor(v);\n    }\n}\n"],"names":["API","constructor","app","this","setTypeImageCompression","v","core","canvas","typeImageCompression","shiftEnvironment","param","environment","scene","renderForce","onClickDestroy","destroy","ui","divExpressImageEditingWrapper","parentNode","removeChild","div","error","console","debug","emitAction","activateEffectEnv","fromApp","activeCommand","deactivateEffectEnv","onClickPlace","emitDataToSave","onClickCancel","onClickReset","onClickUndo","undo","onClickRedo","redo","onClickRevertToOriginal","revertToOriginal","onClickDownload","onClickCapture","initEffect","d","updateEffect","filter","emitFilterData","emitNeeded","getGeometryLength","dataGeometries","length","updateCropDOM","frame","renderer","updateSVG","getFrameSize","frameSize","onClickShiftShape","type","frameShapeType","captureCanvas","common","captureState","onClickShiftShapeRatio","frameRatioType","initPostSaveImg","onRotateCropping","degree","rotationByDegree","onDragRotate","rotate","onDragZoom","scale","onZoomLevel","level","scaleByLevel","inputImportByURL","reset","importImage","initFrame","x","y","width","height","rotation","shapeType","ratio","updateFrame","update","updateFrameParam","updateGeometries","data","shiftFilterPreset","preset","shiftEffectByPreset","setScaleGlobal","scaleByRatio","getData","forceRevertToOriginal","ctx","getCtx","ctxFiltered","getCtxFiltered","params","getParams","drawing","getDrawing","effecting","getEffecting","getParamsCropping","getImage","capture","captureCtx","captureCtxFiltered","updateCoverColor","result","hex2rgba","colResult","hls0","rgb2hsl","hls1","col1","hsl2rgb","updateColorBG","TouchInteraction","controller","touchPre","touchstart","e","t","rect","getBoundingClientRect","evX","targetTouches","pageX","left","evY","pageY","top","touchStartRotation","touchStartScale","pointDown","clientX","clientY","touchmove","rotationByTouch","scaleByTouch","pointDrag","touchcancel","preventDefault","touchend","pointUp","MouseInteraction","mouseDown","mouseUp","mouseWheel","zoom","deltaY","mouseMove","isDown","pointMove","KeyboardInteraction","keyDown","hasShift","shiftKey","keyUp","EventController","touchInteraction","mouseInteraction","keyboardInteraction","resizeWindow","api","appendEvent","self","document","body","addEventListener","window","removeEvent","removeEventListener","Canvas","eventController","isActive","log","isViewChanging","loopNum","needRenderloop","ablePan","canvasOutFiltered","ctxOutFiltered","canvasOut","ctxOut","loopNeeded","ImageType","loopNumMax","needcheckerboardbackground","imgOut","Image","crossOrigin","init","loopInit","createElement","canvasOutMerged","id","clientWidth","clientHeight","style","background","append","border","getContext","initEvent","src","toDataURL","loop","resize","requestAnimationFrame","before","performance","now","renderPre","after","toFixed","clear","ctxView","clearRect","drawBackgroundWhite","render","Common","import","url","updateCursor","isHover","idHover","activeCursor","dragging","set_nwse_resize","set_nesw_resize","set_ew_resize","set_ns_resize","default","updateWidthByInput","widthMin","imageWrapper","img","updateSizeByInputPost","updateHeightByInput","heightMin","offsetByInput","idSelected","offsetByIDFreeform","rotationRadian","postUpdate","toRadians","zoomLevel","downloadImage","a","href","download","appendChild","click","numRendered","ActiveCommand","isDrag","mousePre","mouse","mouseRemapValue","canvasBounding","scalePre","anglePre","clickUI","topToleranceForClickUI","mouseDragRect","translate","mouseDragPan","pan","ActiveCursor","toScreen","xPixel","yPixel","mousePostProcess","isHoverCheck","updateVecPre","isMoved","updateCtxForce","t0","t1","angle","Math","atan2","theAngle","distance","sqrt","round","shape","aspectRatio","getParamsFilter","JSON","stringify","emitUndoRedoHistory","dataOut","resetState","hide","RendererSVG","svgRectControl0","svgRectControl1","svgRectControl2","svgRectControl3","svgRectControl4","svgRectControl5","svgRectControl6","svgRectControl7","svgRectFrame","svgRec","lineX0","lineX1","lineY0","lineY1","createElementNS","setAttribute","position","strokeStyle","getRectSVG","updatePos","undefined","parentElement","canvasElementBounding","heightCanvas","offsetFromDiv","xOff","yOff","parseInt","value","display","Renderer","_opacity","_time","_tSVG","_fillStyleRuntime","_fillStyle","_fillStyleHover","_sizePoint","_sizeMidPoint","rendererSVG","needtoHideSVG","initPost","sizePoint","sizeMidPoint","r","g","b","ColorInterpolation","fillStyle","trimContextByShape","renderPost","offset","i","cpList","col","linearColorInterpolation","updateGeometry","CP_TYPE","ControlPoint","xs0","ys0","xs1","ys1","Endpoint","Midpoint","renderVertex","Transform","safeguardForDraggingOutOfExtent","offsetByIDConstraint","newRatio","getRatioByNewWidth","getRatioByNewHeight","updatePost","remaining","updateGuides","xOffGuid","yOffGuid","updateCenterCV","cv","Interaction","tolerance","checkSizeToOriginal","idCP","Frame","transform","interaction","cvPre","_widthMin","_heightMin","_frameRatioType","FrameRatioPreset","_frameShapeType","FrameShapeType","setRatio","isLandscape","updateFrameByRatio","landscape","updateUIWidthHeight","activate","floor","tUpdateCP","captureNeeded","ctxNoFilter","updateCanvasCapture","renderBelowFrameGeometries","op","beginPath","xx","yy","arc","closePath","fill","restore","updateCtxFiltered","updateCtxNoFilter","drawImage","trimCanvasByShape","globalCompositeOperation","cutOutContextByShape","ImageWrapper","_img","updateData","Scene","index","sceneManager","svgRPoint","svgNPoint","SceneManager","getRegularPointSMX","getNumberedPointSMX","Environment","getRegularPointAGSM","push","getCurrentState","styles","GType","renderRPointProjected","nodes","path2D","colorRgba","renderNPointCircle","number","renderNPoint","renderPolyline","renderPolygon","renderCircle","renderArrowSingle","renderArrowDouble","UIEffect","uiFilter","divText","divHost","inputBlur","inputInter","inputSepia","inputContrast","inputBrightness","inputSaturate","inputHueRotate","divInter","divBlur","divSepia","divContrast","divBrightness","divSaturate","divHueRotates","host","appendUI","divBtn","onclick","imageFilter","textContent","color","fontSize","padding","element","elementInter","getInput","input","oninput","updateInterpolation","updateFilterParam","updateFilter","updateUIValue","getFilterParam","title","min","max","step","defaultValue","AbstractLayer","divLayer","numLayer","nameLayer","fn","backgroundColor","margin","ditTintTitle","buttonClose","updateLayerNum","num","UIColorSliderElement","divContainer","divInput","colorElement","colorText","appearance","updateValue","UIBlendingModeElement","mode","ColorBlending","optionBlendingMode","item","option","onchange","target","ColorCanvasElement","marginTop","updateColor","UIHexInputElement","rgba","isNaN","PlainLayer","super","colorCanvas","hexElement","rElement","gElement","bElement","aElement","modeElement","random","updateHex","rgb2Hex","bg0","RadialGradientLayer","hexElement0","rElement0","gElement0","bElement0","aElement0","colorCanvas0","hexElement1","rElement1","gElement1","bElement1","aElement1","colorCanvas1","innerElement","outerElement","innerText","outerText","in","out","bg1","LayerType","UITint","layers","isCustom","appendHost","appendButtonAdd","divHostAddButton","divAddPLayer","addLayer","divAddGLayer","typeLayer","layer","updateRendering","removeLayer","updateStatus","splice","indexOf","updateIndex","p","UIFilter","uiEffect","uiTint","debugMode","keyEvent","k","key","shiftEffect","displayUI","zIndex","appendUIFilter","appendUITint","Controller","_activate","checkChanges","debounce","canvasView","updateDivText","updateCustomFilter","filters","n","typePreset","getFilterTypePresetByID","interpolation","ImageFilter","tints","modeDebug","updateParamsInterpolation","filterPreset","getParamsByPreset","cx","cy","imageFilterByArray","imageTint","renderView","trimCanvas","Core","divContentWrapper","initCanvas","initApp","image","onload","importImageByImage","UI","theme","divUIWrapper","justifyContent","marginBottom","txt","Layer0","Layer1","updateStyle","divSizeFrameBG","textAlign","divWidth","Number","parseFloat","sliderRotation","sliderScale","divURL","event","keyCode","divTitle","btn","colorFill","iconFill","divLayer0","getBtnBySVGPath","paddingRight","divLayer1","AppImageEditing","getElementById","initByImageDrawingApp","implementations","imageAnnoApp","graphicsCoreWrapper","canvasWrapper","aCanvas","initImageByURL","initImageByImg","pushCanvasDrawing","prepend","pushDrawingData","needOriginalImage","getCanvas","coverColor"],"sourceRoot":""}
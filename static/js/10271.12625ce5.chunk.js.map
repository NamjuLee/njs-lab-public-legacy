{"version":3,"file":"static/js/10271.12625ce5.chunk.js","mappings":"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","sources":["njslab/Tools/GridOptimizer/Asset/index.ts","njslab/Tools/GridOptimizer/ViewWrapper/index.ts","njslab/Tools/GridOptimizer/GraphicsCoreWrapper/CanvasWrapper/CanvasThree/CoreThree/CameraController.ts","njslab/Tools/GridOptimizer/GraphicsCoreWrapper/CanvasWrapper/CanvasThree/CanvasThree.ts","njslab/Tools/GridOptimizer/GraphicsCoreWrapper/CanvasWrapper/index.ts","njslab/Tools/GridOptimizer/GraphicsCoreWrapper/index.ts","njslab/Tools/GridOptimizer/SceneWrapper/ActiveCommand/ActiveCommandController.ts","njslab/Tools/GridOptimizer/SceneWrapper/GeometryCommon/GeometryCommon.ts","njslab/Tools/GridOptimizer/SceneWrapper/Light/LightingController.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/Common/Renderer/index.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/AppGridOptimizer/Optimizer/Geometry/BoundingBox.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/Common/Geometry/Polyline.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/AppGridOptimizer/Optimizer/Core/Math.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/AppGridOptimizer/Optimizer/Geometry/Rect.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/AppGridOptimizer/Optimizer/GridSystem/Cell.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/AppGridOptimizer/Optimizer/GridSystem/GridSystem.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/AppGridOptimizer/Optimizer/index.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/AppGridOptimizer/AppGridOptimizer.ts","njslab/Tools/GridOptimizer/SceneWrapper/Definition/index.ts","njslab/Tools/GridOptimizer/SceneWrapper/index.ts","njslab/Tools/GridOptimizer/IO/MouseInteraction/MouseInteraction.ts","njslab/Tools/GridOptimizer/IO/index.ts","njslab/Tools/GridOptimizer/index.ts"],"sourcesContent":["\r\nexport class Asset {\r\n    // tslint:disable-next-line:no-any\r\n    // rPoint: any;\r\n\r\n    constructor() {\r\n        //\r\n    }\r\n}","import { Demo200GridOptimizer } from '..';\r\nexport class ViewWrapper {\r\n    app: Demo200GridOptimizer;\r\n    constructor(app: Demo200GridOptimizer) {\r\n        this.app = app;\r\n    }\r\n}","import * as THREE from 'three';\r\nimport { OrbitControls } from 'three-orbitcontrols-ts';\r\nimport { CLICK_TYPE } from '../../../../lib';\r\nimport { CanvasThree } from '../CanvasThree';\r\nimport { MouseEventData } from '../../../../IO/MouseInteraction/MouseInteraction';\r\n\r\n// const DeviceOrientationControls = require('../../lib/DeviceOrientationControls');\r\n// const StereoEffect = require('../../lib/StereoEffect');\r\n\r\n// import { StereoEffect } from '../lib/StereoEffect';\r\n\r\nexport enum CAMERA_TYPE {\r\n    PERSPECTIVE = 'PERSPECTIVE',\r\n    ORTHOGRAPHIC = 'ORTHOGRAPHIC',\r\n    STEREO = 'STEREO'\r\n}\r\n\r\nexport class CameraControllerThree {\r\n\r\n    canvas: CanvasThree;\r\n    cameraP: THREE.PerspectiveCamera; // Camera;\r\n    cameraO: THREE.OrthographicCamera; // Camera;\r\n    controls: OrbitControls;\r\n\r\n    initX: number = 0;\r\n    initY: number = 0;\r\n    prevX: number = 0;\r\n    prevY: number = 0;\r\n\r\n    yRotRate: number;\r\n    xRotRate: number;\r\n    xPanRate: number;\r\n    yPanRate: number;\r\n    zPanRate: number;\r\n\r\n    rotateRate: number = 150; // 0.000000001; // 150;\r\n    panRate: number = 50; // 0.000000001; // 400;\r\n    zoomRate: number = 200; // 0.000000001; // 200;\r\n\r\n    zoomFactor: number = 1;\r\n\r\n    frustumSize: number = 0.001; // 500;\r\n\r\n    type: CAMERA_TYPE;\r\n    cameraShift: number = 0;\r\n\r\n    width: number;\r\n    height: number;\r\n    ableToMove: boolean = true;\r\n\r\n    // tslint:disable-next-line:no-any\r\n    stereoCamera: THREE.StereoCamera;\r\n\r\n    constructor(canvas: CanvasThree, width: number, height: number, type: CAMERA_TYPE = CAMERA_TYPE.PERSPECTIVE) {\r\n        this.canvas = canvas;\r\n        this.type = type;\r\n        this.width = width; this.height = height;\r\n        // this.aspect = width / height;\r\n\r\n        if (this.type === CAMERA_TYPE.PERSPECTIVE) {\r\n            this.GetPerspective(0, 10, 50);\r\n        } else if (this.type === CAMERA_TYPE.ORTHOGRAPHIC) {\r\n            this.GetOrthographic();\r\n        } else if (this.type === CAMERA_TYPE.STEREO) {\r\n            this.GetStereo();\r\n        }\r\n        this.stereoCamera = new THREE.StereoCamera(); // (this.canvas.renderer);\r\n    }\r\n    GetStereo() {\r\n\r\n        // console.log(StereoEffect);\r\n        // console.log(DeviceOrientationControls);\r\n\r\n    }\r\n    set aspect(aspect: number) {\r\n        if (this.type === CAMERA_TYPE.PERSPECTIVE) {\r\n            this.cameraP.aspect = aspect;\r\n        } else if (this.type === CAMERA_TYPE.ORTHOGRAPHIC) {\r\n            //\r\n        }\r\n    }\r\n    get aspect() {\r\n        return this.width / this.height;\r\n    }\r\n    get camera() {\r\n        if (this.type === CAMERA_TYPE.PERSPECTIVE) {\r\n            return this.cameraP;\r\n        } else if (this.type === CAMERA_TYPE.ORTHOGRAPHIC) {\r\n            return this.cameraO;\r\n        } else {\r\n            return this.cameraP;\r\n        }\r\n    }\r\n    GetPerspective(x: number = 0, y: number = 2, z: number = 2) {\r\n        this.cameraP = new THREE.PerspectiveCamera(45, this.width / this.height, 0.01, 10000);\r\n        this.cameraP.position.set(x, y, z);\r\n        this.InitOrbitController();\r\n    }\r\n    GetOrthographic() {\r\n        this.cameraO = new THREE.OrthographicCamera(this.frustumSize * this.aspect / - 2, this.frustumSize * this.aspect / 2, this.frustumSize / 2, this.frustumSize / - 2, 0.01, 50000);\r\n        this.cameraO.position.set(0, 1, 0);\r\n        this.InitOrbitController();\r\n    }\r\n    InitOrbitController() {\r\n\r\n        if (this.type === CAMERA_TYPE.PERSPECTIVE) {\r\n            this.controls = new OrbitControls(this.cameraP, this.canvas.renderer.domElement);\r\n        } else if (this.type === CAMERA_TYPE.ORTHOGRAPHIC) {\r\n            this.controls = new OrbitControls(this.cameraO, this.canvas.renderer.domElement);\r\n        }\r\n        // this.controls.panningMode = THREE.HorizontalPanning; // default is THREE.ScreenSpacePanning\r\n        this.controls.minDistance = 0.01;\r\n        this.controls.maxDistance = 500;\r\n        // this.controls.maxPolarAngle = Math.PI / 2;\r\n        this.controls.enablePan = true;\r\n        this.controls.enableZoom = true;\r\n\r\n        this.yRotRate = this.rotateRate / this.width * Math.PI / 90;\r\n        this.xRotRate = this.rotateRate / this.height * Math.PI / 180;\r\n        this.xPanRate = (this.panRate / this.width) * this.zoomFactor;\r\n        this.yPanRate = (this.panRate / this.height) * this.zoomFactor;\r\n        this.zPanRate = this.zoomRate / this.height;\r\n        // this.EnableDamping(true);\r\n\r\n        // this.controls.maxPolarAngle = 1.5; // ground\r\n    }\r\n    EnableDamping(v: boolean, factor: number = 0.35) {\r\n        this.controls.enableDamping = v; // an animation loop is required when either damping or auto-rotation are enabled\r\n        this.controls.dampingFactor = factor;\r\n    }\r\n    MouseDown(x: number, y: number) {\r\n        this.initX = this.prevX = x; // - this.offsetX;\r\n        this.initY = this.prevY = y; // - this.offsetY;\r\n    }\r\n    MouseMove(x: number, y: number, shift: boolean = false) {\r\n        // console.log(x, y, shift);\r\n        // if (!this.ableToMove) { return; }\r\n\r\n        // console.log(x,y)\r\n        const dx = x - this.prevX;\t\t// Difference since last mouse move\r\n        const dy = y - this.prevY;\r\n\r\n        // When shift is being helt down, we pan around else we rotate.\r\n        if (!shift) {\r\n            this.controls.rotateLeft(dx * this.xRotRate);\r\n            this.controls.rotateUp(dy * this.yRotRate);\r\n        } else {\r\n            // this.controls.pan(dx * this.xPanRate, dy * this.yPanRate);\r\n\r\n            this.controls.panLeft(dx * this.xPanRate, this.cameraP.matrix);\r\n            this.controls.panUp(dy * this.yPanRate, this.cameraP.matrix);\r\n\r\n            // this.camera.transform.position.x += -dx * this.xPanRate;\r\n            // this.camera.transform.position.y += dy * this.yPanRate;\r\n        }\r\n        // this.controls.panUp(0.001, this.camera.matrix);\r\n        this.prevX = x;\r\n        this.prevY = y;\r\n        // this.controls.update();\r\n    }\r\n    MouseWheel(v: number) {\r\n        // console.log(v);\r\n        this.controls.enableZoom = true;\r\n        v *= 0.1;\r\n\r\n        const dd = this.cameraP.position.length() * 100;\r\n\r\n        this.zoomFactor = dd;\r\n\r\n        if (v > 0) {\r\n            this.cameraP.position.x *= 0.9;\r\n            this.cameraP.position.y *= 0.9;\r\n            this.cameraP.position.z *= 0.9;\r\n        } else {\r\n            this.cameraP.position.x *= 1.1;\r\n            this.cameraP.position.y *= 1.1;\r\n            this.cameraP.position.z *= 1.1;\r\n        }\r\n\r\n    }\r\n    ShiftCamera() {\r\n        this.cameraShift++;\r\n        if (this.cameraShift === 2) { this.cameraShift = 0; }\r\n        if (this.cameraShift === 0) {\r\n            this.GetPerspective();\r\n        } else if (this.cameraShift === 1) {\r\n            this.GetOrthographic();\r\n        }\r\n    }\r\n    MouseEventController(e: MouseEventData) {\r\n        if (e.CLICK_TYPE === CLICK_TYPE.DOWN) { this.MouseDown(e.x, e.y); }\r\n        if (e.CLICK_TYPE === CLICK_TYPE.DRAG) { this.MouseMove(e.x, e.y, e.pressedShift); }\r\n        if (e.CLICK_TYPE === CLICK_TYPE.WHEEL) { this.MouseWheel(e.wheel); }\r\n\r\n    }\r\n}","import * as THREE from 'three';\r\nimport { CanvasWrapper } from '..';\r\nimport { CameraControllerThree } from './CoreThree/CameraController';\r\nexport class CanvasThree {\r\n    hostDiv: HTMLElement;\r\n    camera: CameraControllerThree;\r\n    scene: THREE.Scene;\r\n    renderer: THREE.WebGLRenderer;\r\n\r\n    canvasWrapper: CanvasWrapper;\r\n    vrBtn: HTMLElement;\r\n    bg: number = 0x000000;\r\n    isActive: boolean = true;\r\n    constructor(canvasWrapper: CanvasWrapper, hostDiv: HTMLElement) {\r\n        this.canvasWrapper = canvasWrapper;\r\n        this.hostDiv = hostDiv;\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        const width = this.hostDiv.clientWidth;\r\n        const height = this.hostDiv.clientHeight;\r\n\r\n        this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\r\n        this.renderer.setPixelRatio(width / height);\r\n\r\n        this.camera = new CameraControllerThree(this, width, height);\r\n        this.scene = new THREE.Scene();\r\n        // this.scene.background = this.bg;\r\n\r\n        this.renderer.domElement.id = 'dynamic-spring';\r\n        this.renderer.domElement.style.position = 'absolute';\r\n        this.renderer.domElement.style.pointerEvents = 'none';\r\n\r\n        this.renderer.setSize(width, height);\r\n        this.hostDiv.appendChild(this.renderer.domElement);\r\n        this.RenderLoop(this);\r\n    }\r\n    RenderLoop(canvas: CanvasThree) {\r\n        if (!this.isActive) { return; }\r\n        requestAnimationFrame(() => { this.RenderLoop(this); });\r\n        this.UpdateBinding();\r\n\r\n        this.camera.controls.update();\r\n        this.renderer.render(this.scene, this.camera.camera);\r\n    }\r\n    UpdateBinding() {\r\n        // console.log('implementation needed');\r\n    }\r\n    ResizeCanvas(width: number, height: number) {\r\n        this.camera.aspect = width / height;\r\n        this.camera.camera.updateProjectionMatrix(); // updateMatrix(); // updateProjectionMatrix();\r\n        this.renderer.setSize(width, height);\r\n    }\r\n    ResizeEffect(width: number, height: number) {\r\n        // this.camera.effect.setSize(width, height);\r\n    }\r\n    Remove() {\r\n        while (this.scene.children.length) {\r\n            this.scene.remove(this.scene.children[0]);\r\n        }\r\n        // this.scene.background = 0x000000;\r\n    }\r\n\r\n}","import { GraphicsCoreWrapper } from '..';\r\nimport { CanvasThree } from './CanvasThree/CanvasThree';\r\n\r\nexport class CanvasWrapper {\r\n    graphicsCoreWrapper: GraphicsCoreWrapper;\r\n    canvasThree: CanvasThree;\r\n\r\n    constructor(graphicsCoreWrapper: GraphicsCoreWrapper) {\r\n        this.graphicsCoreWrapper = graphicsCoreWrapper;\r\n\r\n        this.canvasThree = new CanvasThree(this, this.graphicsCoreWrapper.app.divHost);\r\n    }\r\n}","\r\nimport { Demo200GridOptimizer } from '..';\r\nimport { CanvasWrapper } from './CanvasWrapper';\r\nexport class GraphicsCoreWrapper {\r\n    app: Demo200GridOptimizer;\r\n    canvasWrapper: CanvasWrapper;\r\n    constructor(app: Demo200GridOptimizer) {\r\n        this.app = app;\r\n        this.canvasWrapper = new CanvasWrapper(this);\r\n    }\r\n    Resize(width: number, height: number) {\r\n        this.canvasWrapper.canvasThree.ResizeCanvas(width, height);\r\n    }\r\n    Dispose() {\r\n        this.canvasWrapper.canvasThree.isActive = false;\r\n    }\r\n}","import { CLICK_TYPE } from '../../lib';\r\nimport { MouseEventData } from '../../IO/MouseInteraction/MouseInteraction';\r\nimport { SceneWrapper } from '..';\r\nexport class ActiveCommandController {\r\n    scene: SceneWrapper;\r\n    constructor(scene: SceneWrapper) {\r\n        this.scene = scene;\r\n    }\r\n    MouseEventController(e: MouseEventData) {\r\n        this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.MouseEventController(e);\r\n        if (e.CLICK_TYPE === CLICK_TYPE.LEFT) {\r\n            this.MouseLeftClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MIDDLE) {\r\n            this.MouseMiddleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN_RIGHT) {\r\n            this.MouseRightClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOUBLE) {\r\n            this.MouseDoubleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MOVE) {\r\n            this.MouseMovePre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DRAG) {\r\n            this.MouseDragPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN) {\r\n            this.MouseDownPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.UP) { this.MouseUpPre(e); return; }\r\n    }\r\n\r\n    // .......................................................\r\n    MouseDown(e: MouseEventData) {/* */ }\r\n    MouseDownPre(e: MouseEventData) {\r\n        this.scene.MouseDown(e.x, e.y);\r\n        this.MouseDown(e);\r\n    }\r\n    MouseLeftClick(e: MouseEventData) {/* */ }\r\n    MouseLeftClickPre(e: MouseEventData) {\r\n\r\n        this.MouseLeftClick(e);\r\n    }\r\n    MouseMiddleClick(e: MouseEventData) {/* */ }\r\n    MouseMiddleClickPre(e: MouseEventData) {\r\n\r\n        this.MouseMiddleClick(e);\r\n    }\r\n    MouseRightClick(e: MouseEventData) { /* */ }\r\n    MouseRightClickPre(e: MouseEventData) {\r\n\r\n        this.MouseRightClick(e);\r\n    }\r\n    MouseUp(e: MouseEventData) { /* */ }\r\n    MouseUpPre(e: MouseEventData) {\r\n        this.scene.MouseUp(e.x, e.y);\r\n        this.MouseUp(e);\r\n\r\n    }\r\n    MouseDoubleClick(e: MouseEventData) {/* */ }\r\n    MouseDoubleClickPre(e: MouseEventData) {\r\n\r\n        this.MouseDoubleClick(e);\r\n    }\r\n    MouseMove(e: MouseEventData) {/* */ }\r\n    MouseMovePre(e: MouseEventData) {\r\n        this.scene.MouseMove(e.x, e.y);\r\n        this.MouseMove(e);\r\n    }\r\n    MouseDrag(e: MouseEventData) {/* */ }\r\n    MouseDragPre(e: MouseEventData) {\r\n        this.scene.MouseDrag(e.x, e.y);\r\n        this.MouseDrag(e);\r\n    }\r\n}","import { SceneWrapper } from '..';\r\nimport { NVector3 } from '../../lib';\r\nimport * as THREE from 'three';\r\nexport class PointInersection {\r\n    vec: NVector3;\r\n    data: THREE.Intersection;\r\n    constructor(x: number, y: number, z: number) {\r\n        this.vec = new NVector3(x, y, z);\r\n    }\r\n}\r\nexport class GeometryCommon {\r\n    scene: SceneWrapper;\r\n\r\n    // list: WallPaperBase[] = [];\r\n    listMesh: THREE.Object3D[] = [];\r\n\r\n    raycaster: THREE.Raycaster = new THREE.Raycaster();\r\n    m: THREE.Vector2 = new THREE.Vector2(0, 0);\r\n    point: PointInersection | undefined;\r\n\r\n    constructor(scene: SceneWrapper) {\r\n        this.scene = scene;\r\n        this.raycaster.params.Points = { threshold: 0.1 };\r\n    }\r\n    Raycast(x: number, y: number, listMesh: THREE.Object3D[]) {\r\n        this.m.x = (x / this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth) * 2 - 1;\r\n        this.m.y = - (y / this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight) * 2 + 1;\r\n\r\n        this.raycaster.setFromCamera(this.m, this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);\r\n\r\n        // let i = this.list.length;\r\n        // while (i--) {\r\n        //     GeometryCommon.list[i].isHover = false;\r\n        // }\r\n\r\n        const intersects = this.raycaster.intersectObjects(listMesh);\r\n        if (intersects.length > 0) {\r\n            const d = intersects[0];\r\n            console.log(d.point);\r\n        }\r\n\r\n        /*\r\n        if (intersects.length > 0) {\r\n            this.point = new PointInersection(intersects[0].point.x, intersects[0].point.y, intersects[0].point.z);\r\n            this.point.data = intersects[0];\r\n            // console.log(this.point);\r\n            // tslint:disable-next-line:no-string-literal\r\n            // let geo = intersects[0].object['geo'] as WallPaperBase;\r\n            // geo.isHover = true;\r\n            // this.Capture = geo;\r\n            // // helper.position.set(0, 0, 0);\r\n            // // helper.lookAt(intersects[0].face.normal);\r\n            // // helper.position.copy(intersects[0].point);\r\n            return intersects[0].object['geo'];\r\n        }\r\n        // }\r\n        this.point = undefined;\r\n        return undefined;\r\n        */\r\n    }\r\n    RaycastPoint(x: number, y: number, listMesh: THREE.Points[]) {\r\n        this.raycaster.params.Points = { threshold: 5 };\r\n        this.m.x = (x / this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientWidth) * 2 - 1;\r\n        this.m.y = - (y / this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.renderer.domElement.clientHeight) * 2 + 1;\r\n\r\n        this.raycaster.setFromCamera(this.m, this.scene.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.camera);\r\n\r\n        // let i = this.list.length;\r\n        // while (i--) {\r\n        //     GeometryCommon.list[i].isHover = false;\r\n        // }\r\n\r\n        const intersects = this.raycaster.intersectObjects(listMesh);\r\n        if (intersects.length > 0) {\r\n            const d = intersects[0];\r\n            return [d.point.x, d.point.y, d.point.z];\r\n        }\r\n\r\n        /*\r\n        if (intersects.length > 0) {\r\n            this.point = new PointInersection(intersects[0].point.x, intersects[0].point.y, intersects[0].point.z);\r\n            this.point.data = intersects[0];\r\n            // console.log(this.point);\r\n            // tslint:disable-next-line:no-string-literal\r\n            // let geo = intersects[0].object['geo'] as WallPaperBase;\r\n            // geo.isHover = true;\r\n            // this.Capture = geo;\r\n            // // helper.position.set(0, 0, 0);\r\n            // // helper.lookAt(intersects[0].face.normal);\r\n            // // helper.position.copy(intersects[0].point);\r\n            return intersects[0].object['geo'];\r\n        }\r\n        // }\r\n        this.point = undefined;\r\n        return undefined;\r\n        */\r\n        return null;\r\n    }\r\n}","// import { LightUtility } from '../../../lib/NJSCore/GL/Libs/Three/Utility/LightUtility';\r\nimport * as THREE from 'three';\r\nimport { SceneWrapper } from '..';\r\nexport class LightingController {\r\n    sceneWrapper: SceneWrapper;\r\n    hemiLight: THREE.HemisphereLight;\r\n    dirLight: THREE.DirectionalLight;\r\n    constructor(sceneWrapper: SceneWrapper) {\r\n        this.sceneWrapper = sceneWrapper;\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        // this.scene.add( LightUtility.GetAmbientLight());\r\n        // this.scene.add( LightUtility.GetHemiLight());\r\n        // this.scene.scene.add( LightUtility.GetDirLight());\r\n\r\n        this.hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6);\r\n        this.hemiLight.color.setHSL(0.6, 1, 0.6);\r\n        this.hemiLight.groundColor.setHSL(0.095, 1, 0.75);\r\n        this.hemiLight.position.set(0, 50, 0);\r\n        this.sceneWrapper.scene.add(this.hemiLight);\r\n\r\n        // const hemiLightHelper = new THREE.HemisphereLightHelper( this.hemiLight, 10 );\r\n        // this.scene.scene.add( hemiLightHelper );\r\n\r\n        this.dirLight = new THREE.DirectionalLight(0xffffff, 1);\r\n        this.dirLight.color.setHSL(0.1, 1, 0.95);\r\n        this.dirLight.position.set(- 1, 1.75, 1);\r\n        this.dirLight.position.multiplyScalar(30);\r\n\r\n        this.dirLight.castShadow = true;\r\n        this.dirLight.shadow.mapSize.width = 2048 * 2;\r\n        this.dirLight.shadow.mapSize.height = 2048 * 2;\r\n\r\n        var d = 50;\r\n        this.dirLight.shadow.camera.left = - d;\r\n        this.dirLight.shadow.camera.right = d;\r\n        this.dirLight.shadow.camera.top = d;\r\n        this.dirLight.shadow.camera.bottom = - d;\r\n\r\n        this.dirLight.shadow.bias = - 0.0001;\r\n\r\n        this.dirLight.shadow.camera.near = 0.001;\r\n        this.dirLight.shadow.camera.far = 350;\r\n\r\n        this.sceneWrapper.scene.add(this.dirLight);\r\n        // this.dirLightHeper = new THREE.DirectionalLightHelper( this.dirLight, 10 );\r\n        // this.scene.scene.add( dirLightHeper );\r\n    }\r\n    Dispose() {\r\n        this.dirLight.visible = false;\r\n        this.hemiLight.visible = false;\r\n\r\n        this.sceneWrapper.scene.remove(this.dirLight);\r\n        this.sceneWrapper.scene.remove(this.hemiLight);\r\n    }\r\n}","import * as THREE from 'three';\r\nimport { Definition } from '../..';\r\n\r\nexport class Renderer {\r\n    definition: Definition;\r\n    \r\n    constructor(definition: Definition) {\r\n        this.definition = definition;\r\n    }\r\n    \r\n    public AddPolyline(vertices: number[][], color: string = 'red') {\r\n        const points3D = new THREE.BufferGeometry();\r\n        const positions = new Float32Array(vertices.length * 3);\r\n        \r\n        vertices.forEach((pos, i) => {\r\n            positions[i * 3] = pos[0];\r\n            positions[i * 3 + 1] = pos[1];\r\n            positions[i * 3 + 2] = pos[2];\r\n        });\r\n        \r\n        points3D.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n        \r\n        const mat = new THREE.LineBasicMaterial({ color: color, linewidth: 1, transparent: true, opacity: 0.55 });\r\n        const line = new THREE.Line(points3D, mat);\r\n        \r\n        this.definition.scene.add(line);\r\n    }\r\n\r\n    public AddRect(vertices: number[][], color: string = 'red') {\r\n        const points3D = new THREE.BufferGeometry();\r\n        const positions = new Float32Array(vertices.length * 3);\r\n        \r\n        vertices.forEach((pos, i) => {\r\n            positions[i * 3] = pos[0];\r\n            positions[i * 3 + 1] = pos[1];\r\n            positions[i * 3 + 2] = pos[2];\r\n        });\r\n        \r\n        points3D.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n        \r\n        const mat = new THREE.LineBasicMaterial({ color: color, linewidth: 5 });\r\n        const line = new THREE.Line(points3D, mat);\r\n        \r\n        this.definition.scene.add(line);\r\n    }\r\n\r\n    public AddRectMesh(vertices: number[][], color: string = 'red') {\r\n        const geometry = new THREE.BufferGeometry();\r\n        const positions = new Float32Array(vertices.length * 3);\r\n        \r\n        vertices.forEach((pos, i) => {\r\n            positions[i * 3] = pos[0];\r\n            positions[i * 3 + 1] = pos[1];\r\n            positions[i * 3 + 2] = pos[2];\r\n        });\r\n        \r\n        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n        \r\n        const indices = new Uint16Array([0, 1, 2, 0, 2, 3]);\r\n        geometry.setIndex(new THREE.BufferAttribute(indices, 1));\r\n        \r\n        const mat = new THREE.MeshBasicMaterial({ color: 0xffff00, side: THREE.DoubleSide });\r\n        const mesh = new THREE.Mesh(geometry, mat);\r\n        \r\n        this.definition.scene.add(mesh);\r\n    }\r\n\r\n    public AddPoint(vert: number[], color: string = '#00afaf') {\r\n        const geometry = new THREE.BufferGeometry();\r\n        const positions = new Float32Array([vert[0], vert[1], vert[2]]);\r\n        \r\n        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n        \r\n        const dotMaterial = new THREE.PointsMaterial({ size: 4, sizeAttenuation: false, color: color });\r\n        const dot = new THREE.Points(geometry, dotMaterial);\r\n        \r\n        this.definition.scene.add(dot);\r\n    }\r\n}\r\n","import { NVector3 } from '../../../../../lib';\r\n\r\nexport class BoundingBox {\r\n    min: NVector3 = new NVector3(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\r\n    max: NVector3 = new NVector3(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);\r\n    constructor() {\r\n\r\n    }\r\n    public Update(vs: NVector3[]) {\r\n        this.min = new NVector3(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\r\n        this.max = new NVector3(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);\r\n\r\n        for (let i = 0; i < vs.length; ++i) {\r\n            if (vs[i].x < this.min.x) { this.min.x = vs[i].x; }\r\n            if (vs[i].y < this.min.y) { this.min.y = vs[i].y; }\r\n            if (vs[i].z < this.min.z) { this.min.z = vs[i].z; }\r\n\r\n            if (vs[i].x > this.max.x) { this.max.x = vs[i].x; }\r\n            if (vs[i].y > this.max.y) { this.max.y = vs[i].y; }\r\n            if (vs[i].z > this.max.z) { this.max.z = vs[i].z; }\r\n        }\r\n    }\r\n}","\r\nimport { BoundingBox } from '../../AppGridOptimizer/Optimizer/Geometry/BoundingBox';\r\nimport { NVector3 } from '../../../../lib';\r\n\r\nexport class Polyline {\r\n\r\n    public static GetPolylineTemp() {\r\n        const pl = new Polyline();\r\n        pl.Add(10, 10);\r\n        pl.Add(-5, 8);\r\n        pl.Add(-7, -10);\r\n        pl.Add(-1, -8);\r\n        pl.Add(10, 10);\r\n        return pl;\r\n    }\r\n    boundingBox: BoundingBox;\r\n    vertices: NVector3[] = [];\r\n    constructor() {\r\n        this.boundingBox = new BoundingBox();\r\n    }\r\n    public Add(x: number, y: number, z: number = 0) {\r\n        this.vertices.push(new NVector3(x, y, z));\r\n        this.boundingBox.Update(this.vertices);\r\n    }\r\n    public GetVerticesForThree() {\r\n        const outList: number[][] = [];\r\n\r\n        this.vertices.forEach((e: NVector3) => {\r\n            outList.push([e.x, e.z, e.y]);\r\n        });\r\n        return outList;\r\n    }\r\n    public GetCenterVec() {\r\n        const cv = new NVector3(0, 0, 0);\r\n        for (let i = 0; i < this.vertices.length - 1; ++i) {\r\n            cv.x += this.vertices[i].x;\r\n            cv.y += this.vertices[i].y;\r\n            cv.z += this.vertices[i].z;\r\n        }\r\n        cv.x /= this.vertices.length - 1;\r\n        cv.y /= this.vertices.length - 1;\r\n        cv.z /= this.vertices.length - 1;\r\n        return cv;\r\n    }\r\n}","import { NVector3 } from '../../../../../../../../NJSCore';\r\n\r\nexport const RotateVecs = (vecs: NVector3[], angle: number) => {\r\n    for (let i = 0; i < vecs.length; ++i) {\r\n        RotateVec(vecs[i], angle);\r\n    }\r\n};\r\nexport const RotateVec = (v: NVector3, angle: number) => {\r\n    let cos = Math.cos(angle * (3.14159265358979 / 180.0));\r\n    let sin = Math.sin(angle * (3.14159265358979 / 180.0));\r\n    v.x = v.x * cos - v.y * sin;\r\n    v.y = v.x * sin + v.y * cos;\r\n};","\r\nimport { BoundingBox } from './BoundingBox';\r\nimport { NVector3 } from '../../../../../../../../NJSCore';\r\n\r\nexport class Rect {\r\n    // p0: NVector3;\r\n    // p1: NVector3;\r\n    // p2: NVector3;\r\n    // p3: NVector3;\r\n    boundingBox: BoundingBox;\r\n    vertices: NVector3[] = [];\r\n    color: string = 'green';\r\n    constructor(p0: NVector3, p1: NVector3, p2: NVector3, p3: NVector3) {\r\n        // this.p0 = p0;\r\n        // this.p1 = p1;\r\n        // this.p2 = p2;\r\n        // this.p3 = p3;\r\n        this.vertices = [p0, p1, p2, p3];\r\n    }\r\n    public GetVerticesForThree() {\r\n        return [\r\n            [this.vertices[0].x, this.vertices[0].z, this.vertices[0].y],\r\n            [this.vertices[1].x, this.vertices[1].z, this.vertices[1].y],\r\n            [this.vertices[2].x, this.vertices[2].z, this.vertices[2].y],\r\n            [this.vertices[3].x, this.vertices[3].z, this.vertices[3].y],\r\n            [this.vertices[0].x, this.vertices[0].z, this.vertices[0].y],\r\n        ];\r\n    }\r\n}","import { RotateVecs } from '../Core/Math';\r\nimport { NVector3 } from '../../../../../lib';\r\nimport { Rect } from '../Geometry/Rect';\r\nimport { GridSystem } from './GridSystem';\r\nexport class Cell {\r\n    grid: GridSystem;\r\n    i: number;\r\n    j: number;\r\n    v: NVector3;\r\n    width: number;\r\n    height: number;\r\n    rect: Rect;\r\n    isInside: boolean = true;\r\n    constructor(grid: GridSystem, i: number, j: number, v: NVector3, width: number, height: number) {\r\n        this.grid = grid;\r\n        this.i = i;\r\n        this.j = j;\r\n        this.v = v;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.rect = new Rect(\r\n            new NVector3(this.v.x - this.width * 0.5, this.v.y - this.height * 0.5),\r\n            new NVector3(this.v.x + this.width * 0.5, this.v.y - this.height * 0.5),\r\n            new NVector3(this.v.x + this.width * 0.5, this.v.y + this.height * 0.5),\r\n            new NVector3(this.v.x - this.width * 0.5, this.v.y + this.height * 0.5)\r\n        );\r\n    }\r\n    public GetVerticesForThree() {\r\n        // if (this.isInside) {\r\n        return this.rect.GetVerticesForThree();\r\n        // } else {\r\n        //     return undefined;\r\n        // }\r\n    }\r\n    public Rotate(v: number) {\r\n        RotateVecs([this.v, ...this.rect.vertices], v);\r\n    }\r\n    public get color() {\r\n        return this.rect.color;\r\n    }\r\n}","\r\nimport { NVector3 } from '../../../../../lib';\r\nimport { Cell } from './Cell';\r\nimport { Optimizer } from '..';\r\nexport class GridSystem {\r\n    optimizer: Optimizer;\r\n    min: NVector3;\r\n    max: NVector3;\r\n    rx: number;\r\n    ry: number;\r\n    intervalX: number;\r\n    intervalY: number;\r\n\r\n    pts: NVector3[] = [];\r\n    cells: Cell[][] = [];\r\n    constructor(optimizer: Optimizer, min: NVector3, max: NVector3) {\r\n        this.optimizer = optimizer;\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    public Init(rx: number, ry: number) {\r\n        this.rx = rx;\r\n        this.ry = ry;\r\n        this.intervalX = (this.max.x - this.min.x) / (this.rx - 1);\r\n        this.intervalY = (this.max.y - this.min.y) / (this.ry - 1);\r\n        this.cells = [];\r\n        this.InitCell();\r\n        this.Rotate();\r\n        this.UpdateInside();\r\n    }\r\n    public InitCell() {\r\n        for (let j = 0; j < this.ry; ++j) {\r\n            const y = this.min.y + j * this.intervalY;\r\n            const cellList: Cell[] = [];\r\n            for (let i = 0; i < this.rx; ++i) {\r\n                const x = this.min.x + i * this.intervalX;\r\n                const v = new NVector3(x, y);\r\n                this.pts.push(v);\r\n                cellList.push(new Cell(this, i, j, v, this.intervalX, this.intervalY));\r\n            }\r\n            this.cells.push(cellList);\r\n        }\r\n    }\r\n    public Rotate() {\r\n        for (let j = 0; j < this.ry; ++j) {\r\n            for (let i = 0; i < this.rx; ++i) {\r\n                const cell = this.cells[j][i];\r\n                cell.Rotate(15);\r\n            }\r\n        }\r\n    }\r\n    public UpdateInside() {\r\n        for (let j = 0; j < this.ry; ++j) {\r\n            for (let i = 0; i < this.rx; ++i) {\r\n                const cell = this.cells[j][i];\r\n                if (NVector3.IsInsideOfVecsWtihVecs(cell.rect.vertices, this.optimizer.polyline.vertices)) {\r\n                    cell.rect.color = 'black';\r\n                    cell.v.color = 'black';\r\n                    cell.isInside = true;\r\n                } else {\r\n                    cell.rect.color = '#efefef';\r\n                    cell.v.color = 'efefef';\r\n                    cell.isInside = false;\r\n\r\n                    cell.rect.vertices.forEach((v: NVector3) => {\r\n                        v.x -= 0.1;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { AppGridOptimizer } from '../AppGridOptimizer';\r\nimport { Polyline } from '../../Common/Geometry/Polyline';\r\nimport { GridSystem } from './GridSystem/GridSystem';\r\nexport class Optimizer {\r\n    gridOptimizerApp: AppGridOptimizer;\r\n    rx: number;\r\n    ry: number;\r\n    polyline: Polyline;\r\n    gridSystem: GridSystem;\r\n    constructor(gridOptimizerApp: AppGridOptimizer, rx: number, ry: number) {\r\n        this.gridOptimizerApp = gridOptimizerApp;\r\n        this.rx = rx;\r\n        this.ry = ry;\r\n        this.InitPolyline();\r\n        this.InitGridSyste();\r\n    }\r\n    public InitPolyline() {\r\n        this.polyline = Polyline.GetPolylineTemp();\r\n\r\n    }\r\n    public InitGridSyste() {\r\n        this.gridSystem = new GridSystem(this, this.polyline.boundingBox.min, this.polyline.boundingBox.max);\r\n        this.gridSystem.Init(this.rx, this.ry);\r\n        // console.log(this.gridSystem);\r\n    }\r\n}","// import * as THREE from 'three';\r\n\r\nimport { Optimizer } from './Optimizer';\r\n\r\nimport { Definition } from '..';\r\nimport { NVector3 } from '../../../../../../NJSCore';\r\n\r\nexport class AppGridOptimizer {\r\n    definition: Definition;\r\n    optimizer: Optimizer;\r\n    constructor(definition: Definition) {\r\n        this.definition = definition;\r\n        this.optimizer = new Optimizer(this, 15, 8);\r\n        this.AddPolyline();\r\n        this.AddPoints();\r\n        this.AddRects();\r\n    }\r\n    public AddPolyline() {\r\n        this.definition.renderer.AddPolyline(this.optimizer.polyline.GetVerticesForThree());\r\n    }\r\n    public AddPoints() {\r\n        this.optimizer.gridSystem.pts.forEach((p: NVector3) => {\r\n            this.definition.renderer.AddPoint([p.x, p.z, p.y], p.color);\r\n        });\r\n    }\r\n    public AddRects() {\r\n        for (let j = 0; j < this.optimizer.gridSystem.cells.length; ++j) {\r\n            for (let i = 0; i < this.optimizer.gridSystem.cells[j].length; ++i) {\r\n                const vert = this.optimizer.gridSystem.cells[j][i].GetVerticesForThree();\r\n                if (vert) {\r\n                    this.definition.renderer.AddRect(vert, this.optimizer.gridSystem.cells[j][i].color);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import * as THREE from 'three';\r\nimport { NVector3 } from '../../lib';\r\nimport { Renderer } from './Common/Renderer';\r\nimport { AppGridOptimizer } from './AppGridOptimizer/AppGridOptimizer';\r\nimport { AppRectOptimizer } from './AppRectOptimizer/AppRectOptimizer';\r\nexport class Definition {\r\n    scene: THREE.Scene;\r\n    renderer: Renderer;\r\n\r\n    _capture: Node | undefined;\r\n\r\n    m: NVector3 = new NVector3(0, 0, 0);\r\n    gridOptimizerApp: AppGridOptimizer;\r\n    appRectOptimizer: AppRectOptimizer;\r\n    constructor(scene: THREE.Scene) {\r\n        this.scene = scene;\r\n        this.renderer = new Renderer(this);\r\n        this.init();\r\n        // console.log('grid optimizer');\r\n    }\r\n    public init() {\r\n        this.gridOptimizerApp = new AppGridOptimizer(this);\r\n        // this.appRectOptimizer = new AppRectOptimizer(this);\r\n\r\n    }\r\n    public update() {\r\n        //\r\n\r\n    }\r\n    public mouseMove(x: number, y: number, z: number) {\r\n\r\n    }\r\n    public mouseDrag(x: number, y: number) {\r\n\r\n    }\r\n    public mouseDown(x: number, y: number, z: number) {\r\n\r\n    }\r\n    public mouseUp() {\r\n\r\n    }\r\n    public dispose() {\r\n\r\n    }\r\n}","import * as THREE from 'three';\r\nimport { Demo200GridOptimizer } from '..';\r\nimport { ActiveCommandController } from './ActiveCommand/ActiveCommandController';\r\nimport { GeometryCommon } from './GeometryCommon/GeometryCommon';\r\nimport { LightingController } from './Light/LightingController';\r\nimport { Definition } from './Definition';\r\nexport class SceneWrapper {\r\n    app: Demo200GridOptimizer;\r\n    activeCommandController: ActiveCommandController;\r\n    geometryCommon: GeometryCommon;\r\n    lightingController: LightingController;\r\n\r\n    scene: THREE.Scene;\r\n    definition: Definition;\r\n\r\n    constructor(app: Demo200GridOptimizer) {\r\n        this.app = app;\r\n        this.activeCommandController = new ActiveCommandController(this);\r\n        this.scene = this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.scene;\r\n        this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.UpdateBinding = () => { this.Update(); };\r\n        this.lightingController = new LightingController(this);\r\n        this.geometryCommon = new GeometryCommon(this);\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.definition = new Definition(this.scene);\r\n\r\n        const size = 10;\r\n        const divisions = 10;\r\n        const colorGrid = 0xeeeeee;\r\n        const colorCenterLine = 0xcccccc;\r\n        const gridHelper = new THREE.GridHelper(size, divisions, colorCenterLine, colorGrid);\r\n        this.scene.add(gridHelper);\r\n    }\r\n    Update() {\r\n        this.definition.update();\r\n    }\r\n    MouseMove(x: number, y: number) {\r\n        //    const pos =  this.geometryCommon.RaycastPoint(x, y, this.definition.points.pointCloud );\r\n        // const pos = this.geometryCommon.RaycastPoint(x, y, this.definition.GetPointForRaycast());\r\n        // if (pos) {\r\n        // this.definition.mouseMove(pos[0], pos[1], pos[2]);\r\n        // }\r\n        this.definition.mouseMove(x, y, 0);\r\n    }\r\n    MouseDown(x: number, y: number) {\r\n        // const pos = this.geometryCommon.RaycastPoint(x, y, this.definition.GetPointForRaycast());\r\n        // if (pos) {\r\n        this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.ableToMove = false;\r\n        // this.definition.mouseDown(pos[0], pos[1], pos[2]);\r\n        // }\r\n        this.definition.mouseDown(x, y, 0);\r\n    }\r\n    MouseUp(x: number, y: number) {\r\n        this.definition.mouseUp();\r\n        this.app.graphicsCoreWrapper.canvasWrapper.canvasThree.camera.ableToMove = true;\r\n    }\r\n    MouseDrag(x: number, y: number) {\r\n        // const pos = this.geometryCommon.RaycastPoint(x, y, this.definition.GetPointForRaycast());\r\n        // if (pos) {\r\n        // this.definition.mouseDrag(pos[0], pos[1]);\r\n        // }\r\n        this.definition.mouseDrag(x, y);\r\n    }\r\n    Dispose() {\r\n        this.definition.dispose();\r\n    }\r\n}","import { CLICK_TYPE } from '../../lib';\r\n\r\n// import {IOWrapper} from '../'\r\nimport { Demo200GridOptimizer } from '../..';\r\n\r\nexport interface IMouseInteractionMenu {\r\n  MouseInteractionMenu: (mouseEventData: MouseEventData) => void;\r\n}\r\nexport class MouseEventData {\r\n  app: Demo200GridOptimizer;\r\n  x: number = -1; y: number = -1; z: number = -1;\r\n  preX: number = -1; preY: number = -1; preZ: number = -1;\r\n  yGLPicking: number;\r\n  // command: ActiveCommandBase; // = new CActiveCommandNone(this.app.activeCommands);\r\n  CLICK_TYPE: CLICK_TYPE = CLICK_TYPE.MOVE;\r\n  isDown: boolean = false;\r\n  isDoubleClick: boolean = false;\r\n  isMove: boolean = false;\r\n  pressedShift: boolean = false;\r\n  pressedAlt: boolean = false;\r\n  pressedCtrl: boolean = false;\r\n\r\n  lat: number = -1;\r\n  long: number = -1;\r\n  wheel: number = 0;\r\n  preWheel: number = 0;\r\n  isActive: boolean = true;\r\n  // premEvent: MouseEventData;\r\n  native: MouseEvent;\r\n  constructor(app?: Demo200GridOptimizer) {\r\n    if (app !== null && app !== undefined) { this.app = app; }\r\n  }\r\n  DeepCopy() {\r\n    let mEvent = new MouseEventData(this.app);\r\n    mEvent.x = this.x; mEvent.y = this.y; mEvent.z = this.z; mEvent.preX = this.preX; mEvent.preY = this.preY; mEvent.preZ = this.preZ;\r\n    mEvent.pressedAlt = this.pressedAlt; mEvent.pressedShift = this.pressedShift; mEvent.pressedCtrl = this.pressedCtrl;\r\n    mEvent.isDoubleClick = this.isDoubleClick; mEvent.isDown = this.isDown; mEvent.isMove = this.isMove;\r\n    mEvent.lat = this.lat; mEvent.long = this.long; mEvent.wheel = this.wheel; mEvent.preWheel = this.preWheel;\r\n    mEvent.yGLPicking = this.yGLPicking;\r\n    mEvent.CLICK_TYPE = this.CLICK_TYPE;\r\n    // mEvent.command = this.command;\r\n    mEvent.native = this.native;\r\n    return mEvent;\r\n  }\r\n}\r\n\r\nexport class MouseInteraction {\r\n  mouseInteractionUI: IMouseInteractionMenu;\r\n  mouseEventDataPre: MouseEventData = new MouseEventData();\r\n  app: Demo200GridOptimizer;\r\n  isEnable: boolean = true;\r\n  clickCount: number = 0;\r\n\r\n  click: boolean = false;\r\n  prevent: boolean = false;\r\n  delay: number = 250;\r\n  timer: NodeJS.Timer | number;\r\n  down: boolean = false;\r\n  e: MouseEventData;\r\n  private _stopPropagation: boolean = false;\r\n\r\n  constructor(app: Demo200GridOptimizer) {\r\n    this.app = app;\r\n    // this.mouseEventDataPre = new MouseEventData();\r\n\r\n  }\r\n  InitNativeMouseEvent(div: HTMLElement) {\r\n    div.onclick = (e: MouseEvent) => {\r\n      this.prevent = false;\r\n      this.timer = setTimeout(\r\n        () => {\r\n          if (!this.prevent) {\r\n            this.MouseClick(e);\r\n            e.stopPropagation();\r\n          }\r\n          this.prevent = false;\r\n        },\r\n        this.delay);\r\n    };\r\n    div.ondblclick = (e: MouseEvent) => {\r\n      clearTimeout(this.timer as number);\r\n      this.prevent = true;\r\n      this.MouseDoubleClick(e);\r\n    };\r\n    div.onmousedown = (e: MouseEvent) => { this.MouseDown(e); e.stopPropagation(); };\r\n    div.onmouseup = (e: MouseEvent) => { this.MouseUp(e); e.stopPropagation(); };\r\n    div.onmousemove = (e: MouseEvent) => { this.MouseMove(e); e.stopPropagation(); };\r\n    div.addEventListener('wheel', (e: WheelEvent) => { this.MouseWheel(e, e.deltaY); e.stopPropagation(); });\r\n  }\r\n\r\n  MouseDown(e: MouseEvent) {\r\n    this.click = true;\r\n    this.down = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOWN;\r\n    mEvent.isDown = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseClick(e: MouseEvent) {\r\n    if (!this.click) { return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    if (e.button === 0) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.LEFT;\r\n    } else if (e.button === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.MIDDLE;\r\n    } else if (e.button === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseDoubleClick(e: MouseEvent) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOUBLE;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseDrag(e: MouseEvent) {\r\n    this.click = false;\r\n    this.prevent = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    mEvent.isDown = true;\r\n    if (e.buttons === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    } else if (e.buttons === 4) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_MIDDLE;\r\n    } else if (e.buttons === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseMove(e: MouseEvent) {\r\n    if (this.down) { this.MouseDrag(e); return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.MOVE;\r\n    mEvent.isDown = true;\r\n    this.prevent = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseUp(e: MouseEvent) {\r\n    this.down = false;\r\n    this.click = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.UP;\r\n    mEvent.isDown = false;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseWheel(e: MouseEvent, v: number) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.wheel = v;\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.WHEEL;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  CommonEventBuilder(e: MouseEvent): MouseEventData {\r\n    let mEvent: MouseEventData = new MouseEventData(this.app);\r\n    mEvent.preX = this.mouseEventDataPre.x;\r\n    mEvent.preY = this.mouseEventDataPre.y;\r\n    // mEvent.premEvent = this.mouseEventDataPre;\r\n\r\n    mEvent.pressedShift = e.shiftKey;\r\n    mEvent.pressedAlt = e.altKey;\r\n    mEvent.pressedCtrl = e.ctrlKey;\r\n\r\n    mEvent.x = e.offsetX;\r\n    mEvent.y = e.offsetY;\r\n    mEvent.preWheel = this.mouseEventDataPre.wheel;\r\n    mEvent.wheel = 0;\r\n    mEvent.native = e;\r\n    this.mouseEventDataPre = mEvent;\r\n    this.e = mEvent;\r\n    return mEvent;\r\n  }\r\n  get stopPropagation() {\r\n    return this._stopPropagation;\r\n  }\r\n  set stopPropagation(v: boolean) {\r\n    if (v) {\r\n      this._stopPropagation = v;\r\n    } else {\r\n      setTimeout(() => { this._stopPropagation = v; }, 500);\r\n      // this._stopPropagation = v;\r\n    }\r\n  }\r\n  MouseEvenEmitting(mouseEventData: MouseEventData) {\r\n    this.app.MouseEventController(mouseEventData);\r\n  }\r\n}","import { Demo200GridOptimizer } from '..';\r\nimport { MouseInteraction } from './MouseInteraction/MouseInteraction';\r\nexport class IO {\r\n    app: Demo200GridOptimizer;\r\n    mouseInteraction: MouseInteraction;\r\n    constructor(app: Demo200GridOptimizer) {\r\n        this.app = app;\r\n        this.mouseInteraction = new MouseInteraction(this.app);\r\n        this.mouseInteraction.InitNativeMouseEvent(this.app.divHost);\r\n    }\r\n}","import { MouseEventData } from './IO/MouseInteraction/MouseInteraction';\r\nimport { Asset } from './Asset';\r\nimport { ViewWrapper } from './ViewWrapper';\r\nimport { GraphicsCoreWrapper } from './GraphicsCoreWrapper';\r\nimport { SceneWrapper } from './SceneWrapper';\r\nimport { IO } from './IO';\r\n\r\nexport class Demo200GridOptimizer {\r\n    divHost: HTMLElement;\r\n    asset: Asset;\r\n    viewWrapper: ViewWrapper;\r\n    graphicsCoreWrapper: GraphicsCoreWrapper;\r\n    sceneWrapper: SceneWrapper;\r\n    io: IO;\r\n    public static Init(id: string) {\r\n        new Demo200GridOptimizer(id);\r\n    }\r\n    constructor(id: string) {\r\n        const div = document.getElementById(id);\r\n        if (div) { this.divHost = div; }\r\n\r\n        this.asset = new Asset();\r\n        this.viewWrapper = new ViewWrapper(this);\r\n        this.graphicsCoreWrapper = new GraphicsCoreWrapper(this);\r\n        this.sceneWrapper = new SceneWrapper(this);\r\n        this.io = new IO(this);\r\n    }\r\n    MouseEventController(e: MouseEventData) {\r\n        this.sceneWrapper.activeCommandController.MouseEventController(e);\r\n    }\r\n    Resize(width: number, height: number) {\r\n        this.graphicsCoreWrapper.Resize(width, height);\r\n    }\r\n    Dispose() {\r\n        this.graphicsCoreWrapper.Dispose();\r\n        this.sceneWrapper.Dispose();\r\n    }\r\n    Dummy() {/* */ }\r\n}\r\n\r\nexport class Solution {\r\n    public divHost: HTMLElement;\r\n\r\n    constructor(id: string) {\r\n        this.divHost = document.getElementById(id);\r\n\r\n        Demo200GridOptimizer.Init(id)\r\n    }\r\n    public destroy() {\r\n        if (this.divHost) {\r\n            try {\r\n                while (this.divHost.firstChild) {\r\n                    this.divHost.removeChild(this.divHost.firstChild);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error in destroy method:', error);\r\n            }\r\n        } else {\r\n            console.warn('divHost is undefined in destroy method');\r\n        }\r\n    }\r\n}"],"names":["Asset","constructor","ViewWrapper","app","this","CAMERA_TYPE","CameraControllerThree","canvas","width","height","type","PERSPECTIVE","cameraP","cameraO","controls","initX","initY","prevX","prevY","yRotRate","xRotRate","xPanRate","yPanRate","zPanRate","rotateRate","panRate","zoomRate","zoomFactor","frustumSize","cameraShift","ableToMove","stereoCamera","GetPerspective","ORTHOGRAPHIC","GetOrthographic","STEREO","GetStereo","THREE","aspect","camera","x","y","z","position","set","InitOrbitController","OrbitControls","renderer","domElement","minDistance","maxDistance","enablePan","enableZoom","Math","PI","EnableDamping","v","factor","enableDamping","dampingFactor","MouseDown","MouseMove","shift","dx","dy","panLeft","matrix","panUp","rotateLeft","rotateUp","MouseWheel","dd","length","ShiftCamera","MouseEventController","e","CLICK_TYPE","pressedShift","wheel","CanvasThree","canvasWrapper","hostDiv","scene","vrBtn","bg","isActive","Init","clientWidth","clientHeight","antialias","alpha","setPixelRatio","id","style","pointerEvents","setSize","appendChild","RenderLoop","requestAnimationFrame","UpdateBinding","update","render","ResizeCanvas","updateProjectionMatrix","ResizeEffect","Remove","children","remove","CanvasWrapper","graphicsCoreWrapper","canvasThree","divHost","GraphicsCoreWrapper","Resize","Dispose","ActiveCommandController","MouseUpPre","MouseDownPre","MouseDragPre","MouseMovePre","MouseDoubleClickPre","MouseRightClickPre","MouseMiddleClickPre","MouseLeftClickPre","MouseLeftClick","MouseMiddleClick","MouseRightClick","MouseUp","MouseDoubleClick","MouseDrag","GeometryCommon","listMesh","raycaster","m","point","params","Points","threshold","Raycast","setFromCamera","intersects","intersectObjects","d","console","log","RaycastPoint","LightingController","sceneWrapper","hemiLight","dirLight","color","setHSL","groundColor","add","multiplyScalar","castShadow","shadow","mapSize","left","right","top","bottom","bias","near","far","visible","Renderer","definition","AddPolyline","vertices","points3D","positions","Float32Array","forEach","pos","i","setAttribute","mat","linewidth","transparent","opacity","line","AddRect","AddRectMesh","geometry","indices","Uint16Array","setIndex","side","mesh","AddPoint","vert","dotMaterial","size","sizeAttenuation","dot","BoundingBox","min","NVector3","Number","MAX_SAFE_INTEGER","max","MIN_SAFE_INTEGER","Update","vs","Polyline","pl","Add","boundingBox","push","GetVerticesForThree","outList","GetCenterVec","cv","RotateVec","angle","cos","sin","Rect","p0","p1","p2","p3","Cell","grid","j","rect","isInside","Rotate","vecs","RotateVecs","GridSystem","optimizer","rx","ry","intervalX","intervalY","pts","cells","InitCell","UpdateInside","cellList","cell","polyline","Optimizer","gridOptimizerApp","gridSystem","InitPolyline","InitGridSyste","GetPolylineTemp","AppGridOptimizer","AddPoints","AddRects","p","Definition","_capture","appRectOptimizer","init","mouseMove","mouseDrag","mouseDown","mouseUp","dispose","SceneWrapper","activeCommandController","geometryCommon","lightingController","gridHelper","MouseEventData","preX","preY","preZ","yGLPicking","isDown","isDoubleClick","isMove","pressedAlt","pressedCtrl","lat","long","preWheel","native","undefined","DeepCopy","mEvent","MouseInteraction","mouseInteractionUI","mouseEventDataPre","isEnable","clickCount","click","prevent","delay","timer","down","_stopPropagation","InitNativeMouseEvent","div","onclick","setTimeout","MouseClick","stopPropagation","ondblclick","clearTimeout","onmousedown","onmouseup","onmousemove","addEventListener","deltaY","CommonEventBuilder","MouseEvenEmitting","button","buttons","shiftKey","altKey","ctrlKey","offsetX","offsetY","mouseEventData","IO","mouseInteraction","Demo200GridOptimizer","asset","viewWrapper","io","document","getElementById","Dummy","Solution","destroy","firstChild","removeChild","error","warn"],"sourceRoot":""}
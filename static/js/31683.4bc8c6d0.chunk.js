"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[31683,58602,49359],{31683:(e,t,r)=>{r.r(t),r.d(t,{Texture:()=>o,uvGrid:()=>a});var i=r(49359);const a=r(58602);class o{constructor(e){this.app=void 0,this.uvGridWebGLTexture=void 0,this.app=e}async UploadTexture(e){return this.LoadTexture(e).then((e=>{const t=i.ShaderUtility.LoadTexture(this.app.canvas.gl,e,!1);t&&(this.uvGridWebGLTexture=t)}))}async LoadTexture(e){return new Promise(((t,r)=>{let i=new Image;i.onload=()=>t(i),i.onerror=r,i.src=e}))}}},49359:(e,t,r)=>{let i;r.r(t),r.d(t,{ATTR:()=>i,AttribLocations:()=>a,Shader:()=>s,ShaderUtility:()=>n,UniformLocations:()=>o}),function(e){e.ATTR_POSITION_NAME="a_position",e[e.ATTR_POSITION_LOC=0]="ATTR_POSITION_LOC",e.ATTR_NORMAL_NAME="a_norm",e[e.ATTR_NORMAL_LOC=1]="ATTR_NORMAL_LOC",e.ATTR_UV_NAME="a_uv",e[e.ATTR_UV_LOC=2]="ATTR_UV_LOC",e.ATTR_COLOR_NAME="a_color",e[e.ATTR_COLOR_LOC=4]="ATTR_COLOR_LOC"}(i||(i={}));class a{constructor(e,t){this.position=void 0,this.norm=void 0,this.uv=void 0,this.position=e.getAttribLocation(t,i.ATTR_POSITION_NAME),this.norm=e.getAttribLocation(t,i.ATTR_NORMAL_NAME),this.uv=e.getAttribLocation(t,i.ATTR_UV_NAME)}}class o{constructor(e,t){this.perspective=void 0,this.modelMatrix=void 0,this.cameraMatrix=void 0,this.mainTexture=void 0,this.perspective=e.getUniformLocation(t,"uPMatrix"),this.modelMatrix=e.getUniformLocation(t,"uMVMatrix"),this.cameraMatrix=e.getUniformLocation(t,"uCameraMatrix"),this.mainTexture=e.getUniformLocation(t,"uMainTex")}}class s{constructor(e,t,r){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this.gl=void 0,this.program=void 0,this.attribLoc=void 0,this.uniformLoc=void 0,this.vShader=void 0,this.fShader=void 0,this.gl=e,this.vShader=n.CreateShader(e,e.VERTEX_SHADER,t),this.fShader=n.CreateShader(e,e.FRAGMENT_SHADER,r),this.vShader&&this.fShader){let t=n.CreateProgram(e,this.vShader,this.fShader,i);return t?(this.program=t,e.useProgram(this.program),this.attribLoc=new a(e,this.program),void(this.uniformLoc=new o(e,this.program))):void console.error("vertex fragment shader error")}console.error("vertex fragment shader error")}activate(){return this.gl.useProgram(this.program),this}deactivate(){return this.gl.useProgram(null),this}dispose(){this.gl.getParameter(this.gl.CURRENT_PROGRAM)===this.program&&this.gl.useProgram(null),this.gl.deleteProgram(this.program)}setPerspective(e){return this.gl.uniformMatrix4fv(this.uniformLoc.perspective,!1,e),this}setModelMatrix(e){return this.gl.uniformMatrix4fv(this.uniformLoc.modelMatrix,!1,e),this}setCameraMatrix(e){return this.gl.uniformMatrix4fv(this.uniformLoc.cameraMatrix,!1,e),this}preRender(){}renderModel(e){return this.setModelMatrix(e.transform.getViewMatrix()),this.gl.bindVertexArray(e.vao.vao),e.vao.noCulling&&this.gl.disable(this.gl.CULL_FACE),e.vao.doBlending&&this.gl.enable(this.gl.BLEND),e.vao.indexCount?this.gl.drawElements(e.vao.drawMode,e.vao.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(e.vao.drawMode,0,e.vao.vertexCount),this.gl.bindVertexArray(null),e.vao.noCulling&&this.gl.enable(this.gl.CULL_FACE),e.vao.doBlending&&this.gl.disable(this.gl.BLEND),this}}class n{static CreateProgram(e,t,r){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=e.createProgram();if(null===o)return null;if(e.attachShader(o,t),e.attachShader(o,r),e.bindAttribLocation(o,i.ATTR_POSITION_LOC,i.ATTR_POSITION_NAME),e.bindAttribLocation(o,i.ATTR_NORMAL_LOC,i.ATTR_NORMAL_NAME),e.bindAttribLocation(o,i.ATTR_UV_LOC,i.ATTR_UV_NAME),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){const i=e.getProgramInfoLog(o);return console.log("Failed to link program: "+i),e.deleteProgram(o),e.deleteShader(r),e.deleteShader(t),null}return a&&(e.validateProgram(o),!e.getProgramParameter(o,e.VALIDATE_STATUS))?(console.error("Failed to validate program",e.getProgramInfoLog(o)),e.deleteProgram(o),e.deleteShader(r),e.deleteShader(t),null):(e.deleteShader(r),e.deleteShader(t),o)}static CreateShader(e,t,r){const i=e.createShader(t);if(null===i)return null;e.shaderSource(i,r),e.compileShader(i);return e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.log(e.getShaderInfoLog(i)),e.deleteShader(i),null)}static LoadTexture(e,t,r){let i=e.createTexture();return!0===r&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),!0===r&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),i}}},58602:(e,t,r)=>{e.exports=r.p+"static/media/UV_Grid_Lrg.35909733fe8b440ed3fb.jpg"}}]);
//# sourceMappingURL=31683.4bc8c6d0.chunk.js.map
{"version":3,"file":"static/js/12468.afbcb935.chunk.js","mappings":"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","sources":["njslab/Workshop/workshop-mapping/09_JSON/MultiLineString.ts"],"sourcesContent":["import { RendererJSAPI } from '../../../../lib'\r\nimport { getJSONFromURL } from 'njscore';\r\n\r\n// import { Feature } from 'geojson'\r\n\r\nexport class Solution extends RendererJSAPI {\r\n\r\n    routes: number[][][] = [];\r\n    locations: number[][] = [];\r\n    colors: string[] = [];\r\n    names: string[] = [];\r\n\r\n    constructor(id: string) {\r\n        super(id);\r\n    }\r\n    public initPost(): void {\r\n        // TODO\r\n        // You code goes here for one time operation\r\n\r\n        this.zoom(12);\r\n\r\n        const colorsTempate = {\r\n            'blue' : \"#0683d2\",\r\n            'red' : \"#ec2f3d\",\r\n            'orange' : \"#ff961e\",\r\n            'green' : \"#049564\",\r\n            'silver' : \"#959597\",\r\n        }\r\n\r\n        \r\n        getJSONFromURL(process.env.PUBLIC_URL + '/static/data/MBTA_stop.geojson').then((d) => {\r\n            let lonSum = 0;\r\n            let latSum = 0;\r\n            let count = 0;\r\n\r\n            for (let i = 0 ; i < d['features'].length; ++i) {\r\n                const loc = d['features'][i]['geometry']['coordinates'];\r\n\r\n                this.locations.push(loc);\r\n                lonSum += loc[0];\r\n                latSum += loc[1];\r\n                count++;\r\n\r\n                this.names.push(d['features'][i]['properties']['name']);\r\n\r\n                const line: string[] = d['features'][i]['properties']['lines'];\r\n\r\n                if (line.includes('blue')) {\r\n                    this.colors.push(colorsTempate['blue']);\r\n                } else if (line.includes('red')) {\r\n                    this.colors.push(colorsTempate['red']); continue;\r\n                } else if (line.includes('orange')) {\r\n                    this.colors.push(colorsTempate['orange']); continue;\r\n                } else if (line.includes('green')) {\r\n                    this.colors.push(colorsTempate['green']); continue;\r\n                } else {\r\n                    this.colors.push(colorsTempate['silver']);\r\n                }\r\n\r\n            }\r\n            this.center(lonSum / count, latSum / count);\r\n\r\n\r\n            getJSONFromURL('https://raw.githubusercontent.com/NamjuLee/data/master/Boston/MBTA_routes.geojson').then((data) => {\r\n                for (let i = 0 ; i < data['features'].length; ++i) {\r\n                    this.routes.push(data['features'][i]['geometry']['coordinates']);\r\n                }\r\n\r\n            //     console.log(this.routes)\r\n                this.start();\r\n            });\r\n        });\r\n        \r\n    }\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n        // TODO\r\n        // You code goes here for the rending loop\r\n\r\n        for (let i = 0; i < this.routes.length; ++i) { \r\n            const route = this.routes[i]\r\n            \r\n            for (let j = 0; j < route.length; ++j) { \r\n\r\n                let projected = this.toScreen(route[j][0][0], route[j][0][1]); \r\n                const path = new Path2D();\r\n                path.moveTo(projected[0], projected[1]);\r\n\r\n                for (let k = 1; k < route[j].length; ++k) { \r\n                    projected = this.toScreen(route[j][k][0], route[j][k][1]); \r\n                    path.lineTo(projected[0], projected[1]);\r\n                }\r\n\r\n                ctx.lineWidth =  Math.sin(this.time * 1.5) + 1.15;\r\n                ctx.stroke(path);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < this.locations.length; ++i) { \r\n            const projected = this.toScreen(this.locations[i][0], this.locations[i][1]); \r\n            // console.log('2', projected)\r\n            renderPoint(ctx, projected[0], projected[1], this.time, this.colors[i]);\r\n            renderText(ctx, projected[0], projected[1], this.names[i], this.colors[i]);\r\n        }\r\n\r\n        // !! can stop render after this frame.\r\n        // this.isStatic = true;\r\n    }\r\n}\r\nconst renderPoint = (ctx: CanvasRenderingContext2D, x: number, y: number, t: number, color: string) => {\r\n    ctx.fillStyle = color;\r\n    ctx.strokeStyle = '#fff';\r\n    ctx.lineWidth = 0.75;\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, (Math.sin(t * 0.8) + 4) * 2, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.stroke();\r\n};\r\nconst renderText = (ctx: CanvasRenderingContext2D, x: number, y: number, name: string, color: string) => {\r\n    ctx.strokeStyle = color;\r\n    ctx.lineWidth = 0.5;\r\n    ctx.strokeText(name, x + 13, y);\r\n};\r\n\r\n\r\n"],"names":["Solution","RendererJSAPI","constructor","id","super","routes","locations","colors","names","initPost","this","zoom","colorsTempate","getJSONFromURL","process","then","d","lonSum","latSum","count","i","length","loc","push","line","includes","center","data","start","render","ctx","route","j","projected","toScreen","path","Path2D","moveTo","k","lineTo","lineWidth","Math","sin","time","stroke","renderPoint","renderText","x","y","t","color","fillStyle","strokeStyle","beginPath","arc","PI","closePath","fill","name","strokeText"],"sourceRoot":""}
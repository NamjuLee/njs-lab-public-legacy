"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[29166],{16896:(e,t,i)=>{i.r(t),i.d(t,{App:()=>q,Renderer:()=>z,Solution:()=>N});const a=i.p+"static/media/shadow-vert.684f342c270a82849192.wgsl",r=i.p+"static/media/shadow-frag.632b2b5c19c2f577ef0e.wgsl",s=i.p+"static/media/shadow-depth.a39dc88390f9deafcc32.wgsl";var n=i(39880);i(27089);const o=navigator.gpu?"Great, your current browser supports WebGPU!":"Your current browser does not support WebGPU! Make sure you are on a system \n    with WebGPU enabled.",h=function(e){let t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.primitiveType=void 0===e.primitiveType?"triangle-list":e.primitiveType,e.cullMode=void 0===e.cullMode?"none":e.cullMode,e.isDepthStencil=void 0===e.isDepthStencil||e.isDepthStencil,e.vsEntry=void 0===e.vsEntry?"vs_main":e.vsEntry,e.fsEntry=void 0===e.fsEntry?"fs_main":e.fsEntry,e.shader&&(e.vsShader=e.shader,e.fsShader=e.shader),e.indexFormat=void 0===e.indexFormat?"uint32":e.indexFormat,e.primitiveType.includes("strip")&&(t=e.indexFormat);let a={layout:"auto",vertex:{module:e.init.device.createShaderModule({code:e.vsShader}),entryPoint:e.vsEntry,buffers:e.buffers},fragment:i?{module:e.init.device.createShaderModule({code:e.fsShader}),entryPoint:e.fsEntry,targets:[{format:e.init.format}]}:void 0,primitive:{topology:e.primitiveType,stripIndexFormat:t,cullMode:e.cullMode},multisample:{count:e.init.msaaCount}};return e.isDepthStencil&&(a.depthStencil={format:"depth24plus",depthWriteEnabled:!0,depthCompare:"less"}),a},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const r=e.length,s=t.length,n=a.length;let o=[];if(0===s)for(let h=0;h<r;h++){let t=4*parseInt(e[h].split("x")[1]),i=0===n?h:a[h];o.push({arrayStride:t,attributes:[{shaderLocation:i,format:e[h],offset:0}]})}else{let r=[],h=0;for(let i=0;i<s;i++){h+=4*parseInt(e[i].split("x")[1]);let s=0===n?i:a[i];r.push({shaderLocation:s,format:e[i],offset:t[i]})}i>0&&(h=i),o=[{arrayStride:i,attributes:r}]}return o},c=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.init.msaaCount>1?e.textureView:e.init.context.getCurrentTexture().createView(),a=e.init.msaaCount>1?e.init.context.getCurrentTexture().createView():void 0;return{colorAttachments:t?[{view:i,resolveTarget:a,clearValue:e.init.background,loadOp:"clear",storeOp:"store"}]:[],depthStencilAttachment:e.depthView?{view:e.depthView,depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}:void 0}};let d;!function(e){e[e.Uniform=0]="Uniform",e[e.Vertex=1]="Vertex",e[e.Index=2]="Index",e[e.Storage=3]="Storage",e[e.VertexStorage=4]="VertexStorage",e[e.IndexStorage=5]="IndexStorage",e[e.Indirect=6]="Indirect",e[e.IndirectStorage=7]="IndirectStorage",e[e.Read=8]="Read",e[e.Write=9]="Write"}(d||(d={}));const f=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.Uniform,a=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC;return i===d.Vertex?a=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC:i===d.Index?a=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC:i===d.Storage?a=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC:i===d.VertexStorage?a=GPUBufferUsage.VERTEX|GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST:i===d.IndexStorage?a=GPUBufferUsage.INDEX|GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST:i===d.Indirect?a=GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST:i===d.IndirectStorage?a=GPUBufferUsage.INDIRECT|GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST:i===d.Read?a=GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST:i===d.Write&&(a=GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST),e.createBuffer({size:t,usage:a})},l=e=>Object.prototype.toString.call(e).split(/\W/)[2],g=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.Vertex,a=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC;i===d.Uniform?a=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC:i===d.Storage?a=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC:i===d.Index?a=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC:i===d.VertexStorage?a=GPUBufferUsage.VERTEX|GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST:i===d.IndexStorage?a=GPUBufferUsage.INDEX|GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST:i===d.Indirect?a=GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST:i===d.IndirectStorage?a=GPUBufferUsage.INDIRECT|GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST:i===d.Read?a=GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST:i===d.Write&&(a=GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST);let r=l(t);i===d.Vertex&&r.includes("Uint")&&(a=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC);const s=e.createBuffer({size:t.byteLength,usage:a,mappedAtCreation:!0});return r.includes("Uint32")?new Uint32Array(s.getMappedRange()).set(t):r.includes("Uint16")?new Uint16Array(s.getMappedRange()).set(t):r.includes("Float64")?new Float64Array(s.getMappedRange()).set(t):new Float32Array(s.getMappedRange()).set(t),s.unmap(),s},v=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=[],s=i.length,n=a.length,o=s+n;for(let h=0;h<o;h++)h<s&&s>0?r.push({binding:h,resource:{buffer:i[h]}}):h>=s&&n>0&&r.push({binding:h,resource:a[h-s]});return e.createBindGroup({layout:t,entries:r})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1];const a=n.Ue();return n.Iu(a,a,e),n.lM(a,a,t[0]),n.uD(a,a,t[1]),n.jI(a,a,t[2]),n.bA(a,a,i),a},U=e=>{const t=n.Ue();return n.U_(t,e),n.p4(t,t),t};var m=i(88679);const P=3.1415926,B=e=>Math.sin(e),x=e=>Math.cos(e),w=(e,t,i,a)=>{let r=(e+t*x(a))*x(i),s=t*B(a),n=-(e+t*x(a))*B(i);return m.al(r,s,n)},C=(e,t,i,a)=>{if(i<2||a<2)return;let r,s,n,o,h=[],u=[],c=.02*P/a;for(let g=0;g<=i;g++){let d=2*g*P/i;for(let i=0;i<=a;i++){let f=2*i*P/a;r=w(e,t,d,f),h.push(r[0],r[1],r[2]),d-c>=0?(s=w(e,t,d-c,f),n=m.$X(m.Ue(),r,s)):(s=w(e,t,d+c,f),n=m.$X(m.Ue(),s,r)),f-c>=0?(s=w(e,t,d,f-c),o=m.$X(m.Ue(),r,s)):(s=w(e,t,d,f+c),o=m.$X(m.Ue(),s,r));let l=m.kC(m.Ue(),o,n);m.Fv(l,l),u.push(l[0],l[1],l[2])}}let d=a+1,f=[],l=[];for(let g=0;g<i;g++)for(let e=0;e<a;e++){let t=e+g*d,i=e+1+g*d,a=e+1+(g+1)*d,r=e+(g+1)*d;f.push(t,i,a,a,r,t),l.push(t,i,t,r)}return{positions:new Float32Array(h),normals:new Float32Array(u),indices:new Uint32Array(f),indices2:new Uint32Array(l)}};var G=i(13958);class S{constructor(e){T(e)}}const y=async(e,t,i)=>{const n=await(0,G.bD)(a),o=await(0,G.bD)(r),c=await(0,G.bD)(s),l=h({init:e,vsShader:n,fsShader:o,buffers:u(["float32x3","float32x3"])}),p=await e.device.createRenderPipelineAsync(l),U=h({init:e,vsShader:c,buffers:u(["float32x3","float32x3"])},!1),m=await e.device.createRenderPipelineAsync(U),P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"depth24plus";return e.device.createTexture({size:e.size,format:t,sampleCount:e.msaaCount,usage:GPUTextureUsage.RENDER_ATTACHMENT})}(e),B=e.device.createTexture({size:[2048,2048],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),x=t.cubeData,w=g(e.device,x.positions),C=g(e.device,x.normals),S=g(e.device,x.indices),y=t.torusData,T=g(e.device,y.positions),R=g(e.device,y.normals),M=g(e.device,y.indices),O=t.torusData2,A=g(e.device,O.positions),b=g(e.device,O.normals),D=g(e.device,O.indices),E=f(e.device,64),I=f(e.device,64*i,d.Storage),_=f(e.device,64*i,d.Storage),Y=f(e.device,16*i,d.Storage),V=f(e.device,64),F=f(e.device,48),z=f(e.device,16),q=v(e.device,p.getBindGroupLayout(0),[E,I,_,V,Y]),N=v(e.device,p.getBindGroupLayout(1),[F,z],[B.createView(),e.device.createSampler({compare:"less"})]),W=v(e.device,m.getBindGroupLayout(0),[I,V]);return{pipelines:[p,m],vertexBuffers:[w,C,S,T,R,M,A,b,D],uniformBuffers:[E,I,_,V,Y,F,z],uniformBindGroups:[q,N,W],depthTextures:[P,B]}},T=async e=>{const t=document.createElement("canvas");t.width=e.clientWidth,t.height=e.clientHeight,e.appendChild(t);const i=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.format=void 0===e.format?navigator.gpu.getPreferredCanvasFormat():e.format,e.msaaCount=void 0===e.msaaCount?1:e.msaaCount,o.includes("does not support WebGPU"))throw o;const i=await navigator.gpu.requestAdapter(),a=await i.requestDevice(t),r=e.canvas.getContext("webgpu"),s=(window.devicePixelRatio,{width:e.canvas.width,height:e.canvas.height});return r.configure({device:a,format:e.format,alphaMode:"opaque",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),{device:a,context:r,format:e.format,size:s,background:{r:.009,g:.0125,b:.0164,a:1},msaaCount:e.msaaCount}}({canvas:t});const a={cubeData:function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:2)/2;return{positions:new Float32Array([i,i,i,i,i,-i,i,-i,i,i,-i,-i,-i,i,-i,-i,i,i,-i,-i,-i,-i,-i,i,-i,i,-i,i,i,-i,-i,i,i,i,i,i,-i,-i,i,i,-i,i,-i,-i,-i,i,-i,-i,-i,i,i,i,i,i,-i,-i,i,i,-i,i,i,i,-i,-i,i,-i,i,-i,-i,-i,-i,-i]),colors:new Float32Array([1,1,1,1,1,0,1,0,1,1,0,0,0,1,0,0,1,1,0,0,0,0,0,1,0,1,0,1,1,0,0,1,1,1,1,1,0,0,1,1,0,1,0,0,0,1,0,0,0,1,1,1,1,1,0,0,1,1,0,1,1,1,0,0,1,0,1,0,0,0,0,0]),normals:new Float32Array([1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1]),uvs:new Float32Array([0,t,e,t,0,0,e,0,0,t,e,t,0,0,e,0,0,t,e,t,0,0,e,0,0,t,e,t,0,0,e,0,0,t,e,t,0,0,e,0,0,t,e,t,0,0,e,0]),indices:new Uint32Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),indices2:new Uint32Array([8,9,9,11,11,10,10,8,14,15,15,13,13,12,12,14,11,13,9,15,8,14,10,12])}}(),torusData:C(1.5,.1,60,20),torusData2:C(.8,.3,20,10)},r=await y(i,a,3);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[2,2,4],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1,0];const a=n.Ue();return n.zB(a,e,t,i),{viewMat:a,cameraOptions:{eye:e,center:t,zoomMax:1e3,zoomSpeed:2}}}([0,10,20]),h=((e,t)=>{const i=n.Ue();return n.Jp(i,t,e),i})(s.viewMat,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=n.Ue();return n.G3(t,2*Math.PI/5,e,.1,1e3),t}(i.size.width/i.size.height));i.device.queue.writeBuffer(r.uniformBuffers[0],0,h);let u=new Float32Array(s.cameraOptions.eye);i.device.queue.writeBuffer(r.uniformBuffers[5],16,u);const c=1,d="#ffffff",f=.4,l=.04,g=.4,v=30,P=[],B=new Float32Array(48),x=new Float32Array(48),w=new Float32Array(12);{let e=m.al(0,-13,-20);const t=m.al(0,0,0),i=m.al(30,.1,20);let a=p(e,t,i),r=U(a);B.set(a,0),x.set(r,0),w.set([.5,.5,.7,1],0),P.push({translation:e,rotation:t,scale:i})}{let e=m.al(0,-5,-20),t=m.al(Math.PI/2,0,0),i=m.al(4,4,4),a=p(e,t,i),r=U(a);B.set(a,16),x.set(r,16),w.set([Math.random(),Math.random(),Math.random()],4),P.push({translation:e,rotation:t,scale:i})}{let e=m.al(0,-5,-20),t=m.al(Math.PI,0,0),i=m.al(4,4,4),a=p(e,t,i),r=U(a);B.set(a,16),x.set(r,16),w.set([Math.random(),Math.random(),Math.random()],4),P.push({translation:e,rotation:t,scale:i})}i.device.queue.writeBuffer(r.uniformBuffers[4],0,w);const G=n.Ue(),S=n.Ue(),T=m.al(0,100,0);let M=performance.now();const O=()=>{let e=c*(performance.now()-M)/1e3;T[0]=50*Math.sin(e),T[2]=50*Math.cos(e),i.device.queue.writeBuffer(r.uniformBuffers[5],0,T),i.device.queue.writeBuffer(r.uniformBuffers[5],32,(e=>{const[t,i,a]=e.match(/\w\w/g).map((e=>parseInt(e,16)/255));return new Float32Array([t,i,a,1])})(d)),i.device.queue.writeBuffer(r.uniformBuffers[6],0,new Float32Array([f,l,g,v])),n.zB(G,T,[0,0,0],[0,1,0]),n.M5(S,-40,40,-40,40,-50,200),n.Jp(S,S,G),i.device.queue.writeBuffer(r.uniformBuffers[3],0,S);const t=P[1];t.translation[0]<-20||t.translation[0],t.translation[1]<-5||t.translation[1];let s=p(t.translation,t.rotation,t.scale),o=U(s);B.set(s,16),x.set(o,16),i.device.queue.writeBuffer(r.uniformBuffers[1],0,B),i.device.queue.writeBuffer(r.uniformBuffers[2],0,x),R(i,r,a,3),requestAnimationFrame(O)};O()},R=(e,t,i,a)=>{const r=e.device.createCommandEncoder();let s=c({init:e,depthView:t.depthTextures[1].createView()},!1),n=r.beginRenderPass(s);n.setPipeline(t.pipelines[1]),n.setBindGroup(0,t.uniformBindGroups[2]),n.setVertexBuffer(0,t.vertexBuffers[0]),n.setVertexBuffer(1,t.vertexBuffers[1]),n.setIndexBuffer(t.vertexBuffers[2],"uint32"),n.drawIndexed(i.cubeData.indices.length,1,0,0,0),n.setVertexBuffer(0,t.vertexBuffers[3]),n.setVertexBuffer(1,t.vertexBuffers[4]),n.setIndexBuffer(t.vertexBuffers[5],"uint32"),n.drawIndexed(i.torusData.indices.length,1,0,0,1),n.setVertexBuffer(0,t.vertexBuffers[6]),n.setVertexBuffer(1,t.vertexBuffers[7]),n.setIndexBuffer(t.vertexBuffers[8],"uint32"),n.drawIndexed(i.torusData2.indices.length,1,0,0,1),n.end(),s=c({init:e,depthView:t.depthTextures[0].createView()});let o=r.beginRenderPass(s);o.setPipeline(t.pipelines[0]),o.setBindGroup(0,t.uniformBindGroups[0]),o.setBindGroup(1,t.uniformBindGroups[1]);for(let h in i);o.setVertexBuffer(0,t.vertexBuffers[0]),o.setVertexBuffer(1,t.vertexBuffers[1]),o.setIndexBuffer(t.vertexBuffers[2],"uint32"),o.drawIndexed(i.cubeData.indices.length,1,0,0,0),o.setVertexBuffer(0,t.vertexBuffers[3]),o.setVertexBuffer(1,t.vertexBuffers[4]),o.setIndexBuffer(t.vertexBuffers[5],"uint32"),o.drawIndexed(i.torusData.indices.length,1,0,0,1),o.setVertexBuffer(0,t.vertexBuffers[6]),o.setVertexBuffer(1,t.vertexBuffers[7]),o.setIndexBuffer(t.vertexBuffers[8],"uint32"),o.drawIndexed(i.torusData2.indices.length,1,0,0,1),o.end(),e.device.queue.submit([r.finish()])};var M=i(99874);class O{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[2,2,4],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,1,0],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;this.viewMatrix=n.Ue(),this.projectionMatrix=n.Ue(),this.viewProjectionMatrix=n.Ue(),this.zoomMax=100,this.zoomSpeed=2,this.near=.01,this.far=1e4,this.mvpMatrix=n.Ue(),this.eye=m.al(0,0,0),this.center=m.al(0,0,0),this.up=m.al(0,1,0),this.type="camera",this.respectRatio=void 0,this.width=void 0,this.height=void 0,this.angleXY=Math.PI,this.angleZ=.25*Math.PI,this.distance=1,this.distance=s,this.width=e,this.height=t,this.respectRatio=e/t,this.eye=i,this.center=a,this.up=r}zoom(e){}update(){n.zB(this.viewMatrix,this.eye,this.center,this.up),n.Jp(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix)}}class A extends O{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[2,2,4],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0],arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,1,0],arguments.length>5&&void 0!==arguments[5]?arguments[5]:3),this.type="CameraPerspective",this.init()}init(){n.G3(this.projectionMatrix,2*Math.PI/5,this.respectRatio,this.near,this.far),this.update()}zoom(e){this.distance+=.01*e}}class b extends O{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0],arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,1,0],arguments.length>5&&void 0!==arguments[5]?arguments[5]:300.1),this.type="CameraOrth",this.init()}init(){D(this.projectionMatrix,this.width,this.height,this.near,this.far,this.distance),this.angleXY=0,this.angleZ=0,this.update()}zoom(e){this.distance+=e+50/this.distance,this.distance<1e-6&&(this.distance=1e-6),this.distance>1e5&&(this.distance=1e5),D(this.projectionMatrix,this.width,this.height,this.near,this.far,this.distance)}}const D=(e,t,i,a,r,s)=>(e[0]=2/t*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2/i*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=-2/(r-a),e[11]=0,e[12]=0,e[13]=0,e[14]=.1,e[15]=1,e);class E{constructor(e){this.solution=void 0,this.canvas=void 0,this.cameraOrth=void 0,this.cameraPerspective=void 0,this.camera=void 0,this.modelMatrix=n.Ue(),this.mvpMatrix=n.Ue(),this.rotation=m.al(0,0,0),this.translation=m.al(0,0,0),this.screen2=M.al(0,0),this.solution=e,this.canvas=e.canvas;const t=m.al(2.6451475620269775,3.130298137664795,2.864337205886841),i=m.al(0,0,0),a=m.al(0,0,1);this.cameraPerspective=new A(this.canvas.width,this.canvas.height,t,i,a),this.camera=this.cameraPerspective,this.arcRotation(0,0),this.cameraOrth=new b(this.canvas.width,this.canvas.height),this.camera=this.cameraOrth,this.update()}update(){this.camera.update(),I(this.modelMatrix,this.translation,this.rotation),n.Jp(this.mvpMatrix,this.camera.viewProjectionMatrix,this.modelMatrix)}rotateZ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;this.rotation[2]+=e,this.update()}translateX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;this.translation[0]+=e,this.update()}get getMatrix(){return this.mvpMatrix}shiftCamera(){this.camera===this.cameraPerspective?this.camera=this.cameraOrth:this.camera=this.cameraPerspective,this.update()}moveCamera(e,t){this.camera===this.cameraPerspective?this.arcRotation(e,t):this.pan(e,t)}arcRotation(e,t){e*=-.01,t*=-.01,this.camera.angleXY+=e,this.camera.angleZ+=t,this.camera.eye[0]=this.camera.center[0]+Math.sin(this.camera.angleXY)*Math.cos(this.camera.angleZ)*this.camera.distance,this.camera.eye[1]=this.camera.center[1]+Math.cos(this.camera.angleXY)*Math.cos(this.camera.angleZ)*this.camera.distance,this.camera.eye[2]=this.camera.center[2]+Math.sin(this.camera.angleZ)*this.camera.distance,this.update()}zoomWheel(e){this.camera===this.cameraPerspective?(this.camera.zoom(e),this.arcRotation(0,0)):this.camera.zoom(e),this.update()}pan(e,t){this.camera.center[0]+=e/this.camera.distance,this.camera.center[1]-=t/this.camera.distance,this.camera.eye[0]+=e/this.camera.distance,this.camera.eye[1]-=t/this.camera.distance,this.update()}}const I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1];const r=n.Ue(),s=n.Ue(),o=n.Ue(),h=n.Ue(),u=n.Ue();n.vc(h,t),n.aC(r,i[0]),n.gT(s,i[1]),n.QO(o,i[2]),n.xJ(u,a),n.Jp(e,r,u),n.Jp(e,s,e),n.Jp(e,o,e),n.Jp(e,h,e)};let _;!function(e){e.PointList="point-list",e.LineList="line-list",e.LineStrip="line-strip",e.TriangleList="triangle-list",e.TriangleStrip="triangle-strip"}(_||(_={}));class Y{constructor(e){this.renderer=void 0,this.PrimitiveTopology=_,this.ctx=void 0,this.device=void 0,this.format=void 0,this.commandEncoder=void 0,this.renderPass=void 0,this.textureView=void 0,this.renderPassDescription=void 0,this.depthTexture=void 0,this.init=void 0,this.msaaCount=void 0,this.background=void 0,this.size=void 0,this.renderer=e}async initWebGPU(){this.init=await F({canvas:this.renderer.canvas}),this.device=this.init.device,this.ctx=this.init.context,this.format=this.init.format,this.msaaCount=this.init.msaaCount,this.background=this.init.background,this.size=this.init.size}destroy(){this.device.destroy()}}const V=navigator.gpu?"Great, your current browser supports WebGPU!":"Your current browser does not support WebGPU! Make sure you are on a system with WebGPU enabled.",F=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.format=void 0===e.format?navigator.gpu.getPreferredCanvasFormat():e.format,e.msaaCount=void 0===e.msaaCount?1:e.msaaCount,V.includes("does not support WebGPU"))throw V;const i=await navigator.gpu.requestAdapter(),a=await i.requestDevice(t),r=e.canvas.getContext("webgpu"),s=(e.canvas.clientWidth,e.canvas.clientHeight,{width:e.canvas.width,height:e.canvas.height});r.configure({device:a,format:e.format,alphaMode:"opaque",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});return{device:a,context:r,format:e.format,size:s,background:{r:.009,g:.0125,b:.0164,a:1},msaaCount:e.msaaCount}};class z{constructor(e){this.app=void 0,this.canvas=void 0,this.cameraController=void 0,this.webGPU=void 0,this.isAnimation=!0,this.requestAni=void 0,this.loop=()=>{this.isAnimation&&(this.requestAni=requestAnimationFrame(this.loop)),this.drawing()},this.app=e,this.canvas=document.createElement("canvas"),this.canvas.width=this.app.divHost.clientWidth,this.canvas.height=this.app.divHost.clientHeight,this.app.divHost.appendChild(this.canvas),this.webGPU=new Y(this)}async init(){await this.webGPU.initWebGPU(),this.cameraController=new E(this),this.requestAni=requestAnimationFrame(this.loop)}drawing(){this.app.scene.render()}destroy(){for(this.webGPU.destroy(),cancelAnimationFrame(this.requestAni);this.app.divHost.lastElementChild;)this.app.divHost.removeChild(this.app.divHost.lastElementChild)}}class q{constructor(e){this.divHost=void 0,this.controller=void 0,this.renderer=void 0,this.scene=void 0,this.divHost=document.getElementById(e),new S(this.divHost),this.init()}async init(){}destroy(){}}class N{constructor(e){this.app=void 0,this.app=new q(e)}destroy(){this.app.destroy()}}},13958:(e,t,i)=>{i.d(t,{bD:()=>r,pg:()=>n,zM:()=>s});var a=i(39880);const r=async e=>fetch("".concat(e)).then((e=>e.text())).catch((e=>{console.debug(e)})),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1];const s=a.Ue(),n=a.Ue(),o=a.Ue(),h=a.Ue(),u=a.Ue();a.vc(h,t),a.aC(s,i[0]),a.gT(n,i[1]),a.QO(o,i[2]),a.xJ(u,r),a.Jp(e,s,u),a.Jp(e,n,e),a.Jp(e,o,e),a.Jp(e,h,e)},n=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST;const a=e.createBuffer({size:t.byteLength,usage:i,mappedAtCreation:!0});return new Float32Array(a.getMappedRange()).set(t),a.unmap(),a}}}]);
//# sourceMappingURL=29166.5db61b1b.chunk.js.map
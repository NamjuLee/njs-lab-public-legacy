"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[45178],{45178:(t,e,i)=>{i.r(e),i.d(e,{ColorCorrection:()=>n,Renderer:()=>a,Solution:()=>o});var s=i(55913);let n;!function(t){t.AutoContrast="autoContrast",t.None="None"}(n||(n={}));class o{constructor(t){this.divHost=void 0,this.renderer=void 0,this.divHost=document.getElementById(t),this.divHost.style.display="flex",this.divHost.style.alignItems="center";const e=document.createElement("div");e.style.marginLeft="auto",e.style.marginRight="auto",e.style.backgroundColor="#555",e.style.margin="50px",e.style.background="rgba(0,0,0,0)",this.divHost.appendChild(e),this.renderer=new a(e)}destroy(){for(this.renderer.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}class a extends s.bb{constructor(t){super(t),this.img=void 0,this.rotation=0,this.m=[0,0],this.switch=!0,this.isDithering=!1,this.typeCorrection=n.AutoContrast,this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.canvas.style.position="relative",this.canvas.style.width="100%",this.canvas.style.height="100%",(0,s.t4)("https://www.glenstone.org/wp-content/uploads/2018/07/AV_Landscape-Hero-Contour-2993-1276x800.jpg").then((t=>{this.img=t,this.img.onload=e=>{this.update(t)}}));const e=document.createElement("input");e.value="https://media.istockphoto.com/id/664494334/photo/closeup-young-smiling-woman-face-isolated-on-white.jpg?s=612x612&w=is&k=20&c=Nni6E0gDKxCDnT66c66t1vVfawzCQEc0B8taMlItvZM=",e.addEventListener("keydown",(t=>{"Enter"===t.code&&(0,s.t4)(e.value).then((t=>{this.img=t,this.img.onload=e=>{this.update(t)}}))})),this.divHost.appendChild(e);const i=document.createElement("div");i.style.display="flex",i.style.marginTop="15px",this.divHost.appendChild(i);const o=h("auto",0,1);o.slider.defaultValue="0",this.divHost.appendChild(o.div),o.slider.oninput=()=>{0===parseInt(o.slider.value)?(this.typeCorrection=n.AutoContrast,o.text.textContent=n.AutoContrast):(this.typeCorrection=n.None,o.text.textContent=n.None),this.render(this.ctx,this.typeCorrection)};const a=r((t=>{this.img=t,this.canvas.width=this.img.width,this.canvas.height=this.img.height,this.render(this.ctx,this.typeCorrection)}));i.appendChild(a);const c=d();c.onchange=()=>{this.isDithering=!this.isDithering,this.render(this.ctx,this.typeCorrection)},i.appendChild(c),this.start()}update(t){this.img=t,this.canvas.width=this.img.width,this.canvas.height=this.img.height,this.render(this.ctx,this.typeCorrection)}render(t,e){if(void 0!==this.img){if(t.clearRect(0,0,t.canvas.width,t.canvas.height),this.img&&this.ctx.drawImage(this.img,0,0),this.ctx.restore(),e===n.AutoContrast)(t=>{const e=t.getImageData(0,0,t.canvas.width,t.canvas.height),i=e.data,s=(t,e,i)=>.299*t+.587*e+.114*i;let n=0,o=0,a=0,h=0;for(let c=0;c<i.length;c+=4){const t=s(i[c],i[c+1],i[c+2]);n+=t,o++,a+=Math.abs(t-128),h++}const r=128-n/o,d=128/(a/h);for(let c=0;c<i.length;c+=4){let t=i[c],e=i[c+1],s=i[c+2];t+=r,e+=r,s+=r,t=Math.min(Math.max(Math.round(t*d),0),255),e=Math.min(Math.max(Math.round(e*d),0),255),s=Math.min(Math.max(Math.round(s*d),0),255),i[c]=t,i[c+1]=e,i[c+2]=s}t.putImageData(e,0,0)})(t),this.isDithering&&(0,s.jx)(t);else this.isDithering&&(0,s.jx)(t);this.isStatic=!0}}}const h=(t,e,i)=>{const s=document.createElement("div");s.style.display="flex";const n=document.createElement("input");n.type="range",n.min="".concat(e),n.max="".concat(i);const o=document.createElement("div");return o.textContent=t,o.style.color="#aaa",s.appendChild(n),s.appendChild(o),{div:s,slider:n,text:o}},r=t=>{const e=document.createElement("input");return e.type="file",e.onchange=e=>{if(e.target.files){let s=e.target.files[0];var i=new FileReader;i.readAsDataURL(s),i.onloadend=e=>{const i=new Image;i.src=e.target.result,i.onload=e=>{t(i)}}}},e},d=()=>{const t=document.createElement("input");return t.type="checkbox",t}}}]);
//# sourceMappingURL=45178.88dbd119.chunk.js.map
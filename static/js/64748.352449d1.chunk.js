(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[64748],{64748:(t,e,s)=>{"use strict";let i,o,n,r,h,a;s.r(e),s.d(e,{Solution:()=>W}),function(t){t.LEFT="LEFT",t.MIDDLE="MIDDLE",t.RIGHT="RIGHT",t.WHEEL="WHEEL",t.DRAG="DRAG",t.DRAG_LEFT="DRAG_LEFT",t.DRAG_MIDDLE="DRAG_MIDDLE",t.DRAG_RIGHT="DRAG_RIGHT",t.MOVE="MOVE",t.DOUBLE="DOUBLE",t.UP="UP",t.DOWN="DOWN",t.DOWN_MIDDLE="DOWN_MIDDLE",t.DOWN_RIGHT="DOWN_RIGHT"}(i||(i={}));class u{constructor(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.yGLPicking=void 0,this.CLICKTYPE=i.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.premEvent=void 0,this.native=void 0}}class c{static MouseEvent(t){t.isMove}constructor(){this.isEnable=!0,this.click=!1,this.prevent=!1,this.delay=100,this.timer=void 0,this.down=!1,this.e=void 0,c.mouseEventDataPre=new u}InitNativeMouseWheelEvent(t){}InitNativeMouseEvent(t){void 0===t||null===t?(document.onclick=t=>{this.timer=setTimeout((()=>{this.prevent||this.MouseClick(t),this.prevent=!1}),this.delay)},document.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},document.onmousedown=t=>{this.MouseDown(t)},document.onmouseup=t=>{this.MouseUp(t)},document.onmousemove=t=>{this.MouseMove(t)}):(t.onclick=t=>{this.timer=setTimeout((()=>{this.prevent||this.MouseClick(t),this.prevent=!1}),this.delay)},t.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},t.onmousedown=t=>{this.MouseDown(t)},t.onmouseup=t=>{this.MouseUp(t)},t.onmousemove=t=>{this.MouseMove(t)})}MouseDown(t){this.click=!0,this.down=!0;let e=this.CommonEventBuilder(t);e.CLICKTYPE=i.DOWN,e.isDown=!0,c.MouseEvent(e)}MouseClick(t){if(!this.click)return;let e=this.CommonEventBuilder(t);0===t.button?e.CLICKTYPE=i.LEFT:1===t.button?e.CLICKTYPE=i.MIDDLE:2===t.button&&(e.CLICKTYPE=i.RIGHT),c.MouseEvent(e)}MouseDoubleClick(t){let e=this.CommonEventBuilder(t);e.CLICKTYPE=i.DOUBLE,c.MouseEvent(e)}MouseDrag(t){this.click=!1;let e=this.CommonEventBuilder(t);e.CLICKTYPE=i.DRAG,e.isDown=!0,1===t.buttons?e.CLICKTYPE=i.DRAG:4===t.buttons?e.CLICKTYPE=i.DRAG_MIDDLE:2===t.buttons&&(e.CLICKTYPE=i.DRAG_RIGHT),c.MouseEvent(e)}MouseMove(t){if(this.down)return void this.MouseDrag(t);let e=this.CommonEventBuilder(t);e.CLICKTYPE=i.MOVE,e.isDown=!1,c.MouseEvent(e)}MouseUp(t){this.down=!1;let e=this.CommonEventBuilder(t);e.CLICKTYPE=i.UP,e.isDown=!1,c.MouseEvent(e)}MouseWheel(t,e){let s=this.CommonEventBuilder(t);s.wheel=e,s.CLICKTYPE=i.WHEEL,c.MouseEvent(s)}AppendDownEvent(t){}AppendUpEvent(){document.onmouseup=t=>{let e=this.CommonEventBuilder(t);0===t.button?e.CLICKTYPE=i.LEFT:1===t.button?e.CLICKTYPE=i.MIDDLE:2===t.button&&(e.CLICKTYPE=i.RIGHT),e.isDown=!1,e.CLICKTYPE=i.UP,c.MouseEvent(e)}}CommonEventBuilder(t){let e=new u;return e.preX=c.mouseEventDataPre.x,e.preY=c.mouseEventDataPre.y,e.premEvent=c.mouseEventDataPre,e.pressedShift=t.shiftKey,e.pressedAlt=t.altKey,e.pressedCtrl=t.ctrlKey,e.x=t.offsetX,e.y=t.offsetY,e.preWheel=c.mouseEventDataPre.wheel,e.wheel=0,e.native=t,c.mouseEventDataPre=e,this.e=e,e}}c.mouseEventDataPre=void 0;class l{static mouseDown(t){}static MouseDown(t){l.click=!0,l.down=!0,l.mouseDown(t)}static mouseClick(t){}static MouseClick(t){l.click&&l.mouseClick(t)}static mouseDoubleClick(t){}static MouseDoubleClick(t){l.mouseDoubleClick(t)}static mouseDrag(t){}static MouseDrag(t){l.click=!0,l.mouseDrag(t)}static mouseMove(t){}static MouseMove(t){l.down?l.MouseDrag(t):l.mouseMove(t)}static mouseUp(t){}static MouseUp(t){l.down=!1,l.mouseUp(t)}static Init(t){void 0===t||null===t?(document.onclick=t=>{l.timer=setTimeout((()=>{l.prevent||l.MouseClick(t),l.prevent=!1}),l.delay)},document.ondblclick=t=>{clearTimeout(l.timer),l.prevent=!0,l.MouseDoubleClick(t)},document.onmousedown=t=>{l.MouseDown(t)},document.onmouseup=t=>{l.MouseUp(t)},document.onmousemove=t=>{l.MouseMove(t)}):(t.onclick=t=>{l.timer=setTimeout((()=>{l.prevent||l.MouseClick(t),l.prevent=!1}),l.delay)},t.ondblclick=t=>{clearTimeout(l.timer),l.prevent=!0,l.MouseDoubleClick(t)},t.onmousedown=t=>{l.MouseDown(t)},t.onmouseup=t=>{l.MouseUp(t)},t.onmousemove=t=>{l.MouseMove(t)})}}l.click=!1,l.prevent=!1,l.delay=200,l.timer=void 0,l.down=!1,function(t){t.UP="UP",t.DOWN="DOWN"}(o||(o={}));class d{constructor(){this.preEvent=void 0,this.key=void 0,this.hasAltKey=void 0,this.hasCtrlKey=void 0,this.hasShiftKey=void 0,this.hasMetaCommand=void 0,this.code=void 0,this.keyCode=void 0,this.PRESSTYPE=void 0}}class v{static KeyEvent(t){}constructor(){this.isUp=void 0,this.isUp=!1,this.Init(),v.MouseEventDataPre=new d}Init(){document.onkeydown=t=>{this.KeyDown(t)},document.onkeypress=t=>{this.KeyPress(t)},document.onkeyup=t=>{this.KeyUp(t)}}KeyDown(t){let e=this.CommonEventBuilder(t);e.PRESSTYPE=o.DOWN,v.KeyEvent(e)}KeyPress(t){let e=this.CommonEventBuilder(t);e.PRESSTYPE=o.DOWN,v.KeyEvent(e)}KeyUp(t){let e=this.CommonEventBuilder(t);e.PRESSTYPE=o.UP,v.KeyEvent(e)}KeyUpJSAPI4X(t){let e=this.CommonEventBuilder(t);e.PRESSTYPE=o.UP,v.KeyEvent(e)}CommonEventBuilder(t){let e=new d;return e.preEvent=v.MouseEventDataPre,e.key=t.key,e.keyCode=t.keyCode,e.code=t.code,e.hasCtrlKey=t.ctrlKey,e.hasShiftKey=t.shiftKey,e.hasAltKey=t.altKey,e.hasMetaCommand=t.metaKey,v.MouseEventDataPre=e,e}}v.MouseEventDataPre=void 0,function(t){t.LEFT="LEFT",t.MIDDLE="MIDDLE",t.RIGHT="RIGHT",t.WHEEL="WHEEL",t.DRAG="DRAG",t.DRAG_LEFT="DRAG_LEFT",t.DRAG_MIDDLE="DRAG_MIDDLE",t.DRAG_RIGHT="DRAG_RIGHT",t.MOVE="MOVE",t.DOUBLE="DOUBLE",t.UP="UP",t.DOWN="DOWN",t.DOWN_MIDDLE="DOWN_MIDDLE",t.DOWN_RIGHT="DOWN_RIGHT"}(n||(n={}));class y{constructor(){this.x=-1,this.y=-1,this.z=-1,this.preX=-1,this.preY=-1,this.preZ=-1,this.yGLPicking=void 0,this.CLICKTYPE=n.MOVE,this.isDown=!1,this.isDoubleClick=!1,this.isMove=!1,this.pressedShift=!1,this.pressedAlt=!1,this.pressedCtrl=!1,this.lat=-1,this.long=-1,this.wheel=0,this.preWheel=0,this.premEvent=void 0,this.native=void 0}}class M{static MouseEvent(t){t.isMove}constructor(){this.isEnable=!0,this.click=!1,this.prevent=!1,this.delay=100,this.timer=void 0,this.down=!1,this.e=void 0,M.mouseEventDataPre=new y,this.InitNativeMouseEvent()}InitNativeMouseWheelEvent(t){}InitNativeMouseEvent(t){void 0===t||null===t?(document.onclick=t=>{this.timer=setTimeout((()=>{this.prevent||this.MouseClick(t),this.prevent=!1}),this.delay)},document.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},document.onmousedown=t=>{this.MouseDown(t)},document.onmouseup=t=>{this.MouseUp(t)},document.onmousemove=t=>{this.MouseMove(t)}):(t.onclick=t=>{this.timer=setTimeout((()=>{this.prevent||this.MouseClick(t),this.prevent=!1}),this.delay)},t.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},t.onmousedown=t=>{this.MouseDown(t)},t.onmouseup=t=>{this.MouseUp(t)},t.onmousemove=t=>{this.MouseMove(t)})}MouseDown(t){this.click=!0,this.down=!0;let e=this.CommonEventBuilder(t);e.CLICKTYPE=n.DOWN,e.isDown=!0,M.MouseEvent(e)}MouseClick(t){if(!this.click)return;let e=this.CommonEventBuilder(t);0===t.button?e.CLICKTYPE=n.LEFT:1===t.button?e.CLICKTYPE=n.MIDDLE:2===t.button&&(e.CLICKTYPE=n.RIGHT),M.MouseEvent(e)}MouseDoubleClick(t){let e=this.CommonEventBuilder(t);e.CLICKTYPE=n.DOUBLE,M.MouseEvent(e)}MouseDrag(t){this.click=!1;let e=this.CommonEventBuilder(t);e.CLICKTYPE=n.DRAG,e.isDown=!0,1===t.buttons?e.CLICKTYPE=n.DRAG:4===t.buttons?e.CLICKTYPE=n.DRAG_MIDDLE:2===t.buttons&&(e.CLICKTYPE=n.DRAG_RIGHT),M.MouseEvent(e)}MouseMove(t){if(this.down)return void this.MouseDrag(t);let e=this.CommonEventBuilder(t);e.CLICKTYPE=n.MOVE,e.isDown=!1,M.MouseEvent(e)}MouseUp(t){this.down=!1;let e=this.CommonEventBuilder(t);e.CLICKTYPE=n.UP,e.isDown=!1,M.MouseEvent(e)}MouseWheel(t,e){let s=this.CommonEventBuilder(t);s.wheel=e,s.CLICKTYPE=n.WHEEL,M.MouseEvent(s)}AppendDownEvent(t){}AppendUpEvent(){document.onmouseup=t=>{let e=this.CommonEventBuilder(t);0===t.button?e.CLICKTYPE=n.LEFT:1===t.button?e.CLICKTYPE=n.MIDDLE:2===t.button&&(e.CLICKTYPE=n.RIGHT),e.isDown=!1,e.CLICKTYPE=n.UP,M.MouseEvent(e)}}CommonEventBuilder(t){let e=new y;return e.preX=M.mouseEventDataPre.x,e.preY=M.mouseEventDataPre.y,e.premEvent=M.mouseEventDataPre,e.pressedShift=t.shiftKey,e.pressedAlt=t.altKey,e.pressedCtrl=t.ctrlKey,e.x=t.offsetX,e.y=t.offsetY,e.preWheel=M.mouseEventDataPre.wheel,e.wheel=0,e.native=t,M.mouseEventDataPre=e,this.e=e,e}}M.mouseEventDataPre=void 0;class m{static mouseDown(t){}static MouseDown(t){m.click=!0,m.down=!0,m.mouseDown(t)}static mouseClick(t){}static MouseClick(t){m.click&&m.mouseClick(t)}static mouseDoubleClick(t){}static MouseDoubleClick(t){m.mouseDoubleClick(t)}static mouseDrag(t){}static MouseDrag(t){m.click=!0,m.mouseDrag(t)}static mouseMove(t){}static MouseMove(t){m.down?m.MouseDrag(t):m.mouseMove(t)}static mouseUp(t){}static MouseUp(t){m.down=!1,m.mouseUp(t)}static Init(t){void 0===t||null===t?(document.onclick=t=>{m.timer=setTimeout((()=>{m.prevent||m.MouseClick(t),m.prevent=!1}),m.delay)},document.ondblclick=t=>{clearTimeout(m.timer),m.prevent=!0,m.MouseDoubleClick(t)},document.onmousedown=t=>{m.MouseDown(t)},document.onmouseup=t=>{m.MouseUp(t)},document.onmousemove=t=>{m.MouseMove(t)}):(t.onclick=t=>{m.timer=setTimeout((()=>{m.prevent||m.MouseClick(t),m.prevent=!1}),m.delay)},t.ondblclick=t=>{clearTimeout(m.timer),m.prevent=!0,m.MouseDoubleClick(t)},t.onmousedown=t=>{m.MouseDown(t)},t.onmouseup=t=>{m.MouseUp(t)},t.onmousemove=t=>{m.MouseMove(t)})}}m.click=!1,m.prevent=!1,m.delay=200,m.timer=void 0,m.down=!1,function(t){t.NATIVE="NATIVE",t.JSAPI4X="JSAPI4X"}(r||(r={})),function(t){t.UP="UP",t.DOWN="DOWN"}(h||(h={}));class x{constructor(){this.preEvent=void 0,this.key=void 0,this.hasAltKey=void 0,this.hasCtrlKey=void 0,this.hasShiftKey=void 0,this.hasMetaCommand=void 0,this.code=void 0,this.keyCode=void 0,this.PRESSTYPE=void 0}}class p{static KeyEvent(t){}constructor(){this.type=void 0,this.isUp=void 0,this.isUp=!1,this.Init(),p.MouseEventDataPre=new x}Init(){document.onkeydown=t=>{this.KeyDown(t)},document.onkeypress=t=>{this.KeyPress(t)},document.onkeyup=t=>{this.KeyUp(t)}}KeyDown(t){let e=this.CommonEventBuilder(t);e.PRESSTYPE=h.DOWN,p.KeyEvent(e)}KeyPress(t){let e=this.CommonEventBuilder(t);e.PRESSTYPE=h.DOWN,p.KeyEvent(e)}KeyUp(t){let e=this.CommonEventBuilder(t);e.PRESSTYPE=h.UP,p.KeyEvent(e)}CommonEventBuilder(t){let e=new x;return e.preEvent=p.MouseEventDataPre,e.key=t.key,e.keyCode=t.keyCode,e.code=t.code,e.hasCtrlKey=t.ctrlKey,e.hasShiftKey=t.shiftKey,e.hasAltKey=t.altKey,e.hasMetaCommand=t.metaKey,p.MouseEventDataPre=e,e}}p.MouseEventDataPre=void 0;class D{static GetVecforGraphicApp(t,e,s,i,o,n){let r=new D(0,0,0);return r.long=t,r.lat=e,r.ele=s,r.proX=i,r.proY=o,r.proZ=n,r}static DeepCopy(t){return void 0===t.z?new D(t.x,t.y,0):new D(t.x,t.y,t.z)}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static ScalarRev_V_S_OUT(t,e,s){return s.x=e*t.x,s.y=e*t.y,s.z=e*t.z,s}static Sub(t,e){return new D(e.x-t.x,e.y-t.y,e.z-t.z)}static Clone(t){return D.DeepCopy(t)}static zAxis(){return new D(0,0,1)}static zero(){return new D(0,0,0)}static Origin(){return new D(0,0,0)}static Plus(t,e){return new D(t.x+e.x,t.y+e.y,t.z+e.z)}static Scale(t,e){return new D(t.x*e,t.y*e,t.z*e)}static MidVec(t,e){return new D(.5*(t.x+e.x),.5*(t.y+e.y),.5*(t.z+e.z))}static CompareTwoVectors(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}static Length(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}static Normalize(t){let e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return new D(t.x/e,t.y/e,t.z/e)}static GetArea(t){let e=0;for(let s=0;s<t.length-1;s++)e+=(t[s].x-t[s+1].x)*(t[s].y+t[s+1].y);return e*=.5,e}static GetAreaByLongLat(t){let e=0;for(let s=0;s<t.length-1;s++)e+=(t[s].long-t[s+1].long)*(t[s].lat+t[s+1].lat);return e*=.5,e}static GetGeoArea(t){let e=0;for(let s=0;s<t.length-1;s++)e+=(t[s].x-t[s+1].x)*(t[s].y+t[s+1].y);return e*=.5,Math.abs(e)}static Distance(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}static Distance2(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z)}static DotProduct(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static CrossProduct(t,e){return new D(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)}static DivideByNum(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=[],o=(e.x-t.x)/s,n=(e.y-t.y)/s,r=(e.z-t.z)/s;for(let h=0;h<s;++h){let e=t.x+o*h,s=t.y+n*h,a=t.z+r*h;i.push(new D(e,s,a))}return i}static KMeterFromGeoGPSPos(t,e){let s=e.lat*Math.PI/180-t.lat*Math.PI/180,i=e.long*Math.PI/180-t.long*Math.PI/180,o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6378.137*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}static KMeterFromGPSPos(t,e){let s=e.y*Math.PI/180-t.y*Math.PI/180,i=e.x*Math.PI/180-t.x*Math.PI/180,o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.y*Math.PI/180)*Math.cos(e.y*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6378.137*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}static Get1KM_Long_ByGeoUnit(){let t=new D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,0),e=0;for(let s=0;s<1e4;++s){let s=D.KMeterFromGPSPos(t,new D(t.x+e,t.y,t.z));if(1<s&&s<1.001)return t.x+e;e+=1e-5}return-1}static Get1KM_lat_ByGeoUnit(){let t=new D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,0),e=0;for(let s=0;s<1e4;++s){let s=D.KMeterFromGPSPos(t,new D(t.x,t.y+e,t.z));if(1<s&&s<1.001)return t.y+e;e+=1e-5}return-1}static Get1KM_Lat_Long_GeoUnit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=D.Get1KM_Long_ByGeoUnit(t,e),i=D.Get1KM_lat_ByGeoUnit(t,e);return new D(s,i,0)}static CalculateFalloff(t,e,s,i){let o=e.Sub(t).Length();return o*(s*Math.exp(-i*o*o))}static Attractor(t,e,s,i){let o=e.Sub(t);o.Unitize();let n=o.Length();return o.Mult(s*Math.exp(-i*n*n))}static Explosion(t,e,s,i){let o=e.Sub(t);o.Unitize();let n=o.Length();return o.Mult(-s*Math.exp(-i*n*n))}static Rotor(t,e,s,i){return e.Sub(t).Unitize(),D.Origin()}static GetCosAngleByTwoVectors(t,e){return D.DotProduct(D.Normalize(t),D.Normalize(e))}static GetAngleByTwoVectorsRadian(t,e){return Math.acos(D.GetCosAngleByTwoVectors(t,e))}static GetAngleByTwoVectors(t,e){return 180*D.GetAngleByTwoVectorsRadian(t,e)/Math.PI}static GetRotationByWorldCoodinate(t){let e=new D(1,0,0);return D.GetAngleByTwoVectors(e,t)}static GetRotationByWorldCoodinateByTwo(t,e){let s=e.Sub(t),i=new D(1,0,0);return s.y>0?-1*D.GetAngleByTwoVectors(i,s):D.GetAngleByTwoVectors(i,s)}static DistanceMouseWithTwoVecs(t,e,s){e.x+=1e-5,e.y+=1e-5;let i=D.GetBoundingVecs(e,s),o=D.GetCloseVec(e,s,t.x,t.y,i,!0);return D.Distance(t,o)}static GetCloseVec(t,e,s,i,o){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=new D(t.x,t.y,t.z),h=new D(e.x,e.y,e.z).Sub(r),a=new D(s,i,0).Sub(r);h.Unitize();let u=r.Add(h.Mult(a.DotProduct(h)));return n?D.IsInsideOfVecs(u,o)?u:t.Distance(u)<e.Distance(u)?new D(t.x,t.y,t.z):new D(e.x,e.y,e.z):u}static GetBoundingVecs(t,e){let s=[],i=0,o=0,n=0;i=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,n=t.z<e.z?t.z:e.z;let r=new D(i,o,n);i=t.x>e.x?t.x:e.x,o=t.y>e.y?t.y:e.y,n=t.z>e.z?t.z:e.z;let h=new D(i,o,n);return s.push(new D(r.x,r.y,r.z)),s.push(new D(h.x,r.y,r.z)),s.push(new D(h.x,h.y,r.z)),s.push(new D(r.x,h.y,r.z)),s}static GetBoundaryByVecWidthHeight(t,e,s){let i=[];return i.push(new D(t.x,t.y,t.z)),i.push(new D(t.x+e,t.y,t.z)),i.push(new D(t.x+e,t.y+s,t.z)),i.push(new D(t.x,t.y+s,t.z)),i}static GetBoundingByVecs(t){let e=[],s=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let a=0;a<t.length;++a)s>t[a].x&&(s=t[a].x),i>t[a].y&&(i=t[a].y),o>t[a].z&&(o=t[a].z),n<t[a].x&&(n=t[a].x),r<t[a].y&&(r=t[a].y),h<t[a].z&&(h=t[a].z);return e.push(new D(s,i,o)),e.push(new D(n,r,h)),e}static GetMinMaxVecFromVecs(t){let e=Number.MAX_VALUE,s=Number.MAX_VALUE,i=Number.MAX_VALUE,o=Number.MIN_VALUE,n=Number.MIN_VALUE,r=Number.MIN_VALUE;for(let h of t)e>h.x&&(e=h.x),s>h.y&&(s=h.y),i>h.z&&(i=h.z),o<h.x&&(o=h.x),n<h.y&&(n=h.y),r<h.z&&(r=h.z);return[new D(e,s,i),new D(o,n,r)]}static RemoveVecsWithinDis(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=[];for(let i=0;i<t.length-1;++i){let s=t[i];if(!1!==s.d)for(let o=i+1;o<t.length;++o)D.Distance(s,t[o])<e&&(t[o].d=!1)}for(let i=0;i<t.length;++i)!0===t[i].d&&s.push(t[i]);return s}static IsInsideOfVecsWtihVecs(t,e){let s=!0;for(let i=0,o=t.length-1;i<t.length;o=i++)if(s=D.IsInsideOfVecs(t[i],e),!s)return!1;return!0}static IsInsideOfVecs(t,e){let s=t.x,i=t.y,o=!1;for(let n=0,r=e.length-1;n<e.length;r=n++){let t=e[n].x,h=e[n].y,a=e[r].x,u=e[r].y;h>i!==u>i&&s<(a-t)*(i-h)/(u-h)+t&&(o=!o)}return o}static IsInsideOfVecsByConcaveHull(t,e){}static IsInsideOfVecsByConvexHull(t,e){return e=D.ConvexHull(e),!!D.IsInsideOfVecs(t,e)}static ConvexHull(t){t.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x}));let e=[];for(let i=0;i<t.length;i++){for(;e.length>=2&&D.Cross(e[e.length-2],e[e.length-1],t[i])<=0;)e.pop();e.push(t[i])}let s=[];for(let i=t.length-1;i>=0;i--){for(;s.length>=2&&D.Cross(s[s.length-2],s[s.length-1],t[i])<=0;)s.pop();s.push(t[i])}s.pop(),e.pop();for(let i=0;i<s.length;++i)e.push(s[i]);return e}static Cross(t,e,s){return(e.x-t.x)*(s.y-t.y)-(e.y-t.y)*(s.x-t.x)}static Cross_A_B_OUT(t,e,s){const i=t.x,o=t.y,n=t.z,r=e.x,h=e.y,a=e.z;return s.x=o*a-n*h,s.y=n*r-i*a,s.z=i*h-o*r,s}static CheckLineIntersection(t,e,s,i){let o=0,n=0,r=0,h=0,a=0,u=!1,c=!1;o=(i.y-s.y)*(e.x-t.x)-(i.x-s.x)*(e.y-t.y);let l=new D(0,0,0);if(0!==o)return n=t.y-s.y,r=t.x-s.x,h=(i.x-s.x)*n-(i.y-s.y)*r,a=(e.x-t.x)*n-(e.y-t.y)*r,n=h/o,r=a/o,l.x=t.x+n*(e.x-t.x),l.y=t.y+n*(e.y-t.y),n>0&&n<1&&(u=!0),r>0&&r<1&&(c=!0),u&&c?l:void 0}static CheckConvexity(t){if(t.length<3)return!1;let e,s,i,o=0;for(let n=0;n<t.length;n++){e=t[n];let r=t[(n+1)%t.length];if(s=new D(r.x-e.x,r.y-e.y,0),i=t[(n+2)%t.length],0===n)o=i.x*s.y-i.y*s.x+s.x*e.y-s.y*e.x;else{let t=i.x*s.y-i.y*s.x+s.x*e.y-s.y*e.x;if(t>0&&o<0||t<0&&o>0)return!1}}return!0}static MoveVecs(t,e){let s=[];for(let i=0;i<t.length;++i)s.push(D.MoveVec(t[i],e));return s}static MoveVec(t,e){return new D(t.x+e.x,t.y+e.y,t.z+e.z)}static RotateVecsLoal(t,e){let s=D.GetCenterVecFromVecs(t),i=new D(-s.x,-s.y,-s.z),o=D.MoveVecs(t,i);return o=D.RotateVecs(o,e),o=D.MoveVecs(o,s),o}static RotateVecs(t,e){let s=[];for(let i=0;i<t.length;++i)s.push(D.RotateVec(t[i],e));return s}static RotateVec(t,e){let s=Math.cos(.017453292519943278*e),i=Math.sin(.017453292519943278*e),o=t.x*s-t.y*i,n=t.x*i+t.y*s;return new D(o,n,t.z)}static GetCenterVecFromVecs(t){let e=new D(0,0,0);for(let s=0,i=t.length;s<i;++s)e.Add(t[s]);return e.Mult(1/t.length),e}static MidVecGeo(t,e){return new D(t.x+.5*e.x,t.y+.5*e.y,0)}static GetVecFromIntersection(t){let e=[];for(let s=0;s<t.length-1;++s)for(let i=s+1;i<t.length-1;++i){let o=D.CheckLineIntersection(t[s],t[s+1],t[i],t[i+1]);o&&e.push(o)}return 0===e.length?void 0:e}static between(t,e,s){return t-D.eps<=e&&e<=s+D.eps}static segment_intersection(t,e,s,i){var o=((t.x*e.y-t.y*e.x)*(s.x-i.x)-(t.x-e.x)*(s.x*i.y-s.y*i.x))/((t.x-e.x)*(s.y-i.y)-(t.y-e.y)*(s.x-i.x)),n=((t.x*e.y-t.y*e.x)*(s.y-i.y)-(t.y-e.y)*(s.x*i.y-s.y*i.x))/((t.x-e.x)*(s.y-i.y)-(t.y-e.y)*(s.x-i.x));if(isNaN(o)||isNaN(n))return!1;if(t.x>=e.x){if(!D.between(e.x,o,t.x))return!1}else if(!D.between(t.x,o,e.x))return!1;if(t.y>=e.y){if(!D.between(e.y,n,t.y))return!1}else if(!D.between(t.y,n,e.y))return!1;if(s.x>=i.x){if(!D.between(i.x,o,s.x))return!1}else if(!D.between(s.x,o,i.x))return!1;if(s.y>=i.y){if(!D.between(i.y,n,s.y))return!1}else if(!D.between(s.y,n,i.y))return!1;return new D(o,n)}constructor(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.z=0,this.w=0,this.long=0,this.lat=0,this.ele=0,this.proX=0,this.proY=0,this.proZ=0,this.alt=0,this.d=!0,this.isModified=!1,this.x=t,this.y=e,this.z=s}Set(t,e,s){return this.x=t,this.y=e,this.z=s,new D(this.x,this.y,this.z)}Scale(t){return this.x*=t,this.y*=t,this.z*=t,new D(this.x,this.y,this.z)}Mult(t){return this.x*=t,this.y*=t,this.z*=t,new D(this.x,this.y,this.z)}Div(t){return this.x/=t,this.y/=t,this.z/=t,new D(this.x,this.y,this.z)}Add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,new D(this.x,this.y,this.z)}Sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,new D(this.x,this.y,this.z)}Negate(){return this.x*=-1,this.y*=-1,this.z*=-1,new D(this.x,this.y,this.z)}Equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}Clone(){return new D(this.x,this.y,this.z)}Length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}Unitize(){return this.Normalize()}Normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return this.x=this.x/t,this.y=this.y/t,this.z=this.z/t,new D(this.x,this.y,this.z)}Distance(t){return D.Distance(new D(this.x,this.y,this.z),t)}Distance2(t){return D.Distance2(new D(this.x,this.y,this.z),t)}DotProduct(t){return D.DotProduct(new D(this.x,this.y,this.z),t)}CrossProduct(t){return D.CrossProduct(new D(this.x,this.y,this.z),t)}SquareLength(){let t=D.Length(new D(this.x,this.y,this.z));return t*t}FadeExp(t,e){let s=new D(this.x,this.y,this.z);return s.Sub(t),Math.exp(-e*s.SquareLength())}GetAngle(){return Math.atan2(this.y,this.x)}GetAngleDegree(){return 180*this.GetAngle()/Math.PI}ToJSON(){}ToString(){return"x: "+this.x.toFixed(3).toString()+" , y: "+this.y.toFixed(3).toString()+", z: "+this.z.toFixed(3).toString()}ToFloat32Array(){return new Float32Array([this.x,this.y,this.z])}}D.eps=1e-7,D.origin=new D(0,0,0),function(t){t.DRAWING="DRAWING",t.CONTROL_PANEL="CONTROL_PANEL"}(a||(a={}));class C{static Add(t){C.list.push(t)}static Remove(t){C.list.splice(C.list.indexOf(t),1)}static RemoveAllCapturedBlock(){void 0!==C.capture&&(C.capture.type!==a.CONTROL_PANEL?C.capture.Remove():C.capture.RemovePanel())}static CheckOvered(t){let e=C.list.length;for(;e--;)C.list[e].IsMouseInside(t.x,t.y)?C.list[e].IsHover=!0:C.list[e].IsHover=!1}static FindAtPoint(t){let e=C.list.length;for(;e--;)if(!C.list[e].isHidden&&C.list[e].IsMouseInside(t.x,t.y))return C.list[e]}static MouseDown(t){if(C.isHidden)return;let e=C.FindAtPoint(t);void 0!==e?(e.MouseDown(t),C.capture=e):C.capture=void 0}static MouseLeft(t){if(C.isHidden)return;let e=C.FindAtPoint(t);void 0!==e?(e.MouseLeft(t),C.capture=e):C.capture=void 0}static MouseRight(t){if(C.isHidden)return;let e=C.FindAtPoint(t);void 0!==e?(e.MouseRight(t),C.capture=e):C.capture=void 0}static MouseDrag(t){C.isHidden||void 0!==C.capture&&C.capture.MouseDrag(t)}static MouseDouble(t){if(C.isHidden)return;let e=C.FindAtPoint(t);void 0!==e&&e.MouseDouble(t)}static MouseMove(t){C.m.x=t.x,C.m.y=t.y,C.isHidden||(C.CheckOvered(t),C.FindAtPoint(t))}static MouseUp(t){C.isHidden||void 0!==C.capture&&C.capture.MouseUp(t)}static CopyBlock(){}static PasteBlock(){C.capture}constructor(t){this.cBCanvas=void 0,this.cBCanvas=t}Render(t){if(!C.isHidden)for(let e=0;e<C.list.length;++e)C.list[e].Render(t)}}C.list=[],C.isHidden=!1,C.capture=void 0,C.m=new D(-1,-1);var E=s(77144),I=s(51520),w=s(51114),g=s(31790),P=s(48143),f=s(840),T=s(14462),O=s(2275),k=s(34584),R=s(71851),L=s(64814);const b=()=>{let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let s=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?s:3&s|8).toString(16)}))};let B,G,S;!function(t){t.DRAWING="DRAWING",t.CONTROL_PANEL="CONTROL_PANEL"}(B||(B={}));class A{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.type=void 0,this.id=void 0,this.value=void 0,this.vec=void 0,this.boundarVecs=void 0,this.isHidden=void 0,this.div=void 0,this.height=void 0,this.width=void 0,this.divID=void 0,this.xOff=void 0,this.yOff=void 0,this.isSelected=void 0,this.isOver=void 0,this.toggle=void 0,this.isMoveable=void 0,this.style=void 0,this.filletR=void 0,this.title=void 0,this.colorBase=void 0,this.colorOver=void 0,this.colorText=void 0,this.isRender=void 0,this.transparent=void 0,this.heightPanel=void 0,this.vecsPanel=void 0,C.Add(this),this.width=t,this.height=e,this.heightPanel=50,this.xOff=10,this.yOff=50,this.isHidden=!1,this.isSelected=!1,this.isOver=!1,this.isMoveable=!0,this.style=0,this.filletR=3,this.isRender=!0,this.vec=new D(100,100,0),this.title="Drawing Block",this.boundarVecs=[],this.colorBase="#907BD2",this.transparent=1,this.toggle=!0,this.id=b()}Remove(){C.Remove(this)}RemovePanel(){}DeepCopy(){}Dummy(){}get Toggle(){return this.toggle}set Toggle(t){this.toggle=t,console.log("dd")}get IsHidden(){return this.isHidden}set IsHidden(t){this.isHidden=t}get IsHover(){return this.isOver}set IsHover(t){this.isOver=t}get IsSelected(){return this.isSelected}set IsSelected(t){this.isSelected=t}GetBoundaryVecs(){let t=.5*this.height,e=.5*this.width,s=new D(this.vec.x-e,this.vec.y-t),i=new D(this.vec.x+e,this.vec.y+t);return this.boundarVecs=D.GetBoundingVecs(s,i),this.boundarVecs}ComputeBoundary(){return this.boundarVecs=[],this.boundarVecs.push(new D(this.vec.x,this.vec.y,this.vec.z)),this.boundarVecs.push(new D(this.vec.x+this.width,this.vec.y,this.vec.z)),this.boundarVecs.push(new D(this.vec.x+this.width,this.vec.y+this.height,this.vec.z)),this.boundarVecs.push(new D(this.vec.x,this.vec.y+this.height,this.vec.z)),this.boundarVecs}GetBoundaryPanelVecs(){let t=this.height,e=this.width,s=new D(this.vec.x,this.vec.y+t+2),i=new D(this.vec.x+e,this.vec.y+t+this.heightPanel);return this.vecsPanel=D.GetBoundingVecs(s,i),this.vecsPanel}IsMouseInside(t,e){let s=D.IsInsideOfVecs(new D(t,e),this.ComputeBoundary());return this.isOver=s,s}Translate(t){if(!this.isMoveable)return;let e=t.x-t.preX,s=t.y-t.preY;this.vec.x+=e,this.vec.y+=s;for(let i=0;i<this.boundarVecs.length;++i)this.boundarVecs[i].x+=e,this.boundarVecs[i].y+=s}Move(t,e){this.vec.x=t,this.vec.y=e}HideToogle(){this.IsHidden=!this.IsHidden,this.Hide()}Hide(){}MouseDown(t){}MouseUp(t){}MouseDrag(t){this.Translate(t)}MouseDouble(t){}MouseLeft(t){console.log("eeeeee"),this.IsSelected=!this.IsSelected}MouseRight(t){}Render(t){this.isHidden||this.RenderPost(t)}}!function(t){t.SOURCE_OVER="source-over",t.SOURCE_IN="source-in",t.SOURCE_OUT="source-out",t.SOURCE_ATOP="source-atop",t.COPY="copy",t.DESTAINATION_OVER="destination-over",t.DESTAINATION_IN="destination-in",t.DESTAINATION_OUT="destination-out",t.DESTAINATION_ATOP="destination-atop",t.LIGHTER="lighter",t.MULTIPLY="multiply",t.SCREEN="screen",t.OVERLAY="overlay",t.DARKEN="darken",t.LIGHTEN="lighten",t.COLOR_DODGE="color-dodge",t.COLOR_BURN="color-burn",t.HARD_LIGHT="hard-light",t.SOFT_LIGHT="soft-light",t.DIFFERENCE="difference",t.EXCLUSION="exclusion",t.HUE="hue",t.SATURATION="saturation",t.COLOR="color",t.LUMINOSITY="luminosity"}(G||(G={}));class z{static ShiftBlendingMode(t){let e=t%z.modeListGL.length;return console.log(z.modeListGL[e]+" mode for WebGL"),z.modeListGL[e]}static RGBtoGray(t,e,s){return.2126*t+.7152*e+.0722*s}static HSVtoRGB(t,e,s,i){const o=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;(void 0===e||isNaN(e))&&(e=2);let s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],i=0,o="";for(t=Math.floor(t);t>0;)i=t%16,t=Math.floor((t-i)/16),o=s[i]+o;for(;o.length<e;)o="0"+o;return o};let n=Math.floor(t/60)%6,r=t/60-Math.floor(t/60),h=s*(1-e),a=s*(1-r*e),u=s*(1-(1-r)*e),c=s,l=u,d=h;switch(n){case 1:c=a,l=s,d=h;break;case 2:c=h,l=s,d=u;break;case 3:c=h,l=a,d=s;break;case 4:c=u,l=h,d=s;break;case 5:c=s,l=h,d=a}return i?"rgba( ".concat(Math.round(255*c),",").concat(Math.round(255*l),",").concat(Math.round(255*d),",").concat(i,")"):"#"+o(255*c)+o(255*l)+o(255*d)}static GetRandomHex(){return z.RGBToHex(Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()))}static GetRandomRGB(){return"rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),")")}static GetRandomRGBArray(){return[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())]}static GetRandomColor(){let t="#";for(let e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}static RGBToHex(t,e,s){return"#"+[Math.round(t),Math.round(e),Math.round(s)].map((t=>{const e=t.toString(16);return 1===e.length?"0"+e:e})).join("")}static HexToCanvasColor(t){let e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s=s||"1.0",t=t.replace("#","");let o=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16);if(i){let t=.58*o+.17*n+.8*r;e="rgba("+t+","+t+","+t+","+s+")"}else e="rgba("+o+","+n+","+r+","+s+")";return e}static Dec2hex(t){return(t+65536).toString(16).substr(-4).toUpperCase()}static Hex2Dec(t){return parseInt(t,16)}static RGB_by_A(t,e){let s=t.split(",");return s[0]+","+s[1]+","+s[2]+","+e+")"}static HexToRGBA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=t.replace("#","");let i=parseInt(t.substring(0,2),16),o=parseInt(t.substring(2,4),16),n=parseInt(t.substring(4,6),16);if(s){let t=.58*i+.17*o+.8*n;return[t,t,t,e]}return[i,o,n,e]}static HexToRGBANormalized(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=t.replace("#","");let i=parseInt(t.substring(0,2),16),o=parseInt(t.substring(2,4),16),n=parseInt(t.substring(4,6),16);if(s){let t=.58*i+.17*o+.8*n;return[t,t,t,e]}return[i/255,o/255,n/255,e/255]}static RGB2HSL(t,e,s){t/=255,e/=255,s/=255;let i=Math.max(t,e,s),o=Math.min(t,e,s),n=(i+o)/2,r=(i+o)/2,h=(i+o)/2;if(i===o)n=r=0;else{let a=i-o;switch(r=h>.5?a/(2-i-o):a/(i+o),i){case t:n=(e-s)/a+(e<s?6:0);break;case e:n=(s-t)/a+2;break;case s:n=(t-e)/a+4}n/=6}return[n,r,h]}static HSL2RGB(t,e,s){let i,o,n;if(0===e)i=o=n=s;else{const r=(t,e,s)=>(s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t);let h=s<.5?s*(1+e):s+e-s*e,a=2*s-h;i=r(a,h,t+1/3),o=r(a,h,t),n=r(a,h,t-1/3)}return[Math.max(0,Math.min(Math.round(255*i),255)),Math.max(0,Math.min(Math.round(255*o),255)),Math.max(0,Math.min(Math.round(255*n),255))]}static RGB2HSV(t,e,s){t/=255,e/=255,s/=255;let i=Math.max(t,e,s),o=Math.min(t,e,s),n=i,r=i,h=i,a=i-o;if(r=0===i?0:a/i,i===o)n=0;else{switch(i){case t:n=(e-s)/a+(e<s?6:0);break;case e:n=(s-t)/a+2;break;case s:n=(t-e)/a+4}n/=6}return[n,r,h]}static HSV2RGB(t,e,s){let i=0,o=0,n=0,r=Math.floor(6*t),h=6*t-r,a=s*(1-e),u=s*(1-h*e),c=s*(1-(1-h)*e);switch(r%6){case 0:i=s,o=c,n=a;break;case 1:i=u,o=s,n=a;break;case 2:i=a,o=s,n=c;break;case 3:i=a,o=u,n=s;break;case 4:i=c,o=a,n=s;break;case 5:i=s,o=a,n=u}return[255*i,255*o,255*n]}static InterpolateColor(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,i=[t[0],t[1],t[2]];for(let o=0;o<3;o++)i[o]=255*i[o]+s*(255*e[o]-255*t[o]);return i}static InterpolateColorsByArray(t,e,s){const i=1/(s-1),o=[];for(let n=0;n<s;n++)o.push(z.InterpolateColor(t,e,i*n));return o}static InterpolateColors(t,e,s){const i=1/(s-1),o=[];let n=z.RBGToArray(t),r=z.RBGToArray(e);if(n&&r)for(let h=0;h<s;h++)o.push(z.InterpolateColor(n,r,i*h));return o}static RBGToArray(t){const e=t.match(/\d+/g);if(e)return e.map(Number)}static Blend(t,e,s){return t*(1-s)+e*s}static Addition(t,e,s){return t*(1-s)+s*(t+e)*.5}static Subtraction(t,e,s){return t*(1-s)+s*(t-e)*2}static Multiply(t,e,s){return t*(1-s)+s*(t*e)*.5}static Screen(t,e,s){return t*(1-s)+s*(1-(1-t)*(1-e))}static Overlay(t,e,s){let i=0;return i=t<.5?2*t*e:1-2*(1-t)*(1-e),i=t*(1-s)+s*i,i}static SoftLight(t,e,s){let i=0;return i=e<.5?2*t*e+t*t*(1-2*e):2*t*(1-e)+Math.sqrt(t)*(2*e-1),i=t*(1-s)+s*i,i}}z.modeList=["source-over","source-in","source-out","source-atop","copy","destination-over","destination-in","destination-out","destination-atop","lighter","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z.modeListGL=["source-over","lighter","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z.ColorPreset={shadow:"rgba(10,10,10,0.5)"};class N{static RoundedRectFill(t,e,s,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=i;t.save(),t.beginPath(),t.moveTo(s[0].x+o+h,s[0].y),t.lineTo(s[1].x-o-h,s[1].y),t.arcTo(s[1].x-o,s[1].y,s[1].x-o,s[1].y+h,h),t.lineTo(s[2].x-o,s[2].y-h),t.arcTo(s[2].x-o,s[2].y,s[2].x-o-h,s[2].y,h),t.lineTo(s[3].x+o+h,s[3].y),t.arcTo(s[3].x+o,s[3].y,s[3].x+o,s[3].y-h,h),t.lineTo(s[0].x+o,s[0].y+h),t.arcTo(s[0].x+o,s[0].y,s[0].x+o+h,s[0].y,h),t.closePath(),t.fillStyle=N.styleFill,r&&(t.fillStyle=N.stylefillSelected),n&&(t.strokeStyle=N.styleStroke,t.lineWidth=1,t.stroke()),t.shadowBlur=4,t.shadowColor=z.ColorPreset.shadow,t.shadowOffsetY=2,t.shadowOffsetX=2,t.fill(),t.restore()}static Title(t,e,s,i,o,n){t.save(),t.fillStyle=n?"white":"#AFAFAF",t.textBaseline="top",t.textAlign="center",t.font="100 15px Sans-serif",t.fillText(o,e.x+.5*s,e.y+.5*i-8),t.restore()}constructor(){}}N.styleStroke="white",N.styleFill="gray",N.stylefillSelected="red";class U{static Scale(t){return.2*(Math.sin(U.t)+5)*t}static ScaleLocalT(t,e){return.2*(Math.sin(e)+5)*t}static ScaleMin(t){return(.02*(Math.sin(U.t)+5)+.9)*t}static ScaleMinOfMin(t){return Math.cos(t)}static ScaleMinLocalT(t,e){return(.02*(Math.sin(e)+5)+.9)*t}static linear(t){return t}static EaseInQuad(t){return t*t}static EaseOutQuad(t){return t*(2-t)}static EaseInOutQuad(t){return t<.5?2*t*t:(4-2*t)*t-1}static EaseInCubic(t){return t*t*t}static EaseOutCubic(t){return--t*t*t+1}static EaseInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}static EaseInQuart(t){return t*t*t*t}static EaseOutQuart(t){return 1- --t*t*t*t}static EaseInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}static EaseInQuint(t){return t*t*t*t*t}static EaseOutQuint(t){return 1+--t*t*t*t*t}static EaseInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}static EaseInElastic(t){return(.04-.04/t)*Math.sin(25*t)+1}static EaseOutElastic(t){return.04*t/--t*Math.sin(25*t)}static EaseInOutElastic(t){return(t-=.5)<0?(.01+.01/t)*Math.sin(50*t):(.02-.01/t)*Math.sin(50*t)+1}static easeOutElastic2(t){return Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1}static easeInSine(t){return-1*Math.cos(t*(Math.PI/2))+1}static easeOutSine(t){return Math.sin(t*(Math.PI/2))}static easeInOutSine(t){return-.5*(Math.cos(Math.PI*t)-1)}static easeInQuad(t){return t*t}static easeOutQuad(t){return t*(2-t)}static easeInOutQuad(t){return t<.5?2*t*t:(4-2*t)*t-1}static easeInCubic(t){return t*t*t}static easeOutCubic(t){const e=t-1;return e*e*e+1}static easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}static easeInQuart(t){return t*t*t*t}static easeOutQuart(t){const e=t-1;return 1-e*e*e*e}static easeInOutQuart(t){const e=t-1;return t<.5?8*t*t*t*t:1-8*e*e*e*e}static easeInQuint(t){return t*t*t*t*t}static easeOutQuint(t){const e=t-1;return 1+e*e*e*e*e}static easeInOutQuint(t){const e=t-1;return t<.5?16*t*t*t*t*t:1+16*e*e*e*e*e}static easeInExpo(t){return 0===t?0:Math.pow(2,10*(t-1))}static easeOutExpo(t){return 1===t?1:1-Math.pow(2,-10*t)}static easeInOutExpo(t){if(0===t||1===t)return t;const e=2*t,s=e-1;return e<1?.5*Math.pow(2,10*s):.5*(2-Math.pow(2,-10*s))}static easeInCirc(t){const e=t/1;return-1*(Math.sqrt(1-e*t)-1)}static easeOutCirc(t){const e=t-1;return Math.sqrt(1-e*e)}static easeInOutCirc(t){const e=2*t,s=e-2;return e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-s*s)+1)}static easeInBack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158;return t*t*((e+1)*t-e)}static easeOutBack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158;const s=t/1-1;return s*s*((e+1)*s+e)+1}static easeInOutBack(t){const e=2*t,s=e-2,i=1.525*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158);return e<1?.5*e*e*((i+1)*e-i):.5*(s*s*((i+1)*s+i)+2)}static easeInElastic(t){if(0===t||1===t)return t;const e=t/1-1,s=1-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7),i=s/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*e)*Math.sin((e-i)*(2*Math.PI)/s)}static easeOutElastic(t){const e=1-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7),s=2*t;if(0===t||1===t)return t;const i=e/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*s)*Math.sin((s-i)*(2*Math.PI)/e)+1}static easeInOutElastic(t){const e=1-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.65);if(0===t||1===t)return t;const s=2*t,i=s-1,o=e/(2*Math.PI)*Math.asin(1);return s<1?Math.pow(2,10*i)*Math.sin((i-o)*(2*Math.PI)/e)*-.5:Math.pow(2,-10*i)*Math.sin((i-o)*(2*Math.PI)/e)*.5+1}static easeOutBounce(t){const e=t/1;if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75){const t=e-1.5/2.75;return 7.5625*t*t+.75}if(e<2.5/2.75){const t=e-2.25/2.75;return 7.5625*t*t+.9375}{const t=e-2.625/2.75;return 7.5625*t*t+.984375}}static easeInBounce(t){return 1-U.easeOutBounce(1-t)}static easeInOutBounce(t){return t<.5?.5*U.easeInBounce(2*t):.5*U.easeOutBounce(2*t-1)+.5}static Easing(){}static Update(){U.t+=.05}}U.t=0,function(t){t.IN="IN",t.OUT="OUT"}(S||(S={}));class K extends A{static FindAtPoint(t,e){for(var s=K.list.length-1;s>=0;--s)if(!K.list[s].isHidden&&K.list[s].IsMouseInside(t,e))return K.list[s]}static Add(t){K.list.push(t)}static Remove(t){K.list.splice(K.list.indexOf(t),1)}constructor(t,e,s,i,o){super(),this.isDown=void 0,this.vecs=void 0,this.r=void 0,this.typeIO=void 0,this.host=void 0,this.isConnected=void 0,this.in=void 0,this.out=void 0,this.hasError=void 0,this.name=void 0,this.io=void 0,this.name=s,this.title=t.title,this.vec=new D(i,o),this.host=t,this.typeIO=e,this.r=5,this.isDown=!1,this.isConnected=!1,this.hasError=!1,this.in=[],this.out=[],this.vecs=[],this.vecs.push(new D(i,o,0)),this.vecs.push(new D(i,o,0)),this.vecs.push(new D(i,o,0)),this.vecs.push(new D(i,o,0)),K.Add(this)}Remove(){if(0!==this.in.length)for(let t=0;t<this.in.length;++t)this.in[t].RemoveLink(this),console.log("in",this.in);if(0!==this.out.length)for(let t=0;t<this.out.length;++t)this.out[t].RemoveLink(this),console.log("out",this.out);K.Remove(this),C.Remove(this)}Distance(t,e){return Math.sqrt((this.vec.x-t)*(this.vec.x-t)+(this.vec.y-e)*(this.vec.y-e))}IsMouseInside(t,e){return this.Distance(t,e)<=this.r+3}Translate(t){}UpdatePosByHost(t,e){}UpdateWirePos(){if(this.isConnected);else for(let t=0;t<this.vecs.length;++t)this.vecs[t]=this.vec}RemoveLink(t){this.isConnected=!1,0!==this.in.length&&this.in.splice(this.in.indexOf(t),1),0!==this.out.length&&this.out.splice(this.out.indexOf(t),1)}SetLink(t){this.typeIO===S.OUT?(0===this.in.length&&(this.in=[]),this.in.push(t),console.log(t)):(0===this.out.length&&(this.out=[]),this.out.push(t),console.log(t)),this.io=t}UpdateToOtherLinks(t){if(this.typeIO===S.OUT)for(let e=0;e<this.out.length;++e)this.out.length[e].UpdateByinOut(t);this.io&&this.io.UpdateByinOut(t)}UpdateByinOut(t){console.log(this.host.title,t)}MouseDown(t){this.isRender=!0,this.isDown=!0}MouseUp(t){this.isDown=!1;let e=K.FindAtPoint(t.x,t.y);void 0!==e?(e.SetLink(this),e.isConnected=!0,this.isConnected=!0,this.isRender=!0):(this.UpdateWirePos(),this.isRender=!1)}MouseDrag(t){this.isDown&&(this.typeIO===S.IN?this.out=[]:this.in=[],this.vecs[3]=new D(t.x,t.y))}MouseDouble(t){}RenderPost(t){if(0!==this.in.length)for(let e=0;e<this.in.length;++e)this.in[e].vecs[3]=this.vec;else this.vecs[0]=this.vec,this.isRender&&this.RenderWire(t);if(0!==this.out.length)for(let e=0;e<this.out.length;++e)this.out[e].vecs[3]=this.vec;else this.vecs[0]=this.vec,this.isRender&&this.RenderWire(t);t.beginPath(),t.strokeStyle="rgba(255,255,255,0.2)",this.isOver?(t.fillStyle="white",this.typeIO===S.IN?t.arc(this.vec.x,this.vec.y,U.Scale(this.r+3),1.57,4.71):t.arc(this.vec.x,this.vec.y,U.Scale(this.r+3),4.71,1.57)):(t.fillStyle="#333333",this.typeIO===S.IN?t.arc(this.vec.x,this.vec.y,this.r,1.57,4.71):t.arc(this.vec.x,this.vec.y,this.r,4.71,1.57)),t.closePath(),t.shadowColor="rgba(0,0,0,0.3)",t.shadowBlur=2,t.shadowOffsetX=0,t.shadowOffsetY=2,t.fill(),t.restore(),t.stroke()}RenderWire(t){t.save(),t.strokeStyle="#333333",this.isConnected||t.setLineDash([2,2]),t.lineWidth=1;let e=Math.abs(this.vecs[3].y-this.vecs[0].y);this.typeIO===S.OUT?(this.vecs[1]=new D(this.vecs[0].x+e,this.vecs[0].y),this.vecs[2]=new D(this.vecs[3].x-e,this.vecs[3].y)):(this.vecs[1]=new D(this.vecs[0].x-e,this.vecs[0].y),this.vecs[2]=new D(this.vecs[3].x+e,this.vecs[3].y)),t.beginPath(),t.moveTo(this.vecs[0].x,this.vecs[0].y),t.bezierCurveTo(this.vecs[1].x,this.vecs[1].y,this.vecs[2].x,this.vecs[2].y,this.vecs[3].x,this.vecs[3].y),t.stroke(),t.setLineDash([0,0]),t.restore()}}K.list=[];class V{constructor(t,e){this.cBlockBody=void 0,this.cBlockIO=[],this.type=void 0,this.cBlockBody=t,this.type=e}AddNumberParameter(t,e,s,i){this.cBlockIO.push(new K(this.cBlockBody,this.type,t,this.cBlockBody.vec.x,this.cBlockBody.vec.y))}AddGeometryParameter(){}}class H extends A{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"header",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;super(),this.uuid=void 0,this.in=void 0,this.out=void 0,this.heightPanel=void 0,this.vecsPanel=void 0,this.inData=void 0,this.outData=void 0,this.title=t,this.width=100,this.height=50,this.heightPanel=50,this.uuid=b(),this.vec=new D(e,s,0),this.in=[],this.out=[],this.inData=new V(this,S.IN),this.outData=new V(this,S.OUT),this.SetInput(this.inData),this.SetOutPut(this.outData)}AddInput(t){this.in.push(new K(this,S.IN,t,this.vec.x,this.vec.y+.5*this.height)),this.UpdateIOPos()}AddOutput(t){this.out.push(new K(this,S.OUT,t,this.vec.x+this.width,this.vec.y+.5*this.height)),this.UpdateIOPos()}UpdateIOPos(){let t=this.in.length,e=this.out.length,s=0;s=t<e?20*e+1:20*t+1;for(let i=0;i<this.in.length;++i)this.in[i].vec=new D(this.vec.x,this.vec.y+20*i+10),this.in[i].UpdateWirePos();for(let i=0;i<this.out.length;++i)this.out[i].vec=new D(this.vec.x+this.width,this.vec.y+20*i+10),this.out[i].UpdateWirePos();this.height=s}DeepCopy(){}RenderPost(t){this.ComputeBoundary(),N.RoundedRectFill(t,this.style,this.boundarVecs,this.filletR,0,this.isOver,this.isSelected),N.Title(t,this.vec,this.width,this.height,this.title,this.isOver),this.isSelected&&N.RoundedRectFill(t,this.style,this.GetBoundaryPanelVecs(),this.filletR)}Icon(){}SetInput(t){t.AddNumberParameter("x",0,10,5)}SetOutPut(t){}Solver(){}}var _=s(84267);class Y{constructor(t){this.appDrawingBlock=void 0,this.appDrawingBlock=t}MouseEventControl(t){t.CLICKTYPE!==n.LEFT?t.CLICKTYPE!==n.MIDDLE?t.CLICKTYPE!==n.RIGHT?t.CLICKTYPE!==n.DOUBLE?t.CLICKTYPE!==n.MOVE?t.CLICKTYPE!==n.DRAG?t.CLICKTYPE!==n.DOWN?t.CLICKTYPE!==n.UP||this.MouseUpPre(t):this.MouseDownPre(t):this.MouseDragPre(t):this.MouseMovePre(t):this.MouseDoubleClickPre(t):this.MouseRightClickPre(t):this.MouseMiddleClickPre(t):this.MouseLeftClickPre(t)}KeyboardEventControl(t){t.PRESSTYPE===h.DOWN?(8===t.keyCode&&C.RemoveAllCapturedBlock(),this.keydownPre(t)):t.PRESSTYPE===h.UP&&this.keyUpPre(t)}MouseLeftClick(t){}MouseLeftClickPre(t){C.MouseLeft(t),this.MouseLeftClick(t)}MouseMiddleClick(t){}MouseMiddleClickPre(t){this.MouseMiddleClick(t)}MouseRightClick(t){}MouseRightClickPre(t){this.MouseRightClick(t)}MouseDoubleClick(t){}MouseDoubleClickPre(t){C.MouseDouble(t),this.MouseDoubleClick(t)}MouseMove(t){}MouseMovePre(t){C.MouseMove(t),this.MouseMove(t)}MouseDrag(t){}MouseDragPre(t){C.MouseDrag(t),this.MouseDrag(t)}MouseDown(t){}MouseDownPre(t){C.MouseDown(t),this.MouseDown(t)}MouseUp(t){}MouseUpPre(t){C.MouseUp(t),this.MouseUp(t)}keydown(t){}keydownPre(t){(t.hasCtrlKey||t.hasShiftKey)&&this.keydown(t)}keyUp(t){}keyUpPre(t){this.keyUp(t)}GetColorRamp(){new I.BlockColorRemap(100,100).Dummy()}GetColorPalette(){new E.BlockColorPalette(100,100).Dummy()}GetTimeslider(){new w.BlockTimeSlider(100,100).Dummy()}GetFramerate(){new g.GraphChartFramerate(100,100).Dummy()}GetSeries(){new H("Series",100,100).Dummy()}GetChartSummary(){new f.CDescribe(100,100).Dummy()}GetChartHistogram(){new P.CHistogram(100,100).Dummy()}GetChartBar(){new R.CBarChart(100,100).Dummy()}GetChartArea(){new L.CAreaChart(100,100).Dummy()}GetChartLine(){new k.CLineChart(100,100).Dummy()}GetChartPie(){new O.CPieChart(100,100).Dummy()}GetChartScatter(){new T.CScatter(100,100).Dummy()}GetDataFeatureLayer(){(new _.BlockFeatureLayer).Dummy()}}class F{constructor(t){this.appDrawingBlock=void 0,this.t=void 0,this.canvasDynamic=void 0,this.canvasStatic=void 0,this.hostDiv=void 0,this.id=void 0,this.ctxDynamic=void 0,this.ctxStatic=void 0,this.xOff=void 0,this.yOff=void 0,this.xOffCurrent=void 0,this.yOffCurrent=void 0,this.xOffPre=void 0,this.yOffPre=void 0,this.anchor=void 0,this.zoomFactor=void 0,this.zoomFactorPre=void 0,this.zoomFactorCurrent=void 0,this.div3d=void 0,this.smoothingEnabled=!0,this.cBlockRenderer=void 0,this.appDrawingBlock=t,this.t=0,this.xOff=0,this.yOff=0,this.xOffCurrent=0,this.yOffCurrent=0,this.xOffPre=0,this.yOffPre=0,this.anchor=new D(0,0,0),this.Init(this.appDrawingBlock.divHost)}Init(t){this.hostDiv=t,this.canvasDynamic=document.createElement("canvas"),this.canvasDynamic.id="CanvasBlock",this.canvasDynamic.style.zIndex="7",this.canvasDynamic.style.position="absolute",this.canvasDynamic.className="esri-display-object",this.ctxDynamic=this.canvasDynamic.getContext("2d"),this.hostDiv.appendChild(this.canvasDynamic),this.InitPost()}InitWithCustomContext(t){this.InitPost()}InitPost(){window.onresize=t=>{},this.cBlockRenderer=new C(this),this.Start(this.ctxDynamic),this.Draw(this)}Draw(t){this.Update(this.ctxDynamic),this.cBlockRenderer.Render(this.ctxDynamic),requestAnimationFrame((()=>{this.Draw(this)}))}Start(t){}Update(t){t.globalAlpha=.8,t.fillStyle="red",t.fillStyle="blue",t.fillRect(500+this.t,500+this.t,750,500),t.fillStyle="green",t.fillRect(80,80,75+this.t,50),this.t+=.001}Destroy(){console.log("destroy"),C.list=[],this.canvasDynamic.parentNode&&this.canvasDynamic.parentNode.removeChild(this.canvasDynamic)}}class W{static Init(t){W.app=new W(t)}constructor(t){this.divHost=void 0,this.mouseInteraction=void 0,this.keyboardInteraction=void 0,this.activeCommandDrawingBlock=void 0,this.canvasDB=void 0,this.cBlockRenderer=void 0;const e=document.getElementById(t);this.divHost=e,this.canvasDB=new F(this),this.activeCommandDrawingBlock=new Y(this)}Render(t){this.cBlockRenderer.Render(t)}MouseInteraction(t){this.activeCommandDrawingBlock.MouseEventControl(t)}KeyboardInteraction(t){this.activeCommandDrawingBlock.KeyboardEventControl(t)}Destroy(){}destroy(){this.canvasDB.Destroy();try{for(;void 0!==this.divHost&&void 0!==this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}catch(t){}}}W.app=void 0},64814:()=>{},71851:()=>{},840:()=>{},48143:()=>{},34584:()=>{},2275:()=>{},14462:()=>{},31790:()=>{},77144:()=>{},51520:()=>{},84267:()=>{},51114:()=>{}}]);
//# sourceMappingURL=64748.352449d1.chunk.js.map
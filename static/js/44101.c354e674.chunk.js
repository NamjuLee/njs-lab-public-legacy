"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[44101,97795,75975],{83797:(t,e,s)=>{s.d(e,{fK:()=>a,c4:()=>n});var i=s(65812);s(57980);class n{static Playground(){}static ExeScalar(){const t=i.scalar(10);t.print(),t.print(!0);const e=i.tensor([1,2,3]);e.print(),e.print(!0);const s=i.tensor1d([1,2,3]);s.print(),s.print(!0);i.tensor([[1,2],[3,4]]).print();i.tensor2d([[1,2],[3,4]]).print();i.tensor2d([1,2,3,4,5,6],[2,3]).print();const n=new Float32Array(30);for(let i=0;i<30;++i)n[i]=i;i.tensor2d(n,[10,3]).print();const a=new Float32Array(18);for(let i=0;i<18;++i)a[i]=i;i.tensor3d(a,[2,3,3]).print()}static ExeAdd(){const t=i.scalar(5);i.tensor([1,2,3]).mul(t).print();const e=i.tensor([1,2,3,4,5,6],[2,3]);e.print(),e.mul(t).print(),e.add(t).print(),e.div(3).print();const s=new Float32Array(30);for(let i=0;i<30;++i)s[i]=i;const n=i.tensor2d(s,[10,3]);n.print();const a=n;a.print();a.add(n).print();a.sub(t).print()}static ExeOperation(){i.tidy((()=>{const t=i.tensor([1,2,3,4,5,6],[2,3],"float32");t.print();const e=i.tensor([1,2,3,4,5,6],[3,2],"float32");e.print(),t.matMul(e).print();const s=e.matMul(t);s.print();const n=i.scalar(.5);s.mul(n).print();const a=i.tensor1d([80,90,100,80]),o=i.tensor1d([70,70,70,70]);a.add(o).div(2).print(),a.add(o).div(2).abs().print()}))}static Tensor01(){let t=i.tensor([0,1,2,3],[2,2]);t.print(),t=i.tensor([0,1,2,3,4,5,6,7]),t.print(),t=i.tensor([0,1,2,3,4,5,6,7],[2,2,2]),t.print()}static Tensor02(){let t=[];for(let i=0;i<15;++i)t.push(Math.random());let e=[3,5],s=i.tensor(t,e);s.print(),t=[];for(let i=0;i<30;++i)t.push(100*Math.random());e=[2,3,5],s=i.tensor(t,e,"int32"),s.print(),s=i.tensor3d(t,[2,3,5],"int32"),s.print()}static Tensor03(){let t=[];for(let e=0;e<15e4;++e)t.push(Math.random());i.tensor(t,[300,500]).print()}constructor(){}}class a{static async getData(){const t=await fetch("https://storage.googleapis.com/tfjs-tutorials/carsData.json");return(await t.json()).map((t=>({mpg:t.Miles_per_Gallon,horsepower:t.Horsepower}))).filter((t=>null!=t.mpg&&null!=t.horsepower))}static Get_XY_OneHot_TensorFromCSV(t){return i.tidy((()=>{const e=[],s=[];let n=-1;for(const i of t){const t=i.slice(0,i.length-1),a=i[i.length-1];e.push(t),s.push(a),n<a&&(n=a)}return[i.tensor2d(e,[e.length,e[0].length]),i.oneHot(i.tensor1d(s).toInt(),n+1)]}))}static Get_XY_TensorFromCSV(t){return i.tidy((()=>{const e=[],s=[];let n=-1;for(const i of t){const t=i.slice(0,i.length-1),a=i[i.length-1];e.push(t),s.push(a),n<a&&(n=a)}return[i.tensor2d(e,[e.length,e[0].length]),i.tensor1d(s)]}))}static SplitTensorFromXY(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;const i=Math.round(t.shape[0]*s),n=t.shape[0]-i,a=t.slice([0,0],[n,t.shape[1]]),o=t.slice([n,0],[i,t.shape[1]]);return[a,e.slice([0,0],[n,e.shape[1]]),o,e.slice([n,0],[i,e.shape[1]])]}static ConvertToTensors(t,e,s){const n=t.length;if(n!==e.length)throw new Error("data and split have different numbers of examples");const a=Math.round(n*s),o=n-a,r=t[0].length,h=i.tensor2d(t,[n,r]),l=i.oneHot(i.tensor1d(e).toInt(),4),d=h.slice([0,0],[o,r]),c=h.slice([o,0],[a,r]);return[d,l.slice([0,0],[o,4]),c,l.slice([0,0],[a,4])]}static GetRandomNormal(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.55;return i.randomNormal([t],e,s)}static GetRandomNormalTensors(){}static Shuffle(t){for(var e,s,i=t.length;0!==i;)s=Math.floor(Math.random()*i),e=t[i-=1],t[i]=t[s],t[s]=e;return t}static GetSyntheticDataTensor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2,r=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return i.tidy((()=>{const h=t,l=i.scalar(e),d=i.scalar(s),c=i.scalar(n),p=i.scalar(a),v=i.randomUniform([h],-1,1),u=l.mul(v.pow(i.scalar(3))).add(d.mul(v.square())).add(c.mul(v)).add(p).add(i.randomNormal([h],0,o));if(r){const t=u.min(),e=u.max().sub(t);return{x:v,yNomalized:u.sub(t).div(e)}}return[v,u]}))}static GetSyntheticData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-.2,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-.66,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-.1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2.8,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2,r=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return i.tidy((()=>{const i=this.GetSyntheticDataTensor(t,e,s,n,a,o,r);return{xx:i[0].dataSync(),yy:i[1].dataSync()}}))}static GetIrisData(){return[[5.1,3.5,1.4,.2,0],[4.9,3,1.4,.2,0],[4.7,3.2,1.3,.2,0],[4.6,3.1,1.5,.2,0],[5,3.6,1.4,.2,0],[5.4,3.9,1.7,.4,0],[4.6,3.4,1.4,.3,0],[5,3.4,1.5,.2,0],[4.4,2.9,1.4,.2,0],[4.9,3.1,1.5,.1,0],[5.4,3.7,1.5,.2,0],[4.8,3.4,1.6,.2,0],[4.8,3,1.4,.1,0],[4.3,3,1.1,.1,0],[5.8,4,1.2,.2,0],[5.7,4.4,1.5,.4,0],[5.4,3.9,1.3,.4,0],[5.1,3.5,1.4,.3,0],[5.7,3.8,1.7,.3,0],[5.1,3.8,1.5,.3,0],[5.4,3.4,1.7,.2,0],[5.1,3.7,1.5,.4,0],[4.6,3.6,1,.2,0],[5.1,3.3,1.7,.5,0],[4.8,3.4,1.9,.2,0],[5,3,1.6,.2,0],[5,3.4,1.6,.4,0],[5.2,3.5,1.5,.2,0],[5.2,3.4,1.4,.2,0],[4.7,3.2,1.6,.2,0],[4.8,3.1,1.6,.2,0],[5.4,3.4,1.5,.4,0],[5.2,4.1,1.5,.1,0],[5.5,4.2,1.4,.2,0],[4.9,3.1,1.5,.1,0],[5,3.2,1.2,.2,0],[5.5,3.5,1.3,.2,0],[4.9,3.1,1.5,.1,0],[4.4,3,1.3,.2,0],[5.1,3.4,1.5,.2,0],[5,3.5,1.3,.3,0],[4.5,2.3,1.3,.3,0],[4.4,3.2,1.3,.2,0],[5,3.5,1.6,.6,0],[5.1,3.8,1.9,.4,0],[4.8,3,1.4,.3,0],[5.1,3.8,1.6,.2,0],[4.6,3.2,1.4,.2,0],[5.3,3.7,1.5,.2,0],[5,3.3,1.4,.2,0],[7,3.2,4.7,1.4,1],[6.4,3.2,4.5,1.5,1],[6.9,3.1,4.9,1.5,1],[5.5,2.3,4,1.3,1],[6.5,2.8,4.6,1.5,1],[5.7,2.8,4.5,1.3,1],[6.3,3.3,4.7,1.6,1],[4.9,2.4,3.3,1,1],[6.6,2.9,4.6,1.3,1],[5.2,2.7,3.9,1.4,1],[5,2,3.5,1,1],[5.9,3,4.2,1.5,1],[6,2.2,4,1,1],[6.1,2.9,4.7,1.4,1],[5.6,2.9,3.6,1.3,1],[6.7,3.1,4.4,1.4,1],[5.6,3,4.5,1.5,1],[5.8,2.7,4.1,1,1],[6.2,2.2,4.5,1.5,1],[5.6,2.5,3.9,1.1,1],[5.9,3.2,4.8,1.8,1],[6.1,2.8,4,1.3,1],[6.3,2.5,4.9,1.5,1],[6.1,2.8,4.7,1.2,1],[6.4,2.9,4.3,1.3,1],[6.6,3,4.4,1.4,1],[6.8,2.8,4.8,1.4,1],[6.7,3,5,1.7,1],[6,2.9,4.5,1.5,1],[5.7,2.6,3.5,1,1],[5.5,2.4,3.8,1.1,1],[5.5,2.4,3.7,1,1],[5.8,2.7,3.9,1.2,1],[6,2.7,5.1,1.6,1],[5.4,3,4.5,1.5,1],[6,3.4,4.5,1.6,1],[6.7,3.1,4.7,1.5,1],[6.3,2.3,4.4,1.3,1],[5.6,3,4.1,1.3,1],[5.5,2.5,4,1.3,1],[5.5,2.6,4.4,1.2,1],[6.1,3,4.6,1.4,1],[5.8,2.6,4,1.2,1],[5,2.3,3.3,1,1],[5.6,2.7,4.2,1.3,1],[5.7,3,4.2,1.2,1],[5.7,2.9,4.2,1.3,1],[6.2,2.9,4.3,1.3,1],[5.1,2.5,3,1.1,1],[5.7,2.8,4.1,1.3,1],[6.3,3.3,6,2.5,2],[5.8,2.7,5.1,1.9,2],[7.1,3,5.9,2.1,2],[6.3,2.9,5.6,1.8,2],[6.5,3,5.8,2.2,2],[7.6,3,6.6,2.1,2],[4.9,2.5,4.5,1.7,2],[7.3,2.9,6.3,1.8,2],[6.7,2.5,5.8,1.8,2],[7.2,3.6,6.1,2.5,2],[6.5,3.2,5.1,2,2],[6.4,2.7,5.3,1.9,2],[6.8,3,5.5,2.1,2],[5.7,2.5,5,2,2],[5.8,2.8,5.1,2.4,2],[6.4,3.2,5.3,2.3,2],[6.5,3,5.5,1.8,2],[7.7,3.8,6.7,2.2,2],[7.7,2.6,6.9,2.3,2],[6,2.2,5,1.5,2],[6.9,3.2,5.7,2.3,2],[5.6,2.8,4.9,2,2],[7.7,2.8,6.7,2,2],[6.3,2.7,4.9,1.8,2],[6.7,3.3,5.7,2.1,2],[7.2,3.2,6,1.8,2],[6.2,2.8,4.8,1.8,2],[6.1,3,4.9,1.8,2],[6.4,2.8,5.6,2.1,2],[7.2,3,5.8,1.6,2],[7.4,2.8,6.1,1.9,2],[7.9,3.8,6.4,2,2],[6.4,2.8,5.6,2.2,2],[6.3,2.8,5.1,1.5,2],[6.1,2.6,5.6,1.4,2],[7.7,3,6.1,2.3,2],[6.3,3.4,5.6,2.4,2],[6.4,3.1,5.5,1.8,2],[6,3,4.8,1.8,2],[6.9,3.1,5.4,2.1,2],[6.7,3.1,5.6,2.4,2],[6.9,3.1,5.1,2.3,2],[5.8,2.7,5.1,1.9,2],[6.8,3.2,5.9,2.3,2],[6.7,3.3,5.7,2.5,2],[6.7,3,5.2,2.3,2],[6.3,2.5,5,1.9,2],[6.5,3,5.2,2,2],[6.2,3.4,5.4,2.3,2],[5.9,3,5.1,1.8,2]]}constructor(){}}},97795:(t,e,s)=>{s.r(e),s.d(e,{DefinitionIndeCanvasCore:()=>n});var i=s(12850);class n{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;this.scene=void 0,this.indeCanvas=void 0,this.mOffX=-12,this.mOffY=-12,this.scene=t,this.scene.definitions.push(this),this.InitIndeCanvas(e,s)}InitIndeCanvas(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:650,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;this.scene.implementation.app.needUI?this.indeCanvas=new i.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,50,50,t,e,!0):this.indeCanvas=new i.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,1,-25,t,e,!0),this.indeCanvas.title="TF Env",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=t=>this.RenderIndependentCanvas(t)}get width(){return this.indeCanvas.canvas.width}get height(){return this.indeCanvas.canvas.height}Init(t){}RenderIndependentCanvas(t){}MouseMove(t,e){}MouseMovePre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseMove(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDown(t,e){}MouseDownPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDown(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseUp(t,e){}MouseUpPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseUp(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDrag(t,e){}MouseDragPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDrag(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseLeftClick(t,e){}MouseLeftClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseLeftClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseMiddleClick(t,e){}MouseMiddleClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseMiddleClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseRightClick(t,e){}MouseRightClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseRightClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDoubleClick(t,e){}MouseDoubleClickPre(t,e){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseDoubleClick(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseWheel(t,e,s){}MouseWheelPre(t,e,s){this.indeCanvas.IsMouseInsidePanel(t,e)&&this.MouseWheel(t-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,s)}}},44101:(t,e,s)=>{s.r(e),s.d(e,{TFModel01HorsepowerAndMilesPerGallon:()=>h,convertToTensor:()=>d,createModel:()=>l});var i=s(65812),n=s(30386),a=s(97795),o=s(75975),r=s(83797);class h extends a.DefinitionIndeCanvasCore{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}Init(){r.fK.getData().then((t=>{this.train(t)}))}async train(t){const e=d(t),{inputs:s,labels:a}=e,o=l();n.show.modelSummary({name:"Model Summary"},o),await async function(t,e,s){t.compile({optimizer:i.train.adam(),loss:i.losses.meanSquaredError,metrics:["mse"]});const a=32,o=50;return await t.fit(e,s,{batchSize:a,epochs:o,shuffle:!0,callbacks:n.show.fitCallbacks({name:"Training Performance"},["loss","mse"],{height:200,callbacks:["onEpochEnd"]})})}(o,s,a),function(t,e,s){const{inputMax:a,inputMin:o,labelMin:r,labelMax:h}=s,[l,d]=i.tidy((()=>{const e=i.linspace(0,1,100),s=t.predict(e.reshape([100,1])),n=e.mul(a.sub(o)).add(o),l=s.mul(h.sub(r)).add(r);return[n.dataSync(),l.dataSync()]})),c=Array.from(l).map(((t,e)=>({x:t,y:d[e]}))),p=e.map((t=>({x:t.horsepower,y:t.mpg})));n.render.scatterplot({name:"Model Predictions vs Original Data"},{values:[p,c],series:["original","predicted"]},{xLabel:"Horsepower",yLabel:"MPG",height:300})}(o,t,e)}MouseDown(t,e){const s=new o.NVector3(this.MapX(t),this.MapY(e));for(let i=0;i<this.vs.length;++i)if(o.NVector3.Distance(s,this.vs[i])<.05)return void(this.selVec=this.vs[i]);this.vs.push(new o.NVector3(this.MapX(t),this.MapY(e)))}MouseDoubleClick(){}MouseMove(t,e){let s;const i=new o.NVector3(this.MapX(t),this.MapY(e));for(let n=0;n<this.vs.length;++n){o.NVector3.Distance(i,this.vs[n])<.05&&(s=this.vs[n])}this.selVec=s||void 0}MouseDrag(t,e){this.selVec&&(this.selVec.x=this.MapX(t),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(t){return o.MathUtility.Remap(t,0,this.width,-1,1)}MapY(t){return o.MathUtility.Remap(t,0,this.height,1,-1)}GridLine(t){t.strokeStyle="#555555";const e=this.width/20-1,s=this.height/20-1;for(let i=0;i<20;i+=1){t.lineWidth=10===i?3:1;let n=e*i,a=0,o=n,r=this.height;t.beginPath(),t.moveTo(n,a),t.lineTo(o,r),t.stroke(),n=0,a=s*i,o=this.width,r=a,t.beginPath(),t.moveTo(n,a),t.lineTo(o,r),t.stroke()}}RenderIndependentCanvas(t){if(t.fillStyle="#000000",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1){const e=[],s=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),s.push(this.vs[t].y);this.RenderLine(t)}t.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)t.beginPath(),t.arc(o.MathUtility.Remap(this.vs[e].x,-1,1,0,this.width),o.MathUtility.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),o.MathUtility.Remap(this.selVec.x,-1,1,0,this.width),o.MathUtility.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(t){const e=[];for(let s=-1;s<=1;s+=.05)e.push(s)}}const l=()=>{const t=i.sequential();return t.add(i.layers.dense({inputShape:[1],units:16,useBias:!0})),t.add(i.layers.dense({units:1,useBias:!0})),t},d=t=>i.tidy((()=>{i.util.shuffle(t);const e=t.map((t=>t.horsepower)),s=t.map((t=>t.mpg)),n=i.tensor2d(e,[e.length,1]),a=i.tensor2d(s,[s.length,1]),o=n.max(),r=n.min(),h=a.max(),l=a.min();return{inputs:n.sub(r).div(o.sub(r)),labels:a.sub(l).div(h.sub(l)),inputMax:o,inputMin:r,labelMax:h,labelMin:l}}))},75975:(t,e,s)=>{s.r(e),s.d(e,{ACTION_TYPE:()=>i.KW,ACTIVECOMMAND_MODE:()=>i.AG,ActiveCommandBase:()=>i.wm,AppAccessibility:()=>i.Wv,AppProperties:()=>i.gj,ArrayUtility:()=>i.R3,BrowserUtility:()=>i.R7,CLICK_TYPE:()=>i.uh,CLOGTYPE:()=>i.g6,COMPILE_MODE:()=>i.Iq,ColorUtility:()=>i.mK,Deltatime:()=>i.gk,EVENT_LISTENER_TYPE:()=>i.GZ,FHTYPE:()=>i.OH,GTYPE:()=>i.OB,GeometryBase:()=>i.bx,INTERACTION_MODE:()=>i.WU,LINECAP:()=>i.EQ,MathUtility:()=>i.$H,NDataUtility:()=>i.eu,NUI:()=>i.Fc,NVector3:()=>i.h9,NumericalMotion:()=>i.aX,OPTIMIZER:()=>i.sg,PRESS_TYPE:()=>i.dc,TEXTALIGN:()=>i.mH,TEXTBOX:()=>i.SE,TOUCH_TYPE:()=>i.KV,UNIT:()=>i.iI});var i=s(458)}}]);
//# sourceMappingURL=44101.c354e674.chunk.js.map
"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[86771],{86771:(t,s,i)=>{i.r(s),i.d(s,{AppRigidBodyDynamics:()=>l,Solution:()=>v});class e{constructor(t){this.canvas=void 0,this.host=void 0,this.ctx=void 0,this.t=0,this.InitCanvas(t)}InitCanvas(t){const s=document.createElement("canvas"),i=document.getElementById(t);if(i&&(i.appendChild(s),this.host=i),s){this.canvas=s,this.canvas.width=400,this.canvas.height=400;const t=this.canvas.getContext("2d");t&&(this.ctx=t,this.Init())}}Init(){this.EventBind(),this.Loop()}EventBind(){this.canvas.onmousedown=t=>{this.MouseDown(t)},this.canvas.onmouseup=t=>{this.MouseUp(t)},this.canvas.onmousemove=t=>{this.MouseMove(t)},window.onresize=t=>this.Resize(t)}Resize(t){this.canvas.width=this.host.clientWidth,this.canvas.height=this.host.clientHeight}Loop(){requestAnimationFrame((()=>{this.Loop()})),this.ctx.clearRect(-10,-10,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(-500,-500,1e3,1e3),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)}Render(t){}MouseDown(t){}MouseUp(t){}MouseMove(t){}}class h{constructor(t){this.canvasCore=void 0,this.pos=[],this.col=[],this.canvasCore=t;for(let s=0;s<300;++s){const t=Math.random()*this.canvasCore.canvas.height;this.pos.push([Math.random()*this.canvasCore.canvas.width,t,t,Math.random()]),this.col.push([100+250*Math.random(),0,0,Math.random()])}}Render(t){t.fillStyle="#eeeeee",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.fill();for(let s=0;s<this.pos.length;++s)this.pos[s][1]+=7*this.pos[s][3],this.pos[s][1]>t.canvas.height&&(this.pos[s][1]=0),t.fillStyle="rgba(".concat(this.col[s][0],",").concat(this.col[s][1],",").concat(this.col[s][2],", ").concat(this.col[s][3],")"),t.beginPath(),t.arc(this.pos[s][0],this.pos[s][1],10,0,2*Math.PI),t.closePath(),t.fill()}MouseDown(t){}MouseUp(t){}MouseMove(t){}MouseDrag(t){}}i(59008);var n=i(458);class o{constructor(t){this.nodes=[],this.edges=[];this.nodes.push(new d(new n.h9(t.x,t.y,t.z),n.h9.Origin(),1)),this.nodes.push(new d(new n.h9(t.x-2,t.y+2,t.z),n.h9.Origin(),1)),this.nodes.push(new d(new n.h9(t.x+2,t.y+2,t.z),n.h9.Origin(),1)),this.nodes.push(new d(new n.h9(t.x+2,t.y-2,t.z),n.h9.Origin(),1)),this.nodes.push(new d(new n.h9(t.x-2,t.y-2,t.z),n.h9.Origin(),1)),this.edges.push(new a(this.nodes[1],this.nodes[2])),this.edges.push(new a(this.nodes[2],this.nodes[3])),this.edges.push(new a(this.nodes[3],this.nodes[4])),this.edges.push(new a(this.nodes[4],this.nodes[1])),this.edges.push(new a(this.nodes[0],this.nodes[1])),this.edges.push(new a(this.nodes[0],this.nodes[2])),this.edges.push(new a(this.nodes[0],this.nodes[3])),this.edges.push(new a(this.nodes[0],this.nodes[4]))}AddNode(t,s,i){const e=new d(t,s,i);return this.nodes.push(e),e}AddEdge(t,s){const i=new a(t,s);return this.edges.push(i),i}UpdateCollision(t){for(let s=0;s<t.length;++s)t[s]}Move(t,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-.3,e=arguments.length>3?arguments[3]:void 0;for(let h=0;h<this.nodes.length;++h){const o=this.nodes[h];o.f.x*=i,o.f.y*=i;const a=new n.h9(t.x-o.v.x,t.y-o.v.y,t.z-o.v.z),d=a.Length();a.Unitize(),o.f.x=a.x*Math.exp(-.001*d*d)*.1,o.f.y=a.y*Math.exp(-.001*d*d)*.1,o.Move(e,s)}for(let h=0;h<this.edges.length;++h)this.edges[h].ApplySpringForce();for(let h=0;h<this.nodes.length;++h)this.nodes[h].Move(e,s)}Render(t){t.lineWidth=.2;for(let s=0;s<4;++s)t.beginPath(),t.moveTo(this.edges[s].n0.v.x,this.edges[s].n0.v.y),t.lineTo(this.edges[s].n1.v.x,this.edges[s].n1.v.y),t.stroke();for(let s=0;s<this.nodes.length;++s){const i=this.nodes[s];t.beginPath(),t.arc(i.v.x,i.v.y,.2*i.m,0,2*Math.PI),t.closePath(),t.stroke()}}}class a{constructor(t,s){this.n0=void 0,this.n1=void 0,this.targetLength=1.05,this.SpringConstant=.8,this.n0=t,this.n1=s,this.targetLength=this.n0.v.Distance(this.n1.v)}ApplySpringForce(){const t=new n.h9(this.n1.v.x-this.n0.v.x,this.n1.v.y-this.n0.v.y,this.n1.v.z-this.n0.v.z),s=t.Length();t.Unitize(),this.n0.f.x+=t.x*(s-this.targetLength)*this.SpringConstant,this.n0.f.y+=t.y*(s-this.targetLength)*this.SpringConstant,this.n1.f.x-=t.x*(s-this.targetLength)*this.SpringConstant,this.n1.f.y-=t.y*(s-this.targetLength)*this.SpringConstant}}class d{constructor(t,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.fixed=!1,this.v=void 0,this.u=void 0,this.f=void 0,this.m=1,this.v=t,this.u=s,this.f=n.h9.Origin(),this.m=i}Move(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.99;this.fixed||(this.u.x*=s,this.u.y*=s,this.u.x+=this.f.x*(t/this.m),this.u.y+=this.f.y*(t/this.m),this.v.x+=this.u.x*t,this.v.y+=this.u.y*t,this.v.y<0&&(this.v.y=0,this.u.y<0&&(this.u.y=-this.u.y)))}}class c{constructor(){this.particles=[],this.t=.6,this.m=new n.h9(10,10,10),this.boundingBox=void 0,this.particles.push(new o(new n.h9(0,0,0))),this.particles.push(new o(new n.h9(10,10,0)))}Render(t){this.boundingBox=t.canvas.getBoundingClientRect();for(let s=0;s<this.particles.length;++s)this.particles[s].Move(this.m,.9,-1.5,this.t),this.particles[s].Render(t);t.fillStyle="#ff0000",t.beginPath(),t.arc(this.m.x,this.m.y,.5,0,2*Math.PI),t.closePath(),t.fill()}MouseDown(t){}MouseUp(t){}MouseMove(t){this.m.x=t.x-this.boundingBox.left,this.m.y=t.y-this.boundingBox.top}}class r{constructor(){this.particleSystemC=void 0,this.particleSystemC=new c}Render(t){this.particleSystemC&&this.particleSystemC.Render(t)}MouseDown(t){this.particleSystemC&&this.particleSystemC.MouseDown(t)}MouseUp(t){this.particleSystemC&&this.particleSystemC.MouseUp(t)}MouseMove(t){this.particleSystemC&&this.particleSystemC.MouseMove(t)}}class l{static Init(t){new l(t).Dummy()}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SandBox";this.canvasCore=void 0,this.core=void 0,this.implementation=void 0,this.canvasCore=new e(t),this.core=new h(this.canvasCore),this.implementation=new r,this.BindEvent(),this.BindRenderer()}Dummy(){}BindEvent(){this.canvasCore.MouseDown=t=>this.implementation.MouseDown(t),this.canvasCore.MouseMove=t=>this.implementation.MouseMove(t),this.canvasCore.MouseUp=t=>this.implementation.MouseUp(t)}BindRenderer(){this.canvasCore.Render=t=>this.implementation.Render(t)}}class v{constructor(t){this.divHost=void 0,this.divHost=document.getElementById(t),l.Init(t)}destroy(){if(this.divHost)try{for(;this.divHost.firstChild;)this.divHost.removeChild(this.divHost.firstChild)}catch(t){console.error("Error in destroy method:",t)}else console.warn("divHost is undefined in destroy method")}}}}]);
//# sourceMappingURL=86771.9ee39e24.chunk.js.map
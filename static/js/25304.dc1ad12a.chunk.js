"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[25304,46710,45338,59318],{46710:(t,i,s)=>{s.r(i),s.d(i,{Matrix4:()=>r});class r{static identity(){let t=new Float32Array(16);return t[0]=t[5]=t[10]=t[15]=1,t}static perspective(t,i,s,r,a){let e=1/Math.tan(i/2),o=1/(r-a);t[0]=e/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*o,t[15]=0}static ortho(t,i,s,r,a,e,o){let h=1/(i-s),n=1/(r-a),m=1/(e-o);t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*m,t[11]=0,t[12]=(i+s)*h,t[13]=(a+r)*n,t[14]=(o+e)*m,t[15]=1}static transpose(t,i){if(t===i){let s=i[1],r=i[2],a=i[3],e=i[6],o=i[7],h=i[11];t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=s,t[6]=i[9],t[7]=i[13],t[8]=r,t[9]=e,t[11]=i[14],t[12]=a,t[13]=o,t[14]=h}else t[0]=i[0],t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=i[1],t[5]=i[5],t[6]=i[9],t[7]=i[13],t[8]=i[2],t[9]=i[6],t[10]=i[10],t[11]=i[14],t[12]=i[3],t[13]=i[7],t[14]=i[11],t[15]=i[15];return t}static normalMat3(t,i){let s=i[0],r=i[1],a=i[2],e=i[3],o=i[4],h=i[5],n=i[6],m=i[7],d=i[8],v=i[9],l=i[10],c=i[11],u=i[12],f=i[13],w=i[14],p=i[15],M=s*h-r*o,x=s*n-a*o,g=s*m-e*o,y=r*n-a*h,V=r*m-e*h,R=a*m-e*n,X=d*f-v*u,Y=d*w-l*u,z=d*p-c*u,E=v*w-l*f,A=v*p-c*f,F=l*p-c*w,T=M*F-x*A+g*E+y*z-V*Y+R*X;return T?(T=1/T,t[0]=(h*F-n*A+m*E)*T,t[1]=(n*z-o*F-m*Y)*T,t[2]=(o*A-h*z+m*X)*T,t[3]=(a*A-r*F-e*E)*T,t[4]=(s*F-a*z+e*Y)*T,t[5]=(r*z-s*A-e*X)*T,t[6]=(f*R-w*V+p*y)*T,t[7]=(w*g-u*R-p*x)*T,t[8]=(u*V-f*g+p*M)*T,t):null}static multiplyVector(t,i){let s=i[0],r=i[1],a=i[2],e=i[3],o=t[0],h=t[1],n=t[2],m=t[3],d=t[4],v=t[5],l=t[6],c=t[7],u=t[8],f=t[9],w=t[10],p=t[11];return[s*o+r*d+a*u+e*t[12],s*h+r*v+a*f+e*t[13],s*n+r*l+a*w+e*t[14],s*m+r*c+a*p+e*t[15]]}static transformVec4(t,i,s){return t[0]=s[0]*i[0]+s[4]*i[1]+s[8]*i[2]+s[12]*i[3],t[1]=s[1]*i[0]+s[5]*i[1]+s[9]*i[2]+s[13]*i[3],t[2]=s[2]*i[0]+s[6]*i[1]+s[10]*i[2]+s[14]*i[3],t[3]=s[3]*i[0]+s[7]*i[1]+s[11]*i[2]+s[15]*i[3],t}static mult(t,i,s){let r=i[0],a=i[1],e=i[2],o=i[3],h=i[4],n=i[5],m=i[6],d=i[7],v=i[8],l=i[9],c=i[10],u=i[11],f=i[12],w=i[13],p=i[14],M=i[15],x=s[0],g=s[1],y=s[2],V=s[3];return t[0]=x*r+g*h+y*v+V*f,t[1]=x*a+g*n+y*l+V*w,t[2]=x*e+g*m+y*c+V*p,t[3]=x*o+g*d+y*u+V*M,x=s[4],g=s[5],y=s[6],V=s[7],t[4]=x*r+g*h+y*v+V*f,t[5]=x*a+g*n+y*l+V*w,t[6]=x*e+g*m+y*c+V*p,t[7]=x*o+g*d+y*u+V*M,x=s[8],g=s[9],y=s[10],V=s[11],t[8]=x*r+g*h+y*v+V*f,t[9]=x*a+g*n+y*l+V*w,t[10]=x*e+g*m+y*c+V*p,t[11]=x*o+g*d+y*u+V*M,x=s[12],g=s[13],y=s[14],V=s[15],t[12]=x*r+g*h+y*v+V*f,t[13]=x*a+g*n+y*l+V*w,t[14]=x*e+g*m+y*c+V*p,t[15]=x*o+g*d+y*u+V*M,t}static scale(t,i,s,r){return t[0]*=i,t[1]*=i,t[2]*=i,t[3]*=i,t[4]*=s,t[5]*=s,t[6]*=s,t[7]*=s,t[8]*=r,t[9]*=r,t[10]*=r,t[11]*=r,t}static rotateY(t,i){let s=Math.sin(i),r=Math.cos(i),a=t[0],e=t[1],o=t[2],h=t[3],n=t[8],m=t[9],d=t[10],v=t[11];return t[0]=a*r-n*s,t[1]=e*r-m*s,t[2]=o*r-d*s,t[3]=h*r-v*s,t[8]=a*s+n*r,t[9]=e*s+m*r,t[10]=o*s+d*r,t[11]=h*s+v*r,t}static rotateX(t,i){let s=Math.sin(i),r=Math.cos(i),a=t[4],e=t[5],o=t[6],h=t[7],n=t[8],m=t[9],d=t[10],v=t[11];return t[4]=a*r+n*s,t[5]=e*r+m*s,t[6]=o*r+d*s,t[7]=h*r+v*s,t[8]=n*r-a*s,t[9]=m*r-e*s,t[10]=d*r-o*s,t[11]=v*r-h*s,t}static rotateZ(t,i){let s=Math.sin(i),r=Math.cos(i),a=t[0],e=t[1],o=t[2],h=t[3],n=t[4],m=t[5],d=t[6],v=t[7];return t[0]=a*r+n*s,t[1]=e*r+m*s,t[2]=o*r+d*s,t[3]=h*r+v*s,t[4]=n*r-a*s,t[5]=m*r-e*s,t[6]=d*r-o*s,t[7]=v*r-h*s,t}static rotate(t,i,s){let r,a,e,o,h,n,m,d,v,l,c,u,f,w,p,M,x,g,y,V,R,X,Y,z,E=s[0],A=s[1],F=s[2],T=Math.sqrt(E*E+A*A+F*F);return Math.abs(T)<1e-6?null:(T=1/T,E*=T,A*=T,F*=T,r=Math.sin(i),a=Math.cos(i),e=1-a,o=t[0],h=t[1],n=t[2],m=t[3],d=t[4],v=t[5],l=t[6],c=t[7],u=t[8],f=t[9],w=t[10],p=t[11],M=E*E*e+a,x=A*E*e+F*r,g=F*E*e-A*r,y=E*A*e-F*r,V=A*A*e+a,R=F*A*e+E*r,X=E*F*e+A*r,Y=A*F*e-E*r,z=F*F*e+a,t[0]=o*M+d*x+u*g,t[1]=h*M+v*x+f*g,t[2]=n*M+l*x+w*g,t[3]=m*M+c*x+p*g,t[4]=o*y+d*V+u*R,t[5]=h*y+v*V+f*R,t[6]=n*y+l*V+w*R,t[7]=m*y+c*V+p*R,t[8]=o*X+d*Y+u*z,t[9]=h*X+v*Y+f*z,t[10]=n*X+l*Y+w*z,t[11]=m*X+c*Y+p*z,t)}static invert(t,i){void 0===i&&(i=t);let s=i[0],r=i[1],a=i[2],e=i[3],o=i[4],h=i[5],n=i[6],m=i[7],d=i[8],v=i[9],l=i[10],c=i[11],u=i[12],f=i[13],w=i[14],p=i[15],M=s*h-r*o,x=s*n-a*o,g=s*m-e*o,y=r*n-a*h,V=r*m-e*h,R=a*m-e*n,X=d*f-v*u,Y=d*w-l*u,z=d*p-c*u,E=v*w-l*f,A=v*p-c*f,F=l*p-c*w,T=M*F-x*A+g*E+y*z-V*Y+R*X;return!!T&&(T=1/T,t[0]=(h*F-n*A+m*E)*T,t[1]=(a*A-r*F-e*E)*T,t[2]=(f*R-w*V+p*y)*T,t[3]=(l*V-v*R-c*y)*T,t[4]=(n*z-o*F-m*Y)*T,t[5]=(s*F-a*z+e*Y)*T,t[6]=(w*g-u*R-p*x)*T,t[7]=(d*R-l*g+c*x)*T,t[8]=(o*A-h*z+m*X)*T,t[9]=(r*z-s*A-e*X)*T,t[10]=(u*V-f*g+p*M)*T,t[11]=(v*g-d*V-c*M)*T,t[12]=(h*Y-o*E-n*X)*T,t[13]=(s*E-r*Y+a*X)*T,t[14]=(f*x-u*y-w*M)*T,t[15]=(d*y-v*x+l*M)*T,!0)}static translate(t,i,s,r){t[12]=t[0]*i+t[4]*s+t[8]*r+t[12],t[13]=t[1]*i+t[5]*s+t[9]*r+t[13],t[14]=t[2]*i+t[6]*s+t[10]*r+t[14],t[15]=t[3]*i+t[7]*s+t[11]*r+t[15]}constructor(){this.raw=void 0,this.raw=r.identity()}vtranslate(t){return r.translate(this.raw,t.x,t.y,t.z),this}translate(t,i,s){return r.translate(this.raw,t,i,s),this}rotateY(t){return r.rotateY(this.raw,t),this}rotateX(t){return r.rotateX(this.raw,t),this}rotateZ(t){return r.rotateZ(this.raw,t),this}vscale(t){return r.scale(this.raw,t.x,t.y,t.z),this}scale(t,i,s){return r.scale(this.raw,t,i,s),this}invert(){return r.invert(this.raw),this}resetRotation(){for(let t=0;t<this.raw.length;t++)t>=12&&t<=14||(this.raw[t]=t%5===0?1:0);return this}reset(){for(let t=0;t<this.raw.length;t++)this.raw[t]=t%5===0?1:0;return this}}},45338:(t,i,s)=>{s.r(i),s.d(i,{Vector3:()=>r});class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=i,this.z=s}magnitude(t){if(void 0===t)return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);let i=t.x-this.x,s=t.y-this.y,r=t.y-this.z;return Math.sqrt(i*i+s*s+r*r)}normalize(){let t=this.magnitude();return this.x/=t,this.y/=t,this.z/=t,this}set(t,i,s){return this.x=t,this.y=i,this.z=s,this}multiScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}getArray(){return[this.x,this.y,this.z]}getFloatArray(){return new Float32Array([this.x,this.y,this.z])}clone(){return new r(this.x,this.y,this.z)}}},25304:(t,i,s)=>{s.r(i),s.d(i,{CAMERA_MODE:()=>e,Camera:()=>o,CameraController:()=>h});var r=s(46710),a=s(59318);let e;!function(t){t[t.FREE=0]="FREE",t[t.ORBIT=1]="ORBIT"}(e||(e={}));class o{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:45,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.projectionMatrix=void 0,this.viewMatrix=void 0,this.transform=void 0,this.mode=void 0,this.projectionMatrix=new Float32Array(16);var h=t.canvas.width/t.canvas.height;r.Matrix4.perspective(this.projectionMatrix,i||45,h,s||.1,o||100),this.transform=new a.Transform,this.viewMatrix=new Float32Array(16),this.mode=e.ORBIT}panX(t){this.mode!==e.ORBIT&&(this.updateViewMatrix(),this.transform.position.x+=this.transform.right[0]*t,this.transform.position.y+=this.transform.right[1]*t,this.transform.position.z+=this.transform.right[2]*t)}panY(t){this.updateViewMatrix(),this.transform.position.y+=this.transform.up[1]*t,this.mode!==e.ORBIT&&(this.transform.position.x+=this.transform.up[0]*t,this.transform.position.z+=this.transform.up[2]*t)}panZ(t){this.updateViewMatrix(),this.mode===e.ORBIT?this.transform.position.z+=t:(this.transform.position.x+=this.transform.forward[0]*t,this.transform.position.y+=this.transform.forward[1]*t,this.transform.position.z+=this.transform.forward[2]*t)}updateViewMatrix(){return this.mode===e.FREE?this.transform.matView.reset().vtranslate(this.transform.position).rotateX(this.transform.rotation.x*a.Transform.deg2Rad).rotateY(this.transform.rotation.y*a.Transform.deg2Rad):this.transform.matView.reset().rotateX(this.transform.rotation.x*a.Transform.deg2Rad).rotateY(this.transform.rotation.y*a.Transform.deg2Rad).vtranslate(this.transform.position),this.transform.updateDirection(),r.Matrix4.invert(this.viewMatrix,this.transform.matView.raw),this.viewMatrix}}class h{constructor(t,i){this.canvas=void 0,this.camera=void 0,this.rotateRate=void 0,this.panRate=void 0,this.zoomRate=void 0,this.offsetX=void 0,this.offsetY=void 0,this.initX=void 0,this.initY=void 0,this.prevX=void 0,this.prevY=void 0,this.onUpHandler=void 0,this.onMoveHandler=void 0,this.canvas=t.canvas,this.camera=i,this.rotateRate=-300,this.panRate=5,this.zoomRate=200,this.offsetX=10,this.offsetY=10,this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.onUpHandler=t=>this.onMouseUp(t),this.onMoveHandler=t=>{this.onMouseMove(t)},this.canvas.addEventListener("mousedown",(t=>{this.onMouseDown(t)})),this.canvas.addEventListener("mousewheel",(t=>{this.onMouseWheel(t)}))}getMouseVec2(t){return{x:t.pageX-this.offsetX,y:t.pageY-this.offsetY}}onMouseDown(t){this.initX=this.prevX=t.pageX-this.offsetX,this.initY=this.prevY=t.pageY-this.offsetY,this.canvas.addEventListener("mouseup",this.onUpHandler),this.canvas.addEventListener("mousemove",this.onMoveHandler)}onMouseUp(t){this.canvas.removeEventListener("mouseup",this.onUpHandler),this.canvas.removeEventListener("mousemove",this.onMoveHandler)}onMouseWheel(t){var i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));this.camera.panZ(i*(this.zoomRate/this.canvas.height))}onMouseMove(t){var i=t.pageX-this.offsetX,s=t.pageY-this.offsetY,r=i-this.prevX,a=s-this.prevY;t.shiftKey?(this.camera.panX(-r*(this.panRate/this.canvas.width)),this.camera.panY(a*(this.panRate/this.canvas.height))):(this.camera.transform.rotation.y+=r*(this.rotateRate/this.canvas.width),this.camera.transform.rotation.x+=a*(this.rotateRate/this.canvas.height)),this.prevX=i,this.prevY=s}}},59318:(t,i,s)=>{s.r(i),s.d(i,{Transform:()=>e});var r=s(45338),a=s(46710);class e{constructor(){this.position=void 0,this.scale=void 0,this.rotation=void 0,this.matView=void 0,this.matNormal=void 0,this.forward=void 0,this.up=void 0,this.right=void 0,this.position=new r.Vector3(0,0,0),this.scale=new r.Vector3(1,1,1),this.rotation=new r.Vector3(0,0,0),this.matView=new a.Matrix4,this.matNormal=new Float32Array(9),this.forward=new Float32Array(4),this.up=new Float32Array(4),this.right=new Float32Array(4)}updateMatrix(){return this.matView.reset().vtranslate(this.position).rotateX(this.rotation.x*e.deg2Rad).rotateZ(this.rotation.z*e.deg2Rad).rotateY(this.rotation.y*e.deg2Rad).vscale(this.scale),a.Matrix4.normalMat3(this.matNormal,this.matView.raw),a.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),a.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),a.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this.matView.raw}updateDirection(){return a.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),a.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),a.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this}getViewMatrix(){return this.matView.raw}getNormalMatrix(){return this.matNormal}reset(){this.position.set(0,0,0),this.scale.set(1,1,1),this.rotation.set(0,0,0)}}e.deg2Rad=Math.PI/180}}]);
//# sourceMappingURL=25304.dc1ad12a.chunk.js.map
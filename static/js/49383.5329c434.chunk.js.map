{"version":3,"file":"static/js/49383.5329c434.chunk.js","mappings":"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","sources":["njslab/Tools/MeshGridDynamic/Implementation/DynamicGridA/Core/index.ts","njslab/Tools/MeshGridDynamic/Implementation/DynamicGridA/CanvasCore/index.ts","njslab/Tools/MeshGridDynamic/Implementation/DynamicGridA/index.ts","njslab/Tools/MeshGridDynamic/Implementation/DynamicGridB/Core/index.ts","njslab/Tools/MeshGridDynamic/Implementation/DynamicGridB/CanvasCore/index.ts","njslab/Tools/MeshGridDynamic/Implementation/DynamicGridB/index.ts","njslab/Tools/MeshGridDynamic/Implementation/index.ts","njslab/Tools/MeshGridDynamic/index.ts"],"sourcesContent":["import { NVector3 } from '../../../lib';\r\nimport { DynamicGrid } from '..';\r\nexport class GridGraph {\r\n    DynamicGrid: DynamicGrid;\r\n    width: number;\r\n    height: number;\r\n    nodes: Node[] = [];\r\n    edges: Edge[] = [];\r\n    dt: number = 0.0;\r\n\r\n    mouse: NVector3 = new NVector3(0, 0);\r\n\r\n    damping = 0.96;\r\n    gravity = -0.032;\r\n    timeStep = 0.16; // 0.316; // 0.18; // 0.26;\r\n    groundZ = -9.26;\r\n\r\n    capture: Node | undefined = undefined;\r\n\r\n    constructor(DynamicGrid: DynamicGrid, width: number, height: number) {\r\n        this.DynamicGrid = DynamicGrid;\r\n        this.Init(width - 100, height - 100);\r\n    }\r\n    Init(width: number, height: number) {\r\n        this.InitGridR(width, height);\r\n        this.nodes[0].fixed = true;\r\n        this.nodes[9].fixed = true;\r\n        this.nodes[this.nodes.length - 1].fixed = true;\r\n        this.nodes[this.nodes.length - 1 - 9].fixed = true;\r\n    }\r\n    updateOptionA(v: number) {\r\n        this.damping = v * 0.1;\r\n        console.log(this.damping, 'damping');\r\n    }\r\n    updateOptionB(v: number) {\r\n        this.timeStep = v * 0.05;\r\n        console.log(this.timeStep, 'timeStep');\r\n    }\r\n    updateOptionC(v: number) {\r\n        // this.gravity = v * 0.1;\r\n        // console.log(this.gravity, 'gravity');\r\n    }\r\n    InitGridR(width: number, height: number, xNum: number = 10, yNum: number = 10) {\r\n        const xOff = 10;\r\n        const yOff = 10;\r\n        const xInterval = (width / xNum) + 1;\r\n        const yInterval = (height / yNum) + 1;\r\n        const nbase = this.nodes.length;\r\n        for (let i = 0; i < yNum; ++i) {\r\n            for (let j = 0; j < xNum; ++j) {\r\n                let x = xOff + xInterval * j - 250;\r\n                let y = yOff + yInterval * i - 150;\r\n                this.AddNode(new NVector3(x, y), NVector3.Zero(), 1.0);\r\n                // this.nodes.push(new Node(new NVector3(x, y), new NVector3(0, 0), 1));\r\n            }\r\n        }\r\n        for (let j = 0; j < yNum; ++j) {\r\n            for (let i = 0; i < xNum; ++i) {\r\n                let k = j * xNum + i;\r\n\r\n                if (i !== 0) { this.AddEdge(this.nodes[nbase + k - 1], this.nodes[nbase + k]); }\r\n                if (j !== 0) { this.AddEdge(this.nodes[nbase + k - xNum], this.nodes[nbase + k]); }\r\n\r\n                // if (i !== 0 && j !== 0) {this.AddEdge(this.nodes[nbase + k - xNum - 1], this.nodes[nbase + k]); }\r\n\r\n                // if (i !== 0 && j !== yNum - 1) {this.AddEdge(this.nodes[nbase + k + xNum - 1], this.nodes[nbase + k]); }\r\n            }\r\n        }\r\n    }\r\n    public Clear() {\r\n        this.nodes = [];\r\n        this.edges = [];\r\n    }\r\n    public AddNode(_p0: NVector3, _u0: NVector3, _mass: number): Node {\r\n        const n = new Node(_p0, _u0, _mass);\r\n        this.nodes.push(n);\r\n        return n;\r\n    }\r\n    public AddEdge(n0: Node, n1: Node): Edge {\r\n        const e = new Edge(n0, n1);\r\n        this.edges.push(e);\r\n        return e;\r\n    }\r\n    MouseMove(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        // console.log('move', x, y);\r\n    }\r\n    MouseDClick(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        const n = this.FindNode(this.mouse);\r\n        if (n) {\r\n            n.fixed = !n.fixed;\r\n        }\r\n        // console.log('click', x, y);\r\n    }\r\n    MouseDown(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        this.capture = this.FindNode(this.mouse);\r\n        if (this.capture) {\r\n            this.capture.fixed = true;\r\n            this.capture.isCapture = true;\r\n        }\r\n        console.log('down', x, y, this.capture);\r\n    }\r\n    MouseLeftClick(x: number, y: number) {\r\n        console.log('click', x, y, this.capture);\r\n    }\r\n    MouseUp(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        if (this.capture) {\r\n            this.capture.isCapture = false;\r\n            this.capture = undefined;\r\n        }\r\n        console.log('up', x, y);\r\n    }\r\n    MouseDrag(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        if (this.capture) {\r\n            this.capture.v.x = x;\r\n            this.capture.v.y = y;\r\n        }\r\n        console.log('drag', x, y);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n\r\n        this.dt += 0.1;\r\n        this.Move(this.mouse, this.damping, 0, this.timeStep, this.groundZ, 1);\r\n\r\n        for (let e of this.edges) { e.Render(ctx); }\r\n        for (let n of this.nodes) { n.Render(ctx, this.mouse); }\r\n    }\r\n    FindNode(mv: NVector3) {\r\n        for (let n of this.nodes) {\r\n            if (n.v.Distance(mv) < n.m + 3) {\r\n                return n;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    public Move(atr: NVector3, damping: number, g: number, dt: number, groundZ: number, step: number) {\r\n\r\n        for (let i = 0; i < step; ++i) {\r\n            for (const n of this.nodes) {\r\n                // const dv: NVector3 = atr - n.p;\r\n                //  L = dv.Length;\r\n                // dv.Unitize();\r\n                // n.f = dv * Math.Exp(-0.1 * L * L) * 0.1 + Vector3d.ZAxis * g;\r\n\r\n                const dv = NVector3.Sub(atr, n.v);\r\n                const L = dv.Length();\r\n                dv.Unitize();\r\n                n.f = NVector3.Add(NVector3.Scale(dv, Math.exp(-0.1 * L * L) * 0.1), (NVector3.Scale(NVector3.YAxis(), g)));\r\n            }\r\n            for (const e of this.edges) { e.ApplySpringForce(); }\r\n            for (const n of this.nodes) { n.Move(dt, damping, groundZ); }\r\n        }\r\n    }\r\n}\r\nexport class Edge {\r\n    n0: Node;\r\n    n1: Node;\r\n    public targetLength: number = 0.0;\r\n    public springConstant: number = 0.8; // 1; // 0.8;\r\n    constructor(n0: Node, n1: Node) {\r\n        this.n0 = n0;\r\n        this.n1 = n1;\r\n        this.targetLength = this.n0.v.Distance(this.n1.v);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        ctx.strokeStyle = '#f944f0';\r\n\r\n        if (NVector3.Distance(this.n0.v, this.n1.v) > this.targetLength) {\r\n\r\n            ctx.strokeStyle = '#000000';\r\n            // this.n0.isShort = true;\r\n            // this.n1.isShort = true;\r\n        }\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.n0.v.x, this.n0.v.y);\r\n        ctx.lineTo(this.n1.v.x, this.n1.v.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    public ApplySpringForce() {\r\n        // Vector3d dp = n1.p - n0.p;\r\n        // double dist = dp.Length;\r\n        // dp.Unitize();\r\n\r\n        // n0.f += dp * (dist - TargetLength) * SpringConstant;\r\n        // n1.f -= dp * (dist - TargetLength) * SpringConstant;\r\n\r\n        // const dp: NVector3 = NVector3.Sub(this.n1.p, this.n0.p);\r\n        // const dist:number = dp.Length();\r\n        // dp.Unitize();\r\n\r\n        let dp = NVector3.Sub(this.n1.v, this.n0.v);\r\n        let dist = dp.Length();\r\n        dp.Unitize();\r\n\r\n        const length = NVector3.Scale(dp, (dist - this.targetLength) * this.springConstant);\r\n        this.n0.f = NVector3.Add(this.n0.f, length);\r\n        this.n1.f = NVector3.Sub(this.n1.f, length);\r\n\r\n    }\r\n}\r\nexport class Node {\r\n    public nNodes: Node[] = [];\r\n    public v: NVector3 = NVector3.Origin();\r\n    public f: NVector3 = NVector3.Origin();\r\n    public u: NVector3 = NVector3.Origin();\r\n    public m: number = 0.0;\r\n\r\n    public fixed: boolean = false;\r\n    public isCapture: boolean = false;\r\n    constructor(_p0: NVector3, _u0: NVector3, _mass: number) {\r\n        this.v = new NVector3(_p0.x, _p0.y, _p0.z);\r\n        this.u = new NVector3(_u0.x, _u0.y, _u0.z);\r\n        this.m = _mass;\r\n    }\r\n    public Move(dt: number, damping: number, groundZ: number = 0.0) {\r\n        if (this.fixed || this.isCapture) { return; }\r\n\r\n        // u *= damping;\r\n        // u += f * (dt / m);\r\n        // p += u * dt;\r\n\r\n        // this.u = NVector3.Scale(this.u , damping );\r\n        // this.u = NVector3.Add( this.u,  NVector3.Scale(this.f, dt / this.m));\r\n        // this.p  = NVector3.Add(this.p, NVector3.Scale(this.u, dt));\r\n\r\n        this.u.Mult(damping);\r\n        this.u.Add(NVector3.Scale(this.f, dt / this.m));\r\n\r\n        const v = NVector3.Scale(this.u, dt);\r\n        // this.v.Add( );\r\n        this.v.x += v.x;\r\n        this.v.y += v.y;\r\n\r\n        // if (this.p.y < groundZ) {\r\n        //     this.p.y = groundZ;\r\n        //     if (this.u.y < 0.0) {this.u.y = -this.u.y; }\r\n        // }\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D, m: NVector3) {\r\n        ctx.beginPath();\r\n\r\n        if (m.Distance(this.v) < this.m + 3) {\r\n            ctx.fillStyle = '#000000';\r\n            ctx.arc(this.v.x, this.v.y, this.m + 6, 0.0, Math.PI * 2);\r\n        } else {\r\n            ctx.fillStyle = '#f90000';\r\n            ctx.arc(this.v.x, this.v.y, this.m + 3, 0.0, Math.PI * 2);\r\n        }\r\n\r\n        if (this.fixed) {\r\n            ctx.fillStyle = '#000000';\r\n            ctx.arc(this.v.x, this.v.y, this.m + 7.5, 0.0, Math.PI * 2);\r\n        }\r\n\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n}","import { DynamicGrid } from '..';\r\nexport class CanvasCore {\r\n    app: DynamicGrid;\r\n    canvas: HTMLCanvasElement;\r\n    host: HTMLElement;\r\n\r\n    divLocalMain: HTMLElement;\r\n    divCanvas: HTMLElement;\r\n    divUI: HTMLElement;\r\n\r\n    ctx: CanvasRenderingContext2D;\r\n    timer: NodeJS.Timer | number;\r\n    click: boolean = false;\r\n    pressed: boolean = false;\r\n    prevent: boolean = false;\r\n    delay: number = 500;\r\n    down: boolean = false;\r\n    t: number = 0.0;\r\n    width: number;\r\n    height: number;\r\n    divConsole: HTMLElement;\r\n    constructor(app: DynamicGrid, width: number = 600, height: number = 400) {\r\n        this.app = app;\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        const host = document.getElementById(app.id);\r\n        if (!host) { return; } this.host = host;\r\n\r\n        this.InitCanvas();\r\n    }\r\n    InitCanvas() {\r\n        const divLocalMain = document.createElement('div');\r\n        if (!divLocalMain) { return; } this.divLocalMain = divLocalMain;\r\n        this.divLocalMain.style.display = 'flex';\r\n        // this.divLocalMain.style.width = '100%';\r\n        this.divLocalMain.style.width = this.width + 'px'; // this.host.clientWidth;\r\n        this.divLocalMain.style.height = this.height + 'px'; // this.host.clientHeight;\r\n        this.divLocalMain.style.margin = '10px';\r\n        this.divLocalMain.style.padding = '10px';\r\n        this.host.append(divLocalMain);\r\n\r\n        const divCanvas = document.createElement('div');\r\n        if (!divCanvas) { return; } this.divCanvas = divCanvas;\r\n        // this.divCanvas.style.width = '50%';\r\n        this.divLocalMain.append(divCanvas);\r\n\r\n        const canvas = document.createElement('canvas');\r\n        if (canvas) {\r\n            this.canvas = canvas;\r\n            this.divCanvas.append(this.canvas);\r\n\r\n            this.canvas.width = this.width; // this.host.clientWidth;\r\n            this.canvas.height = this.height; // this.host.clientHeight;\r\n            this.canvas.style.backgroundColor = '#aaaaaa';\r\n            const ctx = this.canvas.getContext('2d');\r\n            if (ctx) {\r\n                this.ctx = ctx;\r\n                this.InitUI();\r\n                this.Init();\r\n            }\r\n        }\r\n    }\r\n    InitUI() {\r\n        const divUI = document.createElement('div');\r\n        if (!divUI) { return; } this.divUI = divUI;\r\n        this.divLocalMain.append(divUI);\r\n        this.divUI.style.marginLeft = '10px';\r\n        this.divUI.style.width = '100%';\r\n        // this.divUI.style.display = 'grid';\r\n\r\n        const btn = document.createElement('button');\r\n        btn.textContent = 'reset';\r\n        btn.onclick = () => { this.app.InitGraph(); };\r\n        this.divUI.append(btn);\r\n\r\n        let input = document.createElement('input');\r\n        input.oninput = () => {\r\n            const val = +input.value as number;\r\n            this.app.gridGraph.updateOptionA(val);\r\n        };\r\n        input.type = 'range';\r\n        input.min = '1';\r\n        input.max = '10.0';\r\n        input.value = '8';\r\n        this.divUI.append(input);\r\n\r\n        let inputOff = document.createElement('input');\r\n        inputOff.oninput = () => {\r\n            const val = +inputOff.value as number;\r\n            this.app.gridGraph.updateOptionB(val);\r\n        };\r\n        inputOff.type = 'range';\r\n        inputOff.min = '1';\r\n        inputOff.max = '10.0';\r\n        inputOff.value = '4';\r\n        this.divUI.append(inputOff);\r\n\r\n        // let inputOpt = document.createElement('input');\r\n        // inputOpt.oninput = () => {\r\n        //     const val = +inputOpt.value as number;\r\n        //     this.app.gridGraph.updateOptionC(val);\r\n        // };\r\n        // inputOpt.type = 'range';\r\n        // inputOpt.min = '1';\r\n        // inputOpt.max = '8';\r\n        // inputOpt.value = '4';\r\n        // this.divUI.append(inputOpt);\r\n\r\n        this.divConsole = document.createElement('p');\r\n        if (!this.divConsole) { return; } this.divUI.append(this.divConsole);\r\n        this.divConsole.style.width = 'max-content';\r\n        this.divConsole.innerHTML = '1. clikc to reset! <br> ';\r\n        this.divConsole.innerHTML += '2. damping slider! <br> ';\r\n        this.divConsole.innerHTML += '3. timeStep slider ! <br> ';\r\n        // this.divConsole.innerHTML += '4. third slider for Opti level! <br> ';\r\n        // this.divConsole.innerHTML += '* num of node: ';\r\n    }\r\n    Init() {\r\n        this.ctx.translate(this.ctx.canvas.width * 0.5, this.ctx.canvas.height * 0.5);\r\n        // this.ctx.scale(2, 2);\r\n        this.ctx.scale(1, 1);\r\n        this.EventBind();\r\n        this.Loop();\r\n    }\r\n    EventBind() {\r\n        this.canvas.onclick = (e: MouseEvent) => {\r\n            this.prevent = false;\r\n            this.timer = setTimeout(\r\n                () => {\r\n                    if (!this.prevent) {\r\n                        if (!this.click) { return; }\r\n                        this.MouseClick(e);\r\n                    }\r\n                    this.prevent = false;\r\n                },\r\n                this.delay);\r\n        };\r\n        this.canvas.ondblclick = (e: MouseEvent) => {\r\n            clearTimeout(this.timer as number);\r\n            this.prevent = true;\r\n            this.MouseDoubleClick(e);\r\n        };\r\n        this.canvas.addEventListener('wheel', (e: WheelEvent) => this.MouseWheel(e, e.deltaY));\r\n\r\n        // this.canvas.onclick = (e: MouseEvent) => {\r\n        //     this.timer = setTimeout(() => {\r\n        //         if (!this.prevent) { this.MouseClick(e); }\r\n        //         this.prevent = false;\r\n        //     }, this.delay);\r\n        // };\r\n        // this.canvas.ondblclick = (e: MouseEvent) => {\r\n        //     clearTimeout(this.timer as number);\r\n        //     this.prevent = true;\r\n        //     this.MouseDoubleClick(e);\r\n        // };\r\n        this.canvas.onmousedown = (e: MouseEvent) => {\r\n            this.click = true;\r\n            this.pressed = true;\r\n            this.MouseDown(e);\r\n        };\r\n        this.canvas.onmouseup = (e: MouseEvent) => {\r\n            this.pressed = false;\r\n            this.MouseUp(e);\r\n        };\r\n        this.canvas.onmousemove = (e: MouseEvent) => {\r\n            if (this.pressed) { this.click = false; this.MouseDrag(e); }\r\n            this.MouseMove(e);\r\n        };\r\n        window.onresize = (e: UIEvent) => this.Resize(e);\r\n\r\n    }\r\n    Resize(e: UIEvent) {\r\n        // console.log(e);\r\n        // this.canvas.width = this.divCanvas.clientWidth;\r\n        // this.canvas.height = this.divCanvas.clientHeight;\r\n    }\r\n    Loop() {\r\n        requestAnimationFrame(() => { this.Loop(); });\r\n\r\n        this.ctx.clearRect(-this.ctx.canvas.width * 0.5, -this.ctx.canvas.height * 0.5, this.ctx.canvas.width, this.ctx.canvas.height);\r\n        this.ctx.fillStyle = '#dddddd';\r\n        this.ctx.beginPath();\r\n        this.ctx.rect(-this.ctx.canvas.width * 0.5, -this.ctx.canvas.height * 0.5, this.ctx.canvas.width, this.ctx.canvas.height);\r\n        this.ctx.closePath();\r\n        this.ctx.fill();\r\n        this.Render(this.ctx);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        // console.log(ctx);\r\n    }\r\n    MouseClick(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseDoubleClick(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseDown(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseUp(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseMove(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseDrag(e: MouseEvent) {\r\n        //\r\n    }\r\n    MouseWheel(e: WheelEvent, deltaY: number) {\r\n        // console.log(e);\r\n    }\r\n}","import { GridGraph } from './Core';\r\nimport { NVector3 } from '../../lib';\r\nimport { CanvasCore } from './CanvasCore';\r\nexport class DynamicGrid {\r\n    CanvasCore: CanvasCore;\r\n    gridGraph: GridGraph;\r\n    t = 0.9;\r\n    id: string;\r\n    m: NVector3 = new NVector3(0, 0, 0);\r\n\r\n    // mouse: number[];\r\n    // gridGraph: GridGraph;\r\n    // pts: number[][];\r\n\r\n    constructor(id: string) {\r\n        this.id = id;\r\n        this.CanvasCore = new CanvasCore(this);\r\n\r\n        this.Init();\r\n        this.InitGraph();\r\n    }\r\n    Init() {\r\n        this.CanvasCore.Render = (ctx: CanvasRenderingContext2D) => this.Render(ctx);\r\n        this.CanvasCore.MouseDown = (e: MouseEvent) => this.MouseDown(e);\r\n        this.CanvasCore.MouseClick = (e: MouseEvent) => this.MouseClick(e);\r\n        this.CanvasCore.MouseDoubleClick = (e: MouseEvent) => this.MouseDoubleClick(e);\r\n        this.CanvasCore.MouseUp = (e: MouseEvent) => this.MouseUp(e);\r\n        this.CanvasCore.MouseMove = (e: MouseEvent) => this.MouseMove(e);\r\n        this.CanvasCore.MouseDrag = (e: MouseEvent) => this.MouseDrag(e);\r\n    }\r\n    InitGraph() {\r\n        this.gridGraph = new GridGraph(this, this.CanvasCore.canvas.width, this.CanvasCore.canvas.height);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        this.gridGraph.Render(ctx);\r\n\r\n        ctx.fillStyle = 'rgba(255, 0, 0, 0.9)';\r\n        ctx.beginPath();\r\n        ctx.arc(this.m.x, this.m.y, 2.5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    Grid(ctx: CanvasRenderingContext2D) {\r\n        for (let i = -10; i < 10; ++i) {\r\n            for (let j = -10; j < 10; ++j) {\r\n                ctx.beginPath();\r\n                ctx.fillStyle = 'rgba(255, 0, 0, 0.9)';\r\n                ctx.arc(i, j, 0.05, 0, Math.PI * 2);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n            }\r\n        }\r\n    }\r\n    // .......................................................................................\r\n    MouseDown(e: MouseEvent) {\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n        this.gridGraph.MouseDown(this.m.x, this.m.y);\r\n    }\r\n    MouseUp(e: MouseEvent) {\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n        this.gridGraph.MouseUp(this.m.x, this.m.y);\r\n    }\r\n    MouseMove(e: MouseEvent) {\r\n        // this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 0.1;\r\n        // this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 0.1;\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n\r\n        this.gridGraph.MouseMove(this.m.x, this.m.y);\r\n    }\r\n    MouseDrag(e: MouseEvent) {\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n\r\n        this.gridGraph.MouseDrag(this.m.x, this.m.y);\r\n    }\r\n    MouseClick(e: MouseEvent) {\r\n        console.log('click');\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n\r\n        this.gridGraph.MouseLeftClick(this.m.x, this.m.y);\r\n    }\r\n    MouseDoubleClick(e: MouseEvent) {\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n\r\n        this.gridGraph.MouseDClick(this.m.x, this.m.y);\r\n    }\r\n\r\n    // . ....\r\n\r\n\r\n\r\n\r\n    // constructor(SceneCreativeCoding: SceneCreativeCoding) {\r\n    //     super(SceneCreativeCoding);\r\n    //     this.indeCanvas.title = 'Dynamic Grid system 01';\r\n    //     this.Init();\r\n    //     //\r\n    // }\r\n    // Init() {\r\n    //     this.mouse = [0, 0];\r\n    //     this.gridGraph = new GridGraph(this.width, this.height);\r\n\r\n    // }\r\n    // RenderIndependentCanvas(ctx: CanvasRenderingContext2D) {\r\n    //     this.gridGraph.Render(ctx);\r\n    // }\r\n    Distance(x0: number, y0: number, x1: number, y1: number): number {\r\n        return Math.sqrt((x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1));\r\n    }\r\n\r\n\r\n}","import { NVector3 } from '../../../lib';\r\nimport { DynamicGrid } from '..';\r\nexport class GridGraph {\r\n    DynamicGrid: DynamicGrid;\r\n    width: number;\r\n    height: number;\r\n    nodes: Node[] = [];\r\n    edges: Edge[] = [];\r\n    dt: number = 0.0;\r\n\r\n    mouse: NVector3 = new NVector3(0, 0);\r\n\r\n    damping = 0.96;\r\n    gravity = -0.032;\r\n    timeStep = 0.16; // 0.316; // 0.18; // 0.26;\r\n    groundZ = -9.26;\r\n\r\n    capture: Node | undefined = undefined;\r\n\r\n    constructor(DynamicGrid: DynamicGrid, width: number, height: number) {\r\n        this.DynamicGrid = DynamicGrid;\r\n        this.Init(width - 100, height - 100);\r\n    }\r\n    Init(width: number, height: number) {\r\n        this.InitGridR(width, height);\r\n        this.nodes[0].fixed = true;\r\n        this.nodes[9].fixed = true;\r\n        this.nodes[this.nodes.length - 1].fixed = true;\r\n        this.nodes[this.nodes.length - 1 - 9].fixed = true;\r\n    }\r\n    updateOptionA(v: number) {\r\n        this.damping = v * 0.1;\r\n        console.log(this.damping, 'damping');\r\n    }\r\n    updateOptionB(v: number) {\r\n        this.timeStep = v * 0.05;\r\n        console.log(this.timeStep, 'timeStep');\r\n    }\r\n    updateOptionC(v: number) {\r\n        // this.gravity = v * 0.1;\r\n        // console.log(this.gravity, 'gravity');\r\n    }\r\n    InitGridR(width: number, height: number, xNum: number = 10, yNum: number = 10) {\r\n        const xOff = 10;\r\n        const yOff = 10;\r\n        const xInterval = (width / xNum) + 1;\r\n        const yInterval = (height / yNum) + 1;\r\n        const nbase = this.nodes.length;\r\n        for (let i = 0; i < yNum; ++i) {\r\n            for (let j = 0; j < xNum; ++j) {\r\n                let x = xOff + xInterval * j - 250;\r\n                let y = yOff + yInterval * i - 150;\r\n                this.AddNode(new NVector3(x, y), NVector3.Zero(), 1.0);\r\n                // this.nodes.push(new Node(new NVector3(x, y), new NVector3(0, 0), 1));\r\n            }\r\n        }\r\n        for (let j = 0; j < yNum; ++j) {\r\n            for (let i = 0; i < xNum; ++i) {\r\n                let k = j * xNum + i;\r\n\r\n                if (i !== 0) { this.AddEdge(this.nodes[nbase + k - 1], this.nodes[nbase + k]); }\r\n                if (j !== 0) { this.AddEdge(this.nodes[nbase + k - xNum], this.nodes[nbase + k]); }\r\n\r\n                // if (i !== 0 && j !== 0) {this.AddEdge(this.nodes[nbase + k - xNum - 1], this.nodes[nbase + k]); }\r\n\r\n                // if (i !== 0 && j !== yNum - 1) {this.AddEdge(this.nodes[nbase + k + xNum - 1], this.nodes[nbase + k]); }\r\n            }\r\n        }\r\n    }\r\n    public Clear() {\r\n        this.nodes = [];\r\n        this.edges = [];\r\n    }\r\n    public AddNode(_p0: NVector3, _u0: NVector3, _mass: number): Node {\r\n        const n = new Node(_p0, _u0, _mass);\r\n        this.nodes.push(n);\r\n        return n;\r\n    }\r\n    public AddEdge(n0: Node, n1: Node): Edge {\r\n        const e = new Edge(n0, n1);\r\n        this.edges.push(e);\r\n        return e;\r\n    }\r\n    MouseMove(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        // console.log('move', x, y);\r\n    }\r\n    MouseDClick(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        const n = this.FindNode(this.mouse);\r\n        if (n) {\r\n            n.fixed = !n.fixed;\r\n        }\r\n        // console.log('click', x, y);\r\n    }\r\n    MouseDown(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        this.capture = this.FindNode(this.mouse);\r\n        if (this.capture) {\r\n            this.capture.fixed = true;\r\n            this.capture.isCapture = true;\r\n        }\r\n        console.log('down', x, y, this.capture);\r\n    }\r\n    MouseLeftClick(x: number, y: number) {\r\n        console.log('click', x, y, this.capture);\r\n    }\r\n    MouseUp(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        if (this.capture) {\r\n            this.capture.isCapture = false;\r\n            this.capture = undefined;\r\n        }\r\n        console.log('up', x, y);\r\n    }\r\n    MouseDrag(x: number, y: number) {\r\n        this.mouse.x = x;\r\n        this.mouse.y = y;\r\n        if (this.capture) {\r\n            this.capture.v.x = x;\r\n            this.capture.v.y = y;\r\n        }\r\n        console.log('drag', x, y);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n\r\n        this.dt += 0.1;\r\n        this.Move(this.mouse, this.damping, 0, this.timeStep, this.groundZ, 1);\r\n\r\n        for (let e of this.edges) { e.Render(ctx); }\r\n        for (let n of this.nodes) { n.Render(ctx, this.mouse); }\r\n    }\r\n    FindNode(mv: NVector3) {\r\n        for (let n of this.nodes) {\r\n            if (n.v.Distance(mv) < n.m + 3) {\r\n                return n;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    public Move(atr: NVector3, damping: number, g: number, dt: number, groundZ: number, step: number) {\r\n\r\n        for (let i = 0; i < step; ++i) {\r\n            for (const n of this.nodes) {\r\n                // const dv: NVector3 = atr - n.p;\r\n                //  L = dv.Length;\r\n                // dv.Unitize();\r\n                // n.f = dv * Math.Exp(-0.1 * L * L) * 0.1 + Vector3d.ZAxis * g;\r\n\r\n                const dv = NVector3.Sub(atr, n.v);\r\n                const L = dv.Length();\r\n                dv.Unitize();\r\n                n.f = NVector3.Add(NVector3.Scale(dv, Math.exp(-0.1 * L * L) * 0.1), (NVector3.Scale(NVector3.YAxis(), g)));\r\n            }\r\n            for (const e of this.edges) { e.ApplySpringForce(); }\r\n            for (const n of this.nodes) { n.Move(dt, damping, groundZ); }\r\n        }\r\n    }\r\n}\r\nexport class Edge {\r\n    n0: Node;\r\n    n1: Node;\r\n    public targetLength: number = 0.0;\r\n    public springConstant: number = 0.8; // 1; // 0.8;\r\n    constructor(n0: Node, n1: Node) {\r\n        this.n0 = n0;\r\n        this.n1 = n1;\r\n        this.targetLength = this.n0.v.Distance(this.n1.v) * 0.5;\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        ctx.strokeStyle = '#ff0000';\r\n\r\n        if (NVector3.Distance(this.n0.v, this.n1.v) < this.targetLength * 2) {\r\n\r\n            ctx.strokeStyle = '#0000ff';\r\n            // this.n0.isShort = true;\r\n            // this.n1.isShort = true;\r\n        }\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.n0.v.x, this.n0.v.y);\r\n        ctx.lineTo(this.n1.v.x, this.n1.v.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    public ApplySpringForce() {\r\n        // Vector3d dp = n1.p - n0.p;\r\n        // double dist = dp.Length;\r\n        // dp.Unitize();\r\n\r\n        // n0.f += dp * (dist - TargetLength) * SpringConstant;\r\n        // n1.f -= dp * (dist - TargetLength) * SpringConstant;\r\n\r\n        // const dp: NVector3 = NVector3.Sub(this.n1.p, this.n0.p);\r\n        // const dist:number = dp.Length();\r\n        // dp.Unitize();\r\n\r\n        let dp = NVector3.Sub(this.n1.v, this.n0.v);\r\n        let dist = dp.Length();\r\n        dp.Unitize();\r\n\r\n        const length = NVector3.Scale(dp, (dist - this.targetLength) * this.springConstant);\r\n        this.n0.f = NVector3.Add(this.n0.f, length);\r\n        this.n1.f = NVector3.Sub(this.n1.f, length);\r\n\r\n    }\r\n}\r\nexport class Node {\r\n    public nNodes: Node[] = [];\r\n    public v: NVector3 = NVector3.Origin();\r\n    public f: NVector3 = NVector3.Origin();\r\n    public u: NVector3 = NVector3.Origin();\r\n    public m: number = 0.0;\r\n\r\n    public fixed: boolean = false;\r\n    public isCapture: boolean = false;\r\n    constructor(_p0: NVector3, _u0: NVector3, _mass: number) {\r\n        this.v = new NVector3(_p0.x, _p0.y, _p0.z);\r\n        this.u = new NVector3(_u0.x, _u0.y, _u0.z);\r\n        this.m = _mass;\r\n    }\r\n    public Move(dt: number, damping: number, groundZ: number = 0.0) {\r\n        if (this.fixed || this.isCapture) { return; }\r\n\r\n        // u *= damping;\r\n        // u += f * (dt / m);\r\n        // p += u * dt;\r\n\r\n        // this.u = NVector3.Scale(this.u , damping );\r\n        // this.u = NVector3.Add( this.u,  NVector3.Scale(this.f, dt / this.m));\r\n        // this.p  = NVector3.Add(this.p, NVector3.Scale(this.u, dt));\r\n\r\n        this.u.Mult(damping);\r\n        this.u.Add(NVector3.Scale(this.f, dt / this.m));\r\n\r\n        const v = NVector3.Scale(this.u, dt);\r\n        // this.v.Add( );\r\n        this.v.x += v.x;\r\n        this.v.y += v.y;\r\n\r\n        // if (this.p.y < groundZ) {\r\n        //     this.p.y = groundZ;\r\n        //     if (this.u.y < 0.0) {this.u.y = -this.u.y; }\r\n        // }\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D, m: NVector3) {\r\n        ctx.beginPath();\r\n\r\n        if (m.Distance(this.v) < this.m + 3) {\r\n            ctx.fillStyle = '#000000';\r\n            ctx.arc(this.v.x, this.v.y, this.m + 6, 0.0, Math.PI * 2);\r\n        } else {\r\n            ctx.fillStyle = '#f90000';\r\n            ctx.arc(this.v.x, this.v.y, this.m + 3, 0.0, Math.PI * 2);\r\n        }\r\n\r\n        if (this.fixed) {\r\n            ctx.fillStyle = '#000000';\r\n            ctx.arc(this.v.x, this.v.y, this.m + 7.5, 0.0, Math.PI * 2);\r\n        }\r\n\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n}","import { DynamicGrid } from '..';\r\nexport class CanvasCore {\r\n    app: DynamicGrid;\r\n    canvas: HTMLCanvasElement;\r\n    host: HTMLElement;\r\n\r\n    divLocalMain: HTMLElement;\r\n    divCanvas: HTMLElement;\r\n    divUI: HTMLElement;\r\n\r\n    ctx: CanvasRenderingContext2D;\r\n    timer: NodeJS.Timer | number;\r\n    click: boolean = false;\r\n    pressed: boolean = false;\r\n    prevent: boolean = false;\r\n    delay: number = 500;\r\n    down: boolean = false;\r\n    t: number = 0.0;\r\n    width: number;\r\n    height: number;\r\n    divConsole: HTMLElement;\r\n    constructor(app: DynamicGrid, width: number = 600, height: number = 400) {\r\n        this.app = app;\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        const host = document.getElementById(app.id);\r\n        if (!host) { return; } this.host = host;\r\n\r\n        this.InitCanvas();\r\n    }\r\n    InitCanvas() {\r\n        const divLocalMain = document.createElement('div');\r\n        if (!divLocalMain) { return; } this.divLocalMain = divLocalMain;\r\n        this.divLocalMain.style.display = 'flex';\r\n        // this.divLocalMain.style.width = '100%';\r\n        this.divLocalMain.style.width = this.width + 'px'; // this.host.clientWidth;\r\n        this.divLocalMain.style.height = this.height + 'px'; // this.host.clientHeight;\r\n        this.divLocalMain.style.margin = '10px';\r\n        this.divLocalMain.style.padding = '10px';\r\n        this.host.append(divLocalMain);\r\n\r\n        const divCanvas = document.createElement('div');\r\n        if (!divCanvas) { return; } this.divCanvas = divCanvas;\r\n        // this.divCanvas.style.width = '50%';\r\n        this.divLocalMain.append(divCanvas);\r\n\r\n        const canvas = document.createElement('canvas');\r\n        if (canvas) {\r\n            this.canvas = canvas;\r\n            this.divCanvas.append(this.canvas);\r\n\r\n            this.canvas.width = this.width; // this.host.clientWidth;\r\n            this.canvas.height = this.height; // this.host.clientHeight;\r\n            this.canvas.style.backgroundColor = '#aaaaaa';\r\n            const ctx = this.canvas.getContext('2d');\r\n            if (ctx) {\r\n                this.ctx = ctx;\r\n                this.InitUI();\r\n                this.Init();\r\n            }\r\n        }\r\n    }\r\n    InitUI() {\r\n        const divUI = document.createElement('div');\r\n        if (!divUI) { return; } this.divUI = divUI;\r\n        this.divLocalMain.append(divUI);\r\n        this.divUI.style.marginLeft = '10px';\r\n        this.divUI.style.width = '100%';\r\n        // this.divUI.style.display = 'grid';\r\n\r\n        const btn = document.createElement('button');\r\n        btn.textContent = 'reset';\r\n        btn.onclick = () => { this.app.InitGraph(); };\r\n        this.divUI.append(btn);\r\n\r\n        let input = document.createElement('input');\r\n        input.oninput = () => {\r\n            const val = +input.value as number;\r\n            this.app.gridGraph.updateOptionA(val);\r\n        };\r\n        input.type = 'range';\r\n        input.min = '1';\r\n        input.max = '10.0';\r\n        input.value = '8';\r\n        this.divUI.append(input);\r\n\r\n        let inputOff = document.createElement('input');\r\n        inputOff.oninput = () => {\r\n            const val = +inputOff.value as number;\r\n            this.app.gridGraph.updateOptionB(val);\r\n        };\r\n        inputOff.type = 'range';\r\n        inputOff.min = '1';\r\n        inputOff.max = '10.0';\r\n        inputOff.value = '4';\r\n        this.divUI.append(inputOff);\r\n\r\n        // let inputOpt = document.createElement('input');\r\n        // inputOpt.oninput = () => {\r\n        //     const val = +inputOpt.value as number;\r\n        //     this.app.gridGraph.updateOptionC(val);\r\n        // };\r\n        // inputOpt.type = 'range';\r\n        // inputOpt.min = '1';\r\n        // inputOpt.max = '8';\r\n        // inputOpt.value = '4';\r\n        // this.divUI.append(inputOpt);\r\n\r\n        this.divConsole = document.createElement('p');\r\n        if (!this.divConsole) { return; } this.divUI.append(this.divConsole);\r\n        this.divConsole.style.width = 'max-content';\r\n        this.divConsole.innerHTML = '1. clikc to reset! <br> ';\r\n        this.divConsole.innerHTML += '2. damping slider! <br> ';\r\n        this.divConsole.innerHTML += '3. timeStep slider ! <br> ';\r\n        // this.divConsole.innerHTML += '4. third slider for Opti level! <br> ';\r\n        // this.divConsole.innerHTML += '* num of node: ';\r\n    }\r\n    Init() {\r\n        this.ctx.translate(this.ctx.canvas.width * 0.5, this.ctx.canvas.height * 0.5);\r\n        // this.ctx.scale(2, 2);\r\n        this.ctx.scale(1, 1);\r\n        this.EventBind();\r\n        this.Loop();\r\n    }\r\n    EventBind() {\r\n        this.canvas.onclick = (e: MouseEvent) => {\r\n            this.prevent = false;\r\n            this.timer = setTimeout(\r\n                () => {\r\n                    if (!this.prevent) {\r\n                        if (!this.click) { return; }\r\n                        this.MouseClick(e);\r\n                    }\r\n                    this.prevent = false;\r\n                },\r\n                this.delay);\r\n        };\r\n        this.canvas.ondblclick = (e: MouseEvent) => {\r\n            clearTimeout(this.timer as number);\r\n            this.prevent = true;\r\n            this.MouseDoubleClick(e);\r\n        };\r\n        this.canvas.addEventListener('wheel', (e: WheelEvent) => this.MouseWheel(e, e.deltaY));\r\n\r\n        // this.canvas.onclick = (e: MouseEvent) => {\r\n        //     this.timer = setTimeout(() => {\r\n        //         if (!this.prevent) { this.MouseClick(e); }\r\n        //         this.prevent = false;\r\n        //     }, this.delay);\r\n        // };\r\n        // this.canvas.ondblclick = (e: MouseEvent) => {\r\n        //     clearTimeout(this.timer as number);\r\n        //     this.prevent = true;\r\n        //     this.MouseDoubleClick(e);\r\n        // };\r\n        this.canvas.onmousedown = (e: MouseEvent) => {\r\n            this.click = true;\r\n            this.pressed = true;\r\n            this.MouseDown(e);\r\n        };\r\n        this.canvas.onmouseup = (e: MouseEvent) => {\r\n            this.pressed = false;\r\n            this.MouseUp(e);\r\n        };\r\n        this.canvas.onmousemove = (e: MouseEvent) => {\r\n            if (this.pressed) { this.click = false; this.MouseDrag(e); }\r\n            this.MouseMove(e);\r\n        };\r\n        window.onresize = (e: UIEvent) => this.Resize(e);\r\n\r\n    }\r\n    Resize(e: UIEvent) {\r\n        // console.log(e);\r\n        // this.canvas.width = this.divCanvas.clientWidth;\r\n        // this.canvas.height = this.divCanvas.clientHeight;\r\n    }\r\n    Loop() {\r\n        requestAnimationFrame(() => { this.Loop(); });\r\n\r\n        this.ctx.clearRect(-this.ctx.canvas.width * 0.5, -this.ctx.canvas.height * 0.5, this.ctx.canvas.width, this.ctx.canvas.height);\r\n        this.ctx.fillStyle = '#dddddd';\r\n        this.ctx.beginPath();\r\n        this.ctx.rect(-this.ctx.canvas.width * 0.5, -this.ctx.canvas.height * 0.5, this.ctx.canvas.width, this.ctx.canvas.height);\r\n        this.ctx.closePath();\r\n        this.ctx.fill();\r\n        this.Render(this.ctx);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        // console.log(ctx);\r\n    }\r\n    MouseClick(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseDoubleClick(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseDown(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseUp(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseMove(e: MouseEvent) {\r\n        // console.log(e);\r\n    }\r\n    MouseDrag(e: MouseEvent) {\r\n        //\r\n    }\r\n    MouseWheel(e: WheelEvent, deltaY: number) {\r\n        // console.log(e);\r\n    }\r\n}","import { GridGraph } from './Core';\r\nimport { NVector3 } from '../../lib';\r\nimport { CanvasCore } from './CanvasCore';\r\nexport class DynamicGrid {\r\n    CanvasCore: CanvasCore;\r\n    gridGraph: GridGraph;\r\n    t = 0.9;\r\n    id: string;\r\n    m: NVector3 = new NVector3(0, 0, 0);\r\n\r\n    // mouse: number[];\r\n    // gridGraph: GridGraph;\r\n    // pts: number[][];\r\n\r\n    constructor(id: string) {\r\n        this.id = id;\r\n        this.CanvasCore = new CanvasCore(this);\r\n\r\n        this.Init();\r\n        this.InitGraph();\r\n    }\r\n    Init() {\r\n        this.CanvasCore.Render = (ctx: CanvasRenderingContext2D) => this.Render(ctx);\r\n        this.CanvasCore.MouseDown = (e: MouseEvent) => this.MouseDown(e);\r\n        this.CanvasCore.MouseClick = (e: MouseEvent) => this.MouseClick(e);\r\n        this.CanvasCore.MouseDoubleClick = (e: MouseEvent) => this.MouseDoubleClick(e);\r\n        this.CanvasCore.MouseUp = (e: MouseEvent) => this.MouseUp(e);\r\n        this.CanvasCore.MouseMove = (e: MouseEvent) => this.MouseMove(e);\r\n        this.CanvasCore.MouseDrag = (e: MouseEvent) => this.MouseDrag(e);\r\n    }\r\n    InitGraph() {\r\n        this.gridGraph = new GridGraph(this, this.CanvasCore.canvas.width, this.CanvasCore.canvas.height);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        this.gridGraph.Render(ctx);\r\n\r\n        ctx.fillStyle = 'rgba(255, 0, 0, 0.9)';\r\n        ctx.beginPath();\r\n        ctx.arc(this.m.x, this.m.y, 2.5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    Grid(ctx: CanvasRenderingContext2D) {\r\n        for (let i = -10; i < 10; ++i) {\r\n            for (let j = -10; j < 10; ++j) {\r\n                ctx.beginPath();\r\n                ctx.fillStyle = 'rgba(255, 0, 0, 0.9)';\r\n                ctx.arc(i, j, 0.05, 0, Math.PI * 2);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n            }\r\n        }\r\n    }\r\n    // .......................................................................................\r\n    MouseDown(e: MouseEvent) {\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n        this.gridGraph.MouseDown(this.m.x, this.m.y);\r\n    }\r\n    MouseUp(e: MouseEvent) {\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n        this.gridGraph.MouseUp(this.m.x, this.m.y);\r\n    }\r\n    MouseMove(e: MouseEvent) {\r\n        // this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 0.1;\r\n        // this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 0.1;\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n\r\n        this.gridGraph.MouseMove(this.m.x, this.m.y);\r\n    }\r\n    MouseDrag(e: MouseEvent) {\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n\r\n        this.gridGraph.MouseDrag(this.m.x, this.m.y);\r\n    }\r\n    MouseClick(e: MouseEvent) {\r\n        console.log('click');\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n\r\n        this.gridGraph.MouseLeftClick(this.m.x, this.m.y);\r\n    }\r\n    MouseDoubleClick(e: MouseEvent) {\r\n        this.m.x = ((e.x - this.CanvasCore.canvas.offsetLeft) - this.CanvasCore.canvas.width * 0.5) * 1;\r\n        this.m.y = ((e.y - this.CanvasCore.canvas.offsetTop) - this.CanvasCore.canvas.height * 0.5) * 1;\r\n\r\n        this.gridGraph.MouseDClick(this.m.x, this.m.y);\r\n    }\r\n\r\n    // . ....\r\n\r\n\r\n\r\n\r\n    // constructor(SceneCreativeCoding: SceneCreativeCoding) {\r\n    //     super(SceneCreativeCoding);\r\n    //     this.indeCanvas.title = 'Dynamic Grid system 01';\r\n    //     this.Init();\r\n    //     //\r\n    // }\r\n    // Init() {\r\n    //     this.mouse = [0, 0];\r\n    //     this.gridGraph = new GridGraph(this.width, this.height);\r\n\r\n    // }\r\n    // RenderIndependentCanvas(ctx: CanvasRenderingContext2D) {\r\n    //     this.gridGraph.Render(ctx);\r\n    // }\r\n    Distance(x0: number, y0: number, x1: number, y1: number): number {\r\n        return Math.sqrt((x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1));\r\n    }\r\n\r\n\r\n}","import { DynamicGrid as DynamicGridA } from './DynamicGridA';\r\nimport { DynamicGrid as DynamicGridB } from './DynamicGridB';\r\nexport class Implementation {\r\n    DynamicGridA: DynamicGridA;\r\n    DynamicGridB: DynamicGridB;\r\n    constructor(id: string) {\r\n        this.DynamicGridA = new DynamicGridA(id);\r\n        this.DynamicGridB = new DynamicGridB(id);\r\n\r\n        // document.body.style.overflow = 'auto';\r\n    }\r\n}","import { Implementation } from './Implementation';\r\nexport class AppCanvasGridOptimizer {\r\n    implementation: Implementation;\r\n    static Init(id: string) {\r\n        const n = new AppCanvasGridOptimizer(id);\r\n        n.Dummy();\r\n    }\r\n    constructor(id: string = 'SandBox') {\r\n        this.implementation = new Implementation(id);\r\n    }\r\n    Dummy() {\r\n        //\r\n    }\r\n}\r\n\r\n\r\nexport class Solution {\r\n    public divHost: HTMLElement;\r\n\r\n    constructor(id: string ) {\r\n        this.divHost = document.getElementById(id);\r\n\r\n        AppCanvasGridOptimizer.Init(id)\r\n    }\r\n    public destroy() {\r\n        if (this.divHost) {\r\n            try {\r\n                while (this.divHost.firstChild) {\r\n                    this.divHost.removeChild(this.divHost.firstChild);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error in destroy method:', error);\r\n            }\r\n        } else {\r\n            console.warn('divHost is undefined in destroy method');\r\n        }\r\n    }\r\n}"],"names":["GridGraph","constructor","DynamicGrid","width","height","nodes","edges","dt","mouse","NVector3","damping","gravity","timeStep","groundZ","capture","undefined","this","Init","InitGridR","fixed","length","updateOptionA","v","console","log","updateOptionB","updateOptionC","xNum","yNum","xInterval","yInterval","nbase","i","j","x","y","AddNode","k","AddEdge","Clear","_p0","_u0","_mass","n","Node","push","n0","n1","e","Edge","MouseMove","MouseDClick","FindNode","MouseDown","isCapture","MouseLeftClick","MouseUp","MouseDrag","Render","ctx","Move","mv","Distance","m","atr","g","step","dv","L","Length","Unitize","f","Math","exp","ApplySpringForce","targetLength","springConstant","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","dp","dist","nNodes","u","z","Mult","Add","fillStyle","arc","PI","fill","CanvasCore","app","canvas","host","divLocalMain","divCanvas","divUI","timer","click","pressed","prevent","delay","down","t","divConsole","document","getElementById","id","InitCanvas","createElement","style","display","margin","padding","append","backgroundColor","getContext","InitUI","marginLeft","btn","textContent","onclick","InitGraph","input","oninput","val","value","gridGraph","type","min","max","inputOff","innerHTML","translate","scale","EventBind","Loop","setTimeout","MouseClick","ondblclick","clearTimeout","MouseDoubleClick","addEventListener","MouseWheel","deltaY","onmousedown","onmouseup","onmousemove","window","onresize","Resize","requestAnimationFrame","clearRect","rect","Grid","offsetLeft","offsetTop","x0","y0","x1","y1","sqrt","Implementation","DynamicGridA","DynamicGridB","AppCanvasGridOptimizer","static","Dummy","implementation","Solution","divHost","destroy","firstChild","removeChild","error","warn"],"sourceRoot":""}
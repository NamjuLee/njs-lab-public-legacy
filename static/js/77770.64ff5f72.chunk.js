"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[77770,65712,61507],{65712:(r,e,t)=>{t.r(e),t.d(e,{GLShaderCommon:()=>a});class a{static getShaderProgram(r,e,t){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=a.createShader(r,r.VERTEX_SHADER,e),s=a.createShader(r,r.FRAGMENT_SHADER,t);if(i&&s){let e=a.createProgram(r,i,s,o);return e||(console.error("vertex fragment shader error"),null)}return console.error("vertex fragment shader error"),null}static getShader(r,e,t){const a=r.createShader(e);return null===a?null:(r.shaderSource(a,t),r.compileShader(a),r.getShaderParameter(a,r.COMPILE_STATUS)?a:(console.log("An error occurred compiling the shaders:"+r.getShaderInfoLog(a)),r.deleteShader(a),null))}static createProgram(r,e,t){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=r.createProgram();if(null===o)return null;if(r.attachShader(o,e),r.attachShader(o,t),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS)){const a=r.getProgramInfoLog(o);return console.log("Failed to link program: "+a),r.deleteProgram(o),r.deleteShader(t),r.deleteShader(e),null}return a&&(r.validateProgram(o),!r.getProgramParameter(o,r.VALIDATE_STATUS))?(console.error("Failed to validate program",r.getProgramInfoLog(o)),r.deleteProgram(o),r.deleteShader(t),r.deleteShader(e),null):(r.deleteShader(t),r.deleteShader(e),o)}static createShader(r,e,t){const a=r.createShader(e);if(null===a)return null;r.shaderSource(a,t),r.compileShader(a);return r.getShaderParameter(a,r.COMPILE_STATUS)?a:(console.log(r.getShaderInfoLog(a)),r.deleteShader(a),null)}static createShaderFromPath(r,e,t){const o=r.createShader(e);if(null===o)return null;r.shaderSource(o,a.getSourceSynch(t)),r.compileShader(o);return r.getShaderParameter(o,r.COMPILE_STATUS)?o:(console.log(r.getShaderInfoLog(o)),r.deleteShader(o),null)}static getSourceSynch(r){const e=new XMLHttpRequest;return e.open("GET",r,!1),e.send(null),200===e.status?e.responseText:null}static loadImage(r,e){const t=new Image;t.onload=function(){e(null,t)},t.src=r}}},61507:(r,e,t)=>{let a;t.r(e),t.d(e,{ATTR:()=>a,AttribLocations:()=>o,UniformLocations:()=>i}),function(r){r.ATTR_POSITION_NAME="a_position",r[r.ATTR_POSITION_LOC=0]="ATTR_POSITION_LOC",r.ATTR_NORMAL_NAME="a_norm",r[r.ATTR_NORMAL_LOC=1]="ATTR_NORMAL_LOC",r.ATTR_UV_NAME="a_uv",r[r.ATTR_UV_LOC=2]="ATTR_UV_LOC",r[r.ATTR_COLOR_LOC=4]="ATTR_COLOR_LOC",r.ATTR_COLOR_NAME="a_color"}(a||(a={}));class o{constructor(r,e){this.position=void 0,this.normal=void 0,this.uv=void 0,this.position=r.getAttribLocation(e,a.ATTR_NORMAL_NAME),this.normal=r.getAttribLocation(e,a.ATTR_NORMAL_NAME),this.uv=r.getAttribLocation(e,a.ATTR_UV_NAME)}}class i{constructor(r,e){this.uPointSize=void 0,this.uAngle=void 0,this.perspective=void 0,this.modalMatrix=void 0,this.cameraMatrix=void 0,this.mainTexture=void 0,this.perspective=r.getUniformLocation(e,"uPMatrix"),this.modalMatrix=r.getUniformLocation(e,"uMVMatrix"),this.cameraMatrix=r.getUniformLocation(e,"uCameraMatrix"),this.mainTexture=r.getUniformLocation(e,"uMainTex")}}},77770:(r,e,t)=>{t.r(e),t.d(e,{Shader:()=>i});var a=t(65712),o=t(61507);class i{constructor(r,e,t){this.gl=void 0,this.program=void 0,this.attribLoc=void 0,this.uniformLoc=void 0,this.gl=r,this.program=a.GLShaderCommon.getShaderProgram(r,e,t,!0),null!==this.program&&(r.useProgram(this.program),this.attribLoc=new o.AttribLocations(r,this.program),this.uniformLoc=new o.UniformLocations(r,this.program))}activate(){return this.gl.useProgram(this.program),this}deactivate(){return this.gl.useProgram(null),this}dispose(){this.gl.getParameter(this.gl.CURRENT_PROGRAM)===this.program&&this.gl.useProgram(null),this.gl.deleteProgram(this.program)}setPerspective(r){return this.gl.uniformMatrix4fv(this.uniformLoc.perspective,!1,r),this}setModalMatrix(r){return this.gl.uniformMatrix4fv(this.uniformLoc.modalMatrix,!1,r),this}setCameraMatrix(r){return this.gl.uniformMatrix4fv(this.uniformLoc.cameraMatrix,!1,r),this}preRender(){}renderModal(r){return this.setModalMatrix(r.transform.getViewMatrix()),this.gl.bindVertexArray(r.mesh.vao),r.mesh.indexCount?this.gl.drawElements(r.mesh.drawMode,r.mesh.indexCount,this.gl.UNSIGNED_SHORT,0):this.gl.drawArrays(r.mesh.drawMode,0,r.mesh.vertexCount),this.gl.bindVertexArray(null),this}}}}]);
//# sourceMappingURL=77770.64ff5f72.chunk.js.map
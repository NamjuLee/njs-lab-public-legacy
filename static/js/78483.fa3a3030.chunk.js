"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[78483],{78483:(t,e,i)=>{i.r(e),i.d(e,{Demo250AppTetrisGame:()=>f,Solution:()=>g});var s=i(458);const h=t=>{let e=t.length||0,i=t[0]instanceof Array?t[0].length:0;if(0===i||0===e)return[];let s,h=0,l=[];for(s=0;s<i;s++)for(l[s]=[],h=0;h<e;h++)l[s][h]=t[h][s];return l};class l{constructor(t,e,i,h,l){this.tetrisGame=void 0,this.pixels=[],this.vec=void 0,this.widthMap=void 0,this.heightMap=void 0,this.widthPixel=1,this.heightPixel=1,this.colorFill=void 0,this.colorStroke=void 0,this.tetrisGame=t,this.vec=new s.h9(h,l),this.colorFill=s.mK.GetRandomColor(),this.colorStroke="rgba(0,0,0,0.5)",this.widthMap=e,this.heightMap=i,this.InitBlock()}InitBlock(){this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1])}UpdateMove(t){return t.Update(this)?(this.vec.y+=1,!0):!(this.vec.y+3>this.heightMap)}GetMat(){return this.pixels}UpdatePos(t,e){if(this.CheckValidatedGround(e))return;let i=0;if(t){if(i=1+this.vec.x,i<=this.widthMap-this.pixels.length){if(this.UpdateCheckWithMap(t,e))return;this.vec.x++}}else if(i=-1+this.vec.x,i>-1){if(this.UpdateCheckWithMap(t,e))return;this.vec.x--}}UpdateCheckWithMap(t,e){const i=this.GetMat();if(t)for(let s=0;s<i.length;++s)for(let t=0;t<i[s].length;++t){if(1===i[s][t]){let i=this.vec.x+t+1,h=this.vec.y+s;if(i<this.tetrisGame.heightNum){const t=e.pixels[h][i];if(t&&t.isFill)return!0}}}else for(let s=0;s<i.length;++s)for(let t=0;t<i[s].length;++t){if(1===i[s][t]){let i=this.vec.x+t-1,h=this.vec.y+s;const l=e.pixels[h][i];if(l&&l.isFill)return!0}}return!1}UpdateRot(t){return!1}CheckValidatedGround(t){const e=this.GetMat();for(let i=0;i<e.length;++i)for(let s=0;s<e[i].length;++s){if(1===e[i][s]){let e=this.vec.y+3;if(!(e<this.tetrisGame.heightNum))return!1;{const i=t.pixels[e][this.vec.x];if(this.vec.y+1>e&&i&&i.isFill)return!0}}}return!1}Render(t){for(let e=0;e<this.pixels.length;++e)for(let i=0;i<this.pixels[e].length;++i){let s=this.vec.Clone();s.x+=i,s.y+=e,this.RenderPixel(t,s)}}RenderPixel(t,e){t.beginPath(),t.rect(e.x*this.tetrisGame.scaleForRender,e.y*this.tetrisGame.scaleForRender,this.widthPixel*this.tetrisGame.scaleForRender,this.heightPixel*this.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()}}class o extends l{constructor(t,e,i,s,h){super(t,e,i,s,h),this.tetrisGame=void 0,this.vec=void 0,this.widthMap=void 0,this.heightMap=void 0,this.widthPixel=1,this.heightPixel=1,this.colorFill=void 0,this.colorStroke=void 0}InitBlock(){this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1])}UpdateMove(t){return t.Update(this)?(this.vec.y+=1,!0):!(this.vec.y+3>this.heightMap)}GetMat(){return this.pixels}UpdatePos(t,e){if(this.CheckValidatedGround(e))return;let i=0;if(t){if(i=1+this.vec.x,i<=this.widthMap-this.pixels[0].length){if(this.UpdateCheckWithMap(t,e))return;this.vec.x++}}else if(i=-1+this.vec.x,i>-1){if(this.UpdateCheckWithMap(t,e))return;this.vec.x--}}ShiftMatrix(t){}UpdateCheckWithMap(t,e){const i=this.GetMat();if(t)for(let s=0;s<i.length;++s)for(let t=0;t<i[s].length;++t){if(1===i[s][t]){let i=this.vec.x+t+1,h=this.vec.y+s;if(i<this.tetrisGame.heightNum){const t=e.pixels[h][i];if(t&&t.isFill)return!0}}}else for(let s=0;s<i.length;++s)for(let t=0;t<i[s].length;++t){if(1===i[s][t]){let i=this.vec.x+t-1,h=this.vec.y+s;const l=e.pixels[h][i];if(l&&l.isFill)return!0}}return!1}UpdateRot(t){const e=h(this.pixels);if(console.log(e),e[0].length>3&&t.width-4<this.vec.x)this.vec.x-=3;else if(this.vec.y>t.width){let i=!0;for(let s=0;s<e.length;++s)t.pixels[this.vec.y+s][this.vec.x].isFill&&(i=!1);if(!i)return!1}return this.pixels=e,!1}CheckValidatedGround(t){const e=this.GetMat();for(let i=0;i<e.length;++i)for(let s=0;s<e[i].length;++s){if(1===e[i][s]){let e=this.vec.y+3;if(!(e<this.tetrisGame.heightNum))return!1;{const i=t.pixels[e][this.vec.x];if(this.vec.y+1>e&&i&&i.isFill)return!0}}}return!1}Render(t){for(let e=0;e<this.pixels.length;++e)for(let i=0;i<this.pixels[e].length;++i){let s=this.vec.Clone();s.x+=i,s.y+=e,this.RenderPixel(t,s)}}RenderPixel(t,e){t.beginPath(),t.rect(e.x*this.tetrisGame.scaleForRender,e.y*this.tetrisGame.scaleForRender,this.widthPixel*this.tetrisGame.scaleForRender,this.heightPixel*this.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()}}class n extends l{constructor(t,e,i,s,h){super(t,e,i,s,h),this.tetrisGame=void 0,this.vec=void 0,this.widthMap=void 0,this.heightMap=void 0,this.widthPixel=1,this.heightPixel=1,this.colorFill=void 0,this.colorStroke=void 0}InitBlock(){this.pixels.push([1,1]),this.pixels.push([1,1])}UpdateMove(t){return t.Update(this)?(this.vec.y+=1,!0):!(this.vec.y+3>this.heightMap)}GetMat(){return this.pixels}UpdatePos(t,e){if(this.CheckValidatedGround(e))return;let i=0;if(t){if(i=1+this.vec.x,i<=this.widthMap-this.pixels[0].length){if(this.UpdateCheckWithMap(t,e))return;this.vec.x++}}else if(i=-1+this.vec.x,i>-1){if(this.UpdateCheckWithMap(t,e))return;this.vec.x--}}ShiftMatrix(t){}UpdateCheckWithMap(t,e){const i=this.GetMat();if(t)for(let s=0;s<i.length;++s)for(let t=0;t<i[s].length;++t){if(1===i[s][t]){let i=this.vec.x+t+1,h=this.vec.y+s;if(i<this.tetrisGame.heightNum){const t=e.pixels[h][i];if(t&&t.isFill)return!0}}}else for(let s=0;s<i.length;++s)for(let t=0;t<i[s].length;++t){if(1===i[s][t]){let i=this.vec.x+t-1,h=this.vec.y+s;const l=e.pixels[h][i];if(l&&l.isFill)return!0}}return!1}UpdateRot(t){const e=h(this.pixels);if(console.log(e),e[0].length>3&&t.width-4<this.vec.x)this.vec.x-=3;else if(this.vec.y>t.width){let i=!0;for(let s=0;s<e.length;++s)t.pixels[this.vec.y+s][this.vec.x].isFill&&(i=!1);if(!i)return!1}return this.pixels=e,!1}CheckValidatedGround(t){const e=this.GetMat();for(let i=0;i<e.length;++i)for(let s=0;s<e[i].length;++s){if(1===e[i][s]){let e=this.vec.y+3;if(!(e<this.tetrisGame.heightNum))return!1;{const i=t.pixels[e][this.vec.x];if(this.vec.y+1>e&&i&&i.isFill)return!0}}}return!1}Render(t){for(let e=0;e<this.pixels.length;++e)for(let i=0;i<this.pixels[e].length;++i){let s=this.vec.Clone();s.x+=i,s.y+=e,this.RenderPixel(t,s)}}RenderPixel(t,e){t.beginPath(),t.rect(e.x*this.tetrisGame.scaleForRender,e.y*this.tetrisGame.scaleForRender,this.widthPixel*this.tetrisGame.scaleForRender,this.heightPixel*this.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()}}class r extends l{constructor(t,e,i,s,h){super(t,e,i,s,h),this.tetrisGame=void 0,this.vec=void 0,this.widthMap=void 0,this.heightMap=void 0,this.widthPixel=1,this.heightPixel=1,this.colorFill=void 0,this.colorStroke=void 0}InitBlock(){this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1]),this.pixels.push([1])}UpdateMove(t){return t.Update(this)?(this.vec.y+=1,!0):!(this.vec.y+3>this.heightMap)}GetMat(){return this.pixels}UpdatePos(t,e){if(this.CheckValidatedGround(e))return;let i=0;if(t){if(i=1+this.vec.x,i<=this.widthMap-this.pixels[0].length){if(this.UpdateCheckWithMap(t,e))return;this.vec.x++}}else if(i=-1+this.vec.x,i>-1){if(this.UpdateCheckWithMap(t,e))return;this.vec.x--}}ShiftMatrix(t){}UpdateCheckWithMap(t,e){const i=this.GetMat();if(t)for(let s=0;s<i.length;++s)for(let t=0;t<i[s].length;++t){if(1===i[s][t]){let i=this.vec.x+t+1,h=this.vec.y+s;if(i<this.tetrisGame.heightNum){const t=e.pixels[h][i];if(t&&t.isFill)return!0}}}else for(let s=0;s<i.length;++s)for(let t=0;t<i[s].length;++t){if(1===i[s][t]){let i=this.vec.x+t-1,h=this.vec.y+s;const l=e.pixels[h][i];if(l&&l.isFill)return!0}}return!1}UpdateRot(t){const e=h(this.pixels);if(console.log(e),e[0].length>3&&t.width-4<this.vec.x)this.vec.x-=3;else if(this.vec.y>t.width){let i=!0;for(let s=0;s<e.length;++s)t.pixels[this.vec.y+s][this.vec.x].isFill&&(i=!1);if(!i)return!1}return this.pixels=e,!1}CheckValidatedGround(t){const e=this.GetMat();for(let i=0;i<e.length;++i)for(let s=0;s<e[i].length;++s){if(1===e[i][s]){let e=this.vec.y+3;if(!(e<this.tetrisGame.heightNum))return!1;{const i=t.pixels[e][this.vec.x];if(this.vec.y+1>e&&i&&i.isFill)return!0}}}return!1}Render(t){for(let e=0;e<this.pixels.length;++e)for(let i=0;i<this.pixels[e].length;++i){let s=this.vec.Clone();s.x+=i,s.y+=e,this.RenderPixel(t,s)}}RenderPixel(t,e){t.beginPath(),t.rect(e.x*this.tetrisGame.scaleForRender,e.y*this.tetrisGame.scaleForRender,this.widthPixel*this.tetrisGame.scaleForRender,this.heightPixel*this.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()}}class a{constructor(t,e,i){this.tetrisGame=void 0,this.width=void 0,this.height=void 0,this.pixels=[],this.numLineMax=-1,this.tetrisGame=t,this.numLineMax=i,this.width=e,this.height=i,this.Init()}Init(){for(let t=0;t<this.height;++t){let t=[];for(let e=0;e<this.width;++e)t.push(new c(this,"rgba(0,0,0,0)","rgba(0,0,0,0.15)"));this.pixels.push(t)}}Update(t){return!this.CheckCollision(t)||(this.tetrisGame.InitBlock(),!1)}isDone(){return 0===this.numLineMax}AddEmptyLine(){let t=[],e=[];for(let i=0;i<this.width;++i)e.push(new c(this,"rgba(0,0,0,0)","rgba(0,0,0,0.15)"));t.push(e),t.concat(this.pixels),console.log(t),this.pixels=t}RemoveLine(){const t=this.CheckLines();if(0===t.length)return!1;let e=0;const i=[];for(let s=0;s<t.length;++s){let t=[];for(let e=0;e<this.width;++e)t.push(new c(this,"rgba(0,0,0,0)","rgba(0,0,0,0.15)"));i.push(t),this.tetrisGame.UpdateUINumofLine()}for(let s=0;s<this.pixels.length;++s)t[e]===s?e++:i.push(this.pixels[s]);return this.pixels=i,!0}IsOver(){}CheckLines(){const t=[];for(let e=0;e<this.pixels.length;++e){let i=!0;for(let t=0;t<this.pixels[e].length;++t)this.pixels[e][t].isFill||(i=!1);i&&t.push(e)}return t}CheckCollision(t){if(0===this.pixels.length)return;const e=t.GetMat();let i=!1;for(let s=0;s<e.length;++s)for(let h=0;h<e[s].length;++h){if(1===e[s][h]){let e=t.vec.x+h,l=t.vec.y+s+1;(l>this.height-1||this.pixels[l][e]&&this.pixels[l][e].isFill)&&(i=!0)}}if(i){for(let i=0;i<e.length;++i)for(let s=0;s<e[i].length;++s){if(1===e[i][s]){const e=t.vec.x+s,h=t.vec.y+i+1;console.log(h,e),console.log(this.pixels),h<this.height+1&&(this.pixels[h-1][e].isFill=!0,this.pixels[h-1][e].colorFill=t.colorFill)}}return!0}return!1}ClonePixels(){const t=[];for(let e=0;e<this.pixels.length;++e){const i=[];for(let t=0;t<this.pixels[e].length;++t)i.push(this.pixels[e][t].DeepCopy());t.push(i)}return t}Render(t){let e=!0;for(let i=0;i<this.pixels.length;++i)for(let s=0;s<this.pixels[i].length;++s)this.pixels[i][s].isFill&&e&&(this.numLineMax=i,e=!1),this.pixels[i][s].Render(t,s,i)}}class c{constructor(t,e,i){this.pixelMap=void 0,this.isFill=!1,this.colorFill=void 0,this.colorStroke=void 0,this.width=1,this.height=1,this.pixelMap=t,this.colorFill=e,this.colorStroke=i}DeepCopy(){const t=new c(this.pixelMap,this.colorFill,this.colorStroke);return t.isFill=this.isFill,t}Render(t,e,i){t.beginPath(),t.rect(e*this.pixelMap.tetrisGame.scaleForRender,i*this.pixelMap.tetrisGame.scaleForRender,this.width*this.pixelMap.tetrisGame.scaleForRender,this.height*this.pixelMap.tetrisGame.scaleForRender),t.closePath(),t.fillStyle=this.colorFill,t.fill(),t.strokeStyle=this.colorStroke,t.stroke()}}let d;!function(t){t.left="left",t.right="right",t.rotate="rotate",t.down="down"}(d||(d={}));class p{constructor(t){this.tetrisGame=void 0,this.actions=[],this.tetrisGame=t}AddAction(t){this.actions.push(t)}GetActionuQueue(){return this.actions.shift()}Update(t){const e=t.GetMat(),i=this.tetrisGame.pixelMap.pixels;let s=this.tetrisGame.pixelMap.numLineMax-3<0?0:this.tetrisGame.pixelMap.numLineMax-3;console.log("startLine",s);let h=0;for(let l=s;l<i.length-3;++l)for(let t=0;t<i[l].length-2;++t){let s=!0;for(let h=0;h<e.length;++h)for(let o=0;o<e[h].length;++o){const n=t+o,r=i[l+h][n];1===e[h][o]&&r.isFill&&(s=!1)}s&&h++}console.log("startLine",s,"possbilities",h),this.UpdateAction()}Cost(t,e,i){}UpdateAction(){if(Math.random()<.9){const t=Math.random();t<.3?this.AddAction(d.left):.3<t&&t<.6?this.AddAction(d.right):.6<t&&t<.9?this.AddAction(d.rotate):this.AddAction(d.down)}}}class v{constructor(t,e,i,s,h){this.tetrisSystem=void 0,this.canvas=void 0,this.dx=2,this.dy=-2,this.paddleHeight=10,this.paddleWidth=75,this.paddleX=10,this.rightPressed=!1,this.leftPressed=!1,this.blockbase=void 0,this.pixelMap=void 0,this.player=void 0,this.timer=0,this.scaleForRender=10,this.speed=10,this.widthNum=void 0,this.heightNum=void 0,this.hasKeyboardInput=!1,this.numOfBlock=0,this.numOfLine=0,this.pause=!1,this.tetrisSystem=t,this.scaleForRender=s,this.widthNum=e,this.heightNum=i,this.canvas=this.tetrisSystem.CanvasCore.canvas,this.paddleX=(this.canvas.width-this.paddleWidth)/2,this.speed=h,document.onkeydown=t=>this.keyDownHandler(t),document.onkeyup=t=>this.keyUpHandler(t),this.Init()}keyDownHandler(t){this.hasKeyboardInput=!0,this.pause||("Right"===t.key||"ArrowRight"===t.key?(this.rightPressed=!0,this.blockbase.UpdatePos(!0,this.pixelMap)):"Left"===t.key||"ArrowLeft"===t.key?(this.leftPressed=!0,this.blockbase.UpdatePos(!1,this.pixelMap)):"Up"===t.key||"ArrowUp"===t.key?(this.leftPressed=!0,this.blockbase.UpdateRot(this.pixelMap)):"Down"!==t.key&&"ArrowDown"!==t.key||(this.leftPressed=!0,this.blockbase.UpdateMove(this.pixelMap)))}keyUpHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!1)}UpdateUINumofBlock(){this.numOfBlock++,this.tetrisSystem.CanvasCore.p0.innerText="Blocks: ".concat(this.numOfBlock)}UpdateUINumofLine(){this.numOfLine++,this.tetrisSystem.CanvasCore.p1.innerText="Lines removed: ".concat(this.numOfLine)}Init(){this.pause=!1,this.pixelMap=new a(this,this.widthNum,this.heightNum),this.player=new p(this),this.InitBlock(),this.InitUI()}InitUI(){this.numOfBlock=0,this.numOfLine=0,this.tetrisSystem.CanvasCore.p0.innerText="Blocks: ".concat(this.numOfBlock),this.tetrisSystem.CanvasCore.p1.innerText="Lines removed: ".concat(this.numOfLine)}InitBlock(){if(this.pixelMap.RemoveLine(),this.pixelMap.isDone())return void console.log("done!!!!!");const t=Math.random();t<.3?this.blockbase=new o(this,this.widthNum,this.heightNum,Math.floor(.5*this.widthNum),0):.3<t&&t<.6?this.blockbase=new n(this,this.widthNum,this.heightNum,Math.floor(.5*this.widthNum),0):.6<t&&(this.blockbase=new r(this,this.widthNum,this.heightNum,Math.floor(.5*this.widthNum),0)),this.UpdateUINumofBlock()}Render(t){if(this.pixelMap.Render(t),this.blockbase.Render(t),!this.hasKeyboardInput&&this.timer%2===0){const t=this.player.GetActionuQueue();if(t){switch(t){case d.left:this.blockbase.UpdatePos(!1,this.pixelMap);break;case d.right:this.blockbase.UpdatePos(!0,this.pixelMap);break;case d.rotate:this.blockbase.UpdateRot(this.pixelMap);break;case d.down:this.blockbase.UpdateMove(this.pixelMap)}}}this.timer%100===0&&this.player.Update(this.blockbase),this.pause||this.timer%this.speed!==0||this.blockbase.UpdateMove(this.pixelMap)||this.Init(),this.timer++}}class u{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"You";this.TetrisSystem=void 0,this.canvas=void 0,this.host=void 0,this.divLocalMain=void 0,this.divCanvas=void 0,this.divUI=void 0,this.ctx=void 0,this.timer=void 0,this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.width=void 0,this.height=void 0,this.name=void 0,this.pName=void 0,this.p0=void 0,this.p1=void 0,this.p2=void 0,this.TetrisSystem=t,this.width=e,this.height=i,this.name=s;const h=document.getElementById(t.id);h&&(this.host=h,this.InitCanvas())}InitCanvas(){const t=document.createElement("div");if(!t)return;this.divLocalMain=t,this.divLocalMain.style.display="inline-grid",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);const e=document.createElement("div");if(!e)return;this.divCanvas=e,this.divLocalMain.append(e);const i=document.createElement("canvas");if(i){this.canvas=i,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#dddddd";const t=this.canvas.getContext("2d");t&&(this.ctx=t,this.InitUI(),this.Init())}}InitUI(){const t=document.createElement("div");if(!t)return;this.divUI=t,this.divLocalMain.append(t),this.divUI.style.width="100%",this.divUI.style.display="grid";const e=document.createElement("button");e.textContent="reset",e.onclick=()=>{this.TetrisSystem.InitGame()},this.divUI.append(e),this.pName=document.createElement("p"),this.pName&&(this.divUI.append(this.pName),this.pName.style.width="max-content",this.pName.innerHTML="Player: ".concat(this.name),this.p0=document.createElement("p"),this.p0&&(this.divUI.append(this.p0),this.p0.style.width="max-content",this.p0.innerHTML="Blocks",this.p1=document.createElement("p"),this.p1&&(this.divUI.append(this.p1),this.p1.style.width="Lines removed: ",this.p1.innerHTML="",this.p2=document.createElement("p"),this.p2&&(this.divUI.append(this.p2),this.p2.style.width="max-content",this.p2.innerHTML=""))))}Init(){this.ctx.scale(1,1),this.EventBind(),this.Loop()}EventBind(){this.canvas.onclick=t=>{this.prevent=!1,this.timer=setTimeout((()=>{if(!this.prevent){if(!this.click)return;this.MouseClick(t)}this.prevent=!1}),this.delay)},this.canvas.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClick(t)},this.canvas.addEventListener("wheel",(t=>this.MouseWheel(t,t.deltaY))),this.canvas.onmousedown=t=>{this.click=!0,this.pressed=!0,this.MouseDown(t)},this.canvas.onmouseup=t=>{this.pressed=!1,this.MouseUp(t)},this.canvas.onmousemove=t=>{this.pressed&&(this.click=!1,this.MouseDrag(t)),this.MouseMove(t)},window.onresize=t=>this.Resize(t)}Resize(t){}Loop(){requestAnimationFrame((()=>{this.Loop()})),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)}Render(t){}MouseClick(t){}MouseDoubleClick(t){}MouseDown(t){}MouseUp(t){}MouseMove(t){}MouseDrag(t){}MouseWheel(t,e){}}class x{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:30;this.CanvasCore=void 0,this.tetrisGame=void 0,this.t=.9,this.id=void 0,this.scale=10,this.width=15,this.height=30,this.speed=30,this.m=new s.h9(0,0,0),this.id=t,this.scale=l,this.width=i,this.height=h,this.speed=o,this.CanvasCore=new u(this,this.width*this.scale,this.height*this.scale,e),this.Init(),this.InitGame()}Init(){this.CanvasCore.Render=t=>this.Render(t),this.CanvasCore.MouseDown=t=>this.MouseDown(t),this.CanvasCore.MouseClick=t=>this.MouseClick(t),this.CanvasCore.MouseDoubleClick=t=>this.MouseDoubleClick(t),this.CanvasCore.MouseUp=t=>this.MouseUp(t),this.CanvasCore.MouseMove=t=>this.MouseMove(t),this.CanvasCore.MouseDrag=t=>this.MouseDrag(t)}InitGame(){this.tetrisGame=new v(this,this.width,this.height,this.scale,this.speed)}Render(t){this.tetrisGame&&this.tetrisGame.Render(t)}MouseDown(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height)}MouseUp(t){}MouseMove(t){}MouseDrag(t){}MouseClick(t){}MouseDoubleClick(t){}}class m{constructor(t){let e={name:"NJ",width:6,height:10,scale:40,speed:12};new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"Kuan",width:15,height:10,scale:40,speed:5},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"NJ",width:6,height:10,scale:40,speed:9},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"Kuan",width:15,height:10,scale:40,speed:6},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"Kuan",width:15,height:10,scale:40,speed:5},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"NJ",width:6,height:10,scale:40,speed:9},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"Kuan",width:15,height:10,scale:40,speed:6},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"Kuan",width:15,height:10,scale:40,speed:5},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"NJ",width:6,height:10,scale:40,speed:9},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"Kuan",width:15,height:10,scale:40,speed:6},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"Kuan",width:15,height:10,scale:40,speed:5},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"NJ",width:6,height:10,scale:40,speed:9},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"Kuan",width:15,height:10,scale:40,speed:6},new x(t,e.name,e.width,e.height,e.scale,e.speed),e={name:"You",width:50,height:20,scale:40,speed:5},new x(t,e.name,e.width,e.height,e.scale,e.speed)}}class f{static Init(t){new f(t).Dummy()}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SandBox";this.implementation=void 0,this.host=void 0;const e=document.getElementById(t);e&&(this.host=e,this.host.style.overflow="auto"),this.implementation=new m(t)}Dummy(){}}class g{constructor(t){this.divHost=void 0,this.divHost=document.getElementById(t),f.Init(t)}destroy(){if(this.divHost)try{for(;this.divHost.firstChild;)this.divHost.removeChild(this.divHost.firstChild)}catch(t){console.error("Error in destroy method:",t)}else console.warn("divHost is undefined in destroy method")}}}}]);
//# sourceMappingURL=78483.fa3a3030.chunk.js.map
{"version":3,"file":"static/js/52362.03944189.chunk.js","mappings":"6JAGO,MAAMA,UAAiBC,EAAAA,GAE1BC,YAAYC,GACRC,MAAMD,GAEN,KAJJE,IAAkB,EAKlB,CACAC,WACKC,KAAKC,MAAMC,IAAIC,QAAkB,WAGlCC,EAAAA,EAAAA,eAAcC,sDAAgEC,MAAMC,IAChF,IAAIC,EAAQ,EACRC,EAAS,EACTC,EAAS,EACb,MAAMC,EAAOJ,EAAEK,MAAM,eACrB,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAKG,SAAUD,EAAG,CAClC,MAAME,EAASJ,EAAKE,GAAGD,MAAM,KACvBI,GAAOD,EAAO,GACdE,GAAOF,EAAO,GACfG,MAAMF,IAASE,MAAMD,KAGtBjB,KAAKF,IAAIqB,KAAK,CAACH,EAAKC,IACpBT,IACAC,GAAUQ,EACVP,GAAUM,EAElB,CAEAhB,KAAKoB,OAAOV,EAASF,EAAOC,EAASD,GACrCR,KAAKqB,KAAK,IACVrB,KAAKsB,OAAO,GAGpB,CACOC,OAAOC,GAIV,IAAK,IAAIX,EAAI,EAAGA,EAAIb,KAAKF,IAAIgB,SAAUD,EAAG,CACtC,MAAMY,EAAYzB,KAAK0B,SAAS1B,KAAKF,IAAIe,GAAG,GAAIb,KAAKF,IAAIe,GAAG,IAC5Dc,EAAYH,EAAKC,EAAU,GAAIA,EAAU,GAAIzB,KAAK4B,KAAO,EAAG,yBAChE,CAIJ,EAEJ,MAAMD,EAAc,CAACH,EAA+BK,EAAWC,EAAWC,EAAWC,KACjFR,EAAIS,UAAYD,EAChBR,EAAIU,YACJV,EAAIW,IAAIN,EAAGC,EAA6B,GAAzBM,KAAKC,IAAQ,GAAJN,GAAW,GAAQ,EAAa,EAAVK,KAAKE,IACnDd,EAAIe,YACJf,EAAIgB,MAAM,C","sources":["njslab/Workshop/workshop-mapping/08_CSV/index.ts"],"sourcesContent":["import { RendererJSAPI } from '../../../../lib'\r\nimport { getCSVFromURL } from 'njscore';\r\n\r\nexport class Solution extends RendererJSAPI {\r\n    pts: number[][] = [];\r\n    constructor(id: string) {\r\n        super(id);\r\n        // TODO\r\n        // You code goes here for one time operation\r\n    }\r\n    initPost(){\r\n        (this.mView.map.basemap as any) = 'streets';\r\n\r\n        // https://data.boston.gov/dataset/blue-bike-stations\r\n        getCSVFromURL(process.env.PUBLIC_URL + '/static/data/Blue_Bike_Stations.csv').then((d) => {\r\n            let count = 0;\r\n            let latSum = 0;\r\n            let lonSum = 0;\r\n            const line = d.split(/\\r\\n|\\r|\\n/g);\r\n            for (let i = 1; i < line.length; ++i) {\r\n                const values = line[i].split(',');\r\n                const lon = +values[5];\r\n                const lat = +values[4];\r\n                if (!isNaN(lon) && !isNaN(lat)) {\r\n                //     console.log(lon, lat);\r\n                    \r\n                    this.pts.push([lon, lat]);\r\n                    count++;\r\n                    latSum += lat;\r\n                    lonSum += lon;\r\n                }\r\n            }\r\n            // console.log(count)\r\n            this.center(lonSum / count, latSum / count);\r\n            this.zoom(11);\r\n            this.start();\r\n        });\r\n\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n        // TODO\r\n        // You code goes here for the rending loop\r\n\r\n        for (let i = 0; i < this.pts.length; ++i) { \r\n            const projected = this.toScreen(this.pts[i][0], this.pts[i][1]); \r\n            renderPoint(ctx, projected[0], projected[1], this.time + 3, 'rgba(10, 8, 255, 0.85)' );\r\n        }\r\n\r\n        // !! can stop render after this frame.\r\n        // this.isStatic = true;\r\n    }\r\n}\r\nconst renderPoint = (ctx: CanvasRenderingContext2D, x: number, y: number, t: number, color: string) => {\r\n    ctx.fillStyle = color;\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, (Math.sin(t * 0.8) + 4) * 2, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n};\r\n"],"names":["Solution","RendererJSAPI","constructor","id","super","pts","initPost","this","mView","map","basemap","getCSVFromURL","process","then","d","count","latSum","lonSum","line","split","i","length","values","lon","lat","isNaN","push","center","zoom","start","render","ctx","projected","toScreen","renderPoint","time","x","y","t","color","fillStyle","beginPath","arc","Math","sin","PI","closePath","fill"],"sourceRoot":""}
{"version":3,"file":"static/js/44101.c354e674.chunk.js","mappings":"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,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,EAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,EAAK,EAAK,IAAK,GAAK,GAAI,CAAC,EAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,EAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,EAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,EAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,EAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,EAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,IAAK,IAAK,IAAK,GAAK,GACvE,CAAC,IAAK,IAAK,IAAK,GAAK,GAAI,CAAC,EAAK,IAAK,IAAK,GAAK,GAAI,CAAC,EAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,EAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,EAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,EAAK,EAAK,IAAK,EAAK,GAAI,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,EAAK,IAAK,EAAK,EAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,EAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,EAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,EAAK,EAAK,IAAK,GACvE,CAAC,EAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,EAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,EAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,EAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,EAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,EAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,EAAK,IAAK,GACvE,CAAC,EAAK,IAAK,IAAK,EAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,EAAK,IAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,EAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,EAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,EAAK,IAAK,IAAK,GACvE,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,EAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,EAAK,EAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,EAAK,IAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,EAAK,IAAK,EAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,EAAK,GAAI,CAAC,IAAK,IAAK,IAAK,EAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,EAAK,IAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GACvE,CAAC,IAAK,EAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK,IAAK,EAAK,GACvE,CAAC,IAAK,IAAK,IAAK,IAAK,GAAI,CAAC,IAAK,IAAK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","sources":["lib/NJSCore/ML/TF/TFUtility.ts","lib/NJSCore/ML/Core/TFDataUtility.ts","njslab/Workshop/workshop-ml/AppTFEnv/Implementation/TFProject/Core/DefinitionIndeCanvasCore.ts","njslab/Workshop/workshop-ml/AppTFEnv/Implementation/TFProject/Definition/TFModel01HorsepowerAndMilesPerGallon.ts"],"sourcesContent":["import * as tf from '@tensorflow/tfjs';\r\nimport '@tensorflow/tfjs-backend-webgl';\r\n\r\nexport class TFUtility {\r\n\r\n    public static Playground() {\r\n        // this.ExeScalar();\r\n        // this.ExeAdd();\r\n        // this.ExeOperation();\r\n        // this.Tensor01();\r\n        // this.Tensor02();\r\n        // this.Tensor03();\r\n    //     console.log('Playground');\r\n    }\r\n\r\n    public static ExeScalar() {\r\n        const d = tf.scalar(10);\r\n    //     console.log('scalar.....');\r\n    //     console.log(d);\r\n        d.print();\r\n        d.print(true);\r\n\r\n        const d2 = tf.tensor([1, 2, 3]);\r\n        d2.print();\r\n        d2.print(true);\r\n\r\n        const d3 = tf.tensor1d([1, 2, 3]);\r\n        d3.print();\r\n        d3.print(true);\r\n\r\n        const d4 = tf.tensor([[1, 2], [3, 4]]);\r\n        d4.print();\r\n        //    d4.print(true);\r\n\r\n        const d5 = tf.tensor2d([[1, 2], [3, 4]]);\r\n        d5.print();\r\n        //    d5.print(true);\r\n        //    d4.add(d5).print();\r\n        const d6 = tf.tensor2d([1, 2, 3, 4, 5, 6], [2, 3]);\r\n        d6.print();\r\n\r\n        const length = 30;\r\n        const data = new Float32Array(length);\r\n        for (let i = 0; i < length; ++i) { data[i] = i; }\r\n        const d7 = tf.tensor2d(data, [10, 3]);\r\n        d7.print();\r\n\r\n        const length2 = 18;\r\n        const data2 = new Float32Array(length2);\r\n        for (let i = 0; i < length2; ++i) { data2[i] = i; }\r\n        const d8 = tf.tensor3d(data2, [2, 3, 3]);\r\n        d8.print();\r\n    }\r\n    public static ExeAdd() {\r\n        const d1 = tf.scalar(5);\r\n        const d2 = tf.tensor([1, 2, 3]).mul(d1);\r\n        d2.print();\r\n\r\n        const d3 = tf.tensor([1, 2, 3, 4, 5, 6], [2, 3]);\r\n        d3.print();\r\n        d3.mul(d1).print();\r\n        d3.add(d1).print();\r\n        d3.div(3).print();\r\n\r\n        // ..\r\n        const length = 30;\r\n        const data = new Float32Array(length);\r\n        for (let i = 0; i < length; ++i) { data[i] = i; }\r\n        const d4 = tf.tensor2d(data, [10, 3]);\r\n        d4.print();\r\n\r\n        const d5 = d4;\r\n        d5.print();\r\n\r\n        const d6 = d5.add(d4);\r\n        d6.print();\r\n\r\n        const d7 = d5.sub(d1);\r\n        d7.print();\r\n\r\n    }\r\n    public static ExeOperation() {\r\n\r\n        tf.tidy(() => {\r\n            const d1 = tf.tensor([1, 2, 3, 4, 5, 6], [2, 3], 'float32');\r\n            d1.print();\r\n\r\n            const d2 = tf.tensor([1, 2, 3, 4, 5, 6], [3, 2], 'float32');\r\n            d2.print();\r\n\r\n            d1.matMul(d2).print();\r\n\r\n            const d3 = d2.matMul(d1);\r\n            d3.print();\r\n\r\n            const d4 = tf.scalar(0.5);\r\n            d3.mul(d4).print();\r\n\r\n            const mathScore = tf.tensor1d([80, 90, 100, 80]);\r\n            const historyScore = tf.tensor1d([70, 70, 70, 70]);\r\n            mathScore.add(historyScore).div(2).print(); // print mean  // tensor num 10\r\n            mathScore.add(historyScore).div(2).abs().print(); // print mean  // tensor num 11\r\n\r\n        });\r\n        //\r\n    //     console.log(tf.memory().numTensors);\r\n\r\n    }\r\n    public static Tensor01() {\r\n        let data = tf.tensor([0, 1, 2, 3], [2, 2]);\r\n        data.print();\r\n        // [[0, 1],\r\n        // [2, 3]]\r\n\r\n        data = tf.tensor([0, 1, 2, 3, 4, 5, 6, 7]);\r\n        data.print(); // [0, 1, 2, 3, 4, 5, 6, 7]\r\n\r\n        data = tf.tensor([0, 1, 2, 3, 4, 5, 6, 7], [2, 2, 2]);\r\n        data.print();\r\n        //     [[[0, 1],\r\n        //     [2, 3]],\r\n        //    [[4, 5],\r\n        //     [6, 7]]]\r\n    }\r\n    public static Tensor02() {\r\n        let data: number[] = [];\r\n        for (let i = 0; i < 15; ++i) {\r\n            data.push(Math.random());\r\n        }\r\n        let shape = [3, 5];\r\n        let dataTensor = tf.tensor(data, shape);\r\n        dataTensor.print();\r\n\r\n        data = [];\r\n        for (let i = 0; i < 30; ++i) {\r\n            data.push(Math.random() * 100);\r\n        }\r\n        shape = [2, 3, 5];\r\n        dataTensor = tf.tensor(data, shape, 'int32');\r\n        dataTensor.print();\r\n\r\n        dataTensor = tf.tensor3d(data, [2, 3, 5], 'int32');\r\n        dataTensor.print();\r\n    }\r\n    public static Tensor03() {\r\n        let data: number[] = [];\r\n        for (let i = 0; i < 150000; ++i) {\r\n            data.push(Math.random());\r\n        }\r\n        let shape = [300, 500];\r\n        let dataTensor = tf.tensor(data, shape);\r\n        dataTensor.print();\r\n    //     console.log(tf.memory().numTensors);\r\n    }\r\n    constructor() {\r\n        //\r\n    }\r\n}\r\n\r\n","import * as tf from '@tensorflow/tfjs';\r\n\r\nexport class TFDataUtility {\r\n    static async getData() {\r\n        const carsDataReq = await fetch('https://storage.googleapis.com/tfjs-tutorials/carsData.json');\r\n        const carsData = await carsDataReq.json();\r\n        const cleaned = carsData.map((car: any) => ({\r\n            mpg: car.Miles_per_Gallon,\r\n            horsepower: car.Horsepower,\r\n        }))\r\n            .filter((car: any) => (car.mpg != null && car.horsepower != null));\r\n        return cleaned;\r\n    }\r\n    public static Get_XY_OneHot_TensorFromCSV(csv: number[][]) {\r\n        return tf.tidy(() => {\r\n            const dataByClass: number[][] = [];\r\n            const targetsByClass: number[] = [];\r\n            let targetLength = -1;\r\n            for (const example of csv) {\r\n                const data = example.slice(0, example.length - 1);\r\n                const target = example[example.length - 1];\r\n                dataByClass.push(data);\r\n                targetsByClass.push(target);\r\n                if (targetLength < target) { targetLength = target; }\r\n            }\r\n            // console.log(targetLength);\r\n            // console.log(targetsByClass);\r\n            const xs = tf.tensor2d(dataByClass, [dataByClass.length, dataByClass[0].length]);\r\n            const ys = tf.oneHot(tf.tensor1d(targetsByClass).toInt(), targetLength + 1);\r\n            return [xs, ys];\r\n        });\r\n    }\r\n    public static Get_XY_TensorFromCSV(csv: number[][]) {\r\n        return tf.tidy(() => {\r\n            const dataByClass: number[][] = [];\r\n            const targetsByClass: number[] = [];\r\n            let targetLength = -1;\r\n            for (const example of csv) {\r\n                const data = example.slice(0, example.length - 1);\r\n                const target = example[example.length - 1];\r\n                dataByClass.push(data);\r\n                targetsByClass.push(target);\r\n                if (targetLength < target) { targetLength = target; }\r\n            }\r\n            const xs = tf.tensor2d(dataByClass, [dataByClass.length, dataByClass[0].length]);\r\n            const ys = tf.tensor1d(targetsByClass);\r\n            return [xs, ys];\r\n        });\r\n    }\r\n\r\n    // tslint:disable-next-line:no-any\r\n    public static SplitTensorFromXY(xs: any, ys: any, testSplit: number = 0.5) {\r\n        const numTestExamples = Math.round(xs.shape[0] * testSplit);\r\n        const numTrainExamples = xs.shape[0] - numTestExamples;\r\n        const xTrain = xs.slice([0, 0], [numTrainExamples, xs.shape[1]]);\r\n        const xTest = xs.slice([numTrainExamples, 0], [numTestExamples, xs.shape[1]]);\r\n        const yTrain = ys.slice([0, 0], [numTrainExamples, ys.shape[1]]);\r\n        const yTest = ys.slice([numTrainExamples, 0], [numTestExamples, ys.shape[1]]);\r\n        return [xTrain, yTrain, xTest, yTest];\r\n\r\n        // return tf.tidy(() => {\r\n        //     const dataByClass = [];\r\n        //     const targetsByClass = [];\r\n        //     // for (let i = 0; i < IRIS_CLASSES.length; ++i) {\r\n        //     //     dataByClass.push([]);\r\n        //     //     targetsByClass.push([]);\r\n        //     // }\r\n        //     // for (const example of IRIS_DATA) {\r\n        //     //     const target = example[example.length - 1];\r\n        //     //     const data = example.slice(0, example.length - 1);\r\n        //     //     dataByClass[target].push(data);\r\n        //     //     targetsByClass[target].push(target);\r\n        //     // }\r\n        //     // console.log();\r\n\r\n        //     const xTrains = [];\r\n        //     const yTrains = [];\r\n        //     const xTests = [];\r\n        //     const yTests = [];\r\n        //     for (let i = 0; i < IRIS_CLASSES.length; ++i) {\r\n        //         const [xTrain, yTrain, xTest, yTest] = DataUtility.ConvertToTensors(dataByClass[i], targetsByClass[i], testSplit);\r\n        //         xTrains.push(xTrain);\r\n        //         yTrains.push(yTrain);\r\n        //         xTests.push(xTest);\r\n        //         yTests.push(yTest);\r\n        //     }\r\n\r\n        //     const concatAxis = 0;\r\n        //     return [\r\n        //         tf.concat(xTrains, concatAxis), tf.concat(yTrains, concatAxis),\r\n        //         tf.concat(xTests, concatAxis), tf.concat(yTests, concatAxis)\r\n        //     ];\r\n        // });\r\n\r\n    }\r\n    public static ConvertToTensors(data: number[][], targets: number[], testSplit: number) {\r\n    //     console.log('++');\r\n    //     console.log(data);\r\n    //     console.log(targets);\r\n    //     console.log(testSplit);\r\n\r\n        const numExamples = data.length;\r\n        if (numExamples !== targets.length) {\r\n            throw new Error('data and split have different numbers of examples');\r\n        }\r\n\r\n        const numTestExamples = Math.round(numExamples * testSplit);\r\n        const numTrainExamples = numExamples - numTestExamples;\r\n\r\n        const xDims = data[0].length;\r\n\r\n        // Create a 2D `tf.Tensor` to hold the feature data.\r\n        const xs = tf.tensor2d(data, [numExamples, xDims]);\r\n\r\n        // Create a 1D `tf.Tensor` to hold the labels, and convert the number label\r\n        // from the set {0, 1, 2} into one-hot encoding (.e.g., 0 --> [1, 0, 0]).\r\n        const ys = tf.oneHot(tf.tensor1d(targets).toInt(), 4); // IRIS_NUM_CLASSES\r\n\r\n        // Split the data into training and test sets, using `slice`.\r\n        const xTrain = xs.slice([0, 0], [numTrainExamples, xDims]);\r\n        const xTest = xs.slice([numTrainExamples, 0], [numTestExamples, xDims]);\r\n        const yTrain = ys.slice([0, 0], [numTrainExamples, 4]); // IRIS_NUM_CLASSES\r\n        const yTest = ys.slice([0, 0], [numTestExamples, 4]); // IRIS_NUM_CLASSES\r\n        return [xTrain, yTrain, xTest, yTest];\r\n    }\r\n\r\n    public static GetRandomNormal(num: number, mean: number = 0.0, stdDev: number = 0.55) {\r\n        return tf.randomNormal([num], mean, stdDev);\r\n    }\r\n    public static GetRandomNormalTensors(num: number = 1000) {\r\n\r\n        // let t0 = DataUtility.GetRandomNormal(num, 0.0, 0.55);\r\n        // let t1 = DataUtility.GetRandomNormal(num, 0.0, 0.03);\r\n        // t0.print();\r\n        // t1.print();\r\n\r\n    }\r\n\r\n    public static Shuffle(array: number[][]) {\r\n        var currentIndex = array.length, temp, randomIndex;\r\n\r\n        // While there remain elements to shuffle...\r\n        while (0 !== currentIndex) {\r\n            // Pick a remaining element...\r\n            randomIndex = Math.floor(Math.random() * currentIndex);\r\n            currentIndex -= 1;\r\n            // And swap it with the current element.\r\n            temp = array[currentIndex];\r\n            array[currentIndex] = array[randomIndex];\r\n            array[randomIndex] = temp;\r\n        }\r\n\r\n        return array;\r\n    }\r\n    // https://beta.observablehq.com/@tvirot/machine-learning-in-javascript-with-tensorflow-js#inputData\r\n    public static GetSyntheticDataTensor(totalNumData: number = 200, aCo: number = 0, bCo: number = 0, cCo: number = 0, dCo: number = 0, std: number = 0.2, needYNormal: boolean = false) {\r\n\r\n        return tf.tidy(() => {\r\n            const NUM_POINTS = totalNumData;\r\n            // const [a, b, c, d] = coeff.map(i => tf.scalar(i)); // a = tf.scalar(coeff[0]), and so on\r\n            const a = tf.scalar(aCo);\r\n            const b = tf.scalar(bCo);\r\n            const c = tf.scalar(cCo);\r\n            const d = tf.scalar(dCo);\r\n\r\n            const x = tf.randomUniform([NUM_POINTS], -1, 1);\r\n            const y = a.mul(x.pow(tf.scalar(3))).add(b.mul(x.square())).add(c.mul(x)).add(d).add(tf.randomNormal([NUM_POINTS], 0, std));\r\n\r\n            if (needYNormal) {\r\n                const ymin = y.min();\r\n                const ymax = y.max();\r\n                const theRange = ymax.sub(ymin);\r\n                const yNomalized = y.sub(ymin).div(theRange);\r\n                return { x, yNomalized };\r\n            }\r\n\r\n            return [x, y];\r\n        });\r\n    }\r\n    public static GetSyntheticData(totalNumData: number = 200, aCo: number = -0.2, bCo: number = -0.66, cCo: number = -0.1, dCo: number = 2.8, std: number = 0.2, needYNormal: boolean = false) {\r\n        return tf.tidy(() => {\r\n            const result = this.GetSyntheticDataTensor(totalNumData, aCo, bCo, cCo, dCo, std, needYNormal);\r\n            const xx = result[0].dataSync();\r\n            const yy = result[1].dataSync();\r\n            return { xx, yy };\r\n        });\r\n    }\r\n    public static GetIrisData() {\r\n        return [\r\n            [5.1, 3.5, 1.4, 0.2, 0], [4.9, 3.0, 1.4, 0.2, 0], [4.7, 3.2, 1.3, 0.2, 0],\r\n            [4.6, 3.1, 1.5, 0.2, 0], [5.0, 3.6, 1.4, 0.2, 0], [5.4, 3.9, 1.7, 0.4, 0],\r\n            [4.6, 3.4, 1.4, 0.3, 0], [5.0, 3.4, 1.5, 0.2, 0], [4.4, 2.9, 1.4, 0.2, 0],\r\n            [4.9, 3.1, 1.5, 0.1, 0], [5.4, 3.7, 1.5, 0.2, 0], [4.8, 3.4, 1.6, 0.2, 0],\r\n            [4.8, 3.0, 1.4, 0.1, 0], [4.3, 3.0, 1.1, 0.1, 0], [5.8, 4.0, 1.2, 0.2, 0],\r\n            [5.7, 4.4, 1.5, 0.4, 0], [5.4, 3.9, 1.3, 0.4, 0], [5.1, 3.5, 1.4, 0.3, 0],\r\n            [5.7, 3.8, 1.7, 0.3, 0], [5.1, 3.8, 1.5, 0.3, 0], [5.4, 3.4, 1.7, 0.2, 0],\r\n            [5.1, 3.7, 1.5, 0.4, 0], [4.6, 3.6, 1.0, 0.2, 0], [5.1, 3.3, 1.7, 0.5, 0],\r\n            [4.8, 3.4, 1.9, 0.2, 0], [5.0, 3.0, 1.6, 0.2, 0], [5.0, 3.4, 1.6, 0.4, 0],\r\n            [5.2, 3.5, 1.5, 0.2, 0], [5.2, 3.4, 1.4, 0.2, 0], [4.7, 3.2, 1.6, 0.2, 0],\r\n            [4.8, 3.1, 1.6, 0.2, 0], [5.4, 3.4, 1.5, 0.4, 0], [5.2, 4.1, 1.5, 0.1, 0],\r\n            [5.5, 4.2, 1.4, 0.2, 0], [4.9, 3.1, 1.5, 0.1, 0], [5.0, 3.2, 1.2, 0.2, 0],\r\n            [5.5, 3.5, 1.3, 0.2, 0], [4.9, 3.1, 1.5, 0.1, 0], [4.4, 3.0, 1.3, 0.2, 0],\r\n            [5.1, 3.4, 1.5, 0.2, 0], [5.0, 3.5, 1.3, 0.3, 0], [4.5, 2.3, 1.3, 0.3, 0],\r\n            [4.4, 3.2, 1.3, 0.2, 0], [5.0, 3.5, 1.6, 0.6, 0], [5.1, 3.8, 1.9, 0.4, 0],\r\n            [4.8, 3.0, 1.4, 0.3, 0], [5.1, 3.8, 1.6, 0.2, 0], [4.6, 3.2, 1.4, 0.2, 0],\r\n            [5.3, 3.7, 1.5, 0.2, 0], [5.0, 3.3, 1.4, 0.2, 0], [7.0, 3.2, 4.7, 1.4, 1],\r\n            [6.4, 3.2, 4.5, 1.5, 1], [6.9, 3.1, 4.9, 1.5, 1], [5.5, 2.3, 4.0, 1.3, 1],\r\n            [6.5, 2.8, 4.6, 1.5, 1], [5.7, 2.8, 4.5, 1.3, 1], [6.3, 3.3, 4.7, 1.6, 1],\r\n            [4.9, 2.4, 3.3, 1.0, 1], [6.6, 2.9, 4.6, 1.3, 1], [5.2, 2.7, 3.9, 1.4, 1],\r\n            [5.0, 2.0, 3.5, 1.0, 1], [5.9, 3.0, 4.2, 1.5, 1], [6.0, 2.2, 4.0, 1.0, 1],\r\n            [6.1, 2.9, 4.7, 1.4, 1], [5.6, 2.9, 3.6, 1.3, 1], [6.7, 3.1, 4.4, 1.4, 1],\r\n            [5.6, 3.0, 4.5, 1.5, 1], [5.8, 2.7, 4.1, 1.0, 1], [6.2, 2.2, 4.5, 1.5, 1],\r\n            [5.6, 2.5, 3.9, 1.1, 1], [5.9, 3.2, 4.8, 1.8, 1], [6.1, 2.8, 4.0, 1.3, 1],\r\n            [6.3, 2.5, 4.9, 1.5, 1], [6.1, 2.8, 4.7, 1.2, 1], [6.4, 2.9, 4.3, 1.3, 1],\r\n            [6.6, 3.0, 4.4, 1.4, 1], [6.8, 2.8, 4.8, 1.4, 1], [6.7, 3.0, 5.0, 1.7, 1],\r\n            [6.0, 2.9, 4.5, 1.5, 1], [5.7, 2.6, 3.5, 1.0, 1], [5.5, 2.4, 3.8, 1.1, 1],\r\n            [5.5, 2.4, 3.7, 1.0, 1], [5.8, 2.7, 3.9, 1.2, 1], [6.0, 2.7, 5.1, 1.6, 1],\r\n            [5.4, 3.0, 4.5, 1.5, 1], [6.0, 3.4, 4.5, 1.6, 1], [6.7, 3.1, 4.7, 1.5, 1],\r\n            [6.3, 2.3, 4.4, 1.3, 1], [5.6, 3.0, 4.1, 1.3, 1], [5.5, 2.5, 4.0, 1.3, 1],\r\n            [5.5, 2.6, 4.4, 1.2, 1], [6.1, 3.0, 4.6, 1.4, 1], [5.8, 2.6, 4.0, 1.2, 1],\r\n            [5.0, 2.3, 3.3, 1.0, 1], [5.6, 2.7, 4.2, 1.3, 1], [5.7, 3.0, 4.2, 1.2, 1],\r\n            [5.7, 2.9, 4.2, 1.3, 1], [6.2, 2.9, 4.3, 1.3, 1], [5.1, 2.5, 3.0, 1.1, 1],\r\n            [5.7, 2.8, 4.1, 1.3, 1], [6.3, 3.3, 6.0, 2.5, 2], [5.8, 2.7, 5.1, 1.9, 2],\r\n            [7.1, 3.0, 5.9, 2.1, 2], [6.3, 2.9, 5.6, 1.8, 2], [6.5, 3.0, 5.8, 2.2, 2],\r\n            [7.6, 3.0, 6.6, 2.1, 2], [4.9, 2.5, 4.5, 1.7, 2], [7.3, 2.9, 6.3, 1.8, 2],\r\n            [6.7, 2.5, 5.8, 1.8, 2], [7.2, 3.6, 6.1, 2.5, 2], [6.5, 3.2, 5.1, 2.0, 2],\r\n            [6.4, 2.7, 5.3, 1.9, 2], [6.8, 3.0, 5.5, 2.1, 2], [5.7, 2.5, 5.0, 2.0, 2],\r\n            [5.8, 2.8, 5.1, 2.4, 2], [6.4, 3.2, 5.3, 2.3, 2], [6.5, 3.0, 5.5, 1.8, 2],\r\n            [7.7, 3.8, 6.7, 2.2, 2], [7.7, 2.6, 6.9, 2.3, 2], [6.0, 2.2, 5.0, 1.5, 2],\r\n            [6.9, 3.2, 5.7, 2.3, 2], [5.6, 2.8, 4.9, 2.0, 2], [7.7, 2.8, 6.7, 2.0, 2],\r\n            [6.3, 2.7, 4.9, 1.8, 2], [6.7, 3.3, 5.7, 2.1, 2], [7.2, 3.2, 6.0, 1.8, 2],\r\n            [6.2, 2.8, 4.8, 1.8, 2], [6.1, 3.0, 4.9, 1.8, 2], [6.4, 2.8, 5.6, 2.1, 2],\r\n            [7.2, 3.0, 5.8, 1.6, 2], [7.4, 2.8, 6.1, 1.9, 2], [7.9, 3.8, 6.4, 2.0, 2],\r\n            [6.4, 2.8, 5.6, 2.2, 2], [6.3, 2.8, 5.1, 1.5, 2], [6.1, 2.6, 5.6, 1.4, 2],\r\n            [7.7, 3.0, 6.1, 2.3, 2], [6.3, 3.4, 5.6, 2.4, 2], [6.4, 3.1, 5.5, 1.8, 2],\r\n            [6.0, 3.0, 4.8, 1.8, 2], [6.9, 3.1, 5.4, 2.1, 2], [6.7, 3.1, 5.6, 2.4, 2],\r\n            [6.9, 3.1, 5.1, 2.3, 2], [5.8, 2.7, 5.1, 1.9, 2], [6.8, 3.2, 5.9, 2.3, 2],\r\n            [6.7, 3.3, 5.7, 2.5, 2], [6.7, 3.0, 5.2, 2.3, 2], [6.3, 2.5, 5.0, 1.9, 2],\r\n            [6.5, 3.0, 5.2, 2.0, 2], [6.2, 3.4, 5.4, 2.3, 2], [5.9, 3.0, 5.1, 1.8, 2],\r\n        ];\r\n    }\r\n    constructor() {\r\n        /* */\r\n    }\r\n}","import { IndependentPanelCanvas } from '../../../../../../../lib/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/IndependentPanelCanvas';\r\n\r\nimport { TFProject } from '..';\r\nexport class DefinitionIndeCanvasCore {\r\n    scene: TFProject;\r\n    indeCanvas: IndependentPanelCanvas;\r\n    mOffX = -12;\r\n    mOffY = -12;\r\n    constructor(scene: TFProject, width: number = 650, height: number = 350) {\r\n        this.scene = scene;\r\n        this.scene.definitions.push(this);\r\n        this.InitIndeCanvas(width, height);\r\n    }\r\n    InitIndeCanvas(width: number = 650, height: number = 350) {\r\n        if (this.scene.implementation.app.needUI) {\r\n            this.indeCanvas = new IndependentPanelCanvas(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper, 50, 50, width, height, true);\r\n        } else {\r\n            this.indeCanvas = new IndependentPanelCanvas(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper, 1, -25, width, height, true);\r\n        }\r\n        this.indeCanvas.title = 'TF Env';\r\n        this.indeCanvas.btnHam.isHidden = true;\r\n        this.indeCanvas.btnMini.isHidden = true;\r\n        this.indeCanvas.RenderIndependentCanvas = (ctx: CanvasRenderingContext2D) => (this.RenderIndependentCanvas(ctx));\r\n    }\r\n    get width() {\r\n        return this.indeCanvas.canvas.width;\r\n    }\r\n    get height() {\r\n        return this.indeCanvas.canvas.height;\r\n    }\r\n    Init(ctx: CanvasRenderingContext2D) {\r\n        //\r\n    }\r\n    RenderIndependentCanvas(ctx: CanvasRenderingContext2D) {\r\n        //\r\n    }\r\n    MouseMove(x: number, y: number) { /* */ }\r\n    MouseMovePre(x: number, y: number) {\r\n        if (!this.indeCanvas.IsMouseInsidePanel(x, y)) { return; }\r\n        this.MouseMove(x - this.indeCanvas.vec.x + this.mOffX, y - this.indeCanvas.vec.y - this.indeCanvas.HeadHeight + this.mOffY);\r\n    }\r\n    MouseDown(x: number, y: number) { /* */ }\r\n    MouseDownPre(x: number, y: number) {\r\n        if (!this.indeCanvas.IsMouseInsidePanel(x, y)) { return; }\r\n        this.MouseDown(x - this.indeCanvas.vec.x + this.mOffX, y - this.indeCanvas.vec.y - this.indeCanvas.HeadHeight + this.mOffY);\r\n    }\r\n    MouseUp(x: number, y: number) { /* */ }\r\n    MouseUpPre(x: number, y: number) {\r\n        if (!this.indeCanvas.IsMouseInsidePanel(x, y)) { return; }\r\n        this.MouseUp(x - this.indeCanvas.vec.x + this.mOffX, y - this.indeCanvas.vec.y - this.indeCanvas.HeadHeight + this.mOffY);\r\n    }\r\n    MouseDrag(x: number, y: number) { /* */ }\r\n    MouseDragPre(x: number, y: number) {\r\n        if (!this.indeCanvas.IsMouseInsidePanel(x, y)) { return; }\r\n        this.MouseDrag(x - this.indeCanvas.vec.x + this.mOffX, y - this.indeCanvas.vec.y - this.indeCanvas.HeadHeight + this.mOffY);\r\n    }\r\n    MouseLeftClick(x: number, y: number) { /* */ }\r\n    MouseLeftClickPre(x: number, y: number) {\r\n        if (!this.indeCanvas.IsMouseInsidePanel(x, y)) { return; }\r\n        this.MouseLeftClick(x - this.indeCanvas.vec.x + this.mOffX, y - this.indeCanvas.vec.y - this.indeCanvas.HeadHeight + this.mOffY);\r\n    }\r\n    MouseMiddleClick(x: number, y: number) { /* */ }\r\n    MouseMiddleClickPre(x: number, y: number) {\r\n        if (!this.indeCanvas.IsMouseInsidePanel(x, y)) { return; }\r\n        this.MouseMiddleClick(x - this.indeCanvas.vec.x + this.mOffX, y - this.indeCanvas.vec.y - this.indeCanvas.HeadHeight + this.mOffY);\r\n    }\r\n    MouseRightClick(x: number, y: number) { /* */ }\r\n    MouseRightClickPre(x: number, y: number) {\r\n        if (!this.indeCanvas.IsMouseInsidePanel(x, y)) { return; }\r\n        this.MouseRightClick(x - this.indeCanvas.vec.x + this.mOffX, y - this.indeCanvas.vec.y - this.indeCanvas.HeadHeight + this.mOffY);\r\n    }\r\n    MouseDoubleClick(x: number, y: number) { /* */ }\r\n    MouseDoubleClickPre(x: number, y: number) {\r\n        if (!this.indeCanvas.IsMouseInsidePanel(x, y)) { return; }\r\n        this.MouseDoubleClick(x - this.indeCanvas.vec.x + this.mOffX, y - this.indeCanvas.vec.y - this.indeCanvas.HeadHeight + this.mOffY);\r\n    }\r\n    MouseWheel(x: number, y: number, v: number) { /* */ }\r\n    MouseWheelPre(x: number, y: number, v: number) {\r\n        if (!this.indeCanvas.IsMouseInsidePanel(x, y)) { return; }\r\n        this.MouseWheel(x - this.indeCanvas.vec.x + this.mOffX, y - this.indeCanvas.vec.y - this.indeCanvas.HeadHeight + this.mOffY, v);\r\n    }\r\n\r\n}","import * as tf from '@tensorflow/tfjs';\r\nimport * as tfvis from '@tensorflow/tfjs-vis';\r\nimport { TFProject } from '..';\r\nimport { DefinitionIndeCanvasCore } from '../Core/DefinitionIndeCanvasCore';\r\n\r\nimport { NVector3, MathUtility } from '../../../lib';\r\n\r\nimport { TFDataUtility } from '../../../../../../../lib/NJSCore/ML/NMacineLearning';\r\n// // https://editor.p5js.org/codingtrain/sketches/UdXRZxF7e\r\nexport class TFModel01HorsepowerAndMilesPerGallon extends DefinitionIndeCanvasCore {\r\n\r\n    xpos: number = 100;\r\n    ypos: number = 100;\r\n\r\n    xspeed: number = 10;\r\n    yspeed: number = 10;\r\n\r\n    xdirection: number = 1;\r\n    ydirection: number = 1;\r\n\r\n    rad: number = 50;\r\n    vs: NVector3[] = [];\r\n    selVec: NVector3 | undefined = undefined;\r\n\r\n    // tfModel: ModelForHorsepowerGallon;\r\n\r\n    constructor(tfProjct: TFProject, width: number = 650, height: number = 350) {\r\n        super(tfProjct, width, height);\r\n        this.indeCanvas.title = 'TF Horsepower and Miles Per Gallon';\r\n        this.Init();\r\n\r\n    }\r\n    Init() {\r\n        // console.log(tf.version);\r\n\r\n        TFDataUtility.getData().then((d: any) => {\r\n            // this.tfModel = new ModelForHorsepowerGallon();\r\n            // this.train(d);\r\n            this.train(d);\r\n\r\n\r\n        });\r\n\r\n    }\r\n    async train(d: any) {\r\n        const tensorData = convertToTensor(d);\r\n        // console.log(tensorData);\r\n        const { inputs, labels } = tensorData;\r\n        // console.log(inputs, labels);\r\n        const model = createModel();\r\n\r\n        tfvis.show.modelSummary({ name: 'Model Summary' }, model);\r\n        // Train the model\r\n        await trainModel(model, inputs, labels);\r\n        // console.log('Done Training');\r\n        testModel(model, d, tensorData);\r\n    }\r\n    MouseDown(x: number, y: number) {\r\n        const m = new NVector3(this.MapX(x), this.MapY(y));\r\n        for (let i = 0; i < this.vs.length; ++i) {\r\n            if (NVector3.Distance(m, this.vs[i]) < 0.05) {\r\n                this.selVec = this.vs[i];\r\n                return;\r\n            }\r\n        }\r\n        this.vs.push(new NVector3(this.MapX(x), this.MapY(y)));\r\n        // console.log(this.vs);\r\n    }\r\n    MouseDoubleClick() {\r\n        // console.log(this.tfLinearRegression.dim);\r\n        // this.tfLinearRegression.dim++;\r\n    }\r\n    MouseMove(x: number, y: number) {\r\n        let selVec: undefined | NVector3 = undefined;\r\n        const m = new NVector3(this.MapX(x), this.MapY(y));\r\n        for (let i = 0; i < this.vs.length; ++i) {\r\n            let theDis = NVector3.Distance(m, this.vs[i]);\r\n            if (theDis < 0.05) {\r\n                selVec = this.vs[i];\r\n            }\r\n        }\r\n        if (selVec) {\r\n            this.selVec = selVec;\r\n        } else {\r\n            this.selVec = undefined;\r\n        }\r\n    }\r\n    MouseDrag(x: number, y: number) {\r\n        if (this.selVec) {\r\n            this.selVec.x = this.MapX(x);\r\n            this.selVec.y = this.MapY(y);\r\n        }\r\n    }\r\n    MouseUp() {\r\n        this.selVec = undefined;\r\n    }\r\n    MapX(v: number) {\r\n        return MathUtility.Remap(v, 0, this.width, -1, 1);\r\n    }\r\n    MapY(v: number) {\r\n        return MathUtility.Remap(v, 0, this.height, 1, -1);\r\n    }\r\n    GridLine(ctx: CanvasRenderingContext2D) {\r\n        ctx.strokeStyle = '#555555';\r\n        const xInterval = this.width / 20 - 1;\r\n        const yInterval = this.height / 20 - 1;\r\n        for (let i = 0; i < 20; i += 1) {\r\n            if (i === 10) {\r\n                ctx.lineWidth = 3;\r\n            } else {\r\n                ctx.lineWidth = 1;\r\n            }\r\n            let x0 = xInterval * i;\r\n            let y0 = 0;\r\n            let x1 = x0;\r\n            let y1 = this.height;\r\n            ctx.beginPath();\r\n            ctx.moveTo(x0, y0);\r\n            ctx.lineTo(x1, y1);\r\n            ctx.stroke();\r\n\r\n            x0 = 0;\r\n            y0 = yInterval * i;\r\n            x1 = this.width;\r\n            y1 = y0;\r\n            ctx.beginPath();\r\n            ctx.moveTo(x0, y0);\r\n            ctx.lineTo(x1, y1);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    RenderIndependentCanvas(ctx: CanvasRenderingContext2D) {\r\n        // ctx.translate(ctx.canvas.width * 0.5, ctx.canvas.height * 0.5);\r\n\r\n        ctx.fillStyle = '#000000';\r\n        ctx.beginPath();\r\n        ctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n\r\n        this.GridLine(ctx);\r\n\r\n        // this.GradientDescent();\r\n        if (this.vs.length > 1) {\r\n            const xx = [], yy = [];\r\n            for (let i = 0; i < this.vs.length; ++i) { xx.push(this.vs[i].x); yy.push(this.vs[i].y); }\r\n            // console.log(xx);\r\n            // console.log(yy);\r\n            // ............................ train\r\n            // this.tfModel.train(xx, yy);\r\n            // ............................ end train\r\n\r\n            this.RenderLine(ctx);\r\n        }\r\n        ctx.fillStyle = '#00ff00';\r\n        for (let i = 0; i < this.vs.length; ++i) {\r\n            ctx.beginPath();\r\n            ctx.arc(\r\n                MathUtility.Remap(this.vs[i].x, -1, 1, 0, this.width),\r\n                MathUtility.Remap(this.vs[i].y, -1, 1, this.height, 0),\r\n                5, 0, Math.PI * 2);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n\r\n        if (this.selVec) {\r\n            ctx.fillStyle = '#ffffff';\r\n            ctx.font = '15px Arial';\r\n            ctx.textAlign = 'center';\r\n            ctx.fillText(`x:${this.selVec.x.toFixed(3)}, y${this.selVec.y.toFixed(3)}`,\r\n                MathUtility.Remap(this.selVec.x, -1, 1, 0, this.width),\r\n                MathUtility.Remap(this.selVec.y, -1, 1, this.height, 0) - 9,\r\n            );\r\n        }\r\n\r\n    }\r\n    public RenderLine(ctx: CanvasRenderingContext2D) {\r\n        const curveX: number[] = [];\r\n        for (let x = -1; x <= 1; x += 0.05) {\r\n            curveX.push(x);\r\n        }\r\n    }\r\n}\r\n\r\nfunction testModel(model: tf.Sequential, inputData: any, normalizationData: any) {\r\n    const { inputMax, inputMin, labelMin, labelMax } = normalizationData;\r\n\r\n    // Generate predictions for a uniform range of numbers between 0 and 1;\r\n    // We un-normalize the data by doing the inverse of the min-max scaling\r\n    // that we did earlier.\r\n    const [xs, preds] = tf.tidy(() => {\r\n\r\n        const xs = tf.linspace(0, 1, 100);\r\n        const preds = model.predict(xs.reshape([100, 1])) as any;\r\n\r\n        const unNormXs = xs\r\n            .mul(inputMax.sub(inputMin))\r\n            .add(inputMin);\r\n\r\n        const unNormPreds = preds.mul(labelMax.sub(labelMin))\r\n            .add(labelMin);\r\n\r\n        // Un-normalize the data\r\n        return [unNormXs.dataSync(), unNormPreds.dataSync()];\r\n    });\r\n\r\n\r\n    const predictedPoints = Array.from(xs).map((val, i) => {\r\n        return { x: val, y: preds[i] };\r\n    });\r\n\r\n    const originalPoints = inputData.map((d: any) => ({\r\n        x: d.horsepower, y: d.mpg,\r\n    }));\r\n\r\n    tfvis.render.scatterplot(\r\n        { name: 'Model Predictions vs Original Data' },\r\n        { values: [originalPoints, predictedPoints], series: ['original', 'predicted'] },\r\n        {\r\n            xLabel: 'Horsepower',\r\n            yLabel: 'MPG',\r\n            height: 300\r\n        }\r\n    );\r\n}\r\n\r\n\r\nasync function trainModel(model: tf.Sequential, inputs: tf.Tensor<tf.Rank>, labels: tf.Tensor<tf.Rank>) {\r\n    // Prepare the model for training.\r\n    model.compile({\r\n        optimizer: tf.train.adam(),\r\n        loss: tf.losses.meanSquaredError,\r\n        metrics: ['mse'],\r\n    });\r\n\r\n    const batchSize = 32;\r\n    const epochs = 50;\r\n\r\n    return await model.fit(inputs, labels, {\r\n        batchSize,\r\n        epochs,\r\n        shuffle: true,\r\n        callbacks: tfvis.show.fitCallbacks(\r\n            { name: 'Training Performance' },\r\n            ['loss', 'mse'],\r\n            { height: 200, callbacks: ['onEpochEnd'] }\r\n        )\r\n    });\r\n}\r\n\r\n\r\nexport const createModel = () => {\r\n    // Create a sequential model\r\n    const model = tf.sequential();\r\n    // Add a single hidden layer\r\n    model.add(tf.layers.dense({\r\n        inputShape: [1],\r\n        units: 16,\r\n        useBias: true\r\n    }));\r\n    // Add an output layer\r\n    model.add(tf.layers.dense({\r\n        units: 1,\r\n        useBias: true\r\n    }));\r\n    return model;\r\n};\r\nexport const convertToTensor = (data: any) => {\r\n    // Wrapping these calculations in a tidy will dispose any\r\n    // intermediate tensors.\r\n\r\n    return tf.tidy(() => {\r\n        // Step 1. Shuffle the data\r\n        tf.util.shuffle(data);\r\n\r\n        // Step 2. Convert data to Tensor\r\n        const inputs = data.map((d: any) => d.horsepower);\r\n        const labels = data.map((d: any) => d.mpg);\r\n\r\n        const inputTensor = tf.tensor2d(inputs, [inputs.length, 1]);\r\n        const labelTensor = tf.tensor2d(labels, [labels.length, 1]);\r\n\r\n        // Step 3. Normalize the data to the range 0 - 1 using min-max scaling\r\n        const inputMax = inputTensor.max();\r\n        const inputMin = inputTensor.min();\r\n        const labelMax = labelTensor.max();\r\n        const labelMin = labelTensor.min();\r\n\r\n        const normalizedInputs = inputTensor.sub(inputMin).div(inputMax.sub(inputMin));\r\n        const normalizedLabels = labelTensor.sub(labelMin).div(labelMax.sub(labelMin));\r\n\r\n        return {\r\n            inputs: normalizedInputs,\r\n            labels: normalizedLabels,\r\n            // Return the min/max bounds so we can use them later.\r\n            inputMax,\r\n            inputMin,\r\n            labelMax,\r\n            labelMin,\r\n        };\r\n    });\r\n};"],"names":["TFUtility","d","tf","print","d2","d3","data","Float32Array","i","data2","d1","mul","add","div","d4","d5","sub","matMul","mathScore","historyScore","abs","push","Math","random","shape","dataTensor","constructor","TFDataUtility","static","carsDataReq","fetch","json","map","car","mpg","Miles_per_Gallon","horsepower","Horsepower","filter","csv","dataByClass","targetsByClass","targetLength","example","slice","length","target","toInt","xs","ys","testSplit","numTestExamples","round","numTrainExamples","xTrain","xTest","targets","numExamples","Error","xDims","num","mean","stdDev","array","temp","randomIndex","currentIndex","floor","totalNumData","aCo","bCo","cCo","dCo","std","needYNormal","NUM_POINTS","a","b","c","x","y","pow","square","ymin","min","theRange","max","yNomalized","result","this","GetSyntheticDataTensor","xx","dataSync","yy","DefinitionIndeCanvasCore","scene","width","height","indeCanvas","mOffX","mOffY","definitions","InitIndeCanvas","implementation","app","needUI","IndependentPanelCanvas","viewController","NUIWrapper","NUI","independentPanelWrapper","title","btnHam","isHidden","btnMini","RenderIndependentCanvas","ctx","canvas","Init","MouseMove","MouseMovePre","IsMouseInsidePanel","vec","HeadHeight","MouseDown","MouseDownPre","MouseUp","MouseUpPre","MouseDrag","MouseDragPre","MouseLeftClick","MouseLeftClickPre","MouseMiddleClick","MouseMiddleClickPre","MouseRightClick","MouseRightClickPre","MouseDoubleClick","MouseDoubleClickPre","MouseWheel","v","MouseWheelPre","TFModel01HorsepowerAndMilesPerGallon","tfProjct","super","xpos","ypos","xspeed","yspeed","xdirection","ydirection","rad","vs","selVec","undefined","then","train","async","tensorData","convertToTensor","inputs","labels","model","createModel","tfvis","name","compile","optimizer","loss","metrics","batchSize","epochs","fit","shuffle","callbacks","trainModel","inputData","normalizationData","inputMax","inputMin","labelMin","labelMax","preds","predict","reshape","unNormXs","unNormPreds","predictedPoints","Array","from","val","originalPoints","values","series","xLabel","yLabel","testModel","m","NVector3","MapX","MapY","MathUtility","GridLine","strokeStyle","xInterval","yInterval","lineWidth","x0","y0","x1","y1","beginPath","moveTo","lineTo","stroke","fillStyle","rect","closePath","fill","RenderLine","arc","PI","font","textAlign","fillText","toFixed","curveX","inputShape","units","useBias","inputTensor","labelTensor"],"sourceRoot":""}
"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[22903],{17485:(t,e,i)=>{i.d(e,{T:()=>h});var s=i(17760),o=i(98925);class n{constructor(t){this.canvas=void 0,this.hostDiv=void 0,this.ctx=void 0,this.t=0,this.camera=void 0,this.scene=void 0,this.renderer=void 0,this.controls=void 0,this.requestFrame=void 0,this.loop=()=>{this.requestFrame=requestAnimationFrame(this.loop),this.controls.update(),this.update(this.scene),this.renderer.render(this.scene,this.camera),this.t+=.01},this.hostDiv=document.getElementById(t),this.initCanvas()}initCanvas(){s.Tme.DEFAULT_UP.set(0,1,0),this.scene=new s.xsS,this.scene.background=new s.Ilk(0),this.scene.castShadow=!0,this.renderer=new s.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(this.hostDiv.clientWidth/this.hostDiv.clientHeight),this.renderer.domElement.id="Three",this.renderer.domElement.style.position="absolute",this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight),this.hostDiv.appendChild(this.renderer.domElement),this.camera=new s.cPb(30,this.hostDiv.clientWidth/this.hostDiv.clientHeight,1,5e3),this.controls=new o.OrbitControls(this.camera,this.renderer.domElement),this.camera.position.set(20,20,20),this.controls.update(),this.canvas=this.renderer.domElement,this.init()}init(){this.eventBind()}eventBind(){this.renderer.domElement.onmousedown=t=>this.mouseDown(t),this.renderer.domElement.onmouseup=t=>this.mouseUp(t),this.renderer.domElement.onmousemove=t=>this.mouseMove(t),this.renderer.domElement.addEventListener("click",(t=>this.mouseClick(t))),window.addEventListener("resize",(()=>this.onWindowResize()))}onWindowResize(){this.camera.aspect=this.hostDiv.clientWidth/this.hostDiv.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight)}start(){this.loop()}mouseDown(t){}mouseUp(t){}mouseClick(t){}mouseDClick(t){}mouseMove(t){}mouseDrag(t){}update(t){}destroy(){for(window.removeEventListener("resize",(()=>this.onWindowResize())),cancelAnimationFrame(this.requestFrame),this.requestFrame=void 0;this.hostDiv.lastChild;)this.hostDiv.removeChild(this.hostDiv.lastChild)}}class h extends n{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main"),this.pointLight=void 0,this.raycaster=new s.iMs,this.mouse=new s.FM8,this.m=new s.Pa4,this.sphere=void 0,this.ground=void 0,this.axis=void 0,this.grid=void 0,this.arrayMesh=[],this.arrayPoint=[],this.arrayArrow=[],this.render=t=>{},this.mouseClickPost=t=>{},this.initPost(),this.start()}initPost(){const t=new s.Mig(5592405);this.scene.add(t),this.pointLight=new s.cek(16777215,100),this.pointLight.position.x=10,this.pointLight.castShadow=!0,this.scene.add(this.pointLight),this.axis=new s.y8_(5),this.axis.position.y=.001,this.scene.add(this.axis);this.grid=new s.VLJ(50,100,4473924,3289650),this.scene.add(this.grid);const e=new s._12(50,50),i=new s.vBJ({color:65793,side:s.ehD,transparent:!0,opacity:0});this.ground=new s.Kj0(e,i),this.ground.rotation.x=-Math.PI/2,this.scene.add(this.ground);const o=new s.vBJ({color:65280}),n=new s.xo$(.05,50,50),h=new s.Kj0(n,o);h.translateX(1),this.sphere=h,this.scene.add(h)}reset(){this.arrayMesh=[],this.arrayPoint=[],this.arrayArrow=[];for(let t=this.scene.children.length-1;t>=0;t--){let e=this.scene.children[t];this.scene.remove(e)}this.initPost()}set showGrid(t){this.grid.visible=t}set showAxis(t){this.axis.visible=t}add(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.scene.add(t),i&&(this.arrayMesh.push(t),this.arrayPoint.push(e))}addArrow(t,e){const i=new s.tGC(e,t,1,"#f00");this.arrayArrow.push(i),this.scene.add(i)}addPoint(t){const e=new s.vBJ({color:16777215}),i=new s.xo$(.1,20,20),o=new s.Kj0(i,e);o.translateX(t.vec.x),o.translateY(t.vec.z),o.translateZ(t.vec.y),this.add(o,t),this.addArrow(t.vec,t.velocity)}mouseMove(t){console.log("mouseMove"),this.picking(t)}picking(t){this.mouse.x=t.offsetX/this.renderer.domElement.clientWidth*2-1,this.mouse.y=-t.offsetY/this.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const e=this.raycaster.intersectObjects([...this.arrayMesh]);if(e.length>0)return console.log(e[0].point.x,e[0].point.y,e[0].point.z),this.m.set(e[0].point.x,e[0].point.y,e[0].point.z),e[0].object!==this.sphere&&this.sphere.position.set(e[0].point.x,e[0].point.y,e[0].point.z),e;const i=this.raycaster.intersectObjects([this.ground]);i.length>0&&(this.m.set(i[0].point.x,i[0].point.y,i[0].point.z),this.sphere.position.set(i[0].point.x,i[0].point.y,i[0].point.z))}mouseClick(t){console.log("mouseClick");const e=this.picking(t);e&&console.log({mesh:e}),console.log("mouseClick"),this.mouseClickPost(t)}update(t){this.render(t),this.arrayMesh.forEach(((t,e)=>{t.position.x=this.arrayPoint[e].vec.x,t.position.y=this.arrayPoint[e].vec.z,t.position.z=this.arrayPoint[e].vec.y})),this.arrayArrow.forEach(((t,e)=>{t.position.x=this.arrayPoint[e].vec.x,t.position.y=this.arrayPoint[e].vec.z,t.position.z=this.arrayPoint[e].vec.y;const i=new s.Pa4(this.arrayPoint[e].velocity.x,this.arrayPoint[e].velocity.z,this.arrayPoint[e].velocity.y),o=.5*i.length();t.setLength(o,.1,.1),t.setDirection(i)}));const e=new s.yGw;e.makeRotationY(.011*Math.PI),this.pointLight.position.applyMatrix4(e)}}},98053:(t,e,i)=>{i.d(e,{V:()=>s});const s=t=>{const e=document.createElement("div");e.style.display="flex";const i=document.createElement("input");i.type="checkbox",i.defaultChecked=!1;const s=document.createElement("div");return s.textContent=t,s.style.color="#aaa",e.appendChild(i),e.appendChild(s),{div:e,checkBox:i}}},22903:(t,e,i)=>{i.r(e),i.d(e,{Solution:()=>n});var s=i(17485),o=i(98053);class n{constructor(t){this.div=void 0,this.renderer=void 0,this.m=[0,0],this.t=0,this.pts=[],this.div=document.getElementById(t),this.renderer=new s.T(t),this.renderer.mouseClickPost=t=>this.mouseClick(t),this.renderer.render=t=>this.render(t),this.initDom(),this.init()}initDom(){const t=document.createElement("div");t.style.position="absolute",this.div.appendChild(t);const e=document.createElement("button");e.textContent="reset",e.onclick=()=>{this.reset(),this.init()},t.append(e);const i=(0,o.V)("grid");t.append(i.div),i.checkBox.checked=!0,i.checkBox.onchange=()=>{!0===i.checkBox.checked?this.renderer.showGrid=!0:this.renderer.showGrid=!1};const s=(0,o.V)("axis");t.append(s.div),s.checkBox.checked=!0,s.checkBox.onchange=()=>{!0===s.checkBox.checked?this.renderer.showAxis=!0:this.renderer.showAxis=!1}}reset(){this.renderer.reset(),this.t=0,this.pts=[]}init(){for(let t=-10;t<25;t++)for(let e=-10;e<10;e++){const i=new h(t,e,Math.sin(t*e*.1)+10);this.pts.push(i),this.renderer.addPoint(i)}}render(t){this.pts.forEach((t=>{t.force=new a(0,0,-9.81),t.move(this.t,.985)})),this.t+=.001}mouseMove(t,e){}renderMouse(t){}mouseClick(t){console.log("ddd"),console.log(this.renderer.m);const e=this.renderer.m,i=new h(e.x,e.z,e.y);this.pts.push(i),this.renderer.addPoint(i)}destroy(){this.renderer.destroy()}}class h{constructor(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.vec=void 0,this.velocity=void 0,this.force=new a(0,0,0),this.mass=10,this.r=10,this.damping=.99-.01*Math.random(),this.vec=new a(t,e,i),this.velocity=new a(s,o,n)}move(t){this.velocity=r(this.velocity,this.damping),this.velocity=d(this.velocity,r(this.force,t/this.mass)),this.vec=d(this.vec,r(this.velocity,t)),this.vec.z<0&&(this.vec.z=0,this.velocity.z<0&&(this.velocity.z=-this.velocity.z))}}const r=(t,e)=>c(t,e),c=(t,e)=>new a(t.x*e,t.y*e,t.z*e),d=(t,e)=>new a(t.x+e.x,t.y+e.y,t.z+e.z);class a{constructor(t,e,i){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}}}}]);
//# sourceMappingURL=22903.5ebc6753.chunk.js.map
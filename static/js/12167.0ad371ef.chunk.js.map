{"version":3,"file":"static/js/12167.0ad371ef.chunk.js","mappings":"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","sources":["njslab/Workshop/workshop-ml/AppTFEnv/Model/AppCoreWrapper/IOWrapper/EventInteraction/MouseInteraction.ts","njslab/Workshop/workshop-ml/AppTFEnv/Model/AppCoreWrapper/IOWrapper/index.ts","njslab/Workshop/workshop-ml/AppTFEnv/Model/AppCoreWrapper/index.ts"],"sourcesContent":["import { CLICK_TYPE, ActiveCommandBase } from '../../../../lib';\r\nimport { Model } from '../../..';\r\n\r\nexport interface IMouseInteractionMenu {\r\n  MouseInteractionMenu: (mouseEventData: MouseEventData) => void;\r\n}\r\nexport class MouseEventData {\r\n  model: Model;\r\n  x: number = -1; y: number = -1; z: number = -1;\r\n  preX: number = -1; preY: number = -1; preZ: number = -1;\r\n  yGLPicking: number;\r\n  command: ActiveCommandBase; // = new CActiveCommandNone(this.app.activeCommands);\r\n  CLICK_TYPE: CLICK_TYPE = CLICK_TYPE.MOVE;\r\n  isDown: boolean = false;\r\n  isDoubleClick: boolean = false;\r\n  isMove: boolean = false;\r\n  pressedShift: boolean = false;\r\n  pressedAlt: boolean = false;\r\n  pressedCtrl: boolean = false;\r\n\r\n  lat: number = -1;\r\n  long: number = -1;\r\n  wheel: number = 0;\r\n  preWheel: number = 0;\r\n  isActive: boolean = true;\r\n  // premEvent: MouseEventData;\r\n  native: MouseEvent;\r\n  constructor(model?: Model) {\r\n    if (model !== null && model !== undefined) { this.model = model; }\r\n  }\r\n  DeepCopy() {\r\n    let mEvent = new MouseEventData(this.model);\r\n    mEvent.x = this.x; mEvent.y = this.y; mEvent.z = this.z; mEvent.preX = this.preX; mEvent.preY = this.preY; mEvent.preZ = this.preZ;\r\n    mEvent.pressedAlt = this.pressedAlt; mEvent.pressedShift = this.pressedShift; mEvent.pressedCtrl = this.pressedCtrl;\r\n    mEvent.isDoubleClick = this.isDoubleClick; mEvent.isDown = this.isDown; mEvent.isMove = this.isMove;\r\n    mEvent.lat = this.lat; mEvent.long = this.long; mEvent.wheel = this.wheel; mEvent.preWheel = this.preWheel;\r\n    mEvent.yGLPicking = this.yGLPicking;\r\n    mEvent.CLICK_TYPE = this.CLICK_TYPE;\r\n    mEvent.command = this.command;\r\n    mEvent.native = this.native;\r\n    return mEvent;\r\n  }\r\n}\r\nexport class MouseInteraction {\r\n  mouseInteractionUI: IMouseInteractionMenu;\r\n  mouseEventDataPre: MouseEventData = new MouseEventData();\r\n  model: Model;\r\n  isEnable: boolean = true;\r\n  clickCount: number = 0;\r\n  click: boolean = false;\r\n  prevent: boolean = false;\r\n  delay: number = 250;\r\n  timer: NodeJS.Timer | number;\r\n  down: boolean = false;\r\n  e: MouseEventData;\r\n  private _stopPropagation: boolean = false;\r\n\r\n  constructor(model: Model) {\r\n    this.model = model;\r\n  }\r\n  InitNativeMouseEvent(div: HTMLElement) {\r\n    div.onclick = (e: MouseEvent) => {\r\n      this.prevent = false;\r\n      this.timer = setTimeout(\r\n        () => {\r\n          if (!this.prevent) {\r\n            this.MouseClick(e);\r\n          }\r\n          this.prevent = false;\r\n        },\r\n        this.delay);\r\n    };\r\n    div.ondblclick = (e: MouseEvent) => {\r\n      clearTimeout(this.timer as number);\r\n      this.prevent = true;\r\n      this.MouseDoubleClick(e);\r\n    };\r\n    div.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\r\n    div.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\r\n    div.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\r\n    div.addEventListener('wheel', (e: WheelEvent) => this.MouseWheel(e, e.deltaY));\r\n  }\r\n  MouseDown(e: MouseEvent) {\r\n    this.click = true;\r\n    this.down = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOWN;\r\n    mEvent.isDown = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseClick(e: MouseEvent) {\r\n    if (!this.click) { return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    if (e.button === 0) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.LEFT;\r\n    } else if (e.button === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.MIDDLE;\r\n    } else if (e.button === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseDoubleClick(e: MouseEvent) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOUBLE;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseDrag(e: MouseEvent) {\r\n    this.click = false;\r\n    this.prevent = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    mEvent.isDown = true;\r\n    if (e.buttons === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    } else if (e.buttons === 4) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_MIDDLE;\r\n    } else if (e.buttons === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseMove(e: MouseEvent) {\r\n    if (this.down) { this.MouseDrag(e); return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.MOVE;\r\n    mEvent.isDown = true;\r\n    this.prevent = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseUp(e: MouseEvent) {\r\n    this.down = false;\r\n    this.click = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.UP;\r\n    mEvent.isDown = false;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseWheel(e: MouseEvent, v: number) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.wheel = v;\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.WHEEL;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  CommonEventBuilder(e: MouseEvent): MouseEventData {\r\n    let mEvent: MouseEventData = new MouseEventData(this.model);\r\n    mEvent.preX = this.mouseEventDataPre.x;\r\n    mEvent.preY = this.mouseEventDataPre.y;\r\n    // mEvent.premEvent = this.mouseEventDataPre;\r\n\r\n    mEvent.pressedShift = e.shiftKey;\r\n    mEvent.pressedAlt = e.altKey;\r\n    mEvent.pressedCtrl = e.ctrlKey;\r\n\r\n    mEvent.x = e.offsetX;\r\n    mEvent.y = e.offsetY;\r\n    mEvent.preWheel = this.mouseEventDataPre.wheel;\r\n    mEvent.wheel = 0;\r\n    mEvent.native = e;\r\n    this.mouseEventDataPre = mEvent;\r\n    this.e = mEvent;\r\n    return mEvent;\r\n  }\r\n  get stopPropagation() {\r\n    return this._stopPropagation;\r\n  }\r\n  set stopPropagation(v: boolean) {\r\n    if (v) {\r\n      this._stopPropagation = v;\r\n    } else {\r\n      setTimeout(() => { this._stopPropagation = v; }, 500);\r\n      // this._stopPropagation = v;\r\n    }\r\n  }\r\n  MouseEvenEmitting(mouseEventData: MouseEventData) {\r\n    // if (this.model.appCoreWrapper.appAccessibility.mode === INTERACTION_MODE.OBSERVE_VIEWER) { return; }\r\n\r\n    this.MouseEventEmittingForViewController(mouseEventData);\r\n    if (this._stopPropagation) { return; }\r\n    this.MouseEventEmittingForModel(mouseEventData);\r\n  }\r\n  MouseEventEmittingForViewController(mouseEventData: MouseEventData) {\r\n    if (this.mouseInteractionUI) { this.mouseInteractionUI.MouseInteractionMenu(mouseEventData); }\r\n  }\r\n  MouseEventEmittingForModel(mouseEventData: MouseEventData) {\r\n    mouseEventData.model.controllerCoreWrapper.activeCommandController.MouseEventController(mouseEventData);\r\n  }\r\n}","import { AppCoreWrapper } from '..';\r\n\r\nimport { MouseInteraction } from './EventInteraction/MouseInteraction';\r\n\r\nexport class IOWrapper {\r\n    appCoreWrapper: AppCoreWrapper;\r\n    mouseInteraction: MouseInteraction;\r\n\r\n    constructor(appCoreWrapper: AppCoreWrapper) {\r\n        this.appCoreWrapper = appCoreWrapper;\r\n\r\n        this.mouseInteraction = new MouseInteraction(this.appCoreWrapper.model);\r\n    }\r\n    InitEventListener(div: HTMLDivElement) {\r\n        this.mouseInteraction.InitNativeMouseEvent(div);\r\n        this.Resize();\r\n    }\r\n    private Resize() {\r\n        // document.onresize = ((e:UIEvent)=>( this.ReSizeWindow(e) ));\r\n        // div.addEventListener('onresize', (e: UIEvent) =>this.ReSizeWindow(e) );\r\n        // console.log('dddd');\r\n\r\n        window.addEventListener('resize', (e: UIEvent) => this.ReSizeWindow(e));\r\n\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    ReSizeWindow(e: any) {\r\n        const size = this.appCoreWrapper.model.modelViewCoreWrapper.viewWrapper.divHost;\r\n        this.appCoreWrapper.model.graphicsCoreWrapper.canvasWrapper.canvas.ResizeCanvas(size.clientWidth, size.clientHeight);\r\n    }\r\n}","import { AppProperties, BrowserUtility, AppAccessibility } from '../../lib';\r\n\r\nimport { Model } from '..';\r\n\r\nimport { IOWrapper } from './IOWrapper';\r\n\r\nexport class AppCoreWrapper {\r\n    model: Model;\r\n\r\n    public appProperties: AppProperties;\r\n    public appAccessibility: AppAccessibility;\r\n    public browserUtility: BrowserUtility;\r\n\r\n    ioWrapper: IOWrapper;\r\n\r\n    constructor(model: Model, id: string, ) {\r\n        this.model = model;\r\n\r\n        this.appProperties = new AppProperties();\r\n        this.browserUtility = new BrowserUtility();\r\n\r\n        this.ioWrapper = new IOWrapper(this);\r\n    }\r\n}"],"names":["MouseEventData","constructor","model","x","y","z","preX","preY","preZ","yGLPicking","command","CLICK_TYPE","isDown","isDoubleClick","isMove","pressedShift","pressedAlt","pressedCtrl","lat","long","wheel","preWheel","isActive","native","undefined","this","DeepCopy","mEvent","MouseInteraction","mouseInteractionUI","mouseEventDataPre","isEnable","clickCount","click","prevent","delay","timer","down","e","_stopPropagation","InitNativeMouseEvent","div","onclick","setTimeout","MouseClick","ondblclick","clearTimeout","MouseDoubleClick","onmousedown","MouseDown","onmouseup","MouseUp","onmousemove","MouseMove","addEventListener","MouseWheel","deltaY","CommonEventBuilder","MouseEvenEmitting","button","MouseDrag","buttons","v","shiftKey","altKey","ctrlKey","offsetX","offsetY","stopPropagation","mouseEventData","MouseEventEmittingForViewController","MouseEventEmittingForModel","MouseInteractionMenu","controllerCoreWrapper","activeCommandController","MouseEventController","IOWrapper","appCoreWrapper","mouseInteraction","InitEventListener","Resize","window","ReSizeWindow","size","modelViewCoreWrapper","viewWrapper","divHost","graphicsCoreWrapper","canvasWrapper","canvas","ResizeCanvas","clientWidth","clientHeight","AppCoreWrapper","id","appProperties","appAccessibility","browserUtility","ioWrapper","AppProperties","BrowserUtility"],"sourceRoot":""}
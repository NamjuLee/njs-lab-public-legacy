{"version":3,"file":"static/js/35088.c0f445bc.chunk.js","mappings":"sKAGO,MAAMA,EAoBTC,YAAYC,EAAYC,GAAmB,KAnB3CD,UAAI,OACJC,SAAG,OACHC,YAAM,OACNC,SAAG,OACHC,UAAoB,EAAM,KAC1BC,KAAe,EAAE,KACjBC,YAAwB,CAAC,EAAG,GAAG,KAC/BC,gBAA4B,CAAC,EAAG,GAAG,KACnCC,eAAS,OACTC,0BAAoB,OAEpBC,SAAG,OAEHC,gBAA0B,EAAM,KAChCC,QAAkB,EAAE,KACpBC,gBAA0B,EAAK,KAE/BC,SAAmB,EAAK,KACxBC,OAAiB,EAEbC,KAAKhB,KAAOA,EACZgB,KAAKf,IAAMA,EACXe,KAAKC,OACLD,KAAKE,UACT,CACQD,OACJ,MAAMf,EAASiB,SAASC,cAAc,UACtC,GAAIlB,EAAQ,CACRc,KAAKd,OAASA,EACdc,KAAKd,OAAOmB,MAAQL,KAAKf,IAAIqB,YAC7BN,KAAKd,OAAOqB,OAASP,KAAKf,IAAIuB,aAC9BR,KAAKf,IAAIwB,OAAOT,KAAKd,QACrB,MAAMC,EAAMa,KAAKd,OAAOwB,WAAW,MAC/BvB,IACAa,KAAKb,IAAMA,EACXa,KAAKZ,UAAW,EAExB,CACJ,CACQc,WACJF,KAAKV,YAAY,GAA6B,GAAxBU,KAAKb,IAAID,OAAOmB,MACtCL,KAAKV,YAAY,GAA8B,GAAzBU,KAAKb,IAAID,OAAOqB,OAEtCP,KAAKR,UAAY,IAAImB,EAAAA,GACrBX,KAAKP,qBAAuB,IAAImB,EAAAA,GAAqB,IACrDZ,KAAKa,YAELb,KAAKc,MACT,CACOA,OACH,IAAIC,EAASC,YAAYC,MAGzB,GAFAjB,KAAKR,UAAU0B,YAEXlB,KAAKP,qBAAqB0B,MAAQ,GAClC,GAAwC,IAApCnB,KAAKP,qBAAqB0B,MAC1BC,uBAAsB,KAAQpB,KAAKc,MAAM,IAEzCd,KAAKqB,UAAUrB,KAAKb,UACjB,GAAwC,IAApCa,KAAKP,qBAAqB0B,MAC7BnB,KAAKL,eACLyB,uBAAsB,KAAQpB,KAAKc,MAAM,IAO7Cd,KAAKqB,UAAUrB,KAAKb,UACjB,GAAwC,IAApCa,KAAKP,qBAAqB0B,MAAa,CAQ9C,GAPInB,KAAKL,eACLyB,uBAAsB,KAAQpB,KAAKc,MAAM,IAMxCd,KAAKP,qBAAqB6B,KAI3B,OAHAtB,KAAKqB,UAAUrB,KAAKb,KACpBa,KAAKP,qBAAqB8B,cAIlC,OAE2C,IAApCvB,KAAKP,qBAAqB0B,OAC7BnB,KAAKL,gBAQTK,KAAKqB,UAAUrB,KAAKb,KAExB,IAAIqC,EAAQR,YAAYC,MACxBjB,KAAKN,IAAG,kBAAcM,KAAKP,qBAAqB0B,MAAK,2BAAmBnB,KAAKJ,UAAS,kBAAUI,KAAKR,UAAUiC,UAAUC,QAAQ,GAAE,4BAAoBF,EAAQT,GAAQW,QAAQ,GAAE,kBAErL,CACOC,YAAc3B,KAAKP,qBAAqB0B,MAAQ,EAAGnB,KAAKc,MAAQ,CAChEc,YAAc5B,KAAKP,qBAAqB0B,MAAQ,EAAGnB,KAAKc,MAAQ,CAChEe,YAAc7B,KAAKP,qBAAqB0B,MAAQ,EAAGnB,KAAKc,MAAQ,CAChEgB,kBACH9B,KAAKP,qBAAqB6B,MAAO,CACrC,CACOT,YACHb,KAAKP,qBAAqBsC,QAC1BC,YAAW,KACPhC,KAAKP,qBAAqB0B,MAAQ,EAClCnB,KAAKc,MAAM,GACZ,IACP,CACOmB,YACHjC,KAAKP,qBAAqBsC,QAC1BC,YAAW,KACPhC,KAAKP,qBAAqB0B,MAAQ,EAClCnB,KAAKc,MAAM,GACZ,IACP,CACOoB,YACHlC,KAAKP,qBAAqBsC,QAC1BC,YAAW,KACPhC,KAAKP,qBAAqB0B,MAAQ,EAClCnB,KAAKc,MAAM,GACZ,IACP,CACOqB,MAAMhD,GAETa,KAAKb,IAAIiD,UAAU,EAAG,EAAGpC,KAAKb,IAAID,OAAOmB,MAAOL,KAAKb,IAAID,OAAOqB,OAEpE,CACO8B,KAAKC,GAKJA,EAAEC,MAAQ,EACVvC,KAAKX,MAAoB,IAAZW,KAAKX,MAOlBmD,QAAQ9C,IAAI,MAAOM,KAAKX,MACxBW,KAAKX,MAAoB,IAAZW,KAAKX,KAc1B,CACOoD,YAAYH,GAGf,OAFAA,EAAEI,GAAMJ,EAAEK,GAAK3C,KAAKV,YAAY,IAAMU,KAAKX,KAC3CiD,EAAEM,GAAMN,EAAEO,GAAK7C,KAAKV,YAAY,IAAMU,KAAKX,KACpCiD,CACX,CACOQ,IAAIR,GACP,IAAKtC,KAAKF,QAAW,OACrB,MAAMiD,EAAOT,EAAEK,GAAKL,EAAEU,MAChBC,EAAOX,EAAEO,GAAKP,EAAEY,MACtBlD,KAAKV,YAAY,IAAMyD,EACvB/C,KAAKV,YAAY,IAAM2D,CAC3B,CACOE,cACHnD,KAAKP,qBAAqB6B,MAAO,CACrC,CACOD,UAAUlC,GACRa,KAAKZ,WACVY,KAAKmC,MAAMnC,KAAKb,KAChBa,KAAKb,IAAIiE,OACTpD,KAAKb,IAAIkE,UAAUrD,KAAKV,YAAY,GAAIU,KAAKV,YAAY,IACzDU,KAAKb,IAAImE,MAAMtD,KAAKX,KAAMW,KAAKX,MAI/BW,KAAKuD,OAAOpE,GAEZa,KAAKb,IAAIqE,UACb,CACOD,OAAOpE,GACV,EC7LD,IAAKsE,ECQAC,GDHX,SALWD,GAAAA,EAAU,YAAVA,EAAU,gBAAVA,EAAU,cAAVA,EAAU,cAAVA,EAAU,YAAVA,EAAU,sBAAVA,EAAU,0BAAVA,EAAU,wBAAVA,EAAU,YAAVA,EAAU,gBAAVA,EAAU,QAAVA,EAAU,YAAVA,EAAU,0BAAVA,EAAU,wBAKrB,CALWA,IAAAA,EAAU,KAwBf,MAAME,EAmBT5E,cAAe,KAlBf2D,GAAa,EAAE,KAACE,GAAa,EAAE,KAACgB,GAAa,EAAE,KAC/CC,MAAgB,EAAE,KAACC,MAAgB,EAAE,KAACC,MAAgB,EAAE,KACxDpB,IAAc,EAAE,KAACE,IAAc,EAAE,KACjCG,OAAiB,EAAE,KAACE,OAAiB,EAAE,KACvCc,gBAAU,OACVC,aAAO,OACPR,WAAyBA,EAAWS,KAAK,KACzCC,QAAkB,EAAM,KACxBC,eAAyB,EAAM,KAC/BC,QAAkB,EAAM,KACxBC,cAAwB,EAAM,KAC9BC,YAAsB,EAAM,KAC5BC,aAAuB,EAAM,KAC7BjC,MAAgB,EAAE,KAClBkC,SAAmB,EAAE,KACrBrF,UAAoB,EAAK,KAEzBsF,YAAM,CAGN,CACOC,WACH,IAAIC,EAAS,IAAIjB,EAYjB,OAXAiB,EAAOlC,EAAI1C,KAAK0C,EAAGkC,EAAOhC,EAAI5C,KAAK4C,EAAGgC,EAAOhB,EAAI5D,KAAK4D,EACtDgB,EAAOf,KAAO7D,KAAK6D,KAAMe,EAAOd,KAAO9D,KAAK8D,KAAMc,EAAOb,KAAO/D,KAAK+D,KACrEa,EAAOjC,GAAK3C,KAAK0C,EAAGkC,EAAO/B,GAAK7C,KAAK4C,EACrCgC,EAAO5B,MAAQhD,KAAKgD,MAAO4B,EAAO1B,MAAQlD,KAAKkD,MAC/C0B,EAAOL,WAAavE,KAAKuE,WAAYK,EAAON,aAAetE,KAAKsE,aAAcM,EAAOJ,YAAcxE,KAAKwE,YACxGI,EAAOR,cAAgBpE,KAAKoE,cAAeQ,EAAOT,OAASnE,KAAKmE,OAAQS,EAAOP,OAASrE,KAAKqE,OAC7FO,EAAOrC,MAAQvC,KAAKuC,MAAOqC,EAAOH,SAAWzE,KAAKyE,SAClDG,EAAOZ,WAAahE,KAAKgE,WACzBY,EAAOnB,WAAazD,KAAKyD,WACzBmB,EAAOX,QAAUjE,KAAKiE,QACtBW,EAAOF,OAAS1E,KAAK0E,OACdE,CACX,EE1DG,MAAMC,EAaX9F,YAAY+F,GAAuB,KAZnCC,wBAAkB,OAClBC,kBAAoC,IAAIrB,EAAiB,KACzDsB,UAAoB,EAAK,KACzBC,WAAqB,EAAE,KACvBC,OAAiB,EAAM,KACvBC,SAAmB,EAAM,KACzBC,MAAgB,IAAI,KACpBC,WAAK,OACLC,MAAgB,EAAM,KACtBjD,OAAC,OACOkD,kBAA4B,EAAM,KAC1CV,eAAS,EAEP9E,KAAK8E,UAAYA,CACnB,CACOW,qBAAqBxG,GAC1BA,EAAIyG,QAAWpD,IACbtC,KAAKoF,SAAU,EACfpF,KAAKsF,MAAQtD,YACX,KACOhC,KAAKoF,SACRpF,KAAK2F,WAAWrD,GAElBtC,KAAKoF,SAAU,CAAK,GAEtBpF,KAAKqF,MAAM,EAEfpG,EAAI2G,WAActD,IAChBuD,aAAa7F,KAAKsF,OAClBtF,KAAKoF,SAAU,EACfpF,KAAK8F,iBAAiBxD,EAAE,EAE1BrD,EAAI8G,YAAezD,IAAoBtC,KAAKgG,UAAU1D,EAAE,EACxDrD,EAAIgH,UAAa3D,IAAoBtC,KAAKkG,QAAQ5D,EAAE,EACpDrD,EAAIkH,YAAe7D,IAAoBtC,KAAKoG,UAAU9D,EAAE,EACxDrD,EAAIoH,iBAAiB,SAAU/D,GAAkBtC,KAAKsG,WAAWhE,EAAGA,EAAEiE,SACxE,CACOP,UAAU1D,GACftC,KAAKmF,OAAQ,EACbnF,KAAKuF,MAAO,EACZ,IAAIX,EAAS5E,KAAKwG,mBAAmBlE,GACrCsC,EAAOnB,WAAaA,EAAWgD,KAC/B7B,EAAOT,QAAS,EAChBnE,KAAK0G,kBAAkB9B,EACzB,CACOe,WAAWrD,GAChB,IAAKtC,KAAKmF,MAAS,OACnB,IAAIP,EAAS5E,KAAKwG,mBAAmBlE,GACpB,IAAbA,EAAEqE,OACJ/B,EAAOnB,WAAaA,EAAWmD,KACT,IAAbtE,EAAEqE,OACX/B,EAAOnB,WAAaA,EAAWoD,OACT,IAAbvE,EAAEqE,SACX/B,EAAOnB,WAAaA,EAAWqD,OAEjC9G,KAAK0G,kBAAkB9B,EACzB,CACOkB,iBAAiBxD,GACtB,IAAIsC,EAAS5E,KAAKwG,mBAAmBlE,GACrCsC,EAAOnB,WAAaA,EAAWsD,OAC/B/G,KAAK0G,kBAAkB9B,EACzB,CACOoC,UAAU1E,GACftC,KAAKmF,OAAQ,EACbnF,KAAKoF,SAAU,EACf,IAAIR,EAAS5E,KAAKwG,mBAAmBlE,GACrCsC,EAAOnB,WAAaA,EAAWwD,KAC/BrC,EAAOT,QAAS,EACE,IAAd7B,EAAE4E,QACJtC,EAAOnB,WAAaA,EAAWwD,KACR,IAAd3E,EAAE4E,QACXtC,EAAOnB,WAAaA,EAAW0D,YACR,IAAd7E,EAAE4E,UACXtC,EAAOnB,WAAaA,EAAW2D,YAEjCpH,KAAK0G,kBAAkB9B,EACzB,CACOwB,UAAU9D,GACf,GAAItC,KAAKuF,KAA2B,YAAnBvF,KAAKgH,UAAU1E,GAChC,IAAIsC,EAAS5E,KAAKwG,mBAAmBlE,GACrCsC,EAAOnB,WAAaA,EAAWS,KAC/BU,EAAOT,QAAS,EAChBnE,KAAKoF,SAAU,EACfpF,KAAK0G,kBAAkB9B,EACzB,CACOsB,QAAQ5D,GACbtC,KAAKuF,MAAO,EACZvF,KAAKmF,OAAQ,EACb,IAAIP,EAAS5E,KAAKwG,mBAAmBlE,GACrCsC,EAAOnB,WAAaA,EAAW4D,GAC/BzC,EAAOT,QAAS,EAChBnE,KAAK0G,kBAAkB9B,EACzB,CACO0B,WAAWhE,EAAegF,GAC/B,IAAI1C,EAAS5E,KAAKwG,mBAAmBlE,GACrCsC,EAAOrC,MAAQ+E,EACf1C,EAAOnB,WAAaA,EAAW8D,MAC/BvH,KAAK0G,kBAAkB9B,EACzB,CACO4B,mBAAmBlE,GACxB,IAAIsC,EAAyB,IAAIjB,EAmBjC,OAlBAiB,EAAO5B,MAAQhD,KAAKgF,kBAAkBrC,GACtCiC,EAAO1B,MAAQlD,KAAKgF,kBAAkBnC,GACtC+B,EAAOf,KAAO7D,KAAKgF,kBAAkBtC,EACrCkC,EAAOd,KAAO9D,KAAKgF,kBAAkBpC,EAGrCgC,EAAON,aAAehC,EAAEkF,SACxB5C,EAAOL,WAAajC,EAAEmF,OACtB7C,EAAOJ,YAAclC,EAAEoF,QAEvB9C,EAAOjC,GAAKL,EAAEqF,QACd/C,EAAO/B,GAAKP,EAAEsF,QACdhD,EAAOH,SAAWzE,KAAKgF,kBAAkBzC,MACzCqC,EAAOrC,MAAQ,EACfqC,EAAOF,OAASpC,EAChBsC,EAAS5E,KAAK8E,UAAU9F,KAAKE,OAAOuD,YAAYmC,GAChD5E,KAAKgF,kBAAoBJ,EACzB5E,KAAKsC,EAAIsC,EACFA,CACT,CACWiD,sBACT,OAAO7H,KAAKwF,gBACd,CACWqC,oBAAgBP,GACrBA,EACFtH,KAAKwF,iBAAmB8B,EAExBtF,YAAW,KAAQhC,KAAKwF,iBAAmB8B,CAAC,GAAK,IAErD,CACQZ,kBAAkBoB,GACxB9H,KAAK+H,oCAAoCD,GACrC9H,KAAKwF,kBACTxF,KAAKgI,2BAA2BF,EAClC,CACQC,oCAAoCD,GACtC9H,KAAK+E,oBAAsB/E,KAAK+E,mBAAmBkD,qBAAqBH,EAC9E,CACQE,2BAA2BF,GACjC9H,KAAK8E,UAAU9F,KAAKkJ,wBAAwBC,qBAAqBL,EACnE,EChJK,MAAMM,EAITrJ,YAAYC,GAAa,KAHzBA,UAAI,OACJqJ,sBAAgB,EAGZrI,KAAKhB,KAAOA,EAEZgB,KAAKqI,iBAAmB,IAAIxD,EAAiB7E,KACjD,CACOsI,kBAAkBrJ,GACrBe,KAAKqI,iBAAiB5C,qBAAqBxG,GAC3Ce,KAAKuI,QACT,CACQA,SAKJC,OAAOnC,iBAAiB,UAAW/D,GAAetC,KAAKyI,aAAanG,IAExE,CAEAmG,aAAanG,GAET,ECvBD,MAAMoG,EAIT3J,YAAYC,GAAa,KAHzBA,UAAI,OACJ2J,MAAkB,IAAIC,EAAAA,GAAS,EAAG,GAG9B5I,KAAKhB,KAAOA,CAChB,CACOmJ,qBAAqB7F,GACxB,MAAMuG,EAAMvG,EAAEqC,WACdkE,EAAInG,EAAIJ,EAAEK,GACVkG,EAAIjG,EAAIN,EAAEO,GACV7C,KAAKhB,KAAK8J,IAAIb,qBAAqBY,GAC/B7I,KAAKhB,KAAK8J,IAAIjB,kBAElB7H,KAAKhB,KAAKE,OAAOiE,cAGjBnD,KAAKhB,KAAK+J,OAAOC,gBAAgBb,qBAAqB7F,GAElDA,EAAEmB,aAAeA,EAAAA,GAAAA,KAEVnB,EAAEmB,aAAeA,EAAAA,GAAAA,OAEjBnB,EAAEmB,aAAeA,EAAAA,GAAAA,WAEjBnB,EAAEmB,aAAeA,EAAAA,GAAAA,OAEjBnB,EAAEmB,aAAeA,EAAAA,GAAAA,KAEjBnB,EAAEmB,aAAeA,EAAAA,GAAAA,KAEjBnB,EAAEmB,aAAeA,EAAAA,GAAAA,KAEjBnB,EAAEmB,aAAeA,EAAAA,GAAAA,MAEjBnB,EAAEmB,aAAeA,EAAAA,GAAAA,IAAiBzD,KAAKiJ,WAAW3G,GADzDtC,KAAKkJ,cAAc5G,GAFnBtC,KAAKmJ,aAAa7G,GAFlBtC,KAAKoJ,aAAa9G,GAFlBtC,KAAKqJ,aAAa/G,GAFlBtC,KAAKsJ,oBAAoBhH,GAFzBtC,KAAKuJ,mBAAmBjH,GAFxBtC,KAAKwJ,oBAAoBlH,GAFzBtC,KAAKyJ,kBAAkBnH,GAkB/B,CAGO0D,UAAU1D,GAAyB,CACnC6G,aAAa7G,GAChBtC,KAAKgG,UAAU1D,EACnB,CACOoH,eAAepH,GAAyB,CACxCmH,kBAAkBnH,GAErBtC,KAAK0J,eAAepH,EACxB,CACOqH,iBAAiBrH,GAAyB,CAC1CkH,oBAAoBlH,GAEvBtC,KAAK2J,iBAAiBrH,EAC1B,CACOsH,gBAAgBtH,GAA0B,CAC1CiH,mBAAmBjH,GAEtBtC,KAAK4J,gBAAgBtH,EACzB,CACO4D,QAAQ5D,GAA0B,CAClC2G,WAAW3G,GAEdtC,KAAKkG,QAAQ5D,EAEjB,CACOwD,iBAAiBxD,GAAyB,CAC1CgH,oBAAoBhH,GAEvBtC,KAAK8F,iBAAiBxD,EAC1B,CACO8D,UAAU9D,GAAyB,CACnC+G,aAAa/G,GAGhBtC,KAAKoG,UAAU9D,EACnB,CACO0E,UAAU1E,GAAyB,CACnC8G,aAAa9G,GAGhBtC,KAAK2I,MAAMjG,EAAIJ,EAAEI,EACjB1C,KAAK2I,MAAM/F,EAAIN,EAAEM,EAEjB5C,KAAKhB,KAAKE,OAAO4D,IAAIR,GAErBtC,KAAKgH,UAAU1E,EACnB,CACOgE,WAAWhE,GAAyB,CACpC4G,cAAc5G,GACjBtC,KAAKhB,KAAKE,OAAOmD,KAAKC,GACtBtC,KAAKsG,WAAWhE,EACpB,CACOuH,uBAAuBvC,GACVA,EAAEwC,MAAM,KACR,EASpB,ECxGG,MAAMC,EAMThL,YAAYgK,EAAgB9J,GAAmB,KAL/C8J,YAAM,OACN7J,YAAM,OACN4J,SAAG,OACHhE,eAAS,OACToD,6BAAuB,EAEnBlI,KAAK+I,OAASA,EACd/I,KAAKgK,eACLhK,KAAKiK,WAAWhL,GAChBe,KAAKkI,wBAA0B,IAAIQ,EAAwB1I,MAC3DA,KAAK8E,UAAY,IAAIsD,EAAUpI,KACnC,CACQiK,WAAWhL,GACfe,KAAKd,OAAS,IAAIJ,EAAOkB,KAAMf,EACnC,CACQ+K,eACJhK,KAAK8I,IAAM,IAAIoB,EAAAA,GAAIlK,KAAK+I,OAAO9J,KAE/Be,KAAKmK,gCACT,CACOC,WACHpK,KAAK8E,UAAUwD,kBAAkBtI,KAAK+I,OAAO9J,IACjD,CACQkL,iCACJnK,KAAK8I,IAAIqB,+BAA+B,iBAAkB7C,GAActH,KAAKqK,UAAU/C,IAC3F,CACOiB,OAAOlI,EAAeE,GACzBP,KAAK8I,IAAIP,OAAOlI,EAAOE,EAC3B,CACQ8J,UAAU/C,GACdtH,KAAKkI,wBAAwB2B,uBAAuBvC,EACxD,EClCG,MAAMgD,EAGTvL,YAAYwL,GAAsC,KAFlDA,oBAAc,OACdrC,6BAAuB,EAEnBlI,KAAKuK,eAAiBA,EACtBvK,KAAKkI,wBAA0BlI,KAAKuK,eAAerC,uBACvD,CACOsC,SAASrL,GACZa,KAAKyK,OAAOtL,GACZa,KAAKuD,OAAOpE,EAChB,CACOsL,OAAOtL,GAEd,CACOoE,OAAOpE,GAEVuL,EAAAA,GAAAA,eAA6BvL,EAAK,GAAI,GAAI,GAAI,IAE9C,IAAK,IAAIwL,EAAI,EAAGA,EAAI3K,KAAKuK,eAAeK,MAAMC,WAAWC,SAAUH,EAC/D3K,KAAKuK,eAAeK,MAAMC,WAAWF,GAAGpH,OAAOpE,GAGnDa,KAAKuK,eAAeK,MAAMG,aAAaxH,OAAOpE,GAE9CA,EAAI6L,UAAY,UAChB7L,EAAI8L,YACJ9L,EAAI+L,IAAIlL,KAAKkI,wBAAwBS,MAAMjG,EAAG1C,KAAKkI,wBAAwBS,MAAM/F,EAAG,EAAG,EAAa,EAAVuI,KAAKC,IAC/FjM,EAAIkM,YACJlM,EAAImM,MACR,EC9BG,MAAMC,EAETxM,YAAYwL,GAAsC,KADlDA,oBAAc,EAEVvK,KAAKuK,eAAiBA,CAE1B,CACOiB,KAAKlE,GACR,IAAK,IAAIqD,EAAI,EAAGA,EAAI3K,KAAKuK,eAAeK,MAAMC,WAAWC,SAAUH,EAC/D,GAAI3K,KAAKuK,eAAeK,MAAMC,WAAWF,GAAGc,SAASnE,GACjD,OAAOtH,KAAKuK,eAAeK,MAAMC,WAAWF,EAIxD,ECZG,MAAee,EAElB3M,YAAY6L,GAAe,KAD3BA,WAAK,EAED5K,KAAK4K,MAAQA,CACjB,CACOvJ,UAAUlC,GACba,KAAKuD,OAAOpE,EAChB,CACOwM,YAAYrJ,GACf,ECRD,MAAMsJ,UAAaF,EAKtB3M,YAAY6L,EAAclI,EAAWE,GACjCiJ,MAAMjB,GAAO,KALjBtD,OAAC,OACDjH,MAAgB,GAAG,KACnBE,OAAiB,GAAG,KACpBuL,IAAc,UAGV9L,KAAKsH,EAAI,IAAIsB,EAAAA,GAASlG,EAAiB,GAAb1C,KAAKK,MAAauC,EAAkB,GAAd5C,KAAKO,OAAc,GACnEP,KAAK4K,MAAMmB,IAAI/L,KACnB,CACOuD,OAAOpE,GACVA,EAAI6L,UAAYhL,KAAK8L,IACrB3M,EAAI8L,YACJ9L,EAAI6M,SAAShM,KAAKsH,EAAE5E,EAAG1C,KAAKsH,EAAE1E,EAAG5C,KAAKK,MAAOL,KAAKO,QAClDpB,EAAIkM,YACJlM,EAAImM,MACR,CACOK,YAAYrJ,GACftC,KAAKsH,EAAE5E,GAAKJ,EAAEI,EAAIJ,EAAEuB,KACpB7D,KAAKsH,EAAE1E,GAAKN,EAAEM,EAAIN,EAAEwB,IACxB,CACO2H,SAASnE,GAEZ,QADasB,EAAAA,GAAAA,wBAAiCtB,EAAGtH,KAAKsH,EAAGtH,KAAKK,MAAOL,KAAKO,OAM9E,EC3BG,MAAM0L,EAETlN,YAAYmN,GAA8B,KAD1CA,QAAE,EAEElM,KAAKkM,GAAKA,CACd,CACO/D,qBAAqB7F,GACxBtC,KAAKkM,GAAGvD,MAAMjG,EAAIJ,EAAEI,EAAG1C,KAAKkM,GAAGvD,MAAM/F,EAAIN,EAAEM,EAEvCN,EAAEmB,aAAeA,EAAWmD,KAErBtE,EAAEmB,aAAeA,EAAWoD,OAE5BvE,EAAEmB,aAAeA,EAAW0I,WAE5B7J,EAAEmB,aAAeA,EAAWsD,OAE5BzE,EAAEmB,aAAeA,EAAWS,KAE5B5B,EAAEmB,aAAeA,EAAWwD,KAE5B3E,EAAEmB,aAAeA,EAAWgD,KAE5BnE,EAAEmB,aAAeA,EAAW8D,MAE5BjF,EAAEmB,aAAeA,EAAW4D,IAAMrH,KAAKiJ,WAAW3G,GADzDtC,KAAKkJ,cAAc5G,GAFnBtC,KAAKmJ,aAAa7G,GAFlBtC,KAAKoJ,aAAa9G,GAFlBtC,KAAKqJ,aAAa/G,GAFlBtC,KAAKsJ,oBAAoBhH,GAFzBtC,KAAKuJ,mBAAmBjH,GAFxBtC,KAAKwJ,oBAAoBlH,GAFzBtC,KAAKyJ,kBAAkBnH,EAkB/B,CAEO0D,UAAU1D,GAAyB,CACnC6G,aAAa7G,GAChB,MAAM8J,EAAMpM,KAAKkM,GAAG3B,eAAe8B,eAAeb,KAAKxL,KAAKkM,GAAGvD,OAC3DyD,IACApM,KAAKkM,GAAGpM,SAAU,EAClBE,KAAKkM,GAAGI,QAAUF,GAGtBpM,KAAKgG,UAAU1D,EACnB,CACOoH,eAAepH,GAAyB,CACxCmH,kBAAkBnH,GAKrBtC,KAAK0J,eAAepH,EACxB,CACOqH,iBAAiBrH,GAAyB,CAC1CkH,oBAAoBlH,GAEvBtC,KAAK2J,iBAAiBrH,EAC1B,CACOsH,gBAAgBtH,GAA0B,CAC1CiH,mBAAmBjH,GAEtBtC,KAAK4J,gBAAgBtH,EACzB,CACO4D,QAAQ5D,GAA0B,CAClC2G,WAAW3G,GAEdtC,KAAKkM,GAAGpM,SAAU,EAClBE,KAAKkM,GAAGI,aAAUC,EAClBvM,KAAKkG,QAAQ5D,EACjB,CACOwD,iBAAiBxD,GAAyB,CAC1CgH,oBAAoBhH,GAEvBtC,KAAK8F,iBAAiBxD,EAC1B,CACO8D,UAAU9D,GAAyB,CACnC+G,aAAa/G,GAGhBtC,KAAKoG,UAAU9D,EACnB,CACO0E,UAAU1E,GAAyB,CACnC8G,aAAa9G,GACZtC,KAAKkM,GAAGI,SACRtM,KAAKkM,GAAGI,QAAQX,YAAYrJ,GAEhCtC,KAAKgH,UAAU1E,EACnB,CACOgE,WAAWhE,GAAyB,CACpC4G,cAAc5G,GAEjBtC,KAAKsG,WAAWhE,EACpB,EAIG,MAAMkK,UAA+BP,EACxClN,YAAY0N,GAAgCZ,MAAMY,EAAM,EAGrD,MAAMC,UAA0BT,EACnClN,YAAY0N,GAAgCZ,MAAMY,EAAM,CACjD/C,eAAepH,GAClB,IAAIsJ,EAAK5L,KAAKkM,GAAG3B,eAAeK,MAAOtI,EAAEI,EAAGJ,EAAEM,EAClD,EAGG,MAAM+J,UAAkCV,EAC3ClN,YAAY0N,GAAgCZ,MAAMY,EAAM,CACjDtE,qBAAqB7F,GACxBtC,KAAKkM,GAAG3B,eAAeK,MAAMG,aAAamB,GAAG/D,qBAAqB7F,EACtE,GT7FH,SALWoB,GAAAA,EAAkB,gBAAlBA,EAAkB,gBAAlBA,EAAkB,YAAlBA,EAAkB,8BAK7B,CALWA,IAAAA,EAAkB,KAOvB,MAAMgF,EAST3J,YAAYwL,GAAsC,KARlDA,oBAAc,OAEdqC,cAAQ,OACRC,mBAAa,OAEblE,MAAkB,IAAIC,EAAAA,GAAS,EAAG,GAAG,KACrC0D,aAAsCC,EAAU,KACxCO,UAAoB,EAExB9M,KAAKuK,eAAiBA,EAEtBvK,KAAK4M,SAAW,CAEZG,OAAQ,IAAIP,EAAuBxM,MAEnCgN,KAAM,IAAIN,EAAkB1M,MAE5BiN,cAAe,IAAIN,EAA0B3M,OAIjDA,KAAKkN,iBAAiBxJ,EAAmBuJ,cAC7C,CACOC,iBAAiBC,GACpBnN,KAAK6M,cAAgB7M,KAAK4M,SAASO,EACvC,CACWrN,cACP,OAAOE,KAAK8M,QAChB,CACWhN,YAAQwH,GACftH,KAAKuK,eAAevB,gBAAgBD,OAAO/J,KAAKE,OAAOY,QAAUwH,EACjEtH,KAAK8M,SAAWxF,CACpB,EUlDG,MAAM8F,EAITrO,YAAYwL,GAAsC,KAHlDA,oBAAc,OACd8C,aAAO,OACPpO,SAAG,EAECe,KAAKuK,eAAiBA,EACtBvK,KAAKqN,QAAU9C,EAAevB,gBAAgBD,OAAOuE,QAErD,MAAMrO,EAAMkB,SAASC,cAAc,OAC/BnB,IACAe,KAAKf,IAAMA,EAEXe,KAAKqN,QAAQE,aAAavN,KAAKf,IAAKsL,EAAevB,gBAAgBD,OAAO9J,KAC1EsL,EAAevB,gBAAgBD,OAAO9J,IAAIuO,MAAMjN,OAAS,MACzDP,KAAKC,OAGb,CACOA,OACH,IAAIhB,EAAMkB,SAASC,cAAc,UACjCnB,EAAIwO,KAAO,SACXxO,EAAIyO,UAAY,SAChBzO,EAAIyG,QAAU,KACV1F,KAAKuK,eAAerC,wBAAwBgF,iBAAiBxJ,EAAmBqJ,OAAO,EAE3F/M,KAAKf,IAAIwB,OAAOxB,GAEhBA,EAAMkB,SAASC,cAAc,UAC7BnB,EAAIwO,KAAO,SACXxO,EAAIyO,UAAY,QAChBzO,EAAIyG,QAAU,KACV1F,KAAKuK,eAAerC,wBAAwBgF,iBAAiBxJ,EAAmBsJ,KAAK,EAEzFhN,KAAKf,IAAIwB,OAAOxB,EACpB,EClCG,MAAM0O,EAGT5O,YAAY6O,EAAUC,EAAUJ,GAAe,KAF/CG,QAAE,OAAQC,QAAE,OACJC,cAAQ,EAEZ9N,KAAK8N,SAAW,IAAIC,EAAa/N,MACjCA,KAAK4N,GAAKA,EACV5N,KAAK6N,GAAKA,CACd,CACOtK,OAAOpE,GACVa,KAAK8N,SAASvK,OAAOpE,EACzB,CACOwM,cACH,EAGD,MAAMoC,EAEThP,YAAYiP,GAAa,KADzBA,UAAI,EAEAhO,KAAKgO,KAAOA,CAChB,CACOzK,OAAOpE,GACV,MAAM8O,EAAuD,GAAhD9C,KAAK+C,IAAIlO,KAAKgO,KAAKH,GAAGvG,EAAE5E,EAAI1C,KAAKgO,KAAKJ,GAAGtG,EAAE5E,GAClDyL,EAAuD,GAAhDhD,KAAK+C,IAAIlO,KAAKgO,KAAKH,GAAGvG,EAAE1E,EAAI5C,KAAKgO,KAAKJ,GAAGtG,EAAE1E,GAClDwL,EAAMH,EAAOE,EAAOF,EAAOE,EACjChP,EAAIkP,UAAY,EAChBlP,EAAI8L,YACJ9L,EAAImP,OACAtO,KAAKgO,KAAKJ,GAAGtG,EAAE5E,EAAG1C,KAAKgO,KAAKJ,GAAGtG,EAAE1E,GAErCzD,EAAIoP,cACAvO,KAAKgO,KAAKJ,GAAGtG,EAAE5E,EAAI0L,EAAKpO,KAAKgO,KAAKJ,GAAGtG,EAAE1E,EACvC5C,KAAKgO,KAAKH,GAAGvG,EAAE5E,EAAI0L,EAAKpO,KAAKgO,KAAKH,GAAGvG,EAAE1E,EACvC5C,KAAKgO,KAAKH,GAAGvG,EAAE5E,EAAG1C,KAAKgO,KAAKH,GAAGvG,EAAE1E,GAErCzD,EAAIqP,QACR,ECnCG,MAAMC,EAUT1P,YAAY2D,EAAWE,EAAW6K,GAAe,KATjDA,KAAe,GAAG,KAClBnG,OAAC,OACDoH,OAAiB,GAAG,KACpBC,QAAkB,GAAG,KAErBtO,MAAgB,GAAG,KACnBE,OAAiB,GAAG,KAEZuN,cAAQ,EAEZ9N,KAAKyN,KAAOA,EACZzN,KAAK8N,SAAW,IAAIc,EAAa5O,MACjCA,KAAKsH,EAAI,IAAIsB,EAAAA,GAASlG,EAAiB,GAAb1C,KAAKK,MAAauC,EAAkB,GAAd5C,KAAKO,OAAc,EACvE,CACOgD,OAAOpE,GACVa,KAAK8N,SAASvK,OAAOpE,EAEzB,CACOwM,YAAYrJ,GACftC,KAAKsH,EAAE5E,GAAKJ,EAAEI,EAAIJ,EAAEuB,KACpB7D,KAAKsH,EAAE1E,GAAKN,EAAEM,EAAIN,EAAEwB,IACxB,CACO2H,SAASnE,GAEZ,QADasB,EAAAA,GAAAA,wBAAiCtB,EAAGtH,KAAKsH,EAAGtH,KAAKK,MAAOL,KAAKO,OAM9E,EAEG,MAAMqO,EAGT7P,YAAY8P,GAAa,KAFzBA,UAAI,OACJ7D,UAAoB,UAEhBhL,KAAK6O,KAAOA,CAChB,CACAtL,OAAOpE,GACHA,EAAI6L,UAAYhL,KAAKgL,UACrB7L,EAAI8L,YACJ9L,EAAI6M,SAAShM,KAAK6O,KAAKvH,EAAE5E,EAAG1C,KAAK6O,KAAKvH,EAAE1E,EAAG5C,KAAK6O,KAAKxO,MAAOL,KAAK6O,KAAKtO,QACtEpB,EAAIkM,YACJlM,EAAImM,MACR,EC1CG,MAAMwD,EAKT/P,YAAYgM,GAA6B,KAJzCgE,MAAgB,GAAG,KACnBC,MAAgB,GAAG,KACnBjE,kBAAY,OACJkE,aAAO,EAEXjP,KAAK+K,aAAeA,EACpB/K,KAAKiP,QAAU,IAAIC,EAAalP,KACpC,CACOmP,QAAQzM,EAAWE,EAAW6K,GACjCzN,KAAK+O,MAAMK,KAAK,IAAIX,EAAK/L,EAAGE,EAAG6K,IAE3BzN,KAAK+O,MAAMjE,OAAS,GACpB9K,KAAKqP,QAAQrP,KAAK+O,MAAM/O,KAAK+O,MAAMjE,OAAS,GAAI9K,KAAK+O,MAAM/O,KAAK+O,MAAMjE,OAAS,GAAI,IAE3F,CACOuE,QAAQzB,EAAUC,EAAUJ,GAC/BzN,KAAKgP,MAAMI,KAAK,IAAIzB,EAAKC,EAAIC,EAAIJ,GAErC,CACOlK,OAAOpE,GACV,IAAIwL,EAAI,EACe,IAAvBA,EAAI3K,KAAK+O,MAAMjE,OAAeH,KAAO3K,KAAK+O,MAAMpE,GAAGpH,OAAOpE,GACnC,IAAvBwL,EAAI3K,KAAKgP,MAAMlE,OAAeH,KAAO3K,KAAKgP,MAAMrE,GAAGpH,OAAOpE,EAC9D,CACOqM,KAAKlE,GACR,OAAOtH,KAAKiP,QAAQzD,KAAKlE,EAC7B,EAGJ,MAAM4H,EAEFnQ,YAAYuQ,GAAe,KADnBA,WAAK,EAETtP,KAAKsP,MAAQA,CACjB,CACO9D,KAAKlE,GACR,IAAK,IAAIqD,EAAI,EAAGA,EAAI3K,KAAKsP,MAAMP,MAAMjE,SAAUH,EAC3C,GAAI3K,KAAKsP,MAAMP,MAAMpE,GAAGc,SAASnE,GAE7B,OAAOtH,KAAKsP,MAAMP,MAAMpE,EAIpC,EC1CG,MAAM4E,EAITxQ,YAAYyQ,GAAwB,KAHpCA,aAAO,OACP7G,MAAkB,IAAIC,EAAAA,GAAS,EAAG,EAAG,GAAG,KACxC0D,aAA4BC,EAExBvM,KAAKwP,QAAUA,CACnB,CACOrH,qBAAqB7F,GAExBtC,KAAK2I,MAAMjG,EAAIJ,EAAEI,EAAG1C,KAAK2I,MAAM/F,EAAIN,EAAEM,EAEjCN,EAAEmB,aAAeA,EAAWmD,KAErBtE,EAAEmB,aAAeA,EAAWoD,OAE5BvE,EAAEmB,aAAeA,EAAW0I,WAE5B7J,EAAEmB,aAAeA,EAAWsD,OAE5BzE,EAAEmB,aAAeA,EAAWS,KAE5B5B,EAAEmB,aAAeA,EAAWwD,KAE5B3E,EAAEmB,aAAeA,EAAWgD,KAE5BnE,EAAEmB,aAAeA,EAAW8D,MAE5BjF,EAAEmB,aAAeA,EAAW4D,IAAMrH,KAAKiJ,WAAW3G,GADzDtC,KAAKkJ,cAAc5G,GAFnBtC,KAAKmJ,aAAa7G,GAFlBtC,KAAKoJ,aAAa9G,GAFlBtC,KAAKqJ,aAAa/G,GAFlBtC,KAAKsJ,oBAAoBhH,GAFzBtC,KAAKuJ,mBAAmBjH,GAFxBtC,KAAKwJ,oBAAoBlH,GAFzBtC,KAAKyJ,kBAAkBnH,EAkB/B,CAEO0D,UAAU1D,GAAyB,CACnC6G,aAAa7G,GAChB,MAAM8J,EAAMpM,KAAKwP,QAAQF,MAAM9D,KAAKxL,KAAK2I,OACrCyD,IACApM,KAAKwP,QAAQ5E,MAAM6E,oBAAoBvH,wBAAwBpI,SAAU,EACzEE,KAAKsM,QAAUF,GAGnBpM,KAAKgG,UAAU1D,EACnB,CACOoH,eAAepH,GAAyB,CACxCmH,kBAAkBnH,GAErBtC,KAAKwP,QAAQF,MAAMH,QAAQ7M,EAAEI,EAAGJ,EAAEM,EAAG,QAGrC5C,KAAK0J,eAAepH,EACxB,CACOqH,iBAAiBrH,GAAyB,CAC1CkH,oBAAoBlH,GAEvBtC,KAAK2J,iBAAiBrH,EAC1B,CACOsH,gBAAgBtH,GAA0B,CAC1CiH,mBAAmBjH,GAEtBtC,KAAK4J,gBAAgBtH,EACzB,CACO4D,QAAQ5D,GAA0B,CAClC2G,WAAW3G,GAEdtC,KAAKwP,QAAQ5E,MAAM6E,oBAAoBvH,wBAAwBpI,SAAU,EACzEE,KAAKsM,aAAUC,EACfvM,KAAKkG,QAAQ5D,EACjB,CACOwD,iBAAiBxD,GAAyB,CAC1CgH,oBAAoBhH,GAEvBtC,KAAK8F,iBAAiBxD,EAC1B,CACO8D,UAAU9D,GAAyB,CACnC+G,aAAa/G,GAGhBtC,KAAKoG,UAAU9D,EACnB,CACO0E,UAAU1E,GAAyB,CACnC8G,aAAa9G,GACZtC,KAAKsM,SACLtM,KAAKsM,QAAQX,YAAYrJ,GAE7BtC,KAAKgH,UAAU1E,EACnB,CACOgE,WAAWhE,GAAyB,CACpC4G,cAAc5G,GAEjBtC,KAAKsG,WAAWhE,EACpB,EC3FG,MAAMoN,EAKT3Q,YAAY6L,GAAe,KAJ3BsB,QAAE,OACFoD,WAAK,OACL1E,WAAK,EAGD5K,KAAK4K,MAAQA,EACb5K,KAAKkM,GAAK,IAAIqD,EAAcvP,MAC5BA,KAAKsP,MAAQ,IAAIR,EAAM9O,KAC3B,CACOuD,OAAOpE,GACVa,KAAKsP,MAAM/L,OAAOpE,EACtB,ECZG,MAAMwQ,EAMT5Q,YAAY0Q,GAA2C,KALvDA,yBAAmB,OACnB5E,WAA+B,GAAG,KAElCE,kBAAY,EAGR/K,KAAKyP,oBAAsBA,EAC3BzP,KAAK4P,kBACT,CACOA,mBACH5P,KAAK+K,aAAe,IAAI2E,EAAa1P,KACzC,CACO+L,IAAIzE,GACPtH,KAAK6K,WAAWuE,KAAK9H,EACzB,ECXG,MAAMuI,EAOT9Q,YAAYiK,GAAmC,KAN/CA,qBAAe,OACf8E,cAAQ,OACRzB,oBAAc,OACdyD,UAAI,OACJlF,WAAK,OACL1C,6BAAuB,EAEnBlI,KAAKgJ,gBAAkBA,EACvBhJ,KAAKC,MACT,CACQA,OACJD,KAAKkI,wBAA0B,IAAIQ,EAAwB1I,MAC3DA,KAAKqM,eAAiB,IAAId,EAAevL,MACzCA,KAAK4K,MAAQ,IAAI+E,EAAM3P,MACvBA,KAAK8N,SAAW,IAAIxD,EAAStK,MAC7BA,KAAK8P,KAAO,IAAI1C,EAAKpN,KACzB,CACOmI,qBAAqB7F,GACxBtC,KAAKkI,wBAAwB2E,cAAc1E,qBAAqB7F,EACpE,CACOiB,OAAOpE,GACVa,KAAK8N,SAAStD,SAASrL,EAC3B,EC3BG,MAAM4Q,EAGThR,YAAYgK,GAAiB,KAF7BA,YAAM,OACNwB,oBAAc,EAEVvK,KAAK+I,OAASA,EACd/I,KAAKuK,eAAiB,IAAIsF,EAAoB7P,KAClD,CACOmI,qBAAqB7F,GACxBtC,KAAKuK,eAAepC,qBAAqB7F,EAC7C,CACOiB,OAAOpE,GACVa,KAAKuK,eAAehH,OAAOpE,EAC/B,ECbG,MAAM6Q,EAMTC,cACI,IAAID,EADc,uDAAG,UAEzB,CACAjR,cAAqC,IAAzBmR,EAAU,uDAAG,UAAS,KARlCA,QAAE,OACFlR,UAAI,OACJgK,qBAAe,OACfsE,aAAO,OACPrO,SAAG,EAKCe,KAAKkQ,GAAKA,EACVlQ,KAAKC,OACLD,KAAKoK,WAEL5B,OAAY,IAAIxI,IACpB,CACQC,OACJ,MAAMqN,EAAUnN,SAASgQ,eAAenQ,KAAKkQ,IAC7C,IAAI5C,EAA4C,OAAjCtN,KAAKsN,QAAUA,EAE9B,MAAMrO,EAAMkB,SAASC,cAAc,OAC/BnB,IACAe,KAAKf,IAAMA,EACXe,KAAKf,IAAIuO,MAAMnN,MAAQ,OACvBL,KAAKf,IAAIuO,MAAMjN,OAAS,OACxBP,KAAKf,IAAIuO,MAAM4C,WAAa,UAC5BpQ,KAAKsN,QAAQ7M,OAAOT,KAAKf,MAG7Be,KAAKhB,KAAO,IAAI+K,EAAK/J,KAAMf,GAC3Be,KAAKgJ,gBAAkB,IAAI+G,EAAgB/P,KAC/C,CACQoK,WACJpK,KAAKhB,KAAKoL,WACVpK,KAAKhB,KAAKE,OAAOqE,OAAUpE,GAAkCa,KAAKgJ,gBAAgBzF,OAAOpE,EAC7F,ECnCG,MAAMkR,EAMTJ,cACI,IAAII,EADc,uDAAG,UACG,EAC5B,CACAtR,cAA0D,IAA9CmR,EAAU,uDAAG,UAAWI,EAAe,uDAAG,EAAC,KARvDJ,QAAE,OACFK,WAAK,OACLjD,aAAO,OACPrO,SAAG,OACHqR,QAAkB,EAKdtQ,KAAKkQ,GAAKA,EACVlQ,KAAKsQ,QAAUA,EACftQ,KAAKC,MACT,CACQA,OAEJ,OAAQD,KAAKsQ,SACT,KAAK,EAGL,KAAK,EACDtQ,KAAKuQ,MAAQ,IAAIC,EAASxQ,KAAKkQ,IAS3C,EAGG,MAAMO,EAGT1R,YAAYmR,GAAqB,KAF1B7C,aAAO,EAGVrN,KAAKqN,QAAUlN,SAASgQ,eAAeD,GAEvC,MAAMjR,EAAMkB,SAASC,cAAc,OACnCnB,EAAIiR,GAAI,QACRjR,EAAIuO,MAAMnN,MAAQ,OAClBpB,EAAIuO,MAAMjN,OAAS,OACnBP,KAAKqN,QAAQqD,YAAYzR,GAEzBoR,EAAgBpQ,KAAKhB,EAAIiR,GAC7B,CACOS,UACH,GAAI3Q,KAAKqN,QACL,IAEI,KAAOrN,KAAKqN,QAAQuD,YAChB5Q,KAAKqN,QAAQwD,YAAY7Q,KAAKqN,QAAQuD,WAI9C,CAFE,MAAOE,GACLtO,QAAQsO,MAAM,2BAA4BA,EAC9C,MAEAtO,QAAQuO,KAAK,yCAErB,E","sources":["njslab/Env/AppDrawingBlock/NBlockV1/Core/Canvas/Canvas.ts","njslab/Env/AppDrawingBlock/lib/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/ActiveCommandController/ActiveCommandController.ts","njslab/Env/AppDrawingBlock/NBlockV1/Core/IOWrapper/EventInteraction/MouseInteraction.ts","njslab/Env/AppDrawingBlock/NBlockV1/Core/IOWrapper/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/Core/ActiveCommandController/ActiveCommandController.ts","njslab/Env/AppDrawingBlock/NBlockV1/Core/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/Renderer/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/GeometryUI/GeometryCommon.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/GeometryUI/Base/GeometryUIBase.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/GeometryUI/Body.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/ActiveCommandController/ActiveCommandCommon.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/View/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/DrawingGraph/GraphGarphics/Base/Edge.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/DrawingGraph/GraphGarphics/Base/Node.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/DrawingGraph/GraphGarphics/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/DrawingGraph/ActiveCommand/ActiveCommand.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/DrawingGraph/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/Scene/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/BlockImplementation/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/Implementations/index.ts","njslab/Env/AppDrawingBlock/NBlockV1/index.ts","njslab/Env/AppDrawingBlock/index.ts"],"sourcesContent":["import { Deltatime, CanvasLoopController } from '../../../../../../lib/NJSCore';\r\nimport { MouseEventData } from '../../../lib';\r\nimport { Core } from '..';\r\nexport class Canvas {\r\n    core: Core;\r\n    div: HTMLElement;\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n    isActive: boolean = false;\r\n    zoom: number = 1;\r\n    translation: number[] = [0, 0];\r\n    translationZoom: number[] = [0, 0];\r\n    deltaTime: Deltatime;\r\n    canvasLoopController: CanvasLoopController;\r\n\r\n    log: string;\r\n    // frameRate: number = 60;\r\n    isViewChanging: boolean = false;\r\n    loopNum: number = 0;\r\n    needRenderloop: boolean = true;\r\n\r\n    ablePan: boolean = true;\r\n    pause: boolean = false;\r\n    constructor(core: Core, div: HTMLElement) {\r\n        this.core = core;\r\n        this.div = div;\r\n        this.Init();\r\n        this.LoopInit();\r\n    }\r\n    private Init() {\r\n        const canvas = document.createElement('canvas');\r\n        if (canvas) {\r\n            this.canvas = canvas;\r\n            this.canvas.width = this.div.clientWidth;\r\n            this.canvas.height = this.div.clientHeight;\r\n            this.div.append(this.canvas);\r\n            const ctx = this.canvas.getContext('2d');\r\n            if (ctx) {\r\n                this.ctx = ctx;\r\n                this.isActive = true;\r\n            }\r\n        }\r\n    }\r\n    private LoopInit() {\r\n        this.translation[0] = this.ctx.canvas.width * 0.5;\r\n        this.translation[1] = this.ctx.canvas.height * 0.5;\r\n\r\n        this.deltaTime = new Deltatime();\r\n        this.canvasLoopController = new CanvasLoopController(60);\r\n        this.SetLevel4();\r\n\r\n        this.Loop();\r\n    }\r\n    public Loop() {\r\n        let before = performance.now();\r\n        this.deltaTime.UpdateFPS();\r\n\r\n        if (this.canvasLoopController.level > 3) {\r\n            if (this.canvasLoopController.level === 6) { // level 6\r\n                requestAnimationFrame(() => { this.Loop(); });\r\n                // this.Clear(this.ctx);\r\n                this.RenderPre(this.ctx);\r\n            } else if (this.canvasLoopController.level === 5) {\r\n                if (this.isViewChanging) {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                } else {\r\n                    // setTimeout(() => {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                    // }, 1000 / this.frameRate);\r\n                }\r\n                // this.Clear(this.ctx);\r\n                this.RenderPre(this.ctx);\r\n            } else if (this.canvasLoopController.level === 4) {\r\n                if (this.isViewChanging) {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                } else {\r\n                    // setTimeout(() => {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                    // }, 1000 / this.frameRate);\r\n                }\r\n                if (!this.canvasLoopController.stop) {\r\n                    this.RenderPre(this.ctx);\r\n                    this.canvasLoopController.TimerForStop();\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n        } else if (this.canvasLoopController.level === 1) { // level 1 - 3\r\n            if (this.isViewChanging) {\r\n                // this.Clear(this.ctx);\r\n            } else {\r\n                // this.Clear(this.ctx);\r\n                this.RenderPre(this.ctx);\r\n            }\r\n        } else {\r\n            // this.Clear(this.ctx);\r\n            this.RenderPre(this.ctx);\r\n        }\r\n        let after = performance.now();\r\n        this.log = `level:  ${this.canvasLoopController.level}, total frames: ${this.loopNum++} (FPS: ${this.deltaTime.frameRate.toFixed(0)}), a loop took: ${(after - before).toFixed(2)} ms to execute.`;\r\n        // this.LogOut();\r\n    }\r\n    public SetLevel1() { this.canvasLoopController.level = 1; this.Loop(); }\r\n    public SetLevel2() { this.canvasLoopController.level = 2; this.Loop(); }\r\n    public SetLevel3() { this.canvasLoopController.level = 3; this.Loop(); }\r\n    public RenderSetLevel4() {\r\n        this.canvasLoopController.stop = true;\r\n    }\r\n    public SetLevel4() {\r\n        this.canvasLoopController.Reset();\r\n        setTimeout(() => {\r\n            this.canvasLoopController.level = 4;\r\n            this.Loop();\r\n        }, 500);\r\n    }\r\n    public SetLevel5() {\r\n        this.canvasLoopController.Reset();\r\n        setTimeout(() => {\r\n            this.canvasLoopController.level = 5;\r\n            this.Loop();\r\n        }, 500);\r\n    }\r\n    public SetLevel6() {\r\n        this.canvasLoopController.Reset();\r\n        setTimeout(() => {\r\n            this.canvasLoopController.level = 6;\r\n            this.Loop();\r\n        }, 500);\r\n    }\r\n    public Clear(ctx: CanvasRenderingContext2D) {\r\n        // this.ctx.clearRect(-this.translation[0], -this.translation[1], this.ctx.canvas.width, this.ctx.canvas.height);\r\n        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n\r\n    }\r\n    public Zoom(e: MouseEventData) {\r\n        // const offsetX = (e.xs);\r\n        // const offsetY = (e.ys);\r\n        // console.log(offsetX, this.translation[0]);\r\n\r\n        if (e.wheel < 0) {\r\n            this.zoom += this.zoom * 0.09;\r\n            // console.log('in', this.zoom);\r\n            // this.translation[0] += (this.ctx.canvas.width * 0.5 - offsetX) / this.zoom;\r\n            // this.translation[1] += (this.ctx.canvas.height * 0.5 - offsetY) / this.zoom;\r\n            // this.translationZoom[0] = (offsetX);\r\n            // this.translationZoom[1] = (offsetY);\r\n        } else {\r\n            console.log('out', this.zoom);\r\n            this.zoom -= this.zoom * 0.09;\r\n\r\n            // this.translation[0] -= (this.ctx.canvas.width * 0.5 - offsetX) / this.zoom;\r\n            // this.translation[1] -= (this.ctx.canvas.height * 0.5 - offsetY) / this.zoom;\r\n            // this.translation[0] -= (this.translation[0]) - offsetX;\r\n            // this.translation[1] -= (this.translation[1]) - offsetY;\r\n            // this.translation[0] += (offsetX / this.zoom);\r\n            // this.translation[1] += (offsetY / this.zoom);\r\n            // this.translationZoom[0] = (offsetX);\r\n            // this.translationZoom[1] = (offsetY);\r\n            // this.translation[0] += offsetX / this.zoom;\r\n            // this.translation[1] += offsetY / this.zoom;\r\n        }\r\n\r\n    }\r\n    public RemapByZoom(e: MouseEventData) {\r\n        e.x = ((e.xs - this.translation[0]) / this.zoom);\r\n        e.y = ((e.ys - this.translation[1]) / this.zoom);\r\n        return e;\r\n    }\r\n    public Pan(e: MouseEventData) {\r\n        if (!this.ablePan) { return; }\r\n        const xOff = e.xs - e.preXs;\r\n        const yOff = e.ys - e.preYs;\r\n        this.translation[0] += xOff;\r\n        this.translation[1] += yOff;\r\n    }\r\n    public RenderForce() {\r\n        this.canvasLoopController.stop = false;\r\n    }\r\n    public RenderPre(ctx: CanvasRenderingContext2D) {\r\n        if (!this.isActive) { return; }\r\n        this.Clear(this.ctx);\r\n        this.ctx.save();\r\n        this.ctx.translate(this.translation[0], this.translation[1]);\r\n        this.ctx.scale(this.zoom, this.zoom);\r\n        // this.ctx.translate(this.translationZoom[0], this.translationZoom[1]);\r\n        // this.translationZoom[0] = this.translationZoom[1] = 0;\r\n\r\n        this.Render(ctx);\r\n\r\n        this.ctx.restore();\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        // TODO\r\n    }\r\n}","import { NVector3 } from '../../../../lib/NJSCore';\r\n\r\nexport { NVector3 } from '../../../../lib/NJSCore';\r\n\r\nexport enum CLICK_TYPE {\r\n    LEFT = 'LEFT', MIDDLE = 'MIDDLE', RIGHT = 'RIGHT', WHEEL = 'WHEEL',\r\n    DRAG = 'DRAG', DRAG_LEFT = 'DRAG_LEFT', DRAG_MIDDLE = 'DRAG_MIDDLE', DRAG_RIGHT = 'DRAG_RIGHT',\r\n    MOVE = 'MOVE', DOUBLE = 'DOUBLE', UP = 'UP',\r\n    DOWN = 'DOWN', DOWN_MIDDLE = 'DOWN_MIDDLE', DOWN_RIGHT = 'DOWN_RIGHT'\r\n}\r\nexport class ActiveCommandBase {\r\n    constructor() { /*.*/ }\r\n    public MouseEventController(e: any) {/*.*/ }\r\n    public KeyboardEventController(k: any) {/*.*/ }\r\n    public TouchEventController(t: any) {/*.*/ }\r\n    public GestureEventController(j: any) {/*.*/ }\r\n    public mouseLeftClick(e: any) {/*.*/ }\r\n    public mouseMiddleClick(e: any) {/*.*/ }\r\n    public mouseRightClick(e: any) {/*.*/ }\r\n    public mouseDoubleClick(e: any) {/*.*/ }\r\n    // .........................................\r\n    public mouseMove(e: any) {/*.*/ }\r\n    public mouseDrag(e: any) {/*.*/ }\r\n    public mouseDown(e: any) {/*.*/ }\r\n    public mouseUp(e: any) {/*.*/ }\r\n    public keydown(k: any) {/*.*/ }\r\n    public keyUp(k: any) {/*.*/ }\r\n}\r\nexport class MouseEventData {\r\n    x: number = -1; y: number = -1; z: number = -1;\r\n    preX: number = -1; preY: number = -1; preZ: number = -1;\r\n    xs: number = -1; ys: number = -1;\r\n    preXs: number = -1; preYs: number = -1;\r\n    yGLPicking: number;\r\n    command: ActiveCommandBase; // = new CActiveCommandNone(this.app.activeCommands);\r\n    CLICK_TYPE: CLICK_TYPE = CLICK_TYPE.MOVE;\r\n    isDown: boolean = false;\r\n    isDoubleClick: boolean = false;\r\n    isMove: boolean = false;\r\n    pressedShift: boolean = false;\r\n    pressedAlt: boolean = false;\r\n    pressedCtrl: boolean = false;\r\n    wheel: number = 0;\r\n    preWheel: number = 0;\r\n    isActive: boolean = true;\r\n    // premEvent: MouseEventData;\r\n    native: MouseEvent;\r\n    constructor() {\r\n        //\r\n    }\r\n    public DeepCopy() {\r\n        let mEvent = new MouseEventData();\r\n        mEvent.x = this.x; mEvent.y = this.y; mEvent.z = this.z;\r\n        mEvent.preX = this.preX; mEvent.preY = this.preY; mEvent.preZ = this.preZ;\r\n        mEvent.xs = this.x; mEvent.ys = this.y;\r\n        mEvent.preXs = this.preXs; mEvent.preYs = this.preYs;\r\n        mEvent.pressedAlt = this.pressedAlt; mEvent.pressedShift = this.pressedShift; mEvent.pressedCtrl = this.pressedCtrl;\r\n        mEvent.isDoubleClick = this.isDoubleClick; mEvent.isDown = this.isDown; mEvent.isMove = this.isMove;\r\n        mEvent.wheel = this.wheel; mEvent.preWheel = this.preWheel;\r\n        mEvent.yGLPicking = this.yGLPicking;\r\n        mEvent.CLICK_TYPE = this.CLICK_TYPE;\r\n        mEvent.command = this.command;\r\n        mEvent.native = this.native;\r\n        return mEvent;\r\n    }\r\n}\r\nexport class CanvasDrawing {\r\n    public static LineByVecs(ctx: CanvasRenderingContext2D, v0: NVector3, v1: NVector3, width: number = 1, fill: string = '#ff0000') {\r\n        ctx.strokeStyle = fill;\r\n        ctx.lineWidth = width;\r\n        ctx.beginPath();\r\n        ctx.moveTo(v0.x, v0.y);\r\n        ctx.lineTo(v1.x, v1.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    public static Line(ctx: CanvasRenderingContext2D, x0: number, y0: number, x1: number, y1: number, width: number = 1, fill: string = '#ff0000') {\r\n        ctx.strokeStyle = fill;\r\n        ctx.lineWidth = width;\r\n        ctx.beginPath();\r\n        ctx.moveTo(x0, y0);\r\n        ctx.lineTo(x1, y1);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    public static Point(ctx: CanvasRenderingContext2D, x: number, y: number, r: number = 5, fill: string = '#ff0000') {\r\n        ctx.fillStyle = fill;\r\n        ctx.beginPath();\r\n        ctx.arc(x, y, r, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    public static PointByNVec(ctx: CanvasRenderingContext2D, v: NVector3, r: number = 5, fill: string = '#ff0000') {\r\n        ctx.fillStyle = fill;\r\n        ctx.beginPath();\r\n        ctx.arc(v.x, v.y, r, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n\r\n    // .....................................................\r\n    public static GridLineOrigin(ctx: CanvasRenderingContext2D, xNum: number = 10, yNum: number = 10, xOff: number = 20, yOff: number = 20) {\r\n        const xStart = - ((xNum * xOff) * 0.5);\r\n        const yStart = - ((yNum * yOff) * 0.5);\r\n        ctx.lineWidth = 0.1;\r\n        for (let y = 0; y <= yNum; ++y) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(xStart, yStart + (yOff * y));\r\n            ctx.lineTo((xNum * xOff) * 0.5, yStart + (yOff * y));\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n\r\n            ctx.beginPath();\r\n            ctx.moveTo(xStart + (xOff * y), yStart);\r\n            ctx.lineTo(yStart + (yOff * y), (yNum * yOff) * 0.5);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n        }\r\n\r\n    }\r\n    public static GridPointOrigin(ctx: CanvasRenderingContext2D, xNum: number = 10, yNum: number = 10, xOff: number = 20, yOff: number = 20) {\r\n        const xStart = - ((xNum * xOff) * 0.5);\r\n        const yStart = - ((yNum * yOff) * 0.5);\r\n        ctx.lineWidth = 0.1;\r\n        for (let y = 0; y <= yNum; ++y) {\r\n            for (let x = 0; x <= xNum; ++x) {\r\n                ctx.beginPath();\r\n                ctx.arc(xStart + (xOff * x), yStart + (yOff * y), 1, 0, Math.PI * 2);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    constructor() {\r\n        //\r\n    }\r\n}","import { NVector3, } from '../../../../lib';\r\nimport { GeometryUIBase } from '../GeometryUI/Base/GeometryUIBase';\r\n// import { MouseEventData } from '../../AppCoreWrapper/IOWrapper/EventInteraction/MouseInteraction';\r\nimport { BlockImplementation } from '..';\r\n\r\nimport {\r\n    ActiveCommandCommon,\r\n    ActiveCommandSelection,\r\n    ActiveCommandRect,\r\n    ActiveCommandDrawingBlock\r\n} from './ActiveCommandCommon';\r\n\r\nexport enum ACTIVECOMMAND_MODE {\r\n    SELECT = 'SELECT', REMOVE = 'REMOVE',\r\n    RECT = 'RECT',\r\n\r\n    DRAWING_BLOCK = 'DRAWING_BLOCK',\r\n}\r\n\r\nexport class ActiveCommandController {\r\n    implementation: BlockImplementation;\r\n\r\n    commands: {};\r\n    activeCommand: ActiveCommandCommon;\r\n\r\n    mouse: NVector3 = new NVector3(0, 0);\r\n    capture: GeometryUIBase | undefined = undefined;\r\n    private _ablePan: boolean = false;\r\n    constructor(implementation: BlockImplementation) {\r\n        this.implementation = implementation;\r\n\r\n        this.commands = {\r\n            // ........................................................................................................................ drawing annotation\r\n            SELECT: new ActiveCommandSelection(this),\r\n\r\n            RECT: new ActiveCommandRect(this),\r\n\r\n            DRAWING_BLOCK: new ActiveCommandDrawingBlock(this),\r\n\r\n        };\r\n\r\n        this.SetActiveCommand(ACTIVECOMMAND_MODE.DRAWING_BLOCK);\r\n    }\r\n    public SetActiveCommand(theAC: ACTIVECOMMAND_MODE) {\r\n        this.activeCommand = this.commands[theAC];\r\n    }\r\n    public get ablePan() {\r\n        return this._ablePan;\r\n    }\r\n    public set ablePan(v: boolean) {\r\n        this.implementation.implementations.nBlock.core.canvas.ablePan = v;\r\n        this._ablePan = v;\r\n    }\r\n}","import { CLICK_TYPE, MouseEventData } from '../../../../lib';\r\nimport { IOWrapper } from '..';\r\n\r\nexport interface IMouseInteractionMenu {\r\n  MouseInteractionMenu: (mouseEventData: MouseEventData) => void;\r\n}\r\nexport class MouseInteraction {\r\n  mouseInteractionUI: IMouseInteractionMenu;\r\n  mouseEventDataPre: MouseEventData = new MouseEventData();\r\n  isEnable: boolean = true;\r\n  clickCount: number = 0;\r\n  click: boolean = false;\r\n  prevent: boolean = false;\r\n  delay: number = 250;\r\n  timer: NodeJS.Timer | number;\r\n  down: boolean = false;\r\n  e: MouseEventData;\r\n  private _stopPropagation: boolean = false;\r\n  ioWrapper: IOWrapper;\r\n  constructor(ioWrapper: IOWrapper) {\r\n    this.ioWrapper = ioWrapper;\r\n  }\r\n  public InitNativeMouseEvent(div: HTMLElement) {\r\n    div.onclick = (e: MouseEvent) => {\r\n      this.prevent = false;\r\n      this.timer = setTimeout(\r\n        () => {\r\n          if (!this.prevent) {\r\n            this.MouseClick(e);\r\n          }\r\n          this.prevent = false;\r\n        },\r\n        this.delay);\r\n    };\r\n    div.ondblclick = (e: MouseEvent) => {\r\n      clearTimeout(this.timer as number);\r\n      this.prevent = true;\r\n      this.MouseDoubleClick(e);\r\n    };\r\n    div.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\r\n    div.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\r\n    div.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\r\n    div.addEventListener('wheel', (e: WheelEvent) => this.MouseWheel(e, e.deltaY));\r\n  }\r\n  public MouseDown(e: MouseEvent) {\r\n    this.click = true;\r\n    this.down = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOWN;\r\n    mEvent.isDown = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseClick(e: MouseEvent) {\r\n    if (!this.click) { return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    if (e.button === 0) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.LEFT;\r\n    } else if (e.button === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.MIDDLE;\r\n    } else if (e.button === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseDoubleClick(e: MouseEvent) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOUBLE;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseDrag(e: MouseEvent) {\r\n    this.click = false;\r\n    this.prevent = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    mEvent.isDown = true;\r\n    if (e.buttons === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    } else if (e.buttons === 4) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_MIDDLE;\r\n    } else if (e.buttons === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseMove(e: MouseEvent) {\r\n    if (this.down) { this.MouseDrag(e); return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.MOVE;\r\n    mEvent.isDown = true;\r\n    this.prevent = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseUp(e: MouseEvent) {\r\n    this.down = false;\r\n    this.click = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.UP;\r\n    mEvent.isDown = false;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseWheel(e: MouseEvent, v: number) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.wheel = v;\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.WHEEL;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public CommonEventBuilder(e: MouseEvent): MouseEventData {\r\n    let mEvent: MouseEventData = new MouseEventData();\r\n    mEvent.preXs = this.mouseEventDataPre.xs;\r\n    mEvent.preYs = this.mouseEventDataPre.ys;\r\n    mEvent.preX = this.mouseEventDataPre.x;\r\n    mEvent.preY = this.mouseEventDataPre.y;\r\n    // mEvent.premEvent = this.mouseEventDataPre;\r\n\r\n    mEvent.pressedShift = e.shiftKey;\r\n    mEvent.pressedAlt = e.altKey;\r\n    mEvent.pressedCtrl = e.ctrlKey;\r\n\r\n    mEvent.xs = e.offsetX;\r\n    mEvent.ys = e.offsetY;\r\n    mEvent.preWheel = this.mouseEventDataPre.wheel;\r\n    mEvent.wheel = 0;\r\n    mEvent.native = e;\r\n    mEvent = this.ioWrapper.core.canvas.RemapByZoom(mEvent);\r\n    this.mouseEventDataPre = mEvent;\r\n    this.e = mEvent;\r\n    return mEvent;\r\n  }\r\n  public get stopPropagation() {\r\n    return this._stopPropagation;\r\n  }\r\n  public set stopPropagation(v: boolean) {\r\n    if (v) {\r\n      this._stopPropagation = v;\r\n    } else {\r\n      setTimeout(() => { this._stopPropagation = v; }, 500);\r\n    }\r\n  }\r\n  private MouseEvenEmitting(mouseEventData: MouseEventData) {\r\n    this.MouseEventEmittingForViewController(mouseEventData);\r\n    if (this._stopPropagation) { return; }\r\n    this.MouseEventEmittingForModel(mouseEventData);\r\n  }\r\n  private MouseEventEmittingForViewController(mouseEventData: MouseEventData) {\r\n    if (this.mouseInteractionUI) { this.mouseInteractionUI.MouseInteractionMenu(mouseEventData); }\r\n  }\r\n  private MouseEventEmittingForModel(mouseEventData: MouseEventData) {\r\n    this.ioWrapper.core.activeCommandController.MouseEventController(mouseEventData);\r\n  }\r\n}","import { Core } from '..';\r\n\r\nimport { MouseInteraction } from './EventInteraction/MouseInteraction';\r\n\r\nexport class IOWrapper {\r\n    core: Core;\r\n    mouseInteraction: MouseInteraction;\r\n\r\n    constructor(core: Core) {\r\n        this.core = core;\r\n\r\n        this.mouseInteraction = new MouseInteraction(this);\r\n    }\r\n    public InitEventListener(div: HTMLDivElement) {\r\n        this.mouseInteraction.InitNativeMouseEvent(div);\r\n        this.Resize();\r\n    }\r\n    private Resize() {\r\n        // document.onresize = ((e:UIEvent)=>( this.ReSizeWindow(e) ));\r\n        // div.addEventListener('onresize', (e: UIEvent) =>this.ReSizeWindow(e) );\r\n        // console.log('dddd');\r\n\r\n        window.addEventListener('resize', (e: UIEvent) => this.ReSizeWindow(e));\r\n\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    ReSizeWindow(e: any) {\r\n        // const size = this.appCoreWrapper.model.modelViewCoreWrapper.viewWrapper.divHost;\r\n        // this.appCoreWrapper.model.graphicsCoreWrapper.canvasWrapper.canvas.ResizeCanvas(size.clientWidth, size.clientHeight);\r\n    }\r\n}","import { CLICK_TYPE, NVector3, MouseEventData as MouseEventDataUI } from '../../../../../../lib/NJSCore';\r\nimport { MouseEventData } from '../../../lib';\r\n// import { MouseEventData } from '../../AppCoreWrapper/IOWrapper/EventInteraction/MouseInteraction';\r\nimport { Core } from '..';\r\n\r\nexport class ActiveCommandController {\r\n    core: Core;\r\n    mouse: NVector3 = new NVector3(0, 0);\r\n\r\n    constructor(core: Core) {\r\n        this.core = core;\r\n    }\r\n    public MouseEventController(e: MouseEventData) {\r\n        const eUI = e.DeepCopy();\r\n        eUI.x = e.xs;\r\n        eUI.y = e.ys;\r\n        this.core.nUI.MouseInteractionMenu(eUI as MouseEventDataUI);\r\n        if (this.core.nUI.stopPropagation) { return; }\r\n\r\n        this.core.canvas.RenderForce();\r\n\r\n        // console.log(this.core.nBlock.implementations);\r\n        this.core.nBlock.implementations.MouseEventController(e);\r\n\r\n        if (e.CLICK_TYPE === CLICK_TYPE.LEFT) {\r\n            this.MouseLeftClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MIDDLE) {\r\n            this.MouseMiddleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN_RIGHT) {\r\n            this.MouseRightClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOUBLE) {\r\n            this.MouseDoubleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MOVE) {\r\n            this.MouseMovePre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DRAG) {\r\n            this.MouseDragPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN) {\r\n            this.MouseDownPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.WHEEL) {\r\n            this.MouseWheelPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.UP) { this.MouseUpPre(e); return; }\r\n\r\n\r\n    }\r\n\r\n    // .......................................................\r\n    public MouseDown(e: MouseEventData) {/* */ }\r\n    public MouseDownPre(e: MouseEventData) {\r\n        this.MouseDown(e);\r\n    }\r\n    public MouseLeftClick(e: MouseEventData) {/* */ }\r\n    public MouseLeftClickPre(e: MouseEventData) {\r\n        // console.log('left click');\r\n        this.MouseLeftClick(e);\r\n    }\r\n    public MouseMiddleClick(e: MouseEventData) {/* */ }\r\n    public MouseMiddleClickPre(e: MouseEventData) {\r\n\r\n        this.MouseMiddleClick(e);\r\n    }\r\n    public MouseRightClick(e: MouseEventData) { /* */ }\r\n    public MouseRightClickPre(e: MouseEventData) {\r\n\r\n        this.MouseRightClick(e);\r\n    }\r\n    public MouseUp(e: MouseEventData) { /* */ }\r\n    public MouseUpPre(e: MouseEventData) {\r\n\r\n        this.MouseUp(e);\r\n\r\n    }\r\n    public MouseDoubleClick(e: MouseEventData) {/* */ }\r\n    public MouseDoubleClickPre(e: MouseEventData) {\r\n        // console.log('d click');\r\n        this.MouseDoubleClick(e);\r\n    }\r\n    public MouseMove(e: MouseEventData) {/* */ }\r\n    public MouseMovePre(e: MouseEventData) {\r\n        // console.log('move');\r\n\r\n        this.MouseMove(e);\r\n    }\r\n    public MouseDrag(e: MouseEventData) {/* */ }\r\n    public MouseDragPre(e: MouseEventData) {\r\n\r\n        // console.log('drag');\r\n        this.mouse.x = e.x;\r\n        this.mouse.y = e.y;\r\n\r\n        this.core.canvas.Pan(e);\r\n\r\n        this.MouseDrag(e);\r\n    }\r\n    public MouseWheel(e: MouseEventData) {/* */ }\r\n    public MouseWheelPre(e: MouseEventData) {\r\n        this.core.canvas.Zoom(e);\r\n        this.MouseWheel(e);\r\n    }\r\n    public pushActionFromPulldown(v: string) {\r\n        const command = v.split('@');\r\n        switch (command[0]) {\r\n            case '':\r\n                //\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n}","import { NBlock } from '..';\r\nimport { Canvas } from './Canvas/Canvas';\r\nimport { IOWrapper } from './IOWrapper';\r\nimport { ActiveCommandController } from './ActiveCommandController/ActiveCommandController';\r\nimport { NUI } from '../../../../../lib/NJSCore';\r\nexport class Core {\r\n    nBlock: NBlock;\r\n    canvas: Canvas;\r\n    nUI: NUI;\r\n    ioWrapper: IOWrapper;\r\n    activeCommandController: ActiveCommandController;\r\n    constructor(nBlock: NBlock, div: HTMLElement) {\r\n        this.nBlock = nBlock;\r\n        this.InitPulldown();\r\n        this.InitCanvas(div);\r\n        this.activeCommandController = new ActiveCommandController(this);\r\n        this.ioWrapper = new IOWrapper(this);\r\n    }\r\n    private InitCanvas(div: HTMLElement) {\r\n        this.canvas = new Canvas(this, div);\r\n    }\r\n    private InitPulldown() {\r\n        this.nUI = new NUI(this.nBlock.div);\r\n        // this.nUI.ini\r\n        this.BindingActiveCommandController();\r\n    }\r\n    public InitPost() {\r\n        this.ioWrapper.InitEventListener(this.nBlock.div as HTMLDivElement);\r\n    }\r\n    private BindingActiveCommandController() {\r\n        this.nUI.BindingActiveCommandController('NDrawingBlock', (v: string) => this.Commander(v));\r\n    }\r\n    public Resize(width: number, height: number) {\r\n        this.nUI.Resize(width, height);\r\n    }\r\n    private Commander(v: string) {\r\n        this.activeCommandController.pushActionFromPulldown(v);\r\n    }\r\n}","import { CanvasDrawing } from '../../../../../../../lib/NJSCore';\r\nimport { ActiveCommandController } from '../ActiveCommandController/ActiveCommandController';\r\nimport { BlockImplementation } from '..';\r\nexport class Renderer {\r\n    implementation: BlockImplementation;\r\n    activeCommandController: ActiveCommandController;\r\n    constructor(implementation: BlockImplementation) {\r\n        this.implementation = implementation;\r\n        this.activeCommandController = this.implementation.activeCommandController;\r\n    }\r\n    public OnRender(ctx: CanvasRenderingContext2D) {\r\n        this.Update(ctx);\r\n        this.Render(ctx);\r\n    }\r\n    public Update(ctx: CanvasRenderingContext2D) {\r\n\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        // console.log('ren!! --');\r\n        CanvasDrawing.GridLineOrigin(ctx, 10, 10, 50, 50);\r\n\r\n        for (let i = 0; i < this.implementation.scene.listBlocks.length; ++i) {\r\n            this.implementation.scene.listBlocks[i].Render(ctx);\r\n        }\r\n\r\n        this.implementation.scene.drawingGraph.Render(ctx);\r\n\r\n        ctx.fillStyle = '#00ff00';\r\n        ctx.beginPath();\r\n        ctx.arc(this.activeCommandController.mouse.x, this.activeCommandController.mouse.y, 2, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n}","import { NVector3 } from '../../../../lib';\r\nimport { BlockImplementation } from '..';\r\nexport class GeometryCommon {\r\n    implementation: BlockImplementation;\r\n    constructor(implementation: BlockImplementation) {\r\n        this.implementation = implementation;\r\n\r\n    }\r\n    public Pick(v: NVector3) {\r\n        for (let i = 0; i < this.implementation.scene.listBlocks.length; ++i) {\r\n            if (this.implementation.scene.listBlocks[i].IsInside(v)) {\r\n                return this.implementation.scene.listBlocks[i];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}","import { NVector3, MouseEventData } from '../../../../../lib';\r\nimport { Scene } from '../../Scene';\r\n\r\nexport abstract class GeometryUIBase {\r\n    scene: Scene;\r\n    constructor(scene: Scene) {\r\n        this.scene = scene;\r\n    }\r\n    public RenderPre(ctx: CanvasRenderingContext2D) {\r\n        this.Render(ctx);\r\n    }\r\n    public Translation(e: MouseEventData) {\r\n        // implementation needed\r\n    }\r\n    abstract Render(ctx: CanvasRenderingContext2D): void;\r\n    abstract IsInside(v: NVector3): boolean;\r\n}","import { NVector3, MouseEventData } from '../../../../lib';\r\nimport { GeometryUIBase } from './Base/GeometryUIBase';\r\nimport { Scene } from '../Scene';\r\n\r\nexport class Body extends GeometryUIBase {\r\n    v: NVector3;\r\n    width: number = 50;\r\n    height: number = 25;\r\n    col: string = '#ff0000';\r\n    constructor(scene: Scene, x: number, y: number) {\r\n        super(scene);\r\n        this.v = new NVector3(x - this.width * 0.5, y - this.height * 0.5, 0);\r\n        this.scene.Add(this);\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D): void {\r\n        ctx.fillStyle = this.col;\r\n        ctx.beginPath();\r\n        ctx.fillRect(this.v.x, this.v.y, this.width, this.height);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    public Translation(e: MouseEventData) {\r\n        this.v.x += e.x - e.preX;\r\n        this.v.y += e.y - e.preY;\r\n    }\r\n    public IsInside(v: NVector3): boolean {\r\n        const bool = NVector3.IsInsideOfVecWithHeight(v, this.v, this.width, this.height);\r\n        if (bool) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}","import { CLICK_TYPE, MouseEventData } from '../../../../lib';\r\n// import { MouseEventData } from '../../AppCoreWrapper/IOWrapper/EventInteraction/MouseInteraction';\r\nimport { ActiveCommandController } from './ActiveCommandController';\r\nimport { Body } from '../GeometryUI/Body';\r\n\r\nexport class ActiveCommandCommon {\r\n    ac: ActiveCommandController;\r\n    constructor(ac: ActiveCommandController) {\r\n        this.ac = ac;\r\n    }\r\n    public MouseEventController(e: MouseEventData) {\r\n        this.ac.mouse.x = e.x; this.ac.mouse.y = e.y;\r\n\r\n        if (e.CLICK_TYPE === CLICK_TYPE.LEFT) {\r\n            this.MouseLeftClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MIDDLE) {\r\n            this.MouseMiddleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN_RIGHT) {\r\n            this.MouseRightClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOUBLE) {\r\n            this.MouseDoubleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MOVE) {\r\n            this.MouseMovePre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DRAG) {\r\n            this.MouseDragPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN) {\r\n            this.MouseDownPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.WHEEL) {\r\n            this.MouseWheelPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.UP) { this.MouseUpPre(e); return; }\r\n\r\n\r\n    }\r\n    // .......................................................\r\n    public MouseDown(e: MouseEventData) {/* */ }\r\n    public MouseDownPre(e: MouseEventData) {\r\n        const geo = this.ac.implementation.geometryCommon.Pick(this.ac.mouse);\r\n        if (geo) {\r\n            this.ac.ablePan = false;\r\n            this.ac.capture = geo;\r\n        }\r\n        // console.log(geo);\r\n        this.MouseDown(e);\r\n    }\r\n    public MouseLeftClick(e: MouseEventData) {/* */ }\r\n    public MouseLeftClickPre(e: MouseEventData) {\r\n        // console.log(e);\r\n\r\n\r\n        // console.log('left click');\r\n        this.MouseLeftClick(e);\r\n    }\r\n    public MouseMiddleClick(e: MouseEventData) {/* */ }\r\n    public MouseMiddleClickPre(e: MouseEventData) {\r\n\r\n        this.MouseMiddleClick(e);\r\n    }\r\n    public MouseRightClick(e: MouseEventData) { /* */ }\r\n    public MouseRightClickPre(e: MouseEventData) {\r\n\r\n        this.MouseRightClick(e);\r\n    }\r\n    public MouseUp(e: MouseEventData) { /* */ }\r\n    public MouseUpPre(e: MouseEventData) {\r\n\r\n        this.ac.ablePan = true;\r\n        this.ac.capture = undefined;\r\n        this.MouseUp(e);\r\n    }\r\n    public MouseDoubleClick(e: MouseEventData) {/* */ }\r\n    public MouseDoubleClickPre(e: MouseEventData) {\r\n        // console.log('d click');\r\n        this.MouseDoubleClick(e);\r\n    }\r\n    public MouseMove(e: MouseEventData) {/* */ }\r\n    public MouseMovePre(e: MouseEventData) {\r\n        // console.log('move');\r\n\r\n        this.MouseMove(e);\r\n    }\r\n    public MouseDrag(e: MouseEventData) {/* */ }\r\n    public MouseDragPre(e: MouseEventData) {\r\n        if (this.ac.capture) {\r\n            this.ac.capture.Translation(e);\r\n        }\r\n        this.MouseDrag(e);\r\n    }\r\n    public MouseWheel(e: MouseEventData) {/* */ }\r\n    public MouseWheelPre(e: MouseEventData) {\r\n\r\n        this.MouseWheel(e);\r\n    }\r\n}\r\n// ...................................................\r\n\r\nexport class ActiveCommandSelection extends ActiveCommandCommon {\r\n    constructor(acs: ActiveCommandController) { super(acs); }\r\n}\r\n\r\nexport class ActiveCommandRect extends ActiveCommandCommon {\r\n    constructor(acs: ActiveCommandController) { super(acs); }\r\n    public MouseLeftClick(e: MouseEventData) {\r\n        new Body(this.ac.implementation.scene, e.x, e.y);\r\n    }\r\n}\r\n\r\nexport class ActiveCommandDrawingBlock extends ActiveCommandCommon {\r\n    constructor(acs: ActiveCommandController) { super(acs); }\r\n    public MouseEventController(e: MouseEventData) {\r\n        this.ac.implementation.scene.drawingGraph.ac.MouseEventController(e);\r\n    }\r\n}","import { BlockImplementation } from '..';\r\nimport { ACTIVECOMMAND_MODE } from '../ActiveCommandController/ActiveCommandController';\r\nexport class View {\r\n    implementation: BlockImplementation;\r\n    divHost: HTMLElement;\r\n    div: HTMLElement;\r\n    constructor(implementation: BlockImplementation) {\r\n        this.implementation = implementation;\r\n        this.divHost = implementation.implementations.nBlock.hostDiv;\r\n\r\n        const div = document.createElement('div');\r\n        if (div) {\r\n            this.div = div;\r\n            // this.div.style.position = 'absolute';\r\n            this.divHost.insertBefore(this.div, implementation.implementations.nBlock.div);\r\n            implementation.implementations.nBlock.div.style.height = '90%';\r\n            this.Init();\r\n            // console.log(this);\r\n        }\r\n    }\r\n    public Init() {\r\n        let div = document.createElement('button');\r\n        div.type = 'button';\r\n        div.innerText = 'select';\r\n        div.onclick = () => {\r\n            this.implementation.activeCommandController.SetActiveCommand(ACTIVECOMMAND_MODE.SELECT);\r\n        };\r\n        this.div.append(div);\r\n\r\n        div = document.createElement('button');\r\n        div.type = 'button';\r\n        div.innerText = 'point';\r\n        div.onclick = () => {\r\n            this.implementation.activeCommandController.SetActiveCommand(ACTIVECOMMAND_MODE.RECT);\r\n        };\r\n        this.div.append(div);\r\n    }\r\n\r\n}","import { Node } from './Node';\r\n\r\nexport class Edge {\r\n    n0: Node; n1: Node;\r\n    private renderer: EdgeRenderer;\r\n    constructor(n0: Node, n1: Node, type: string) {\r\n        this.renderer = new EdgeRenderer(this);\r\n        this.n0 = n0;\r\n        this.n1 = n1;\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        this.renderer.Render(ctx);\r\n    }\r\n    public Translation() {\r\n        // implementation needed\r\n    }\r\n}\r\nexport class EdgeRenderer {\r\n    edge: Edge;\r\n    constructor(edge: Edge) {\r\n        this.edge = edge;\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        const offX = Math.abs(this.edge.n1.v.x - this.edge.n0.v.x) * 0.5;\r\n        const offY = Math.abs(this.edge.n1.v.y - this.edge.n0.v.y) * 0.5;\r\n        const off = offX > offY ? offX : offY;\r\n        ctx.lineWidth = 2;\r\n        ctx.beginPath();\r\n        ctx.moveTo(\r\n            this.edge.n0.v.x, this.edge.n0.v.y\r\n        );\r\n        ctx.bezierCurveTo(\r\n            this.edge.n0.v.x + off, this.edge.n0.v.y,\r\n            this.edge.n1.v.x - off, this.edge.n1.v.y,\r\n            this.edge.n1.v.x, this.edge.n1.v.y\r\n        );\r\n        ctx.stroke();\r\n    }\r\n}","import { NVector3, MouseEventData } from '../../../../../../lib';\r\nimport { Edge } from './Edge';\r\nexport class Node {\r\n    type: string = '';\r\n    v: NVector3;\r\n    edgeIn: Edge[] = [];\r\n    edgeOut: Edge[] = [];\r\n\r\n    width: number = 50;\r\n    height: number = 25;\r\n\r\n    private renderer: NodeRenderer;\r\n    constructor(x: number, y: number, type: string) {\r\n        this.type = type;\r\n        this.renderer = new NodeRenderer(this);\r\n        this.v = new NVector3(x - this.width * 0.5, y - this.height * 0.5, 0);\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D): void {\r\n        this.renderer.Render(ctx);\r\n\r\n    }\r\n    public Translation(e: MouseEventData) {\r\n        this.v.x += e.x - e.preX;\r\n        this.v.y += e.y - e.preY;\r\n    }\r\n    public IsInside(v: NVector3): boolean {\r\n        const bool = NVector3.IsInsideOfVecWithHeight(v, this.v, this.width, this.height);\r\n        if (bool) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\nexport class NodeRenderer {\r\n    node: Node;\r\n    fillStyle: string = '#ff0000';\r\n    constructor(node: Node) {\r\n        this.node = node;\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        ctx.fillStyle = this.fillStyle;\r\n        ctx.beginPath();\r\n        ctx.fillRect(this.node.v.x, this.node.v.y, this.node.width, this.node.height);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n}","import { NVector3 } from '../../../../../lib';\r\nimport { Edge } from './Base/Edge';\r\nimport { Node } from './Base/Node';\r\nimport { DrawingGraph } from '..';\r\nexport class Graph {\r\n    nodes: Node[] = [];\r\n    edges: Edge[] = [];\r\n    drawingGraph: DrawingGraph;\r\n    private utility: GraphUtility;\r\n    constructor(drawingGraph: DrawingGraph) {\r\n        this.drawingGraph = drawingGraph;\r\n        this.utility = new GraphUtility(this);\r\n    }\r\n    public AddNode(x: number, y: number, type: string) {\r\n        this.nodes.push(new Node(x, y, type));\r\n        // console.log(this.nodes);\r\n        if (this.nodes.length > 1) {\r\n            this.AddEdge(this.nodes[this.nodes.length - 2], this.nodes[this.nodes.length - 1], 'd');\r\n        }\r\n    }\r\n    public AddEdge(n0: Node, n1: Node, type: string) {\r\n        this.edges.push(new Edge(n0, n1, type));\r\n        // console.log(this.nodes);\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        let i = 0;\r\n        i = this.nodes.length; while (i--) { this.nodes[i].Render(ctx); }\r\n        i = this.edges.length; while (i--) { this.edges[i].Render(ctx); }\r\n    }\r\n    public Pick(v: NVector3) {\r\n        return this.utility.Pick(v);\r\n    }\r\n}\r\n\r\nclass GraphUtility {\r\n    private graph: Graph;\r\n    constructor(graph: Graph) {\r\n        this.graph = graph;\r\n    }\r\n    public Pick(v: NVector3) {\r\n        for (let i = 0; i < this.graph.nodes.length; ++i) {\r\n            if (this.graph.nodes[i].IsInside(v)) {\r\n                // console.log('working');\r\n                return this.graph.nodes[i];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}","import { CLICK_TYPE, MouseEventData, NVector3 } from '../../../../../lib';\r\n// import { MouseEventData } from '../../AppCoreWrapper/IOWrapper/EventInteraction/MouseInteraction';\r\nimport { Node } from '../GraphGarphics/Base/Node';\r\nimport { DrawingGraph } from '..';\r\n\r\nexport class ActiveCommand {\r\n    dbGraph: DrawingGraph;\r\n    mouse: NVector3 = new NVector3(0, 0, 0);\r\n    capture: undefined | Node = undefined;\r\n    constructor(dbGraph: DrawingGraph) {\r\n        this.dbGraph = dbGraph;\r\n    }\r\n    public MouseEventController(e: MouseEventData) {\r\n        // console.log('drawing block');\r\n        this.mouse.x = e.x; this.mouse.y = e.y;\r\n\r\n        if (e.CLICK_TYPE === CLICK_TYPE.LEFT) {\r\n            this.MouseLeftClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MIDDLE) {\r\n            this.MouseMiddleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN_RIGHT) {\r\n            this.MouseRightClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOUBLE) {\r\n            this.MouseDoubleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MOVE) {\r\n            this.MouseMovePre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DRAG) {\r\n            this.MouseDragPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN) {\r\n            this.MouseDownPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.WHEEL) {\r\n            this.MouseWheelPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.UP) { this.MouseUpPre(e); return; }\r\n\r\n\r\n    }\r\n    // .......................................................\r\n    public MouseDown(e: MouseEventData) {/* */ }\r\n    public MouseDownPre(e: MouseEventData) {\r\n        const geo = this.dbGraph.graph.Pick(this.mouse);\r\n        if (geo) {\r\n            this.dbGraph.scene.blockImplementation.activeCommandController.ablePan = false;\r\n            this.capture = geo;\r\n        }\r\n        // console.log(geo);\r\n        this.MouseDown(e);\r\n    }\r\n    public MouseLeftClick(e: MouseEventData) {/* */ }\r\n    public MouseLeftClickPre(e: MouseEventData) {\r\n\r\n        this.dbGraph.graph.AddNode(e.x, e.y, 'type');\r\n\r\n        // console.log('left click');\r\n        this.MouseLeftClick(e);\r\n    }\r\n    public MouseMiddleClick(e: MouseEventData) {/* */ }\r\n    public MouseMiddleClickPre(e: MouseEventData) {\r\n\r\n        this.MouseMiddleClick(e);\r\n    }\r\n    public MouseRightClick(e: MouseEventData) { /* */ }\r\n    public MouseRightClickPre(e: MouseEventData) {\r\n\r\n        this.MouseRightClick(e);\r\n    }\r\n    public MouseUp(e: MouseEventData) { /* */ }\r\n    public MouseUpPre(e: MouseEventData) {\r\n\r\n        this.dbGraph.scene.blockImplementation.activeCommandController.ablePan = true;\r\n        this.capture = undefined;\r\n        this.MouseUp(e);\r\n    }\r\n    public MouseDoubleClick(e: MouseEventData) {/* */ }\r\n    public MouseDoubleClickPre(e: MouseEventData) {\r\n        // console.log('d click');\r\n        this.MouseDoubleClick(e);\r\n    }\r\n    public MouseMove(e: MouseEventData) {/* */ }\r\n    public MouseMovePre(e: MouseEventData) {\r\n        // console.log('move');\r\n\r\n        this.MouseMove(e);\r\n    }\r\n    public MouseDrag(e: MouseEventData) {/* */ }\r\n    public MouseDragPre(e: MouseEventData) {\r\n        if (this.capture) {\r\n            this.capture.Translation(e);\r\n        }\r\n        this.MouseDrag(e);\r\n    }\r\n    public MouseWheel(e: MouseEventData) {/* */ }\r\n    public MouseWheelPre(e: MouseEventData) {\r\n\r\n        this.MouseWheel(e);\r\n    }\r\n}","import { Scene } from '../Scene';\r\nimport { Graph } from './GraphGarphics';\r\nimport { ActiveCommand } from './ActiveCommand/ActiveCommand';\r\nexport class DrawingGraph {\r\n    ac: ActiveCommand;\r\n    graph: Graph;\r\n    scene: Scene;\r\n\r\n    constructor(scene: Scene) {\r\n        this.scene = scene;\r\n        this.ac = new ActiveCommand(this);\r\n        this.graph = new Graph(this);\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        this.graph.Render(ctx);\r\n    }\r\n}","import { BlockImplementation } from '..';\r\nimport { GeometryUIBase } from '../GeometryUI/Base/GeometryUIBase';\r\nimport { DrawingGraph } from '../DrawingGraph';\r\nexport class Scene {\r\n    blockImplementation: BlockImplementation;\r\n    listBlocks: GeometryUIBase[] = [];\r\n\r\n    drawingGraph: DrawingGraph;\r\n\r\n    constructor(blockImplementation: BlockImplementation) {\r\n        this.blockImplementation = blockImplementation;\r\n        this.InitDrawingGraph();\r\n    }\r\n    public InitDrawingGraph() {\r\n        this.drawingGraph = new DrawingGraph(this);\r\n    }\r\n    public Add(v: GeometryUIBase) {\r\n        this.listBlocks.push(v);\r\n    }\r\n}","import { MouseEventData } from '../../../lib';\r\nimport { Implementations } from '..';\r\nimport { Renderer } from './Renderer';\r\nimport { GeometryCommon } from './GeometryUI/GeometryCommon';\r\nimport { View } from './View';\r\nimport { Scene } from './Scene';\r\nimport { ActiveCommandController } from './ActiveCommandController/ActiveCommandController';\r\nexport class BlockImplementation {\r\n    implementations: Implementations;\r\n    renderer: Renderer;\r\n    geometryCommon: GeometryCommon;\r\n    view: View;\r\n    scene: Scene;\r\n    activeCommandController: ActiveCommandController;\r\n    constructor(implementations: Implementations) {\r\n        this.implementations = implementations;\r\n        this.Init();\r\n    }\r\n    private Init() {\r\n        this.activeCommandController = new ActiveCommandController(this);\r\n        this.geometryCommon = new GeometryCommon(this);\r\n        this.scene = new Scene(this);\r\n        this.renderer = new Renderer(this);\r\n        this.view = new View(this);\r\n    }\r\n    public MouseEventController(e: MouseEventData) {\r\n        this.activeCommandController.activeCommand.MouseEventController(e);\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        this.renderer.OnRender(ctx);\r\n    }\r\n}","import { MouseEventData } from '../../lib';\r\nimport { NBlock } from '..';\r\nimport { BlockImplementation } from './BlockImplementation';\r\nexport class Implementations {\r\n    nBlock: NBlock;\r\n    implementation: BlockImplementation;\r\n    constructor(nBlock: NBlock) {\r\n        this.nBlock = nBlock;\r\n        this.implementation = new BlockImplementation(this);\r\n    }\r\n    public MouseEventController(e: MouseEventData) {\r\n        this.implementation.MouseEventController(e);\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        this.implementation.Render(ctx);\r\n    }\r\n}","import { Core } from './Core';\r\nimport { Implementations } from './Implementations';\r\nexport class NBlock {\r\n    id: string;\r\n    core: Core;\r\n    implementations: Implementations;\r\n    hostDiv: HTMLElement;\r\n    div: HTMLElement;\r\n    static Init(id: string = 'SandBox') {\r\n        new NBlock(id);\r\n    }\r\n    constructor(id: string = 'SandBox') {\r\n        this.id = id;\r\n        this.Init();\r\n        this.InitPost();\r\n\r\n        window['app'] = this;\r\n    }\r\n    private Init() {\r\n        const hostDiv = document.getElementById(this.id);\r\n        if (hostDiv) { this.hostDiv = hostDiv; } else { return; }\r\n\r\n        const div = document.createElement('div');\r\n        if (div) {\r\n            this.div = div;\r\n            this.div.style.width = '100%';\r\n            this.div.style.height = '100%';\r\n            this.div.style.background = '#dddddd';\r\n            this.hostDiv.append(this.div);\r\n        }\r\n\r\n        this.core = new Core(this, div);\r\n        this.implementations = new Implementations(this);\r\n    }\r\n    private InitPost() {\r\n        this.core.InitPost();\r\n        this.core.canvas.Render = (ctx: CanvasRenderingContext2D) => this.implementations.Render(ctx);\r\n    }\r\n}","import { NBlock as NBlockV1 } from './NBlockV1';\r\n\r\nexport class AppDrawingBlock {\r\n    id: string;\r\n    appV1: NBlockV1;\r\n    hostDiv: HTMLElement;\r\n    div: HTMLElement;\r\n    version: number = 1;\r\n    static Init(id: string = 'SandBox') {\r\n        new AppDrawingBlock(id, 1);\r\n    }\r\n    constructor(id: string = 'SandBox', version: number = 1) {\r\n        this.id = id;\r\n        this.version = version;\r\n        this.Init();\r\n    }\r\n    private Init() {\r\n\r\n        switch (this.version) {\r\n            case 1:\r\n                this.appV1 = new NBlockV1(this.id);\r\n                break;\r\n            case 2:\r\n                this.appV1 = new NBlockV1(this.id);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nexport class Solution {\r\n    public divHost: HTMLElement;\r\n\r\n    constructor(id: string, index = 0) {\r\n        this.divHost = document.getElementById(id);\r\n\r\n        const div = document.createElement('div');\r\n        div.id ='ngl3d';\r\n        div.style.width = '100%';\r\n        div.style.height = '100%';\r\n        this.divHost.appendChild(div);\r\n\r\n        AppDrawingBlock.Init(div.id);\r\n    }\r\n    public destroy() {\r\n        if (this.divHost) {\r\n            try {\r\n                // More efficient way to remove all children\r\n                while (this.divHost.firstChild) {\r\n                    this.divHost.removeChild(this.divHost.firstChild);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error in destroy method:', error);\r\n            }\r\n        } else {\r\n            console.warn('divHost is undefined in destroy method');\r\n        }\r\n    }\r\n}"],"names":["Canvas","constructor","core","div","canvas","ctx","isActive","zoom","translation","translationZoom","deltaTime","canvasLoopController","log","isViewChanging","loopNum","needRenderloop","ablePan","pause","this","Init","LoopInit","document","createElement","width","clientWidth","height","clientHeight","append","getContext","Deltatime","CanvasLoopController","SetLevel4","Loop","before","performance","now","UpdateFPS","level","requestAnimationFrame","RenderPre","stop","TimerForStop","after","frameRate","toFixed","SetLevel1","SetLevel2","SetLevel3","RenderSetLevel4","Reset","setTimeout","SetLevel5","SetLevel6","Clear","clearRect","Zoom","e","wheel","console","RemapByZoom","x","xs","y","ys","Pan","xOff","preXs","yOff","preYs","RenderForce","save","translate","scale","Render","restore","CLICK_TYPE","ACTIVECOMMAND_MODE","MouseEventData","z","preX","preY","preZ","yGLPicking","command","MOVE","isDown","isDoubleClick","isMove","pressedShift","pressedAlt","pressedCtrl","preWheel","native","DeepCopy","mEvent","MouseInteraction","ioWrapper","mouseInteractionUI","mouseEventDataPre","isEnable","clickCount","click","prevent","delay","timer","down","_stopPropagation","InitNativeMouseEvent","onclick","MouseClick","ondblclick","clearTimeout","MouseDoubleClick","onmousedown","MouseDown","onmouseup","MouseUp","onmousemove","MouseMove","addEventListener","MouseWheel","deltaY","CommonEventBuilder","DOWN","MouseEvenEmitting","button","LEFT","MIDDLE","RIGHT","DOUBLE","MouseDrag","DRAG","buttons","DRAG_MIDDLE","DRAG_RIGHT","UP","v","WHEEL","shiftKey","altKey","ctrlKey","offsetX","offsetY","stopPropagation","mouseEventData","MouseEventEmittingForViewController","MouseEventEmittingForModel","MouseInteractionMenu","activeCommandController","MouseEventController","IOWrapper","mouseInteraction","InitEventListener","Resize","window","ReSizeWindow","ActiveCommandController","mouse","NVector3","eUI","nUI","nBlock","implementations","MouseUpPre","MouseWheelPre","MouseDownPre","MouseDragPre","MouseMovePre","MouseDoubleClickPre","MouseRightClickPre","MouseMiddleClickPre","MouseLeftClickPre","MouseLeftClick","MouseMiddleClick","MouseRightClick","pushActionFromPulldown","split","Core","InitPulldown","InitCanvas","NUI","BindingActiveCommandController","InitPost","Commander","Renderer","implementation","OnRender","Update","CanvasDrawing","i","scene","listBlocks","length","drawingGraph","fillStyle","beginPath","arc","Math","PI","closePath","fill","GeometryCommon","Pick","IsInside","GeometryUIBase","Translation","Body","super","col","Add","fillRect","ActiveCommandCommon","ac","DOWN_RIGHT","geo","geometryCommon","capture","undefined","ActiveCommandSelection","acs","ActiveCommandRect","ActiveCommandDrawingBlock","commands","activeCommand","_ablePan","SELECT","RECT","DRAWING_BLOCK","SetActiveCommand","theAC","View","divHost","hostDiv","insertBefore","style","type","innerText","Edge","n0","n1","renderer","EdgeRenderer","edge","offX","abs","offY","off","lineWidth","moveTo","bezierCurveTo","stroke","Node","edgeIn","edgeOut","NodeRenderer","node","Graph","nodes","edges","utility","GraphUtility","AddNode","push","AddEdge","graph","ActiveCommand","dbGraph","blockImplementation","DrawingGraph","Scene","InitDrawingGraph","BlockImplementation","view","Implementations","NBlock","static","id","getElementById","background","AppDrawingBlock","version","appV1","NBlockV1","Solution","appendChild","destroy","firstChild","removeChild","error","warn"],"sourceRoot":""}
"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[20005],{20005:(t,e,s)=>{s.r(e),s.d(e,{Solution:()=>o});var i=s(65812),n=(s(57980),s(55913));class o extends n.bb{constructor(t){const e=document.getElementById(t),s=document.createElement("div");super(s),this.t=0,this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.col=["#ff0000","#00ff00","#0000ff","#00fff0","#ff0000","#fff000","#0fff00"],this.tfLinearRegression=[],this.container=void 0,e.appendChild(s),s.id="container-lab",s.style.alignItems="center",s.style.marginTop="50px",s.style.marginLeft="auto",s.style.marginRight="auto",s.style.width="600px",s.style.height="600px",this.container=s,this.canvas.width=600,this.canvas.height=600,this.tfLinearRegression.push(new n.PE(1)),this.tfLinearRegression.push(new n.PE(2)),this.tfLinearRegression.push(new n.PE(3)),this.tfLinearRegression.push(new n.PE(4)),h().then((t=>{let e=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;t.map((t=>{let n=t.horsepower;n>s&&(s=n),n<e&&(e=n);let h=t.mpg;h>o&&(o=h),h<i&&(i=h)}));for(let h of t){let t=h.horsepower,a=h.mpg;this.vs.push(new n.P((0,n.a2)(t,e,s,-.9,.9),(0,n.a2)(a,i,o,-.9,.9)))}})),this.initUI(),this.start()}destroy(){this.isStatic=!0;try{for(;this.container.parentElement;)this.container.parentElement.removeChild(this.container);for(;void 0!==this.divHost&&void 0!==this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}catch(t){}}render(t){this.RenderIndependentCanvas(t)}mouseDown(t,e){const s=new n.P(this.mapX(t),this.mapY(e));for(let i=0;i<this.vs.length;++i)if(n.P.distanceTo(s,this.vs[i])<.05)return void(this.selVec=this.vs[i]);this.vs.push(new n.P(this.mapX(t),this.mapY(e)))}mouseUp(t,e){}mouseDrag(t,e){this.selVec&&(this.selVec.x=this.mapX(t),this.selVec.y=this.mapY(e))}mouseClick(t,e){const s=new n.P(this.mapX(t),this.mapY(e));this.vs.push(new n.P(s.x,s.y))}mouseMove(t,e){let s;const i=new n.P(this.mapX(t),this.mapY(e));for(let o=0;o<this.vs.length;++o){n.P.distanceTo(i,this.vs[o])<.05&&(s=this.vs[o])}this.selVec=s||void 0}keyDown(t){}mapX(t){return(0,n.a2)(t,0,this.canvas.width,-1,1)}mapY(t){return(0,n.a2)(t,0,this.canvas.height,1,-1)}GridLine(t){t.strokeStyle="#555555";const e=this.canvas.width/20-1,s=this.canvas.height/20-1;for(let i=0;i<20;i+=1){t.lineWidth=10===i?3:1;let n=e*i,o=0,h=n,a=this.canvas.height;t.beginPath(),t.moveTo(n,o),t.lineTo(h,a),t.stroke(),n=0,o=s*i,h=this.canvas.width,a=o,t.beginPath(),t.moveTo(n,o),t.lineTo(h,a),t.stroke()}}RenderIndependentCanvas(t){this.t+=5;const e=Math.floor(this.t)<this.vs.length?Math.floor(this.t):this.vs.length;if(t.fillStyle="#222",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.GridLine(t),this.vs.length>1)for(let s=0;s<this.tfLinearRegression.length;++s){const e=[],i=[];for(let t=0;t<this.vs.length;++t)e.push(this.vs[t].x),i.push(this.vs[t].y);this.tfLinearRegression[s].train(e,i),this.RenderLine(t)}t.fillStyle="#00ff00";for(let s=0;s<e;++s)t.beginPath(),t.arc((0,n.a2)(this.vs[s].x,-1,1,0,this.canvas.width),(0,n.a2)(this.vs[s].y,-1,1,this.canvas.height,0),5,0,2*Math.PI),t.closePath(),t.fill();this.selVec&&(t.fillStyle="#ffffff",t.font="15px Arial",t.textAlign="center",t.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),(0,n.a2)(this.selVec.x,-1,1,0,this.canvas.width),(0,n.a2)(this.selVec.y,-1,1,this.canvas.height,0)-9))}RenderLine(t){for(let e=0;e<this.tfLinearRegression.length;++e){const s=[];for(let t=-1;t<=1;t+=.08)s.push(t);const o=i.tidy((()=>this.tfLinearRegression[e].predict(i.tensor1d(s))));let h=o.dataSync();o.dispose(),t.lineWidth=1,t.strokeStyle=this.col[e],t.beginPath(),t.moveTo((0,n.a2)(s[0],-1,1,0,this.canvas.width),(0,n.a2)(h[0],-1,1,this.canvas.height,0));for(let e=1;e<s.length;++e)t.lineTo((0,n.a2)(s[e],-1,1,0,this.canvas.width),(0,n.a2)(h[e],-1,1,this.canvas.height,0));t.stroke()}}initUI(){const t=document.createElement("div");t.style.position="absolute",t.style.marginTop="600px",t.style.color="#ffffff";let e=document.createElement("p");e.textContent="click on this screen to add data",t.append(e),e=document.createElement("p"),e.textContent="LinearRegression",e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[0],t.append(e),e=document.createElement("p"),e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[1],e.textContent="Degree of polynomial - 2",t.append(e),e=document.createElement("p"),e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[2],e.textContent="Degree of polynomial - 3",t.append(e),e=document.createElement("p"),e.style.marginTop="0px",e.style.marginBottom="0px",e.style.color=this.col[3],e.textContent="Degree of polynomial - 4",t.append(e),this.divHost.append(t)}}const h=async()=>{const t=await fetch("https://storage.googleapis.com/tfjs-tutorials/carsData.json");return(await t.json()).map((t=>({mpg:t.Miles_per_Gallon,horsepower:t.Horsepower}))).filter((t=>null!=t.mpg&&null!=t.horsepower))}}}]);
//# sourceMappingURL=20005.02e165d1.chunk.js.map
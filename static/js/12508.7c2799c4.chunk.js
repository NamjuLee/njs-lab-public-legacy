"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[12508],{17485:(t,e,i)=>{i.d(e,{T:()=>n});var s=i(17760),o=i(98925);class h{constructor(t){this.canvas=void 0,this.hostDiv=void 0,this.ctx=void 0,this.t=0,this.camera=void 0,this.scene=void 0,this.renderer=void 0,this.controls=void 0,this.requestFrame=void 0,this.loop=()=>{this.requestFrame=requestAnimationFrame(this.loop),this.controls.update(),this.update(this.scene),this.renderer.render(this.scene,this.camera),this.t+=.01},this.hostDiv=document.getElementById(t),this.initCanvas()}initCanvas(){s.Tme.DEFAULT_UP.set(0,1,0),this.scene=new s.xsS,this.scene.background=new s.Ilk(0),this.scene.castShadow=!0,this.renderer=new s.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(this.hostDiv.clientWidth/this.hostDiv.clientHeight),this.renderer.domElement.id="Three",this.renderer.domElement.style.position="absolute",this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight),this.hostDiv.appendChild(this.renderer.domElement),this.camera=new s.cPb(30,this.hostDiv.clientWidth/this.hostDiv.clientHeight,1,5e3),this.controls=new o.OrbitControls(this.camera,this.renderer.domElement),this.camera.position.set(20,20,20),this.controls.update(),this.canvas=this.renderer.domElement,this.init()}init(){this.eventBind()}eventBind(){this.renderer.domElement.onmousedown=t=>this.mouseDown(t),this.renderer.domElement.onmouseup=t=>this.mouseUp(t),this.renderer.domElement.onmousemove=t=>this.mouseMove(t),this.renderer.domElement.addEventListener("click",(t=>this.mouseClick(t))),window.addEventListener("resize",(()=>this.onWindowResize()))}onWindowResize(){this.camera.aspect=this.hostDiv.clientWidth/this.hostDiv.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight)}start(){this.loop()}mouseDown(t){}mouseUp(t){}mouseClick(t){}mouseDClick(t){}mouseMove(t){}mouseDrag(t){}update(t){}destroy(){for(window.removeEventListener("resize",(()=>this.onWindowResize())),cancelAnimationFrame(this.requestFrame),this.requestFrame=void 0;this.hostDiv.lastChild;)this.hostDiv.removeChild(this.hostDiv.lastChild)}}class n extends h{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main"),this.pointLight=void 0,this.raycaster=new s.iMs,this.mouse=new s.FM8,this.m=new s.Pa4,this.sphere=void 0,this.ground=void 0,this.axis=void 0,this.grid=void 0,this.arrayMesh=[],this.arrayPoint=[],this.arrayArrow=[],this.render=t=>{},this.mouseClickPost=t=>{},this.initPost(),this.start()}initPost(){const t=new s.Mig(5592405);this.scene.add(t),this.pointLight=new s.cek(16777215,100),this.pointLight.position.x=10,this.pointLight.castShadow=!0,this.scene.add(this.pointLight),this.axis=new s.y8_(5),this.axis.position.y=.001,this.scene.add(this.axis);this.grid=new s.VLJ(50,100,4473924,3289650),this.scene.add(this.grid);const e=new s._12(50,50),i=new s.vBJ({color:65793,side:s.ehD,transparent:!0,opacity:0});this.ground=new s.Kj0(e,i),this.ground.rotation.x=-Math.PI/2,this.scene.add(this.ground);const o=new s.vBJ({color:65280}),h=new s.xo$(.05,50,50),n=new s.Kj0(h,o);n.translateX(1),this.sphere=n,this.scene.add(n)}reset(){this.arrayMesh=[],this.arrayPoint=[],this.arrayArrow=[];for(let t=this.scene.children.length-1;t>=0;t--){let e=this.scene.children[t];this.scene.remove(e)}this.initPost()}set showGrid(t){this.grid.visible=t}set showAxis(t){this.axis.visible=t}add(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.scene.add(t),i&&(this.arrayMesh.push(t),this.arrayPoint.push(e))}addArrow(t,e){const i=new s.tGC(e,t,1,"#f00");this.arrayArrow.push(i),this.scene.add(i)}addPoint(t){const e=new s.vBJ({color:16777215}),i=new s.xo$(.1,20,20),o=new s.Kj0(i,e);o.translateX(t.vec.x),o.translateY(t.vec.z),o.translateZ(t.vec.y),this.add(o,t),this.addArrow(t.vec,t.velocity)}mouseMove(t){console.log("mouseMove"),this.picking(t)}picking(t){this.mouse.x=t.offsetX/this.renderer.domElement.clientWidth*2-1,this.mouse.y=-t.offsetY/this.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const e=this.raycaster.intersectObjects([...this.arrayMesh]);if(e.length>0)return console.log(e[0].point.x,e[0].point.y,e[0].point.z),this.m.set(e[0].point.x,e[0].point.y,e[0].point.z),e[0].object!==this.sphere&&this.sphere.position.set(e[0].point.x,e[0].point.y,e[0].point.z),e;const i=this.raycaster.intersectObjects([this.ground]);i.length>0&&(this.m.set(i[0].point.x,i[0].point.y,i[0].point.z),this.sphere.position.set(i[0].point.x,i[0].point.y,i[0].point.z))}mouseClick(t){console.log("mouseClick");const e=this.picking(t);e&&console.log({mesh:e}),console.log("mouseClick"),this.mouseClickPost(t)}update(t){this.render(t),this.arrayMesh.forEach(((t,e)=>{t.position.x=this.arrayPoint[e].vec.x,t.position.y=this.arrayPoint[e].vec.z,t.position.z=this.arrayPoint[e].vec.y})),this.arrayArrow.forEach(((t,e)=>{t.position.x=this.arrayPoint[e].vec.x,t.position.y=this.arrayPoint[e].vec.z,t.position.z=this.arrayPoint[e].vec.y;const i=new s.Pa4(this.arrayPoint[e].velocity.x,this.arrayPoint[e].velocity.z,this.arrayPoint[e].velocity.y),o=.5*i.length();t.setLength(o,.1,.1),t.setDirection(i)}));const e=new s.yGw;e.makeRotationY(.011*Math.PI),this.pointLight.position.applyMatrix4(e)}}},98053:(t,e,i)=>{i.d(e,{V:()=>s});const s=t=>{const e=document.createElement("div");e.style.display="flex";const i=document.createElement("input");i.type="checkbox",i.defaultChecked=!1;const s=document.createElement("div");return s.textContent=t,s.style.color="#aaa",e.appendChild(i),e.appendChild(s),{div:e,checkBox:i}}},12508:(t,e,i)=>{i.r(e),i.d(e,{Solution:()=>h});var s=i(17485),o=i(98053);class h{constructor(t){this.div=void 0,this.renderer=void 0,this.m=[0,0],this.t=0,this.pts=[],this.div=document.getElementById(t),this.renderer=new s.T(t),this.renderer.render=t=>this.render(t),this.initDom(),this.init()}initDom(){const t=document.createElement("div");t.style.position="absolute",this.div.appendChild(t);const e=(0,o.V)("grid");t.append(e.div),e.checkBox.checked=!0,e.checkBox.onchange=()=>{!0===e.checkBox.checked?this.renderer.showGrid=!0:this.renderer.showGrid=!1};const i=(0,o.V)("axis");t.append(i.div),i.checkBox.checked=!0,i.checkBox.onchange=()=>{!0===i.checkBox.checked?this.renderer.showAxis=!0:this.renderer.showAxis=!1}}init(){for(let t=-10;t<25;t++)for(let e=-10;e<10;e++){const i=new n(t,e,0);this.pts.push(i),this.renderer.addPoint(i)}}render(t){for(let e=0;e<this.pts.length;++e)this.pts[e].vec.z=Math.cos(e*this.t*.01);this.t+=.01}mouseMove(t,e){}renderMouse(t){}mouseClick(t,e){}destroy(){this.renderer.destroy()}}class n{constructor(t,e,i){this.vec=void 0,this.velocity=void 0,this.force=void 0,this.mass=10,this.r=10,this.vec=new d(t,e,i),this.velocity=new d(0,0,0),this.force=new d(0,-.1,0)}render(t){t.beginPath(),t.arc(this.vec.x,this.vec.y,this.r,0,2*Math.PI),t.closePath(),t.fill()}move(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9;this.velocity=r(this.velocity,e),this.velocity=a(this.velocity,r(this.force,t/this.mass)),this.vec=a(this.vec,r(this.velocity,t))}}const r=(t,e)=>c(t,e),c=(t,e)=>new d(t.x*e,t.y*e,t.z*e),a=(t,e)=>new d(t.x+e.x,t.y+e.y,t.z+e.z);class d{constructor(t,e,i){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=i}}}}]);
//# sourceMappingURL=12508.7c2799c4.chunk.js.map
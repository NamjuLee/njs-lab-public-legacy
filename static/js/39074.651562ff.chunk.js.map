{"version":3,"file":"static/js/39074.651562ff.chunk.js","mappings":"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","sources":["njslab/Infrastructure/WebGPU/Util/MatUtil.ts","njslab/Infrastructure/WebGPU/WebGPU_07_cube/shaders/shaders.ts","njslab/Infrastructure/WebGPU/WebGPU_07_cube/shaders/cube.ts","njslab/Infrastructure/WebGPU/WebGPU_07_cube/index.ts"],"sourcesContent":["import { vec3, mat4 } from 'gl-matrix';\n\nexport const createTransforms = (modelMat:mat4, translation:vec3 = [0,0,0], rotation:vec3 = [0,0,0], scaling:vec3 = [1,1,1]) => {\n    const rotateXMat = mat4.create();\n    const rotateYMat = mat4.create();\n    const rotateZMat = mat4.create();   \n    const translateMat = mat4.create();\n    const scaleMat = mat4.create();\n\n    //perform individual transformations\n    mat4.fromTranslation(translateMat, translation);\n    mat4.fromXRotation(rotateXMat, rotation[0]);\n    mat4.fromYRotation(rotateYMat, rotation[1]);\n    mat4.fromZRotation(rotateZMat, rotation[2]);\n    mat4.fromScaling(scaleMat, scaling);\n\n    //combine all transformation matrices together to form a final transform matrix: modelMat\n    mat4.multiply(modelMat, rotateXMat, scaleMat);\n    mat4.multiply(modelMat, rotateYMat, modelMat);        \n    mat4.multiply(modelMat, rotateZMat, modelMat);\n    mat4.multiply(modelMat, translateMat, modelMat);\n};\n\nexport const createViewProjection = (respectRatio = 1.0, cameraPosition:vec3 = [2, 2, 4], lookDirection:vec3 = [0, 0, 0], \n    upDirection:vec3 = [0, 1, 0]) => {\n\n    const viewMatrix = mat4.create();\n    const projectionMatrix = mat4.create();       \n    const viewProjectionMatrix = mat4.create();\n    mat4.perspective(projectionMatrix, 2*Math.PI/5, respectRatio, 0.1, 100.0);\n\n    mat4.lookAt(viewMatrix, cameraPosition, lookDirection, upDirection);\n    mat4.multiply(viewProjectionMatrix, projectionMatrix, viewMatrix);\n\n    const cameraOption = {\n        eye: cameraPosition,\n        center: lookDirection,\n        zoomMax: 100,\n        zoomSpeed: 2\n    };\n\n    return {\n        viewMatrix,\n        projectionMatrix,\n        viewProjectionMatrix,\n        cameraOption\n    }\n};","export const CreateGPUBufferUint = (device:GPUDevice, data:Uint32Array, \n    usageFlag:GPUBufferUsageFlags = GPUBufferUsage.INDEX | GPUBufferUsage.COPY_DST) => {\n    const buffer = device.createBuffer({\n        size: data.byteLength,\n        usage: usageFlag,\n        mappedAtCreation: true\n    });\n    new Uint32Array(buffer.getMappedRange()).set(data);\n    buffer.unmap();\n    return buffer;\n}\n\nexport const CreateGPUBuffer = (device:GPUDevice, data:Float32Array, \n    usageFlag:GPUBufferUsageFlags = GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST) => {\n    const buffer = device.createBuffer({\n        size: data.byteLength,\n        usage: usageFlag,\n        mappedAtCreation: true\n    });\n    new Float32Array(buffer.getMappedRange()).set(data);\n    buffer.unmap();\n    return buffer;\n}\n\nexport const Shaders = () => {\n    const vertex = `\n        struct Output {\n            @builtin(position) Position : vec4<f32>,\n            @location(0) vColor : vec4<f32>,\n        };\n        @vertex\n        fn main(@location(0) pos: vec4<f32>, @location(1) color: vec4<f32>) -> Output {\n            var output: Output;\n            output.Position = pos;\n            output.vColor = color;\n            return output;\n        }`;\n\n    const fragment = `\n        @fragment\n        fn main(@location(0) vColor: vec4<f32>) -> @location(0) vec4<f32> {\n            return vColor;\n        }`;\n\n    return {\n        vertex, \n        fragment\n    };\n}\n\nexport const ShadersOld = () => {\n    const vertex = `\n        [[location(0)]] var<in> position : vec4<f32>;\n        [[location(1)]] var<in> color : vec4<f32>;\n        [[builtin(position)]] var<out> Position : vec4<f32>;\n        [[location(0)]] var<out> vColor : vec4<f32>;\n\n        [[stage(vertex)]]\n        fn main() -> void {\n            Position = position;\n            vColor = color;\n            return;\n        }`;\n\n    const fragment = `\n        [[location(0)]] var<in> vColor : vec4<f32>;\n        [[location(0)]] var<out> fragColor : vec4<f32>;\n\n        [[stage(fragment)]]\n        fn main() -> void {\n            fragColor = vColor;\n            return;\n        }`;\n\n    return {\n        vertex, \n        fragment\n    };\n}\n","export const CubeData = () =>{\n    const positions = new Float32Array([\n        // front\n        -1, -1,  1,  \n         1, -1,  1,  \n         1,  1,  1,\n         1,  1,  1,\n        -1,  1,  1,\n        -1, -1,  1,\n\n        // right\n         1, -1,  1,\n         1, -1, -1,\n         1,  1, -1,\n         1,  1, -1,\n         1,  1,  1,\n         1, -1,  1,\n\n        // back\n        -1, -1, -1,\n        -1,  1, -1,\n         1,  1, -1,\n         1,  1, -1,\n         1, -1, -1,\n        -1, -1, -1,\n\n        // left\n        -1, -1,  1,\n        -1,  1,  1,\n        -1,  1, -1,\n        -1,  1, -1,\n        -1, -1, -1,\n        -1, -1,  1,\n\n        // top\n        -1,  1,  1,\n         1,  1,  1,\n         1,  1, -1,\n         1,  1, -1,\n        -1,  1, -1,\n        -1,  1,  1,\n\n        // bottom\n        -1, -1,  1,\n        -1, -1, -1,\n         1, -1, -1,\n         1, -1, -1,\n         1, -1,  1,\n        -1, -1,  1\n    ]);\n\n    const colors = new Float32Array([\n        // front - blue\n        0, 0, 1,\n        0, 0, 1,\n        0, 0, 1,\n        0, 0, 1,\n        0, 0, 1,\n        0, 0, 1,\n\n        // right - red\n        1, 0, 0,\n        1, 0, 0,\n        1, 0, 0,\n        1, 0, 0,\n        1, 0, 0,\n        1, 0, 0,\n\n        //back - yellow\n        1, 1, 0,\n        1, 1, 0,\n        1, 1, 0,\n        1, 1, 0,\n        1, 1, 0,\n        1, 1, 0,\n\n        //left - aqua\n        0, 1, 1,\n        0, 1, 1,\n        0, 1, 1,\n        0, 1, 1,\n        0, 1, 1,\n        0, 1, 1,\n\n        // top - green\n        0, 1, 0,\n        0, 1, 0,\n        0, 1, 0,\n        0, 1, 0,\n        0, 1, 0,\n        0, 1, 0,\n\n        // bottom - fuchsia\n        1, 0, 1,\n        1, 0, 1,\n        1, 0, 1,\n        1, 0, 1,\n        1, 0, 1,\n        1, 0, 1\n    ]);\n\n    return {\n        positions,\n        colors\n    };\n}","// import positionVert from './shaders/position.vert.wgsl?raw';\r\n// import colorFrag from './shaders/color.frag.wgsl';\r\nimport { vec3, mat4 } from 'gl-matrix';\r\n\r\nimport { Shaders, CreateGPUBufferUint, CreateGPUBuffer } from './shaders/shaders';\r\n\r\nimport { createTransforms, createViewProjection } from '../Util';\r\n\r\nimport { CubeData } from './shaders/cube';\r\n\r\nconst shader = `\r\n// vertex shader\r\n\r\nstruct Uniforms {\r\n    mvpMatrix : mat4x4<f32>,\r\n};\r\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\r\n\r\nstruct Output {\r\n    @builtin(position) Position : vec4<f32>,\r\n    @location(0) vColor : vec4<f32>,\r\n};\r\n\r\n@vertex\r\nfn vs_main(@location(0) pos: vec4<f32>, @location(1) color: vec4<f32>) -> Output {\r\n    var output: Output;\r\n    output.Position = uniforms.mvpMatrix * pos;\r\n    output.vColor = color;\r\n    return output;\r\n}\r\n\r\n// fragment shader\r\n\r\n @fragment\r\nfn fs_main(@location(0) vColor: vec4<f32>) -> @location(0) vec4<f32> {\r\n    return vColor;\r\n}\r\n`\r\n\r\nexport class Solution {\r\n    divHost: HTMLElement;\r\n    canvas: HTMLCanvasElement;\r\n    ctx: GPUCanvasContext;\r\n    device: GPUDevice;\r\n    format: GPUTextureFormat;\r\n    size: any;\r\n    pipelineObj: any;\r\n    constructor(id: string) {\r\n        this.divHost = document.getElementById(id);\r\n\r\n        //     console.log(id, 'webGPU', navigator.gpu);\r\n        this.canvas = document.createElement('canvas');\r\n        this.divHost.appendChild(this.canvas);\r\n\r\n        this.initWebGPU();\r\n    }\r\n    async initWebGPU() {\r\n        if (!navigator.gpu) { throw new Error('Not Support WebGPU'); }\r\n\r\n        const adapter = await navigator.gpu.requestAdapter({\r\n            powerPreference: 'high-performance'\r\n            // powerPreference: 'low-power'\r\n        })\r\n\r\n        if (!adapter) { throw new Error('No Adapter Found'); }\r\n\r\n        const device = await adapter.requestDevice()\r\n        this.ctx = this.canvas.getContext('webgpu') as GPUCanvasContext\r\n        // @ts-ignore\r\n        const format = navigator.gpu.getPreferredCanvasFormat ? navigator.gpu.getPreferredCanvasFormat() : this.ctx.getPreferredFormat(adapter)\r\n        const devicePixelRatio = window.devicePixelRatio || 1\r\n        this.canvas.width = this.divHost.clientWidth;\r\n        this.canvas.height = this.divHost.clientHeight;\r\n        this.ctx.configure({\r\n            // json specific format when key and value are the same\r\n            device, format,\r\n            // prevent chrome warning\r\n            alphaMode: 'opaque'\r\n        })\r\n\r\n        this.size = { width: this.canvas.width, height: this.canvas.height }\r\n        this.device = device;\r\n        this.format = format;\r\n\r\n\r\n        this.initPipeline(this.device, this.format);\r\n    }\r\n    async initPipeline(device: GPUDevice, format: GPUTextureFormat, primitiveType = 'triangle-list') { // triangle-list , triangle-strip\r\n        // create vertex buffers\r\n        const cubeData = CubeData();\r\n        const numberOfVertices = cubeData.positions.length / 3;\r\n        const vertexBuffer = CreateGPUBuffer(device, cubeData.positions);\r\n        const colorBuffer = CreateGPUBuffer(device, cubeData.colors);\r\n\r\n        const pipeline = device.createRenderPipeline({\r\n            layout: 'auto',\r\n            vertex: {\r\n                module: device.createShaderModule({\r\n                    code: shader\r\n                }),\r\n                entryPoint: \"vs_main\",\r\n                // @ts-ignore\r\n                buffers: [\r\n                    {\r\n                        arrayStride: 12,\r\n                        attributes: [{\r\n                            shaderLocation: 0,\r\n                            format: \"float32x3\",\r\n                            offset: 0\r\n                        }]\r\n                    },\r\n                    {\r\n                        arrayStride: 12,\r\n                        attributes: [{\r\n                            shaderLocation: 1,\r\n                            format: \"float32x3\",\r\n                            offset: 0\r\n                        }]\r\n                    }\r\n                ]\r\n            },\r\n            fragment: {\r\n                module: device.createShaderModule({\r\n                    code: shader\r\n                }),\r\n                entryPoint: \"fs_main\",\r\n                targets: [\r\n                    {\r\n                        format: this.format as GPUTextureFormat\r\n                    }\r\n                ]\r\n            },\r\n            primitive: {\r\n                topology: \"triangle-list\",\r\n                cullMode: 'back'\r\n            },\r\n            depthStencil: {\r\n                format: \"depth24plus\",\r\n                depthWriteEnabled: true,\r\n                depthCompare: \"less\"\r\n            }\r\n        });\r\n\r\n\r\n\r\n        // create uniform data\r\n        const modelMatrix = mat4.create();\r\n        const mvpMatrix = mat4.create();\r\n        let vpMatrix = mat4.create();\r\n        const vp = createViewProjection(this.canvas.width / this.canvas.height);\r\n        vpMatrix = vp.viewProjectionMatrix;\r\n\r\n        // create uniform buffer and bind group\r\n        const uniformBuffer = device.createBuffer({\r\n            size: 64,\r\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST\r\n        });\r\n\r\n        const uniformBindGroup = device.createBindGroup({\r\n            layout: pipeline.getBindGroupLayout(0),\r\n            entries: [\r\n                {\r\n                    binding: 0,\r\n                    resource: {\r\n                        buffer: uniformBuffer,\r\n                        offset: 0,\r\n                        size: 64\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n\r\n        const textureView = this.ctx.getCurrentTexture().createView();\r\n        const depthTexture = device.createTexture({\r\n            size: [this.canvas.width, this.canvas.height, 1],\r\n            format: \"depth24plus\",\r\n            usage: GPUTextureUsage.RENDER_ATTACHMENT\r\n        });\r\n        const renderPassDescription = {\r\n            colorAttachments: [{\r\n                view: textureView,\r\n                clearValue: { r: 0, g: 0, b: 0, a: 1.0 }, //background color\r\n                //loadValue: { r: 0.2, g: 0.247, b: 0.314, a: 1.0  }, \r\n                loadOp: 'clear',\r\n                storeOp: 'store'\r\n            }],\r\n            depthStencilAttachment: {\r\n                view: depthTexture.createView(),\r\n                depthLoadValue: 1.0,\r\n                depthClearValue: 1.0,\r\n                depthLoadOp: 'clear',\r\n                depthStoreOp: \"store\",\r\n                /*stencilClearValue: 0,\r\n                stencilLoadValue: 0,\r\n                stencilLoadOp: 'clear',\r\n                stencilStoreOp: \"store\"*/\r\n            }\r\n        };\r\n\r\n        createTransforms(modelMatrix);\r\n        mat4.multiply(mvpMatrix, vpMatrix, modelMatrix);\r\n        device.queue.writeBuffer(uniformBuffer, 0, mvpMatrix as ArrayBuffer);\r\n\r\n        const commandEncoder = device.createCommandEncoder();\r\n        const renderPass = commandEncoder.beginRenderPass(renderPassDescription as GPURenderPassDescriptor);\r\n        renderPass.setPipeline(pipeline);\r\n        renderPass.setVertexBuffer(0, vertexBuffer);\r\n        renderPass.setVertexBuffer(1, colorBuffer);\r\n        renderPass.setBindGroup(0, uniformBindGroup);\r\n        renderPass.draw(numberOfVertices);\r\n        renderPass.end();\r\n\r\n        device.queue.submit([commandEncoder.finish()]);\r\n\r\n    }\r\n    public destroy() {\r\n        this.device.destroy();\r\n        while (this.divHost.lastElementChild) {\r\n            this.divHost.removeChild(this.divHost.lastElementChild);\r\n        }\r\n    }\r\n}"],"names":["createTransforms","modelMat","translation","rotation","scaling","rotateXMat","mat4","rotateYMat","rotateZMat","translateMat","scaleMat","createViewProjection","respectRatio","cameraPosition","lookDirection","upDirection","viewMatrix","projectionMatrix","viewProjectionMatrix","Math","PI","cameraOption","eye","center","zoomMax","zoomSpeed","CreateGPUBuffer","device","data","usageFlag","GPUBufferUsage","VERTEX","COPY_DST","buffer","createBuffer","size","byteLength","usage","mappedAtCreation","Float32Array","getMappedRange","set","unmap","shader","Solution","constructor","id","divHost","canvas","ctx","format","pipelineObj","this","document","getElementById","createElement","appendChild","initWebGPU","async","navigator","gpu","Error","adapter","requestAdapter","powerPreference","requestDevice","getContext","getPreferredCanvasFormat","getPreferredFormat","window","devicePixelRatio","width","clientWidth","height","clientHeight","configure","alphaMode","initPipeline","cubeData","positions","colors","numberOfVertices","length","vertexBuffer","colorBuffer","pipeline","createRenderPipeline","layout","vertex","module","createShaderModule","code","entryPoint","buffers","arrayStride","attributes","shaderLocation","offset","fragment","targets","primitive","topology","cullMode","depthStencil","depthWriteEnabled","depthCompare","modelMatrix","mvpMatrix","vpMatrix","uniformBuffer","UNIFORM","uniformBindGroup","createBindGroup","getBindGroupLayout","entries","binding","resource","renderPassDescription","colorAttachments","view","getCurrentTexture","createView","clearValue","r","g","b","a","loadOp","storeOp","depthStencilAttachment","createTexture","GPUTextureUsage","RENDER_ATTACHMENT","depthLoadValue","depthClearValue","depthLoadOp","depthStoreOp","queue","writeBuffer","commandEncoder","createCommandEncoder","renderPass","beginRenderPass","setPipeline","setVertexBuffer","setBindGroup","draw","end","submit","finish","destroy","lastElementChild","removeChild"],"sourceRoot":""}
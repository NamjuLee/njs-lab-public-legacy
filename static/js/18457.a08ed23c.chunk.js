"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[18457,74061,36328,85363],{74061:(t,i,s)=>{s.r(i),s.d(i,{Matrix4:()=>a});class a{static identity(){let t=new Float32Array(16);return t[0]=t[5]=t[10]=t[15]=1,t}static perspective(t,i,s,a,r){let e=1/Math.tan(i/2),o=1/(a-r);t[0]=e/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+a)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*a*o,t[15]=0}static ortho(t,i,s,a,r,e,o){let h=1/(i-s),n=1/(a-r),d=1/(e-o);t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(i+s)*h,t[13]=(r+a)*n,t[14]=(o+e)*d,t[15]=1}static transpose(t,i){if(t===i){let s=i[1],a=i[2],r=i[3],e=i[6],o=i[7],h=i[11];t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=s,t[6]=i[9],t[7]=i[13],t[8]=a,t[9]=e,t[11]=i[14],t[12]=r,t[13]=o,t[14]=h}else t[0]=i[0],t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=i[1],t[5]=i[5],t[6]=i[9],t[7]=i[13],t[8]=i[2],t[9]=i[6],t[10]=i[10],t[11]=i[14],t[12]=i[3],t[13]=i[7],t[14]=i[11],t[15]=i[15];return t}static normalMat3(t,i){let s=i[0],a=i[1],r=i[2],e=i[3],o=i[4],h=i[5],n=i[6],d=i[7],m=i[8],v=i[9],l=i[10],c=i[11],u=i[12],f=i[13],w=i[14],p=i[15],M=s*h-a*o,x=s*n-r*o,R=s*d-e*o,g=a*n-r*h,y=a*d-e*h,V=r*d-e*n,z=m*f-v*u,X=m*w-l*u,Y=m*p-c*u,T=v*w-l*f,E=v*p-c*f,A=l*p-c*w,F=M*A-x*E+R*T+g*Y-y*X+V*z;return F?(F=1/F,t[0]=(h*A-n*E+d*T)*F,t[1]=(n*Y-o*A-d*X)*F,t[2]=(o*E-h*Y+d*z)*F,t[3]=(r*E-a*A-e*T)*F,t[4]=(s*A-r*Y+e*X)*F,t[5]=(a*Y-s*E-e*z)*F,t[6]=(f*V-w*y+p*g)*F,t[7]=(w*R-u*V-p*x)*F,t[8]=(u*y-f*R+p*M)*F,t):null}static multiplyVector(t,i){let s=i[0],a=i[1],r=i[2],e=i[3],o=t[0],h=t[1],n=t[2],d=t[3],m=t[4],v=t[5],l=t[6],c=t[7],u=t[8],f=t[9],w=t[10],p=t[11];return[s*o+a*m+r*u+e*t[12],s*h+a*v+r*f+e*t[13],s*n+a*l+r*w+e*t[14],s*d+a*c+r*p+e*t[15]]}static transformVec4(t,i,s){return t[0]=s[0]*i[0]+s[4]*i[1]+s[8]*i[2]+s[12]*i[3],t[1]=s[1]*i[0]+s[5]*i[1]+s[9]*i[2]+s[13]*i[3],t[2]=s[2]*i[0]+s[6]*i[1]+s[10]*i[2]+s[14]*i[3],t[3]=s[3]*i[0]+s[7]*i[1]+s[11]*i[2]+s[15]*i[3],t}static mult(t,i,s){let a=i[0],r=i[1],e=i[2],o=i[3],h=i[4],n=i[5],d=i[6],m=i[7],v=i[8],l=i[9],c=i[10],u=i[11],f=i[12],w=i[13],p=i[14],M=i[15],x=s[0],R=s[1],g=s[2],y=s[3];return t[0]=x*a+R*h+g*v+y*f,t[1]=x*r+R*n+g*l+y*w,t[2]=x*e+R*d+g*c+y*p,t[3]=x*o+R*m+g*u+y*M,x=s[4],R=s[5],g=s[6],y=s[7],t[4]=x*a+R*h+g*v+y*f,t[5]=x*r+R*n+g*l+y*w,t[6]=x*e+R*d+g*c+y*p,t[7]=x*o+R*m+g*u+y*M,x=s[8],R=s[9],g=s[10],y=s[11],t[8]=x*a+R*h+g*v+y*f,t[9]=x*r+R*n+g*l+y*w,t[10]=x*e+R*d+g*c+y*p,t[11]=x*o+R*m+g*u+y*M,x=s[12],R=s[13],g=s[14],y=s[15],t[12]=x*a+R*h+g*v+y*f,t[13]=x*r+R*n+g*l+y*w,t[14]=x*e+R*d+g*c+y*p,t[15]=x*o+R*m+g*u+y*M,t}static scale(t,i,s,a){return t[0]*=i,t[1]*=i,t[2]*=i,t[3]*=i,t[4]*=s,t[5]*=s,t[6]*=s,t[7]*=s,t[8]*=a,t[9]*=a,t[10]*=a,t[11]*=a,t}static rotateY(t,i){let s=Math.sin(i),a=Math.cos(i),r=t[0],e=t[1],o=t[2],h=t[3],n=t[8],d=t[9],m=t[10],v=t[11];return t[0]=r*a-n*s,t[1]=e*a-d*s,t[2]=o*a-m*s,t[3]=h*a-v*s,t[8]=r*s+n*a,t[9]=e*s+d*a,t[10]=o*s+m*a,t[11]=h*s+v*a,t}static rotateX(t,i){let s=Math.sin(i),a=Math.cos(i),r=t[4],e=t[5],o=t[6],h=t[7],n=t[8],d=t[9],m=t[10],v=t[11];return t[4]=r*a+n*s,t[5]=e*a+d*s,t[6]=o*a+m*s,t[7]=h*a+v*s,t[8]=n*a-r*s,t[9]=d*a-e*s,t[10]=m*a-o*s,t[11]=v*a-h*s,t}static rotateZ(t,i){let s=Math.sin(i),a=Math.cos(i),r=t[0],e=t[1],o=t[2],h=t[3],n=t[4],d=t[5],m=t[6],v=t[7];return t[0]=r*a+n*s,t[1]=e*a+d*s,t[2]=o*a+m*s,t[3]=h*a+v*s,t[4]=n*a-r*s,t[5]=d*a-e*s,t[6]=m*a-o*s,t[7]=v*a-h*s,t}static rotate(t,i,s){let a,r,e,o,h,n,d,m,v,l,c,u,f,w,p,M,x,R,g,y,V,z,X,Y,T=s[0],E=s[1],A=s[2],F=Math.sqrt(T*T+E*E+A*A);return Math.abs(F)<1e-6?null:(F=1/F,T*=F,E*=F,A*=F,a=Math.sin(i),r=Math.cos(i),e=1-r,o=t[0],h=t[1],n=t[2],d=t[3],m=t[4],v=t[5],l=t[6],c=t[7],u=t[8],f=t[9],w=t[10],p=t[11],M=T*T*e+r,x=E*T*e+A*a,R=A*T*e-E*a,g=T*E*e-A*a,y=E*E*e+r,V=A*E*e+T*a,z=T*A*e+E*a,X=E*A*e-T*a,Y=A*A*e+r,t[0]=o*M+m*x+u*R,t[1]=h*M+v*x+f*R,t[2]=n*M+l*x+w*R,t[3]=d*M+c*x+p*R,t[4]=o*g+m*y+u*V,t[5]=h*g+v*y+f*V,t[6]=n*g+l*y+w*V,t[7]=d*g+c*y+p*V,t[8]=o*z+m*X+u*Y,t[9]=h*z+v*X+f*Y,t[10]=n*z+l*X+w*Y,t[11]=d*z+c*X+p*Y,t)}static invert(t,i){void 0===i&&(i=t);let s=i[0],a=i[1],r=i[2],e=i[3],o=i[4],h=i[5],n=i[6],d=i[7],m=i[8],v=i[9],l=i[10],c=i[11],u=i[12],f=i[13],w=i[14],p=i[15],M=s*h-a*o,x=s*n-r*o,R=s*d-e*o,g=a*n-r*h,y=a*d-e*h,V=r*d-e*n,z=m*f-v*u,X=m*w-l*u,Y=m*p-c*u,T=v*w-l*f,E=v*p-c*f,A=l*p-c*w,F=M*A-x*E+R*T+g*Y-y*X+V*z;return!!F&&(F=1/F,t[0]=(h*A-n*E+d*T)*F,t[1]=(r*E-a*A-e*T)*F,t[2]=(f*V-w*y+p*g)*F,t[3]=(l*y-v*V-c*g)*F,t[4]=(n*Y-o*A-d*X)*F,t[5]=(s*A-r*Y+e*X)*F,t[6]=(w*R-u*V-p*x)*F,t[7]=(m*V-l*R+c*x)*F,t[8]=(o*E-h*Y+d*z)*F,t[9]=(a*Y-s*E-e*z)*F,t[10]=(u*y-f*R+p*M)*F,t[11]=(v*R-m*y-c*M)*F,t[12]=(h*X-o*T-n*z)*F,t[13]=(s*T-a*X+r*z)*F,t[14]=(f*x-u*g-w*M)*F,t[15]=(m*g-v*x+l*M)*F,!0)}static translate(t,i,s,a){t[12]=t[0]*i+t[4]*s+t[8]*a+t[12],t[13]=t[1]*i+t[5]*s+t[9]*a+t[13],t[14]=t[2]*i+t[6]*s+t[10]*a+t[14],t[15]=t[3]*i+t[7]*s+t[11]*a+t[15]}constructor(){this.raw=void 0,this.raw=a.identity()}vtranslate(t){return a.translate(this.raw,t.x,t.y,t.z),this}translate(t,i,s){return a.translate(this.raw,t,i,s),this}rotateY(t){return a.rotateY(this.raw,t),this}rotateX(t){return a.rotateX(this.raw,t),this}rotateZ(t){return a.rotateZ(this.raw,t),this}vscale(t){return a.scale(this.raw,t.x,t.y,t.z),this}scale(t,i,s){return a.scale(this.raw,t,i,s),this}invert(){return a.invert(this.raw),this}resetRotation(){for(let t=0;t<this.raw.length;t++)t>=12&&t<=14||(this.raw[t]=t%5===0?1:0);return this}reset(){for(let t=0;t<this.raw.length;t++)this.raw[t]=t%5===0?1:0;return this}}},36328:(t,i,s)=>{s.r(i),s.d(i,{Vector3:()=>a});class a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=i,this.z=s}magnitude(t){if(void 0===t)return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);let i=t.x-this.x,s=t.y-this.y,a=t.y-this.z;return Math.sqrt(i*i+s*s+a*a)}normalize(){let t=this.magnitude();return this.x/=t,this.y/=t,this.z/=t,this}set(t,i,s){return this.x=t,this.y=i,this.z=s,this}multiScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}getArray(){return[this.x,this.y,this.z]}getFloatArray(){return new Float32Array([this.x,this.y,this.z])}clone(){return new a(this.x,this.y,this.z)}}},18457:(t,i,s)=>{s.r(i),s.d(i,{CAMERA_MODE:()=>e,Camera:()=>o,CameraController:()=>h});var a=s(74061),r=s(85363);let e;!function(t){t[t.FREE=0]="FREE",t[t.ORBIT=1]="ORBIT"}(e||(e={}));class o{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:45,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.projectionMatrix=void 0,this.viewMatrix=void 0,this.transform=void 0,this.mode=void 0,this.projectionMatrix=new Float32Array(16);let h=t.canvas.width/t.canvas.height;a.Matrix4.perspective(this.projectionMatrix,i||45,h,s||.1,o||100),this.transform=new r.Transform,this.viewMatrix=new Float32Array(16),this.mode=e.ORBIT}panX(t){this.mode!==e.ORBIT&&(this.updateViewMatrix(),this.transform.position.x+=this.transform.right[0]*t,this.transform.position.y+=this.transform.right[1]*t,this.transform.position.z+=this.transform.right[2]*t)}panY(t){this.updateViewMatrix(),this.transform.position.y+=this.transform.up[1]*t,this.mode!==e.ORBIT&&(this.transform.position.x+=this.transform.up[0]*t,this.transform.position.z+=this.transform.up[2]*t)}panZ(t){this.updateViewMatrix(),this.mode===e.ORBIT?this.transform.position.z+=t:(this.transform.position.x+=this.transform.forward[0]*t,this.transform.position.y+=this.transform.forward[1]*t,this.transform.position.z+=this.transform.forward[2]*t)}updateViewMatrix(){return this.mode===e.FREE?this.transform.matView.reset().vtranslate(this.transform.position).rotateX(this.transform.rotation.x*r.Transform.deg2Rad).rotateY(this.transform.rotation.y*r.Transform.deg2Rad):this.transform.matView.reset().rotateX(this.transform.rotation.x*r.Transform.deg2Rad).rotateY(this.transform.rotation.y*r.Transform.deg2Rad).vtranslate(this.transform.position),this.transform.updateDirection(),a.Matrix4.invert(this.viewMatrix,this.transform.matView.raw),this.viewMatrix}GetTranslatelessMatrix(){let t=new Float32Array(this.viewMatrix);return t[12]=t[13]=t[14]=0,t}}class h{constructor(t,i){this.canvas=void 0,this.camera=void 0,this.rotateRate=void 0,this.yRotateRate=void 0,this.xRotateRate=void 0,this.xPanRate=void 0,this.yPanRate=void 0,this.zPanRate=void 0,this.panRate=void 0,this.zoomRate=void 0,this.offsetX=void 0,this.offsetY=void 0,this.initX=void 0,this.initY=void 0,this.prevX=void 0,this.prevY=void 0,this.euler=void 0,this.onUpHandler=void 0,this.onMoveHandler=void 0,this.canvas=t.canvas,this.camera=i,this.rotateRate=-300,this.panRate=5,this.zoomRate=200,this.yRotateRate=this.rotateRate/this.canvas.width*Math.PI/180,this.xRotateRate=this.rotateRate/this.canvas.height*Math.PI/180,this.xPanRate=this.panRate/this.canvas.width,this.yPanRate=this.panRate/this.canvas.height,this.zPanRate=this.zoomRate/this.canvas.height,this.offsetX=10,this.offsetY=10,this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.onUpHandler=t=>this.onMouseUp(t),this.onMoveHandler=t=>{this.onMouseMove(t)},this.canvas.addEventListener("mousedown",(t=>{this.onMouseDown(t)})),this.canvas.addEventListener("mousewheel",(t=>{this.onMouseWheel(t)}))}getMouseVec2(t){return{x:t.pageX-this.offsetX,y:t.pageY-this.offsetY}}setEulerDegrees(t,i,s){return this.euler.set(t*r.Transform.deg2Rad,i*r.Transform.deg2Rad,s*r.Transform.deg2Rad),this}onMouseDown(t){this.initX=this.prevX=t.pageX-this.offsetX,this.initY=this.prevY=t.pageY-this.offsetY,this.canvas.addEventListener("mouseup",this.onUpHandler),this.canvas.addEventListener("mousemove",this.onMoveHandler)}onMouseUp(t){this.canvas.removeEventListener("mouseup",this.onUpHandler),this.canvas.removeEventListener("mousemove",this.onMoveHandler)}onMouseWheel(t){let i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));this.camera.panZ(i*(this.zoomRate/this.canvas.height))}onMouseMove(t){let i=t.pageX-this.offsetX,s=t.pageY-this.offsetY,a=i-this.prevX,r=s-this.prevY;t.shiftKey?(this.camera.panX(-a*(this.panRate/this.canvas.width)),this.camera.panY(r*(this.panRate/this.canvas.height))):(this.camera.transform.rotation.y+=a*(this.rotateRate/this.canvas.width),this.camera.transform.rotation.x+=r*(this.rotateRate/this.canvas.height)),this.prevX=i,this.prevY=s}}},85363:(t,i,s)=>{s.r(i),s.d(i,{Transform:()=>e});var a=s(36328),r=s(74061);class e{constructor(){this.position=void 0,this.scale=void 0,this.rotation=void 0,this.matView=void 0,this.matNormal=void 0,this.forward=void 0,this.up=void 0,this.right=void 0,this.position=new a.Vector3(0,0,0),this.scale=new a.Vector3(1,1,1),this.rotation=new a.Vector3(0,0,0),this.matView=new r.Matrix4,this.matNormal=new Float32Array(9),this.forward=new Float32Array(4),this.up=new Float32Array(4),this.right=new Float32Array(4)}updateMatrix(){return this.matView.reset().vtranslate(this.position).rotateX(this.rotation.x*e.deg2Rad).rotateZ(this.rotation.z*e.deg2Rad).rotateY(this.rotation.y*e.deg2Rad).vscale(this.scale),r.Matrix4.normalMat3(this.matNormal,this.matView.raw),r.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),r.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),r.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this.matView.raw}updateDirection(){return r.Matrix4.transformVec4(this.forward,[0,0,1,0],this.matView.raw),r.Matrix4.transformVec4(this.up,[0,1,0,0],this.matView.raw),r.Matrix4.transformVec4(this.right,[1,0,0,0],this.matView.raw),this}getViewMatrix(){return this.matView.raw}getNormalMatrix(){return this.matNormal}reset(){this.position.set(0,0,0),this.scale.set(1,1,1),this.rotation.set(0,0,0)}}e.deg2Rad=Math.PI/180}}]);
//# sourceMappingURL=18457.a08ed23c.chunk.js.map
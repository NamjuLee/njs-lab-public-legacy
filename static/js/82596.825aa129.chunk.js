"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[82596],{27367:(t,e,s)=>{s.d(e,{s:()=>n});var o=s(5483),i=s.n(o);class n{constructor(t){var e=this;this.map=void 0,this.center=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-99.292649,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:39.043903;e.map.setCenter({lat:s,lng:t})},this.toMap=(t,e)=>{const s=this.map.unproject({x:t,y:e});return[s.lng,s.lat]},this.toScreen=(t,e)=>{const s=this.map.project([t,e]);return[s.x,s.y]},this.mouseDown=t=>{},this.mouseUp=t=>{},this.mouseMove=t=>{},this.mouseClick=t=>{},this.mouseDClick=t=>{},this.initMap(t)}initMap(t){i().accessToken="pk.eyJ1IjoiZGVzaWduanUiLCJhIjoiY2xhNGU0YWo4MDlhYzNwdHBwenVvang4eiJ9.P3sX4l_3KjdPeRRbVS1VVg",this.map=new(i().Map)({container:t,zoom:15,center:[-71.093161,42.358871],style:"mapbox://styles/mapbox/dark-v10"}),this.map.dragRotate.disable(),this.map.on("mousemove",(t=>{this.mouseMove(t)})),this.map.on("click",(t=>{this.mouseClick(t)})),this.map.on("mousedown",(t=>{this.mouseDown(t)})),this.map.on("dblclick",(t=>{this.mouseDClick(t)})),this.map.on("mouseup",(t=>{this.mouseUp(t)}));let e=document.getElementsByClassName("mapboxgl-canvas")[0];e.style.position="absolute",e=document.getElementsByClassName("mapboxgl-control-container")[0],e.style.display="none"}}},82596:(t,e,s)=>{s.r(e),s.d(e,{Renderer:()=>r,Solution:()=>a,downloadGeoJson:()=>c});var o=s(27367),i=s(55913),n=s(69175);class a{constructor(t){this.divHost=void 0,this.mapboxWrapper=void 0,this.renderer=void 0,this.radius=.3,this.mouseDown=t=>{},this.mouseUp=t=>{},this.mouseDrag=t=>{},this.mouseClick=t=>{this.renderer.pts.push([t.lngLat.lng,t.lngLat.lat])},this.mouseMove=t=>{},this.divHost=document.getElementById(t),this.divHost.style.position="relative",this.mapboxWrapper=new o.s(this.divHost.id),this.mapboxWrapper.mouseDown=this.mouseDown,this.mapboxWrapper.mouseUp=this.mouseUp,this.mapboxWrapper.mouseClick=this.mouseClick,this.mapboxWrapper.mouseMove=this.mouseMove,setTimeout((()=>{this.renderer=new r(this.divHost,this)}),100);const e=document.createElement("div");e.style.position="absolute",e.style.background="#000",e.style.padding="9px",this.divHost.appendChild(e);const s=document.createElement("div");s.textContent="Controlling the radius",e.appendChild(s);const i=p("radius",1,1e3);i.slider.defaultValue="100",i.slider.oninput=()=>{const t=.001*parseInt(i.slider.value);this.radius=t},e.appendChild(i.div);const n=document.createElement("div");n.textContent="Click here to download",e.appendChild(n),n.onclick=()=>{c(this.renderer.outGoem,"dissolved")}}keyDown(t){}destroy(){for(this.renderer.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}class r extends i.bb{constructor(t,e){super(t),this.app=void 0,this.time=0,this.pts=[],this.outGoem=void 0,this.mouseDown=(t,e)=>{},this.mouseUp=(t,e)=>{},this.mouseDrag=(t,e)=>{},this.app=e,this.canvas.id="mapboxCustom",this.canvas.style.position="absolute",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.pointerEvents="none",this.pts.push([-71.093161,42.358871]),this.start()}render(t){this.time+=.1;const e=[];for(let n=0;n<this.pts.length;++n){const s=this.pts[n],o=this.app.mapboxWrapper.toScreen(s[0],s[1]);e.push(this.pts[n]),t.beginPath(),t.arc(o[0],o[1],.5*Math.sin(this.time)+4,0,2*Math.PI),t.closePath(),t.fillStyle="#0f0",t.fill()}let s=[];for(let l=0;l<e.length;++l){let t=n.xmu(e[l]),o=n.f3b(t,this.app.radius,{units:"miles"});s.push(o)}let o=n.uf4(s);l(t,o,this.app.mapboxWrapper.toScreen,"rgba(255, 255, 0, 0.25)",!0);const i=h(o);l(t,i,this.app.mapboxWrapper.toScreen),this.outGoem=i;const a=n.beQ(i),r=this.app.mapboxWrapper.toScreen(a.geometry.coordinates[0],a.geometry.coordinates[1]);t.beginPath(),t.arc(r[0],r[1],.5*Math.sin(this.time)+8,0,2*Math.PI),t.closePath(),t.fillStyle="#f00",t.fill()}}const l=function(t,e,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#fff",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];for(let n=0;n<e.features.length;++n){i?t.setLineDash([5,5]):t.setLineDash([]);const a=e.features[n];let r=s(a.geometry.coordinates[0][0][0],a.geometry.coordinates[0][0][1]);t.beginPath(),t.moveTo(r[0],r[1]);for(let e=1;e<a.geometry.coordinates[0].length;++e)r=s(a.geometry.coordinates[0][e][0],a.geometry.coordinates[0][e][1]),t.lineTo(r[0],r[1]);t.closePath(),t.strokeStyle=o,t.stroke()}},h=t=>{const e=[];for(let o=0;o<t.features.length;++o){const s=t.features[o];e.push(n.yue(s.geometry.coordinates,{combine:"yes"}))}const s=n.uf4(e);return n.E3R(s,{propertyName:"combine"})},p=(t,e,s)=>{const o=document.createElement("div");o.style.display="flex";const i=document.createElement("input");i.type="range",i.min="".concat(e),i.max="".concat(s);const n=document.createElement("div");return n.textContent=t,n.style.color="#aaa",o.appendChild(i),o.appendChild(n),{div:o,slider:i,text:n}},c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"download";const s=document.createElement("a");s.href="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),s.download="".concat(e,".geojson"),s.click()}}}]);
//# sourceMappingURL=82596.825aa129.chunk.js.map
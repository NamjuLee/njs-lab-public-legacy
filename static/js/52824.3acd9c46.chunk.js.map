{"version":3,"file":"static/js/52824.3acd9c46.chunk.js","mappings":"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","sources":["njslab/Raster/image-zoom-pan/Util.ts","njslab/Raster/image-zoom-pan/Canvas.ts","njslab/Raster/image-zoom-pan/Controller.ts","njslab/Raster/image-zoom-pan/index.ts"],"sourcesContent":["\r\nexport const draw = (ctx, img, zooming?) => {\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    ctx.save()\r\n\r\n    if (zooming !== undefined) {\r\n        ctx.translate(zooming.x, zooming.y)\r\n        ctx.scale(zooming.z, zooming.z)\r\n    }\r\n\r\n    if (img !== undefined) {\r\n        ctx.drawImage(img, 0, 0, img.width, img.height)\r\n    }\r\n\r\n    // ctx.lineWidth = 1.0\r\n    // ctx.strokeStyle = 'red'\r\n    // ctx.strokeRect(58, 78, 14, 14)\r\n\r\n    // ctx.beginPath()\r\n    // ctx.fillStyle = 'yellow'\r\n    // ctx.arc(ctx.canvas.width / 2, ctx.canvas.height / 2, 50, 0, Math.PI * 2, true)\r\n    // ctx.fill()\r\n\r\n    ctx.restore()\r\n};\r\nexport class Vector {\r\n    static add(v0: Vector, v1: Vector) {\r\n        return new Vector(v0.x + v1.x, v0.y + v1.y, v0.z + v1.z);\r\n    }\r\n    static subtract(v0: Vector, v1: Vector) {\r\n        return new Vector(v0.x - v1.x, v0.y - v1.y, v0.z - v1.z);\r\n    }\r\n    public static distance(v0: Vector, v1: Vector): number {\r\n        return Math.sqrt((v0.x - v1.x) * (v0.x - v1.x) + (v0.y - v1.y) * (v0.y - v1.y) + (v0.z - v1.z) * (v0.z - v1.z));\r\n    }\r\n    public static deepCopy(v: Vector): Vector {\r\n        return new Vector(v.x, v.y, v.z);\r\n    }\r\n    public x: number\r\n    public y: number\r\n    public z: number\r\n    constructor(x: number, y: number, z: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n    public length(): number {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    }\r\n    public normalize() {\r\n        let len: number = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n        this.x /= len;\r\n        this.y /= len;\r\n        this.z /= len;\r\n    }\r\n};\r\nexport const zoomOffset = (canvas, scale, { x, y }, statusPre) => {\r\n    const isZooming = scale !== 1\r\n    const newX = isZooming ? (x + Math.abs(statusPre.x)) / statusPre.z : x\r\n    const newY = isZooming ? (y + Math.abs(statusPre.y)) / statusPre.z : y\r\n    const dx = newX - (newX * scale) + (x - newX)\r\n    const dy = newY - (newY * scale) + (y - newY)\r\n    return { ...applyBoundaries(canvas, scale, { x: dx, y: dy }) }\r\n};\r\nexport const applyBoundaries = (canvas, scale, { x, y }) => {\r\n    // const scaleMargin = 1 - scale;\r\n    // const maxOffsetX = scaleMargin * canvas.width;\r\n    // const maxOffsetY = scaleMargin * canvas.height;\r\n    // if (x > 0) {\r\n    //     x = 0\r\n    // } else if (x < maxOffsetX) {\r\n    //     x = maxOffsetX;\r\n    // }\r\n    // if (y > 0) {\r\n    //     y = 0\r\n    // } else if (y < maxOffsetY) {\r\n    //     y = maxOffsetY;\r\n    // }\r\n    return { x, y }\r\n};\r\n\r\n// \r\n\r\nexport const loadImage = (url: string = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram.jpg') => {\r\n// export const loadImage = (url: string = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/worldmap/worldMap_03.jpg') => {\r\n    return new Promise((resolve, reject) => {\r\n        let img = new Image()\r\n        img.onload = () => {\r\n            resolve(img)\r\n            img.onload = null\r\n            img = null\r\n        }\r\n        img.onerror = (err) => {\r\n            reject(err)\r\n        }\r\n        img.src = url\r\n    });\r\n};","import { PARAM } from 'App';\r\nimport { Solution } from './index';\r\n\r\nimport { Vector, zoomOffset, applyBoundaries, draw, loadImage } from './Util';\r\n\r\nexport class CanvasImage {\r\n    solution: Solution;\r\n\r\n    canvas: HTMLCanvasElement;\r\n    statusRendering: Vector;\r\n    statusTarget: Vector = new Vector(200, 200, 4);\r\n\r\n    needInterpolation: boolean = false;\r\n\r\n    img: HTMLImageElement;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    speedInterpolation: number = 0.1;\r\n    easingInterpolation: boolean = true;\r\n\r\n    constructor(solution: Solution) {\r\n        this.solution = solution;\r\n        // https://gist.github.com/dzhang123/2a3a611b3d75a45a3f41\r\n        // refer: https://codepen.io/NJStudio/pen/poZoEgY?editors=0010\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.style.background = '#111';\r\n        // this.canvas.style.width = '100%';\r\n        // this.canvas.style.height = '100%';\r\n        this.canvas.width = 1200;\r\n        this.canvas.height = 800;\r\n        solution.div.appendChild(this.canvas);\r\n        this.ctx = this.canvas.getContext('2d')\r\n\r\n        let image\r\n\r\n        this.statusRendering = new Vector(0, 0, 1)\r\n        let statusPre = new Vector(0, 0, 1)\r\n        let status = new Vector(0, 0, 1)\r\n        let isDrag = false\r\n\r\n        this.canvas.addEventListener('mousedown', (e) => {\r\n            const { offsetX, offsetY } = e\r\n            status.x = offsetX\r\n            status.y = offsetY\r\n            // isDrag = true;\r\n            if (status.z > 2) isDrag = true\r\n        });\r\n        this.canvas.addEventListener('mouseup', (e) => {\r\n            if (!isDrag) return\r\n            const { offsetX, offsetY } = e\r\n            const dx = offsetX - status.x\r\n            const dy = offsetY - status.y\r\n            statusPre.x += dx\r\n            statusPre.y += dy\r\n            isDrag = false\r\n        });\r\n        this.canvas.addEventListener('wheel', (e) => {\r\n            const { offsetX, offsetY, deltaY } = e\r\n// console.log(deltaY)\r\n            const oy = deltaY < 0 ? 1 : -1\r\n            status.z += (0.2 * oy)\r\n\r\n            if (status.z < 0.2) {\r\n                status.z = 0.2\r\n            } else if (status.z > 5) {\r\n                status.z = 5\r\n            }\r\n\r\n            const { x: zx, y: zy } = zoomOffset(this.canvas, status.z, { x: offsetX, y: offsetY }, statusPre)\r\n            statusPre.x = zx;\r\n            statusPre.y = zy;\r\n            statusPre.z = status.z;\r\n\r\n            this.statusRendering.x = zx;\r\n            this.statusRendering.y = zy;\r\n            this.statusRendering.z = status.z;\r\n\r\n            // draw(ctx, image, this.statusRendering);\r\n        });\r\n        this.canvas.addEventListener('mousemove', (e) => {\r\n            if (!isDrag) return\r\n            const { offsetX, offsetY } = e\r\n            const x = statusPre.x + (offsetX - status.x)\r\n            const y = statusPre.y + (offsetY - status.y)\r\n            const { x: zx, y: zy } = applyBoundaries(this.canvas, statusPre.z, { x, y })\r\n\r\n            this.statusRendering.x = zx;\r\n            this.statusRendering.y = zy;\r\n            this.statusRendering.z = statusPre.z;\r\n            // draw(ctx, image, this.statusRendering)\r\n        });\r\n\r\n        console.log(PARAM.url)\r\n        if (PARAM.url) {\r\n            console.log(PARAM.url)\r\n            loadImage(PARAM.url).then(img => { \r\n                this.img = img as HTMLImageElement;\r\n            });\r\n        } else {\r\n            loadImage().then(img => { \r\n                this.img = img as HTMLImageElement;\r\n                // this.canvas.width = this.img.width;\r\n                // this.canvas.height = this.img.height;\r\n            });\r\n        }\r\n\r\n\r\n        this.render();\r\n\r\n    }\r\n    public render() {\r\n        requestAnimationFrame(() => { this.render(); });\r\n\r\n        if (this.needInterpolation) {\r\n            if (this.easingInterpolation) {\r\n                this.statusRendering = easingMotion(this.statusRendering, this.statusTarget, this.speedInterpolation);\r\n                if (Vector.distance(this.statusRendering, this.statusTarget) < 1) {\r\n                    this.statusRendering.x = this.statusTarget.x\r\n                    this.statusRendering.y = this.statusTarget.y\r\n                    this.statusRendering.z = this.statusTarget.z\r\n                    this.needInterpolation =  false;\r\n                }\r\n            } else {\r\n                this.statusRendering = easingLinear(this.statusRendering, this.statusTarget, this.speedInterpolation);\r\n                // if (Vector.distance(this.statusRendering, this.statusTarget) < 20) {\r\n                if (Vector.distance(this.statusRendering, this.statusTarget) < this.speedInterpolation * 150) {\r\n                    this.statusRendering.x = this.statusTarget.x\r\n                    this.statusRendering.y = this.statusTarget.y\r\n                    this.statusRendering.z = this.statusTarget.z\r\n                    this.needInterpolation =  false;\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        draw(this.ctx, this.img, this.statusRendering);\r\n        // draw(this.ctx, this.img)\r\n    }\r\n}\r\n\r\n// https://easings.net/\r\nexport const easingLinear = (v1: Vector, v2: Vector, speed: number = 1) => {\r\n    const v = Vector.subtract(v2, v1);\r\n    v.normalize();\r\n    // const len = v.length()\r\n    // console.log(len)\r\n    return new Vector(\r\n        v1.x + v.x * speed * 150,\r\n        v1.y + v.y * speed * 150,\r\n        v1.z + v.z * speed * 150,\r\n    );\r\n};\r\nexport const easingMotion = (v1: Vector, v2: Vector, speed: number = 1) => {\r\n    const v = Vector.subtract(v2, v1);\r\n    return new Vector(\r\n        v1.x + v.x * speed,\r\n        v1.y + v.y * speed,\r\n        v1.z + v.z * speed,\r\n    );\r\n};","import { Vector } from './Util';\r\nimport { Solution } from './index';\r\n\r\n\r\nexport class Controller {\r\n    solution: Solution;\r\n    div: HTMLDivElement;\r\n    currentIndex = -1;\r\n    timeline: Vector[] = [];\r\n\r\n    divFrameNum: HTMLDivElement;\r\n\r\n    constructor(solution: Solution) {\r\n        this.solution = solution;\r\n\r\n        this.div = document.createElement('div');\r\n        this.solution.div.appendChild(this.div);\r\n\r\n        const setA = document.createElement('div');\r\n        setA.style.display = 'flex';\r\n        this.div.appendChild(setA);\r\n\r\n        const divKeyNew = document.createElement('div');\r\n        setA.appendChild(divKeyNew);\r\n        divKeyNew.textContent = 'Create Key';\r\n        divKeyNew.style.width = '100px';\r\n        divKeyNew.style.color = 'aqua';\r\n        divKeyNew.onclick = () => {\r\n            this.timeline.push(Vector.deepCopy(solution.canvasImage.statusRendering));\r\n            this.currentIndex = this.timeline.length - 1;\r\n\r\n            this.updateFrameNumber();\r\n        }\r\n        const divKeyUpdate = document.createElement('div');\r\n        setA.appendChild(divKeyUpdate);\r\n        divKeyUpdate.textContent = 'Update Key';\r\n        divKeyUpdate.style.width = '100px';\r\n        divKeyUpdate.style.color = 'aqua';\r\n        divKeyUpdate.onclick = () => {\r\n\r\n            this.timeline[this.currentIndex] = Vector.deepCopy(solution.canvasImage.statusRendering);\r\n            // console.log('update frame');\r\n        }\r\n        const divPre = document.createElement('div');\r\n        setA.appendChild(divPre);\r\n        divPre.textContent = '<<<';\r\n        divPre.style.paddingRight = '20px'\r\n        divPre.style.color = 'aqua';\r\n        divPre.onclick = () => {\r\n            // console.log(this.solution.canvasImage.statusRendering);\r\n            this.currentIndex--;\r\n            if (this.currentIndex < 0) {\r\n                this.currentIndex = 0;\r\n            }\r\n            this.updateTarget();\r\n            this.updateFrameNumber();\r\n\r\n        }\r\n        const divPost = document.createElement('div');\r\n        setA.appendChild(divPost);\r\n        divPost.textContent = '>>>';\r\n        divPost.style.color = 'aqua';\r\n        divPost.onclick = () => {\r\n            // console.log(this.solution.canvasImage.statusRendering);\r\n            this.currentIndex++;\r\n            if (this.currentIndex > this.timeline.length - 1) {\r\n                this.currentIndex = this.timeline.length - 1\r\n            }\r\n            this.updateTarget();\r\n            this.updateFrameNumber();\r\n        }\r\n\r\n        const divAni = document.createElement('div');\r\n        this.div.appendChild(divAni);\r\n        divAni.textContent = 'Play';\r\n        // divRotate.style.position = 'absolute';\r\n        divAni.style.color = 'aqua';\r\n        divAni.onclick = () => {\r\n            this.solution.canvasImage.needInterpolation = !this.solution.canvasImage.needInterpolation;\r\n        }\r\n\r\n        let checkBoxUIB = getCheckBox('Easing Interpolation');\r\n        this.div.append(checkBoxUIB.div);\r\n        checkBoxUIB.checkBox.checked = true;\r\n        checkBoxUIB.checkBox.onchange = () => {\r\n            if (checkBoxUIB.checkBox.checked === true) {\r\n                this.solution.canvasImage.easingInterpolation = true;\r\n            } else {\r\n                this.solution.canvasImage.easingInterpolation = false;\r\n            }\r\n        }\r\n\r\n        let slider = getSlider('Speed', '0', '100')\r\n        slider.text.textContent = 'Speed: '\r\n        this.div.append(slider.div);\r\n        slider.slider.oninput = () => {\r\n            const val = +((+slider.slider.value) * 0.001  + 0.03).toFixed(3);\r\n            slider.text.textContent = 'Speed: ' + val;\r\n            this.solution.canvasImage.speedInterpolation = val;\r\n        }\r\n\r\n\r\n        this.divFrameNum = document.createElement('div');\r\n        this.divFrameNum.style.display = 'flex';\r\n        this.div.appendChild(this.divFrameNum);\r\n        this.updateFrameNumber();\r\n\r\n        const paragraph = document.createElement('p');\r\n        paragraph.textContent = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/worldmap/worldMap_03.jpg';\r\n        this.div.append(paragraph);\r\n    }\r\n    public updateFrameNumber() {\r\n        while (this.divFrameNum.lastElementChild) {\r\n            this.divFrameNum.removeChild(this.divFrameNum.lastElementChild);\r\n        }\r\n        for(let i = 0; i < this.timeline.length; ++i) {\r\n            if (this.currentIndex === i) {\r\n                this.divFrameNum.appendChild(getP(i, 'aqua'));\r\n            } else {\r\n                this.divFrameNum.appendChild(getP(i, '#999'));\r\n            }\r\n        }\r\n\r\n    }\r\n    public updateTarget() {\r\n        this.solution.canvasImage.statusTarget = new Vector(\r\n            this.timeline[this.currentIndex].x,\r\n            this.timeline[this.currentIndex].y,\r\n            this.timeline[this.currentIndex].z,\r\n        );\r\n        this.solution.canvasImage.needInterpolation = true;\r\n    }\r\n}\r\n\r\nconst getP = (num: number , col: string) => {\r\n    const p = document.createElement('p')\r\n    p.textContent = ` ${num} `;\r\n    p.style.paddingRight = '10px';\r\n    p.style.color = col\r\n    return p;\r\n}\r\nconst getSlider = (title: string, min: string = '2009', max: string = '2015') => {\r\n    // <input type=\"range\" min=\"1\" max=\"100\" value=\"50\" class=\"slider\" id=\"myRange\">\r\n    const div = document.createElement('div');\r\n    div.style.display = 'flex';\r\n\r\n    const slider = document.createElement('input');\r\n    slider.type = 'range';\r\n    slider.min = min;\r\n    slider.max = max;\r\n\r\n    const text = document.createElement('div');\r\n    text.textContent = title;\r\n    text.style.color = '#aaa';\r\n    div.appendChild(slider);\r\n    div.appendChild(text);\r\n\r\n    return {\r\n        div, slider, text\r\n    }\r\n};\r\nconst getCheckBox = (title: string) => {\r\n    const div = document.createElement('div');\r\n    div.style.display = 'flex';\r\n\r\n    const checkBox = document.createElement('input');\r\n    checkBox.type = 'checkbox';\r\n    checkBox.defaultChecked = false;\r\n    const text = document.createElement('div');\r\n    text.textContent = title;\r\n    text.style.color = '#aaa';\r\n    div.appendChild(checkBox);\r\n    div.appendChild(text);\r\n\r\n    return {\r\n        div, checkBox\r\n    }\r\n};","import { RendererCanvas, getImgFromURL } from '../../../lib'\r\nimport { Vector, draw, zoomOffset, applyBoundaries, loadImage } from './Util';\r\nimport { CanvasImage } from './Canvas';\r\nimport { Controller } from './Controller';\r\nexport class Solution {\r\n    public divHost: HTMLElement;\r\n    // public renderer: Renderer;\r\n    public div: HTMLElement\r\n    public canvasImage: CanvasImage;\r\n    public controller: Controller;\r\n    constructor(id: string) {\r\n        this.divHost = document.getElementById(id)\r\n\r\n        // Center align\r\n        this.divHost.style.display = 'flex';\r\n        this.divHost.style.alignItems = 'center';\r\n\r\n        this.div = document.createElement('div');\r\n        this.divHost.appendChild(this.div);\r\n        this.div.style.marginLeft = 'auto';\r\n        this.div.style.marginRight = 'auto';\r\n        this.div.style.backgroundColor = '#555';\r\n        this.div.style.width = '1000px';\r\n        this.div.style.height = '800px';\r\n\r\n\r\n\r\n        // TODO\r\n        // You code goes here for one time operation\r\n\r\n        this.canvasImage = new CanvasImage(this);\r\n        this.controller = new Controller(this);\r\n\r\n \r\n\r\n\r\n        // this.start();\r\n    }\r\n    public destroy() {\r\n        while (this.divHost.lastElementChild) {\r\n            this.divHost.removeChild(this.divHost.lastElementChild);\r\n        }\r\n    }\r\n}\r\n"],"names":["Vector","static","v0","v1","x","y","z","Math","sqrt","v","constructor","this","length","normalize","len","applyBoundaries","canvas","scale","loadImage","url","Promise","resolve","reject","img","Image","onload","onerror","err","src","CanvasImage","solution","statusRendering","statusTarget","needInterpolation","ctx","speedInterpolation","easingInterpolation","document","createElement","style","background","width","height","div","appendChild","getContext","statusPre","status","isDrag","addEventListener","e","offsetX","offsetY","dx","dy","deltaY","oy","zx","zy","isZooming","newX","abs","newY","zoomOffset","console","log","PARAM","then","render","zooming","requestAnimationFrame","easingMotion","distance","easingLinear","clearRect","save","undefined","translate","drawImage","restore","v2","speed","subtract","Controller","currentIndex","timeline","divFrameNum","setA","display","divKeyNew","textContent","color","onclick","push","deepCopy","canvasImage","updateFrameNumber","divKeyUpdate","divPre","paddingRight","updateTarget","divPost","divAni","checkBoxUIB","getCheckBox","append","checkBox","checked","onchange","slider","getSlider","text","oninput","val","value","toFixed","paragraph","lastElementChild","removeChild","i","getP","num","col","p","title","min","max","type","defaultChecked","Solution","id","divHost","controller","getElementById","alignItems","marginLeft","marginRight","backgroundColor","destroy"],"sourceRoot":""}